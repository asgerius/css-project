[{"tags": ["c", "scanf"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 0, "creation_date": 1548893044, "post_id": 54451392, "comment_id": 95711255, "body": "I don&#39;t understand you statement. In this example: <code>&quot;a b c d e&quot;</code> what are <code>A</code> and <code>C</code> and why?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548893058, "post_id": 54451392, "comment_id": 95711260, "body": "You can&#39;t use <code>fscanf</code> and you don&#39;t use it. Just use <code>getchar()</code> and similar, and write your own parser, for you own specific needs."}, {"owner": {"reputation": 31, "user_id": 7823835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1450035dfad7396de9124e150e26050?s=128&d=identicon&r=PG&f=1", "display_name": "Metaozis", "link": "https://stackoverflow.com/users/7823835/metaozis"}, "edited": false, "score": 1, "creation_date": 1548893175, "post_id": 54451392, "comment_id": 95711293, "body": "Sorry I probably didn&#39;t state it clearly.  Assume the following is my file:  0x123456 0x67891.  I only have this line in my file, I want to capture both hex numbers respectively, yes I understand that we can just use %lx %lx to capture this two numbers, but the problem is, these two numbers might be just white space, like _ _ 0x67891, I have to figure out a way using only fscanf to determine if the first hex number is whitespace or the second hex number is white space."}, {"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548893180, "post_id": 54451392, "comment_id": 95711295, "body": "Welcome to stackoverflow! Please read <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> . Show what you have tried yourself. Help community to help you"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 1, "creation_date": 1548893672, "post_id": 54451392, "comment_id": 95711408, "body": "Like Kamil Cuk mentioned, you should process it char-by-char. Another option is to use <code>fgets</code> and work with the entire string in memory (it may be simpler)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1548893756, "post_id": 54451392, "comment_id": 95711422, "body": "It seems like you just have to check the first character of the input. If the first character is space, then <code>A</code> is a space and <code>B</code> is everything after the next space. If the first character is not a space, <code>A</code> is the first string and <code>B</code> is everything after the first space."}, {"owner": {"reputation": 31, "user_id": 7823835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1450035dfad7396de9124e150e26050?s=128&d=identicon&r=PG&f=1", "display_name": "Metaozis", "link": "https://stackoverflow.com/users/7823835/metaozis"}, "edited": false, "score": 0, "creation_date": 1548893784, "post_id": 54451392, "comment_id": 95711430, "body": "But will fgets skip the leadning whitespaces?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1548893838, "post_id": 54451392, "comment_id": 95711451, "body": "@Metaozis No, <code>fgets()</code> reads a whole line, it doesn&#39;t skip anything."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1548893819, "post_id": 54451552, "comment_id": 95711439, "body": "This should use <code>sscanf()</code> rather than <code>fscanf()</code>, because you need to read the whole line first to tell if first or last char is space."}], "tags": [], "owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "is_accepted": true, "score": 1, "last_activity_date": 1548941819, "last_edit_date": 1548941819, "creation_date": 1548893745, "answer_id": 54451552, "question_id": 54451392, "link": "https://stackoverflow.com/questions/54451392/how-do-i-use-fscanf-to-capture-space/54451552#54451552", "title": "How do I use fscanf to capture space?", "body": "<pre><code>char str[BUFF_SIZE];\n\nfgets(str, sizeof(str), fp);\n\nif (the first char is a space) {\n    Means A == \" \";\n}\n\nif (the last char is a space) {\n    Means B == \" \";\n}\n\nif (both are spaces) {\n    done;\n} else if (only one is space) {\n    sscanf(scan for one string, which will be the one that wasn't a space);\n} else {\n    sscanf(scan for two strings, separated by a space);\n}\n</code></pre>\n\n<p>It could be doable in a single line, fscanf is very powerful, but I have never tried things that complicate too much, and someone else may explain that better.  However, this should work.</p>\n"}], "owner": {"reputation": 31, "user_id": 7823835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1450035dfad7396de9124e150e26050?s=128&d=identicon&r=PG&f=1", "display_name": "Metaozis", "link": "https://stackoverflow.com/users/7823835/metaozis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 54451552, "answer_count": 1, "score": 0, "last_activity_date": 1548941819, "creation_date": 1548892604, "last_edit_date": 1548893058, "question_id": 54451392, "link": "https://stackoverflow.com/questions/54451392/how-do-i-use-fscanf-to-capture-space", "title": "How do I use fscanf to capture space?", "body": "<p>I am new to C programming, and I am learning to use fscanf function (or the scanf family functions.). I am having some trouble understanding how to use fscanf function to capture the whitespace.</p>\n\n<p>Suppose I have the following scenario, I have opened a file, and file only contains one line of character, and the layout of the only line in this file is:</p>\n\n<p>A_C</p>\n\n<p>A is a sequence of characters, which is a string.</p>\n\n<p>_ is a white space, I use _ to show it more clearly.</p>\n\n<p>C is a sequence of characters, which is a string.</p>\n\n<p>In this scenario, _ will always stays as a white space. A or C might be a single white space as wll.</p>\n\n<p>My question is, how do I use fscanf function to capture both A and C? Regardless of whether they are whitespace or the actual sequence of characters? That being said, if A is a sequence of characters, then I capture this sequence of characters, if A is a whitespace, I capture this whitespace? (Same idea applies to C).</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c", "optimization"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1548890724, "post_id": 54451067, "comment_id": 95710684, "body": "Not the answer, but the inline assembly listing looks neat. What IDE is that?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1548890880, "post_id": 54451067, "comment_id": 95710720, "body": "<code>TLE5012B_zCONFIG zTleSensorConfig;</code>  appears to shadow a global variable. It is also uninitialised at the time of first reference."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1548891214, "post_id": 54451067, "comment_id": 95710810, "body": "Oh, it appears I was confused by your long variable names. Local variable names don&#39;t need to be that long, since they are local to the function."}, {"owner": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 1, "creation_date": 1548891318, "post_id": 54451067, "comment_id": 95710831, "body": "Are you certain that <code>Hallsensor_ReadRegister</code> is not writing more than <code>sizeof(TLE5012B_zCONFIG)</code> bytes? If it is, that might be where your pointer is getting clobbered."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1548891517, "post_id": 54451067, "comment_id": 95710879, "body": "Also, stucts are assignable lvalues."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1548892429, "post_id": 54451067, "comment_id": 95711090, "body": "<code>uint16* pu16MasterConfigPointer = &amp;hallsensor_zTleConfig[ eUnit ];</code> is an error (unless <code>TLE5012B_zCONFIG</code> and <code>uint16</code> are typedefs for the same type, and <code>TLE5012B_CONFIG_REG_COUNT == 1</code>)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1548892490, "post_id": 54451067, "comment_id": 95711106, "body": "It would help to show the definition of <code>TLE5012B_zCONFIG</code>  . (It would help even more to post a MCVE)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1548893270, "post_id": 54451067, "comment_id": 95711311, "body": "I guess - UB in the code. If the optimization does such a things it means - the error is somewhere in the code. It has just been unveiled. In similar cases you should look for the error in your code as long as it is needed to find it.  BTW - as higher optimisation as more dificult is to see what code is generated for the particular line."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1548906686, "post_id": 54451067, "comment_id": 95714327, "body": "Not only are the initializations of <code>pu16MasterConfigPointer</code> and <code>pu16SensorConfigPointer</code> invalid as given, but also, accessing the pointed-to objects through those pointers violates the strict aliasing rule, producing undefined behavior.  It would be OK if instead they were pointers to a character type, such as (probably) <code>uint8_t</code>.  Or do you have <code>memcmp()</code> available to you?  Would that be a viable alternative for comparing the structures?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548915499, "post_id": 54451067, "comment_id": 95717023, "body": "you should take care about undefined behavior instead of wondering <i>how to protect your code against optimization issues</i>. And asking for a book or tutorial is off-topic here"}, {"owner": {"reputation": 11, "user_id": 7134180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05daa614838ecb209eacc4037f0c052?s=128&d=identicon&r=PG&f=1", "display_name": "NoyanAbi", "link": "https://stackoverflow.com/users/7134180/noyanabi"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1548953935, "post_id": 54451067, "comment_id": 95739180, "body": "@HolyBlackCat, the image is from the debugger Ozone."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7134180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05daa614838ecb209eacc4037f0c052?s=128&d=identicon&r=PG&f=1", "display_name": "NoyanAbi", "link": "https://stackoverflow.com/users/7134180/noyanabi"}, "is_accepted": false, "score": 0, "last_activity_date": 1549039870, "last_edit_date": 1549039870, "creation_date": 1548962750, "answer_id": 54467897, "question_id": 54451067, "link": "https://stackoverflow.com/questions/54451067/why-does-optimization-change-my-pointer-address-for-no-reason/54467897#54467897", "title": "Why does optimization change my pointer address for no reason?", "body": "<p>@John Bollinger was right saying that the pointers violate the strict aliasing rule which was unknown to me.\nThere is a good explanation of this rule in this <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">post</a>.</p>\n\n<p>Replacing the for loop with memcmp did the trick.</p>\n"}], "owner": {"reputation": 11, "user_id": 7134180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05daa614838ecb209eacc4037f0c052?s=128&d=identicon&r=PG&f=1", "display_name": "NoyanAbi", "link": "https://stackoverflow.com/users/7134180/noyanabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549039870, "creation_date": 1548890491, "last_edit_date": 1548892235, "question_id": 54451067, "link": "https://stackoverflow.com/questions/54451067/why-does-optimization-change-my-pointer-address-for-no-reason", "title": "Why does optimization change my pointer address for no reason?", "body": "<p>I am having issues with optimization in an embedded C application. The address of the pointer changes to 0x0 unexpectedly and breaks my code. </p>\n\n<p>I am using GNU MCU Eclipse ARM Embedded GCC toolchain. I am using a sensor with which I with communicate via SPI. The sensor has 8 configuration registers of 16bits each.\nI keep a local copy of the configurations in a struct called \u201challsensor_zTleConfig\u201d\nI read the sensor\u2019s stored configuration regularly (\u201czTleSensorConfig\u201d) and compare it against the local copy to see if any memory corruption occurred.</p>\n\n<p>With no optimization this process works.</p>\n\n<p>With optimization, in the code below, the pointer to the master/local copy suddenly changes to 0x0 for no apparent reason.</p>\n\n<pre><code>// Master copy of configuration of the TLE chips\nstatic TLE5012B_zCONFIG hallsensor_zTleConfig[ HALLSENSOR_COUNT ];\n\nstatic void Hallsensor_VerifyConfig( HALLSENSOR_eUNIT eUnit )\n{\n    TLE5012B_zCONFIG zTleSensorConfig;\n    uint16* pu16MasterConfigPointer = &amp;hallsensor_zTleConfig[ eUnit ];\n    uint16* pu16SensorConfigPointer = &amp;zTleSensorConfig;\n    uint8 u8Index;\n\n    // Read all configuration parameters\n    (void)Hallsensor_ReadRegister( TLE5012B_MOD_2, &amp;zTleSensorConfig, sizeof( TLE5012B_zCONFIG ) );\n\n    // Copy over configurations modified by Auto-calibration and reserved bits\n    hallsensor_zTleConfig[ eUnit ].zMod3.u12ANG_BASE     =     zTleSensorConfig.zMod3.u12ANG_BASE;\n    hallsensor_zTleConfig[ eUnit ].zSynch.i12AmpSynch    =     zTleSensorConfig.zSynch.i12AmpSynch;\n    hallsensor_zTleConfig[ eUnit ].zOffsetX.i12XOffset   = zTleSensorConfig.zOffsetX.i12XOffset;\n    hallsensor_zTleConfig[ eUnit ].zOffsetY.i12YOffset   = zTleSensorConfig.zOffsetY.i12YOffset;\n    hallsensor_zTleConfig[ eUnit ].zMod4.u7TCO_X_T       = zTleSensorConfig.zMod4.u7TCO_X_T;\n    hallsensor_zTleConfig[ eUnit ].zTcoY.u7TCO_Y_T       = zTleSensorConfig.zTcoY.u7TCO_Y_T;\n    hallsensor_zTleConfig[ eUnit ].zMod2.u1Reserved      = zTleSensorConfig.zMod2.u1Reserved;\n    hallsensor_zTleConfig[ eUnit ].zMod4.u1Reserved      = zTleSensorConfig.zMod4.u1Reserved;\n    hallsensor_zTleConfig[ eUnit ].zOffsetX.u4Reserved   = zTleSensorConfig.zOffsetX.u4Reserved;\n    hallsensor_zTleConfig[ eUnit ].zOffsetY.u4Reserved   = zTleSensorConfig.zOffsetY.u4Reserved;\n    hallsensor_zTleConfig[ eUnit ].zSynch.u4Reserved     = zTleSensorConfig.zSynch.u4Reserved;\n\n    // Compare local Master config setting to sensor settings and look for corrupted data\n    for ( u8Index = 0; u8Index &lt; TLE5012B_CONFIG_REG_COUNT; u8Index++ )\n    {\n        // Configuration invalid?\n        if ( pu16MasterConfigPointer[u8Index] != pu16SensorConfigPointer[u8Index] )\n        {\n            hallsensor_bConfigOk[ eUnit ] = FALSE;\n        }\n    }\n\n    // Data corrupted?\n    if ( !hallsensor_bConfigOk[ eUnit ] )\n    {\n        // Do stuff\n    }\n}\n</code></pre>\n\n<p>At the start of the function, pu16MasterConfigPointer and pu16SensorConfigPointer correctly hold the address of their corresponding structs. However, right before the first for loop, pu16MasterConfigPointer changes to 0x0 and all the for loop conditions result TRUE.</p>\n\n<p>I have tried many combinations of volatile for different variables and pointers  and the results still break the code in various other ways (e.g. for loop does not branch out for if statement looking at the asm code resulting in statement always going to \"hallsensor_bConfigOk[ eUnit ] = FALSE;\")</p>\n\n<p>PS: A good resource to learn about how to protect your code against optimization issues would be very welcome.</p>\n\n<p>Screenshot of debugger showing pointer = 0x0 w/ asm code</p>\n\n<p><a href=\"https://i.stack.imgur.com/OjI9R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OjI9R.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "linux", "unix", "command-line", "arguments"], "comments": [{"owner": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 2, "creation_date": 1548890578, "post_id": 54451019, "comment_id": 95710641, "body": "If you&#39;re going to use <code>getopt</code>, you shouldn&#39;t be using <code>argv</code> directly in your <code>switch</code> block. Instead, you should be using <code>optarg</code>."}, {"owner": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 0, "creation_date": 1548890703, "post_id": 54451019, "comment_id": 95710679, "body": "You should also explicitly show the command you are entering."}, {"owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "reply_to_user": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 0, "creation_date": 1548894502, "post_id": 54451019, "comment_id": 95711637, "body": "@MikeHolt What do you mean by that? I&#39;m sorry I didn&#39;t understand."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1548909492, "post_id": 54451019, "comment_id": 95715020, "body": "@PManojMJ If you find any answer helpful ( answered your question ) it is customary here on StackOverflow to accept the answer or upvote it."}, {"owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1548909697, "post_id": 54451019, "comment_id": 95715085, "body": "@Chimera I&#39;m sorry. I was busy doing my work. I did it now. Thank you for reminding me. Keep it up man. Cheers!!"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "edited": false, "score": 0, "creation_date": 1548895117, "post_id": 54451328, "comment_id": 95711784, "body": "Thanks for the resource. I&#39;ll go through it and will post an update."}], "tags": [], "owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "is_accepted": true, "score": 1, "last_activity_date": 1548892142, "creation_date": 1548892142, "answer_id": 54451328, "question_id": 54451019, "link": "https://stackoverflow.com/questions/54451019/c-program-help-to-open-a-file-in-unix-linux-using-getopt-and-command-line-argume/54451328#54451328", "title": "C program help to open a file in Unix/Linux using getopt and command line argument", "body": "<p>As mentioned in the comments, you should be using <code>optarg</code>. Here is an example that is pretty comprehensive:</p>\n\n<pre><code>/*\n    example of command line parsing via getopt\n    usage: getopt [-dmp] -f fname [-s sname] name [name ...]\n\n    Paul Krzyzanowski\n*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint debug = 0;\n\nint\nmain(int argc, char **argv)\n{\n    extern char *optarg;\n    extern int optind;\n    int c, err = 0; \n    int mflag=0, pflag=0, fflag=0;\n    char *sname = \"default_sname\", *fname;\n    static char usage[] = \"usage: %s [-dmp] -f fname [-s sname] name [name ...]\\n\";\n\n    while ((c = getopt(argc, argv, \"df:mps:\")) != -1)\n        switch (c) {\n        case 'd':\n            debug = 1;\n            break;\n        case 'm':\n            mflag = 1;\n            break;\n        case 'p':\n            pflag = 1;\n            break;\n        case 'f':\n            fflag = 1;\n            fname = optarg;\n            break;\n        case 's':\n            sname = optarg;\n            break;\n        case '?':\n            err = 1;\n            break;\n        }\n    if (fflag == 0) {   /* -f was mandatory */\n        fprintf(stderr, \"%s: missing -f option\\n\", argv[0]);\n        fprintf(stderr, usage, argv[0]);\n        exit(1);\n    } else if ((optind+1) &gt; argc) { \n        /* need at least one argument (change +1 to +2 for two, etc. as needeed) */\n\n        printf(\"optind = %d, argc=%d\\n\", optind, argc);\n        fprintf(stderr, \"%s: missing name\\n\", argv[0]);\n        fprintf(stderr, usage, argv[0]);\n        exit(1);\n    } else if (err) {\n        fprintf(stderr, usage, argv[0]);\n        exit(1);\n    }\n    /* see what we have */\n    printf(\"debug = %d\\n\", debug);\n    printf(\"pflag = %d\\n\", pflag);\n    printf(\"mflag = %d\\n\", mflag);\n    printf(\"fname = \\\"%s\\\"\\n\", fname);\n    printf(\"sname = \\\"%s\\\"\\n\", sname);\n\n    if (optind &lt; argc)  /* these are the arguments after the command-line options */\n        for (; optind &lt; argc; optind++)\n            printf(\"argument: \\\"%s\\\"\\n\", argv[optind]);\n    else {\n        printf(\"no arguments left to process\\n\");\n    }\n    exit(0);\n}\n</code></pre>\n\n<p>This example and more information is found <a href=\"https://www.cs.rutgers.edu/~pxk/416/notes/c-tutorials/getopt.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 117, "user_id": 4984023, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/bcD0G.jpg?s=128&g=1", "display_name": "DuskXtremeX", "link": "https://stackoverflow.com/users/4984023/duskxtremex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "accepted_answer_id": 54451328, "answer_count": 1, "score": 2, "last_activity_date": 1549098251, "creation_date": 1548890194, "last_edit_date": 1549098251, "question_id": 54451019, "link": "https://stackoverflow.com/questions/54451019/c-program-help-to-open-a-file-in-unix-linux-using-getopt-and-command-line-argume", "title": "C program help to open a file in Unix/Linux using getopt and command line argument", "body": "<p>I am trying to work on my college assignment that required programming in C in Unix. I have to take command line arguments and open a file with the name passed as an argument. I've been trying to find help, but couldn't find any resources to help me understand how to parse the argument as a string and open the required file. I'm seeking examples or links that point me in the right direction.</p>\n\n<p>I'm including the short piece of code where I'm trying to parse the options using getopt(). What am I doing wrong?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;unistd.h&gt;\n\n\nint main(int argc[], char *argv[])\n{\n        int option;\n        while(option = getopt(argc, argv, \"hi:o:\") != -1)\n        {\n                switch (option){\n                        case 'h':\n                                printf(\"Usage : -i [input file name]\\n-o [output file name]\");\n                                break;\n                        case 'i':\n                                printf(\"\\n Input file is: %s\",argv[1]);\n                                break;\n                        case 'o':\n                                printf(\"\\n Output file is: %s\",argv[2]);\n                                break;\n                }\n        }\n\nreturn 0;\n}\n</code></pre>\n\n<p>I keep getting \"Unrecognized command line option error\". Also, when I try to include a text file, I believe that the error says that the option is being parsed as an int, but the argument is a string. </p>\n\n<p>P.S: I'm not really looking get any direct answers here. I want the community to help me learn in the best possible way.</p>\n"}, {"tags": ["php", "c", "php-extension", "php-7.2"], "comments": [{"owner": {"reputation": 1027, "user_id": 1252150, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/2692a1050114b2b47c00515b843e0db6?s=128&d=identicon&r=PG", "display_name": "Hitesh", "link": "https://stackoverflow.com/users/1252150/hitesh"}, "edited": false, "score": 0, "creation_date": 1551421229, "post_id": 54450795, "comment_id": 96641373, "body": "did you find any solution?"}], "owner": {"reputation": 49, "user_id": 4924493, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3S_QiJ6iEKY/AAAAAAAAAAI/AAAAAAAAAQc/ZDXZDTTG38s/photo.jpg?sz=128", "display_name": "Ahsan Zahid Chowdhury", "link": "https://stackoverflow.com/users/4924493/ahsan-zahid-chowdhury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548908441, "creation_date": 1548888897, "last_edit_date": 1548908441, "question_id": 54450795, "link": "https://stackoverflow.com/questions/54450795/unable-to-call-php-user-define-function-from-zend-extension", "title": "Unable to call php user define function from Zend Extension", "body": "<p>I am trying to create a PHP extension for PHP 7.2, I have already managed to create for 5.6 in PHP 7.2 I have made the required changes in the code based on the new Zend API, but now I am stuck in this point, I want to call a php user define function from the extension. </p>\n\n<p>I have tried with the call_user_function_ex function to call my user define function. </p>\n\n<pre><code>zval *function_name, *retval_ptr, *param_file, **params[1]; \n\nTSRMLS_FETCH();\n\nZVAL_STRINGL(function_name, functionRequire,\n        strlen(functionRequire));\n\nZVAL_STRINGL(param_file, ranKey,\n        strlen(ranKey));    \n\nparams[0] = &amp;param_file;        \nphp_printf(\"%s %s 1st\",functionRequire,ranKey);\n//RETURN_NULL();\nif (call_user_function_ex(CG(function_table), NULL, function_name,\n        &amp;retval_ptr, 1, params, 0, NULL TSRMLS_CC) != SUCCESS) {\n    php_printf(\"%s\\n\",contactInfo );        \n    zend_error(E_ERROR, \"Function call failed \");\n    RETURN_NULL();\n}\nphp_printf(\"%s %s 2nd\",functionRequire,ranKey);\nRETURN_NULL();\nFREE_ZVAL(function_nameCh);\n\nFREE_ZVAL(function_name);\nFREE_ZVAL(param_file);\n</code></pre>\n\n<p>I have tried with printing the value after each statement after that I realize that it getting crashed when it tried to call \"call_user_function_ex\" function. Am I doing anything wrong but the same code is working fine in PHP 5.6</p>\n\n<p>Please Help.</p>\n"}, {"tags": ["c", "architecture", "binary", "bit-manipulation"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1548888448, "post_id": 54450606, "comment_id": 95710060, "body": "<code>!0x0 == 1</code> ... <code>!0x0 + !0x0 == 2</code> ... just saying :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10992941"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1548888571, "post_id": 54450606, "comment_id": 95710099, "body": "@pmg ahhhh I&#39;m catching your drift"}, {"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1548896977, "post_id": 54450606, "comment_id": 95712290, "body": "First of all, do you know the size of <code>int</code> and the size of <code>short</code> for your arquitecture/compiler? Assuming <code>sizeof(int) == sizeof(int32_t)</code>, and <code>sizeof(short) == sizeof(int16_t)</code> is a big assumption."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10992941"}, "edited": false, "score": 0, "creation_date": 1548889955, "post_id": 54450760, "comment_id": 95710482, "body": "I sort of see what you&#39;re doing, but why add two <code>!</code> operators next to each <code>0xff</code>? Wouldn&#39;t that just negate the negation? Also, I&#39;m supposed to only use 8 operators at the maximum."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548890040, "post_id": 54450760, "comment_id": 95710507, "body": "I need number <code>1</code>. <code>!!</code> converts any non zero to <code>1</code>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548890163, "post_id": 54450760, "comment_id": 95710538, "body": "then 3rd sollution. There is no other way"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1548891465, "post_id": 54450760, "comment_id": 95710869, "body": "@P__J__ hold my beer ;-)"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1548889486, "last_edit_date": 1548889486, "creation_date": 1548888666, "answer_id": 54450760, "question_id": 54450606, "link": "https://stackoverflow.com/questions/54450606/how-to-determine-if-an-int-is-16-bits/54450760#54450760", "title": "How to Determine if an Int is 16 Bits", "body": "<p>that is your sollution</p>\n\n<pre><code> (unsigned)~0 == 0xffff\n</code></pre>\n\n<p>or without <code>==</code></p>\n\n<pre><code> !((unsigned)~0 - 0xffff)\n\n !((unsigned)~0 ^ 0xffff)\n</code></pre>\n\n<p>or if only 0xff is allowed</p>\n\n<pre><code>!((unsigned)~0 ^ (((0xff &lt;&lt; (!!0xff &lt;&lt; !!0xff &lt;&lt; !!0xff &lt;&lt; !!0xff))) | 0xff)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": 1, "last_activity_date": 1548891446, "creation_date": 1548891446, "answer_id": 54451217, "question_id": 54450606, "link": "https://stackoverflow.com/questions/54450606/how-to-determine-if-an-int-is-16-bits/54451217#54451217", "title": "How to Determine if an Int is 16 Bits", "body": "<p>For readability set <code>invuint = ~0u</code> and <code>invushort = ~((short)0u)</code>, than we can do <code>invuint - invushort</code> which is either <code>0</code> or not. <code>0</code> in standard C is equal to <code>false</code>, so you can see with a simple <code>!(invuint - invushort)</code> if an <code>unsigned int</code> fits into an <code>unsigned short</code>.</p>\n\n<p>But that is most likely not what you are asked to do, it would be a bit too easy. If you need to know if the content of an <code>unsigned int</code> fits into an <code>unsigned short</code> it gets a bit more complicated.</p>\n\n<p>We can reuse the <code>incushort = ~((short)0u)</code> here as a mask.</p>\n\n<p>With <code>an_uint = 0; an_uint = incushort</code> we set the lowest bits of <code>an_uint</code> to ones so we have <code>0x0000ffff</code>. Reversing that with <code>~an_uint</code> gets you <code>0xXXXX0000</code> where the <code>X</code> stand for an unknown number of ones. So if <code>sizeof(unsigned int) == sizeof(unsigned short)</code> we get a <code>0</code> but we could have gotten that simpler, see above.</p>\n\n<p>If we use <code>mask = 0xXXXX0000</code> as a mask to get all of the bits that are larger than an <code>unsigned short</code> with <code>uint_with_unknown_content &amp; mask</code> we get a <code>0</code> if <code>uint_with_unknown_content</code> fits into an <code>unsigned short</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10992941"}, "edited": false, "score": 0, "creation_date": 1548907062, "post_id": 54451757, "comment_id": 95714411, "body": "I like your logic and your answer is very clear and concise, but how would I go about this without using the <code>-</code> operator? Also, I am only allowed to use 8 operators."}, {"owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 0, "creation_date": 1548917786, "post_id": 54451757, "comment_id": 95717958, "body": "I missed the fact that &quot;-&quot; was fordidden. But the only operation required is &quot;-1&quot; and it can be replaced by +(~0). Concerning the number of operators, it fits, but not with a oneliner. I update the answer."}, {"owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 0, "creation_date": 1548937879, "post_id": 54451757, "comment_id": 95729226, "body": "@vastImmortalSuns There was a bug in previous answer, but I found a much simpler way that fully respects the constraints."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10992941"}, "edited": false, "score": 0, "creation_date": 1548963845, "post_id": 54451757, "comment_id": 95744147, "body": "Ah I see! Thanks for clearing that up, I didn&#39;t realize that you could even negate 0, but now that makes perfect sense :)"}], "tags": [], "owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "is_accepted": false, "score": 1, "last_activity_date": 1548938693, "last_edit_date": 1548938693, "creation_date": 1548895341, "answer_id": 54451757, "question_id": 54450606, "link": "https://stackoverflow.com/questions/54450606/how-to-determine-if-an-int-is-16-bits/54451757#54451757", "title": "How to Determine if an Int is 16 Bits", "body": "<p>Solution is based on the fact that <code>x^(x&lt;&lt;1)</code> will have its 16 MSB at zero iff the 17 MSB of <code>x</code>  are all equal and <code>x</code> can be coded on 16 bits.</p>\n\n<p>Hence</p>\n\n<pre><code>return (x^(x&lt;&lt;1))&amp;(0xffff0000)==0;\n</code></pre>\n\n<p>solves the problem.</p>\n\n<p>For readability, operations are split in several instructions and \nto reduce the number of used operators the final test is reversed (it does not seem to be forbidden).</p>\n\n<pre><code>int canNOTbemappedto16bits(int x) {\n   int one = !0x0;  // 1 op\n   int ffff = (unsigned short) ~0x0;//1 op\n   int ffff0000 = (unsigned int) ~0x0 ^ ffff; // 2ops\n   return   (x^(x&lt;&lt;one))&amp;ffff0000 ; // 3ops\n}\n</code></pre>\n\n<p>7 ops!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10992941"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1548938693, "creation_date": 1548887794, "last_edit_date": 1548888604, "question_id": 54450606, "link": "https://stackoverflow.com/questions/54450606/how-to-determine-if-an-int-is-16-bits", "title": "How to Determine if an Int is 16 Bits", "body": "<p>I'm working with bitwise and logical operators in C. I'm familiar with concept and purpose of these operators, but have run into bit of a problem.</p>\n\n<p>I need to determine whether an integer <code>x</code> can fit into a short. I am restricted to using the operators <code>! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</code>. Also, I can only use up to 8 of these operators. </p>\n\n<p>I know from several other posts (like this one: <a href=\"https://stackoverflow.com/questions/7337526/how-to-tell-if-a-32-bit-int-can-fit-in-a-16-bit-short\">How to tell if a 32 bit int can fit in a 16 bit short</a>) that a solution like</p>\n\n<p><code>!(((((x) &amp; 0xffff8000) &gt;&gt; 15) + 1) &amp; 0x1fffe)</code></p>\n\n<p>would work just fine (credit to Emil Romanus). However, I'm also forbidden to use any constants that are not <code>0x0</code> and <code>0xff</code>. </p>\n\n<p>I'm mostly confused on the logic here. Any ideas?</p>\n\n<p>EDIT: I forgot to mention conditional statement are also forbidden. So no ifs, elses, loops etc.</p>\n"}, {"tags": ["c", "gcc", "linker", "clang", "ld"], "answers": [{"comments": [{"owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "edited": false, "score": 0, "creation_date": 1548888976, "post_id": 54450690, "comment_id": 95710216, "body": "Thanks. It should be definition not definitions."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "edited": false, "score": 0, "creation_date": 1548889054, "post_id": 54450690, "comment_id": 95710240, "body": "Yes, @user1424739, sorry for the confusion."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1548889035, "last_edit_date": 1548889035, "creation_date": 1548888295, "answer_id": 54450690, "question_id": 54450568, "link": "https://stackoverflow.com/questions/54450568/how-to-link-to-an-object-with-main-in-it/54450690#54450690", "title": "How to link to an object with main in it?", "body": "<p>The GNU linker has an option <code>--allow-multiple-definition</code>.  When that is used, <code>ld</code> ignores any duplicate definitions, using only the first one it encounters for each symbol.  This applies to definitions of <em>all</em> symbols, of course, not just <code>main</code>.  To use that through the <code>gcc</code> driver, you would use <code>gcc</code>'s <code>-Wl,</code> option:</p>\n\n<pre><code>gcc -o myprog -Wl,--allow-multiple-definition main.o second.o\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "edited": false, "score": 0, "creation_date": 1548889181, "post_id": 54450732, "comment_id": 95710269, "body": "Is there a way to delete an function from a <code>.o</code> file?"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1548898823, "post_id": 54450732, "comment_id": 95712713, "body": "You can use <code>--strip-symbol=main</code> to simply remove the main symbol rather than renaming it.  That won&#39;t reomve the <i>function</i>, just the symbol referring to it.  <code>-N main</code> is the same (short option instead of long)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "edited": false, "score": 0, "creation_date": 1548916826, "post_id": 54450732, "comment_id": 95717549, "body": "@user1424739 there is no way to &quot;remove&quot; an entire function. Because sometimes the linker doesn&#39;t even know where a function actually ends. But as ChrisDodd suggested, you can strip just the symbol name and it won&#39;t interfere with your linking."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1548916962, "post_id": 54450732, "comment_id": 95717611, "body": "@ChrisDodd I agree, stripping also works. The only difference is that the references (if any) to <code>main</code> from <code>b.o</code> will still link to the version in <code>b.o</code> if you rename and will point to the one in <code>a.o</code> if you strip. I think it depends on OP&#39;s use case. But I think they mean what you have suggested."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1548917040, "last_edit_date": 1548917040, "creation_date": 1548888477, "answer_id": 54450732, "question_id": 54450568, "link": "https://stackoverflow.com/questions/54450568/how-to-link-to-an-object-with-main-in-it/54450732#54450732", "title": "How to link to an object with main in it?", "body": "<p>Suppose the two object files are <code>a.o</code> and <code>b.o</code>. Both the files have <code>main()</code> but you only want to use the <code>main()</code> from <code>a.o</code>.</p>\n\n<p>Firstly you have to find the exact name of the function (this is necessary in case there is name mangling or <code>_</code> prepended). </p>\n\n<p>Run - </p>\n\n<pre><code>objdump -t | grep \"main\"\n</code></pre>\n\n<p>This will show the symbol that has the word <code>main</code> in it. Pick the appropriate function name.\nNow we will rename it to something else - </p>\n\n<pre><code>objcopy --redefine-sym main=some_rubbish_name_not_anywhere b.o\n</code></pre>\n\n<p>(replace main with whatever symbol name you got in the above command)</p>\n\n<p>Now you can link your object files as you normally would -</p>\n\n<pre><code>clang a.o b.o -o program\n</code></pre>\n\n<p>The other way would be to completely strip off the <code>main</code> symbol from <code>b.o</code> (as suggested by @ChrisBodd in comments) - </p>\n\n<pre><code>objcopy --strip-symbol=main b.o\n</code></pre>\n"}], "owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54450690, "answer_count": 2, "score": 1, "last_activity_date": 1548917040, "creation_date": 1548887562, "question_id": 54450568, "link": "https://stackoverflow.com/questions/54450568/how-to-link-to-an-object-with-main-in-it", "title": "How to link to an object with main in it?", "body": "<p>I'd like to link an object file (<code>.o</code> file) with a <code>main()</code> to another object file that also has a <code>main()</code>.</p>\n\n<p>I'd like to ignore the <code>main()</code> in the second file, but use the <code>main()</code> in the second <code>.o</code> file. Is there a way to do so? Thanks.</p>\n"}, {"tags": ["c", "glib", "dbus", "gobject", "gio"], "answers": [{"tags": [], "owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "is_accepted": true, "score": 1, "last_activity_date": 1548932579, "creation_date": 1548932579, "answer_id": 54459128, "question_id": 54450400, "link": "https://stackoverflow.com/questions/54450400/how-can-i-convert-a-gdbusinterface-into-a-gdbusproxy/54459128#54459128", "title": "How can I convert a GDBusInterface into a GDBusProxy?", "body": "<p><code>GDBusInterface</code> is an interface which is implemented by the <code>GDBusProxy</code> class, so you already have the <code>GDBusProxy</code> \u2014 you just need to cast it to the right type, which you can do using <code>G_DBUS_PROXY (interface)</code>.</p>\n\n<p>Depending on whether you\u2019re using proxy instances generated by <code>gdbus-codegen</code>, you can then either check whether it\u2019s an instance of the proxy for <code>org.bluez.Adapter1</code> using a macro from the generated code like <code>MY_NAMESPACE_IS_ADAPTER1 (interface)</code>; or you can check the interface name manually using <code>g_str_equal (g_dbus_proxy_get_interface_name (G_DBUS_PROXY (interface)), \"org.bluez.Adapter1\")</code>.</p>\n\n<p>Note that <code>g_dbus_proxy_get_name()</code> will return the well-known or unique bus name which the proxy is for, which is not the same as the interface name. A <a href=\"https://dbus.freedesktop.org/doc/dbus-specification.html#message-bus-names\" rel=\"nofollow noreferrer\"><em>well known or unique name</em></a> identifies a peer (typically another process) on the bus. That peer exposes objects at <em>object paths</em>, and each object implements one or more <em>interfaces</em>.</p>\n"}], "owner": {"reputation": 865, "user_id": 40495, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6542b6531e55a40f5bf5311c7a97ca65?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/40495/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 54459128, "answer_count": 1, "score": 0, "last_activity_date": 1548932579, "creation_date": 1548886575, "question_id": 54450400, "link": "https://stackoverflow.com/questions/54450400/how-can-i-convert-a-gdbusinterface-into-a-gdbusproxy", "title": "How can I convert a GDBusInterface into a GDBusProxy?", "body": "<p>I am trying to write some C that uses the DBus support in GLib's GIO.</p>\n\n<p>I have a <code>GDBusObjectManager</code> and I have used <code>g_signal_connect()</code> to add a handler to the <code>interface-added</code> signal.  The signature of the handler according to the docs is:</p>\n\n<pre><code>void\nuser_function (GDBusObjectManager *manager,\n               GDBusObject        *object,\n               GDBusInterface     *interface,\n               gpointer            user_data)\n</code></pre>\n\n<p>I want to check if the interface that was added matches the interface that I care about (<code>org.bluez.Adapter1</code>) and then call some methods from that interface on the object that implements it.  I believe that the first step is to check if the interface name matches.  I believe I could do this by comparing against the return from <code>const gchar *g_dbus_proxy_get_name(GDBusProxy *proxy);</code>, but I don't have a <code>GDBusProxy</code>, I have a <code>GDBusInterface</code>.  So my question is: How can I get a <code>GDBusProxy</code> from a <code>GDBusInterface</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1548885844, "post_id": 54450243, "comment_id": 95709166, "body": "<code>(*p).x</code> is the same as <code>p-&gt;x</code> if <code>p</code> is a pointer to a structure with field named <code>x</code>. That much of what is needed to know."}, {"owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548885968, "post_id": 54450243, "comment_id": 95709205, "body": "@EugeneSh. Why can&#39;t I use the arrow for vect as well? It is a pointer too, isn&#39;t it?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548886078, "post_id": 54450243, "comment_id": 95709244, "body": "You can. But <code>vect</code> is not a pointer to a single structure, but to an array of these. So you will need to do something like <code>(vect+i)-&gt;media</code> instead of <code>vect[i].media</code>. That would be less readable. (here it worth mentioning that <code>p[i]</code> is the same as <code>*(p+i)</code> if <code>p</code> is a pointer..)"}], "answers": [{"tags": [], "owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "is_accepted": false, "score": 0, "last_activity_date": 1548886033, "creation_date": 1548886033, "answer_id": 54450305, "question_id": 54450243, "link": "https://stackoverflow.com/questions/54450243/i-dont-understand-when-to-use-the-arrow-and-when-to-use-the-point/54450305#54450305", "title": "I don&#39;t understand when to use the arrow and when to use the point", "body": "<p>The dot operator is used to access members of a struct. However, <code>max</code> is a pointer to a struct. The arrow operator is equivalent to dereferencing the pointer and then using the dot operator. These statements are the same:</p>\n\n<pre><code>max-&gt;nome\n(*max).media\n</code></pre>\n\n<p>Ampersands are used to retrieve the address of a variable. Asterisks are used when declaring variables to denote that the declared variable is a pointer, and in expressions to dereference pointers:</p>\n\n<pre><code>int x = 5;\nint y;\nint * pointer_to_int;\npointer_to_int = &amp;x;\ny = *x; // y is now equal to 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": false, "score": 0, "last_activity_date": 1548886362, "creation_date": 1548886362, "answer_id": 54450359, "question_id": 54450243, "link": "https://stackoverflow.com/questions/54450243/i-dont-understand-when-to-use-the-arrow-and-when-to-use-the-point/54450359#54450359", "title": "I don&#39;t understand when to use the arrow and when to use the point", "body": "<p>Both the arrow and the dot operator are used to access a member of a <code>struct</code>. However, if the struct variable is a pointer, you use an arrow operator, otherwise you use a dot operator.</p>\n\n<pre><code>struct max {\n   int cognome;\n   int nome;\n   float media;\n}\n\nmax a;\na.cognome = 5;\na.media = 10.2;\n\nmax * b = malloc(sizeof(max));\nb -&gt; cognome = 5;\nb -&gt; media = 10.2;\n//Or if you hate arrows\n(*b).cognome = 5;\n(*b).media = 10.2;\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "closed_date": 1548886192, "answer_count": 2, "score": -2, "last_activity_date": 1548886362, "creation_date": 1548885739, "last_edit_date": 1548885857, "question_id": 54450243, "link": "https://stackoverflow.com/questions/54450243/i-dont-understand-when-to-use-the-arrow-and-when-to-use-the-point", "closed_reason": "Duplicate", "title": "I don&#39;t understand when to use the arrow and when to use the point", "body": "<p>I don't understand when to use the arrow and when to use the point.</p>\n\n<p>For example,</p>\n\n<pre><code>void scrivi_file(FILE *output, anagrafe *vect, anagrafe **max, int dim_vect){\n    int i;\n    *max = malloc(1 * sizeof(anagrafe));\n    max[0] = &amp;vect[0];\n    for(i=1; i&lt;dim_vect; i++)\n        if(vect[i].media &gt; max[0]-&gt;media)\n            max[0] = &amp;vect[i];\n    fprintf(output, \"%s %s %f\", max[0]-&gt;cognome, max[0]-&gt;nome, (*max)[0].media);\n}\n</code></pre>\n\n<p>Why is the last max with the point and the first two with the arrows? I don't get it. The asterisks and the &amp; are also pretty confusing.</p>\n"}, {"tags": ["c", "sorting", "strtok"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 7, "creation_date": 1548885343, "post_id": 54450118, "comment_id": 95708982, "body": "The easiest thing to do is make a copy of the string first."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1548885376, "post_id": 54450118, "comment_id": 95708990, "body": "Waring: If you put the string back together, then <code>labels[i]</code> will not point to a nice  sub-stings.  Sure you want this?"}, {"owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548886653, "post_id": 54450118, "comment_id": 95709424, "body": "If I make a copy of the string then how can I get it into its new order?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548888617, "post_id": 54450118, "comment_id": 95710109, "body": "I note that you&#39;re using a single delimiter, a space, in your calls to <code>strtok()</code>.  You can provide a list of delimiters, but you can&#39;t later tell which of those delimiters was the one that was zapped by the null byte.  So, in the general case, you can&#39;t tell what <code>strtok()</code> did.  If you keep a record of the original length of the data and you only use a single delimiter character, then you could arrange to replace the null bytes added by <code>strtok()</code> with the delimiter, reinstating the string.  In the general case, you can&#39;t do that.  Copy the string before tokenizing, or <b>avoid <code>strtok()</code></b>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548953300, "post_id": 54450118, "comment_id": 95738813, "body": "<code>while (n &gt; 0) {      len = strspn(s, &quot; &quot;);      s += len;   }</code> is an infinite loop."}, {"owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548953358, "post_id": 54450118, "comment_id": 95738856, "body": "Oh my god how could I have missed that!!"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548955866, "post_id": 54450118, "comment_id": 95740180, "body": "strdup is the only viable sollution and probably the fastest especially if we have more delimiters than only the space"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548957214, "post_id": 54450118, "comment_id": 95740913, "body": "nhlyoung, Why <code>n</code> in <code>qsort(labels, n, sizeof(*labels), myCompare);</code> instead of <code>i</code>?"}, {"owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548957531, "post_id": 54450118, "comment_id": 95741075, "body": "Do you mean the i in the for loop? If I stick the qsort in the loop it gives me erroneous results (lines are out of order)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548952719, "post_id": 54450265, "comment_id": 95738440, "body": "This is a great answer! I&#39;m currently trying to work it out via structs, but I run into a problem with the find_offset method. Could you elaborate?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548952834, "post_id": 54450265, "comment_id": 95738515, "body": "@nhlyoung Post your troublesome <code>find_offset()</code> code and I&#39;ll see.  Also what exactly is the &quot;problem&quot;?"}, {"owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548953188, "post_id": 54450265, "comment_id": 95738748, "body": "It doesn&#39;t print anything. I have it set up to print the original first three lines after they&#39;re read. Reading each line like labels[i].line = strdup(buffer) works fine, and then I can print those lines. But if I try to find the offset, the program freezes and prints nothing. If I comment that line out it prints, so I think it&#39;s a problem with the find offset method"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548953328, "post_id": 54450265, "comment_id": 95738833, "body": "@nhlyoung <a href=\"https://stackoverflow.com/questions/54450118/how-to-restore-string-after-using-strtok/54450265?noredirect=1#comment95738813_54450118\">infinite loop</a>"}, {"owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548953638, "post_id": 54450265, "comment_id": 95739011, "body": "Thank you so much, I feel like I&#39;m so close but there&#39;s just one more thing. No matter what I change &quot;nth&quot; to it still sorts and prints the lines based on the first word in each line. I need it to sort based on the &quot;nth&quot; word if that makes sense. I&#39;ll post the relevant code snippets"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548953765, "post_id": 54450265, "comment_id": 95739095, "body": "@nhlyoung Notice this answer uses 2 alternating function: <code>strspn(s, &quot; &quot;)</code>, <code>strcspn(s, &quot; &quot;)</code> to walk the string.  BTW, you can post your own answer."}, {"owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548954636, "post_id": 54450265, "comment_id": 95739554, "body": "So I should use a while loop within a while loop? Like while(*s( += strspn(s, &quot; &quot;)) != &#39;\\0&#39;) comes right after the (while n &gt; 0) ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548956183, "post_id": 54450265, "comment_id": 95740379, "body": "@nhlyoung Just one loop. 2 conditions to stop: reached the nth token, reached the end of the line.  something like <code>while (not at end of line &amp;&amp; i &lt; n)</code>"}, {"owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "edited": false, "score": 0, "creation_date": 1548957054, "post_id": 54450265, "comment_id": 95740832, "body": "I still have a bug if I choose to sort based on the greatest word (the 4th word in this case since the shortest sentence has 4 words). It&#39;s not in correct order, I posted an answer with my find_offset method and the problem!"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1548887229, "last_edit_date": 1548887229, "creation_date": 1548885833, "answer_id": 54450265, "question_id": 54450118, "link": "https://stackoverflow.com/questions/54450118/how-to-restore-string-after-using-strtok/54450265#54450265", "title": "How to restore string after using strtok()", "body": "<p>Perhaps rather than mess with <code>strtok()</code>, use <code>strspn(), strcspn()</code> to parse the string for tokens.  Then the original string can even be <code>const</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n  const char str[] = \"this line is first\";\n  const char *s = str;\n  while (*(s += strspn(s, \" \")) != '\\0') {\n    size_t len = strcspn(s, \" \");\n\n    // Instead of printing, use the nth parsed token for key sorting\n    printf(\"&lt;%.*s&gt;\\n\", (int) len, s);\n\n    s += len;\n  }\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>&lt;this&gt;\n&lt;line&gt;\n&lt;is&gt;\n&lt;first&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>Or</strong></p>\n\n<p>Do not sort <em>lines</em>.</p>\n\n<p>Sort structures</p>\n\n<pre><code>typedef struct {\n  char *line;\n  size_t offset;\n} xline;\n</code></pre>\n\n<p><strong>Pseudo code</strong></p>\n\n<pre><code>int fcmp(a, b) {\n  return strcmp(a-&gt;line + a-&gt;offset, b-&gt;line + b-&gt;offset);\n}\n\nsize_t find_offset_of_nth_word(const char *s, n) {\n  while (n &gt; 0) {\n    use strspn(), strcspn() like above\n  }\n}\n\nmain() {\n  int nth = ...;\n  xline labels[numLines];\n  for (i = 0; i &lt; numLines &amp;&amp; fgets(buffer, sizeof(buffer), fp) != 0; i++) {\n     labels[i].line = strdup(buffer);\n     labels[i].offset = find_offset_of_nth_word(nth);\n  }\n\n  qsort(labels, i, sizeof *labels, fcmp);\n\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Or</strong></p>\n\n<p>After reading each line, find the <code>nth</code> token with <code>strspn(), strcspn()</code> and the reform the line from  <code>\"aaa bbb ccc ddd \\n\"</code> to <code>\"ccd ddd \\naaa bbb \"</code>, sort and then later re-order the line.</p>\n\n<hr>\n\n<p>In all case, do not use <code>strtok()</code> - too much information lost.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1548887302, "creation_date": 1548887302, "answer_id": 54450524, "question_id": 54450118, "link": "https://stackoverflow.com/questions/54450118/how-to-restore-string-after-using-strtok/54450524#54450524", "title": "How to restore string after using strtok()", "body": "<blockquote>\n  <p>I need to put the string back together in it's original form. I'm aware that strtok turns the tokens into '\\0', but Ive yet to find a way to get the original string back.</p>\n</blockquote>\n\n<p><em>Far</em> better would be to avoid damaging the original strings in the first place if you want to keep them, and especially to avoid losing the pointers to them.  Provided that it is safe to assume that there are at least three words in each line and that the second is separated from the first and third by exactly one space on each side, you could undo <code>strtok()</code>'s replacement of delimiters with string terminators.  However, there is no safe or reliable way to recover the start of the overall string once you lose it.</p>\n\n<p>I suggest creating an auxiliary array in which you record information about the second word of each sentence -- obtained without damaging the original sentences -- and then co-sorting the auxiliary array and sentence array.  The information to be recorded in the aux array could be a copy of the second word of the sentence, their offsets and lengths, or something similar.</p>\n"}], "owner": {"reputation": 67, "user_id": 10930077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea1312f37ff9e288029740f6e46315b?s=128&d=identicon&r=PG&f=1", "display_name": "nhlyoung", "link": "https://stackoverflow.com/users/10930077/nhlyoung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "accepted_answer_id": 54450265, "answer_count": 2, "score": 3, "last_activity_date": 1548954838, "creation_date": 1548885207, "last_edit_date": 1548953915, "question_id": 54450118, "link": "https://stackoverflow.com/questions/54450118/how-to-restore-string-after-using-strtok", "title": "How to restore string after using strtok()", "body": "<p>I have a project in which I need to sort multiple lines of text based on the second, third, etc word in each line, not the first word. For example,</p>\n\n<pre><code>this line is first\n\nbut this line is second\n\nfinally there is this line\n</code></pre>\n\n<p>and you choose to sort by the second word, it would turn into </p>\n\n<pre><code>this line is first\n\nfinally there is this line\n\nbut this line is second\n</code></pre>\n\n<p>(since line is before there is before this)</p>\n\n<p>I have a pointer to a char array that contains each line. So far what I've done is use strtok() to split each line up to the second word, but that changes the entire string to just that word and stores it in my array.  My code for the tokenize bit looks like this:</p>\n\n<pre><code> for (i = 0; i &lt; numLines; i++) {\n   char* token = strtok(labels[i], \" \");\n   token = strtok(NULL, \" \");\n   labels[i] = token;\n }\n</code></pre>\n\n<p>This would give me the second word in each line, since I called strtok twice. Then I sort those words. (line, this, there) However, I need to put the string back together in it's original form. I'm aware that strtok turns the tokens into '\\0', but Ive yet to find a way to get the original string back.</p>\n\n<p>I'm sure the answer lies in using pointers, but I'm confused what exactly I need to do next.</p>\n\n<p>I should mention I'm reading in the lines from an input file as shown:</p>\n\n<pre><code>for (i = 0; i &lt; numLines &amp;&amp; fgets(buffer, sizeof(buffer), fp) != 0; i++) {\n  labels[i] = strdup(buffer);\n</code></pre>\n\n<p>Edit: my find_offset method</p>\n\n<pre><code>size_t find_offset(const char *s, int n) {\n  size_t len;\n  while (n &gt; 0) {\n     len = strspn(s, \" \");\n     s += len;\n  }\n\n  return len;\n} \n</code></pre>\n\n<p>Edit 2: The relevant code used to sort</p>\n\n<pre><code>//Getting the line and offset\nfor (i = 0; i &lt; numLines &amp;&amp; fgets(buffer, sizeof(buffer), fp) != 0; i++) {\n   labels[i].line = strdup(buffer);\n   labels[i].offset = find_offset(labels[i].line, nth);\n}\n\n\nint n = sizeof(labels) / sizeof(labels[0]);\nqsort(labels, n, sizeof(*labels), myCompare);\nfor (i = 0; i &lt; numLines; i++)\n  printf(\"%d: %s\", i, labels[i].line); //Print the sorted lines\n\n\nint myCompare(const void* a, const void* b) { //Compare function\n  xline *xlineA = (xline *)a;\n  xline *xlineB = (xline *)b;\n\n  return strcmp(xlineA-&gt;line + xlineA-&gt;offset, xlineB-&gt;line + xlineB-&gt;offset);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1548882156, "post_id": 54449455, "comment_id": 95707676, "body": "If you prefix the format specifier in <code>scanf</code> with a space, it will ignore any whitespace in <code>stdin</code>."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1548882244, "post_id": 54449488, "comment_id": 95707716, "body": "yeah, but this is an ultra classic dupe. You&#39;ve seen that a lot of times. So why answering?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10621144"}, "edited": false, "score": 0, "creation_date": 1548882386, "post_id": 54449488, "comment_id": 95707788, "body": "what if I want to absorb the whitespace that is generated after the user inputs the next char? Should I add a space even after %c?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548882470, "post_id": 54449488, "comment_id": 95707827, "body": "or use <code>fgets</code> because <code>scanf</code> sucks"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1548882476, "post_id": 54449488, "comment_id": 95707834, "body": "@FoxyIT You don&#39;t want it after, otherwise the current <code>scanf</code> won&#39;t return until you enter a non-whitespace character.  Just put a space before a <code>%c</code>.  Other format specifiers such as <code>%s</code> and <code>%d</code> do this implicitly, so no need to add a space before those."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10621144"}, "edited": false, "score": 0, "creation_date": 1548882674, "post_id": 54449488, "comment_id": 95707929, "body": "@dbush the newline from the first char does get stuck in the next %s scan call tho, that&#39;s why I&#39;m having problems ahah"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1548882771, "post_id": 54449488, "comment_id": 95707975, "body": "@FoxyIT  It shouldn&#39;t.  If it is, you&#39;re doing something else wrong."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548882975, "post_id": 54449488, "comment_id": 95708070, "body": "Right.  <code>%s</code> always skips any leading whitespace, including newlines.  Be careful, though, for the format <code>&quot; %c&quot;</code> skips <i>all</i> whitespace until it reads a non-whitespace character.  This includes possibly many newlines, and also leading spaces, tabs, etc. on the line that provides the character that is ultimately returned.  This may or may not be what you actually want."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10621144"}, "edited": false, "score": 0, "creation_date": 1548883021, "post_id": 54449488, "comment_id": 95708096, "body": "@dbush oh yeah, found where the problem is :) Is there any way to absorb the newline char and whitespace with getchar or can I only use the scanf method you told me?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1548883098, "post_id": 54449488, "comment_id": 95708123, "body": "@FoxyIT <code>getchar</code> only reads one character at a time.  You could do it that way, but then you&#39;d have to explicitly loop and check for each character you don&#39;t want.  If you&#39;re already using <code>scanf</code> then stick with it.  Also, don&#39;t mix <code>scanf</code> with <code>fgets</code> or <code>getline</code> as they handle whitespace differently."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1548883838, "post_id": 54449488, "comment_id": 95708433, "body": "And if you were forced to choose between one of the aforementioned functions, <code>fgets</code> is the way to go"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1548882180, "creation_date": 1548882180, "answer_id": 54449488, "question_id": 54449455, "link": "https://stackoverflow.com/questions/54449455/how-to-trash-out-newline-character/54449488#54449488", "title": "How to &quot;trash out&quot; newline character?", "body": "<p>When using the <code>%c</code> format specifier, which will match any character including whitespace, you typically want to put a space in the format string before <code>%c</code>.  This will absorb any number of whitespace characters.</p>\n\n<pre><code>scanf(\" %c\", &amp;input);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10621144"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1548882222, "accepted_answer_id": 54449488, "answer_count": 1, "score": 0, "last_activity_date": 1548882180, "creation_date": 1548882015, "question_id": 54449455, "link": "https://stackoverflow.com/questions/54449455/how-to-trash-out-newline-character", "closed_reason": "Duplicate", "title": "How to &quot;trash out&quot; newline character?", "body": "<p>Is there a way to \"delete\" all the newline characters stuck in the buffer from previous reading before asking the user for a new character? Right now I'm doing it like this</p>\n\n<pre><code>scanf(\"%c \", &amp;trash);\nscanf(\"%c\", &amp;input);\nscanf(\"%c\", &amp;trash);\n</code></pre>\n\n<p>and although it works, it seems very inefficient and inelegant. Suggestions?</p>\n"}, {"tags": ["c", "compilation"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548881102, "post_id": 54449184, "comment_id": 95707221, "body": "Note: <code>extern &quot;C&quot;</code> is a C++ thing.  It is not valid in C."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548881944, "post_id": 54449386, "comment_id": 95707612, "body": "Curious, I suppose with non-portable extensions, <code>#define \u2260 !=</code> falls into similar restrictions."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1548882047, "post_id": 54449386, "comment_id": 95707644, "body": "@chux: I like to use \u03c0 for pi."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1548882213, "post_id": 54449386, "comment_id": 95707704, "body": "I just tested Clang; it allows <code>int \ud83d\ude00 ;</code>. Don\u2019t tell the millennials, or we will see code written with emoji."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 6, "last_activity_date": 1548882320, "last_edit_date": 1548882320, "creation_date": 1548881745, "answer_id": 54449386, "question_id": 54449184, "link": "https://stackoverflow.com/questions/54449184/c-identifier-names-what-goes-with-which-compiler/54449386#54449386", "title": "C identifier names: What goes with which compiler?", "body": "<p>The rules in the 2018 C standard for identifiers include:</p>\n\n<ul>\n<li>Per 6.4.2.1 1, an <em>identifier</em> is a sequence of <em>identifier-nondigit</em> and <em>digit</em> characters, starting with an <em>identifier-nondigit</em>.</li>\n<li>An <em>identifier-nodigit</em> is <code>_</code>, <code>a</code> to <code>z</code>, <code>A</code> to <code>Z</code>, a <em>universal-character-name</em>, or \u201cother implementation-defined characters\u201d.</li>\n<li>A <em>digit</em> is <code>0</code> to <code>9</code>.</li>\n<li>A <em>universal-character-name</em> is <code>\\u</code> followed by four hexadecimal digits or <code>\\U</code> followed by eight hexadecimal digits, which specify <a href=\"https://en.wikipedia.org/wiki/Universal_Coded_Character_Set\" rel=\"nofollow noreferrer\">Unicode</a> characters.</li>\n</ul>\n\n<p>So, if an implementation allows <code>$</code>, that is a valid character for that implementation. You may use it, but it may not be portable to other implementations. The C standard <strong>requires</strong> implementations to accept the specific characters listed, but it <strong>allows</strong> them to accept more. Generally, the C standard should be viewed as an open field rather than a walled garden: The behavior is defined within the field, but you are not stopped at the barrier; you may go beyond it, at your own risk.</p>\n\n<p>The rules you were taught were rules for what is portable, not rules for what the C standard requires implementations to restrict you to.</p>\n\n<p>The C standard defines <em>strictly conforming code</em>, which is, roughly speaking, code that should work in any C implementation, and <em>conforming code</em>, which is code that works in at least one C implementation. Conforming code is still C code. So the rules you were taught were for strictly conforming code.</p>\n\n<p>Generally, you should prefer to write strictly conforming code and only use additional features when benefit (speed, ease of development on a particular platform, whatever) is worth the cost (loss of portability).</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 5, "last_activity_date": 1548884638, "last_edit_date": 1548884638, "creation_date": 1548882275, "answer_id": 54449512, "question_id": 54449184, "link": "https://stackoverflow.com/questions/54449184/c-identifier-names-what-goes-with-which-compiler/54449512#54449512", "title": "C identifier names: What goes with which compiler?", "body": "<blockquote>\n  <p>According to documentation I had read previously, the rules for\n  identifiers were basically:</p>\n  \n  <ul>\n  <li>No double underscore at the beginning - because those are reserved.</li>\n  <li>No single underscore and upper case letter - reserved too.</li>\n  </ul>\n</blockquote>\n\n<p>Such identifiers are indeed reserved, but that means that <em>you</em> must not declare or define them, not that they fail to be identifiers, or that they necessarily are not meaningful.</p>\n\n<blockquote>\n  <ul>\n  <li>Must start with a letter, a non-digit.</li>\n  </ul>\n</blockquote>\n\n<p>Letters are indeed non-digits, but not all non-digits are letters.  The <code>_</code> character is a prime example.</p>\n\n<blockquote>\n  <ul>\n  <li>Must not exceed 31 characters.</li>\n  </ul>\n</blockquote>\n\n<p>This is not a formal limit of the language.  C requires that implementations support <em>at least</em> 31 <em>significant</em> characters in external identifiers.  Two external identifiers that differ only at the 32<sup>nd</sup> character or later are not guaranteed to be recognized as distinct, but they do not fail to be identifiers.  Furthermore, implementations must recognize at least 63 significant characters in internal identifiers, which, again, can be longer.</p>\n\n<p>Some implementations recognize more significant characters, some even an unbounded number.</p>\n\n<blockquote>\n  <ul>\n  <li>May contain a-z, A-Z or 0-9 and _.</li>\n  </ul>\n</blockquote>\n\n<p>Yes, but explicitly may <em>also</em> contain other implementation-defined characters.  The <code>$</code> character in particular is one that is fairly commonly allowed.</p>\n\n<blockquote>\n  <p>So why is it that Clang will let me do this, although by ANSI\n  standards, it should not? Even the GCC 6 I have installed did not warn\n  or error about this.</p>\n</blockquote>\n\n<p>The standard does not by any means say that identifiers containing the <code>$</code> character are disallowed.  It explicitly permits implementations to accept that character and substantially any other in identifiers, though there are some that cannot pragmatically be allowed because allowing them would introduce ambiguity.  Programs that use identifiers containing such characters do not for that reason fail to conform, and implementations that accept them do not for that reason fail to conform.  Such programs do fail to <em>strictly</em> conform, however, as that term is defined by the standard.</p>\n"}], "owner": {"reputation": 1935, "user_id": 2423150, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/f8d0598639a453f140fc8790be00da94?s=128&d=identicon&r=PG", "display_name": "Ingwie Phoenix", "link": "https://stackoverflow.com/users/2423150/ingwie-phoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 54449386, "answer_count": 2, "score": 0, "last_activity_date": 1548884638, "creation_date": 1548880855, "question_id": 54449184, "link": "https://stackoverflow.com/questions/54449184/c-identifier-names-what-goes-with-which-compiler", "title": "C identifier names: What goes with which compiler?", "body": "<p>I was experimenting with <code>extern</code> and <code>extern \"C\"</code> for a little, and accidentially had a typo in one of the identifiers - a <code>$</code> had snuck in. When I compiled the code and got the error of an undefined symbol and eventually saw what caused it, it made me curios if it would actually compile. And guess what - Clang actually <em>did</em> compile that.</p>\n\n<p>According to documentation I had read previously, the rules for identifiers were basically:</p>\n\n<ul>\n<li>No double underscore at the beginning - because those are reserved.</li>\n<li>No single underscore and upper case letter - reserved too.</li>\n<li>Must start with a letter, a non-digit.</li>\n<li>Must not exceed 31 characters.</li>\n<li>May contain <code>a-z</code>, <code>A-Z</code> or <code>0-9</code> and <code>_</code>.</li>\n</ul>\n\n<p>But this compiled just fine - no warning was showing too:</p>\n\n<pre><code>void __this$is$a$mess() {}\nint main() { __this$is$a$mess(); }\n</code></pre>\n\n<p>When looking at it:</p>\n\n<pre><code>Ingwie@Ingwies-Macbook-Pro.local /tmp $ clang y.c\nIngwie@Ingwies-Macbook-Pro.local /tmp $ nm a.out\n0000000100000f90 T ___this$is$a$mess\n0000000100000000 T __mh_execute_header\n0000000100000fa0 T _main\n                 U dyld_stub_binder\n</code></pre>\n\n<p>I can see the symbol name very clearly.</p>\n\n<p>So why is it that Clang will let me do this, although by ANSI standards, it should not? Even the GCC 6 I have installed did not warn or error about this.</p>\n\n<p>Which compilers will allow what kinds of identifiers - and, why actually?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1548880672, "post_id": 54449116, "comment_id": 95706999, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or it didn&#39;t happen."}, {"owner": {"reputation": 160, "user_id": 6529424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AehrV.png?s=128&g=1", "display_name": "eagle33322", "link": "https://stackoverflow.com/users/6529424/eagle33322"}, "edited": false, "score": 0, "creation_date": 1548880712, "post_id": 54449116, "comment_id": 95707023, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1548880783, "post_id": 54449116, "comment_id": 95707053, "body": "I&#39;m not able to reproduce this behavior with a simplistic emulation of the problem you&#39;re describing: <code>void foo(int *p) { (*p)++; }</code> reflects the change after the function too; without an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> we&#39;re all clueless as to what the issue actually is"}], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -1, "last_activity_date": 1548880824, "creation_date": 1548880824, "answer_id": 54449177, "question_id": 54449116, "link": "https://stackoverflow.com/questions/54449116/how-to-fix-pass-by-reference-not-changing-values-properly/54449177#54449177", "title": "How to fix pass by reference not changing values properly", "body": "<p>I will always change. The problem is somewhere else (in the code you do not show)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(int *x)\n{\n    (*x)++;\n}\n\nint main(void) {\n    int x = rand();\n    printf(\"Before : %d\\n\", x);\n    foo(&amp;x);\n    printf(\"After : %d\\n\", x);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/B3zD47\" rel=\"nofollow noreferrer\">https://ideone.com/B3zD47</a></p>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 5158699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015904c6161bd10c833a79cd01fbd038?s=128&d=identicon&r=PG&f=1", "display_name": "Roquentin", "link": "https://stackoverflow.com/users/5158699/roquentin"}, "edited": false, "score": 0, "creation_date": 1548883056, "post_id": 54449188, "comment_id": 95708111, "body": "Thanks, I thought I had completely misunderstood pas by reference."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 4, "last_activity_date": 1548882593, "last_edit_date": 1548882593, "creation_date": 1548880872, "answer_id": 54449188, "question_id": 54449116, "link": "https://stackoverflow.com/questions/54449116/how-to-fix-pass-by-reference-not-changing-values-properly/54449188#54449188", "title": "How to fix pass by reference not changing values properly", "body": "<p>When calling <code>printf(\"%d, %d\\n\", binSearch(testArray, 100, 75, numCompAddress), numCompTest);</code> order of the evaluation of the sub expressions is not defined by the standard which says:</p>\n\n<blockquote>\n  <p><strong>3.4.4</strong></p>\n  \n  <p><strong>1 unspecified behavior</strong></p>\n  \n  <p>use of an unspecified value, or other behavior where this International Standard provides two or more possibilities and imposes no further requirements on which is chosen in any instance</p>\n  \n  <p>2 EXAMPLE An example of unspecified behavior is the order in which the arguments to a function are evaluated.</p>\n</blockquote>\n\n<p>Looks like in your case, the value of the second argument <code>numCompTest</code> is emitted before the function is called. Change to:</p>\n\n<pre><code>printf(\"%d, \", binSearch(testArray, 100, 75, numCompAddress));\nprintf(\"%d\\n\", numCompTest);\n</code></pre>\n\n<p>and you will see what you want.</p>\n"}], "owner": {"reputation": 137, "user_id": 5158699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015904c6161bd10c833a79cd01fbd038?s=128&d=identicon&r=PG&f=1", "display_name": "Roquentin", "link": "https://stackoverflow.com/users/5158699/roquentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 54449188, "answer_count": 2, "score": 1, "last_activity_date": 1548882642, "creation_date": 1548880554, "last_edit_date": 1548882642, "question_id": 54449116, "link": "https://stackoverflow.com/questions/54449116/how-to-fix-pass-by-reference-not-changing-values-properly", "title": "How to fix pass by reference not changing values properly", "body": "<p>I have a function which is supposed to change a value declared and defined in main. Within the function the pass by reference argument is supposed to be incremented every time a comparison is made. The function is declared like so:</p>\n\n<pre><code>int binSearch (int arr[], int size, int target, int * numComparisons) { ... \n    (*numComparisons)++; }\n</code></pre>\n\n<p>Within the scope of the function, this is accomplished. However, after the function is finished, the value of numComparisons doesn't actually change. I wrote a printf expression to output the value of numComparisons every iteration of the loop, and it does work properly(it outputs 1, 2, et cetera), however after the function has run the variable passed as an argument to binSearch stays at the value I initialized it to. What is my problem?<br>\n    (within main)</p>\n\n<pre><code>printf(\"%d, %d\\n\", binSearch(testArray, 100, 75, numCompAddress), numCompTest); \n// this returns the index and the incorrect value of numComparisons\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1548880004, "post_id": 54448981, "comment_id": 95706714, "body": "@WeatherVane: It doesn&#39;t write to the second parameter though. The OP is specifically saying the compiler is flagging the <i>second</i> parameter, the delimiter, which is marked <code>const</code>. We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1548880062, "post_id": 54448981, "comment_id": 95706735, "body": "the second argument shouldn&#39;t be a problem. Can you share the code snippet which triggers the error?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1548880097, "post_id": 54448981, "comment_id": 95706754, "body": "Please show example code."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548880099, "post_id": 54448981, "comment_id": 95706755, "body": "Please show the actual code.  There shouldn&#39;t be a problem \u2014 so you&#39;re doing something unusual.  It shouldn&#39;t be very big \u2014 much 10 lines would be a surprise \u2014 so you&#39;ll be creating a nice MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1548880120, "post_id": 54448981, "comment_id": 95706767, "body": "It shouldn&#39;t.  Rather than describe the code, <b>show the code</b>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1548880240, "post_id": 54448981, "comment_id": 95706810, "body": "@ShadowRanger two of us misread it - but it is usual to use a string literal as the second parameter."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548880399, "post_id": 54448981, "comment_id": 95706885, "body": "@WeatherVane: Yeah. It was my first thought as well as soon as I saw &quot;<code>strtok</code>&quot; and &quot;string literal&quot; together in a post. Without code, we&#39;ll never know."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1548880555, "post_id": 54448981, "comment_id": 95706961, "body": "If it were the const thing, it would be <code>-Wwrite-strings</code>, not <code>-Wpedantic</code>, the error message would say <code>discards &#39;const&#39; qualifier from pointer target type</code> (not incompatible pointer type), and it wouldn&#39;t mention &quot;assignment&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 1, "last_activity_date": 1548880594, "creation_date": 1548880594, "answer_id": 54449126, "question_id": 54448981, "link": "https://stackoverflow.com/questions/54448981/strtok-with-string-literal-as-parameter/54449126#54449126", "title": "strtok with string literal as parameter", "body": "<p>Since the warning reads: \"<strong>Assignment</strong> from incompatible pointer type\", the problem must be the left side of the assignment from strtok, for example like this:</p>\n\n<pre><code>int *foo;\nfoo = strtok(s, \",\");\n</code></pre>\n\n<p>You have to make sure, that the left side of your assignment has a compatible pointer type, for example <code>char *</code> or <code>void *</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10648457, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JXDqFTpJGU0/AAAAAAAAAAI/AAAAAAAAADU/jP-JGv2QLk4/photo.jpg?sz=128", "display_name": "Lennart Nilsen", "link": "https://stackoverflow.com/users/10648457/lennart-nilsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1548881003, "answer_count": 1, "score": -5, "last_activity_date": 1548880594, "creation_date": 1548879894, "question_id": 54448981, "link": "https://stackoverflow.com/questions/54448981/strtok-with-string-literal-as-parameter", "closed_reason": "Not suitable for this site", "title": "strtok with string literal as parameter", "body": "<p>Why does compiling with -Wpedantic warn about assignment from incompatible pointer type when passing a string literal as the second parameter to <code>char *strtok(char *str, const char *delim);</code>, and what can be done about it? </p>\n"}, {"tags": ["c", "avr", "cpu-registers", "atmel", "adc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548878131, "post_id": 54448390, "comment_id": 95705909, "body": "What is the value of <code>REFS0</code> (and other constants you use as shift amounts)?  Also I really don&#39;t like the shifting of <code>bool</code> constants. Use <code>1U</code> instead."}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548878178, "post_id": 54448390, "comment_id": 95705930, "body": "REFS0 is defined in <code>avr&#47;io.h</code> with: <code>#define REFS0\t6</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548878331, "post_id": 54448390, "comment_id": 95705996, "body": "Do you really have <code>malloc</code> properly implemented on your system? you never check it&#39;s return value. Are you sure it is working?"}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548878431, "post_id": 54448390, "comment_id": 95706038, "body": "<code>malloc</code> is in <code>stdlib.h</code> which is imported in <code>ADC.c</code> which contains the ADC funcs"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548878536, "post_id": 54448390, "comment_id": 95706080, "body": "How about getting rid of it? Allocate <code>settings</code> statically. I don&#39;t see any good reason to do otherwise anyway."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1548878730, "post_id": 54448390, "comment_id": 95706158, "body": "<code>true</code> might happen to be 1, but that is not a reason to use it instead of <code>1</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1548878929, "post_id": 54448390, "comment_id": 95706258, "body": "@stark Well, it is guaranteed to be <code>1</code>. but still not a good reason."}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "edited": false, "score": 0, "creation_date": 1548879516, "post_id": 54448390, "comment_id": 95706515, "body": "okay so replacing the struct with a bunch of params makes no difference, I&#39;m still getting the same errors. Is there maybe something wrong with the way I&#39;m doing my enums?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548879798, "post_id": 54448390, "comment_id": 95706620, "body": "What errors? You have not mentioned any errors. Do you mean the same behavior of reading unexpected value from the register?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548879808, "post_id": 54448390, "comment_id": 95706627, "body": "Does the integer promotion rule apply to defining an <code>enum</code> value, such as <code>ADC3 = true &lt;&lt; MUX0 | true &lt;&lt; MUX1</code>? It&#39;s not really an intialisation."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548880206, "post_id": 54448390, "comment_id": 95706798, "body": "@WeatherVane Good question... I would get rid of this <code>enum</code> and replace it with <code>#define</code>s anyway. Code should not rely on numerical value of <code>enum</code>."}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "edited": false, "score": 0, "creation_date": 1548880286, "post_id": 54448390, "comment_id": 95706832, "body": "by errors I meant it&#39;s getting 64 and not 67"}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548880295, "post_id": 54448390, "comment_id": 95706837, "body": "@EugeneSh. really? How come?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548880344, "post_id": 54448390, "comment_id": 95706863, "body": "Have you replaced the <code>true</code> with <code>1U</code> yet? Debugging is an adventure."}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548880403, "post_id": 54448390, "comment_id": 95706889, "body": "Yes, @WeatherVane &#39;1U&#39; doesn&#39;t make any difference. Just grabbing some food then I&#39;ll try <code>#define</code>ing all my enums"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548880561, "post_id": 54448390, "comment_id": 95706962, "body": "@Persistence <code>enum</code> is good for having names for stuff which don&#39;t care how they are numbered. Such as state of state machines, days of the week, and return status of functions. The things that you will always assign and compare to the same type."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548881274, "post_id": 54448390, "comment_id": 95707303, "body": "do not use dynamic allocation on tiny uCs like this."}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "edited": false, "score": 0, "creation_date": 1548882965, "post_id": 54448390, "comment_id": 95708067, "body": "So I&#39;ve replaced all my enums with <code>#define</code>s and it&#39;s still assigning 64 to the ADMUX"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548883068, "post_id": 54448390, "comment_id": 95708115, "body": "can you <i>hardcode</i> the value of 67, and then read it back? BTW, how do you actually check it&#39;s value?"}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "edited": false, "score": 0, "creation_date": 1548884815, "post_id": 54448390, "comment_id": 95708803, "body": "If you hardcode in 67 it still shows as 64. I&#39;m checking by reading it from the watch window"}, {"owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "edited": false, "score": 0, "creation_date": 1548886015, "post_id": 54448390, "comment_id": 95709219, "body": "I forgot to run my <code>InitialiseUSART()</code> function... The registers seem to sort themselves out after a few more lines of code have been run"}], "answers": [{"tags": [], "owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "is_accepted": false, "score": 0, "last_activity_date": 1548886150, "creation_date": 1548886150, "answer_id": 54450324, "question_id": 54448390, "link": "https://stackoverflow.com/questions/54448390/atmel-avr-admux-register-not-taking-assigned-value/54450324#54450324", "title": "Atmel AVR ADMUX Register Not Taking Assigned Value", "body": "<p>Turns out there wasn't a problem with my ADC setup at all.</p>\n\n<p>The issues with the registers seemed to just be a delay in the simulator updating the value in the watch window.</p>\n\n<p>The reason I wasn't getting values through was because I forgot to run my <code>InitialiseUART()</code> command from the library.</p>\n\n<p>Moral of the story, ensure you initialise all of your peripherals.</p>\n\n<hr>\n\n<p>Other advice from comments:</p>\n\n<ol>\n<li>Don't use dynamic memory assignment on small uCs.</li>\n<li>Don't rely on the numerical values of enums, use <code>#define</code></li>\n</ol>\n"}], "owner": {"reputation": 2432, "user_id": 4700841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8ab51f7e9a70996576549b5c611a2833?s=128&d=identicon&r=PG&f=1", "display_name": "Persistence", "link": "https://stackoverflow.com/users/4700841/persistence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548886150, "creation_date": 1548877545, "question_id": 54448390, "link": "https://stackoverflow.com/questions/54448390/atmel-avr-admux-register-not-taking-assigned-value", "title": "Atmel AVR ADMUX Register Not Taking Assigned Value", "body": "<p>I have the following enums and structs:</p>\n\n<pre><code>typedef enum reference{\n    AREF = 0, //External on AREF pin\n    AVCC = true &lt;&lt; REFS0, //Analogue supply voltage\n    I11 = true &lt;&lt; REFS1, //Internal 1.1V reference\n    I256 = true &lt;&lt; REFS1 | true &lt;&lt;REFS0 //Internal 2.56 reference\n} Reference;\n\ntypedef enum channel{\n    ADC0 = 0,\n    ADC1 = true &lt;&lt; MUX0,\n    ADC2 = true &lt;&lt; MUX1,\n    ADC3 = true &lt;&lt; MUX0 | true &lt;&lt; MUX1,\n    ADC4 = true &lt;&lt; MUX2,\n    ADC5 = true &lt;&lt; MUX2 | true &lt;&lt; MUX0,\n    ADC6 = true &lt;&lt; MUX2 | true &lt;&lt; MUX1,\n    ADC7 = true &lt;&lt; MUX2 | true &lt;&lt; MUX1 | true &lt;&lt; MUX0\n    //If higher channels are needed continue using MUXn for n = 0-&gt; 4 in a binary count.\n} Channel;\n\ntypedef enum leftadjust{\n    LADisabled = 0,\n    LAEnabled = true &lt;&lt; ADLAR\n} LeftAdjust;\n\n//Enums for ADCSRA\ntypedef enum adcenable{\n    ADCDisabled = 0,\n    ADCEnabled = true &lt;&lt; ADEN\n} ADCEnable;\n\ntypedef enum adcautotriggerenable{\n    AutoTriggerDisabled = 0,\n    AutoTriggerEnabled = true &lt;&lt; ADATE\n} ADCAutoTriggerEnable;\n\ntypedef enum adcinterruptenable{\n    ADCIntteruptDisabled = 0,\n    ADCInterruptEnabled = true &lt;&lt; ADIE,\n} ADCInterruptEnable;\n\ntypedef enum adcclockdivider{\n    CDHalf = 0,\n    CDQuarter = true &lt;&lt; ADPS1,\n    CDEighth = true &lt;&lt; ADPS1 | true &lt;&lt; ADPS0,\n    CDSixteenth = true &lt;&lt; ADPS2,\n    CDThirtySecond = true &lt;&lt; ADPS2 | true &lt;&lt; ADPS0,\n    CDSixtyFourth = true &lt;&lt; ADPS2 | true &lt;&lt; ADPS1,\n    CDOneTwoEighth = true &lt;&lt; ADPS2 | true &lt;&lt; ADPS1| true &lt;&lt; ADPS0\n} ADCClockDivider;\n\n///structs\ntypedef struct ADCSettings{\n    Reference ref;\n    LeftAdjust leftAdjust;\n    Channel channel;\n    ADCAutoTriggerEnable autoTrigger;\n    ADCInterruptEnable interruptEnable;\n    ADCClockDivider clockDivider;\n    } ADCSettings;\n</code></pre>\n\n<p>This constructor function:</p>\n\n<pre><code>ADCSettings* NewADCSettings()\n{\n    return (ADCSettings*)malloc(sizeof(ADCSettings));\n}\n</code></pre>\n\n<p>and then this function to set up my ADC:</p>\n\n<pre><code>void InitialiseADC(ADCSettings* settings)\n{\n    /*\n        13CCs for a conversion. 50ns/cc therefore 0 clock division conversion time is 13 * 50ns =650ns.\n        for 50us; 50us/950ns = 77.\n        We have 16,32,64 and 128, 64 gives a time of 61us which is in range.\n    */\n    ADMUX = (settings-&gt;ref | settings -&gt;leftAdjust | settings-&gt;channel);\n    //ADMUX = true &lt;&lt; REFS0 | true &lt;&lt; MUX1 | true &lt;&lt; MUX0; //REFSn sets voltage ref source, MUXn sets channel\n\n    DIDR0 = true &lt;&lt; ADC3D; //DIDR is digital input disable (makes a pin analogue)\n    ADCSRA = true &lt;&lt; ADEN | settings -&gt;autoTrigger | settings -&gt;interruptEnable | settings -&gt;leftAdjust | settings-&gt;clockDivider;\n    //ADCSRA = true &lt;&lt; ADEN | true &lt;&lt; ADPS2 | true &lt;&lt; ADPS1; //ADPS1 &amp; ADPS2 gives 64 scale\n\n}\n</code></pre>\n\n<p>As you can see, I'm in the middle of refactoring this to try and make it a nice library function rather than just setting it up the way I need it this once. The commented out lines worked just fine.</p>\n\n<p>When I run this, I believe <code>ADMUX</code> should be assigned <code>67</code> but it instead takes the value of <code>64</code> which, if I'm not mistaken is just the <code>REFS0</code> getting set and neither <code>MUX0</code> nor <code>MUX1</code>.</p>\n\n<p>The register is 8-bits so it should be able to hold a value up to 255.</p>\n\n<p>Here's my <code>main.c</code> for completeness:</p>\n\n<pre><code>#include \"misc/utilities.h\"\n#include &lt;avr/io.h&gt;\n#include &lt;util/delay.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"USART/USART.h\"\n#include \"ADC/ADC.h\"\n\nint main()\n{\n    ADCSettings* settings = NewADCSettings();\n    settings-&gt;autoTrigger = false;\n    settings-&gt;channel=ADC3;\n    settings-&gt;clockDivider=CDSixtyFourth;\n    settings-&gt;interruptEnable=false;\n    settings-&gt;leftAdjust=false;\n    settings-&gt;ref=AVCC;\n    InitialiseADC(settings);\n    while (true) \n    {\n        int adcReading = GetADCConversion();\n        Tx_Line(IntToString(adcReading));\n        _delay_ms(100);\n    }\n}\n</code></pre>\n\n<p>The USART lib and Utilities lib have been used before so I'm pretty sure they're okay.</p>\n\n<p>Any ideas where I'm going wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1548877334, "post_id": 54448295, "comment_id": 95705600, "body": "No, you have to pass that as a function argument (worse, have it defined as a global value or macro). Another way is to make the last element a sentinel value such as <code>NULL</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548877527, "post_id": 54448295, "comment_id": 95705678, "body": "It really looks your <code>num</code> is supposed to do exactly that. No?"}, {"owner": {"reputation": 388, "user_id": 7892010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb22306a8bdbe2dfcfa54ec6e0edca5?s=128&d=identicon&r=PG&f=1", "display_name": "Manny_Mar", "link": "https://stackoverflow.com/users/7892010/manny-mar"}, "edited": false, "score": 0, "creation_date": 1548881456, "post_id": 54448295, "comment_id": 95707393, "body": "Is <code>int num</code> the size of the array? If so, then you should use <code>for(i=0; i&lt;num; i++)</code> instead of just typing <code>8</code>. You can always get the size of the array in <code>main</code> and send it into the function. As said below the information is lost once inside the function, because C sends a pointer to the first element of the array, to the function, not the array itself."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 1, "last_activity_date": 1548877740, "last_edit_date": 1548877740, "creation_date": 1548877424, "answer_id": 54448356, "question_id": 54448295, "link": "https://stackoverflow.com/questions/54448295/how-to-know-how-many-elements-there-are-in-a-pointer-array/54448356#54448356", "title": "How to know how many elements there are in a pointer array?", "body": "<p>There is no way you can know the size of array passed to function.\nAs array decays to pointer to first element.</p>\n\n<p>Compiler will treat.</p>\n\n<pre><code>void print(char *arch[], int num)\n</code></pre>\n\n<p>as</p>\n\n<pre><code>void print(char **arch, int num)\n</code></pre>\n\n<p>Thus when you do</p>\n\n<pre><code>   sizeof(arch); //It is size of pointer.\n</code></pre>\n\n<p>Solution:</p>\n\n<ol>\n<li>You can pass size of array additional to function as parameter.</li>\n<li>Have known value at the end of the array and loop until you find the expected value.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 0, "creation_date": 1548881014, "post_id": 54448374, "comment_id": 95707175, "body": "Should your code example have <code>sizeof(data)</code> rather than <code>sizeof data</code>? Or is there some C magic I&#39;m not aware of?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 0, "creation_date": 1548881049, "post_id": 54448374, "comment_id": 95707201, "body": "@Catsunami <code>sizeof</code> only requires parentheses when passing a data type, not an instance of a variable (or object in C++)"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1548877488, "creation_date": 1548877488, "answer_id": 54448374, "question_id": 54448295, "link": "https://stackoverflow.com/questions/54448295/how-to-know-how-many-elements-there-are-in-a-pointer-array/54448374#54448374", "title": "How to know how many elements there are in a pointer array?", "body": "<p>Since arrays decay to pointers to their first element when passed as arguments to a function, length information is lost as well.</p>\n\n<p>For example:</p>\n\n<pre><code>void bar()\n{\n    int data[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n    printf(\"%zu\\n\", sizeof data); // output: 10 * sizeof(int)\n    foo(data);\n}\n\nvoid foo(int *arg)\n{\n    printf(\"%zu\\n\", sizeof arg) // output: sizeof(int *)\n}\n</code></pre>\n\n<p>This is why strings are null-terminated in C: so that when pointers to strings (or arrays decayed to pointers) are passed to string-handling functions, their length can still be determined by incrementing to the null-pointer and keeping count.</p>\n\n<p>There is no way of knowing the length of an array given only a pointer to the array without one of:</p>\n\n<ol>\n<li>A \"length\" parameter</li>\n<li>A sentinel value indicating the end of the array (a-la the null-terminator)</li>\n</ol>\n"}], "owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "closed_date": 1548879354, "answer_count": 2, "score": 1, "last_activity_date": 1548877740, "creation_date": 1548877202, "question_id": 54448295, "link": "https://stackoverflow.com/questions/54448295/how-to-know-how-many-elements-there-are-in-a-pointer-array", "closed_reason": "Duplicate", "title": "How to know how many elements there are in a pointer array?", "body": "<pre><code>void print(char *arch[], int num){\n    int i;\n    for(i=0; i&lt;8; i++)\n        printf(\"%s\\n\", *(arch+i));\n}\n</code></pre>\n\n<p>In this case I knew that <code>arch</code> was formed by 8 elements, but if I didn't know how can I know it? Is there a way?</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1548877005, "post_id": 54448228, "comment_id": 95705444, "body": "How are you compiling and linking these files?  Also, it&#39;s bad practice to <code>#include</code> a .c file."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 2, "creation_date": 1548877088, "post_id": 54448228, "comment_id": 95705474, "body": "You are not allocating memory to <code>finalLoggerPath</code> anywhere and accessing it             <code>strcpy(finalLoggerPath, finalPath);</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548879724, "post_id": 54448228, "comment_id": 95706594, "body": "C does not have classes, and in related languages that do, such as C++ and Java, a class is a very different thing from a function.  Please, then, do not confuse people by calling things &quot;Class/Function&quot; or &quot;Function/Class&quot;.  Additionally, please cut back on use of that Shift key.  It makes your prose hard to read."}, {"owner": {"reputation": 7, "user_id": 10674626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7951c7f61bd93a0931bb2ed804cbbd4?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10674626/sebastian"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548879856, "post_id": 54448228, "comment_id": 95706647, "body": "@JohnBollinger i edited my post and delete Class"}, {"owner": {"reputation": 7, "user_id": 10674626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7951c7f61bd93a0931bb2ed804cbbd4?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10674626/sebastian"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1548880574, "post_id": 54448228, "comment_id": 95706967, "body": "@dbush I edited the code and remove the including in the code and compiling it with gcc CallFileExists.c FileExists.c GetVariableFromFileExists.c and then i use ./a.out for the output"}, {"owner": {"reputation": 7, "user_id": 10674626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7951c7f61bd93a0931bb2ed804cbbd4?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10674626/sebastian"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1548880880, "post_id": 54448228, "comment_id": 95707107, "body": "@kiranBiradar How i allocating memory to finalLoggerPath, actualy where should i do that? in the generateFileNameWithDate Method?"}, {"owner": {"reputation": 7, "user_id": 10674626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7951c7f61bd93a0931bb2ed804cbbd4?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10674626/sebastian"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1548883622, "post_id": 54448228, "comment_id": 95708336, "body": "My fault..... I thank you at all and actually @kiran the problem is solved.."}], "owner": {"reputation": 7, "user_id": 10674626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7951c7f61bd93a0931bb2ed804cbbd4?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10674626/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1593969574, "creation_date": 1548876871, "last_edit_date": 1593969574, "question_id": 54448228, "link": "https://stackoverflow.com/questions/54448228/create-change-use-an-extern-variable-in-c", "title": "Create/Change/Use an extern Variable in C", "body": "<p>I have a header file containing:</p>\n\n<pre><code>extern char *finalLoggerPath;\n</code></pre>\n\n<p>I am trying to implement a function that can initialize or modify the <code>finalLoggerPath</code> variable.</p>\n\n<p>My <code>main</code> function indirectly calls a function defined in a second file.  This second function generates a path which does not yet exist, and saves it in two file-scope variables, <code>finalPath</code> and <code>finalLoggerPath</code>.  After that is done, I would like another function defined in a third file to be able to print the <code>finalLoggerPath</code>. </p>\n\n<p>I have attempted to implement this, but I get an error:</p>\n\n<blockquote>\n  <p>Memory access error (memory dump used)</p>\n</blockquote>\n\n<p>How can I fix my program?</p>\n\n<hr>\n\n<p>My code:</p>\n\n<pre><code>// First File\n\nvoid initLog() {\n    generateFileNameWithDate();\n}\n\nint main(void) {\n    initLog();\n}\n</code></pre>\n\n<hr>\n\n<pre><code>// Second File\n\n#define PATHTEST \"../TestLogSystem/\"\n\n#include \"Info.h\"\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nchar pathToFile[100] = \"../TestLogSystem/\";\nchar *actual;\nchar *finalPath;\n\nchar *finalLoggerPath;\n\nint generateFileNameWithDate() {\n    int counter = 1;\n    char filename[999];\n    char filenameBuffer[999];\n    int notCreatetFile = 1;\n\n    char counterS[999];\n    time_t now = time(NULL);\n\n    if (now == -1) {\n        puts(\"The time() function failed\");\n        return 1;\n    }\n\n    struct tm *ptm = localtime(&amp;now);\n\n    if (ptm == NULL) {\n        puts(\"The localtime() function failed\");\n        return 1;\n    }\n\n    strftime(filename, sizeof(filename),\n            strcat(strcat(pathToFile, \"%Y%m%d\"), \".json\"), ptm);\n\n    while (notCreatetFile) {\n\n        if (access(filename, F_OK) != -1) {\n            // file exists\n            memset(filename, 0, sizeof(filename));\n            memset(pathToFile, 0, sizeof(pathToFile));\n\n            sprintf(pathToFile, \"%s\", PATHTEST);\n\n            memset(filenameBuffer, 0, sizeof(filenameBuffer));\n\n            sprintf(counterS, \"%d\", counter);\n\n            strftime(filename, sizeof(filename),\n                    strcat(\n                            strcat(\n                                    strcat(\n                                            strcat(strcat(pathToFile, filenameBuffer),\n                                                    \"%Y%m%d\"), \"-Test-\"),\n                                    counterS), \".json\"), ptm);\n\n        } else {\n            // file doesn't exist\n            finalPath = malloc(strlen(filename) + 1);\n            printf(\"finalPath: %s \\n\", finalPath);\n\n            strcpy(finalPath, filename);\n            strcpy(finalLoggerPath, finalPath);\n\n            fopen(finalPath, \"w\");\n\n            notCreatetFile = 0;\n        }\n        ++counter;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>// Third File\n\n\n#include \"Info.h\"\n\nvoid print() {\n    printf(\"FinalLoggerPath: %s\", finalLoggerPath);\n}\n</code></pre>\n\n<p>I compile it:</p>\n\n<pre><code>gcc CallFileExists.c FileExists.c GetVariableFromFileExists.c \n</code></pre>\n"}, {"tags": ["c", "gcc", "linker"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548874602, "post_id": 54447615, "comment_id": 95704230, "body": "The problem that the <code>memset</code> might get optimzed away if the compiler believes this data is zero anyway. The setting to zero should be done in the startup code (before <code>main</code>)."}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548874879, "post_id": 54447615, "comment_id": 95704381, "body": "@EugeneSh., ok, that&#39;s good to know (makes sense too). I don&#39;t really rely on the elements being zero I think, so it&#39;s probably not a big deal regardless."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548875627, "post_id": 54447615, "comment_id": 95704751, "body": "The problem is that it&#39;s the compiler who is relying on it :) Like if you have some code explicitly setting some elements to zero, the compiler might decide to optimize these assignments away. But sure, you might get away without ever seeing any problem."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 1, "creation_date": 1548876071, "post_id": 54447615, "comment_id": 95704953, "body": "just keep in mind your binary will increase in size in about 256 bytes"}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548876181, "post_id": 54447615, "comment_id": 95705016, "body": "@EugeneSh., ah, ok. Unfortunately I don&#39;t have access to the startup code. I am working on a library that is linked to a bunch of other libraries, one of which is containing the startup code. If I disable the optimizations, will that keep compiler from doing clever things?"}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1548876207, "post_id": 54447615, "comment_id": 95705026, "body": "@user2162550, yeah that&#39;s ok in this case."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1548876275, "post_id": 54447615, "comment_id": 95705050, "body": "@user2162550 Why would it? The data is still considered by the compiler to be zero-initialized."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548876457, "post_id": 54447615, "comment_id": 95705134, "body": "@Eugene Sh if it goes into <code>.data</code> section this means it occupying space in binary (something like <code>PT_LOAD</code> attribute or similar in <code>elf</code>, I don&#39;t remember) and its content is copied from binary to memory, unlike <code>.bss</code> which is just populated with zeros in startup. disagree? final binary is represented by the final output sections (or segments) which place it in the <code>.data</code> section"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548876574, "post_id": 54447615, "comment_id": 95705187, "body": "It goes to the <code>.data_queues</code> section, and depending on whether it is supposed to contain initialized or uninitialized data it may or may not consume the binary size."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548876609, "post_id": 54447615, "comment_id": 95705204, "body": "@EugeneSh. OP says <code>Then in the linker file I added .data_queues to the .data section. I checked the map file and the buffer is indeed in the .data section.</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1548876676, "post_id": 54447615, "comment_id": 95705245, "body": "@user2162550 Ah, OK, so the OP have explicitly increased the <code>.data</code> size. Missed this point"}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548876724, "post_id": 54447615, "comment_id": 95705276, "body": "@EugeneSh., yeah, .data is a large section so I had room to grow it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548876911, "post_id": 54447615, "comment_id": 95705394, "body": "Well. Since you are not relying on the initial value of the array, you can simply give it some non-zero initializer, and it will go to the <code>.data</code> automatically."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548877283, "post_id": 54447615, "comment_id": 95705574, "body": "Or... It appears that there is a GCC option to tell it not to use BSS! <code>-fno-zero-initialized-in-bss</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html</a>"}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548879077, "post_id": 54447615, "comment_id": 95706318, "body": "@EugeneSh., thanks, that moved a bunch of stuff to .data, so I&#39;ll have to double check that it didn&#39;t break something else. Looks like I have a few suggestions to try."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548879168, "post_id": 54447615, "comment_id": 95706348, "body": "@Catsunami If you used the compiler option, that should not break anything as these will still be initialized to zeros, but in <code>.data</code> section (I.e. the zeros will eat up you binary size)."}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548955004, "post_id": 54447615, "comment_id": 95739739, "body": "@EugeneSh., you should post that as an answer, I actually ended up using your approach."}], "answers": [{"comments": [{"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1548875882, "post_id": 54447957, "comment_id": 95704858, "body": "where does the standard says it&#39;s an UB? also, why using <code>KEEP</code>? why disable optimization of non referenced data?"}, {"owner": {"reputation": 2837, "user_id": 9926721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3uZyl-aeJ0M/AAAAAAAAAAI/AAAAAAAAACA/dTz1snmrSXQ/photo.jpg?sz=128", "display_name": "funnydman", "link": "https://stackoverflow.com/users/9926721/funnydman"}, "edited": false, "score": 0, "creation_date": 1548875918, "post_id": 54447957, "comment_id": 95704874, "body": "And what permissions this section has?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548876093, "post_id": 54447957, "comment_id": 95704972, "body": "It will keep the data even if there is no reference in the program. (At least I understand that is something OP needs). If not of course the KEEP can be removed"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 2837, "user_id": 9926721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3uZyl-aeJ0M/AAAAAAAAAAI/AAAAAAAAACA/dTz1snmrSXQ/photo.jpg?sz=128", "display_name": "funnydman", "link": "https://stackoverflow.com/users/9926721/funnydman"}, "edited": false, "score": 0, "creation_date": 1548876182, "post_id": 54447957, "comment_id": 95705018, "body": "@FUNNYDMAN same as <code>RAM</code> memory area"}, {"owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "edited": false, "score": 0, "creation_date": 1548876286, "post_id": 54447957, "comment_id": 95705061, "body": "Ok I will do this instead, that is probably a better idea. And sorry, what is <code>UB</code>?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548877554, "post_id": 54447957, "comment_id": 95705693, "body": "Undefined Behavior"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1548875666, "creation_date": 1548875666, "answer_id": 54447957, "question_id": 54447615, "link": "https://stackoverflow.com/questions/54447615/is-it-dangerous-to-move-a-variable-from-bss-to-data/54447957#54447957", "title": "Is it dangerous to move a variable from .bss to .data?", "body": "<p>Create your own section. Do not \"move\" it do the .data segment as it is an UB (you don have corresponding data in the .rodata segment).</p>\n\n<p>Just add to your linker script :</p>\n\n<pre><code>  .mysection : \n  {\n    KEEP(*(.mysection))           \n    KEEP(*(.mysection*))         \n\n  } &gt;RAM\n</code></pre>\n\n<hr>\n\n<pre><code>uint8_t data_queue[256] __attribute__ ((section(\".mysection\"), used));\n</code></pre>\n"}], "owner": {"reputation": 519, "user_id": 6191539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzjJY.jpg?s=128&g=1", "display_name": "Catsunami", "link": "https://stackoverflow.com/users/6191539/catsunami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548875666, "creation_date": 1548874365, "question_id": 54447615, "link": "https://stackoverflow.com/questions/54447615/is-it-dangerous-to-move-a-variable-from-bss-to-data", "title": "Is it dangerous to move a variable from .bss to .data?", "body": "<p>I have some global buffers that GCC wants to place into bss. Unfortunately this would result in the bss section exceeding its allocated size. I'd rather not change the linker file for this mess of a project (there are many reasons, just humour me here).</p>\n\n<p>Is it dangerous to move a variable from .bss to .data?</p>\n\n<p>I did it like this:</p>\n\n<pre><code>uint8_t data_queue[256] __attribute__ ((section(\".data_queues\")));\n</code></pre>\n\n<p>Then in the linker file I added <code>.data_queues</code> to the <code>.data</code> section. I checked the map file and the buffer is indeed in the <code>.data</code> section.</p>\n\n<p>I memset <code>data_queue</code> to 0 at the start of my program.</p>\n\n<p>Am I likely to run into issues if I do this? Is it a terrible idea? Is there a better solution?</p>\n"}, {"tags": ["c", "multithreading", "posix", "context-switch"], "comments": [{"owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 1, "creation_date": 1548874300, "post_id": 54447430, "comment_id": 95704073, "body": "Can you show your code (see <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a>). It is unusual to use a pipe between threads. Are you considering threads or forked processes?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548874571, "post_id": 54447430, "comment_id": 95704213, "body": "I&#39;m having trouble following parts of your wording.  For example, you seem to be using the terms &quot;thread&quot; and &quot;process&quot; interchangeably, but these are different things.  And I&#39;m having great difficulty matching &quot;tv_nsec is the same albeit on a larger scale&quot; to the data you actually present."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548874721, "post_id": 54447430, "comment_id": 95704290, "body": "Overall, I&#39;m uncertain of the basis for your claim that &quot;the calculated time is clearly wrong&quot;, but also uncertain of why you think your approach (which you do not seem to have fully disclosed) serves to measure the context-switch time.  These are related, for if you&#39;re actually measuring something else instead then whatever expectation you may have about the results is probably invalid."}, {"owner": {"reputation": 15, "user_id": 6837819, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9149656fd8bb0dde9ee814e2098fd01?s=128&d=identicon&r=PG&f=1", "display_name": "moose0306", "link": "https://stackoverflow.com/users/6837819/moose0306"}, "edited": false, "score": 0, "creation_date": 1548874937, "post_id": 54447430, "comment_id": 95704407, "body": "edited to add more code, and adjusted for clarity between process and thread."}, {"owner": {"reputation": 15, "user_id": 6837819, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9149656fd8bb0dde9ee814e2098fd01?s=128&d=identicon&r=PG&f=1", "display_name": "moose0306", "link": "https://stackoverflow.com/users/6837819/moose0306"}, "edited": false, "score": 0, "creation_date": 1548875466, "post_id": 54447430, "comment_id": 95704661, "body": "My claim comes from using clock_gettime in previous learning adventures and it never being returned with what i consider an unprecise number, i.e the amount of trailing zeros, that make me feel as if its a rounded number( which from reading the docs, I am aware its not)"}, {"owner": {"reputation": 15, "user_id": 6837819, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9149656fd8bb0dde9ee814e2098fd01?s=128&d=identicon&r=PG&f=1", "display_name": "moose0306", "link": "https://stackoverflow.com/users/6837819/moose0306"}, "reply_to_user": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 0, "creation_date": 1548875555, "post_id": 54447430, "comment_id": 95704711, "body": "@AlainMerigot, I&#39;m open to either forked process or threads, It&#39;s just a learning example for me to better understand whats happening"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1548881825, "post_id": 54447430, "comment_id": 95707561, "body": "Are you compiling your program in 64 bit mode (e.g. <code>x86_64</code>)? If not, this will affect the <code>rvalue</code> of the <code>diff</code> calculation. What is the exact type/definition of <code>billion</code>? Is it [hopefully] also <code>uint64_t</code>?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1548882318, "post_id": 54447430, "comment_id": 95707749, "body": "Just to be sure, you may want to call <code>clock_getres</code> to verify that <code>clock_gettime</code> uses nanosecond precision. (e.g.) linux will use it as will most other POSIX OSes (e.g. *BSD, MacOSX), but since you&#39;re experiencing issues ... <code>CLOCK_MONOTONIC</code> [if supported, which it is in many places] is similar to <code>CLOCK_REALTIME</code> except that it <i>never</i> goes backwards in time. You could try it with both options to see."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1548878622, "last_edit_date": 1548878622, "creation_date": 1548875995, "answer_id": 54448026, "question_id": 54447430, "link": "https://stackoverflow.com/questions/54447430/accuracy-of-clock-gettime-in-a-context-switch-scenario/54448026#54448026", "title": "Accuracy of clock_gettime() in a context switch scenario", "body": "<blockquote>\n  <p>i see that tv_nsec seems to be a 'rounded' number as well:</p>\n\n<pre><code> 2626, 714885000, 2626, 714888000\n</code></pre>\n  \n  <p>Would this be caused by a clock_monotonic not being precise enough for\n  what im attempting to measure, or some other problem that i'm\n  overlooking?</p>\n</blockquote>\n\n<p>Yes, that's a possibility.  Every clock supported by the system has a fixed resolution. <code>struct timespec</code> is capable of supporting clocks with nanosecond resolution, but that does not mean that you can expect every clock to actually <em>have</em> such resolution.  It looks like your <code>CLOCK_MONOTONIC</code> might have a resolution of 1 microsecond (1000 nanoseconds), but you can check that via the <code>clock_getres()</code> function.</p>\n\n<p>If it is available to you, then you might try <code>CLOCK_PROCESS_CPUTIME_ID</code>.  It is possible that that would have higher resolution than <code>CLOCK_MONOTONIC</code> for you, but do note that single-microsecond resolution is pretty precise -- that's on the order of one tick per 3000 CPU cycles on a modern machine.</p>\n\n<hr>\n\n<p>Even so, I see several possible problems with your approach:</p>\n\n<ul>\n<li><p>Although you set your process to have affinity for a single CPU, that does not prevent the system from scheduling other processes on that CPU, too.  Thus, unless you've taken additional measures, you can't be certain -- it's not even likely -- that every context switch away from one of your program's threads is <em>to</em> the other thread.</p></li>\n<li><p>You start your second thread and then immediately join it.  There is no more context switching between your threads after that, because your second thread no longer exists after being successfully joined.</p></li>\n<li><p><code>read()</code> with a count of 0 may or may not check for errors, and it certainly does not transfer any data.  It is totally unclear to me why you identify the time for that call with the time for a context switch.</p></li>\n<li><p>If a context switch does occur in the space you're timing, then at least two need to occur there -- away from your program and back to it.  Also, you're measuring the time consumed by whatever else runs in the other context as well, not just the switch time.  The 1000-nanosecond steps may thus reflect time slices, rather than switching time.</p></li>\n<li><p>Your main thread is writing null characters to the write end of a pipe, but there does not appear to be anything reading them.  If indeed there isn't then this will eventually fill up the pipe's buffer and block.  The purpose is lost on me.</p></li>\n</ul>\n"}], "owner": {"reputation": 15, "user_id": 6837819, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a9149656fd8bb0dde9ee814e2098fd01?s=128&d=identicon&r=PG&f=1", "display_name": "moose0306", "link": "https://stackoverflow.com/users/6837819/moose0306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1548878622, "creation_date": 1548873693, "last_edit_date": 1548875299, "question_id": 54447430, "link": "https://stackoverflow.com/questions/54447430/accuracy-of-clock-gettime-in-a-context-switch-scenario", "title": "Accuracy of clock_gettime() in a context switch scenario", "body": "<p>I'm trying to 'roughly' calculate the time of a thread context switch in a Linux system. I've written a program that uses pipes and multi-threading to achieve this. When running the program the calculated time is clearly wrong(see output below). I am unsure if this is due to me using the wrong clock_id for this procedure or perhaps my implementation</p>\n\n<p>I have implemented sched_setaffinity() so as to only have the program run on core 0. I've tried to leave as much fluff out of code so to only measure the time of a context switch, so the tread process only writes a single character to the pipe and the parent does a 0 byte read.</p>\n\n<p>I have a parent tread that creates one child thread with a one-way pipe between them to pass data, the child thread runs a simple function to write to a pipe.</p>\n\n<pre><code>    void* thread_1_function()\n    {\n         write(fd2[1],\"\",sizeof(\"\");\n    }\n</code></pre>\n\n<p>while the parent thread creates the child thread, starts the time counter and then calls a read on the pipe that the child thread writes to.</p>\n\n<pre><code>int main(int argc, char argv[])\n{\n//time struct declaration\nstruct timespec start,end;\n\n//sets program to only use core 0\ncpu_set_t cpu_set;\nCPU_ZERO(&amp;cpu_set);\nCPU_SET(0,&amp;cpu_set);\n\n\nif((sched_setaffinity(0, sizeof(cpu_set_t), &amp;cpu_set) &lt; 1))\n{\n\nint nproc = sysconf(_SC_NPROCESSORS_ONLN);\nint k;\n\nprintf(\"Processor used: \");\nfor(k = 0; k &lt; nproc; ++k)\n{\n    printf(\"%d \", CPU_ISSET(k, &amp;cpu_set));\n}\n\nprintf(\"\\n\");\n\n\nif(pipe(fd1) == -1)\n{\n    printf(\"fd1 pipe error\");\n    return 1;\n}\n//fail on file descriptor 2 fail\nif(pipe(fd2) == -1)\n{\n    printf(\"fd2 pipe error\");\n    return 1;\n}\n\n\npthread_t thread_1;\n\n\npthread_create(&amp;thread_1, NULL, &amp;thread_1_function, NULL);\n\n\npthread_join(thread_1,NULL);\n\n\nint i;\nuint64_t sum = 0;\n\nfor(i = 0; i &lt; iterations; ++i)\n{\n\n    //initalize clock start\n    clock_gettime(CLOCK_MONOTONIC, &amp;start);\n    //wait for child thread to write to pipe\n    read(fd2[0],input,0);\n    //record clock end\n    clock_gettime(CLOCK_MONOTONIC, &amp;end);   \n\n    write(fd1[1],\"\",sizeof(\"\"));\n\n\n\n    uint64_t diff;\n    diff = billion * (end.tv_sec - start.tv_sec) + end.tv_nsec - start.tv_nsec;\n    diff = diff;\n    sum += diff;\n}\n</code></pre>\n\n<p>The results i get while running this are typically in this manner:</p>\n\n<pre><code>     3000\n     3000\n     4000\n     2000\n     12000\n     3000\n     5000\n</code></pre>\n\n<p>and so forth, when I inspect the time returned to the start and end timespec structs i see that tv_nsec seems to be a 'rounded' number as well:</p>\n\n<pre><code>     start.tv_nsec: 714885000, end.tv_nsec: 714888000\n</code></pre>\n\n<p>Would this be caused by a clock_monotonic not being precise enough for what im attempting to measure, or some other problem that i'm overlooking?</p>\n"}, {"tags": ["c", "microcontroller", "pic"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548873174, "post_id": 54447241, "comment_id": 95703478, "body": "One thing missing here is <i>indentation</i> to help make this code more readable."}, {"owner": {"reputation": 19, "user_id": 10984793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80251bd394e8988686e5430ac8adef2?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Giglio", "link": "https://stackoverflow.com/users/10984793/michele-giglio"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548873688, "post_id": 54447241, "comment_id": 95703755, "body": "I&#39;m sorry, I copied it from a text file I sent on my smartphone and all the indentation got lost."}, {"owner": {"reputation": 19, "user_id": 10984793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80251bd394e8988686e5430ac8adef2?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Giglio", "link": "https://stackoverflow.com/users/10984793/michele-giglio"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1548873709, "post_id": 54447241, "comment_id": 95703776, "body": "I managed it a bit, but it&#39;s not easy from mobile"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548883632, "post_id": 54447241, "comment_id": 95708341, "body": "Looks a lot better now so we can see what&#39;s going on at least."}], "answers": [{"tags": [], "owner": {"reputation": 1482, "user_id": 297216, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1d89c8b79c5991c01b0f81c731970f5?s=128&d=identicon&r=PG", "display_name": "Cobusve", "link": "https://stackoverflow.com/users/297216/cobusve"}, "is_accepted": false, "score": 1, "last_activity_date": 1549013051, "creation_date": 1549013051, "answer_id": 54476460, "question_id": 54447241, "link": "https://stackoverflow.com/questions/54447241/what-am-i-missing-with-this-pic-12f675-configuration/54476460#54476460", "title": "What am I missing with this PIC 12F675 configuration?", "body": "<p>I am not so sure you have anything wrong with your outputs, double checked and they look to be configured correctly.</p>\n\n<p>I am a little baffled by the if statement :</p>\n\n<pre><code>if (j &amp; 0) { // se = 1, manda un segnale sul canale GP4\n                GPIObits.GP4 = 1; __delay_ms(250);\n                GPIObits.GP4 = 0; __delay_ms(250);\n            }\n</code></pre>\n\n<p>This if statement is doing a bitwise AND of 0 AND j, which is ALWAYS 100% guaranteed to be 0 so GP4 will never ever toggle and you may just as well remove this code.</p>\n\n<p>I think this is why GP4 is not working</p>\n\n<hr>\n\n<p>Also take a look at <a href=\"https://www.microforum.cc/\" rel=\"nofollow noreferrer\">https://www.microforum.cc/</a> - a great resource for information on PIC and AVR microcontrollers and embedded programming in general. </p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 10984793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80251bd394e8988686e5430ac8adef2?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Giglio", "link": "https://stackoverflow.com/users/10984793/michele-giglio"}, "edited": false, "score": 0, "creation_date": 1549046799, "post_id": 54485119, "comment_id": 95777778, "body": "Thank you a lot, but I managed to solve it yet :). At first I tested the Gpio with another simple program I made, and so I got that the problem was in the loop. So I modified it and now it works :)"}], "tags": [], "owner": {"reputation": 828, "user_id": 10085080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a79e26083ea7b8473578d079ecc11c2d?s=128&d=identicon&r=PG&f=1", "display_name": "Dan1138", "link": "https://stackoverflow.com/users/10085080/dan1138"}, "is_accepted": false, "score": 0, "last_activity_date": 1549045277, "creation_date": 1549045277, "answer_id": 54485119, "question_id": 54447241, "link": "https://stackoverflow.com/questions/54447241/what-am-i-missing-with-this-pic-12f675-configuration/54485119#54485119", "title": "What am I missing with this PIC 12F675 configuration?", "body": "<p>@Michele Giglio,</p>\n\n<p>The intent of the code you posted appears to one where the ADC result is tested from the most significant bit to the least significant bit. For each bit that is a one a pulse is output on GP5, for each bit that is a zero a pulse is output on GP4.</p>\n\n<p>This is your while loop modified to perform as described:</p>\n\n<pre><code>while(1) { \n\n    ADCON0 = 0b10000011; // select channel and start AD conversion cycle \n    __delay_ms(10); \n\n    A = ((ADRESH &lt;&lt;8)+ ADRESL);\n\n    for(i=(1&lt;&lt;9);i!=0;i&gt;&gt;=1) { // controlla i singoli bit \n\n        if ((j &amp; i) == 1) { // se = 1, manda un segnale sul canale GP5\n            GPIObits.GP5 = 1; \n            __delay_ms(250);\n            GPIObits.GP5 = 0; \n            __delay_ms(250); \n        } \n\n        if ((j &amp; i) == 0) { // se = 1, manda un segnale sul canale GP4\n            GPIObits.GP4 = 1;\n            __delay_ms(250);\n            GPIObits.GP4 = 0;\n            __delay_ms(250);\n        }\n\n        __delay_ms(1000); \n\n    } \n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10984793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80251bd394e8988686e5430ac8adef2?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Giglio", "link": "https://stackoverflow.com/users/10984793/michele-giglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1549319327, "creation_date": 1548873018, "last_edit_date": 1549319327, "question_id": 54447241, "link": "https://stackoverflow.com/questions/54447241/what-am-i-missing-with-this-pic-12f675-configuration", "title": "What am I missing with this PIC 12F675 configuration?", "body": "<p>I can't manage to get GP4 as digital output (even GP2 doesn't setup as GPIO, so might it be an analog pin configuration problem?)\nI should have disabled all the features but the TRIS register, on GP4 and GP2, but it doesn't seem so...</p>\n\n<p>This is the code (don't mind too much if the analog acquisition is right, because I'm working on it and I'm still learning; don't mind even the comments that are in italian):</p>\n\n<pre><code>// PIC12F675 Configuration Bit Settings // 'C' source line config statements // \n\n#pragma config FOSC = INTRCIO // Oscillator Selection bits (INTOSC oscillator: I/O function on GP4/OSC2/CLKOUT pin, I/O function on GP5/OSC1/CLKIN) \n#pragma config WDTE = OFF // Watchdog Timer Enable bit (WDT disabled) \n#pragma config PWRTE = OFF // Power-Up Timer Enable bit (PWRT disabled) \n#pragma config MCLRE = OFF // GP3/MCLR pin function select (GP3/MCLR pin function is GP3) \n#pragma config BOREN = ON // Brown-out Detect Enable bit (BOD enabled)\n#pragma config CP = OFF // Code Protection bit (Program Memory code protection is disabled) \n#pragma config CPD = OFF // Data Code Protection bit (Data memory code protection is disabled) \n\n#define _XTAL_FREQ 4000000 \n#include &lt;xc.h&gt; \n\n/* ADCON serve, tra l'altro a selezionare il canale analogico da convertire in digitale * e, quindi, se si hanno piu' canali in un ciclo, da convertire, bisogna agire sempre * su questo registro */\n\nint i = 0;\nint j = 0;\nunsigned short int A = 0;\n\nvoid main(void) { \n    OSCCAL= 0x80; \n    CMCON = 0b00000111; \n    T1CON = 0b00000100; \n    OPTION_REG = 0b11000000; \n\n    // TRISIO = 0b001011;\n    TRISIObits.TRISIO0 = 1;\n    TRISIObits.TRISIO1 = 1;\n    TRISIObits.TRISIO2 = 0;\n    TRISIObits.TRISIO3 = 1;\n    TRISIObits.TRISIO4 = 0;\n    TRISIObits.TRISIO5 = 0; \n\n    ADCON0 = 0x00; \n    ANSEL = 0b00000011; // analog and digital channel selection \n\n    while(1) { \n\n        ADCON0 = 0b10000011; // select channel and start AD conversion cycle \n        __delay_ms(10); \n\n        A = ((ADRESH &lt;&lt;8)+ ADRESL);\n\n        for(i=10;i&gt;=0;i--) { // controlla i singoli bit \n\n            j = A &gt;&gt; i; \n            if (j &amp; 1) { // se = 1, manda un segnale sul canale GP5\n                GPIObits.GP5 = 1; \n                __delay_ms(250);\n                GPIObits.GP5 = 0; \n                __delay_ms(250); \n            } \n\n            if (j &amp; 0) { // se = 1, manda un segnale sul canale GP4\n                GPIObits.GP4 = 1; __delay_ms(250);\n                GPIObits.GP4 = 0; __delay_ms(250);\n            }\n\n            __delay_ms(1000); \n\n        } \n    }\n\n    return; \n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 12, "creation_date": 1548873068, "post_id": 54447208, "comment_id": 95703426, "body": "They are different languages with a different set of features. C++ allows this, C does not."}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 2, "creation_date": 1548873084, "post_id": 54447208, "comment_id": 95703433, "body": "This is a feature added to C++14"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1548873308, "post_id": 54447208, "comment_id": 95703545, "body": "&quot;was there really a rule added to C++ to make this compile?&quot; c++ is not just c with some rules added. If you see it like this, you wont have much fun with c++ (and I guess neither with c). They are different languages. C++ comes from C, but both lanuages have diverged since then"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1548873534, "post_id": 54447208, "comment_id": 95703657, "body": "For C, <code>#define X(a,b,c) a ## b ## c</code>, then use <code>unsigned x = X(10,000,007);</code>  But just do this for fun, not for real code that you&#39;d want anyone else to see."}], "answers": [{"comments": [{"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 2, "creation_date": 1548873452, "post_id": 54447311, "comment_id": 95703611, "body": "&quot;Yet&quot; sounds quite optimistic. Has there been any proposal to add this to C?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1548873514, "post_id": 54447311, "comment_id": 95703640, "body": "@Ruslan: Lol not that I&#39;m aware of, but I&#39;m not denying the possibility!"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1548874184, "post_id": 54447311, "comment_id": 95704017, "body": "i am surprised you have answered this question. C &amp; C++ are distinct languages with their own syntax and semantics. So I will extend this question: what about D, C#, ADA &amp; Prolog?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548874400, "post_id": 54447311, "comment_id": 95704123, "body": "@P__J__: That&#39;s an interesting criticism to levy, since C++ considers itself a superset of a subset of the C language, and it&#39;s oftentimes difficult for newcomers to the languages to distinguish the differences."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1548874486, "post_id": 54447311, "comment_id": 95704166, "body": "It is common misunderstanding - it is not superset or subset. There are completely different even if sometimes one may see some similarities."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548874495, "post_id": 54447311, "comment_id": 95704168, "body": "@P__J__ one cannot point out often enough that c and c++ are two different languages, but once this misconception is out of the way there is no point in denying that they have some common history. Imho the question is perfeclty valid and deserves an answer"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548874525, "post_id": 54447311, "comment_id": 95704188, "body": "@P__J__: You cannot ignore the fact that the C++ standard explicitly points at the C standard in places to describe the behavior of some operations."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548874613, "post_id": 54447311, "comment_id": 95704234, "body": "Even if they have some common points it does not change that they are different languages. C# is very similar as well."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1548874799, "post_id": 54447311, "comment_id": 95704331, "body": "@P__J__: It says it right there in the C++ standard: &quot;C++ is a general purpose programming language based on the C programming language as described in ISO/IEC 9899:2011 Programming languages \u2014 C (hereinafter referred to as the C standard). In addition to the facilities provided by C, C++ provides additional data types, classes, templates, exceptions, namespaces, operator overloading, function name overloading, references, free store management operators, and additional library facilities.&quot; So yes, it is a superset of a specific version of C (although in practice this is not always true)"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1548874992, "post_id": 54447311, "comment_id": 95704446, "body": "one could remove any reference to C from the question and from the answer it they still would be substantially the same... maybe this debate is rather pointless... ;)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548875182, "post_id": 54447311, "comment_id": 95704528, "body": "<i>During the development of the .NET Framework, the class libraries were originally written using a managed code compiler system called Simple Managed C (SMC).[18][19] In January 1999, Anders Hejlsberg formed a team to build a new language at the time called Cool, which stood for &quot;C-like Object Oriented Language&quot;</i>  So using this logic C# i superset of C"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548875374, "post_id": 54447311, "comment_id": 95704620, "body": "And what aboud <i>D</i> which is &quot;modified  C++&quot;"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548875400, "post_id": 54447311, "comment_id": 95704632, "body": "@P__J__: This will be last comment on the matter, because I&#39;m not sure if you&#39;re trolling or not. I do not agree that the quotes you have provided indicate that C# is intended to be a superset of C, rather that it was written using some variation of C."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548879828, "post_id": 54447311, "comment_id": 95706634, "body": "@P__J__ \u2022 Neither C# nor D have a relationship to C++ or C, like C++ does to C.  C++/CLI has that kind of relationship to C++.  C++/CX has that kind of relationship to C++.  Most languages are only inspired or influenced by one or a few languages that came before them, rather than having their specification tethered to another language."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 7, "last_activity_date": 1548873259, "creation_date": 1548873259, "answer_id": 54447311, "question_id": 54447208, "link": "https://stackoverflow.com/questions/54447208/why-can-i-separate-digits-with-an-apostrophe-in-c-but-not-c/54447311#54447311", "title": "Why can I separate digits with an apostrophe in C++ but not C?", "body": "<p>In C++14, integer literals were updated to allow an optional <code>'</code> separator.</p>\n\n<p>Refer to [lex.icon]</p>\n\n<blockquote>\n  <p><em>decimal-literal</em>:<br/>\n    &nbsp;&nbsp;&nbsp;<em>nonzero-digit</em><br/>\n    &nbsp;&nbsp;&nbsp;<em>decimal-literal <code>\u2019</code><sub>opt</sub> digit</em><br/></p>\n</blockquote>\n\n<p>So the code snippet you've shown will not compile in any C++ standard below C++14, and the C language does not yet have this rule.</p>\n"}], "owner": {"reputation": 115, "user_id": 5091713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69967b07792b79b1a28a911a843e652c?s=128&d=identicon&r=PG&f=1", "display_name": "toweleeele", "link": "https://stackoverflow.com/users/5091713/toweleeele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "closed_date": 1548882029, "answer_count": 1, "score": -1, "last_activity_date": 1549049897, "creation_date": 1548872899, "last_edit_date": 1549049897, "question_id": 54447208, "link": "https://stackoverflow.com/questions/54447208/why-can-i-separate-digits-with-an-apostrophe-in-c-but-not-c", "closed_reason": "Needs details or clarity", "title": "Why can I separate digits with an apostrophe in C++ but not C?", "body": "<p>I saw this vector declaration in a code sample</p>\n\n<pre><code>std::vector&lt;double&gt; v(10'000'007, 0.5);\n</code></pre>\n\n<p>which produces a vector of size 10000007, so it must be cast as a size_type. I can also assign it to a variable of type <code>size_t</code> which isn't surprising. This same declaration does not compile in C, however, I get an error</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\nunsigned x = 10'000'007;\nprintf(\"x: %d\\n\", x);\n}\n\nwarning: multi-character character constant [-Wmultichar] unsigned x = 10'000'007;\nerror: expected \u2018,\u2019 or \u2018;\u2019 before '\\x303030'\n</code></pre>\n\n<p>This style makes it easier to read the declaration, but was there really a rule added to C++ to make this compile?</p>\n"}, {"tags": ["c", "windows", "dll"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1548873117, "post_id": 54446881, "comment_id": 95703452, "body": "As long as you don\u2019t explicitly name \u201cOpenSSL.dll\u201d as a dependency in your code for DLL2, it shouldn\u2019t be a problem"}, {"owner": {"reputation": 363, "user_id": 10284786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98ef9fc457873fe05114b2fa5c9eb05f?s=128&d=identicon&r=PG&f=1", "display_name": "Doritos", "link": "https://stackoverflow.com/users/10284786/doritos"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1548873618, "post_id": 54446881, "comment_id": 95703710, "body": "I am including OpenSSL.lib basically into my function."}], "owner": {"reputation": 363, "user_id": 10284786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98ef9fc457873fe05114b2fa5c9eb05f?s=128&d=identicon&r=PG&f=1", "display_name": "Doritos", "link": "https://stackoverflow.com/users/10284786/doritos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548871549, "creation_date": 1548871549, "question_id": 54446881, "link": "https://stackoverflow.com/questions/54446881/export-functions-from-a-static-linked-library-to-another-program", "title": "Export functions from a static linked library to another program", "body": "<p>I have a DLL1.dll that has staticly linked against openssl.lib. I have packaged all of the OpenSSL functionality into this DLL1.dll.</p>\n\n<p>This DLL1.dll will end up loading another DLL2.dll. This new DLL2.dll will need to use some of the OpenSSL functionality. Instead of packaging the OpenSSL into DLL2.dll, can I use the functionality through DLL1.dll since it has it?</p>\n"}, {"tags": ["c", "struct", "malloc", "language-lawyer", "c99"], "comments": [{"owner": {"reputation": 592, "user_id": 8869649, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-u_VVCMIVyxo/AAAAAAAAAAI/AAAAAAABJ-E/1Q3CKmvqfe4/photo.jpg?sz=128", "display_name": "Lapo", "link": "https://stackoverflow.com/users/8869649/lapo"}, "edited": false, "score": 1, "creation_date": 1548871776, "post_id": 54446877, "comment_id": 95702816, "body": "<code>p</code> is still a pointer to MyStruct type, <code>x</code> is int and <code>y</code> is char, if this is what you&#39;re asking."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548871777, "post_id": 54446877, "comment_id": 95702818, "body": "Well, <code>*p</code> has a declared type."}, {"owner": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 2, "creation_date": 1548872245, "post_id": 54446877, "comment_id": 95703041, "body": "No, it doesn&#39;t; *p is an allocated object and has no declared type."}, {"owner": {"reputation": 4519, "user_id": 1185191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8087c4c65ccdf94761ce95c695f8896?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/1185191/james"}, "edited": false, "score": 0, "creation_date": 1548872359, "post_id": 54446877, "comment_id": 95703084, "body": "<code>malloc()</code> returns <code>void *</code>. This is a special type that can be allocated to any other pointer without an explicit cast and without causing a compiler warning."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 4519, "user_id": 1185191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8087c4c65ccdf94761ce95c695f8896?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/1185191/james"}, "edited": false, "score": 3, "creation_date": 1548872446, "post_id": 54446877, "comment_id": 95703111, "body": "@James: The C standard has particular rules about the <i>effective type</i> of an object that go beyond merely what type of pointer is used to access them. The fact that <code>malloc</code> returns a <code>void *</code> is not informative in this regard."}, {"owner": {"reputation": 4519, "user_id": 1185191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8087c4c65ccdf94761ce95c695f8896?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/1185191/james"}, "edited": false, "score": 0, "creation_date": 1548872933, "post_id": 54446877, "comment_id": 95703331, "body": "Can anybody provide a link to the spec that has 6.5.2.3p4?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 4519, "user_id": 1185191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8087c4c65ccdf94761ce95c695f8896?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/1185191/james"}, "edited": false, "score": 1, "creation_date": 1548874168, "post_id": 54446877, "comment_id": 95704010, "body": "@James &quot;<i>4 A postfix expression followed by the -&gt; operator and an identifier designates a member of a structure or union object. The value is that of the named member of the object to which the first expression points, and is an lvalue. If the first expression is a pointer to a qualified type, the result has the so-qualified version of the type of the designated member.</i>&quot;"}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1548977724, "post_id": 54446877, "comment_id": 95749430, "body": "<i>Suppose the effective type of <code>*p</code> ends up as int. Is this undefined behavior then? Someone will end up accessing the object via an lvalue with type MyStruct</i> <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5p7\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.5p7</a> seem to allow accessing an object through an lvalue of struct/union type having member with effective type of the object."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1548883550, "last_edit_date": 1548883550, "creation_date": 1548871838, "answer_id": 54446958, "question_id": 54446877, "link": "https://stackoverflow.com/questions/54446877/effective-types-of-allocated-objects-and-structs/54446958#54446958", "title": "Effective types of allocated objects and structs", "body": "<p>The allocated block does not have an effective type, because (1) it has no declared type, and (2) it has not been assigned. Parts of the block that correspond to members <code>x</code> and <code>y</code> have effective types, but not the entire block.</p>\n\n<p>Not having an effective type does not constitute undefined behavior, though: each member of <code>MyStruct</code> returned from <code>make_struct</code> has been given a proper effective type individually, so the code accessing members of the returned <code>struct</code> remains valid.</p>\n\n<p>Your code fragment could be modified to use a <a href=\"https://en.cppreference.com/w/c/language/compound_literal\" rel=\"nofollow noreferrer\">compound literal</a> to initialize the whole of <code>MyStruct</code>, rather than initializing its components. This would make the effective type of the allocated block <code>MyStruct</code>:</p>\n\n<pre><code>MyStruct *make_struct () {\n    MyStruct *p = malloc(sizeof(MyStruct));\n    *p = (MyStruct){.x = 1, .y = 2};\n    return p;\n}\n</code></pre>\n\n<p><strong>Note:</strong> This answer has been significantly edited after an update to the question.</p>\n"}, {"comments": [{"owner": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548874335, "post_id": 54447527, "comment_id": 95704090, "body": "I think it&#39;s clear that &quot;through an lvalue&quot; refers to the expression &quot;p-&gt;x&quot;, not 1 which represents the value (a.k.a rvalue) being stored."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548874451, "post_id": 54447527, "comment_id": 95704142, "body": "@zagortenay333 I might have misread that part indeed. This part of the standard is quite horribly written. I&#39;ll edit. The resulting type is the same either way."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548874859, "post_id": 54447527, "comment_id": 95704367, "body": "Think I got the language lawyering right this time. Proof-reading appreciated :)"}, {"owner": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548875501, "post_id": 54447527, "comment_id": 95704683, "body": "I don&#39;t see how the effective type could end up as char. If the type of &quot;p-&gt;x&quot; is an int, then the effective type remains int for all operations that don&#39;t modify (since &quot;p-&gt;y&quot; can&#39;t change anything here.) But I don&#39;t understand what the type of &quot;p-&gt;x&quot; even is; it&#39;s completely non-obvious to me."}, {"owner": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548875576, "post_id": 54447527, "comment_id": 95704728, "body": "Also, if the final effective type is int, then the above code invokes undefined behaviour, since someone will access an object with effective type int using an lvalue that will be MyStruct. I mean, can you even access a struct or only it&#39;s members?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548876204, "post_id": 54447527, "comment_id": 95705024, "body": "@zagortenay333 As far as the compiler knows, there is no struct at that memory location. There is an <code>int</code> in one location and a <code>char</code> in another, since that&#39;s how you accessed them. The part you quoted regarding the -&gt; operator makes this clear. The first expression<code>p</code> &quot;points&quot; (read: refers) to a struct type where the named member is x. This isn&#39;t really written with the concept of effective type in mind, since effective type was added in C99 but the text in 6.5.2.3 remains since C90."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548876354, "post_id": 54447527, "comment_id": 95705087, "body": "@zagortenay333 Regarding strict aliasing, the function only returns a pointer, the contents are never de-referenced through a pointer type, so it doesn&#39;t apply. But even when it does, the strict aliasing rule has an exception for structs: &quot;an aggregate or union type that includes one of the aforementioned types among its members&quot;. A struct being an aggregate type that includes the aforementioned &quot;type compatible with the effective type of the object&quot;. In plain English: accessing the <code>int</code> object through a pointer to a struct containing a <code>int</code> member is fine and exempt from the rule."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548876764, "post_id": 54447527, "comment_id": 95705311, "body": "@zagortenay333 Regarding your edit, I think I finally understand the source of your confusion. The whole of the data pointed by <code>p</code> has no effective type through any of this. <code>p-&gt;x</code> has the effective type <code>int</code> and <code>p-&gt;y</code> has effective type <code>char</code>, respectively. In order to make the whole data effective type struct, you would have to write something like <code>*p = (MyStruct){1,2};</code> which is not the case here. <code>p</code> could as well have been a <code>void*</code> and you could have written something horrid like <code>*(int*)p = 1</code> and <code>((char*)p)[sizeof(int)] = 2;</code> and it would have had the same effect."}, {"owner": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548877541, "post_id": 54447527, "comment_id": 95705689, "body": "&quot;The whole of the data&quot; yes that&#39;s what I was refering to! My assumption was that malloc returns a single object. The fact that this access pattern renders it as two separate objects is kind of weird to me. Looking at the definition of object as &quot;region of data storage&quot; I guess it makes sense. I think your two comments here should probably be the answer here."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "edited": false, "score": 0, "creation_date": 1548877739, "post_id": 54447527, "comment_id": 95705781, "body": "@zagortenay333 For the purpose of effective type, you have to think of malloc as returning a chunk of unidentified bytes, as many as you asked for. The type of the pointer has no relevance at all."}, {"owner": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1586982631, "post_id": 54447527, "comment_id": 108334720, "body": "@Lundin, I can&#39;t seem to figure out the difference between <i>&quot;If a value is stored into an object having no declared type through an lvalue having a type that is not a character type, then the type of the lvalue becomes the effective type of the object ...&quot;</i>, as opposed to &quot;<i>For all other accesses to an object having no declared type, the effective type of the object is simply the type of the lvalue used for the access.</i>&quot;. The first one excludes char types, but apart from that I think they both say the exact same thing - the effective type of the object being assigned is that of the [...]"}, {"owner": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1586982663, "post_id": 54447527, "comment_id": 108334744, "body": "[...] lvalue the value is being set through. What&#39;s the difference?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1587027594, "post_id": 54447527, "comment_id": 108349078, "body": "The first case specifically mentions a write (store), after which the effective type of that area changes from no effective type, to the type used when writing to that area. The second case is for accessing, including reads. Take for example <code>int* foo = malloc(sizeof *foo);</code>. The area that foo points at has no effective type. Then we do <code>int x = *foo;</code>, this is a lvalue read access and the effective type for this specific access is <code>int</code>. <code>foo</code> still points at an object with no effective type. -&gt;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1587027714, "post_id": 54447527, "comment_id": 108349146, "body": "But if we do <code>*foo = 1;</code> writing an <code>int</code>, the effective type of what <code>foo</code> points at changes from no effective type to <code>int</code> from here on. Meaning that a subsequent access of <code>double* bar = (double*)foo); double d = *bar;</code> is a strict aliasing violation. Or at least this is how it all should work in <i>theory</i>. What compilers do in practice is another story, sadly. Because this part of the standard is ambiguous and poorly written."}, {"owner": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1587163193, "post_id": 54447527, "comment_id": 108411456, "body": "@Lundin So - is it correct to say that a piece of memory can only have its effective type set, once? I.e. - once we did <code>*foo = 1</code> and set the memory pointed to by <code>foo</code> to effective type <code>int</code>, we can never do <code>*((double*) foo) = 2.5</code> in order to set the effective type to <code>float</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1587449425, "post_id": 54447527, "comment_id": 108507942, "body": "@AvivCohn Yes pretty much, but an area can have more than one effective type if you use union etc."}, {"owner": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1587457263, "post_id": 54447527, "comment_id": 108511491, "body": "@Lundin, Hmm, that&#39;s interesting. I had a discussion on this topic in the comments to this answer to a question of mine (<a href=\"https://stackoverflow.com/a/61297634/3284878\">stackoverflow.com/a/61297634/3284878</a>). In it, the person confirmed my more recent understanding of the text, that it&#39;s impossible to violate SAR by performing a write-dereference. And that it&#39;s only possible to violate SAR by performing a read-dereference.  I.e. - if memory area A had effective type X, and later we reassign its effective type to Y, it is now legal to read-dereference memory area A through lvalue of type Y. Don&#39;t you agree?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1588193772, "post_id": 54447527, "comment_id": 108810189, "body": "@AvivCohn: The Effective Type abstraction has some tricky and unworkable corner cases that cannot be handled correctly without impeding optimization in some more common cases.  The only way the rule would make any sense would be if the authors assumed that it would be impossible for a compiler to behave meaningfully in all cases where the Standard required it without also behaving meaningfully in some other cases, and there was thus no need to explicitly accommodate all cases that should be useful.  Their assumption might have been correct, since neither clang nor gcc handles all the tricky..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1588194020, "post_id": 54447527, "comment_id": 108810284, "body": "...corner cases correctly.  As such, I don&#39;t think there&#39;s much value in trying to interpret whether the Standard would require that implementations accommodate various corner cases.  Most implementations can be configured to reliably process some corner cases the Standard clearly doesn&#39;t require, and those that aren&#39;t configured to do so shouldn&#39;t be trusted to handle all of the corner cases the Standard does require.  The fact that the Standard does or doesn&#39;t require an implementation to handle a construct usefully doesn&#39;t imply that any particular implementation will do so."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1588228749, "post_id": 54447527, "comment_id": 108819657, "body": "@AvivCohn To sum up what&#39;s said in C17 6.5./6, there are two different cases: objects that have a <i>declared type</i>, such as <code>int x;</code>, and objects that have <i>no declared type</i>, such as chunks returned from malloc, pointers to addresses where the compiler can&#39;t know what&#39;s stored etc. The former can never change their effective type, but objects with no declared type can have the effective type changed by a write access."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11251, "user_id": 3284878, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/d324c610856d2626e9b719eb4135b3cb?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv Cohn", "link": "https://stackoverflow.com/users/3284878/aviv-cohn"}, "edited": false, "score": 0, "creation_date": 1588228845, "post_id": 54447527, "comment_id": 108819698, "body": "@AvivCohn Also please don&#39;t invent new three letter abbreviations, it&#39;s a disease. &quot;SAR&quot; in the context of computer engineering already means Successive Approximation Register and refers to a certain category of Analog-To-Digital converters (SAR ADC)."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 3, "last_activity_date": 1548877413, "last_edit_date": 1548877413, "creation_date": 1548874104, "answer_id": 54447527, "question_id": 54446877, "link": "https://stackoverflow.com/questions/54446877/effective-types-of-allocated-objects-and-structs/54447527#54447527", "title": "Effective types of allocated objects and structs", "body": "<p>Quotes are from C99 6.5/6</p>\n\n<blockquote>\n  <blockquote>\n    <p>The <em>effective type</em> of an object for an access to its stored value is the declared type of the object,  if any.</p>\n  </blockquote>\n</blockquote>\n\n<ul>\n<li><code>malloc(sizeof(MyStruct));</code> At this point, the returned data has no effective type.</li>\n<li><code>MyStruct *p = malloc(sizeof(MyStruct));</code> Still no effective type, <code>p</code> just points at the data without storing anything.</li>\n<li><p><code>p-&gt;x = 1;</code> The effective type rule:</p>\n\n<blockquote>\n  <p>If a value is stored into an object having no declared type through an\n  lvalue having a type that is not a character type, then the type of the lvalue becomes the effective type of the object for that access and for subsequent accesses that do not modify the stored value.</p>\n</blockquote>\n\n<p>Since we have <code>int x;</code> the lvalue of the expression <code>p-&gt;x = 1;</code> is <code>int</code> and it becomes the effective type of what's stored at <code>p-&gt;x</code>.</p></li>\n<li><p>In case of <code>p-&gt;y</code> the lvalue used for object access is a character type, so the above rule doesn't apply. Nor is it copied as a character array. We end up in the final sentence of the rule:</p>\n\n<blockquote>\n  <p>For all other accesses to an object having no declared type, the effective type of the object is simply the type of the lvalue used for the access.</p>\n</blockquote>\n\n<p>Meaning the effective type of <code>p-&gt;y</code> becomes <code>char</code>, since the lvalue of the expression <code>p-&gt;y = 2;</code> is <code>char</code>.</p></li>\n</ul>\n\n<p>6.5.2.3/4 has no relevance here, apart from \"...and is an lvalue\".</p>\n\n<p><code>*p</code> has no effective type as such, because we never accessed the memory area through a complete struct type. However, an expression such as <code>MyStruct m = *make_struct();</code> is still well-defined, since the strict aliasing rule allows a struct access to the objects, given that the struct contains members that are compatible with the effective types. In this case, the struct contains <code>int</code> and <code>char</code> members that are perfectly compatible with the effective types that the data referred through with <code>p-&gt;x</code> and <code>p-&gt;y</code> ended up with.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1553027292, "creation_date": 1553027292, "answer_id": 55249467, "question_id": 54446877, "link": "https://stackoverflow.com/questions/54446877/effective-types-of-allocated-objects-and-structs/55249467#55249467", "title": "Effective types of allocated objects and structs", "body": "<p>The term \"object\" as used everywhere in the C11 draft (N1570) except 6.5p6 (the \"Effective Type Rule\") refers to a region of storage which is associated with some particular type.  If <code>int *p</code> is a valid non-null pointer, it will point \"to\", or \"just past\", an object of type <code>int</code>.  It seems like 6.5p6 uses the term \"object\" to refer to some kind of region of storage that may or may not actually be an object, but the rest of the Standard does not use the term \"object\" in such a fashion.  Among other things, the specification for <code>malloc</code> does <em>not</em> say that it returns a pointer to an object, nor that it creates an object, but rather that it returns a pointer to a region of storage large enough to hold an object of the given size.</p>\n\n<p>Because 6.5p6 uses the term \"object\" in a way which is contrary to its usage everywhere else, its meaning will depend upon how one chooses to define the term.  In the absence of footnote 87 (\"Allocated objects have no declared type.\") one could resolve this issue by simply observing that the effective type of every object is simply its type.  This would actually work just fine if one recognized regions of storage as holding a superposition of all objects that could fit therein, but interpreted footnote 88 of 6.5p7 (\"The intent of this list is to specify those circumstances in which an object may or may not be aliased.\") as saying that the only \"objects\" to which the rule applies are those which are used in the same context as an lvalue without having been freshly and visibly used in that lvalue's derivation.</p>\n\n<p>As it is, however, footnote 87 makes clear that 6.5p6 must use a different meaning of \"object\" from everything else in the Standard, without making clear what that meaning is.  I don't think it's possible to formulate a definition that handles all corner cases reasonably, and it seems doubtful that the authors of the Standard had a consensus meaning for what things were or were not \"objects\" for purposes of 6.5p6 or 6.5p7.  Consequently, the meaning of 6.5p6 and 6.5p7, and what will be allowable based upon them, will be largely dependent upon how a reader chooses to bodge the meaning of \"object\".</p>\n"}], "owner": {"reputation": 257, "user_id": 5107739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648cd9f4f8595b6f38fa9f4e6a62925e?s=128&d=identicon&r=PG", "display_name": "zagortenay333", "link": "https://stackoverflow.com/users/5107739/zagortenay333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 54447527, "answer_count": 3, "score": 3, "last_activity_date": 1553027292, "creation_date": 1548871534, "last_edit_date": 1549166961, "question_id": 54446877, "link": "https://stackoverflow.com/questions/54446877/effective-types-of-allocated-objects-and-structs", "title": "Effective types of allocated objects and structs", "body": "<p>From c99's spec I cannot quite understand what is going on with the effective type of the below allocated object.</p>\n\n<pre><code>typedef struct {\n    int x;\n    char y;\n} MyStruct ;\n\nMyStruct *make_struct (void) {\n    MyStruct *p = malloc(sizeof(MyStruct));\n    p-&gt;x = 1;\n    p-&gt;y = 2;\n\n    /* what is the effective type of the allocated object at this point? */\n\n    return p;\n}\n</code></pre>\n\n<p>When you assign a value to an allocated object, the effective type of the allocated object becomes the type of the lvalue used for the store, but what is the lvalue used here?</p>\n\n<p>As far as I understand from 6.5.2.3p4...</p>\n\n<blockquote>\n  <p>A postfix expression followed by the -> operator and an identifier designates a member of a structure or union object. The value is that of the named member of the object to which the first expression points, and is an lvalue. If the first expression is a pointer to a qualified type, the result has the so-qualified version of the type of the designated member.</p>\n</blockquote>\n\n<p>...the type of an \"x->y\" expression is the type of y (but only if x points to a qualified type).<br>\nSo then I have an allocated object with no effective type and two \"inner objects\" with types int and char?</p>\n\n<p>How confusing..</p>\n\n<p>Edit:\nSuppose the effective type of *p ends up as int. Is this undefined behavior then? Someone will end up accessing the object via an lvalue with type MyStruct. Does accessing a member imply accessing the aggregate type too?\nThis keeps on giving..</p>\n"}, {"tags": ["python", "c++", "c", "swig"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1548999739, "post_id": 54446816, "comment_id": 95754578, "body": "Start with the simplest working C code to call a function in the library.  Any header files you #include to make it work should be in the <code>%{ %}</code> section so the wrapper includes them, too.  Then add one declaration from the header of a function you want to call after the <code>%{ %}</code> section and see if you can build a wrapper with SWIG and call that function from Python.  Share the .i file and your build steps if you have trouble."}, {"owner": {"reputation": 25, "user_id": 3624203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6452cb79d429d818ac995d9450feb42?s=128&d=identicon&r=PG&f=1", "display_name": "tuco94", "link": "https://stackoverflow.com/users/3624203/tuco94"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1549059858, "post_id": 54446816, "comment_id": 95782406, "body": "It worked.  I included the <code>#includes</code> from lib.cpp on lib.i."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3624203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6452cb79d429d818ac995d9450feb42?s=128&d=identicon&r=PG&f=1", "display_name": "tuco94", "link": "https://stackoverflow.com/users/3624203/tuco94"}, "edited": false, "score": 0, "creation_date": 1548948727, "post_id": 54453626, "comment_id": 95736048, "body": "Thanks for your reply. I now get an error, I updated my original question and included it at the bottom."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 25, "user_id": 3624203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6452cb79d429d818ac995d9450feb42?s=128&d=identicon&r=PG&f=1", "display_name": "tuco94", "link": "https://stackoverflow.com/users/3624203/tuco94"}, "edited": false, "score": 0, "creation_date": 1548958548, "post_id": 54453626, "comment_id": 95741648, "body": "@tuco94 Your error is because you didn&#39;t link the Python extension that was generated against the actual implementation of your functions."}, {"owner": {"reputation": 25, "user_id": 3624203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6452cb79d429d818ac995d9450feb42?s=128&d=identicon&r=PG&f=1", "display_name": "tuco94", "link": "https://stackoverflow.com/users/3624203/tuco94"}, "edited": false, "score": 0, "creation_date": 1548962824, "post_id": 54453626, "comment_id": 95743664, "body": "Didn&#39;t I? I linked lib.o(where the function is) and lib_wrap.o against _libmusly.so. Isn&#39;t that it? (The last line in the second code snippet in my question)"}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1548911084, "creation_date": 1548911084, "answer_id": 54453626, "question_id": 54446816, "link": "https://stackoverflow.com/questions/54446816/swig-python-c-c-the-resulting-module-is-empty-no-errors/54453626#54453626", "title": "SWIG Python C/C++. The resulting module is empty, no errors", "body": "<p>In the <code>.i</code> file, code between <code>%{</code> and <code>%}</code> is directly included in the wrapper with no modification.  Code at the module level is parsed by SWIG and wrapper functions are created.  For example:</p>\n\n<pre><code>%module test\n\n%{\nint func(int a, int b) { return a + b; }  // declares a function that will appear in test_wrap.c\n%}\n\nint func(int a, int b);  // SWIG creates a wrapper function in test_wrap.c \n</code></pre>\n\n<p>You can also do <code>%inline %{ %}</code> which both declares and creates wrappers:</p>\n\n<pre><code>%module test\n\n%inline %{\nint func(int a, int b) { return a + b; }\n%}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3624203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6452cb79d429d818ac995d9450feb42?s=128&d=identicon&r=PG&f=1", "display_name": "tuco94", "link": "https://stackoverflow.com/users/3624203/tuco94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 54453626, "answer_count": 1, "score": 0, "last_activity_date": 1549059973, "creation_date": 1548871284, "last_edit_date": 1592644375, "question_id": 54446816, "link": "https://stackoverflow.com/questions/54446816/swig-python-c-c-the-resulting-module-is-empty-no-errors", "title": "SWIG Python C/C++. The resulting module is empty, no errors", "body": "<h1>For anyone in the future</h1>\n<p>The solution is in the comments of the question and the reply.</p>\n<hr />\n<p>I'm trying to create a python interface for the <a href=\"https://github.com/dominikschnitzer/musly\" rel=\"nofollow noreferrer\">musly</a> software (C/C++), more specifically for the libmusly, with swig. I'm using a building directory that is the /libmusly directory from the linked repo with the /include directory from the same repo inside it.</p>\n<p>I'm using the following swig interface named lib.i, since the methods I want to access are in the lib.cpp file. I will say in advance that the section at the end makes me thing the problem is in this file.</p>\n<pre><code>/* lib.i */ \n%module libmusly \n%{ \ntypedef struct {\n    void* method;\n    char* method_name;\n    void* decoder;\n    char* decoder_name; } musly_jukebox;\n\ntypedef float musly_track;\n\ntypedef int musly_trackid;\n\nconst char* musly_version();\n\nvoid musly_debug(\n        int level);\n\nconst char* musly_jukebox_listmethods();\n\nconst char* musly_jukebox_listdecoders();\n\nconst char* musly_jukebox_aboutmethod(\n        musly_jukebox* jukebox);\n\nmusly_jukebox* musly_jukebox_poweron(\n        const char* method,\n        const char* decoder);   int musly_jukebox_similarity(\n        musly_jukebox* jukebox,\n        musly_track* seed_track,\n        musly_trackid seed_trackid,\n        musly_track** tracks,\n        musly_trackid* trackids,\n        int num_tracks,\n        float* similarities);\n\nmusly_track* musly_track_alloc(\n        musly_jukebox* jukebox);\n\nvoid musly_track_free(\n        musly_track* track);\n\nint musly_track_size(\n        musly_jukebox* jukebox);\n\nint musly_track_analyze_audiofile(\n        musly_jukebox* jukebox,\n        const char* audiofile,\n        float excerpt_length,\n        float excerpt_start,\n        musly_track* track);    \n%}\n</code></pre>\n<p>I'm using the following file to build and link it:</p>\n<pre><code>#!/bin/bash\n\necho &quot;Generating swig wrapper file.&quot; \nswig3.0 -c++ -python lib.i\n\necho &quot;Compiling.&quot; \nc++ -fPIC -c -lstdc++ -DNDEBUG -Dlibmusly_EXPORTS\n-DHAVE_AVUTIL_CHANNEL_LAYOUT -DMUSLY_VERSION=\\&quot;0.2\\&quot; -I./ -I./include/ -I./libresample/ -I./decoders/ -I./kissfft/ -I./methods/ -I/usr/include/python3.5m/ -I/usr/include/eigen3/ -I/usr/include/x86_64-linux-gnu lib_wrap.cxx kissfft/kiss_fft.c kissfft/kiss_fftr.c methods/mandelellis.cpp methods/timbre.cpp decoders/libav.cpp resampler.cpp plugins.cpp method.cpp decoder.cpp windowfunction.cpp powerspectrum.cpp melspectrum.cpp discretecosinetransform.cpp mfcc.cpp gaussianstatistics.cpp mutualproximity.cpp lib.cpp\n\nc++ -fPIC -c -lstdc++ -DNDEBUG -Dlibmusly_EXPORTS\n-DHAVE_AVUTIL_CHANNEL_LAYOUT -DMUSLY_VERSION=\\&quot;0.2\\&quot; -I./ -I./include/ -I./libresample/ -I./decoders/ -I./kissfft/ -I./methods/ -I/usr/include/python3.5m/ -I/usr/include/eigen3/ -I/usr/include/x86_64-linux-gnu libresample/filterkit.c libresample/resamplesubs.c libresample/resample.c \n\necho &quot;Linking.&quot; \ncc  -fPIC   -shared -Wl,-soname,libmusly_resample.so\n-o libmusly_resample.so libresample/filterkit.o libresample/resamplesubs.o libresample/resample.o \n\nc++ -fPIC  -shared -Wl,-soname,_libmusly.so -o _libmusly.so kiss_fft.o kiss_fftr.o mandelellis.o timbre.o libav.o resampler.o plugins.o method.o decoder.o windowfunction.o powerspectrum.o melspectrum.o discretecosinetransform.o mfcc.o gaussianstatistics.o mutualproximity.o libmusly_resample.so lib.o lib_wrap.o -lavcodec\n-lavformat -lavutil -lpython3.5m\n</code></pre>\n<p>The mentioned in the title I can import the resulting module into the python interpreter I linked against, 3.5m, with no errors. But the module simply has no methods besides the standard ones, that being and end with an &quot;_&quot; (underscore), and a few swig related methods that also begin and end with an underscore.</p>\n<p>I did try importing libmusly and _libmusly, the former always contains the later anyways. The methods within them are different but the same problem exists, none of my methods are there.</p>\n<p>The files in the directory after compilation are:</p>\n<pre><code>./:\nbuild.sh\ndecoder.cpp\ndecoder.h\ndecoder.o\ndecoders\ndiscretecosinetransform.cpp\ndiscretecosinetransform.h\ndiscretecosinetransform.o\nfiles.txt\nfilterkit.o\ngaussian.h\ngaussianstatistics.cpp\ngaussianstatistics.h\ngaussianstatistics.o\nidpool.h\ninclude\nkissfft\nkiss_fft.o\nkiss_fftr.o\nlibav.o\nlib.cpp\nlib.i\nlibmusly.py\nlibmusly_resample.so\n_libmusly.so\nlib.o\nlibresample\nlib_wrap.cxx\nlib_wrap.o\nmandelellis.o\nmelspectrum.cpp\nmelspectrum.h\nmelspectrum.o\nmethod.cpp\nmethod.h\nmethod.o\nmethods\nmfcc.cpp\nmfcc.h\nmfcc.o\nmutualproximity.cpp\nmutualproximity.h\nmutualproximity.o\nplugins.cpp\nplugins.h\nplugins.o\npowerspectrum.cpp\npowerspectrum.h\npowerspectrum.o\nresample.o\nresampler.cpp\nresampler.h\nresampler.o\nresamplesubs.o\ntimbre.o\nwindowfunction.cpp\nwindowfunction.h\nwindowfunction.o\n\n./decoders:\nlibav.cpp\nlibav.h\n\n./include:\nCMakeLists.txt\nminilog.h\nminilog.h.gch\nmusly\n\n./include/musly:\nmusly.h\nmusly.h.gch\nmusly_types.h\n\n./kissfft:\nCHANGELOG\nCOPYING\nkiss_fft.c\n_kiss_fft_guts.h\nkiss_fft.h\nkiss_fftr.c\nkiss_fftr.h\nREADME\nREADME.simd\nTIPS\n\n./libresample:\nCMakeLists.txt\nfilterkit.c\nfilterkit.h\nfilterkit.o\nlibresample.h\nLICENSE.txt\nREADME.txt\nresample.c\nresample_defs.h\nresample.o\nresamplesubs.c\nresamplesubs.o\n\n./methods:\nmandelellis.cpp\nmandelellis.h\ntimbre.cpp\ntimbre.h\n</code></pre>\n<p>The contents of libmusly.py are:</p>\n<pre><code># This file was automatically generated by SWIG (http://www.swig.org).\n# Version 3.0.10\n#\n# Do not make changes to this file unless you know what you are doing--modify\n# the SWIG interface file instead.\n\n\n\n\n\nfrom sys import version_info as _swig_python_version_info\nif _swig_python_version_info &gt;= (2, 7, 0):\n    def swig_import_helper():\n        import importlib\n        pkg = __name__.rpartition('.')[0]\n        mname = '.'.join((pkg, '_libmusly')).lstrip('.')\n        try:\n            return importlib.import_module(mname)\n        except ImportError:\n            return importlib.import_module('_libmusly')\n    _libmusly = swig_import_helper()\n    del swig_import_helper\nelif _swig_python_version_info &gt;= (2, 6, 0):\n    def swig_import_helper():\n        from os.path import dirname\n        import imp\n        fp = None\n        try:\n            fp, pathname, description = imp.find_module('_libmusly', [dirname(__file__)])\n        except ImportError:\n            import _libmusly\n            return _libmusly\n        if fp is not None:\n            try:\n                _mod = imp.load_module('_libmusly', fp, pathname, description)\n            finally:\n                fp.close()\n            return _mod\n    _libmusly = swig_import_helper()\n    del swig_import_helper\nelse:\n    import _libmusly\ndel _swig_python_version_info\ntry:\n    _swig_property = property\nexcept NameError:\n    pass  # Python &lt; 2.2 doesn't have 'property'.\n\ntry:\n    import builtins as __builtin__\nexcept ImportError:\n    import __builtin__\n\ndef _swig_setattr_nondynamic(self, class_type, name, value, static=1):\n    if (name == &quot;thisown&quot;):\n        return self.this.own(value)\n    if (name == &quot;this&quot;):\n        if type(value).__name__ == 'SwigPyObject':\n            self.__dict__[name] = value\n            return\n    method = class_type.__swig_setmethods__.get(name, None)\n    if method:\n        return method(self, value)\n    if (not static):\n        if _newclass:\n            object.__setattr__(self, name, value)\n        else:\n            self.__dict__[name] = value\n    else:\n        raise AttributeError(&quot;You cannot add attributes to %s&quot; % self)\n\n\ndef _swig_setattr(self, class_type, name, value):\n    return _swig_setattr_nondynamic(self, class_type, name, value, 0)\n\n\ndef _swig_getattr(self, class_type, name):\n    if (name == &quot;thisown&quot;):\n        return self.this.own()\n    method = class_type.__swig_getmethods__.get(name, None)\n    if method:\n        return method(self)\n    raise AttributeError(&quot;'%s' object has no attribute '%s'&quot; % (class_type.__name__, name))\n\n\ndef _swig_repr(self):\n    try:\n        strthis = &quot;proxy of &quot; + self.this.__repr__()\n    except __builtin__.Exception:\n        strthis = &quot;&quot;\n    return &quot;&lt;%s.%s; %s &gt;&quot; % (self.__class__.__module__, self.__class__.__name__, strthis,)\n\ntry:\n    _object = object\n    _newclass = 1\nexcept __builtin__.Exception:\n    class _object:\n        pass\n    _newclass = 0\n\n# This file is compatible with both classic and new-style classes.\n</code></pre>\n<p>I'm using Debian 9 on an Intel i3 from ~2013, everything was installed from the repos. Swig is version 3 and c++ 6.3.0. The swig docs recommend c++ for compiling c++ but I did try other compilers and got the same result.</p>\n<hr />\n<p>When I try to add the following code to the end of /libmusly/CMakeLists.txt and compiling I get two files &quot;libmusly.py&quot; and &quot;_libmusly.so&quot;, the former I have to rename to &quot;_libmusly.py&quot; only to get the same problem. But the resulting _libmusly.so is much bigger than the one I get through the other method, 14,6MB vs 3,5MB.</p>\n<pre><code>FIND_PACKAGE(SWIG REQUIRED) INCLUDE(${SWIG_USE_FILE})\n\nFIND_PACKAGE(PythonLibs) INCLUDE_DIRECTORIES(${LIBMUSLY_INCLUDE}    ${EIGEN3_INCLUDE_DIR}   ${LIBAV_INCLUDE_DIRS}   ${CMAKE_CURRENT_SOURCE_DIR}     ${PYTHON_INCLUDE_PATH})\n\nINCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})\n\nSET(CMAKE_SWIG_FLAGS &quot;&quot;)\n\nSET_SOURCE_FILES_PROPERTIES(lib.i PROPERTIES CPLUSPLUS ON) SET_SOURCE_FILES_PROPERTIES(lib.i PROPERTIES SWIG_FLAGS &quot;-includeall&quot;) SWIG_ADD_MODULE(libmusly python lib.i\n    kissfft/kiss_fft.c\n    kissfft/kiss_fftr.c\n    methods/mandelellis.cpp\n    methods/timbre.cpp\n    decoders/libav.cpp\n    resampler.cpp\n    plugins.cpp\n    method.cpp\n    decoder.cpp\n    windowfunction.cpp\n    powerspectrum.cpp\n    melspectrum.cpp\n    discretecosinetransform.cpp\n    mfcc.cpp\n    gaussianstatistics.cpp\n    mutualproximity.cpp\n    lib.cpp) SWIG_LINK_LIBRARIES(libmusly\n    ${LIBMUSLY_LIBS}\n    ${LIBAV_LIBRARIES}\n    ${LIBMUSLY_EXTERNAL}\n    ${PYTHON_LIBRARIES})\n</code></pre>\n<hr />\n<h1>Update after Mark's reply</h1>\n<p>I can't import the resulting module anymore after using <code>%inline</code> before the <code>%{ %}</code> block. The interpreter complains about an undefined symbol even though it is defined in the .i and .cpp files. I think it might be a linking error but I don't know what. The error:</p>\n<pre><code>Traceback (most recent call last):\n  File &quot;/home/tuco/Desenvolvimento/libmusly_swig/libmusly.py&quot;, line 18, in swig_import_helper\n    return importlib.import_module(mname)\n  File &quot;/usr/lib/python3.5/importlib/__init__.py&quot;, line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 986, in _gcd_import\n  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 969, in _find_and_load\n  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 958, in _find_and_load_unlocked\n  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 666, in _load_unlocked\n  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 577, in module_from_spec\n  File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 914, in create_module\n  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 222, in _call_with_frames_removed\nImportError: /home/tuco/Desenvolvimento/libmusly_swig/_libmusly.so: undefined symbol: _Z26musly_jukebox_listdecodersv\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;\n  File &quot;/home/tuco/Desenvolvimento/libmusly_swig/libmusly.py&quot;, line 21, in &lt;module&gt;\n    _libmusly = swig_import_helper()\n  File &quot;/home/tuco/Desenvolvimento/libmusly_swig/libmusly.py&quot;, line 20, in swig_import_helper\n    return importlib.import_module('_libmusly')\n  File &quot;/usr/lib/python3.5/importlib/__init__.py&quot;, line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\nImportError: /home/tuco/Desenvolvimento/libmusly_swig/_libmusly.so: undefined symbol: _Z26musly_jukebox_listdecodersv\n</code></pre>\n<p>New libmusly.py</p>\n<pre><code># This file was automatically generated by SWIG (http://www.swig.org).\n# Version 3.0.10\n#\n# Do not make changes to this file unless you know what you are doing--modify\n# the SWIG interface file instead.\n\n\n\n\n\nfrom sys import version_info as _swig_python_version_info\nif _swig_python_version_info &gt;= (2, 7, 0):\n    def swig_import_helper():\n        import importlib\n        pkg = __name__.rpartition('.')[0]\n        mname = '.'.join((pkg, '_libmusly')).lstrip('.')\n        try:\n            return importlib.import_module(mname)\n        except ImportError:\n            return importlib.import_module('_libmusly')\n    _libmusly = swig_import_helper()\n    del swig_import_helper\nelif _swig_python_version_info &gt;= (2, 6, 0):\n    def swig_import_helper():\n        from os.path import dirname\n        import imp\n        fp = None\n        try:\n            fp, pathname, description = imp.find_module('_libmusly', [dirname(__file__)])\n        except ImportError:\n            import _libmusly\n            return _libmusly\n        if fp is not None:\n            try:\n                _mod = imp.load_module('_libmusly', fp, pathname, description)\n            finally:\n                fp.close()\n            return _mod\n    _libmusly = swig_import_helper()\n    del swig_import_helper\nelse:\n    import _libmusly\ndel _swig_python_version_info\ntry:\n    _swig_property = property\nexcept NameError:\n    pass  # Python &lt; 2.2 doesn't have 'property'.\n\ntry:\n    import builtins as __builtin__\nexcept ImportError:\n    import __builtin__\n\ndef _swig_setattr_nondynamic(self, class_type, name, value, static=1):\n    if (name == &quot;thisown&quot;):\n        return self.this.own(value)\n    if (name == &quot;this&quot;):\n        if type(value).__name__ == 'SwigPyObject':\n            self.__dict__[name] = value\n            return\n    method = class_type.__swig_setmethods__.get(name, None)\n    if method:\n        return method(self, value)\n    if (not static):\n        if _newclass:\n            object.__setattr__(self, name, value)\n        else:\n            self.__dict__[name] = value\n    else:\n        raise AttributeError(&quot;You cannot add attributes to %s&quot; % self)\n\n\ndef _swig_setattr(self, class_type, name, value):\n    return _swig_setattr_nondynamic(self, class_type, name, value, 0)\n\n\ndef _swig_getattr(self, class_type, name):\n    if (name == &quot;thisown&quot;):\n        return self.this.own()\n    method = class_type.__swig_getmethods__.get(name, None)\n    if method:\n        return method(self)\n    raise AttributeError(&quot;'%s' object has no attribute '%s'&quot; % (class_type.__name__, name))\n\n\ndef _swig_repr(self):\n    try:\n        strthis = &quot;proxy of &quot; + self.this.__repr__()\n    except __builtin__.Exception:\n        strthis = &quot;&quot;\n    return &quot;&lt;%s.%s; %s &gt;&quot; % (self.__class__.__module__, self.__class__.__name__, strthis,)\n\ntry:\n    _object = object\n    _newclass = 1\nexcept __builtin__.Exception:\n    class _object:\n        pass\n    _newclass = 0\n\nclass musly_jukebox(_object):\n    __swig_setmethods__ = {}\n    __setattr__ = lambda self, name, value: _swig_setattr(self, musly_jukebox, name, value)\n    __swig_getmethods__ = {}\n    __getattr__ = lambda self, name: _swig_getattr(self, musly_jukebox, name)\n    __repr__ = _swig_repr\n    __swig_setmethods__[&quot;method&quot;] = _libmusly.musly_jukebox_method_set\n    __swig_getmethods__[&quot;method&quot;] = _libmusly.musly_jukebox_method_get\n    if _newclass:\n        method = _swig_property(_libmusly.musly_jukebox_method_get, _libmusly.musly_jukebox_method_set)\n    __swig_setmethods__[&quot;method_name&quot;] = _libmusly.musly_jukebox_method_name_set\n    __swig_getmethods__[&quot;method_name&quot;] = _libmusly.musly_jukebox_method_name_get\n    if _newclass:\n        method_name = _swig_property(_libmusly.musly_jukebox_method_name_get, _libmusly.musly_jukebox_method_name_set)\n    __swig_setmethods__[&quot;decoder&quot;] = _libmusly.musly_jukebox_decoder_set\n    __swig_getmethods__[&quot;decoder&quot;] = _libmusly.musly_jukebox_decoder_get\n    if _newclass:\n        decoder = _swig_property(_libmusly.musly_jukebox_decoder_get, _libmusly.musly_jukebox_decoder_set)\n    __swig_setmethods__[&quot;decoder_name&quot;] = _libmusly.musly_jukebox_decoder_name_set\n    __swig_getmethods__[&quot;decoder_name&quot;] = _libmusly.musly_jukebox_decoder_name_get\n    if _newclass:\n        decoder_name = _swig_property(_libmusly.musly_jukebox_decoder_name_get, _libmusly.musly_jukebox_decoder_name_set)\n\n    def __init__(self):\n        this = _libmusly.new_musly_jukebox()\n        try:\n            self.this.append(this)\n        except __builtin__.Exception:\n            self.this = this\n    __swig_destroy__ = _libmusly.delete_musly_jukebox\n    __del__ = lambda self: None\nmusly_jukebox_swigregister = _libmusly.musly_jukebox_swigregister\nmusly_jukebox_swigregister(musly_jukebox)\n\n\ndef musly_version():\n    return _libmusly.musly_version()\nmusly_version = _libmusly.musly_version\n\ndef musly_debug(level):\n    return _libmusly.musly_debug(level)\nmusly_debug = _libmusly.musly_debug\n\ndef musly_jukebox_listmethods():\n    return _libmusly.musly_jukebox_listmethods()\nmusly_jukebox_listmethods = _libmusly.musly_jukebox_listmethods\n\n#def musly_jukebox_listdecoders():\n#    return _libmusly.musly_jukebox_listdecoders()\n#musly_jukebox_listdecoders = _libmusly.musly_jukebox_listdecoders\n\ndef musly_jukebox_aboutmethod(jukebox):\n    return _libmusly.musly_jukebox_aboutmethod(jukebox)\nmusly_jukebox_aboutmethod = _libmusly.musly_jukebox_aboutmethod\n\ndef musly_jukebox_poweron(method, decoder):\n    return _libmusly.musly_jukebox_poweron(method, decoder)\nmusly_jukebox_poweron = _libmusly.musly_jukebox_poweron\n\ndef musly_jukebox_similarity(jukebox, seed_track, seed_trackid, tracks, trackids, num_tracks, similarities):\n    return _libmusly.musly_jukebox_similarity(jukebox, seed_track, seed_trackid, tracks, trackids, num_tracks, similarities)\nmusly_jukebox_similarity = _libmusly.musly_jukebox_similarity\n\ndef musly_track_alloc(jukebox):\n    return _libmusly.musly_track_alloc(jukebox)\nmusly_track_alloc = _libmusly.musly_track_alloc\n\ndef musly_track_free(track):\n    return _libmusly.musly_track_free(track)\nmusly_track_free = _libmusly.musly_track_free\n\ndef musly_track_size(jukebox):\n    return _libmusly.musly_track_size(jukebox)\nmusly_track_size = _libmusly.musly_track_size\n\ndef musly_track_analyze_audiofile(jukebox, audiofile, excerpt_length, excerpt_start, track):\n    return _libmusly.musly_track_analyze_audiofile(jukebox, audiofile, excerpt_length, excerpt_start, track)\nmusly_track_analyze_audiofile = _libmusly.musly_track_analyze_audiofile\n# This file is compatible with both classic and new-style classes.\n</code></pre>\n"}, {"tags": ["c", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 3, "creation_date": 1548870681, "post_id": 54446608, "comment_id": 95702268, "body": "&quot;Undefined behavior&quot; is not the same as &quot;segmentation fault&quot;."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548870761, "post_id": 54446608, "comment_id": 95702318, "body": "Well, since there is no dynamic or whatever allocation in the code, it is not clear why this question is about &quot;dynamic memory allocation&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1548870819, "post_id": 54446608, "comment_id": 95702353, "body": "&quot;code should return segmentation fault,&quot; is like saying if you cheat on a test you should get caught.  Maybe you will, maybe you will not.  If you need a language to tell you when code cheated, consider other languages.  C simply is not required to do that."}], "answers": [{"tags": [], "owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "is_accepted": false, "score": 3, "last_activity_date": 1548870803, "creation_date": 1548870803, "answer_id": 54446663, "question_id": 54446608, "link": "https://stackoverflow.com/questions/54446608/dynamic-memory-allocation-for-integer-pointer/54446663#54446663", "title": "Dynamic memory allocation for integer pointer", "body": "<p>I think anytime you have to deal with memory in the way your code snippet is doing, you enter in the territory of undefined behaviour. Your pointer might have been randomly initialized to a valid memory location, and therefore the assighment will work. If you want to test a 100% chance failure, you should initialize <code>a</code> to <code>NULL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": false, "score": 4, "last_activity_date": 1548870878, "creation_date": 1548870878, "answer_id": 54446694, "question_id": 54446608, "link": "https://stackoverflow.com/questions/54446608/dynamic-memory-allocation-for-integer-pointer/54446694#54446694", "title": "Dynamic memory allocation for integer pointer", "body": "<p>A segmentation fault occurs when the system <strong>detects</strong> that you use a wrong memory address. Apparently this does not happen in your case. </p>\n\n<p>The uninitialized pointer may point to some memory that you are allowed to read and write. Writing to this address may change unrelated data or may change the machine code of your program and may lead to a crash or strange behavior later. The behavior is undefined and may change when you modify unrelated parts of your program.</p>\n\n<p>To check for this type of problem you could use tools like <code>valgrind</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1548870987, "creation_date": 1548870987, "answer_id": 54446728, "question_id": 54446608, "link": "https://stackoverflow.com/questions/54446608/dynamic-memory-allocation-for-integer-pointer/54446728#54446728", "title": "Dynamic memory allocation for integer pointer", "body": "<p>When you dereference an uninitialized pointer, you invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  This means you can't predict how the program will react.  It might crash, it might output strange results, or it may appear to work properly.</p>\n\n<p>This is why it \"works\" on one system but crashes on another.  Just because you do something that <em>might</em> cause a crash doesn't mean it <em>will</em>.</p>\n"}], "owner": {"reputation": 23, "user_id": 10991900, "user_type": "registered", "profile_image": "https://graph.facebook.com/1966477346807819/picture?type=large", "display_name": "Megha Jayaswal", "link": "https://stackoverflow.com/users/10991900/megha-jayaswal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1548876081, "creation_date": 1548870595, "last_edit_date": 1548876081, "question_id": 54446608, "link": "https://stackoverflow.com/questions/54446608/dynamic-memory-allocation-for-integer-pointer", "title": "Dynamic memory allocation for integer pointer", "body": "<p>I have a query regarding the dynamic memory allocation of a integer pointer.</p>\n\n<pre><code>    int main()\n    {\n        int *a;\n        *a = 5;\n        printf(\"value = %d\\n\", *a);\n        return 0;\n    }\n</code></pre>\n\n<p>As per my understanding, the above piece of code should return segmentation fault, which happening in my PC (Ubuntu 32bit).</p>\n\n<p>But the same piece of code, when executed on my MacOS and a Fedora Linux system gives output as \"value = 5\". Any idea, why this code is working on these two systems, even when I have not allocated memory for integer pointer?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1548870473, "post_id": 54446524, "comment_id": 95702155, "body": "<code>dim_input1 = strlen(input2) + strlen(input1);</code> and <code>dim_input2 = strlen(input2) + strlen(input1);</code>...you&#39;re short-by-one."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1548876415, "post_id": 54446524, "comment_id": 95705114, "body": "One other thing. A valid string may contain other characters than letters \u2014 punctuation, spaces, digits \u2014 and in that case your implementation of <code>conta_consonanti()</code> does not actually count consonants, but instead characters that are not vowels. This might seem like it&#39;s a trivial distinction but you can find problems in future when a function does something <i>like, but not quite</i> what the name implies."}, {"owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1548877276, "post_id": 54446524, "comment_id": 95705568, "body": "@TimRandall I thought about it, but the string in this context was without spaces"}], "answers": [{"comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1548888779, "post_id": 54446590, "comment_id": 95710158, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/187612/discussion-on-answer-by-bruno-why-does-my-code-give-me-segmentation-error\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1548875605, "last_edit_date": 1548875605, "creation_date": 1548870523, "answer_id": 54446590, "question_id": 54446524, "link": "https://stackoverflow.com/questions/54446524/why-does-my-code-give-me-segmentation-error/54446590#54446590", "title": "Why does my code give me segmentation error?", "body": "<p>in</p>\n\n<pre><code> concatena(input1, input2, output);\n printf(\"%s\\n\", output);\n</code></pre>\n\n<p>the value of <em>output</em> is unchanged by <em>concatena</em> so you print an uninitialized char * => crash or any other undefined behavior</p>\n\n<p>you need to make output an output var, so <code>void concatena(char *input1, char *input2, char **output)</code> etc like that :</p>\n\n<pre><code>int main(void){\n    char *input1, *input2, *output;\n    input1 = \"sdaeteruiop\";\n    input2 = \"eiyearteoiana\";\n    concatena(input1, input2, &amp;output);\n    printf(\"%s\\n\", output);\n    free(output);\n    return 0;\n}\n\nvoid concatena(char *input1, char *input2, char **output){\n    int num_cons1 = 0, num_cons2 = 0, dim_input1, dim_input2;\n    conta_consonanti(input1, &amp;num_cons1);\n    conta_consonanti(input2, &amp;num_cons2);\n    if(num_cons1 &lt; num_cons2){\n        dim_input1 = strlen(input1) + strlen(input2);\n        *output = malloc(dim_input1 + 1);\n        strcpy(*output, input1);\n        strcat(*output, input2);\n    }else {\n        dim_input2 = strlen(input2) + strlen(input1);\n        *output = malloc(dim_input2 + 1);\n        strcpy(*output, input2);\n        strcat(*output, input1);\n    }\n}\n</code></pre>\n\n<p>I also fixed your malloc, you missed 1 char for the null terminator </p>\n\n<p>warning if <code>num_cons2 == num_cons1</code> *output is not set and you still print it not initialized, you need to set it to NULL and test that case before to printf it, or more probably to replace <code>else if(num_cons2 &lt; num_cons1)</code> by <code>else</code> (this is what I did above)</p>\n\n<p>note also <code>dim_input1</code> and <code>dim_input2</code> have the same value, it is useless to distinguishes them</p>\n\n<p>and the first call of <code>copy_string</code> can be replaced by <code>strcpy</code> and the second by <code>strcat</code>, <strong>except that <code>copy_string</code>miss to add a final null character</strong>. I removed the use of <code>copy_string</code></p>\n\n<p>warning the declaration <code>void concatena(char *, char *, char *);</code> must be updated to be <code>void concatena(char *, char *, char **);</code></p>\n\n<p>Execution :</p>\n\n<pre><code>eiyearteoianasdaeteruiop\n</code></pre>\n\n<p>Under <em>valgrind</em> :</p>\n\n<pre><code>pi@raspberrypi:~ $ valgrind ./a.out\n==15629== Memcheck, a memory error detector\n==15629== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==15629== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==15629== Command: ./a.out\n==15629== \neiyearteoianasdaeteruiop\n==15629== \n==15629== HEAP SUMMARY:\n==15629==     in use at exit: 0 bytes in 0 blocks\n==15629==   total heap usage: 2 allocs, 2 frees, 1,049 bytes allocated\n==15629== \n==15629== All heap blocks were freed -- no leaks are possible\n==15629== \n==15629== For counts of detected and suppressed errors, rerun with: -v\n==15629== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 454, "user_id": 10415029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2AZj9.png?s=128&g=1", "display_name": "Cornholio", "link": "https://stackoverflow.com/users/10415029/cornholio"}, "is_accepted": false, "score": 0, "last_activity_date": 1548870682, "creation_date": 1548870682, "answer_id": 54446629, "question_id": 54446524, "link": "https://stackoverflow.com/questions/54446524/why-does-my-code-give-me-segmentation-error/54446629#54446629", "title": "Why does my code give me segmentation error?", "body": "<p>You try to free <code>output</code> in main, while it has no value assigned. The assignment in <code>concatena</code> is not returned to main. It would make more sense to return the allocated buffer from within <code>concatena</code> and assign it to <code>output</code>, then cleaning it up in the end.</p>\n"}, {"comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1548873415, "post_id": 54447255, "comment_id": 95703593, "body": "oh yes I didn&#39;t see the error in <code>*num_cons++;</code>, eagle eyes ^^"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1548875423, "post_id": 54447255, "comment_id": 95704643, "body": "Possibly you could use fewer returns in this sentence: &quot;make concatena return a pointer to the newly allocated array and return that as a return value&quot;"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1548876712, "last_edit_date": 1548876712, "creation_date": 1548873073, "answer_id": 54447255, "question_id": 54446524, "link": "https://stackoverflow.com/questions/54446524/why-does-my-code-give-me-segmentation-error/54447255#54447255", "title": "Why does my code give me segmentation error?", "body": "<p>There are multiple problems in your code:</p>\n\n<ul>\n<li>You pass an uninitialized pointer for the destination array (3rd argument) of <code>concatena</code>. The API is incorrect: you should instead make <code>concatena</code> return the pointer to the newly allocated array as a return value.  The current implementation overwrites the 3rd argument <code>output</code> and this allocated value is never returned to the caller. C has no concept of <em>output</em> arguments, you could pass a pointer to the caller's <code>output</code> pointer, with type <code>char **</code>, but it is much simpler to just use the return value.</li>\n<li><p>The allocation performed by <code>concatena</code> is incorrect: you should allocate an extra byte for the null terminator and <code>sizeof(char)</code> is <code>1</code> by definition:</p>\n\n<pre><code>output = malloc(dim_input1 + 1);\n</code></pre></li>\n<li><p><code>conta_consonanti</code> is incorrect too: incrementing the number pointed to by <code>num_cons</code> must be written <code>++*num_cons</code> or <code>(*num_cons)++</code>. <code>*num_cons++;</code> increments the pointer, not the value pointed to. Furthermore, as Tom Randall commented, the number of consonants is not necessarily the same as the number of non-vowels as the string may contain non letters. Also you count all uppercase letters as consonants, which seems incorrect too.</p></li>\n<li><p>The code would have undefined behavior if both strings have the same number of consonants, you should specify what happens in this case (and implement it).</p></li>\n<li><p><code>copy_string</code> does not set the null terminator in the destination buffer. Either set it there or set it manually in <code>concatena</code>.</p></li>\n</ul>\n\n<p>Here is a corrected (and simplified) version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar *concatena(const char *s1, const char *s2);\nint conta_consonanti(const char *vect);\nvoid copy_string(char *output, const char *intput);\n\nint main(void) {\n    const char *input1 = \"sdaeteruiop\";\n    const char *input2 = \"eiyearteoiana\";\n    char *output = concatena(input1, input2);\n    printf(\"%s\\n\", output);\n    free(output);\n    return 0;\n}\n\nchar *concatena(const char *input1, const char *input2) {\n    int len1 = strlen(input1);\n    int len2 = strlen(input2);\n    int num_cons1 = conta_consonanti(input1);\n    int num_cons2 = conta_consonanti(input2);\n    char *output = malloc(len1 + len2 + 1);\n    if (output != NULL) {\n        if (num_cons1 &lt;= num_cons2) {\n            copy_string(output, input1, 0);\n            copy_string(output, input2, len1);\n        } else {\n            copy_string(output, input2);\n            copy_string(output, input1, len1);\n        }\n        output[len1 + len2] = '\\0';  // set the null terminator\n    }\n    return output;\n}\n\nint conta_consonanti(const char *vect) {\n    int i, num_cons = 0;\n    for (i = 0; vect[i] != '\\0'; i++) {\n        /* counting ASCII consonants, upper and lowercase */\n        /* our French friends will miss the \u00e7 and our Spanish ones the \u00f1 */\n        if (strchr(\"BCDFGHJKLMNPQRSTVWXYZbcdfghjklmnpqrstvwxyz\", vect[i])\n            num_cons++;\n    }\n    return num_cons;\n}\n\nvoid copy_string(char *output, const char *input, int offset) {\n    int i;\n    for (i = 0; input[i] != '\\0'; i++) {\n        output[offset] = input[i];\n        offset++;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1548876712, "creation_date": 1548870330, "last_edit_date": 1548872665, "question_id": 54446524, "link": "https://stackoverflow.com/questions/54446524/why-does-my-code-give-me-segmentation-error", "title": "Why does my code give me segmentation error?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid concatena(char *, char *, char *);\nvoid conta_consonanti(char [], int *);\nvoid copy_string(char [], char [ ], int);\n\nint main(void) {\n    char *input1, *input2, *output;\n    input1 = \"sdaeteruiop\";\n    input2 = \"eiyearteoiana\";\n    concatena(input1, input2, output);\n    printf(\"%s\\n\", output);\n    free(output);\n    return 0;\n}\n\nvoid concatena(char *input1, char *input2, char *output) {\n    int num_cons1 = 0, num_cons2 = 0, dim_input1, dim_input2;\n    conta_consonanti(input1, &amp;num_cons1);\n    conta_consonanti(input2, &amp;num_cons2);\n    if (num_cons1 &lt; num_cons2) {\n        dim_input1 = strlen(input1) + strlen(input2);\n        output = malloc(dim_input1 * sizeof(char));\n        copy_string(output, input1, 0);\n        copy_string(output, input2, strlen(input1));\n    } else if (num_cons2 &lt; num_cons1) {\n        dim_input2 = strlen(input2) + strlen(input1);\n        output = malloc(dim_input2 * sizeof(char));\n        copy_string(output, input2, 0);\n        copy_string(output, input1, strlen(input2));\n    }\n}\n\nvoid conta_consonanti(char vect[], int *num_cons) {\n    int dim = strlen(vect), i;\n    for (i = 0; i &lt; dim; i++)\n        if (vect[i] != 'a' &amp;&amp; vect[i] != 'e' &amp;&amp; vect[i] != 'i' &amp;&amp; vect[i] != 'o' &amp;&amp; vect[i] != 'u')\n            *num_cons++;\n}\n\nvoid copy_string(char output[], char input [ ], int offset) {\n    int dim, i;\n    dim = strlen(input);\n    for (i = 0; i &lt; dim; i++) {\n        output[offset] = input[i];\n        offset++;\n    }\n}\n</code></pre>\n\n<p>Why does my code give me segmentation error?</p>\n\n<p>The program should join the two strings and store the resulting string in <code>output</code> but it gives me segmentation error. Why?</p>\n\n<p>The string with fewer consonants is stored first.</p>\n"}, {"tags": ["c", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1548870402, "post_id": 54446500, "comment_id": 95702114, "body": "When you&#39;re talking about errors, please, please, <b>show us the error you&#39;re talking about</b>. We can&#39;t see your computer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548870741, "post_id": 54446500, "comment_id": 95702305, "body": "When you delete a node you return an unchanged <code>node</code>: suppose you delete the first node? but when you reached the end of the list you <code>return NULL</code>. Was the error happening later?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1548872172, "post_id": 54446500, "comment_id": 95703001, "body": "What is the intended behavior of <code>deleteNumber</code>? The actual behavior looks rather strange. It looks like it is trying to remove all nodes from the list where <code>-&gt;val == i</code>, but that isn&#39;t what it is really doing."}, {"owner": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "edited": false, "score": 0, "creation_date": 1548872690, "post_id": 54446500, "comment_id": 95703224, "body": "Updated question"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "edited": false, "score": 0, "creation_date": 1548873627, "post_id": 54447346, "comment_id": 95703716, "body": "For example the linked list is l1 = 2,2,3,4,5 and I input deleteNumber(l1, 2), it supposed to come out like 3,4,5"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "edited": false, "score": 0, "creation_date": 1548873830, "post_id": 54447346, "comment_id": 95703838, "body": "@codingmonkeylol What should it do for <code>l2</code> = 2,3,3,2,5 and <code>deleteNumber(l2, 2)</code>?"}, {"owner": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "edited": false, "score": 0, "creation_date": 1548873850, "post_id": 54447346, "comment_id": 95703853, "body": "return 3,3,5 but it still has memory leak issue"}, {"owner": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "edited": false, "score": 0, "creation_date": 1548873920, "post_id": 54447346, "comment_id": 95703896, "body": "==1650== Memcheck, a memory error detector ==1650== Copyright (C) 2002-2015, and GNU GPL&#39;d, by Julian Seward et al. ==1650== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info ==1650== Command: ./delete ==1650==  ==1650==  ==1650== HEAP SUMMARY: ==1650==     in use at exit: 80 bytes in 5 blocks ==1650==   total heap usage: 12 allocs, 7 frees, 192 bytes allocated ==1650==  ==1650== LEAK SUMMARY: ==1650==    definitely lost: 48 bytes in 3 blocks ==1650==    indirectly lost: 32 bytes in 2 blocks"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "edited": false, "score": 0, "creation_date": 1548874402, "post_id": 54447346, "comment_id": 95704125, "body": "@codingmonkeylol Do you free the remaining elements on the list before exiting the program? It says it has lost 3 blocks and there are three elements remaining on the list after you have called deleteNumber. Coincidence?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "edited": false, "score": 0, "creation_date": 1548875905, "post_id": 54447346, "comment_id": 95704869, "body": "@codingmonkeylol I&#39;ve added some code for a demo program. There should not be any Valgrind errors as it has no leaks."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "edited": false, "score": 0, "creation_date": 1548878435, "post_id": 54447346, "comment_id": 95706041, "body": "I simplified <code>deleteNumber</code> a bit, using: <code>if (p) p-&gt;next = n; else start = n;</code>, because if <code>p</code> is <code>NULL</code> at that point then it is definitely deleting the start of the list, so <code>start</code> definitely needs to change. (Props to @chqrlie for commenting about the exact same change while I was in the middle of editing it!)"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 1, "last_activity_date": 1548877570, "last_edit_date": 1548877570, "creation_date": 1548873374, "answer_id": 54447346, "question_id": 54446500, "link": "https://stackoverflow.com/questions/54446500/question-for-free-memory-in-c-deleted-certain-value-in-linked-list/54447346#54447346", "title": "question for free memory in c deleted certain value in linked list", "body": "<p>I'm not entirely sure what your <code>deleteNumber</code> is supposed to do, but the following version frees all elements of the list that match the number, returning a pointer to the first element of the remaining list (or <code>NULL</code> if the list is now empty).</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\ntypedef struct node_t {   int val;   struct node_t *next; } node;\n\nnode* deleteNumber(node* start, int i) {\n    node* n = start;\n    node* p = NULL;\n    node* t;\n\n    while (n) {\n        t = n;\n        n = n-&gt;next;\n        if (t-&gt;val == i) {\n            if (p)\n                p-&gt;next = n;\n            else\n                start = n;\n            free(t);\n        } else {\n            p = t;\n        }\n    }\n    return start;\n}\n</code></pre>\n\n<p>Here are some additional functions for testing the above:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/* append number to list, returning start of list */\nnode* addNumber(node* start, int i) {\n    node* t;\n\n    t = malloc(sizeof(*t));\n    if (t == NULL)\n        return start;\n    t-&gt;next = NULL;\n    t-&gt;val = i;\n    if (start) {\n        node* p = start;\n\n        while (p-&gt;next)\n            p = p-&gt;next;\n        p-&gt;next = t;\n    } else {\n        start = t;\n    }\n    return start;\n}\n\n/* print elements of list */\nvoid printList(node* list) {\n    while (list) {\n        printf(\" %d\", list-&gt;val);\n        list = list-&gt;next;\n    }\n}\n\n/* free whole list */\nvoid deleteList(node* list) {\n    node* t;\n\n    while (list) {\n        t = list;\n        list = list-&gt;next;\n        free(t);\n    }\n}\n\nint main(void) {\n    const int test[] = { 2, 3, 4, 2, 5 };\n    node* start = NULL;\n    int i;\n\n    /* construct a list */\n    for (i = 0; i &lt; sizeof(test) / sizeof(test[0]); i++)\n        start = addNumber(start, test[i]);\n    /* report initial list contents */\n    printf(\"Before:\");\n    printList(start);\n    printf(\"\\n\");\n    /* delete a number from the list */\n    start = deleteNumber(start, 2);\n    /* report updated list contents */\n    printf(\"After:\");\n    printList(start);\n    printf(\"\\n\");\n    /* delete remaining elements of the list to appease Valgrind */\n    deleteList(start);\n    return 0;\n}\n</code></pre>\n\n<p>There should not be any Valgrind errors in the above code.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1548877158, "last_edit_date": 1548877158, "creation_date": 1548875976, "answer_id": 54448022, "question_id": 54446500, "link": "https://stackoverflow.com/questions/54446500/question-for-free-memory-in-c-deleted-certain-value-in-linked-list/54448022#54448022", "title": "question for free memory in c deleted certain value in linked list", "body": "<p>In order to <code>free</code> the nodes removed from the list, you must save the <code>next</code> member before you free the node as you cannot access it once the node is freed.</p>\n\n<p>Here is a modified version:</p>\n\n<pre><code>typedef struct node_t { int val; struct node_t *next; } node;   \n\nnode *deleteNumber(node *node, int i) {\n    node *next, *n, *p;\n    while (node &amp;&amp; node-&gt;val == i) {\n        next = node-&gt;next;\n        free(node);\n        node = next;\n    }\n    if (node != NULL) {\n        p = n = node;\n        n = n-&gt;next;\n        while (n) {\n            if (n-&gt;val == i) {\n                next = p-&gt;next = n-&gt;next;\n                free(n);\n                n = next;\n            } else {\n                p = n;\n                n = n-&gt;next;\n            }\n        }\n    }\n    return node;\n}\n</code></pre>\n\n<p>To avoid code duplication, you can use a more advanced approach with a double pointer:</p>\n\n<pre><code>typedef struct node_t { int val; struct node_t *next; } node;   \n\nnode *deleteNumber(node *node, int i) {\n    node **np = &amp;node;\n\n    while (*np) {\n        node *n = *np;\n        if (n-&gt;val == i) {\n            *np = n-&gt;next;\n            free(n);\n        } else {\n            np = &amp;n-&gt;next;\n        }\n    }\n    return node;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10991901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b599daac1dcdebbc58a41b3603cecb1?s=128&d=identicon&r=PG&f=1", "display_name": "codingmonkeylol", "link": "https://stackoverflow.com/users/10991901/codingmonkeylol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54447346, "answer_count": 2, "score": 1, "last_activity_date": 1548877570, "creation_date": 1548870243, "last_edit_date": 1548875375, "question_id": 54446500, "link": "https://stackoverflow.com/questions/54446500/question-for-free-memory-in-c-deleted-certain-value-in-linked-list", "title": "question for free memory in c deleted certain value in linked list", "body": "<pre><code>typedef struct node_t { int val; struct node_t *next; } node;   \n\nnode *deleteNumber(node *node, int i) {\n    while (node &amp;&amp; node-&gt;val == i) {\n        node = node-&gt;next;\n    }\n    n = node;\n    p = node;\n    if (n == NULL)\n        return NULL;\n    n = n-&gt;next;\n    while (n) {\n        if (n-&gt;val == i)\n            p-&gt;next = n-&gt;next;\n        else\n            p = p-&gt;next;\n        n = n-&gt;next;\n    }\n    return node;\n}\n</code></pre>\n\n<p>I have a question of how to free the memory of deleted node in linked list. The above function, <code>node</code> is the linked list I would like to operate on and <code>int</code> is the value I would like to delete. Thank you!</p>\n\n<p>It is currently causing valgrind error and I don't know where to start. I have tried free(n,p) but this is not helping</p>\n\n<pre><code>&gt; ==1618== \n&gt; ==1618== HEAP SUMMARY:\n&gt; ==1618==     in use at exit: 192 bytes in 12 blocks\n&gt; ==1618==   total heap usage: 12 allocs, 0 frees, 192 bytes allocated\n&gt; ==1618== \n&gt; ==1618== LEAK SUMMARY:\n&gt; ==1618==    definitely lost: 128 bytes in 8 blocks\n&gt; ==1618==    indirectly lost: 48 bytes in 3 blocks\n&gt; ==1618==      possibly lost: 0 bytes in 0 blocks\n&gt; ==1618==    still reachable: 16 bytes in 1 blocks\n&gt; ==1618==         suppressed: 0 bytes in 0 blocks\n&gt; ==1618== Rerun with --leak-check=full to see details of leaked memory\n&gt; ==1618== \n&gt; ==1618== For counts of detected and suppressed errors, rerun with: -v\n&gt; ==1618== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n"}, {"tags": ["c", "gcc", "compiler-warnings"], "comments": [{"owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "edited": false, "score": 1, "creation_date": 1548870242, "post_id": 54446380, "comment_id": 95702026, "body": "Hi Eugene ! Minimal example reproduced in the question body. Note that the Godbolt link feels way better, since the full example is larger, and can be modified live to impact compilation outcome and witness the result."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548870432, "post_id": 54446380, "comment_id": 95702132, "body": "Your question might get answered by one of the wizards which need only too look at the code and tell the solution, without the need to compile or modify anything :) Having that link is a good addition but not a replacement for MCVE. But you probably know that."}], "owner": {"reputation": 11454, "user_id": 646947, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3f954319b2491c00532c2f40ca984e5d?s=128&d=identicon&r=PG", "display_name": "Cyan", "link": "https://stackoverflow.com/users/646947/cyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548870102, "creation_date": 1548869747, "last_edit_date": 1548870102, "question_id": 54446380, "link": "https://stackoverflow.com/questions/54446380/get-compilation-warning-at-correct-position-gcc", "title": "Get compilation warning at correct position (`gcc`)", "body": "<p>In <a href=\"https://godbolt.org/z/jNxO6b\" rel=\"nofollow noreferrer\">this example powered by Godbolt</a>, and reproduced below,\nit's possible to create a function which requires its parameters to respect some conditions <code>(i &gt;= 0)</code>, <code>ptr != NULL</code>, etc.</p>\n\n<pre><code>// EXPECT() : will trigger a warning if the condition is not guaranteed\n#define EXPECT(c)  (void)((c) ? (void)0 : never_reach())\n\n// assume() : tell the compiler that `cond` is true\n// note : only works for simple conditions, such as `i&gt;=0`.\n// Avoid complex conditions invoking functions.\n#define assume(cond) do { if (!(cond)) __builtin_unreachable(); } while (0)\n\n\n// *********************************************************\n// Function declaration\n// *********************************************************\n\nint positive_plus1_body(int v); \n#define positive_plus1_preconditions(v)   ((v)&gt;=0)     // Let's first define the preconditions. \n                                                       // Name is long, because conditions must be unique to the function\n\n// The inlined function express the contract, with both pre and post conditions.\n// `inline` is essential, so that actual input values get verified,\n// and result gets enriched with `assume` conditions.\n// Problem is, the error is now located INTO the inlined function, not at the place where it's called.\n// This makes it very hard to identify where the problem happens.\nstatic inline int positive_plus1(int v)                // Ideally, this function should also have additional attribute to not trigger warnings when it's not invoked\n{\n    int r;\n    EXPECT(positive_plus1_preconditions(v));           // preconditions\n    r = positive_plus1_body(v);\n    assume(r &gt; 0);                                     // postconditions\n    return r;\n}\n</code></pre>\n\n<p>The <a href=\"https://godbolt.org/z/jNxO6b\" rel=\"nofollow noreferrer\">Godbolt</a> live example makes it possible to call the function with good and wrong parameters, and witness the impact on compilation diagnosis.</p>\n\n<p>If the caller doesn't respect the conditions, the compiler generates a warning. This is pretty convenient to immediately detect condition violations. The usual alternative is to use <code>assert()</code> inside the function body, but relies on runtime tests to detect potential condition violations, which is less immediate, and less certain.</p>\n\n<p>Problem is, if the <code>inline</code> function is called with wrong arguments, the compiler will locate the condition violation <em>inside</em> the <code>inline</code> function. This diagnosis is of limited usefulness. Instead, we would like to read the line at which the <code>inline</code> function is called with incorrect arguments.</p>\n\n<p>The work around is to use a macro instead. However, a macro will trigger the famous multi evaluation problem, since its arguments must be used multiple times. This is dangerous enough to avoid it. Also, the encapsulating <code>inline</code> function could be automatically generated with a macro, but a macro cannot be generated by another macro.</p>\n\n<p>Another solution is to use a <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.2.0/gcc/Statement-Exprs.html\" rel=\"nofollow noreferrer\">statement expression</a>, which solves the multi-evaluation problem. However, it's non portable, and it's still a macro, so it cannot be generated by another macro.</p>\n\n<p>It would be preferable to keep the <code>inline</code> function of the example if possible. But generating the correct line number where the condition violation happens is quite important. \nIs there a way to achieve that while keeping the <code>inline</code> function approach ?</p>\n"}, {"tags": ["c", "enums", "comparison"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1548869583, "post_id": 54446245, "comment_id": 95701728, "body": "Funnily enough, I can&#39;t reproduce the result (MSVC), the last two being FALSE and TRUE respectively, as I would expect."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1548869599, "post_id": 54446245, "comment_id": 95701737, "body": "I don&#39;t like the way it is written. If one wants an &quot;invalid&quot; <code>enum</code> member, it should be made a part of the <code>enum</code>."}, {"owner": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 1, "creation_date": 1548869710, "post_id": 54446245, "comment_id": 95701789, "body": "Are you sure that program shown here is the program you compiled and executed ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548869792, "post_id": 54446245, "comment_id": 95701823, "body": "How would &quot;cast <code>a</code> in <code>(int)</code> in the <code>if</code> conditions&quot; help? That part was working as you expected. There is no <code>if</code> in the part that apparently gave the wrong results."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548870513, "post_id": 54446245, "comment_id": 95702172, "body": "Thanks to the answers; I didn&#39;t know that <code>enum</code> can be <code>unsigned</code>."}, {"owner": {"reputation": 73, "user_id": 10991680, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qVlNA3CQTy4/AAAAAAAAAAI/AAAAAAAAGzA/T2FqUX04NIE/photo.jpg?sz=128", "display_name": "GOoOGle", "link": "https://stackoverflow.com/users/10991680/gooogle"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548924663, "post_id": 54446245, "comment_id": 95721297, "body": "@eugene-sh I undertand your comment ! This code exists in aeronautic sofware, and when a function &quot;receive&quot; the enum value, it is not sure the result is valid and belongs to the range of the enum..."}, {"owner": {"reputation": 73, "user_id": 10991680, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qVlNA3CQTy4/AAAAAAAAAAI/AAAAAAAAGzA/T2FqUX04NIE/photo.jpg?sz=128", "display_name": "GOoOGle", "link": "https://stackoverflow.com/users/10991680/gooogle"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548924731, "post_id": 54446245, "comment_id": 95721332, "body": "@weather-vane The 2 answered post give your answer !"}, {"owner": {"reputation": 73, "user_id": 10991680, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qVlNA3CQTy4/AAAAAAAAAAI/AAAAAAAAGzA/T2FqUX04NIE/photo.jpg?sz=128", "display_name": "GOoOGle", "link": "https://stackoverflow.com/users/10991680/gooogle"}, "reply_to_user": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 0, "creation_date": 1548924856, "post_id": 54446245, "comment_id": 95721396, "body": "@mahesh Yes it is the same !"}, {"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1549327261, "post_id": 54446245, "comment_id": 95854906, "body": "One conclusion I got for this problem when I had it some months ago, was to never ever use the <code>enum type</code> again, and instead always use <code>int</code> when I store or <code>return</code> an enum.  That way I know exactly (well, not exactly because <code>int</code> is not fixed width, but as exact as it can be) the type of the variable.  At least I can guarantee I fill not find any <code>unsigned</code> variable."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1548870429, "last_edit_date": 1548870429, "creation_date": 1548869961, "answer_id": 54446433, "question_id": 54446245, "link": "https://stackoverflow.com/questions/54446245/c-compare-enumerate-with-invalid-value/54446433#54446433", "title": "C Compare enumerate with invalid value", "body": "<p>Enumarator constants are of <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.2p3\" rel=\"nofollow noreferrer\">type <code>int</code></a>. The enumerator type is an unspecified integer type capable of representing all the enumerator constants.</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.2p4\" rel=\"nofollow noreferrer\">6.7.2.2p4</a>:</p>\n\n<blockquote>\n  <p>Each enumerated type shall be compatible with char, a signed integer\n  type, or an unsigned integer type. The choice of type is\n  implementation-defined,128) but shall be capable of representing the\n  values of all the members of the enumeration. The enumerated type is\n  incomplete until immediately after the } that terminates the list of\n  enumerator declarations, and complete thereafter.</p>\n</blockquote>\n\n<p>Since you haven't enumerated any negative values, that type may well be an <strong>unsigned</strong> type. If it is, then <code>(E_Number)some_integer</code> will always be greater than or equal to zero (<code>0==FIRST_ENUM</code>).</p>\n\n<p>If you expand the <code>enum</code> list to:</p>\n\n<pre><code>typedef enum{\n    NUM_NOPE=-1,\n    NUM_1 = FIRST_ENUM, \n    NUM_2, \n    NUM_3,\n    NB_MAX_NUMBER\n}E_Number; \n</code></pre>\n\n<p>you'll force the compiler to use a signed type and the results will reverse.</p>\n"}, {"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1548870036, "creation_date": 1548870036, "answer_id": 54446450, "question_id": 54446245, "link": "https://stackoverflow.com/questions/54446245/c-compare-enumerate-with-invalid-value/54446450#54446450", "title": "C Compare enumerate with invalid value", "body": "<p>In your case the compiler consider <code>E_Number</code> as <code>unsigned int</code> because all the legal values are unsigned, so -1 is considered to be ~0u which is >= FIRST_ENUM and &lt; NB_MAX_NUMBER</p>\n\n<p>I have the same behavior with <code>gcc version 6.3.0 20170516 (Raspbian 6.3.0-18+rpi1+deb9u1)\n</code></p>\n\n<pre><code>pi@raspberrypi:~ $ ./a.out \nNot in Range\n1st condition = TRUE\n2nd condition = FALSE\n</code></pre>\n\n<p>But, if I change your definitions like that :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define FIRST_ENUM -1\ntypedef enum{\n    NUM_1 = FIRST_ENUM, \n    NUM_2, \n    NUM_3,\n    NB_MAX_NUMBER\n}E_Number; \n\nint main()\n{\n    E_Number a = -2; \n\n    if ((a &gt;= FIRST_ENUM) &amp;&amp; (a &lt; NB_MAX_NUMBER))\n    {\n        printf(\"In Range\\n\"); \n    }\n    else\n    {\n        printf(\"Not in Range\\n\"); \n    }\n\n    printf(\"1st condition = %s\\n\", (a &gt;= FIRST_ENUM)?\"TRUE\":\"FALSE\"); \n    printf(\"2nd condition = %s\\n\", (a &lt; NB_MAX_NUMBER)?\"TRUE\":\"FALSE\"); \n\n    return 0; \n}\n</code></pre>\n\n<p>the behavior change and the enum is considered to be an int and I have :</p>\n\n<pre><code>pi@raspberrypi:~ $ ./a.out \nNot in Range\n1st condition = FALSE\n2nd condition = TRUE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": true, "score": 0, "last_activity_date": 1548928456, "creation_date": 1548928456, "answer_id": 54457821, "question_id": 54446245, "link": "https://stackoverflow.com/questions/54446245/c-compare-enumerate-with-invalid-value/54457821#54457821", "title": "C Compare enumerate with invalid value", "body": "<p>Quote from <code>ISO/IEC 9899:1999</code>, 6.7.2.2p3</p>\n\n<blockquote>\n  <p>Each enumerated type shall be compatible with char, a signed integer\n  type, or an unsigned integer type. The choice of type is\n  implementation-defined, 108) but shall be capable of representing the\n  values of all the members of the enumeration.</p>\n</blockquote>\n\n<p>So, when you declare an enumeration, you cannot be sure a priori about what kind of data will the implementation of C choose to store that variable.  Optimisation reasons, the compiler may not choose an integer type on 4 bytes if you store enumeration constants between [-128, +127]. The implementation may choose char to store an enumerated variable, but you cannot be sure.  Any integer data type can be chosen as time as it can store all possible values.</p>\n"}], "owner": {"reputation": 73, "user_id": 10991680, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qVlNA3CQTy4/AAAAAAAAAAI/AAAAAAAAGzA/T2FqUX04NIE/photo.jpg?sz=128", "display_name": "GOoOGle", "link": "https://stackoverflow.com/users/10991680/gooogle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54457821, "answer_count": 3, "score": 3, "last_activity_date": 1548928456, "creation_date": 1548869310, "question_id": 54446245, "link": "https://stackoverflow.com/questions/54446245/c-compare-enumerate-with-invalid-value", "title": "C Compare enumerate with invalid value", "body": "<p>I would like try to understand how is working the compilator when we compare an enumerate with invalid value, and what the program is doing during execution. </p>\n\n<p>I found strange source code during my work, and did not understand the behaviour of the program, which was not giving me the expected result. </p>\n\n<p>I wrote the following little program to summarize my problem. </p>\n\n<p>I create an enum E_Number and I instanciate a variable <code>a</code>, with the value <code>-1</code>. \nThen I perform comparison on <code>a</code> to check if it belongs to the range of the enum. </p>\n\n<p>(I know, this is really strange, but this is exactly what i found in source code !)</p>\n\n<p>I expected the result tells me <i>Not in range</i> because of the fail of the first condition <code>(a &gt;= FIRST_ENUM)</code>. \nBut it was the fail of the second condition <code>(a &lt; NB_MAX_NUMBER)</code> which gave me the right result (see the <code>printf()</code>)...</p>\n\n<p>If I cast <code>a</code> in <code>(int)</code> in the <code>if</code> conditions, I get excepted results. </p>\n\n<p>So what is happening during the execution ? Is the program considering <code>-1</code> as an other possible enum value which will be positionned after <code>NB_MAX_NUMBER</code> ? What is the rule for <code>&gt;</code> and <code>&lt;</code> operator on enum ? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define FIRST_ENUM 0\ntypedef enum{\n    NUM_1 = FIRST_ENUM, \n    NUM_2, \n    NUM_3,\n    NB_MAX_NUMBER\n}E_Number; \n\nint main()\n{\n    E_Number a = -1; \n\n    if ((a &gt;= FIRST_ENUM) &amp;&amp; (a &lt; NB_MAX_NUMBER))\n    {\n        printf(\"In Range\\n\"); \n    }\n    else\n    {\n        printf(\"Not in Range\\n\"); \n    }\n\n    printf(\"1st condition = %s\\n\", (a &gt;= FIRST_ENUM)?\"TRUE\":\"FALSE\"); \n    printf(\"2nd condition = %s\\n\", (a &lt; NB_MAX_NUMBER)?\"TRUE\":\"FALSE\"); \n\n    return 0; \n}\n</code></pre>\n\n<blockquote>\n  <p>gcc program.c</p>\n  \n  <p>.\\a.exe<br>\n  Not in Range<br>\n  1st condition = TRUE<br>\n  2nd condition = FALSE<br></p>\n</blockquote>\n\n<p>I am working with MINGW compilator ( gcc (x86_64-win32-seh-rev1, Built by MinGW-W64 project) 4.9.2 )</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1548869008, "post_id": 54446050, "comment_id": 95701434, "body": "You still have out of bounds array indexing as <a href=\"https://stackoverflow.com/questions/54444089/expected-expression-before-error-is-showing#comment95697481_54444089\">previously commented</a>."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 2, "creation_date": 1548869009, "post_id": 54446050, "comment_id": 95701436, "body": "When <code>i</code> is 4 (at the last iteration), <code>y[i + 1]</code> is an out-of-bound access."}], "answers": [{"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1548869094, "last_edit_date": 1548869094, "creation_date": 1548868738, "answer_id": 54446088, "question_id": 54446050, "link": "https://stackoverflow.com/questions/54446050/not-getting-the-required-elasticity-as-per-the-formula-designed/54446088#54446088", "title": "Not Getting the required Elasticity as per the formula designed", "body": "<p>Three things:</p>\n\n<ol>\n<li><p><code>Elasticity</code> is of type <code>int</code>. It cannot contain fractional parts. You need to make it a <code>float</code>, <code>double</code> or <code>long double</code> for it to be able to contain a fractional part.</p></li>\n<li><p>You are using the <code>%d</code> format specifier in your <code>printf</code> call, which is intended to print out a signed integer in base-10. Use <code>%f</code> to print out a <code>float</code> or <code>double</code>.</p></li>\n<li><p>As commenter @user58697 pointed out, you are performing an out of bounds access on <code>y[i + 1]</code> on the last iteration of your <code>for</code> loop. I'm not sure what your intent is with your calculation, so I cannot offer a solution for it.</p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 10282392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mhE2FEGOBW0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM16VWt--GNMtSTiwDzz1Zj_w16Hw/mo/photo.jpg?sz=128", "display_name": "Vaibbhav", "link": "https://stackoverflow.com/users/10282392/vaibbhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548869094, "creation_date": 1548868598, "last_edit_date": 1548868894, "question_id": 54446050, "link": "https://stackoverflow.com/questions/54446050/not-getting-the-required-elasticity-as-per-the-formula-designed", "title": "Not Getting the required Elasticity as per the formula designed", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n    float x[5] = { 60, 61, 62, 63, 65 }, y[5] = { 31, 36, 38, 40, 41 };\n    int i, Elasticity;\n\n    for (i = 0; i &lt; 5; i++) {\n        Elasticity = ((y[i + 1] - y[i]) / y[i]) / ((x[i + 1] - x[i]) / x[i]);\n        printf(\"Elasticity is %d\",Elasticity);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I want to print elasticity values per the formula designed, but I am getting the wrong values. For example, for first case I should get\nElasticity = ((36 - 31) / 31) / ((61 - 60) / 60) =  9.677 (approx.)</p>\n\n<p>What has to be done?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1548868047, "post_id": 54445849, "comment_id": 95700925, "body": "The <code>char</code> is promoted to <code>int</code> when passed to a variadic function such as <code>printf</code>. It is an integer type, so it is a number (as you assigned to it). Aside: note that <code>&#39;A&#39;</code> is of type <code>int</code> not <code>char</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1548868106, "post_id": 54445849, "comment_id": 95700950, "body": "Because the manual says so: <code>c      If no l modifier is present, the int argument is converted to an unsigned char, and the resulting character is written.</code>"}, {"owner": {"reputation": 743, "user_id": 246206, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2d4d601c3e3caab1e9a8090ea63c47a?s=128&d=identicon&r=PG", "display_name": "gbox", "link": "https://stackoverflow.com/users/246206/gbox"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548868155, "post_id": 54445849, "comment_id": 95700978, "body": "@WeatherVane when will I get an error or a warning? with different types?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1548868277, "post_id": 54445849, "comment_id": 95701051, "body": "@wildplasser That&#39;s for <code>%c</code>, not <code>%d</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1548868310, "post_id": 54445849, "comment_id": 95701073, "body": "You won&#39;t get a warning. The compiler doesn&#39;t know your intention. You won&#39;t get one with the converse <code>printf(&quot;%c\\n&quot;, 65);</code> either. But with incompatible types you might, such as passing <code>float</code> to <code>%d</code>, but there is no obligation on the compiler to warn you."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1548868412, "post_id": 54445849, "comment_id": 95701136, "body": "@GovindParmar: oops!"}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1548868484, "creation_date": 1548868484, "answer_id": 54446019, "question_id": 54445849, "link": "https://stackoverflow.com/questions/54445849/printing-char-as-integer/54446019#54446019", "title": "Printing char as integer", "body": "<p>Largely for historic reasons, characters are small integers, and all integer arithmetic is done in the <code>int</code> type or wider. Software sometimes had to work with characters as integer codes and sometimes as things to be printed, so C developed with the <code>char</code> type being flexible.</p>\n\n<p>Wherever an <code>int</code> or <code>unsigned int</code> may be used in an expression, including function arguments, you may use a <code>char</code> instead.</p>\n\n<p>If we were designing the language anew, we might distinguish <code>char</code>-as-character from <code>char</code>-as-integer and require explicit conversions to convert between them. However, the language is what it is.</p>\n"}, {"comments": [{"owner": {"reputation": 743, "user_id": 246206, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2d4d601c3e3caab1e9a8090ea63c47a?s=128&d=identicon&r=PG", "display_name": "gbox", "link": "https://stackoverflow.com/users/246206/gbox"}, "edited": false, "score": 0, "creation_date": 1548868833, "post_id": 54446092, "comment_id": 95701337, "body": "The same occur with &#39;int main(){     char a = 65;     printf(&quot;%d\\n&quot;,a); }&#39;"}, {"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 0, "creation_date": 1548868838, "post_id": 54446092, "comment_id": 95701339, "body": "the printf has a prototype"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1548869721, "last_edit_date": 1548869721, "creation_date": 1548868747, "answer_id": 54446092, "question_id": 54445849, "link": "https://stackoverflow.com/questions/54445849/printing-char-as-integer/54446092#54446092", "title": "Printing char as integer", "body": "<blockquote>\n  <p>I would think that I at least get a warning that I am trying to print <code>%d</code> but the variable is <code>char</code></p>\n</blockquote>\n\n<p>\"there is no problem\" because <code>\"%d\"</code> expected an <code>int</code> and <code>a</code> was converted to an <code>int</code> when passed to <code>printf()</code>.  <a href=\"https://stackoverflow.com/questions/54445849/printing-char-as-integer/54446092#comment95700925_54445849\">@Weather Vane</a></p>\n\n<hr>\n\n<p><strong>Default argument\npromotions</strong></p>\n\n<p>Because <code>a</code> is passed to <code>printf(const char *, ...)</code>as a <code>...</code> argument:</p>\n\n<blockquote>\n  <p>The ellipsis notation in a function prototype declarator causes argument type conversion to stop after the last declared parameter. The default argument promotions are performed on trailing arguments.  C11dr \u00a76.5.2.2 7</p>\n</blockquote>\n\n<p>The <em>default argument\npromotion</em> of a <code>char</code> converts it into an <code>int</code><sup>1</sup>.</p>\n\n<hr>\n\n<p><sup>1</sup> Or <code>unsigned</code> when <code>CHAR_MAX &gt; INT_MAX</code>.<br>\n(Example: exceptional platforms where <code>char, int</code> are the same bit width and sign-ness.)</p>\n"}], "owner": {"reputation": 743, "user_id": 246206, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a2d4d601c3e3caab1e9a8090ea63c47a?s=128&d=identicon&r=PG", "display_name": "gbox", "link": "https://stackoverflow.com/users/246206/gbox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1024, "favorite_count": 1, "accepted_answer_id": 54446019, "answer_count": 2, "score": 1, "last_activity_date": 1548869721, "creation_date": 1548867929, "last_edit_date": 1548868775, "question_id": 54445849, "link": "https://stackoverflow.com/questions/54445849/printing-char-as-integer", "title": "Printing char as integer", "body": "<pre><code>int main(){\n    char a = 65;\n    a=a+5;\n    printf(\"%d\\n\",a);\n}\n</code></pre>\n\n<p>I would think that I at least get a warning that I am trying to print <code>%d</code> but the variable is <code>char</code></p>\n\n<p>Why there is no problem to print this way?</p>\n"}, {"tags": ["c", "arrays", "struct", "nested", "structure"], "comments": [{"owner": {"reputation": 3783, "user_id": 2428235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sj48p.jpg?s=128&g=1", "display_name": "Roman Hocke", "link": "https://stackoverflow.com/users/2428235/roman-hocke"}, "edited": false, "score": 0, "creation_date": 1548866440, "post_id": 54445239, "comment_id": 95700006, "body": "You need typecast, because compiler does not know, what literal <code>{&quot;JANE&quot;,8}</code> is. Use <code>p1.name=(struct d1){&quot;JANE&quot;,8};</code>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 3783, "user_id": 2428235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sj48p.jpg?s=128&g=1", "display_name": "Roman Hocke", "link": "https://stackoverflow.com/users/2428235/roman-hocke"}, "edited": false, "score": 4, "creation_date": 1548866720, "post_id": 54445239, "comment_id": 95700177, "body": "@RomanHocke It is not typecasting. It is the compound literal"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548866762, "post_id": 54445239, "comment_id": 95700195, "body": "@Avi - we should not answer it. You even did not bother to format the code"}], "answers": [{"comments": [{"owner": {"reputation": 3783, "user_id": 2428235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sj48p.jpg?s=128&g=1", "display_name": "Roman Hocke", "link": "https://stackoverflow.com/users/2428235/roman-hocke"}, "edited": false, "score": 0, "creation_date": 1548866543, "post_id": 54445387, "comment_id": 95700078, "body": "The printf() is okay, he has <code>&amp;...[0]</code>."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 3, "last_activity_date": 1548866803, "last_edit_date": 1548866803, "creation_date": 1548866383, "answer_id": 54445387, "question_id": 54445239, "link": "https://stackoverflow.com/questions/54445239/accessing-nested-structure-variable/54445387#54445387", "title": "Accessing Nested structure variable", "body": "<ol>\n<li>The form you use is only allowed if you initilize the structure. You need to use compound literals.</li>\n</ol>\n\n<hr>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main ()\n{\n\n    struct d1\n    {\n        char arr [10];\n        int num;\n    };\n\n    struct d2\n    {\n        struct d1 name;\n        int age;\n    }p1;\n\n    p1.name=(struct d1){\"JANE\",8};\n    printf (\"%s\",p1.name.arr);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1548866442, "creation_date": 1548866442, "answer_id": 54445401, "question_id": 54445239, "link": "https://stackoverflow.com/questions/54445239/accessing-nested-structure-variable/54445401#54445401", "title": "Accessing Nested structure variable", "body": "<p>if is is an initialization do directly :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main ()\n{\n  struct d1\n  {\n    char arr [10];\n    int num;\n  };\n\n  struct d2\n  {\n    struct d1 name;\n    int age;\n  }p1 = {{\"JANE\",8}, 20};\n\n  printf (\"%s\",&amp;p1.name.arr[0]);\n}\n</code></pre>\n\n<p><code>p1.name.num</code> is 8 and <code>p1.age</code> is 20</p>\n\n<p>note <code>&amp;p1.name.arr[0]</code> can be <code>p1.name.arr</code></p>\n"}], "owner": {"reputation": 315, "user_id": 10867418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1580131b81478b35551baeec813deddf?s=128&d=identicon&r=PG&f=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/10867418/avi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1575699668, "creation_date": 1548865933, "last_edit_date": 1575699668, "question_id": 54445239, "link": "https://stackoverflow.com/questions/54445239/accessing-nested-structure-variable", "title": "Accessing Nested structure variable", "body": "<p>When I tried to compile the following program, it gives me no output on screen:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main ()\n{\nstruct d1\n{\nchar arr [10];\nint num;\n};\n\nstruct d2\n{\nstruct d1 name;\nint age;\n}p1;\n\np1.name={(\"JANE\",8)};\nprintf (\"%s\",&amp;p1.name.arr[0]);\n}\n</code></pre>\n\n<p>I think problem is due to line <code>p1.name={(\"JANE\",8)};</code>\nBut I think I have written everything right. By writing this line I tried to assign value to a member,<code>\"name\"</code> of variable <code>p1</code> having structure type <code>d2</code>. And as <code>name</code> is itself a structure of type <code>d1</code> having two members, so I assigned two values <code>JANE</code> and <code>8</code> to <code>arr [10]</code> and <code>num</code> members of <code>name</code> respectively. </p>\n\n<p>I even tried with</p>\n\n<p><code>p1.name={{\"JANE\",8}}; //For this it gives error</code></p>\n\n<p><code>p1.name={(\"JANE\",8),20}; //For this it compiles but no output</code></p>\n\n<p><code>p1.name={{\"JANE\",8},20}; //again error</code></p>\n\n<p>That <code>20</code> is value of <code>p1's</code> member  <code>\"age\"</code>. While trying to print value <code>p1.name.age</code> it gives <code>0</code> instead of<code>20</code>.</p>\n\n<p><strong>What's wrong? Is there any syntax error or a conceptual error?</strong></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 6, "creation_date": 1548866109, "post_id": 54445220, "comment_id": 95699770, "body": "Address <a href=\"https://godbolt.org/z/khOKOi\" rel=\"nofollow noreferrer\">the warning</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548866314, "post_id": 54445220, "comment_id": 95699917, "body": "<code>area</code> falls out of scope the instant that function returns, so returning a pointer to it is to return an invalid pointer. Turn on <code>-Wall</code> when compiling."}], "answers": [{"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1548866375, "creation_date": 1548866375, "answer_id": 54445384, "question_id": 54445220, "link": "https://stackoverflow.com/questions/54445220/c-code-block-ok-but-still-get-not-compile/54445384#54445384", "title": "c++ code block ok but still get not compile", "body": "<p>You are returning the address of a local function variable in your function <code>area</code>. When the function returns, its stack space is no longer valid, so attempting to access an address to a local variable from that function is undefined behavior. </p>\n\n<p>I don't see why you need to make <code>area</code> return a pointer to an int. Just return <code>area</code>'s value and have <code>area</code>'s return type just be <code>int</code> instead.</p>\n\n<p>If for some reason you are required to return a pointer to an <code>int</code> (i.e. assignment or deliverable specifications), you have some options:</p>\n\n<ol>\n<li><p>Use heap memory. Allocate <code>area</code> with <code>malloc</code>, and <code>free</code> it in <code>main</code> after you've printed its value.</p></li>\n<li><p>Use <code>static</code> to put <code>area</code> into the process' data section rather than in stack memory, so that it persists beyond its scope and an address-of operation on it will continue to work after the function returns.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10456568"}, "is_accepted": false, "score": 1, "last_activity_date": 1548866834, "creation_date": 1548866834, "answer_id": 54445534, "question_id": 54445220, "link": "https://stackoverflow.com/questions/54445220/c-code-block-ok-but-still-get-not-compile/54445534#54445534", "title": "c++ code block ok but still get not compile", "body": "<p>You can't just return pointer to stack variable, as it's getting invalidated as the function returns. You can use dynamic memory allocation instead:</p>\n\n<pre><code>int* area(int leangth,int width){\n    int * area = malloc(sizeof(int));\n    *area = leangth*width;\n    return area;\n}\n\nint main() {\n    printf(\"area=%i\\n\",*area(5,6));\n}\n</code></pre>\n\n<p>Please note that you create memory leak and it would be better to handle it some way, but in this tiny example it doesn't matter.</p>\n"}], "owner": {"reputation": 997, "user_id": 9357484, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/x0wQp.png?s=128&g=1", "display_name": "Encipher", "link": "https://stackoverflow.com/users/9357484/encipher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548872646, "creation_date": 1548865879, "last_edit_date": 1548872646, "question_id": 54445220, "link": "https://stackoverflow.com/questions/54445220/c-code-block-ok-but-still-get-not-compile", "title": "c++ code block ok but still get not compile", "body": "<pre><code>int* areaofsquare(int len,int width){\n    int value = len*width;\n    return &amp;value;\n}\n\nint main() {\n    printf(\"area=%i\\n\",*areaofsquare(1,2));\n    return 0;\n\n}\n</code></pre>\n\n<p>Why I get memory error from this code? As per my understanding I did not get any error in this code block so why does it not run properly?</p>\n\n<p>Help me out.<br>\nThank you.</p>\n"}, {"tags": ["c", "pointers", "character"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1548866456, "post_id": 54445089, "comment_id": 95700018, "body": "Tip: You must <i>allocate</i> pointer values you&#39;re returning unless you can express them in terms of pointers to data that was pre-existing. <code>s</code> only exists when that function&#39;s running. It&#39;s invalid the instant it exits."}], "answers": [{"comments": [{"owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548866097, "post_id": 54445151, "comment_id": 95699763, "body": "My bad, it&#39;s one of those mornings. I hope this is more appropriate for C"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1548866314, "post_id": 54445151, "comment_id": 95699919, "body": "Removing a value from stack is popping, not pushing."}, {"owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "edited": false, "score": 0, "creation_date": 1548866494, "post_id": 54445151, "comment_id": 95700045, "body": "Correct, saying it gets &quot;pushed off&quot; the stack is a colloquialism and imprecise, it&#39;d be more accurate to say it gets &quot;removed&quot; from the stack, or as you said &quot;popped&quot; from the stack. Updated my answer =)"}], "tags": [], "owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1548866443, "last_edit_date": 1548866443, "creation_date": 1548865669, "answer_id": 54445151, "question_id": 54445089, "link": "https://stackoverflow.com/questions/54445089/how-to-return-a-character-pointer/54445151#54445151", "title": "How to return a character pointer?", "body": "<p>The problem is that char s is on the stack, and gets popped from the stack, so you're returning a pointer to a destructed element. </p>\n\n<p>If you just want a function that returns a char pointer, you could try something simple:</p>\n\n<pre><code>char * returnPointerToCharacter(char *s){\n    return s;\n}\n...// Do stuff\nchar f;\nchar * pointerToS = returnPointerToCharacter(&amp;f);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8148660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0495618d9573e7d272c9593d7457b0fc?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Ahmed", "link": "https://stackoverflow.com/users/8148660/salman-ahmed"}, "edited": false, "score": 0, "creation_date": 1548914014, "post_id": 54445681, "comment_id": 95716463, "body": "Could you some how use malloc to return the character pointer instead of using static?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 23, "user_id": 8148660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0495618d9573e7d272c9593d7457b0fc?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Ahmed", "link": "https://stackoverflow.com/users/8148660/salman-ahmed"}, "edited": false, "score": 0, "creation_date": 1548945557, "post_id": 54445681, "comment_id": 95733900, "body": "There&#39;s nothing new to show, @SalmanAhmed.  Whether you obtain your pointer by dynamic memory allocation or by application of the <code>&amp;</code> operator, a pointer is a value similar to any other.  You can store it in a variable or pass it to or return it from a function in exactly the same way you do a value of any other type."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1548867386, "creation_date": 1548867386, "answer_id": 54445681, "question_id": 54445089, "link": "https://stackoverflow.com/questions/54445089/how-to-return-a-character-pointer/54445681#54445681", "title": "How to return a character pointer?", "body": "<blockquote>\n  <p>I'm trying to return a character pointer</p>\n</blockquote>\n\n<p>Your code <em>does</em> return a character pointer.  But it also commits a cardinal sin: it returns a pointer to an object whose lifetime ends with the completion of the function call.  The resulting pointer is therefore useless to caller.</p>\n\n<p>There are several alternatives.  Often, if one is going to return a pointer, one dynamically allocates the object to which it is to point.  Dynamically allocated objects live until they are explicitly freed.  For your particular purposes, however, I would suggest making the function's local variable <code>static</code>, which exactly means that it lives and retains its last-set value for the entire life of the program:</p>\n\n<pre><code>char * returnPointerToCharacter(){\n    static char s = 's';\n\n    return &amp;s;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8148660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0495618d9573e7d272c9593d7457b0fc?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Ahmed", "link": "https://stackoverflow.com/users/8148660/salman-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548867386, "creation_date": 1548865470, "question_id": 54445089, "link": "https://stackoverflow.com/questions/54445089/how-to-return-a-character-pointer", "title": "How to return a character pointer?", "body": "<p>I'm new to C.\nI'm trying to return a character pointer >> A pointer that points to a single character value.\nI know I can simply return a character but I want to learn how to return a character pointer pointing to a single character value.</p>\n\n<pre><code>char * returnPointerToCharacter(){\n    char s = 's';\n    char * pointerToS = &amp;s;\n    return pointerToS;\n}\n\nint main()\n{\n//         This code below works  \n    char h = 'h';\n    char * pointerToH = &amp;h;\n    printf(\"%c \\n\", *pointerToH);\n\n//         This code below doesn't work                \n    char * pointerToS = returnPointerToCharacter();\n    printf(\"%c \\n\", *pointerToS);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "char", "strcmp", "strncmp"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1548864110, "post_id": 54444646, "comment_id": 95698470, "body": "Please post <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1548864260, "post_id": 54444646, "comment_id": 95698558, "body": "We can&#39;t answer without knowing exactly what data is in the two variables."}, {"owner": {"reputation": 797, "user_id": 99124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb4a98e32eb0337a855061470ea7a19?s=128&d=identicon&r=PG", "display_name": "mlp", "link": "https://stackoverflow.com/users/99124/mlp"}, "edited": false, "score": 0, "creation_date": 1548864476, "post_id": 54444646, "comment_id": 95698688, "body": "If you want (strings of) characters, use <code>char</code>. If you want small integers, use <code>int8_t</code> or <code>uint8_t</code> (or <code>signed char</code> or <code>unsigned char</code>)."}, {"owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "edited": false, "score": 0, "creation_date": 1548864537, "post_id": 54444646, "comment_id": 95698733, "body": "Added the data as requested."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1548864621, "post_id": 54444646, "comment_id": 95698776, "body": "What about non-printable content? Can you be sure there is none?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1548864687, "post_id": 54444646, "comment_id": 95698834, "body": "If it was about terminating 0 bytes, you should get one output longer than the other."}, {"owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1548864748, "post_id": 54444646, "comment_id": 95698868, "body": "@Gerhardh that&#39;s where I get a bit confused (still quite new to C). How would I know if there is non-printable content, or is that a redundant question?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1548865108, "post_id": 54444646, "comment_id": 95699102, "body": "You could run the program in a debugger and inspect the memory content when  you enter that function."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548871256, "post_id": 54444646, "comment_id": 95702540, "body": "Compare is failing because the 2 &quot;strings&quot; are not the same.  &quot;because both strings are the same&quot; is an incorrect conclusion on your part.  You need to post more evidence/code how you (errantly) concluded they are the same string."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "edited": false, "score": 0, "creation_date": 1548926436, "post_id": 54444771, "comment_id": 95722355, "body": "Great answer, thank you for taking the time to make it quite understandable! Just a quick follow up question, foo, while initialized to int8_t foo[size], is passed into a function x(foo). This function populates the array from sqlite3 statements. How would I append a null terminator to foo after it&#39;s been populated with it&#39;s values?"}, {"owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "edited": false, "score": 0, "creation_date": 1548927049, "post_id": 54444771, "comment_id": 95722716, "body": "Disregard the above comment, I appended the arrays with a null terminator 0 and still not working. However when I print foo and bar as hex numbers (%x) they are different. foo = vcd16a40 and bar = vcd169e0"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "edited": false, "score": 0, "creation_date": 1548927057, "post_id": 54444771, "comment_id": 95722721, "body": "@CianO&#39;Shaughnessy the function <i>x</i> has to put the null byte at the end, or it has for instance to return the number of bytes set to be able to add the null at the right position. However to mix string and array of byte is quite strange ;-)"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "edited": false, "score": 0, "creation_date": 1548927382, "post_id": 54444771, "comment_id": 95722912, "body": "@CianO&#39;Shaughnessy how can you have &#39;v&#39; in hexa ? <code>int8_t foo[] = { &#39;a&#39;, &#39;b&#39;, 0 }; printf(&quot;%d\\n&quot;, strcmp(foo, &quot;ab&quot;));</code> will print 0"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1548864794, "last_edit_date": 1548864794, "creation_date": 1548864476, "answer_id": 54444771, "question_id": 54444646, "link": "https://stackoverflow.com/questions/54444646/comparing-int8-t-and-char-using-strcmp-strncmp/54444771#54444771", "title": "Comparing int8_t and char* using strcmp/strncmp", "body": "<p>it is not enough to have :</p>\n\n<pre><code>int8_t foo[] = { 'a', 'b' };\n</code></pre>\n\n<p>to be able to do</p>\n\n<pre><code>if (strcmp(foo, \"ab\") == 0)\n  puts(\"equals\");\nelse\n  puts(\"not equal\");\n</code></pre>\n\n<p>because <em>strcmp</em> like a lot of other functions working on <em>char *</em> expect a null character signaling the end of the string.</p>\n\n<p>What appends when <em>strcmp</em> goes after 'b' in <em>foo</em> is an undefined behavior</p>\n\n<p>so</p>\n\n<pre><code>int8_t foo[] = { 'a', 'b', 0 };\n</code></pre>\n\n<p>is a candidate for <code>strcmp(foo, \"ab\")</code> thanks to the added null char allowing <em>strcmp</em> to not go out of <em>foo</em> in any cases</p>\n\n<hr>\n\n<p>Note the same problem occurs if you do <code>printf(\"%s\", foo);</code> in the first case, while a null char is not reach in the memory after the 'b' from <em>foo</em> the function <em>printf</em> will try to write the memory as characters, but this is an undefined behavior</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10989764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10e0319e8157d27bd7699e40bd0ca3a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Sto\u0144", "link": "https://stackoverflow.com/users/10989764/micha%c5%82-sto%c5%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1548866275, "creation_date": 1548866275, "answer_id": 54445357, "question_id": 54444646, "link": "https://stackoverflow.com/questions/54444646/comparing-int8-t-and-char-using-strcmp-strncmp/54445357#54445357", "title": "Comparing int8_t and char* using strcmp/strncmp", "body": "<p>I'm unable to recreate this scenario despite getting warnings at compilation time.\nWhat is the expected behavior?\nDo you mean that the comparison is failing, or is the code failing to get into the <code>if</code> block?\nIf both arrays contain the same data, the <code>strcmp()</code> will return 0 and then the <code>if</code> block won't be executed.</p>\n\n<p>I'm just trying to clarify. bruno's answer considering strcmp's behavior is also true.</p>\n"}], "owner": {"reputation": 127, "user_id": 5932185, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fd78edc4fa8fcfe926dbd309633dcb58?s=128&d=identicon&r=PG&f=1", "display_name": "Shox2711", "link": "https://stackoverflow.com/users/5932185/shox2711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548871089, "creation_date": 1548864067, "last_edit_date": 1548871089, "question_id": 54444646, "link": "https://stackoverflow.com/questions/54444646/comparing-int8-t-and-char-using-strcmp-strncmp", "title": "Comparing int8_t and char* using strcmp/strncmp", "body": "<p>Currently trying to fix code that was left unused for a while.</p>\n\n<p>I have two variables: <code>int8_t foo[size]</code> and <code>const char* const bar</code>.</p>\n\n<p>There is an if that checks <code>if(0 != strcmp((char *)foo, bar))</code></p>\n\n<p>Currently this is failing even though <code>printf(\"%s | %s\", foo, bar)</code> returns two strings the exact same. I also tried <code>strncmp</code> which is also failing. </p>\n\n<p>From researching online, I understand this is most likely due to terminating null bytes however I don't grasp how I would resolve/get around that.</p>\n\n<pre><code>int8_t foo[size];\nconst char* const bar;\n\nif(0 != strcmp((char *)foo, bar)){\n   fail \n}\n</code></pre>\n\n<p>Expect results are <code>strcmp</code> returning 0 because both strings are the same when printing. </p>\n\n<p>Actual outcome: returning fail.</p>\n\n<p>Actual data: 5352A565712345657567565785658956581<br>\nWhen running <code>printf(\"Value of foo and bar: %s and %s\", foo, bar)</code>, both variables return that data above.</p>\n"}, {"tags": ["c", "contiki"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548862612, "post_id": 54444168, "comment_id": 95697604, "body": "Convert the string to a <code>float</code>? The <a href=\"https://en.cppreference.com/w/c/string/byte/strtof\" rel=\"nofollow noreferrer\"><code>strtof</code></a> function could be useful."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1548863069, "post_id": 54444168, "comment_id": 95697897, "body": "How did you send the integer? And how did you receive it? If you want to transfer binary data, you need to agree on represenation / byte order between sender and receiver. And on size of data types. As an alternative convert to string for sending on the UART."}, {"owner": {"reputation": 21, "user_id": 10990591, "user_type": "registered", "profile_image": "https://graph.facebook.com/634213473664813/picture?type=large", "display_name": "Haider Ali", "link": "https://stackoverflow.com/users/10990591/haider-ali"}, "edited": false, "score": 0, "creation_date": 1548868143, "post_id": 54444168, "comment_id": 95700970, "body": "For sending integer i just changed  printf(&quot;got input string: &#39;%s&#39;\\n&quot;, (const char *) data) to  printf(&quot;got input string: &#39;%d&#39;\\n&quot;, (const char *) data);"}], "owner": {"reputation": 21, "user_id": 10990591, "user_type": "registered", "profile_image": "https://graph.facebook.com/634213473664813/picture?type=large", "display_name": "Haider Ali", "link": "https://stackoverflow.com/users/10990591/haider-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1548862506, "creation_date": 1548862506, "question_id": 54444168, "link": "https://stackoverflow.com/questions/54444168/how-to-receive-float-value-from-the-serial-port-for-the-device-sidesky-mote", "title": "How to receive float value from the serial port for the device side(sky mote)", "body": "<p>I want to communicate my tmote sky with my arduino through uart to pass float to tmote-sky. I have already pass a string of \"hello world\" from pc to tmote sky but cannot find a way how to pass float from pc to tmote-sky.</p>\n\n<p>I have tried to send Integer like 5 but it receive 5408.</p>\n\n<pre><code> #include \"contiki.h\"\n #include \"dev/serial-line.h\"\n\n PROCESS(main_process, \"main process\");\n AUTOSTART_PROCESSES(&amp;main_process);\n\n PROCESS_THREAD(main_process, ev, data)\n {\n     PROCESS_BEGIN();\n     for(;;) {\n        PROCESS_WAIT_EVENT();\n\n       if (ev == serial_line_event_message &amp;&amp; data != NULL) {\n       printf(\"got input string: '%s'\\n\", (const char *) data);\n                 }\n              }\n       PROCESS_END();\n }\n</code></pre>\n\n<p>this is the code to receive string from pc. What changes I have to made to pass a float or integer.</p>\n\n<p>I want that if i send 10.48 from my pc then it is also received as 10.48 on tmote sky.</p>\n"}, {"tags": ["c", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1549027312, "post_id": 54444091, "comment_id": 95767734, "body": "I assume that you&#39;re using <code>gtk</code> and not <code>gtkmm</code>, hence removed the <code>C++</code> tag."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1549027584, "post_id": 54444091, "comment_id": 95767861, "body": "Unfortunately, there documentation is very sparse on where to put &#39;stuff&#39; when it comes to gtk cross platform development. To  build gtk from source itself sometimes sounds a tedious task. That said <a href=\"https://stackoverflow.com/a/36820775/1620779\">this</a> answer which deals with gtk python port also give a folder layout similar to your project structure. I guess that the same folder structure need to be followed on deployment too.."}], "owner": {"reputation": 191, "user_id": 10251509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74014bfe136c3d0e9e8eda36316922e6?s=128&d=identicon&r=PG&f=1", "display_name": "Darth Moon", "link": "https://stackoverflow.com/users/10251509/darth-moon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549027222, "creation_date": 1548862305, "last_edit_date": 1549027222, "question_id": 54444091, "link": "https://stackoverflow.com/questions/54444091/a-way-to-change-the-path-to-gtk-themes", "title": "A way to change the path to GTK+ themes?", "body": "<p>After a few tries I realized where GTK+ finds it's icons and themes under windows.</p>\n\n<p>And this forces me to use a specific file structure like shown below.</p>\n\n<pre>\nproject/                // Imaginge this is my root directory\n  bin/                  // Where binaries are stored\n    *.dll\n    program.exe\n  share/                // Has to be located exactly here. Otherwise GTK+ will not find themes\n    icons/              // Here the themes are stored\n      ...\n</pre>\n\n<p>My Question: Is there a way to tell GTK+ another location for themes? Maybe I am willing to translate these themes somewhere in an assets/ folder. How do I let GTK+ finding them?</p>\n\n<p>And please notice that I really searched the internet for a solution and I did not find it since now.</p>\n\n<p>Darth Moon</p>\n"}, {"tags": ["c", "time", "stm32"], "comments": [{"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 1, "creation_date": 1548918306, "post_id": 54443867, "comment_id": 95718218, "body": "The formula looks wrong. Integer division, 10^6 isn&#39;t 1000000 and priorities. It might be counted as <code>(cycles&#47;216)*(10^6)</code> or  <code>((cycles&#47;216)*10)^6</code> where <code>^</code> is bitwise XOR operation not power."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548959873, "post_id": 54443867, "comment_id": 95742270, "body": "<code>time_in_seconds = cycles&#47;216*10^6</code> -&gt; <code>time_in_seconds = cycles&#47;216e6</code> time_in_seconds must be double or float"}], "owner": {"reputation": 533, "user_id": 7839759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b65e869f62a18de42a40546eb4806f2?s=128&d=identicon&r=PG&f=1", "display_name": "Habebit", "link": "https://stackoverflow.com/users/7839759/habebit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548861574, "creation_date": 1548861574, "question_id": 54443867, "link": "https://stackoverflow.com/questions/54443867/stm32f767zi-cycle-counter-for-time-measurement", "title": "STM32F767ZI Cycle Counter for time measurement", "body": "<p>I have a STM32F767ZI Nucleo board and it runs with 216MHz (SYSCLK and HCLK).</p>\n\n<p><a href=\"https://i.stack.imgur.com/gVSAW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gVSAW.png\" alt=\"enter image description here\"></a></p>\n\n<p>My code was generated with STM32CubeMX. I want to use the cycle counter to get the needed cycles for a certain function, my code looks like this:</p>\n\n<pre><code>DWT-&gt;CYCCNT = 0;\n\nuint32_t counter1 = DWT-&gt;CYCCNT; \n//test_function();\nuint32_t counter2 = DWT-&gt;CYCCNT;\n\nuint32_t cycles= counter2 - counter1;\n</code></pre>\n\n<p>So am I right, if I want to calculate the elapsed time of my <code>test_function()</code>, my formular looks something like that:</p>\n\n<p><code>time_in_seconds = cycles/216*10^6</code></p>\n\n<p>And my <code>test_function</code> takes more time, if I'm reducing the MHz of my board?</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 4, "creation_date": 1548861184, "post_id": 54443678, "comment_id": 95696608, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4867229/code-for-printf-function-in-c\">Code for printf function in C</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1548861209, "post_id": 54443678, "comment_id": 95696631, "body": "There are many open-source implementations of <code>printf</code> available, with source available for you to study. However, if you want to know the full path from the call of <code>printf</code> to the output being displayed on the screen, that&#39;s a Herculean task that will teach you about compilers (generating the code for the call) to operating systems to device drivers to hardware and back up through the stack until the output ends up in the terminal window."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1548862928, "post_id": 54443678, "comment_id": 95697812, "body": "It appears you are looking for general information on the whole chain of events that makes <code>printf</code> work. <a href=\"https://stackoverflow.com/a/13659290/298225\">Here</a> is my answer from six years ago about that."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1548863022, "post_id": 54443678, "comment_id": 95697862, "body": "This should be marked as a duplicate of <a href=\"https://stackoverflow.com/questions/13657890/what-goes-behind-printf-in-c\">What goes behind printf in C</a>, rather than <a href=\"https://stackoverflow.com/questions/4867229/code-for-printf-function-in-c\">Code for printf function in C</a>, and that would be a better resolution than too broad. So I vote to reopen, and will then vote to close as a duplicate."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548863506, "post_id": 54443678, "comment_id": 95698136, "body": "<i>Nothing</i> in <code>printf</code> itself displays anything on the screen, and indeed, <code>printf</code> calls don&#39;t always have that result.  They just cause formatted output to be sent to the standard output stream.  If that happens to be connected to a terminal driver, then that driver displays the output (on the screen).  If it&#39;s connected to some other kind of device, then it is handled appropriately for that device -- written in a file, maybe, or sent across the network, or stored in memory, or dispatched to another program, or ...."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "edited": false, "score": 0, "creation_date": 1548861438, "post_id": 54443750, "comment_id": 95696797, "body": "Sir actually how the computer displays it on the screen ..is there any code inside it that display it on the screen?we are just typing printf(&quot;hello world&quot;) and it&#39;s on the screen..but how it&#39;s on the screen Can we create our own printf() function?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "edited": false, "score": 1, "creation_date": 1548861487, "post_id": 54443750, "comment_id": 95696836, "body": "@DebdutBhaduri it you redirect the output you will not have the result on the screen ;-) What is your OS ? How you started your program, in a shell ?"}, {"owner": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "edited": false, "score": 0, "creation_date": 1548861591, "post_id": 54443750, "comment_id": 95696918, "body": "Sir am really not getting it suppose we write a programming to print hello world    we write.        Printf(&quot;hello world&quot;) we get hello world on the screen...so what is exactly happening under the hood..how this function displays hello world on the screen"}, {"owner": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "edited": false, "score": 0, "creation_date": 1548861703, "post_id": 54443750, "comment_id": 95696999, "body": "My os is windows"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "edited": false, "score": 0, "creation_date": 1548861742, "post_id": 54443750, "comment_id": 95697029, "body": "@DebdutBhaduri ok, how you started your program, in a terminal or double clic on its icon ?"}, {"owner": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "edited": false, "score": 0, "creation_date": 1548861873, "post_id": 54443750, "comment_id": 95697103, "body": "Sir I write the code in sublime text...and then on the terminal ...&gt;gcc prog.c ..then&gt; a.exe..."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "edited": false, "score": 0, "creation_date": 1548861948, "post_id": 54443750, "comment_id": 95697160, "body": "@DebdutBhaduri ok, so in that case the <i>standard output</i> is the shell output, but if you do <code>a.exe &gt; foo</code> the result will be in the file <i>foo</i>"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "edited": false, "score": 1, "creation_date": 1548862021, "post_id": 54443750, "comment_id": 95697204, "body": "@DebdutBhaduri <i>printf</i> doesn&#39;t care about where the output will be produced, this is not its job, like  <i>getchar</i> doesn&#39;t manage the keyboard. All is done on the I/O management"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 1, "last_activity_date": 1548862518, "last_edit_date": 1548862518, "creation_date": 1548861237, "answer_id": 54443750, "question_id": 54443678, "link": "https://stackoverflow.com/questions/54443678/how-printf-function-in-c-actually-works/54443750#54443750", "title": "How printf() function in c actually works?", "body": "<p><code>printf(\"something\");</code> is the equivalent of <code>fprintf(stdout, \"something\");</code> so it prints on the <em>standard output</em>, whatever where finally the output will be done (screen, file, pipe, ...)</p>\n\n<p>because \"something\" doesn't content special formating (using %) if is printed unchanged, and probably your question moves to be <em>how putchar() / fputc() works</em></p>\n\n<p><em>printf</em> doesn't know what a screen / file / pipe / ... is, in the same way <em>scanf</em> doesn't know what a keyboard is, this is not their responsibility</p>\n"}], "owner": {"reputation": 11, "user_id": 10987029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3Njf9e6ZRE/AAAAAAAAAAI/AAAAAAAAC-I/yKDEsAPFZiY/photo.jpg?sz=128", "display_name": "Debdut Bhaduri", "link": "https://stackoverflow.com/users/10987029/debdut-bhaduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "closed_date": 1548862222, "answer_count": 1, "score": 1, "last_activity_date": 1548862518, "creation_date": 1548860998, "last_edit_date": 1548862209, "question_id": 54443678, "link": "https://stackoverflow.com/questions/54443678/how-printf-function-in-c-actually-works", "closed_reason": "Needs more focus", "title": "How printf() function in c actually works?", "body": "<p>We all know that printf() is a function of &lt;stdio.h>.\nI want to know that what's happening under the hood when we type printf(\"something\");  and it gets displayed on the screen... How come it's displayed on the screen and what is the code inside printf() function by which it displays something on the screen?thanks in advance</p>\n"}, {"tags": ["c", "malloc", "realloc"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1548861035, "post_id": 54443594, "comment_id": 95696511, "body": "Do you have some code to illustrate how this function is used?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1548861199, "post_id": 54443594, "comment_id": 95696624, "body": "Your co-worker should be fired."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1548861298, "post_id": 54443594, "comment_id": 95696699, "body": "@n.m. Or promoted, so he won&#39;t write any code :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1548861489, "post_id": 54443594, "comment_id": 95696837, "body": "I am just curious... Is this the actual code you have or it is trimmed down?"}], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 3, "creation_date": 1548861461, "post_id": 54443718, "comment_id": 95696819, "body": "Moreover, it contains useless steps: The <code>p</code> and <code>tmp</code> are local variables that will be destroyed after the return statement anyhow. You don&#39;t have to save the value of <code>p</code> before altering. Furthermore, your code is equivalent to just <code>block_t *get_block(void *p) {return ((char *)p) - 16;}</code> ."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1548861902, "post_id": 54443718, "comment_id": 95697135, "body": "Agreed, @MichaelBeer.  I was updating this answer to say just the same when you wrote your comment."}, {"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1548862199, "post_id": 54443718, "comment_id": 95697346, "body": "Wasn&#39;t meant to critize upon the valid answer. I think the assignment stuff in the original code is mainly there to avoid compiler warnings due to type casts?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1548862279, "post_id": 54443718, "comment_id": 95697402, "body": "No worries, @MichaelBeer, I didn&#39;t take it as a criticism.  As I said, I had the exact same thought at about the same time."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548862287, "post_id": 54443718, "comment_id": 95697410, "body": "Re \u201cAll C operators compute values\u201d: Except cast to void and a function with return type void. \ud83d\ude00"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1548862436, "post_id": 54443718, "comment_id": 95697487, "body": "Acknowledged and updated, @EricPostpischil.  One of these days I&#39;ll learn to be more careful about slinging around &quot;all&quot;."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548862567, "post_id": 54443718, "comment_id": 95697576, "body": "The replacement code needs a final cast to <code>void *</code> or <code>block_t *</code>. Otherwise, it attempts to return a <code>char *</code> for a <code>block_t *</code>, which are probably incompatible types. Hmm, at that point, it is getting kind of messy visually. So I can sort of see the visual appeal and entertainment value of <code>return p = tmp -= 16;</code>, not that I would recommend it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1548863065, "post_id": 54443718, "comment_id": 95697893, "body": "I had to check, @EricPostpischil, but contrary to what I thought I knew, <code>char *</code> and <code>block_t *</code> indeed do seem to be incompatible types.  I&#39;ve added the cast.  I do see what you mean about the somewhat complicated expression, but I don&#39;t think it&#39;s bad enough for me, personally, to add a temporary variable.  YMMV."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1548863009, "last_edit_date": 1548863009, "creation_date": 1548861135, "answer_id": 54443718, "question_id": 54443594, "link": "https://stackoverflow.com/questions/54443594/assigning-when-returning-a-value/54443718#54443718", "title": "Assigning when returning a value", "body": "<p>All C operators compute values (except a cast operator with <code>void</code> as the target type or a function call to a function returning <code>void</code>).  In particular, assignment and op/assignment operations evaluate to the value assigned.  Therefore, this statement:</p>\n\n<blockquote>\n<pre><code>    return (p = tmp -= 16);\n</code></pre>\n</blockquote>\n\n<p>is equivalent to</p>\n\n<pre><code>    tmp -= 16;\n    p = tmp;\n    return p;\n</code></pre>\n\n<p><strong>And the latter is exactly how <em>I</em> would write it</strong> if that's what I wanted to do.  Compacting it all into one expression makes the code harder for a human to read and understand, and conveys no offsetting advantage whatsoever.</p>\n\n<p>HOWEVER, your particular case is even worse.  In your case, <code>p</code> and <code>tmp</code> are local variables of the function, so assignments to them have no effect on the caller.  There is therefore no point in assigning a new value to <code>p</code> if it will not afterward be read back (from <code>p</code>).  This may or may not reflect a programming error.  If the function's actual behavior is correct as-is, then I would write the overall function much differently:</p>\n\n<pre><code>block_t *get_block(void *p) {\n    return (block_t *) (((char *) p) - 16);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": false, "score": 0, "last_activity_date": 1548875969, "last_edit_date": 1548875969, "creation_date": 1548861181, "answer_id": 54443731, "question_id": 54443594, "link": "https://stackoverflow.com/questions/54443594/assigning-when-returning-a-value/54443731#54443731", "title": "Assigning when returning a value", "body": "<p>There is nothing special with <code>return</code>. It is just an expression as in any other place.</p>\n\n<p>You could rewrite it as follows:</p>\n\n<pre><code>block_t *get_block(void *p)\n{\n    char *tmp = p;\n    p = tmp - 16;\n    return p;\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>block_t *get_block(void *p)\n{\n    char *tmp = p;\n    tmp -= 16;\n    p = tmp;\n    return p;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>block_t *get_block(void *p)\n{\n    char *tmp = p;\n    tmp -= 16;\n    return (block_t *)tmp;\n}\n</code></pre>\n\n<p>The assignment within the <code>return</code> statement does not have any effect after you return from that function.</p>\n\n<p>What it does is basically calculating the address 16 bytes before the address that you provide.\nThis might be some memory management where you store some data in a header before the memory location the user is given.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -1, "last_activity_date": 1548864674, "creation_date": 1548864674, "answer_id": 54444832, "question_id": 54443594, "link": "https://stackoverflow.com/questions/54443594/assigning-when-returning-a-value/54444832#54444832", "title": "Assigning when returning a value", "body": "<p>It is very easy, but very incorrect , not portable and error prone. </p>\n\n<p>He takes the address 16 chars earlier and returns A it. He need to do pointer arithmetic on char pointer so he needs to make it char. The second assignment is not needed</p>\n"}], "owner": {"reputation": 3, "user_id": 10131881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5f830e1538eae787756ce9206181ec?s=128&d=identicon&r=PG&f=1", "display_name": "Baptiste LN", "link": "https://stackoverflow.com/users/10131881/baptiste-ln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 54443718, "answer_count": 3, "score": 0, "last_activity_date": 1548875969, "creation_date": 1548860696, "question_id": 54443594, "link": "https://stackoverflow.com/questions/54443594/assigning-when-returning-a-value", "title": "Assigning when returning a value", "body": "<p>I'm not understanding a function used by my co-worker. He cannot\nHe is using strange return blocks.</p>\n\n<pre><code>block_t *get_block(void *p)\n{\n    char *tmp;\n    tmp = p;\n    return (p = tmp -= 16);\n}\n</code></pre>\n\n<p>He says it is supposed to return form and the address.</p>\n\n<p>Need some help to understand the return ! Thanks a lot :)</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 1, "creation_date": 1548860543, "post_id": 54443512, "comment_id": 95696181, "body": "That code you provided is not valid C"}, {"owner": {"reputation": 1, "user_id": 10990880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b978e704da1eb66f64f63cd1d61d334?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Sysoev", "link": "https://stackoverflow.com/users/10990880/victor-sysoev"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1548860592, "post_id": 54443512, "comment_id": 95696214, "body": "@machine_1 What invalidates it?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1548861065, "post_id": 54443512, "comment_id": 95696535, "body": "&quot;What invalidates it?&quot; It depends. If that&#39;s the only declaration of <code>some</code> then no array dimension has been specified, so its type is incomplete."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10990880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b978e704da1eb66f64f63cd1d61d334?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Sysoev", "link": "https://stackoverflow.com/users/10990880/victor-sysoev"}, "edited": false, "score": 0, "creation_date": 1548860785, "post_id": 54443583, "comment_id": 95696351, "body": "&quot;No, because on modern operating systems a process running in user mode will see its own virtual address space.&quot; If that&#39;s the case then how did those valid words get in there? What set the individual bytes to spell out valid names?"}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 1, "user_id": 10990880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b978e704da1eb66f64f63cd1d61d334?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Sysoev", "link": "https://stackoverflow.com/users/10990880/victor-sysoev"}, "edited": false, "score": 2, "creation_date": 1548861005, "post_id": 54443583, "comment_id": 95696493, "body": "@VictorSysoev You probably have those somewhere in your program. If you provide a <i>Minimal, Complete, and Verifiable example</i>  (<a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>), you might get a sensible answer."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 1, "user_id": 10990880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b978e704da1eb66f64f63cd1d61d334?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Sysoev", "link": "https://stackoverflow.com/users/10990880/victor-sysoev"}, "edited": false, "score": 1, "creation_date": 1548861483, "post_id": 54443583, "comment_id": 95696833, "body": "@Victor Your process executable and DLLs are loaded into its virtual address space. Some of that content is from those binaries."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 1, "user_id": 10990880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b978e704da1eb66f64f63cd1d61d334?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Sysoev", "link": "https://stackoverflow.com/users/10990880/victor-sysoev"}, "edited": false, "score": 1, "creation_date": 1548861554, "post_id": 54443583, "comment_id": 95696882, "body": "@Victor Some of the gibberish looks like Windows timezone information (EDIT: actually, more like locale information), presumably loaded by some C runtime DLL."}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 1, "user_id": 10990880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b978e704da1eb66f64f63cd1d61d334?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Sysoev", "link": "https://stackoverflow.com/users/10990880/victor-sysoev"}, "edited": false, "score": 1, "creation_date": 1548862118, "post_id": 54443583, "comment_id": 95697269, "body": "@VictorSysoev Yes, since the code you provided is invalid, as  machine_1 said, and, even if it was, produces undefined behavior."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1548860649, "creation_date": 1548860649, "answer_id": 54443583, "question_id": 54443512, "link": "https://stackoverflow.com/questions/54443512/making-sense-of-memory-gibberish-c/54443583#54443583", "title": "Making sense of memory gibberish (C)", "body": "<blockquote>\n  <ol>\n  <li>Why every time the program is run it takes the OS a random amount of time to kill the program after accessing the 11th byte? And how come it never does it on the 11th?</li>\n  </ol>\n</blockquote>\n\n<p>You are invoking <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> by accessing an array beyond its boundaries. Anything can happen.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Is it correct to assume that the bytes in question are being used by some other program?</li>\n  </ol>\n</blockquote>\n\n<p>No, because on modern operating systems a process running in user mode will see its own <a href=\"https://en.wikipedia.org/wiki/Virtual_memory\" rel=\"nofollow noreferrer\">virtual address space</a>.  What you're seeing is the encoding of bytes from your own process' memory as whatever character set your terminal is using.</p>\n"}, {"comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1548861706, "post_id": 54443719, "comment_id": 95697004, "body": "<code>When the OS gives memory to a process, that memory is typically zeroed out first before the process gets it</code> - are you sure about this? In my experience uninitialized variables (stack and heap) get whatever was already in memory and that&#39;s more often than not non-zero"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1548861918, "post_id": 54443719, "comment_id": 95697144, "body": "@GovindParmar Yes, otherwise you have a security hole where one process could read values owned by another, possibly privileged, process.  Any other possible values have to originate from the current process."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1548862017, "post_id": 54443719, "comment_id": 95697201, "body": "@GovindParmar It may be uninitialized locally (at the time it is used), but the underlying memory page would have started off zeroed (or filled with 0xdeadbeef or whatever) at the time it was first accessed by the process. That is necessary for security reasons."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1548862286, "post_id": 54443719, "comment_id": 95697407, "body": "@Govind When an OS maps physical pages to a process\u2019 virtual memory it provides zeroed pages. If it didn\u2019t you could see data from an old process and that would be a security risk. By the time <i>this</i> process looks at it, though, it has loaded code and stack data so it is no longer zeroes."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1548861135, "creation_date": 1548861135, "answer_id": 54443719, "question_id": 54443512, "link": "https://stackoverflow.com/questions/54443512/making-sense-of-memory-gibberish-c/54443719#54443719", "title": "Making sense of memory gibberish (C)", "body": "<p>First off, the code won't compile as is because you can't define an array without a size.  </p>\n\n<p>Assuming you did fix the array:</p>\n\n<pre><code>char some[10];\n</code></pre>\n\n<p>Reading past the 10th element of the array invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  This does not guarantee a crash.  it just means you can't predict the behavior of the program.  It could crash, it could output strange results, or it could appear to work properly.  Just because it can crash doesn't mean it will.</p>\n\n<p>Regarding not printing extended ASCII characters, how characters are printed is dependent on your terminal.  It might print extended ASCII or it might attempt to interpret the bytes as UTF8 and display them accordingly.</p>\n\n<p>When the OS gives memory to a process, that memory is typically zeroed out first before the process gets it, so any values you see came from your process.  Some of it could be environment variables that the process knows about, so that could explain some of the text you saw, however you can't depend on seeing anything specific because you've invoked undefined behavior.</p>\n"}], "owner": {"reputation": 1, "user_id": 10990880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b978e704da1eb66f64f63cd1d61d334?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Sysoev", "link": "https://stackoverflow.com/users/10990880/victor-sysoev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 54443719, "answer_count": 2, "score": -5, "last_activity_date": 1548861135, "creation_date": 1548860418, "question_id": 54443512, "link": "https://stackoverflow.com/questions/54443512/making-sense-of-memory-gibberish-c", "title": "Making sense of memory gibberish (C)", "body": "<p>Right of the bat, this question doesn't have a practical purpose, it's just for understanding memory better.\nConsider the following code: </p>\n\n<pre><code>char some[];\nfor(int i = 0; ; i++) {\n        printf(\"%c\", some[i]);\n}\n</code></pre>\n\n<p>The first 9 chars are the same, since the string hasn't been initialized it prints out garbage. Now after the end of the string the program doesn't stop, it keeps printing <code>char</code>-s even though those bytes don't belong to the program and the OS should kill the program on the 11th iteration of the loop.</p>\n\n<p>But that never happens, after the string is printed it keeps going. Almost every time the length is different from a few cmd rows to sometimes around a megabyte of text. So, first question, </p>\n\n<p><strong>1. Why every time the program is run it takes the OS a random amount of time to kill the program after accessing the 11th byte? And how come it never does it on the 11th?</strong></p>\n\n<p>Some of the output is complete and utter gibberish like this: </p>\n\n<pre><code>E  \u20acE  !0  30  mE  Q   \u04152  \u04152  \u042b0  \u042b0          \u0447&lt;           * * \u0490  \u201cE  \u0408E  ^  [1  #  #  \u0490  {  \u0403  \u0490  \u0491  \u04413  \u000f4  \u0490  \f  \u0491E  \u04081  &lt;4    w/  z/  U4        \u0421E  zz            8    \u0409  \u0409  \u040c  \u040c  \u0452  T$  \u040c  \u0452      \u2122          \u0413  E9  \u042fE  =F  UF  E9  z\u0434R\u0010'&lt;O.  -  YF  \u0013  ^F  ^F  jF  jF  qF  vF  zF  F  \u040cF  \u201cF  \u0013  qF  \u0013  \u0443F  /G  yG  yG          \u00adG              * * \u0490  \u00b1G  \u00b1G  ^  \u0415G  \u041bG  \u0425G  \u0490  \u0430G  \u0430G  \u0490    \u044d9  \u044bG  \u0490    \u000bH  \u043a  H  .          ;H      $  ?H  MM    \f      [    EH  EH  \u040c  \u0452  \u040c  IH  \u0452  \u040c      \u2122  LH  TH  yH  \u00a9H  \u00b1H  \u0419H  \u0431H  \u0437H  M\u0439\u044d\u0439\u044d\u0439\u044d\u0444q    -  \u043dH     \u0442H  \u044cH  I  \u000bI  I  I  I  I  -I  2I  DI  I     \u2039I  \u0419I  =J  \u0403J          \u0407J             * * \u0490  \u0456J  \u0415J  ^  a  #  #  \u0490  \u0424J  \u0424J  \u0490  \u0491  \u0445J  K  \u0490  $  'K  DK  KK  q          YK  cK  0  \u0403K   \u0010\u0402           \u044f    \u0409  \u0409  3   \u0452  \u040c  \u2021K  \u0452  \u040c      \u2122  \u040aK  \u2014K  \u0413  \u0433  -  \u00b5K  \u0490$  \u0407    \u0010\u0439\u044d\u0439\u044d\u0439\u044d\u0444\u043f   -  \u0451   +  \u00bbK  \u0410K  \u0418K  \u0422K  \u042cK  \u0431K  \u0435K  \u043aK  \u044eK  \u044d   +  \u042cK  +  YL  \u040cL  \u0449L  %M          \u0449#           * * \u0490  AM  QM  ^  a  #  #  \u0490  dM  dM  \u0490  [  \u041f&amp;  \u040cL  \u0490  0  \u042b  \u043a  \u0425,  \u043f          \u0433,      =  hM   \u0010\u0402         \"    \u0409  \u0409  3   \u040c  \u0452  nM  \u040c  \u0452      \u2122  \u045a  \u00a0  \u0413  \u0433  qM  \u040eM  \u00b7M  \u0407    \u0010\u0439\u044d\u0439\u044d\u0439\u044d\u0444\u0429   -  \u0451   8  \u00bbM  \u0415M  \u0420M  \u0427M  \u042fM  \u0434M  \u0438M  \u043dM  \u0443M  \u044d   8  \u042fM  8  7N  kN  \u042dN  !O  \u0457O  \u0013P  GP           * * \u0490  wP  \u2030P  ^  \u045cP  #  #  \u0490  \u0430G  \u0430G  \u0490  [  \u041f&amp;  \u00b5P  \u0490  =  \u0415P  \u043a  KK  \u0429          \u21161      N  \u0424P  ,,          \u0432   \u0409  \u0409  3   \u040c  Q$  \u042aP  \u040c  Q$      \u2122          \u0413  \u0433  \u044bP  Q  \u0490$  E9  ,\u0433b'\u0452Q   8\nQ  Q  \"  Q  .Q  ?Q  KQ  WQ  \\Q  `Q  eQ  xQ  \u2039Q  \u045cQ  WQ  E  \u043dQ  R  R  \u0429R  \u044dR  S  US            * * \u0490  cS  \u2021S  ^  a  #  #  \u0490  \u00a0S  \u00abS  \u0490  N  \u044d9  R  \u0490  N  \u00b1S  \u042cS  KK     \u0433S  \u0436S  \u0441S  \u0449S  c  \u0424P  ,,           \u0432   \u0409  \u0409  3   \u040c  \u0452  \u042aP  \u040c  \u0452      \u2122  \u045a  \u00a0  \u0413  \u0433  T  /T  \u0490$  \u0407   ,\u0436Ya'\u00a9Q   7\nQ  WQ  \"  5T  JT  ?Q  VT  WQ  \\Q  `Q  eQ  bT  uT  \u045cQ  WQ  Z  \u0421T  U  gU  \u00b5U  %V      cV            * * \u0490  \u201cV  \u0491V  ^  a  #  #  \u0490  \u041dV  \u041dV  \u0490  c  \u041f&amp;  U  \u0490  c  \u0423V  \u043a  \u044eV   \n</code></pre>\n\n<p>Also, some of the <code>char</code>-s are blank squares. If I'm not mistaken that means that the program couldn't recognize the symbol. </p>\n\n<p><strong>2. How is that possible given the ASCII table has 255 symbols and a C <code>char</code> is 1 byte long? Why isn't it displaying the characters from the extended set?</strong></p>\n\n<p>However, other parts consist of valid words: </p>\n\n<pre><code>C o s t a   R i c a    C R I    C R    C R C    C o s t a   R i c a n   C o l \u0443 n   \u0013 c o l \u0443 n   c o s t a r r i c e n s e    S p a n i s h   ( C o s t a   R i c a )    e s p a \u0441 o l   ( C o s t a   R i c a )   \n 1 4 0 a : 0 0 0 0 0 8 0 a    E S K    C u b a    C U B    C U    C U P   \n C u b a n   P e s o   \u000b p e s o   c u b a n o   \u000e S p a n i s h   ( C u b a )   \u000e e s p a \u0441 o l   ( C u b a )   \n 0 8 0 a : 0 0 0 0 0 8 0 a    E S D    D o m i n i c a n   R e p u b l i c    R e p \u044a b l i c a   D o m i n i c a n a    D O M    D O P   \u000e D o m i n i c a n   P e s o   \u000f p e s o   d o m i n i c a n o    S p a n i s h   ( D o m i n i c a n   R e p u b l i c )    e s p a \u0441 o l   ( R e p \u044a b l i c a   D o m i n i c a n a )   \n 1 c 0 a : 0 0 0 0 0 8 0 a    E S F    E c u a d o r    E C U    E C    d \u0443 l a r   e s t a d o u n i d e n s e    S p a n i s h   ( E c u a d o r )    e s p a \u0441 o l   ( E c u a d o r )   \n 3 0 0 a : 0 0 0 0 0 8 0 a   \n H H ' H ' m m . s s      \u04251  \u0429  \u0446j  \u043cj  \u00a6\u0430     [   \u04371  [\u0405  \u0427E  #k  K6  \u0439P  \u0443     d d d d ,   d '   d e   ' M M M M '   d e   ' y y y y      \u0421\u0430   F  %F    \u0013 H H ' H ' m m ' ' ' ' s s ' ' ' ' ' '      \u04251  \u0429  \u2026  \u0447\u0430     E S N    d o .    l u .    m a .    m i .    j u .    v i .    s \u0431 .    \u0431  !\u0431  &amp;\u0431  +\u0431  0\u0431  5\u0431  :\u0431    # S p a n i s h   ( S p a i n ,   I n t e r n a t i o n a l   S o r t )   . e s p a \u0441 o l   ( E s p a \u0441 a ,   a l f a b e t i z a c i \u0443 n   i n t e r n a c i o n a l )    H H ' H ' m m    \u2013  \u2026  l  \u0013l  \u00a4\u0431     L    X    J    V    \u0420\u0415  \u2116\u0431  -\u041d  \u0458\u0431  \u0457\u0431  \u0412\u0431  \u043eB    \n 0 c 0 a : 0 0 0 0 0 4 0 a   ) k 0 - w i n d o w s - s p a n i s h ; k 0 - w i n d o w s - s p a n i s h - v a r   \u000b d d . M M M . y y y y      [   \u04371  [\u0405  \u0427E  K6  \u0439P  \u0443  \u000f\u0432     l u n    j u e    GN  /\u0432  QN  VN  4\u0432  `N  eN     e n e    o c t    d i c     \n I\u0432  \u0430O  QN  \u0435O  \u043aO  \u041a  \u041f  \u0449O  \u0429  N\u0432  \u042e  S\u0432        ! S p a n i s h   ( S p a i n ,   T r a d i t i o n a l   S o r t )   , e s p a \u0441 o l   ( E s p a \u0441 a ,   a l f a b e t i z a c i \u0443 n   t r a d i c i o n a l )   \u000b H H ' H ' m m ' ' ' '    \u2013  \u2026  \u0416\u0432     E q u a t o r i a l   G u i n e a    G u i n e a   E c u a t o r i a l    G N Q    G Q    f r a n c o   C F A   d e   \u0411 f r i c a   C e n t r a l    S p a n i s h   ( E q u a t o r i a l   G u i n e a )    e s p a \u0441 o l   ( G u i n e a   E c u a t o r i a l )    Q    E S G       G u a t e m a l a    G T M    G T    G T Q    G u a t e m a l a n   Q u e t z a l    q u e t z a l   \u0013 S p a n i s h   ( G u a t e m a l a )   \u0013 e s p a \u0441 o l   ( G u a t e m a l a )   \n 1 0 0 a : 0 0 0 0 0 8 0 a    d d d d   d d   ' d e '   M M M M   ' d e '   y y y y    d d   ' d e '   M M M M   ' d e '   y y y y      \u0429\u0433  \u0446\u0433     E S H    H o n d u r a s    H N D    H N    H N L   \u0010 H o n d u r a n   L e m p i r a    l e m p i r a   h o n d u r e \u0441 o    S p a n i s h   ( H o n d u r a s )    e s p a \u0441 o l   ( H o n d u r a s )   \n 4 8 0 a : 0 0 0 0 0 8 0 a      \u04181  I   \u04251  \u0429     [   6\u0458  \u04371  [\u0405  \u0427E  K6  \u0443     \u0421\u0430  %F     32  \u0490   \u04251  \u0429     E S M    M e x i c o    M \u0439 x i c o   \n</code></pre>\n\n<p>Also, there was one time when I landed on some with HTML-like tags <code>&lt;&gt; &lt;/&gt;</code>. The only word I could make out was \"assembly\". </p>\n\n<p><strong>3. Is it correct to assume that the bytes in question are being used by some other program?</strong> </p>\n\n<p>If it matters, the IDE is Visual Studio Community 2017 for Windows 10.</p>\n"}, {"tags": ["c", "sockets", "tcp", "tcpserver"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1548861166, "post_id": 54443442, "comment_id": 95696598, "body": "try printing <code>errno</code> or <code>strerror(errno)</code> to see for what reason <code>recv()</code> fails"}, {"owner": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1548871595, "post_id": 54443442, "comment_id": 95702734, "body": "As I said in @Ctx answer, it fails before the <code>recv()</code> level, the <code>connect()</code> function fails first but as I specified <code>SO_ERROR</code> instead of simple <code>-1</code>, I was not able to see it"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548895690, "post_id": 54443442, "comment_id": 95711939, "body": "in general, the client does NOT &#39;bind()&#39; to a port.  rather the server does that.  The client calls &#39;connect()&#39; to create a connection between the client and the server."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548895727, "post_id": 54443442, "comment_id": 95711949, "body": "When calling <code>socket()</code>, check the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548895764, "post_id": 54443442, "comment_id": 95711963, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem and help you debug it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548895920, "post_id": 54443442, "comment_id": 95712004, "body": "OT: regarding: <code>printf(&quot;Fail to create a thread\\n&quot;);</code>  error messages should be output to <code>stderr</code>, not <code>stdout</code>.  Also, when the error indication is from a C library function, should also output to <code>stderr</code>, the text reason the system thinks the error occurred.  An easy way to do all the above is to call <code>perror( &quot;your error message&quot; );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548896082, "post_id": 54443442, "comment_id": 95712045, "body": "regarding: <code>if(pthread_create(&amp;sending, NULL, sender, (void *)(long)sock) != 0)         printf(&quot;Fail to create a thread\\n&quot;);</code>  The next statements should be cleaning up any allocated memory, open files, etc. then calling: <code>exit( EXIT_FAILURE );</code>  The code should definitely not continue executing as if everything is alright."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548896619, "post_id": 54443442, "comment_id": 95712190, "body": "Note: sockets are &#39;int&#39; but should be typed as &#39;sock_t&#39;  They are not &#39;long&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548896872, "post_id": 54443442, "comment_id": 95712259, "body": "OT: when calling any C library function, like <code>send()</code>, always check the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548897083, "post_id": 54443442, "comment_id": 95712309, "body": "OT: regarding: <code>scanf(&quot;%s&quot;, buffer);</code>  1) always check the returned value (not the parameter values) to assure the operation was successful.  I.E. <code>if( scanf(&quot;%s&quot;, buffer) != 1) { &#47;&#47;handle error and exit }</code>  2) when using the input format specifiers &#39;%s&#39; and/or &#39;%[...]&#39; always include a MAX CHARACTERS modifier that is 1 less than the length of the input buffer because those format specifiers always append a NUL byte to the input.  This also avoids any possibility of a buffer overflow and the resulting undefined behavior"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "edited": false, "score": 0, "creation_date": 1548871374, "post_id": 54443790, "comment_id": 95702615, "body": "You were right, the <code>connect()</code> function fails first. I replace my <code>SO_EROR</code> by <code>-1</code> everywhere and add the two lines before <code>bind()</code>. It fails with <code>connect() : Invalid argument</code> even with more than 5000 try in a loop. But I am still not able to solve that problem."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "edited": false, "score": 1, "creation_date": 1548874392, "post_id": 54443790, "comment_id": 95704119, "body": "I indeed overlooked that mistake. You have to use <code>sizeof(struct sockaddr_in6)</code>"}, {"owner": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "edited": false, "score": 0, "creation_date": 1548874741, "post_id": 54443790, "comment_id": 95704296, "body": "I do not understand what it has to do but it does not work unfortunately. Do you think that the problem can come from too much socket file desciptor open but not in use? When I kill the server with ^C, I don&quot;t know it the socket are well closed, and I implement no command to close it properly."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "edited": false, "score": 0, "creation_date": 1548875178, "post_id": 54443790, "comment_id": 95704524, "body": "Can you show your current code as a whole? Append it at the end of your question"}, {"owner": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "edited": false, "score": 0, "creation_date": 1548875627, "post_id": 54443790, "comment_id": 95704750, "body": "Wich part do you want to see? The server or the client? The rest of the code is client handle with thread, supposing that the communcation is established correctly"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "edited": false, "score": 0, "creation_date": 1548875985, "post_id": 54443790, "comment_id": 95704908, "body": "The part, which throws the &quot;Invalid Argument&quot; error"}, {"owner": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "edited": false, "score": 0, "creation_date": 1548876480, "post_id": 54443790, "comment_id": 95705143, "body": "The part that throws the error is <code>perrror(&quot;connect()&quot;);</code> In the client code"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "edited": false, "score": 0, "creation_date": 1548876557, "post_id": 54443790, "comment_id": 95705176, "body": "Didn&#39;t I tell you to use <code>sizeof(struct sockaddr_in6)</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549401076, "post_id": 54443790, "comment_id": 95887258, "body": "It would be easier and safer to use <code>sizeof(sin6)</code> instead. And you should be using <code>getaddrinfo()</code> instead of <code>gethostbyname2()</code>. And the <code>recv()</code> loop needs to be stopped if <code>recv()</code> returns 0 on a graceful peer disconnect."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549404609, "post_id": 54443790, "comment_id": 95888755, "body": "@RemyLebeau I think you meant to add this to the question instead of my answer, correct?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549408148, "post_id": 54443790, "comment_id": 95889770, "body": "@Ctx it was posted exactly where I intended it to be posted. The first sentence directly pertains to your earlier comment. The other sentences were added later"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549408876, "post_id": 54443790, "comment_id": 95889952, "body": "@RemyLebeau &quot;it was posted&quot;... <i>You</i> posted it, and several of your sentences don&#39;t relate to this answer at all. Furthermore, it is neither &quot;easier&quot; nor &quot;safer&quot; to use <code>sizeof(sin6)</code>. You just claim some things without backing anything with arguments. Please consider posting your own, better answer - <i>with</i> explanations - instead of pinging me with your pretentious comments."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1549409122, "post_id": 54443790, "comment_id": 95890013, "body": "@Ctx wow, you don&#39;t have to be an @$$ about it. There was nothing pretentious about my post, I was just making an observation, sheesh"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 1, "last_activity_date": 1548861837, "last_edit_date": 1548861837, "creation_date": 1548861347, "answer_id": 54443790, "question_id": 54443442, "link": "https://stackoverflow.com/questions/54443442/can-reach-my-server-with-telnet-but-not-with-my-client/54443790#54443790", "title": "Can reach my server with telnet but not with my client", "body": "<p>It is probably already the <code>connect()</code>, which fails here:</p>\n\n<pre><code>if(connect(sock, (struct sockaddr *) &amp;sin6, sizeof(struct sockaddr)) == SO_ERROR)\n</code></pre>\n\n<p><code>SO_ERROR</code> is not meant to be used here, but as a socket option when retrieving the error when an asynchronous connect fails. A (synchronous) <code>connect()</code> returns -1 on error and sets <code>errno</code>, so do</p>\n\n<pre><code>if(connect(sock, (struct sockaddr *) &amp;sin6, sizeof(struct sockaddr)) == -1) {\n</code></pre>\n\n<p>...</p>\n\n<p>Later, the recv here:</p>\n\n<pre><code>while((n = recv(sock, buffer, BUFF_SIZE - 1, 0)) &gt;= 0)\n</code></pre>\n\n<p>fails with errno <code>ENOTCONN</code>, since the connection failed beforehand.</p>\n\n<p>The same <code>SO_ERROR</code> mistake is present at various locations in your server code; it is possible, that already the <code>bind()</code> there fails! The call to <code>listen()</code> will then autobind it to a free ephemereal port, so the call as well as the call to <code>accept()</code> will succeed.</p>\n\n<p>Why can the call to <code>bind()</code> fail? You might have to set the socket option <code>SO_REUSEADDR</code> when (re-)starting the server, otherwise it might refuse to use a recently bound port if connections are still in <code>TIME_WAIT</code> state. Place this directly before the <code>bind()</code> call:</p>\n\n<pre><code>int one = 1;\nsetsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &amp;one, sizeof(one));\n</code></pre>\n\n<p>This might help.</p>\n"}], "owner": {"reputation": 5, "user_id": 10290659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymys4.png?s=128&g=1", "display_name": "Eliaz", "link": "https://stackoverflow.com/users/10290659/eliaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 54443790, "answer_count": 1, "score": 0, "last_activity_date": 1548861837, "creation_date": 1548860206, "question_id": 54443442, "link": "https://stackoverflow.com/questions/54443442/can-reach-my-server-with-telnet-but-not-with-my-client", "title": "Can reach my server with telnet but not with my client", "body": "<p>I am currently coding a small chat application in C for learning network.\nI develop using the Transmission Control Protocol with socket in C. I was able to connect to my server with a client not coded by myself (on local network). Now telnet succeed to connect to my chat server(so with server and telnet client on the same computer) and I can send and receive message BUT my very simple client cannot connect to it.\nSince the begining I use port 9002 and right now I am trying to connect with IPv6 address ::1. \nHere the \"accept client\" code of my server:</p>\n\n<pre><code>int main(void)\n   {\n    //Create the socket\n    int sock = socket(AF_INET6, SOCK_STREAM, 0);\n\n    printf(\"Socket cr\u00e9er\\n\");\n\n    //Set up the socket interface\n    struct sockaddr_in6 sin6 = { 0 };\n    sin6.sin6_family = AF_INET6;\n    sin6.sin6_port = htons(PORT);\n    sin6.sin6_addr = in6addr_any; \n\n    //Bind the socket on the port\n    if(bind(sock, (struct sockaddr *) &amp;sin6, sizeof(struct sockaddr_in6)) == SO_ERROR)\n    {\n        perror(\"bind()\");\n        errx(EXIT_FAILURE, \"Fail to bind\");\n    }\n\n    //Make the sockey listen the port\n    if(listen(sock, MAX_CLIENT) == SO_ERROR)\n    {\n        perror(\"listen()\");\n        errx(EXIT_FAILURE, \"Fail to listen\");\n    }\n\n    printf(\"Socket listening\\n\");\n\n    int csock;\n    size_t clientID = 0;\n    --snip--\n\n    while(1)\n    {\n        struct sockaddr_in6 csin6;\n        memset(&amp;csin6, 0, sizeof(struct sockaddr_in6));\n        int sin6size = sizeof(struct sockaddr_in6);\n\n        //Accept a communication\n        printf(\"Wait for communication\\n\");\n        csock = accept(sock, (struct sockaddr *) &amp;csin6, &amp;sin6size);\n        printf(\"Connection accepted\\n\");\n        char msg[16];\n        sprintf(msg, \"CONNECTED - %zu\\n\", clientID);\n        send(csock, msg, sizeof(msg), 0);\n        printf(\"Client %zu connected\\n\", clientID);\n\n        //Handle client\n       --snip--\n    }\n</code></pre>\n\n<p>So this is a basic connection with socket using connected communication. The server handle several client in the while loop thanks to threading.<br>\nHere the code of the client:</p>\n\n<pre><code>void *sender(void *arg)\n{\n    int socket = (int)(long)arg;\n    char buffer[BUFF_SIZE];\n    while(1)\n    {\n        scanf(\"%s\", buffer);\n        send(socket, buffer, strlen(buffer), 0);\n        bzero(buffer, BUFF_SIZE);\n    }\n}\nint main(int argc, char *argv[])\n{\n    if(argc &lt; 2)\n        errx(EXIT_FAILURE, \"Usage: ./client &lt;server ip&gt;\\n\");\n\n    //Create the socket\n    int sock = socket(AF_INET6, SOCK_STREAM, 0);\n    struct hostent *hostinfo = NULL;\n    hostinfo = gethostbyname2(argv[1], AF_INET6);\n    if(hostinfo == NULL)\n        errx(EXIT_FAILURE, \"Can't connect to the server\\n\");\n\n    //Set up the socket interface\n    struct sockaddr_in6 sin6 = { 0 };\n    sin6.sin6_family = AF_INET6;\n    sin6.sin6_port = htons(PORT);\n    sin6.sin6_addr = *(struct in6_addr *)hostinfo-&gt;h_addr; \n\n    if(connect(sock, (struct sockaddr *) &amp;sin6, sizeof(struct sockaddr)) == SO_ERROR)\n    {\n        perror(\"connect()\");\n        errx(EXIT_FAILURE, \"Fail to connect\");\n    }\n    printf(\"Connection established\\n\");\n\n    pthread_t sending;\n    if(pthread_create(&amp;sending, NULL, sender, (void *)(long)sock) != 0)\n        printf(\"Fail to create a thread\\n\");\n\n    //Handle reception\n    char buffer[BUFF_SIZE];\n    int n;\n    while((n = recv(sock, buffer, BUFF_SIZE - 1, 0)) &gt;= 0)\n    {\n        buffer[n] = '\\0';\n        printf(\"%s\", buffer);\n    }\n\n    printf(\"Erreur: %d\\nConnection broken\\n\", n);\n    pthread_cancel(sending);\n    close(sock);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>So I start the client with:</p>\n\n<pre><code>~ ./client ::1\n</code></pre>\n\n<p>The output is the following:</p>\n\n<pre><code>Connection established\nError: -1\nConnection broken\n</code></pre>\n\n<p>While the server is still \"Waiting for communication\". This means that the server do not accept the connection but the client succeed to connect.</p>\n\n<p>Thank you for you help.</p>\n"}, {"tags": ["c", "arrays", "quicksort"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548860180, "post_id": 54443374, "comment_id": 95695923, "body": "The &quot;array&quot; <code>a</code> is an array of <code>double</code>, yet the temporary variable <code>t</code> which you use for the swap is an <code>int</code>. That doesn&#39;t seem correct."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548860271, "post_id": 54443374, "comment_id": 95695994, "body": "And can you please elaborate what you mean on your problem? What &quot;last part&quot; is causing you trouble? For the example input you show, what is the <i>actual</i> output? And have you tried to step through the code line by line in a debugger to make sure it works as intended?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1548860432, "post_id": 54443374, "comment_id": 95696113, "body": "This maybe OT but... why not put a double and an integer into a struct and then have a single array of that struct. This will allow you to use standard qsort on that array. As a benefit it will be easy to write the compare function to sort on the integer value in case the double value is the same."}, {"owner": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "edited": false, "score": 0, "creation_date": 1548860544, "post_id": 54443374, "comment_id": 95696182, "body": "The part that is causing me trouble, is to sort b[] in ascending order for the lines that the elements of a[] have the same value. F.e., if a[5]=a[6]=a[7] and b[5]=20, b[6]=16, b[7]=8, I want to sort b[] in ascending order, and it will be b[5]=8, b[6]=16, b[7]=20."}, {"owner": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "edited": false, "score": 0, "creation_date": 1548860582, "post_id": 54443374, "comment_id": 95696204, "body": "I tested the ascending order of a[i] and it seems to work fine."}, {"owner": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1548860683, "post_id": 54443374, "comment_id": 95696275, "body": "@4386427 I don&#39;t know how to use structures, so I tried with parallel arrays."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "edited": false, "score": 0, "creation_date": 1548868219, "post_id": 54444271, "comment_id": 95701015, "body": "Thank you very much for this code. How can I implement two arrays of different type in the <code>SomeDataType arr[] = {{10.0, 1}, {15.0, 2}, {20.0, 3}, {15.0, 4}};</code> part? My arrays are double and int, so I don&#39;t think this can happen."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "edited": false, "score": 0, "creation_date": 1548870027, "post_id": 54444271, "comment_id": 95701934, "body": "@GiannisD There are two types (i.e. a double and an integer) in the struct so you only need one array"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "edited": false, "score": 0, "creation_date": 1548933998, "post_id": 54444271, "comment_id": 95726881, "body": "@GiannisD See updated answer where the second example uses two individual arrays"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1548933947, "last_edit_date": 1548933947, "creation_date": 1548862824, "answer_id": 54444271, "question_id": 54443374, "link": "https://stackoverflow.com/questions/54443374/quicksort-parallel-arrays-with-respect-to-both-arrays-at-the-same-time/54444271#54444271", "title": "Quicksort parallel arrays with respect to both arrays at the same time", "body": "<p>I would avoid two independent arrays. Instead I would make a struct that contained one double and one integer and make an array of that struct. The benefit is two things:</p>\n\n<p>1) The array can be sorted by standar qsort</p>\n\n<p>2) The requirement about sorting on the double first and sort on the integer in case of equal double values, can easily be implemented by the compare function.</p>\n\n<p>It can look something like this:</p>\n\n<pre><code>typedef struct\n{\n  double a;\n  int b;\n} SomeDataType;\n\nint compar(const void * a, const void * b)\n{\n  SomeDataType* pa = (SomeDataType*)a;\n  SomeDataType* pb = (SomeDataType*)b;\n  if (pa-&gt;a &gt; pb-&gt;a) return -1;\n  if (pa-&gt;a &lt; pb-&gt;a) return 1;\n  if (pa-&gt;b &gt; pb-&gt;b) return 1;\n  if (pa-&gt;b &lt; pb-&gt;b) return -1;\n  return 0;\n}\n\nvoid pd(SomeDataType* p, int n)\n{\n  for(int i=0; i&lt;n; ++i)\n  {\n    printf(\"%f - %d\\n\", p[i].a, p[i].b);\n  }\n}\nint main()\n{\n  SomeDataType arr[] = {{10.0, 1}, {15.0, 2}, {20.0, 3}, {15.0, 4}};\n  pd(arr, 4);\n  qsort(arr, 4, sizeof(SomeDataType), compar);\n  printf(\"-------------------------\\n\");\n  pd(arr, 4);\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>10.000000 - 1\n15.000000 - 2\n20.000000 - 3\n15.000000 - 4\n-------------------------\n20.000000 - 3\n15.000000 - 2\n15.000000 - 4\n10.000000 - 1\n</code></pre>\n\n<p>If it's important to have two individual arrays in the program, I would still use <code>qsort</code> and an array of structs. I would do the sorting in 3 steps.</p>\n\n<p>1) Copy data from the individual arrays to an array of structs</p>\n\n<p>2) Sort the array of structs using <code>qsort</code></p>\n\n<p>3) Copy the sorted data in the array of structs back to the individual arrays</p>\n\n<p>That could look like:</p>\n\n<pre><code>typedef struct\n{\n  double a;\n  int b;\n} SomeDataType;\n\nint compar(const void * a, const void * b)\n{\n  SomeDataType* pa = (SomeDataType*)a;\n  SomeDataType* pb = (SomeDataType*)b;\n  if (pa-&gt;a &gt; pb-&gt;a) return -1;\n  if (pa-&gt;a &lt; pb-&gt;a) return 1;\n  if (pa-&gt;b &gt; pb-&gt;b) return 1;\n  if (pa-&gt;b &lt; pb-&gt;b) return -1;\n  return 0;\n}\n\nvoid qsort1(double a[], int b[], int lo, int hi)\n{\n if (lo &lt; hi)\n {\n   int num_elements = hi - lo + 1;\n   SomeDataType* p = malloc(num_elements * sizeof *p);\n\n   // Copy from individual arrays to array of structs\n   for(int i=0; i&lt;num_elements; ++i)\n   {\n     p[i].a = a[lo+i];\n     p[i].b = b[lo+i];\n   }\n\n   // Sort array of structs\n   qsort(p, num_elements, sizeof *p, compar);\n\n   // Copy from array of structs  back to individual arrays\n   for(int i=0; i&lt;num_elements; ++i)\n   {\n     a[lo+i] = p[i].a;\n     b[lo+i] = p[i].b;\n   }\n\n   free(p);\n }\n}\n\nvoid pa(double a[], int b[], int n)\n{\n   for(int i=0; i&lt;n; ++i)\n   {\n     printf(\"a[%d] = %f b[%d] = %d\\n\", i, a[i], i, b[i]);\n   }\n}\n\nint main()\n{\n  double a[] = {10.0, 15.0, 20.0, 15.0};\n  int b[] = {1, 2, 3, 4};\n  pa(a, b, 4);\n  qsort1(a, b, 0, 3);\n  printf(\"-------------------------\\n\");\n  pa(a, b, 4);\n\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a[0] = 10.000000 b[0] = 1\na[1] = 15.000000 b[1] = 2\na[2] = 20.000000 b[2] = 3\na[3] = 15.000000 b[3] = 4\n-------------------------\na[0] = 20.000000 b[0] = 3\na[1] = 15.000000 b[1] = 2\na[2] = 15.000000 b[2] = 4\na[3] = 10.000000 b[3] = 1\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10762300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4c990345ae7b8e84358042d9c9ed61?s=128&d=identicon&r=PG&f=1", "display_name": "Giannis D", "link": "https://stackoverflow.com/users/10762300/giannis-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548933947, "creation_date": 1548860021, "last_edit_date": 1548860326, "question_id": 54443374, "link": "https://stackoverflow.com/questions/54443374/quicksort-parallel-arrays-with-respect-to-both-arrays-at-the-same-time", "title": "Quicksort parallel arrays with respect to both arrays at the same time", "body": "<p>I have two parallel arrays, a double a[] and an int b[], that I am trying to sort using quicksort. <br>\nI want to sort the first array a[] in descending order and at the same time swap the values of b[]. <br>\nSimultaneously, for elements of a[] with the same value, the elements of b[] must be sorted in ascending order. <br>\nI have adjusted the following code, but I can't figure out how to achieve the last part.</p>\n\n<pre><code>void qsort1(double a[], int b[], int lo, int hi) {\n int h, l, p, t1;\n double t;\n\n if (lo &lt; hi) {\n   l = lo;\n   h = hi;\n   p = a[hi];\n\n   do {\n     while ((l &lt; h) &amp;&amp; (a[l] &lt;= p)) \n        l = l+1;\n     while ((h &gt; l) &amp;&amp; (a[h] &gt;= p))\n        h = h-1;\n     if (l &lt; h) {\n        t = a[l];\n        a[l] = a[h];\n        a[h] = t;\n        t1 = b[l];\n        b[l] = b[h];\n        b[h] = t1;\n      }\n   } while (l &lt; h);\n\n   a[hi] = a[l];\n   a[l] = p;\n\n   qsort1( a, b, lo, l-1 );\n   qsort1( a, b, l+1, hi );\n }\n}\n</code></pre>\n\n<p>For example:</p>\n\n<p>Arrays at the beginning:</p>\n\n<p>a[1] = 10   b[1] = 1 <br>\na[2] = 15   b[2] = 2 <br>\na[3] = 20   b[3] = 3 <br>\na[4] = 15   b[4] = 4 <br></p>\n\n<p>Arrays in the end:</p>\n\n<p>a[1] = 20   b[1] = 3 <br>\na[2] = 15   b[2] = 2 <br>\na[3] = 15   b[3] = 4 <br>\na[4] = 10   b[4] = 1 <br></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 10, "creation_date": 1548859329, "post_id": 54443105, "comment_id": 95695328, "body": "I probably would not use a ternary expression here, because there is no final else condition in your logic.  I like your code the way it is now."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 4, "creation_date": 1548859335, "post_id": 54443105, "comment_id": 95695334, "body": "What makes you think using the ternary operator would be better here?"}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1548859739, "post_id": 54443105, "comment_id": 95695594, "body": "BTW strcpy for one character seems quite overkill; woule really need to see the while code sample"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1548859765, "post_id": 54443105, "comment_id": 95695618, "body": "Since you are comparing for equality with two distinct values, rather than equality with one value and a general &quot;else&quot; case, the ternary operator isn&#39;t a good fit for this operation."}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 1, "last_activity_date": 1548860188, "last_edit_date": 1548860188, "creation_date": 1548859577, "answer_id": 54443225, "question_id": 54443105, "link": "https://stackoverflow.com/questions/54443105/how-this-if-else-condition-can-be-replaced-by-ternary-operator/54443225#54443225", "title": "How this if-else condition can be replaced by ternary operator", "body": "<pre><code>strcpy( x, (a == MACRO1)? \"S\" :\n           (a == MACRO2)? \"K\" : \"error\" );\n</code></pre>\n\n<p>Like your original code, this will copy either <code>\"S\"</code> or <code>\"K\"</code> to variable <code>x</code>.</p>\n\n<p>If <code>a</code> is <strong><em>neither</em></strong> <code>MACRO1</code> nor <code>MACRO2</code>, it will copy <code>\"error\"</code> to buffer <code>x</code> with an assumption that <code>x</code> is large enough to hold <code>\"error\"</code> string.<br>\n<em>(You should figure out a better way to handle the case where <code>a</code> is neither of the two macros)</em></p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1548876443, "post_id": 54443256, "comment_id": 95705130, "body": "With <code>char *strcpy(char * restrict s1, const char * restrict s2);</code>, arguments referenced data of <code>strcpy</code> must not overlap is true, else technical UB per 6.7.3.1  4, although I agree: doubtful true problem with <code>strcpy(x, x);</code>"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 4, "last_activity_date": 1548860683, "last_edit_date": 1548860683, "creation_date": 1548859656, "answer_id": 54443256, "question_id": 54443105, "link": "https://stackoverflow.com/questions/54443105/how-this-if-else-condition-can-be-replaced-by-ternary-operator/54443256#54443256", "title": "How this if-else condition can be replaced by ternary operator", "body": "<pre><code>if(a == MACRO1)\n strcpy(x,\"S\")\nelse \n strcpy(x,\"K\");\n</code></pre>\n\n<p>can be :</p>\n\n<pre><code>strcpy(x, (a == MACRO1) ? \"S\" : \"K\");\n</code></pre>\n\n<p>but</p>\n\n<pre><code>if(a == MACRO1)\n strcpy(x,\"S\")\nelse if (a == MACRO2)\n strcpy(x,\"K\");\n</code></pre>\n\n<p>has a missing else and to do</p>\n\n<pre><code>strcpy(x, (a == MACRO1) ? \"S\" : ((a == MACRO2) ? \"K\" : x));\n</code></pre>\n\n<p>is <strong>not</strong> correct because the argument of <em>strcpy</em>  must  not overlap but in that specific case not sure it is a true problem (even undefined behavior) , but also <em>x</em> is may be not yet initialized, and what about the performances ...</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1548861141, "last_edit_date": 1548861141, "creation_date": 1548860253, "answer_id": 54443458, "question_id": 54443105, "link": "https://stackoverflow.com/questions/54443105/how-this-if-else-condition-can-be-replaced-by-ternary-operator/54443458#54443458", "title": "How this if-else condition can be replaced by ternary operator", "body": "<p>Setting aside this <a href=\"https://stackoverflow.com/questions/54443105/how-this-if-else-condition-can-be-replaced-by-ternary-operator/54443661#54443661\">beautiful answer</a>, this cannot be written as a two \"nested\" ternary conditional operators since there is nothing to do for any value of <code>a</code> other than <code>MACRO1</code> and <code>MACRO2</code>, and it's not possible to trick <code>strcpy</code> into a no-op. (The behaviour of copying <code>x</code> to itself is <em>undefined</em>.)</p>\n\n<p>So you are best off leaving the code as it is. Note that in terms of programming history, the ternary conditional operator was invented before the <code>if</code> <code>else</code> control block due perhaps to the deficiencies in the former, as epitomised in the case you present.</p>\n\n<p>You could submit</p>\n\n<pre><code>strnpcy(x, a == MACRO1 ? \"S\" : \"K\", 2 * (a == MACRO1 + a == MACRO2));\n</code></pre>\n\n<p>to the next obfuscation contest though.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -1, "last_activity_date": 1548860723, "creation_date": 1548860723, "answer_id": 54443601, "question_id": 54443105, "link": "https://stackoverflow.com/questions/54443105/how-this-if-else-condition-can-be-replaced-by-ternary-operator/54443601#54443601", "title": "How this if-else condition can be replaced by ternary operator", "body": "<p>it can be also </p>\n\n<pre><code>{\n    char *dummy;\n\n    dummy = a == MACRO1 ? strcpy(x, \"TextA\") : a == MACRO2 ? strcpy(x, \"TextB\") : strcpy(x, \"error\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 4, "last_activity_date": 1548870749, "last_edit_date": 1548870749, "creation_date": 1548860945, "answer_id": 54443661, "question_id": 54443105, "link": "https://stackoverflow.com/questions/54443105/how-this-if-else-condition-can-be-replaced-by-ternary-operator/54443661#54443661", "title": "How this if-else condition can be replaced by ternary operator", "body": "<p>Formally, it can be rewritten as equivalent</p>\n\n<pre><code>a == MACRO1 ? strcpy(x, \"S\") : \na == MACRO2 ? strcpy(x, \"K\") : 0;\n</code></pre>\n\n<p>but there's no meaningful reason to do so, unless it is just a puzzle (or unless there's a credible reason to <a href=\"https://stackoverflow.com/questions/1613230/uses-of-c-comma-operator/1618867#1618867\">maintain expression semantics</a>). </p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548867370, "post_id": 54445572, "comment_id": 95700556, "body": "This isn&#39;t like the original; it overwrites <code>x</code> with the empty string if neither comparison  succeeds. You could replace <code>&quot;&quot;</code> with <code>x</code>, which would at least make it an expense no-op (or actually undefined, as pointed out in <a href=\"https://stackoverflow.com/a/54443256/1126841\">stackoverflow.com/a/54443256/1126841</a>)."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548867421, "post_id": 54445572, "comment_id": 95700587, "body": "(If <code>strcat</code> were used instead of <code>strcpy</code>, then <code>&quot;&quot;</code> could be used as the identity element for an expensive no-op.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10456568"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1548870414, "post_id": 54445572, "comment_id": 95702120, "body": "Fixed! Thanks, I have overlooked it and at first I thought it was strcat, not strcpy :D"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10456568"}, "is_accepted": false, "score": -1, "last_activity_date": 1548870390, "last_edit_date": 1548870390, "creation_date": 1548867018, "answer_id": 54445572, "question_id": 54443105, "link": "https://stackoverflow.com/questions/54443105/how-this-if-else-condition-can-be-replaced-by-ternary-operator/54445572#54445572", "title": "How this if-else condition can be replaced by ternary operator", "body": "<p>Simplest way, behaving like original, appending nothing if a doesn't match either MACRO1 or MACRO2:</p>\n\n<pre><code>strcpy(x, (a == MACRO1)?\"S\":(a == MACRO2)?\"K\":x);\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9697921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62f3cf583c87f40eeb9eebc7bf835800?s=128&d=identicon&r=PG&f=1", "display_name": "thamu", "link": "https://stackoverflow.com/users/9697921/thamu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1548870749, "creation_date": 1548859227, "last_edit_date": 1548859256, "question_id": 54443105, "link": "https://stackoverflow.com/questions/54443105/how-this-if-else-condition-can-be-replaced-by-ternary-operator", "title": "How this if-else condition can be replaced by ternary operator", "body": "<p>Please help me to rewrite the below condition in a better way</p>\n\n<p>This is a c code</p>\n\n<pre><code> if(a == MACRO1)\n strcpy(x,\"S\")\nelse if (a == MACRO2)\n strcpy(x,\"K\");\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1548858886, "post_id": 54442970, "comment_id": 95695035, "body": "How is <code>books</code> defined?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1548858905, "post_id": 54442970, "comment_id": 95695045, "body": "<code>typedef struct</code> is not much different from a <code>struct</code>. Only case with <code>typedef</code>: 1) you don&#39;t need to type <code>struct</code> 2) you have a higher chance of confusing people."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10481362"}, "edited": false, "score": 0, "creation_date": 1548859087, "post_id": 54442970, "comment_id": 95695163, "body": "<code>second.foo = first.foo;</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1548859344, "post_id": 54442970, "comment_id": 95695339, "body": "Have you tried doing <code>second = first</code>? For simple a <code>struct</code> it should work just fine"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1548863933, "post_id": 54442970, "comment_id": 95698374, "body": "@ChrisTurner what is a simple <code>struct</code>? Even a <code>struct</code> with pointers can be a simple <code>struct</code> yet the pointers then require a decision about shallow versus deep copy."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1548865334, "post_id": 54442970, "comment_id": 95699252, "body": "@RichardChambers I consider a simple <code>struct</code> as one that doesn&#39;t contain pointers  because you only need to do a shallow copy on it"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1548872591, "post_id": 54442970, "comment_id": 95703177, "body": "@ChrisTurner you need to be more detailed in your original comment for it to be useful. There are cases where a shallow copy of a <code>struct</code> with pointers is perfectly fine and provides the desired outcomes. And just doing a simple assignment as you suggest contradicts your second sentence and your second comment regarding pointers and copy since the OP has not actually specified what is in the <code>struct</code>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1548929645, "post_id": 54442970, "comment_id": 95724336, "body": "@RichardChambers The point of my original comment was to suggest that the OP actually do some research rather than offering an actual solution to their question...if I were providing an answer, I&#39;d have done so."}], "answers": [{"tags": [], "owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "is_accepted": false, "score": 1, "last_activity_date": 1548863258, "last_edit_date": 1548863258, "creation_date": 1548861782, "answer_id": 54443924, "question_id": 54442970, "link": "https://stackoverflow.com/questions/54442970/how-to-copy-typedef-struct-into-another-one/54443924#54443924", "title": "How to copy typedef struct into another one?", "body": "<p>If both <code>first</code> and <code>second</code> have the same type, then you can just do <code>second = first;</code> . It does not matter whether the type is an built-in or user-defined. C will copy the contents of <code>first</code> over to <code>second</code>.  Just try it.</p>\n\n<p>In general, variables in C are just data with a name and a type.\nIf the types of 2 variables <code>a</code> and <code>b</code> match, you can assign one to the other: <code>a = b;</code>.\nWhat happens is that the value of variable <code>b</code> is copied into variable <code>a</code>.</p>\n\n<p>But beware of pointers: For C, pointers are just variables with a value (the fact that the value represents a memory address does not matter, C treats all data equal). \nIf the 2 variables happen to be pointers, like <code>char *a; char *b;</code> then you can assign <code>a = b;</code> just with any variable.\nBut since the value of the variable <code>b</code> is the memory address, the memory address is copied from <code>b</code> to <code>a</code>, not the content of the memory at the memory address.</p>\n\n<p>If you want to have the memory copied over, you will have to do it on your own, e.g. via the help of <code>memcpy()</code> (see its man page for information).</p>\n\n<p>That said, if your structs contain pointers, the pointers are the content, not the stuff the pointers point to. C would copy the pointer values, not the pointer targets.\nIf you got pointers in your structs and want some sort of deep-copy, you would have to implement the traversal of your structs on your own. See <a href=\"https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy\">What is the difference between a deep copy and a shallow copy?</a></p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1548862253, "creation_date": 1548862253, "answer_id": 54444073, "question_id": 54442970, "link": "https://stackoverflow.com/questions/54442970/how-to-copy-typedef-struct-into-another-one/54444073#54444073", "title": "How to copy typedef struct into another one?", "body": "<p>If your structure does not contain any members that are pointers (or containing structs that do), then you can simply assign one to the other.</p>\n\n<pre><code>second = first;\n</code></pre>\n\n<p>If however your structs do contain pointers, then with a simple assignment you end up with two struct that contain pointers to the same memory, and changing one will affect the other.  If that's not what you want then you need to do a deep copy.</p>\n\n<p>For example:</p>\n\n<pre><code>struct book {\n    char *name;\n    int cost;   // in cents, so you don't have to deal with floating point issues\n};\n\nstruct book first;\nfirst.name = strdup(\"title1\");\nfirst.cost = 500;\n\nstruct book second;\nsecond.name = strdup(first.name);\nsecond.cost = first.cost;\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 54444073, "answer_count": 2, "score": 0, "last_activity_date": 1548863258, "creation_date": 1548858812, "question_id": 54442970, "link": "https://stackoverflow.com/questions/54442970/how-to-copy-typedef-struct-into-another-one", "title": "How to copy typedef struct into another one?", "body": "<p>How to copy typedef struct into another one?</p>\n\n<p>If I have a typedef struct called <code>books</code> and I have a struct variable called <code>books first</code>. Now I declare <code>books second</code> How can I pass the content of first to second? Is there a function to do that or I can do that just with <code>second = first</code>  ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1548858816, "post_id": 54442918, "comment_id": 95694981, "body": "Is <code>name</code> defined prior to this (e.g. as a typedef) ?"}, {"owner": {"reputation": 1, "user_id": 10990712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b677c0a6cc104dd80ff362d13e5185?s=128&d=identicon&r=PG&f=1", "display_name": "R.chris", "link": "https://stackoverflow.com/users/10990712/r-chris"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1549015789, "post_id": 54442918, "comment_id": 95761413, "body": "Yes it is typedef as const void*"}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1548859173, "last_edit_date": 1548859173, "creation_date": 1548858872, "answer_id": 54442988, "question_id": 54442918, "link": "https://stackoverflow.com/questions/54442918/typedef-of-two-different-function-pointers-is-valid/54442988#54442988", "title": "typedef of two different function pointers is valid?", "body": "<p>There are pointer to function returning an <em>uint8</em> and getting a <em>name</em> in argument (probably an other typedef, or is invalid if undefined)</p>\n\n<p>Example :</p>\n\n<pre><code>typedef char * name; /* added to be able to compile */\n\ntypedef uint8 (*Funcptr) (name);\n\nuint8 foo(name s)\n{\n  return 0;\n}\n\nint main()\n{\n  Funcptr f = &amp;foo;\n  char bar[] = \"bar\";\n\n  (*f)(bar);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10990712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b677c0a6cc104dd80ff362d13e5185?s=128&d=identicon&r=PG&f=1", "display_name": "R.chris", "link": "https://stackoverflow.com/users/10990712/r-chris"}, "edited": false, "score": 0, "creation_date": 1549016273, "post_id": 54443773, "comment_id": 95761659, "body": "thanks Eric Postpischil i understand, appreciate your answer"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 0, "last_activity_date": 1548861314, "creation_date": 1548861314, "answer_id": 54443773, "question_id": 54442918, "link": "https://stackoverflow.com/questions/54442918/typedef-of-two-different-function-pointers-is-valid/54443773#54443773", "title": "typedef of two different function pointers is valid?", "body": "<p>Yes, it is valid, provided <code>uint8</code> and <code>name</code> are types that have been defined previously.</p>\n\n<p>The declaration <code>typedef uint8 (*Funcptr) (name);</code> says <code>Funcptr</code> is a type for a pointer to a function that takes a <code>name</code> as an argument and returns a <code>uint8</code>.</p>\n\n<p>In general, a C declaration such as <code>uint8 (*Funcptr) (name)</code> gives a type (in this case <code>uint8</code>) and a sample expression (in this case <code>(*Funcptr) (name)</code>) and means \u201cWhen I use <code>Funcptr</code> this way, the expression has type <code>uint8</code>. So we have:</p>\n\n<ul>\n<li><code>(*Funcptr) (name)</code> is a <code>uint8</code>.</li>\n<li>Therefore, <code>(*Funcptr)</code> must be a function taking a <code>name</code> and returning a <code>uint8</code>.</li>\n<li>Therefore, <code>Funcptr</code> must be a pointer to a function taking a <code>name</code> and returning a <code>uint8</code>.</li>\n</ul>\n\n<p>Then, since it is a <code>typedef</code>, we know that <code>Funcptr</code> is the name of this type, rather than being an object that is a pointer to a function taking a <code>name</code> and returning a <code>uint8</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10990712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b677c0a6cc104dd80ff362d13e5185?s=128&d=identicon&r=PG&f=1", "display_name": "R.chris", "link": "https://stackoverflow.com/users/10990712/r-chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548861314, "creation_date": 1548858688, "last_edit_date": 1548859044, "question_id": 54442918, "link": "https://stackoverflow.com/questions/54442918/typedef-of-two-different-function-pointers-is-valid", "title": "typedef of two different function pointers is valid?", "body": "<p>Can some one explain what exactly the code means and is it valid to do typedef like that and using \"name\" in function call arguments ?</p>\n\n<pre><code>typedef uint8 (*Funcptr) (name);\ntypedef uint8 (*Funcptr1) (name);\n\ntypedef struct {\n    Funcptr func;\n    Funcptr1 func_1;\n} a;\n</code></pre>\n"}, {"tags": ["c", "stack", "push"], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1548866277, "post_id": 54443032, "comment_id": 95699897, "body": "Oh  thank you for finding another error for me. And then why I pushed more elements than the initial stack can be able to accommodate and popped then all?"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1548859027, "creation_date": 1548859027, "answer_id": 54443032, "question_id": 54442897, "link": "https://stackoverflow.com/questions/54442897/problems-with-push-in-stack/54443032#54443032", "title": "Problems with push in stack", "body": "<p>The <code>malloc</code> function does not initialize the memory it allocates, it will have <em>indeterminate</em> (and seemingly random) contents.</p>\n\n<p>That means the condition <code>if (sq-&gt;base==NULL)</code> in the <code>init_stack</code> function might be <em>false</em>, leading to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a> when you start to dereference that pointer.</p>\n\n<p>Either consider all the members as \"garbage\" in the <code>init_stack</code> function, and allocate memory unconditionally. Or initialize the members before calling <code>init_stack</code> (for example by using <a href=\"https://en.cppreference.com/w/c/memory/calloc\" rel=\"nofollow noreferrer\"><code>calloc</code></a> instead.</p>\n\n<hr>\n\n<p>There's also a logical error in the <code>push</code> function, where you use <code>init_size+increment</code> to calculate the new size in the <code>realloc</code> call. The problem with this is that neither <code>init_size</code> nor <code>increment</code> will change, So each time you call <code>realloc</code> it will be with the exact same size.</p>\n\n<p>This of course means that when you change <code>sq-&gt;stack_size</code> it will be wrong from the second time you call <code>realloc</code>. And that leads to <em>undefined behavior</em> again as you then risk of going out of bounds of the allocated memory.</p>\n\n<p>Use the current size of the stack when calculating the new size, as in <code>sq-&gt;stack_size + increment</code>.</p>\n"}], "owner": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54443032, "answer_count": 1, "score": 0, "last_activity_date": 1548859027, "creation_date": 1548858622, "question_id": 54442897, "link": "https://stackoverflow.com/questions/54442897/problems-with-push-in-stack", "title": "Problems with push in stack", "body": "<p>For the stack I implemented in C, I have some question with pushing the elements. <br/>\nThe stack was initialized with the size of init_size, but when pointer top reaches the top of the stack, I increment the size of the stack when the new element will be pushed into the stack.<br/></p>\n\n<p>The code works fine if I pass the reference of struct sqStack sq to push function, however; if I pass the sqStack pointer *st, the code crushed with the error at the line of \"*sq->top++=e;\" in push function as you can see in the following code( it worked fine sometimes though).<br/>\nAnd for the function pop, I didn't free every element I popped, is that ok?<br/>\nCan anyone help me find out the problem? Thanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define init_size 10\n#define increment 1\n\ntypedef struct sqStack\n{\n    int* top;\n    int* base;\n    int stack_size;\n}sqStack;\n\nint init_stack(sqStack* sq)\n{\n    if(sq-&gt;base==NULL)\n    {\n       sq-&gt;base = (int*)malloc(init_size*sizeof(int));\n    }\n    if(sq-&gt;base==NULL) exit(-1);\n    sq-&gt;stack_size=init_size;\n    sq-&gt;top=sq-&gt;base;\n    return 1;\n}\nint push(sqStack* sq, int e)\n{\n    if(sq==NULL) exit(-1);\n\n    if(sq-&gt;top-sq-&gt;base==sq-&gt;stack_size-1)//pointer top reaches the top of the stack\n    {\n        int* q = (int*)realloc(sq-&gt;base,(init_size+increment)*sizeof(int));\n        if(q==NULL)  exit(-1);\n            sq-&gt;base=q;\n        sq-&gt;top=sq-&gt;base+sq-&gt;stack_size-1;\n            sq-&gt;stack_size += increment;\n\n    }\n    *sq-&gt;top++=e;//Thread 1: EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n    return 1;\n}\nint pop(sqStack* sq,int* e)\n{\n    if(sq==NULL) exit(-1);\n    if(sq-&gt;base==sq-&gt;top)  exit(-1);\n    sq-&gt;top--;\n    *e=*sq-&gt;top;\n    return *e;\n}\n\nint empty(sqStack* sq)\n{\n    if(sq-&gt;base==sq-&gt;top) return 1;\n    else return 0;\n}\n\nint main() {\n\n    /*sqStack sq  ;\n    init_stack(&amp;sq);\n\n    int a;\n    for(int i=0;i&lt;12;i++)\n    {\n        push(&amp;sq,i+1);\n    }\n    for(int i=0;i&lt;12;i++)\n    {\n        printf(\"%d\\n\",pop(&amp;sq,&amp;a));\n    }*/\n    sqStack* st= (sqStack*)malloc(sizeof(sqStack))  ;\n    int e;\n    init_stack(st);\n    for(int i=0;i&lt;12;i++)\n    {\n        push(st,i+1);\n    }\n    for(int i=0;i&lt;12;i++)\n    {\n        printf(\"%d\\n\",pop(st,&amp;e));\n    }\n    return 0;\n}\n</code></pre>\n\n<p>If you want to test the the reference part, just uncomment of the first part of the code in main, and the second part in main is the pointer part.</p>\n"}, {"tags": ["c", "bit-shift"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 3, "creation_date": 1548858885, "post_id": 54442891, "comment_id": 95695031, "body": "Not directly related to your question, but you should always perform shifts on unsigned types, as otherwise the result of overflow is undefined."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1548859993, "post_id": 54442891, "comment_id": 95695790, "body": "If you split one expression into multiple, it is the same effect as using brackets."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 2, "creation_date": 1548861039, "post_id": 54442891, "comment_id": 95696514, "body": "@Gerhardh Only if you use the correct (promoted) types, which the code here doesn&#39;t do."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1548861445, "post_id": 54442891, "comment_id": 95696806, "body": "@interjay True, I missed that part. My point was that brackets are known to change the result. And so is splitting the operations in multiple statements. There is no reason to expect same result for each case."}], "answers": [{"tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": false, "score": 3, "last_activity_date": 1548859232, "last_edit_date": 1548859232, "creation_date": 1548858870, "answer_id": 54442986, "question_id": 54442891, "link": "https://stackoverflow.com/questions/54442891/the-right-order-of-shifting-bits-in-c/54442986#54442986", "title": "The right order of shifting bits in c", "body": "<pre><code>signed char b = 66 &lt;&lt; 2 &gt;&gt; 8;\n</code></pre>\n\n<p>Here, <code>66 &lt;&lt; 2</code> becomes a <code>signed int</code> 264 (<code>signed int</code> because it is an intermediate result), which is shifted <code>&gt;&gt; 8</code>, which becomes 1.</p>\n\n<pre><code>signed char b = 66 &lt;&lt; 2;\n</code></pre>\n\n<p>Here, the 264 (same as above) is \"pressed\" into a <code>signed char</code>, turning it to 8. Applying <code>&gt;&gt; 8</code> here results in 0.</p>\n\n<p>Well, and your 3rd example, <code>2 &gt;&gt; 8</code> is obvously 0, so the <code>66</code> is left unchanged.</p>\n"}], "owner": {"reputation": 141, "user_id": 7731733, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4326673ebb8b37ec113a5b7d17afce92?s=128&d=identicon&r=PG&f=1", "display_name": "homior", "link": "https://stackoverflow.com/users/7731733/homior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548859232, "creation_date": 1548858611, "question_id": 54442891, "link": "https://stackoverflow.com/questions/54442891/the-right-order-of-shifting-bits-in-c", "title": "The right order of shifting bits in c", "body": "<p>What is the difference and why are there <strong>3</strong>(???) different results?</p>\n\n<pre><code>signed char b;\nb = 66 &lt;&lt; 2 &gt;&gt; 8;\nfprintf(stdout, \"%d\\n\", b);\n</code></pre>\n\n<p>Output: \"1\"</p>\n\n<pre><code>signed char b;\nb = 66 &lt;&lt; 2;\nb = b &gt;&gt; 8;\nfprintf(stdout, \"%d\\n\", b);\n</code></pre>\n\n<p>Output: \"0\"</p>\n\n<pre><code>signed char b;\nb = 2 &gt;&gt; 8;\nb = 66 &lt;&lt; b;\nfprintf(stdout, \"%d\\n\", b);\n</code></pre>\n\n<p>Output: \"66\"</p>\n\n<p>thanks for help!</p>\n"}, {"tags": ["c", "binary", "bit"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1548859163, "post_id": 54442878, "comment_id": 95695216, "body": "None of your constants are binary; <code>add</code>, <code>sub</code>, and <code>jmp</code> are octal literals; <code>IMM</code> and <code>ADDR</code> are decimal literals. Binary <code>000111</code> is seven while <code>jmp</code> is seventy-three, and binary <code>10000</code> is sixteen while <code>IMM</code> is ten thousand."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1548859262, "post_id": 54442878, "comment_id": 95695276, "body": "Write your defines (although its better to use <code>constexpr</code>) as <code>0b000001</code>, <code>0b000010</code> etc which will force them to be binary."}, {"owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 1, "creation_date": 1548859319, "post_id": 54442878, "comment_id": 95695322, "body": "<code>memcpy(vector, &amp;data, sizeof(uint64_t));</code> is a bad idea. Your code will depend on the endianness of our computer."}], "answers": [{"tags": [], "owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 4, "last_activity_date": 1548859940, "last_edit_date": 1548859940, "creation_date": 1548859048, "answer_id": 54443037, "question_id": 54442878, "link": "https://stackoverflow.com/questions/54442878/search-binary-number/54443037#54443037", "title": "Search binary number", "body": "<p>None of your defined numbers are binary numbers</p>\n\n<pre><code>#define add 000001      // octal literals because it starts with 0\n#define sub 000010          \n#define jmp 000111 \n\n#define IMM 10000       // decimal literals \n#define ADDR 10001\n</code></pre>\n\n<p>None of them are binary representations as you assume in your code. </p>\n\n<p>Since C++14 you can write a binary literal as (example from <a href=\"https://en.cppreference.com/w/cpp/language/integer_literal\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/integer_literal</a>):</p>\n\n<pre><code>int b = 0b101010; // C++14\n</code></pre>\n\n<p>In general I would strongly advise you to not use <code>#define</code>, unless you deliberatly  choose to get all the trouble that come with using macros.</p>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 10614693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b7045e4e715a4db1f0b1c1301d1e78?s=128&d=identicon&r=PG&f=1", "display_name": "Flave", "link": "https://stackoverflow.com/users/10614693/flave"}, "is_accepted": false, "score": 0, "last_activity_date": 1548920629, "creation_date": 1548920629, "answer_id": 54455584, "question_id": 54442878, "link": "https://stackoverflow.com/questions/54442878/search-binary-number/54455584#54455584", "title": "Search binary number", "body": "<p>To access the defined values I just re-write them like this:</p>\n\n<pre><code>  #define add 0x1\n  #define sub 0x2\n  #define jmp 0x7\n\n  #define IMM 0x10\n  #define ADDR 0x11\n</code></pre>\n\n<p>And now it`s working fine.</p>\n"}], "owner": {"reputation": 77, "user_id": 10614693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b7045e4e715a4db1f0b1c1301d1e78?s=128&d=identicon&r=PG&f=1", "display_name": "Flave", "link": "https://stackoverflow.com/users/10614693/flave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550515660, "creation_date": 1548858561, "last_edit_date": 1550515660, "question_id": 54442878, "link": "https://stackoverflow.com/questions/54442878/search-binary-number", "title": "Search binary number", "body": "<p>I have defined some values, see below, and I can`t use them properly.</p>\n\n<pre><code>#define add 000001\n#define sub 000010\n#define jmp 000111 \n\n#define IMM 10000\n#define ADDR 10001\n</code></pre>\n\n<p>In my code, I set an address in hex.</p>\n\n<pre><code>            parameter1 = false;\n            parameter1 = false; \n\n            uint64_t data = 0xffffffff05001e00;\n\n            uint16_t vector[4];\n            memcpy(vector, &amp;data, sizeof(uint64_t));\n\n            int currentPosition = 0;\n\n            while (currentPosition &lt; 4) {\n\n                header = vector[currentPosition];//header\n\n                opcode = header &gt;&gt; 0xA &amp; 0x3F;\n                src1 = header &gt;&gt; 0x5 &amp; 0x1F;\n                src2 = header &amp; 0x1F;\n\n                if (src1 == ADDR || src1 == IMM) { parameter1 = true; }\n                if (src2 == ADDR || src2 == IMM) { parameter2 = true; } \n                ....\n                currentPosition++;\n           }\n</code></pre>\n\n<p>header = 1e00 in this case ( because it`s vector[0] )</p>\n\n<p>Forward it will do:\nopcode = 0x7,  src1 =0x10,  src2= 0x0.</p>\n\n<p>That means in binary:  000111 10000 00000   -> jmp IMM NULL</p>\n\n<p>When first <strong>if</strong> is called, parameter1 should get the value true; but this never happend. Why is that happening? \nI have not defined correctly IMM value?</p>\n\n<p>Thanks!!!</p>\n"}, {"tags": ["c", "winapi", "bitmap", "resources"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1548858207, "post_id": 54442720, "comment_id": 95694568, "body": "You haven&#39;t allocated or acquired <code>bm</code> dynamically, why do you want to &quot;release&quot; it? It&#39;s just like any other normal variable, for example you would not wonder how to &quot;release&quot; <code>int x;</code> would you? <code>hBitmap</code> on the other hand..."}, {"owner": {"reputation": 556, "user_id": 1697454, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001760096491/picture?type=large", "display_name": "Jefrey Sobreira Santos", "link": "https://stackoverflow.com/users/1697454/jefrey-sobreira-santos"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548858411, "post_id": 54442720, "comment_id": 95694690, "body": "@WeatherVane yes, it says &#39;no suitable conversion function from &quot;BITMAP&quot; to &quot;void *&quot; exists&#39;, whereas <code>free(&amp;bm) </code> throws &quot;Invalid address specified to RtlValidateHeap&quot;."}, {"owner": {"reputation": 556, "user_id": 1697454, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001760096491/picture?type=large", "display_name": "Jefrey Sobreira Santos", "link": "https://stackoverflow.com/users/1697454/jefrey-sobreira-santos"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548858589, "post_id": 54442720, "comment_id": 95694813, "body": "@Someprogrammerdude so I am not supposed to release it? Actually I use this code in a splash screen, and would like to remove every reference to the splash screen bitmap after it disappears..."}, {"owner": {"reputation": 556, "user_id": 1697454, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001760096491/picture?type=large", "display_name": "Jefrey Sobreira Santos", "link": "https://stackoverflow.com/users/1697454/jefrey-sobreira-santos"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548858695, "post_id": 54442720, "comment_id": 95694893, "body": "In other words, deleting hBitmap only is enough/everything I can do?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548859084, "post_id": 54442720, "comment_id": 95695160, "body": "@JefreySobreiraSantos I misread it at first."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548859449, "post_id": 54442720, "comment_id": 95695396, "body": "Yes that&#39;s correct. If it&#39;s defined as a local variable inside a function it will be &quot;released&quot; like any other local variable once the function returns."}], "answers": [{"comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1548940118, "post_id": 54442952, "comment_id": 95730619, "body": "That extra set of braces are completely unneccesary.  As others have pointed out, there are no resources associated with <code>bm</code> - it is just POD."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1548876482, "last_edit_date": 1548876482, "creation_date": 1548858777, "answer_id": 54442952, "question_id": 54442720, "link": "https://stackoverflow.com/questions/54442720/how-do-i-release-a-bitmap-struct/54442952#54442952", "title": "How do I release a BITMAP struct?", "body": "<p>I'd say this</p>\n\n<pre><code>HBITMAP hBitmap;\nhBitmap = (HBITMAP)LoadImage(...);\n</code></pre>\n\n<p>should better/nicer be</p>\n\n<pre><code>HANDLE handle = LoadImage(...);\nif (NULL == handle)\n{\n  /*handle error */\n}\nelse\n{\n  HBITMAP hbitmap = handle;\n\n  {\n    BITMAP bm = {0}; /* allocate and\n            initialise bm on the stack. */\n\n    GetObject(hbitmap, sizeof bm, &amp;bm);\n\n    /* Use bm here. */\n\n   } /* Have bm be deallocated or at least\n          be inaccessible from here on. */\n\n   DeleteObject(hbitmap);\n}\n</code></pre>\n\n<p>It is the handle that refers to the resource, which should be freed when not used anymore.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1548877108, "post_id": 54443476, "comment_id": 95705490, "body": "Misread your question. I stumbled over the the &quot;<i>it</i>&quot; in here &quot;<i>even if it was allocated on the stack</i>&quot;. &quot;it&quot; is evil (at least if not used properly/unambiguously ;)). Removing the DV."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1548876813, "last_edit_date": 1548876813, "creation_date": 1548860316, "answer_id": 54443476, "question_id": 54442720, "link": "https://stackoverflow.com/questions/54442720/how-do-i-release-a-bitmap-struct/54443476#54443476", "title": "How do I release a BITMAP struct?", "body": "<p>You would only need to use the operator <code>delete</code> if you had allocated the <code>BITMAP</code> with the operator <code>new</code>. (Modern, idiomatic C++ discourages manual memory management as well, but since you asked about this in your question, there you go).</p>\n\n<p>A <code>BITMAP</code> is a struct of POD values dimensions and pixel data, and an <code>HBITMAP</code> can be a handle to a <code>BITMAP</code> if it is assigned as such. An <code>HBITMAP</code> <em>does</em> need to be released with a call to <code>DeleteObject</code> when it's no longer needed and no longer selected into a DC, even if it was allocated on the stack; a <code>BITMAP</code> on the stack will disappear when it goes out of scope.</p>\n\n<p>There is a difference between the operator <code>delete</code> and the Windows GDI function <code>DeleteObject</code>. <code>delete</code> is a C++ keyword for removing objects from the heap; <code>DeleteObject</code> is an API call for freeing GDI resources.</p>\n"}], "owner": {"reputation": 556, "user_id": 1697454, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100001760096491/picture?type=large", "display_name": "Jefrey Sobreira Santos", "link": "https://stackoverflow.com/users/1697454/jefrey-sobreira-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1548876813, "creation_date": 1548858103, "last_edit_date": 1548865048, "question_id": 54442720, "link": "https://stackoverflow.com/questions/54442720/how-do-i-release-a-bitmap-struct", "title": "How do I release a BITMAP struct?", "body": "<p>After using a BITMAP struct to get a bitmap's information...</p>\n\n<pre><code>BITMAP bm;\nHBITMAP hBitmap;\nhBitmap = (HBITMAP)LoadImage(...);\nGetObject(phBitmap, sizeof(BITMAP), &amp;bm );\n</code></pre>\n\n<p>How am I supposed to release/free/dispose <code>bm</code>?</p>\n\n<p>Tried with <code>delete</code> and <code>DeleteObject</code>, none worked.</p>\n"}, {"tags": ["python", "c", "numpy", "ctypes"], "comments": [{"owner": {"reputation": 4554, "user_id": 192221, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/38504ff52422b72b239a7b05ef0ccaae?s=128&d=identicon&r=PG", "display_name": "kristianp", "link": "https://stackoverflow.com/users/192221/kristianp"}, "edited": false, "score": 0, "creation_date": 1584840909, "post_id": 54442674, "comment_id": 107562006, "body": "Is this a duplicate of <a href=\"https://stackoverflow.com/questions/13445568/python-ctypes-how-to-free-memory-getting-invalid-pointer-error\" title=\"python ctypes how to free memory getting invalid pointer error\">stackoverflow.com/questions/13445568/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/54442674/freeing-memory-when-using-ctypes\" title=\"freeing memory when using ctypes\">stackoverflow.com/questions/54442674/&hellip;</a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5239259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3fd54675f8b5ecd533c75173bfae8703?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5239259/anna"}, "edited": false, "score": 0, "creation_date": 1548866659, "post_id": 54444252, "comment_id": 95700147, "body": "Thanks for the response @Leo. What is <code>results_p[i] = NULL</code> meant to do? At this point <code>i</code> is not defined. Is this the last element? Then it is setting double to void*."}, {"owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "reply_to_user": {"reputation": 95, "user_id": 5239259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3fd54675f8b5ecd533c75173bfae8703?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5239259/anna"}, "edited": false, "score": 0, "creation_date": 1548923295, "post_id": 54444252, "comment_id": 95720556, "body": "@Anna My bad, it was a mistake. I updated the answer."}, {"owner": {"reputation": 391, "user_id": 7233104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/si3wu.jpg?s=128&g=1", "display_name": "GRquanti", "link": "https://stackoverflow.com/users/7233104/grquanti"}, "edited": false, "score": 0, "creation_date": 1579035522, "post_id": 54444252, "comment_id": 105631666, "body": "I understand the memory is not available anymore, but this would be true also in an ordinary C run, without python wrapping and <code>ctypes</code>. Still, it is better to <code>free</code> memory before closing a C script. Why should it not be the case now?"}, {"owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "reply_to_user": {"reputation": 95, "user_id": 5239259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3fd54675f8b5ecd533c75173bfae8703?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5239259/anna"}, "edited": false, "score": 0, "creation_date": 1579085140, "post_id": 54444252, "comment_id": 105646072, "body": "What you should <code>free</code> is dynamically allocated memory (like in my anwser, using <code>malloc</code>), but you should not try to <code>free</code> memory allocated on the stack, like in code from @Anna &#39;s question."}, {"owner": {"reputation": 391, "user_id": 7233104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/si3wu.jpg?s=128&g=1", "display_name": "GRquanti", "link": "https://stackoverflow.com/users/7233104/grquanti"}, "edited": false, "score": 0, "creation_date": 1579099819, "post_id": 54444252, "comment_id": 105653883, "body": "I see. But this does not solve the problem. I have a code structured like you proposed. The python script calls it 10^5 times and it allocates 10^8 <code>int</code> each time. I have noted the memory occupation grows and grows and the code eventually crashes. I think there must be a way to actually free the memory in a controlled manner."}, {"owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "edited": false, "score": 0, "creation_date": 1579107698, "post_id": 54444252, "comment_id": 105658571, "body": "My example only shows an implementation of the <code>getStuff</code> that will allow you to <code>free</code> the memory afterward, I did not suggest to not <code>free</code> the allocated memory."}, {"owner": {"reputation": 391, "user_id": 7233104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/si3wu.jpg?s=128&g=1", "display_name": "GRquanti", "link": "https://stackoverflow.com/users/7233104/grquanti"}, "edited": false, "score": 0, "creation_date": 1579281249, "post_id": 54444252, "comment_id": 105726179, "body": "It looks like. You did not explain how to: get the array&#39;s content in python and successively free the allocated block of memory."}, {"owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "edited": false, "score": 0, "creation_date": 1579526678, "post_id": 54444252, "comment_id": 105785361, "body": "You have an example of how to do that in the question itself, look at the function <code>free_mem</code>."}, {"owner": {"reputation": 4554, "user_id": 192221, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/38504ff52422b72b239a7b05ef0ccaae?s=128&d=identicon&r=PG", "display_name": "kristianp", "link": "https://stackoverflow.com/users/192221/kristianp"}, "edited": false, "score": 0, "creation_date": 1584840843, "post_id": 54444252, "comment_id": 107561999, "body": "This answer has a solution to freeing memory when using ctypes: <a href=\"https://stackoverflow.com/questions/13445568/python-ctypes-how-to-free-memory-getting-invalid-pointer-error\" title=\"python ctypes how to free memory getting invalid pointer error\">stackoverflow.com/questions/13445568/&hellip;</a>"}], "tags": [], "owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "is_accepted": false, "score": 2, "last_activity_date": 1548923239, "last_edit_date": 1548923239, "creation_date": 1548862764, "answer_id": 54444252, "question_id": 54442674, "link": "https://stackoverflow.com/questions/54442674/freeing-memory-when-using-ctypes/54444252#54444252", "title": "Freeing memory when using ctypes", "body": "<p>After <code>getStuff</code> function exits, the memory allocated to <code>results</code> array is not available any more, so when you try to free it, it crashes the program.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>double* getStuff(double *R_list, int items)\n{\n  double* results_p = malloc(sizeof((*results_p) * (items + 1));\n  if (results_p == NULL)\n  {\n    // handle error\n  }\n\n  for(int i = 0; i &lt; items; i++)\n  { \n    res = calculation ; \\\\do some calculation\n    results_p[i] = res;\n  }\n\n  printf(\"C allocated address %p \\n\", results_p);\n\n  return results_p;\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 5239259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3fd54675f8b5ecd533c75173bfae8703?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5239259/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1549359527, "creation_date": 1548857950, "last_edit_date": 1549359527, "question_id": 54442674, "link": "https://stackoverflow.com/questions/54442674/freeing-memory-when-using-ctypes", "title": "Freeing memory when using ctypes", "body": "<p>I am using ctypes to try and speed up my code.</p>\n\n<p>My problem is similar to the one in this tutorial : <a href=\"https://cvstuff.wordpress.com/2014/11/27/wraping-c-code-with-python-ctypes-memory-and-pointers/\" rel=\"nofollow noreferrer\">https://cvstuff.wordpress.com/2014/11/27/wraping-c-code-with-python-ctypes-memory-and-pointers/</a></p>\n\n<p>As pointed out in the tutorial I should free the memory after using the C function. Here is my C code</p>\n\n<pre><code>//C functions\ndouble* getStuff(double *R_list, int items){\n\n    double results[items];  \n    double* results_p;   \n\n    for(int i = 0; i &lt; items; i++){ \n            res = calculation ; \\\\do some calculation\n            results[i] = res;   }\n\n        results_p = results;\n        printf(\"C allocated address %p \\n\", results_p);\n\nreturn results_p; }\n\nvoid free_mem(double *a){\n    printf(\"freeing address: %p\\n\", a);\n\n    free(a);    }\n</code></pre>\n\n<p>Which I compile with <code>gcc -shared -Wl,-lgsl,-soname, simps -o libsimps.so -fPIC simps.c</code></p>\n\n<p>And python: </p>\n\n<pre><code>//Python\nfrom ctypes import *\nimport numpy as np\n\n\nmydll = CDLL(\"libsimps.so\")\nmydll.getStuff.restype = POINTER(c_double)\nmydll.getStuff.argtypes = [POINTER(c_double),c_int]\nmydll.free_mem.restype = None\nmydll.free_mem.argtypes = [POINTER(c_double)]\n\nR = np.logspace(np.log10(0.011),1, 100, dtype = float) #input\n\n\ntracers = c_int(len(R))\n\nR_c = R.ctypes.data_as(POINTER(c_double))\n\n\nfor_list = mydll.getStuff(R_c,tracers)\nprint 'Python allocated', hex(for_list)\nfor_list_py = np.array(np.fromiter(for_list, dtype=np.float64, count=len(R)))\nmydll.free_mem(for_list)\n</code></pre>\n\n<p>Up to the last line the code does what I want it to and the <code>for_list_py</code> values are correct. However, when I try to free the memory, I get a Segmentation fault <s>and on closer inspection the address associated with <code>for_list</code> --> <code>hex(for_list)</code> is different to the one allocated to <code>results_p</code> within C part of the code. </s></p>\n\n<p><s>As pointed out in this question, <a href=\"https://stackoverflow.com/questions/13445568/python-ctypes-how-to-free-memory-getting-invalid-pointer-error\">Python ctypes: how to free memory? Getting invalid pointer error</a>    , <code>for_list</code> will return the same address if <code>mydll.getStuff.restype</code> is set to <code>c_void_p</code>. But then I struggle to put the actual values I want into <code>for_list_py</code>. This is what I've tried:</s>\n<s>\n    cast(for_list, POINTER(c_double) )\n    for_list_py = np.array(np.fromiter(for_list, dtype=np.float64, count=len(R)))\n    mydll.free_mem(for_list)\n</s>\n<s>where the cast operation seems to change for_list into an integer.</s> I'm fairly new to C and very confused. Do I need to free that chunk of memory? If so, how do I do that whilst also keeping the output in a numpy array?  Thanks!</p>\n\n<p>Edit: It appears that the address allocated in C and the one I'm trying to free are the same, though I still recieve a Segmentation fault. </p>\n\n<pre><code>C allocated address 0x7ffe559a3960\nfreeing address: 0x7ffe559a3960\nSegmentation fault\n</code></pre>\n\n<p>If I do <code>print for_list</code> I get <code>&lt;__main__.LP_c_double object at 0x7fe2fc93ab00&gt;</code></p>\n\n<p><strong>Conclusion</strong></p>\n\n<p>Just to let everyone know, I've struggled with c_types for a bit. </p>\n\n<p>I've ended up opting for SWIG instead of c_types. I've found that the code runs faster on the whole (compared to the version presented here). I found this documentation on dealing with memory deallocation in SWIG very useful <a href=\"https://scipy-cookbook.readthedocs.io/items/SWIG_Memory_Deallocation.html\" rel=\"nofollow noreferrer\">https://scipy-cookbook.readthedocs.io/items/SWIG_Memory_Deallocation.html</a>  as well as the fact that SWIG gives you a very easy way of dealing with numpy n-dimensional arrays.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1548857088, "post_id": 54442333, "comment_id": 95693838, "body": "Did you check that <code>k == n</code> at the end?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1548857115, "post_id": 54442333, "comment_id": 95693865, "body": "I dont get the <code>if (a[i] == 0)</code> check....why is it there?"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 2, "creation_date": 1548857180, "post_id": 54442333, "comment_id": 95693921, "body": "what happens if you add a <code>printf(&quot;\\n&quot;);</code> just before the <code>return 0;</code> ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1548857251, "post_id": 54442333, "comment_id": 95693969, "body": "BTW, <code>j</code> is never used,"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1548857264, "post_id": 54442333, "comment_id": 95693973, "body": "cannot reproduce: <a href=\"https://ideone.com/qdELsO\" rel=\"nofollow noreferrer\">ideone.com/qdELsO</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1548857285, "post_id": 54442333, "comment_id": 95693983, "body": "@SanderDeDycker That&#39;s a good point. kasa - why dont you try that?"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1548857536, "post_id": 54442333, "comment_id": 95694137, "body": "Why do you increment the position and then continue when <code>a[i]</code> is 0 ? I ran your code and it&#39;s give me the correct result."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1548857648, "post_id": 54442333, "comment_id": 95694209, "body": "Are you sure the <code>08</code> at the end isn&#39;t printed by something else? Please show a complete program that can be compiled and shows this result."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1548857739, "post_id": 54442333, "comment_id": 95694263, "body": "I just added a <code>puts(&quot;&quot;)</code> before <code>return 0</code>;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548857795, "post_id": 54442333, "comment_id": 95694297, "body": "All output streams to open files are flushed on normal program termination. The need for a newline is when debugging to ensure the buffer was flushed if the program subsequently crashes."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1548860638, "post_id": 54442333, "comment_id": 95696240, "body": "@WeatherVane : 1) the OP hasn&#39;t indicated whether the <code>return 0;</code> ends the program, so there might be more output after it. 2) a flush without a newline does not guarantee the (full) line will be written out to a text stream (that&#39;s implementation defined). 3) the newline also serves as a separator between the output of this code, and whatever output follows it (eg. a command prompt)."}, {"owner": {"reputation": 9, "user_id": 10990593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sJrfubkJ4BI/AAAAAAAAAAI/AAAAAAAAAk8/ySDo7JCFeUc/photo.jpg?sz=128", "display_name": "kasa ssg", "link": "https://stackoverflow.com/users/10990593/kasa-ssg"}, "edited": false, "score": 1, "creation_date": 1548861883, "post_id": 54442333, "comment_id": 95697112, "body": "I added the 0 check as a precaution, I deleted it now. I&#39;m also a noob :) Anyways, I&#39;m required to work in Codeblocks for this and all i did was copy the code, and paste it in new file. I don&#39;t know why, but the code works great now. Thank you all for the help!"}], "answers": [{"tags": [], "owner": {"reputation": 535, "user_id": 7927200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a94c975d5ce0fe1b5f06edf3dc043a?s=128&d=identicon&r=PG&f=1", "display_name": "Niloy Rashid", "link": "https://stackoverflow.com/users/7927200/niloy-rashid"}, "is_accepted": false, "score": 1, "last_activity_date": 1548859647, "creation_date": 1548859647, "answer_id": 54443248, "question_id": 54442333, "link": "https://stackoverflow.com/questions/54442333/can-someone-help-me-why-my-program-is-printing-a-random-number/54443248#54443248", "title": "Can someone help me why my program is printing a random number?", "body": "<p>Checked your code several time its written well and worked well too. The extra <strong>08</strong> after <strong>5</strong> may be printed by something else. You can use a newline after printing all the element of <strong>ara2</strong> to make sure the <strong>08</strong> is printed form any element of <strong>ara2</strong> or not. like this:</p>\n\n<pre><code>for (i = 0; i &lt; n; i++)\n    printf (\"%d \", a2[i]);\nprintf(\"\\n\");\n</code></pre>\n\n<p>And one more thing. There are no need to add the bellow portion in your code. The code will work same even if you don't add this.</p>\n\n<pre><code>    if (a[i] == 0)\n        {\n            a2[k] = a[i];\n            k++;\n            continue;\n        }\n</code></pre>\n\n<p>Happy Coding.</p>\n"}], "owner": {"reputation": 9, "user_id": 10990593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sJrfubkJ4BI/AAAAAAAAAAI/AAAAAAAAAk8/ySDo7JCFeUc/photo.jpg?sz=128", "display_name": "kasa ssg", "link": "https://stackoverflow.com/users/10990593/kasa-ssg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1548859647, "creation_date": 1548856816, "question_id": 54442333, "link": "https://stackoverflow.com/questions/54442333/can-someone-help-me-why-my-program-is-printing-a-random-number", "title": "Can someone help me why my program is printing a random number?", "body": "<p>I am learning to code in C and I need to create a program which sorts out numbers in an array by even numbers first and then the uneven. The numbers don't have to be sorted smallest to largest. The first entered numbers is supposed to be the size of the array. I managed to figure it out but one number is always missing and presented with a random number. Am i missing something ? </p>\n\n<pre><code>int a[101], a2[101], i, j, n, k = 0;\nscanf (\"%d\", &amp;n);\n\nfor (i = 0; i &lt; n; i++)\nscanf (\"%d\", &amp;a[i]);\n\nfor (i = 0; i &lt; n; i++)\n{\n    if (a[i]%2 == 0)\n        {\n        if (a[i] == 0)\n            {\n                a2[k] = a[i];\n                k++;\n                continue;\n            }\n        a2[k] = a[i];\n        k++;\n        }\n}\n\n\nfor (i = 0; i &lt; n; i++)\n{\n    if (a[i]%2 != 0)\n    {\n        a2[k] = a[i];\n        k++;\n    }\n}\n\n\nfor (i = 0; i &lt; n; i++)\n    printf (\"%d \", a2[i]);\n\n\nreturn 0;\n</code></pre>\n\n<p>I enter the following numbers:</p>\n\n<p>6</p>\n\n<p>1 3 2 5 8 10</p>\n\n<p>I should get:\n2 8 10 1 3 5</p>\n\n<p>What I'm getting:\n2 8 10 1 3 508</p>\n\n<p>I tried with other combinations too, problem persists but with different number.</p>\n"}, {"tags": ["c++", "c", "cmake"], "owner": {"reputation": 14229, "user_id": 574115, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CtK6N.png?s=128&g=1", "display_name": "Daan Timmer", "link": "https://stackoverflow.com/users/574115/daan-timmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1548856619, "answer_count": 0, "score": 1, "last_activity_date": 1548856059, "creation_date": 1548856059, "question_id": 54442045, "link": "https://stackoverflow.com/questions/54442045/set-c-compiler-and-c-compiler-flags-for-single-target-without-abusing-cmake-cx", "closed_reason": "Duplicate", "title": "set c-compiler and c++-compiler flags for single target without abusing CMAKE_CXX_FLAGS and CMAKE_C_FLAGS", "body": "<p>I've got an (embedded mixed C/C++) project.\nI need to set, the most important one, <code>-fno-rtti</code>. I can't use </p>\n\n<pre><code>target_compile_options(\n    my_target\n\n    PRIVATE\n       -fno-rtti\n)\n</code></pre>\n\n<p>Because this sets -fno-rtti for CXX and C objects. However, watching <a href=\"https://www.youtube.com/watch?v=rLopVhns4Zs\" rel=\"nofollow noreferrer\">Daniel Pfeifer - \"Effective CMake\"</a> he 'recommends' to not use <code>SET(CMAKE_C_FLAGS  \"${CMAKE_C_FLAGS} ${CUSTOM_C_FLAGS}\")</code> and <code>SET(CMAKE_CXX_FLAGS  \"${CMAKE_CXX_FLAGS} ${CUSTOM_CXX_FLAGS}\")</code></p>\n\n<p>But how can I achieve different compiler flags for c++ and c? I can't just use <code>-fno-rtti</code> for C, because it emits warnings, warnings that I can't ignore because of <code>-Werror</code> policy.</p>\n\n<p>I've tried moving the C files to a library or the C++ files to a library but that generates a different (non working) binary.</p>\n"}, {"tags": ["c", "stm32", "processor", "bare-metal"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1548857412, "post_id": 54441900, "comment_id": 95694051, "body": "Check if adc does not two clock domains"}, {"owner": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "edited": false, "score": 0, "creation_date": 1548857485, "post_id": 54441900, "comment_id": 95694101, "body": "Which register is 0x00? Why does the debugger assigns that value? Sry, I don&#39;t understand your question."}, {"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 0, "creation_date": 1548894056, "post_id": 54441900, "comment_id": 95711507, "body": "ADC1-&gt;CR |= ADC_CR_ADCAL; //End of the calibration : according to the docs I read, this STARTS a calibration, in your while(1), but not even in a valid way as you just set ADC_CR_ADEN: &quot;You must make sure that the ADC is not yet enabled, and if it is disable it. You can then set the ADCAL bit which will start the calibration. Then wait for the calibration to finish before clearing it by writing a 1 to EOCAL in the ISR register.&quot;"}, {"owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "edited": false, "score": 0, "creation_date": 1548894612, "post_id": 54441900, "comment_id": 95711664, "body": "Most of the other codes available do use ADC_CR_ADSTART to start the conversion... (or ADC1-&gt;CR |= (1UL &lt;&lt; 2);)"}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 5713188, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/766465823482715/picture?type=large", "display_name": "Oskar Garczy\u0144ski", "link": "https://stackoverflow.com/users/5713188/oskar-garczy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1548861577, "post_id": 54442659, "comment_id": 95696910, "body": "thanks you for pointing it out, you are completely right about this. Made me feel ashamed rn x) ~changed the first post. I was changing from |= to ~, still does not solve the problem after all."}], "tags": [], "owner": {"reputation": 1404, "user_id": 10496710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5cb3d11da053d8e1e94ef99a27ca6af?s=128&d=identicon&r=PG&f=1", "display_name": "B. Go", "link": "https://stackoverflow.com/users/10496710/b-go"}, "is_accepted": true, "score": 3, "last_activity_date": 1548857887, "creation_date": 1548857887, "answer_id": 54442659, "question_id": 54441900, "link": "https://stackoverflow.com/questions/54441900/stm32l052-analog-to-digital-converter-on-registers/54442659#54442659", "title": "STM32L052 Analog-to-digital converter on registers", "body": "<p>Two times you used lines like<br></p>\n\n<pre><code>ADC1-&gt;ISR &amp;= ~ADC_ISR_EOCAL | ~ADC_ISR_AWD; \n</code></pre>\n\n<p>which looks really strange to me, as if the defines are 1 bit wide, which they most likely are, their bitwise OR is 0xFFFFFFFF (all F, no 0) and you're not changing the ISR and the CR (later in the code) at all! You need to use a bitwise AND, no?<br></p>\n\n<pre><code>ADC1-&gt;ISR &amp;= ~ADC_ISR_EOCAL &amp; ~ADC_ISR_AWD; \n...\nADC1-&gt;CR &amp;= ~ADC_CR_ADSTART &amp; ~ADC_CR_ADEN;\n</code></pre>\n\n<p>Else some working code is available at <a href=\"https://electronics.stackexchange.com/questions/287073/get-internal-temperature-or-voltage-stm32l0/287162\">https://electronics.stackexchange.com/questions/287073/get-internal-temperature-or-voltage-stm32l0/287162</a><br>\n<a href=\"https://github.com/ChristopherJD/STM32L053R8/blob/master/Intern_Project/ADC.c\" rel=\"nofollow noreferrer\">https://github.com/ChristopherJD/STM32L053R8/blob/master/Intern_Project/ADC.c</a><br>\nand <a href=\"https://www.digikey.com/eewiki/pages/viewpage.action?pageId=47644832\" rel=\"nofollow noreferrer\">https://www.digikey.com/eewiki/pages/viewpage.action?pageId=47644832</a></p>\n"}], "owner": {"reputation": 118, "user_id": 5713188, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/766465823482715/picture?type=large", "display_name": "Oskar Garczy\u0144ski", "link": "https://stackoverflow.com/users/5713188/oskar-garczy%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 1, "accepted_answer_id": 54442659, "answer_count": 1, "score": 1, "last_activity_date": 1549067117, "creation_date": 1548855558, "last_edit_date": 1549067117, "question_id": 54441900, "link": "https://stackoverflow.com/questions/54441900/stm32l052-analog-to-digital-converter-on-registers", "title": "STM32L052 Analog-to-digital converter on registers", "body": "<p>I went through the entire configuration of the Analog-to-digital converter [ADC]. When I worked on the registers, I made a mistake somewhere. Below are the configurations. The debugger via ST-Link after connecting 3.3 [V] to pins used in the project, during the measurement assigns them a value of 0x00 which indicates a failure. What am I doing wrong?</p>\n\n<pre><code>int main(void)\n{\n    RCC-&gt;APB2ENR |=  RCC_APB2ENR_ADC1EN; \n    //ADC attach\n\n    RCC-&gt;IOPENR = RCC_IOPENR_GPIOAEN | RCC_IOPENR_GPIOBEN;      \n\n    GPIOB-&gt;MODER = GPIO_MODER_MODE14_1 | GPIO_MODER_MODE15_1;\n    //ADC_IN8 &amp; ADC_IN9\n\n    /* configure ADC */\n    ADC1-&gt;ISR &amp;= ~ADC_ISR_EOCAL &amp; ~ADC_ISR_AWD;  \n    //calibration flag, WATCHDOG flag\n\n    ADC1-&gt;ISR |= ADC_ISR_ADRDY;\n    ADC1-&gt;CR &amp;= ~ADC_CR_ADSTART;  \n    //The software is allowed to write smp bit only when ADSTART=0\n\n    ADC1-&gt;SMPR |= ADC_SMPR_SMP_0 | ADC_SMPR_SMP_1 | ADC_SMPR_SMP_2;  \n    //111: 160.5 ADC clock cycles\n\n    ADC1-&gt;CFGR1 &amp;= ~ADC_CFGR1_SCANDIR;  \n    //Scan Direction 0: Upward scan (from CHSEL0 to CHSEL18)\n\n    ADC1-&gt;CFGR1 |= ADC_CFGR1_AWDCH_3 | ADC_CFGR1_AWDEN | ADC_CFGR1_WAIT | ADC_CFGR1_CONT | ADC_CFGR1_AUTOFF; \n    //AWDCH[4:0]: Analog watchdog channel selection, Continuous Mode\n\n    ADC-&gt;CCR |= ADC_CCR_LFMEN | ADC_CCR_VREFEN; \n    //Low Frequency Mode,  V REFINT enable\n\n    ADC1-&gt;CHSELR |= ADC_CHSELR_CHSEL8 | ADC_CHSELR_CHSEL9 | ADC_CHSELR_CHSEL17; \n    //Channel Select 8 &amp; 9  \n\n    ADC1-&gt;IER |= ADC_IER_EOCIE | ADC_IER_EOSEQIE | ADC_IER_OVRIE | ADC_IER_EOSMPIE; \n\n    NVIC_EnableIRQ(ADC1_COMP_IRQn); \n    NVIC_SetPriority(ADC1_COMP_IRQn,3);\n\nwhile(1)\n    {\n        ADC1-&gt;CR |= ADC_CR_ADEN;// | ADC_CR_ADSTART; \n        //Start the ADC conversion\n\n        while ((ADC1-&gt;ISR &amp; ADC_ISR_ADRDY)); \n        //Wait for stand up\n\n        while ((ADC1-&gt;ISR &amp; ADC_ISR_EOC)); \n        //wait for conversion flag\n\n        ADC1-&gt;CR |= ADC_CR_ADCAL; \n        //End of the calibration\n\n        delay(100); \n\n        uint16_t napiecie = ADC1-&gt;DR;\n        uint8_t hi = ((napiecie &gt;&gt; 8) &amp; 0xff);\n        uint8_t lo = ((napiecie &gt;&gt; 0) &amp; 0xff);\n\n        //DISABLE ADC\n        if ((ADC1-&gt;CR &amp; ADC_CR_ADSTART) != 0){\n            ADC1-&gt;CR |= ADC_CR_ADSTP;\n            while ((ADC1-&gt;CR &amp; ADC_CR_ADSTP) != 0);\n        }\n        ADC1-&gt;CR |= ADC_CR_ADDIS; //ADC disable command\n        while ((ADC1-&gt;CR &amp; ADC_CR_ADEN) != 0);\n        ADC1-&gt;CR &amp;= ~ADC_CR_ADSTART &amp; ~ADC_CR_ADEN;\n        //ADC1-&gt;CR &amp;= ~ADC_ISR_ADRDY; //Clear the ADRDY bit in ADC_ISR register by programming this bit to 1 (optional).\n    }\n\nvoid ADC1_COMP_IRQHandler(void)\n/* Interupt ADC */\n{\n    if(ADC1-&gt;ISR &amp; ADC_ISR_EOC){\n        uint16_t napiecie = ADC1-&gt;DR;\n        uint8_t hi = ((napiecie &gt;&gt; 8) &amp; 0xff);\n        uint8_t lo = ((napiecie &gt;&gt; 0) &amp; 0xff);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "performance", "bit-manipulation"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1548855661, "post_id": 54441860, "comment_id": 95692936, "body": "Your mask should really be <code>0b00111111</code> as you don&#39;t want the &quot;sign bit&quot; to be set unless the original values sign bit was set. And note that you&#39;re not really converting anything, you&#39;re just truncating basically."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1548855874, "post_id": 54441860, "comment_id": 95693065, "body": "Before &quot;best and fastest&quot; you need to address <i>correct</i>.  For that, however, you need to explain what is supposed to be done with input values that are outside the range that &quot;int7&quot; can represent."}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548856251, "post_id": 54441860, "comment_id": 95693285, "body": "@JohnBollinger oh i removed the comment that i suppose the user who calls this function he knows he should put data -64 to +63. so no need to go to that safety.."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1548856293, "post_id": 54441860, "comment_id": 95693315, "body": "wat? So just mask with <code>&amp; ~0x80</code> (i.e. <code>&amp; 0x7f</code>) and be done with it=?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548856432, "post_id": 54441860, "comment_id": 95693395, "body": "Alright, @Hasanalattar, does that mean that if the input value is out of range then <i>you don&#39;t care</i> what the output is?"}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1548856737, "post_id": 54441860, "comment_id": 95693613, "body": "@AnttiHaapala i think -63 would be 0b100011 in 7bit signed integer.. and 0b1000110 in 8-bit signed integer."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1548856797, "post_id": 54441860, "comment_id": 95693654, "body": "@Hasanalattar well, then I suggest that you go read about 2&#39;s complement representation in wikipedia."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548856909, "post_id": 54441860, "comment_id": 95693712, "body": "I don&#39;t really get what your <code>int7_t</code> is. Is it a 7-bit two&#39;s complement signed type? You&#39;re returning a <code>uint8_t</code> so what happens with the high bit? In 2&#39;s complement all values between -64 and 63 will have the same bit representation in any types that are 7-or-more-bit wide. You sign-extend to a wider type by simply adding the sign bit to the left"}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1548857193, "post_id": 54441860, "comment_id": 95693929, "body": "@AnttiHaapala i didnt know that, i meant binary representation... the one i wrote."}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548857284, "post_id": 54441860, "comment_id": 95693981, "body": "@phuclv the higher bit is reserved for something else. so this function takes a number and shift it to int7_t in a (byte value) .. (common to have byte in uint8_t) .."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1548857604, "post_id": 54441860, "comment_id": 95694173, "body": "&quot;reserved&quot; doesn&#39;t mean anything. The important thing is that you want to clear that bit or leave it as-is. Normally that often mean don&#39;t touch it, in which case you simply have nothing to do, just return the whole int8_t value"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1548857607, "post_id": 54441860, "comment_id": 95694175, "body": "@Hasanalattar oops should be <code>0b100001</code>, and <code>0b11000001</code>"}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548857823, "post_id": 54441860, "comment_id": 95694320, "body": "@phuclv no, if someone called this function: func_int7_t(-63) it should return [0bX1100001]. my question is not involving the 8th-bit. i will deal with it in the bottom of the function before returning the value."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1548860852, "post_id": 54441860, "comment_id": 95696400, "body": "<i>&#39;so it will be done by doing nothing because&#39;</i> - still you accepted an answer that actually does something... There are two of really recommending doing nothing at all (accept phuclv&#39;s, he was to answer first...)."}], "answers": [{"comments": [{"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 3, "creation_date": 1548856065, "post_id": 54442018, "comment_id": 95693172, "body": "That has to be <code>((val &gt;&gt; 1) &amp; 0x40</code>, surely?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1548856173, "post_id": 54442018, "comment_id": 95693239, "body": "That&#39;s exactly what I wanted to post, too... Interesting alternative <code>0xc0</code>, it would retain (duplicate) the sign bit in MSB (arithmetic right shift provided, but should be on ARM)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1548856268, "post_id": 54442018, "comment_id": 95693297, "body": "Or <code>((val  &amp; 0x80) &gt;&gt; 1)</code>.  And that avoids the implementation-defined behavior associated with right-shifting a negative number."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1548856425, "post_id": 54442018, "comment_id": 95693390, "body": "@JohnBollinger I first right shift <i>then</i> do the &#39;&amp;&#39; to be independent of the fact it is a signed shift or not, <code>((val &amp; 0x80) &gt;&gt; 1)</code> doesn&#39;t have the same result if signed shift or not on 8 bit arithmetic (but ofc all is done on <i>int</i>)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548856675, "post_id": 54442018, "comment_id": 95693574, "body": "@JohnBollinger Either variant is independent of shift type - only mine (<code>&amp; 0xc0</code>) is not..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1548856769, "post_id": 54442018, "comment_id": 95693635, "body": "@bruno Be aware of val being promoted to int before applying <code>&amp;</code> operator, masking out possible sign bit afterwards, so you right-shift a non-negative int then..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548856934, "post_id": 54442018, "comment_id": 95693724, "body": "How does that follow, @bruno?  If you shift a negative number then you get implementation-defined behavior, period.  In principle, that could be anything (though it must be documented and consistent).  In practice, of course, there are only two likely possibilities, but if you mask first then you avoid that issue completely.  Even though yours very likely works, it is not <i>strictly</i> conforming."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548857026, "post_id": 54442018, "comment_id": 95693789, "body": "@JohnBollinger Implementation defined or not does not matter if you mask out all other bits than the single relevant one - which <i>will</i> be shifted, no matter if arithmetic or logical shift."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1548857161, "post_id": 54442018, "comment_id": 95693900, "body": "Of course it matters, @Aconcagua.  Although it&#39;s surely not the case for the actual target compiler and environment, an implementation&#39;s definition of the behavior of a right shift of a negative number could be something you don&#39;t expect, such as always producing -1."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548857266, "post_id": 54442018, "comment_id": 95693975, "body": "@JohnBollinger <code>0b11xx</code> (result of ASR) and <code>0b01xx</code> (result of LSR) will both yield the same result after applying ` &amp; 0x0100` - the differing bit (bit 3 in example) is masked away anyway..."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548857325, "post_id": 54442018, "comment_id": 95694005, "body": "@JohnBollinger doing that I let the compiler to be able to use an instruction doing the shift on 8 bits whatever it is signed or not, just that, useless to search for more :-)"}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 2, "creation_date": 1548858630, "post_id": 54442018, "comment_id": 95694843, "body": "This is the slowest method of all! So why has it garnered all the upvotes?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1548860504, "post_id": 54442018, "comment_id": 95696154, "body": "@TonyK the initial question was to rewrite the given code in an other way with the same behavior, so I did, and <i>after</i> the question was edited"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 6, "last_activity_date": 1548856333, "last_edit_date": 1548856333, "creation_date": 1548855967, "answer_id": 54442018, "question_id": 54441860, "link": "https://stackoverflow.com/questions/54441860/fastest-way-to-convert-int8-to-int7/54442018#54442018", "title": "fastest way to convert int8 to int7", "body": "<p>the faster way is probably :</p>\n\n<pre><code>uint8_t val_7 = (val &amp; 0x3f) | ((val &gt;&gt; 1) &amp; 0x40);\n</code></pre>\n\n<p><code>val &amp; 0x3f</code> get the 6 lower bits (truncate) and <code>((val &gt;&gt; 1) &amp; 0x40)</code> move the bit to sign from the position 8 to 7</p>\n\n<p>The advantage to not use a <em>if</em> is to have a shorter code (even you can use arithmetic <em>if</em>) and to have a code without sequence break</p>\n"}, {"comments": [{"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 1, "creation_date": 1548856966, "post_id": 54442120, "comment_id": 95693742, "body": "So, -127 (0b10000001) will become 1. Wrong."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1548857109, "post_id": 54442120, "comment_id": 95693858, "body": "if the initial value is 0x82 (negative) 0x82 &amp; 0x7f is 0x2 so a positive value, this is not ok"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1548857136, "post_id": 54442120, "comment_id": 95693882, "body": "@bruno: Seconded. Your answer seems to be the most succinct way."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 1, "creation_date": 1548857468, "post_id": 54442120, "comment_id": 95694087, "body": "@AndrejsCainikovs, -127 is not a supported argument value.  Arguments must be between -64 and 63, per the function specification."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1548857544, "post_id": 54442120, "comment_id": 95694142, "body": "@bruno, 0x82 also is not a supported argument value."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548857844, "post_id": 54442120, "comment_id": 95694331, "body": "@JohnBollinger <i>val</i> is <code>int8_t</code> so it can value 0x82, what do you mean ?"}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548857852, "post_id": 54442120, "comment_id": 95694336, "body": "@JohnBollinger Missed OP statement <i>user who calls this function will use it correctly (-64 to +63)</i>. In this case yes, that&#39;s the most elegant way."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1548857936, "post_id": 54442120, "comment_id": 95694386, "body": "ife we continue the number of remarks and answers will not be able to be counted on int7 bits ^^"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1548857994, "post_id": 54442120, "comment_id": 95694425, "body": "@bruno, the function specifications require the caller to pass a value in the range -64 ... +63.  This was originally unclear in the question, but it has been updated.  The behavior when the argument is outside that range is unspecified, and therefore cannot be wrong, no matter what it is."}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548858243, "post_id": 54442120, "comment_id": 95694593, "body": "@JohnBollinger call the function with (-63) should return [0bX1100001] which is -63 in range of 7-bits signed variable. your soloution masks the sign bit and we lose it."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "edited": false, "score": 1, "creation_date": 1548858366, "post_id": 54442120, "comment_id": 95694668, "body": "@Hasanalattar: <code>-63</code> is <code>1111111</code>, not <code>1100001</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "edited": false, "score": 0, "creation_date": 1548858474, "post_id": 54442120, "comment_id": 95694741, "body": "^^. Moreover, @Hasanalattar, the sign bit of a 7-bit two&#39;s complement number is bit 6 (zero based), not bit 7.  The whole point of the exercise is to return a result with bit 7 clear, is it not?"}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548859214, "post_id": 54442120, "comment_id": 95695246, "body": "@JohnBollinger, no and actually i started to feel that this is going to be complicated. calling function with value (-63) which is [0b\u202d11000001\u202c] should return [0bX1111111] - again X means i dont care."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1548859793, "post_id": 54442120, "comment_id": 95695642, "body": "@TonyK 1111111 is 63, -63 is 1000001. \\@Hasan alattar no one cares about your code. People read the description which is unclear. There&#39;s no defined mapping in the question"}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548861049, "post_id": 54442120, "comment_id": 95696524, "body": "@phuclv: You are right that I was wrong. But you were wrong too! 1111111 is -1 in 7-bit 2&#39;s complement, not 63."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548861107, "post_id": 54442120, "comment_id": 95696558, "body": "@TonyK yeah I was thinking about the int8_t value. Indeed it&#39;s wrong in 7 bit"}], "tags": [], "owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "is_accepted": true, "score": 2, "last_activity_date": 1548858297, "last_edit_date": 1548858297, "creation_date": 1548856220, "answer_id": 54442120, "question_id": 54441860, "link": "https://stackoverflow.com/questions/54441860/fastest-way-to-convert-int8-to-int7/54442120#54442120", "title": "fastest way to convert int8 to int7", "body": "<p>If you are not concerned about what happens to out-of-range values, then</p>\n\n<pre><code>return val &amp; 0x7f;\n</code></pre>\n\n<p>is enough. This correctly handles values in the range <code>-64 &lt;= val &lt;= 63</code>.\nYou haven't said how you want to handle out-of-range values, so I have nothing to say about that.</p>\n\n<p><strong>Updated to add:</strong> The question has been updated so stipulate that the function will never be called with out-of-range values. So this method qualifies unambiguously as \"best and fastest\".</p>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1548859052, "post_id": 54442683, "comment_id": 95695142, "body": "Interesting... From standard&#39;s point of view, the compiler can chose, though, if it wants to fill the bit field from left to right or from right to left (solely the order of the members must remain the same), so at least in theory, this is not fully portable. Specified toolchain, though, starts filling at MSB, so we&#39;re fine... (Actually, I don&#39;t know any other either that does not do so - maybe on some BE platform?)"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1548859465, "post_id": 54442683, "comment_id": 95695405, "body": "I use only s.x in code, all compilers I tried (gcc, clang, msvc) optimize usage of that s entirely out."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1548859508, "post_id": 54442683, "comment_id": 95695431, "body": "@Aconcagua, it doesn&#39;t matter how the compiler <i>represents</i> the bitfield&#39;s value.  No operations used in this approach depend on that for producing the wanted result.  I don&#39;t agree that this is <i>best</i>, but it will work fine."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548859748, "post_id": 54442683, "comment_id": 95695599, "body": "@JohnBollinger The output <i>is</i> correct in any case - a compiler chosing to fill the bitfield starting at MSB might need (up to) two additional shifts, though, and the solution might not be the fastest any more... Possibly of theoretical interest only, as mentioned already, I don&#39;t know any such compiler either..."}], "tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": false, "score": 3, "last_activity_date": 1548860300, "last_edit_date": 1548860300, "creation_date": 1548857975, "answer_id": 54442683, "question_id": 54441860, "link": "https://stackoverflow.com/questions/54441860/fastest-way-to-convert-int8-to-int7/54442683#54442683", "title": "fastest way to convert int8 to int7", "body": "<p>Use bitfield to narrow the value and let compiler to choose what sequence of shifts and/or masks is most efficient for that on your platform.</p>\n\n<pre><code>inline uint8_t to7bit(int8_t x) \n{ \n    struct {uint8_t x:7;} s; \n    return s.x = x; \n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 1, "creation_date": 1548858482, "post_id": 54442792, "comment_id": 95694750, "body": "You mean <code>[-64,63]</code>. Or <code>[-64,64)</code>."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1548858614, "post_id": 54442792, "comment_id": 95694828, "body": "@TonyK yes, fixed the typo"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548858639, "post_id": 54442792, "comment_id": 95694849, "body": "And clearing the reserved bit has exactly the right semantics for inputs in the allowed range. We can see that by looking at the reverse transformation: if we have a 7-bit two&#39;s complement representation of a negative number, then sign-extension to 8 bits means adding a leading 1 bit.  That&#39;s value-preserving.  Thus, going back the other way just requires ignoring or removing the extra bit."}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "edited": false, "score": 0, "creation_date": 1548858909, "post_id": 54442792, "comment_id": 95695048, "body": "func_int7_t(-63) it should return [0bX1100001]. my question is not involving the 8th-bit. [X] = doesnt matter if its 0 or 1! and that comment from me is wrong because it should return [0bX1111110] which is (-63) in (7-bit binary representation)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1548859391, "post_id": 54442792, "comment_id": 95695363, "body": "it it doesn&#39;t matter then why bothering asking this? Just return the value like above. And -63 is <b>not</b> 1111110. Did you see that the last bit is zero which indicates an even number? Try opening calculator and you&#39;ll see -63 = 1000001 immediately"}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "edited": false, "score": 0, "creation_date": 1548860245, "post_id": 54442792, "comment_id": 95695976, "body": "you are right. although i put the first answer i saw as correct answer. thanks."}], "tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 4, "last_activity_date": 1548858604, "last_edit_date": 1548858604, "creation_date": 1548858324, "answer_id": 54442792, "question_id": 54441860, "link": "https://stackoverflow.com/questions/54441860/fastest-way-to-convert-int8-to-int7/54442792#54442792", "title": "fastest way to convert int8 to int7", "body": "<p>To clear the reserved bit, just</p>\n\n<pre><code>return val &amp; 0x7f;\n</code></pre>\n\n<p>To leave the reserved bit exactly like how it was from input, nothing needs to be done</p>\n\n<pre><code>return val;\n</code></pre>\n\n<p>and the low 7 bits will contain the values in [-64, 63]. Because in two's complement down casting is done by a simple truncation. The value remains the same. That's what happens for an assignment like <code>(int8_t)some_int_value</code></p>\n\n<p><strong>There's no such thing as <code>0bX1100001</code></strong>. There's no undefined bit in machine language. That state only exists in hardware, like the high-Z state or undefined state in Verilog or other hardware description languages</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548859131, "post_id": 54442812, "comment_id": 95695188, "body": "I agree that the low-order 7 bits of a valid input are already correct, and that therefore nothing needs to be done to them.  This is in fact the point of the two answers that suggest just masking off the other.  Perhaps, then, doing nothing is indeed best, but that&#39;s not consistent with the example code, which forces the other bit clear."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548859284, "post_id": 54442812, "comment_id": 95695293, "body": "@JohnBollinger Question now is: Is clearing the bit really a requirement or was that a misunderstanding when the question was asked..."}, {"owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "edited": false, "score": 0, "creation_date": 1548859365, "post_id": 54442812, "comment_id": 95695353, "body": "my soloution in the question is wrong which lead to wrong answers.  no and actually i started to feel that this is going to be complicated. calling function with value (-63) which is [0b\u202d11000001\u202c] should return [0bX1111111] - X means i dont care."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "edited": false, "score": 0, "creation_date": 1548859754, "post_id": 54442812, "comment_id": 95695602, "body": "@Hasanalattar why should it be 1111111? If you use some strange encoding instead of two&#39;s complement then you must include the mapping in the question["}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "edited": false, "score": 2, "creation_date": 1548859761, "post_id": 54442812, "comment_id": 95695612, "body": "@Hasanalattar, in 7-bit two&#39;s complement, <code>0b1111111</code> represents -1, not -63.  -63 would be represented as 0b1000001.  If you mean to convert to a sign/magnitude representation then that&#39;s a whole different kettle of fish."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 1, "last_activity_date": 1548858390, "creation_date": 1548858390, "answer_id": 54442812, "question_id": 54441860, "link": "https://stackoverflow.com/questions/54441860/fastest-way-to-convert-int8-to-int7/54442812#54442812", "title": "fastest way to convert int8 to int7", "body": "<blockquote>\n  <p>the user who calls this function he knows he should put data -64 to +63</p>\n</blockquote>\n\n<p>So not considering any other values, the <em>really</em> fastest thing you can do is <strong>not doing anything at all</strong>!</p>\n\n<p>You have a 7 bit value stored in eight bits. Any value within specified range will have both bit 7 and bit 6 the same value, and when you process the 7-bit value, you just <em>ignore</em> the MSB (of 8-bit value), no matter if set or not, e. g.:</p>\n\n<pre><code>for(unsigned int bit = 0x40; bit; bit &gt;&gt;= 1)\n//                NOT: 0x80!\n    std::cout &lt;&lt; (value &amp; bit);\n</code></pre>\n\n<p>The other way round is more critical: whenever you receive these seven bits via some communication channel, then you need to do manual sign extension for eight (or more) bits to be able to correctly use that value.</p>\n"}], "owner": {"reputation": 335, "user_id": 4410536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3KcpjUeSFF4/AAAAAAAAAAI/AAAAAAAAACQ/8hERVilrhmk/photo.jpg?sz=128", "display_name": "Hasan alattar", "link": "https://stackoverflow.com/users/4410536/hasan-alattar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 54442120, "answer_count": 5, "score": -3, "last_activity_date": 1548899010, "creation_date": 1548855410, "last_edit_date": 1548899010, "question_id": 54441860, "link": "https://stackoverflow.com/questions/54441860/fastest-way-to-convert-int8-to-int7", "title": "fastest way to convert int8 to int7", "body": "<p>I've a function that takes <code>int8_t val</code> and converts it to <code>int7_t</code>.</p>\n\n<pre><code>//Bit [7] reserved\n//Bits [6:0] = signed -64 to +63 offset value\n// user who calls this function will use it correctly (-64 to +63)\nuint8_t func_int7_t(int8_t val){\n    uint8_t val_6 = val &amp; 0b01111111;\n    if (val &amp; 0x80)\n        val_6 |= 0x40;\n    //...\n    //do stuff...\n    return val_6;\n}\n</code></pre>\n\n<p>What is the <strong>best and fastest</strong> way to manipulate the int8 to int7? Did I do it efficient and fast? or there is better way?</p>\n\n<p>The target is ARM Cortex M0+ if that matters</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>After reading different answers I can say the question was asked wrong? (or my code in the question is what gave wrong assumptions to others) I had the intension to make an int8 to int7 </p>\n\n<p>So it will be done by doing nothing because</p>\n\n<p>8bit:</p>\n\n<pre><code> 63 = 0011 1111\n 62 = 0011 1110\n  0 = 0000 0000\n -1 = 1111 1111\n -2 = 1111 1110\n-63 = 1100 0001\n-64 = 1100 0000\n</code></pre>\n\n<p>7bit:</p>\n\n<pre><code> 63 = 011 1111\n 62 = 011 1110\n  0 = 000 0000\n -1 = 111 1111\n -2 = 111 1110\n-63 = 100 0001\n-64 = 100 0000\n</code></pre>\n"}, {"tags": ["c", "memory", "fftw"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1548855489, "post_id": 54441834, "comment_id": 95692831, "body": "<code>char *s = alloca(10);</code> is as safe as writing <code>char s[10];</code>. Indeed, alloca is (almost?) obsolete with the invention of VLA."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548855490, "post_id": 54441834, "comment_id": 95692832, "body": "When you say that you &quot;see such extreme performance hits with certain numbers of threads&quot;, how many threads are you talking about here? How many cores are there in your machine?"}, {"owner": {"reputation": 361, "user_id": 7093236, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dec75afa1654c86cb28288d94e44aefa?s=128&d=identicon&r=PG&f=1", "display_name": "user42390", "link": "https://stackoverflow.com/users/7093236/user42390"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548856078, "post_id": 54441834, "comment_id": 95693184, "body": "@Someprogrammerdude: I have 112 cores, 56 of which are hyperthreads. If I use 1, 2, 16, or 32 threads, my performance is fine. (More threads used, better performance.) However, if I use 4 or 8 threads, the performance is 38x <i>slower</i> than with 32 threads."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548856312, "post_id": 54441834, "comment_id": 95693324, "body": "As for <code>alloca</code>, it&#39;s basically just adjusts the stack pointer to fit the memory you want to allocate on the stack."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1548866800, "post_id": 54441834, "comment_id": 95700222, "body": "One possible thing that can happen: Thread stacks are strongly aligned so that data on the stack is good for use with aligned instructions like SSE or AVX. This strong alignment can cause cache false sharing <a href=\"https://en.wikipedia.org/wiki/False_sharing\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/False_sharing</a> which can destroy thread performance by convincing the cache that different memory locations should be on the same cache line, causing unnecessary cache evictions. Try making each of your threads alloca(sizeof your_data * thread_number) before the real data or allocate more than you need and use a start offset."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1548867309, "post_id": 54441834, "comment_id": 95700523, "body": "False sharing may be the wrong term there. I mean the thing where the cache is confused because multiple memory locations map to the same cache line. Aliasing? It&#39;s a form of false sharing, I know. But I can&#39;t find the term at the moment."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1548867381, "post_id": 54441834, "comment_id": 95700564, "body": "Like this: <a href=\"https://stackoverflow.com/questions/15016359/cache-coloring-on-slab-memory-management-in-linux-kernel\" title=\"cache coloring on slab memory management in linux kernel\">stackoverflow.com/questions/15016359/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1548865923, "creation_date": 1548865923, "answer_id": 54445235, "question_id": 54441834, "link": "https://stackoverflow.com/questions/54441834/how-are-alloca-and-thread-safety-related-if-at-all/54445235#54445235", "title": "How are alloca and thread safety related, if at all?", "body": "<p>Short answer: <a href=\"http://man7.org/linux/man-pages/man3/alloca.3.html\" rel=\"nofollow noreferrer\">It doesn't</a>. <code>alloca()</code> is guaranteed to be MT-safe.</p>\n\n<hr>\n\n<p>Longer answer: <code>alloca()</code> isn't complicated function. By specification, it returns pointer to location that can be automatically freed. Please note that it's not a good practice anymore:</p>\n\n<blockquote>\n  <p>The alloca() function returns a pointer to the beginning of the allocated space. If the allocation causes stack overflow, program behaviour is undefined.</p>\n</blockquote>\n\n<p>As you can see, allocation can cause stackoverflow, so the <strong>space is allocated on the stack</strong> by bumping SP. Threads share heap, but not stack, so there is no way you will run into trouble with multi-threaded use of <code>alloca()</code>.</p>\n\n<p>Safer way would be using VLA rather than <code>alloca()</code>, because both do the same and (as I suspect), VLA is faster <strong>and</strong> lighter.</p>\n"}], "owner": {"reputation": 361, "user_id": 7093236, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dec75afa1654c86cb28288d94e44aefa?s=128&d=identicon&r=PG&f=1", "display_name": "user42390", "link": "https://stackoverflow.com/users/7093236/user42390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548865923, "creation_date": 1548855323, "question_id": 54441834, "link": "https://stackoverflow.com/questions/54441834/how-are-alloca-and-thread-safety-related-if-at-all", "title": "How are alloca and thread safety related, if at all?", "body": "<p>Generic theory question.</p>\n\n<p>I'm trying to build a library from source (FFTW if anyone cares, but it really doesn't matter), and I noticed  there is an option to disable the use of <code>alloca</code>.</p>\n\n<p>I'm aware of the dangers of using <code>alloca</code>, but I'm assessing the performance of FFTW with and without <code>alloca</code>.</p>\n\n<p>Does <code>alloca</code> have known issues with thread safety? I'm seeing an extreme performance hit when I use a certain number of threads with FFTW (which is obviously calling <code>alloca</code> in the background). I'm sticking to using a number of threads equal to powers of 2, if that matters.</p>\n\n<p>Is it possible that FFTW is sharing objects on a thread-local stack via <code>alloca</code>? I'm just trying to figure out why I see such extreme performance hits with certain numbers of threads. However, I don't fully understand the theory behind what <code>alloca</code> is really doing w/ threads.</p>\n"}, {"tags": ["c", "optimization", "bitwise-operators", "bit-shift"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548861945, "post_id": 54441806, "comment_id": 95697159, "body": "division not by a power of 2 can&#39;t be done quickly with bitwise operations. <a href=\"https://stackoverflow.com/q/49949579/995714\">Algorithm for Bitwise operation on Modulus for number of not a power of 2</a>. However <a href=\"https://stackoverflow.com/q/41183935/995714\">division by a constant can be converted to multiplication by a multiplicative inverse</a> and the compiler will take care of that for you. Possible duplicates: <a href=\"https://stackoverflow.com/q/5558492/995714\">Divide by 10 using bit shifts?</a>, <a href=\"https://stackoverflow.com/q/2033210/995714\">fast division/mod by 10^x</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548861951, "post_id": 54441806, "comment_id": 95697163, "body": "and you don&#39;t need a ternary operator like that. Possible duplicates: <a href=\"https://stackoverflow.com/q/319880/995714\">Integer division rounding with negatives</a>, <a href=\"https://stackoverflow.com/q/2422712/995714\">Rounding integer division (instead of truncating)</a>, <a href=\"https://stackoverflow.com/q/17944/995714\">How to round up the result of integer division?</a>, <a href=\"https://stackoverflow.com/q/7446710/995714\">How to round up integer division and have int result</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548861996, "post_id": 54441806, "comment_id": 95697186, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2422712/rounding-integer-division-instead-of-truncating\">Rounding integer division (instead of truncating)</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1548900316, "post_id": 54441806, "comment_id": 95713036, "body": "oops the correct dupes are <a href=\"https://stackoverflow.com/q/3407012/995714\">Rounding up to the nearest multiple</a>, <a href=\"https://stackoverflow.com/q/2403631/995714\">find the next multiple of 10 of any integer</a>, <a href=\"https://stackoverflow.com/q/15154457/995714\">Rounding integers to nearest multiple of 10</a>, <a href=\"https://stackoverflow.com/q/44110606/995714\">Rounding off a number to the next nearest multiple of 5</a>. Again only powers of 2 are special <a href=\"https://stackoverflow.com/q/2022179/995714\">quick calculation of next multiple of 4</a>, <a href=\"https://stackoverflow.com/q/1766535/995714\">Round off to multiple of 8</a>"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1548855352, "creation_date": 1548855352, "answer_id": 54441844, "question_id": 54441806, "link": "https://stackoverflow.com/questions/54441806/write-round-function-using-bitwise-operation/54441844#54441844", "title": "Write round() function using bitwise operation?", "body": "<pre><code>(num + 5) / 10 * 10\n</code></pre>\n\n<p>would be hard to beat: check the assembly (especially the division) and let the compiler optimise to bitwise operations if it judges them to be faster. Your version has a branch which could cause the pipeline to dump on an incorrect branch prediction.</p>\n"}], "owner": {"reputation": 1, "user_id": 7644098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28ddaa8becd4a723d2c17282675e2ffa?s=128&d=identicon&r=PG&f=1", "display_name": "FBDIMM", "link": "https://stackoverflow.com/users/7644098/fbdimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548855352, "creation_date": 1548855252, "question_id": 54441806, "link": "https://stackoverflow.com/questions/54441806/write-round-function-using-bitwise-operation", "title": "Write round() function using bitwise operation?", "body": "<p>Ahoy friends.\nI'm writing some code using the PAWN language (C similar) but i need to optimize the run time.\nSo i wan't to try to use bitwise operations here.\nI got my function to round integers but i need to rewrite it to take a little time less.</p>\n\n<p>Can someone explain how to convert these operations into bitwise operations and why?\nAnd how can they optimize the run time of the program if they do exactly the same?</p>\n\n<p>Thanks for your help!</p>\n\n<pre><code>stock round(num)\n{\n    new rem = num % 10;\n    return rem &gt;= 5 ? (num - rem + 10) : (num - rem);\n}\n</code></pre>\n"}, {"tags": ["c#", "c"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548853487, "post_id": 54441276, "comment_id": 95691571, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work\">How do function pointers in C work?</a>"}, {"owner": {"reputation": 1, "user_id": 10990318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FrH020kWKtw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMfUup2-3c9udDKTB0tt_poWbcidw/mo/photo.jpg?sz=128", "display_name": "youcantcme", "link": "https://stackoverflow.com/users/10990318/youcantcme"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548853833, "post_id": 54441276, "comment_id": 95691770, "body": "Thank you, the bulk of the question was answered there.  Other than the final question I think?"}, {"owner": {"reputation": 124, "user_id": 9451732, "user_type": "registered", "profile_image": "https://graph.facebook.com/2022925618028528/picture?type=large", "display_name": "Rez Trentnor", "link": "https://stackoverflow.com/users/9451732/rez-trentnor"}, "edited": false, "score": 0, "creation_date": 1548853914, "post_id": 54441276, "comment_id": 95691821, "body": "Yes, this is same as C# delegate. Func&lt;&gt; in this case. This comparator function returns int as result and takes two const void * pointers as parameters."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548853955, "post_id": 54441276, "comment_id": 95691854, "body": "For the last question, passing the function is maybe the best option. You could also pass an <code>int</code> or <code>char *</code> and parse it to know the type and then compare them proper."}, {"owner": {"reputation": 1, "user_id": 10990318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FrH020kWKtw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMfUup2-3c9udDKTB0tt_poWbcidw/mo/photo.jpg?sz=128", "display_name": "youcantcme", "link": "https://stackoverflow.com/users/10990318/youcantcme"}, "edited": false, "score": 0, "creation_date": 1548854496, "post_id": 54441276, "comment_id": 95692204, "body": "Thanks guys. very swift help .. really appreciated"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10990318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FrH020kWKtw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMfUup2-3c9udDKTB0tt_poWbcidw/mo/photo.jpg?sz=128", "display_name": "youcantcme", "link": "https://stackoverflow.com/users/10990318/youcantcme"}, "edited": false, "score": 0, "creation_date": 1548854638, "post_id": 54441449, "comment_id": 95692312, "body": "thanks.. as i guessed. appreciate u took the time to break it down."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 10990318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FrH020kWKtw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMfUup2-3c9udDKTB0tt_poWbcidw/mo/photo.jpg?sz=128", "display_name": "youcantcme", "link": "https://stackoverflow.com/users/10990318/youcantcme"}, "edited": false, "score": 0, "creation_date": 1548855287, "post_id": 54441449, "comment_id": 95692714, "body": "@youcantcme Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1548853945, "creation_date": 1548853945, "answer_id": 54441449, "question_id": 54441276, "link": "https://stackoverflow.com/questions/54441276/understanding-how-cmp-comparator-functions-is-used-as-arguments-to-another-fun/54441449#54441449", "title": "understanding how cmp (comparator functions) is used as arguments to another function", "body": "<p>The <code>cmp</code> parameter to <code>buildHeap</code> is a <strong>function pointer</strong> which points to a function with two <code>const void *</code> parameters that returns an int.  <code>buildHeap</code> can use this function pointer to call the function in question to compare two items.</p>\n\n<p>For example, if you wanted to compare two integers, you would implement a function like this:</p>\n\n<pre><code>int compare_int(const void *p1, const void *p2)\n{\n    const int *a = p1;\n    const int *b = p2;\n\n    if (*a &gt; *b) {\n        return -1;\n    } else if (*a &lt; *b) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>Then you would pass <code>compare_int</code> as the second parameter to <code>buildHeap</code>, i.e. <code>buildHeap(arr, compare_int, n)</code>.  Then somewhere in <code>buildHeap</code> it can call this function as appropriate:</p>\n\n<pre><code>void buildHeap (void **ar, int(*cmp)(const void *,const void *), int n) {    \n   ...\n   cmp(ar[x], ar[y]);\n   ...\n}\n</code></pre>\n\n<p>And calling <code>cmp</code> inside of <code>buildHeap</code> actually calls <code>compare_int</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10990318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FrH020kWKtw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMfUup2-3c9udDKTB0tt_poWbcidw/mo/photo.jpg?sz=128", "display_name": "youcantcme", "link": "https://stackoverflow.com/users/10990318/youcantcme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 54441449, "answer_count": 1, "score": -1, "last_activity_date": 1548853945, "creation_date": 1548853420, "last_edit_date": 1548853553, "question_id": 54441276, "link": "https://stackoverflow.com/questions/54441276/understanding-how-cmp-comparator-functions-is-used-as-arguments-to-another-fun", "title": "understanding how cmp (comparator functions) is used as arguments to another function", "body": "<p>This has been confusing me for sometime, not sure if someone can understand what I am trying to drive at</p>\n\n<p>Source:\n<a href=\"https://www.oreilly.com/library/view/algorithms-in-a/9780596516246/ch04s06.html\" rel=\"nofollow noreferrer\">https://www.oreilly.com/library/view/algorithms-in-a/9780596516246/ch04s06.html</a></p>\n\n<p>I am trying to figure out what exactly does passing cmp as the argument into buildHeap does</p>\n\n<pre><code>buildHeap (ar, cmp, n);\n</code></pre>\n\n<p>the book appears to describe cmp as the comparator function (<a href=\"https://stackoverflow.com/questions/27284185/how-does-the-compare-function-in-qsort-work\">How does the compare function in qsort work?</a>) and given that</p>\n\n<pre><code>static void buildHeap (void **ar, int(*cmp)(const void *,const void *), int n) {\n</code></pre>\n\n<p>Am i right to say that </p>\n\n<pre><code>int(*cmp)(const void *,const void *)\n</code></pre>\n\n<p>is essentially the C equivalent to a delegate in c#? </p>\n\n<p>i.e. passing cmp into buildHeap teaches buildHeap on what function to implement, being the comparator function (which fits the signature of:)</p>\n\n<pre><code>int(*cmp)(const void *,const void *)\n</code></pre>\n\n<p>Would there be another way for me to teach buildHeap to do a comparator function without passing cmp?</p>\n"}, {"tags": ["c", "memory-management", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548853422, "post_id": 54441213, "comment_id": 95691522, "body": "What warnings do you get?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548853467, "post_id": 54441213, "comment_id": 95691554, "body": "You have multiple problems with the code you show. First and foremost you use pointers without initialization (<code>string_container-&gt;string</code> isn&#39;t initialized to point anywhere). Secondly, your <code>textt</code> member is an array of <i>pointers</i> to <code>char</code>, i.e. it could be seen as an array of (possible) strings. Thirdly, you forget that <code>char</code> strings in C are really called <b><i>null-terminated</b> byte strings</i>. That <i>null-terminator</i> is what all standard string functions use to find the end of a string (which includes the <code>printf</code> function with the <code>&quot;%s&quot;</code> format specifier)."}, {"owner": {"reputation": 196, "user_id": 10976662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02f395a79e4df14aaa6c9582eff1d63?s=128&d=identicon&r=PG&f=1", "display_name": "KWierzbicki", "link": "https://stackoverflow.com/users/10976662/kwierzbicki"}, "edited": false, "score": 0, "creation_date": 1548853564, "post_id": 54441213, "comment_id": 95691620, "body": "Your <code>char* textt[5]</code> field is table of five character pointers, so <code>ttext[i]</code> is <code>char*</code> and <code>byte_array[i]</code> is <code>char</code> and you are trying to assign <code>char</code> to <code>char*</code>."}, {"owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "edited": false, "score": 0, "creation_date": 1548853722, "post_id": 54441213, "comment_id": 95691711, "body": "char* textt[5] was a typo."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548854047, "post_id": 54441213, "comment_id": 95691913, "body": "One point of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is that we basically should be able to copy-paste it and get the exact same result you get. That includes getting the exact same build warnings and errors you might be getting, and if you don&#39;t get any build warnings or errors, make sure the code you show also don&#39;t have any, even when enabling more warnings from the compiler."}, {"owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548854147, "post_id": 54441213, "comment_id": 95691985, "body": "@Someprogrammerdude this is the error after crash &gt;&gt;&gt;&gt; Process finished with exit code 139 (interrupted by signal 11: SIGSEGV)"}], "answers": [{"comments": [{"owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "edited": false, "score": 0, "creation_date": 1548854036, "post_id": 54441403, "comment_id": 95691905, "body": "the program is failing when i is zero, it has nothing todo with the null terminator. the program still crashes even after null terminating the last element."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "edited": false, "score": 0, "creation_date": 1548854133, "post_id": 54441403, "comment_id": 95691972, "body": "@salimsaid That&#39;s cause <code>string_container-&gt;string</code> is not initialized."}, {"owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548854211, "post_id": 54441403, "comment_id": 95692020, "body": "@Osiris how would i initialize string_container-&gt;string without using malloc ?"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1548855459, "last_edit_date": 1548855459, "creation_date": 1548853824, "answer_id": 54441403, "question_id": 54441213, "link": "https://stackoverflow.com/questions/54441213/how-to-populate-a-character-pointer-inside-another-pointer-without-using-dynamic/54441403#54441403", "title": "How to populate a character pointer inside another pointer without using dynamic memory allocation", "body": "<p>if you do not want dynamic allocation in the heap replace</p>\n\n<pre><code>typedef struct custom_string_container\n{\n    custom_string * string;\n}custom_string_container;\n</code></pre>\n\n<p>by</p>\n\n<pre><code>typedef struct custom_string_container\n{\n    custom_string string;\n}custom_string_container;\n</code></pre>\n\n<p>and of course replace when needed '->' by '.'</p>\n\n<p>also warning with</p>\n\n<pre><code>    for(i = 0; i &lt; 5; i++)\n    {\n        string_container-&gt;string-&gt;textt[i] = byte_array[i]; //failing with exit code 139\n    }\n</code></pre>\n\n<p>the null terminating char is missing, this is a problem when doing</p>\n\n<pre><code>printf(\"read string is %s \\n\", string_container.string-&gt;textt);\n</code></pre>\n\n<p>if you want to store 5 characters (without counting the null char)\nadd <code>string_container-&gt;string-&gt;textt[i] = 0;</code> after the <em>for</em> or replace <code>i &lt; 5</code> by <code>i &lt;= 5</code> to also copy the null character</p>\n\n<p>and of course replace <code>char textt[5];</code> by <code>char textt[6];</code> in <code>struct custom_string</code></p>\n\n<p>Note to write 6 in the size then 5 or 6 elsewhere is dangerous in case you change the size, it is much more secure to use <em>sizeof</em> </p>\n\n<p>Finaly with all changes :</p>\n\n<pre><code>typedef struct custom_string\n{\n    char textt[6];\n    int length;\n}custom_string;\n\ntypedef struct custom_string_container\n{\n    custom_string string;\n}custom_string_container;\n\nvoid read_string_from_byte_array(custom_string_container* string_container)\n{\n    char* byte_array = \"12345\";\n    int i;\n\n    puts(\"assigning\");\n    for(i = 0; i &lt; sizeof(string_container-&gt;string.textt); i++)\n    {\n        string_container-&gt;string.textt[i] = byte_array[i]; \n    }\n    string_container-&gt;string.textt[i] = 0;\n\n    puts(\"done assigning\");\n\n}\n\n\n\nvoid main()\n{\n    //dynamic memory allocation is strictly prohibited\n    custom_string_container string_container;\n\n    read_string_from_byte_array(&amp;string_container);\n    printf(\"read string is %s \\n\", string_container.string.textt);\n\n}\n</code></pre>\n\n<p>Execution :</p>\n\n<pre><code>assigning\ndone assigning\nread string is 12345 \n</code></pre>\n\n<p>and under <em>valgrind</em> :</p>\n\n<pre><code>pi@raspberrypi:~ $ valgrind ./a.out \n==8507== Memcheck, a memory error detector\n==8507== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==8507== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==8507== Command: ./a.out\n==8507== \nassigning\ndone assigning\nread string is 12345 \n==8507== \n==8507== HEAP SUMMARY:\n==8507==     in use at exit: 0 bytes in 0 blocks\n==8507==   total heap usage: 1 allocs, 1 frees, 1,024 bytes allocated\n==8507== \n==8507== All heap blocks were freed -- no leaks are possible\n==8507== \n==8507== For counts of detected and suppressed errors, rerun with: -v\n==8507== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 3)\n</code></pre>\n\n<hr>\n\n<p>Note also that the copy in <code>read_string_from_byte_array</code> can be simply done using <em>strncpy</em> (not <em>strcpy</em> in case <code>byte_array</code> is too long to be memorized in <em>textt</em>) rather than the <em>for</em> loop</p>\n"}], "owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1548855459, "creation_date": 1548853212, "last_edit_date": 1548853648, "question_id": 54441213, "link": "https://stackoverflow.com/questions/54441213/how-to-populate-a-character-pointer-inside-another-pointer-without-using-dynamic", "title": "How to populate a character pointer inside another pointer without using dynamic memory allocation", "body": "<p>I am trying to assign a character pointer inside another pointer within a struct. My environment has no malloc/calloc therefore dynamic memory allocation is not an option. How would i make it possible to populate the character pointer in read_string_from_byte_array() function ?</p>\n\n<pre><code>    typedef struct custom_string\n    {\n        char textt[5];\n        int length;\n    }custom_string;\n\n    typedef struct custom_string_container\n    {\n        custom_string* string;\n    }custom_string_container;\n\n    void read_string_from_byte_array(custom_string_container* string_container)\n    {\n        char* byte_array = \"12345\";\n        int i;\n\n        puts(\"assigning\");\n        for(i = 0; i &lt; 5; i++)\n        {\n            string_container-&gt;string-&gt;textt[i] = byte_array[i]; //failing with exit code 139\n        }\n\n        puts(\"done assigning\");\n\n    }\n\n\n\n    void main()\n    {\n        //dynamic memory allocation is strictly prohibited\n        custom_string_container string_container;\n\n        read_string_from_byte_array(&amp;string_container);\n        printf(\"read string is %s \\n\", string_container.string-&gt;textt);\n\n    }\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1548852979, "post_id": 54441114, "comment_id": 95691284, "body": "And we are supposed to know what <code>MACHINE</code> is?"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1548853093, "post_id": 54441114, "comment_id": 95691350, "body": "What are the typedef of MACHINE, RESEAU, ADRESSIP? What&#39;s the line, between that you indicate ,that issued the warning?"}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1548853301, "post_id": 54441114, "comment_id": 95691445, "body": "What is the type of <code>m.ip</code>? If it&#39;s not <code>ADRESSIP *</code> ..."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1548853528, "post_id": 54441114, "comment_id": 95691597, "body": "I suggest you to insert the type declarations into your question so we can best read the SW."}, {"owner": {"reputation": 3, "user_id": 10990238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kIneKAdWJVc/AAAAAAAAAAI/AAAAAAAAZNE/D5bAPDN9wsE/photo.jpg?sz=128", "display_name": "Vengeance Queen", "link": "https://stackoverflow.com/users/10990238/vengeance-queen"}, "reply_to_user": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1548853677, "post_id": 54441114, "comment_id": 95691685, "body": "@SirJoBlack   MACHINE is  <code>typedef struct machine{ &#47;&#47; la structure Machine ,, represente un pc     struct machine *suivant;     const char* nom;     struct ADRESSIP *ip; }MACHINE; </code>  ADRESSIP is <code>typedef struct adressIP{ &#47;&#47; la structure AdressIP     int n1;     int n2;     int n3;     int n4; }ADRESSIP; </code>  RESEAU is <code>typedef struct reseau{ &#47;&#47; la structure reseau comme une liste     MACHINE *suivant;     long long size;     short vide; }RESEAU; </code>"}], "answers": [{"tags": [], "owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "is_accepted": true, "score": 0, "last_activity_date": 1548854936, "creation_date": 1548854936, "answer_id": 54441722, "question_id": 54441114, "link": "https://stackoverflow.com/questions/54441114/assignment-from-incompatible-pointer-type-warning-problem/54441722#54441722", "title": "assignment from incompatible pointer type warning problem", "body": "<p>Try this solution. I don't know what's the use you will do of this code. I've added the instructions that you indicates in a separated way into the function <code>create_machine</code>. THE CODE HERE IS ONLY A SOLUTION TO SOLVE THE WARNING!</p>\n\n<p>If you use the type <code>ADDRESSIP</code> into the structure <code>struct machine</code> you have to have already declared the <code>typedef {} ADDRESSIP;</code></p>\n\n<pre><code>typedef struct adressIP { // la structure AdressIP\n    int n1; int n2; int n3; int n4; }\nADRESSIP;\n\ntypedef struct machine{ // la structure Machine ,, represente un pc\n    struct machine * suivant;\n    const char nom;\n    ADRESSIP *ip;\n} MACHINE;\n\ntypedef struct reseau{ // la structure reseau comme une liste\n    MACHINE * suivant;\n    long long size;\n    short vide; }\nRESEAU;\n\n\nMACHINE * create_machine(RESEAU *r){ // Creation d'une machine and erreur\n    MACHINE *m = malloc(sizeof(MACHINE));\n    if(m == NULL){\n        printf(\"\\nErreur\");\n        return NULL;\n    }\n\n    ADRESSIP * ip = malloc(sizeof(ADRESSIP));\n    if(ip == NULL){\n        printf(\"\\nErreur\");\n        return NULL;\n    }\n\n    m-&gt;suivant = NULL;\n    m-&gt;ip = ip; //erreur\n\n    return m;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10990238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kIneKAdWJVc/AAAAAAAAAAI/AAAAAAAAZNE/D5bAPDN9wsE/photo.jpg?sz=128", "display_name": "Vengeance Queen", "link": "https://stackoverflow.com/users/10990238/vengeance-queen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 54441722, "answer_count": 1, "score": -3, "last_activity_date": 1548854936, "creation_date": 1548852882, "last_edit_date": 1548854207, "question_id": 54441114, "link": "https://stackoverflow.com/questions/54441114/assignment-from-incompatible-pointer-type-warning-problem", "title": "assignment from incompatible pointer type warning problem", "body": "<p>i keep on getting \"assignment from incompatible pointer type\" warnings and i can't find a solution!</p>\n\n<pre><code>MACHINE* create_machine(RESEAU *r){ // Creation d'une machine and erreur\nMACHINE *m = malloc(sizeof(MACHINE));\nif(m == NULL){\n    printf(\"\\nErreur\");\n    return NULL;\n    }\n\nADRESSIP *ip = malloc(sizeof(ADRESSIP));\nif(ip == NULL){\n    printf(\"\\nErreur\");\n    return NULL;\n    }\n</code></pre>\n\n<p>and when i do this get the warning here!!</p>\n\n<pre><code> m-&gt;suivant = NULL;\n m-&gt;ip=ip; //erreur \n</code></pre>\n\n<hr>\n\n<p>From Comments:</p>\n\n<p>MACHINE is </p>\n\n<pre><code>typedef struct machine{ // la structure Machine ,, represente un pc \n   struct machine *suivant; \n   const char* nom; \n   struct ADRESSIP *ip; \n}MACHINE; \n</code></pre>\n\n<p>ADRESSIP is </p>\n\n<pre><code>typedef struct adressIP{ // la structure AdressIP \n    int n1; \n    int n2;\n    int n3;\n    int n4; \n }ADRESSIP;\n</code></pre>\n\n<p>RESEAU is</p>\n\n<pre><code>typedef struct reseau{ // la structure reseau comme une liste \n    MACHINE *suivant; \n    long long size; \n    short vide; \n}RESEAU;\n</code></pre>\n"}, {"tags": ["c++", "c", "winapi"], "comments": [{"owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "edited": false, "score": 1, "creation_date": 1548852817, "post_id": 54441021, "comment_id": 95691191, "body": "Improve the question formatting, please."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1548863790, "post_id": 54441021, "comment_id": 95698290, "body": "That doesn&#39;t look like C++ or C - what&#39;s that <code>^</code> doing there?"}], "answers": [{"tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": true, "score": 1, "last_activity_date": 1548857458, "last_edit_date": 1548857458, "creation_date": 1548857096, "answer_id": 54442414, "question_id": 54441021, "link": "https://stackoverflow.com/questions/54441021/mblctr-is-not-recognized-as-an-internal-or-external-command-operable-program/54442414#54442414", "title": "&#39;mblctr&#39; is not recognized as an internal or external command, operable program or batch file.How to fix this?", "body": "<p>mblctr.exe only exists as a 64-bit application on 64-bit Windows. A 32-bit application does not see the same System32 folder as 64-bit applications. You can access the 64-bit System32 folder in 32-bit applications with the virtual sysnative folder.</p>\n\n<pre><code>#include &lt;shellapi.h&gt;\n...\nINT_PTR ret = (INT_PTR) ShellExecute(NULL, NULL, TEXT(\"mblctr.exe\"), 0, 0, SW_SHOW);\nif (ret &lt;= 32)\n{\n    TCHAR buf[MAX_PATH];\n    GetWindowsDirectory(buf, MAX_PATH);\n    lstrcat(buf, TEXT(\"\\\\sysnative\\\\mblctr.exe\")); // Hopefully this fits in MAX_PATH, you might want to check in a real program.\n    ShellExecute(NULL, NULL, buf, 0, 0, SW_SHOW);\n}\n</code></pre>\n\n<p>It works in cmd.exe because you are running the 64-bit version of cmd when you start it manually. If you run the 32-bit bit version of cmd.exe it will fail:</p>\n\n<p><kbd>Win</kbd>+<kbd>R</kbd> \"cmd\"</p>\n\n<pre><code>C:\\Users\\Anders&gt;%windir%\\syswow64\\cmd.exe\nMicrosoft Windows [Version 6.2.9200]\n(c) 2012 Microsoft Corporation. All rights reserved.\n\nC:\\Users\\Anders&gt;mblctr.exe\n'mblctr.exe' is not recognized as an internal or external command,\noperable program or batch file.\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9490152, "user_type": "registered", "profile_image": "https://graph.facebook.com/1483880878401175/picture?type=large", "display_name": "M&#252;sh&#226;n St&#238;f\u0142er", "link": "https://stackoverflow.com/users/9490152/m%c3%bcsh%c3%a2n-st%c3%aef%c5%82er"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 54442414, "answer_count": 1, "score": -2, "last_activity_date": 1548857458, "creation_date": 1548852560, "last_edit_date": 1548854689, "question_id": 54441021, "link": "https://stackoverflow.com/questions/54441021/mblctr-is-not-recognized-as-an-internal-or-external-command-operable-program", "title": "&#39;mblctr&#39; is not recognized as an internal or external command, operable program or batch file.How to fix this?", "body": "<p>I have created a button in vs to open mobility center. when i run the code it shows error 'mblctr' is not recognized,but when run the 'mblctr' in cmd it wroks fine.This is my code someone help me out</p>\n\n<pre><code>private: System::Void button21_Click(System::Object^  sender, System::EventArgs^  e) {\n    //system(\"C:\\\\Windows\\\\System32\\\\mblctr.exe\");\n    system(\"mblctr\");\n }\n</code></pre>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548852504, "post_id": 54440975, "comment_id": 95691002, "body": "Please get a couple of books, or read some tutorials. And remember that &quot;strings&quot; in C are really only pointers or arrays that decays to pointers. The CS50 type-alias <code>string</code> is unfortunately quite misleading IMO."}], "answers": [{"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1548852746, "creation_date": 1548852746, "answer_id": 54441068, "question_id": 54440975, "link": "https://stackoverflow.com/questions/54440975/cs50-pset2crack-help-me-understand-something-with/54441068#54441068", "title": "cs50 Pset2:Crack - help me understand something with &#39;==&#39;", "body": "<p>compare the C string (char *) with <em>strcmp</em>, else you just compare two pointers and here they cannot be equals</p>\n\n<pre><code>int main(int argc, string argv[])\n{\n    string key = \"f\";\n    string salt = \"50\";\n    string a = crypt(key, salt);\n\n    string x = \"50AWs/7oe6pkA\";   // this is the hash output from crypt(f, 50)\n\n    if(!strcmp(a, x))\n    {\n        printf(\"true\\n\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10971772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664b4a20dc1161512ec406a47eb77f5e?s=128&d=identicon&r=PG&f=1", "display_name": "tfu", "link": "https://stackoverflow.com/users/10971772/tfu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "closed_date": 1548852624, "answer_count": 1, "score": 0, "last_activity_date": 1548852746, "creation_date": 1548852363, "question_id": 54440975, "link": "https://stackoverflow.com/questions/54440975/cs50-pset2crack-help-me-understand-something-with", "closed_reason": "Duplicate", "title": "cs50 Pset2:Crack - help me understand something with &#39;==&#39;", "body": "<p>I'm working through Pset2: Crack but I don't think the background matters here. </p>\n\n<p>I'm having some problems with the output of the <code>crypt()</code> function and I have been trying to figure what the problem is - I think it's because <code>crypt()</code> outputs a pointer? I'm only 2 weeks into cs50 and I've had a read around pointers. I understand that it doesn't actually store the data I am looking for but an address line to the data within the memory but that knowledge doesn't explain, to me, why I can't use the output of <code>crypt()</code> with an equaliser <code>==</code>. </p>\n\n<p>Anyway, any help with the code below or further reading is appreciated.</p>\n\n<pre><code>int main(int argc, string argv[])\n{\n    string key = \"f\";\n    string salt = \"50\";\n    string a = crypt(key, salt);\n\n    string x = \"50AWs/7oe6pkA\";   // this is the hash output from crypt(f, 50)\n\n    if(a == x)\n    {\n        printf(\"true\\n\");\n    }\n}\n</code></pre>\n\n<p>I expect output of \"true\" but (a == x) is not passing the if condition</p>\n"}, {"tags": ["c", "pointers", "cs50"], "answers": [{"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1548851322, "post_id": 54440650, "comment_id": 95690395, "body": "The same for <code>strcpy(tmp-&gt;name, word);</code> in <code>addFirst()</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1548851443, "post_id": 54440650, "comment_id": 95690445, "body": "@DevSolar indeed,"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1548851449, "post_id": 54440650, "comment_id": 95690447, "body": "<code>tmp-&gt;name = strdup(word);</code> instead of <code>strcpy(tmp-&gt;name, word);</code> and similar for <code>&quot;&quot;</code> would help."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 2, "creation_date": 1548852505, "post_id": 54440650, "comment_id": 95691003, "body": "@Bodo: I am always of two minds about whether to mention <code>strdup()</code> or not. Yes, it is a useful shortcut. But it is <i>not</i> part of the language standard. (And it is a function that allocates memory you have to call <code>free()</code> on, that is <i>not</i> named <code>*alloc()</code>.)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1548852933, "last_edit_date": 1548852933, "creation_date": 1548851206, "answer_id": 54440650, "question_id": 54440608, "link": "https://stackoverflow.com/questions/54440608/runtime-error-null-pointer-passed-as-argument-1-which-is-declared-to-never-be/54440650#54440650", "title": "runtime error: null pointer passed as argument 1, which is declared to never be null", "body": "<p>The problem is in <code>strcpy(head-&gt;name, \"\");</code>. Here, you;re trying to use the memory location pointer to by <code>head-&gt;name</code>, but you never assigned a valid memory to it.</p>\n\n<p>You need to make sure that the pointer points to a valid memory location, before you write to / read from that memory location. Attempt to access invalid memory invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. </p>\n\n<p>This is applicable for other uninitialized instances of <code>name</code>, too.</p>\n\n<p>If you can live with POSIX standard, instead of <code>strcpy()</code>, you can make use of <a href=\"https://linux.die.net/man/3/strdup\" rel=\"nofollow noreferrer\"><code>strdup()</code></a></p>\n"}], "owner": {"reputation": 7, "user_id": 10826484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2337167419690150/picture?type=large", "display_name": "Pascal Wigger", "link": "https://stackoverflow.com/users/10826484/pascal-wigger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1014, "favorite_count": 0, "accepted_answer_id": 54440650, "answer_count": 1, "score": 0, "last_activity_date": 1555610668, "creation_date": 1548851068, "last_edit_date": 1555610668, "question_id": 54440608, "link": "https://stackoverflow.com/questions/54440608/runtime-error-null-pointer-passed-as-argument-1-which-is-declared-to-never-be", "title": "runtime error: null pointer passed as argument 1, which is declared to never be null", "body": "<p>I wrote a program that creates Linkedlists with two values.\nIt worked when I just had int values in it but now that I added char* this error messages shows\nruntime error: null pointer passed as argument 1, which is declared to never be null</p>\n\n<p>As mentioned before this worked fine until I added char* to the constructor and the struct. Not sure where it goes wrong as the error seems to come from different lines in the code everytime I run it... So what do i need to change ?</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n   #include &lt;cs50.h&gt;\n   #include &lt;string.h&gt;\n\ntypedef struct node  {\n        int val;\n        char* name;\n        struct node *next;\n} node_t;\n\nvoid addFirst(int value, char* word, node_t** nd) {\n        //initialize new node, allocate space, set value\n    node_t * tmp;\n    tmp = malloc(sizeof(node_t));\n    tmp-&gt;val = value;\n    strcpy(tmp-&gt;name, word);\n    //let the new nodes next pointer point to the old head\n    tmp-&gt;next = *nd;\n    //Make tmp the head node\n    *nd = tmp;\n\n\n\n}\n\n\nint findItem(int value,char* word, node_t *nd) {\n    if(nd-&gt;val == value)\n    return 0;\n    while(nd-&gt;next != NULL) {\n    if(nd-&gt;val == value &amp;&amp; strcmp(word, nd-&gt;name) == 0)\n    return 0;\n\n    if(nd-&gt;next != NULL)\n    nd = nd-&gt;next;\n    }\n    return -1;\n\n}\n\n\nint main (void) {\n\n node_t *head = malloc(sizeof(node_t));\n head-&gt;val = 0;\n  strcpy(head-&gt;name, \"\");\n    head-&gt;next = NULL;\n    addFirst(15, \"word\", &amp;head);\n    addFirst(14,\"word2\", &amp;head);\n\n\n    printf(\"%i \\n\", findItem(15, \"word\", head));\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linker"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1548850332, "post_id": 54440260, "comment_id": 95689807, "body": "1. Because you should use <code>cstdio</code> in C++. 2. No, for 99% stdio.h has <code>extern &quot;C&quot;</code> in this <a href=\"https://github.com/lattera/glibc/blob/master/libio/stdio.h#L29\" rel=\"nofollow noreferrer\">macro</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1548850867, "post_id": 54440260, "comment_id": 95690129, "body": "@KamilCuk stdio.h vs cstdio has absolutely nothing to do with this."}, {"owner": {"reputation": 43, "user_id": 10652944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08464a07a695821661a2558f5f36e5ce?s=128&d=identicon&r=PG&f=1", "display_name": "endtoendianess", "link": "https://stackoverflow.com/users/10652944/endtoendianess"}, "edited": false, "score": 0, "creation_date": 1548865138, "post_id": 54440260, "comment_id": 95699118, "body": "Thanks to everybody for your answers. I should&#39;ve looked more carefully; I just grepped stdio.h looking for cplusplus without digging deeper."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1548851033, "last_edit_date": 1548851033, "creation_date": 1548850334, "answer_id": 54440385, "question_id": 54440260, "link": "https://stackoverflow.com/questions/54440260/linking-to-c-libraries-from-c-why-isnt-extern-always-needed/54440385#54440385", "title": "Linking to C libraries from C++: why isn&#39;t extern always needed?", "body": "<blockquote>\n  <p>For instance, stdio.h has no such #ifdef</p>\n</blockquote>\n\n<p>It probably does. Regardless, <code>&lt;stdio.h&gt;</code> is a header provided by the C++ standard library (inherited from the C standard library). It is guaranteed to work without <code>extern \"C\"</code> as are all standard headers.</p>\n\n<p>Note that the usage of <code>&lt;name.h&gt;</code> name of the inherited standard headers in C++ instead of <code>&lt;cname&gt;</code> is deprecated in the current edition of the standard and has been identified as a candidate for removal in future revisions.</p>\n\n<blockquote>\n  <p>why isn't extern always needed?</p>\n</blockquote>\n\n<p>Simply because some headers have been written to support C++ directly, and so do it by themselves.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1548851069, "last_edit_date": 1548851069, "creation_date": 1548850380, "answer_id": 54440398, "question_id": 54440260, "link": "https://stackoverflow.com/questions/54440260/linking-to-c-libraries-from-c-why-isnt-extern-always-needed/54440398#54440398", "title": "Linking to C libraries from C++: why isn&#39;t extern always needed?", "body": "<blockquote>\n  <p>Usually to get a C library working from C++ you have to include it with  <code>extern \"C\" { #include &lt;clibrary.h&gt; }</code>. </p>\n</blockquote>\n\n<p>Only when the library was not designed with C++ compatibility in mind. But this is a hack.</p>\n\n<blockquote>\n  <p>Many libraries will include in their header files code like <code>#ifdef __cplusplus extern \"C\" { ...</code> to make them more user friendly to C++ code (e.g. <code>pthread.h</code>)</p>\n</blockquote>\n\n<p>Yes, a good library will do this.</p>\n\n<p>As a result, you do not need to and should not add another <code>extern \"C\"</code> around the <code>#include</code>.</p>\n\n<p><code>stdio.h</code> is an example of a header that will be doing this properly (see below).</p>\n\n<blockquote>\n  <p>For instance, <code>stdio.h</code> has no such <code>#ifdef</code></p>\n</blockquote>\n\n<p>Sure it does! <a href=\"https://github.com/lattera/glibc/blob/master/libio/stdio.h#L29\" rel=\"nofollow noreferrer\">Follow</a> <a href=\"https://github.com/lattera/glibc/blob/master/bits/libc-header-start.h#L33\" rel=\"nofollow noreferrer\">the</a> <a href=\"https://github.com/lattera/glibc/blob/master/include/features.h#L428\" rel=\"nofollow noreferrer\">money</a> <a href=\"https://github.com/lattera/glibc/blob/master/include/sys/cdefs.h#L3\" rel=\"nofollow noreferrer\">trail</a><a href=\"https://github.com/lattera/glibc/blob/master/misc/sys/cdefs.h#L112\" rel=\"nofollow noreferrer\">&hellip;</a></p>\n\n<blockquote>\n  <p>why isn't extern always needed?</p>\n</blockquote>\n\n<p>So, in conclusion, you only need to do this yourself when the author of the header file didn't do it for you. When the author of the header file did it, you do not need to do it.</p>\n"}], "owner": {"reputation": 43, "user_id": 10652944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08464a07a695821661a2558f5f36e5ce?s=128&d=identicon&r=PG&f=1", "display_name": "endtoendianess", "link": "https://stackoverflow.com/users/10652944/endtoendianess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 54440398, "answer_count": 2, "score": 3, "last_activity_date": 1548851069, "creation_date": 1548849967, "question_id": 54440260, "link": "https://stackoverflow.com/questions/54440260/linking-to-c-libraries-from-c-why-isnt-extern-always-needed", "title": "Linking to C libraries from C++: why isn&#39;t extern always needed?", "body": "<p>Usually to get a C library working from C++ you have to include it with  <code>extern \"C\" { #include &lt;clibrary.h&gt; }</code>. Many libraries will include in their header files code like <code>#ifdef __cplusplus extern \"C\" { ...</code> to make them more user friendly to C++ code (e.g. <code>pthread.h</code>). Sometimes this is not the case. For instance, <code>stdio.h</code> has no such <code>#ifdef</code>, yet I can still compile &amp; link the usual <code>#include &lt;stdio.h&gt; int main() {printf(\"Hello\");}</code> using a C++ compiler without wrapping it in an <code>extern \"C\"</code> statement. Why is this? </p>\n"}, {"tags": ["c", "for-loop", "pointers", "random"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1548849526, "post_id": 54440110, "comment_id": 95689351, "body": "<a href=\"https://stackoverflow.com/q/605845/2173917\">Do I cast the result of malloc?</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 8, "creation_date": 1548849699, "post_id": 54440110, "comment_id": 95689427, "body": "<code>*(array + y)</code> and <code>(*array + y)</code> are not the same. If you&#39;d used the common notation <code>array[y]</code> this nasty typo probably would not have happened."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548849799, "post_id": 54440110, "comment_id": 95689488, "body": "Note that for any pointer or array <code>p</code> and index <code>i</code>, the expression <code>*(p + i)</code> is <i>exactly</i> equal to <code>p[i]</code>. The latter is generally easier to read, less to write, and also safe from errors like the one you have."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1548849812, "post_id": 54440110, "comment_id": 95689498, "body": "<code>*(pointer + integer)</code> is 100% absolutely the same as <code>pointer[integer]</code>. Note that using an array identifier in these kind of expressions implicitly converts from array type to pointer type."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1548852097, "last_edit_date": 1548852097, "creation_date": 1548849601, "answer_id": 54440135, "question_id": 54440110, "link": "https://stackoverflow.com/questions/54440110/instead-of-random-it-generates-sequence-of-numbers/54440135#54440135", "title": "Instead of random, it generates sequence of numbers", "body": "<p>Most likely you're printing a wrong value.</p>\n\n<p>You need to change <code>(*array+ y)</code> to <code>*(array+ y)</code> in <code>printf()</code> statement, otherwise, you end up printing the value of the first random number, plus the iteration counter (which explains the output you get).</p>\n\n<p><em>Just to add some opinionated view:</em> The array indexing operator <code>[]</code> is there, some chose to prefer using it to avoid mistakes just like this. Your statements can be easily re-written to make use of that, like</p>\n\n<pre><code>for(int y = 0; y &lt; x; y++){\n\n    array[y] = 2 +  rand() % 99;\n}\n\nfor(int y = 0; y &lt;x; y++){\n    printf(\"Array element %d: %d\\n\", y, array[y]);\n}\n</code></pre>\n\n<p>That said, </p>\n\n<ul>\n<li>Please see <a href=\"https://stackoverflow.com/q/605845/2173917\">do I cast the result of malloc?</a></li>\n<li>Always check for the success of the called function before using the return value. Check against <code>NULL</code>  return of the <code>malloc()</code> call, otherwise you may end up dereferencing <code>NULL</code>, which invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a></li>\n</ul>\n"}], "owner": {"reputation": 23, "user_id": 10301869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oN-rGYAf6MY/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORKlt4hCAcNnCR8QF9O2jw1CC6gg/mo/photo.jpg?sz=128", "display_name": "Musab Kartal", "link": "https://stackoverflow.com/users/10301869/musab-kartal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1548855083, "accepted_answer_id": 54440135, "answer_count": 1, "score": 2, "last_activity_date": 1548855049, "creation_date": 1548849506, "last_edit_date": 1548855049, "question_id": 54440110, "link": "https://stackoverflow.com/questions/54440110/instead-of-random-it-generates-sequence-of-numbers", "closed_reason": "Not suitable for this site", "title": "Instead of random, it generates sequence of numbers", "body": "<p>I want to generate x number of random numbers and everything works except it gives me sequenced numbers, not random numbers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(){\n\nint x;\nprintf(\"How many  elements do you want?\\n\");\nscanf(\"%d\", &amp;x);\nint *array = (int *)malloc(x * sizeof(int));\nsrand(time(NULL));\nfor(int y = 0; y &lt; x; y++){\n\n    *(array + y) = 2 +  rand() % 99;\n}\n\nfor(int y = 0; y &lt;x; y++){\n    printf(\"Array element %d: %d\\n\", y, (*array+ y));\n\n}\n\nreturn 0;}\n</code></pre>\n\n<p>It gives the numbers like:  27 28 29 30 31, only the first number is random in each execution, others are sequential.</p>\n"}, {"tags": ["c", "for-loop"], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1548848604, "post_id": 54439693, "comment_id": 95688795, "body": "All three correct answers have one vote down each. I think that is as much data as we need about the motivation."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 8, "last_activity_date": 1548850309, "last_edit_date": 1548850309, "creation_date": 1548848124, "answer_id": 54439693, "question_id": 54439608, "link": "https://stackoverflow.com/questions/54439608/for-loop-confusion-in-c-program/54439693#54439693", "title": "For loop confusion in c program", "body": "<p>The Syntax of a <code>for</code> loop is</p>\n\n<blockquote>\n  <p><code>for (</code> <em>clause-1</em> <code>;</code> <em>expression-2</em> <code>;</code> <em>expression-3</em> <code>)</code> <em>statement</em></p>\n</blockquote>\n\n<p>The execution is as below, quoting from <code>C11</code>, chapter \u00a76.8.5.3, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>The expression <code>expression-2</code> is the controlling expression that is\n  evaluated <strong>before each execution of the loop body</strong>. The expression <code>expression-3</code> is\n  evaluated as a void expression <strong>after each execution of the loop body.</strong> [....]</p>\n</blockquote>\n\n<p>Here, <code>i++</code> is the body and <code>printf(\"\\n%d\\n\",i)</code> is the <em>expression-3</em>. </p>\n\n<p>So, the order of execution would be something like</p>\n\n<pre><code> i = 1;\n start loop\n\n    i &lt; = 6          //==&gt; TRUE\n    i++;            //i == 2\n    printf         // Will print 2    ///iteration 1  done\n\n    i &lt; = 6         //==&gt; TRUE\n    i++;           //i == 3\n    printf        // Will print 3   ///iteration 2  done\n    .\n    .\n    .\n    i &lt; = 6         //==&gt; TRUE\n    i++;           //i == 6\n    printf        // Will print 6   ///iteration 5  done\n\n    i &lt; = 6         //==&gt; TRUE\n    i++;           //i == 7\n    printf        // Will print 7   ///iteration 6  done\n\n    i &lt; = 6 ==&gt; FALSE\n\n end loop.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1548850914, "post_id": 54439703, "comment_id": 95690148, "body": "There is no basis for your statement \u201cYou&#39;ve written the loop incorrectly.\u201d We do not know that OP wrote it at all. It is not incorrect according to the C standard. We do not know what the intent of its author was; it might have been written specifically to demonstrate the flexible semantics of <code>for</code> loops in C. If so, it was written correctly for that purpose. Additionally, your answer does not explain the operation of the loop, so it does not answer the question \u201cWhy the loop is running from 2 to 7?\u201d"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548852079, "post_id": 54439703, "comment_id": 95690785, "body": "The purpose according to the OP is that it is meant to count from 1 to 6 - so on that basis it&#39;s written incorrectly. If they wanted it to count from 2 to 7 it would be correct, if a little unconventional"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548854333, "post_id": 54439703, "comment_id": 95692110, "body": "The question contains no statement of purpose of the code."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": -5, "last_activity_date": 1548848142, "creation_date": 1548848142, "answer_id": 54439703, "question_id": 54439608, "link": "https://stackoverflow.com/questions/54439608/for-loop-confusion-in-c-program/54439703#54439703", "title": "For loop confusion in c program", "body": "<p>You've written the loop incorrectly - you've swapped the body of the loop with the incrementation code. So after having done <code>i++</code> which is in the body of the loop, it does the <code>printf</code> as the incrementation when that should be the other way around.</p>\n\n<p>Write the <code>for</code> loop correctly as follows.</p>\n\n<pre><code>int i;    \nfor(i=1;i&lt;=6;i++)\n    printf(\"\\n%d\\n\",i)    \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1548848618, "post_id": 54439721, "comment_id": 95688800, "body": "All three correct answers have one vote down each. I think that is as much data as we need about the motivation."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1548848203, "creation_date": 1548848203, "answer_id": 54439721, "question_id": 54439608, "link": "https://stackoverflow.com/questions/54439608/for-loop-confusion-in-c-program/54439721#54439721", "title": "For loop confusion in c program", "body": "<p>A <code>for</code> loop like</p>\n\n<pre><code>for(i=1;i&lt;=6;printf(\"\\n%d\\n\",i))    \n    i++;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>{\n    i = 1;  // Initialization clause from for loop\n\n    while (i &lt;= 6)    // Condition clause from for loop\n    {\n        i++;  // Body of for loop\n\n        printf(\"\\n%d\\n\", i);  // \"Increment\" clause from for loop\n    }\n\n}\n</code></pre>\n\n<p>As you can see, the <code>printf</code> is done <em>after</em> the variable <code>i</code> is incremented, which of course means it will print the incremented value (<code>2</code> to <code>7</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1548848412, "last_edit_date": 1548848412, "creation_date": 1548848205, "answer_id": 54439724, "question_id": 54439608, "link": "https://stackoverflow.com/questions/54439608/for-loop-confusion-in-c-program/54439724#54439724", "title": "For loop confusion in c program", "body": "<p>The workings of the loop are equivalent to the now-obvious</p>\n\n<pre><code>int i;    \nfor (i = 1; i &lt;= 6; /*intentionally blank*/){\n    i++;\n    printf(\"\\n%d\\n\", i);\n}\n</code></pre>\n\n<p>as, conceptually, the 3rd expression in the <code>for</code> loop is ran just before the closing brace of the loop body.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1548848853, "post_id": 54439915, "comment_id": 95688944, "body": "<code>You have written the for loop in a non standard manner.</code>...how so? What is non-standard in this?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548848897, "post_id": 54439915, "comment_id": 95688977, "body": "<code>printf(&quot;\\n%d\\n&quot;,i)</code> is not an increment. I realize you are attempting to refer to the expression that is in the third position of the for-loop, which is quite often an increment. But you ought to use a better term for it."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1548848904, "post_id": 54439915, "comment_id": 95688984, "body": "Generally the increment is the last expression. In his case, the increment is in the body."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1548849151, "post_id": 54439915, "comment_id": 95689135, "body": "I have updated the term to unusual rather than non-standard to avoid any confusion."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548849170, "post_id": 54439915, "comment_id": 95689148, "body": "@EricPostpischil Exactly sir, that is unconventional, awkward and likely to be avoided (I&#39;d do that meself), but there&#39;s nothing &quot;non-standard&quot; about it, regarding the compliance."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548850143, "post_id": 54439915, "comment_id": 95689717, "body": "@EricPostpischil I don&#39;t necessarily disagree (as indicated earlier), but it&#39;s better with the clarification (which we have now, thanks to you)."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 1, "last_activity_date": 1548848937, "last_edit_date": 1548848937, "creation_date": 1548848780, "answer_id": 54439915, "question_id": 54439608, "link": "https://stackoverflow.com/questions/54439608/for-loop-confusion-in-c-program/54439915#54439915", "title": "For loop confusion in c program", "body": "<p>You have written the for loop in an unusual manner.</p>\n\n<p>The operation of a for loop is given below.</p>\n\n<ol>\n<li><p>The initialization is done first. <code>i=1</code></p></li>\n<li><p>Then the expression is checked <code>i&lt;=6</code></p></li>\n<li><p>Then the body is carried out <code>i++</code></p></li>\n<li><p>Then the increment is carried out. In your case this is <code>printf(\"\\n%d\\n\",i)</code></p></li>\n<li><p>Repeat Step 2 to 4, until step 2 is FALSE.</p></li>\n</ol>\n\n<p>In your case, you can see that the <code>printf</code> will be done for <code>i==7</code> first, and then the expression will be checked for <code>i==7</code>. After that the for loop will exit. Similarly the first print will be done only after one increment on <code>i</code></p>\n\n<p>So, first print will be for <code>2</code> and last will be for <code>7</code></p>\n"}], "owner": {"reputation": 97, "user_id": 10989902, "user_type": "registered", "profile_image": "https://graph.facebook.com/751829281850293/picture?type=large", "display_name": "Manpreet Sidhu", "link": "https://stackoverflow.com/users/10989902/manpreet-sidhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 54439915, "answer_count": 5, "score": 2, "last_activity_date": 1548853756, "creation_date": 1548847896, "last_edit_date": 1548853756, "question_id": 54439608, "link": "https://stackoverflow.com/questions/54439608/for-loop-confusion-in-c-program", "title": "For loop confusion in c program", "body": "<p>Why the loop is running from 2 to 7?</p>\n\n<pre><code>int i;    \nfor(i=1;i&lt;=6;printf(\"\\n%d\\n\",i))    \ni++;\n</code></pre>\n\n<p>The output of this is </p>\n\n<blockquote>\n<pre><code>2\n3\n4\n5\n6\n7\n</code></pre>\n</blockquote>\n\n<p>but limit of <code>i</code> is 6.</p>\n"}, {"tags": ["c", "udp", "texas-instruments", "openthread"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10989811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f4d959104eb7546df714100fda41df?s=128&d=identicon&r=PG&f=1", "display_name": "user10989811", "link": "https://stackoverflow.com/users/10989811/user10989811"}, "edited": false, "score": 0, "creation_date": 1549437823, "post_id": 54446169, "comment_id": 95897135, "body": "Hi Victor,  \tFirst of all sorry for late reply and thank you for your suggestion. I referred your code and tried to implement it in thermostat example of TI cc1352R (thermostat.c) but I am still facing some issues with UDP open function. So can you please share your email id so that I can share my code?"}, {"owner": {"reputation": 109, "user_id": 1625856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d8e43a40d0efbaa48230dee8e08da6?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/1625856/victor"}, "reply_to_user": {"reputation": 1, "user_id": 10989811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f4d959104eb7546df714100fda41df?s=128&d=identicon&r=PG&f=1", "display_name": "user10989811", "link": "https://stackoverflow.com/users/10989811/user10989811"}, "edited": false, "score": 0, "creation_date": 1549535616, "post_id": 54446169, "comment_id": 95940294, "body": "It would be the best if you had uploaded the code to github&#39;s gist and share a link to it here, so others could also benefit from our discussion."}], "tags": [], "owner": {"reputation": 109, "user_id": 1625856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d8e43a40d0efbaa48230dee8e08da6?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/1625856/victor"}, "is_accepted": false, "score": 0, "last_activity_date": 1548869039, "creation_date": 1548869039, "answer_id": 54446169, "question_id": 54439368, "link": "https://stackoverflow.com/questions/54439368/calling-udp-function-automatically/54446169#54446169", "title": "Calling UDP function Automatically", "body": "<p>Please refer to the code I've written as part of my Bsc for CC2538: <a href=\"https://github.com/VictorAtPL/openthread/blob/thesis-final/examples/apps/pp_4/main.c\" rel=\"nofollow noreferrer\">https://github.com/VictorAtPL/openthread/blob/thesis-final/examples/apps/pp_4/main.c</a></p>\n\n<p>There is a function that starts up UDP server and a handler which responds for an UDP datagram.</p>\n\n<p>Please also track what changes have I made in comparison to master branch.</p>\n\n<p>If you want further help, please upload your code somewhere and specify what works as you do not expect.</p>\n"}], "owner": {"reputation": 1, "user_id": 10989811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f4d959104eb7546df714100fda41df?s=128&d=identicon&r=PG&f=1", "display_name": "user10989811", "link": "https://stackoverflow.com/users/10989811/user10989811"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548869039, "creation_date": 1548847091, "last_edit_date": 1548848107, "question_id": 54439368, "link": "https://stackoverflow.com/questions/54439368/calling-udp-function-automatically", "title": "Calling UDP function Automatically", "body": "<p>I am using cli_ftd (Thread) example from TI Resource explorer(TI cc1352R).</p>\n\n<p>I would like to call the UDP functions(i.e <code>open</code>, <code>bind</code>, <code>connect</code>, <code>send</code>) automatically at the booting time of the device(My thread network starts at boot time without using CLI ), \nso that I don't have to use the Command line(CLI).</p>\n\n<p>I am not able to understand how to modify the project to do the aforementioned.</p>\n\n<p>Thank you in advance for your answers.</p>\n"}, {"tags": ["c", "linux", "user-interface", "testing", "gtk"], "comments": [{"owner": {"reputation": 7127, "user_id": 186347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41faca9cd29ae1ff1e10ffd01eb15e52?s=128&d=identicon&r=PG", "display_name": "ntd", "link": "https://stackoverflow.com/users/186347/ntd"}, "edited": false, "score": 0, "creation_date": 1549435765, "post_id": 54439174, "comment_id": 95896344, "body": "<a href=\"https://developer.gnome.org/gtk3/stable/GtkTextView.html\" rel=\"nofollow noreferrer\">GtkTextView</a> on stock GTK+ or <a href=\"https://developer.gnome.org/vte/unstable/VteTerminal.html\" rel=\"nofollow noreferrer\">VteTerminal</a> from libvte."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 1, "creation_date": 1549967476, "post_id": 54439174, "comment_id": 96087224, "body": "Given the constraints, and that you&#39;re a kernel dev, aren&#39;t you supposed to just use the Linux framebuffer? Check with your management if they really want a graphical application, because that&#39;s not what I understand from the requirement."}], "owner": {"reputation": 3001, "user_id": 2830324, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e718abdfd920bb3f66d81bbbb10e80f?s=128&d=identicon&r=PG&f=1", "display_name": "md.jamal", "link": "https://stackoverflow.com/users/2830324/md-jamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548846478, "creation_date": 1548846478, "question_id": 54439174, "link": "https://stackoverflow.com/questions/54439174/gtk-application-for-scrolling-h", "title": "GTK Application for scrolling H", "body": "<p>I am a Linux Kernel developer, we have a board running Yocto Image, got a requirement to display \"A full black screen with scrolling H\u2019s \" for CISPR test. I am using GTK Library to this, Wrote a sample Code which blanks the whole screen and write \"Hello World\" on to the centre.</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\nint main (int argc, char *argv[])\n{\n    GtkWidget *window;// GtkWidget is the storage type for widgets\n    GtkWidget *label;\n    gtk_init (&amp;argc, &amp;argv);// This is called in all GTK applications. Arguments are parsed\n                        //from the command line and are returned to the application.\n    window=gtk_window_new(GTK_WINDOW_TOPLEVEL); //creating a new window.\n    label = gtk_label_new(\"Hello World\");\n    gtk_label_set_justify(GTK_LABEL(label), GTK_JUSTIFY_LEFT);\n    gtk_container_add(GTK_CONTAINER(window), label);\n    gtk_window_set_decorated(GTK_WINDOW(window), FALSE);\n    GdkCursor* Cursor = gdk_cursor_new(GDK_BLANK_CURSOR);\n    GdkWindow* win = gtk_widget_get_window((window));\n    gdk_window_set_cursor((win),Cursor);\n    gtk_widget_show_all(window); //The final step is to display this newly created widget.\n   gtk_main (); //All GTK applications must have a gtk_main(). Control ends here\n                       //and waits for an event to occur (like a key press or mouse event).\n   return 0;\n}\n</code></pre>\n\n<p>As I am a newbie in GUI, can anyone guide me what all widgets should I use to get the scrolling H's.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=PWkuqyC3AWk\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=PWkuqyC3AWk</a></p>\n"}, {"tags": ["c", "gtk3", "glade"], "comments": [{"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1548846547, "post_id": 54438812, "comment_id": 95687589, "body": "1) don&#39;t post pictures of code. 2) are <code>gtk_list_box_prepend</code> and <code>gtk_list_box_insert</code> what you are looking for?"}, {"owner": {"reputation": 63, "user_id": 7976847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nf76j.png?s=128&g=1", "display_name": "TheOliveTurtle", "link": "https://stackoverflow.com/users/7976847/theoliveturtle"}, "reply_to_user": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1548847404, "post_id": 54438812, "comment_id": 95688106, "body": "@AlexanderDmitriev I have used tried to make a GtkListBoxRow and added a Box into it that contains two labels.. and than inserted via <code>gtk_list_box_insert(GTK_CONTAINER(list_box), row)</code> and with prepend too. Unfortunately it didn&#39;t work, I don&#39;t get any errors nor warning on the console and no results either."}, {"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1548923389, "post_id": 54438812, "comment_id": 95720617, "body": "Did you call <code>gtk_widget_show_all</code>?"}, {"owner": {"reputation": 63, "user_id": 7976847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nf76j.png?s=128&g=1", "display_name": "TheOliveTurtle", "link": "https://stackoverflow.com/users/7976847/theoliveturtle"}, "reply_to_user": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1548924913, "post_id": 54438812, "comment_id": 95721431, "body": "@AlexanderDmitriev Unfortuantely I did, I get the window and its elements with the listview shown \ud83d\ude15 I have even added a row in the .glade file, it is correctly shown but I couldnt pack another row using code \ud83d\ude26"}, {"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 1, "creation_date": 1548926406, "post_id": 54438812, "comment_id": 95722334, "body": "Did you call <code>gtk_widget_show_all</code> for the newly created row?"}, {"owner": {"reputation": 63, "user_id": 7976847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nf76j.png?s=128&g=1", "display_name": "TheOliveTurtle", "link": "https://stackoverflow.com/users/7976847/theoliveturtle"}, "reply_to_user": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1548950145, "post_id": 54438812, "comment_id": 95736980, "body": "Thank you very much @AlexanderDmitriev  You have been a great support, it worked just fine :)"}], "owner": {"reputation": 63, "user_id": 7976847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nf76j.png?s=128&g=1", "display_name": "TheOliveTurtle", "link": "https://stackoverflow.com/users/7976847/theoliveturtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1548847599, "creation_date": 1548845436, "last_edit_date": 1548847599, "question_id": 54438812, "link": "https://stackoverflow.com/questions/54438812/how-to-add-data-rows-to-a-gtklistbox-c", "title": "How to add data (rows) to a GtkListBox (C)", "body": "<p>I am developing a software using C programming language and the GUI library GTK+3.\nI have made my window via Glade Builder and I made it so when I click on a button it refresh my GtkListBox.\nI can access the GtkListBox easily, but the problem is that I don't know how to even add rows/data to my GtkListBox...</p>\n\n<p>I have this function as a start:</p>\n\n<pre><code>void on_refresh_btn_activate(GtkMenuItem *refresh_btn, GtkListBox *list_box){\n    printf(\"TODO\\n\");   \n}\n</code></pre>\n\n<p>EDIT:\nI have tried this code:</p>\n\n<pre><code>void on_refresh_btn_activate(GtkMenuItem *refresh_btn, GtkListBox *list_box){\n    printf(\"TODO\\n\");\n    GtkWidget *label1, *label2, *hbox, *row;\n\n    row = gtk_list_box_row_new();\n    hbox = gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 0);\n    label1 = gtk_label_new(\"Hello\");\n    label2 = gtk_label_new(\"XD\");\n\n    gtk_container_add(GTK_CONTAINER(row), hbox);\n    gtk_box_pack_start(GTK_BOX(hbox), label1, TRUE, TRUE, 0);\n    gtk_box_pack_start(GTK_BOX(hbox), label2, TRUE, TRUE, 0);\n\n    gtk_container_add(GTK_CONTAINER(list_box), row);\n    //gtk_list_box_insert(list_box, row, 0);\n    //gtk_list_box_prepend(list_box, row);\n\n    printf(\"inserted\\n\");\n}\n</code></pre>\n\n<p>I get no errors nor warnings but no results :'(</p>\n\n<p>I would appreciate any one that could help. Thanks.</p>\n"}, {"tags": ["c", "scanf", "getchar"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 4, "creation_date": 1548846120, "post_id": 54438763, "comment_id": 95687304, "body": "Incidentally, it&#39;s not good practice to use <code>while(getchar() != &#39;\\n&#39;);</code>, as, in case of end of file (e.g. the user presses Ctrl-D or the file redirected to stdin ends) or another error it will loop indefinitely (<code>getchar()</code> returns <code>EOF</code> forever, and your loop never ends). In general you want something more like <code>int ch; while((ch = getchar()) != EOF &amp;&amp; ch != &#39;\\n&#39;);</code>."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1548847938, "post_id": 54438763, "comment_id": 95688409, "body": "You could use <code>scanf(&quot;%*[^\\n]&quot;); scanf(&quot;%*c&quot;);</code> instead too"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1548848789, "post_id": 54438763, "comment_id": 95688904, "body": "It&#39;s <b>all in the docs</b>: <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow noreferrer\">scanf()</a>, <a href=\"http://man7.org/linux/man-pages/man3/fgetc.3.html\" rel=\"nofollow noreferrer\">getch()</a>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1548849356, "post_id": 54438763, "comment_id": 95689250, "body": "Don&#39;t use <code>scanf()</code> for user input."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 1, "last_activity_date": 1548845383, "creation_date": 1548845383, "answer_id": 54438793, "question_id": 54438763, "link": "https://stackoverflow.com/questions/54438763/understanding-while-getchar-n/54438793#54438793", "title": "Understanding &quot;while (getchar() != &#39;\\n&#39;)&quot;", "body": "<blockquote>\n  <p>I have been Googling it a bit and from what I can tell, 'getchar()'\n  uses 'stdin' and that is the buffer that is being cleared with that\n  command. That would by extension also mean that 'scanf' is also using\n  'stdin' in that case. Is that assumption correct?</p>\n</blockquote>\n\n<p>Yes, that's correct.</p>\n\n<p>According to the <a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\">documentation</a> (emphasis mine):</p>\n\n<blockquote>\n  <p>[scnaf] Reads data <strong>from stdin</strong> and stores them according to the parameter\n  format into the locations pointed by the additional arguments.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1548846108, "last_edit_date": 1548846108, "creation_date": 1548845739, "answer_id": 54438901, "question_id": 54438763, "link": "https://stackoverflow.com/questions/54438763/understanding-while-getchar-n/54438901#54438901", "title": "Understanding &quot;while (getchar() != &#39;\\n&#39;)&quot;", "body": "<p>Yes, that's the case. It is explicitly mentioned in the docs.</p>\n\n<p>Quoting the <code>C11</code> standard, chapter \u00a77.21.6.2</p>\n\n<blockquote>\n  <p>The <code>fscanf</code> function reads input from the stream pointed to by <code>stream</code>, under control\n  of the string pointed to by format that specifies the admissible input sequences and how\n  they are to be converted for assignment, using subsequent arguments as pointers to the\n  objects to receive the converted input. [....]</p>\n</blockquote>\n\n<p>and chapter \u00a77.21.6.4</p>\n\n<blockquote>\n  <p>The <code>scanf</code> function is equivalent to <code>fscanf</code> with the argument <code>stdin</code> interposed\n  before the arguments to <code>scanf</code>.</p>\n</blockquote>\n\n<hr>\n\n<p>Just to add a bit on why you need <a href=\"https://linux.die.net/man/3/getchar\" rel=\"nofollow noreferrer\"><code>getchar()</code></a> to clear the <code>stdin</code> when <code>scanf()</code> also reads from <code>stdin</code>:</p>\n\n<p><code>scanf()</code> only reads from the input buffer if the matching is success, pointed to by format that specifies the admissible input sequences. In case, the matching fails, which is your case, supplying <code>char</code> where <code>int</code> is expected (most likely, user use of <code>%d</code> conversion specifier), the input in the buffer remains unread and eligible to be read by next call to <code>scanf()</code>. </p>\n\n<p>Thus in case call to <code>scanf()</code> is made, it is always advised to check failure and clean up the buffer using <code>getchar()</code>, which reads the <code>stdin</code>, character by character and return the character read as an <code>unsigned char</code> cast to an <code>int</code> in every call, thereby consuming <em>any</em> entry in the buffer and clearing it.</p>\n"}], "owner": {"reputation": 33, "user_id": 10978981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f3b7942e1434acaf87088419d6acef?s=128&d=identicon&r=PG&f=1", "display_name": "DDT", "link": "https://stackoverflow.com/users/10978981/ddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1259, "favorite_count": 0, "accepted_answer_id": 54438901, "answer_count": 2, "score": 3, "last_activity_date": 1548855145, "creation_date": 1548845269, "last_edit_date": 1548855145, "question_id": 54438763, "link": "https://stackoverflow.com/questions/54438763/understanding-while-getchar-n", "title": "Understanding &quot;while (getchar() != &#39;\\n&#39;)&quot;", "body": "<p>I'd like to gain a little better understanding of how things work in the background in regards to this command.</p>\n\n<p>I started off with trying to prevent my application from failing when <code>scanf()</code> received a <code>char</code> instead of the <code>int</code> it was expecting. The solution provided to me was to add the line <code>while (getchar() != '\\n');</code> to clear the input buffer.\nAnd it worked. Great!</p>\n\n<p>But since I was otherwise using <code>scanf()</code> and not <code>getchar()</code> I found it a bit confusing that I use a completely different command for input to clear the buffer.</p>\n\n<p>I have been Googling it a bit and from what I can tell, <code>getchar()</code> uses <code>stdin</code> and that is the buffer that is being cleared with that command. That would by extension also mean that <code>scanf()</code> is also using <code>stdin</code> in that case.</p>\n\n<p>Is that assumption correct?</p>\n"}, {"tags": ["c", "windows", "winapi", "graphics", "gdi"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548838546, "post_id": 54436611, "comment_id": 95682560, "body": "Because for some historic reason that index is one-based instead of zero-based?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1548839624, "post_id": 54436611, "comment_id": 95683251, "body": "&quot;Why must add 1 to this value?&quot; Because the documentation tells you to do so."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 5, "creation_date": 1548840126, "post_id": 54436611, "comment_id": 95683604, "body": "To differenciate <code>NULL</code> and <code>COLOR_SCROLLBAR</code>?"}, {"owner": {"reputation": 11, "user_id": 9693774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18958929cc9126077a0bca388cf36c48?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo121", "link": "https://stackoverflow.com/users/9693774/jozo121"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1548844022, "post_id": 54436611, "comment_id": 95686004, "body": "@Mathieu: Please post as answer, i think that is right."}, {"owner": {"reputation": 11, "user_id": 9693774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18958929cc9126077a0bca388cf36c48?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo121", "link": "https://stackoverflow.com/users/9693774/jozo121"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1548844083, "post_id": 54436611, "comment_id": 95686036, "body": "@DavidHeffernan: Nice comment, must be preserved for future generations."}], "answers": [{"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 1, "last_activity_date": 1548844753, "creation_date": 1548844753, "answer_id": 54438609, "question_id": 54436611, "link": "https://stackoverflow.com/questions/54436611/why-we-need-add-1-to-background-brush-color/54438609#54438609", "title": "Why we need add 1 to background brush color?", "body": "<p>It may be because the <code>hbrBackground</code> field accept <code>NULL</code> value.</p>\n\n<p>It's for <code>RegisterClass()</code> function to make the difference between <code>COLOR_SCROLLBAR</code> which is <code>0</code> and <code>NULL</code> which is an acceptable value.</p>\n"}], "owner": {"reputation": 11, "user_id": 9693774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18958929cc9126077a0bca388cf36c48?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo121", "link": "https://stackoverflow.com/users/9693774/jozo121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54438609, "answer_count": 1, "score": -1, "last_activity_date": 1548844753, "creation_date": 1548838400, "question_id": 54436611, "link": "https://stackoverflow.com/questions/54436611/why-we-need-add-1-to-background-brush-color", "title": "Why we need add 1 to background brush color?", "body": "<p>One of member of the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/ns-winuser-tagwndclassa\" rel=\"nofollow noreferrer\">WNDCLASS</a> structure is handle to the class background brush.</p>\n\n<p>From description:</p>\n\n<blockquote>\n  <p>This member can be a handle to the physical brush to be used for painting the background, or it can be a color value. A color value must be one of the following standard system colors (<strong>the value 1 must be added to the chosen color</strong>). </p>\n</blockquote>\n\n<p>QUESTION:</p>\n\n<p>Why must add 1 to this value?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1548838242, "post_id": 54436556, "comment_id": 95682358, "body": "What&#39;s the error?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1548838267, "post_id": 54436556, "comment_id": 95682376, "body": "<code>sizeof(toAppend)</code> is highly suspicious."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548838291, "post_id": 54436556, "comment_id": 95682398, "body": "<code>sizeof</code> on a pointer returns the size of the <i>pointer</i>, not to whatever it points to. If you want to get the length of a string, use <a href=\"https://en.cppreference.com/w/c/string/byte/strlen\" rel=\"nofollow noreferrer\"><code>strlen</code></a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548838361, "post_id": 54436556, "comment_id": 95682445, "body": "Also never assign the result of <a href=\"https://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\"><code>realloc</code></a> back to the pointer you use as argument. If the function fails to reallocate, the old memory is still valid and by reassigning you lose the pointer to that old memory."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548838433, "post_id": 54436556, "comment_id": 95682501, "body": "And lastly, the most likely problem behind your crash: Arguments in C are passed <i>by value</i>. The assignment to <code>array</code> inside the <code>stringArrayAppend</code> function only modifies the <b><i>local</i></b> variable <code>array</code> inside that function. Do some research about <i>emulating pass by reference in C</i> for how to fix it."}, {"owner": {"reputation": 11, "user_id": 10989080, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213433410701865/picture?type=large", "display_name": "Romeo", "link": "https://stackoverflow.com/users/10989080/romeo"}, "edited": false, "score": 0, "creation_date": 1548838679, "post_id": 54436556, "comment_id": 95682639, "body": "Thank you so much for your quick response. It works for the first 3 iterations, which I find really strange, then seg faults. Also, regarding your last statement, are you referring to making yet another pointer to the double pointer and passing the triple pointer by reference into the function so that it can be realloc&#39;ed (mutated) correctly? I&#39;d appreciate any resources or wisdom you could share with me regarding this."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548838760, "post_id": 54436556, "comment_id": 95682697, "body": "You need to use the address-of operator <code>&amp;</code> to pass a pointer to the variable, which indeed will be a &quot;triple&quot; pointer (it&#39;s not always bad)."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1548840614, "post_id": 54436556, "comment_id": 95683901, "body": "else you can return it as value : <code>char** stringArrayAppend(char** array, int numLines, char* toAppend)</code> in the same way realloc does, that also have the advantage to not lost the initial char** when realloc returns 0"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1548841115, "post_id": 54436556, "comment_id": 95684188, "body": "Please see the linked duplicate. Your problem is the very same, except you have one more level of indirection."}, {"owner": {"reputation": 11, "user_id": 10989080, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213433410701865/picture?type=large", "display_name": "Romeo", "link": "https://stackoverflow.com/users/10989080/romeo"}, "edited": false, "score": 0, "creation_date": 1549265981, "post_id": 54436556, "comment_id": 95826765, "body": "Thank you so much to all of you for your feedback! Bruno&#39;s solution turned out to be a lot easier and cleaner than the triple pointer method, and all my errors went away. See below corrected code:  char** stringArrayAppend(char** array, int numLines, char* toAppend) {     char** newArray = realloc(array, sizeof(char*) * numLines);     if (newArray == NULL) {         printf(&quot;Failed to reallocate string array to append string %s\\n&quot;, toAppend);         freeStringArray(newArray, numLines);         return 0;     }     newArray[numLines - 1] = toAppend;     return newArray; }"}], "owner": {"reputation": 11, "user_id": 10989080, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213433410701865/picture?type=large", "display_name": "Romeo", "link": "https://stackoverflow.com/users/10989080/romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1548841052, "answer_count": 0, "score": 0, "last_activity_date": 1548838464, "creation_date": 1548838201, "last_edit_date": 1548838464, "question_id": 54436556, "link": "https://stackoverflow.com/questions/54436556/seg-fault-with-dynamic-realloc-on-array-of-strings", "closed_reason": "Duplicate", "title": "Seg Fault with Dynamic Realloc on Array of Strings", "body": "<p>I have tried everything I can and read every single thread on StackOverflow to no avail. Can you please help me understand the Valgrind errors I am getting with my code?</p>\n\n<pre><code>void stringArrayAppend(char** array, int numLines, char* toAppend) {\n\n    printf(\"Size of toAppend: %zu\\n\", sizeof(toAppend));\n    printf(\"Size of character pointer: %zu\\n\", sizeof(char*));\n    array = realloc(array, sizeof(char*) * numLines);\n    if (array == NULL) {\n\n        printf(\"Could not reallocate string array to append string %s\\n\", toAppend);\n        freeStringArray(array, numLines);\n        return;\n\n    }\n    array[numLines - 1] = toAppend;\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>First element of string upon creation: a\nSecond element of string upon creation:\nSize of string upon creation: 8\nEnter the poem:\nthe\nSize of input: 1\nSize of character: 1\nSize of toAppend: 8\nSize of character pointer: 8\n==24889== Invalid read of size 8\n==24889==    at 0x400A53: main (reversePoem.c:140)\n==24889==  Address 0x5205040 is 0 bytes inside a block of size 8 free'd\n==24889==    at 0x4C3016F: realloc (vg_replace_malloc.c:826)\n==24889==    by 0x400856: stringArrayAppend (reversePoem.c:62)\n==24889==    by 0x400A1B: main (reversePoem.c:137)\n==24889==  Block was alloc'd at\n==24889==    at 0x4C2DE56: malloc (vg_replace_malloc.c:299)\n==24889==    by 0x4006E1: createStringArray (reversePoem.c:10)\n==24889==    by 0x400949: main (reversePoem.c:95)\n==24889==\nLine string array after appending line string: [(null)]\nFirst element of string upon creation: a\nSecond element of string upon creation:\nSize of string upon creation: 8\n</code></pre>\n"}, {"tags": ["c", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1548838665, "post_id": 54435972, "comment_id": 95682627, "body": "What is your valgring version?"}, {"owner": {"reputation": 31, "user_id": 9714561, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211802933329330/picture?type=large", "display_name": "Elena Guidi", "link": "https://stackoverflow.com/users/9714561/elena-guidi"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1548853148, "post_id": 54435972, "comment_id": 95691378, "body": "@n.m.valgrind-3.10.0"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1548860829, "post_id": 54435972, "comment_id": 95696382, "body": "You may want to upgrade, mine is 3.13.0."}, {"owner": {"reputation": 31, "user_id": 9714561, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211802933329330/picture?type=large", "display_name": "Elena Guidi", "link": "https://stackoverflow.com/users/9714561/elena-guidi"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1548862304, "post_id": 54435972, "comment_id": 95697417, "body": "@n.m.I need to use this version because it&#39;s a project of the university and they check with this version."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1548864771, "post_id": 54435972, "comment_id": 95698892, "body": "Can you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates valgrind reporting false positives?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9714561, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211802933329330/picture?type=large", "display_name": "Elena Guidi", "link": "https://stackoverflow.com/users/9714561/elena-guidi"}, "edited": false, "score": 0, "creation_date": 1548836718, "post_id": 54436061, "comment_id": 95681551, "body": "Hello! Thanks for the fast anwer! Unfortunately I can&#39;t suppress valgrind.. This is a project for university and they test valgrind results (no valgrind errors are allowed) so I have to delete this error somehow!"}, {"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "reply_to_user": {"reputation": 31, "user_id": 9714561, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211802933329330/picture?type=large", "display_name": "Elena Guidi", "link": "https://stackoverflow.com/users/9714561/elena-guidi"}, "edited": false, "score": 0, "creation_date": 1548836888, "post_id": 54436061, "comment_id": 95681650, "body": "@ElenaGuidi Interesting. Well there&#39;s always a workaround. Easy question first - do they let you link against a different libc? E.g. <a href=\"https://www.musl-libc.org/\" rel=\"nofollow noreferrer\">musl-libc.org</a>"}, {"owner": {"reputation": 31, "user_id": 9714561, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211802933329330/picture?type=large", "display_name": "Elena Guidi", "link": "https://stackoverflow.com/users/9714561/elena-guidi"}, "edited": false, "score": 0, "creation_date": 1548837146, "post_id": 54436061, "comment_id": 95681777, "body": "Good question! They say we have to use things done in the course.. and we have not study this library so I think is not allowed."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 31, "user_id": 9714561, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211802933329330/picture?type=large", "display_name": "Elena Guidi", "link": "https://stackoverflow.com/users/9714561/elena-guidi"}, "edited": false, "score": 0, "creation_date": 1548839162, "post_id": 54436061, "comment_id": 95682952, "body": "@ElenaGuidi You may want to talk to your professor and ask what exact version of gcc, valgrind, libc, ... you should use. Then if this doesn&#39;t work, talk to them again and demonstrate that it doesn&#39;t work. I don&#39;t get any valgrind errors with pthreads programs on a stock Ubuntu 18, so you may want to try that."}, {"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "reply_to_user": {"reputation": 31, "user_id": 9714561, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211802933329330/picture?type=large", "display_name": "Elena Guidi", "link": "https://stackoverflow.com/users/9714561/elena-guidi"}, "edited": false, "score": 0, "creation_date": 1548847314, "post_id": 54436061, "comment_id": 95688049, "body": "@ElenaGuidi Another option is to use a version where you provide the stack. Try <a href=\"http://man7.org/linux/man-pages/man3/pthread_attr_setstack.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/pthread_attr_setstack.3.html</a> to see if it still triggers an error."}], "tags": [], "owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "is_accepted": false, "score": 2, "last_activity_date": 1548836503, "creation_date": 1548836503, "answer_id": 54436061, "question_id": 54435972, "link": "https://stackoverflow.com/questions/54435972/pthread-created-followed-by-pthread-join-valgrind-possible-loss-c/54436061#54436061", "title": "pthread_created followed by pthread_join valgrind possible loss c", "body": "<p>I don't think this is a real leak, or if it is it's most likely in low-level code. And it's debatable if it should be considered a leak or an eager optimization.</p>\n\n<p>See <a href=\"http://sourceware.org/ml/glibc-bugs/2007-04/msg00036.html\" rel=\"nofollow noreferrer\">http://sourceware.org/ml/glibc-bugs/2007-04/msg00036.html</a>:</p>\n\n<blockquote>\n  <p>It is not a real leak. As far as i know The buffer allocated at \n  pthread_create() is used to extend the stack of threads.\n  If you pthread_join() and pthread_create() again The old position in the \n  stack will be used by the new one.</p>\n</blockquote>\n\n<p>This is also alluded to in <a href=\"https://stackoverflow.com/a/17642468/714501\">https://stackoverflow.com/a/17642468/714501</a></p>\n\n<blockquote>\n  <p>some implementations of POSIX threads (I'm guessing you're using glibc/NPTL) cache and reuse thread resources rather than freeing them fully. </p>\n</blockquote>\n\n<p>I think for this case you could install a valgrind suppression:</p>\n\n<p><a href=\"http://valgrind.org/docs/manual/mc-manual.html#mc-manual.suppfiles\" rel=\"nofollow noreferrer\">http://valgrind.org/docs/manual/mc-manual.html#mc-manual.suppfiles</a></p>\n"}], "owner": {"reputation": 31, "user_id": 9714561, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211802933329330/picture?type=large", "display_name": "Elena Guidi", "link": "https://stackoverflow.com/users/9714561/elena-guidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548837877, "creation_date": 1548836077, "last_edit_date": 1548837877, "question_id": 54435972, "link": "https://stackoverflow.com/questions/54435972/pthread-created-followed-by-pthread-join-valgrind-possible-loss-c", "title": "pthread_created followed by pthread_join valgrind possible loss c", "body": "<p>I've a problem with valgrind errors about loss memory.\nThis is my code:</p>\n\n<pre><code>if((err = pthread_create(&amp;handlert, NULL, &amp;handler, NULL)) != 0) perror(..)\n\nif((err = pthread_create(&amp;mastert , NULL, &amp;createmaster, NULL)) != 0) perror(..)\n\nfor(int i = 0; i &lt; THREADSINPOOL; i++) {\n    if((err = pthread_create(&amp;(f[i]), NULL, &amp;createpool, NULL)) != 0) perror(..)\n}\n\nif((err = pthread_join(handlert,(void*) &amp;sRet[1])) != 0) perror(..)\n\nif((err = pthread_join(mastert,(void*) &amp;lRet[1])) != 0) perror(..)\n\nfor(int i = 0; i &lt; THREADSINPOOL; i++) {\n    if((err = pthread_join(f[i], (void*) &amp;wRet[i])) != 0) perror(..)\n}\nreturn 0;\n</code></pre>\n\n<p>I've a join for each thread and I'm checking the result but valgrind still say:</p>\n\n<pre><code>==21610== 560 bytes in 1 blocks are possibly lost in loss record 8 of 12\n==21610==    at 0x4C2CC90: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==21610==    by 0x4012E44: allocate_dtv (dl-tls.c:296)\n==21610==    by 0x4012E44: _dl_allocate_tls (dl-tls.c:460)\n==21610==    by 0x4E3FCC0: allocate_stack (allocatestack.c:589)\n==21610==    by 0x4E3FCC0: pthread_create@@GLIBC_2.2.5 (pthread_create.c:495)\n==21610==    by 0x401B3B: main (myfile.c:85)\n</code></pre>\n\n<p>(Same error for every pthread create, changing only the line of the code)\nThank you in advance!</p>\n\n<p>EDIT: \nflags in compilation: --leak-check=full -std=c99 -Wall -pedantic -g -DMAKE_VALGRIND_HAPPY \nThere is only this error (don't look like a consequence of previous errors)</p>\n"}, {"tags": ["c", "structure"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1548837303, "post_id": 54435961, "comment_id": 95681859, "body": "If you are asking why you declared the member as an <code>int*</code> instead of an <code>int</code>... you tell us. We have no idea what this code is supposed to do. It looks like a linked list. It is custom for linked list nodes to hardcopy the data into the node itself. Why you aren&#39;t doing that, is anyone&#39;s guess."}], "answers": [{"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 2, "last_activity_date": 1548837100, "creation_date": 1548837100, "answer_id": 54436239, "question_id": 54435961, "link": "https://stackoverflow.com/questions/54435961/member-of-a-structure-pointer-is-also-a-pointer-what-should-temp-data-represen/54436239#54436239", "title": "member of a structure pointer is also a pointer. what should temp-&gt;data represent.Question is more clear in code", "body": "<p><code>int *data;</code> creates an unintialized pointer and must point to valid memory before it can be used. (failure to do so leads to <em>Undefined Behavior</em>, and likely a SegFault)</p>\n\n<p>For example:</p>\n\n<pre><code>temp-&gt;data = malloc (sizeof *temp-&gt;data);\nif (temp-&gt;data == NULL) {\n    perror (\"malloc-temp-&gt;data\");\n    /* handle error, e.g. return/exit */\n}\n</code></pre>\n\n<p>Now you can assign an integer value to <code>temp-&gt;data</code>. (don't forget to <code>free</code> the memory you allocate when it is no longer needed)</p>\n\n<p>Presuming you have done that (in some other code you didn't post), the following is wrong:</p>\n\n<pre><code> scanf(\"%d\",&amp;(temp-&gt;data));\n</code></pre>\n\n<p><code>temp-&gt;data</code> is already a pointer, no <code>'&amp;'</code> is needed before it.</p>\n\n<p>(you must ALWAYS <strong><em>validate</em></strong> the <code>scanf</code> return before you consider your input valid)</p>\n\n<p><code>&amp;temp-&gt;data</code> creates a <em>pointer-to-pointer-to</em> <code>int</code> (e.g. the address of the pointer to <code>data</code>). Printing pointer values with <code>%x</code> leads to undefined behavior unless <code>sizeof (a_pointer)</code> and <code>sizeof (unsigned)</code> are the same on your system (not for x86_64). Use <code>%p</code> to print addresses.</p>\n\n<p>Address those issues and let me know if you have further problems.</p>\n"}], "owner": {"reputation": 35, "user_id": 8119708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50dd6e71adcd8376712760eb7aad7e4f?s=128&d=identicon&r=PG&f=1", "display_name": "g_boy", "link": "https://stackoverflow.com/users/8119708/g-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1548854163, "accepted_answer_id": 54436239, "answer_count": 1, "score": 2, "last_activity_date": 1548839734, "creation_date": 1548836048, "last_edit_date": 1548839734, "question_id": 54435961, "link": "https://stackoverflow.com/questions/54435961/member-of-a-structure-pointer-is-also-a-pointer-what-should-temp-data-represen", "closed_reason": "Needs details or clarity", "title": "member of a structure pointer is also a pointer. what should temp-&gt;data represent.Question is more clear in code", "body": "<p>In first print   <code>temp-&gt;data</code> is address\nwhereas in later print <code>temp-&gt;data</code> becomes value\nand <code>*temp-&gt;data</code> prints nothing</p>\n\n<p>I have tried <code>assining</code> value like </p>\n\n<pre><code>int n = 5;\ntemp-&gt;data = &amp;n;\n</code></pre>\n\n<p>then *temp->data prints value 5</p>\n\n<pre><code>structure is\nstruct Node{\n    int *data;\n    struct Node *next;\n};\n/***part of code ***/\nstruct Node *temp = NULL;\n    temp = head;\n    while(count != l){\n         count++;\n         printf(\"%x   %x  %x \",temp,temp-&gt;data,&amp;(temp-&gt;data));\n         printf(\"enter %d element\\n\",count);\n            scanf(\"%d\",&amp;(temp-&gt;data));\n             printf(\"%d\\n\",temp-&gt;data);\n</code></pre>\n"}, {"tags": ["c", "declaration", "extern"], "comments": [{"owner": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1548835597, "post_id": 54435806, "comment_id": 95681042, "body": "What do you mean by &quot;there might be a conflict between error codes across the modules&quot;?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548835665, "post_id": 54435806, "comment_id": 95681068, "body": "I don&#39;t really get why it&#39;s a problem that <code>do_mod2</code> should return <code>1</code> on error as well. Calling code knows it&#39;s calling <code>do_mod2</code>, and not <code>do_mod1</code>"}, {"owner": {"reputation": 6828, "user_id": 8990329, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f073ad236ccf499ebfbe504bc79a2096?s=128&d=identicon&r=PG&f=1", "display_name": "Some Name", "link": "https://stackoverflow.com/users/8990329/some-name"}, "reply_to_user": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1548835666, "post_id": 54435806, "comment_id": 95681070, "body": "@Melon if I define the same error codes for errors in different modules the client of both of modules cannot distinguish the error simply using its code."}, {"owner": {"reputation": 6828, "user_id": 8990329, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f073ad236ccf499ebfbe504bc79a2096?s=128&d=identicon&r=PG&f=1", "display_name": "Some Name", "link": "https://stackoverflow.com/users/8990329/some-name"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548835700, "post_id": 54435806, "comment_id": 95681079, "body": "@StoryTeller The problem will be if I try to propagate error down the call stack and handle it somewhere else. So this <code>extern</code> is for propagation purpose only (distinguish errors by their codes)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548835769, "post_id": 54435806, "comment_id": 95681119, "body": "That won&#39;t be you, that will be the client. It&#39;s their choice is they want to distinguish the modules or handle it uniformally. And they have all the information they need even if both functions return 1."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548835776, "post_id": 54435806, "comment_id": 95681123, "body": "Preprocessor directives are terminated by newline, not a semicolon. That semicolon in your macro definitions will be part of the macro expansion."}, {"owner": {"reputation": 6828, "user_id": 8990329, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f073ad236ccf499ebfbe504bc79a2096?s=128&d=identicon&r=PG&f=1", "display_name": "Some Name", "link": "https://stackoverflow.com/users/8990329/some-name"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548835922, "post_id": 54435806, "comment_id": 95681190, "body": "@StoryTeller You mean to allow the client to define its own error codes or error structure and and wrap into it a library error-code?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1548836011, "post_id": 54435806, "comment_id": 95681229, "body": "No, I mean don&#39;t over engineer a solution because of an imagined problem, YAGNI."}, {"owner": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1548836169, "post_id": 54435806, "comment_id": 95681301, "body": "&quot;Some Name&quot; correct if I am wrong. If you are going to have functions mod_1 ... mod_256 so you will define diffirent error codes for each module? For example. you will have <code>FILE_NOT_FOUND_MOD1 = 1</code> and <code>FILE_NOT_FOUND_MOD2 = 2</code> ... <code>FILE_NOT_FOUND_MOD256 = 256</code>.    What&#39;s the point? The client knows what function it is using, so there&#39;s no point for having separate error codes."}, {"owner": {"reputation": 6828, "user_id": 8990329, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f073ad236ccf499ebfbe504bc79a2096?s=128&d=identicon&r=PG&f=1", "display_name": "Some Name", "link": "https://stackoverflow.com/users/8990329/some-name"}, "reply_to_user": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1548836432, "post_id": 54435806, "comment_id": 95681426, "body": "@Melon Sort of this. But for the specific file <code>FILE_NOT_FOUND</code> case I planned to declare it in all modules with the same name allowing them to link together or put it somewhere in a common <code>common_err.h</code>. So <code>modXXXerr.h</code> would have only module-specific error codes. Does it look weird or like overengineering?"}, {"owner": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1548836827, "post_id": 54435806, "comment_id": 95681610, "body": "Yes. Do you know <code>errno</code>?"}, {"owner": {"reputation": 6828, "user_id": 8990329, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f073ad236ccf499ebfbe504bc79a2096?s=128&d=identicon&r=PG&f=1", "display_name": "Some Name", "link": "https://stackoverflow.com/users/8990329/some-name"}, "reply_to_user": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 0, "creation_date": 1548836939, "post_id": 54435806, "comment_id": 95681672, "body": "@Melon <i>Do you know errno?</i> Sure, but I thought of abstracting away the POSIX-specific things like that. But probably that was the wrong direction..."}, {"owner": {"reputation": 527, "user_id": 689106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/22ef5ea2bedfb2a3575ac22fe06d6c72?s=128&d=identicon&r=PG", "display_name": "Melon", "link": "https://stackoverflow.com/users/689106/melon"}, "edited": false, "score": 1, "creation_date": 1548838012, "post_id": 54435806, "comment_id": 95682229, "body": "I didn&#39;t mean to abstract away the POSIX-specific things, but how it is designed. Error codes are shared between system calls, library calls, etc. The error codes in one place. Just imagine (in your scenario) if you want to add another error code to your module and you have to check if that error code is already used... That would be a clusterduck"}], "owner": {"reputation": 6828, "user_id": 8990329, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f073ad236ccf499ebfbe504bc79a2096?s=128&d=identicon&r=PG&f=1", "display_name": "Some Name", "link": "https://stackoverflow.com/users/8990329/some-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548835794, "creation_date": 1548835435, "last_edit_date": 1548835794, "question_id": 54435806, "link": "https://stackoverflow.com/questions/54435806/leaving-the-exact-definition-to-the-library-client", "title": "Leaving the exact definition to the library client", "body": "<p>I'm working on an application consisting of multiple modules which are built as static libraries. It looks as</p>\n\n<pre><code>root\n  |__module1\n  |    |__mod1.h\n  | \n  |__module2\n  |    |__mod2.h\n  |\n  main.c\n</code></pre>\n\n<p><code>mod1.h</code> (header guards omitted):</p>\n\n<pre><code>//returns 0 on success error code otherwise\nint do_mod1();\n</code></pre>\n\n<p><code>mod2.h</code> (header guards omitted):</p>\n\n<pre><code>//returns 0 on success error code otherwise\nint do_mod2();\n</code></pre>\n\n<p>I defined error codes right in the library header:</p>\n\n<p><code>mod1.h</code>:</p>\n\n<pre><code>#define MOD1_ERROR 1\nint do_mod1();\n</code></pre>\n\n<p><code>mod2.h</code></p>\n\n<pre><code>#define MOD2_ERROR 2 //1 can not be used otherwise it would introduce a conflict\nint do_mod2();\n</code></pre>\n\n<p>The problem is there might be conflict between error codes across the modules introducing unnecessary dependencies between each other. </p>\n\n<p>So I decided to introduce <code>extern</code> declaration, put error code in a separate header in the modules and provide a definition in the application which uses these modules. Something like this:</p>\n\n<p><code>mod1err.h</code>:</p>\n\n<pre><code>extern const int mod1_error;\n</code></pre>\n\n<p><code>mod2err.h</code>:</p>\n\n<pre><code>extern const int mod2_error;\n</code></pre>\n\n<p><code>application_error.h</code>:</p>\n\n<pre><code>#include mod1err.h\n#include mod2err.h\n\nconst int mod1_error = 1;\nconst int mod2_error = 2;\n</code></pre>\n\n<p>Is it a good practice to use <code>extern</code> declarations this way or there might be a better approach??</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1548835523, "post_id": 54435796, "comment_id": 95681006, "body": "Note that the <code>&quot;%[&quot;</code> format is terminated by the <code>&quot;]&quot;</code>. There&#39;s no <code>&quot;s&quot;</code> in the format specification."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1548835646, "post_id": 54435796, "comment_id": 95681056, "body": "And if you <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug your program</a>, do you notice if you copy the string null-terminator as well?"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10786121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UocuP.jpg?s=128&g=1", "display_name": "HaxCkzersssxz", "link": "https://stackoverflow.com/users/10786121/haxckzersssxz"}, "edited": false, "score": 0, "creation_date": 1548835926, "post_id": 54435854, "comment_id": 95681193, "body": "I get it now, thank you very much for this explanation. It&#39;s kind of hard to get this without any help. My program runs smoothly now, I just added 1 to the c=1."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 73, "user_id": 10786121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UocuP.jpg?s=128&g=1", "display_name": "HaxCkzersssxz", "link": "https://stackoverflow.com/users/10786121/haxckzersssxz"}, "edited": false, "score": 0, "creation_date": 1549008214, "post_id": 54435854, "comment_id": 95757659, "body": "That&#39;s why running the program in a debugger is important. It should reveal these things. BTW: You might consider accepting the answer."}], "tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": true, "score": 2, "last_activity_date": 1548835615, "creation_date": 1548835615, "answer_id": 54435854, "question_id": 54435796, "link": "https://stackoverflow.com/questions/54435796/extra-character-whenever-i-print-out-at-an-output/54435854#54435854", "title": "Extra Character Whenever I Print Out at An Output", "body": "<p>You forgot to copy the terminating null character.</p>\n\n<p>After your first loop <code>c = i;</code> holds the index of the 0 byte.\nIn the second loop you run until <code>i &lt; c</code>, i.e. you do not copy that 0 byte\nWithout terminating nul your string is as long as another random 0 byte is found in memory.</p>\n\n<p>Within a function only static variables are initialized. Hence your <code>temp</code> array hold indetermined values and you cannot rely to get a 0 character where you need it.</p>\n\n<p>You need to copy 1 more byte. </p>\n"}], "owner": {"reputation": 73, "user_id": 10786121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UocuP.jpg?s=128&g=1", "display_name": "HaxCkzersssxz", "link": "https://stackoverflow.com/users/10786121/haxckzersssxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54435854, "answer_count": 1, "score": 0, "last_activity_date": 1548835615, "creation_date": 1548835377, "question_id": 54435796, "link": "https://stackoverflow.com/questions/54435796/extra-character-whenever-i-print-out-at-an-output", "title": "Extra Character Whenever I Print Out at An Output", "body": "<p>I am trying to do a FLAMES program as an assignment and since I can't exactly post my whole code here, I will type in the part of the code that seems to be causing me errors since whenever I print out something, there are unexpected extra characters going with the output.</p>\n\n<p>I used a similar code as this one:</p>\n\n<pre><code>int main(){\n    char chari[100], temp[100];\n    int i, c;\n\n    printf(\"Enter a name: \\n\");\n    scanf(\" %[^\\n]s\", chari);\n\n    for (i=1; chari[i]!='\\0'; i++)\n    {\n        printf(\"%i\\n\", i);\n    }\n\n    c = i;\n\n    for (i=0; i&lt;c; i++)\n    {\n        printf(\"%i &lt; %i\\n\", i, c);\n        temp[i] = chari[i];\n    }\n\n    printf(\"%s \\n\", temp);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>I've been tweaking the codes for hours now but I still can't seem to find the problem. I'm also counting the number of letters in the string so I can stop some part of my program later on.</p>\n\n<p><strong>Input: cool</strong></p>\n\n<p><strong>Expected output: cool</strong></p>\n\n<p><strong>Actual Output: cool(&lt;-t</strong></p>\n"}, {"tags": ["c", "java-native-interface", "swig"], "comments": [{"owner": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 0, "creation_date": 1548834311, "post_id": 54435497, "comment_id": 95680458, "body": "so what should i do ? should i remove the line ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548834366, "post_id": 54435497, "comment_id": 95680489, "body": "What is the function you show supposed to do? Perhaps is should be a <i>proper</i> variable-argument function? And if that&#39;s not possible, then perhaps a redesign might be in order?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1548834513, "post_id": 54435497, "comment_id": 95680557, "body": "<code>argp2 = *(va_list **)&amp;jarg2; </code> -- What in the world ..???  Take a step back -- unravel all of those casts.  Read the compiler errors when you remove the cast.  What does the error state?  Whatever it is, <i>take heed and understand it</i>.  Don&#39;t cover up the errors by applying casts to &quot;shut the compiler up&quot;."}, {"owner": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 0, "creation_date": 1548834640, "post_id": 54435497, "comment_id": 95680619, "body": "I have autogenerated the JNI code from header file . basically i am generating the java wrapers for JNI calls. i don&#39;t know what is happening in the function. i am not c expert :p"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1548834808, "post_id": 54435497, "comment_id": 95680696, "body": "If the code you show is auto-generated, then what is it auto-generated <i>from</i>? Please show the SWIG input needed for the creation of such a function. And also tell us if this is something you wrote yourself, or if it&#39;s something you found or if it&#39;s part of a project or library that you want to use."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1548834914, "post_id": 54435497, "comment_id": 95680730, "body": "<a href=\"http://coliru.stacked-crooked.com/a/93d6d5fea60051d2\" rel=\"nofollow noreferrer\">See here</a>.  That 3 line program that performs the operation you&#39;re having trouble with doesn&#39;t compile.  If this is really autogenerated, why would the generator assume that <code>va_list</code> is assignable? (unless the code is meant for a certain compiler that by chance makes <code>va_list</code>&#39;s assignable)."}, {"owner": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 0, "creation_date": 1548834947, "post_id": 54435497, "comment_id": 95680746, "body": "char* stringFormatV(const char* format, va_list args); this the function from which i have autogenerated"}, {"owner": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 0, "creation_date": 1548835443, "post_id": 54435497, "comment_id": 95680967, "body": "Now how to make it assignable ?"}], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 0, "creation_date": 1548839147, "post_id": 54435991, "comment_id": 95682943, "body": "As i can understand you are saying that i should modify the function which is char* stringFormatV(const char* format, ...); like this and then generate a function for this and then pas the arguments in real stringFormatV function ?"}, {"owner": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 0, "creation_date": 1548839268, "post_id": 54435991, "comment_id": 95683029, "body": "Can you please help to write this as i am not C expert, i work on java"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 1, "creation_date": 1548839295, "post_id": 54435991, "comment_id": 95683043, "body": "@MushahidGillani No, I say that you should create a new <code>char* stringFormat(const char* format, ...)</code> function (note the lack of <code>V</code> in the name). This function will properly create a <code>va_list</code> and then call <code>stringFormatV</code>. You use the varargs <code>stringFormat</code> in SWIG. Unless this function <code>stringFormat</code> already exists, then use that."}, {"owner": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 0, "creation_date": 1548849100, "post_id": 54435991, "comment_id": 95689102, "body": "char* stringFormat(const char* format, ...);  swig is generating it with one argument only i.e it becomes static native String stringFormat(String jarg1); in java"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "edited": false, "score": 1, "creation_date": 1548849246, "post_id": 54435991, "comment_id": 95689195, "body": "@MushahidGillani Did you read the documentation I linked to? It says that what you see is the default behavior. There are workarounds, but you have to read about it. Please."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1548836139, "creation_date": 1548836139, "answer_id": 54435991, "question_id": 54435497, "link": "https://stackoverflow.com/questions/54435497/error-array-type-va-list-aka-builtin-va-list-is-not-assignable/54435991#54435991", "title": "error: array type &#39;va_list&#39; (aka &#39;__builtin_va_list&#39;) is not assignable", "body": "<p>You might want to <a href=\"http://www.swig.org/Doc1.3/Varargs.html\" rel=\"nofollow noreferrer\">read the variable length argument documentation</a>. Especially the section about <a href=\"http://www.swig.org/Doc1.3/Varargs.html#Varargs_nn8\" rel=\"nofollow noreferrer\">wrapping <code>va_list</code></a> which states</p>\n\n<blockquote>\n  <p>As far as we know, there is no obvious way to wrap these functions with SWIG.</p>\n</blockquote>\n\n<p>In short, it's not really possible.</p>\n\n<p>The only solution I can see is to provide a variable-argument function which SWIG generate a function for, and this vararg function calls the real <code>stringFormatV</code> function.</p>\n"}], "owner": {"reputation": 653, "user_id": 6049785, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fKDvwLpi8OU/AAAAAAAAAAI/AAAAAAAAAFU/qPf5P_Tphd0/photo.jpg?sz=128", "display_name": "Mushahid Gillani", "link": "https://stackoverflow.com/users/6049785/mushahid-gillani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 54435991, "answer_count": 1, "score": 0, "last_activity_date": 1548836139, "creation_date": 1548834082, "last_edit_date": 1548835377, "question_id": 54435497, "link": "https://stackoverflow.com/questions/54435497/error-array-type-va-list-aka-builtin-va-list-is-not-assignable", "title": "error: array type &#39;va_list&#39; (aka &#39;__builtin_va_list&#39;) is not assignable", "body": "<p>What should i do to make it assignable? I have auto-generated the JNI function from this function which was in header file. Here is the function declaration in header file *</p>\n\n<blockquote>\n  <p>char* stringFormatV(const char* format, va_list args);</p>\n</blockquote>\n\n<pre><code>    SWIGEXPORT jstring JNICALL Java_jnisourceJNI_stringFormatV(JNIEnv\n        *jenv, jclass jcls, jstring jarg1, jlong jarg2) {\n              jstring jresult = 0 ;\n              char *arg1 = (char *) 0 ;\n              va_list arg2 ;\n              va_list *argp2 ;\n              char *result = 0 ;\n\n              (void)jenv;\n              (void)jcls;\n              arg1 = 0;\n              if (jarg1) {\n                arg1 = (char *)(*jenv)-&gt;GetStringUTFChars(jenv, jarg1, 0);\n                if (!arg1) return 0;\n              }\n              argp2 = *(va_list **)&amp;jarg2; \n              if (!argp2) {\n                SWIG_JavaThrowException(jenv, SWIG_JavaNullPointerException, \"Attempt to dereference null va_list\");\n                return 0;\n              }\n              arg2 = *argp2; //here is the problem\n              result = (char *)stringFormatV((char const *)arg1,arg2);\n              if (result) jresult = (*jenv)-&gt;NewStringUTF(jenv, (const char *)result);\n              if (arg1) (*jenv)-&gt;ReleaseStringUTFChars(jenv, jarg1, (const char *)arg1);\n              return jresult;\n            }\n</code></pre>\n\n<p>at this line compiler gives error </p>\n\n<blockquote>\n  <p>arg2 = *argp2; //here is the problem</p>\n</blockquote>\n"}, {"tags": ["c", "assembly", "x86", "nasm"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548833471, "post_id": 54435293, "comment_id": 95680056, "body": "Unclear what your problem is. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548833532, "post_id": 54435293, "comment_id": 95680092, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3434827/assembly-keyboard-io-port\">Assembly Keyboard IO Port</a>"}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1548835134, "post_id": 54435293, "comment_id": 95680828, "body": "Is the <code>c</code> tag there because you&#39;re looking for help in C or, since there&#39;s nothing about C in your question, can it be safely removed?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1548835178, "post_id": 54435293, "comment_id": 95680849, "body": "What environment are you running this code in?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 3, "creation_date": 1548839545, "post_id": 54435293, "comment_id": 95683201, "body": "I&#39;d like to know the environment too. Real mode, protected mode? long mode? Don&#39;t think port 60h allows for 4 bytes to be read at a time. <code>mov cx, 0xa0000</code> is putting a value bigger than 16-bits into CX, so likely that will be truncated to 0"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1548841931, "post_id": 54435293, "comment_id": 95684715, "body": "It&#39;s ironic that your loop named <code>pause</code> does not contain <a href=\"https://www.felixcloutier.com/x86/pause\" rel=\"nofollow noreferrer\">a <code>pause</code> instruction</a>, only the <code>loop</code> instruction (although that is slow, except on AMD CPUs.)  But anyway, I suspect that you need to read 1 or maybe 2 bytes at a time.  Remember this stuff was designed before 32-bit existed."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1548923257, "post_id": 54435293, "comment_id": 95720535, "body": "@PeterCordes: That loop is broken. The PS/2 controller only has a 1-byte buffer, and when a byte arrives from a different PS/2 port (e.g. from keyboard) the buffer will be full, causing the loop to think data arrived from the mouse when it didn&#39;t, causing &quot;random&quot; corruption of data from mouse. For most (not all) PS/2 controllers, bit 5 of the status register is a &quot;byte is/isn&#39;t from second PS/2 port&quot; flag; but if that flag is tested (a &quot;wait for byte from the right PS/2 port&quot; loop) it&#39;ll wait forever (until the byte from the wrong device is removed by something running on a different CPU?)."}], "answers": [{"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 4, "last_activity_date": 1548835535, "creation_date": 1548835535, "answer_id": 54435835, "question_id": 54435293, "link": "https://stackoverflow.com/questions/54435293/how-do-i-extract-3-or-4-bytes-mouse-packets-from-port-60h-after-mouse-initialisa/54435835#54435835", "title": "How do I extract 3 or 4 bytes mouse packets from port 60h after mouse initialisation", "body": "<p>A modern PS/2 mouse typically has a default mode (\"2 button, no scrollwheel\") that uses an older (3 bytes per packet) protocol; then one or more better modes (\"5 button, with scrollwheel\") that uses a different (4 bytes per packet) protocol. To switch modes there's a sequence of existing commands (and not a simple \"change modes\" command).</p>\n\n<p>Specifically, to change from the default mode to \"Intellimouse Extensions\" mode (3 buttons with scrollwheel, 4 byte packet):</p>\n\n<ul>\n<li>Set sample rate 200</li>\n<li>Set sample rate 100</li>\n<li>Set sample rate 80</li>\n</ul>\n\n<p>And to change to \"5 button mode\" (up to 5 buttons with scrollwheel, 4 byte packet):</p>\n\n<ul>\n<li>Set sample rate 200</li>\n<li>Set sample rate 200</li>\n<li>Set sample rate 80</li>\n</ul>\n\n<p>For more (better) information, see: <a href=\"http://www.isdaman.com/alsos/hardware/mouse/ps2interface.htm\" rel=\"nofollow noreferrer\">http://www.isdaman.com/alsos/hardware/mouse/ps2interface.htm</a></p>\n\n<p>Note that you should never poll. Specifically, unless you are using IRQs (e.g. ISA IRQ1 for first PS/2 port, ISA IRQ 12 for 2nd PS/2 port) it's impossible to reliably (without race conditions) determine which PS/2 port a byte came from.</p>\n\n<p>More specifically, the PS/2 controller driver should use IRQs, and should send bytes received on \"1st PS/2 port\" to whichever driver is being used for whichever device happens to be plugged into the 1st PS/2 port (keyboard, mouse, bar-code scanner, touchpad, ...); and send bytes received on \"2st PS/2 port\" to whichever driver is being used for whichever device happens to be plugged into the 2st PS/2 port. The mouse driver itself would receive the data (e.g. from a pipe or message or callback or who-knows-what) and add the byte to a (3 or 4 byte) packet buffer (while checking the \"always 0\" bit to ensure that it remains in sync with the device, and while handling special codes like \"ACK\" and \"RESEND\").</p>\n"}], "owner": {"reputation": 27, "user_id": 9756694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21a0782f8dac5304595dede9a08c51d?s=128&d=identicon&r=PG&f=1", "display_name": "Lloyd Nyahwai", "link": "https://stackoverflow.com/users/9756694/lloyd-nyahwai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548836500, "creation_date": 1548833245, "last_edit_date": 1548836500, "question_id": 54435293, "link": "https://stackoverflow.com/questions/54435293/how-do-i-extract-3-or-4-bytes-mouse-packets-from-port-60h-after-mouse-initialisa", "title": "How do I extract 3 or 4 bytes mouse packets from port 60h after mouse initialisation", "body": "<p>Once a mouse has been initialized, a mouse sends 3 or 4 byte packets to communicate mouse movement, and mouse button press/release events. These packets show up asynchronously as data on IO port <code>0x60</code>.   </p>\n\n<p>My question is how do I extract those 4 or 5 byte packets </p>\n\n<p>In my assembly code I used <code>0xf4</code> mouse command to enable packet streaming </p>\n\n<p>and I tried this code to extract the 3 or 4 bytes packets like this:</p>\n\n<pre><code>xor cx, cx\nread:\nin al, 0x64\ntest al, 1b\nloopnz read\n\nmov cx, 0xa0000 ; waiting 655 360 times\npause:\nloop pause\n\nin eax, 60h\nmov [packets], eax\n\n;and the values i get here is 250(0xfa) only \n\n\nJmp $ \n</code></pre>\n\n<p>I'm using NASM Assembler under Windows 10</p>\n"}, {"tags": ["c", "microcontroller", "pic"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548833369, "post_id": 54435224, "comment_id": 95680008, "body": "... and your programming problem is? HW questions are OT <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10988543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd9457298047090a0e0032167de35ab?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas F.", "link": "https://stackoverflow.com/users/10988543/lucas-f"}, "edited": false, "score": 0, "creation_date": 1548870328, "post_id": 54436379, "comment_id": 95702067, "body": "Started sutdying about polling after reading your answer and found a good solution. Thanks for your help."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 1, "last_activity_date": 1548837571, "creation_date": 1548837571, "answer_id": 54436379, "question_id": 54435224, "link": "https://stackoverflow.com/questions/54435224/output-lenght-of-a-pic-microcontroller-dictated-by-a-pulse/54436379#54436379", "title": "Output lenght of a PIC microcontroller dictated by a pulse", "body": "<blockquote>\n  <p>how make the PIC detect a pulse.</p>\n</blockquote>\n\n<p>2 ways that I can see:</p>\n\n<ol>\n<li><p>If your input pins support interrupts for raising/falling events, then you can use those to detect the changes.</p></li>\n<li><p>Alternative way is to poll inputs on your main loop and compare their state to previous iteration.</p></li>\n</ol>\n\n<blockquote>\n  <p>I really dont know where to start from on the code</p>\n</blockquote>\n\n<p>Read the manual for your microcontroller to find out what the pins can do, and how to initialize, read, write and optionally setup interrupts for them.</p>\n\n<p>Toolchain and/or MCU documentation may have examples how to get started.</p>\n"}], "owner": {"reputation": 3, "user_id": 10988543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd9457298047090a0e0032167de35ab?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas F.", "link": "https://stackoverflow.com/users/10988543/lucas-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1548859443, "accepted_answer_id": 54436379, "answer_count": 1, "score": 0, "last_activity_date": 1548837571, "creation_date": 1548832930, "last_edit_date": 1548836515, "question_id": 54435224, "link": "https://stackoverflow.com/questions/54435224/output-lenght-of-a-pic-microcontroller-dictated-by-a-pulse", "closed_reason": "Needs more focus", "title": "Output lenght of a PIC microcontroller dictated by a pulse", "body": "<p>I\u00b4m new to PIC programming (but used to C language) and started using the 12F675 for my first project. </p>\n\n<p>One part of this project is a trigger that when activated (high state) makes the PIC send an output. However, the duration of this output is dictated by another input, a cutoff, that goes from high to low, stays low for some time, then goes to high state again.\nThe duration of this pulse will vary depending on the system I\u00b4ll use it on. What I want is the output of the PIC staying on high state from the time the trigger is activated to the first time the cutoff goes from high to low, so the falling edge of the signal, and, even if i keep the trigger activated, the output wont go high again until a rising edge from the trigger input occurs again.</p>\n\n<p>I\u00b4ll post a graph i made in MS Paint (sorry for the low quality) to show better what i want --> <a href=\"https://i.stack.imgur.com/5u3S7.png\" rel=\"nofollow noreferrer\">input and output graph</a></p>\n\n<p>I hope this question isn\u00b4t confusing (english isn\u00b4t my first language).</p>\n\n<p>Thanks in advance for any reply</p>\n\n<p>EDIT 1: I forgot to state the core of this question. The thing is that I really dont know where to start from on the code, and how make the PIC detect a pulse.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1548831030, "post_id": 54434760, "comment_id": 95678876, "body": "<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html#Option-Summary\" rel=\"nofollow noreferrer\">gcc option summary</a> It&#39;s probably <code>-O3</code> not <code>-o3</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1548831060, "post_id": 54434760, "comment_id": 95678886, "body": "Or simply <code>man gcc</code>. and it is <code>-O3</code> (capital &#39;Oh&#39;) not <code>-o3</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1548831660, "post_id": 54434760, "comment_id": 95679148, "body": "(the short version is <code>-Wall</code>, enable the compiler warnings listed in the <code>-Wall</code> set of warnings, <code>-Wfloat-equal</code>, warn if floating point numbers used in an equality, <code>-O3</code> enable most optimizations (<code>-Ofast</code> provides a few more)). For all questions like this, if you are going to do anything technical, you simply have to &quot;Look it Up&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1548838591, "post_id": 54435080, "comment_id": 95682589, "body": "<a href=\"https://gcc.gnu.org/onlinedocs/gcc-8.2.0/gcc/Warning-Options.html#Warning-Options\" rel=\"nofollow noreferrer\"><code>-Wall</code> does not turn on all warnings.</a>"}], "tags": [], "owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1548865424, "last_edit_date": 1548865424, "creation_date": 1548832340, "answer_id": 54435080, "question_id": 54434760, "link": "https://stackoverflow.com/questions/54434760/about-the-flags-used-in-compilation/54435080#54435080", "title": "about the flags used in compilation", "body": "<blockquote>\n  <p>-Wall -Wfloat-equal -o3 -fPIC\"</p>\n</blockquote>\n\n<p>So</p>\n\n<pre><code>-Wall\n</code></pre>\n\n<p>Enables apparently not all, but an awful lot of compiler warning messages. It should be used to generate better code since you'll know if anything's wrong. </p>\n\n<pre><code>-Wfloat-equal\n</code></pre>\n\n<p>Warns if floating point numbers are used in equality comparisons. Comparing floats for equality is risky business because 1.0 isn't necessarily the exact value. I'm not sure why you'd want it in this context, because it seems like -Wall would display the warnings anyways.</p>\n\n<pre><code>-o3\n</code></pre>\n\n<p>Is probably O3, or optimization level 3. AKA optimize to the maximum level permitted (iirc).</p>\n\n<pre><code>-fPIC\n</code></pre>\n\n<p>Will generate position independent code. This is a bit more complicated, but was <a href=\"https://stackoverflow.com/questions/5311515/gcc-fpic-option\">asked before</a>, but is useful for including in a library.</p>\n"}], "owner": {"reputation": 1, "user_id": 10988595, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Mq_Brs9bR-c/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOA-_6_dz47K8hGT-tF2iL2pWilSw/mo/photo.jpg?sz=128", "display_name": "devil_e", "link": "https://stackoverflow.com/users/10988595/devil-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1548865424, "creation_date": 1548830900, "last_edit_date": 1548836516, "question_id": 54434760, "link": "https://stackoverflow.com/questions/54434760/about-the-flags-used-in-compilation", "title": "about the flags used in compilation", "body": "<p>I ran into this while studying a line of code in cmake for building a library:</p>\n\n<pre><code>-Wall -Wfloat-equal -o3 -fPIC\n</code></pre>\n\n<p>What do these compiler flags mean and how do they work? Why do they need to be inserted?</p>\n"}, {"tags": ["c", "perf"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548830883, "post_id": 54434635, "comment_id": 95678803, "body": "Please make your code a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, e.g. by adding the <code>#include</code> statements. Just to make sure: did you make sure to execute your code as <code>root</code> if the <code>&#47;sys&#47;</code> path requires superuser rights?"}, {"owner": {"reputation": 11, "user_id": 10926262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9M62GcVXx64/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyIdHLxvN7j_J6UoslnU2KLsW8VQ/mo/photo.jpg?sz=128", "display_name": "Sourabh N", "link": "https://stackoverflow.com/users/10926262/sourabh-n"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1548845556, "post_id": 54434635, "comment_id": 95686907, "body": "I have updated the code to include all the header files so that it is verifiable. Also yes,  I was running it as the root user."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 1, "creation_date": 1548852089, "post_id": 54434635, "comment_id": 95690794, "body": "I added <code>perror(&quot;error&quot;);</code> after <code>if (fd == -1) {</code> and get <code>No such file or directory</code>, i.e. <code>ENOENT</code>. Quoting man page: &quot;Returned if the type setting is not valid.  This error  is  also               returned for some unsupported generic events.&quot;"}, {"owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "edited": false, "score": 1, "creation_date": 1549322731, "post_id": 54434635, "comment_id": 95853889, "body": "What is your exact CPU model (full name of model), what is the linux kernel version (full version is printed by <code>uname -a</code> with your hostname, delete hostname and show it)? Does <code>perf list</code> lists the event in question? Does <code>perf stat -a -e uncore_cha_0&#47;event=0x1111,umask=0x1&#47;</code> work? (<a href=\"https://software.intel.com/en-us/forums/software-tuning-performance-optimization-platform-monitoring/topic/700119\" rel=\"nofollow noreferrer\">software.intel.com/en-us/forums/&hellip;</a>). Uncore events are global and you can&#39;t count them for some single process, only for entire system (entire chip, NUMA node)."}], "owner": {"reputation": 11, "user_id": 10926262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9M62GcVXx64/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyIdHLxvN7j_J6UoslnU2KLsW8VQ/mo/photo.jpg?sz=128", "display_name": "Sourabh N", "link": "https://stackoverflow.com/users/10926262/sourabh-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566618069, "creation_date": 1548830368, "last_edit_date": 1566618069, "question_id": 54434635, "link": "https://stackoverflow.com/questions/54434635/reading-uncore-counters-through-perf-event-open", "title": "Reading uncore counters through perf_event_open", "body": "<p>I'm writing a program to monitor uncore events using <code>perf_event_open</code>. I needed to monitor the <code>uncore_cha</code> type, but <code>perf</code> event open gives an invalid argument error. </p>\n\n<p>According to the <code>perf_event_open</code> <a href=\"http://man7.org/linux/man-pages/man2/perf_event_open.2.html\" rel=\"nofollow noreferrer\">man page</a>, dynamic PMUs can be set in the type field of the <code>perf_event_attr</code> structure. </p>\n\n<p>The type value can be found in /sys/bus/event_source/devices/'pmu-type'/type. \nUpon setting this value, <code>perf_event_open</code> returns -1 and throws Error opening leader error. Upon examining the errno, it is found to be an Invalid argument error.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/ioctl.h&gt; \n#include &lt;linux/perf_event.h&gt;\n#include &lt;asm/unistd.h&gt;\n#include &lt;linux/pmu.h&gt;\n#include &lt;linux/hw_breakpoint.h&gt;\n\nlong\nperf_event_open(struct perf_event_attr *hw_event, pid_t pid,\n                int cpu, int group_fd, unsigned long flags)\n{\n    int ret;\n\n    ret = syscall(__NR_perf_event_open, hw_event, pid, cpu,\n                  group_fd, flags);\n    return ret;\n}\n\nint\nmain(int argc, char **argv)\n{\n    struct perf_event_attr pe;\n    long long count;\n    int fd;\n\n    memset(&amp;pe, 0, sizeof(struct perf_event_attr));\n    pe.type = 25; // // Type value 25 for PMU-Type uncore_cha_0\n    pe.size = sizeof(struct perf_event_attr);\n    pe.config = 0x0111; //Event to be monitored\n    pe.disabled = 1;\n    pe.exclude_kernel = 1;\n    pe.exclude_hv = 1;\n\n    fd = perf_event_open(&amp;pe, 0, -1, -1, 0);\n    if (fd == -1) {\n        fprintf(stderr, \"Error opening leader %llx\\n\", pe.config);\n        exit(EXIT_FAILURE);\n    }\n\n    ioctl(fd, PERF_EVENT_IOC_RESET, 0);\n    ioctl(fd, PERF_EVENT_IOC_ENABLE, 0);\n\n    printf(\"Measuring instruction count for this printf\\n\");\n\n    ioctl(fd, PERF_EVENT_IOC_DISABLE, 0);\n    read(fd, &amp;count, sizeof(long long));\n\n    printf(\"Used %lld instructions\\n\", count);\n\n    close(fd);\n}\n</code></pre>\n\n<p>Any help regarding this would be highly appreciated.</p>\n"}, {"tags": ["c", "arrays", "function-call"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1548828863, "post_id": 54434263, "comment_id": 95678034, "body": "<code>void my_caller(name1)</code>...very fishy...."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1548829835, "post_id": 54434263, "comment_id": 95678375, "body": "<code>void my_caller(*name1) {</code> is a syntax error. You should see error messages from the compiler.  It&#39;s a bad idea to try running a program that has compilation errors"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1548830510, "post_id": 54434263, "comment_id": 95678618, "body": "also, <code>i</code> is not defined. This code does not compile."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1548830830, "post_id": 54434263, "comment_id": 95678769, "body": "@AnttiHaapala Right, locally scoped for <code>for</code> loop....need to have <code>i</code> in block scope for the function. :)"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 0, "creation_date": 1548829668, "post_id": 54434384, "comment_id": 95678316, "body": "I botched the function prototypes when I pasted them into my post. What I have is <code>void my_caller(*name1)</code>. It&#39;s not supposed to return anything, though. I just want it to print. I&#39;ve edited my post."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 0, "creation_date": 1548829813, "post_id": 54434384, "comment_id": 95678365, "body": "@WaterGuy even after your edit, you&#39;re still missing the data type. Check the code I compiled online (link in answer)."}, {"owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 0, "creation_date": 1548834704, "post_id": 54434384, "comment_id": 95680642, "body": "Damn it, I read over it too quickly. You&#39;re right, I forgot the data type."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1548830018, "last_edit_date": 1548830018, "creation_date": 1548829066, "answer_id": 54434384, "question_id": 54434263, "link": "https://stackoverflow.com/questions/54434263/changing-case-of-a-string/54434384#54434384", "title": "Changing Case of a String", "body": "<p>To start with, having a function definition like</p>\n\n<pre><code> void my_caller(name1) \n</code></pre>\n\n<p>is problematic, as missing type (used to be, now obsolete rule) default to <code>int</code>. You want this to be a <code>char *</code>. not <code>int</code>.</p>\n\n<p>You need to change it to</p>\n\n<pre><code>  void my_caller(char * name1) {.... \n</code></pre>\n\n<p>Moreover, you need to call the function as <code>my_caller(name1);</code>, passing an array is the same as passing a pointer to the first element of the array. </p>\n\n<p>Also, you don't pass the address of the array (check the types if you're in confusion) while calling the function.</p>\n\n<p>That said, inside <code>myFunction()</code>, the scope of <code>i</code> is limited to the <code>for</code> loop only, but you want to use that beyond the scope (to null-terminate), so you got to declare <code>i</code> in the function block scope.</p>\n\n<p><em>Moral of the story: Turn up the compiler warning / error settings, and pay close attention to the messages emitted by the compiler. They are there for a reason.</em></p>\n\n<hr>\n\n<p>Note: After making these changes, <a href=\"https://repl.it/repls/GrouchyEmotionalCases\" rel=\"nofollow noreferrer\">code works as expected</a>.</p>\n"}], "owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1548830018, "creation_date": 1548828493, "last_edit_date": 1548829693, "question_id": 54434263, "link": "https://stackoverflow.com/questions/54434263/changing-case-of-a-string", "title": "Changing Case of a String", "body": "<p>I'm new to C and am trying to write a simple function that can take in a string (or array of characters) and convert its case based on the following rules:</p>\n\n<ol>\n<li>The first character should be uppercase.</li>\n<li>The remaining characters should be lowercase.</li>\n</ol>\n\n<p>I've written code, but I'm running into segmentation fault errors, and I'm baffled as to what's going wrong. Here's what I've written:</p>\n\n<pre><code>void myFunction(char name[]) {\n\n  printf(\"Before: %s\", name);\n\n  name[0] = toupper(name[0]); // This line seems to cause problems.\n\n  // Convert the other letters to lowercase if they aren't already.\n  for(int i = 1; name[i] != '\\0'; i++) {\n    if(islower(name[i])) {\n      name[i] = tolower(name[i]);\n    } else {\n      name[i] = name[i];\n    }\n  }\n  name[i] = '\\0';\n\n  printf(\"After: %s\", name);\n}\n\n\nvoid my_caller(*name1) {\n  printf(\"Name before changing case: %s\\n\", name1);\n  myFunction(name1);\n  printf(\"Name after changing case: %s\\n\", name1);\n}\n\n\n// In another .c file.\nint main() {\n  char name1[] = \"adam\";\n  my_caller(&amp;name1);\n}\n</code></pre>\n\n<p>In <code>myFunction</code>, if I comment out the lines except for</p>\n\n<pre><code>name[0] = toupper(name[0]);\n</code></pre>\n\n<p>I still get the segmentation fault. So that would suggest that this line is (one of) the culprits, but I don't understand why. I want to convert the letter to uppercase and put it back into the string.</p>\n"}, {"tags": ["c", "linux", "debugging", "gdb", "cross-compiling"], "answers": [{"comments": [{"owner": {"reputation": 995, "user_id": 1495449, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1e8bf5f1802fc637dd8eb7b07a318b67?s=128&d=identicon&r=PG", "display_name": "Jetski S-type", "link": "https://stackoverflow.com/users/1495449/jetski-s-type"}, "edited": false, "score": 0, "creation_date": 1548834096, "post_id": 54435102, "comment_id": 95680379, "body": "The libc.so.6 on the ARM target is actually slightly larger than the /usr/local/oecore-x86_64 sysroot one (1.3MB). In fact, all of the shared libraries next to it that I glanced at were slightly larger than the sysroot on the build machine. Interesting indeed why Yocto built it like this..."}, {"owner": {"reputation": 107, "user_id": 1057494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f5baccfba8d9f47b0e6aa9675990f7?s=128&d=identicon&r=PG", "display_name": "xYZ", "link": "https://stackoverflow.com/users/1057494/xyz"}, "reply_to_user": {"reputation": 995, "user_id": 1495449, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1e8bf5f1802fc637dd8eb7b07a318b67?s=128&d=identicon&r=PG", "display_name": "Jetski S-type", "link": "https://stackoverflow.com/users/1495449/jetski-s-type"}, "edited": false, "score": 0, "creation_date": 1548834727, "post_id": 54435102, "comment_id": 95680658, "body": "please check this question <a href=\"https://stackoverflow.com/questions/8611194/debugging-shared-libraries-with-gdbserver/45252113#45252113\" title=\"debugging shared libraries with gdbserver\">stackoverflow.com/questions/8611194/&hellip;</a>"}, {"owner": {"reputation": 995, "user_id": 1495449, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1e8bf5f1802fc637dd8eb7b07a318b67?s=128&d=identicon&r=PG", "display_name": "Jetski S-type", "link": "https://stackoverflow.com/users/1495449/jetski-s-type"}, "edited": false, "score": 0, "creation_date": 1548894686, "post_id": 54435102, "comment_id": 95711676, "body": "Ah, it gives proper symbols if you do &quot;b main, c&quot; and after that do &quot;set sysroot&quot;. The linked answer says &quot;The problem I had was that gdbserver stops at the dynamic loader, before main, and the dynamic libraries are not yet loaded at that point, and so GDB does not know where the symbols will go in memory yet.  GDB appears to have some mechanisms to automatically load shared library symbols, and if I compile for host, and run gdbserver locally, running to main is not needed. But on the ARM target, that is the most reliable thing to do.&quot; But then need to get the IDE debugger to do this..."}, {"owner": {"reputation": 995, "user_id": 1495449, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1e8bf5f1802fc637dd8eb7b07a318b67?s=128&d=identicon&r=PG", "display_name": "Jetski S-type", "link": "https://stackoverflow.com/users/1495449/jetski-s-type"}, "edited": false, "score": 0, "creation_date": 1548898441, "post_id": 54435102, "comment_id": 95712630, "body": "At the point where you see ???? instead of symbols, you can use &quot;nosharedlibrary&quot;, &quot;sharedlibrary&quot; to get the symbols back."}], "tags": [], "owner": {"reputation": 107, "user_id": 1057494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f5baccfba8d9f47b0e6aa9675990f7?s=128&d=identicon&r=PG", "display_name": "xYZ", "link": "https://stackoverflow.com/users/1057494/xyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1548832415, "creation_date": 1548832415, "answer_id": 54435102, "question_id": 54433665, "link": "https://stackoverflow.com/questions/54433665/gdb-symbols-missing-libc-claimed-to-be-wrong-library-or-version-mismatch/54435102#54435102", "title": "GDB symbols missing - libc claimed to be wrong library or version mismatch", "body": "<p>Please make sure the libc in the box is same as the one in your build server.\nsorry, this should be a comments, but currently, I don't have enough reputation.</p>\n"}, {"tags": [], "owner": {"reputation": 995, "user_id": 1495449, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1e8bf5f1802fc637dd8eb7b07a318b67?s=128&d=identicon&r=PG", "display_name": "Jetski S-type", "link": "https://stackoverflow.com/users/1495449/jetski-s-type"}, "is_accepted": true, "score": 0, "last_activity_date": 1548900883, "last_edit_date": 1592644375, "creation_date": 1548900883, "answer_id": 54452368, "question_id": 54433665, "link": "https://stackoverflow.com/questions/54433665/gdb-symbols-missing-libc-claimed-to-be-wrong-library-or-version-mismatch/54452368#54452368", "title": "GDB symbols missing - libc claimed to be wrong library or version mismatch", "body": "<p>Apparently GDB for ARM target has trouble with trying to load symbols before main() (<a href=\"https://stackoverflow.com/questions/8611194/debugging-shared-libraries-with-gdbserver/45252113#45252113\">Debugging shared libraries with gdbserver</a>):</p>\n<blockquote>\n<p>The problem I had was that gdbserver stops at the dynamic loader, before main, and the dynamic libraries are not yet loaded at that point, and so GDB does not know where the symbols will go in memory yet.</p>\n<p>GDB appears to have some mechanisms to automatically load shared library symbols, and if I compile for host, and run gdbserver locally, running to main is not needed. But on the ARM target, that is the most reliable thing to do.</p>\n</blockquote>\n<p>Therefore, set it to load shared symbols after main has been hit:</p>\n<pre><code>&gt; b main\n&gt; c\n  &lt;breakpoint hit&gt;\n&gt; set sysroot &lt;sysroot&gt;\n</code></pre>\n<p>Or reload the symbols after you hit main.</p>\n<pre><code>&gt; set sysroot &lt;sysroot&gt;\n...\n&gt; b main\n&gt; c\n  &lt;breakpoint hit&gt;\n&gt; nosharedlibrary\n&gt; sharedlibrary\n</code></pre>\n<p>Or it might be useful in interfacing with IDE debuggers to set auto loading of symbols to be off on GDB startup:</p>\n<pre><code>&gt; set auto-solib-add off\n</code></pre>\n"}], "owner": {"reputation": 995, "user_id": 1495449, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1e8bf5f1802fc637dd8eb7b07a318b67?s=128&d=identicon&r=PG", "display_name": "Jetski S-type", "link": "https://stackoverflow.com/users/1495449/jetski-s-type"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1402, "favorite_count": 0, "accepted_answer_id": 54452368, "answer_count": 2, "score": 1, "last_activity_date": 1548900883, "creation_date": 1548824959, "question_id": 54433665, "link": "https://stackoverflow.com/questions/54433665/gdb-symbols-missing-libc-claimed-to-be-wrong-library-or-version-mismatch", "title": "GDB symbols missing - libc claimed to be wrong library or version mismatch", "body": "<p>I am having trouble showing proper debug symbols in the backtrace in GDB in an ARM cross-compiled system, built using Yocto.</p>\n\n<p>abc.c is a simple printf(\"Hello world\\n\"); program in C (nothing tricky). On the build machine:</p>\n\n<pre><code>&gt; yocto-dir/build/tmp-angstrom-glibc/sysroots/x86_64-linux/usr/bin/arm-angstrom-linux-gnueabi/arm-angstrom-linux-gnueabi-gcc abc --sysroot=yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm -g -O0 -o abc\n&gt; scp abc root@DEVICE-IP:~\n</code></pre>\n\n<p>On the ARM target:</p>\n\n<pre><code>&gt; gdbserver :2345 abc\n</code></pre>\n\n<p>Start GDB on the build machine (from installed Yocto SDK):</p>\n\n<pre><code>&gt; /usr/local/oecore-x86_64/sysroots/x86_64-angstromsdk-linux/usr/bin/arm-angstrom-linux-gnueabi/arm-angstrom-linux-gnueabi-gdb abc\nGNU gdb (Linaro GDB) 7.8-2014.09\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"--host=x86_64-angstromsdk-linux --target=arm-angstrom-linux-gnueabi\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://bugs.linaro.org&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from abc...done.\n(gdb) target remote DEVICE-IP:2345\nRemote debugging using DEVICE-IP:2345\nwarning: Unable to find dynamic linker breakpoint function.\nGDB will be unable to debug shared library initializers\nand track explicitly loaded dynamic code.\nCannot access memory at address 0x0\n0x4ae90a20 in ?? ()\n(gdb) bt\n#0  0x4ae90a20 in ?? ()\n#1  0x00000000 in ?? ()\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\n(gdb) set sysroot yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm\nReading symbols from yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm/lib/ld-linux.so.3...done.\nLoaded symbols for yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm/lib/ld-linux.so.3\nCannot access memory at address 0x0\n</code></pre>\n\n<p>After setting the sysroot, it still does not give symbols.</p>\n\n<pre><code>(gdb) bt\n#0  0x4ae90a20 in ?? ()\n#1  0x00000000 in ?? ()\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\n(gdb) b main\nBreakpoint 1 at 0x84a8: file abc.c, line 5.\n(gdb) c\nContinuing.\n\nBreakpoint 1, main () at abc.c:5\n5      printf(\"Hello world\\n\");\n</code></pre>\n\n<p>Okay, when it hits a breakpoint, it does display symbols.</p>\n\n<pre><code>(gdb) bt\nCannot access memory at address 0x0\n#0  main () at abc.c:5\n</code></pre>\n\n<p>However, it goes weird stepping beyond there.</p>\n\n<pre><code>(gdb) n\nCannot access memory at address 0x1\n0x4aea6ea0 in ?? ()\n(gdb) bt\n#0  0x4aea6ea0 in ?? ()\n#1  0x0000a014 in do_lookup_unique (Cannot access memory at address 0x1\nundef_map=0x1, ref=0x0, strtab=0x56ebb27 &lt;error: Cannot access memory at address 0x56ebb27&gt;, sym=0x84a0 &lt;main&gt;, type_class=-1224757248, result=0x1, map=&lt;optimized out&gt;, \n    new_hash=&lt;optimized out&gt;, undef_name=&lt;optimized out&gt;) at /usr/src/debug/glibc/2.24-r0/git/elf/dl-lookup.c:332\n#2  do_lookup_x (undef_name=&lt;optimized out&gt;, new_hash=&lt;optimized out&gt;, old_hash=&lt;optimized out&gt;, ref=0x0, result=&lt;optimized out&gt;, scope=0x177ff8e, i=&lt;optimized out&gt;, version=&lt;optimized out&gt;, \n    flags=-1224757248, skip=0x1, type_class=100, undef_map=0x1) at /usr/src/debug/glibc/2.24-r0/git/elf/dl-lookup.c:544\n#3  0x4aec0b10 in ?? ()\nCannot access memory at address 0x1\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\n</code></pre>\n\n<p><strong>It can't find the proper version of libc.so.6.</strong></p>\n\n<pre><code>(gdb) info sharedlibrary\nwarning: .dynamic section for \"yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm/lib/libc.so.6\" is not at the expected address (wrong library or version mismatch?)\nFrom        To          Syms Read   Shared Object Library\n0x000007d0  0x0001bee0  Yes         yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm/lib/ld-linux.so.3\n0x4aee73c0  0x4afe2018  No          yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm/lib/libc.so.6\n(gdb) n\nCannot find bounds of current function\n</code></pre>\n\n<p>It does not give an ideal debugging experience.</p>\n\n<p>There is a gcc inside yocto-dir sysroot (as used above), as well as in /usr/local/oecore-x86_64. They both behave the same. The /usr/local/oecore-x86_64 SDK is freshly built and installed.</p>\n\n<p>Similarly, there is an imx28scm sysroot inside yocto-dir (as used above), as well as in /usr/local/oecore-x86_64, and they both behave the same. <strong>However, they clearly do have different versions of libc.so.6 - yocto-dir's is 14.8MB, and /usr/local/oecore-x86_64's is 1.3MB.</strong> This is a concern, however setting either of these locations as the sysroot does not fix the problem.</p>\n\n<p>One workaround is to link with <code>-static</code>. GDB does give symbols in this case:</p>\n\n<pre><code>(gdb) target remote DEVICE-IP:2345\nRemote debugging using DEVICE-IP:2345\n_start () at ../sysdeps/arm/start.S:79\n79  ../sysdeps/arm/start.S: No such file or directory.\n(gdb) set sysroot yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm\n(gdb) bt\n#0  _start () at ../sysdeps/arm/start.S:79\n(gdb) b main\nBreakpoint 1 at 0x8480: file abc.c, line 5.\n(gdb) c\nContinuing.\n\nBreakpoint 1, main () at abc.c:5\n5      printf(\"Hello world\\n\");\n(gdb) n\n6      return 0;\n(gdb) n\n7   }\n</code></pre>\n\n<p>Linking with <code>-Wl,--verbose</code> seems to show it is linking with the library in the expected sysroot:</p>\n\n<pre><code>yocto-dir/build/tmp-angstrom-glibc/sysroots/x86_64-linux/usr/libexec/arm-angstrom-linux-gnueabi/gcc/arm-angstrom-linux-gnueabi/6.2.1/ld: Attempt to open yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm/lib/libc.so.6 succeeded\n</code></pre>\n\n<p>The linker also finds this one, but it isn't referred to as libc.so.6, so presumably this is not interfering.</p>\n\n<pre><code>yocto-dir/build/tmp-angstrom-glibc/sysroots/x86_64-linux/usr/libexec/arm-angstrom-linux-gnueabi/gcc/arm-angstrom-linux-gnueabi/6.2.1/ld: Attempt to open yocto-dir/build/tmp-angstrom-glibc/sysroots/imx28scm/usr/lib/libc.so succeeded\n</code></pre>\n\n<p><strong>Why is there a library version mismatch in this case? How can I get GDB to display symbols from the library which it expects?</strong> I do not wish to link statically.</p>\n"}, {"tags": ["c", "windows", "printf"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1548830861, "post_id": 54433558, "comment_id": 95678788, "body": "It would help to mention which compiler you are using"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1548830999, "post_id": 54433558, "comment_id": 95678862, "body": "Please provide <a href=\"http://stackoverflow.com/help/mcve\">A Minimal, Complete, and Verifiable Example (MCVE)</a>."}, {"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1548831714, "post_id": 54433558, "comment_id": 95679177, "body": "Hi guys, Im using VC++ 2008 and i cant post any code unfortunately.  If there is not a common issue here i suspect i have a bug elsewhere, i removed the printfs and it works fine though..."}], "answers": [{"tags": [], "owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "is_accepted": true, "score": 0, "last_activity_date": 1548910639, "creation_date": 1548910639, "answer_id": 54453560, "question_id": 54433558, "link": "https://stackoverflow.com/questions/54433558/fprintf-stderr-segfaults-in-its-own-thread-works-in-main/54453560#54453560", "title": "fprintf stderr segfaults in its own thread, works in main", "body": "<p>As i suspected the symptom was an issue with something unrelated to the printf/fprintfs.  At an early point in the program i sprintf many strings, which was part of a struct.  Instead of passing the size of the struct member to sprintf i passed the size of the whole struct, which caused me to overflow a buffer and mangle god knows how much memory.  When this was in one main thread it didnt overflow enough to blow my stack and cause a segfault, but it did still write past the buffer.  </p>\n\n<p>Since there were less function calls in the stand alone program the chance of over-writing the stack pointer was zero, when brought into the real program/dll the call hierarchy becomes non-trivial and a massive buffer overflow is sure to overwrite the stack pointer, so printf from a thread with address range 0x7ABCDEF tries to jump to a return address of 0xF1234567 causing the access voilation.</p>\n\n<p>I posted my story here for future readers.  Here is some sprintf_s resource if the next guy has a similar issue:\n<a href=\"https://stackoverflow.com/questions/8906274/what-is-sprintf-s-analog-of-sprintfnewpath-ss\">What is sprintf_s analog of sprintf(newpath, &quot;%s%s&quot;,...)?</a></p>\n"}], "owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54453560, "answer_count": 1, "score": 0, "last_activity_date": 1548910639, "creation_date": 1548824058, "last_edit_date": 1548830851, "question_id": 54433558, "link": "https://stackoverflow.com/questions/54433558/fprintf-stderr-segfaults-in-its-own-thread-works-in-main", "title": "fprintf stderr segfaults in its own thread, works in main", "body": "<p>I built a little prototype test program do deal with windows performance counters and everything seems to work ok.  I moved it into my dll, which my main program loads, and there are some fprintf(stderr, \"sometext\") which are causing an access violation.</p>\n\n<p>I look into this on SO and didnt find any satisfactory answer.  I know it works fine when it runs in the main thread.  I assume its from the TIME_CRITICAL thread i spawn to do the performance counter polling.</p>\n\n<ol>\n<li>What is the cause of this access violation?  It says \"unhandled exception at 0x7deadbeef in main.exe 0xC00000005.  Access violation reading from 0xFbeefdead\".  </li>\n<li>What is the appropriate way to print to stderr from a separate thread?</li>\n</ol>\n\n<p>It seems to be kind of \"random\" since i have printfs at the start of the polling function that print fine.  Towards the bottom they throw the access violation.  Why do some printf/fprintf(stderr) work fine while other fail?</p>\n\n<p><em>EDIT</em>\nI create the thread with 0 as the stack size parameter, which should default to the default stack size.  I suspect im blowing my stack in this thread, does anyone have any insight into this?\n<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createthread\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createthread</a></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1548822527, "post_id": 54433231, "comment_id": 95676236, "body": "Can&#39;t reproduce <a href=\"https://wandbox.org/permlink/GiTSTaRXrYy6X6nL\" rel=\"nofollow noreferrer\">wandbox.org/permlink/GiTSTaRXrYy6X6nL</a> Either <code>SWITCH_ENABLED_USE_WATCHDOG</code> actually <i>is</i> defined somewhere or you accidentally include <code>watchdog.h</code> somewhere else."}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1548823467, "last_edit_date": 1548823467, "creation_date": 1548822867, "answer_id": 54433412, "question_id": 54433231, "link": "https://stackoverflow.com/questions/54433231/enable-disable-macro-using-va-args/54433412#54433412", "title": "enable/disable MACRO using __VA_ARGS__", "body": "<p>Notice these are all defaults for enabling a switch:</p>\n\n<pre><code>#define SWITCH_ENABLED_true  1\n#define SWITCH_ENABLED_1     1\n#define SWITCH_ENABLED_      1\n</code></pre>\n\n<p>Yes, that last one will enable a switch if no switch macro or override exists.</p>\n\n<p>So, you can enable <code>USE_WATCHDOG</code> in the following ways:</p>\n\n<ol>\n<li><p>Override <code>USE_WATCHDOG</code> (expands to <code>ENABLED(true)</code>)</p>\n\n<pre><code>#define USE_WATCHDOG true\n</code></pre></li>\n<li><p>Override <code>USE_WATCHDOG</code> (expands to <code>ENABLED(1)</code>)</p>\n\n<pre><code>#define USE_WATCHDOG 1\n</code></pre></li>\n<li><p>Enable only the switch</p>\n\n<pre><code>#undef USE_WATCHDOG\n#define SWITCH_ENABLED_USE_WATCHDOG 1\n</code></pre></li>\n<li><p>Have no definitions</p>\n\n<pre><code>#undef USE_WATCHDOG\n#undef SWITCH_ENABLED_USE_WATCHDOG\n</code></pre></li>\n</ol>\n\n<p>If none of these apply to you, it's possible that one of them is defined in a header you didn't know about, or outside of the code (e.g. project settings, Makefile, etc, or a pre-include file).</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10988086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22e5aa34267d03a65c81715266aba62?s=128&d=identicon&r=PG&f=1", "display_name": "nate_lee", "link": "https://stackoverflow.com/users/10988086/nate-lee"}, "edited": false, "score": 0, "creation_date": 1548826417, "post_id": 54433607, "comment_id": 95677204, "body": "thanks for attention, John. I still feel puzzled. you have said USE_WATCHDOG must be 1 or 0(true or false).but i just &quot;#define USE_WATCHDOG &quot;. USE_WATCHDOG  didn&#39;t have value, it still works.Actually, in Marlin Firmware code, it also doing like this:if I wanna use watchdog,&quot;#define USE_WATCHDOG &quot; in configure.h.  if  USE_WATCHDOG have no value, why can ENABLED(USE_WATCHDOG) expand to <i>CAT(SWITCH_ENABLED</i>, true) or anything that will finally equivalent to 1?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3, "user_id": 10988086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22e5aa34267d03a65c81715266aba62?s=128&d=identicon&r=PG&f=1", "display_name": "nate_lee", "link": "https://stackoverflow.com/users/10988086/nate-lee"}, "edited": false, "score": 0, "creation_date": 1548826821, "post_id": 54433607, "comment_id": 95677304, "body": "Look again, @nate_lee.  I say <code>USE_WATCHDOG</code> must be defined to <code>1</code> or <code>true</code> <i>or nothing</i> on the one hand.  If you define it without specifying a value, then it is defined to nothing (which is different from not being defined at all).  In this case, the second round of macro expansion results in <code>SWITCH_ENABLED_</code>, which then also expands to 1 on the next pass."}, {"owner": {"reputation": 3, "user_id": 10988086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22e5aa34267d03a65c81715266aba62?s=128&d=identicon&r=PG&f=1", "display_name": "nate_lee", "link": "https://stackoverflow.com/users/10988086/nate-lee"}, "edited": false, "score": 0, "creation_date": 1548826981, "post_id": 54433607, "comment_id": 95677354, "body": "Thank you very much for your patience, I understand."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1548824791, "last_edit_date": 1548824791, "creation_date": 1548824416, "answer_id": 54433607, "question_id": 54433231, "link": "https://stackoverflow.com/questions/54433231/enable-disable-macro-using-va-args/54433607#54433607", "title": "enable/disable MACRO using __VA_ARGS__", "body": "<blockquote>\n  <p>Obviously the function of this MACRO\uff0cENABLED(USE_WATCHDOG)\uff0cis to determine whether USE_WATCHDOG is defined.</p>\n</blockquote>\n\n<p>Not exactly.  The purpose is to determine whether it is defined <em>to <code>1</code> or <code>true</code></em> or nothing on one hand or to <code>0</code> or <code>false</code>, or is not defined, on the other. Absent other support (not shown) for other values, if it is defined then its value must be one of those values for compilation to succeed.</p>\n\n<blockquote>\n  <p>For example, I really defined USE_WATCHDOG, I substitute it into ENABLED(b), the expansion is _CAT(SWITCH_ENABLED_, USE_WATCHDOG).</p>\n</blockquote>\n\n<p>Except where used as the operand of the <code>#</code> or <code>##</code> preprocessing operator, the arguments to a macro are fully expanded before they are substituted into the macro's replacement text.  Therefore, the expansion of <code>ENABLED(USE_WATCHDOG)</code> depends on the definition, if any, of <code>USE_WATCHDOG</code>.  For example if it is defined to <code>true</code>:</p>\n\n<pre><code>#define USE_WATCHDOG true\n</code></pre>\n\n<p>then <code>ENABLED(USE_WATCHDOG)</code> expands to</p>\n\n<pre><code>_CAT(SWITCH_ENABLED_, true)\n</code></pre>\n\n<p>, which is then subject to being rescanned for additional macro substitutions.</p>\n\n<blockquote>\n  <p>_CAT will stitch SWITCH_ENABLED_, USE_WATCHDOG into SWITCH_ENABLED_USE_WATCHDOG, but this macro doesn't exist.</p>\n</blockquote>\n\n<p>You've already gone off the rails here.  What actually happens, with <code>USE_WATCHDOG</code> defined as above, is that at this stage <code>_CAT(SWITCH_ENABLED_, true)</code> is expanded to</p>\n\n<pre><code>SWITCH_ENABLED_true\n</code></pre>\n\n<p>(even if <code>true</code> is itself defined as a macro), which is again subject to rescan for additional macro substitutions.\nOne more round of macro substitution finally reduces this to simply</p>\n\n<pre><code>1\n</code></pre>\n\n<blockquote>\n  <p>Why is the SWITCH_ENABLED_USE_WATCHDOG equivalent to 1 and finally include\"watchdog.h\"?</p>\n</blockquote>\n\n<p>In the code presented, it isn't, but that's unimportant (see above).</p>\n\n<p>Note especially that the <code>_CAT</code> macro is key to making all this work.  You need a double layer of macro expansion in order to get <code>USE_WATCHDOG</code> expanded before the result is pasted to <code>SWITCH_ENABLED_</code>, and that seems to be your point of misunderstanding.</p>\n"}], "owner": {"reputation": 3, "user_id": 10988086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22e5aa34267d03a65c81715266aba62?s=128&d=identicon&r=PG&f=1", "display_name": "nate_lee", "link": "https://stackoverflow.com/users/10988086/nate-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 54433607, "answer_count": 2, "score": -2, "last_activity_date": 1548824791, "creation_date": 1548821307, "question_id": 54433231, "link": "https://stackoverflow.com/questions/54433231/enable-disable-macro-using-va-args", "title": "enable/disable MACRO using __VA_ARGS__", "body": "<p>Consider this code:</p>\n\n<pre><code>// Macros to support option testing\n#define _CAT(a, ...) a ## __VA_ARGS__\n#define SWITCH_ENABLED_false 0\n#define SWITCH_ENABLED_true  1\n#define SWITCH_ENABLED_0     0\n#define SWITCH_ENABLED_1     1\n#define SWITCH_ENABLED_      1\n#define ENABLED(b) _CAT(SWITCH_ENABLED_, b)\n</code></pre>\n\n<p>I copy from the Marlin, a 3Dprinter Firmware.I dont not how it work to support opthin testing. it is used as follows in Marlin:</p>\n\n<pre><code>#if ENABLED(USE_WATCHDOG)\n  #include \"watchdog.h\"\n#endif\n</code></pre>\n\n<p>Obviously the function of this MACRO\uff0cENABLED(USE_WATCHDOG)\uff0cis to determine whether USE_WATCHDOG is defined.\n  For example, I really defined USE_WATCHDOG, I substitute it into ENABLED(b), the expansion is _CAT(SWITCH_ENABLED_, USE_WATCHDOG). _CAT will stitch SWITCH_ENABLED_, USE_WATCHDOG into\nSWITCH_ENABLED_USE_WATCHDOG, but this macro doesn't exist. Why is the SWITCH_ENABLED_USE_WATCHDOG equivalent to 1 and finally include\"watchdog.h\"?</p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548820839, "post_id": 54433000, "comment_id": 95675861, "body": "I&#39;ve done convolutions, but a quick Google search shows <a href=\"http://www.songho.ca/dsp/convolution/convolution2d_example.html\" rel=\"nofollow noreferrer\">Examples of 2D Convolution</a>, <a href=\"http://www.cs.cornell.edu/courses/cs1114/2013sp/sections/S06_convolution.pdf\" rel=\"nofollow noreferrer\">S06 Convolution</a>, and Wikipedia on <a href=\"https://en.wikipedia.org/wiki/Kernel_(image_processing)\" rel=\"nofollow noreferrer\">Kernel (image processing)</a>.  All of these seem to imply that you have an image (largish) and a kernel (smallish), and that you apply the kernel to the image and generate a result that is as big as the image \u2014 clipping or scaling to truncate or expand are not convolution."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548821131, "post_id": 54433000, "comment_id": 95675924, "body": "It looks as though your output is bigger than the inputs; this isn&#39;t what the links above think happens with convolution.  You don&#39;t show code zeroing the output matrix; I assume you did that before the code shown was used.  It would be sensible to progress in steps.  Make sure you can print the image and kernel matrices, for example, and that you get the right results.  Also make sure you can apply the kernel to the elements of the image \u2014 paying special attention to the edge and corner cases.  Is the kernel constrained to an odd number of cells (3x3, 5x5 and similar in the links; 3x7 too?)?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1548821313, "post_id": 54433000, "comment_id": 95675960, "body": "You have chosen very unfortunate variable names and it is not clear which are indices, which are coordinates, or which of either applies to what source matrix.  It is not surprising that you have a few lines of broken code and don&#39;t know how to fix it.  For me, a very quick glance at the operation on <code>mat_C</code> suggests that you&#39;re indexing wrong.  For row-major arrangement, you would normally have something that looks like <code>mat_A[ay * awidth + ax]</code> where <code>ax</code> and <code>ay</code> are the (x,y) coordinates.  Or you would arrange the convolution in scanlines.  You appear to do neither of these."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548821440, "post_id": 54433000, "comment_id": 95675984, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can duplicate the problem and help you to debug it."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1548821870, "post_id": 54433000, "comment_id": 95676071, "body": "Hmm, looking closer, I think you intended something closer to <code>mat_C[i] += mat_A[ii * NumCols_first + jj] * mat_B[m * NumCols_second + k]</code>, but of course the <code>ii</code> and <code>jj</code> calculations themselves look whack, given the outer <code>i</code> and <code>j</code> loops.  And it&#39;s strange that <code>mat_C</code> should have such huge dimensions...  unless I&#39;ve been doing convolutions wrong for the last 20 years."}], "owner": {"reputation": 59, "user_id": 10328228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f401aa6b6beda5a4ecefd2a33fa23c03?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/10328228/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 539, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548819336, "creation_date": 1548819336, "question_id": 54433000, "link": "https://stackoverflow.com/questions/54433000/2d-matrix-convolution-using-1d-arrays-in-c", "title": "2d matrix convolution using 1d arrays in c", "body": "<p>I have to perform a 2d matrix convolution but I have used 1d arrays to store the matrices. These 1d arrays are of size <code>NumRows * NumCols</code> and hold the values of the matrices. \nI have written the following code to perform 2d convolution but I get wrong results. Can someone help me with what's wrong?</p>\n\n<pre><code>mat_A is of size NumRows_first * NumCols_first.\nmat_B is of size NumRows_second * NumCols_second.\nmat_C is the output array of size (NumRows_first + NumRows_second - 1) * (NumCols_first + NumCols_second - 1)\n</code></pre>\n\n<p>And the code that I have written is:</p>\n\n<pre><code>int c_x = NumRows_second / 2;\nint c_y = NumCols_second / 2;\nint ii = 0;\nint jj = 0;\nfor(i=0; i&lt;(NumRows_first + NumRows_second - 1) * (NumCols_second + NumCols_first - 1); i++)\n{\n    for(j=0; j&lt;(NumRows_first + NumRows_second - 1) * (NumCols_second + NumCols_first - 1); j++)\n    {\n        for(int m=0; m&lt;NumRows_second - 1; m++)\n        {\n            for(int k=0; k&lt;NumCols_second - 1; k++)\n            {\n                ii = i + (m - c_x);\n                jj = j + (k - c_y);\n                if(ii &gt;= 0 &amp;&amp; ii &lt; NumRows_first &amp;&amp; jj&gt;=0 &amp;&amp; jj&lt;NumCols_first)\n                    mat_C[i] += mat_A[ii*jj] * mat_B[m*k];\n            }\n        }\n    }\n}       \n</code></pre>\n\n<p>The arrays are all of type <code>double</code></p>\n"}, {"tags": ["c", "linux", "header", "elf"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548821653, "post_id": 54432841, "comment_id": 95676027, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can help you debug the problem."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1548867016, "post_id": 54432841, "comment_id": 95700331, "body": "Welcome to Stack Overflow! Here we expect the code to be <b>in the question post</b>, not <i>linked</i>. Please, <a href=\"https://stackoverflow.com/posts/54432841/edit\">edit</a> your question post and copy-paste the code into it. You may format the pasted code with <code>Ctrl+K</code> or <code>{}</code> button."}, {"owner": {"reputation": 9, "user_id": 10876813, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--ju_p0hvggA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaElCdbD14ouWk1y77tt3bvSQAwpQ/mo/photo.jpg?sz=128", "display_name": "Mike Churner", "link": "https://stackoverflow.com/users/10876813/mike-churner"}, "edited": false, "score": 0, "creation_date": 1548880336, "post_id": 54432841, "comment_id": 95706858, "body": "There, code was removed from the pastebin and added onto here, sorry!"}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 0, "last_activity_date": 1549076313, "creation_date": 1549076313, "answer_id": 54489567, "question_id": 54432841, "link": "https://stackoverflow.com/questions/54432841/reading-sh-name-from-header-will-return-one-value-everytime/54489567#54489567", "title": "Reading sh_name from header will return one value everytime", "body": "<blockquote>\n  <p>the program is dynamically compiled</p>\n</blockquote>\n\n<p>The program <em>can't</em> be dynamically compiled (or rather, \"dynamically compiled\" means something totally different). What you mean is that the program is dynamically <em>linked</em>.</p>\n\n<p>Wild guess: you compiled your code in 64-bit mode (because you are on a 64-bit system which defaults to 64-bit mode).</p>\n\n<p>This:</p>\n\n<pre><code>Elf32_Ehdr elf_header;\n</code></pre>\n\n<p>is the wrong type to use if you are trying to determine whether 64-bit executable is statically linked or not.</p>\n\n<p>P.S. There are many other bugs in your program as well.</p>\n\n<p>P.P.S. Presence or absence of <code>.dynamic</code> is <em>not</em> correct way to determine whether the binary was statically or dynamically linked (sections aren't required, and can be completely stripped). You should look for <code>PT_DYNAMIC</code> program header instead.</p>\n\n<p>P.P.P.S. You should learn <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug small programs</a>.</p>\n"}], "owner": {"reputation": 9, "user_id": 10876813, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--ju_p0hvggA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaElCdbD14ouWk1y77tt3bvSQAwpQ/mo/photo.jpg?sz=128", "display_name": "Mike Churner", "link": "https://stackoverflow.com/users/10876813/mike-churner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 54489567, "answer_count": 1, "score": 1, "last_activity_date": 1549076313, "creation_date": 1548817854, "last_edit_date": 1548987706, "question_id": 54432841, "link": "https://stackoverflow.com/questions/54432841/reading-sh-name-from-header-will-return-one-value-everytime", "title": "Reading sh_name from header will return one value everytime", "body": "<p>Whenever isstatic32 is called, it will return STATIC even though the program is dynamically compiled. I have no idea what to do. I've tried everytime it detects .dynamic from sh_name, it adds 1 to a variable and if  the variable is > 1 it will return dynamic, but that didn't work. (won't let me post code here)</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;elf.h&gt;\n#define DYNAMIC 1\n#define STATIC 2        \n\n\n\nstatic int isstatic32(FILE* fd, Elf32_Ehdr eh, Elf32_Shdr sh_table[])\n{\nstatic int i;\nstatic int kek = 0;\nstatic char* sh_str;\nstatic char* buff;\n\nbuff = malloc(sh_table[eh.e_shstrndx].sh_size);\n\nif(buff != NULL)\n{\n    fseek(fd, sh_table[eh.e_shstrndx].sh_offset, SEEK_SET);\n    fread(buff, 1, sh_table[eh.e_shstrndx].sh_size, fd);\n}\nsh_str = buff;\n\nfor(i=0; i&lt;eh.e_shnum; i++)\n{\n    printf(\"%d\", i);\n    if(!strcmp(\".dynamic\", (sh_str + sh_table[i].sh_name)))\n    {\n        return DYNAMIC;\n    }\n}\n\nreturn STATIC;\n\n}\n\n\nint main()\n{\n\n                FILE *fp = NULL;\n                char* f;\n                f = \"/proc/self/exe\";                   \n                Elf32_Ehdr elf_header;\n                Elf32_Shdr* sh_table;\n                fp = fopen(f, \"r\");\n\n                fseek(fp, 0, SEEK_SET);\n                fread(&amp;elf_header, 1, sizeof(Elf32_Ehdr), fp);\n                sh_table = malloc(elf_header.e_shentsize*elf_header.e_shnum);\n                fseek(fp, elf_header.e_shoff, SEEK_SET);\n                fread(sh_table, 1, elf_header.e_shentsize*elf_header.e_shnum, fp);\n                if(isstatic32(fp, elf_header, sh_table) == STATIC)\n                {\n\n                    printf(\"statically linked\");\n\n                }\n                                    else\n                {\n                    printf(\"dynamic\");\n                }\n                fp = NULL;\n                f = NULL;\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "fortran"], "comments": [{"owner": {"reputation": 921, "user_id": 9892534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f573778f0077133339657cf5ebdd5352?s=128&d=identicon&r=PG&f=1", "display_name": "evets", "link": "https://stackoverflow.com/users/9892534/evets"}, "edited": false, "score": 0, "creation_date": 1548821714, "post_id": 54432750, "comment_id": 95676043, "body": "You should really reflect on 2019 -1977= 42.  Interoperability between Fortran and C is trivial using the features provided in modern Fortran.  BTW, Fortran indexing starts at 1.  C indexing starts at 2.  What happens if you <code>print *, rread(1), rread(2)</code> in your Fortran code?"}, {"owner": {"reputation": 921, "user_id": 9892534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f573778f0077133339657cf5ebdd5352?s=128&d=identicon&r=PG&f=1", "display_name": "evets", "link": "https://stackoverflow.com/users/9892534/evets"}, "edited": false, "score": 0, "creation_date": 1548822494, "post_id": 54432750, "comment_id": 95676229, "body": "Whoops.  C indexing starts at 0!  Collapsed want I meant to write.  The C declaration <code>double rread[2]</code> is 2 element with indexing starting at 0."}, {"owner": {"reputation": 65, "user_id": 6348732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3ef2349408138bd49ee2cf55e2384a?s=128&d=identicon&r=PG&f=1", "display_name": "Spartan", "link": "https://stackoverflow.com/users/6348732/spartan"}, "reply_to_user": {"reputation": 921, "user_id": 9892534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f573778f0077133339657cf5ebdd5352?s=128&d=identicon&r=PG&f=1", "display_name": "evets", "link": "https://stackoverflow.com/users/9892534/evets"}, "edited": false, "score": 0, "creation_date": 1548824620, "post_id": 54432750, "comment_id": 95676706, "body": "@evets: You are right. It was an indexing issue despite that I was already aware of the differences between the two languages. Thank you for the quick response. And a more elegant solution to modern fortran would be welcomed by me, although I can only read the old one for now."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548826523, "post_id": 54432750, "comment_id": 95677228, "body": "Your Fortran code <code>call</code>s <code>client</code>, which must therefore correspond to the conventions for a Fortran subroutine (not function).  Typically, and I&#39;m pretty sure gfortran is typical here, a Fortran subroutine corresponds to a C function having return type <code>void</code>.  I guess that wasn&#39;t your primary problem, but you should still fix it, rather than risking subtle problems arising."}, {"owner": {"reputation": 65, "user_id": 6348732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3ef2349408138bd49ee2cf55e2384a?s=128&d=identicon&r=PG&f=1", "display_name": "Spartan", "link": "https://stackoverflow.com/users/6348732/spartan"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548826974, "post_id": 54432750, "comment_id": 95677352, "body": "@JohnBollinger: Do you mean I should change the &quot;int client_(double rread[2])&quot; above to &quot;void client_(double rread[2])&quot;?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548827177, "post_id": 54432750, "comment_id": 95677403, "body": "Yes, @Spartan, that&#39;s exactly what I&#39;m saying."}, {"owner": {"reputation": 65, "user_id": 6348732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3ef2349408138bd49ee2cf55e2384a?s=128&d=identicon&r=PG&f=1", "display_name": "Spartan", "link": "https://stackoverflow.com/users/6348732/spartan"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548827635, "post_id": 54432750, "comment_id": 95677581, "body": "@JohnBollinger: Thank you John, but in this case I am getting the following warning which I guess I can ignore (my knowledge of c is almost 0, and that sample code above is part of a larger code): client2.c:14:5: warning: \u2018return\u2019 with a value, in function returning void [enabled by default]      return 0;"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548852263, "post_id": 54432750, "comment_id": 95690868, "body": "Well yes, @Spartan.  Use a <code>return</code> statement with no value (just <code>return;</code>), or else no <code>return</code> at all in a function declared to return <code>void</code>. This is really the point.  Fortran does not <i>expect</i> or use a return value, because you&#39;re calling the thing <i>as a subroutine</i>.  So it should not return anything, and it should be declared to not return anything."}, {"owner": {"reputation": 65, "user_id": 6348732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3ef2349408138bd49ee2cf55e2384a?s=128&d=identicon&r=PG&f=1", "display_name": "Spartan", "link": "https://stackoverflow.com/users/6348732/spartan"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1548881612, "post_id": 54432750, "comment_id": 95707477, "body": "@JohnBollinger: thank you so much John. I have learnt a lot here."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 10443813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ee2ae00e0a906599c69e0e698035d0?s=128&d=identicon&r=PG&f=1", "display_name": "KL-Yang", "link": "https://stackoverflow.com/users/10443813/kl-yang"}, "is_accepted": true, "score": 2, "last_activity_date": 1549027320, "creation_date": 1549027320, "answer_id": 54480423, "question_id": 54432750, "link": "https://stackoverflow.com/questions/54432750/fortran-and-c-interoperability-receive-return-value-from-c-calling-from-fortra/54480423#54480423", "title": "Fortran and C interoperability: receive return value from c (calling from Fortran)", "body": "<p>There are a lot of comments, did anyone actually compile and try to run this code?\nBeside the FORTRAN (index start form 1) and C (index start from 0), there is a typo preventing you get expected result. </p>\n\n<p>BTW, please use implicit none in any FORTRAN!</p>\n\n<pre><code>int client_(double rread[2]) \n{ \n    double result;\n    result=1.;\n    //rread[1]=result; --&gt; typo?\n    rread[0]+=result;\n    printf(\"%.2lf\",rread);\n    return 0; \n} \n</code></pre>\n\n<p>Area =    3.0000000000000000<br>\n0.00 new nread is:    8.0000000000000000 </p>\n"}], "owner": {"reputation": 65, "user_id": 6348732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3ef2349408138bd49ee2cf55e2384a?s=128&d=identicon&r=PG&f=1", "display_name": "Spartan", "link": "https://stackoverflow.com/users/6348732/spartan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 54480423, "answer_count": 1, "score": 2, "last_activity_date": 1549027320, "creation_date": 1548816984, "question_id": 54432750, "link": "https://stackoverflow.com/questions/54432750/fortran-and-c-interoperability-receive-return-value-from-c-calling-from-fortra", "title": "Fortran and C interoperability: receive return value from c (calling from Fortran)", "body": "<p>I have read a lot of posts on a similar topic but I have not yet succeeded resolving this. \nI should mention that I have simplified my code a lot for this post. \nMy intention is to use a c function by calling it from fortran77 and receiving back values from c. The fact that I mention fortran77 is because I want to link my code to a much larger project that uses fortran77, but I am willing to consider solutions with other versions of fortran if they do the job and if you believe they will simplify my problem.</p>\n\n<p>I have two files: Try_stack.f and client2.c.\nI am compiling my code as: </p>\n\n<pre><code>gcc -c client2.c\ngfortran -g Try_stack.f client2.o -o combined\n</code></pre>\n\n<p>My Try_stack.f file:</p>\n\n<pre><code>      program circle\n\n      call circle2\n      stop\n      end\n\n      subroutine circle2 \n      dimension rread(2)\n      double precision r, area,rread\n      external client\n\n      area = 3.\n      rread(1)=area\n      rread(2)=area+10.\n      write (*,*) 'Area = ',  rread(1)\n      call client(rread)\n      retNread = rread(1) * 2\n      write(*,*) 'new nread is: ',retNread\n\n      return\n      end\n</code></pre>\n\n<p>And my client2.c file:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;string.h&gt; \n#include &lt;stdint.h&gt;\n\nint client_(double rread[2]) \n{ \n    double result;\n    result=1.;\n    rread[1]=result;\n    printf(\"%.2lf\",rread);\n    return 0; \n} \n</code></pre>\n\n<p>After running the compiled version I am getting:</p>\n\n<p>Area =    3.0000000000000000<br>\n0.00 new nread is:    6.00000000 </p>\n\n<p>But, I wanted the return value to the fortran program to have been equal to 8.000 instead of 6.0000 (because fortran sends the value 3., 1. is added to 3. and a 4.0 should return back to fortran for multiplying it with 2.). If I wanted to write this in a simple way to explain it, I would say:</p>\n\n<ul>\n<li><p>First, I want the fortran file to send number 3. to c (actually I want to exchange arrays).</p></li>\n<li><p>Second, I want the c file to take number 3. and add 1.</p></li>\n<li><p>Third, I want c to return back the result to the fortran file, i.e. number 4.</p></li>\n<li>Finally, I want fortran to continue computing, in this case multiply 4*2=8.</li>\n</ul>\n\n<p>I read a lot about iso_c_binding but I have not obviously managed to utilise it, plus it requires recent versions of Fortran if my understanding is correct.\nAny help will be much appreciated.</p>\n"}, {"tags": ["c", "linked-list", "singly-linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1548816457, "post_id": 54432654, "comment_id": 95674944, "body": "You need to do your own homework. From the <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>: <i>Questions asking for homework help <b>must include a summary of the work you&#39;ve done so far to solve the problem, and a description of the difficulty you are having solving it</b>.</i>"}, {"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1548817273, "post_id": 54432654, "comment_id": 95675097, "body": "@KenWhite I am not looking for answers. I am looking for guidance. What I am asking is if I should restart the whole code to make doubly liked lists or to recycle and reuse the singly linked list."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1548818250, "post_id": 54432654, "comment_id": 95675296, "body": "Your first paragraph of text shows that you know what you need to do. Why would you restart the whole code to add a pointer to the previous node, which would make the existing singly-linked list a doubly-linked list?"}, {"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1548818948, "post_id": 54432654, "comment_id": 95675446, "body": "From reading online I understand that adding a pointer to show the previous node is the premise of a dll. But what I want to know is how will this affect my code if I choose to add or delete a node within the console.   I am not trying to take advantage of people into writing my code if thats what you&#39;re trying to accuse me of. I&#39;m just a software student who is having trouble understanding how it works when professors choose not to help or explain..."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548822222, "post_id": 54432654, "comment_id": 95676155, "body": "regarding: <code>scanf(&quot;%s&quot;, &amp;temp-&gt;songName);</code>  the field <code>songName</code> is an array.  In c, referencing an array name degrades to the address of the first byte of the array.  so this statement is trying to access: <code>char *[20]</code> which is not the same thing.  Strongly suggest removing the <code>&amp;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 0, "creation_date": 1548817679, "post_id": 54432774, "comment_id": 95675185, "body": "Is this all it takes to make it into a doubly linked list?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 1, "creation_date": 1548818864, "post_id": 54432774, "comment_id": 95675424, "body": "@SamuelIorga you (hopefully obviously) also need to manage that added member pointer in the routines that add and remove nodes in your linked list. This shows where the pointer goes. The same ideas for managing the singly-linked list now need to be extended to utilizing that second pointer. Trust me when I say this: paper, a pencil, boxes, and arrows are <i>easily</i> your best friend in the <i>world</i> when it comes to understanding the code you have, and the additions you&#39;re going to make."}], "tags": [], "owner": {"reputation": 561, "user_id": 5934085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBBu3.jpg?s=128&g=1", "display_name": "T1412", "link": "https://stackoverflow.com/users/5934085/t1412"}, "is_accepted": false, "score": 0, "last_activity_date": 1548817183, "creation_date": 1548817183, "answer_id": 54432774, "question_id": 54432654, "link": "https://stackoverflow.com/questions/54432654/how-to-change-sinlgy-linked-list-to-doubly-linked-list/54432774#54432774", "title": "How to change sinlgy linked list to doubly linked list?", "body": "<p>You just need a pointer point to previous node</p>\n\n<pre><code>typedef struct node\n{\n    char songName[20];\n    int songLength;\n    int copyright;\n    struct node * next;\n    struct node* prev;\n}node;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 0, "creation_date": 1548821118, "post_id": 54433159, "comment_id": 95675921, "body": "This makes sense. So after pointing to the next node I would also point the the previous. But wouldn&#39;t I have to make another pointer to the current node so the next and prev pointers can reference themselves to the current node? Also last node points to NULL, what would the first node be pointing to if there is no previous node? Would it also point to NULL? or a loop back to last node perhaps?"}, {"owner": {"reputation": 195, "user_id": 4432916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773f5c33058603089e08b3f435dabde3?s=128&d=identicon&r=PG&f=1", "display_name": "thomachan", "link": "https://stackoverflow.com/users/4432916/thomachan"}, "reply_to_user": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 0, "creation_date": 1548823117, "post_id": 54433159, "comment_id": 95676363, "body": "While creating itself you need to create the link to previous node. since you are adding at the end of a list, you need to have the pointer of last node before insertion."}, {"owner": {"reputation": 195, "user_id": 4432916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773f5c33058603089e08b3f435dabde3?s=128&d=identicon&r=PG&f=1", "display_name": "thomachan", "link": "https://stackoverflow.com/users/4432916/thomachan"}, "reply_to_user": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 0, "creation_date": 1548823146, "post_id": 54433159, "comment_id": 95676365, "body": "and the prev pointer of HEAD is like next pointer of last node, NULL"}], "tags": [], "owner": {"reputation": 195, "user_id": 4432916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/773f5c33058603089e08b3f435dabde3?s=128&d=identicon&r=PG&f=1", "display_name": "thomachan", "link": "https://stackoverflow.com/users/4432916/thomachan"}, "is_accepted": false, "score": 0, "last_activity_date": 1548820702, "creation_date": 1548820702, "answer_id": 54433159, "question_id": 54432654, "link": "https://stackoverflow.com/questions/54432654/how-to-change-sinlgy-linked-list-to-doubly-linked-list/54433159#54433159", "title": "How to change sinlgy linked list to doubly linked list?", "body": "<p>just like @T1412 said, you need to add a new member to the structure.</p>\n\n<pre><code>typedef struct node\n{\n    char songName[20];\n    int songLength;\n    int copyright;\n    struct node * next;\n    struct node* prev;\n}node\n</code></pre>\n\n<p>now you need to modify the create() function so that each node's prev pointer is pointing to previous node, and the HEAD node's prev points to NULL.</p>\n\n<p>Similarly, you need to modify all the linked list related functions to incorporate the prev pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1548822555, "creation_date": 1548822555, "answer_id": 54433374, "question_id": 54432654, "link": "https://stackoverflow.com/questions/54432654/how-to-change-sinlgy-linked-list-to-doubly-linked-list/54433374#54433374", "title": "How to change sinlgy linked list to doubly linked list?", "body": "<p>1)  strongly suggest changing:</p>\n\n<pre><code>typedef struct node\n{\n    char songName[20];\n    int songLength;\n    int copyright;\n    struct node * next;\n}node;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>struct NODE\n{\n    char songName[20];\n    int songLength;\n    int copyright;\n    struct NODE * prev;\n    struct NODE * next;\n};\ntypedef struct NODE node;\n</code></pre>\n\n<p>Then wherever in the code that it is linking in a new node, add the necessary statement to set the 'prior' field.  Remember that the firs  node will contain NULL in the 'prior' field.</p>\n"}], "owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1548822555, "creation_date": 1548816047, "question_id": 54432654, "link": "https://stackoverflow.com/questions/54432654/how-to-change-sinlgy-linked-list-to-doubly-linked-list", "title": "How to change sinlgy linked list to doubly linked list?", "body": "<p>I have a program that I am supposed to change it from a singly linked list to a doubly linked list. This means that I use pointer that points to the next node and a pointer that points to previous node.</p>\n\n<p>How do I do this while recycling my previous code. Is there a way to do this with minimum steps involved?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#pragma warning(disable:4996)\n\n\n//declaring structure\ntypedef struct node\n{\n    char songName[20];\n    int songLength;\n    int copyright;\n    struct node * next;\n}node;\n\n//prototypes\nnode *create(int n);\nvoid display_recursive(node *n);\n\n\nint main()\n{\n    int n = 0;\n\n    node *head = NULL;\n\n    printf(\"How many entries?\\n\");\n    scanf(\"%d\", &amp;n);\n\n    //call to create list\n    head = create(n);\n\n    printf(\"\\nThe linked list in order is:\\n\");\n    display_recursive(head);\n\n    return 0;\n}\n\nnode *create(int n)\n{\n    node *head = NULL;\n    node *temp = NULL;\n    node *p = NULL;\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        temp = (node*)malloc(sizeof(node));\n        printf(\"What is the name of song %d\\n\", i + 1);\n        scanf(\"%s\", &amp;temp-&gt;songName);\n\n        printf(\"What is the length of song %d (in seconds)?\\n\", i + 1);\n        scanf(\"%d\", &amp;temp-&gt;songLength);\n\n        printf(\"Is song %d copyrighted?(1 = YES, 0 = NO)\\n\", i + 1);\n        scanf(\"%d\", &amp;temp-&gt;copyright);\n\n        temp-&gt;next = NULL;\n\n        if (head == NULL)\n        {\n            head = temp;\n        }\n        else\n        {\n            // if not empty, attach new node at the end\n            p = head;\n\n            while (p-&gt;next != NULL)\n            {\n                p = p-&gt;next;\n            }\n            p-&gt;next = temp;\n        }\n    }\n    return head;\n}\n\nvoid display_recursive(node *n) {\n    if (!n) {\n        return;\n    }\n    display_recursive(n-&gt;next);\n\n    printf(\"Song: %s, \", n-&gt;songName);\n    printf(\"%d minutes, \",n-&gt;songLength);\n    if (n-&gt;copyright == 1)\n    {\n        printf(\"Copyrights\\n\");\n    }\n    else if (n-&gt;copyright == 0)\n    {\n        printf(\"No copyrights\\n\");\n    }\n}\n</code></pre>\n\n<p>I don't really know how the code should look or what I have to add to achieve a doubly linked list.</p>\n"}, {"tags": ["c", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1548815823, "post_id": 54432585, "comment_id": 95674811, "body": "K&amp;R predates standard C"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548820029, "post_id": 54432585, "comment_id": 95675673, "body": "K&amp;R 1st Edition from 1978 predates the C standard by more than a decade.  It was one of the primary inputs to the standard, though.  K&amp;R 2nd Edition from 1988 precedes the C89 ANSI standard and C90 ISO standard by a little, but the standard was mostly stable by the time the book was published.  To ensure that the existing code base was not rendered obsolete, the C89/90 standard did not mandate specifying a return type on function definitions, and allowed functions to be declared implicitly if the return type was <code>int</code>.  C99 removed that laxness.  K&amp;R 2nd Edition shows its age on such issues."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1548818185, "post_id": 54432639, "comment_id": 95675280, "body": "ANSI C89 still allows the return type to be omitted (C99 made it compulsory)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1548818204, "post_id": 54432639, "comment_id": 95675284, "body": "<code>long float</code> is not allowed  (<code>long double</code> is)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548819958, "post_id": 54432639, "comment_id": 95675662, "body": "ANSI C came after K&amp;R, and so did the mutations in C++. It is not possible for things in the future to affect things in the past, and therefore this does not answer the question \u201cWhy don&#39;t Kernighan and Ritchie include int for the main functions?\u201d"}, {"owner": {"reputation": 388, "user_id": 7892010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb22306a8bdbe2dfcfa54ec6e0edca5?s=128&d=identicon&r=PG&f=1", "display_name": "Manny_Mar", "link": "https://stackoverflow.com/users/7892010/manny-mar"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1548822065, "post_id": 54432639, "comment_id": 95676122, "body": "@Eric Postpischil K&amp;R second edition book, is entitled ANSI C in red ink in my copy. Which is the book i used, I never looked at is first edition book. As stated below, int was the default type of what a fcn returns, if you do not include a return type. That said, they recommend  always using a return type, or Void if no return type. The only place in the book, they don&#39;t include a return type is main. They have many <code>main(){</code> in the book. It automatically defaults to int."}, {"owner": {"reputation": 388, "user_id": 7892010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb22306a8bdbe2dfcfa54ec6e0edca5?s=128&d=identicon&r=PG&f=1", "display_name": "Manny_Mar", "link": "https://stackoverflow.com/users/7892010/manny-mar"}, "edited": false, "score": 0, "creation_date": 1548823863, "post_id": 54432639, "comment_id": 95676515, "body": "@EvilTeach Although the first C book 1978 declared fcn like you just showed above. The second book 1988 ANSI C declares functions the same way we do now."}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1548860433, "post_id": 54432639, "comment_id": 95696114, "body": "@M.M long float was a double in those days."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1548887947, "post_id": 54432639, "comment_id": 95709890, "body": "@EvilTeach well, <code>long float</code> is not allowed in C89, and not allowed by K&amp;R2 (page 36). I don&#39;t have a copy of K&amp;R1 handy  , does it differ?"}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1548889916, "post_id": 54432639, "comment_id": 95710467, "body": "yep, it calls double a synonym for long float."}], "tags": [], "owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "is_accepted": false, "score": 2, "last_activity_date": 1548815962, "creation_date": 1548815962, "answer_id": 54432639, "question_id": 54432585, "link": "https://stackoverflow.com/questions/54432585/why-dont-kernighan-and-ritchie-include-int-for-the-main-functions/54432639#54432639", "title": "Why don&#39;t Kernighan and Ritchie include int for the main functions?", "body": "<p>Yep.  Blow the dust off your white book, and you will see exactly that.  K&amp;R is what it is and it happened well before ANSI C.</p>\n\n<p>Another difference is function arguments.  If i recall correctly it was done like this</p>\n\n<pre><code>some_function_name(a,b)\nint a;\nlong float b;\n{\n    printf(\"%d %lf\\n\", a, b);\n}\n</code></pre>\n\n<p>C and C++ have mutated a lot over the decades.</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1548820412, "creation_date": 1548820412, "answer_id": 54433133, "question_id": 54432585, "link": "https://stackoverflow.com/questions/54432585/why-dont-kernighan-and-ritchie-include-int-for-the-main-functions/54433133#54433133", "title": "Why don&#39;t Kernighan and Ritchie include int for the main functions?", "body": "<p>At the time Kernighan and Ritchie wrote, <code>int</code> was the default type. Computing was in general simpler than it is today and had more constrained resources. Languages were designed to satisfy simple needs. And they were not completely designed; they evolved from scratch, with changes contributed by different people in different places with different things in mind. So the C at the time was not designed with modern ideas about type safety or being strict about grammar to reduce the frequency of errors. Some features put into it were things that people thought were nice and immediately useful, not necessarily things that had been analyzed for their deeper effects or future effects.</p>\n\n<p>One motivating factor in language design was brevity. <code>int</code> was a frequently used type, because it was intended to be the \u201cnatural\u201d type for whatever machine was being used, so it was convenient to make it the default. Therefore, many declarations defaulted to <code>int</code>, so it was not required.</p>\n\n<p>Modern compilers may still allow the absence of <code>int</code> so that old code can still be compiled. Often, such compilers have switches to be more strict about which language dialect(s) they accept. For example, in GCC and Clang, you can specify <code>-std=c11</code> to request stricter conformance to the C standard. (And <code>-std=c17</code> or <code>-std=c18</code> may be available soon.) When writing new programs, you should use such switches so that your compiler will issue diagnostics about code that does not conform to modern standards. This will help write code that better conforms to the current standard, has more well-defined behavior, and is more likely to remain useful longer into the future.</p>\n"}], "owner": {"reputation": 1191, "user_id": 7559397, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f21dc34064e2838b5a87891dc4a8ca32?s=128&d=identicon&r=PG&f=1", "display_name": "Jinzu", "link": "https://stackoverflow.com/users/7559397/jinzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 1, "closed_date": 1548831276, "accepted_answer_id": 54433133, "answer_count": 2, "score": 2, "last_activity_date": 1548831323, "creation_date": 1548815673, "question_id": 54432585, "link": "https://stackoverflow.com/questions/54432585/why-dont-kernighan-and-ritchie-include-int-for-the-main-functions", "closed_reason": "Duplicate", "title": "Why don&#39;t Kernighan and Ritchie include int for the main functions?", "body": "<p>Each example that is done is completed with main omitting \"int\". Why is this and why does it still compile the same without it. Are C compilers created with int implied?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 1, "creation_date": 1548815263, "post_id": 54432523, "comment_id": 95674678, "body": "Octal numbers in C is up to 3 digits. Basically you should get the octal characters representation."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 3, "creation_date": 1548815385, "post_id": 54432523, "comment_id": 95674712, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11815076/octal-representation-inside-a-string-in-c\">Octal representation inside a string in C</a>"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1548815464, "post_id": 54432523, "comment_id": 95674731, "body": "@RaymondChen, four, not three."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1548815507, "post_id": 54432523, "comment_id": 95674743, "body": "If you change <code>str</code> to <code>&quot;\\0zz\\0345&quot;</code>, now the parser will see the first <code>\\0</code> as a null since <code>z</code> is not a valid octal character, so you&#39;ll get the same lack of output as for <code>testArr</code>."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 8, "last_activity_date": 1548816649, "last_edit_date": 1548816649, "creation_date": 1548815647, "answer_id": 54432581, "question_id": 54432523, "link": "https://stackoverflow.com/questions/54432523/null-character-and-strings-in-c/54432581#54432581", "title": "Null character and strings in C", "body": "<p>An octal escape sequence is <code>\\</code> followed by one to three octal digits, per C 2018 6.4.4.4 1. Per 6.4.4.4 7: \u201cEach octal or hexadecimal escape sequence is the longest sequence of characters that can constitute the escape sequence.\u201d So, when the compiler sees <code>\"\\012\\0345\"</code>, it interprets it as the sequence <code>\\012</code> (which is ten), the sequence <code>\\034</code> (which is twenty-eight), and the character <code>5</code>.</p>\n\n<p>To represent the string you intended, you could use <code>\"\\00012\\000345\"</code>. Since an octal escape sequence stops at three digits, this is interpreted as the sequence <code>\\000</code>, the characters <code>1</code> and <code>2</code>, the sequence <code>\\000</code>, and the characters <code>3</code>, <code>4</code>, and <code>5</code>. (A null terminating character will also be appended automatically.)</p>\n\n<p>When you printed <code>\"\\012\\0345\"</code>, the characters with codes ten and twenty-eight were printed but had no visible effect. (Your C implementation likely uses ASCII, in which case they are control characters. <code>\\012</code> is new-line, so it should have caused a line advance, but you probably did not notice that. <code>\\034</code> is a file-separator control character, which likely has no effect when printed to a regular terminal display.)</p>\n\n<p>When you printed <code>testArr</code>, the null character in the first position ended the string.</p>\n"}], "owner": {"reputation": 3623, "user_id": 701302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a0209e45e0162da89877cf2981ff127?s=128&d=identicon&r=PG", "display_name": "slevy1", "link": "https://stackoverflow.com/users/701302/slevy1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 1, "accepted_answer_id": 54432581, "answer_count": 1, "score": 2, "last_activity_date": 1548838592, "creation_date": 1548815053, "last_edit_date": 1548838592, "question_id": 54432523, "link": "https://stackoverflow.com/questions/54432523/null-character-and-strings-in-c", "title": "Null character and strings in C", "body": "<p>I have the following C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;strings.h&gt;\n\nint main(void){\n\nchar * str = \"\\012\\0345\";\n\nchar testArr[8] = {'\\0','1','2','\\0','3','4','5','\\0'};\n\nprintf(\"%s\\n\",str);\n\nprintf(\"**%s**\",testArr);\n\nreturn 0;\n}\n</code></pre>\n\n<p>See live code <a href=\"http://codepad.org/YadmErPi\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I'm having trouble understanding the results and I have googled but am unsure that I understand why a null character at the start of a string and why one in the middle would cause only the string \"5\" to display.  Also, when I assign each string character to array testArr and then attempt to display that array of characters the result is different despite the string and the array having the same characters.  So, I'm struck by the confounding results, especially  their disparity.  With the string str, does the code display \"5\" because the null characters overwrite what is in memory?</p>\n\n<p>Also, with the array I created using the same characters, nothing displays of the data contained in array testArr.  Is it that once the first null is encountered for some reason everything else is ignored?  If so, why doesn't the same behavior occur with string str which contains the same characters?</p>\n"}, {"tags": ["c", "compiler-errors"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1548814961, "post_id": 54432484, "comment_id": 95674604, "body": "change return type to <code>char*</code> instead of <code>int*</code>"}, {"owner": {"reputation": 79, "user_id": 10930109, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FOKioWs9DI8/AAAAAAAAAAI/AAAAAAAAAAo/gneSgmoNPPU/photo.jpg?sz=128", "display_name": "sarah", "link": "https://stackoverflow.com/users/10930109/sarah"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1548815029, "post_id": 54432484, "comment_id": 95674621, "body": "that worked thanks!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548823639, "post_id": 54432484, "comment_id": 95676476, "body": "OT: regarding: <code>char* partyArr = (char*)malloc(sizeof(char) * 15);</code>  1) the expression: <code>sizeof(char)</code> is defined in the C standard as 1.  multiplying anything by 1 has no effect and just clutters the code.  Suggest removing that expression.  2) in C, the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc.  Suggest removing the cast."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1548823729, "post_id": 54432484, "comment_id": 95676493, "body": "The posted code has the logic problem that if the <code>default</code> case is executed, then the returned value is garbage.  I.E. What ever happened to be in the allocated heap memory.  Suggest setting the array pointed to by <code>partyArr</code> to <code>unknown</code>"}], "owner": {"reputation": 79, "user_id": 10930109, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FOKioWs9DI8/AAAAAAAAAAI/AAAAAAAAAAo/gneSgmoNPPU/photo.jpg?sz=128", "display_name": "sarah", "link": "https://stackoverflow.com/users/10930109/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548814772, "creation_date": 1548814772, "question_id": 54432484, "link": "https://stackoverflow.com/questions/54432484/warning-return-from-incompatible-pointer-type-enabled-by-default", "title": "Warning: return from incompatible pointer type [enabled by default]", "body": "<p>I am trying to return a character array but I am getting the error shown above. I am new to programming so I dont know much. Thanks in advance for your help.</p>\n\n<pre><code>int* printParty(int party)\n{\n    char* partyArr = (char*)malloc(sizeof(char) * 15);\n\n    switch (party)\n    {\n            case 1:\n                    strncpy(partyArr, \"Constitution\", 15);\n                    break;\n            case 2:\n                    strncpy(partyArr, \"Democrat\", 15);;\n                    break;\n            case 3:\n                    strncpy(partyArr, \"Green\", 15);\n                    break;\n            case 4:\n                    strncpy(partyArr,\"Libertarian\", 15);\n                    break;\n            case 5:\n                    strncpy(partyArr, \"Republican\", 15);\n                    break;\n            default:\n                    printf(\"Not a valid input.\");\n    }\nreturn partyArr;\n}\n</code></pre>\n"}, {"tags": ["c", "memory-management", "struct", "heap-memory", "stack-memory"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 8196226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e862939a2a7c3d1cfcb42e132c971693?s=128&d=identicon&r=PG&f=1", "display_name": "Gi5", "link": "https://stackoverflow.com/users/8196226/gi5"}, "edited": false, "score": 0, "creation_date": 1548815273, "post_id": 54432540, "comment_id": 95674681, "body": "can you give me explain why?"}, {"owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "reply_to_user": {"reputation": 83, "user_id": 8196226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e862939a2a7c3d1cfcb42e132c971693?s=128&d=identicon&r=PG&f=1", "display_name": "Gi5", "link": "https://stackoverflow.com/users/8196226/gi5"}, "edited": false, "score": 0, "creation_date": 1548815291, "post_id": 54432540, "comment_id": 95674688, "body": "What sort of context are you looking for?"}, {"owner": {"reputation": 83, "user_id": 8196226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e862939a2a7c3d1cfcb42e132c971693?s=128&d=identicon&r=PG&f=1", "display_name": "Gi5", "link": "https://stackoverflow.com/users/8196226/gi5"}, "edited": false, "score": 0, "creation_date": 1548815320, "post_id": 54432540, "comment_id": 95674695, "body": "line number (13) where is a1.arr stored?  i think this stored on global"}, {"owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "reply_to_user": {"reputation": 83, "user_id": 8196226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e862939a2a7c3d1cfcb42e132c971693?s=128&d=identicon&r=PG&f=1", "display_name": "Gi5", "link": "https://stackoverflow.com/users/8196226/gi5"}, "edited": false, "score": 0, "creation_date": 1548815413, "post_id": 54432540, "comment_id": 95674720, "body": "@GiladRozmarin you have to be careful about what you mean by a1.arr. A1. arr is a pointer, the pointer is kept on the stack. It points to a global address in the program."}, {"owner": {"reputation": 83, "user_id": 8196226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e862939a2a7c3d1cfcb42e132c971693?s=128&d=identicon&r=PG&f=1", "display_name": "Gi5", "link": "https://stackoverflow.com/users/8196226/gi5"}, "edited": false, "score": 0, "creation_date": 1548815482, "post_id": 54432540, "comment_id": 95674735, "body": "i am trying to understand if where struct stored and if i have pointer in my struct that point to global area if that effect on the stored"}, {"owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "reply_to_user": {"reputation": 83, "user_id": 8196226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e862939a2a7c3d1cfcb42e132c971693?s=128&d=identicon&r=PG&f=1", "display_name": "Gi5", "link": "https://stackoverflow.com/users/8196226/gi5"}, "edited": false, "score": 0, "creation_date": 1548815543, "post_id": 54432540, "comment_id": 95674754, "body": "The stored pointer now points to a global address. The pointer is still on the stack. It sounds like you could  <a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/C/node10.html\" rel=\"nofollow noreferrer\">use a tutorial</a> of some sort on pointers."}], "tags": [], "owner": {"reputation": 864, "user_id": 10913596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf12cce6499d0cf89a03500f0808ab?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/10913596/daniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1548815807, "last_edit_date": 1548815807, "creation_date": 1548815185, "answer_id": 54432540, "question_id": 54432463, "link": "https://stackoverflow.com/questions/54432463/memory-mangement-advanced-in-c-stored-variables/54432540#54432540", "title": "memory mangement advanced in c stored variables", "body": "<p>Answering your questions:</p>\n\n<blockquote>\n  <p>Line number (12) where is &amp;(a1) stored? where is a1 stored? </p>\n</blockquote>\n\n<p>a1 is stored on the stack. &amp;(a1) Is an address. </p>\n\n<blockquote>\n  <p>line number (13) where is a1.arr stored?</p>\n</blockquote>\n\n<p>Stack, a1.arr specifically is stored in the stack. A pointer is a variable itself that can store another address. If the <em>value</em> of the pointer gets changed, the pointer is still kept on the stack, but where it's pointing could be in a different context.</p>\n\n<blockquote>\n  <p>line number(21) where is a2->arr stored?</p>\n</blockquote>\n\n<p>a2->arr specifically is stored in the heap. a2 is a pointer to heap memory (hence you called it by malloc), but a2 is still in the stack. </p>\n\n<blockquote>\n  <p>line number(22) &amp;(a2->size) stored?</p>\n</blockquote>\n\n<p>Do you mean a2->size? a2->size is stored in the heap.</p>\n"}], "owner": {"reputation": 83, "user_id": 8196226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e862939a2a7c3d1cfcb42e132c971693?s=128&d=identicon&r=PG&f=1", "display_name": "Gi5", "link": "https://stackoverflow.com/users/8196226/gi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 54432540, "answer_count": 1, "score": -2, "last_activity_date": 1548815807, "creation_date": 1548814587, "last_edit_date": 1548815023, "question_id": 54432463, "link": "https://stackoverflow.com/questions/54432463/memory-mangement-advanced-in-c-stored-variables", "title": "memory mangement advanced in c stored variables", "body": "<p>I have a code example that stores variables in different places of memory: global,dynamic heap,stack and undefined. </p>\n\n<p>I know that all the methods are stored on the stack, all dynamically allocated memory is in the heap and all variables that are not in {} block stored on global area.</p>\n\n<p>I think that variables in a struct get also pointer to dynamic heap in the size of the struct.</p>\n\n<p>So I have some questions about the code   </p>\n\n<p>line number (11) where is &amp;(a1) stored?</p>\n\n<p>where is a1 stored?</p>\n\n<p>line number (12) where is a1.arr stored?</p>\n\n<p>line number(21) where is a2->arr stored?</p>\n\n<p>line number(22) &amp;(a2->size) stored?</p>\n\n<p><a href=\"https://i.stack.imgur.com/D7LK6.png\" rel=\"nofollow noreferrer\">That my code example</a></p>\n\n<pre><code>#define N 4\n\ntypedef struct a \n{\n    int* arr;\n    int size;\n}A;\nint arr1[] = {1,2,3,4};\n\nint main()\n{ \n    A a1;\n    a1.arr = arr1;\n    a1.size = sizeof(arr1)/sizeof(arr1[0]);     \n    A* a2;\n    a2 = malloc(sizeof(A));\n    int arr2[N];\n    for(int i=0;i&lt;N; ++i)\n    {\n        arr2[i] = i*N;\n    }\n\n    a2-&gt;arr=arr2;\n    a2-&gt;size=N;\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "terminal"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10481362"}, "edited": false, "score": 2, "creation_date": 1548813292, "post_id": 54432297, "comment_id": 95674233, "body": "Is that all your code?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1548813504, "post_id": 54432297, "comment_id": 95674283, "body": "Welcome (back) to Stack Overflow.  Please reread the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page, and even more urgently, read about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  What you&#39;ve provided is too minimal to be useful.  We can only assume that the second line is inside a function; the first might be inside or outside a function.  There&#39;s not enough information to know what else is going wrong."}, {"owner": {"reputation": 7, "user_id": 8378172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be989da34a302b5532245769ecf8e753?s=128&d=identicon&r=PG&f=1", "display_name": "Kitty", "link": "https://stackoverflow.com/users/8378172/kitty"}, "edited": false, "score": 0, "creation_date": 1548813868, "post_id": 54432297, "comment_id": 95674359, "body": "Yes, that is all my code inside main. I will edit it to show the main function now"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548813977, "post_id": 54432297, "comment_id": 95674384, "body": "You aren&#39;t prompting the user for any input, nor are you trying to read any input.  All you&#39;ve done is set the file stream pointer <code>openFile</code> to point to standard input; you&#39;ve never read anything (or written anything).  I note in passing that since you are not using the command line arguments, you should write <code>int main(void)</code> in preference to <code>int main(int argc, char **argv)</code>."}, {"owner": {"reputation": 7, "user_id": 8378172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be989da34a302b5532245769ecf8e753?s=128&d=identicon&r=PG&f=1", "display_name": "Kitty", "link": "https://stackoverflow.com/users/8378172/kitty"}, "edited": false, "score": 0, "creation_date": 1548814042, "post_id": 54432297, "comment_id": 95674399, "body": "Okay, so how can I ask  for input using stdin?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548814169, "post_id": 54432297, "comment_id": 95674434, "body": "You can use <code>printf()</code> to print the prompt to standard output, and you could use <code>scanf()</code> or <code>fscanf()</code> or <code>getchar()</code> or <code>getc()</code> or any of the other input functions to get input.  Please consult your textbook; this sort of stuff tends to be covered quite early."}, {"owner": {"reputation": 7, "user_id": 8378172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be989da34a302b5532245769ecf8e753?s=128&d=identicon&r=PG&f=1", "display_name": "Kitty", "link": "https://stackoverflow.com/users/8378172/kitty"}, "edited": false, "score": 0, "creation_date": 1548814170, "post_id": 54432297, "comment_id": 95674436, "body": "For reference, I was following this post, which seems like it worked for them? <a href=\"https://stackoverflow.com/questions/3495092/read-from-file-or-stdin\" title=\"read from file or stdin\">stackoverflow.com/questions/3495092/read-from-file-or-stdin</a>"}, {"owner": {"reputation": 7, "user_id": 8378172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be989da34a302b5532245769ecf8e753?s=128&d=identicon&r=PG&f=1", "display_name": "Kitty", "link": "https://stackoverflow.com/users/8378172/kitty"}, "edited": false, "score": 0, "creation_date": 1548814253, "post_id": 54432297, "comment_id": 95674453, "body": "Don&#39;t have a textbook, got any recommendations?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548814300, "post_id": 54432297, "comment_id": 95674467, "body": "Were you following the question or the answer(s)?  The question code fails,  The accepted answer code uses <code>fgetc()</code> \u2014 one of the other input functions I didn&#39;t mention \u2014 to get data."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1548814492, "post_id": 54432297, "comment_id": 95674512, "body": "I&#39;d recommend King <a href=\"http://knking.com/books/c2/index.html\" rel=\"nofollow noreferrer\">C Programming: A Modern Approach (2nd Edition)</a> from the books listed at <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">The Definitive C Book Guide and List</a>.  It seems to do a competent job.  The classic is K&amp;R, but that is now rather dated (the second edition describes C90, and was published just before the original C standard was finalized).  It&#39;s still a good (compact) book, but it shows its age."}, {"owner": {"reputation": 7, "user_id": 8378172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be989da34a302b5532245769ecf8e753?s=128&d=identicon&r=PG&f=1", "display_name": "Kitty", "link": "https://stackoverflow.com/users/8378172/kitty"}, "edited": false, "score": 0, "creation_date": 1548814799, "post_id": 54432297, "comment_id": 95674574, "body": "go it,  thanks for the help!"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10481362"}, "edited": false, "score": 1, "creation_date": 1548816079, "post_id": 54432548, "comment_id": 95674866, "body": "You should NEVER use gets. Use fgets() instead. Is a more safer function."}], "tags": [], "owner": {"reputation": 41, "user_id": 10972889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752129741231e3238f4491a2f85769a8?s=128&d=identicon&r=PG&f=1", "display_name": "fmbuthsntbbtc", "link": "https://stackoverflow.com/users/10972889/fmbuthsntbbtc"}, "is_accepted": false, "score": 1, "last_activity_date": 1548908683, "last_edit_date": 1548908683, "creation_date": 1548815266, "answer_id": 54432548, "question_id": 54432297, "link": "https://stackoverflow.com/questions/54432297/stdin-doesnt-work-when-i-run-the-program/54432548#54432548", "title": "Stdin doesn&#39;t work when I run the program", "body": "<p>You just open stdin as file but you don't read your file.\nThere are many different ways to get input from stdin.</p>\n\n<p>Function <code>getchar</code> can be used to read a single character from stdin.  Use <code>getc()</code> or <code>fgetc()</code> to read from an arbitrary file stream.\nExample:</p>\n\n<pre><code>int c = getchar();\nprintf(\"you entered %c\\n\", c);\n</code></pre>\n\n<p>Function <code>fgets</code> can be used to read a line from file.\nExample:</p>\n\n<pre><code>char data[200];\nfgets(data, sizeof(data), stdin); // we type stdin as file.\nprintf(\"you entered %s\\n\", data);\n</code></pre>\n\n<p>Function <code>scanf</code> and its family of functions can be used to read many different formats from stdin.\nexample:</p>\n\n<pre><code>char data[200]; // size need be bigger or equal to input length\nscanf(\"%199s\", data);  // Protect from buffer overflow\nprintf(\"you entered %s\\n\", data);\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8378172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be989da34a302b5532245769ecf8e753?s=128&d=identicon&r=PG&f=1", "display_name": "Kitty", "link": "https://stackoverflow.com/users/8378172/kitty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1548908683, "creation_date": 1548813244, "last_edit_date": 1548814058, "question_id": 54432297, "link": "https://stackoverflow.com/questions/54432297/stdin-doesnt-work-when-i-run-the-program", "title": "Stdin doesn&#39;t work when I run the program", "body": "<p>I have the following C code in code.c</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    FILE *openFile = NULL;\n    openFile=stdin;\n}\n</code></pre>\n\n<p>but when I compile and run my code with</p>\n\n<pre><code>gcc -g -o compiledcode code.c\n./compiledcode\n</code></pre>\n\n<p>the terminal doesn't prompt me for an input. What is wrong? </p>\n"}, {"tags": ["c", "count", "character", "line"], "comments": [{"owner": {"reputation": 301, "user_id": 5394210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N7MWY.jpg?s=128&g=1", "display_name": "Ravibhushan Kumar", "link": "https://stackoverflow.com/users/5394210/ravibhushan-kumar"}, "edited": false, "score": 0, "creation_date": 1548813294, "post_id": 54432242, "comment_id": 95674234, "body": "You should remove the char. It&#39;s a data type in c."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1548841487, "post_id": 54432242, "comment_id": 95684425, "body": "How will you handle the line-count on a file with a non-POSIX file-ending? (e.g. no <code>&#39;\\n&#39;</code> at the end) Won&#39;t your line count be short by 1?"}], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 2891944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iJFwu.jpg?s=128&g=1", "display_name": "Jman", "link": "https://stackoverflow.com/users/2891944/jman"}, "is_accepted": false, "score": 1, "last_activity_date": 1548813180, "creation_date": 1548813180, "answer_id": 54432288, "question_id": 54432242, "link": "https://stackoverflow.com/questions/54432242/whats-wrong-with-my-count-characters-words-lines-program/54432288#54432288", "title": "What&#39;s wrong with my count characters, words, lines program?", "body": "<p>char is a reserved word.  You can't name a variable that.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 10470685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0af5d24ddd1c8686da2de08a572b3784?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/10470685/john"}, "edited": false, "score": 0, "creation_date": 1548823309, "post_id": 54432305, "comment_id": 95676397, "body": "Yes, thank you, I changed it now. That made it register the words and lines But for some reason the words are not getting counted correctly. For example, if the input was &quot;testing the program&quot; it will print 20 for characters, 17 for words, and 1 for line. Why is it counting words as 17?"}], "tags": [], "owner": {"reputation": 401, "user_id": 8039374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb68b034ecf5dfc60b43e8813e62e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Honza", "link": "https://stackoverflow.com/users/8039374/honza"}, "is_accepted": false, "score": 0, "last_activity_date": 1548813300, "creation_date": 1548813300, "answer_id": 54432305, "question_id": 54432242, "link": "https://stackoverflow.com/questions/54432242/whats-wrong-with-my-count-characters-words-lines-program/54432305#54432305", "title": "What&#39;s wrong with my count characters, words, lines program?", "body": "<pre><code>while ((c=getchar()!=EOF)) {\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>while (((c=getchar())!=EOF)) {\n</code></pre>\n\n<p>because otherwise it's interpreted as</p>\n\n<pre><code>while ((c=(getchar())!=EOF))) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 9178029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e96354a94ad607b7fb71681c0b3f9c12?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas Bj&#246;rnest&#229;l", "link": "https://stackoverflow.com/users/9178029/niklas-bj%c3%b6rnest%c3%a5l"}, "is_accepted": true, "score": 0, "last_activity_date": 1548837082, "last_edit_date": 1548837082, "creation_date": 1548836712, "answer_id": 54436126, "question_id": 54432242, "link": "https://stackoverflow.com/questions/54432242/whats-wrong-with-my-count-characters-words-lines-program/54436126#54436126", "title": "What&#39;s wrong with my count characters, words, lines program?", "body": "<p>You are counting each letter in a word as a word.\nIt should work to change it to check that it isn't any of the letters in words and remove the else.\nYou might need to add some extra checks so that you only increase words if the last letter was in a word.</p>\n\n<pre><code>if (!((c&gt;='A' &amp;&amp; c&lt;= 'Z') || (c&gt;='a' &amp;&amp; c&lt;= 'z') || (c==39)) {\n    word++;\n}\nif (c=='\\n') {\n    line++;\n} \n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 10470685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0af5d24ddd1c8686da2de08a572b3784?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/10470685/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 54436126, "answer_count": 3, "score": 0, "last_activity_date": 1548837575, "creation_date": 1548812869, "last_edit_date": 1548837575, "question_id": 54432242, "link": "https://stackoverflow.com/questions/54432242/whats-wrong-with-my-count-characters-words-lines-program", "title": "What&#39;s wrong with my count characters, words, lines program?", "body": "<p>Trying to write a C program that:</p>\n\n<p>counts the number of characters, words and lines read from standard input until EOF is reached.\nAssume the input is ASCII text of any length.\nWords are defined as contiguous sequences of letters (a through z, A through Z) and the apostrophe ( ', value 39 decimal) separated by any character outside these ranges.\nLines are defined as contiguous sequences of characters separated by newline characters ('\\n').\nCharacters beyond the final newline character will not be included in the line count.</p>\n\n<p>I have written the following, which works fine to count the characters, but does not count any of the words or lines. I don't understand why.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    unsigned long int countchar=0;\n    unsigned long int word=0;\n    unsigned long int line=0;\n\n    int c;\n\n    while (((c=getchar())!=EOF)) {\n\n        countchar++;\n\n        if ((c&gt;='A' &amp;&amp; c&lt;= 'Z') || (c&gt;='a' &amp;&amp; c&lt;= 'z') || (c==39)) {    \n            word++;\n        }\n\n        else if (c=='\\n') {\n            line++;\n        }\n    }\n\n    printf(\"%lu %lu %lu\\n\", countchar, word, line);\n\n    return 0;    \n}\n</code></pre>\n"}, {"tags": ["c", "dropbox-api"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 9750049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce815f43677ad8fca844e3b8db26c1e1?s=128&d=identicon&r=PG&f=1", "display_name": "MitchMahoney", "link": "https://stackoverflow.com/users/9750049/mitchmahoney"}, "edited": false, "score": 0, "creation_date": 1548891986, "post_id": 54445489, "comment_id": 95710996, "body": "Thanks so much! That really really helps! I need to find a 3rd party library that will call the HTTPS endpoints, right?"}, {"owner": {"reputation": 13778, "user_id": 1305693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da01d21aaa750b4cca96f2eb6017ce94?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1305693/greg"}, "reply_to_user": {"reputation": 85, "user_id": 9750049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce815f43677ad8fca844e3b8db26c1e1?s=128&d=identicon&r=PG&f=1", "display_name": "MitchMahoney", "link": "https://stackoverflow.com/users/9750049/mitchmahoney"}, "edited": false, "score": 0, "creation_date": 1548895852, "post_id": 54445489, "comment_id": 95711984, "body": "You don&#39;t <i>need</i> to use a third party library, but it would probably be easier than implementing it yourself."}], "tags": [], "owner": {"reputation": 13778, "user_id": 1305693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da01d21aaa750b4cca96f2eb6017ce94?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1305693/greg"}, "is_accepted": true, "score": 0, "last_activity_date": 1548866702, "creation_date": 1548866702, "answer_id": 54445489, "question_id": 54431548, "link": "https://stackoverflow.com/questions/54431548/c-to-query-dropbox/54445489#54445489", "title": "C To Query DropBox", "body": "<p>It looks like there are at least two issues here:</p>\n\n<ol>\n<li><p>You're not supplying an access token (which would be in <code>t_key</code> and\n<code>t_secret</code> in this code), so you can't make an authenticated API\ncall, such as to retrieved account information.</p></li>\n<li><p><a href=\"https://github.com/Dwii/Dropbox-C\" rel=\"nofollow noreferrer\">The library you're using</a> uses Dropbox API v1, which has been\n<a href=\"https://blogs.dropbox.com/developers/2017/09/api-v1-shutdown-details/\" rel=\"nofollow noreferrer\">retired</a>, so this would still fail even with a valid access\ntoken. You should use <a href=\"https://blogs.dropbox.com/developers/2017/09/api-v1-shutdown-details/\" rel=\"nofollow noreferrer\">Dropbox API v2</a> instead. Dropbox doesn't\noffer an official SDK for using Dropbox API v2 from C, from you can\ncall <a href=\"https://www.dropbox.com/developers/documentation/http/documentation\" rel=\"nofollow noreferrer\">the HTTPS endpoints</a> directly, or use a third party library\nthat does so.</p></li>\n</ol>\n"}], "owner": {"reputation": 85, "user_id": 9750049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce815f43677ad8fca844e3b8db26c1e1?s=128&d=identicon&r=PG&f=1", "display_name": "MitchMahoney", "link": "https://stackoverflow.com/users/9750049/mitchmahoney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 54445489, "answer_count": 1, "score": 0, "last_activity_date": 1548866702, "creation_date": 1548807092, "question_id": 54431548, "link": "https://stackoverflow.com/questions/54431548/c-to-query-dropbox", "title": "C To Query DropBox", "body": "<p>I am attempting to use the C API to query dropbox, but I am getting an error of:</p>\n\n<blockquote>\n  <p>Account info error (400): invalid_request</p>\n</blockquote>\n\n<p>I have looked at my developer Dropbox settings and verified that I populated the variables <code>c_key, c_secret</code> with the values from App Key &amp; App Secret.</p>\n\n<p>What should I change in my code so this executes succesfully?</p>\n\n<pre><code>int main (int argc, char **argv) {\n\nint err;\nvoid* output;\nchar *c_key    = \"XXXXXXXXXXXXXXX\"; \nchar *c_secret = \"XXXXXXXXXXXXXXXX\";   \nchar *t_key    = NULL; \nchar *t_secret = NULL; \n\ndrbInit();\ndrbClient* cli = drbCreateClient(c_key, c_secret, t_key, t_secret);\ndrbSetDefault(cli, DRBOPT_ROOT, DRBVAL_ROOT_AUTO, DRBOPT_END);\noutput = NULL;\nerr = drbGetAccountInfo(cli, &amp;output, DRBOPT_END);\nif (err != DRBERR_OK) {\n    printf(\"Account info error (%d): %s\\n\", err, (char*)output);\n    free(output);\n} else {\n    drbAccountInfo* info = (drbAccountInfo*)output;\n    displayAccountInfo(info);\n    drbDestroyAccountInfo(info);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays"], "comments": [{"owner": {"reputation": 1, "user_id": 10987481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d017bd8a9cea2b9e8577638f09afa8?s=128&d=identicon&r=PG", "display_name": "Michael Russo", "link": "https://stackoverflow.com/users/10987481/michael-russo"}, "edited": false, "score": 0, "creation_date": 1549084485, "post_id": 54431533, "comment_id": 95786529, "body": "Found the solution for this case:"}], "answers": [{"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1549095947, "post_id": 54490250, "comment_id": 95788450, "body": "to put a code block just select it and press the <code>{}</code> button on the toolbar, or press Ctrl+K. On the right of the toolbar there&#39;s also a <a href=\"https://stackoverflow.com/editing-help\">help button</a>, please spend a few minutes to know how to format your code properly"}], "tags": [], "owner": {"reputation": 1, "user_id": 10987481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d017bd8a9cea2b9e8577638f09afa8?s=128&d=identicon&r=PG", "display_name": "Michael Russo", "link": "https://stackoverflow.com/users/10987481/michael-russo"}, "is_accepted": false, "score": 0, "last_activity_date": 1549095824, "last_edit_date": 1549095824, "creation_date": 1549085092, "answer_id": 54490250, "question_id": 54431533, "link": "https://stackoverflow.com/questions/54431533/3d-c-array-to-assembly/54490250#54490250", "title": "3d C array to Assembly", "body": "<p>Found the solution for this case:  </p>\n\n<pre><code>mov esi,[ebp + 12] ; buffer[20][512] = malloc(10*12)\nmov edx,[esi]    ;Move to first bitmap\nlea esi,[edx]    ;first bitmap address\nmov eax,[ebx + 36] ;index to each map\nmov ecx,120        ;120 = 12x10 size bit map\nmul ecx            ;120 x map index.\nmov dl. [esi + eax] ;index through to the output buffer\nmov [edi + ebx],dl   ; next\n.\n.\n.\nadd ebx,320\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10987481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d017bd8a9cea2b9e8577638f09afa8?s=128&d=identicon&r=PG", "display_name": "Michael Russo", "link": "https://stackoverflow.com/users/10987481/michael-russo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549095824, "creation_date": 1548806942, "last_edit_date": 1548813276, "question_id": 54431533, "link": "https://stackoverflow.com/questions/54431533/3d-c-array-to-assembly", "title": "3d C array to Assembly", "body": "<p>I am rendering 10x12 pixel maps together across the video buffer</p>\n\n<pre><code>buffer[20][512] = malloc(10*12)\n</code></pre>\n\n<p>I have up to 512 potential 10x12 bitmaps in 20 groups. I am only using one group number: <code>0  buffer[group][number of 10x12 tiles]</code></p>\n\n<p>Hence, <code>buffer[0][mapindex]</code></p>\n\n<p>I only need to index a different map every time I call the function.\nI am passing the buffer to the nasm function <code>tile_render(buffer,0,mapindex);</code></p>\n\n<p>This is where I am getting lost:</p>\n\n<pre><code>    lea esi,[ebp + 12]; Passing the buffer from the stack\n\n    mov eax,[ebp + 36]   ;Location of mapindex on the stack\n\n    I am looping through 10 x 12 trying to render the pixels\n\n    mov dl,[4*esi + eax +8] \n\n    move byte [edi + ebx],dl  ;moving one byte at a time.\n\n    //code omitted\n\n    add ebx,320  \n</code></pre>\n\n<p>However, I am not finding the correct address of the 10x12 pixels, meaning I am just getting garble on the screen.</p>\n\n<p>There are of course other ways to handle this, which I can do just fine but I want to know how to work with 3-dimensional arrays in  assembly better. My experience is a newbie when it comes to this so I am hoping someone has dealt with this situation before.</p>\n"}, {"tags": ["c", "pointers", "linked-list", "reversing"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1548810262, "post_id": 54431177, "comment_id": 95673522, "body": "I would note that this line is wrong: <code>scanf(&quot;%s&quot;, &amp;temp-&gt;songName);</code>, and should have generated a compiler warning.  I think this is correct: <code>scanf(&quot;%s&quot;, temp-&gt;songName);</code>, as <code>temp-&gt;songName</code> is already the address that you want to pass into <code>scanf</code>,"}, {"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1548815995, "post_id": 54431177, "comment_id": 95674844, "body": "@bruceg at the top of the file I used #pragma disable(warning:4996)  I&#39;ve had the problem where it wouldn&#39;t compile because of the warning. I was told to disable the warning"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1548816728, "post_id": 54431177, "comment_id": 95674994, "body": "Ignoring and disabling warnings is rarely a good idea."}, {"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1548817373, "post_id": 54431177, "comment_id": 95675125, "body": "@bruceg My professor just said to add it. Never really gave us a valid reason why to add it. They just said that visual studio is dumb and annoying to use."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1548872556, "post_id": 54431177, "comment_id": 95703161, "body": "OMG.... That&#39;s extremely bad advice!  <code>gcc</code> compiler warnings are almost always valid. I haven&#39;t used visual studio in a while, but I wouldn&#39;t doubt that they&#39;re good too."}, {"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1548880726, "post_id": 54431177, "comment_id": 95707025, "body": "@bruceg I would normally write scanf as scanf_s because it would let me use it safely. But my professor says to overwrite the safety and disable the safety."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1548805233, "post_id": 54431213, "comment_id": 95672244, "body": "There&#39;s also the option to make a backwards link too, but I like this much better."}, {"owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 0, "creation_date": 1548805486, "post_id": 54431213, "comment_id": 95672314, "body": "Can someone explain this recursion to me? I am having trouble understanding why display_recursive is calling display_recursive when its already in the function"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "edited": false, "score": 1, "creation_date": 1548806441, "post_id": 54431213, "comment_id": 95672534, "body": "@SamuelIorga Note that if you move the recursive call to <code>display_recursive</code> to <i>after</i> the <code>printf</code> calls, you will get printing from head-to-tail (i.e. the <i>forward</i> list). Because the recursive call is made <i>before</i> the <code>printf</code>, the nodes are printed in <i>reverse</i> order. As an alternative to <code>gdb</code>, you could wrap the recursive call in two debug <code>printf</code> calls: <code>printf(&quot;BEF: n=%p next=%p\\n&quot;,n,n-&gt;next); display_recursive(n-&gt;next); printf(&quot;AFT: n=%p next=%p\\n&quot;,n,n-&gt;next);</code> You could do this for either the forward or reverse version. It may help with your understanding."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 4, "last_activity_date": 1548805821, "last_edit_date": 1548805821, "creation_date": 1548804695, "answer_id": 54431213, "question_id": 54431177, "link": "https://stackoverflow.com/questions/54431177/how-can-i-reverse-the-order-of-a-linked-list/54431213#54431213", "title": "How can I reverse the order of a linked list?", "body": "<p>If you have a single (forward) linked list, the probably easiest way to print it in reverse order is using recursion:</p>\n\n<pre><code>void display_recursive(node *n) {\n    if (!n) {\n      return;\n    }\n    display_recursive(n-&gt;next);\n    printf(\"Song: %s, \", n-&gt;songName);\n    ...\n}\n</code></pre>\n\n<p>Recursion means that a function is calling itself (until some end-condition, the anchor, is reached). \nBy that way, program flow will build up a \"stack\" of display_recursive- function calls, with the first node, then the second node, ..., until it reaches the last node; by then, recursion stops, and the print part of display_recursive is handled, starting with the last node backwards.</p>\n\n<p>Hope this explanation helps; Try it out in the debugger to see what happens.</p>\n"}], "owner": {"reputation": 11, "user_id": 10953234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yKRXLrcO3u8/AAAAAAAAAAI/AAAAAAAAAE0/EhtHzcPAWuw/photo.jpg?sz=128", "display_name": "Samiorga", "link": "https://stackoverflow.com/users/10953234/samiorga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 54431213, "answer_count": 1, "score": 0, "last_activity_date": 1548805821, "creation_date": 1548804450, "question_id": 54431177, "link": "https://stackoverflow.com/questions/54431177/how-can-i-reverse-the-order-of-a-linked-list", "title": "How can I reverse the order of a linked list?", "body": "<p>I am trying to print out the results of the linked list in the reverse order that they were entered in. The program takes 3 inputs, Song name, song length (in seconds) and copyright. The program should take the list of songs and print the in the reverse order that they were entered in.</p>\n\n<p>I am not too familiar with linked list. This is my first time using it as sort of a database.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#pragma warning(disable:4996)\n\n//defining struct\ntypedef struct node\n{\nchar songName[20];\nint songLength;\nint copyright;\nstruct node * next;\n}node;\n\n//defining prototypes\nnode *create(int n);\nvoid display(node *head);\n\n\nint main()\n{\n    int n = 0;\n\n    node *head = NULL;\n\n    printf(\"How many entries?\\n\");\n    scanf(\"%d\", &amp;n);\n\n    //call to create list\n    head = create(n);\n\n    printf(\"\\nThe linked list in order is:\\n\");\n    display(head);\n\nreturn 0;\n}\n\nnode *create(int n)\n{\nnode *head = NULL;\nnode *temp = NULL;\nnode *p = NULL;\n\nfor (int i = 0; i &lt; n; i++)\n{\n    temp = (node*)malloc(sizeof(node));\n    printf(\"What is the name of song %d\\n\", i + 1);\n    //fgets(temp-&gt;songName, 20, stdin);\n    scanf(\"%s\", &amp;temp-&gt;songName);\n\n    printf(\"What is the length of song %d (in seconds)?\\n\", i + 1);\n    scanf(\"%d\", &amp;temp-&gt;songLength);\n\n    printf(\"Is song %d copyrighted?(1 = YES, 0 = NO)\\n\", i + 1);\n    scanf(\"%d\", &amp;temp-&gt;copyright);\n\n    temp-&gt;next = NULL;\n\n    if (head == NULL)\n    {\n        head = temp;\n    }\n    else\n    {\n        // if not empty, attach new node at the end\n        p = head;\n\n        while (p-&gt;next != NULL)\n        {\n            p = p-&gt;next;\n        }\n        p-&gt;next = temp;\n    }\n}\nreturn head;\n}\n\nvoid display(node *head)\n{\n    node *p = NULL;\n\n    if (head == NULL)\n    {\n        printf(\"List is empty\\n\");\n    }\n    else\n    {\n            p = head;\n        while (p != NULL)\n        {\n        printf(\"Song: %s, \", p-&gt;songName);\n        printf(\"%d minutes, \", p-&gt;songLength);\n        if (p-&gt;copyright == 1)\n        {\n            printf(\"Copyrighted\\n\");\n        }\n        else if (p-&gt;copyright == 0)\n        {\n            printf(\"No copyright\\n\");\n        }\n            p = p-&gt;next;\n    }\n}\n}\n</code></pre>\n\n<p>So if Input the following:</p>\n\n<p>Song 1 - All Star (song name), 237 (seconds), 0 (no copyrights)</p>\n\n<p>song 2 - Crab Rave, 193, 0</p>\n\n<p>song 3 - 7 rings, 185, 1(copyrights)</p>\n\n<p>The output should be:</p>\n\n<p>7 rings, 185, 1</p>\n\n<p>Crab Rave, 193, 0</p>\n\n<p>All Star, 237, 0</p>\n"}, {"tags": ["c", "r", "chi-squared"], "comments": [{"owner": {"reputation": 388, "user_id": 7892010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb22306a8bdbe2dfcfa54ec6e0edca5?s=128&d=identicon&r=PG&f=1", "display_name": "Manny_Mar", "link": "https://stackoverflow.com/users/7892010/manny-mar"}, "edited": false, "score": 0, "creation_date": 1548809716, "post_id": 54431096, "comment_id": 95673375, "body": "From the error, looks like your missing chisqsim. Here is the chisqsim.c File Reference. <a href=\"http://docs.rexamine.com/R-devel/chisqsim_8c.html\" rel=\"nofollow noreferrer\">docs.rexamine.com/R-devel/chisqsim_8c.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10592015, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158713217310052/picture?type=large", "display_name": "Lydia Katsis", "link": "https://stackoverflow.com/users/10592015/lydia-katsis"}, "edited": false, "score": 0, "creation_date": 1548851048, "post_id": 54435537, "comment_id": 95690239, "body": "this does work, however when I use my own data, which is only around 800 rows, I get the error:   Error in FUN(X[[i]], ...) : cannot allocate memory block of size 134217728 Tb . I don&#39;t understand why this occurs as my dataset is not that big...It only works if I take a random sample of 300 datapoints, no more."}], "tags": [], "owner": {"reputation": 117262, "user_id": 1412059, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MQ33X.jpg?s=128&g=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/1412059/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1548834244, "creation_date": 1548834244, "answer_id": 54435537, "question_id": 54431096, "link": "https://stackoverflow.com/questions/54431096/ssas-sexual-segregation-and-aggregation-statistic-in-r-calling-c/54435537#54435537", "title": "SSAS (Sexual Segregation and Aggregation Statistic) in R - calling C", "body": "<p>This is a prime-example why you should not call internal C functions in R user code. R internals can (and do) change. Here, these changes are relevant: <a href=\"https://github.com/wch/r-source/commit/299fb994f8a59187e1c021b545f814c9ba4db24f#diff-9739a43048cadbe93bedec2100996136\" rel=\"nofollow noreferrer\">\"more use of .Call\" by Prof. Ripley</a>.</p>\n\n<p>Thus, you can change the function to this:</p>\n\n<pre><code>SSAS &lt;- function(x, conf.int = 0.95, B = 10000)\n{\n  x &lt;- as.matrix(x)\n  nr &lt;- nrow(x)\n  nc &lt;- ncol(x)\n  sr &lt;- rowSums(x)\n  sc &lt;- colSums(x)\n  n &lt;- sum(x)\n  E &lt;- outer(sr, sc, \"*\")/n\n  dimnames(E) &lt;- dimnames(x)\n  tmp &lt;- .Call(stats:::C_chisq_sim, sr, sc, B, E)\n  obs &lt;- sum(sort((x - E)^2/E, decreasing = TRUE))/n\n  sim &lt;- tmp/n\n  p0 &lt;- (1 - conf.int)/2\n  return(c(obs, quantile(sim, p0), quantile(sim, 1 -p0)))\n}\n</code></pre>\n\n<p>Then, the code runs, but I have not checked for correctness. So, no warranties (as usual on Stack Overflow). </p>\n"}], "owner": {"reputation": 9, "user_id": 10592015, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158713217310052/picture?type=large", "display_name": "Lydia Katsis", "link": "https://stackoverflow.com/users/10592015/lydia-katsis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548834244, "creation_date": 1548803940, "question_id": 54431096, "link": "https://stackoverflow.com/questions/54431096/ssas-sexual-segregation-and-aggregation-statistic-in-r-calling-c", "title": "SSAS (Sexual Segregation and Aggregation Statistic) in R - calling C", "body": "<p>I am running the following code, found in this appendix of a paper <a href=\"https://wiley.figshare.com/articles/Supplement_1_R_code_used_to_format_the_data_and_compute_the_SSAS_/3528698/1\" rel=\"nofollow noreferrer\">https://wiley.figshare.com/articles/Supplement_1_R_code_used_to_format_the_data_and_compute_the_SSAS_/3528698/1</a>  to calculate the Sexual Segregation and Aggregation Statistic in R - but keep getting the following error - presumably there is an issue with calling a function from C, but I cannot resolve it.</p>\n\n<pre><code># Main function, computes both the SSAS (Sexual Segregation and\n# Aggregation Statistic) and the 95% limits of SSAS\n# under the assumption of random association of both sexes\n\nSSAS &lt;- function(x, conf.int = 0.95, B = 10000)\n{\n x &lt;- as.matrix(x)\n nr &lt;- nrow(x)\n nc &lt;- ncol(x)\n sr &lt;- rowSums(x)\n sc &lt;- colSums(x)\n n &lt;- sum(x)\n E &lt;- outer(sr, sc, \"*\")/n\n dimnames(E) &lt;- dimnames(x)\n tmp &lt;- .C(\"chisqsim\", as.integer(nr), as.integer(nc),as.integer(sr),\n as.integer(sc), as.integer(n), as.integer(B), as.double(E), integer(nr * nc),\n double(n + 1), integer(nc), results = double(B), PACKAGE = \"stats\")\n obs &lt;- sum(sort((x - E)^2/E, decreasing = TRUE))/n\n sim &lt;- tmp$results/n\n p0 &lt;- (1 - conf.int)/2\n return(c(obs, quantile(sim, p0), quantile(sim, 1 -p0)))\n}\n\n# This function formats data to be run with the SSAS function\n\nsplitmfd &lt;- function(mfd) {\n loca1 &lt;- function(x) {\n  x &lt;- t(x[, 1:2])\n  dimnames(x) &lt;- list(c(\"mal\", \"fem\"), as.character(1:ncol(x)))\n  x\n }\n l0 &lt;- split(mfd, mfd$mon)\n lapply(l0, loca1)\n}\n\n# Example 1: Isard\n\nrup &lt;- read.table(\"http://pbil.univ-lyon1.fr/R/donnees/mfdrupicapra.txt\",\nh = T)\n  # Load data from the web\n\nplot1 &lt;- function(w, titre = \"\") {\n plot(1:12, w[, 1], ylim = range(w), ax = F, pch = 19,\n type = \"n\", ylab = \"IK\", xlab = \"\")\n title(main = titre)\n box()\n axis(1, 1:12, c(\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\",\n \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"))\n axis(2, pretty(range(w)), tck = 1)\n polyx &lt;- c(1:12, 12:1)\n polyy &lt;- c(w[, 3], rev(w[, 2]))\n polygon(polyx, polyy, col = grey(0.9))\n points(w[, 1], pch = 19, type = \"b\")\n}\n  # Function to plot data and 95\\ levels of significance\n\nl1 &lt;- splitmfd(rup)\n  # Format data to be used with SSAS function\nw &lt;- matrix(unlist(lapply(l1, SSAS)), ncol = 3, byrow = T)\n  # \"w\" is a matrix having 3 columns and 12 rows. In the first columns are\n  # the SSAS estimates for each month, and the lower and upper limits in columns 2\n  # and 3 respectively.\n\nplot1(w, \"Isard\")\n  # Plot figure 3a\n\n# Example 2: Red deer\n\ncer &lt;- read.table(\"http://pbil.univ-lyon1.fr/R/donnees/mfdcervus.txt\",\nh = T)\nl1 &lt;- splitmfd(cer)\nw &lt;- matrix(unlist(lapply(l1, SSAS)), ncol = 3, byrow = T)\nplot1(w, \"Red deer\")\n  # Plot figure 3c\n\n# Example 3: Roe deer\n\ncap &lt;- read.table(\"http://pbil.univ-lyon1.fr/R/donnees/mfdcapreolus.txt\",\nh = T)\nl1 &lt;- splitmfd(cap)\nw &lt;- matrix(unlist(lapply(l1, SSAS)), ncol = 3, byrow = T)\nplot1(w, \"Roe deer\")\n# Plot figure 3e\n</code></pre>\n\n<p>Here is my error:</p>\n\n<blockquote>\n  <p>w &lt;- matrix(unlist(lapply(l1, SSAS)), ncol = 3, byrow = T)\n      Error in .C(\"chisqsim\", as.integer(nr), as.integer(nc), as.integer(sr),  : \n        \"chisqsim\" not available for .C() for package \"stats\"  </p>\n</blockquote>\n"}, {"tags": ["c", "gcc", "ubuntu-18.04"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1548802536, "post_id": 54430847, "comment_id": 95671537, "body": "Did you run <code>apt-get update</code>?"}, {"owner": {"reputation": 135, "user_id": 10668695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9af17019d3023f562fbfe33c00e8d0?s=128&d=identicon&r=PG&f=1", "display_name": "lets0code", "link": "https://stackoverflow.com/users/10668695/lets0code"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1548802766, "post_id": 54430847, "comment_id": 95671607, "body": "Yes I did it doesn&#39;t change anything"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 10668695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9af17019d3023f562fbfe33c00e8d0?s=128&d=identicon&r=PG&f=1", "display_name": "lets0code", "link": "https://stackoverflow.com/users/10668695/lets0code"}, "edited": false, "score": 0, "creation_date": 1548815229, "post_id": 54431167, "comment_id": 95674672, "body": "I thought it was network related but I am connected to the internet and can access websites."}], "tags": [], "owner": {"reputation": 66, "user_id": 10974543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5zLIf.jpg?s=128&g=1", "display_name": "some-coder", "link": "https://stackoverflow.com/users/10974543/some-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1548804403, "creation_date": 1548804403, "answer_id": 54431167, "question_id": 54430847, "link": "https://stackoverflow.com/questions/54430847/not-able-to-install-gcc-on-ubuntu-18-04-01/54431167#54431167", "title": "not able to install gcc on ubuntu 18.04.01", "body": "<p>This may or may not be your problem, but I had the same issue when first\ninstalling my copy of Ubuntu 18.04.01. I did not yet have the drivers of\nmy wifi-dongle installed, and, as such, I couldn't reach any site\n(including the sites of Ubuntu working with package updates).</p>\n\n<p>So, it may be an internet-related issue. I read in the comments that\nyou <em>could</em> execute <code>apt-get update</code>. Maybe there is a different\nconnection issue at work? I would check those settings.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10481362"}, "reply_to_user": {"reputation": 135, "user_id": 10668695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9af17019d3023f562fbfe33c00e8d0?s=128&d=identicon&r=PG&f=1", "display_name": "lets0code", "link": "https://stackoverflow.com/users/10668695/lets0code"}, "edited": false, "score": 0, "creation_date": 1548815279, "post_id": 54432291, "comment_id": 95674685, "body": "@moegizzle and you tried: sudo apt-get update --fix-missing"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10481362"}, "is_accepted": true, "score": 1, "last_activity_date": 1548813185, "creation_date": 1548813185, "answer_id": 54432291, "question_id": 54430847, "link": "https://stackoverflow.com/questions/54430847/not-able-to-install-gcc-on-ubuntu-18-04-01/54432291#54432291", "title": "not able to install gcc on ubuntu 18.04.01", "body": "<p>If <code>sudo apt-get update</code> does not work for you, you should maybe try <code>sudo apt-get clean</code> to clean the cache and then execute <code>sudo apt-get update</code></p>\n"}, {"tags": [], "owner": {"reputation": 441, "user_id": 12894605, "user_type": "registered", "profile_image": "https://graph.facebook.com/223788418651196/picture?type=large", "display_name": "Stephen Duffy", "link": "https://stackoverflow.com/users/12894605/stephen-duffy"}, "is_accepted": false, "score": 0, "last_activity_date": 1594945951, "creation_date": 1594945951, "answer_id": 62945393, "question_id": 54430847, "link": "https://stackoverflow.com/questions/54430847/not-able-to-install-gcc-on-ubuntu-18-04-01/62945393#62945393", "title": "not able to install gcc on ubuntu 18.04.01", "body": "<p>I flashed a new ubuntu 18 bionic desktop onto my disk and, installed apache and PHP by &quot;apt-get&quot; then did about 300MB of &quot;updates&quot;, including &quot;security updates&quot; (which include localization files ?????) and to my shock and horror, ubuntu doesnt have a c compiler but insists on havig c libraries anyway to make it difficult to install a c compiler.</p>\n<p>The easy option of tcc which is Tiny C Compiler but I think the kernel is complied using gnu and almost every is using gnu so you probably want that specific compiler. So heres what I did, maybe Im being too &quot;-v&quot; and someone can edit this to the bare essentials but straight from the box this is where Im at and this is what I did next...</p>\n<p>1.</p>\n<pre><code>sudo apt install synaptic\n</code></pre>\n<p>then</p>\n<ol start=\"2\">\n<li><p>Did a search (name and description) for &quot;libc6-dev&quot;</p>\n</li>\n<li><p>Marked it for installation.</p>\n</li>\n<li><p>Hit the apply button and a window shows up saying its going to be installed and tells me there will be extra packages installed and some packages downgraded.</p>\n</li>\n</ol>\n<p>5 I hit the okay button and it starts committing the changes finally saying &quot;Changes applied&quot;.</p>\n<p>6 Switched off synaptic and went to console but gcc still wasnt installing.</p>\n<p>7 I went back to synaptic and tried to footer around a bit but nope so I went to the console again and said</p>\n<pre><code>sudo apt install aptitude\n</code></pre>\n<p>then</p>\n<pre><code>sudo aptitude install gcc\n</code></pre>\n<p>and it suggested I accept the solution of installing nothing at all so I went &quot;no&quot; and it gave me an alternative which involved downgrading and adding extra packages and I went &quot;yes&quot; and the hamster wheel turned for a while and eventually I got my prompt back and went</p>\n<pre><code>gcc\n</code></pre>\n<p>and it said:</p>\n<p>gcc:&quot;fatal error: no input files&quot;\ncompilation terminated.</p>\n<p>and I went &quot;WEHEY! IT WORKS!&quot; (not recognising the irony)</p>\n<p>Now lets see what Ive broken in the process of installing gcc...</p>\n"}], "owner": {"reputation": 135, "user_id": 10668695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9af17019d3023f562fbfe33c00e8d0?s=128&d=identicon&r=PG&f=1", "display_name": "lets0code", "link": "https://stackoverflow.com/users/10668695/lets0code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3169, "favorite_count": 0, "accepted_answer_id": 54432291, "answer_count": 3, "score": 2, "last_activity_date": 1594945951, "creation_date": 1548802443, "question_id": 54430847, "link": "https://stackoverflow.com/questions/54430847/not-able-to-install-gcc-on-ubuntu-18-04-01", "title": "not able to install gcc on ubuntu 18.04.01", "body": "<p>I have just installed <code>Ubuntu 18.04.1 LTS</code> and I am trying to use the <code>make</code> command to compile my <code>Makefile</code> which is located in the same <code>directory</code> as my <code>simple.c</code> file. After running <code>make</code> I get the error that I don't have <code>gcc</code> installed. When I try to install it, I get the errors below. The problem is that I can't install gcc and I don't know why? I will also put the <code>Makefile</code> code also. </p>\n\n<p><code>Error Output</code></p>\n\n<p><code>gn:1 http://us.archive.ubuntu.com/ubuntu bionic-updates/main amd64 linux-libc-dev amd64 4.15.0-43.46\nErr:1 http://security.ubuntu.com/ubuntu bionic-updates/main amd64 linux-libc-dev amd64 4.15.0-43.46\n  404  Not Found [IP: 91.189.91.26 80]\nE: Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/l/linux/linux-libc-dev_4.15.0-43.46_amd64.deb  404  Not Found [IP: 91.189.91.26 80]\nE: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?</code></p>\n\n<p><code>MakeFile</code></p>\n\n<p><code>obj-m += simple.o\nall:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\nclean:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\n</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1548801579, "post_id": 54430683, "comment_id": 95671271, "body": "<code>s</code> is not initialized, so it is pointing nowhere valid. You need to allocate space for it first."}, {"owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1548801942, "post_id": 54430683, "comment_id": 95671369, "body": "@Osiris can I allocate space without using malloc or calloc? Like NULL?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1548802154, "post_id": 54430683, "comment_id": 95671435, "body": "you&#39;d have to initialize <code>s</code> first before passing it to <code>function</code>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1548802367, "post_id": 54430683, "comment_id": 95671493, "body": "@user10967362. You have to allocate memory on the heap (malloc) or stack ([])."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1548802410, "post_id": 54430683, "comment_id": 95671504, "body": "@user10967362 char s[size];, char a; char *s = &amp;a;, and C++ has the option of the new keyword if you&#39;re using that."}], "answers": [{"comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "edited": false, "score": 0, "creation_date": 1548802916, "post_id": 54430841, "comment_id": 95671649, "body": "It depends what your function does; if it expects a valid string, e.g. because it prints it out, then you need to initialize <code>s</code>, e.g. <code>char s[100] = &quot;&quot;</code>."}, {"owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "edited": false, "score": 0, "creation_date": 1548803122, "post_id": 54430841, "comment_id": 95671712, "body": "The function reads from a file some words with getc and put them in the string"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "edited": false, "score": 0, "creation_date": 1548803224, "post_id": 54430841, "comment_id": 95671743, "body": "It will need to terminate the string with the string termination character, i.e. it will have to write something like <code>s[i] = &#39;\\0&#39;</code> at the end."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1548804804, "post_id": 54430841, "comment_id": 95672120, "body": "Beware if you don&#39;t know how much space is needed for your string before calling the function, your function may have to do the allocation.  At that point, your function signature probably wants to change."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1548804882, "post_id": 54430841, "comment_id": 95672140, "body": "@Michael Dorgan: agree, yet OP seems to be new to C; I&#39;d not start with two stars :-)"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1548802409, "creation_date": 1548802409, "answer_id": 54430841, "question_id": 54430683, "link": "https://stackoverflow.com/questions/54430683/how-to-copy-something-in-a-string-if-i-pass-it-to-a-function/54430841#54430841", "title": "How to copy something in a string if I pass it to a function?", "body": "<p>A function like <code>void function(char*s)</code> expects a pointer to a correctly allocated object (or NULL to make explicit that nothing valid has been passed). There are several ways of allocating an object, one is <code>malloc</code>, another is an object with automatic or static storage duration.</p>\n\n<p>But there is at least one thing that you must not do: pass a pointer that is not initialized; this pointer might point to \"somewhere\" and yields undefined behaviour then:</p>\n\n<pre><code>void function(char*s) {\n   if (s != NULL) {  // valid?\n      strcpy(s,\"Hello world!\");\n   }\n}\n\nint main() {\n   char s1[20];  // automatic storage duration\n   char s2[] = \"some initil value\"; // automatic storage duration\n   static char s3[30]; // static storage duration\n   char *s4 = malloc(30); // dynamic storage duration\n\n   function(s1);\n   function(s2);\n   function(s3);\n   function(s4);\n   function(NULL); // explicitly something NOT pointing to a valid object\n\n   free(s4); // deallocate object with dynamic storage duration\n\n   // don't do that:\n   char* s5;  // s5 is not initiaized\n   function(s5);  // -&gt; undefined behaviour\n} \n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10967362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e3682af9f20f026335f96499e5d952?s=128&d=identicon&r=PG&f=1", "display_name": "user10967362", "link": "https://stackoverflow.com/users/10967362/user10967362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 54430841, "answer_count": 1, "score": 0, "last_activity_date": 1548802489, "creation_date": 1548801533, "question_id": 54430683, "link": "https://stackoverflow.com/questions/54430683/how-to-copy-something-in-a-string-if-i-pass-it-to-a-function", "title": "How to copy something in a string if I pass it to a function?", "body": "<p>I can't copy something in a string after passing it to a function. In the main function I did this:</p>\n\n<pre><code>char *s;\nfunction(s);\n</code></pre>\n\n<p>Then in the function I copy something in the string but when I print it in the main it prints <code>(null)</code>, why?</p>\n"}]