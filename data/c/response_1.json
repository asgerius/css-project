[{"tags": ["c", "linux", "gcc", "makefile"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421278692, "post_id": 27954255, "comment_id": 44303926, "body": "in the makefile, use &#39;:=&#39; when defining a macro rather than &#39;=&#39; because when using &#39;=&#39; the macro will be re-evaluated each time it is invoked while the &#39;:=&#39; will only be evaluated once."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421303777, "post_id": 27954281, "comment_id": 44309982, "body": "@mafso Good point. I incorporated that into the answer, with a link to some implicit rules documentation."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 7, "last_activity_date": 1421303748, "last_edit_date": 1421303748, "creation_date": 1421277581, "answer_id": 27954281, "question_id": 27954255, "link": "https://stackoverflow.com/questions/27954255/undefined-reference-to-main-with-main-in-a-seperate-script-rule/27954281#27954281", "title": "&quot;Undefined reference to main&quot; with main in a seperate script/rule", "body": "<p>You are compiling <code>crc64</code> and <code>getWord</code> as if they were executables. As such, they need a <code>main</code> function. </p>\n\n<p>Simply remove those two targets. You don't need them.</p>\n\n<p>Also see @mafso's comment: you should use <code>CFLAGS</code> instrad of <code>COPTS</code>, to make sure the relevant <a href=\"https://www.gnu.org/software/make/manual/html_node/Implicit-Rules.html\" rel=\"nofollow\"><strong>implicit rules</strong></a> pick up the same options.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1421279919, "creation_date": 1421279919, "answer_id": 27954690, "question_id": 27954255, "link": "https://stackoverflow.com/questions/27954255/undefined-reference-to-main-with-main-in-a-seperate-script-rule/27954690#27954690", "title": "&quot;Undefined reference to main&quot; with main in a seperate script/rule", "body": "<pre><code>The following makefile would (probably) be just what your project needs\nnote: be sure to replace '&lt;tab&gt;' with the tab character\n\n\nCC=gcc\n\nCOPTS := -g -Wall -Wextra -Wpedantic -std=c99\n\nLOPTS := -g\n\nTARGET := mainProg\n\nSRCS := $(wildcard:*.c)\nOBJS := $(SRCS:.c=.o)\nHDRS := $(SRCS:.c=.h)\n\n.PHONY: all\n\nall: ${TARGET} \n\n${TARGET}: $(OBJS)\n&lt;tab&gt;$(CC) $(COPTS) $^ -o $@\n\n.c.o: #{HDRS}\n&lt;tab&gt;$(CC) -c $(COPTS) -o $^ $&lt;\n</code></pre>\n"}], "owner": {"reputation": 258, "user_id": 4111643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2599504eb02e95ca46fc4b68f0ef73?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMonkey", "link": "https://stackoverflow.com/users/4111643/codemonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 27954281, "answer_count": 2, "score": 0, "last_activity_date": 1421303748, "creation_date": 1421277414, "last_edit_date": 1495541134, "question_id": 27954255, "link": "https://stackoverflow.com/questions/27954255/undefined-reference-to-main-with-main-in-a-seperate-script-rule", "title": "&quot;Undefined reference to main&quot; with main in a seperate script/rule", "body": "<p>This is a possible dup of <a href=\"https://stackoverflow.com/questions/11225118/makefile-error-undefined-reference-to-main\">makefile error: undefined reference to main</a> or <a href=\"https://stackoverflow.com/questions/21349928/undefined-reference-in-main-makefile\">Undefined reference in main Makefile</a> or a few others. Both crc64 and getWord are supporting files for mainProg, which contains my main function. When I try to run my make file I am getting the compilation error below regarding my rules for crc64.o. In the c file I have the include statements and header files laid out in this post <a href=\"https://stackoverflow.com/questions/7109964/creating-your-own-header-file-in-c\">Creating your own header file in C</a> so I should not be having linking errors related to linking header to the body. </p>\n\n<p>ERROR:\n<code>gcc -g -Wall -std=c99 crc64.o -o crc64\n/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crt1.o: In function ``_start':\n(.text+0x20): undefined reference to ``main'\ncollect2: error: ld returned 1 exit status\n</code><br>\nMakefile</p>\n\n<pre><code>CC=gcc\nCOPTS=-g -Wall -std=c99\nALL=crc64 getWord mainProg\nall: $(ALL)\n\ncrc64: crc64.o\n   $(CC) $(COPTS) $^ -o $@\ngetWord: getWord.o\n   $(CC) $(COPTS) $^ -o $@\nmainProg: getWord.o crc64.o mainProg.o \n   $(CC) $(COPTS) $^ -o $@\ncrc64.o: crc64.c crc64.h\ngetWord.o: getWord.c getWord.h\nmainProg.o: mainProg.c getWord.h crc64.h\n.c.o:\n   $(CC) -c $(COPTS) $&lt;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421276438, "post_id": 27953972, "comment_id": 44303143, "body": "It doesn&#39;t happen with <code>gcc</code> I suppose you are using <code>MSVC</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4413591"}, "edited": false, "score": 0, "creation_date": 1421276548, "post_id": 27953972, "comment_id": 44303187, "body": "Yep, just tested with gcc, cannot reproduce"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 8, "creation_date": 1421276687, "post_id": 27953972, "comment_id": 44303247, "body": "Is <code>Houston1Pkg</code> defined as <code>#define Houston1Pkg 1</code> somewhere?"}, {"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1421277401, "post_id": 27953972, "comment_id": 44303519, "body": "See <a href=\"http://stackoverflow.com/questions/12562807/include-absolute-path-syntax-in-c-c\" title=\"include absolute path syntax in c c\">stackoverflow.com/questions/12562807/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 4455424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8faf64248a8f347ffa16a1b6beef76e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Ho", "link": "https://stackoverflow.com/users/4455424/hung-ho"}, "edited": false, "score": 0, "creation_date": 1421282378, "post_id": 27953972, "comment_id": 44305074, "body": "I use MSVC.  Houston1Pkg is the folder name."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1421283343, "post_id": 27953972, "comment_id": 44305333, "body": "You normally specify the location of the headers via a compiler command line option; on Unix, <code>-Iu:&#47;PlatformPkgs&#47;Houston1Pkg&#47;Include</code>, and <code>&#47;I:\\PlatformPkgs\\Houston1Pkg\\Include</code> with MSVC, I believe."}, {"owner": {"reputation": 11, "user_id": 4455424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8faf64248a8f347ffa16a1b6beef76e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Ho", "link": "https://stackoverflow.com/users/4455424/hung-ho"}, "edited": false, "score": 0, "creation_date": 1421285481, "post_id": 27953972, "comment_id": 44305867, "body": "I edit the original post. I understand to specify the location of the header via compiler flag. This issue is different, the optional.h file is reside in two different folders (Houston and Houston1) and the content of optional.h is different between these two folders."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421294606, "post_id": 27953972, "comment_id": 44307851, "body": "@JonathanLeffler: I agree that this question is not particularly related to the suggested duplicate, which has to do with backslashes in the filepath. This question shows an apparently vanishing path segment, which is not related. (I also think RSahu asked the right question; it needs a reply.) Voting to reopen."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1421295726, "post_id": 27953972, "comment_id": 44308082, "body": "@rici: I don&#39;t agree with the reopen, but I&#39;ll let the processes take their due course. If that&#39;s not the answer, then the probable answer to the plain question is almost certainly <code>#undef Houston1Pkg</code> before the block of lines with the <code>#include</code> in the shown code. In other words, I expect <code>Houston1Pkg</code> is defined as <code>1</code> somewhere in the system, either on the command line or in a header (or, perhaps, in the other code before this in the source code)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421297647, "post_id": 27953972, "comment_id": 44308486, "body": "@JonathanLeffler: I do, too, which is why I think RSahu asked the right question. Indeed, the answer you suggest is likely correct, but it cannot be provided as an answer because the question is closed. Not that it matters much -- it&#39;s pretty localized. Although I think I remember a question which asks, roughly, &quot;how can I write a macro which will stringify its argument without macro expanding the argument first?&quot;"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1421297657, "post_id": 27953972, "comment_id": 44308490, "body": "@HungHo: There&#39;s no problem.  When you need to pick the Houston1Pkg header, you specify that as the path and simple write <code>#include &lt;Optional.h&gt;</code> in the code.  When you need to pick the HoustonPkg header, you specify that as the path on the command line.  So, the path chosen is specified on the command line.  All else apart, many machines don&#39;t have a <code>U:</code> drive.  I can simulate it on Unix as a relative pathname, of course."}, {"owner": {"reputation": 11, "user_id": 4455424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8faf64248a8f347ffa16a1b6beef76e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Ho", "link": "https://stackoverflow.com/users/4455424/hung-ho"}, "edited": false, "score": 0, "creation_date": 1421336789, "post_id": 27953972, "comment_id": 44327255, "body": "#undef Houston1Pkg fixed the problem.  Thanks everyone for the help"}], "owner": {"reputation": 11, "user_id": 4455424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8faf64248a8f347ffa16a1b6beef76e7?s=128&d=identicon&r=PG&f=1", "display_name": "Hung Ho", "link": "https://stackoverflow.com/users/4455424/hung-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1421283461, "answer_count": 0, "score": 1, "last_activity_date": 1421284713, "creation_date": 1421276037, "last_edit_date": 1421284713, "question_id": 27953972, "link": "https://stackoverflow.com/questions/27953972/stringify-a-c-macro-that-contains-a-word-with-number", "closed_reason": "Duplicate", "title": "Stringify a C macro that contains a word with number", "body": "<pre><code>/* Example.h */\n\n#define QUOTE(str)                      #str\n#define EXPAND_AND_QUOTE(str)           QUOTE(str)\n\n#define HOUSTON_INCLUDE_PATH            u:/PlatformPkgs/HoustonPkg/Include\n#define HOUSTON1_INCLUDE_PATH           u:/PlatformPkgs/Houston1Pkg/Include\n\n// HOUSTON1 is defined in CFLAGS with /DHOUSTON1\n#if defined(HOUSTON)   \n#include EXPAND_AND_QUOTE(HOUSTON_INCLUDE_PATH/Optional.h)\n#elif defined (HOUSTON1)\n#include EXPAND_AND_QUOTE(HOUSTON1_INCLUDE_PATH/Optional.h)\n#endif\n</code></pre>\n\n<p>Got the compiling error below:</p>\n\n<pre><code>C1083: Cannot open include file: 'u:/PlatformPkgs/1/Include/Optional.h': No such file or directory\n</code></pre>\n\n<p>The error is due to the macro is expanded to<code>u:/PlatformPkgs/1/Include/Optional.h</code>. It stripped out <code>Houston</code> and <code>Pkg</code> in <code>Houston1Pkg</code>. How can I retain the whole word <code>Houston1Pkg</code> in the path?</p>\n"}, {"tags": ["c", "immediate-mode"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1421272088, "post_id": 27952934, "comment_id": 44301192, "body": "Mode 13 was only 320x200, but it was most popular because it allowed linear access to all bytes, where other, higher res modes required blit masks (writing 1 color bit at a time) or bank switching (which needed special code per type of graphics chip). ..That said, recommending a library is off-topic so I won&#39;t mention SDL. (Oops.)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421274589, "post_id": 27952934, "comment_id": 44302359, "body": "generally, with a bare machine, allocate (at least) two buffers in memory (or with modern video cards in the video memory).  enable an interrupt for video vertical retrace start.  that interrupt, if another buffer is ready, swaps which buffer is being displayed.  keep an indication of which buffer is not being displayed.  all writes are to that not-displayed buffer. when a buffer is ready to be displayed, change the indication of which buffer to display, so the interrupt causes the video card to display the latest buffer.  then the code can be copying/updating the newly available buffer"}], "answers": [{"tags": [], "owner": {"reputation": 869, "user_id": 2651119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247fa39fb235efb5498c6ade7f086782?s=128&d=identicon&r=PG", "display_name": "Ethan Lynn", "link": "https://stackoverflow.com/users/2651119/ethan-lynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1421293240, "creation_date": 1421293240, "answer_id": 27956451, "question_id": 27952934, "link": "https://stackoverflow.com/questions/27952934/changing-display-modes-from-the-command-line/27956451#27956451", "title": "Changing display modes from the command line", "body": "<p>Modern operating systems don't give programmers as convenient access to low-level graphics routines as they used to. Partially, this is due to the advent of the GPU, which makes utilizing the graphics hardware a much more significant challenge than if you only had a CPU. The other reason is as window managers have gotten more and more complex, the graphical sandbox each operating system gives a programmer is more constrained.</p>\n\n<p>That being said, OpenGL is definitely worth looking at. Its cross-platform, versatile, and automatically utilizes any hardware available (including the graphics card). OpenGL itself doesn't directly provide access to a windowing context, but you can easily create that with the OpenGL utility library (GLUT). OpenGL is however very low-level, you'll have to deal with frame buffers and flushing and bit masks and all sorts of low-level nonsense that can make OpenGL development a nightmare if you haven't done it before.</p>\n\n<p>If I were starting a project, I would probably want a more robust graphics environment that provides drawing functions and windowing out of the box. Both <a href=\"https://www.libsdl.org/\" rel=\"nofollow\">SDL</a> and <a href=\"http://www.sfml-dev.org/\" rel=\"nofollow\">SFML</a> provide low-level graphics APIs that will be a little more friendly to start with. They are both implemented on top of OpenGL so you can use any of the OpenGL features when you want to, but you don't have to worry about some of the more tedious details.</p>\n\n<p>As a side note, C might not be the best language to get started with graphics programming these days. If you want a really simple graphics environment that is becoming more relevant every day, you might want to check out what the web has to provide. JavaScript and the HTML5Canvas provide a very simple interface for drawing primitives, images, etc.</p>\n"}], "owner": {"reputation": 107, "user_id": 278265, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5696342d767de0309614813f1fd4b3b0?s=128&d=identicon&r=PG", "display_name": "omarshariffdontlikeit", "link": "https://stackoverflow.com/users/278265/omarshariffdontlikeit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 27956451, "answer_count": 1, "score": 0, "last_activity_date": 1421293240, "creation_date": 1421271548, "question_id": 27952934, "link": "https://stackoverflow.com/questions/27952934/changing-display-modes-from-the-command-line", "title": "Changing display modes from the command line", "body": "<p>Way way back in the day Itried to learn C from a game programming book. If I recall correctly, one of the first things your game \"engine\" would do would be to switch display modes to render. This involved a bit of asm to switch to a 640x480 display mode (mode 13 maybe?) so you could draw directly to the screen. Something like that.</p>\n\n<p>My question is, what is the modern equivalent of this? I'm interested in writing a command line program that does something similar; drops into some kind of raster mode for me to draw to, but, I do not assume that my program would be running under some kind of window manager like kde, unity,Aqua etc.</p>\n\n<p>Would this be something that OpenGL could provide (or does OpenGL assume a window manager too). My proposed program isn't a game, but would ideally start with a basic clear screen that I can draw primitives (2d lines, circles rects etc)</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1421275097, "post_id": 27952804, "comment_id": 44302579, "body": "the returned value from malloc (and family) should always be checked to assure successful operation."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421275118, "post_id": 27952804, "comment_id": 44302588, "body": "can you post a link to the Cyc_Ken_Tau function?"}, {"owner": {"reputation": 427, "user_id": 3946565, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/092f70c606bbbed8a4a268602a417d01?s=128&d=identicon&r=PG&f=1", "display_name": "Technopolice", "link": "https://stackoverflow.com/users/3946565/technopolice"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421275427, "post_id": 27952804, "comment_id": 44302723, "body": "In python it works, But since I am not good, I am not being able to convert the same code in C. What I meant was Cyc_Ken_Tau function from Python  code."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1421299629, "post_id": 27952804, "comment_id": 44308956, "body": "Why recursive?  BFS requirrs a queue, not a stack, so recursion is not really natural. (And why C? In c++ the standard library implements  deque, so the solution would be much smaller.)"}, {"owner": {"reputation": 427, "user_id": 3946565, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/092f70c606bbbed8a4a268602a417d01?s=128&d=identicon&r=PG&f=1", "display_name": "Technopolice", "link": "https://stackoverflow.com/users/3946565/technopolice"}, "edited": false, "score": 0, "creation_date": 1421322602, "post_id": 27952804, "comment_id": 44318699, "body": "Since most of the other testing programs have been written in C, I would prefer to seek help for c, as otherwise incompatible. :("}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1421378512, "post_id": 27952804, "comment_id": 44345919, "body": "@Technopolice: That doesn&#39;t explain why you want it to be recursive. If you do it in C, you&#39;ll need to implement a queue of lists, and then you can just about use your python code as is. In C++, of course, it&#39;s the same, except that you don&#39;t need to implement <code>std::deque&lt;std::array&lt;int, 4&gt;&gt;</code> (or <code>std::deque&lt;std::vector&lt;int&gt;&gt;</code> if you don&#39;t know the size of the lists at compile time), so that&#39;s a lot less code."}], "owner": {"reputation": 427, "user_id": 3946565, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/092f70c606bbbed8a4a268602a417d01?s=128&d=identicon&r=PG&f=1", "display_name": "Technopolice", "link": "https://stackoverflow.com/users/3946565/technopolice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1421317790, "creation_date": 1421270957, "last_edit_date": 1421317790, "question_id": 27952804, "link": "https://stackoverflow.com/questions/27952804/breadth-first-search-in-c-language", "title": "breadth-first search in C language", "body": "<p>I have two integer lists say list_a and list_b.\nI have a function say <code>func()</code>, and <code>func(list_a)</code> would produce n lists say:</p>\n\n<pre><code>list_a_1   list_a_2  list_a_3   list_a_4 ........... list_a_n\n</code></pre>\n\n<p>I have to run <code>func()</code> on all lists as produced above until I find one of those lists = <code>list_b</code>.</p>\n\n<p>So below could be the possible representation of how the list grows:</p>\n\n<pre><code>                                 list_a\n\n============================================================================\n\nlist_a_1   list_a_2  list_a_3   list_a_4 ........... list_a_n    LEVEL 1\n\n============================================================================\n\nlist_a_1_1.... list_a_1_n    list_a_2_1... list_a_2_n.....      LEVEL 2\n\n============================================================================\n</code></pre>\n\n<p>Suppose say we find list_a_1_n == list_b, then stop the function and return the LEVEL, which in our case is 2 (Level2).</p>\n\n<p>I am not being able to do it :(</p>\n\n<p><strong>How to do it in C?</strong> </p>\n\n<p>Please note, this is not a homework question.</p>\n\n<p>I am trying to find Cyclic Kendal Tau distance between two inputs as I think I found a solution in terms of algorithm for <a href=\"https://www.researchgate.net/post/What_is_the_best_approach_algorithm_to_find_cyclic_Kendal_Tau_distance\" rel=\"nofollow\">this</a> question. I want to check whether my algorithm is correct.</p>\n\n<p>below is the code in Python:</p>\n\n<pre><code>import collections\n\n\ndef Transpose(alist):\n    leveloutput = []\n    n = len(alist)\n    for i in range(n):\n        x=alist[:]\n        x[i],x[(i+1)%n] = x[(i+1)%n],x[i]\n        leveloutput.append(x)\n    return leveloutput\n\n\ndef Cyc_Ken_Tau(start, goal):\n    queue = collections.deque([(start, 0)])\n\n    while True:\n        element, level = queue.popleft()\n        if element == goal:\n            return level\n        for new_list in Transpose(element):\n            queue.append((new_list, level + 1))\n\n\nif __name__ == '__main__':\n    print \"***********************************************************\"\n\n    u = [2, 3, 4, 1]\n    v = [1, 2, 4, 3]\n\n    print \"***********************************************************\"\n\n    m = Cyc_Ken_Tau(u,v)\n    print \"Cyclic Kendal Tau:\",m\n</code></pre>\n\n<p>Also the partial code in C is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid print_array(int **a, int num_elements);\nint **transpose(int n, int arr[n]);\n\nint main(){\n    int a[] = {2, 3, 4, 1};\n    int **c;\n    int n = sizeof(a)/sizeof(*a);\n    int i;\n    printf(\"original\\n\");\n    print_array2(a,4);\n    printf(\"\\n*****************************\\n\");\n    c= transpose(n, a);\n    print_array(c, n);\n    //deallocate\n    for(i=0;i&lt;n;++i)\n        free(c[i]);\n    free(c);\n    return 0;\n}\n\nint **transpose(int n, int arr[n]){\n    int l = n;\n    int **b = malloc(l * sizeof(*b));//sizeof(*b) : sizeof(int *)\n    int i, j, k;\n    for (i = 0; i &lt; l; i++) {\n        j = (i + 1) % l;\n        int *copy = malloc(l * sizeof(*copy));//sizeof(int)\n        for (k = 0; k &lt; l; k++)\n            copy[k] = arr[k];\n        int t = copy[i];\n        copy[i] = copy[j];\n        copy[j] = t;\n        //printf(\"{%d, %d, %d, %d}\\n\", copy[0], copy[1], copy[2], copy[3]);\n        b[i] = copy;\n    }\n    return b;\n}\n\nvoid print_array(int **a, int num_elements){\n    int i, j;\n    for(i=0; i&lt;num_elements; i++){\n        for(j=0; j&lt;num_elements; j++)\n            printf(\"%d \", a[i][j]);\n        printf(\"\\n\");\n    }\n}\n\nvoid print_array2(int a[], int num_elements)\n{\n   int i;\n   for(i=0; i&lt;num_elements; i++)\n   {\n     printf(\"%d \", a[i]);\n   }\n   printf(\"\\n\");\n}\n</code></pre>\n\n<p>But I am struggling with the <strong>Cyc_Ken_Tau</strong> function in C. Any help will be much much appreciated.</p>\n"}, {"tags": ["c", "list", "pointers"], "comments": [{"owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "edited": false, "score": 0, "creation_date": 1421268375, "post_id": 27952037, "comment_id": 44299219, "body": "You need to dereference the pointer returned from your function and pass that to <code>printf</code>. You can do that by using <code>*(checklist(p))...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1421268368, "creation_date": 1421268368, "answer_id": 27952096, "question_id": 27952037, "link": "https://stackoverflow.com/questions/27952037/printing-a-pointer-value/27952096#27952096", "title": "printing a pointer value", "body": "<p>You need to return the <code>nodo.info</code> then</p>\n\n<pre><code>int checklist (struct nodo *p) {\n    int j=0;\n\n    while (p != NULL) {\n        /* avoid this p-&gt;succ-&gt;info */\n        if (p-&gt;info &gt;= p-&gt;succ-&gt;info) {     //if first element is major or same than next\n            p = p-&gt;succ;\n        } else {  \n            while (p != NULL) {\n                if (p-&gt;info &gt;= p-&gt;succ-&gt;info) {     //same\n                    p = p-&gt;succ;\n                    j++;\n                } else { \n                    p = NULL;                        \n                }          \n            }\n        }\n    }\n\n    while (j != 0) { p = p-&gt;prec;     //used a counter to get back to the first nodo in wich next was less than prev\n        j--;\n    }\n    return p-&gt;info;\n} \n</code></pre>\n\n<p>or in main</p>\n\n<pre><code>int info\nstruct nodo *found;\n\nfound = checklist(p);\nif (found != NULL)\n    printf(\"\\n%d\\n\", found-&gt;info);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1421268431, "creation_date": 1421268431, "answer_id": 27952116, "question_id": 27952037, "link": "https://stackoverflow.com/questions/27952037/printing-a-pointer-value/27952116#27952116", "title": "printing a pointer value", "body": "<pre><code>p = checklist (p);\nif (p) \n   printf(\"\\n%d\\n\", p-&gt;info); \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4430308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97e7529dbf36c59cce7537c38bb77087?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Bottini", "link": "https://stackoverflow.com/users/4430308/michele-bottini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 27952096, "answer_count": 2, "score": -2, "last_activity_date": 1421268879, "creation_date": 1421268153, "last_edit_date": 1421268635, "question_id": 27952037, "link": "https://stackoverflow.com/questions/27952037/printing-a-pointer-value", "title": "printing a pointer value", "body": "<p>i have this issue while trying to print *p value while p is pointed to a nodo of the list (obviusly i would like to print the nodo.info value)\nhere is the code, hope u understand:</p>\n\n<pre><code>struct nodo {\n    int info;\n    struct nodo *prec;\n    struct nodo *succ;\n} ;\ntypedef struct nodo nodo;\n\nint main (void) {     // just declaring my 3 nodos\n    struct nodo *p;\n\n    struct nodo anodo;\n    struct nodo bnodo;\n    struct nodo cnodo;\n\n    anodo.info = 200;\n    anodo.prec = NULL;\n    anodo.succ = NULL;\n\n    bnodo.info = 22;\n    bnodo.prec = NULL;\n    bnodo.succ = NULL;\n\n    cnodo.info = 2000;\n    cnodo.prec = NULL;\n    cnodo.succ = NULL;\n\n    anodo.succ = &amp;bnodo;    \n    bnodo.prec = &amp;anodo;\n    bnodo.succ = &amp;cnodo;    \n    cnodo.prec = &amp;bnodo;\n\n    p = &amp;anodo;\n\n    printf(\"\\n%d\\n\", checklist (p));       // calling function \n\n    return 0;\n}\n\nnodo *checklist (struct nodo *p) {\n    int j=0;\n\n    while (p != NULL) {\n        if (p-&gt;info &gt;= p-&gt;succ-&gt;info) {     //if first element is major or same than next\n            p=p-&gt;succ;\n\n        } else {\n            while (p != NULL) {\n                if (p-&gt;info &gt;= p-&gt;succ-&gt;info) {     //same\n                    p=p-&gt;succ;\n                    j++;\n                } else {\n                    p = NULL;\n                }\n            }\n        }\n    } \n\n    while (j != 0) {\n        p = p-&gt;prec;     //used a counter to get back to the first nodo in wich next was less than prev\n        j--;\n    }\n\n    return p;\n}\n</code></pre>\n\n<p>feel free to ask any details</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421280262, "post_id": 27951794, "comment_id": 44304453, "body": "memcpy is a system function.  System functions always need a method to indicate success/failure.  System functions need to have a consistent interface, including the returned value.  For memcpy, returning the destination address on success or returning NULL on failure is how the system function is made consistent with the rest of the systems functions"}], "answers": [{"comments": [{"owner": {"reputation": 936, "user_id": 2825720, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/96a0fbe598aa87ce0e7c142e77ed8bbf?s=128&d=identicon&r=PG&f=1", "display_name": "sbhatla", "link": "https://stackoverflow.com/users/2825720/sbhatla"}, "edited": false, "score": 0, "creation_date": 1421267338, "post_id": 27951823, "comment_id": 44298713, "body": "But it shouldn&#39;t be NULL since it goes through memcpy first, and wont that assign &quot;d&quot; a value?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 936, "user_id": 2825720, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/96a0fbe598aa87ce0e7c142e77ed8bbf?s=128&d=identicon&r=PG&f=1", "display_name": "sbhatla", "link": "https://stackoverflow.com/users/2825720/sbhatla"}, "edited": false, "score": 1, "creation_date": 1421267401, "post_id": 27951823, "comment_id": 44298742, "body": "@sbhatla You have to pass a valid pointer to <code>memcpy()</code> pointing to at least as much memory as you request to copy. And the <code>src</code> pointer should also meet the same requirements."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421269324, "post_id": 27951823, "comment_id": 44299705, "body": "Nice corner case handling in <code>memcpy2()</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421280637, "post_id": 27951823, "comment_id": 44304584, "body": "memcpy2 will return a NULL pointer for several reasons.  so in main() a NULL pointer needs to be checked for.  NEVER assume a function worked as expected, even your own functions.  And do notice the the memcpy2() function actually checks for errors, rather than blindly assuming everything is corrected and malloc was successful"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 5, "last_activity_date": 1421267599, "last_edit_date": 1421267599, "creation_date": 1421267238, "answer_id": 27951823, "question_id": 27951794, "link": "https://stackoverflow.com/questions/27951794/unable-to-print-a-pointer-after-using-memcpy/27951823#27951823", "title": "Unable to print a pointer after using memcpy", "body": "<p>You dereference a <code>NULL</code> pointer that's undefined behavior, you should allocate space and point to it with <code>d</code> in order for that to work, do this, instead of</p>\n\n<pre><code>d = NULL\n</code></pre>\n\n<p>write</p>\n\n<pre><code>d = malloc(3);\n</code></pre>\n\n<p>and don't forget</p>\n\n<pre><code>free(d);\n</code></pre>\n\n<p>after the <code>printf()</code>.</p>\n\n<p>If you want to <strong>automagically</strong> make <code>d</code> a valid pointer then write <code>memcpy2()</code> this way</p>\n\n<pre><code>void memcpy2(void **dest, const void *src, size_t n)\n{\n    *dest = NULL;\n    if ((src == NULL) || (n == 0))\n        return;\n    *dest = malloc(n);\n    if (*dest == NULL)\n        return;\n\n    char *dp = *dest;\n    const char *sp = src;\n    while (n--)\n        *dp++ = *sp++;\n}\n</code></pre>\n\n<p>and then your main would be</p>\n\n<pre><code>int main(void) {\n    char *c = \"Hello\";\n    char *d = NULL;\n\n    memcpy2(&amp;d, c, 3);\n       /*   ^ pass the address of the pointer, so you can change where it points to */\n\n    if (d != NULL) /* prevent NULL dereference. */\n    {\n        printf(\"%c\", *d);\n        free(d);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 936, "user_id": 2825720, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/96a0fbe598aa87ce0e7c142e77ed8bbf?s=128&d=identicon&r=PG&f=1", "display_name": "sbhatla", "link": "https://stackoverflow.com/users/2825720/sbhatla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "accepted_answer_id": 27951823, "answer_count": 1, "score": 0, "last_activity_date": 1421267599, "creation_date": 1421267135, "question_id": 27951794, "link": "https://stackoverflow.com/questions/27951794/unable-to-print-a-pointer-after-using-memcpy", "title": "Unable to print a pointer after using memcpy", "body": "<p>I'm trying to get my own version of memcpy to copy a character array from one pointer to another. However, this gives an error. It seems like there is an issue with printf.</p>\n\n<p>Secondly, the official memcpy function returns the destination pointer. Is that really required? If I modify *dest, it should be reflected in *d anyway. So what is the need to return anything?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid memcpy2(void *dest, const void *src, size_t n)\n{\n    char *dp = dest;\n    const char *sp = src;\n    while (n--)\n        *dp++ = *sp++;\n}\n\nint main(void) {\n    char *c = \"Hello\";\n    char *d=NULL;\n    memcpy2(d,c,3);\n    printf( \"%c\", *d);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "perf"], "comments": [{"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 1, "creation_date": 1421269486, "post_id": 27951778, "comment_id": 44299784, "body": "can you use <code>mmap ( ..., MAP_ANON | MAP_HUGETLB)</code>?"}, {"owner": {"reputation": 16887, "user_id": 116388, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/G9fyZ.png?s=128&g=1", "display_name": "Manuel Selva", "link": "https://stackoverflow.com/users/116388/manuel-selva"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421270428, "post_id": 27951778, "comment_id": 44300364, "body": "@abligh it fails with &quot;Cannot allocate memory&quot;"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421270545, "post_id": 27951778, "comment_id": 44300433, "body": "Do you have huge page support compiled into your kernel?"}, {"owner": {"reputation": 16887, "user_id": 116388, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/G9fyZ.png?s=128&g=1", "display_name": "Manuel Selva", "link": "https://stackoverflow.com/users/116388/manuel-selva"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421270705, "post_id": 27951778, "comment_id": 44300510, "body": "Yes and morover, I am able to successfully allocate memory from th hugtlbfs but I appears I still have tlb misses whereas I am only allocating and using 256MB of memory"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421271003, "post_id": 27951778, "comment_id": 44300672, "body": "<code>cat &#47;proc&#47;meminfo</code> will tell you if you are really allocating huge pages (as will <code>&#47;proc&#47;PID&#47;maps</code> I think). Per <a href=\"http://lwn.net/Articles/375096/\" rel=\"nofollow noreferrer\">lwn.net/Articles/375096</a> you could try the <code>shm_get</code> interface. Can you allocate 256MB of memory and still use a 1GB page through hugetlbfs? Won&#39;t you need to allocate 1GB?"}, {"owner": {"reputation": 16887, "user_id": 116388, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/G9fyZ.png?s=128&g=1", "display_name": "Manuel Selva", "link": "https://stackoverflow.com/users/116388/manuel-selva"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421308309, "post_id": 27951778, "comment_id": 44311587, "body": "it seems that hug pages are allocated according to /proc/meminfo. Regarding an allocation of 256MB through 1GB pages in a hugetlbfs, yes I thought it was possible but I am not sure ..."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421313086, "post_id": 27951778, "comment_id": 44313618, "body": "I&#39;m wondering whether you are getting smaller hugepages."}, {"owner": {"reputation": 16887, "user_id": 116388, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/G9fyZ.png?s=128&g=1", "display_name": "Manuel Selva", "link": "https://stackoverflow.com/users/116388/manuel-selva"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421327200, "post_id": 27951778, "comment_id": 44321216, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/68878/discussion-between-manuel-selva-and-abligh\">continue this discussion in chat</a>."}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1421620841, "post_id": 27951778, "comment_id": 44418486, "body": "Could you post up your complete testbench code please, including the <code>perf_event_open</code> call in particular? I happen to have access to a Linux machine <i>(kernel 3.11, however)</i> with a processor that supposedly supports this page-size, and that can easily allocate 10 of them. I&#39;d love to take a shot at this."}, {"owner": {"reputation": 16887, "user_id": 116388, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/G9fyZ.png?s=128&g=1", "display_name": "Manuel Selva", "link": "https://stackoverflow.com/users/116388/manuel-selva"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 2, "creation_date": 1421664971, "post_id": 27951778, "comment_id": 44431730, "body": "@IwillnotexistIdonotexist <a href=\"https://github.com/ManuelSelva/c4fun/blob/master/mem_load/mem_load.c\" rel=\"nofollow noreferrer\">github.com/ManuelSelva/c4fun/blob/master/mem_load/mem_load.c</a>"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1421666676, "post_id": 27951778, "comment_id": 44432572, "body": "@ManuelSelva Thank you, I&#39;ll try it out later today and if I get anywhere on this older system I&#39;ll share what I get."}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1421698850, "post_id": 27951778, "comment_id": 44450479, "body": "@ManuelSelva Alright - I&#39;m booted in my system with kernel args <code>hugepagesz=1G hugepages=10 default_hugepagesz=1G</code>. I cloned your project and <code>make</code>&#39;d it with errors, but luckily <code>mem_load</code> did build cleanly. What arguments do you invoke <code>mem_load</code> with? Because whatever I do it seems the number of hugepages does not drop from 10, at least not according to <code>hugeadm --pool-list</code> or <code>cat &#47;proc&#47;meminfo</code>."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1421738122, "post_id": 27951778, "comment_id": 44463140, "body": "Related: <a href=\"http://superuser.com/questions/710870/\">superuser.com/questions/710870</a>"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1421739079, "post_id": 27951778, "comment_id": 44463528, "body": "@JonathonReinhart It&#39;s kinda related, and I even saw it but.... But on account of what I discovered in my answer below (<i>&quot;CPU supports 1GB pages&quot;</i> does not imply <i>&quot;TLB supports 1GB page entries&quot;</i>), your question and <a href=\"http://superuser.com/questions/710870/which-cpus-support-1gb-pages#comment925856_722368\">comments</a> need to be edited. AFAIK: On all systems pre-Westmere and some Westmere+ systems, the feature is absent; On Westmere processors with the feature, there&#39;s zero 1GB TLB entries (so no TLB miss reduction); And on post-Westmere systems with the feature there are four 1GB TLB entries."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1421739194, "post_id": 27951778, "comment_id": 44463580, "body": "@IwillnotexistIdonotexist You are absolutely correct. I think I will just cross-link that post to this one. Thanks for the in-depth analysis! I assumed the TLB would support whatever the rest of the MMU supported, and was wrong."}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1421739306, "post_id": 27951778, "comment_id": 44463629, "body": "@JonathonReinhart I think any normal person (Even myself) would think that Intel would have the decency of making the TLB support 1GB pages too if they&#39;re advertising &quot;support for 1GB large pages&quot;. I don&#39;t really fault you - I was surprised too."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 2, "creation_date": 1421739586, "post_id": 27951778, "comment_id": 44463742, "body": "The way I see it then, on Westmere, the only advantage to having 1GB pages, is to reduce the amount of memory needed for the page tables themselves. Specifically, Linux x86_64&#39;s direct mapping of all physical memory, and I suppose any userspace program crazy enough to <code>mmap</code> multiples of 1GB."}], "answers": [{"comments": [{"owner": {"reputation": 16887, "user_id": 116388, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/G9fyZ.png?s=128&g=1", "display_name": "Manuel Selva", "link": "https://stackoverflow.com/users/116388/manuel-selva"}, "edited": false, "score": 2, "creation_date": 1421708368, "post_id": 28034928, "comment_id": 44454836, "body": "Thanks for your research and answer, and thanks stackoverflow ;-)"}], "tags": [], "owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "is_accepted": true, "score": 21, "last_activity_date": 1421708112, "last_edit_date": 1592644375, "creation_date": 1421708112, "answer_id": 28034928, "question_id": 27951778, "link": "https://stackoverflow.com/questions/27951778/how-to-use-intel-westmere-1gb-pages-on-linux/28034928#28034928", "title": "How to use Intel Westmere 1GB pages on Linux?", "body": "<h1>TL;DR</h1>\n<p><em>You (specifically, your processor)</em> cannot benefit from 1GB pages in this scenario, but your code is correct without modifications on systems that can.</p>\n<h1>Long version</h1>\n<p>I followed these steps to attempt to reproduce your problem.</p>\n<pre><code>My System: Intel Core i7-4700MQ, 32GB RAM 1600MHz, Chipset H87\n</code></pre>\n<ol>\n<li><p><code>svn co https://github.com/ManuelSelva/c4fun.git</code></p>\n</li>\n<li><p><code>cd c4fun.git/trunk</code></p>\n</li>\n<li><p><code>make</code>. Discovered a few dependencies were needed. Installed them. Build failed, but <code>mem_load</code> did build and link, so did not pursue the rest further.</p>\n</li>\n<li><p>Rebooted the system, appending at GRUB time to the boot arguments the following:</p>\n<pre><code> hugepagesz=1G hugepages=10 default_hugepagesz=1G\n</code></pre>\n<p>which reserves 10 1GB pages.</p>\n</li>\n<li><p><code>cd c4fun.git/trunk/mem_load</code></p>\n</li>\n<li><p>Ran several tests using <code>memload</code>, in random-access pattern mode and pinning it to core 3, which is something that isn't 0 (the bootstrap processor).</p>\n<ul>\n<li><p><code>./mem_load -a rand -c 3 -m 1073741824 -i 1048576</code></p>\n<p>This resulted in approximately nil TLB misses.</p>\n</li>\n<li><p><code>./mem_load -a rand -c 3 -m 10737418240 -i 1048576</code></p>\n<p>This resulted in approximately 60% TLB misses. On a hunch I did</p>\n</li>\n<li><p><code>./mem_load -a rand -c 3 -m 4294967296 -i 1048576</code></p>\n<p>This resulted in approximately nil TLB misses. On a hunch I did</p>\n</li>\n<li><p><code>./mem_load -a rand -c 3 -m 5368709120 -i 1048576</code></p>\n<p>This resulted in approximately 20% TLB misses.</p>\n</li>\n</ul>\n</li>\n</ol>\n<p>At this point I downloaded the <code>cpuid</code> utility. It gave me this for <code>cpuid -1 | grep -i tlb</code>:</p>\n<pre><code>   cache and TLB information (2):\n      0x63: data TLB: 1G pages, 4-way, 4 entries\n      0x03: data TLB: 4K pages, 4-way, 64 entries\n      0x76: instruction TLB: 2M/4M pages, fully, 8 entries\n      0xb5: instruction TLB: 4K, 8-way, 64 entries\n      0xc1: L2 TLB: 4K/2M pages, 8-way, 1024 entries\n   L1 TLB/cache information: 2M/4M pages &amp; L1 TLB (0x80000005/eax):\n   L1 TLB/cache information: 4K pages &amp; L1 TLB (0x80000005/ebx):\n   L2 TLB/cache information: 2M/4M pages &amp; L2 TLB (0x80000006/eax):\n   L2 TLB/cache information: 4K pages &amp; L2 TLB (0x80000006/ebx):\n</code></pre>\n<p>As you can see, my TLB has 4 entries for 1GB pages. This explains well my results: For 1GB and 4GB arenas, the 4 slots of the TLB are entirely sufficient to satisfy all accesses. For 5GB arenas and random-access pattern mode, 4 of the 5 pages only can be mapped through the TLB, so chasing a pointer into the remaining one will cause a miss. The probability of chasing a pointer into the unmapped page is 1/5, so we expect a miss rate of 1/5 = 20% and we get that. For 10GB, 4/10 pages are mapped and 6/10 aren't so the miss rate will be 6/10=60%, and we got that.</p>\n<p>So your code works without modifications on my system at least. Your code does not appear to be problematic then.</p>\n<p>I then did some research on CPU-World, and while not all CPUs are listed with TLB geometry data, some are. The only one I saw that matched your cpuid printout exactly (there could be more) is the <a href=\"http://www.cpu-world.com/CPUs/Xeon/Intel-Xeon%20X5650%20-%20AT80614004320AD%20%28BX80614X5650%29.html\" rel=\"noreferrer\">Xeon Westmere-EP X5650</a>; CPU-World does not explicitly say that the Data TLB0 has entries for 1GB pages, but does say the processor has &quot;1 GB large page support&quot;.</p>\n<p>I then did more research and finally nailed it. An author at RealWorldTech makes an (admittedly, I must yet find a source for this) off-hand comment in the discussion of the memory subsystem of Sandy Bridge. It reads <a href=\"http://www.realworldtech.com/sandy-bridge/7/\" rel=\"noreferrer\">as follows</a>:</p>\n<blockquote>\n<p>After address generation, uops will access the DTLB to translate from a virtual to a physical address, in parallel with the start of the cache access. The DTLB was mostly kept the same, but the support for 1GB pages has improved. <strong>Previously, Westmere added support for 1GB pages, but fragmented 1GB pages into many 2MB pages since the TLB did not have any 1GB page entries.</strong> Sandy Bridge adds 4 dedicated entries for 1GB pages in the DTLB.</p>\n</blockquote>\n<p>(Emphasis added)</p>\n<h1>Conclusion</h1>\n<p>Whatever nebulous concept <em>&quot;CPU supports 1GB pages&quot;</em> represents, Intel thinks it does not imply <em>&quot;TLB supports 1GB page entries&quot;</em>. I'm afraid that you will not be able to use 1GB pages on an Intel Westmere processor to reduce the number of TLB misses.</p>\n<p>That, or Intel is hoodwinking us by distinguishing <em>huge pages</em> (in the TLB) from <em>large pages</em>.</p>\n"}], "owner": {"reputation": 16887, "user_id": 116388, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/G9fyZ.png?s=128&g=1", "display_name": "Manuel Selva", "link": "https://stackoverflow.com/users/116388/manuel-selva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2132, "favorite_count": 3, "accepted_answer_id": 28034928, "answer_count": 1, "score": 20, "last_activity_date": 1448522788, "creation_date": 1421267064, "last_edit_date": 1448522788, "question_id": 27951778, "link": "https://stackoverflow.com/questions/27951778/how-to-use-intel-westmere-1gb-pages-on-linux", "title": "How to use Intel Westmere 1GB pages on Linux?", "body": "<p><strong>Edit</strong>: I updated my question with the details of my benchmark</p>\n\n<p>For benchmarking purposes, I am trying to setup 1GB pages in a Linux 3.13 system running on top of two Intel Xeon 56xx (\"Westmere\") processors. For that I modified my boot parameters to add support for 1GB pages (10 pages). These boot parameters only contain 1GB pages and not 2MB ones. Running <code>hugeadm --pool-list</code>  leads to:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>      Size  Minimum  Current  Maximum  Default\n1073741824       10       10       10        *\n</code></pre>\n\n<p>My kernel boot parameters are taken into account. In my benchmark I am allocating 1GiB of memory that I want to be backed by a 1GiB huge page using:</p>\n\n<pre><code>#define PROTECTION (PROT_READ | PROT_WRITE)\n#define FLAGS (MAP_PRIVATE | MAP_ANONYMOUS | MAP_HUGETLB)\nuint64_t size = 1UL*1024*1024*1024;\nmemory = mmap(0, size, PROTECTION, FLAGS, 0, 0);\nif (memory == MAP_FAILED) {\n    perror(\"mmap\");\n    exit(1);\n}\nsleep(200)\n</code></pre>\n\n<p>Looking at the <code>/proc/meminfo</code> while the bench is sleeping (<code>sleep</code> call above), we can see that one huge page has been allocated:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AnonHugePages:      4096 kB\nHugePages_Total:      10\nHugePages_Free:        9\nHugePages_Rsvd:        0\nHugePages_Surp:        0\nHugepagesize:    1048576 kB\n</code></pre>\n\n<p><strong>Note:</strong> I disabled THP (through the <code>/sys</code> file system) before running the bench, so I guess the <code>AnonHugePages</code> field reported by <code>/proc/meminfo</code> represents the huge pages allocated by THP before stopping it.</p>\n\n<p>At this point we can think that all is fine, but unfortunately my bench leads me to think that many 2MiB pages are used and not one 1GiB page. Here is the explanation:</p>\n\n<p>This bench randomly access the allocated memory through pointer's chasing: a first step fills the memory to enable pointer chasing (each cell points to another cell) and in a second step the bench navigates through the memory using </p>\n\n<pre><code>pointer = *pointer;\n</code></pre>\n\n<p>Using the <code>perf_event_open</code> system call, I am counting data TLB read misses for the second step of the bench only. When the memory allocated size is 64MiB, I count a very small number, 0,01 % of my 6400000 memory accesses, of data TLB read misses. All the accesses are saved in the TLB. In other words, 64MiB of memory can be kept in the TLB. As soon as the allocated memory size is greater than 64 MiB I see data tlb read misses. For a memory size equals to 128 MiB, I have 50% of my 6400000 memory accesses that missed in the TLB. 64MiB appears to be the size that can fit in the TLB and 64MiB = 32 entries (as reportd below) * 2MiB pages. I conclude that I am not using 1GiB pages but 2MiB ones.</p>\n\n<p>Can you see any explanation for that behavior ?</p>\n\n<p>Moreover, the <code>cpuid</code> tool, reports the following about the tlb on my system:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   cache and TLB information (2):\n      0x5a: data TLB: 2M/4M pages, 4-way, 32 entries\n      0x03: data TLB: 4K pages, 4-way, 64 entries\n      0x55: instruction TLB: 2M/4M pages, fully, 7 entries\n      0xb0: instruction TLB: 4K, 4-way, 128 entries\n      0xca: L2 TLB: 4K, 4-way, 512 entries\n   L1 TLB/cache information: 2M/4M pages &amp; L1 TLB (0x80000005/eax):\n   L1 TLB/cache information: 4K pages &amp; L1 TLB (0x80000005/ebx):\n   L2 TLB/cache information: 2M/4M pages &amp; L2 TLB (0x80000006/eax):\n   L2 TLB/cache information: 4K pages &amp; L2 TLB (0x80000006/ebx):\n</code></pre>\n\n<p>As you can see, there is no information about 1GiB pages. How many such pages can be cached in the TLB ?</p>\n"}, {"tags": ["c", "ascii", "memory-address"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421267072, "post_id": 27951734, "comment_id": 44298602, "body": "why are you doing this <code>int s = c;</code>?"}, {"owner": {"reputation": 121, "user_id": 2479355, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f427afaf9e4bfe7392435bdc4ee0c74?s=128&d=identicon&r=PG", "display_name": "petyhaker", "link": "https://stackoverflow.com/users/2479355/petyhaker"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421267333, "post_id": 27951734, "comment_id": 44298708, "body": "sorry, i was experimenting and i kind of forgot it there. it has absolutely no reason to be there. thnx for noticing."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421267931, "post_id": 27951734, "comment_id": 44298984, "body": "Please don&#39;t torture the reader with such oneliners, they don&#39;t make the code pryttier and particularily not more readable, also use more whitespace, the compiler will ignore them."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421267802, "post_id": 27951891, "comment_id": 44298924, "body": "And also, please check the value of <code>r</code>, if it&#39;s <code>0</code> or <code>-1</code> you have to take special care."}], "tags": [], "owner": {"reputation": 1986, "user_id": 4362545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c8125bdcca3d21a1e60584d02ae469?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Kl&#252;nder", "link": "https://stackoverflow.com/users/4362545/hans-kl%c3%bcnder"}, "is_accepted": true, "score": 2, "last_activity_date": 1421267490, "creation_date": 1421267490, "answer_id": 27951891, "question_id": 27951734, "link": "https://stackoverflow.com/questions/27951734/how-do-i-get-ascii-character-from-read/27951891#27951891", "title": "How do i get ascii character from read?", "body": "<p><code>int c</code> creates a variable of probably 4 bytes. It is not initialized, thus it may contain any garbage.</p>\n\n<p>Then the system call</p>\n\n<pre><code>read(fd,&amp;c,1)\n</code></pre>\n\n<p>changes one of these bytes, probably the highest or lowest, while leaving the others unchanged. Now you have a combination of 3 bytes of random garbage plus the one byte fresh from fd, placed somewhere in c.</p>\n\n<p>And then you try to get sense out of that combination.</p>\n\n<p>Things might work much better if you define c as <code>char</code>:</p>\n\n<pre><code>char c;\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 2479355, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f427afaf9e4bfe7392435bdc4ee0c74?s=128&d=identicon&r=PG", "display_name": "petyhaker", "link": "https://stackoverflow.com/users/2479355/petyhaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 27951891, "answer_count": 1, "score": 0, "last_activity_date": 1421521011, "creation_date": 1421266906, "last_edit_date": 1421521011, "question_id": 27951734, "link": "https://stackoverflow.com/questions/27951734/how-do-i-get-ascii-character-from-read", "title": "How do i get ascii character from read?", "body": "<p>in this program, I need to store the frequency of the ascii characters i read in an array (in order to print the most frequent). the problem is that what i get from read is not ascii (most probably some kind of address) so in the buf[] array i get out of bounds.\nCan anybody tell help me with that?</p>\n\n<pre><code>    #include &lt;sys/types.h&gt;\n    #include &lt;sys/stat.h&gt;\n    #include &lt;fcntl.h&gt;\n    #include &lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    #include&lt;unistd.h&gt;\n    #include&lt;strings.h&gt;\n\n    #define MODEMDEVICE \"/dev/ttyAMA0\"\n\n    #define FALSE 0\n    #define TRUE 1\n\n    volatile int STOP=FALSE;\n\n    int main()\n    {\n      int fd,c, res=0,i;\n      struct termios oldtio,newtio;\n      int buf[128] ;\n\n      for (i=0;i&lt;128;i++) buf[i]=0;\n\n      fd = open(MODEMDEVICE, O_RDWR | O_NOCTTY );\n      if (fd &lt;0) {perror(MODEMDEVICE); exit(-1); }\n\n      tcflush(fd, TCIFLUSH);\n      while (STOP==FALSE) {     /* loop until we have a terminating condition */\n            int r=read(fd,&amp;c,1);\n            write(1,&amp;c,1);\n            if (c=='\\n') {\n                    for(i=0;i&lt;128;i++) \n                        if (res &lt; buf[i] ) \n                            res = buf[i];\n                    printf(\"first char %d \\n\", res);\n            }\n            else {\n                    buf[c]++;\n\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1421266534, "post_id": 27951614, "comment_id": 44298354, "body": "<code>w</code> will truncate the file you&#39;re opening. if it&#39;s a &quot;big&quot; file, it&#39;ll take a while for the OS to clean up."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 4, "creation_date": 1421266547, "post_id": 27951614, "comment_id": 44298361, "body": "I think opening a file performance depends more on the operating system implementation since it is a system call."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1421267161, "post_id": 27951614, "comment_id": 44298641, "body": "makes sense that truncation of the file in &quot;w&quot; mode will take the OS some cycles(implementation dependent). Thanks"}, {"owner": {"reputation": 1207, "user_id": 1623757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b9a2643e8f6f180c64552cad441652?s=128&d=identicon&r=PG", "display_name": "Luis", "link": "https://stackoverflow.com/users/1623757/luis"}, "edited": false, "score": 0, "creation_date": 1421267422, "post_id": 27951614, "comment_id": 44298763, "body": "What you&#39;re trying to measure depends a lot on the implementation; &quot;a&quot; and &quot;w&quot; do different things not necessarily comparable. And consider that when timing a program, measurements should be repeated several times under different conditions: consider that the OS needs time to find a file in disk, but subsequent accesses will be faster because of cached information and maybe even the disk heads being closer to the file contents. Which is to say, your 1st program running from cold boot can end up paying for I/O overhead and take longer than the 2nd program."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1421268921, "post_id": 27951614, "comment_id": 44299497, "body": "I agree with you, but just to let you know I profiled for both implementations multiple times with similar results. Also I thought with the code running for 50000 iterations I could disregard the initial I/O overhead for both implementations. Can I not ?"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 272597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dCiYu.jpg?s=128&g=1", "display_name": "Mauvaisours", "link": "https://stackoverflow.com/users/272597/mauvaisours"}, "is_accepted": true, "score": 3, "last_activity_date": 1421267021, "creation_date": 1421267021, "answer_id": 27951770, "question_id": 27951614, "link": "https://stackoverflow.com/questions/27951614/fopen-takes-more-time-with-w-than-a-mode/27951770#27951770", "title": "fopen takes more time with &quot;w&quot; than &quot;a&quot; mode", "body": "<p>With mode=\"w\", the file is emptied before the write, so the system must : </p>\n\n<ol>\n<li>Reset the size of the file to zero (open) </li>\n<li>Mark the blocks used on disk as unused (open)</li>\n<li>Allocate a new block (write)</li>\n<li>Update file size (write)</li>\n</ol>\n\n<p>With mode=\"a\", the system only has :</p>\n\n<ol start=\"3\">\n<li>Allocate a new block (sometimes, not always, if what you write goes into a new block)</li>\n<li>Update file size (write)</li>\n</ol>\n\n<p>Obviously, mode=\"w\" doing more work will take more time...</p>\n"}], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "accepted_answer_id": 27951770, "answer_count": 1, "score": 0, "last_activity_date": 1421267021, "creation_date": 1421266426, "question_id": 27951614, "link": "https://stackoverflow.com/questions/27951614/fopen-takes-more-time-with-w-than-a-mode", "title": "fopen takes more time with &quot;w&quot; than &quot;a&quot; mode", "body": "<p>Does fopen and fclose take more time when opened in \"w\" mode than \"a\" mode for the following conditions\n1. file already present\n2. No file present\nsomething on the lines of the following \n     logFile = fopen(log,\"a\");\n           and\n     logFile = fopen(log,\"w\");</p>\n\n<p>I have the following code which I did a quick strace profiling on to get the clock cycles on each system call with no file present at the start of test.</p>\n\n<h2>code</h2>\n\n<pre><code>int main(int argc, char **argv)\n{\n    const char* log = \"log.txt\";\n    FILE* logFile = NULL;\n    char timeBuf[100];\n    time_t now;\n    struct tm *logtime1;\n\n    time(&amp;now);\n    logtime1 = localtime(&amp;now);\n    strftime(timeBuf,sizeof(timeBuf),\"[%Y-%m-%d %H:%M:%S]\",logtime1);\n    int i;\n    char *inMessage = \"The Quick Brown Fox Jumps Over The Lazy Dog\";\n    for(i=0;i&lt;50000;i++)\n    {\n        logFile = fopen(log,\"a\"); //or **logFile = fopen(log,\"w\");**\n        if(logFile != NULL)\n        {\n           fflush( 0 );\n           int error = 0;\n\n           fprintf(logFile, \"%s\\t%s %d at (%s:%d)\\n\",timeBuf,\n           inMessage, error,__FILE__, __LINE__);\n           fclose(logFile);\n        }\n   }\n   return 0;\n</code></pre>\n\n<p>}</p>\n\n<hr>\n\n<p>When I open the file in \"w\" mode strace profiling is showing that it takes way more time in open system call. Is there a reason behind that ?</p>\n\n<p>Below are the two profiles</p>\n\n<ol>\n<li><p>---------- <strong>strace on code with \"w\" mode</strong></p>\n\n<p>strace -c ./test.out -o report </p>\n\n<p>% time     seconds  usecs/call    calls    errors syscal</p>\n\n<hr>\n\n<p>76.17    0.522555          10     50006           open</p>\n\n<p>12.13    0.083197           2     50006           close</p>\n\n<p>4.61    0.031626           1     50000           write</p>\n\n<p>3.96    0.027151           1     50002           munmap</p>\n\n<p>1.57    0.010737           0     50017           mmap</p>\n\n<p>1.55    0.010663           0     50007           fstat</p>\n\n<hr>\n\n<p>100.00    0.686068                300060         1 total</p>\n\n<ol start=\"2\">\n<li><strong>strace on code with \"a\" mode</strong></li>\n</ol>\n\n<p>---------- strace -c ./test.out -o report</p>\n\n<p>% time     seconds  usecs/call     calls    errors syscall</p>\n\n<hr>\n\n<p>22.08    0.020467           0     50002           munmap</p>\n\n<p>20.24    0.018763           0     50000           write</p>\n\n<p>16.76    0.015542           0    100007           fstat</p>\n\n<p>13.43    0.012450           0     50006           open</p>\n\n<p>9.90    0.009177           0     50006           close</p>\n\n<p>9.44    0.008756           0     50017           mmap</p>\n\n<p>8.15    0.007558           0     50001           lseek</p>\n\n<hr>\n\n<p>100.00    0.092713                400060         1 total</p></li>\n</ol>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1290, "user_id": 3227815, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/932904f6217c372e891e1a36631019f1?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/3227815/katie"}, "edited": false, "score": 2, "creation_date": 1421267182, "post_id": 27951447, "comment_id": 44298650, "body": "Unless I&#39;m missing something this is triggering undefined behavior - &amp;a is the address of char a, so (&amp;a - 1) can&#39;t be dereferenced."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421268182, "post_id": 27951447, "comment_id": 44299122, "body": "How is the &quot;professor&quot; able to dictate about the order that C code operates? Prof has said int size is 32 bits but nothing about char size, or alignment."}, {"owner": {"reputation": 1290, "user_id": 3227815, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/932904f6217c372e891e1a36631019f1?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/3227815/katie"}, "edited": false, "score": 0, "creation_date": 1421268409, "post_id": 27951447, "comment_id": 44299234, "body": "Ah, I missed that you defined how things are allocated. The correct answer is still that it&#39;s undefined behavior so anything could happen. The answer your professor wants is a diagram of the four variables in memory and what bytes have been overwritten with z&#39;s."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421268661, "post_id": 27951447, "comment_id": 44299356, "body": "Even if the two <code>char</code> variables are 32-bit word-aligned, the upper 3 bytes of <code>a</code> will be ignored, and the loop will partially impact the <code>int</code> variables. Prof said nothing about endianess. So the <code>int</code> values are a mystery."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1421273061, "last_edit_date": 1421273061, "creation_date": 1421269711, "answer_id": 27952474, "question_id": 27951447, "link": "https://stackoverflow.com/questions/27951447/drawing-a-diagram-of-executing-code/27952474#27952474", "title": "Drawing a diagram of executing code", "body": "<p>The code is pretty strange as it makes no sense.\nAs far as I can tell from your information this will happen:</p>\n\n<p>i will be located at address 68</p>\n\n<p>ai will be located at 72 and 76</p>\n\n<p>The difficult part is a and b.\nThey only requires a byte but the compiler may still word align them!\nIt depends on your system/compiler.</p>\n\n<p>Option 1 using word alignment:</p>\n\n<p>b will be at address 80</p>\n\n<p>a will be at address 84</p>\n\n<p>Option 2 NOT using word alignment:</p>\n\n<p>b will be at address 80</p>\n\n<p>a will be at address 81</p>\n\n<p>The loop will start by overwriting a with a z\nThen it will decrement the address by one and overwrite that location with z</p>\n\n<p>This will repeat 8 times.</p>\n\n<p>So for option 1 the result will be that both a and b will be z and some unused memory will also be z.</p>\n\n<p>memory before:</p>\n\n<p>00 00 00 00</p>\n\n<p>00 00 00 01 </p>\n\n<p>00 00 00 02</p>\n\n<p>-- -- -- 'b'</p>\n\n<p>-- -- -- 'a'</p>\n\n<p>memory after:</p>\n\n<p>00 00 00 08</p>\n\n<p>00 00 00 01 </p>\n\n<p>00 00 00 02</p>\n\n<p>'z' 'z' 'z' 'z' </p>\n\n<p>'z' 'z' 'z' 'z' </p>\n\n<p>For option 2 both a and b will be z but also ai will be changed. ai[1] = int(zzzz) and ai[0]=int(zz)</p>\n\n<p>memory before:</p>\n\n<p>00 00 00 00</p>\n\n<p>00 00 00 01 </p>\n\n<p>00 00 00 02</p>\n\n<p>'b' 'a'</p>\n\n<p>memory after:</p>\n\n<p>00 00 00 08</p>\n\n<p>00 00 'z' 'z'</p>\n\n<p>'z' 'z' 'z' 'z'</p>\n\n<p>'z' 'z'</p>\n\n<p>EDIT:</p>\n\n<p>I see my answer got down voted.</p>\n\n<p>Maybe because I forgot to tell that it was for big endian systems.</p>\n\n<p>So I tried the program on a windows machine as well and got this result:</p>\n\n<p>a address 28fec3</p>\n\n<p>b address 28fec2</p>\n\n<p>ai address 28feb8</p>\n\n<p>i address 28feb4</p>\n\n<p>BEFORE</p>\n\n<p>0 0 0 0 (i=0)</p>\n\n<p>1 0 0 0 (ai[0]=1)</p>\n\n<p>2 0 0 0 (ai[1]=2)</p>\n\n<p>-43 -116 b a (unused unused b='b' a='a')</p>\n\n<p>AFTER</p>\n\n<p>8 0 0 0 (i=8)</p>\n\n<p>1 0 0 0 (ai[0]=1)</p>\n\n<p>z z z z (ai[1]=int(\"zzzz\")</p>\n\n<p>z z z z (unused unused b='z' a='z')</p>\n\n<p>Due to little endian things \"turned around\" but the main point is the same.</p>\n\n<p>Thanks for the down vote with no comment.</p>\n"}, {"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 2, "last_activity_date": 1421269777, "creation_date": 1421269777, "answer_id": 27952487, "question_id": 27951447, "link": "https://stackoverflow.com/questions/27951447/drawing-a-diagram-of-executing-code/27952487#27952487", "title": "Drawing a diagram of executing code", "body": "<p>You can't guarantee how this works as it's up to the C compiler how it lays things out. However, you can easily establish how a <em>particular</em> C compiler does it. Assuming <code>gcc</code>, compile with <code>-g</code>, then run the program under <code>gdb</code>. Use <code>print</code> to print the variables (or <code>print &amp;x</code> to print the address of a variable), and <code>x</code> to examine memory.</p>\n"}], "owner": {"reputation": 1, "user_id": 4256545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6521cd7342d91e0c49dc36639c9dc38?s=128&d=identicon&r=PG&f=1", "display_name": "efwfef", "link": "https://stackoverflow.com/users/4256545/efwfef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421273061, "creation_date": 1421265820, "last_edit_date": 1421265980, "question_id": 27951447, "link": "https://stackoverflow.com/questions/27951447/drawing-a-diagram-of-executing-code", "title": "Drawing a diagram of executing code", "body": "<p>Consider the following lines of code:</p>\n\n<pre><code>char a = 'a';\nchar b = 'b';\nint ai[] = { 1, 2 };\nint i = 0;\n</code></pre>\n\n<p>Assume that word size is 32 bits, that an int is 32 bits and\nthat memory allocations are made in the reverse order to\nthe declarations starting at address location 68.</p>\n\n<p>Draw a diagram that shows the effect of\nexecuting the following lines of code.</p>\n\n<pre><code> for (i = 0; i &lt; 8; i++)\n *(&amp;a \u2013 i) = 'z';\n</code></pre>\n\n<p>So I'm pretty unsure what it's expecting of me here. My initial guess was it loops through and essentially does a-1,a-2....,a-8 making each value equal to the character Z. So the diagram would essentially be 8 objects all pointing to Z each having the same address as Z. I'm not sure if that's right or horribly wrong. Could anyone care to explain. FYI this is a past exam paper, practising for finals, not examined work!</p>\n"}, {"tags": ["python", "c", "python-c-api", "python-c-extension"], "answers": [{"comments": [{"owner": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "edited": false, "score": 0, "creation_date": 1421266391, "post_id": 27951557, "comment_id": 44298292, "body": "my understanding is that the difference in size of both the exponent and mantissa would make manual coercion of a double to a float somewhat non-trivial and potentially dangerous"}, {"owner": {"reputation": 121, "user_id": 4249333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/202bb7771266a843c2e1327999192a59?s=128&d=identicon&r=PG&f=1", "display_name": "david1024", "link": "https://stackoverflow.com/users/4249333/david1024"}, "reply_to_user": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "edited": false, "score": 0, "creation_date": 1421266599, "post_id": 27951557, "comment_id": 44298389, "body": "yes, the exponent is the &#39;fit&#39; part.  Doubles and Floats are both approximations, there will be loss of precision in almost all conversion cases anyway."}, {"owner": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "edited": false, "score": 0, "creation_date": 1421266672, "post_id": 27951557, "comment_id": 44298429, "body": "loss of precision is inevitable, but bit level manipulation of doubles to approximate a float sounds like there would be inevitable edge cases in which serious errors occur  due to the primitive nature of the conversion method."}], "tags": [], "owner": {"reputation": 121, "user_id": 4249333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/202bb7771266a843c2e1327999192a59?s=128&d=identicon&r=PG&f=1", "display_name": "david1024", "link": "https://stackoverflow.com/users/4249333/david1024"}, "is_accepted": false, "score": 0, "last_activity_date": 1421266209, "creation_date": 1421266209, "answer_id": 27951557, "question_id": 27951419, "link": "https://stackoverflow.com/questions/27951419/convert-pyfloatobject-to-float/27951557#27951557", "title": "convert PyFloatObject to float", "body": "<p>Short answer is yes, as long as your 'double' will fit (with respect to magnitude) into a 'float'. however you may need to round it or truncate it to single precision.</p>\n\n<p>using IEEE 754 floating point representations....</p>\n\n<p>\"float is defined as IEEE 754 single precision, double is defined as double precision, and long double is defined as IEEE 754 extended precision or some form of quad precision where available (e.g., Intel 80 bit double extended precision on x86 or x86-64 platforms), else double precision. Previously, all C90 floating operations were defined to occur in double-precision, with subsequent rounding to single precision, to store results, where necessary.\"</p>\n\n<p>Data quoted regarding '754 is from <a href=\"http://en.wikipedia.org/wiki/C99\" rel=\"nofollow\">http://en.wikipedia.org/wiki/C99</a> (c99 c spec description on wikipedia) while it isn't python specific, IEEE 754 is general, and not c-specific)</p>\n\n<p>What version of python are you using?  You may want to use (from <a href=\"https://docs.python.org/2/c-api/float.html\" rel=\"nofollow\">https://docs.python.org/2/c-api/float.html</a>)</p>\n\n<p>double PyFloat_AsDouble(PyObject *pyfloat)\nReturn a C double representation of the contents of pyfloat. If pyfloat is not a Python floating point object but has a <strong>float</strong>() method, this method will first be called to convert pyfloat into a float. This method returns -1.0 upon failure, so one should call PyErr_Occurred() to check for errors.</p>\n"}, {"tags": [], "owner": {"reputation": 1748, "user_id": 99279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ea76ee226b4cdb598055de1eb1d67a?s=128&d=identicon&r=PG", "display_name": "sterin", "link": "https://stackoverflow.com/users/99279/sterin"}, "is_accepted": false, "score": 2, "last_activity_date": 1421340227, "creation_date": 1421340227, "answer_id": 27968512, "question_id": 27951419, "link": "https://stackoverflow.com/questions/27951419/convert-pyfloatobject-to-float/27968512#27968512", "title": "convert PyFloatObject to float", "body": "<p>From the <a href=\"https://docs.python.org/2/library/stdtypes.html#typesnumeric\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p>Floating point numbers are usually implemented using <code>double</code> in C;</p>\n</blockquote>\n\n<p>In other words, the Python <code>float</code> type is just a C <code>double</code>, so there is not magic Python function to convert a Python <code>float</code> to a C <code>float</code> other than what is normally available with C to convert <code>double</code> to <code>float</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "is_accepted": false, "score": 0, "last_activity_date": 1421343214, "creation_date": 1421343214, "answer_id": 27969486, "question_id": 27951419, "link": "https://stackoverflow.com/questions/27951419/convert-pyfloatobject-to-float/27969486#27969486", "title": "convert PyFloatObject to float", "body": "<p>sprintf into a buffer followed by atoi seems to do the trick</p>\n"}], "owner": {"reputation": 1010, "user_id": 2067665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c86e226759ee03937af84103fd1b1ab?s=128&d=identicon&r=PG", "display_name": "ragingSloth", "link": "https://stackoverflow.com/users/2067665/ragingsloth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2095, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1421343214, "creation_date": 1421265694, "question_id": 27951419, "link": "https://stackoverflow.com/questions/27951419/convert-pyfloatobject-to-float", "title": "convert PyFloatObject to float", "body": "<p>I have a <code>PyFloatObject</code> that I want to convert to a <code>C float</code>. However, <code>PyObjectFloat</code> only provides a conversion to double. Can I safely cast a double to a float, or is there a function to convert <code>PyObject</code> to <code>float</code> i.e. <code>PyObject_AsFloat</code>.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1421264894, "post_id": 27951122, "comment_id": 44297506, "body": "The compiler turns each variable into a memory address."}, {"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1421265029, "post_id": 27951122, "comment_id": 44297597, "body": "And the processor will not know the name of the variable, because it does not need to know. The compiler will use the same memory address for the same variable."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1421266884, "post_id": 27951122, "comment_id": 44298514, "body": "Read the reference manual of your programmer. Usually there&#39;s a compiler flag to output memory map to a report file, where you can see the actual memory location of all symbols. This is very useful when fine control of compile-time memory allocation is required."}], "answers": [{"tags": [], "owner": {"reputation": 401, "user_id": 3140187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6de2df91830a69213fbfea9976cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "henje", "link": "https://stackoverflow.com/users/3140187/henje"}, "is_accepted": false, "score": 3, "last_activity_date": 1421264946, "creation_date": 1421264946, "answer_id": 27951202, "question_id": 27951122, "link": "https://stackoverflow.com/questions/27951122/how-compilers-allocate-identifers-in-the-memory/27951202#27951202", "title": "How compilers allocate identifers in the memory", "body": "<p>Basically the instruction is just a label for the compiler. The compiler then replaces every occasion of x with an address or a register. This depends on the architecture and its optimization possibilities.</p>\n"}, {"tags": [], "owner": {"reputation": 330, "user_id": 4454877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0129832b19e0227f7085a5782b34b85?s=128&d=identicon&r=PG&f=1", "display_name": "Retr0id", "link": "https://stackoverflow.com/users/4454877/retr0id"}, "is_accepted": false, "score": 1, "last_activity_date": 1421265226, "creation_date": 1421265226, "answer_id": 27951276, "question_id": 27951122, "link": "https://stackoverflow.com/questions/27951122/how-compilers-allocate-identifers-in-the-memory/27951276#27951276", "title": "How compilers allocate identifers in the memory", "body": "<p>When the code is compiled, the variable x will be assigned a memory address. For example, lets say that the compiler decides to use memory address 0x16 for x. The instruction \"x = 20;\" will be translated into machine code that will say something equivalent to \"put 0x14 into the memory byte at address 0x16\" (0x14 being the hex value of 20).</p>\n\n<p>The processor itself will have no knowledge of a variable called \"x\", it will just be told to look for a byte at address 0x16 (according to my example).</p>\n"}], "owner": {"reputation": 1, "user_id": 4441001, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000346022796/picture?type=large", "display_name": "\u0627\u062d\u0645\u062f \u0627\u0644\u0635\u064a\u0631\u0641\u064a", "link": "https://stackoverflow.com/users/4441001/%d8%a7%d8%ad%d9%85%d8%af-%d8%a7%d9%84%d8%b5%d9%8a%d8%b1%d9%81%d9%8a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1421265226, "creation_date": 1421264685, "question_id": 27951122, "link": "https://stackoverflow.com/questions/27951122/how-compilers-allocate-identifers-in-the-memory", "title": "How compilers allocate identifers in the memory", "body": "<p>i wanne to know ....now i'm trying to program an embedded system wich contain RAM ,ROM, Microprocessor ....</p>\n\n<p>know i can't under stand when i write instructions like :\nint x ;\nx= 20 ;</p>\n\n<p>When these program is compiled and Burn to the Rom memory  it will be in the operation code ...\nmy Question :\nknow when the processor revieve the operation code corresponding to Int x  ; \nthe microprocessor will save a memory location at a random address .</p>\n\n<p>now ..when the processor receive the 2nd instruction x=20  ...it will do a move instruction ...but how can the microprocessor know where does it locate the x variable </p>\n\n<p>.......................................................................\ni mean ...how the processor knows the addresses of memory locations reserved for variables ?!!!!</p>\n"}, {"tags": ["c#", "c++", "c", "performance", "caching"], "comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1421264620, "post_id": 27951041, "comment_id": 44297350, "body": "&quot;Cache associativity&quot; is a good search term.  Hopefully you can replace your second paragraph in your brain with a better model of the specific thing you want to avoid."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421265849, "post_id": 27951041, "comment_id": 44298037, "body": "This is surely nothing to do with C#, C++ or C. Particularly not C#."}, {"owner": {"reputation": 6932, "user_id": 158109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AjbOn.png?s=128&g=1", "display_name": "Xenoprimate", "link": "https://stackoverflow.com/users/158109/xenoprimate"}, "edited": false, "score": 0, "creation_date": 1421266003, "post_id": 27951041, "comment_id": 44298107, "body": "I chose those languages because they&#39;re the languages you most commonly have to think about theses sorts of problems with. And yes, I think you do in C# too."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1421266075, "post_id": 27951041, "comment_id": 44298143, "body": "C# aligns its object fields just like C++, to improve performance. The compiler does that for you, you don&#39;t have to worry about it."}, {"owner": {"reputation": 6932, "user_id": 158109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AjbOn.png?s=128&g=1", "display_name": "Xenoprimate", "link": "https://stackoverflow.com/users/158109/xenoprimate"}, "edited": false, "score": 0, "creation_date": 1421266163, "post_id": 27951041, "comment_id": 44298185, "body": "It aligns its fields (unless you override the behaviour), but I don&#39;t know that arrays of structs are aligned on any particular boundary (very unlikely considering they&#39;re moved by the GC), so the page alignment issue remains. Also, it is possible to manually allocate memory by using AllocHGlobal etc."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 1, "creation_date": 1421266917, "post_id": 27951041, "comment_id": 44298529, "body": "You don&#39;t control <i>where</i> the allocated space goes, even with <code>AllocHGlobal</code>. And your program only sees <i>virtual</i> memory, which makes matters even more complicated. Also, .NET&#39;s GC is <i>heavily</i> optimized. Unless you <b>really</b> do have a performance issue that is validated by profiling your code and traces back to this (which is really unlikely), you simply shouldn&#39;t bother."}, {"owner": {"reputation": 6932, "user_id": 158109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AjbOn.png?s=128&g=1", "display_name": "Xenoprimate", "link": "https://stackoverflow.com/users/158109/xenoprimate"}, "edited": false, "score": 0, "creation_date": 1421277349, "post_id": 27951041, "comment_id": 44303499, "body": "It is still possible to align allocations in .NET, see <a href=\"http://stackoverflow.com/questions/13413323/allocate-memory-with-16-byte-alignment\" title=\"allocate memory with 16 byte alignment\">stackoverflow.com/questions/13413323/&hellip;</a>"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1421292090, "post_id": 27951041, "comment_id": 44307298, "body": "For X86 processors, hashing of addresses is partially avoided with the  (wiki link) <a href=\"http://en.wikipedia.org/wiki/Translation_lookaside_buffer\" rel=\"nofollow noreferrer\">translation look aside buffer</a>, which is often implemented using a content addressable memory (aka associative memory), where all the compares for an address match are performed in parallel."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1421268188, "creation_date": 1421268188, "answer_id": 27952045, "question_id": 27951041, "link": "https://stackoverflow.com/questions/27951041/memory-alignment-vs-page-alignment/27952045#27952045", "title": "Memory Alignment vs Page Alignment", "body": "<p>I don't think you can get a general rule for this. It depends on the processor you are using, i.e. the MMU and cache implementation of the underlying system. That will differ from system to system. So if you want top-performance, you'll need to understand all the low level details of your current system. In general I would expect that the benefit of aligning large memory blocks to a power-of-two boundary is limited.</p>\n"}, {"tags": [], "owner": {"reputation": 2959, "user_id": 786437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/030f2d74a6cbdbe864e7c5f4038e8d10?s=128&d=identicon&r=PG", "display_name": "jstine", "link": "https://stackoverflow.com/users/786437/jstine"}, "is_accepted": true, "score": 1, "last_activity_date": 1421426498, "creation_date": 1421426498, "answer_id": 27988660, "question_id": 27951041, "link": "https://stackoverflow.com/questions/27951041/memory-alignment-vs-page-alignment/27988660#27988660", "title": "Memory Alignment vs Page Alignment", "body": "<p>If performance is particularity critical to your application, and your application is typically iterating over known datasets (in type and size), then it is important to know and understand the effects of MMUs, L-caches, and cache lines.  Not because you can really avoid those problems ahead-of-time, but because you might need to identify them after-the-fact while staring at profiling results and trying to puzzle out why something took way longer than it used to or \"normally should.\"  And -- if you're lucky and the dataset is enough within your control -- you can then tweak things to resolve some sort of cpu cache performance issue.</p>\n\n<p>Unfortunately most applications don't have the luxury of iterating over known datasets, and knowing their target hardware type.  That is something that is fairly exclusive to game and multimedia application development, and also operating systems engineering.  For most of the rest of the world's applications, improving the cache profile for one particular dataset of some particular size means decreasing it for another.</p>\n\n<p>Finally, even the 'rule of thumb' about \"aligning our variables to an N-byte boundary\" is subject to underlying hardware.  Most newer desktop-grade x86 architectures (most made after roughly 2011) prefer packed data rather than aligned data, because the cost of loading words packed across a cacheline boundary has become cheaper than having to load more total cachelines to represent the same dataset.  But on a mobile device running ARM?  Alignment is still pretty critical.</p>\n\n<p>More keywords for you to search on, for further education:  <em>cache coloring</em> and <em>cache eviction</em>.  But again, this is all very dependent on target CPUs and there are unfortunately few (or no) generalizations to be had.</p>\n"}], "owner": {"reputation": 6932, "user_id": 158109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AjbOn.png?s=128&g=1", "display_name": "Xenoprimate", "link": "https://stackoverflow.com/users/158109/xenoprimate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 2, "accepted_answer_id": 27988660, "answer_count": 2, "score": 0, "last_activity_date": 1421426498, "creation_date": 1421264373, "question_id": 27951041, "link": "https://stackoverflow.com/questions/27951041/memory-alignment-vs-page-alignment", "title": "Memory Alignment vs Page Alignment", "body": "<p>Often we hear that aligning our variables to an N-byte boundary in memory can improve performance (by preventing the CPU from having to load two separate 'words' in to the cache to read our variable).</p>\n\n<p>On the other hand, we also hear (less often) that aligning a large block of memory (array/buffer) to a nice, round power-of-two address can be bad because the hashing function that allocates memory addresses to cache addresses is no longer uniform (this is called page alignment).</p>\n\n<p>Therefore, my question is, is there some sort of rule or threshold point about when we should deliberately misalign data to avoid the problem of page alignment; and when not to, to gain the benefits of standard memory alignment?</p>\n"}, {"tags": ["c", "multithreading", "gtk", "pthreads"], "answers": [{"comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1421264917, "post_id": 27951075, "comment_id": 44297528, "body": "I&#39;m only familiar with GTK+ 3. Does GTK+ 2 not have a <code>gdk_threads_idle_add()</code>?"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1421265297, "post_id": 27951075, "comment_id": 44297743, "body": "@andlabs I&#39;m unaware of that (and Google seems mostly unaware of it too). I suppose I was answering a more general question of how to communicate between a thread and an event loop written for a traditional nonthreaded program."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 1, "creation_date": 1421275023, "post_id": 27951075, "comment_id": 44302548, "body": "The thing is, this doesn&#39;t quite address how the <code>main</code> thread is supposed to update the UI while it&#39;s blocked on the <code>gtk_main()</code> function. Is it ok for a separate thread to update the UI? I have all UI update calls wrapped with a mutex so no two threads attempt to update the UI simultaneously."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421275528, "post_id": 27951075, "comment_id": 44302755, "body": "Does the second link above not explain that?"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1421283447, "post_id": 27951075, "comment_id": 44305360, "body": "@abligh right; I was going to say that that function would be how you queued some code to run on the main thread when it&#39;s not doing anything (and thus would be how to communicate, except for synchronization). What you&#39;re describing in the answer seems a little messy for the sole purpose of updating a GUI, but I don&#39;t know GTK+ 2 so I can&#39;t really comment..."}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 0, "last_activity_date": 1421264526, "last_edit_date": 1495542785, "creation_date": 1421264526, "answer_id": 27951075, "question_id": 27950493, "link": "https://stackoverflow.com/questions/27950493/safety-of-using-pthreads-in-gtk2-0-application/27951075#27951075", "title": "Safety of using pthreads in Gtk+2.0 application", "body": "<p>I would do your sampling in separate threads, as you suggest. The question then is how you update the UI. What I would do is to use a 'self-pipe'. This is normally done to communicate from signal handlers, but it works just fine between threads when one of the threads can't wait on a condition variable. What you do here is set up a dedicated pipe, write one character to the pipe in the thread that has got the data, and <code>select()</code> on the read end of the pipe in the main program's <code>select()</code> loop. Details here: <a href=\"https://stackoverflow.com/questions/23872371/using-self-pipe-how-can-i-avoid-that-the-event-loop-stalls-on-read\">Using self-pipe, how can I avoid that the event loop stalls on read()?</a> - useful background on its origins <a href=\"http://cr.yp.to/docs/selfpipe.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>You can then make GTK+ listen on the read end of the pipe. Your problem is thus reduced to making GTK+ respond to something on an FD - see <a href=\"https://stackoverflow.com/questions/8826523/gtk-main-and-unix-sockets\">here</a> (first answer) for how.</p>\n"}, {"comments": [{"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1421510596, "post_id": 27990662, "comment_id": 44391737, "body": "Do you have an example of how to accomplish this with a simple GTK + pthreads setup? Thanks!"}, {"owner": {"reputation": 7127, "user_id": 186347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41faca9cd29ae1ff1e10ffd01eb15e52?s=128&d=identicon&r=PG", "display_name": "ntd", "link": "https://stackoverflow.com/users/186347/ntd"}, "reply_to_user": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 1, "creation_date": 1421526967, "post_id": 27990662, "comment_id": 44396663, "body": "@Dogbert Just added to the answer."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1421527287, "post_id": 27990662, "comment_id": 44396744, "body": "Thank you. This is the most in-line with what I meant with my original question."}], "tags": [], "owner": {"reputation": 7127, "user_id": 186347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41faca9cd29ae1ff1e10ffd01eb15e52?s=128&d=identicon&r=PG", "display_name": "ntd", "link": "https://stackoverflow.com/users/186347/ntd"}, "is_accepted": true, "score": 8, "last_activity_date": 1421526930, "last_edit_date": 1421526930, "creation_date": 1421433734, "answer_id": 27990662, "question_id": 27950493, "link": "https://stackoverflow.com/questions/27950493/safety-of-using-pthreads-in-gtk2-0-application/27990662#27990662", "title": "Safety of using pthreads in Gtk+2.0 application", "body": "<p>According to the <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html\" rel=\"noreferrer\">documentation</a>, the main even loop can accept sources from different threads:</p>\n\n<blockquote>\n  <p>A GMainContext can only be running in a single thread, but sources can\n  be added to it and removed from it from other threads.</p>\n</blockquote>\n\n<p>So you can inject the code in the UI thread from your working thread by:</p>\n\n<ol>\n<li>creating a <code>GSource</code> (e.g., by using <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-idle-source-new\" rel=\"noreferrer\"><code>g_idle_source_new</code></a>);</li>\n<li>adding the code you want to be executed with <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-source-set-callback\" rel=\"noreferrer\"><code>g-source-set-callback</code></a>;</li>\n<li>attaching it to the UI thread context with <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-source-attach\" rel=\"noreferrer\"><code>g_source_attach()</code></a>.</li>\n</ol>\n\n<p>Here is a sample program for GTK+2 and GLib >= 2.32:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\n#define N_THREADS    100\n#define N_ITERATIONS 100\n\nGtkWidget *bar;\nGMainContext *context;\n\nstatic gboolean\nupdate_progress_bar(gpointer user_data)\n{\n    gtk_progress_bar_set_fraction(GTK_PROGRESS_BAR(bar),\n                                  g_random_double_range(0, 1));\n    return G_SOURCE_REMOVE;\n}\n\n\nstatic gpointer\nthread_func(gpointer user_data)\n{\n    int n_thread = GPOINTER_TO_INT(user_data);\n    int n;\n    GSource *source;\n\n    g_print(\"Starting thread %d\\n\", n_thread);\n\n    for (n = 0; n &lt; N_ITERATIONS; ++n) {\n        /* If you want to see anything you should add a delay\n         * to let the main loop update the UI, e.g.:\n         * g_usleep(g_random_int_range(1234, 567890));\n         */\n        source = g_idle_source_new();\n        g_source_set_callback(source, update_progress_bar, NULL, NULL);\n        g_source_attach(source, context);\n        g_source_unref(source);\n    }\n\n    g_print(\"Ending thread %d\\n\", n_thread);\n    return NULL;\n}\n\n\ngint\nmain(gint argc, gchar *argv[])\n{\n    GtkWidget *window;\n    GThread *thread[N_THREADS];\n    int n;\n\n    gtk_init(&amp;argc, &amp;argv);\n\n    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n    g_signal_connect(window, \"destroy\", G_CALLBACK(gtk_main_quit), NULL);\n\n    bar = gtk_progress_bar_new();\n    gtk_container_add(GTK_CONTAINER(window), bar);\n\n    context = g_main_context_default();\n\n    for (n = 0; n &lt; N_THREADS; ++n)\n        thread[n] = g_thread_new(NULL, thread_func, GINT_TO_POINTER(n));\n\n    gtk_widget_show_all(window);\n    gtk_main();\n\n    for (n = 0; n &lt; N_THREADS; ++n)\n        g_thread_join(thread[n]);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2386, "favorite_count": 2, "accepted_answer_id": 27990662, "answer_count": 2, "score": 4, "last_activity_date": 1421526930, "creation_date": 1421262049, "question_id": 27950493, "link": "https://stackoverflow.com/questions/27950493/safety-of-using-pthreads-in-gtk2-0-application", "title": "Safety of using pthreads in Gtk+2.0 application", "body": "<p>I have a simple multithreaded Gtk+2.0 application that acquires data from multiple sources (microphone, webcam, temperature sensor), and displays data from these as images on screen (webcam frame grabs, microphone data represented as oscilloscope renders, text, etc).</p>\n\n<p>It's to my understanding from the Gtk manual <a href=\"http://blogs.operationaldynamics.com/andrew/software/gnome-desktop/gtk-thread-awareness\" rel=\"nofollow\">and various articles</a> that only the main processing thread should use any Gtk functions/calls that affect the UI. However, the <code>main()</code> entry point blocks on <code>gtk_main()</code> until I close the UI. With the exception of event handlers that are mapped to things like when I click on a button or slider in my UI, it seems the only option left open to me is to spawn a few <code>pthread</code>s and have them do the periodic sampling of data and updating information on-screen in the UI.</p>\n\n<p>I remember from doing some MFC GUI development a long ways back that a similar principle applied: only a single specific thread should be updating the UI elements. How do I accomplish this in C with Gtk+2.0?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "graph", "depth-first-search", "adjacency-list"], "comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421262527, "post_id": 27950438, "comment_id": 44296223, "body": "Depending on what you try to do with it, there are fast algorithms like A* (A-star) or variations of it to find if two nodes in the graph are connected. If it is for educational purposes only, the brute force depth first, of course is okay. If you plan to add this to a navigation system or alike, I advice to consider more efficient algorithms, though."}, {"owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421263267, "post_id": 27950438, "comment_id": 44296598, "body": "Thanks for the knowledge sir I had never heard of A* algorithm before , I would be very grateful if you provide me with the implemenation of A*   with this code (replace it with DFs), or maybe some links to learn it better"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421264155, "post_id": 27950438, "comment_id": 44297095, "body": "What exactly is the problem? I see quite some issues in the code that you wrote, assuming you yourself only wrote <code>dfs()</code> and perhaps modified <code>main()</code>. &quot;there seems to be some logical inconsistencies&quot; is not a proper description of an error, at what point is the output not what you expected?"}], "answers": [{"comments": [{"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421264572, "post_id": 27950851, "comment_id": 44297316, "body": "Or declare it in a wrapper function on the stack and pass it in as a parameter."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421276443, "post_id": 27950851, "comment_id": 44303148, "body": "Making it static does not change the fact that it won&#39;t work. v is not a constant but a parameter of that function. You cannot create &quot;variable length&quot; arrays like that."}, {"owner": {"reputation": 514, "user_id": 1925789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb2080aa32e20b9936f4a403e720dbf?s=128&d=identicon&r=PG", "display_name": "Arthur Laks", "link": "https://stackoverflow.com/users/1925789/arthur-laks"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1421283347, "post_id": 27950851, "comment_id": 44305334, "body": "@user2225104 Thank you for pointing that out.  I guess that I will have to revise my answer."}], "tags": [], "owner": {"reputation": 514, "user_id": 1925789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb2080aa32e20b9936f4a403e720dbf?s=128&d=identicon&r=PG", "display_name": "Arthur Laks", "link": "https://stackoverflow.com/users/1925789/arthur-laks"}, "is_accepted": true, "score": 0, "last_activity_date": 1421284052, "last_edit_date": 1421284052, "creation_date": 1421263501, "answer_id": 27950851, "question_id": 27950438, "link": "https://stackoverflow.com/questions/27950438/error-implementing-depth-first-search/27950851#27950851", "title": "Error implementing Depth first search", "body": "<p>I cannot tell if this is the only problem with your code, but the <code>visited</code> array should not be declared on the stack.  The way your code is now, there is a separate visited array for each recursive call of your function.  </p>\n\n<p>Instead, you should make it a pointer to an array on the heap.  In order to implement this solution, you should expect your recursive function to be called by a nonrecursive wrapper function that allocates a buffer from the heap, passes a pointer to that buffer to the recursive function, and deallocates that memory when the recursive function returns.  </p>\n\n<p>If you use this implementation, you would have a <code>bfs</code> function that takes all of the parameters that your existing function takes, and rename your existing function to <code>bsf_recursive</code>, and add an int pointer to its parameter list.  The <code>bfs</code> function should allocate an array of integers from the heap, pass it to the <code>bsf_recursive</code> function, and then free up the memory of the array.</p>\n"}, {"tags": [], "owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "is_accepted": false, "score": 0, "last_activity_date": 1421273249, "creation_date": 1421273249, "answer_id": 27953356, "question_id": 27950438, "link": "https://stackoverflow.com/questions/27950438/error-implementing-depth-first-search/27953356#27953356", "title": "Error implementing Depth first search", "body": "<p>Aside from some \"showstoppers\" like the aforementioned attempt to create an array with con-constant size, I felt readability of the code was lacking a bit, as well as some \"best practices\" to write code in C. So, instead of making the original code work, I freely \"refactored\" it until I felt it would reflect a more readable and more instructive implementation.</p>\n\n<p>The main differences of my implementation are, that the Nodes need not store the Id. Instead, all nodes are stored in an array within the Graph structure and the index within that array is implicitely the id of the node.</p>\n\n<p>Also, I built a wrapper function around the recursive depth first function, which takes care of proper allocation of the visited nodes flag array. </p>\n\n<p>I kept the recursive form of the original code and added a tiny bit of \"reuse\" to the mix, by means of a visitor function, which is invoked during search.</p>\n\n<p>By studying the code here, it should not be hard to make the right decisions to implement the DSF function in the original code.</p>\n\n<pre><code>// GraphGames.cpp : Defines the entry point for the console application.\n//\n#define _CRT_SECURE_NO_WARNINGS\n#include \"stdafx.h\"\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;assert.h&gt;\n\n// A GraphNode maintains a singly linked list of node ids, it is connected to, the connection_list.\ntypedef struct SizetListNode\n{\n    size_t nodeIndex;\n    struct SizetListNode * next;\n} SizetListNode_t, *SizetListNodePtr_t;\n\ntypedef struct GraphNode\n{\n    SizetListNodePtr_t connection_list_head;\n} GraphNode_t, *GraphNodePtr_t;\n\n// A graph consists of an array of nodes. The index within the node array is also the nodes \"id\", implicitely.\ntypedef struct Graph\n{\n    size_t node_array_length;\n    GraphNode_t * node_array;\n} Graph_t, *GraphPtr_t;\n\nvoid SizetListCreate(SizetListNodePtr_t *list)\n{\n    (*list) = NULL;\n}\nvoid SizetListDelete(SizetListNodePtr_t *list)\n{\n    SizetListNodePtr_t current = *list;\n    while (current != NULL)\n    {\n        SizetListNodePtr_t next = current-&gt;next;\n        *list = next;\n        free(current);\n        current = next;\n    }\n    *list = NULL;\n}\nvoid SizetListAdd(SizetListNodePtr_t * list, size_t value)\n{\n    SizetListNodePtr_t newElement = (SizetListNodePtr_t)malloc(sizeof(SizetListNode_t));\n    if (NULL != newElement)\n    {\n        newElement-&gt;nodeIndex = value;\n        newElement-&gt;next = (*list);\n        *list = newElement;\n    }\n}\n\n// This function assumes, that the Graph_t passed in is not initialized.\nvoid GraphCreate(GraphPtr_t graph, size_t nodeCount)\n{\n    graph-&gt;node_array_length = nodeCount;\n    graph-&gt;node_array = (GraphNode_t *)malloc(nodeCount * sizeof(GraphNode_t));\n    if (NULL != graph-&gt;node_array)\n    {\n        for (size_t i = 0; i &lt; nodeCount; ++i)\n        {\n            SizetListCreate(&amp;graph-&gt;node_array[i].connection_list_head);\n        }\n    }\n    else \n    {   // out of memory. Make sure this graph is properly initialized as \"empty\".\n        graph-&gt;node_array_length = 0;\n    }\n}\n\nvoid GraphDestroy(GraphPtr_t graph)\n{\n    assert(NULL != graph);\n    if (NULL != graph)\n    {\n        size_t nodeIndex;\n        for (nodeIndex = 0; nodeIndex &lt; graph-&gt;node_array_length; ++nodeIndex)\n        {\n            SizetListDelete(&amp;graph-&gt;node_array[nodeIndex].connection_list_head);\n        }\n        free(graph-&gt;node_array);\n        graph-&gt;node_array = NULL;\n        graph-&gt;node_array_length = 0;\n    }\n}\n\nvoid GraphConnectNodes(GraphPtr_t graph, size_t fromId, size_t toId)\n{\n    assert(NULL != graph); // would be mean to pass a NULL to use here!\n    if (NULL != graph)\n    {\n        assert(fromId &lt; graph-&gt;node_array_length);\n        assert(toId &lt; graph-&gt;node_array_length);\n        assert(fromId != toId); // Not sure if we could live with nodes connected to themselves...\n\n        SizetListAdd(&amp;graph-&gt;node_array[fromId].connection_list_head, toId);\n    }\n}\n\nvoid GraphConnectNodesTwoWay(GraphPtr_t graph, size_t nodeAId, size_t nodeBId)\n{\n    assert(NULL != graph);\n    if (NULL != graph)\n    {\n        assert(nodeAId &lt; graph-&gt;node_array_length);\n        assert(nodeBId &lt; graph-&gt;node_array_length);\n        assert(nodeAId != nodeBId);\n\n        SizetListAdd(&amp;graph-&gt;node_array[nodeAId].connection_list_head, nodeBId);\n        SizetListAdd(&amp;graph-&gt;node_array[nodeBId].connection_list_head, nodeAId);\n    }\n}\n\nvoid PrintNodeInfo(GraphPtr_t graph, size_t nodeId)\n{\n    assert(NULL != graph);\n    if(NULL != graph)\n    {\n        assert(nodeId &lt; graph-&gt;node_array_length);\n        if ( nodeId &lt; graph-&gt;node_array_length )\n        {\n            SizetListNodePtr_t iter = graph-&gt;node_array[nodeId].connection_list_head;\n            printf(\"This node is connected to: \");\n            while (NULL != iter)\n            {\n                printf(\"node #%d \", iter-&gt;nodeIndex);\n                iter = iter-&gt;next;\n            }\n            printf(\"\\n\");\n        }\n        else\n        {\n            printf(\"Invalid node Id: %d\\n\", nodeId);\n        }\n    }\n    else\n    {\n        printf(\"Not a valid graph!\\n\");\n    }\n}\n\nvoid PrintGraph(GraphPtr_t graph)\n{\n    assert(NULL != graph);\n    if (NULL != graph)\n    {\n        size_t nodeIndex;\n        for (nodeIndex = 0; nodeIndex &lt; graph-&gt;node_array_length; ++nodeIndex)\n        {\n            printf(\"Node %d: \", nodeIndex);\n            PrintNodeInfo(graph, nodeIndex);\n            printf(\"\\n\");\n        }\n    }\n}\n\ntypedef void(*GraphNodeVisitor_t) (GraphPtr_t graph, size_t nodeId);\n\nstatic size_t visitCounter = 0UL;\n\nvoid PrintingAndCountingGraphNodeVisitor(GraphPtr_t graph, size_t nodeId)\n{\n    printf(\"Visiting node %d.\", nodeId);\n    PrintNodeInfo(graph, nodeId);\n    visitCounter++;\n}\n\nvoid DepthFirstVisit(GraphPtr_t graph, uint8_t *visitedFlags, size_t nodeId, GraphNodeVisitor_t visitor)\n{\n    visitedFlags[nodeId] = 1;\n    visitor(graph, nodeId);\n    SizetListNodePtr_t currentEdge = graph-&gt;node_array[nodeId].connection_list_head;\n    for (; NULL != currentEdge; currentEdge = currentEdge-&gt;next)\n    {\n        if (0 == visitedFlags[currentEdge-&gt;nodeIndex])\n        {\n            DepthFirstVisit(graph, visitedFlags, currentEdge-&gt;nodeIndex, visitor);\n        }\n    }\n}\n\nvoid VisitNodesDepthFirst(GraphPtr_t graph, size_t startingNodeId, GraphNodeVisitor_t visitor)\n{\n    assert(NULL != graph);\n    if (NULL != graph)\n    {\n        assert(startingNodeId &lt; graph-&gt;node_array_length);\n        if (startingNodeId &lt; graph-&gt;node_array_length)\n        {\n            uint8_t *visitedFlags = (uint8_t*)malloc(graph-&gt;node_array_length);\n            if (NULL != visitedFlags)\n            {\n                for (size_t i = 0; i &lt; graph-&gt;node_array_length; ++i)\n                {\n                    visitedFlags[i] = 0;\n                }\n\n                size_t currentNodeId = startingNodeId;\n                visitedFlags[currentNodeId] = 1;\n                visitor(graph, currentNodeId);\n\n                SizetListNodePtr_t currentEdge = graph-&gt;node_array[currentNodeId].connection_list_head;\n                for (; NULL != currentEdge; currentEdge = currentEdge-&gt;next)\n                {\n                    DepthFirstVisit(graph, visitedFlags, currentEdge-&gt;nodeIndex, visitor);\n                }\n            }\n            free(visitedFlags);\n        }\n    }\n}\n\nint main(int argc, char* argv[])\n{\n    Graph_t myGraph;\n    int x;\n    int y;\n\n    size_t vertexCount = 0;\n    printf(\"Enter the number of Vertices\\n\");\n    scanf(\"%d\", &amp;vertexCount);\n\n    GraphCreate(&amp;myGraph, vertexCount);\n\n    size_t edgeCount = 0;\n    printf(\"Enter the number of Edges\\n\");\n    scanf(\"%d\", &amp;edgeCount);\n    printf(\"Enter the Edges\\n\");\n    for (size_t i = 0; i&lt;edgeCount; i++)\n    {\n        scanf(\"%d %d\", &amp;x, &amp;y);\n        GraphConnectNodesTwoWay(&amp;myGraph, x, y);\n    }\n    printf(\"\\n\");\n\n    PrintGraph(&amp;myGraph);\n    visitCounter = 0;\n    VisitNodesDepthFirst(&amp;myGraph, 0, PrintingAndCountingGraphNodeVisitor);\n    printf(\"%d nodes out of %d total nodes visited.\\n\", visitCounter, myGraph.node_array_length);\n\n    GraphDestroy(&amp;myGraph);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 27950851, "answer_count": 2, "score": 0, "last_activity_date": 1421284052, "creation_date": 1421261857, "last_edit_date": 1421263916, "question_id": 27950438, "link": "https://stackoverflow.com/questions/27950438/error-implementing-depth-first-search", "title": "Error implementing Depth first search", "body": "<p>I am trying to implement Depth first search in c, I have successfully built the program to make the adjacency list representation for a graph(with help). \nI understand the Pseudo code for Dfs in this manner </p>\n\n<pre><code>procedure DFS(G,v):\n  label v as discovered\n  for all edges from v to w in G.adjacentEdges(v) do\n    if vertex w is not labeled as discovered then\n      recursively call DFS(G,w)  \n</code></pre>\n\n<p>I have built the code that compiles but there seems to be some logical inconsistencies with my code. Please help me out with DFS part. I have properly checked the rest of the code and it works fine without DFS however I have included the rest of the part anyway so as to make sure if the there was improper connection within the code.</p>\n\n<pre><code>When I enter the input \n3\nEnter the number of Edges\n2\nEnter the Edges\n0 1\n1 2\nI get the output as just \n1\n</code></pre>\n\n<p>I have here used examples for DFS where all vertices are connected .\nThis is my code,please check out the void dfs function.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct grnode;\nstruct grconn;\n\nstruct grconn {                 /* Connection to node (linked list) */\n    struct grnode *dest;\n    struct grconn *next;\n};\n\nstruct grnode {                 /* Node in graph */\n    int id;\n    struct grconn *conn;\n};\n\nstruct graph {\n    int nnode;\n    struct grnode *node;\n};\n\n\n/*\n*      Create new connection to given node\n*/\nstruct grconn *grconn_new(struct grnode *nd)\n{\n    struct grconn *c = malloc(sizeof(*c));\n\n    if (c) {\n        c-&gt;dest = nd;\n        c-&gt;next = NULL;\n    }\n\n    return c;\n}\n\n/*\n*      Clean up linked list of connections\n*/\nvoid grconn_delete(struct grconn *c)\n{ \n    while (c) {\n        struct grconn *p = c-&gt;next;\n\n        free(c);\n        c = p;\n    }\n}\n\n/*\n*      Print connectivity list of a node\n*/\nvoid grnode_print(struct grnode *nd)\n{\n    struct grconn *c;\n\n    printf(\"%d:\", nd-&gt;id);\n\n    c = nd-&gt;conn;\n    while (c) {\n        printf(\" %d\", c-&gt;dest-&gt;id);\n        c = c-&gt;next;\n    }\n\n    printf(\"\\n\");\n} \n\n\n\n /*\n *      Create new graph with given number of nodes\n */\nstruct graph *graph_new(int n)\n{\n    struct graph *g = malloc(sizeof(*g));\n    int i;\n\n    if (g == NULL) return g;\n\n    g-&gt;nnode = n;\n    g-&gt;node = malloc(n * sizeof(*g-&gt;node));\n    if (g-&gt;node == NULL) {\n        free(g);\n        return NULL;\n    }\n\n    for (i = 0; i &lt; n; i++) {\n        g-&gt;node[i].id = i;\n        g-&gt;node[i].conn = NULL;\n    }\n\n    return g;\n}\n\n/*\n*      Delete graph and all dependent data\n*/\nvoid graph_delete(struct graph *g)\n{\n    int i;\n\n    for (i = 0; i &lt; g-&gt;nnode; i++) {\n        grconn_delete(g-&gt;node[i].conn);\n    }\n\n    free(g-&gt;node);\n    free(g);\n}\n\n/*\n*      Print connectivity of all nodes in graph\n*/\nvoid graph_print(struct graph *g)\n{\n    int i;\n\n    for (i = 0; i &lt; g-&gt;nnode; i++) {\n        grnode_print(&amp;g-&gt;node[i]);\n    }\n}\n\n/*\n*      Create one-way connection from node a to node b\n*/\nvoid graph_connect(struct graph *g, int a, int b)\n{\n    struct grnode *nd;\n    struct grconn *c;\n\n    if (a &lt; 0 || a &gt;= g-&gt;nnode) return;\n    if (b &lt; 0 || b &gt;= g-&gt;nnode) return;\n\n    nd = &amp;g-&gt;node[a];\n    c = grconn_new(&amp;g-&gt;node[b]);\n\n    c-&gt;next = nd-&gt;conn;\n    nd-&gt;conn = c;\n}\n\n/*\n*      Create two-way connection between nodes a and b\n*/\nvoid graph_connect_both(struct graph *g, int a, int b)\n{\n    graph_connect(g, a, b);\n    graph_connect(g, b, a);\n}\n// The code above is for the functions for the adjacency list \n// so now we have an array of integers which keeps whether we have visited something\nvoid dfs(struct graph *g,int u, int *b,int v,struct grnode *nd)\n{\n    int visited[v];\n    struct grconn *c;\n    visited[u]=1;\n    c = nd-&gt;conn;printf(\"%d\",c-&gt;dest-&gt;id);\n    c=c-&gt;next;\n    while(c)\n    {\n        printf(\"%d\",c-&gt;dest-&gt;id);\n        u=c-&gt;dest-&gt;id;\n        dfs(g,u,b,v,&amp;g-&gt;node[0]);\n    }\n\n}\n\n// The code below is for the representation of something in the form of adjacency list \nint main()\n{\n    printf(\"Enter the number of Vertices\\n\");\n    int i,n,d,x,y;\n    scanf(\"%d\",&amp;n);\n    struct graph *g = graph_new(n);int b[n];\n\n    printf(\"Enter the number of Edges\\n\");\n    scanf(\"%d\",&amp;d);\n    printf(\"Enter the Edges\\n\");\n    for(i=0;i&lt;d;i++)\n    {\n        scanf(\"%d %d\",&amp;x,&amp;y);\n        graph_connect_both(g, x, y);\n    }\n    printf(\"\\n\");\n    for(i=0;i&lt;n;i++)b[i]=0;\n    dfs(g,0, b,n,&amp;g-&gt;node[0]);\n    graph_delete(g);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "hex", "ascii-art"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "edited": false, "score": 0, "creation_date": 1421262085, "post_id": 27950465, "comment_id": 44295975, "body": "That&#39;s actually not changing anything, but thanks for the answer"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "edited": false, "score": 1, "creation_date": 1421262274, "post_id": 27950465, "comment_id": 44296090, "body": "@iPh1ps99 It might not be changing anything, but passing the array as it was to <code>strtok</code> is undefined behavior."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "edited": false, "score": 0, "creation_date": 1421262332, "post_id": 27950465, "comment_id": 44296122, "body": "@iPh1ps99 I don&#39;t see any <code>&#39;\\n&#39;</code> characters in the array except at the end, what is the point of <code>strtok</code> then? is it that the data is incomplete?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "edited": false, "score": 0, "creation_date": 1421262453, "post_id": 27950465, "comment_id": 44296182, "body": "I just, used <code>printf()</code> on it, and it worked perfectly, why are you using <code>strtok()</code> can you please explain?"}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "edited": false, "score": 0, "creation_date": 1421262483, "post_id": 27950465, "comment_id": 44296199, "body": "0x0a is actually &#39;\\n&#39; and there are more than one"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "edited": false, "score": 0, "creation_date": 1421262507, "post_id": 27950465, "comment_id": 44296209, "body": "I know, there is only one of them at the end, Oh nevermind I just saw others, still, why are you using <code>strtok()</code>?"}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "edited": false, "score": 1, "creation_date": 1421262770, "post_id": 27950465, "comment_id": 44296335, "body": "Well my problem is I actually wanted to store all the lines seperated in an array so I can later on center the whole output each line"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1421262765, "last_edit_date": 1421262765, "creation_date": 1421261974, "answer_id": 27950465, "question_id": 27950420, "link": "https://stackoverflow.com/questions/27950420/string-wouldnt-print-itself-in-c/27950465#27950465", "title": "String wouldn&#39;t print itself in C", "body": "<p>There is no <code>'\\0'</code> terminator in your string, just add one more element to the array at it's end <code>0x00</code>, also your <code>strtok()</code> is splitting the lines properly, the problem is you miss the <code>'\\n'</code> character at the end of the line, so just change this</p>\n\n<pre><code>printf(\"%s\", pch);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>printf(\"%s\\n\", pch);\n</code></pre>\n\n<p>but, there is no point in doing that. You can just use <code>printf(\"%s\", pacmanText);</code></p>\n\n<p>So the fundamental problem is <code>strtok()</code> it replaces the delimiter with <code>'\\0'</code> so when you do this</p>\n\n<pre><code>printf(\"%s\", pch);\n</code></pre>\n\n<p>you are not printing the delimiter.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421262648, "post_id": 27950611, "comment_id": 44296278, "body": "This answers the question, I just wish the OP explains the <code>strtok()</code>."}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421263477, "post_id": 27950611, "comment_id": 44296717, "body": "@iharob I answered why I need strtok below in your post!"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "edited": false, "score": 0, "creation_date": 1421263632, "post_id": 27950611, "comment_id": 44296807, "body": "@iPh1ps99 I already read that, and updated my answer. It makes sense, although you could declare the array as 2-dimensional and split each line in an array."}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421265231, "post_id": 27950611, "comment_id": 44297710, "body": "@iharob Yeah you are right but that would put more effort into every single string of those. It&#39;s not just the one with the pacman text in it :)"}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 2, "last_activity_date": 1421262489, "last_edit_date": 1495541134, "creation_date": 1421262489, "answer_id": 27950611, "question_id": 27950420, "link": "https://stackoverflow.com/questions/27950420/string-wouldnt-print-itself-in-c/27950611#27950611", "title": "String wouldn&#39;t print itself in C", "body": "<p>Issues:</p>\n\n<ol>\n<li>You need a null terminating character at the end of <code>pacmanText</code> for the reasons that <a href=\"https://stackoverflow.com/a/27950465/47453\">iharob talks about</a>.</li>\n<li><code>strtok()</code> will modify the string such that the separator character is replaced by a <code>'\\0'</code>. So you never print a newline in the entire program.</li>\n</ol>\n\n<p>Let's fix these bugs:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar pacmanText[] = {\n    0x20, 0x5f, 0x5f, 0x5f, 0x5f, 0x20, 0x20, 0x20, 0x20, 0x20, \n    0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, \n    0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, \n    0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0d, \n    0x0a, 0x7c, 0x20, 0x20, 0x5f, 0x20, 0x5c, 0x20, 0x5f, 0x5f, \n    0x20, 0x5f, 0x20, 0x20, 0x5f, 0x5f, 0x5f, 0x20, 0x5f, 0x20, \n    0x5f, 0x5f, 0x20, 0x5f, 0x5f, 0x5f, 0x20, 0x20, 0x20, 0x5f, \n    0x5f, 0x20, 0x5f, 0x20, 0x5f, 0x20, 0x5f, 0x5f, 0x20, 0x20, \n    0x0d, 0x0a, 0x7c, 0x20, 0x7c, 0x5f, 0x29, 0x20, 0x2f, 0x20, \n    0x5f, 0x60, 0x20, 0x7c, 0x2f, 0x20, 0x5f, 0x5f, 0x7c, 0x20, \n    0x27, 0x5f, 0x20, 0x60, 0x20, 0x5f, 0x20, 0x5c, 0x20, 0x2f, \n    0x20, 0x5f, 0x60, 0x20, 0x7c, 0x20, 0x27, 0x5f, 0x20, 0x5c, \n    0x20, 0x0d, 0x0a, 0x7c, 0x20, 0x20, 0x5f, 0x5f, 0x2f, 0x20, \n    0x28, 0x5f, 0x7c, 0x20, 0x7c, 0x20, 0x28, 0x5f, 0x5f, 0x7c, \n    0x20, 0x7c, 0x20, 0x7c, 0x20, 0x7c, 0x20, 0x7c, 0x20, 0x7c, \n    0x20, 0x28, 0x5f, 0x7c, 0x20, 0x7c, 0x20, 0x7c, 0x20, 0x7c, \n    0x20, 0x7c, 0x0d, 0x0a, 0x7c, 0x5f, 0x7c, 0x20, 0x20, 0x20, \n    0x5c, 0x5f, 0x5f, 0x2c, 0x5f, 0x7c, 0x5c, 0x5f, 0x5f, 0x5f, \n    0x7c, 0x5f, 0x7c, 0x20, 0x7c, 0x5f, 0x7c, 0x20, 0x7c, 0x5f, \n    0x7c, 0x5c, 0x5f, 0x5f, 0x2c, 0x5f, 0x7c, 0x5f, 0x7c, 0x20, \n    0x7c, 0x5f, 0x7c, 0x0d, 0x0a, 0x00\n}; \n\nint main() { \n    char *pch = strtok(pacmanText, \"\\n\"); \n    while (pch != NULL) { \n        printf(\"%s\\n\", pch); \n        pch = strtok(NULL, \"\\n\"); \n    } \n}\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>[1:08pm][wlynch@watermelon /tmp] ./foo\n ____                                  \n|  _ \\ __ _  ___ _ __ ___   __ _ _ __  \n| |_) / _` |/ __| '_ ` _ \\ / _` | '_ \\ \n|  __/ (_| | (__| | | | | | (_| | | | |\n|_|   \\__,_|\\___|_| |_| |_|\\__,_|_| |_|\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 27950611, "answer_count": 2, "score": 0, "last_activity_date": 1421262765, "creation_date": 1421261807, "last_edit_date": 1421261972, "question_id": 27950420, "link": "https://stackoverflow.com/questions/27950420/string-wouldnt-print-itself-in-c", "title": "String wouldn&#39;t print itself in C", "body": "<p>I'm trying to format an ASCII-Art style string with strtok. When I try to run my program through my IDE it is actually printing my string which is in hexadecimal so I don't have to mess with all the backslashes in it. However when I try to run it in console (Ubuntu) it doesn't give anything back. </p>\n\n<pre><code>#include &lt;sys/ioctl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar pacmanText[] = { 0x20, 0x5f, 0x5f, 0x5f, 0x5f, 0x20, 0x20, 0x20, 0x20, 0x20, \n                      0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, \n                      0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, \n                      0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0d, \n                      0x0a, 0x7c, 0x20, 0x20, 0x5f, 0x20, 0x5c, 0x20, 0x5f, 0x5f, \n                      0x20, 0x5f, 0x20, 0x20, 0x5f, 0x5f, 0x5f, 0x20, 0x5f, 0x20, \n                      0x5f, 0x5f, 0x20, 0x5f, 0x5f, 0x5f, 0x20, 0x20, 0x20, 0x5f, \n                      0x5f, 0x20, 0x5f, 0x20, 0x5f, 0x20, 0x5f, 0x5f, 0x20, 0x20, \n                      0x0d, 0x0a, 0x7c, 0x20, 0x7c, 0x5f, 0x29, 0x20, 0x2f, 0x20, \n                      0x5f, 0x60, 0x20, 0x7c, 0x2f, 0x20, 0x5f, 0x5f, 0x7c, 0x20, \n                      0x27, 0x5f, 0x20, 0x60, 0x20, 0x5f, 0x20, 0x5c, 0x20, 0x2f, \n                      0x20, 0x5f, 0x60, 0x20, 0x7c, 0x20, 0x27, 0x5f, 0x20, 0x5c, \n                      0x20, 0x0d, 0x0a, 0x7c, 0x20, 0x20, 0x5f, 0x5f, 0x2f, 0x20, \n                      0x28, 0x5f, 0x7c, 0x20, 0x7c, 0x20, 0x28, 0x5f, 0x5f, 0x7c, \n                      0x20, 0x7c, 0x20, 0x7c, 0x20, 0x7c, 0x20, 0x7c, 0x20, 0x7c, \n                      0x20, 0x28, 0x5f, 0x7c, 0x20, 0x7c, 0x20, 0x7c, 0x20, 0x7c, \n                      0x20, 0x7c, 0x0d, 0x0a, 0x7c, 0x5f, 0x7c, 0x20, 0x20, 0x20, \n                      0x5c, 0x5f, 0x5f, 0x2c, 0x5f, 0x7c, 0x5c, 0x5f, 0x5f, 0x5f, \n                      0x7c, 0x5f, 0x7c, 0x20, 0x7c, 0x5f, 0x7c, 0x20, 0x7c, 0x5f, \n                      0x7c, 0x5c, 0x5f, 0x5f, 0x2c, 0x5f, 0x7c, 0x5f, 0x7c, 0x20, \n                      0x7c, 0x5f, 0x7c, 0x0d, 0x0a\n}; \n\nint main() \n{ \n    struct winsize w; \n    ioctl(0, TIOCGWINSZ, &amp;w); \n\n    char *pch = NULL; \n\n    pch = strtok(pacmanText, \"\\n\"); \n    while (pch != NULL) \n    { \n        printf(\"%s\", pch); \n        fflush(stdout); \n\n        pch = strtok(NULL, \"\\n\"); \n\n    } \n    return 0; \n}\n</code></pre>\n\n<p>So can anyone tell me why it won't print me that string?</p>\n"}, {"tags": ["c", "sockets", "sendto"], "comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1421263020, "post_id": 27950284, "comment_id": 44296463, "body": "I think you need raw sockets for that."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1421264458, "post_id": 27950284, "comment_id": 44297248, "body": "NOTE: <code>bytes_sent+=sizeofpayload;</code> wrong; you should sento()&#39;s return value for that."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1421267409, "post_id": 27950284, "comment_id": 44298751, "body": "You need proper error handling. For example, if <code>sendto()</code> returns -1 you haven&#39;t sent any bytes at all."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 7, "last_activity_date": 1421264165, "creation_date": 1421264165, "answer_id": 27950998, "question_id": 27950284, "link": "https://stackoverflow.com/questions/27950284/change-source-ip-in-socket-sendto/27950998#27950998", "title": "Change Source IP in socket sendto()", "body": "<p>If 192.168.1.1 is a local IP of the sending PC, you can <code>bind()</code> the socket to 192.168.1.1 before than calling <code>sendto()</code>.  Otherwise, you have to use a <code>SOCK_RAW</code> socket (which is restricted to admin users only) and create the IP and UDP headers manually.</p>\n"}], "owner": {"reputation": 512, "user_id": 1372896, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4f9dbd0d5c6afd0730c60e9424069b64?s=128&d=identicon&r=PG", "display_name": "user1372896", "link": "https://stackoverflow.com/users/1372896/user1372896"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3957, "favorite_count": 0, "accepted_answer_id": 27950998, "answer_count": 1, "score": 2, "last_activity_date": 1421264165, "creation_date": 1421261296, "question_id": 27950284, "link": "https://stackoverflow.com/questions/27950284/change-source-ip-in-socket-sendto", "title": "Change Source IP in socket sendto()", "body": "<p>My function currently works correctly, however It's sending from my servers main IP address instead of another one.</p>\n\n<p>Here is the snippet of code:</p>\n\n<pre><code>void *sendpacket(void *par1)\n{\n        running_threads++;\n        int thread_id = (int)par1;\n        unsigned long start_ip = htonl(ntohl(start)+(per_thread*thread_id));\n        unsigned long end = htonl(ntohl(start)+(per_thread*(thread_id+1)));\n        unsigned long w;\n        int y;\n        unsigned char buf[65536];\n        strcpy(buf, \"M-SEARCH * HTTP/1.1\\r\\nHost:239.255.255.250:1900\\r\\nST:ssdp:all\\r\\nMan:\\\"ssdp:discover\\\"\\r\\nMX:3\\r\\n\\r\\n\");\n        int sizeofpayload = 90;\n        int sock;\n        if((sock=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP))&lt;0) {\n                perror(\"cant open socket\");\n                exit(-1);\n        }\n        for(w=ntohl(start_ip);w&lt;htonl(end);w++)\n        {\n                struct sockaddr_in servaddr;\n                bzero(&amp;servaddr, sizeof(servaddr));\n                servaddr.sin_family = AF_INET;\n                servaddr.sin_addr.s_addr=htonl(w);\n                servaddr.sin_port=htons(1900);\n                sendto(sock,(char *)buf,sizeofpayload,0, (struct sockaddr *)&amp;servaddr,sizeof(servaddr));\n                bytes_sent+=sizeofpayload;\n                scanned++;\n                hosts_done++;\n                usleep(sleep_between*1000);\n        }\n        close(sock);\n        running_threads--;\n        return;\n}\n</code></pre>\n\n<p>This sends a packet to the variable w, on port 1900 from my default server IP lets call it 192.168.0.1 however I want it to send the packet from 192.168.1.1 so forging the UDP packet to spoof to another address.</p>\n\n<pre><code>servaddr.sin_addr.s_addr=htonl(w);\n</code></pre>\n\n<p>Handles the destination address but I'm struggling to edit the source IP address.</p>\n"}, {"tags": ["c", "unix", "process"], "comments": [{"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 1, "creation_date": 1421260957, "post_id": 27950145, "comment_id": 44295327, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2530663/printf-anomaly-after-fork\">printf anomaly after &quot;fork()&quot;</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421261247, "post_id": 27950145, "comment_id": 44295506, "body": "could you make this code uglier?"}, {"owner": {"reputation": 241, "user_id": 3669610, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5b100f82e17e0787d03ab8a91ffc297b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Molinger", "link": "https://stackoverflow.com/users/3669610/bogdan-molinger"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421262976, "post_id": 27950145, "comment_id": 44296442, "body": "@iharob Actually I could, but it has been specifically written like this in order to confuse the reader , which it did in my case"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421263745, "post_id": 27950145, "comment_id": 44296860, "body": "what is the purpose? just wasting time?"}, {"owner": {"reputation": 241, "user_id": 3669610, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5b100f82e17e0787d03ab8a91ffc297b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Molinger", "link": "https://stackoverflow.com/users/3669610/bogdan-molinger"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421264587, "post_id": 27950145, "comment_id": 44297329, "body": "@iharob the purpose of what ? The purpose of the question is to understand exactly how the processes interact with each other and why the result is printed in that specific order. If you mean the purpose of the oddly written code , it&#39;s to test the readers awareness. I found this example in a lecture about Operating Systems and I was wondering how exactly it works."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 3669610, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5b100f82e17e0787d03ab8a91ffc297b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Molinger", "link": "https://stackoverflow.com/users/3669610/bogdan-molinger"}, "edited": false, "score": 0, "creation_date": 1421262036, "post_id": 27950437, "comment_id": 44295948, "body": "and why does it print out <code>AB AB C</code> at the end ? Shouldn&#39;t it print out <code>AB AB AC</code> ?"}], "tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": false, "score": 0, "last_activity_date": 1421261856, "creation_date": 1421261856, "answer_id": 27950437, "question_id": 27950145, "link": "https://stackoverflow.com/questions/27950145/unix-process-behavior/27950437#27950437", "title": "UNIX process behavior", "body": "<p>Probable cause of your confusion is that the output of <code>printf(\"A\");</code> is not actually written on the terminal at the moment of the second fork. It is in a memory buffer and as such it is duplicated together with the rest of the process.</p>\n"}, {"comments": [{"owner": {"reputation": 241, "user_id": 3669610, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5b100f82e17e0787d03ab8a91ffc297b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Molinger", "link": "https://stackoverflow.com/users/3669610/bogdan-molinger"}, "edited": false, "score": 0, "creation_date": 1421264394, "post_id": 27950708, "comment_id": 44297217, "body": "Stepens Thank you for the response, it makes sense now. I have only one question left, why does one process only print <code>C</code> ? Is it because the buffer decides to empty itself, or is there some other reason ?"}, {"owner": {"reputation": 1040, "user_id": 2327497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001609f0e9acc8302721fe05fecbc97c?s=128&d=identicon&r=PG", "display_name": "Arlie Stephens", "link": "https://stackoverflow.com/users/2327497/arlie-stephens"}, "reply_to_user": {"reputation": 241, "user_id": 3669610, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5b100f82e17e0787d03ab8a91ffc297b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Molinger", "link": "https://stackoverflow.com/users/3669610/bogdan-molinger"}, "edited": false, "score": 0, "creation_date": 1421271820, "post_id": 27950708, "comment_id": 44301088, "body": "I suspect what you are seeing is process C. In the first variant, it will print AB on one line, then C on another line."}], "tags": [], "owner": {"reputation": 1040, "user_id": 2327497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001609f0e9acc8302721fe05fecbc97c?s=128&d=identicon&r=PG", "display_name": "Arlie Stephens", "link": "https://stackoverflow.com/users/2327497/arlie-stephens"}, "is_accepted": false, "score": 1, "last_activity_date": 1421262905, "creation_date": 1421262905, "answer_id": 27950708, "question_id": 27950145, "link": "https://stackoverflow.com/questions/27950145/unix-process-behavior/27950708#27950708", "title": "UNIX process behavior", "body": "<p>First of all, I believe the result of this sequence is not well defined - it's up to the implementor of printf() and the vagaries of process scheduling. </p>\n\n<p>In general, printf() accumulates characters in a buffer, and prints them when it wants to - except that generally the presence of a newline '\\n' triggers immediate printing. </p>\n\n<p>If the process forks with characters still in the printf() buffer, both the parent and the child process will eventually print those characters. You fork twice, resulting in 4 processes. I'll call the original process G(randparent). G creates P(arent) at the first fork. P has pid1 == 0. Next each process forks again. Let's say G creates A(unt) and P creates C(hild). A and C have pid2 == 0. C also has pid1 == 0. </p>\n\n<p>All of them have either printed the original A\\n, or have A in their printf buffer. </p>\n\n<p>Those with pid1 == 0 then printf B\\n. If there's still an A in the buffer, it comes out as AB\\n\nThose with pid2 == 0 then print C\\n</p>\n\n<p>So the sequence is</p>\n\n<pre><code>G: A(\\n)\nP: A(\\n)B\\n\nA: A(\\n)C\\n\nC: A(\\n)B\\nC\\n\n</code></pre>\n\n<p>The order in which G,P,A, and C run is indeterminate. But the output of any given process appears in the order it's printf()d. It may be interlaced with output from other processes. </p>\n\n<p>If A is printed with \\n, then remove A(\\n) from all the sequences except the grandparent.</p>\n"}], "owner": {"reputation": 241, "user_id": 3669610, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5b100f82e17e0787d03ab8a91ffc297b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Molinger", "link": "https://stackoverflow.com/users/3669610/bogdan-molinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421262905, "creation_date": 1421260827, "last_edit_date": 1421261735, "question_id": 27950145, "link": "https://stackoverflow.com/questions/27950145/unix-process-behavior", "title": "UNIX process behavior", "body": "<p>I am trying to understand the following code:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n   int pid1,pid2;\n   if((pid1=fork())&lt;0)\n   { \n       printf(\"Error bla bla\");exit(1);\n   }\n   else printf(\"A\");\n   if((pid2=fork())&lt;0)\n   {   \n      printf(\"Error bla bla\");exit(2);\n   }\n\n  if(pid1==0)printf(\"B\\n\");\n  if(pid2==0)printf(\"C\\n\");\n  exit(0);\n  return 0;\n}\n</code></pre>\n\n<p>the output I get looks like this : </p>\n\n<pre><code>A  \nAC  \nAB  \nAB  \nC \n</code></pre>\n\n<p>If I change the first print to <code>printf(\"A\\n\");</code> the output is </p>\n\n<pre><code>A  \nC  \nA  \nB  \nB  \nC \n</code></pre>\n\n<p>How do the processes behave in this situation ? I know that the second <code>fork()</code> gets executed in both the parent process and the first child process but why does the output look like this ?<br>\n Also, why does it print the last 3 letters in that specific order ?</p>\n"}, {"tags": ["javascript", "c++", "c", "visual-studio-2010", "emscripten"], "comments": [{"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 1, "creation_date": 1421293274, "post_id": 27950115, "comment_id": 44307581, "body": "Your program is working perfectly for me, printing 99 then 8675309 to the console log in Chrome.  I copied your c++ code above into &quot;squish.cc&quot; and then ran: emcc squish.cc -s EXPORTED_FUNCTIONS=&quot;[&#39;_gsr&#39;,&#39;_main&#39;]&quot;"}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 1, "creation_date": 1421293714, "post_id": 27950115, "comment_id": 44307651, "body": "Next I added <code>&lt;script type=&quot;text&#47;javascript&quot; src=&quot;a.out.js&quot;&gt;&lt;&#47;script&gt;</code> to an html file, as well as your code above in script tags.  Am I doing anything differently from you?"}, {"owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "reply_to_user": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 0, "creation_date": 1421295501, "post_id": 27950115, "comment_id": 44308023, "body": "other than the extension (cpp vs cc), and using visual studio instead of the command line, no. I guess I&#39;ll try using the emscripten command line - and see if I get any different results."}, {"owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "reply_to_user": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 0, "creation_date": 1421296737, "post_id": 27950115, "comment_id": 44308274, "body": "Running it via the command line worked. So, now I know there&#39;s something not set up right in vstudio."}], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "edited": false, "score": 1, "creation_date": 1421280578, "post_id": 27954626, "comment_id": 44304557, "body": "I was under the impression that declaring the method using <code>extern &quot;C&quot;</code> and then declaring it outside, as well as defining the method in the .cpp file, would accomplish that. Or is it the case of the second (c++) declaration, compromising it in some way?"}], "tags": [], "owner": {"reputation": 968, "user_id": 1176841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9f8cd8da97fa3a92e46ebe576e8050?s=128&d=identicon&r=PG", "display_name": "Alon Zakai", "link": "https://stackoverflow.com/users/1176841/alon-zakai"}, "is_accepted": false, "score": 0, "last_activity_date": 1421279521, "creation_date": 1421279521, "answer_id": 27954626, "question_id": 27950115, "link": "https://stackoverflow.com/questions/27950115/emscripten-exported-function-oddities-in-visual-studio/27954626#27954626", "title": "Emscripten exported function oddities in Visual Studio", "body": "<p>Probably the issue here is C++ name mangling. That's a C++ filename, so \"gsr\" turns into something like \"_Z3gsr\". You can avoid that by making it a C file, or using <code>extern \"C\"</code> around that method.</p>\n\n<p>For more see <a href=\"http://kripken.github.io/emscripten-site/docs/getting_started/FAQ.html#why-do-functions-in-my-c-c-source-code-vanish-when-i-compile-to-javascript-and-or-i-get-no-functions-to-process\" rel=\"nofollow\">http://kripken.github.io/emscripten-site/docs/getting_started/FAQ.html#why-do-functions-in-my-c-c-source-code-vanish-when-i-compile-to-javascript-and-or-i-get-no-functions-to-process</a></p>\n"}, {"tags": [], "owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "is_accepted": true, "score": 1, "last_activity_date": 1421299455, "creation_date": 1421299455, "answer_id": 27957288, "question_id": 27950115, "link": "https://stackoverflow.com/questions/27950115/emscripten-exported-function-oddities-in-visual-studio/27957288#27957288", "title": "Emscripten exported function oddities in Visual Studio", "body": "<p>Thanks to Charles Ofria's work in narrowing down the issue, the only real oddity ended up being with the Emscripten Visual Studio plugin. I was on the right track, when I thought that it might just be automatically exporting main - which was correct. The reason it wasn't exporting the other function, was because I put it in the Additional Options, for the Clang/C++ section, instead of the Emcc Linker. </p>\n\n<p>The trouble was, and this is where the \"oddity\" comes in, the Emcc Linker section doesn't appear when you choose <code>Console Application (.js)</code> as the Configuration Type. So, after changing the Target Extension to <code>.html</code> and the Configuration Type to <code>Browser Application (.html)</code> - the Linker section re-appeared, and I was able to put the <code>EXPORTED_FUNCTIONS</code> option, in the correct location.</p>\n\n<p>After building, and copying the output over, both functions were defined, and returned the proper values in the Javascript console. </p>\n"}], "owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 2, "accepted_answer_id": 27957288, "answer_count": 2, "score": 3, "last_activity_date": 1421299455, "creation_date": 1421260708, "last_edit_date": 1421298587, "question_id": 27950115, "link": "https://stackoverflow.com/questions/27950115/emscripten-exported-function-oddities-in-visual-studio", "title": "Emscripten exported function oddities in Visual Studio", "body": "<p>I'm just starting to play around with Emscripten, but I've run into something odd, when trying to export functions, for use in JavaScript. The test project has to do with libsquish, but it's not really relevant for the question, other than the header/code filenames. </p>\n\n<p>So - anyway, simple test. </p>\n\n<p><strong>c/c++</strong></p>\n\n<pre><code>//squish.h\nextern \"C\" int main();\nint main();\n\nextern \"C\" int gsr();\nint gsr();\n\n//squish.cpp\nint main()\n{\n    return 99;\n}\n\nint gsr()\n{\n    //return squish::GetStorageRequirements(width,height,flags);\n    return 8675309;\n}\n</code></pre>\n\n<p><strong>Additional Options/Command Line</strong></p>\n\n<pre><code>-s EXPORTED_FUNCTIONS=\"['_gsr','_main']\" \n</code></pre>\n\n<p><strong>Javascript</strong></p>\n\n<pre><code>main=Module.cwrap('main','number',null);\nconsole.log(main());\n\nGetStorageRequirements = Module.cwrap('gsr', 'number',null);\nconsole.log(GetStorageRequirements());\n</code></pre>\n\n<p><strong>Javascript Console (Chrome)</strong></p>\n\n<pre><code>99\nAssertion failed: Cannot call unknown function gsr (perhaps LLVM optimizations or closure removed it?)\nAssertion failed: Cannot call unknown function gsr (perhaps LLVM optimizations or closure removed it?)\n</code></pre>\n\n<p>And on top of everything else, optimization is disabled (O0).</p>\n\n<p>So, what's the deal here? Same return types, same number of parameters, defined in exactly the same way, with the only difference being the name of the function. Yet one works, and the other is \"unknown\". </p>\n\n<p>The only possible, logical cause is that it's automatically exporting main, and ignoring the EXPORTED_FUNCTIONS all together. But if that's the case, I have no idea why. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 1, "creation_date": 1421260090, "post_id": 27949935, "comment_id": 44294883, "body": "Please read <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1421260480, "post_id": 27949935, "comment_id": 44295091, "body": "You don&#39;t actually have to pass the matrix as triple pointer <code>int ***</code> to the <code>fillMatrix</code> function. You would only have to do that if you want to update the pointer itself, e.g. when you resize the matrix. If you change only the first or secons level contents, passing as <code>int **</code> is good enough."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1421260483, "post_id": 27949935, "comment_id": 44295092, "body": "Compiles without warnings even though as @Gopi wrote, <code>createMatrix()</code> does not always return a value? Or returns <code>NULL</code> <i>before</i> it (doesn&#39;t) <code>free(tab)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421261255, "post_id": 27949966, "comment_id": 44295513, "body": "@iharob Sorry why is this question you answer explains well"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1421260728, "last_edit_date": 1421260728, "creation_date": 1421260151, "answer_id": 27949966, "question_id": 27949935, "link": "https://stackoverflow.com/questions/27949935/filling-2d-array-with-mutiplicatio-table/27949966#27949966", "title": "filling 2d array with mutiplicatio table", "body": "<pre><code>int** createMatrix(int n)\n</code></pre>\n\n<p>You should be returning the double pointer from the function which I see you are not doing.</p>\n\n<pre><code>int** createMatrix(int n)\n{\nint i, a, **tab,x;\ntab=(int**)malloc(n*sizeof(int*));\n// Do your allocations and other stuff\n\nreturn tab;\n}\n</code></pre>\n\n<p>Take care of accessing the elements using triple pointer. Like</p>\n\n<pre><code>(*tab)[i][a] = (a*i);\n</code></pre>\n\n<p>You can get the job done using doule pointers itself.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1421260822, "last_edit_date": 1421260822, "creation_date": 1421260420, "answer_id": 27950036, "question_id": 27949935, "link": "https://stackoverflow.com/questions/27949935/filling-2d-array-with-mutiplicatio-table/27950036#27950036", "title": "filling 2d array with mutiplicatio table", "body": "<blockquote>\n  <p>And by the way, could you tell me why I have to put <code>***</code> in fillMatrix?</p>\n</blockquote>\n\n<p>That is an excellent question. Incidentally, it provides the key to answering the \"why does my program crash\" question. The reason the program crashes is that you are using the matrix incorrectly: you treat it like a 2D array of pointers, rather than a pointer to a 2D array. If you add parentheses, your program would stop crashing:</p>\n\n<pre><code>(*tab)[i][a]=(a*i);\n</code></pre>\n\n<p>Better yet, change the program to take <code>**</code> that it needs:</p>\n\n<pre><code>void fillMatrix(int** tab, int n) {\n    ...\n    tab[i][a]=(a*i); // &lt;&lt;== No asterisk\n}\n...\nfillMatrix(tab, roz); // &lt;&lt;== No ampersand\n</code></pre>\n\n<p>Note: when you compile your program, you should see the \"control reaches the end of non-void function without returning a value\". This is because you forgot to add <code>return tab</code> at the end of the function that creates your matrix.</p>\n\n<p><a href=\"http://ideone.com/B9nnyM\" rel=\"nofollow\">Demo.</a></p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1421260426, "creation_date": 1421260426, "answer_id": 27950040, "question_id": 27949935, "link": "https://stackoverflow.com/questions/27949935/filling-2d-array-with-mutiplicatio-table/27950040#27950040", "title": "filling 2d array with mutiplicatio table", "body": "<p>You asked:</p>\n\n<blockquote>\n  <p>And by the way, could you tell me why I have to put 3x* in fillMatrix?</p>\n</blockquote>\n\n<p>That is not necessary. You could use:</p>\n\n<pre><code>void fillMatrix(int** tab, int n)\n{\n   int i, a;\n   for(i=0;i&lt;n;i++)\n   {    \n      for(a=0;a&lt;n;a++)\n      {\n         tab[i][a]=(a*i);\n      }\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1421261078, "last_edit_date": 1421261078, "creation_date": 1421260683, "answer_id": 27950104, "question_id": 27949935, "link": "https://stackoverflow.com/questions/27949935/filling-2d-array-with-mutiplicatio-table/27950104#27950104", "title": "filling 2d array with mutiplicatio table", "body": "<p>You have several problems</p>\n\n<ol>\n<li><p>Pointeless <code>free(tab)</code> in your <code>createMatrix()</code> function, it's after the <code>return</code> statement, it will never be executed.</p></li>\n<li><p>You free the <code>tab[i]</code> element which is <code>NULL</code> in <code>createMatrix()</code> inside the loop where you <code>malloc</code> the pointers of the array.</p>\n\n<p>What you should do is</p>\n\n<pre><code>free(tab);\n</code></pre>\n\n<p>instead.</p></li>\n<li><p>You never <code>return</code> the <code>malloc</code>ed <code>tab</code>.</p></li>\n<li><p>Your <code>fillMatrix()</code> function is unecessarily taking a <code>int ***</code> triple pointer, you don't need that, if you pass the pointer you directly modify the data.</p></li>\n<li><p>You have an operator precedence issue in <code>fillMatrix()</code></p>\n\n<pre><code>*tab[i][a] = (a*i);\n</code></pre>\n\n<p>this doesn't mean what you think, first <code>[]</code> is applied, and then you dereference it with <code>*</code> which is equivalent to</p>\n\n<pre><code>*(tab[i][a]) = (a * i); -&gt; *(tab[i][a]) -&gt; tab[i][a][0]\n</code></pre>\n\n<p>what you want is </p>\n\n<pre><code>(*tab)[i][a] = a * i;\n</code></pre></li>\n<li><p>You don't <code>free</code> the pointers after printing them.</p></li>\n</ol>\n\n<p>This is your code with all this issues fixed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint **createMatrix(int n)\n{\n    int i, **tab, x;\n\n    tab = malloc(n*sizeof(int*));\n    if (tab == 0)\n        return NULL;\n\n    for (i = 0 ; i &lt; n ; i++)\n    {\n        tab[i] = malloc(n * sizeof(int));\n        if (tab[i] == NULL)\n        {\n            for (x = 0 ; x &lt; i ; x++)\n                free(tab[x]);\n            free(tab);\n\n            return NULL;\n        }\n    }\n\n    return tab;\n}\n\nvoid fillMatrix(int **tab, int n)\n{\n    int i, a;\n    for (i = 0 ; i &lt; n ; i++)\n    {\n        for (a = 0 ; a &lt; n ; a++)\n        {\n            tab[i][a] = (a*i);\n        }\n    }\n}\n\nint main()\n{\n    int roz, **tab, i, x;\n\n    printf(\"size of the array: \\n\");\n    scanf(\"%d\", &amp;roz);\n    tab = createMatrix(roz);\n    if (tab == NULL)\n    {\n        printf(\"error\");\n        return -1;\n    }\n    fillMatrix(tab, roz);\n\n    for (i = 0 ; i &lt; roz ; i++)\n    {\n        printf(\"\\n\");\n        for (x = 0 ; x &lt; roz ; x++)\n            printf(\"%4d \", tab[i][x]);\n        printf(\"\\n\");\n        free(tab[i]);\n    }\n    free(tab);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 4325695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1b6f879defb9df36c38f17edcfc001e?s=128&d=identicon&r=PG&f=1", "display_name": "Otwrate", "link": "https://stackoverflow.com/users/4325695/otwrate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 27950104, "answer_count": 4, "score": 0, "last_activity_date": 1421261078, "creation_date": 1421260042, "last_edit_date": 1421260256, "question_id": 27949935, "link": "https://stackoverflow.com/questions/27949935/filling-2d-array-with-mutiplicatio-table", "title": "filling 2d array with mutiplicatio table", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint** createMatrix(int n)\n{\n   int i, a, **tab,x;\n   tab=(int**)malloc(n*sizeof(int*));\n   if(tab==0)\n   {\n      return NULL;\n      free(tab);\n   }\n   for(i=0;i&lt;n;i++)\n   {\n      tab[i]=(int*)malloc(n*sizeof(int));\n      if(tab[i]==NULL)\n      {\n         for(x=0;x&lt;i;x++)\n         {\n            free(tab[x]);\n         }\n         free(tab[i]);\n         return NULL;\n\n      }\n   }\n}\n\nvoid fillMatrix(int*** tab, int n)\n{\n   int i, a;\n   for(i=0;i&lt;n;i++)\n   {    \n      for(a=0;a&lt;n;a++)\n      {\n         *tab[i][a]=(a*i);\n      }\n   }\n}\n\nint main()\n{\n   int roz, **tab,i,x;\n   printf(\"size of the array: \\n\");\n   scanf(\"%d\",&amp;roz);\n   tab=createMatrix(roz);\n   if(tab==NULL)\n   {\n      printf(\"error\");\n      return -1;\n   }\n   fillMatrix(&amp;tab, roz);\n   for(i=0;i&lt;roz;i++)\n   {\n      printf(\"\\n\");\n      for(x=0;x&lt;roz;x++)\n         printf(\"%d\",tab[i][x]);\n   }\n   return 0;\n}\n</code></pre>\n\n<p>Hi! I need to write a program that makes 2d arrays and I want to fill them with multiplication table. Program compiles without single warning or error, but after puttintan input it crashes. And by the way, could you tell me why I have to put 3x* in fillMatrix?                                             </p>\n"}, {"tags": ["ios", "objective-c", "c", "macros", "cocoapods"], "comments": [{"owner": {"reputation": 2487, "user_id": 1802211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3390f0ba3fd8c1fd92f48f40056fa6?s=128&d=identicon&r=PG", "display_name": "Andrei Shender", "link": "https://stackoverflow.com/users/1802211/andrei-shender"}, "edited": false, "score": 0, "creation_date": 1421405697, "post_id": 27949801, "comment_id": 44355964, "body": "post sources for SomeFile1 and SomeFile2 please"}], "owner": {"reputation": 564, "user_id": 1556578, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/30718af5be19179dc9fe8fc6621a3c71?s=128&d=identicon&r=PG", "display_name": "Victor ", "link": "https://stackoverflow.com/users/1556578/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1471232484, "creation_date": 1421259550, "last_edit_date": 1471232484, "question_id": 27949801, "link": "https://stackoverflow.com/questions/27949801/extadt-in-libextobjc", "title": "EXTADT in libextobjc", "body": "<p>So I'm trying use this library in my iOS app using objective-c:</p>\n\n<p><a href=\"https://github.com/jspahrsummers/libextobjc/blob/master/extobjc/EXTADT.h\" rel=\"nofollow\">https://github.com/jspahrsummers/libextobjc/blob/master/extobjc/EXTADT.h</a></p>\n\n<p>which is included in the <code>libextobjc</code> package, installable via cocoapods.  Say I create some ADT and name this \"SomeADT.h\".  I just basically follow the example in the documentation.</p>\n\n<p>Say I include <code>SomeADT.h</code> in <code>SomeFile1.m</code> and use it.  It compiles fine.</p>\n\n<p>For some reason, however, when I include <code>SomeADT.h</code> also in <code>SomeFile2.m</code>, it gives me an error of this sort:</p>\n\n<blockquote>\n  <p>duplicate symbol _SomeADT in:\n      /Users/.../SomeFile1.o\n      /Users/.../SomeFile2.o ld: 1 duplicate symbol for architecture i386 clang: error: linker command failed with exit code 1 (use -v to\n  see invocation)</p>\n</blockquote>\n\n<p>The <code>SomeADT.h</code> file has <code>ifndef</code> macro etc., why would it still complain about this?  I feel like I'm missing something quite obvious here.  For reference, I don't have a <code>SomeADT.c</code> file, but it doesn't seem necessary.</p>\n"}, {"tags": ["c", "windows", "types", "macros"], "comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 3, "creation_date": 1421258843, "post_id": 27949552, "comment_id": 44294172, "body": "because... microsotft"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1421258866, "post_id": 27949552, "comment_id": 44294193, "body": "kidding aside I suspect there must be historical reasons"}, {"owner": {"reputation": 1000, "user_id": 3303123, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bc5c2f19a9542265608184726c51ef57?s=128&d=identicon&r=PG&f=1", "display_name": "mallardz", "link": "https://stackoverflow.com/users/3303123/mallardz"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1421259863, "post_id": 27949552, "comment_id": 44294751, "body": "@bolov yup it seems so, there are some good answers at the duplicate above."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1421263434, "post_id": 27949552, "comment_id": 44296687, "body": "It is the fundamental way that Microsoft isolates the winapi from the C compiler implementation.  Programs written 30 years ago that used these typedefs, targeting a 16-bit 8086 processor, still compile and run today on a 64-bit Haswell processor."}], "answers": [{"comments": [{"owner": {"reputation": 1000, "user_id": 3303123, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bc5c2f19a9542265608184726c51ef57?s=128&d=identicon&r=PG&f=1", "display_name": "mallardz", "link": "https://stackoverflow.com/users/3303123/mallardz"}, "edited": false, "score": 0, "creation_date": 1421260737, "post_id": 27949796, "comment_id": 44295211, "body": "That&#39;s an interesting theory, I think there might be some truth to it. There&#39;s actually some great answers over at the duplicate."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1421259536, "creation_date": 1421259536, "answer_id": 27949796, "question_id": 27949552, "link": "https://stackoverflow.com/questions/27949552/why-does-microsoft-define-a-type-char-as-char-and-a-macro-const-as-const/27949796#27949796", "title": "Why does Microsoft define a type CHAR as char and a macro CONST as const?", "body": "<p>This is a guess, unsubstantiated by any research.</p>\n\n<p>The fundamental types in the language have all lower case types. It's possible that the standard will start using <code>byte</code> as a type in the future but it is unlikely to use <code>BYTE</code> as a type. Microsoft chose to create several types, using <code>typedef</code> and <code>#define</code>, that made sense to them and programming for their platform easier for some. They also made sure that their types don't conflict with what the standard might use in the future.</p>\n\n<p>If you use <code>BYTE</code> as a type, wouldn't you rather use <code>CHAR</code> as a type instead of <code>char</code>?</p>\n"}], "owner": {"reputation": 1000, "user_id": 3303123, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bc5c2f19a9542265608184726c51ef57?s=128&d=identicon&r=PG&f=1", "display_name": "mallardz", "link": "https://stackoverflow.com/users/3303123/mallardz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "closed_date": 1421271034, "answer_count": 1, "score": 3, "last_activity_date": 1442043315, "creation_date": 1421258715, "last_edit_date": 1442043315, "question_id": 27949552, "link": "https://stackoverflow.com/questions/27949552/why-does-microsoft-define-a-type-char-as-char-and-a-macro-const-as-const", "closed_reason": "Duplicate", "title": "Why does Microsoft define a type CHAR as char and a macro CONST as const?", "body": "<p>As a C beginner, looking through <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx\" rel=\"nofollow\">MSDN's Windows Data Types</a>, I see there are a lot of types that are defined that seem redundant.</p>\n\n<p>For example using <code>typedef</code>:</p>\n\n<ul>\n<li>CHAR -- <code>typedef char CHAR;</code></li>\n<li>FLOAT -- <code>typedef float FLOAT;</code></li>\n</ul>\n\n<p>also as object macros:</p>\n\n<ul>\n<li>CONST -- <code>#define CONST const</code></li>\n</ul>\n\n<p>As I understand it <code>typedef</code> and <code>#define</code> are often used to either clarify programmer intention:</p>\n\n<pre><code>#define BOOL int\n</code></pre>\n\n<p>and/or to shorten type declarations (couldn't think of a good example):</p>\n\n<pre><code>typedef unsigned char BYTE;\n</code></pre>\n\n<p>However I don't understand how there can be any benefit simply replacing char with CHAR.</p>\n\n<p>So why does Microsoft define these types?</p>\n"}, {"tags": ["c", "naming", "libc"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1421258645, "post_id": 27949512, "comment_id": 44294060, "body": "the leading <code>f</code> and the trailing <code>f</code> both have a meaning, but are unrelated."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 10, "creation_date": 1421258742, "post_id": 27949512, "comment_id": 44294108, "body": "First two: &quot;file&quot;. Second two: &quot;format&quot; or &quot;formatted&quot;. <code>fscanf()</code> and <code>fprintf()</code>: both."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1421258758, "post_id": 27949512, "comment_id": 44294122, "body": "if it&#39;s a prefix, then it&#39;s generally &quot;file&quot;. e.g. <code>(f)ile (open)</code>. If the F is postfix, then usually it&#39;s &#39;format&#39;. <code>(print) (f)ormat</code>. <code>(f)ile (print) (f)ormat</code>"}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 3, "creation_date": 1421258819, "post_id": 27949512, "comment_id": 44294153, "body": "Another use of &#39;f&#39; is for <code>float</code> as in <code>ceilf()</code>, <code>round()</code>, ... In <code>math.h</code> functions there are also suffixes to indicate the return type."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1421259313, "post_id": 27949512, "comment_id": 44294428, "body": "Shorthands like these, and the similar <code>s</code> in <code>sprintf</code>, <code>sscanf</code>, and the <code>str</code> prefixes were preferred over full names because initially <a href=\"http://stackoverflow.com/questions/18290165/whats-the-exact-role-of-significant-characters-in-c-variables\">only 6 were significant</a>."}], "answers": [{"comments": [{"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 2, "creation_date": 1421258911, "post_id": 27949592, "comment_id": 44294216, "body": "Don&#39;t forget <code>math.h</code> functions eh :-)"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 6, "last_activity_date": 1421258845, "creation_date": 1421258845, "answer_id": 27949592, "question_id": 27949512, "link": "https://stackoverflow.com/questions/27949512/what-does-f-stand-for-in-c-standard-library-function-names/27949592#27949592", "title": "What does &quot;f&quot; stand for in C standard library function names?", "body": "<p>A leading <code>f</code> stands for <code>file</code>, a trailing one stands for <code>formatted</code>; \nfor example, <code>sscanf</code> is used to scan <code>s</code>trings for values in a pattern as specified by a format, whilst <code>fprintf</code> prints formatted text to a file.</p>\n\n<p>EDIT: Oh, and then there's math functions from <code>math.h</code> that will have type suffixes like <code>atanf</code> for calculating the arcustangens for float values.</p>\n"}, {"tags": [], "owner": {"reputation": 440, "user_id": 3367369, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c546be50a53207b3c9e92b6a0d62d48?s=128&d=identicon&r=PG&f=1", "display_name": "kjschiroo", "link": "https://stackoverflow.com/users/3367369/kjschiroo"}, "is_accepted": false, "score": 4, "last_activity_date": 1421258903, "creation_date": 1421258903, "answer_id": 27949605, "question_id": 27949512, "link": "https://stackoverflow.com/questions/27949512/what-does-f-stand-for-in-c-standard-library-function-names/27949605#27949605", "title": "What does &quot;f&quot; stand for in C standard library function names?", "body": "<p>I am under the impression that for <code>fgets</code> and <code>fopen</code> the <code>f</code> stands for file.</p>\n\n<p>For <code>printf</code> and <code>scanf</code> I believe that the <code>f</code> stands for formatted. This is at least partially supported by the <a href=\"http://en.wikipedia.org/wiki/Scanf_format_string\" rel=\"nofollow\">Wikipedia article on scanf</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 338, "user_id": 5646852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-oCRPt2RBCuM/AAAAAAAAAAI/AAAAAAAAACg/vgj4oF0rgrA/photo.jpg?sz=128", "display_name": "AgentM", "link": "https://stackoverflow.com/users/5646852/agentm"}, "edited": false, "score": 0, "creation_date": 1530789197, "post_id": 27949606, "comment_id": 89361266, "body": "how about fabsf? there is 2 f&#39;s in that and file doesn&#39;t make sense."}], "tags": [], "owner": {"reputation": 7189, "user_id": 2898458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bc37a9f235a6fa726c8047459ecf0a3f?s=128&d=identicon&r=PG", "display_name": "randomusername", "link": "https://stackoverflow.com/users/2898458/randomusername"}, "is_accepted": false, "score": 8, "last_activity_date": 1421258903, "creation_date": 1421258903, "answer_id": 27949606, "question_id": 27949512, "link": "https://stackoverflow.com/questions/27949512/what-does-f-stand-for-in-c-standard-library-function-names/27949606#27949606", "title": "What does &quot;f&quot; stand for in C standard library function names?", "body": "<p>The leading f refers to the type that function operates on:</p>\n\n<ul>\n<li><code>fgets</code>: use <code>gets</code> on a <code>FILE *</code> handle instead of just <code>stdin</code></li>\n<li><code>fopen</code>: open a file, and return it as a <code>FILE *</code> (instead of a file descriptor which the original <code>open</code> does)</li>\n</ul>\n\n<p>The trailing f means that it uses a formatting string:</p>\n\n<ul>\n<li><code>printf</code>: print out according to the format specifier</li>\n<li><code>scanf</code>: read in according to the format</li>\n</ul>\n\n<p>And combined, you get things like:</p>\n\n<ul>\n<li><code>fprintf</code>: print out to a particular <code>FILE *</code> according to the format specifier</li>\n</ul>\n\n<p>When you consider things like the <code>math.h</code> functions, then the trailing f designates that the particular function operates on operands of type <code>float</code> like so:</p>\n\n<ul>\n<li><code>powf</code>: take the exponent of <code>float</code>s</li>\n<li><code>powl</code>: take the exponent of <code>long double</code>s</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 11, "creation_date": 1421259068, "post_id": 27949622, "comment_id": 44294292, "body": "And sometimes it&#39;s just a leading f, like in <code>free</code>, or a trailing one like in <code>sizeof</code>."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1421259366, "post_id": 27949622, "comment_id": 44294469, "body": "I think @Deduplicator &#39;s comment should be another bullet on the answer"}, {"owner": {"reputation": 1480, "user_id": 4376309, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/VcYv5.jpg?s=128&g=1", "display_name": "peacetype", "link": "https://stackoverflow.com/users/4376309/peacetype"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1499927199, "post_id": 27949622, "comment_id": 77118300, "body": "@Deduplicator I think in the case of <code>free</code> and <code>sizeof</code> the f is just part of a word :)"}], "tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": true, "score": 56, "last_activity_date": 1421261248, "last_edit_date": 1421261248, "creation_date": 1421258964, "answer_id": 27949622, "question_id": 27949512, "link": "https://stackoverflow.com/questions/27949512/what-does-f-stand-for-in-c-standard-library-function-names/27949622#27949622", "title": "What does &quot;f&quot; stand for in C standard library function names?", "body": "<p>Your question in general is too general but I can explain a few examples.</p>\n\n<ul>\n<li><a href=\"http://en.cppreference.com/w/c/io/fgets\"><code><b>f</b>gets</code></a>, <a href=\"http://en.cppreference.com/w/c/io/fopen\"><code><b>f</b>open</code></a>, <a href=\"http://en.cppreference.com/w/c/io/fclose\"><code><b>f</b>close</code></a>, \u2026 &mdash; The \u201df\u201c stands for \u201cfile\u201d.  These functions accept or return a <code>FILE *</code> pointer as opposed to a file number as the POSIX functions do.</li>\n<li><a href=\"http://en.cppreference.com/w/c/io/fprintf\"><code>print<b>f</b></code></a>, <a href=\"http://en.cppreference.com/w/c/io/fscanf\"><code>scan<b>f</b></code></a>, \u2026 &mdash; The \u201df\u201c stands for \u201cformatted\u201d.  These functions accept a format string.</li>\n<li><a href=\"http://en.cppreference.com/w/c/io/fprintf\"><code><b>f</b>print<b>f</b></code></a>, <a href=\"http://en.cppreference.com/w/c/io/fscanf\"><code><b>f</b>scan<b>f</b></code></a> &mdash; This is a combination of the above two.</li>\n<li><a href=\"http://en.cppreference.com/w/c/numeric/math/sin\"><code>sin<b>f</b></code></a>, <a href=\"http://en.cppreference.com/w/c/numeric/math/cos\"><code>cos<b>f</b></code></a>, \u2026 &mdash; The \u201cf\u201d stands for <code>float</code> (to distinguish from the <code>double</code> alternatives).  Note that this fits quite nicely with suffixing floating point literals with an <code>f</code> as in <code>1.5f</code>.</li>\n<li>Finally, as Deduplicator <a href=\"https://stackoverflow.com/questions/27949512/what-does-f-stand-for-in-c-standard-library-function-names#comment44294292_27949622\">points out</a>, there are some names such as <a href=\"http://en.cppreference.com/w/c/memory/free\"><code>free</code></a>, <a href=\"http://en.cppreference.com/w/c/numeric/math/floor\"><code>floor</code></a> or <a href=\"http://en.cppreference.com/w/c/io/setbuf\"><code>setbuf</code></a> (\u201cset buffer\u201d) where the \u201cf\u201d simply appears as a natural language character.</li>\n</ul>\n\n<p>The tradition of pre- or suffixing names with single letters that indicate the type of the arguments is a necessity in C that has become obsolete in C++ thanks to overloading.  Actually, overloading in C++ works by the compiler automatically adding those suffixes again under the hood to the generated symbols by a process called <a href=\"https://en.wikipedia.org/wiki/Name_mangling\">name mangling</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "is_accepted": false, "score": 1, "last_activity_date": 1421345795, "creation_date": 1421345795, "answer_id": 27970272, "question_id": 27949512, "link": "https://stackoverflow.com/questions/27949512/what-does-f-stand-for-in-c-standard-library-function-names/27970272#27970272", "title": "What does &quot;f&quot; stand for in C standard library function names?", "body": "<p>In functions from the <code>stdio</code> library, the preceeding <code>f</code> in things like <code>fread</code>, <code>fprintf</code>, <code>fwrite</code>, etc.  stands for 'file'.  The <code>f</code> at the end of functions like <code>printf</code> and <code>scanf</code> stands for 'format'.  Thus printf is FORMATTED printing, meaning that you can use things liek <code>%d</code> and <code>%s</code> in it.</p>\n\n<p>In math functions a suffix of <code>f</code> usually means <code>float</code>.</p>\n"}], "owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9895, "favorite_count": 8, "accepted_answer_id": 27949622, "answer_count": 5, "score": 23, "last_activity_date": 1551712487, "creation_date": 1421258598, "last_edit_date": 1421259418, "question_id": 27949512, "link": "https://stackoverflow.com/questions/27949512/what-does-f-stand-for-in-c-standard-library-function-names", "title": "What does &quot;f&quot; stand for in C standard library function names?", "body": "<p>What does <code>f</code> stand for in the name of C standard library functions? I have noticed that a lot of functions have an <code>f</code> in their name, and this does not really make sense to me.</p>\n\n<p>For example: <code>fgets</code>, <code>fopen</code>, <code>printf</code>, <code>scanf</code>, <code>sqrtf</code> and so on.</p>\n"}, {"tags": ["c", "multithreading", "uefi"], "answers": [{"tags": [], "owner": {"reputation": 744, "user_id": 4180477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9c8a517fe4c12162d355d287c66544?s=128&d=identicon&r=PG", "display_name": "CodeRush", "link": "https://stackoverflow.com/users/4180477/coderush"}, "is_accepted": false, "score": 8, "last_activity_date": 1452476485, "last_edit_date": 1452476485, "creation_date": 1421415803, "answer_id": 27985294, "question_id": 27949362, "link": "https://stackoverflow.com/questions/27949362/create-a-thread-in-uefi/27985294#27985294", "title": "Create a Thread in UEFI", "body": "<p>There is no threads in UEFI right now, but there is a <a href=\"http://wiki.phoenix.com/wiki/index.php/EFI_MP_SERVICES_PROTOCOL\" rel=\"nofollow\">MpService protocol</a>, that can be used for performing tasks on CPU cores other then BSP (BootStrap Processor, the core that runs UEFI itself).\nYou can read more about the same question <a href=\"https://www.mail-archive.com/edk2-devel@lists.sourceforge.net/msg00130.html\" rel=\"nofollow\">here</a>, nearly nothing is changed from that time. <a href=\"http://www.uefi.org/sites/default/files/resources/Plugfest_Multiprocessing-with_UEFI-McDaniel.pdf\" rel=\"nofollow\">This presentation</a> can also be useful, but not all functions mentioned there (sync primitives library, for example) are implemented in any given UEFI firmware.</p>\n"}], "owner": {"reputation": 11531, "user_id": 2558778, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8673885f9ba1bd1424015567ef6833f5?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen", "link": "https://stackoverflow.com/users/2558778/jeroen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1992, "favorite_count": 3, "answer_count": 1, "score": 6, "last_activity_date": 1452476485, "creation_date": 1421258043, "question_id": 27949362, "link": "https://stackoverflow.com/questions/27949362/create-a-thread-in-uefi", "title": "Create a Thread in UEFI", "body": "<p>Is there a way to have a threaded application running on UEFI? I've only found a few mentions of threading in the UEFI specifications, but they didn't really answer my question. </p>\n"}, {"tags": ["c++", "c", "memory", "malloc"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1421256378, "post_id": 27948842, "comment_id": 44292640, "body": "Use <code>std::string</code> and stop worrying about allocating and freeing memory for strings."}, {"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "edited": false, "score": 0, "creation_date": 1421256671, "post_id": 27948842, "comment_id": 44292837, "body": "Is memory really an issue here or you just trying to optimize?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 2, "creation_date": 1421256727, "post_id": 27948842, "comment_id": 44292873, "body": "Allocate whatever memory you need. If you need 3 bytes and you ask for 8, what would you do with the extra 5 bytes? And if you have a legitimate use for those 5 bytes, define a 8 byte structure and go with it."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1421256741, "post_id": 27948842, "comment_id": 44292883, "body": "Whether you allocate the extra bytes and don&#39;t use them or the heap allocator does makes of course <i>absolutely</i> no difference.  Other than to the hapless victim that has to maintain your code some day."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421257675, "post_id": 27948842, "comment_id": 44293458, "body": "@iharob: Probably... because it is equally valid for either. Though that might be coincidence."}, {"owner": {"reputation": 205, "user_id": 3836707, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe509fa4edcad4454b3a17a717790fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3836707/abhishek"}, "edited": false, "score": 0, "creation_date": 1421260131, "post_id": 27948842, "comment_id": 44294909, "body": "@Sorry its on C and not C++. However you could use malloc for both C and C++ and hence had selected C++ as well."}], "answers": [{"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 2, "last_activity_date": 1421259996, "last_edit_date": 1421259996, "creation_date": 1421257531, "answer_id": 27949214, "question_id": 27948842, "link": "https://stackoverflow.com/questions/27948842/malloc-less-than-8-bytes/27949214#27949214", "title": "malloc less than 8 bytes", "body": "<p>Yes, it absolutely makes sense only to ask for what you need.</p>\n\n<p>The allocator (<code>malloc</code>, <code>new</code>, <code>VirtualAlloc</code> or what have you) may always pad your allocations, but that's not your concern, in general.<br>\nAnyway, it may pad bigger allocations more than smaller ones, due to mixing schemes / different pools for different sizes.</p>\n\n<p>Anyway, don't worry over that overhead unless you have lots of allocations, so the allocator-overhead might be the straw that breaks the camel's back.</p>\n\n<p>In addition, the allocator may be changed or simply replaced (for better space/time-performance, debug-experience, fault-tolerance, just because), and you really don't want to leak all the details of how the last allocator worked all over your code.</p>\n\n<p>Especially you don't want to go out of your way to counter any possible improvement resulting from better tuning to your use-case.</p>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 3, "last_activity_date": 1421257696, "creation_date": 1421257696, "answer_id": 27949266, "question_id": 27948842, "link": "https://stackoverflow.com/questions/27948842/malloc-less-than-8-bytes/27949266#27949266", "title": "malloc less than 8 bytes", "body": "<p>Allocate what you need and don't worry about memory usage.  </p>\n\n<p>Smart memory allocators will have separate pools of memory for allocating small chunks.  </p>\n\n<p>For example, a memory allocator may have a separate pool of memory for allocating items smaller than 8 bytes.  </p>\n"}, {"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1421258405, "post_id": 27949402, "comment_id": 44293912, "body": "That&#39;s an important gotcha. And imho a real wart on the language, especially when moving to <code>realloc</code>."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1421260122, "post_id": 27949402, "comment_id": 44294906, "body": "A need to allocate <code>0</code> bytes?  Can you explain why someone would do that intentionally?"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1421261019, "post_id": 27949402, "comment_id": 44295359, "body": "@fiddlingBits, yes I have had cases where I wanted allocate a variable amount of space which under circumstances could be 0 and there you have to be careful: <code>malloc(nbytes)</code> returning <code>NULL</code> is not necessarily an error with <code>nbytes == 0</code> and here one could lead to the other in the following steps so you just decide always to allocate at least one byte -- pure pragmatism"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1421261502, "post_id": 27949402, "comment_id": 44295659, "body": "@IngoLeonhardt Just wondering why you&#39;d go ahead with <code>malloc(0)</code> instead of checking for <code>0</code> first: <code>if(nbytes &gt; 0) malloc(nbytes)</code>.  By the way: Deutschland &#252;ber alles. :-D"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1421320861, "post_id": 27949402, "comment_id": 44317687, "body": "@FiddlingBits -- just because the poiner bein NULL led to confusion afterwards.. Gr&#252;&#223;e aus Offenbach"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1421258204, "last_edit_date": 1495542041, "creation_date": 1421258204, "answer_id": 27949402, "question_id": 27948842, "link": "https://stackoverflow.com/questions/27948842/malloc-less-than-8-bytes/27949402#27949402", "title": "malloc less than 8 bytes", "body": "<p>Best to request the needed size and not a larger amount as well answered by <a href=\"https://stackoverflow.com/a/27949214/2410359\">*Deduplicator</a></p>\n\n<p>There is an important exception should OP find a future need to allocate <code>0</code> bytes.</p>\n\n<p>In that case, allocators like <code>malloc(0)</code> may return <code>NULL</code> or a pointer - either is allowed by the C spec.  This may confuse or break subsequent code that specifically expects one of those two.  So when code needs to allocate <code>0</code> bytes, consider returning <code>malloc(1)</code> or <code>NULL</code> and not leaving it up to <code>malloc(0)</code>.</p>\n"}], "owner": {"reputation": 205, "user_id": 3836707, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe509fa4edcad4454b3a17a717790fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3836707/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "closed_date": 1421262600, "answer_count": 3, "score": 0, "last_activity_date": 1421259996, "creation_date": 1421256337, "question_id": 27948842, "link": "https://stackoverflow.com/questions/27948842/malloc-less-than-8-bytes", "closed_reason": "Opinion-based", "title": "malloc less than 8 bytes", "body": "<p>Does it make sense to malloc say 4 bytes on the heap given that malloc internally would often round this up to a 8 byte boundary on 32 bit systems and 16 for 64-byte systems for its internal use.</p>\n\n<p>I need to allocate a string that stores a single or a double digit number. I thus need a maximum of 3 bytes (2 for the two digits and 1 for the '\\0' character to terminate my string). Wondering if there is any benefit of doing a malloc 3 and if i should instead do a malloc of 8?</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c", "type-conversion", "c99", "memcpy", "memory-alignment"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 4, "creation_date": 1421255948, "post_id": 27948679, "comment_id": 44292354, "body": "You can&#39;t use <code>memcpy</code> to copy an 8-bit value to a 16-bit value. Stop trying."}, {"owner": {"reputation": 861, "user_id": 1681590, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/42686c3aa6908ce6a7b320d2ba1f2dd2?s=128&d=identicon&r=PG", "display_name": "bge0", "link": "https://stackoverflow.com/users/1681590/bge0"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1421256006, "post_id": 27948679, "comment_id": 44292386, "body": "Isn&#39;t it a larger type?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1421256105, "post_id": 27948679, "comment_id": 44292447, "body": "Yes, but <code>memcpy</code> doesn&#39;t do any conversions - it simply copies bytes. The bit pattern of the output will be identical to the input, but in this case you&#39;re using two types that interpret that value differently."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1421256224, "post_id": 27948679, "comment_id": 44292537, "body": "google for &quot;sign extension&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1273, "user_id": 1213694, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/37ad11bbb6c01754238b1dca83a89d77?s=128&d=identicon&r=PG", "display_name": "miluz", "link": "https://stackoverflow.com/users/1213694/miluz"}, "is_accepted": true, "score": 2, "last_activity_date": 1421256785, "last_edit_date": 1421256785, "creation_date": 1421256455, "answer_id": 27948882, "question_id": 27948679, "link": "https://stackoverflow.com/questions/27948679/memcpy-issue-converting-negative-values-from-int8-t-to-int16-t/27948882#27948882", "title": "memcpy issue converting negative values from int8_t to int16_t", "body": "<p>You can look at at it like this:</p>\n\n<p>Suppose \"a\" (16 bit) takes the address (bytes) of 1000, 1001 and it is initialized to 0.\nSuppose \"b\" (8 bit) takes the address of 2000.</p>\n\n<p>Then before:</p>\n\n<pre><code>         00000000 00000000           10000000\naddress: 1000     1001         ...   2000\n</code></pre>\n\n<p>After memcpy</p>\n\n<pre><code>         10000000 00000000           10000000\naddress: 1000     1001         ...   2000\n</code></pre>\n\n<p>Which (assuming the common little endian arch) translates to +128, because the read operation is made on 16 bits and not 8.</p>\n\n<p>A -128 would look like this due to sign extension (little endian):</p>\n\n<pre><code>         10000000 11111111\naddress: 1000     1001\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 1681590, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/42686c3aa6908ce6a7b320d2ba1f2dd2?s=128&d=identicon&r=PG", "display_name": "bge0", "link": "https://stackoverflow.com/users/1681590/bge0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 27948882, "answer_count": 1, "score": 1, "last_activity_date": 1421256986, "creation_date": 1421255728, "question_id": 27948679, "link": "https://stackoverflow.com/questions/27948679/memcpy-issue-converting-negative-values-from-int8-t-to-int16-t", "title": "memcpy issue converting negative values from int8_t to int16_t", "body": "<p>So I'm having a strange issue. What exacly is causing this?</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int16_t a = 0;\n    int8_t b = 0;\n    b = INT8_MIN;\n\n    void* a_ptr = &amp;a;\n    void* b_ptr = &amp;b;\n    memcpy(a_ptr,b_ptr,sizeof(int8_t));\n    printf(\"min b: %d | copied a: %d\", b, a);\n}\n</code></pre>\n\n<p>Result is: min b: -128 | copied a: 128.</p>\n\n<p>All negative values seem to have this issue.\nI want to use memcpy, so what should I do to make this work?</p>\n"}, {"tags": ["c", "arrays", "scanf"], "comments": [{"owner": {"reputation": 31273, "user_id": 3928341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oc0hd.jpg?s=128&g=1", "display_name": "nem035", "link": "https://stackoverflow.com/users/3928341/nem035"}, "edited": false, "score": 1, "creation_date": 1421255654, "post_id": 27948613, "comment_id": 44292173, "body": "The value of <code>i</code> after the loop will hold <code>the number of values inputed - 1</code> so what you need is the value of <code>i+1</code>, once the loop is finished"}, {"owner": {"reputation": 31273, "user_id": 3928341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oc0hd.jpg?s=128&g=1", "display_name": "nem035", "link": "https://stackoverflow.com/users/3928341/nem035"}, "edited": false, "score": 1, "creation_date": 1421255730, "post_id": 27948613, "comment_id": 44292214, "body": "Also, saying <i>it&#39;s not working</i> doesn&#39;t mean much. What <b>exactly</b> isn&#39;t working? What is happening versus what you want to happen?"}, {"owner": {"reputation": 23, "user_id": 4433304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8254691ca01762b3fb2d6eaec9e69dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dana", "link": "https://stackoverflow.com/users/4433304/dana"}, "reply_to_user": {"reputation": 31273, "user_id": 3928341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oc0hd.jpg?s=128&g=1", "display_name": "nem035", "link": "https://stackoverflow.com/users/3928341/nem035"}, "edited": false, "score": 0, "creation_date": 1421255887, "post_id": 27948613, "comment_id": 44292320, "body": "first off, sorry i made a mistake, i wrote 0 instead of &#39;/n&#39;.. The code itself is working, but when i input, lets say, 5 numbers, the program is still waiting for me to enter more and doesn&#39;t end the program. I want it to stop the program no matter how many numbers i input (as long as its less than N)"}, {"owner": {"reputation": 31273, "user_id": 3928341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oc0hd.jpg?s=128&g=1", "display_name": "nem035", "link": "https://stackoverflow.com/users/3928341/nem035"}, "edited": false, "score": 0, "creation_date": 1421256307, "post_id": 27948613, "comment_id": 44292596, "body": "Ok so how will the computer know <b>when</b> to stop? You have to tell it somehow. If you want the computer to stop <code>no matter how many numbers</code> you input, it still needs some sort of a stoping signal. And i can see that you are telling the computer to stop (break out of the loop) when you enter a newline character or (N-1) is reached. So I still don&#39;t see what exactly is your issue. Another thing, if you want your loop to run up to a value <i>less than or equal to N</i>, change your loop condition from <code>i &lt; (N-1)</code> to <code>i &lt; N</code>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1421256942, "post_id": 27948613, "comment_id": 44293020, "body": "You&#39;re reading an integer and then checking to see whether the user entered &quot;10&quot; (ASCII value for newline) rather than whether they actually pressed enter... or would be if you&#39;d used <code>&#39;\\n&#39;</code> instead of <code>&#39;&#47;n&#39;</code>.  Probably not what you want."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421258076, "post_id": 27948613, "comment_id": 44293726, "body": "@Dana can you use <code>fgetc()</code> and <code>ungetc()</code>?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1421258429, "post_id": 27948613, "comment_id": 44293930, "body": "If I understand your question you want to fill your array with the integers which are entered in a line i.e until a newline char is enountered is it so?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421262986, "post_id": 27948613, "comment_id": 44296447, "body": "Note that <code>&#39;&#47;n&#39;</code> is a multicharacter constant, not a newline, and it has an implementation-defined value. Generally, <code>&#39;\\n&#39;</code> (newline) is just a way of writing 10; your code is testing whether the user entered 10, which is a curious &#39;end of list&#39; value. You should be checking the return value from <code>scanf()</code>. If you care about line boundaries, you can&#39;t use <code>scanf()</code> to read numbers, because <code>scanf()</code> doesn&#39;t care about line boundaries. If you need to read and parse lines, use <code>fgets()</code> (or <code>getline()</code>) to read the line and <a href=\"http://stackoverflow.com/q/3975236/\"><code>sscanf()</code> in a loop</a> to parse it."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4433304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8254691ca01762b3fb2d6eaec9e69dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dana", "link": "https://stackoverflow.com/users/4433304/dana"}, "edited": false, "score": 0, "creation_date": 1421256741, "post_id": 27948829, "comment_id": 44292887, "body": "yes, i know we can do that, but sadly the assignment doesnt allow it :("}, {"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "reply_to_user": {"reputation": 23, "user_id": 4433304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8254691ca01762b3fb2d6eaec9e69dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dana", "link": "https://stackoverflow.com/users/4433304/dana"}, "edited": false, "score": 0, "creation_date": 1421257577, "post_id": 27948829, "comment_id": 44293403, "body": "whoever downvoted, write a comment explaining why.."}], "tags": [], "owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "is_accepted": false, "score": -1, "last_activity_date": 1421257353, "last_edit_date": 1421257353, "creation_date": 1421256290, "answer_id": 27948829, "question_id": 27948613, "link": "https://stackoverflow.com/questions/27948613/after-getting-an-input-from-user-in-an-array-of-maximum-size-100-how-to-check-h/27948829#27948829", "title": "after getting an input from user in an array of maximum size 100, how to check how many values user has inputed?", "body": "<p>You could ask the user to enter the number of items that he's willing to enter. Let's say that the max number is <code>N</code> and that the number of items the user wants is <code>n</code>.</p>\n\n<pre><code>puts(\"ENTER NUMBER OF ITEMS\");\nscanf(\"%d\", &amp;n);\n\nn = min(n, N);\nn = max(n, 0);\n\nfor(int i = 0; i &lt; n; i++)\n{   scanf(\"%d\", &amp;a[i]);\n}\n</code></pre>\n\n<p>If the user keeps typing numbers and then hits enter to stop, you can read the input line by line and check that the user has typed something or break out of the loop elsewise.</p>\n\n<pre><code>int i = 0;\nfor(; i &lt; N; i++)\n{   char s[100];\n    gets(s);\n\n    if(strcmp(s, \"\") == 0) break;\n    a[i] = atoi(s);\n}\n</code></pre>\n\n<p>The number of items read is equal to <code>i</code>. This is less safe and you've got to do some error checking if you are willing to use this solution.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421259394, "post_id": 27949560, "comment_id": 44294488, "body": "@chux thanks, done. I am still trying to learn how <code>scanf</code> works, not really my favorite function."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421259382, "last_edit_date": 1421259382, "creation_date": 1421258742, "answer_id": 27949560, "question_id": 27948613, "link": "https://stackoverflow.com/questions/27948613/after-getting-an-input-from-user-in-an-array-of-maximum-size-100-how-to-check-h/27949560#27949560", "title": "after getting an input from user in an array of maximum size 100, how to check how many values user has inputed?", "body": "<p>This isn't working because <code>scanf</code> with the <code>\"%d\"</code> specifier, will skip the <code>\\n</code>, you can consume all white space characters and search for <code>'\\n'</code> with <code>fgetc()</code>, the last white space character which is not <code>'\\n'</code> could be returned to the stream using <code>ungetc()</code> so this program probably will do what you need</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main()\n{\n    int a[100];\n    int i;\n    int result;\n\n    result = 1;\n    i      = 0;\n    while ((i &lt; 100) &amp;&amp; (result == 1))\n    {\n        int chr;\n\n        /* \n         * consume all whitespace characters left by previous scanf, \n         * stop if one of them is '\\n' \n         */\n        while (isspace((chr = fgetc(stdin))) &amp;&amp; (chr != '\\n'));\n        /* found the '\\n', set the flag to exit the loop */\n        if (chr == '\\n')\n            result = -1;\n        else\n        {\n            /* not interesting put back this character for scanf to read it */\n            ungetc(chr, stdin);\n            /* save the result of scanf, that way you can validate input */\n            result = scanf(\"%d\", &amp;a[i]);\n            if (result == 1)\n                i++;\n        }\n    }\n    printf(\"read %d numbers\\n\", i);\n\n    /* print the carachters, this will print in reverse obviously */\n    while (--i &gt;= 0)\n        printf(\"%d\\n\", a[i]);\n\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421263648, "post_id": 27949903, "comment_id": 44296813, "body": "Corner case: Fails when 0 numbers are on the line."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421263842, "post_id": 27949903, "comment_id": 44296910, "body": "Element is not displayed in the case of zero. Newline is output."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421263975, "post_id": 27949903, "comment_id": 44296986, "body": "<code>scanf(&quot;%d&quot;, &amp;v)</code> consumes the <code>&#39;\\n&#39;</code> and then the while loop will not stop until the <i>next</i> <code>&#39;\\n&#39;</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421265025, "post_id": 27949903, "comment_id": 44297595, "body": "But I think it is whether such things desired by the OP is unclear."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1421259922, "creation_date": 1421259922, "answer_id": 27949903, "question_id": 27948613, "link": "https://stackoverflow.com/questions/27948613/after-getting-an-input-from-user-in-an-array-of-maximum-size-100-how-to-check-h/27949903#27949903", "title": "after getting an input from user in an array of maximum size 100, how to check how many values user has inputed?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\n#define N 100\n\nint main(void){\n    int v, a[N];\n    int i, n=0, stop = 0;\n    int ch, res;\n\n    while(!stop &amp;&amp; EOF != (res = scanf(\"%d\", &amp;v))){\n        if(res == 1){\n            a[n++] = v;\n            if(n == N)\n                break;\n            while(isspace(ch = getchar())){\n                if(ch == '\\n'){\n                    stop = 1;\n                    break;\n                }\n            }\n            ungetc(ch, stdin);\n        } else {\n            printf(\"invalid input!\\n\");\n            while(getchar() != '\\n');\n        }\n    }\n    for(i = 0; i &lt; n; ++i)\n        printf(\"%d \", a[i]);\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4433304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8254691ca01762b3fb2d6eaec9e69dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dana", "link": "https://stackoverflow.com/users/4433304/dana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1421259111, "answer_count": 3, "score": 2, "last_activity_date": 1421259922, "creation_date": 1421255481, "last_edit_date": 1421255742, "question_id": 27948613, "link": "https://stackoverflow.com/questions/27948613/after-getting-an-input-from-user-in-an-array-of-maximum-size-100-how-to-check-h", "closed_reason": "Duplicate", "title": "after getting an input from user in an array of maximum size 100, how to check how many values user has inputed?", "body": "<p>I have a restriction on the maximum size of an array (N), and I want to ask the user to input an array of numbers that can be less than or equal to N. How do I find how many values the user has inputted? </p>\n\n<p>This is what I have, and it's not working.</p>\n\n<p>(basically, i'm telling the program to stop counting \"n\" once the user hits enter) (and ofcourse i initialized n=0)</p>\n\n<pre><code>for(i=0;i&lt;(N-1);i++)\n{\n\n    scanf(\"%d\",&amp;a[i]);\n    n++;\n\n    if(a[i]=='/n'){break;}\n}\n</code></pre>\n\n<p>any help is appreciated! thanks!</p>\n"}, {"tags": ["c++", "c", "yacc", "lex"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 2, "creation_date": 1421255195, "post_id": 27948489, "comment_id": 44291903, "body": "Are you sure you aren&#39;t missing any <code>;</code> in other nearby chunks of code? This particular piece looks ok."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1421256652, "post_id": 27948489, "comment_id": 44292824, "body": "If the error occured in C compilation phase, you could try to look at the file generated by win_flex, to clearly know where C found it, and from them come back to the lex source."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1421257224, "post_id": 27948489, "comment_id": 44293164, "body": "The statement(s) should begin on the same line as the pattern. Are you sure that you defined the <i>yystype</i> in your bison fie and include the header generated ?"}], "answers": [{"tags": [], "owner": {"reputation": 2576, "user_id": 3447742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dceb051c6027a6f6931fc0b0f7d86fe1?s=128&d=identicon&r=PG&f=1", "display_name": "gornvix", "link": "https://stackoverflow.com/users/3447742/gornvix"}, "is_accepted": true, "score": 0, "last_activity_date": 1421258957, "creation_date": 1421258957, "answer_id": 27949618, "question_id": 27948489, "link": "https://stackoverflow.com/questions/27948489/compilation-error-how-to-parse-variable-name-using-lex-yacc/27949618#27949618", "title": "Compilation error. How to parse variable name using lex / yacc?", "body": "<p>I found the solution to this problem.  The member of yylval must correspond to the union declaration as follows, in the lex file:</p>\n\n<pre><code>[a-zA-Z][a-zA-Z0-9]* { yylval-&gt;str = _strdup(yytext); return id; }\n</code></pre>\n\n<p>...and in the yacc file:</p>\n\n<pre><code>%union\n{\n    char *str;\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 2576, "user_id": 3447742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dceb051c6027a6f6931fc0b0f7d86fe1?s=128&d=identicon&r=PG&f=1", "display_name": "gornvix", "link": "https://stackoverflow.com/users/3447742/gornvix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "accepted_answer_id": 27949618, "answer_count": 1, "score": 0, "last_activity_date": 1421258957, "creation_date": 1421255075, "last_edit_date": 1421256608, "question_id": 27948489, "link": "https://stackoverflow.com/questions/27948489/compilation-error-how-to-parse-variable-name-using-lex-yacc", "title": "Compilation error. How to parse variable name using lex / yacc?", "body": "<p>In my lex file I have:</p>\n\n<pre><code>[a-zA-Z][a-zA-Z0-9]*\n{\n    yylval.val = _strdup(yytext); // &lt;- error here\n    yylval.length = yylen;\n    return id;\n}\n</code></pre>\n\n<p>... for parsing text such as \"myid2\"</p>\n\n<p>This is causing a compilation error:</p>\n\n<pre><code>error C2143: syntax error : missing ';' before '='\n</code></pre>\n\n<p>How to do this correctly so that I can pass on the id as a character string (char *) in the yacc file?</p>\n\n<p>I am using win_flex and win_bison.</p>\n\n<p>UPDATE:\nI put the statements on one line in the lex file:</p>\n\n<pre><code>[a-zA-Z][a-zA-Z0-9]* { yylval.val = _strdup(yytext); yylval.length = yylen; return id; }\n</code></pre>\n\n<p>Now I get the compilation errors:</p>\n\n<pre><code>error C2039: 'length' : is not a member of 'YYSTYPE'\nerror C2039: 'val' : is not a member of 'YYSTYPE'\nerror C2065: 'yylen' : undeclared identifier\n</code></pre>\n"}, {"tags": ["c", "embedded-linux"], "answers": [{"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 2, "last_activity_date": 1421255074, "creation_date": 1421255074, "answer_id": 27948487, "question_id": 27948375, "link": "https://stackoverflow.com/questions/27948375/growing-the-text-segment-vs-growing-the-data-segment/27948487#27948487", "title": "Growing the text segment vs. growing the data segment", "body": "<p>The code-segment is read-only, demand-loaded (it can be paged directly from disk) and can be shared.</p>\n\n<p>In contrast, the data-segment is writable (backed by paging-file or RAM) and therefore not shared.</p>\n\n<p>Thus, if you have the choice between growing either one, prefer a smaller data-segment, as the same amount of space in the data-segment in general consumes more resources, even if your program does not run multiple times simultaneously.</p>\n\n<p>There's an additional benefit to marking everything you can <code>const</code>:<br>\nA failure to respect the fact that the data should not change is more likely to be caught by the compiler, and if not later by the runtime (memory-protection), instead of silently corrupting your state.</p>\n"}], "owner": {"reputation": 115, "user_id": 4454330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1ee1777f607aa2f76edfacb480f7e5?s=128&d=identicon&r=PG&f=1", "display_name": "nxbit", "link": "https://stackoverflow.com/users/4454330/nxbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 27948487, "answer_count": 1, "score": 1, "last_activity_date": 1421255111, "creation_date": 1421254698, "last_edit_date": 1421255111, "question_id": 27948375, "link": "https://stackoverflow.com/questions/27948375/growing-the-text-segment-vs-growing-the-data-segment", "title": "Growing the text segment vs. growing the data segment", "body": "<p>When given the choice to either grow the text segment or the data segment, what set of criteria can determine the choice?</p>\n\n<p>I'm not aware of the differences and impact at either compile- or execution-time given different configurations (dynamically/statically linked, PIC, non-PIC, etc.). So what I'm asking is what the trade-offs involved are.</p>\n\n<p>More concrete: It grows at compile-time through use of a static char array, basically making it either const or not, and constness apparently decides whether it ends up in text or not. Why is that?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1353, "user_id": 1391612, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/74e7122ff13df5a56743a0b5dac8c5df?s=128&d=identicon&r=PG", "display_name": "Quaker", "link": "https://stackoverflow.com/users/1391612/quaker"}, "edited": false, "score": 1, "creation_date": 1421255175, "post_id": 27948369, "comment_id": 44291889, "body": "Note that <code>else { return 0; }</code> is redundant since if first <code>scanf</code> returns anything but <code>1</code> you&#39;ll never get to the <code>while</code> loop and thus you&#39;ll get to <code>return 0;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1421255355, "post_id": 27948541, "comment_id": 44291993, "body": "I think the <code>printf</code> line should be outside the <code>do-while</code> loop."}, {"owner": {"reputation": 1353, "user_id": 1391612, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/74e7122ff13df5a56743a0b5dac8c5df?s=128&d=identicon&r=PG", "display_name": "Quaker", "link": "https://stackoverflow.com/users/1391612/quaker"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1421255411, "post_id": 27948541, "comment_id": 44292028, "body": "@RSahu you&#39;re correct, but that&#39;ll break the demand to print nothing if a letter appears among the integers."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": -1, "last_activity_date": 1421257068, "last_edit_date": 1421257068, "creation_date": 1421255230, "answer_id": 27948541, "question_id": 27948369, "link": "https://stackoverflow.com/questions/27948369/c-program-that-prints-out-highest-number/27948541#27948541", "title": "C program that prints out highest number", "body": "<p>If the input is a number, <code>scanf</code> will return <code>1</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int max, x;\n    int result;\n\n    if (scanf(\"%d\", &amp;max) != 1)\n        return -1;\n    x = max;\n    do {\n        result = scanf(\"%d[^\\n]\", &amp;x);\n        if ((result != EOF) &amp;&amp; (result != 1))\n            return 0;\n        else if ((result != EOF) &amp;&amp; (x &gt; max))\n            max = x;\n    } while (result != EOF);\n\n    printf(\"\\n\\nMaximum Input : %d\\n\", max);\n    return 0;\n}\n</code></pre>\n\n<p>the previous program will stop when there is invalid input, i.e. something that is not a number.</p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 1, "last_activity_date": 1421256301, "creation_date": 1421256301, "answer_id": 27948830, "question_id": 27948369, "link": "https://stackoverflow.com/questions/27948369/c-program-that-prints-out-highest-number/27948830#27948830", "title": "C program that prints out highest number", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    int res, max, x;\n\n    if(1 != scanf(\"%d\", &amp;max))\n        return -1;\n\n    while(EOF != (res = scanf(\"%d\", &amp;x))){\n        if(res != 1)\n            return -1;\n        if (x &gt; max){\n            max = x;\n        }\n    }\n    printf(\"%d\\n\", max);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1421256950, "creation_date": 1421256950, "answer_id": 27949037, "question_id": 27948369, "link": "https://stackoverflow.com/questions/27948369/c-program-that-prints-out-highest-number/27949037#27949037", "title": "C program that prints out highest number", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   int max, x;\n\n   if (scanf(\"%d\", &amp;max) != 1)\n   {\n      // If there is no number, exit the program.\n      return 0;\n   }\n\n   while ( scanf(\"%d\", &amp;x) == 1 )\n   {\n      if (x &gt; max)\n      {\n         max=x;\n      }\n   }\n\n   // If we came to the EOF, we didn't see any bad input.\n   if ( feof(stdin) )\n   {\n      printf(\"Max: %d\\n\", max);\n   }\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4454336, "user_type": "registered", "profile_image": "https://graph.facebook.com/564238771/picture?type=large", "display_name": "Gudbjartur123", "link": "https://stackoverflow.com/users/4454336/gudbjartur123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 27948830, "answer_count": 3, "score": 0, "last_activity_date": 1421257068, "creation_date": 1421254684, "last_edit_date": 1421254818, "question_id": 27948369, "link": "https://stackoverflow.com/questions/27948369/c-program-that-prints-out-highest-number", "title": "C program that prints out highest number", "body": "<p>So I need to make a C program that prints out the highest number inputed. \nIf the input is empty it shouldn't print anything. \nIf the input includes anything else than a number it shouldn't print anything. \nexample: \nIf the input is 1 2 3 2 1 it should print out 3.\nIf the input is 1 2 a 2 1 it shouldn't print out anything. </p>\n\n<p>This is what i got so far: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int res, max, x;\n\n    res = scanf(\"%d\", &amp;max);\n    if (res == 1) {\n        while(res != EOF)\n        {\n            res = scanf(\"%d\", &amp;x);\n            if (x &gt; max)\n            {\n                max=x;\n            }\n        }\n        printf(\"%d\", max);\n    } else {\n        return 0;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>So my question is, how do i make it print out nothing if it contains a letter like in the example above.\nThank in advance!</p>\n"}, {"tags": ["c", "matlab", "visual-studio-2012", "mex", "lnk2019"], "answers": [{"comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1421255297, "post_id": 27948429, "comment_id": 44291960, "body": "this. See <code>mex --help</code>, literally says <code>MEX [option1 ... optionN] sourcefile1 [... sourcefileN]</code>"}], "tags": [], "owner": {"reputation": 2554, "user_id": 1344896, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6c7bfde4fd31547c3bb0efe7a0b471bf?s=128&d=identicon&r=PG", "display_name": "Guy L", "link": "https://stackoverflow.com/users/1344896/guy-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1421254893, "creation_date": 1421254893, "answer_id": 27948429, "question_id": 27948350, "link": "https://stackoverflow.com/questions/27948350/error-lnk-2019-unresolved-external-symbol-matlab/27948429#27948429", "title": "error LNK 2019: unresolved external symbol (Matlab)", "body": "<p>looks like that the problem is that you're only compiling only file1 which has calls to function from file2. So, you need them both in the compiling order. </p>\n\n<p>what about</p>\n\n<pre><code>mex 'T:\\Matlab\\SRVF_FDA\\DynamicProgrammingQ2.c' **SECOND FILE**?\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4454292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8e9747e9ee55a1ff160ab934d322bd4?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Tichenor", "link": "https://stackoverflow.com/users/4454292/matthew-tichenor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 27948429, "answer_count": 1, "score": 2, "last_activity_date": 1421254893, "creation_date": 1421254610, "question_id": 27948350, "link": "https://stackoverflow.com/questions/27948350/error-lnk-2019-unresolved-external-symbol-matlab", "title": "error LNK 2019: unresolved external symbol (Matlab)", "body": "<p>I'm trying to build a C mex file in Matlab. The C compiler is Microsoft Visual C++ 2012, and I'm using Matlab R2014a. Here's the exact command I used:</p>\n\n<pre><code>mex 'T:\\Matlab\\SRVF_FDA\\DynamicProgrammingQ2.c'\n</code></pre>\n\n<p>Here's the error message:\nBuilding with 'Microsoft Visual C++ 2012 (C)'.</p>\n\n<pre><code>&gt; Building with 'Microsoft Visual C++ 2012 (C)'. Error using mex   \n&gt; Creating library DynamicProgrammingQ2.lib and object\n&gt; DynamicProgrammingQ2.exp DynamicProgrammingQ2.obj : error LNK2019:\n&gt; unresolved external symbol dp_costs referenced in function mexFunction\n&gt; DynamicProgrammingQ2.obj : error LNK2019: unresolved external symbol\n&gt; dp_build_gamma referenced in function mexFunction\n&gt; DynamicProgrammingQ2.obj : error LNK2019: unresolved external symbol\n&gt; dp_all_indexes referenced in function mexFunction\n&gt; DynamicProgrammingQ2.mexw64 : fatal error LNK1120: 3 unresolved\n&gt; externals\n</code></pre>\n\n<p>Here's the C code:</p>\n\n<pre><code>#include \"mex.h\"\n#include &lt;math.h&gt;\n#include \"dp_grid.h\"\n\n\n/* Signature:\n * function [G T] = dp_mex( Q1, T1, Q2, T2, tv1, tv2 )\n * Arguments are checked in dp.m, not here.  */\nvoid mexFunction(int nlhs, mxArray *plhs[ ],int nrhs, const mxArray *prhs[ ]){\n  double *Q1 = 0;\n  double *T1 = 0;\n  double *Q2 = 0;\n  double *T2 = 0;\n  double *lam1 = 0;\n  double lam;\n  int nsamps1;\n  int nsamps2;\n  double *tv1 = 0;\n  double *tv2 = 0;\n  int *idxv1 = 0;\n  int *idxv2 = 0;\n  int ntv1;\n  int ntv2;\n  double *G = 0;\n  double *T = 0;\n  int Gsize;\n  int dim = 0;\n  double *E = 0; /* E[ntv1*j+i] = cost of best path to (tv1[i],tv2[j]) */\n  int *P = 0; /* P[ntv1*j+i] = predecessor of (tv1[i],tv2[j]) along best path */\n  double m, rootm;\n  int sr, sc; /* source row and column index */\n  int tr, tc; /* target row and column index */\n  int Galloc_size;\n  double *pres;\n\n  /* [G T dist] = dp_mex( Q1, T1, Q2, T2, tv1, tv2 ); */\n  Q1 = mxGetPr( prhs[0] );\n  T1 = mxGetPr( prhs[1] );\n  Q2 = mxGetPr( prhs[2] );\n  T2 = mxGetPr( prhs[3] );\n  tv1 = mxGetPr( prhs[4] );\n  tv2 = mxGetPr( prhs[5] );\n  lam1 = mxGetPr( prhs[6] );\n  lam = *lam1;\n\n  dim = mxGetM( prhs[0] );\n  nsamps1 = mxGetN( prhs[1] ); /* = columns(T1) = columns(Q1)+1 */\n  nsamps2 = mxGetN( prhs[3] ); /* = columns(T2) = columns(Q2)+1 */\n  ntv1 = mxGetN( prhs[4] );\n  ntv2 = mxGetN( prhs[5] );\n  Galloc_size = ntv1&gt;ntv2 ? ntv1 : ntv2;\n\n\n  if ( !(idxv1=(int*)mxMalloc(ntv1*sizeof(int))) )\n  {\n    mexErrMsgIdAndTxt( \"dp:AllocFailed\", \"failed to allocate idxv1\" );\n    goto cleanup;\n  }\n  if ( !(idxv2=(int*)mxMalloc(ntv2*sizeof(int))) )\n  {\n    mexErrMsgIdAndTxt( \"dp:AllocFailed\", \"failed to allocate idxv2\" );\n    goto cleanup;\n  }\n  if ( !(E=(double*)mxMalloc(ntv1*ntv2*sizeof(double))) )\n  { \n    mexErrMsgIdAndTxt( \"dp:AllocFailed\", \"failed to allocate E\" );\n    goto cleanup;\n  }\n  if ( !(P=(int*)mxCalloc(ntv1*ntv2,sizeof(int))) )\n  { \n    mexErrMsgIdAndTxt( \"dp:AllocFailed\", \"failed to allocate P\" );\n    goto cleanup;\n  }\n  if ( !(plhs[0]=mxCreateDoubleMatrix(1,Galloc_size,mxREAL)) )\n  { \n    mexErrMsgIdAndTxt( \"dp:AllocFailed\", \"mxCreateDoubleMatrix failed\" );\n    goto cleanup;\n  }\n  if ( !(plhs[1]=mxCreateDoubleMatrix(1,Galloc_size,mxREAL)) )\n  { \n    mexErrMsgIdAndTxt( \"dp:AllocFailed\", \"mxCreateDoubleMatrix failed\" );\n    goto cleanup;\n  }\n  if ( !(plhs[2]=mxCreateDoubleScalar(0.0)) )\n  { \n    mexErrMsgIdAndTxt( \"dp:AllocFailed\", \"mxCreateDoubleScalar failed\" );\n    goto cleanup;\n  }\n\n  G = mxGetPr( plhs[0] );\n  T = mxGetPr( plhs[1] );\n  pres = mxGetPr( plhs[2] );\n\n  /* dp_costs() needs indexes for gridpoints precomputed */\n  dp_all_indexes( T1, nsamps1, tv1, ntv1, idxv1 );\n  dp_all_indexes( T2, nsamps2, tv2, ntv2, idxv2 );\n\n  /* Compute cost of best path from (0,0) to every other grid point */\n  *pres = dp_costs( Q1, T1, nsamps1, Q2, T2, nsamps2, \n    dim, tv1, idxv1, ntv1, tv2, idxv2, ntv2, E, P, lam );\n\n  /* Reconstruct best path from (0,0) to (1,1) */\n  Gsize = dp_build_gamma( P, tv1, ntv1, tv2, ntv2, G, T );\n  mxSetN( plhs[0], Gsize );\n  mxSetN( plhs[1], Gsize );\n\ncleanup:\n  if ( idxv1 ) mxFree( idxv1 );\n  if ( idxv2 ) mxFree( idxv2 );\n  if ( E ) mxFree( E );\n  if ( P ) mxFree( P );\n}\n</code></pre>\n\n<p>Here's the header files:</p>\n\n<pre><code>#ifndef DP_GRID_H\n#define DP_GRID_H 1\n\n/**\n * Computes weights of all edges in the DP matching graph, \n * which is needed for the Floyd-Warshall all-pairs shortest-path \n * algorithm.\n *\n * The matrix of edge weights E must be allocated ahead of time by \n * the caller.  E is an ntv1 x ntv2 x ntv1 x ntv2 matrix.  If i and k \n * are column indices and j and l are row indices, then the weight of the \n * edge from gridpoint (tv1[i],tv2[j]) to gridpoint (tv1[k],tv2[l]) is \n * stored in E(j,i,l,k) when this function returns.\n * Mapping: \n *  (j,i,l,k) :--&gt; j*ntv1*ntv2*ntv1 + \n *                 i*ntv2*ntv1 +\n *                 l*ntv1 + \n *                 k\n *\n * \\param Q1 values of the first SRVF\n * \\param T1 changepoint parameters of the first SRVF\n * \\param nsamps1 the length of T1\n * \\param Q2 values of the second SRVF\n * \\param T2 changepoint parameters of the second SRVF\n * \\param nsamps2 the length of T2\n * \\param dim dimension of the ambient space\n * \\param tv1 the Q1 (column) parameter values for the DP grid\n * \\param idxv1 Q1 indexes for tv1, as computed by \\c dp_all_indexes()\n * \\param ntv1 the length of tv1\n * \\param tv2 the Q2 (row) parameter values for the DP grid\n * \\param idxv2 Q2 indexes for tv2, as computed by \\c dp_all_indexes()\n * \\param ntv2 the length of tv2\n * \\param E [output] pointer to the edge weight matrix.  Must already be \n *          allocated, with size (ntv1*ntv2)^2.\n */\nvoid dp_all_edge_weights( \n  double *Q1, double *T1, int nsamps1,\n  double *Q2, double *T2, int nsamps2,\n  int dim, \n  double *tv1, int *idxv1, int ntv1, \n  double *tv2, int *idxv2, int ntv2, \n  double *W, double lam );\n\n/**\n * Computes cost of best path from (0,0) to all other gridpoints.\n *\n * \\param Q1 values of the first SRVF\n * \\param T1 changepoint parameters of the first SRVF\n * \\param nsamps1 the length of T1\n * \\param Q2 values of the second SRVF\n * \\param T2 changepoint parameters of the second SRVF\n * \\param nsamps2 the length of T2\n * \\param dim dimension of the ambient space\n * \\param tv1 the Q1 (column) parameter values for the DP grid\n * \\param idxv1 Q1 indexes for tv1, as computed by \\c dp_all_indexes()\n * \\param ntv1 the length of tv1\n * \\param tv2 the Q2 (row) parameter values for the DP grid\n * \\param idxv2 Q2 indexes for tv2, as computed by \\c dp_all_indexes()\n * \\param ntv2 the length of tv2\n * \\param E [output] on return, E[ntv2*i+j] holds the cost of the best \n *        path from (0,0) to (tv1[i],tv2[j]) in the grid.\n * \\param P [output] on return, P[ntv2*i+j] holds the predecessor of \n *        (tv1[i],tv2[j]).  If predecessor is (tv1[k],tv2[l]), then \n *        P[ntv2*i+j] = k*ntv2+l.\n * \\return E[ntv1*ntv2-1], the cost of the best path from (tv1[0],tv2[0]) \n *         to (tv1[ntv1-1],tv2[ntv2-1]).\n */\ndouble dp_costs(\n  double *Q1, double *T1, int nsamps1, \n  double *Q2, double *T2, int nsamps2,\n  int dim, \n  double *tv1, int *idxv1, int ntv1, \n  double *tv2, int *idxv2, int ntv2, \n  double *E, int *P, double lam );\n\n/**\n * Computes the weight of the edge from (a,c) to (b,d) in the DP grid.\n *\n * \\param Q1 values of the first SRVF\n * \\param T1 changepoint parameters of the first SRVF\n * \\param nsamps1 the length of T1\n * \\param Q2 values of the second SRVF\n * \\param T2 changepoint parameters of the second SRVF\n * \\param nsamps2 the length of T2\n * \\param dim dimension of the ambient space\n * \\param a source Q1 parameter\n * \\param b target Q1 parameter\n * \\param c source Q2 parameter\n * \\param d target Q2 parameter\n * \\param aidx index such that Q1[aidx] &lt;= a &lt; Q1[aidx+1]\n * \\param cidx index such that Q2[cidx] &lt;= c &lt; Q2[cidx+1]\n */\n  double dp_edge_weight(\n  double *Q1, double *T1, int nsamps1, \n  double *Q2, double *T2, int nsamps2,\n  int dim,\n  double a, double b, \n  double c, double d, \n  int aidx, int cidx, double lam );\n\n\n/**\n * Given predecessor table P, builds the piecewise-linear reparametrization \n * function gamma.\n *\n * G and T must already be allocated with size max(ntv1,ntv2).  The actual \n * number of points on gamma will be the return value.\n *\n * \\param P P[ntv2*i+j] holds the predecessor of (tv1[i],tv2[j]).  If \n *        predecessor is (tv1[k],tv2[l]), then P[ntv2*i+j] = k*ntv2+l.\n * \\param tv1 the Q1 (column) parameter values for the DP grid\n * \\param ntv1 the length of tv1\n * \\param tv2 the Q2 (row) parameter values for the DP grid\n * \\param ntv2 the length of tv2\n * \\param G [output] reparametrization function values\n * \\param T [output] reparametrization changepoint parameters\n * \\return the length of G (same as length of T).\n */\nint dp_build_gamma( \n  int *P, \n  double *tv1, int ntv1, \n  double *tv2, int ntv2,\n  double *G, double *T );\n\n/**\n * Given t in [0,1], return the integer i such that t lies in the interval \n * [T[i],T[i+1]) (or returns n-2 if t==T[n-1]).\n *\n * \\param T an increasing sequence\n * \\param n the length of T\n * \\param t the parameter value to lookup ( T[0] &lt;= t &lt;= T[n-1] ).\n * \\return the integer i such that t lies in the interval [T[i],T[i+1]) \n *         (or n-2 if t==T[n-1]).\n */\nint dp_lookup( double *T, int n, double t );\n\n/**\n * 1-D table lookup for a sorted array of query points.\n *\n * Given a partition p and an increasing sequence of numbers tv between \n * p[0] and p[np-1], computes the sequence of indexes idxv such that for \n * i=0,...,ntv-1, p[idxv[i]] &lt;= tv[i] &lt; p[idxv[i]+1].  If tv[i]==p[np-1], \n * then idxv[i] will be set to np-2.\n *\n * \\param p an increasing sequence (the table)\n * \\param np the length of \\a p\n * \\param tv an increasing sequence (the query points)\n * \\param ntv the length of \\a tv\n * \\param idxv [output] pre-allocated array of \\a ntv ints to hold result\n */\nvoid dp_all_indexes( double *p, int np, double *tv, int ntv, int *idxv );\n\n#endif /* DP_GRID_H */\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#ifndef DP_NBHD_H\n#define DP_NBHD_H 1\n\n#ifndef DP_NBHD_DIM\n#define DP_NBHD_DIM 7 \n#endif\n\n#if DP_NBHD_DIM == 17\nint dp_nbhd[][2] = {\n{  1,  1 }, {  1,  2 }, {  1,  3 }, {  1,  4 }, {  1,  5 }, {  1,  6 }, {  1,  7 }, {  1,  8 }, {  1,  9 }, {  1, 10 }, \n{  1, 11 }, {  1, 12 }, {  1, 13 }, {  1, 14 }, {  1, 15 }, {  1, 16 }, {  1, 17 }, {  2,  1 }, {  2,  3 }, {  2,  5 }, \n{  2,  7 }, {  2,  9 }, {  2, 11 }, {  2, 13 }, {  2, 15 }, {  2, 17 }, {  3,  1 }, {  3,  2 }, {  3,  4 }, {  3,  5 }, \n{  3,  7 }, {  3,  8 }, {  3, 10 }, {  3, 11 }, {  3, 13 }, {  3, 14 }, {  3, 16 }, {  3, 17 }, {  4,  1 }, {  4,  3 }, \n{  4,  5 }, {  4,  7 }, {  4,  9 }, {  4, 11 }, {  4, 13 }, {  4, 15 }, {  4, 17 }, {  5,  1 }, {  5,  2 }, {  5,  3 }, \n{  5,  4 }, {  5,  6 }, {  5,  7 }, {  5,  8 }, {  5,  9 }, {  5, 11 }, {  5, 12 }, {  5, 13 }, {  5, 14 }, {  5, 16 }, \n{  5, 17 }, {  6,  1 }, {  6,  5 }, {  6,  7 }, {  6, 11 }, {  6, 13 }, {  6, 17 }, {  7,  1 }, {  7,  2 }, {  7,  3 }, \n{  7,  4 }, {  7,  5 }, {  7,  6 }, {  7,  8 }, {  7,  9 }, {  7, 10 }, {  7, 11 }, {  7, 12 }, {  7, 13 }, {  7, 15 }, \n{  7, 16 }, {  7, 17 }, {  8,  1 }, {  8,  3 }, {  8,  5 }, {  8,  7 }, {  8,  9 }, {  8, 11 }, {  8, 13 }, {  8, 15 }, \n{  8, 17 }, {  9,  1 }, {  9,  2 }, {  9,  4 }, {  9,  5 }, {  9,  7 }, {  9,  8 }, {  9, 10 }, {  9, 11 }, {  9, 13 }, \n{  9, 14 }, {  9, 16 }, {  9, 17 }, { 10,  1 }, { 10,  3 }, { 10,  7 }, { 10,  9 }, { 10, 11 }, { 10, 13 }, { 10, 17 }, \n{ 11,  1 }, { 11,  2 }, { 11,  3 }, { 11,  4 }, { 11,  5 }, { 11,  6 }, { 11,  7 }, { 11,  8 }, { 11,  9 }, { 11, 10 }, \n{ 11, 12 }, { 11, 13 }, { 11, 14 }, { 11, 15 }, { 11, 16 }, { 11, 17 }, { 12,  1 }, { 12,  5 }, { 12,  7 }, { 12, 11 }, \n{ 12, 13 }, { 12, 17 }, { 13,  1 }, { 13,  2 }, { 13,  3 }, { 13,  4 }, { 13,  5 }, { 13,  6 }, { 13,  7 }, { 13,  8 }, \n{ 13,  9 }, { 13, 10 }, { 13, 11 }, { 13, 12 }, { 13, 14 }, { 13, 15 }, { 13, 16 }, { 13, 17 }, { 14,  1 }, { 14,  3 }, \n{ 14,  5 }, { 14,  9 }, { 14, 11 }, { 14, 13 }, { 14, 15 }, { 14, 17 }, { 15,  1 }, { 15,  2 }, { 15,  4 }, { 15,  7 }, \n{ 15,  8 }, { 15, 11 }, { 15, 13 }, { 15, 14 }, { 15, 16 }, { 15, 17 }, { 16,  1 }, { 16,  3 }, { 16,  5 }, { 16,  7 }, \n{ 16,  9 }, { 16, 11 }, { 16, 13 }, { 16, 15 }, { 16, 17 }, { 17,  1 }, { 17,  2 }, { 17,  3 }, { 17,  4 }, { 17,  5 }, \n{ 17,  6 }, { 17,  7 }, { 17,  8 }, { 17,  9 }, { 17, 10 }, { 17, 11 }, { 17, 12 }, { 17, 13 }, { 17, 14 }, { 17, 15 }, \n{ 17, 16 }, };\n#define DP_NBHD_COUNT 191\n\n#elif DP_NBHD_DIM == 12\nint dp_nbhd[][2] = {\n{  1,  1 }, {  1,  2 }, {  1,  3 }, {  1,  4 }, {  1,  5 }, {  1,  6 }, {  1,  7 }, {  1,  8 }, {  1,  9 }, {  1, 10 }, \n{  1, 11 }, {  1, 12 }, {  2,  1 }, {  2,  3 }, {  2,  5 }, {  2,  7 }, {  2,  9 }, {  2, 11 }, {  3,  1 }, {  3,  2 }, \n{  3,  4 }, {  3,  5 }, {  3,  7 }, {  3,  8 }, {  3, 10 }, {  3, 11 }, {  4,  1 }, {  4,  3 }, {  4,  5 }, {  4,  7 }, \n{  4,  9 }, {  4, 11 }, {  5,  1 }, {  5,  2 }, {  5,  3 }, {  5,  4 }, {  5,  6 }, {  5,  7 }, {  5,  8 }, {  5,  9 }, \n{  5, 11 }, {  5, 12 }, {  6,  1 }, {  6,  5 }, {  6,  7 }, {  6, 11 }, {  7,  1 }, {  7,  2 }, {  7,  3 }, {  7,  4 }, \n{  7,  5 }, {  7,  6 }, {  7,  8 }, {  7,  9 }, {  7, 10 }, {  7, 11 }, {  7, 12 }, {  8,  1 }, {  8,  3 }, {  8,  5 }, \n{  8,  7 }, {  8,  9 }, {  8, 11 }, {  9,  1 }, {  9,  2 }, {  9,  4 }, {  9,  5 }, {  9,  7 }, {  9,  8 }, {  9, 10 }, \n{  9, 11 }, { 10,  1 }, { 10,  3 }, { 10,  7 }, { 10,  9 }, { 10, 11 }, { 11,  1 }, { 11,  2 }, { 11,  3 }, { 11,  4 }, \n{ 11,  5 }, { 11,  6 }, { 11,  7 }, { 11,  8 }, { 11,  9 }, { 11, 10 }, { 11, 12 }, { 12,  1 }, { 12,  5 }, { 12,  7 }, \n{ 12, 11 } };\n#define DP_NBHD_COUNT 91\n\n#elif DP_NBHD_DIM == 10\n\nint dp_nbhd[][2] = {\n{  1,  1 }, {  1,  2 }, {  1,  3 }, {  1,  4 }, {  1,  5 }, {  1,  6 }, {  1,  7 }, {  1,  8 }, {  1,  9 }, {  1, 10 }, \n{  2,  1 }, {  2,  3 }, {  2,  5 }, {  2,  7 }, {  2,  9 }, {  3,  1 }, {  3,  2 }, {  3,  4 }, {  3,  5 }, {  3,  7 }, \n{  3,  8 }, {  3, 10 }, {  4,  1 }, {  4,  3 }, {  4,  5 }, {  4,  7 }, {  4,  9 }, {  5,  1 }, {  5,  2 }, {  5,  3 }, \n{  5,  4 }, {  5,  6 }, {  5,  7 }, {  5,  8 }, {  5,  9 }, {  6,  1 }, {  6,  5 }, {  6,  7 }, {  7,  1 }, {  7,  2 }, \n{  7,  3 }, {  7,  4 }, {  7,  5 }, {  7,  6 }, {  7,  8 }, {  7,  9 }, {  7, 10 }, {  8,  1 }, {  8,  3 }, {  8,  5 }, \n{  8,  7 }, {  8,  9 }, {  9,  1 }, {  9,  2 }, {  9,  4 }, {  9,  5 }, {  9,  7 }, {  9,  8 }, {  9, 10 }, { 10,  1 }, \n{ 10,  3 }, { 10,  7 }, { 10,  9 } };\n#define DP_NBHD_COUNT 63\n\n#elif DP_NBHD_DIM == 7\n\nint dp_nbhd[][2] = {\n{  1,  1 }, {  1,  2 }, {  1,  3 }, {  1,  4 }, {  1,  5 }, {  1,  6 }, {  1,  7 }, {  2,  1 }, {  2,  3 }, {  2,  5 }, \n{  2,  7 }, {  3,  1 }, {  3,  2 }, {  3,  4 }, {  3,  5 }, {  3,  7 }, {  4,  1 }, {  4,  3 }, {  4,  5 }, {  4,  7 }, \n{  5,  1 }, {  5,  2 }, {  5,  3 }, {  5,  4 }, {  5,  6 }, {  5,  7 }, {  6,  1 }, {  6,  5 }, {  6,  7 }, {  7,  1 }, \n{  7,  2 }, {  7,  3 }, {  7,  4 }, {  7,  5 }, {  7,  6 }, };\n#define DP_NBHD_COUNT 35\n\n#else\nint dp_nbhd[][2] = {\n{  1,  1 }, {  1,  2 }, {  1,  3 }, {  1,  4 }, {  1,  5 }, {  1,  6 }, {  2,  1 }, {  2,  3 }, {  2,  5 }, {  3,  1 }, \n{  3,  2 }, {  3,  4 }, {  3,  5 }, {  4,  1 }, {  4,  3 }, {  4,  5 }, {  5,  1 }, {  5,  2 }, {  5,  3 }, {  5,  4 }, \n{  5,  6 }, {  6,  1 }, {  6,  5 }, };\n#define DP_NBHD_COUNT 23\n\n#endif  /* DP_NBHD_DIM */\n\n#endif  /* DP_NBHD_H */\n</code></pre>\n\n<p>Also here is one more C file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include \"dp_nbhd.h\"\n#include \"dp_grid.h\"\n\n\nvoid dp_all_edge_weights( \n  double *Q1, double *T1, int nsamps1,\n  double *Q2, double *T2, int nsamps2,\n  int dim, \n  double *tv1, int *idxv1, int ntv1, \n  double *tv2, int *idxv2, int ntv2, \n  double *W, double lam )\n{\n  int sr, sc;  /* source row and column */\n  int tr, tc;  /* target row and column */\n  int l1, l2, l3;  /* for multidimensional array mapping */\n  int i;\n\n  for ( i=0; i&lt;ntv1*ntv2*ntv1*ntv2; W[i++]=1e6 );\n\n  /* W is a ntv2 x ntv1 x ntv2 x ntv1 array.  \n   * Weight of edge from (tv1[i],tv2[j]) to (tv1[k],tv2[l]) \n   * (Cartesian coordinates) is in grid(j,i,l,k).\n   * Mapping: \n   *  (j,i,l,k) :--&gt; j*ntv1*ntv2*ntv1 + \n   *                 i*ntv2*ntv1 +\n   *                 l*ntv1 + \n   *                 k\n   */\n  l1 = ntv1 * ntv2 * ntv1;\n  l2 = ntv2 * ntv1;\n  l3 = ntv1;\n\n  for ( tr=1; tr&lt;ntv2; ++tr )\n  {\n    for ( tc=1; tc&lt;ntv1; ++tc )\n    {\n      for ( i=0; i&lt;DP_NBHD_COUNT; ++i )\n      {\n        sr = tr - dp_nbhd[i][0];\n        sc = tc - dp_nbhd[i][1];\n\n        if ( sr &lt; 0 || sc &lt; 0 ) continue;\n\n        /* grid(sr,sc,tr,tc) */\n        W[sr*l1+sc*l2+tr*l3+tc] = \n         dp_edge_weight( Q1, T1, nsamps1, Q2, T2, nsamps2, dim, \n           tv1[sc], tv1[tc], tv2[sr], tv2[tr], idxv1[sc], idxv2[sr], lam );\n\n        /*\n        printf( \"(%0.2f,%0.2f) --&gt; (%0.2f,%0.2f) = %0.2f\\n\", \n          a, c, b, d, grid[sr*l1+sc*l2+tr*l3+tc] );\n        */\n      }\n    }\n  }\n}\n\n\ndouble dp_costs(\n  double *Q1, double *T1, int nsamps1, \n  double *Q2, double *T2, int nsamps2,\n  int dim, \n  double *tv1, int *idxv1, int ntv1, \n  double *tv2, int *idxv2, int ntv2, \n  double *E, int *P, double lam )\n{\n  int sr, sc;  /* source row and column */\n  int tr, tc;  /* target row and column */\n  double w, cand_cost;\n  int i;\n\n  E[0] = 0.0;\n  for ( i=1; i&lt;ntv1; E[i++]=1e9 );\n  for ( i=1; i&lt;ntv2; E[ntv1*i++]=1e9 );\n\n  for ( tr=1; tr&lt;ntv2; ++tr )\n  {\n    for ( tc=1; tc&lt;ntv1; ++tc )\n    {\n      E[ntv1*tr + tc] = 1e9;\n\n      for ( i=0; i&lt;DP_NBHD_COUNT; ++i )\n      {\n        sr = tr - dp_nbhd[i][0];\n        sc = tc - dp_nbhd[i][1];\n\n        if ( sr &lt; 0 || sc &lt; 0 ) continue;\n\n        w = dp_edge_weight( Q1, T1, nsamps1, Q2, T2, nsamps2, dim, \n          tv1[sc], tv1[tc], tv2[sr], tv2[tr], idxv1[sc], idxv2[sr], lam );\n\n        cand_cost = E[ntv1*sr+sc] + w;\n        if ( cand_cost &lt; E[ntv1*tr+tc] )\n        {\n          E[ntv1*tr+tc] = cand_cost;\n          P[ntv1*tr+tc] = ntv1*sr + sc;\n        }\n      }\n    }\n  }\n\n  /*\n  for ( tr=1; tr&lt;ntv2; ++tr )\n  {\n    for ( tc=1; tc&lt;ntv1; ++tc )\n    {\n      printf( \"E[%d,%d]=%0.3f, \", tr, tc, E[ntv1*tr+tc] );\n      printf( \"P[%d,%d]=(%d,%d)\\n\", tr, tc, P[ntv1*tr+tc]/ntv1,\n                                            P[ntv1*tr+tc]%ntv1 );\n    }\n  }\n  */\n\n  return E[ntv1*ntv2-1];\n}\n\n\ndouble dp_edge_weight(\n  double *Q1, double *T1, int nsamps1, \n  double *Q2, double *T2, int nsamps2,\n  int dim, \n  double a, double b, \n  double c, double d,\n  int aidx, int cidx, double lam )\n{\n  double res = 0.0;\n  int Q1idx, Q2idx;\n  int Q1idxnext, Q2idxnext;\n  double t1, t2;\n  double t1next, t2next;\n  double t1nextcand1, t1nextcand2;\n  double slope, rslope;\n  double dq, dqi;\n  int i;\n\n  Q1idx = aidx; /*dp_lookup( T1, nsamps1, a );*/\n  Q2idx = cidx; /*dp_lookup( T2, nsamps2, c );*/\n\n  t1 = a;\n  t2 = c;\n\n  slope = (d-c)/(b-a);\n  rslope = sqrt( slope );\n\n  while( t1 &lt; b &amp;&amp; t2 &lt; d )\n  {\n    if ( Q1idx &gt; nsamps1-2 || Q2idx &gt; nsamps2-2 ) break;\n\n    /* Find endpoint of current interval */\n    t1nextcand1 = T1[Q1idx+1];\n    t1nextcand2 = a + (T2[Q2idx+1]-c) / slope;\n\n    if ( fabs(t1nextcand1-t1nextcand2) &lt; 1e-6 )\n    {\n      t1next = T1[Q1idx+1];\n      t2next = T2[Q2idx+1];\n      Q1idxnext = Q1idx+1;\n      Q2idxnext = Q2idx+1;\n    } else if ( t1nextcand1 &lt; t1nextcand2 ) {\n      t1next = t1nextcand1;\n      t2next = c + slope * (t1next - a);\n      Q1idxnext = Q1idx+1;\n      Q2idxnext = Q2idx;\n    } else {\n      t1next = t1nextcand2;\n      t2next = T2[Q2idx+1];\n      Q1idxnext = Q1idx;\n      Q2idxnext = Q2idx+1;\n    }\n\n    if ( t1next &gt; b ) t1next = b;\n    if ( t2next &gt; d ) t2next = d;\n\n    /* Get contribution for current interval */\n    dq = 0.0;\n    for ( i=0; i&lt;dim; ++i )\n    {\n      /* Q1 and Q2 are column-major arrays! */\n      dqi = Q1[Q1idx*dim+i] - rslope * Q2[Q2idx*dim+i];\n      dq += dqi*dqi + lam*(1-rslope)*(1-rslope);\n    }\n    res += (t1next - t1) * dq;\n\n    t1 = t1next;\n    t2 = t2next;\n    Q1idx = Q1idxnext;\n    Q2idx = Q2idxnext;\n  }\n\n  return res;\n}\n\n\nint dp_build_gamma( \n  int *P, \n  double *tv1, int ntv1, \n  double *tv2, int ntv2,\n  double *G, double *T )\n{\n  int sr, sc;\n  int tr, tc;\n  int p, i;\n  int npts;  /* result = length of Tg */\n\n  /* Dry run first, to determine length of Tg */\n  npts = 1;\n  tr = ntv2-1;\n  tc = ntv1-1;\n  while( tr &gt; 0 &amp;&amp; tc &gt; 0 )\n  {\n    p = P[tr*ntv1+tc];\n    tr = p / ntv1;\n    tc = p % ntv1;\n    ++npts;\n  }\n\n  G[npts-1] = tv2[ntv2-1];\n  T[npts-1] = tv1[ntv1-1];\n\n  tr = ntv2-1;\n  tc = ntv1-1;\n  i = npts-2;\n  while( tr &gt; 0 &amp;&amp; tc &gt; 0 )\n  {\n    p = P[tr*ntv1+tc];\n    sr = p / ntv1;\n    sc = p % ntv1;\n\n    G[i] = tv2[sr];\n    T[i] = tv1[sc];\n\n    tr = sr;\n    tc = sc;\n    --i;\n  }\n\n  return npts;\n}\n\n\nint dp_lookup( double *T, int n, double t )\n{\n  int l, m, r;\n\n  if ( t &lt; T[n-1] )\n  {\n    l=0;\n    r=n;\n    m=(l+r)/2;\n\n    /* TODO: are these comparisons OK??? */\n    while( 1 )\n    {\n      if ( t &gt;= T[m+1] )\n        l = m;\n      else if ( t &lt; T[m] )\n        r = m;\n      else\n        break;\n\n      m = (r+l)/2;\n    }\n\n    return m;\n  } else {\n    return n-2;\n  }\n}\n\nvoid dp_all_indexes( double *p, int np, double *tv, int ntv, int *idxv )\n{\n  int pi;\n  int i;\n\n  pi=0;\n  for ( i=0; i&lt;ntv; ++i )\n  {\n    while ( pi &lt; np-2 &amp;&amp; tv[i] &gt;= p[pi+1] ) ++pi;\n    idxv[i] = pi;\n  }\n}\n</code></pre>\n\n<p>The directory that contains the files is on the search path. How can I get past this error and build the C mex file?</p>\n"}, {"tags": ["c", "arrays", "string", "file", "hashtable"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1421254591, "post_id": 27948307, "comment_id": 44291528, "body": "I don&#39;t think you succeeded getting the names, because you are reading from the file twice. Apart from the fact that <code>fscanf(ptr_file, &quot;%s&quot;, &amp;name);</code> appears to be wrong since you do <code>fgets(name, 100, ptr_file)</code>"}, {"owner": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 0, "creation_date": 1421254678, "post_id": 27948307, "comment_id": 44291598, "body": "yes you can . but keep in mind at one value there could be more than one words ie collision in hash. To reduce the chances of collision you could use a better hash function or if you want to use this only you will have to have the option to store more than one word at a value in hash array"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1422394932, "post_id": 27948307, "comment_id": 44730195, "body": "Note: With hashing, typically data gets better dispersal if <code>n</code> is prime in <code>value%n</code>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4454314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64091f83ce9c6fcf853db289aac0c424?s=128&d=identicon&r=PG&f=1", "display_name": "Amanda", "link": "https://stackoverflow.com/users/4454314/amanda"}, "edited": false, "score": 0, "creation_date": 1421261160, "post_id": 27948411, "comment_id": 44295450, "body": "@iharob So if I made this block of code into a function that returns value the value wouldn&#39;t be right? DO I only need one fgets or fscanf and not both? Would I put the hashtable into the while loop so that as it reads the name it calculates the value and places it?"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1421254821, "creation_date": 1421254821, "answer_id": 27948411, "question_id": 27948307, "link": "https://stackoverflow.com/questions/27948307/implementing-a-hash-table-using-c/27948411#27948411", "title": "Implementing a Hash Table using C", "body": "<p>No, you can't, because you'll have collisions, and you'll thus have to account for multiple values to a single hash. Generally, your hashing is not really a wise implementation -- why do you limit the range of values to 50? Is memory really really sparse, so you can't have a bigger dictionary than 50 pointers?</p>\n\n<p>I recommend using an existing C string hash table implementation, like <a href=\"http://www.w3.org/2001/06/blindfold/api/hashmap_8c-source.html\" rel=\"nofollow\">this one</a> from 2001.</p>\n"}, {"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 0, "last_activity_date": 1421264955, "creation_date": 1421264955, "answer_id": 27951205, "question_id": 27948307, "link": "https://stackoverflow.com/questions/27948307/implementing-a-hash-table-using-c/27951205#27951205", "title": "Implementing a Hash Table using C", "body": "<p>In general, you will have hash collisions and you will need to find a way to handle that. The two main ways of handling that situation are as follows:</p>\n\n<ol>\n<li><p>If the hash table entry is taken, you use the next entry, and iterate until you find an empty entry. When looking things up, you need to do similarly. This is nice and simple for adding things to the hash table, but makes removing things tricky.</p></li>\n<li><p>Use hash buckets. Each hash table entry is a linked list of entries with the same hash value. First you find your hash bucket, then you find the entry on the list. When adding a new entry, you merely add it to the list.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3267, "user_id": 339937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FDw7.jpg?s=128&g=1", "display_name": "olegarch", "link": "https://stackoverflow.com/users/339937/olegarch"}, "is_accepted": false, "score": 0, "last_activity_date": 1422394073, "creation_date": 1422394073, "answer_id": 28180341, "question_id": 27948307, "link": "https://stackoverflow.com/questions/27948307/implementing-a-hash-table-using-c/28180341#28180341", "title": "Implementing a Hash Table using C", "body": "<p>This is my demo-program, which reads strings (words) from stdin, and\ndeposit into hashtable. Thereafter (at EOF), iterate hashtable, and compute number of words, distinct words, and prints most frequent word: </p>\n\n<pre><code>http://olegh.cc.st/src/words.c.txt\n</code></pre>\n\n<p>In hashtable, utilized double hashing algorithm.</p>\n"}], "owner": {"reputation": 21, "user_id": 4454314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64091f83ce9c6fcf853db289aac0c424?s=128&d=identicon&r=PG&f=1", "display_name": "Amanda", "link": "https://stackoverflow.com/users/4454314/amanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 822, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1422394073, "creation_date": 1421254432, "question_id": 27948307, "link": "https://stackoverflow.com/questions/27948307/implementing-a-hash-table-using-c", "title": "Implementing a Hash Table using C", "body": "<p>I am trying to read a file of names, and hash those names to a spot based on the value of their letters. I have succeeded in getting the value for each name in the file, but I am having trouble creating a hash table. Can I just use a regular array and write a function to put the words at their value's index?</p>\n\n<pre><code>while (fgets(name,100, ptr_file)!=NULL) //while file isn't empty\n            {\n            fscanf(ptr_file, \"%s\", &amp;name); //get the first name\n            printf(\"%s \",name); //prints the name\n            int length = strlen(name); // gets the length of the name\n            int i;\n            for (i =0; i &lt;length; i++) \n            //for the length of the string add each letter's value up\n                {\n                value = value + name [i];\n                value=value%50;\n                }\n            printf(\"value= %1d\\n\", value);\n            }\n</code></pre>\n"}, {"tags": ["c", "compilation", "makefile", "autoconf", "efl"], "owner": {"reputation": 2123, "user_id": 803674, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/sXfCE.png?s=128&g=1", "display_name": "niken", "link": "https://stackoverflow.com/users/803674/niken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421286502, "creation_date": 1421254123, "last_edit_date": 1421286502, "question_id": 27948205, "link": "https://stackoverflow.com/questions/27948205/problems-building-evil-library-efl-for-posix-dependencies-in-cygwin", "title": "Problems building evil library (efl) for posix dependencies in cygwin", "body": "<p>I have a project I'm trying to build using mingw and it's missing some posix dependencies:</p>\n\n<p><a href=\"http://mama.indstate.edu/users/ice/tree/\" rel=\"nofollow\">http://mama.indstate.edu/users/ice/tree/</a></p>\n\n<p>Since I don't want to spend the effort porting the sourcecode, I found a library that seems to promise to provide some of the missing posix dependencies:</p>\n\n<p><a href=\"http://git.enlightenment.org/core/efl.git/\" rel=\"nofollow\">http://git.enlightenment.org/core/efl.git/</a></p>\n\n<p>More specifically</p>\n\n<p><a href=\"http://git.enlightenment.org/legacy/evil.git\" rel=\"nofollow\">http://git.enlightenment.org/legacy/evil.git</a>\n(Evil library in efl core)</p>\n\n<p>I am trying to build this library with cygwin, but hitting all sorts of roadblocks with autoconf</p>\n\n<p>Has anyone ever built this library? I really just need the posix dependencies, any idea if i can just download them from somewhere reliable? I just want to get this damn thing to compile...</p>\n\n<p>Update</p>\n\n<p>I figured out enough autoconf stuff enough to get to this point</p>\n\n<pre><code>$ sh ./configure\nchecking for g++... g++\nchecking whether the C++ compiler works... yes\nchecking for C++ compiler default output file name... a.exe\nchecking for suffix of executables... .exe\nchecking whether we are cross compiling... configure: error: in `/home/me/legacyevil/evil':\nconfigure: error: cannot run C++ compiled programs.\nIf you meant to cross compile, use `--host'.\nSee `config.log' for more details\n</code></pre>\n\n<p>Using /usr/bin/i686-pc-mingw32-g++.exe</p>\n\n<p>Running ./configure --host=windows I got to</p>\n\n<p>configure: creating ./config.status\nconfig.status: error: cannot find input file: `Makefile.in'</p>\n\n<p>When I run automake I get</p>\n\n<pre><code>configure.ac: error: no proper invocation of AM_INIT_AUTOMAKE was found.\nconfigure.ac: You should verify that configure.ac invokes AM_INIT_AUTOMAKE,\nconfigure.ac: that aclocal.m4 is present in the top-level directory,\nconfigure.ac: and that aclocal.m4 was recently regenerated (using aclocal)\ndoc/Makefile.am:7: error: EFL_BUILD_DOC does not appear in AM_CONDITIONAL\ndoc/Makefile.am:44: warning: wildcard $(srcdir: non-POSIX variable name\ndoc/Makefile.am:44: (probably a GNU make extension)\nsrc/bin/Makefile.am:38: error: EVIL_HAVE_WINCE does not appear in AM_CONDITIONAL\n/usr/share/automake-1.14/am/depend2.am: error: am__fastdepCCAS does not appear in AM_CONDITIONAL\n/usr/share/automake-1.14/am/depend2.am:   The usual way to define 'am__fastdepCCAS' is to add 'AM_PROG_AS'\n/usr/share/automake-1.14/am/depend2.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again\n/usr/share/automake-1.14/am/depend2.am: error: AMDEP does not appear in AM_CONDITIONAL\n/usr/share/automake-1.14/am/depend2.am:   The usual way to define 'AMDEP' is to add one of the compiler tests\n/usr/share/automake-1.14/am/depend2.am:     AC_PROG_CC, AC_PROG_CXX, AC_PROG_OBJC, AC_PROG_OBJCXX,\n/usr/share/automake-1.14/am/depend2.am:     AM_PROG_AS, AM_PROG_GCJ, AM_PROG_UPC\n/usr/share/automake-1.14/am/depend2.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again\nsrc/bin/Makefile.am: error: Preprocessed Assembler source seen but 'CCAS' is undefined\nsrc/bin/Makefile.am:   The usual way to define 'CCAS' is to add 'AM_PROG_AS'\nsrc/bin/Makefile.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again.\nsrc/bin/Makefile.am: error: Preprocessed Assembler source seen but 'CCASFLAGS' is undefined\nsrc/bin/Makefile.am:   The usual way to define 'CCASFLAGS' is to add 'AM_PROG_AS'\nsrc/bin/Makefile.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again.\n/usr/share/automake-1.14/am/depend2.am: error: am__fastdepCC does not appear in AM_CONDITIONAL\n/usr/share/automake-1.14/am/depend2.am:   The usual way to define 'am__fastdepCC' is to add 'AC_PROG_CC'\n/usr/share/automake-1.14/am/depend2.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again\nsrc/lib/Makefile.am:27: error: EVIL_HAVE_WINCE does not appear in AM_CONDITIONAL\nsrc/lib/Makefile.am:88: error: EVIL_HAVE_WINCE does not appear in AM_CONDITIONAL\nsrc/lib/Makefile.am:104: error: EVIL_HAVE_WINCE does not appear in AM_CONDITIONAL\nsrc/lib/Makefile.am:4: error: Libtool library used but 'LIBTOOL' is undefined\nsrc/lib/Makefile.am:4:   The usual way to define 'LIBTOOL' is to add 'LT_INIT'\nsrc/lib/Makefile.am:4:   to 'configure.ac' and run 'aclocal' and 'autoconf' again.\nsrc/lib/Makefile.am:4:   If 'LT_INIT' is in 'configure.ac', make sure\nsrc/lib/Makefile.am:4:   its definition is in aclocal's search path.\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/arithchk.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nautomake-1.14: warning: possible forward-incompatibility.\nautomake-1.14: At least a source file is in a subdirectory, but the 'subdir-objects'\nautomake-1.14: automake option hasn't been enabled.  For now, the corresponding output\nautomake-1.14: object file(s) will be placed in the top-level directory.  However,\nautomake-1.14: this behaviour will change in future Automake versions: they will\nautomake-1.14: unconditionally cause object files to be placed in the same subdirectory\nautomake-1.14: of the corresponding sources.\nautomake-1.14: You are advised to start using 'subdir-objects' option throughout your\nautomake-1.14: project, to avoid future incompatibilities.\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/dmisc.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/dtoa.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/g_dfmt.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/gdtoa.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/gethex.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/g_ffmt.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/g__fmt.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/gmisc.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/g_xfmt.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/hd_init.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/hexnan.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/misc.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/qnan.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/smisc.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/strtodg.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/strtof.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/strtopx.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/sum.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\nsrc/lib/Makefile.am:34: warning: source file 'gdtoa/ulp.c' is in a subdirectory,\nsrc/lib/Makefile.am:34: but option 'subdir-objects' is disabled\n/usr/share/automake-1.14/am/depend2.am: error: am__fastdepCXX does not appear in AM_CONDITIONAL\n/usr/share/automake-1.14/am/depend2.am:   The usual way to define 'am__fastdepCXX' is to add 'AC_PROG_CXX'\n/usr/share/automake-1.14/am/depend2.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again\n</code></pre>\n"}, {"tags": ["c", "terminal", "popen"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421253391, "post_id": 27947914, "comment_id": 44290744, "body": "That is not possible the way you do it, <code>printf();</code> will print in the same terminal where you execute the program, what are you trying to do? I saw your previous question, and I am really curious, I would actually like to help you to see if it could be achieved, but I need to know what are you trying to do. Oh, and with <code>popen()</code> you don&#39;t need <code>&amp;</code>, it will call <code>fork()</code>."}, {"owner": {"reputation": 5638, "user_id": 2133758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa36904a5a0d214c60c5fa1ecc54ae9f?s=128&d=identicon&r=PG", "display_name": "omninonsense", "link": "https://stackoverflow.com/users/2133758/omninonsense"}, "edited": false, "score": 0, "creation_date": 1421254150, "post_id": 27947914, "comment_id": 44291239, "body": "You will have to get the <code>&#47;dev&#47;pts&#47;n</code> (where <code>n</code> is an integer) of the newly-opened terminal and print to it. I am not entirely sure how to do that though, and the method will probably vary with platform. Also, <a href=\"http://linux.die.net/man/3/popen\" rel=\"nofollow noreferrer\"><code>popen(3)</code></a> behaves differently than what you&#39;re expecting from it."}, {"owner": {"reputation": 29, "user_id": 4359238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0fb83f91833c37483923ec026f844719?s=128&d=identicon&r=PG&f=1", "display_name": "marmotas", "link": "https://stackoverflow.com/users/4359238/marmotas"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421254281, "post_id": 27947914, "comment_id": 44291330, "body": "@iharob Thank you for you help. It&#39;s for a project in one off my courses. I&#39;ve to extend the uncompleted, given, functions of a tiny os that runs on simple virtual machine. This tinyos supports 1 to 4 terminals. The user can have simultaneous interaction with the tinyos via each the terminal and execute a couple of simple programs that the tinyos supports. I want open 1-4 terminals before executing the tinyos and then direct the tinyos to read from and write to them. This program is for testing the read/write to the terminal."}, {"owner": {"reputation": 29, "user_id": 4359238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0fb83f91833c37483923ec026f844719?s=128&d=identicon&r=PG&f=1", "display_name": "marmotas", "link": "https://stackoverflow.com/users/4359238/marmotas"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421254307, "post_id": 27947914, "comment_id": 44291352, "body": "@iharob Yes you are right, it works also without the &amp;. I don&#39;t expect printf to print in the new terminal but fputs(&quot;New Terminal Successfully Opened&quot;, fp); Why this doesn&#39;t work?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421254507, "post_id": 27947914, "comment_id": 44291485, "body": "because <code>fputs()</code> is writing to the <code>stdin</code> of the new process, which is not the <code>gnome-terminal</code> when you use the <code>&amp;</code>, you can do that, but not that way. <code>gnome-terminal</code> is just a terminal emulator, so your first idea will not work, can you communicate with through yahoo messenger for example, I speak spanish. iharob@yahoo.com"}, {"owner": {"reputation": 5638, "user_id": 2133758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa36904a5a0d214c60c5fa1ecc54ae9f?s=128&d=identicon&r=PG", "display_name": "omninonsense", "link": "https://stackoverflow.com/users/2133758/omninonsense"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421254671, "post_id": 27947914, "comment_id": 44291595, "body": "@iharob Actually, <code>fputs</code> writes to a file descriptor <code>fp</code> he is passing. I&#39;m assuming his example isn&#39;t working because he&#39;s writing to the <code>fp</code>&#39;s <code>stdin</code>, not <code>stdout</code>. I wonder if writing <code>echo &quot;New Terminal Successfully Opened&quot;\\n</code> would work (I&#39;m unable to test it now)?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 5638, "user_id": 2133758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa36904a5a0d214c60c5fa1ecc54ae9f?s=128&d=identicon&r=PG", "display_name": "omninonsense", "link": "https://stackoverflow.com/users/2133758/omninonsense"}, "edited": false, "score": 0, "creation_date": 1421254764, "post_id": 27947914, "comment_id": 44291642, "body": "@destielstarship <code>fp</code> is not a file descriptor, and <code>popen</code> returns an I/O stream which writes to the standard input of the executed command. And i don&#39;t think it would work."}, {"owner": {"reputation": 5638, "user_id": 2133758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa36904a5a0d214c60c5fa1ecc54ae9f?s=128&d=identicon&r=PG", "display_name": "omninonsense", "link": "https://stackoverflow.com/users/2133758/omninonsense"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421255003, "post_id": 27947914, "comment_id": 44291785, "body": "@iharob Well, yes it&#39;s a file stream, but <code>popen(3)</code> returns a <code>FILE*</code>, which is essentially a C abstraction for a fd. So, it should behave like any other <code>FILE</code> object/value."}, {"owner": {"reputation": 29, "user_id": 4359238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0fb83f91833c37483923ec026f844719?s=128&d=identicon&r=PG&f=1", "display_name": "marmotas", "link": "https://stackoverflow.com/users/4359238/marmotas"}, "reply_to_user": {"reputation": 5638, "user_id": 2133758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa36904a5a0d214c60c5fa1ecc54ae9f?s=128&d=identicon&r=PG", "display_name": "omninonsense", "link": "https://stackoverflow.com/users/2133758/omninonsense"}, "edited": false, "score": 0, "creation_date": 1421255549, "post_id": 27947914, "comment_id": 44292116, "body": "@destielstarship I will google /dev/pts/ to figure out what&#39;s in there thanks. I also expected to use the value returned from the popen as a file descriptor"}, {"owner": {"reputation": 29, "user_id": 4359238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0fb83f91833c37483923ec026f844719?s=128&d=identicon&r=PG&f=1", "display_name": "marmotas", "link": "https://stackoverflow.com/users/4359238/marmotas"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421255627, "post_id": 27947914, "comment_id": 44292157, "body": "@iharob I have added you on yahoo messenger. I only speak greek and english. Thank you anyway for the help"}], "owner": {"reputation": 29, "user_id": 4359238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0fb83f91833c37483923ec026f844719?s=128&d=identicon&r=PG&f=1", "display_name": "marmotas", "link": "https://stackoverflow.com/users/4359238/marmotas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421253310, "creation_date": 1421253270, "last_edit_date": 1421253310, "question_id": 27947914, "link": "https://stackoverflow.com/questions/27947914/print-in-a-new-terminal-opened-with-popen", "title": "Print in a new terminal opened with popen()", "body": "<p>I want to open a new terminal and then print something in there. The following program's output is:</p>\n\n<p>Successfully Opened\nThe fputs returned 1.</p>\n\n<p>But nothing is printed in the new terminal. Any idea what I do wrong?\nThank you</p>\n\n<pre><code>int main(int argc, char** argv) {\n\n    FILE *fp;\n    int rv;\n\n    fp = popen(\"gnome-terminal&amp;\", \"w\");\n    sleep(5);\n    if (fp == NULL)\n    {\n        puts(\"Error opening\");\n    }\n    else\n    {\n        puts(\"Successfully Opened\");\n        rv = fputs(\"New Terminal Successfully Opened\", fp);\n        printf(\"The fputs returned %d.\\n\",rv);\n        pclose(fp);\n\n    }\n    sleep(5);\n    return (EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "malloc"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1421253079, "post_id": 27947777, "comment_id": 44290540, "body": "As whatever the C library on the target system provides?"}], "answers": [{"comments": [{"owner": {"reputation": 1848, "user_id": 3608247, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ece016ded76b7b44c1328055709fb55c?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin Shemyak", "link": "https://stackoverflow.com/users/3608247/konstantin-shemyak"}, "edited": false, "score": 0, "creation_date": 1421264336, "post_id": 27947850, "comment_id": 44297190, "body": "@Dietrich: Thank you! <a href=\"http://bazaar.launchpad.net/~vcs-imports/glibc/master/view/head:/malloc/malloc.c#L117\" rel=\"nofollow noreferrer\">bazaar.launchpad.net/~vcs-imports/glibc/master/view/head:/&hellip;</a> says that &quot;Even a request for zero bytes (i.e., malloc(0)) returns a pointer to something of the minimum allocatable size.&quot;"}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 5, "last_activity_date": 1421253093, "creation_date": 1421253093, "answer_id": 27947850, "question_id": 27947777, "link": "https://stackoverflow.com/questions/27947777/gcc-how-is-implementation-defined-malloc0-defined/27947850#27947850", "title": "gcc: how is &quot;implementation-defined&quot; malloc(0) defined?", "body": "<p>GCC doesn't define it at all.  GCC uses the <code>malloc()</code> implementation provided by the standard library.  On OS X this will be libSystem, on Linux this will usually be glibc or eglibc, etc.  These libraries are open source, so you can browse the source code.</p>\n"}], "owner": {"reputation": 1848, "user_id": 3608247, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ece016ded76b7b44c1328055709fb55c?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin Shemyak", "link": "https://stackoverflow.com/users/3608247/konstantin-shemyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 27947850, "answer_count": 1, "score": 0, "last_activity_date": 1421253158, "creation_date": 1421252886, "last_edit_date": 1495535599, "question_id": 27947777, "link": "https://stackoverflow.com/questions/27947777/gcc-how-is-implementation-defined-malloc0-defined", "title": "gcc: how is &quot;implementation-defined&quot; malloc(0) defined?", "body": "<p>C standard (e.g. C99) tells that <code>malloc(0)</code> returns \"a null pointer or a unique pointer that can be successfully passed to free()\". Which of the two, is <strong>implementation-defined</strong>. (This has been asked on StackOverflow many times, e.g. <a href=\"https://stackoverflow.com/questions/2132273/what-does-malloc0-return\">1</a>, <a href=\"https://stackoverflow.com/questions/2022335/whats-the-point-in-malloc0\">2</a>, <a href=\"https://stackoverflow.com/questions/3110588/why-does-malloc0-return-valid-memory-address-whats-the-use\">3</a>, <a href=\"https://stackoverflow.com/questions/14487183/malloc0-actually-works\">4</a>.)</p>\n\n<p>My question is: how does GCC define it?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1421251865, "post_id": 27947400, "comment_id": 44289708, "body": "your pointers are not initialized\u2026 if you need a <code>char **</code>, why don&#39;t you simply make an array of 10 <code>char *</code>s then grab a pointer to its first element?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1421252017, "post_id": 27947400, "comment_id": 44289816, "body": "Could you show the prototype of the given function ? It seems it requires <code>char**</code> and not <code>char**[10]</code>."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1421252603, "post_id": 27947400, "comment_id": 44290198, "body": "This is a question about C, not about C++. I don&#39;t see any C++ in your question"}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 4281839, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/405583ecb16303da658685cb79a50e01?s=128&d=identicon&r=PG&f=1", "display_name": "seMikel", "link": "https://stackoverflow.com/users/4281839/semikel"}, "edited": false, "score": 0, "creation_date": 1421252699, "post_id": 27947575, "comment_id": 44290263, "body": "if I do that, the function will tell me that &#39;const char*&#39; is incompatible with &#39;char**&#39;"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 221, "user_id": 4281839, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/405583ecb16303da658685cb79a50e01?s=128&d=identicon&r=PG&f=1", "display_name": "seMikel", "link": "https://stackoverflow.com/users/4281839/semikel"}, "edited": false, "score": 1, "creation_date": 1421253502, "post_id": 27947575, "comment_id": 44290818, "body": "Well, make your other functions const correct. Our stay making copies of your strings. But string literals are readonly."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1421254650, "post_id": 27947575, "comment_id": 44291577, "body": "typo: <code>9</code> should be <code>8</code>. and according to the given code <code>array[9] = NULL</code>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1421257858, "post_id": 27947575, "comment_id": 44293578, "body": "@Jarod42: Not a typo, I was specifically showing the first and last entries in the array (the question used one-based numbering, <i>shudder</i>, and I wasn&#39;t sure if that was an accident or a misconception).  And the &quot;given code&quot; that looks for NULL wasn&#39;t present when I wrote the answer."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 1, "last_activity_date": 1421252271, "creation_date": 1421252271, "answer_id": 27947575, "question_id": 27947400, "link": "https://stackoverflow.com/questions/27947400/creating-a-pointer-to-pointer-array/27947575#27947575", "title": "Creating a pointer to pointer array", "body": "<p>You're close, you just have one <code>*</code> too many on every line.</p>\n\n<pre><code>const char *array[10];\narray[0] = \".\\\\images\\\\cockroach\\\\1.png\";\narray[2] = \".\\\\images\\\\cockroach\\\\1.png\";\narray[3] = \".\\\\images\\\\cockroach\\\\1.png\";\narray[4] = \".\\\\images\\\\cockroach\\\\1.png\";\narray[5] = \".\\\\images\\\\cockroach\\\\1.png\";\narray[6] = \".\\\\images\\\\cockroach\\\\1.png\";\narray[7] = \".\\\\images\\\\cockroach\\\\1.png\";\narray[9] = \".\\\\images\\\\cockroach\\\\1.png\";\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 4281839, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/405583ecb16303da658685cb79a50e01?s=128&d=identicon&r=PG&f=1", "display_name": "seMikel", "link": "https://stackoverflow.com/users/4281839/semikel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1421252639, "creation_date": 1421251765, "last_edit_date": 1421252639, "question_id": 27947400, "link": "https://stackoverflow.com/questions/27947400/creating-a-pointer-to-pointer-array", "title": "Creating a pointer to pointer array", "body": "<p>I reaslise this is probably quite a noob question but I need to create an array of type 'char**' because that is the type of parameter a function I am using is asking for. After that I need to make every element of that array to be a link. I am open to the possibility that it's not even possible, but so far this is what I tried and as a result got an Access Violation error:</p>\n\n<pre><code>char **array[10];\n    *array[1] = \".\\\\images\\\\cockroach\\\\1.png\";\n    *array[2] = \".\\\\images\\\\cockroach\\\\1.png\";\n    *array[3] = \".\\\\images\\\\cockroach\\\\1.png\";\n    *array[4] = \".\\\\images\\\\cockroach\\\\1.png\";\n    *array[5] = \".\\\\images\\\\cockroach\\\\1.png\";\n    *array[6] = \".\\\\images\\\\cockroach\\\\1.png\";\n    *array[7] = \".\\\\images\\\\cockroach\\\\1.png\";\n    *array[8] = \".\\\\images\\\\cockroach\\\\1.png\";\n</code></pre>\n\n<p>Here's the function in question:</p>\n\n<pre><code>Enemytype makeenemy(int hp, int xcor, int ycor, int width, int height, int speed, int a1, int a2, char *imagel[10], char *imaged[10])\n{\n    int i = 0;\n    int j = 0;\n    Enemytype m;\n    m.width = width;\n    m.height = height;\n    m.xcor = xcor;\n    m.ycor = ycor;\n    m.speed = speed;\n    m.hp = hp;\n    m.a1 = a1;\n    m.a2 = a2;\n    while (imagel[i]){\n        m.arrayl[i] = Loadtext(imagel[i]);\n        i ++ ;\n    }\n    while (imaged[j]){\n        m.arrayd[j] = Loadtext(imaged[j]);\n        j++;\n    }\n    return m;\n}\n</code></pre>\n\n<p>The point is to create a template with an array of images, without knowing initially how many images it wil hvae. <code>Loadtext(char* filename)</code> is the function that creates an image from the given link.\nAs a result it is asking me for 'char**'.</p>\n"}, {"tags": ["c", "macros", "static-libraries", "static-linking"], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1421251717, "creation_date": 1421251717, "answer_id": 27947372, "question_id": 27947299, "link": "https://stackoverflow.com/questions/27947299/how-to-create-two-instances-of-statically-linked-library-with-different-defines/27947372#27947372", "title": "How to create two instances of statically linked library, with different defines?", "body": "<p>All you have to do is compile two deferent libraries with diferent names.</p>\n"}], "owner": {"reputation": 840, "user_id": 1094206, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2192cf661c817335d093b5402eb8820b?s=128&d=identicon&r=PG", "display_name": "user1094206", "link": "https://stackoverflow.com/users/1094206/user1094206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1421251717, "creation_date": 1421251474, "question_id": 27947299, "link": "https://stackoverflow.com/questions/27947299/how-to-create-two-instances-of-statically-linked-library-with-different-defines", "title": "How to create two instances of statically linked library, with different defines?", "body": "<p>I have a C library that uses a define macro to determine the logic of some of its code. What would be the best way to create two instances of this library, each with a different value of the macro?</p>\n\n<p>To clarify, the code looks something like this:</p>\n\n<pre><code>#if (MY_VAR == VAL1)\n    ... do stuff\n#else\n    ... do other stuff\n#endif\n</code></pre>\n"}, {"tags": ["java", "c", "gcc", "java-native-interface"], "comments": [{"owner": {"reputation": 25, "user_id": 4387977, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e975863b7e5726f2ee3f2ae6d2e6fcaf?s=128&d=identicon&r=PG&f=1", "display_name": "Elia", "link": "https://stackoverflow.com/users/4387977/elia"}, "edited": false, "score": 0, "creation_date": 1421252893, "post_id": 27947194, "comment_id": 44290411, "body": "resolved the parameter name omitted errors, still waiting for some suggestions on line 22 errors :("}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4387977, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e975863b7e5726f2ee3f2ae6d2e6fcaf?s=128&d=identicon&r=PG&f=1", "display_name": "Elia", "link": "https://stackoverflow.com/users/4387977/elia"}, "edited": false, "score": 0, "creation_date": 1421256366, "post_id": 27948600, "comment_id": 44292626, "body": "i did called as u pointed. For the perror(msg) i did so: Declared right on top of perror(msg) this line: const char *msg = NULL;  It solved my problem. Thx for the help :)"}], "tags": [], "owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "is_accepted": true, "score": 0, "last_activity_date": 1421255417, "creation_date": 1421255417, "answer_id": 27948600, "question_id": 27947194, "link": "https://stackoverflow.com/questions/27947194/compiling-errors-in-a-c-program-under-jni/27948600#27948600", "title": "Compiling errors in a C program under JNI", "body": "<pre><code>JNIEXPORT void JNICALL Java_testcli_stdErr\n(JNIEnv *, jobject)\n{\n    perror(msg);\n    exit(1);\n}\n</code></pre>\n\n<p>The first thing wrong here is that your parameters don't have names. While this can be effectively ignored with the proper compiler flags, I wouldn't recommend it. You should give your parameters names, e.g.:</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_testcli_stdErr\n(JNIEnv* env, jobject obj)\n...\n</code></pre>\n\n<p>The next issue is <code>perror(msg);</code>, as <code>msg</code> isn't declared nor defined. Did you forget to pass it into your function? Is it supposed to be a global variable? Either way, it doesn't exist, and you can't print something that doesn't exist.</p>\n"}], "owner": {"reputation": 25, "user_id": 4387977, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e975863b7e5726f2ee3f2ae6d2e6fcaf?s=128&d=identicon&r=PG&f=1", "display_name": "Elia", "link": "https://stackoverflow.com/users/4387977/elia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 27948600, "answer_count": 1, "score": 1, "last_activity_date": 1421255417, "creation_date": 1421251173, "question_id": 27947194, "link": "https://stackoverflow.com/questions/27947194/compiling-errors-in-a-c-program-under-jni", "title": "Compiling errors in a C program under JNI", "body": "<p>first of all i'd like to point the fact i'm not too expert with Java and less with C, after that, i'm using JNI to use a C program which is a client application for sockets.</p>\n\n<p>First i've created the main class testcli:</p>\n\n<pre><code>public class testcli {\n\n    public native void stdErr();\n    public native int cliFromC();\n\n\n    static {\n        System.loadLibrary(\"ctest\"); \n    }\n\n    public static void main(String[] args) {\n\n        new testcli().stdErr();\n        new testcli().cliFromC();\n\n    }\n\n}\n</code></pre>\n\n<p>After that i compiled with</p>\n\n<pre><code>javac testcli.java\n</code></pre>\n\n<p>then created the header file</p>\n\n<pre><code>javah testcli\n</code></pre>\n\n<p>At this point i've copied the strings i needed and pasted in the new file ctest:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;ctype.h&gt;          \n#include &lt;arpa/inet.h&gt;\n#include &lt;netdb.h&gt;\n\n#define PORT 20000\n#define LENGTH 512 \n\nJNIEXPORT void JNICALL Java_testcli_stdErr\n  (JNIEnv *, jobject)\n\n{\n    perror(msg);\n    exit(1);\n}\n\nJNIEXPORT jint JNICALL Java_testcli_cliFromC\n  (JNIEnv *, jobject)\n\n{\n    /* Variable Definition */\n    int sockfd; \n    int nsockfd;\n    char revbuf[LENGTH]; \n    struct sockaddr_in remote_addr;\n    //struct hostent *server; // per la parte scritta da me\n\n    /* Get the Socket file descriptor */\n    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1)\n    {\n        fprintf(stderr, \"ERROR: Failed to obtain Socket Descriptor! (errno =%d)\\n\",errno);\n        exit(1);\n    }\n\n\n    /* Fill the socket address struct */\n    remote_addr.sin_family = AF_INET; \n    remote_addr.sin_port = htons(PORT); \n\n    /*questo lo faccio cos\u00ec perch\u00e8 localhost \u00e8 127.0.0.1, nel caso in cui debba recuperare l'ip dall'hostname uso la parte commentata sopra*/\n    inet_pton(AF_INET, \"127.0.0.1\", &amp;remote_addr.sin_addr); //metto in remote_addr.sin_addr l'indirizzo ip 127.0.0.1 nel formato desiderato\n\n\n\n    bzero(&amp;(remote_addr.sin_zero), 8);\n\n    /* Try to connect the remote */\n    if (connect(sockfd, (struct sockaddr *)&amp;remote_addr, sizeof(struct sockaddr)) == -1)\n    {\n        fprintf(stderr, \"ERROR: Failed to connect to the host! (errno = %d)\\n\",errno);\n        exit(1);\n    }\n    else \n        printf(\"[Client] Connected to server at port %d...ok!\\n\", PORT);\n\n/* Send File to Server */\n    //if(!fork())\n    //{\n        char* fs_name = \"/home/elia/Desktop/project/tesi/PublicKey1\";\n        char sdbuf[LENGTH]; \n        printf(\"[Client] Sending %s to the Server... \", fs_name);\n        FILE *fs = fopen(fs_name, \"r\");\n        if(fs == NULL)\n        {\n            printf(\"ERROR: File %s not found.\\n\", fs_name);\n            exit(1);\n        }\n\n        bzero(sdbuf, LENGTH); \n        int fs_block_sz; \n        while((fs_block_sz = fread(sdbuf, sizeof(char), LENGTH, fs)) &gt; 0)\n        {\n            if(send(sockfd, sdbuf, fs_block_sz, 0) &lt; 0)\n            {\n                fprintf(stderr, \"ERROR: Failed to send file %s. (errno = %d)\\n\", fs_name, errno);\n                break;\n            }\n            bzero(sdbuf, LENGTH);\n        }\n        printf(\"Ok File %s from Client was Sent!\\n\", fs_name);\n    //}\n    close (sockfd);\n    printf(\"[Client] Connection lost.\\n\");\n    return (0);\n\n    }   \n</code></pre>\n\n<p>At this point i added to my bashrc those lines:</p>\n\n<pre><code>C_INCLUDE_PATH=/usr/lib/jvm/java-8-oracle/include/\nC_INCLUDE_PATH=/usr/lib/jvm/java-8-oracle/include/linux/\n\nexport C_INCLUDE_PATH\n</code></pre>\n\n<p>Saved and wrote in terminal</p>\n\n<pre><code>ECHO $C_INCLUDE_PATH\n</code></pre>\n\n<p>and it gave me only</p>\n\n<pre><code>/usr/lib/jvm/java-8-oracle/include/linux/\n</code></pre>\n\n<p>which i don't know if it's good or not cause first string is missing. After it i try to compile my ctest.c with this command line:</p>\n\n<pre><code>gcc -o libctest.so -shared -I/usr/lib/jvm/java-8-oracle/include ctest.c -lc\n</code></pre>\n\n<p>and have this errors, which i completely don't understand.</p>\n\n<pre><code>ctest.c: In function \u2018Java_testcli_stdErr\u2019:\nctest.c:19: error: parameter name omitted\nctest.c:19: error: parameter name omitted\nctest.c:22: error: \u2018msg\u2019 undeclared (first use in this function)\nctest.c:22: error: (Each undeclared identifier is reported only once\nctest.c:22: error: for each function it appears in.)\nctest.c: In function \u2018Java_testcli_cliFromC\u2019:\nctest.c:27: error: parameter name omitted\nctest.c:27: error: parameter name omitted\n</code></pre>\n\n<p>I'm figurin out that completely copy-pasting my working client.c into the ctest.c not work\nwell but i sincerely don't know how to fix it. One thing to know is that C code works alone, with obvious </p>\n\n<pre><code>void error(const char *msg)\n</code></pre>\n\n<p>before the first brace bracket and</p>\n\n<pre><code>int main(int argc, char *argv[])\n</code></pre>\n\n<p>before second one. If some1 can help it's really really appreciated. Thx very much for the effort!! </p>\n\n<p>Cheers</p>\n"}, {"tags": ["c", "arrays", "char", "malloc", "free"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421251104, "post_id": 27947160, "comment_id": 44289156, "body": "please repost your code."}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 0, "creation_date": 1421251104, "post_id": 27947160, "comment_id": 44289157, "body": "I have to say: The question is very nice formatted! Really"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1421251282, "post_id": 27947160, "comment_id": 44289282, "body": "Please edit your question, when you doo there will be a toolbar with a question-mark on the right-hand side. Press that to get help about how to format the text in your question, including how to make code, well, code-formatted."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421251412, "post_id": 27947160, "comment_id": 44289375, "body": "it&#39;s still unreadable, wow...."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421251511, "post_id": 27947160, "comment_id": 44289442, "body": "Ok, it&#39;s better now, this is the <code>char ***</code> again, someone should do somthing about it."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1421251706, "post_id": 27947160, "comment_id": 44289584, "body": "Fifth line from the bottom; change <code>free(array1);</code> to <code>free(array1[i]);</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421252221, "post_id": 27947160, "comment_id": 44289956, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858?s=2|3.3985#605858\">Do not cast the result of <code>malloc()</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 1, "creation_date": 1421252102, "post_id": 27947378, "comment_id": 44289871, "body": "The multiple frees of <code>array1</code>, noted in the comments, are still a problem."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1421251732, "last_edit_date": 1495541134, "creation_date": 1421251732, "answer_id": 27947378, "question_id": 27947160, "link": "https://stackoverflow.com/questions/27947160/error-freeing-char/27947378#27947378", "title": "Error freeing char ***", "body": "<p>Doing</p>\n\n<pre><code>malloc(strlen(word) * sizeof(char));\n</code></pre>\n\n<p>is almost <em>always</em> wrong. Remember that strings also contains an extra character that is not reported by the <code>strlen</code> function, the terminator character <code>'\\0'</code>. That means your next call to <code>strcpy</code> will write <em>beyond</em> the end of the allocated memory.</p>\n\n<p>What you should do is allocate memory for that extra terminator character as well:</p>\n\n<pre><code>array1[i][0] = malloc(strlen(word) + 1);\n</code></pre>\n\n<p>[Note that I changed the code, first because the parentheses around <code>array</code> are not needed, secondly because you <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">in C one should not cast the return of <code>malloc</code></a>, and third because <code>sizeof(char)</code> is specified to <em>always</em> be <code>1</code>.]</p>\n\n<p>Remember to change on all other places where you use <code>strlen</code> in a call to <code>malloc</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": false, "score": 0, "last_activity_date": 1421251768, "creation_date": 1421251768, "answer_id": 27947402, "question_id": 27947160, "link": "https://stackoverflow.com/questions/27947160/error-freeing-char/27947402#27947402", "title": "Error freeing char ***", "body": "<p>These allocations are too small:</p>\n\n<pre><code>(array1)[i][0] = (char*)malloc(strlen(word) * sizeof(char));\nstrcpy(array1[i][0], word);\n\n// ...    \n(array1)[i][j] = (char*)malloc(strlen(descrip) * sizeof(char));\nstrcpy(array1[i][j], descrip);\n</code></pre>\n\n<p>You need an extra character for the terminating <code>\\0</code>. <code>strcpy()</code> is writing into unallocated space.</p>\n\n<p>Save yourself some trouble and:</p>\n\n<pre><code>(array1)[i][0] = strdup(word);\n\n// ...    \n(array1)[i][j] = strdup(descrip);\n</code></pre>\n\n<p>And, as pointed out in the comments, </p>\n\n<pre><code>for (int i = 0; i &lt; size; i++)\n{\n    for (int j = 0; j &lt; sizeWords[i] + 1; j++)\n    {\n        free(array1[i][j]);\n    }\n    free(array1);\n}\n</code></pre>\n\n<p>should become:</p>\n\n<pre><code>for (int i = 0; i &lt; size; i++)\n{\n    for (int j = 0; j &lt; sizeWords[i] + 1; j++)\n    {\n        free(array1[i][j]);\n    }\n\n    free(array1[i]);\n}\n\nfree(array1);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4454081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5ad6b28a6a63b558f9440b95dce8fc?s=128&d=identicon&r=PG&f=1", "display_name": "shimon dadon", "link": "https://stackoverflow.com/users/4454081/shimon-dadon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421252048, "creation_date": 1421251056, "last_edit_date": 1421252048, "question_id": 27947160, "link": "https://stackoverflow.com/questions/27947160/error-freeing-char", "title": "Error freeing char ***", "body": "<p>This is the code: </p>\n\n<p>I do know what is the problem, I tried for hours to fix it, but was not successful</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nvoid input(char ***array1,int * sizeWords,int size)\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        char word[81] = \"\";\n        char descrip[201] = \"\";\n        int numAgdarot = 0;\n        //how mach agdarot\n        printf(\"how mach of agdarrot you want? \");\n        scanf(\"%d\", &amp;numAgdarot);\n        //save the count of agdarot\n        sizeWords[i] = numAgdarot;\n\n        do\n        {\n            printf(\"enter word number %d: \", i);\n            _flushall();\n            gets(word);\n        } while (textSpace(word) == False);\n\n        (array1)[i] = (char**)malloc(numAgdarot + 1 * sizeof(char*)); //set the num and agdarot\n\n        //save the word\n        (array1)[i][0] = (char*)malloc(strlen(word) * sizeof(char));\n        strcpy(array1[i][0], word);\n        //save the agdarot\n        for (int j = 1; j &lt;= numAgdarot; j++)\n        {\n            printf(\"enter descrip number %d: \", i);\n            _flushall();\n            gets(descrip);\n            (array1)[i][j] = (char*)malloc(strlen(descrip) * sizeof(char));\n            strcpy(array1[i][j], descrip);\n        }\n    }\n}\nint main() {\n    int *sizeWords = NULL;\n    int size = 0;\n    char *x=NULL;// = \"jk\";\n\n    char *** array1  = NULL;\n\n    printf(\"enter number of word: \");\n    scanf(\"%d\", &amp;size);\n    array1 = (char***)malloc(size * sizeof(char**));\n    sizeWords = (int*)malloc(size * sizeof(int));\n    //x = temp(x,sizeWords);\n\n    //input the word and agdarot\n    input(array1, sizeWords, size);\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        for (int j = 0; j &lt; sizeWords[i] + 1; j++)\n        {\n            free(array1[i][j]);\n        }\n        free(array1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I get a \"HEAP CORRUPTION DELETED\" error after Normal block. Why?\nIf i used a debugger I see the <code>char *</code> but i can not do a free..</p>\n"}, {"tags": ["c++", "c", "multithreading"], "comments": [{"owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 4, "creation_date": 1421251106, "post_id": 27947122, "comment_id": 44289158, "body": "Why do you care if a function uses a mutex internally? To give an example, that doesn&#39;t automatically make a function non-reentrant. This makes me think that there might be an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a> going on here."}, {"owner": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "reply_to_user": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1421254460, "post_id": 27947122, "comment_id": 44291449, "body": "Fair enough, I can see how it can look that way, I&#39;ll add some background to the question.  The short answer is that I&#39;m investigating interactions between forking and threading, typically a no-no.  In this case it&#39;s about making some legacy code safer."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1421258037, "post_id": 27947122, "comment_id": 44293700, "body": "Without even pseudo-codewe cannot tell you what&#39;s going on... Becareful about locks, some locks are &quot;shared&quot; among threads others among processes. Grabbing before a fork is somehow strange... You should lock before any operation that need some grant before running, but forking is probably not such an operation..."}, {"owner": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 0, "creation_date": 1421259884, "post_id": 27947122, "comment_id": 44294762, "body": "It does matter if functions use locks internally. <a href=\"http://brooker.co.za/blog/2014/12/06/random.html\" rel=\"nofollow noreferrer\">brooker.co.za/blog/2014/12/06/random.html</a>"}, {"owner": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "edited": false, "score": 0, "creation_date": 1421262230, "post_id": 27947122, "comment_id": 44296061, "body": "Not only that, but if you&#39;re calling <code>fork()</code> from Thread1 while <code>rand()</code> is holding a lock in Thread2, then in some implementations the lock will be held in the child process with no way of releasing it.  If you then call <code>rand()</code> in the child your child will freeze -- hence the question."}], "answers": [{"comments": [{"owner": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "edited": false, "score": 0, "creation_date": 1421273391, "post_id": 27951437, "comment_id": 44301804, "body": "Thanks, indeed calling fork without an <code>exec()</code> is the exact concern.  I&#39;ve looked at <code>pthread_atfork</code>, and its how I&#39;d implement the &quot;fork wrapper&quot; I described: essentially I&#39;d need to make sure no other thread is in a library call in the prepare handler.  For this the only solution I can think of is simply guarding all other threads&#39; bodies with a read lock, which is fine, but will affect <code>fork()</code> performance since I&#39;ll have to wait for the other threads to release their locks.  If I knew which libraries held mutexes I could just just guard them."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "edited": false, "score": 0, "creation_date": 1421273508, "post_id": 27951437, "comment_id": 44301856, "body": "But the libraries <i>themselves</i> should be implementing <code>pthread_atfork</code>."}, {"owner": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "edited": false, "score": 1, "creation_date": 1421275935, "post_id": 27951437, "comment_id": 44302952, "body": "aaaaaah, I see what you mean now.  So would you know if I can trust that everything in the GNU C Library (say) has done this properly?"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "edited": false, "score": 0, "creation_date": 1421325572, "post_id": 27951437, "comment_id": 44320342, "body": "... to clarify, I think it works properly as I&#39;d be surprised if the non-pthread related stuff in glibc used mutexes to any great extent if at all."}, {"owner": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "edited": false, "score": 0, "creation_date": 1421620944, "post_id": 27951437, "comment_id": 44418526, "body": "Thanks @abligh, since your answer did educate me about the subject, I&#39;ve altered the phrasing so that I can accept your answer as a valid one."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1421621534, "post_id": 27951437, "comment_id": 44418673, "body": "@abligh glibc takes no measures to protect you from this. (which e.g. leads to bug reports such as <a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=657835\" rel=\"nofollow noreferrer\">this</a> and many like it.)"}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": true, "score": 2, "last_activity_date": 1421265767, "creation_date": 1421265767, "answer_id": 27951437, "question_id": 27947122, "link": "https://stackoverflow.com/questions/27947122/what-system-and-library-calls-are-safe-while-forking/27951437#27951437", "title": "What system and library calls are safe while forking?", "body": "<p>I take it that your concern is that if you call <code>fork()</code> from thread A, then thread B may be in a library function which holds a mutex. The new process will then have only a single thread running (a clone of thread A), and the mutex will never get dropped. If you call <code>exec()</code> immediately afterwards, you are safe, as the mutex (along with the rest of memory) will get wiped out. If you don't call <code>exec()</code> afterwards, then this is a valid concern. However, the library author should be aware of it, and should have coded around it by using <code>pthread_atfork</code> or similar.</p>\n\n<p>From the documentation of <code>pthread_atfork</code>:</p>\n\n<blockquote>\n  <p>To understand the purpose of <code>pthread_atfork</code>, recall that <code>fork(2)</code> duplicates the whole memory space, including mutexes in their current locking state, but only the calling thread: other threads are not running in the child process. The mutexes are not usable after the fork and must be initialized with pthread_mutex_init in the child process. This is a limitation of the current implementation and might or might not be present in future versions.</p>\n</blockquote>\n\n<p>So, provided the library has been properly written, you shouldn't need to worry about whether it has mutexes or not. Indeed some code that uses libraries doesn't even know that the library uses threads, and isn't itself linked to a threading library, so that <em>has</em> to be the case.</p>\n"}], "owner": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 27951437, "answer_count": 1, "score": 2, "last_activity_date": 1421620880, "creation_date": 1421250947, "last_edit_date": 1495535599, "question_id": 27947122, "link": "https://stackoverflow.com/questions/27947122/what-system-and-library-calls-are-safe-while-forking", "title": "What system and library calls are safe while forking?", "body": "<p>I'm looking into some code that essentially implements a multithreaded daemon that also calls <code>fork</code> and I'm convinced that it's not doing so safely.  A rewrite is the ideal scenario, but I'm also investigating the best way to modify it make it safe, the idea is pretty simple:</p>\n\n<ul>\n<li>Create a read-write lock</li>\n<li>Grab the write lock before forking</li>\n<li>Grab the read lock before doing anything \"unsafe\" (which might grab a lock etc...)</li>\n</ul>\n\n<p>I can find out what's unsafe in our own code, but I have no clue what's unsafe in system code.  To that end, I'm wondering if there is an exhaustive list somewhere of standard libc and syscalls which implicitly grab mutexes under the hood.</p>\n\n<p>There is a list of system calls in the <code>signal(2)</code> manpage which are safe to call in signal handlers:</p>\n\n<pre><code>       _Exit()  _exit()  abort()  accept()  access()  aio_error() aio_return()\n       aio_suspend() alarm() bind() cfgetispeed() cfgetospeed()  cfsetispeed()\n       cfsetospeed() chdir() chmod() chown() clock_gettime() close() connect()\n       creat() dup() dup2() execle() execve() fchmod() fchown() fcntl() fdata-\n       sync()   fork()   fpathconf()  fstat()  fsync()  ftruncate()  getegid()\n       geteuid() getgid() getgroups() getpeername() getpgrp()  getpid()  getp-\n       pid()   getsockname()  getsockopt()  getuid()  kill()  link()  listen()\n       lseek() lstat()  mkdir()  mkfifo()  open()  pathconf()  pause()  pipe()\n       poll()  posix_trace_event()  pselect() raise() read() readlink() recv()\n       recvfrom()  recvmsg()  rename()  rmdir()  select()  sem_post()   send()\n       sendmsg()  sendto()  setgid()  setpgid() setsid() setsockopt() setuid()\n       shutdown()  sigaction()  sigaddset()  sigdelset()  sigemptyset()   sig-\n       fillset()  sigismember() signal() sigpause() sigpending() sigprocmask()\n       sigqueue() sigset() sigsuspend() sleep() socket()  socketpair()  stat()\n       symlink()  sysconf()  tcdrain()  tcflow() tcflush() tcgetattr() tcgetp-\n       grp() tcsendbreak() tcsetattr() tcsetpgrp()  time()  timer_getoverrun()\n       timer_gettime()   timer_settime()   times()  umask()  uname()  unlink()\n       utime() wait() waitpid() write()\n</code></pre>\n\n<p>And I presume that since these are safe to call in a signal handler, they won't try to grab any mutexes or do something non-reentrant.  </p>\n\n<p>Am I just to assume that all other system calls are unsafe?  What about libc, I know from <a href=\"https://stackoverflow.com/questions/10706466/how-does-malloc-work-in-a-multithreaded-environment\">other threads</a> that malloc for example does some locking under the hood, is there a definitive list somewhere? </p>\n\n<p><em>Edit: Provide some background to why I'm asking this question.</em>  </p>\n"}, {"tags": ["c", "linux", "pthreads", "semaphore"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421250882, "post_id": 27946983, "comment_id": 44289006, "body": "<code>printf</code> is not instantaneous, so may be that&#39;s the reason."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1421251060, "post_id": 27946983, "comment_id": 44289126, "body": "What are these big values? <code>tv_sec</code> around 1.4 billion and <code>tv_nsec</code> below 1 billion?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421584921, "post_id": 27946983, "comment_id": 44407248, "body": "What do you consider a &quot;billion&quot;. &quot;billion&quot; is ambigious among different lanuages. <code>10**9</code> or <code>10**12</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421584798, "last_edit_date": 1421584798, "creation_date": 1421251782, "answer_id": 27947407, "question_id": 27946983, "link": "https://stackoverflow.com/questions/27946983/sem-timedwait-for-specific-time/27947407#27947407", "title": "sem_timedwait() for specific time", "body": "<p>It should be big. \nclock_gettime(CLOCK_REALTIME, &amp;ts) gives the ticks since Epoch time and you are adding to that returned values.</p>\n\n<p>From the <a href=\"http://man7.org/linux/man-pages/man2/clock_gettime.2.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man2/clock_gettime.2.html</a> manual page.</p>\n\n<blockquote>\n  <p>All implementations support the system-wide realtime clock, which is identified by CLOCK_REALTIME. Its time represents seconds and nanoseconds since the Epoch. When its time is changed, timers for a relative interval are unaffected, but timers for an absolute point in time are affected.</p>\n</blockquote>\n\n<p>From sem_timedwait(3) - Linux man page</p>\n\n<pre><code>int sem_timedwait(sem_t *sem, const struct timespec *abs_timeout);\n</code></pre>\n\n<p>The abs_timeout argument points to a structure that specifies an absolute timeout in seconds and nanoseconds since the Epoch</p>\n"}, {"tags": [], "owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "is_accepted": false, "score": 0, "last_activity_date": 1421253336, "creation_date": 1421253336, "answer_id": 27947937, "question_id": 27946983, "link": "https://stackoverflow.com/questions/27946983/sem-timedwait-for-specific-time/27947937#27947937", "title": "sem_timedwait() for specific time", "body": "<ol>\n<li><code>clock_gettime</code> retrieves the current \"date and time\" in a specific format</li>\n<li>Operations on <code>timespec</code> structure are updating this date : current date + 20ms (and it tries to handle a border effect: if the <code>nsec</code> \"overflows\" then we should increment the <code>sec</code>): so after that <code>ts</code> contains the deadline for your semaphore</li>\n<li>Semaphore waits for a <code>sem_post</code> or a timeout.</li>\n</ol>\n"}], "owner": {"reputation": 404, "user_id": 1850553, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ceffdd2cf527f40214ab80cb2473d079?s=128&d=identicon&r=PG", "display_name": "Vinod Patidar", "link": "https://stackoverflow.com/users/1850553/vinod-patidar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1282, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421584798, "creation_date": 1421250550, "last_edit_date": 1421250806, "question_id": 27946983, "link": "https://stackoverflow.com/questions/27946983/sem-timedwait-for-specific-time", "title": "sem_timedwait() for specific time", "body": "<p>i Want to wait on semaphore for 20 mili-secound as below,but when i am printing values of tv_sec and tv_nsec getting very big values.</p>\n\n<p>Can anybody will help to understand this below code.</p>\n\n<pre><code>if (clock_gettime(CLOCK_REALTIME, &amp;ts) == -1)\n    {\n        //throw error\n    }\nts.tv_nsec += 20000000;\nts.tv_sec += ts.tv_nsec / 1000000000;\nts.tv_nsec %= 1000000000;\n\nsem_timedwait(&amp;semaphore, &amp;ts)\n</code></pre>\n"}, {"tags": ["c", "matlab", "makefile", "simulink", "rtw"], "comments": [{"owner": {"reputation": 3783, "user_id": 1240985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ea01986b62d10a33c8a96aeb3a9cf2?s=128&d=identicon&r=PG&f=1", "display_name": "Morpfh", "link": "https://stackoverflow.com/users/1240985/morpfh"}, "edited": false, "score": 0, "creation_date": 1421250553, "post_id": 27946481, "comment_id": 44288800, "body": "Is this what you need? <a href=\"http://www.mathworks.com/matlabcentral/answers/32253-static-functions-in-real-time-workshop\" rel=\"nofollow noreferrer\">mathworks.com/matlabcentral/answers/&hellip;</a>"}, {"owner": {"reputation": 13405, "user_id": 2257388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d05a9418dc1d8c385e0db42c1e8af7?s=128&d=identicon&r=PG", "display_name": "am304", "link": "https://stackoverflow.com/users/2257388/am304"}, "edited": false, "score": 0, "creation_date": 1421252744, "post_id": 27946481, "comment_id": 44290300, "body": "If you are compiling the generating code separately in an IDE for example, as opposed to part of the build process, you should probably check out the Pack N Go functionality. See <a href=\"http://blogs.mathworks.com/seth/2008/11/26/wheres-the-code/\" rel=\"nofollow noreferrer\">blogs.mathworks.com/seth/2008/11/26/wheres-the-code</a>"}, {"owner": {"reputation": 15, "user_id": 4073927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-C9kTeT45Eok/AAAAAAAAAAI/AAAAAAAAACk/T4FyrbdqSxA/photo.jpg?sz=128", "display_name": "Be_bro", "link": "https://stackoverflow.com/users/4073927/be-bro"}, "edited": false, "score": 0, "creation_date": 1421325935, "post_id": 27946481, "comment_id": 44320563, "body": "Hi all. Thanks for your help. I was able to resolve this issue by adding the files rt_look.c and rt_look1d.c in the path. The function rt_lookup( ) is defined in these files."}], "owner": {"reputation": 15, "user_id": 4073927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-C9kTeT45Eok/AAAAAAAAAAI/AAAAAAAAACk/T4FyrbdqSxA/photo.jpg?sz=128", "display_name": "Be_bro", "link": "https://stackoverflow.com/users/4073927/be-bro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421249239, "creation_date": 1421249239, "question_id": 27946481, "link": "https://stackoverflow.com/questions/27946481/function-rt-lookup-undefined", "title": "function rt_lookup( ) undefined", "body": "<p>I used Real time workshop to generate c code from a simulink model. When I tried to compile the resultant C code, I get the above error. When I check in the MODEL.c file, the function rt_lookup is called, but not defined. </p>\n\n<p>After some research in google, I found that lookup tables are used if your model has subsystems.(Yes my model has some subsystems) but no information on this error.</p>\n\n<p>I believe this function is defined in some library file. Any inputs regarding this is really helpful. Thanks in advance.</p>\n"}, {"tags": ["c", "protocols", "protocol-buffers"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1421248928, "post_id": 27946260, "comment_id": 44287776, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon.  There isn&#39;t enough information in the question to be able to give you an answer.  For example, what do the two 1-byte values in the first protocol mean?  Is one the length of the data? How long can the data be?  Is the CRC a 2-byte or a 4-byte value? In the second protocol, what are the various pairs of bytes supposed to contain? Are the 2-byte values big-endian or little-endian?  Does the CRC go in one of the 2-byte values?"}, {"owner": {"reputation": 999, "user_id": 1509414, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/410ac3df4157f9e37d90585d04018768?s=128&d=identicon&r=PG", "display_name": "Gavello", "link": "https://stackoverflow.com/users/1509414/gavello"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421249024, "post_id": 27946260, "comment_id": 44287828, "body": "Thanks JL updated the question"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421249216, "post_id": 27946260, "comment_id": 44287944, "body": "There&#39;s a little more information, yes, but there&#39;s nowhere near enough information.  You said that byte 0 of the first protocol goes into bytes 2 and 3 of the second; presumably, one of those two bytes is a 0, but which one is zero?  Byte 1 of the first protocol is probably the length of the data; which of bytes in the second protocol is the length?  What do the other bytes in the second protocol hold?  Is the CRC part of that data?"}, {"owner": {"reputation": 999, "user_id": 1509414, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/410ac3df4157f9e37d90585d04018768?s=128&d=identicon&r=PG", "display_name": "Gavello", "link": "https://stackoverflow.com/users/1509414/gavello"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421249503, "post_id": 27946260, "comment_id": 44288113, "body": "maybe now is more clear"}, {"owner": {"reputation": 999, "user_id": 1509414, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/410ac3df4157f9e37d90585d04018768?s=128&d=identicon&r=PG", "display_name": "Gavello", "link": "https://stackoverflow.com/users/1509414/gavello"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421249644, "post_id": 27946260, "comment_id": 44288201, "body": "basically my proble is on one side i have a uint8 and on the other side the same value should be written as a  uint16"}, {"owner": {"reputation": 999, "user_id": 1509414, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/410ac3df4157f9e37d90585d04018768?s=128&d=identicon&r=PG", "display_name": "Gavello", "link": "https://stackoverflow.com/users/1509414/gavello"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421249775, "post_id": 27946260, "comment_id": 44288287, "body": "I could set first byte to 0 and copy the value to the second byte but i was wondering if there is a better solution"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421249856, "post_id": 27946260, "comment_id": 44288346, "body": "Considerably clearer \u2014 thank you.  There are two items that I can see needing clarification.  (1) How do you know how long the data is in the first protocol?  AFAICS, you&#39;d have to pass the length to the conversion function since the protocol doesn&#39;t explicitly store a length.  (2) When you need to convert a single-byte address to a double-byte address, do you add zeros for the more significant byte, or for the less significant byte?  This harks back to my question about endian-ness (big-endian vs little-endian).  You have to know whether 0x34 in Protocol 1 maps to [0x00 0x34] or [0x34 0x00]."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421249929, "post_id": 27946260, "comment_id": 44288394, "body": "Similarly with the length; one of the two bytes will always be zero, but which one?  I think your function will need to become: <code>int convert_P1_P2(int p1_len, const uint8 *p1_data, uint8 *p2_data)</code> and the return value from the function will be the number of bytes used in the output (protocol 2) data buffer.  Also, <code>buffIn</code> at length 8 can only hold messages with up to 4 bytes of data, not 254 bytes."}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1421250235, "post_id": 27946260, "comment_id": 44288601, "body": "Dang it .. I had an answer in the works :) As some advice, declare two <code>structs</code> - one for the header of each protocol - instead of working with raw unsigned char buffers. You will need to deal with endianness to determine which byte of the 16-bit conversions becomes zero. and be sure to use unsigned variables to avoid any sign extension. This is a generic problem and, if reworded properly, would allow for an answer which covers a lot of fundamental areas."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1421250323, "post_id": 27946260, "comment_id": 44288653, "body": "@kdopen: the 2-byte CRC at the end of a variable length block of data does not lend itself to a structure."}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1421250477, "post_id": 27946260, "comment_id": 44288752, "body": "That&#39;s why I said &quot;for the header of each protocol&quot; (i.e. the fixed part. A &quot;unsigned char data[1];&quot; element at the end of the struct gives you a handle to where the data portion lies (via <code>offsetof(&lt;struct&gt;, data)</code>. As there is no length in the original protocol, then it is almost certainly fixed wrt to function. Which means <i>each message type</i> can have it&#39;s own struct (or a union) with the correct size fo the data field."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421250491, "post_id": 27946260, "comment_id": 44288763, "body": "One other possibility, Michele, is that the operation code in protocol 1 determines the length of the data.  In that case, you&#39;d need some data structure \u2014 probably just an array \u2014 which maps the operation code to the data length for the operation code."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 1, "creation_date": 1421250673, "post_id": 27946260, "comment_id": 44288884, "body": "@kdopen: C99 has flexible-array members so you don&#39;t need to use the &#39;struct hack&#39; you&#39;re proposing.  This could be a good question, if only all the issues I&#39;ve raised were addressed.  And yours sounds like it could be the basis for an answer. In this case, you don&#39;t need to use pack pragmas to get the structures to work, fortunately.  You do, somewhere along the line, have to deal with endian-ness if the intent is to send the structure down the wire without any further translation."}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1421250880, "post_id": 27946260, "comment_id": 44289004, "body": "yeah, this was my bread and butter for many years (usually using C89 compilers). But VLA&#39;s can be problematic in a struct if they aren&#39;t the last element. Usually yo only want the CRC at a specific point in the process, so you just pick it out in one-off code and verify it then discard. I&#39;d actually make the protocol 2 struct have a maximal length data array as it includes the data length."}, {"owner": {"reputation": 999, "user_id": 1509414, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/410ac3df4157f9e37d90585d04018768?s=128&d=identicon&r=PG", "display_name": "Gavello", "link": "https://stackoverflow.com/users/1509414/gavello"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421252745, "post_id": 27946260, "comment_id": 44290301, "body": "@Jonathan Leffler The protocol is MODBUS RTU and unfortunately it does not provide a field for length; protocol is little-endian. 8 is youst a referece is the number of bytes this devicde is sending me over the serial line"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1421252977, "post_id": 27946260, "comment_id": 44290485, "body": "@kdopen: the flexible array member (which is closely related to, but distinct from, a VLA) is only allowed as the last element of the structure.  The 2-byte CRC is still marginally problematic; it would have to be encoded as two extra bytes at the end of the the FAM."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421253298, "post_id": 27946260, "comment_id": 44290680, "body": "Then the redesigned interface is necessary; you have to tell the converter function how many bytes were in the incoming packet (and that number had better be at least 4 bytes).  The data portion of the packet is then <code>length - 4</code>.  So, you need to use (something similar to) the revised function interface.  If the protocol is little-endian, then <code>assert(length &gt;= 4 &amp;&amp; length &lt; 260); OUT[0] = IN[0]; OUT[1] = OUT[2] = OUT[3] = 0; OUT[4] = length - 4; OUT[5] = 0; OUT[6] = 0; OUT[7] = IN[1]; memmove(&amp;OUT[8], &amp;IN[2], length - 4);</code> (using your parameter names and assuming the length is <code>length</code>)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421253566, "post_id": 27946260, "comment_id": 44290870, "body": "That&#39;s ugly, but functional.  Were I designing it, I&#39;d probably have functions to parse the incoming data and pack the outgoing data.  There&#39;d probably be other packet formats to deal with, too, with different layouts.  At some point, you should use the CRC to validate the incoming packet; that&#39;s outside the remit of the question, though."}, {"owner": {"reputation": 999, "user_id": 1509414, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/410ac3df4157f9e37d90585d04018768?s=128&d=identicon&r=PG", "display_name": "Gavello", "link": "https://stackoverflow.com/users/1509414/gavello"}, "edited": false, "score": 0, "creation_date": 1421253940, "post_id": 27946260, "comment_id": 44291102, "body": "thanks all for the valuable suggestions"}], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 1509414, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/410ac3df4157f9e37d90585d04018768?s=128&d=identicon&r=PG", "display_name": "Gavello", "link": "https://stackoverflow.com/users/1509414/gavello"}, "edited": false, "score": 0, "creation_date": 1421459487, "post_id": 27951679, "comment_id": 44381174, "body": "Thanks very much for the comprehensive explanation I really appreciate it."}], "tags": [], "owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "is_accepted": true, "score": 1, "last_activity_date": 1421268479, "last_edit_date": 1421268479, "creation_date": 1421266711, "answer_id": 27951679, "question_id": 27946260, "link": "https://stackoverflow.com/questions/27946260/c-array-manipulation-protocol-conversion/27951679#27951679", "title": "C array manipulation protocol conversion", "body": "<p>There are two aspects to doing protocol conversions which you need to consider: the differing characteristics of the transports, and differences in the data. The most important transport characteristic is the endianness of data, especially with regard to that of the processor on which your converter is running. Other characteristics might involve character set (pure ASCII vs some flavor of Unicode - or in the old days EBCDIC), the size of numeric values, date-formats etc. Differences in the data includes field order, field presence, and data representation (mapping one set of values onto another).</p>\n\n<p>Also, most protocol converters need to go both ways.</p>\n\n<p>Now go back and remember the most fundamental paradigm for a program: Input-Process-Output. This structure is extremely useful in protocol conversion. You want all processing (regardless of direction) to operate on sanitized data in a standard format. Therefore, define an internal representation for a protocol packet which is independent of either of the protocols to be converted. Design it to make the optimum use of the converter's processor.</p>\n\n<p>Then write four routines:</p>\n\n<ul>\n<li>Convert protocol 1 to internal format</li>\n<li>Convert internal format to protocol 1</li>\n<li>Convert protocol 2 to internal format</li>\n<li>Convert internal format to protocol 2</li>\n</ul>\n\n<p>And your simplified mainline becomes:</p>\n\n<pre><code>while(TRUE)\n    if (protocol 1 packet available)\n        convert it to internal format\n        perform any necessary processing\n        convert to protocol 2 and transmit\n    endif\n    if (protocol 2 packet available)\n        convert it to internal format\n        perform any necessary processing\n        convert to protocol 1 and transmit\n    endif\nendwhile\n</code></pre>\n\n<p>This completely divorces the two protocol conversion from knowing about each other, and makes it very easy to switch out one or another for an alternative, or respond to changes in one of them.</p>\n\n<p>Now to your specific example, my internal structure would look something like:</p>\n\n<pre><code>typedef struct internalForm {\n    unsigned int address;\n    unsigned int function;\n    size_t payloadLength;\n    unsigned char payload[255];\n} internalForm;\n</code></pre>\n\n<p>and my four methods would have these prototypes:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\nbool   P1ToInternal(const unsigned char *packet, size_t packetLength, internalForm * internal);\nsize_t InternalToP1(const internalForm * internal, unsigned char *packet, size_t packetLength);\nbool   P2ToInternal(const unsigned char *packet, size_t packetLength, internalForm * internal);\nsize_t InternalToP2(const internalForm * internal, unsigned char *packet, size_t packetLength);\n</code></pre>\n\n<p>The <code>bool</code> return is simply to indicate conversion failures for inputs. The 'output' functions return the size of the converted packet - or 0 on error.</p>\n\n<p>In more complex conversions, I would actually have an internal representation for things like the function code and other \"enumerated\" fields. The conversion routines would take care of the mapping between internal representations and protocol-specific ones.</p>\n\n<p>Complete implementation of one direction might be:</p>\n\n<pre><code>bool P1ToInternal(const unsigned char *packet, size_t packetLength, internalForm * internal)\n{\n    internal-&gt;address = (unsigned int) packet[0];\n    internal-&gt;function = (unsigned int) packet[1];\n\n    // You need to write the function below. It could just be a look up\n    size_t dataLength = MapP1FunctionToPayloadLength(internal-&gt;function);\n    if (dataLength &gt; sizeof(internal-&gt;payload))\n        return false;\n\n    // You need to write CheckCRC()\n    if (!CheckCRC(&amp;packet[2], dataLength, &amp;packet[2+dataLength]))\n        return false;\n\n    internal-&gt;payloadLength = dataLength;\n    memset(internal-&gt;payload, 0, sizeof(internal-&gt;payload));\n    memcpy(internal-&gt;payload, &amp;packet[2], dataLength);\n    return true;\n}\n\nsize_t InternalToP2(const internalForm * internal, unsigned char *packet, size_t bufferLength)\n{\n    if (bufferLength &lt; internal-&gt;payloadLength + 8)\n        return 0;\n\n    memset(packet, 0, bufferLength);\n\n    // Assumes little-endian representation, but it's not hard to see what \n    // to do for the alternative. And you should have an enum for the array\n    // indices.\n    packet[1] = internal-&gt;address &amp; 0xff;\n    packet[5] = internal-&gt;payloadLength; // Not sure where your +1 is coming from\n    packet[7] = internal-&gt;function &amp; 0xff;\n    memcpy(&amp;payload[8], internal-&gt;payload, internal-&gt;payloadLength);\n\n    return internal-&gt;PayloadLength + 8;\n}\n</code></pre>\n\n<p>This may seem like overkill for your simple example, but as a framework it will lead to very robust conversion programs. Conversion errors will be very obvious and easy to debug. Input and output conversion, and internal processing can all be unit-tested independently.</p>\n\n<p>Finally, a conversion would look like:</p>\n\n<pre><code>unsigned char inBuff[260], outBuff[264];\n\nstruct internalForm internal;\n\nif (P1ToInternal(inBuff, sizeof(inBuff), &amp;internal))\n{\n    size_t len = InternalToP2(&amp;internal, outBuff, sizeof(outBuff))\n    if (len)\n        transmitP2(outBuff, len);\n}\n</code></pre>\n"}], "owner": {"reputation": 999, "user_id": 1509414, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/410ac3df4157f9e37d90585d04018768?s=128&d=identicon&r=PG", "display_name": "Gavello", "link": "https://stackoverflow.com/users/1509414/gavello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 27951679, "answer_count": 1, "score": 0, "last_activity_date": 1421268479, "creation_date": 1421248612, "last_edit_date": 1421254387, "question_id": 27946260, "link": "https://stackoverflow.com/questions/27946260/c-array-manipulation-protocol-conversion", "title": "C array manipulation protocol conversion", "body": "<p>I'm attempting to perform a protocol conversion</p>\n\n<p>first protocol </p>\n\n<pre><code>| 1 byte (address) | 1 byte (function code) |  0-254 bytes (data) | 2 bytes ( CRC )| \n</code></pre>\n\n<p>second protocol</p>\n\n<pre><code>| 2 bytes (address) | 2 bytes (0) | 2 bytes (length) | 1 byte (0) | 1 byte (function code) | 0-254 bytes (data) | \n</code></pre>\n\n<p>first protocol frame is received and its data should be remapped into second protocol frame  </p>\n\n<p>byte 0 of first protocol should be mapped to byte 0 and 1 of the second.</p>\n\n<pre><code>static int convert(uint8_t *buffer, int len, uint8_t* frame){\n\n    frame[0] = 0x00;\n    frame[1] = buffer[0];\n\n    frame[2] = 0x00;\n    frame[3] = 0x00;\n\n    frame[4] = 0x00;\n    frame[5] = len - 4 + 1;\n\n    frame[6] = 0x00;\n\n    frame[7] = buffer[1];\n\n    memcpy(&amp;frame[8], &amp;buffer[2], len-4);\n\n    return frame[5] + 6;\n}\n\n\nuint8_t buffIN[260]; // first protocol\n\nuint8_t buffOUT[264]; // second protocol\n\n\n/*READ DATA INT buffIN*/ \n//8 bytes received\n// if frame is valid continue else signal error\n\nint res = convert(&amp;buffIN, 8  &amp;buffOUT);\n</code></pre>\n\n<p>If someone use a different approach please let me know</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3063, "user_id": 825844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1d09e87b632fb0c71902ba0b9919d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/825844/ankur"}, "edited": false, "score": 0, "creation_date": 1421248536, "post_id": 27946176, "comment_id": 44287528, "body": "<code>scanf(&quot;%.2f&quot;,var_name)</code>"}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1421248591, "post_id": 27946176, "comment_id": 44287565, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples\">Floating point inaccuracy examples</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1421248607, "post_id": 27946176, "comment_id": 44287572, "body": "<code>scanf(&quot;%.2f&quot;,&amp;var_name)</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1421248646, "post_id": 27946176, "comment_id": 44287599, "body": "@dandan78 not at all...?"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 3063, "user_id": 825844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1d09e87b632fb0c71902ba0b9919d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/825844/ankur"}, "edited": false, "score": 6, "creation_date": 1421248663, "post_id": 27946176, "comment_id": 44287617, "body": "@Shan, @Quentin: Nope. There is only a field-width for <code>scanf</code> formats, not a precision."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1421248678, "post_id": 27946176, "comment_id": 44287625, "body": "The point is, even if you input just 2 digits the resulting float could easily have many more."}, {"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "edited": false, "score": 0, "creation_date": 1421248687, "post_id": 27946176, "comment_id": 44287633, "body": "i tried this solution... my output matches the example outputs given but still the online compiler shows an error."}, {"owner": {"reputation": 3063, "user_id": 825844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1d09e87b632fb0c71902ba0b9919d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/825844/ankur"}, "edited": false, "score": 0, "creation_date": 1421248711, "post_id": 27946176, "comment_id": 44287643, "body": "i don&#39;t think there will be compiler error."}, {"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "edited": false, "score": 0, "creation_date": 1421248749, "post_id": 27946176, "comment_id": 44287669, "body": "this is the question i have been working on. <a href=\"http://www.codechef.com/problems/HS08TEST/\" rel=\"nofollow noreferrer\">codechef.com/problems/HS08TEST</a> and here is the solution int x; float balance,y; scanf(&quot;%d %.2f&quot;,&amp;x,&amp;y);     if(x&gt;0 &amp;&amp; x&lt;=2000 &amp;&amp; y&gt;=0 &amp;&amp; y&lt;=2000 &amp;&amp; x&lt;y)     {if(x%5==0)              {balance=y-x-0.50;                printf(&quot;%.2f \\n&quot;,balance);               }                               else                        printf(&quot;%.2f \\n&quot;,y);       }      else      {if(x&gt;0 &amp;&amp; x&lt;=2000 &amp;&amp; y&gt;=0 &amp;&amp; y&lt;=2000 &amp;&amp; x&gt;y)           {   printf(&quot;%.2f \\n&quot;,y);            }        else         {       printf(&quot; %.2f \\n&quot;,y);          }       }"}, {"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "edited": false, "score": 0, "creation_date": 1421249181, "post_id": 27946176, "comment_id": 44287924, "body": "question <a href=\"http://www.codechef.com/problems/HS08TEST/\" rel=\"nofollow noreferrer\">codechef.com/problems/HS08TEST</a> solution <a href=\"http://www.codechef.com/viewsolution/5899676\" rel=\"nofollow noreferrer\">codechef.com/viewsolution/5899676</a>     what might have gone wrong then ??"}, {"owner": {"reputation": 3063, "user_id": 825844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1d09e87b632fb0c71902ba0b9919d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/825844/ankur"}, "edited": false, "score": 1, "creation_date": 1421249241, "post_id": 27946176, "comment_id": 44287955, "body": "You really don&#39;t need any precision for this question.just understand logic and try to solve.This is very simple."}, {"owner": {"reputation": 301, "user_id": 2686951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/PeRm8.jpg?s=128&g=1", "display_name": "Sucho", "link": "https://stackoverflow.com/users/2686951/sucho"}, "edited": false, "score": 0, "creation_date": 1421249370, "post_id": 27946176, "comment_id": 44288033, "body": "I don&#39;t think you can do it with scanf or any other standard input. So, write your own code for that!"}, {"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "reply_to_user": {"reputation": 301, "user_id": 2686951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/PeRm8.jpg?s=128&g=1", "display_name": "Sucho", "link": "https://stackoverflow.com/users/2686951/sucho"}, "edited": false, "score": 0, "creation_date": 1421250934, "post_id": 27946176, "comment_id": 44289041, "body": "i was able to match all the example outputs given in the question statement but it doesnt accept the solution... i can understand where i went wrong @sucho what do u mean by i cant do it by scanf, are you suggesting creating a new function ??"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1421251340, "post_id": 27946176, "comment_id": 44289323, "body": "If you have a compiler error, say what error, with full error message, and on what expression. As such we could only guess. This question is in risk to be closed as unclear or off topic because not enough detail on the error."}, {"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "edited": false, "score": 0, "creation_date": 1421251583, "post_id": 27946176, "comment_id": 44289494, "body": "there is no compilation error... it just says wrong answer"}, {"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1421251765, "post_id": 27946176, "comment_id": 44289630, "body": "@SergeBallesta i added few details to the question description.. hope it helps... m new to this so please excuse my mistakes for a while :)"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1421253027, "post_id": 27946176, "comment_id": 44290505, "body": "You are welcome, I&#39;m not that old here anyway :-). But questions are required to show relevant part of source and eventual error messages <i>directly in question and not in links</i>."}, {"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "edited": false, "score": 0, "creation_date": 1421253610, "post_id": 27946176, "comment_id": 44290907, "body": "i have found the answer to this question, i just wrote it differently... this one before <a href=\"http://www.codechef.com/viewsolution/5899676\" rel=\"nofollow noreferrer\">codechef.com/viewsolution/5899676</a> and this one workedhttp://www.codechef.com/viewsolution/5899676  but i just cant tell why the previuos one didnt work.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421253773, "post_id": 27946176, "comment_id": 44291008, "body": "Post examples of invalid input and of valid input."}, {"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421254038, "post_id": 27946176, "comment_id": 44291169, "body": "@chux <a href=\"http://www.codechef.com/problems/HS08TEST/\" rel=\"nofollow noreferrer\">codechef.com/problems/HS08TEST</a> this is the question"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421256388, "post_id": 27946176, "comment_id": 44292650, "body": "Post the examples here."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "edited": false, "score": 0, "creation_date": 1421255248, "post_id": 27948394, "comment_id": 44291931, "body": "i am new to programming with beginner level skills ... therefore i did not get you completely but i hope its correct."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "edited": false, "score": 0, "creation_date": 1421256217, "post_id": 27948394, "comment_id": 44292535, "body": "@HawkEyez : as your are a beginner it is normal you make mistakes :-). Learn from them : take time to understand what was wrong and why, so you no longer make same again. Good luck ... PS : for the floating point accuracy problem do read <a href=\"http://stackoverflow.com/questions/2100490/floating-point-inaccuracy-examples\">Floating point inaccuracy examples</a> suggested by dandan78."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421256641, "post_id": 27948394, "comment_id": 44292808, "body": "Using <code>(((double)((int)(y * 100 + 0.5))) &#47; 100.)</code> to round to nearest 0.01 is incorrect for negative numbers and fails for values larger than <code>INT_MAX</code>.  Better to use <code>round(y * 100)&#47;100</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421257223, "post_id": 27948394, "comment_id": 44293163, "body": "I now see the 0-2000 requirement buried in the comments. T&#39;would been better had those requirements been posted by OP in the post.  BTW: I should have said &quot;fails for <code>y</code> values larger than <code>INT_MAX&#47;100</code>&quot;.  Likely OP&#39;s <code>INT_MAX</code> is not the minimal 32767."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421257372, "post_id": 27948394, "comment_id": 44293263, "body": "@chux : requirement was for numbers  between 0 and 2000 (seen in OP code) and <code>round</code> is not available below C++11 nor under MSVC ... even if is definitively cleaner than my awkward line !"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421258710, "post_id": 27948394, "comment_id": 44294088, "body": "Hmmm:   <code>round()</code> is in the 16 year-old C99 spec and is in <a href=\"http://msdn.microsoft.com/en-us/library/dn353646.aspx\" rel=\"nofollow noreferrer\">VS 2013</a>"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 5, "last_activity_date": 1421257269, "last_edit_date": 1421257269, "creation_date": 1421254771, "answer_id": 27948394, "question_id": 27946176, "link": "https://stackoverflow.com/questions/27946176/input-a-float-with-two-digits-of-precision/27948394#27948394", "title": "input a float with two digits of precision", "body": "<p>There is a problem in proposed solution. According to <a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"noreferrer\">cplusplus.com</a>, the format <code>f</code> only accepts a width and no precision.</p>\n\n<p>If you had controlled the return from the <code>scanf</code> (what you should definitively always do - and now you know why !) you would have seen immediately the problem :</p>\n\n<pre><code>int x, cr;\nfloat balance,y;\ncr = scanf(\"%d %.2f\",&amp;x,&amp;y);\nif (cr != 2) {\n    fprintf(stderr, \"Read error : cr = %d\\n\", cr);\n}\n</code></pre>\n\n<p>Given any input, you will get : </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Read error : cr = 1\n</code></pre>\n\n<p>Possible implementation with very little change : </p>\n\n<pre><code>cr = scanf(\"%d %f\",&amp;x,&amp;y);\nif (cr != 2) {\n    fprintf(stderr, \"Read error : cr = %d\\n\", cr);\n}\n// should round to only two digits - within floating point accuracy \ny = (((double)((int)(y * 100 + 0.5))) / 100.);\n</code></pre>\n\n<p>If you have a system where <code>math.h</code> contains <code>round</code> (not MSVC :-( ), last line is better written as (thanks to chux for proposing it) :</p>\n\n<pre><code>y = round(y * 100)/100\n</code></pre>\n\n<p>because above formula will fail for negative y and for <code>y &gt; INT_MAX / 100</code></p>\n\n<p>If you really needed exact precision with two decimal digit, the correct way would be to do all computation as <strong>integer</strong> on <strong>long</strong>, taking the numbers multiplied by 100. I leave that as an exercise for the reader :-)</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1421259245, "last_edit_date": 1421259245, "creation_date": 1421257484, "answer_id": 27949196, "question_id": 27946176, "link": "https://stackoverflow.com/questions/27946176/input-a-float-with-two-digits-of-precision/27949196#27949196", "title": "input a float with two digits of precision", "body": "<p>This answer inputs a float then checks it was in the correct format. But If you are working with money you should be using <code>int cents;</code> unless you have megabucks and don't care about cents, or are working to fractions of a penny (in which case you could work in 10th of a penny).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define BUFLEN  20\n\nint main()\n{\n    float money;\n    char buff[BUFLEN+1], bank[BUFLEN+1], *eptr;\n    printf (\"Input the money: \");\n    if (fgets(buff, BUFLEN, stdin) == NULL) {\n        printf(\"Failed input\\n\");\n        return 1;\n    }\n    if ((eptr = strchr (buff, '\\n')) != NULL)   // newline?\n        *eptr = 0;                              // terminate\n    if (sscanf(buff, \"%f\", &amp;money) != 1) {      // get the money\n        printf(\"Failed input\\n\");\n        return 1;\n    }\n    sprintf(bank, \"%0.2f\", money);              // check format of entry\n    if (strcmp(bank, buff)) {\n        printf(\"2 digit precision please: Euros.cents\\n\");\n        return 1;\n    }\n    printf(\"You paid %s\\n\", bank);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3714117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MOxQx.jpg?s=128&g=1", "display_name": "HawkEyez", "link": "https://stackoverflow.com/users/3714117/hawkeyez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8541, "favorite_count": 0, "accepted_answer_id": 27948394, "answer_count": 2, "score": 3, "last_activity_date": 1518986865, "creation_date": 1421248399, "last_edit_date": 1518986865, "question_id": 27946176, "link": "https://stackoverflow.com/questions/27946176/input-a-float-with-two-digits-of-precision", "title": "input a float with two digits of precision", "body": "<p>I am working on a problem that requires me to input a float with exactly 2 digits of precision.</p>\n\n<p>I know how to print a float with two digits of precision but how can I input a float under this condition? I think this is the problem with my program because there is no compilation error as such but it just says wrong answer. I am working with C language.</p>\n\n<p>I tried to read an <code>int</code> and a <code>float</code> with two digits of precision as required the following way:</p>\n\n<pre><code>int x;\nfloat balance,y;\nscanf(\"%d %.2f\",&amp;x,&amp;y);\n</code></pre>\n\n<p>For complete references, here are the <a href=\"http://www.codechef.com/problems/HS08TEST/\" rel=\"nofollow noreferrer\">question</a> and my <a href=\"http://www.codechef.com/viewsolution/5899676\" rel=\"nofollow noreferrer\">solution</a></p>\n"}, {"tags": ["c", "monitor", "xlib", "brightness", "xrandr"], "answers": [{"comments": [{"owner": {"reputation": 4161, "user_id": 2998612, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c2a14786a7098647715bfac3d2a5042?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Dong", "link": "https://stackoverflow.com/users/2998612/kevin-dong"}, "edited": false, "score": 2, "creation_date": 1421298509, "post_id": 27954200, "comment_id": 44308686, "body": "According to the <a href=\"http://manpages.ubuntu.com/manpages/precise/man1/xrandr.1.html\" rel=\"nofollow noreferrer\">man page</a>, <code>xbacklight</code> and <code>xrandr --brightness</code> are totally different. <code>xblacklight</code> controls hardware brightness if possible, but <code>xrandr</code> doesn&#39;t."}, {"owner": {"reputation": 22804, "user_id": 705115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/212db408fb84ef88b9d5c6b543076c1d?s=128&d=identicon&r=PG", "display_name": "Andrey Sidorov", "link": "https://stackoverflow.com/users/705115/andrey-sidorov"}, "reply_to_user": {"reputation": 4161, "user_id": 2998612, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c2a14786a7098647715bfac3d2a5042?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Dong", "link": "https://stackoverflow.com/users/2998612/kevin-dong"}, "edited": false, "score": 0, "creation_date": 1421314503, "post_id": 27954200, "comment_id": 44314386, "body": "which one do you need? both gamma and backlight changed via randr extension calls"}, {"owner": {"reputation": 4161, "user_id": 2998612, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c2a14786a7098647715bfac3d2a5042?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Dong", "link": "https://stackoverflow.com/users/2998612/kevin-dong"}, "edited": false, "score": 0, "creation_date": 1421317104, "post_id": 27954200, "comment_id": 44315847, "body": "Both gamma and backlight changed is okay, but I want to know how <code>xrandr</code> implements for brightness. <code>xblacklight</code> doesn&#39;t affect my monitor brightness, but <code>xrandr</code> does."}, {"owner": {"reputation": 322, "user_id": 5994170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/228781c59f0e8df1c234a2b936529ded?s=128&d=identicon&r=PG&f=1", "display_name": "mirh", "link": "https://stackoverflow.com/users/5994170/mirh"}, "edited": false, "score": 0, "creation_date": 1561298478, "post_id": 27954200, "comment_id": 100009228, "body": "<a href=\"https://gitlab.freedesktop.org/xorg/app/xbacklight/blob/xbacklight-1.2.2/xbacklight.c#L113\" rel=\"nofollow noreferrer\">Xblacklight</a> (same also for <code>xrandr --set backlight</code>) likely doesn&#39;t affect your monitor because not every xf86-video driver supports its RandR&#39;s <a href=\"https://cgit.freedesktop.org/xorg/proto/randrproto/tree/randrproto.txt?h=randrproto-1.5.0#n1905\" rel=\"nofollow noreferrer\">backlight</a> property. <code>Xrandr</code><a href=\"https://gitlab.freedesktop.org/xorg/app/xrandr/blob/xrandr-1.5.0/xrandr.c#L1105\" rel=\"nofollow noreferrer\"><code>--brightness</code></a> is instead just working &quot;in software&quot; with gamma and colours <i>internally</i> to the server, and that&#39;s why it always appear to work."}], "tags": [], "owner": {"reputation": 22804, "user_id": 705115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/212db408fb84ef88b9d5c6b543076c1d?s=128&d=identicon&r=PG", "display_name": "Andrey Sidorov", "link": "https://stackoverflow.com/users/705115/andrey-sidorov"}, "is_accepted": false, "score": 2, "last_activity_date": 1421277102, "creation_date": 1421277102, "answer_id": 27954200, "question_id": 27946151, "link": "https://stackoverflow.com/questions/27946151/how-to-change-the-monitor-brightness-by-x11-randr-extension-library/27954200#27954200", "title": "How to change the monitor brightness by X11 RandR extension library?", "body": "<p>yes, xrandr extension, RRChangeOutputProperty request. With libXrandr it's XRRChangeOutputProperty function. See usage example example in <a href=\"http://www.opensource.apple.com/source/X11apps/X11apps-44/xbacklight/xbacklight-1.1.2/xbacklight.c\" rel=\"nofollow\">xbacklight source</a></p>\n"}], "owner": {"reputation": 4161, "user_id": 2998612, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c2a14786a7098647715bfac3d2a5042?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Dong", "link": "https://stackoverflow.com/users/2998612/kevin-dong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1421277102, "creation_date": 1421248332, "question_id": 27946151, "link": "https://stackoverflow.com/questions/27946151/how-to-change-the-monitor-brightness-by-x11-randr-extension-library", "title": "How to change the monitor brightness by X11 RandR extension library?", "body": "<p>I can simply change my monitor brightness via</p>\n\n<pre><code>xrandr --output VGA1 --brightness 0.25\n</code></pre>\n\n<p>Though it is software-only modification, it does the trick anyway. According to the man page, <code>xrandr</code> is the primitive command line interface to RandR extension, so it is quiet possible to change my monitor brightness programmatically. However, I didn't find any related API in its header file <a href=\"http://www.x.org/archive/current/doc/man/man3/Xrandr.3.xhtml\" rel=\"nofollow\"><code>&lt;X11/extensions/Xrandr.h&gt;</code></a>.</p>\n\n<p>How to change the monitor brightness by X11 RandR extension library in C?</p>\n"}, {"tags": ["c", "file", "input"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1421248417, "post_id": 27946099, "comment_id": 44287451, "body": "Why are you using a text file for this sort of thing? Why not a proper database?"}, {"owner": {"reputation": 1346, "user_id": 3866697, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/wluzX.jpg?s=128&g=1", "display_name": "NemanjaT", "link": "https://stackoverflow.com/users/3866697/nemanjat"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1421248800, "post_id": 27946099, "comment_id": 44287703, "body": "Because it&#39;s a college assignment where I have to use a text file :) I agree it&#39;s pointless, though."}], "answers": [{"comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1421249027, "post_id": 27946164, "comment_id": 44287829, "body": "One way to fix it is to open the file for reading, unlink/remove it and then open it for writing. That way you can continue to read the old content until you close <code>ifp</code> because the output will be a brand new file located somewhere else on the disk. Most people still go with a temporary file, because that way your file won&#39;t be destroyed in case of errors."}, {"owner": {"reputation": 1346, "user_id": 3866697, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/wluzX.jpg?s=128&g=1", "display_name": "NemanjaT", "link": "https://stackoverflow.com/users/3866697/nemanjat"}, "edited": false, "score": 0, "creation_date": 1421249273, "post_id": 27946164, "comment_id": 44287975, "body": "Yeah, I went for the temporary file just to see if I&#39;ll have the same response as earlier (only last line), but it worked out pretty nicely. Now I write it to temp-baza.txt then transfer that back to baza.txt... But I&#39;m interested, doesn&#39;t the file &quot;sustain&quot; itself in r mode? Or does it get deleted as well if the file in w is overwritten? Regardless, thank you all for your help! :)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1421248373, "creation_date": 1421248373, "answer_id": 27946164, "question_id": 27946099, "link": "https://stackoverflow.com/questions/27946099/deleting-specific-lines-in-a-file-in-c/27946164#27946164", "title": "Deleting specific lines in a file in C", "body": "<p>You can't open the same file for both reading and writing <em>separately</em>, the second <code>fopen</code> call will truncate the file and therefore you will loose all content.</p>\n\n<p>Instead the usual way to handle your case is to write to a temporary file, and when done rename the temporary file as the original file.</p>\n\n<p>As a side-note, don't do <code>while (!feof(...))</code>, it will in most cases not work as you expect it to, because the end-of-file flag will not be set until <em>after</em> you try to read from beyond the end of the file, and you will iterate the loop one extra time. Instead do e.g. <code>while (fgets(...) != NULL)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1421249334, "creation_date": 1421249334, "answer_id": 27946512, "question_id": 27946099, "link": "https://stackoverflow.com/questions/27946099/deleting-specific-lines-in-a-file-in-c/27946512#27946512", "title": "Deleting specific lines in a file in C", "body": "<p>You should never open a file from which you want to read in <code>w+</code> mode, because you will truncate it before reading. At best you can keep what the system or the library put in cache but it is underterminated behaviour.</p>\n\n<p>As you rewind <code>ofp</code> file before reading, you should open it in <code>a+</code> mode, but <code>r+</code> would even be better since it gives pointer initially positionned at beginning of file. To solve the problem of garbage at end of file you simply have to truncate <code>ofp</code> at current offset just before closing it, of course without rewinding !</p>\n\n<p>The end of your program should be :</p>\n\n<pre><code>printf(\"OK\\n\");\nprintf(\"Closing input and output files... \");\n    off_t offset = ftell(ofp);\n    ftruncate(ofp, offset);\n    /* rewind(ifp); useless\n    rewind(ofp); */\n    fclose(ifp);\n    fclose(ofp);\nprintf(\"OK\\n\");\n</code></pre>\n"}], "owner": {"reputation": 1346, "user_id": 3866697, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/wluzX.jpg?s=128&g=1", "display_name": "NemanjaT", "link": "https://stackoverflow.com/users/3866697/nemanjat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 27946164, "answer_count": 2, "score": 0, "last_activity_date": 1421249334, "creation_date": 1421248173, "question_id": 27946099, "link": "https://stackoverflow.com/questions/27946099/deleting-specific-lines-in-a-file-in-c", "title": "Deleting specific lines in a file in C", "body": "<p>Current deleting part of the code.</p>\n\n<pre><code>printf(\"Opening input and output file... \");\n    if ((ifp = fopen(\"baza.txt\", \"r\")) == NULL){\n        fprintf(stderr, \"Error! input file open error.\");\n        exit(1);\n    }\n    if ((ofp = fopen(\"baza.txt\", \"w\")) == NULL){\n        fprintf(stderr, \"Error! output file open error\");\n        exit(1);\n    }\nprintf(\"OK\\n\");\nprintf(\"Updating file... \");\n    rewind(ofp);            \n    rewind(ifp);            \n    i = 0;\n    while (!feof(ifp)){\n        if (ftell(ifp) == point[i]){\n            i++;\n            for (s = 0; s &lt; 5; s++)\n                fgets(buffer, 30, ifp);\n        }\n        fgets(buffer, 30, ifp);\n        fputs(buffer, ofp); fputs(\"\\n\", baza);\n    }\nprintf(\"OK\\n\");\nprintf(\"Closing input and output files... \");\n    rewind(ifp);\n    rewind(ofp);\n    fclose(ifp);\n    fclose(ofp);\nprintf(\"OK\\n\");\n</code></pre>\n\n<p>Text file:</p>\n\n<pre><code>Samsung\nGalaxy Mini 2\n250\n14\n-\nHTC\nOne X\n350\n25\n-\nSony\nXPERIA\n300\n9\n-\nHUAWEI\nAscend Y530\n116\n9\n-\n</code></pre>\n\n<p>Just to get a couple of thing clear first. There is already a part of the code which finds a specific input (since this is a \"mobile store\" console app, the user can search for a developer, model, price or amount of items currently in the store, followed by a separator between each phone information '-'.</p>\n\n<p>So say a user is searching for a mobile price 350, it will jump to the first price, compare, just 5 lines, compare, etc. If it finds the right value, it stores the position of '-' above it (special case for first item, since it only has a blank space instead of '-'. <strong>ALL THIS UNTIL NOW WORKS FINE</strong>, which is why I didn't include that code.</p>\n\n<p>The problem begins when I try to delete a certain phone from the library. What I had in mind is that it opens up the file in 2 modes, read and write, and rewinds both to beginning (just in case). Now because the \"baza.txt\" file is empty due to opening in w (ofp), but it's still contained in ifp - r, I shuffle through the ifp FILE and import everything to ofp except when the pointer reaches the array location of point.</p>\n\n<p><strong>-> The only problem I've got</strong> is that when I open this text file, I can only find the last line of the previous file. It looks like it contantly draws in the text on first line, never skipping to the second. In a+ mode this works fine, but the problem is that in a+ mode it doesn't delete the content, leaving a mess in the file - duplicates, leftovers etc. since the file gets shrinked.</p>\n\n<p>I also tried closing ofp as soon as I opened it (since it's an empty file now) and opening it in a+, but the compiler doesn't like that, apparently.</p>\n\n<p>Sorry for the long post</p>\n\n<p>Tl/Dr. Read from the <strong>-></strong> above.</p>\n"}, {"tags": ["c", "glib"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1421249212, "post_id": 27946095, "comment_id": 44287941, "body": "Can&#39;t you wrap the binary data in a structure that contains a pointer to the data as well as its length? Then use that structure instead of the raw binary data pointer."}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421251829, "post_id": 27946095, "comment_id": 44289685, "body": "Thanks Joachim. It involves some extra work on memory operation, but this is a good workaround."}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1424329279, "last_edit_date": 1592644375, "creation_date": 1424327754, "answer_id": 28600044, "question_id": 27946095, "link": "https://stackoverflow.com/questions/27946095/glib-hash-function-for-binary-data/28600044#28600044", "title": "glib hash function for binary data", "body": "<p>Use <a href=\"https://developer.gnome.org/glib/stable/glib-Byte-Arrays.html#g-bytes-new\" rel=\"nofollow noreferrer\">g_bytes_new</a> (or similar) to put your data and length into a <a href=\"https://developer.gnome.org/glib/stable/glib-Byte-Arrays.html#GBytes\" rel=\"nofollow noreferrer\">GBytes struct</a> and use the provided <a href=\"https://developer.gnome.org/glib/stable/glib-Byte-Arrays.html#g-bytes-hash\" rel=\"nofollow noreferrer\">g_bytes_hash()</a> and <a href=\"https://developer.gnome.org/glib/stable/glib-Byte-Arrays.html#g-bytes-equal\" rel=\"nofollow noreferrer\">g_bytes_equal()</a> to <a href=\"https://developer.gnome.org/glib/stable/glib-Hash-Tables.html#g-hash-table-new\" rel=\"nofollow noreferrer\">initialize the hash table</a>.</p>\n<blockquote>\n<p>A GBytes can come from many different origins that may have different procedures for freeing the memory region. Examples are memory from g_malloc(), from memory slices, from a GMappedFile or memory from other allocators.</p>\n<p>GBytes work well as keys in GHashTable. Use g_bytes_equal() and g_bytes_hash() as parameters to g_hash_table_new() or g_hash_table_new_full(). GBytes can also be used as keys in a GTree by passing the g_bytes_compare() function to g_tree_new().</p>\n</blockquote>\n<p>If your data is fixed width and the extra memory bothers you, you can write your own <a href=\"https://developer.gnome.org/glib/stable/glib-Hash-Tables.html#GHashFunc\" rel=\"nofollow noreferrer\">GHashFunc</a> and <a href=\"https://developer.gnome.org/glib/stable/glib-Hash-Tables.html#GEqualFunc\" rel=\"nofollow noreferrer\">GEqualFunc</a> as thin wrappers which temporarily put your data into a GBytes struct in order to use g_bytes_hash() and g_bytes_equal().</p>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424329450, "creation_date": 1421248171, "last_edit_date": 1424329450, "question_id": 27946095, "link": "https://stackoverflow.com/questions/27946095/glib-hash-function-for-binary-data", "title": "glib hash function for binary data", "body": "<p>I am trying to use glib to build a hash table, the keys will be some binary strings. </p>\n\n<p>I can't use the builtin function <code>g_str_hash ()</code> since it's for C string (null terminated).  Can't use  the builtin function <code>g_direct_hash ()</code> either since it took just a pointer. There is a no way to specify the length of the key, that's why I can't provide my own version of hash function either (since it will take two parameters: a pointer to key and length to produce a hash,  what is against the function pointer type GHashFunc). </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "c", "variables"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421247895, "post_id": 27945966, "comment_id": 44287099, "body": "I don&#39;t understand your question, can you give an example, and what did you try already?"}, {"owner": {"reputation": 41, "user_id": 3030653, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/12aff33ac5a13ddbec9f30c8b79b50cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3030653", "link": "https://stackoverflow.com/users/3030653/user3030653"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421248089, "post_id": 27945966, "comment_id": 44287233, "body": "<a href=\"http://stackoverflow.com/questions/27940739/embedding-python-in-c-and-continuesly-pass-values-from-a-python-loop-to-the-c-pr\" title=\"embedding python in c and continuesly pass values from a python loop to the c pr\">stackoverflow.com/questions/27940739/&hellip;</a>  This was my initial question but I didnt get any answers and just a few views, so I thought Id try to ask a very simple question.. thanks for downvoting."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3030653, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/12aff33ac5a13ddbec9f30c8b79b50cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3030653", "link": "https://stackoverflow.com/users/3030653/user3030653"}, "edited": false, "score": 0, "creation_date": 1421310127, "post_id": 27947223, "comment_id": 44312280, "body": "I&#39;ve been effectivly embedding Python into my Program and I know how to get a return value. Its not the Issue. Once more here is my initial question: <a href=\"http://stackoverflow.com/questions/27940739/embedding-python-in-c-and-continuesly-pass-values-from-a-python-loop-to-the-c-pr\" title=\"embedding python in c and continuesly pass values from a python loop to the c pr\">stackoverflow.com/questions/27940739/&hellip;</a>  I can only return a value once a function is finished. What I need is to update a value continuesly while the Python function is runnning."}, {"owner": {"reputation": 301, "user_id": 3833263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d580fb2544563a80e0feb3296baae0?s=128&d=identicon&r=PG&f=1", "display_name": "Michael B.", "link": "https://stackoverflow.com/users/3833263/michael-b"}, "reply_to_user": {"reputation": 41, "user_id": 3030653, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/12aff33ac5a13ddbec9f30c8b79b50cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3030653", "link": "https://stackoverflow.com/users/3030653/user3030653"}, "edited": false, "score": 0, "creation_date": 1421429265, "post_id": 27947223, "comment_id": 44369910, "body": "Ah, I see. I&#39;ve updated my answer with some more info. Hopefully that helps."}], "tags": [], "owner": {"reputation": 301, "user_id": 3833263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75d580fb2544563a80e0feb3296baae0?s=128&d=identicon&r=PG&f=1", "display_name": "Michael B.", "link": "https://stackoverflow.com/users/3833263/michael-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1421429156, "last_edit_date": 1421429156, "creation_date": 1421251259, "answer_id": 27947223, "question_id": 27945966, "link": "https://stackoverflow.com/questions/27945966/passing-variable-from-embedded-python-to-c/27947223#27947223", "title": "Passing variable from embedded Python to C", "body": "<p>For embedding, I would recommend looking at the docs on the Python website: <a href=\"https://docs.python.org/3.4/extending/embedding.html#pure-embedding\" rel=\"nofollow\">https://docs.python.org/3.4/extending/embedding.html#pure-embedding</a></p>\n\n<p>The section that is of interest to you is:</p>\n\n<pre><code>if (pModule != NULL) {\n    pFunc = PyObject_GetAttrString(pModule, argv[2]);\n    /* pFunc is a new reference */\n\n    if (pFunc &amp;&amp; PyCallable_Check(pFunc)) {\n        pArgs = PyTuple_New(argc - 3);\n        for (i = 0; i &lt; argc - 3; ++i) {\n            pValue = PyLong_FromLong(atoi(argv[i + 3]));\n            if (!pValue) {\n                Py_DECREF(pArgs);\n                Py_DECREF(pModule);\n                fprintf(stderr, \"Cannot convert argument\\n\");\n                return 1;\n            }\n            /* pValue reference stolen here: */\n            PyTuple_SetItem(pArgs, i, pValue);\n        }\n        pValue = PyObject_CallObject(pFunc, pArgs);\n        Py_DECREF(pArgs);\n        if (pValue != NULL) {\n            printf(\"Result of call: %ld\\n\", PyLong_AsLong(pValue));\n            Py_DECREF(pValue);\n        }\n        else {\n            Py_DECREF(pFunc);\n            Py_DECREF(pModule);\n            PyErr_Print();\n            fprintf(stderr,\"Call failed\\n\");\n            return 1;\n        }\n    }\n    else {\n        if (PyErr_Occurred())\n            PyErr_Print();\n        fprintf(stderr, \"Cannot find function \\\"%s\\\"\\n\", argv[2]);\n    }\n    Py_XDECREF(pFunc);\n    Py_DECREF(pModule);\n}\n</code></pre>\n\n<p>specifically this line: </p>\n\n<pre><code>pValue = PyObject_CallObject(pFunc, pArgs);\n</code></pre>\n\n<p>this is calling a python function (callable python object), pFunc, with arguments pArgs, and returning a python object pValue.</p>\n\n<p>I would suggest reading through that entire page to get a better understanding of embedding python. Also, since you say you know very little python, I would suggest getting more familiar with the language and how different it is from c/c++. You'll need to know more about how python works before you can be effective with embedding it.</p>\n\n<p><strong>Edit:</strong>\nIf you need to share memory between your c/c++ code and python code (Running in separate thread), I don't believe you can share memory directly, and least not in the way you would normally do with just c/c++. However, you can create a memory mapped file to achieve the same effect with about the same performance. Doing so is going to be platform dependent, and I don't have any experience with doing so, but here is a link that should help: <a href=\"http://www.codeproject.com/Articles/11843/Embedding-Python-in-C-C-Part-II\" rel=\"nofollow\">http://www.codeproject.com/Articles/11843/Embedding-Python-in-C-C-Part-II</a>. </p>\n\n<p>Basically, you just create the mmap in c (this is the platform dependent part) and create an mmap to the same file in your python code, then write/read to/from the file descriptor in each of your threads.</p>\n"}], "owner": {"reputation": 41, "user_id": 3030653, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/12aff33ac5a13ddbec9f30c8b79b50cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3030653", "link": "https://stackoverflow.com/users/3030653/user3030653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 811, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421429156, "creation_date": 1421247815, "last_edit_date": 1421269598, "question_id": 27945966, "link": "https://stackoverflow.com/questions/27945966/passing-variable-from-embedded-python-to-c", "title": "Passing variable from embedded Python to C", "body": "<p>Can Someone please explain to me how I can pass a Variable from embedded Python to my C Program?\nI've looked everywhere on the web and what I found I did not understand, because I know very little Python.</p>\n\n<p>I tried to create a callback function in C, but I did not understand how its supposed to work.</p>\n\n<p>Now, my main program is in C. There I create a Python Object and in a thread and call a Python Function from a Python Script. This Function produces values and these values I need to pass back to the C program for further use.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 5, "creation_date": 1421247783, "post_id": 27945900, "comment_id": 44287013, "body": "Because you weren&#39;t lucky enough."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1421247796, "post_id": 27945900, "comment_id": 44287020, "body": "It&#39;s not supposed to do anything, that&#39;s what undefined means."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1421248156, "post_id": 27945900, "comment_id": 44287270, "body": "Your code exhibits Undefined Behavior which means that anything can happen."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1421248205, "post_id": 27945900, "comment_id": 44287318, "body": "&quot;Segmentation fault&quot; means the operating system&#39;s memory protection has kicked in. It&#39;s not something related to the language in any way, <b>and not something implemented by every operating system</b>. On some systems, <i>if you are lucky</i> you are just crashing the whole system (instead of e.g. subtly corrupting the data of a different process). Never, <b>ever</b>, rely on the environment to protect you from programming error."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1421248277, "post_id": 27945900, "comment_id": 44287361, "body": "Besides, you were already in UB land from the <code>void main()</code> on."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 11, "last_activity_date": 1421247767, "creation_date": 1421247767, "answer_id": 27945956, "question_id": 27945900, "link": "https://stackoverflow.com/questions/27945900/code-is-supposed-to-give-segmentation-fault-but-its-not-why/27945956#27945956", "title": "code is supposed to give segmentation fault... But its not. Why?", "body": "<p>Undefined behaviour is not guaranteed to cause a segmentation fault.</p>\n"}, {"tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": false, "score": 2, "last_activity_date": 1421249999, "creation_date": 1421249999, "answer_id": 27946770, "question_id": 27945900, "link": "https://stackoverflow.com/questions/27945900/code-is-supposed-to-give-segmentation-fault-but-its-not-why/27946770#27946770", "title": "code is supposed to give segmentation fault... But its not. Why?", "body": "<p>In your example, <code>a</code> is an auto-variable, created on the stack.  Unless you are about to run out of stack, there will almost certainly be more memory available to the process at the address after <code>a</code>.</p>\n\n<p>In C, <code>++a</code> will be the address contained in <code>a</code> plus the size of the object pointed to by <code>a</code>, possibly with some padding (depending on the architecture of the processor).  This will almost certainly be a valid address within your process's address space, as it will also be on the stack.  Hence no seg fault.</p>\n\n<p>Try the following code and see what you get.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int *ptr;\n    int a=5;\n    int not_a=-1;\n    ptr=&amp;a;\n    printf(\"%p\\n\",&amp;a);\n    printf(\" %d\\n\",*++ptr);\n    return 0;\n}\n</code></pre>\n\n<p>(This may not work on all architectures, or with all compilers.  It depends how the compiler handles the allocation of the auto-variables.)</p>\n"}], "owner": {"reputation": 1, "user_id": 4106807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xNrBJokqJjk/AAAAAAAAAAI/AAAAAAAABiU/2fYJkBgjHms/photo.jpg?sz=128", "display_name": "K K SAI", "link": "https://stackoverflow.com/users/4106807/k-k-sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1421249999, "creation_date": 1421247637, "question_id": 27945900, "link": "https://stackoverflow.com/questions/27945900/code-is-supposed-to-give-segmentation-fault-but-its-not-why", "title": "code is supposed to give segmentation fault... But its not. Why?", "body": "<p>In the fallowing code the pointer ptr is referenced to a integer variable. when is say *++ptr it is showing a value instead of showing segmentation fault. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    int *ptr;\n    int a=5;\n    ptr=&amp;a;\n    printf(\"%p\\n\",&amp;a);\n    printf(\" %d\\n\",*++ptr);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "memory", "memory-management", "glibc"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1421247678, "post_id": 27945855, "comment_id": 44286921, "body": "malloc - memory allocate. it only allocates, it doesn&#39;t &quot;free&quot; memory for re-use, which is why there&#39;s free()."}, {"owner": {"reputation": 751, "user_id": 1652889, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/9213de4732d4b5ef72fd87b37a6ad9d2?s=128&d=identicon&r=PG", "display_name": "Itay Marom", "link": "https://stackoverflow.com/users/1652889/itay-marom"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1421247687, "post_id": 27945855, "comment_id": 44286931, "body": "hmm, seems like this might be the solution: <a href=\"http://stackoverflow.com/questions/2215259/will-malloc-implementations-return-free-ed-memory-back-to-the-system?rq=1\" title=\"will malloc implementations return free ed memory back to the system\">stackoverflow.com/questions/2215259/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421247734, "post_id": 27945855, "comment_id": 44286979, "body": "This is not a problem with your program or the <code>malloc</code>/<code>free</code> calls, it&#39;s the operating system that keeps the previously allocated memory-pages mapped to your process. If the OS needs those free pages it will take them when needed. I&#39;m to lazy to find a duplicate, but there are many duplicates of this question."}, {"owner": {"reputation": 751, "user_id": 1652889, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/9213de4732d4b5ef72fd87b37a6ad9d2?s=128&d=identicon&r=PG", "display_name": "Itay Marom", "link": "https://stackoverflow.com/users/1652889/itay-marom"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421247798, "post_id": 27945855, "comment_id": 44287023, "body": "@JoachimPileborg actually this is not working apparently. i got a crash from Linux kernel saying there is not enough memory. when i called my process with fork and it was killed, sbrk was released and i was able to continue. so the OS did not call sbrk to release the previously freed memory"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421247920, "post_id": 27945855, "comment_id": 44287121, "body": "How much memory do you allocate? Did you free that memory before forking? When you try to fork, how much free memory was available?"}, {"owner": {"reputation": 751, "user_id": 1652889, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/9213de4732d4b5ef72fd87b37a6ad9d2?s=128&d=identicon&r=PG", "display_name": "Itay Marom", "link": "https://stackoverflow.com/users/1652889/itay-marom"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421248033, "post_id": 27945855, "comment_id": 44287200, "body": "@JoachimPileborg see this <a href=\"http://man7.org/linux/man-pages/man3/mallopt.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/mallopt.3.html</a> M_TRIM_THRESHOLD this answer the question - malloc waits for enough contigious free memory to call sbrk and return the memory back to the OS"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421248081, "post_id": 27945855, "comment_id": 44287228, "body": "The title in this question is confusing, it made me think that the OP didn&#39;t now about <code>free()</code>."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1421258164, "post_id": 27945855, "comment_id": 44293772, "body": "You should have a look to <a href=\"http://stackoverflow.com/questions/2215259/will-malloc-implementations-return-free-ed-memory-back-to-the-system\" title=\"will malloc implementations return free ed memory back to the system\">stackoverflow.com/questions/2215259/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 6, "last_activity_date": 1421248786, "creation_date": 1421248786, "answer_id": 27946322, "question_id": 27945855, "link": "https://stackoverflow.com/questions/27945855/force-free-to-return-malloc-memory-back-to-os/27946322#27946322", "title": "Force free() to return malloc memory back to OS", "body": "<p>The only reliable and portable way to have the OS reclaim memory is to <strong>exit the process</strong> and restart it again, restoring any state you need to continue.</p>\n\n<p>Of course, writing your own malloc/free implementation using brk/sbrk according to your needs is the other option.</p>\n"}, {"tags": [], "owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "is_accepted": true, "score": 5, "last_activity_date": 1509561152, "creation_date": 1509561152, "answer_id": 47061458, "question_id": 27945855, "link": "https://stackoverflow.com/questions/27945855/force-free-to-return-malloc-memory-back-to-os/47061458#47061458", "title": "Force free() to return malloc memory back to OS", "body": "<p>With glibc malloc try to call <code>malloc_trim</code> function. It is not well documented and there were changes inside it at around 2007 (glibc 2.9) - <a href=\"https://stackoverflow.com/a/42281428\">https://stackoverflow.com/a/42281428</a>.</p>\n\n<p>Since 2007 this function will:  Iterate over all malloc memory arenas (used in multithreaded applications) doing trim and fastbin consolidation; and release all aligned (4KB) pages fully freed.</p>\n\n<p><a href=\"https://sourceware.org/git/?p=glibc.git;a=commit;f=malloc/malloc.c;h=68631c8eb92ff38d9da1ae34f6aa048539b199cc\" rel=\"noreferrer\">https://sourceware.org/git/?p=glibc.git;a=commit;f=malloc/malloc.c;h=68631c8eb92ff38d9da1ae34f6aa048539b199cc</a></p>\n\n<blockquote>\n  <p>Ulrich Drepper  \n  Sun, 16 Dec 2007 22:53:08 +0000 (22:53 +0000)</p>\n  \n  <ul>\n  <li>malloc/malloc.c (public_mTRIm): Iterate over all arenas and call mTRIm for all of them.</li>\n  </ul>\n  \n  <p>(mTRIm): Additionally iterate over all free blocks and use madvise\n  to free memory for all those blocks which contain at least one\n  memory page.</p>\n</blockquote>\n\n<p><a href=\"https://sourceware.org/git/?p=glibc.git;a=blobdiff;f=malloc/malloc.c;h=c54c203cbf1f024e72493546221305b4fd5729b7;hp=1e716089a2b976d120c304ad75dd95c63737ad75;hb=68631c8eb92ff38d9da1ae34f6aa048539b199cc;hpb=52386be756e113f20502f181d780aecc38cbb66a\" rel=\"noreferrer\">https://sourceware.org/git/?p=glibc.git;a=blobdiff;f=malloc/malloc.c;h=c54c203cbf1f024e72493546221305b4fd5729b7;hp=1e716089a2b976d120c304ad75dd95c63737ad75;hb=68631c8eb92ff38d9da1ae34f6aa048539b199cc;hpb=52386be756e113f20502f181d780aecc38cbb66a</a></p>\n\n<pre><code>+  malloc_consolidate (av);\n...\n+  for (int i = 1; i &lt; NBINS; ++i)\n...\n+        for (mchunkptr p = last (bin); p != bin; p = p-&gt;bk)\n+         {\n...\n+               /* See whether the chunk contains at least one unused page.  */\n+               char *paligned_mem = (char *) (((uintptr_t) p\n+                                               + sizeof (struct malloc_chunk)\n+                                               + psm1) &amp; ~psm1);\n...\n+               /* This is the size we could potentially free.  */\n+               size -= paligned_mem - (char *) p;\n+\n+               if (size &gt; psm1)\n+                 {\n...\n+                   madvise (paligned_mem, size &amp; ~psm1, MADV_DONTNEED);\n</code></pre>\n\n<p>So, calling <code>malloc_trim</code> will release almost all freed memory back to the OS. Only pages containing still not freed data will be kept; OS may unmap or not unmap physical page when madvised with MADV_DONTNEED and linux usually does unmap. madvised pages are still count to VSIZE (total virtual memory size of the process), but usually help to reduce RSS (amount of physical memory used by process).</p>\n\n<p>Alternatively, you can try to switch into alternative malloc library: tcmalloc (gperftools / google-perftools) or jemalloc (facebook), both of them have aggressive rules of returning freed memory back to OS (with madvise MADV_DONTNEED or even <a href=\"https://lwn.net/Articles/590693/\" rel=\"noreferrer\">MADV_FREE</a>).</p>\n"}], "owner": {"reputation": 751, "user_id": 1652889, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/9213de4732d4b5ef72fd87b37a6ad9d2?s=128&d=identicon&r=PG", "display_name": "Itay Marom", "link": "https://stackoverflow.com/users/1652889/itay-marom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4127, "favorite_count": 2, "accepted_answer_id": 47061458, "answer_count": 2, "score": 10, "last_activity_date": 1593475986, "creation_date": 1421247492, "last_edit_date": 1593475986, "question_id": 27945855, "link": "https://stackoverflow.com/questions/27945855/force-free-to-return-malloc-memory-back-to-os", "title": "Force free() to return malloc memory back to OS", "body": "<p>Seems like even after I free all the memory for a Linux process that was allocated by <code>malloc()</code>,\nmemory is still reserved for the process and not returned to the OS.</p>\n<p>Running <code>valgrind massif</code> tool by default reveals no leakages.</p>\n<p>Running <code>valgrind</code> with <code>--pages-as-heap=yes</code> reveals this:</p>\n<blockquote>\n<p>-&gt;13.77% (7,655,424B) 0x35FEEEB069: brk (brk.c:31)</p>\n<p>-&gt;13.77% (7,655,424B) 0x35FEEEB113: sbrk (sbrk.c:53)</p>\n<p>-&gt;13.77% (7,655,424B) 0x35FEE82717: __default_morecore (morecore.c:48)</p>\n<p>-&gt;13.77% (7,655,424B) 0x35FEE7DCCB: _int_malloc (malloc.c:2455)</p>\n<p>-&gt;13.77% (7,655,424B) 0x35FEE7F4F1: malloc (malloc.c:2862)</p>\n</blockquote>\n<p>so even though memory was already freed by <code>free()</code>, it seems that <code>malloc</code> called <code>brk/sbrk</code> and did not return this to the OS.</p>\n<p>how can I force <code>free()</code> to call <code>sbrk()</code> immediately and return all memory back to the OS ?</p>\n<p>I am running on a very low end platform which every MB counts.</p>\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "c", "eclipse", "windows", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 234, "user_id": 1835391, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5cc47abc5ea0fc3368d563e4d6a7f6b4?s=128&d=identicon&r=PG", "display_name": "ZuOverture", "link": "https://stackoverflow.com/users/1835391/zuoverture"}, "is_accepted": false, "score": 2, "last_activity_date": 1435161752, "creation_date": 1435161752, "answer_id": 31031464, "question_id": 27945500, "link": "https://stackoverflow.com/questions/27945500/opencv-3-0-0-and-2-4-10-dont-have-mingw-folder/31031464#31031464", "title": "opencv 3.0.0 and 2.4.10 dont have MinGW folder", "body": "<p>It's not you, OpenCV 2.4.10 does not include MinGW build. Options are:</p>\n\n<ol>\n<li>Build it yourself, using cmake files supplied with OpenCV sources and MinGW generator</li>\n<li>Switch to MSVC toolchain in Eclipse</li>\n</ol>\n"}], "owner": {"reputation": 117, "user_id": 4223080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/63f2bd7c6bbe4b2f6ac1b447d4fe0d73?s=128&d=identicon&r=PG&f=1", "display_name": "sam ran", "link": "https://stackoverflow.com/users/4223080/sam-ran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1435161752, "creation_date": 1421246408, "last_edit_date": 1495540710, "question_id": 27945500, "link": "https://stackoverflow.com/questions/27945500/opencv-3-0-0-and-2-4-10-dont-have-mingw-folder", "title": "opencv 3.0.0 and 2.4.10 dont have MinGW folder", "body": "<p>I am trying to install openCV 3.0.0-beta, MinGW and eclipse. I am following steps given in <a href=\"https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7\">Getting started with OpenCV 2.4 and MinGW on Windows 7</a> But I discover that I dont have C:\\opencv\\build\\x86\\mingw\\ in my opencv folder. Then I also downloaded opencv 2.4.10 but that also doesn't contain mingw folder</p>\n"}, {"tags": ["c", "performance", "vectorization", "intrinsics"], "answers": [{"comments": [{"owner": {"reputation": 736, "user_id": 2076694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f93d7352649b2e40d67a8e2413786ea?s=128&d=identicon&r=PG", "display_name": "user2076694", "link": "https://stackoverflow.com/users/2076694/user2076694"}, "edited": false, "score": 0, "creation_date": 1421254986, "post_id": 27946303, "comment_id": 44291775, "body": "Thank you for your response, I&#39;ll try your hint and have a look at the assembly code."}, {"owner": {"reputation": 57972, "user_id": 131140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/11b4048e49b8b89f670cc984059d1677?s=128&d=identicon&r=PG", "display_name": "Goz", "link": "https://stackoverflow.com/users/131140/goz"}, "reply_to_user": {"reputation": 736, "user_id": 2076694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f93d7352649b2e40d67a8e2413786ea?s=128&d=identicon&r=PG", "display_name": "user2076694", "link": "https://stackoverflow.com/users/2076694/user2076694"}, "edited": false, "score": 0, "creation_date": 1421260675, "post_id": 27946303, "comment_id": 44295179, "body": "@user3018144: Does the removing the malloc help?  If so ... I&#39;d be interested to see by how much ..."}, {"owner": {"reputation": 736, "user_id": 2076694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f93d7352649b2e40d67a8e2413786ea?s=128&d=identicon&r=PG", "display_name": "user2076694", "link": "https://stackoverflow.com/users/2076694/user2076694"}, "edited": false, "score": 0, "creation_date": 1421336181, "post_id": 27946303, "comment_id": 44326830, "body": "No unfortunately it doesn&#39;t help on my hardware configuration could you test the code with the stack allocation (just on CPU) and tell me. Myabe because the allocation is small ?"}, {"owner": {"reputation": 57972, "user_id": 131140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/11b4048e49b8b89f670cc984059d1677?s=128&d=identicon&r=PG", "display_name": "Goz", "link": "https://stackoverflow.com/users/131140/goz"}, "reply_to_user": {"reputation": 736, "user_id": 2076694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f93d7352649b2e40d67a8e2413786ea?s=128&d=identicon&r=PG", "display_name": "user2076694", "link": "https://stackoverflow.com/users/2076694/user2076694"}, "edited": false, "score": 0, "creation_date": 1421342808, "post_id": 27946303, "comment_id": 44331327, "body": "@user3018144: Fair enough the compiler must be optimising the malloc out then.  It is a fixed size malloc so would be easy to optimise out! :)  Unfortunately I don&#39;t have the Intel compiler merely MSVC ..."}], "tags": [], "owner": {"reputation": 57972, "user_id": 131140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/11b4048e49b8b89f670cc984059d1677?s=128&d=identicon&r=PG", "display_name": "Goz", "link": "https://stackoverflow.com/users/131140/goz"}, "is_accepted": false, "score": 2, "last_activity_date": 1421253917, "last_edit_date": 1421253917, "creation_date": 1421248735, "answer_id": 27946303, "question_id": 27945345, "link": "https://stackoverflow.com/questions/27945345/performance-avx-512-vs-autovectorization-on-mic-intel-xeon-phi-coprocessor/27946303#27946303", "title": "Performance AVX-512 vs AutoVectorization on MIC (intel Xeon Phi Coprocessor)", "body": "<p>One of the biggest slow downs you have is that you are _mm_malloc'ing and then _mm_free'ing in every iteration of the loop.  Heap allocations are incredibly slow.  You would be far better off doing a simple stack allocation, i.e.</p>\n\n<pre><code>__declspec( align( 64 ) ) double A[8];\n</code></pre>\n\n<p>This is likely to improve your performance significantly as that dynamic heap management is entirely removed.</p>\n\n<p>That said this is not your main question.  Its quite possible that the intel compiler is vectorising the  loop pretty well.  You should have a look at the assembly that is generated by the compiler and the intrinsics and see whether one is \"intrinsically\" (sorry) better than the other.  If the intrinsics assembly looks better then its likely that most of the time you are seeing is being taken up by memory accesses ...</p>\n"}], "owner": {"reputation": 736, "user_id": 2076694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f93d7352649b2e40d67a8e2413786ea?s=128&d=identicon&r=PG", "display_name": "user2076694", "link": "https://stackoverflow.com/users/2076694/user2076694"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421253917, "creation_date": 1421245945, "last_edit_date": 1421246647, "question_id": 27945345, "link": "https://stackoverflow.com/questions/27945345/performance-avx-512-vs-autovectorization-on-mic-intel-xeon-phi-coprocessor", "title": "Performance AVX-512 vs AutoVectorization on MIC (intel Xeon Phi Coprocessor)", "body": "<p>I'm struggling with manual vectorization on MIC (intel Xeon Phi Coprocessor), I'm working a simple computation benchmarks (actually benchmarking CPU vs MIC and analyzing the vectorizing effect auto vs manual). I wanted to try the effects of the intrinsics. Here is my problem on the CPU, I can observe a gain of performance of 30% with the m256 intrinsics function (vs the CPU without intrinsics) but on the MIC with the m512 the performance is same than the MIC without the intrinsics (OpenMP + intrinsics), is it normal ?</p>\n\n<ul>\n<li>MIC+INTR ~ 3.18 sec</li>\n<li><p>MIC      ~ 3.19 sec</p></li>\n<li><p>CPU+INTR ~ 4.31 sec</p></li>\n<li>CPU      ~ 6.47 sec</li>\n</ul>\n\n<p>The option I used: (intel compiler)</p>\n\n<ul>\n<li>To compile for MIC + intrinsic: -O3 -openmp -DWITH_INTR -restrict</li>\n<li><p>To compile for MIC: -O3 -openmp -restrict</p></li>\n<li><p>To compile for CPU + intrinsic: -O3 -openmp -DWITH_INTR -no-offload -restrict</p></li>\n<li>To compile for CPU: -O3 -openmp -no-offload -restrict</li>\n</ul>\n\n<p>My hardware configuration:</p>\n\n<ul>\n<li>CPU: Intel(R) Xeon(R) CPU E5-2680 0 @ 2.70GHz | SandyBridge (2x8cores | 32 threads)</li>\n<li>MIC: Intel(R) Xeon Phi(TM) coprocessor x100 family (61 cores | 244 threads)</li>\n</ul>\n\n<p>The code seems long but it is just because there is the calculations without the use of intrinsics and the calculations with 256 bit vector and 512 bit vector.</p>\n\n<p>and the code for whom want to reproduce the results:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;omp.h&gt;\n#include &lt;offload.h&gt;\n#include &lt;math.h&gt;\n#include &lt;immintrin.h&gt;\n\n#define N 2&lt;&lt;17\n#define P 2&lt;&lt;14\n\n__declspec(target(mic:0)) void testVctr( double * restrict a, double * restrict b, double * restrict c )\n{\n\n    double t1( omp_get_wtime() );\n\n    omp_set_num_threads(omp_get_max_threads());\n\n    __assume_aligned( a, 64 );\n    __assume_aligned( b, 64 );\n    __assume_aligned( c, 64 );\n\n    int i;\n    int j;\n    int k;\n\n    #ifdef WITH_INTR\n        #ifdef __MIC__\n            __m512d  n1    = _mm512_set1_pd( 1. );\n            __m512d  n1024 = _mm512_set1_pd( 1024. );\n            __m512d  n230  = _mm512_set1_pd( 230. );\n        #else\n            __m256d n1    = _mm256_set1_pd( 1. );\n            __m256d n1024 = _mm256_set1_pd( 1024. );\n            __m256d n230  = _mm256_set1_pd( 230. );\n        #endif\n    #endif\n\n    #pragma omp parallel for private( i, j, k ) schedule( dynamic )\n    for( i=0; i&lt;N; ++i )\n    {\n        #ifdef WITH_INTR\n            #ifdef __MIC__  \n                double * restrict A = (double *restrict) _mm_malloc( (size_t)( (8) * sizeof(double) ), 64 );\n\n                __m512d res   = _mm512_setzero_pd(), r0, r1;\n\n                for( j=0; j&lt;P; j+=8 )\n                {\n                    r0 = _mm512_load_pd( &amp;b[j] );                   \n                    r0 = _mm512_add_pd( r0, n1 );\n                    r0 = _mm512_div_pd( n1, r0 );\n                    r0 = _mm512_exp_pd( r0 );\n\n                    r1 = _mm512_load_pd( &amp;c[j] );                   \n                    r1 = _mm512_mul_pd( r1, n1024 );\n                    r1 = _mm512_add_pd( r1, n230 );\n                    r1 = _mm512_log_pd( r1 );\n\n                    r0 = _mm512_div_pd( r0, r1 );\n\n                    res = _mm512_add_pd( res, r0 );\n                }\n\n                _mm512_store_pd( A, res );\n\n                double tmp(0.);\n                for( k=0; k&lt;8; ++k )\n                    tmp += A[k];\n\n                a[i] = tmp;\n\n                _mm_free( (double * restrict) A );\n\n            #else\n                double * restrict A = (double * restrict) _mm_malloc( (size_t)( (4) * sizeof(double) ), 64 );\n\n                __m256d res   = _mm256_setzero_pd(), r0, r1;\n\n                for( j=0; j&lt;P; j+=4 )\n                {\n                    r0 = _mm256_load_pd( &amp;b[j] );                   \n                    r0 = _mm256_add_pd( r0, n1 );\n                    r0 = _mm256_div_pd( n1, r0 );\n                    r0 = _mm256_exp_pd( r0 );\n\n                    r1 = _mm256_load_pd( &amp;c[j] );\n                    r1 = _mm256_mul_pd( r1, n1024 );\n                    r1 = _mm256_add_pd( r1, n230 );\n                    r1 = _mm256_log_pd( r1 );\n\n                    r0 = _mm256_div_pd( r0, r1 );\n\n                    res = _mm256_add_pd( res, r0 );\n                }\n\n                _mm256_store_pd( A, res );\n\n                double tmp(0.);\n                for( k=0; k&lt;4; ++k )\n                    tmp += A[k];\n\n                a[i] = tmp;\n\n                _mm_free( (double * restrict) A );\n\n            #endif\n        #else\n            double res = 0.;\n\n            #pragma simd            \n            for( j=0; j&lt;P; ++j )\n            {\n                double tmp0 = 1./(b[j]+1.);\n                double tmp1 = exp( tmp0 );\n                double tmp2 = c[j] * 1024;\n                double tmp3 = tmp2 + 230;\n                double tmp4 = log( tmp3 );\n                double tmp5 = tmp1 / tmp4;\n                res += tmp5;\n            }\n\n            a[i] = res;\n        #endif\n    }\n\n    printf(\"\\nElapsed time: %f sec\\n\", omp_get_wtime() - t1 );\n\n}\n\nint main( void )\n{\n    int i;\n\n    printf(\"\\nOuter loop (N) %d iterations \\nInner loop (P) %d iterations\\n\", N, P );\n\n    double * restrict a = (double * restrict) _mm_malloc( (size_t)( (N) * sizeof(double) ), 64 );\n    double * restrict b = (double * restrict) _mm_malloc( (size_t)( (P) * sizeof(double) ), 64 );\n    double * restrict c = (double * restrict) _mm_malloc( (size_t)( (P) * sizeof(double) ), 64 ); \n\n    for( i=0; i&lt;P; ++i )\n    {\n        b[i] = rand()/RAND_MAX;\n        c[i] = rand()/RAND_MAX;\n    }\n\n    #pragma offload target( mic : 0 ) \\\n    out( a : length( N ) align(512) ) \\\n    in ( b : length( P ) align(512) ) \\\n    in ( c : length( P ) align(512) ) \n    testVctr( a, b, c );        \n\n    printf( \"\\nCheck last result: %f (~ 1.)\\n\", a[N-1]*2./(P) );\n\n    _mm_free( (double * restrict) a );\n    _mm_free( (double * restrict) b );\n    _mm_free( (double * restrict) c );\n\n    return 0;\n}\n</code></pre>\n\n<p>Perhaps, I missed something in the code or some option in the compilation command.</p>\n\n<p>I'll try any suggestion.</p>\n\n<p>Thank you.</p>\n\n<p>GS</p>\n"}, {"tags": ["c", "arm", "embedded", "cortex-m"], "answers": [{"comments": [{"owner": {"reputation": 2508, "user_id": 617485, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/a4dYV.png?s=128&g=1", "display_name": "Ospho", "link": "https://stackoverflow.com/users/617485/ospho"}, "edited": false, "score": 0, "creation_date": 1426051514, "post_id": 27945861, "comment_id": 46208651, "body": "Pretty sure he is talking about the STM32F4."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 0, "last_activity_date": 1421247513, "creation_date": 1421247513, "answer_id": 27945861, "question_id": 27945069, "link": "https://stackoverflow.com/questions/27945069/arm-cortex-m4-running-code-from-external-flash/27945861#27945861", "title": "ARM Cortex-M4: Running code from external flash", "body": "<p>cortex-m4 has nothing to do with what you are talking about, the cortex-m4 as with all arm processor cores is just a processor core nothing more, arm makes IP not chips.  You have to look at the chip vendors implementation, do any of them provide the ability to execute code on an external flash interface.  I would assume not, just like it is hard to find a microcontroller that executes from external ram but those are more often found than flash.  With almost all you can certainly copy and run or flash and run, code running on an internal chip resource copies code from the external resource to something internal (rom/ram) then runs it there, that code can again copy and jump or go back to the main on chip firmware to copy and load the next overlay.</p>\n\n<p>The chip vendor should be able to tell you the lifespan of the flash, flashes wear out, code designed to be regularly/constantly erasing and writing the flash will wear out that part in days perhaps or weeks or months depending on how badly you punish the flash.  Saving state to prom or flash when power is lost, say the odometer reading on a vehicle for example, is okay that is a once or a few times a day thing or it may be once every few years thing, but saving every tenth of a mile will wear out that part before the lifetime of the vehicle.</p>\n\n<p>The m4s are hard to call microcontrollers with all the features inside (floating point, caches, mmu like stuff, etc) and tend to have lots of ram and flash compared to say cortex-m0 siblings.  So your best bet is to just get one with more ram, and copy and jump.  There should be many parts that will work nicely for you...</p>\n"}, {"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1421265424, "post_id": 27946248, "comment_id": 44297809, "body": "What makes you think the STM32F4 chip cannot execute code from external memory?  Cortex-M has no concept of code and data space. Not all STM32 parts have an external memory interface, but presumably that is not the case here."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1421267669, "post_id": 27946248, "comment_id": 44298873, "body": "@Clifford I just checked the datasheet, that&#39;s how I know. There is no memory mapping for external memory on this particular chip."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1421268507, "post_id": 27946248, "comment_id": 44299284, "body": "<a href=\"http://www.st.com/web/en/resource/technical/document/reference_manual/DM00031020.pdf\" rel=\"nofollow noreferrer\">STM32F4 Reference manual</a> section 37 - the FMC supports NOR Flash, SRAM and SDRAM."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1421269809, "post_id": 27946248, "comment_id": 44299962, "body": "@Clifford My bad, there is actually an external memory mapping for this chip."}], "tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": false, "score": 2, "last_activity_date": 1421269953, "last_edit_date": 1421269953, "creation_date": 1421248580, "answer_id": 27946248, "question_id": 27945069, "link": "https://stackoverflow.com/questions/27945069/arm-cortex-m4-running-code-from-external-flash/27946248#27946248", "title": "ARM Cortex-M4: Running code from external flash", "body": "<p><strong>EDIT:</strong> Actually, your chip has an external memory mapping (FMC/FSMC). This would allow direct execution, so it's probably the easiest way if you can make it work.</p>\n\n<p>If you stick with this chip, loading the whole application to SRAM is probably the easiest. Jumping between RAM and Flash execution is not a problem, RAM and flash are mapped at different addresses. To keep it simple, you should always load applications at the same RAM address, and your applications need to be built to run at this particular address (usually done with linker settings). You may try to implement a partial load system, which could load parts of the application when needed, but this would require some efforts, for both designing the host FW and building the applications.</p>\n\n<p>Writing to internal flash can work, and may be preferable if you are short on RAM. Usually, internal flash can be written while executing, but that often results in CPU stalling (CPU waits until flash operation is done), which might not be a problem. If you look at your chip datasheet, the flash is characterized for min 10,000 erase/write cycles. That means, if your chip should last 5 years, you should load less than 6 applications per day (you may reasonably double this amount, maybe more, for typical endurance, but there is no guarantee).</p>\n"}, {"tags": [], "owner": {"reputation": 524, "user_id": 4328846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BWqeua7Pjss/AAAAAAAAAAI/AAAAAAAABeo/7Ca4f6TRP7c/photo.jpg?sz=128", "display_name": "Gustavo Laureano", "link": "https://stackoverflow.com/users/4328846/gustavo-laureano"}, "is_accepted": false, "score": 0, "last_activity_date": 1421250540, "last_edit_date": 1421250540, "creation_date": 1421250206, "answer_id": 27946854, "question_id": 27945069, "link": "https://stackoverflow.com/questions/27945069/arm-cortex-m4-running-code-from-external-flash/27946854#27946854", "title": "ARM Cortex-M4: Running code from external flash", "body": "<p>There are some implementations using Cortex M3/M4 micro-controllers where the internal firmware is used just to configure an external RAM and map it to the internal memory map, then load the main program from a external media (like a flash chip, SD card, etc) to this RAM and execute from it \n(almost like ARM processors based Linux boards does, where the internal firmware is nothing more than a initial bootloader)</p>\n\n<p>This company do this:\n<a href=\"http://www.emcraft.com/\" rel=\"nofollow\">http://www.emcraft.com/</a></p>\n\n<p>take a look, they even use STM32F4</p>\n\n<p>The biggest problem is that Cortex M does not have MMUs, so you cannot run full blown linux on it, limiting it to uClinux</p>\n\n<p>Edit: this article should be interesting for you too:\n<a href=\"http://electronicdesign.com/embedded/practical-advice-running-uclinux-cortex-m3m4\" rel=\"nofollow\">http://electronicdesign.com/embedded/practical-advice-running-uclinux-cortex-m3m4</a></p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 2309775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f288b510ebf49b7e2ce812a5918d8117?s=128&d=identicon&r=PG&f=1", "display_name": "User323693", "link": "https://stackoverflow.com/users/2309775/user323693"}, "edited": false, "score": 0, "creation_date": 1487049413, "post_id": 27952097, "comment_id": 71597546, "body": "+1 &amp; Thank you for the great answer. I know its an old answer but my query for you is this: when the device STM32F4 support code execution from external flash, what does it actually mean? Should one also have similarly sized RAM always.. to support external memory code execution from parallel flash?"}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 8, "last_activity_date": 1421269042, "last_edit_date": 1421269042, "creation_date": 1421268379, "answer_id": 27952097, "question_id": 27945069, "link": "https://stackoverflow.com/questions/27945069/arm-cortex-m4-running-code-from-external-flash/27952097#27952097", "title": "ARM Cortex-M4: Running code from external flash", "body": "<p>The problem is not the processor; executing code in different memory spaces is a matter of building, linking  and loading your code appropriately, and that is largely a toolchain issue than a matter of chip selection.</p>\n\n<p>The first problem is selection of a device that actually has an external memory interface that is memory mapped.  In this case for example serial memory devices such as NAND flash, or mass storage devices such as SD card are not suitable.  It must be NOR flash on the system address/data bus.</p>\n\n<p>Second in most cases the external memory interface must be configured for the correct memory type, bus width and timing etc. in order to be addressable.  Than means that you cannot boot directly into software on the external memory because software must run in order to perform the configuration.</p>\n\n<p>Thirdly, typically your toolchain will compile and link your application into a single monotithic application - separating it into BIOS/OS and application is not trivial, and for bare-metal targets (ie. not running a full OS such as Linux with load/execute and dynamic linking etc. built-in) there is no standard method - you'll have to cook your own.</p>\n\n<p>For the case of a bootloader starting up, loading an application and running it, it is perhaps simple because once the application is running the bootloader plays no further part - the bootloader only needs to know the start address of the application.  However in your case you want to separately compile and link two separate software entities and have the application be able to access your BIOS/OS code, so the application entity needs to know the routine entry-point addresses of the independently linked BIOS/OS.  One way to do this is to generate a link map of the BIOS/OS (which is toolchain specific), and from that generate an entry-point lookup table (and array of function pointers essentially) that you link with each application,  That way your application will have the means to back-call BIOS/OS.</p>\n\n<p>You may however not need to do that, you can link your application into disjoint memory address regions and program the internal and external memory devices separately (sometimes called \"scatter-loading).  That way the linker is responsible for resolving the internal and external addresses and calling in either direction is possible.  You need to ensure that the start-up code that configures external memory is in the internal memory of course, but it is possible to instruct the linker to place specific code in specific memory or let it decide when it does not matter.</p>\n\n<p>The need to re-flash the code does not itself require the architecture you describe, you could simply implement a bootloader (occupying reserved pages of internal flash) that can load data from some source such as SD card, USB, serial or NAND flash, and write it to the appropriate internal or external flash pages; if the data loaded is for example in Intel format Hex file, it will contain address information that will tell the bootloader where to write the data.  In this approach the only permanent code is the bootloader (which must configure the external memory), and your BIOS/OS and application can be monolithic and \"scatter loaded\" across internal and external flash.</p>\n\n<p>A word of warning however Cortex-M devices are optimised to execute code and load data over separate buses.  On STM32 the internal flash and internal SRAM are on separate buses allowing instruction and data fetches to occur in parallel.  when running code from and external memory, you have to realise that not only is that bus likely to be slower, instruction and data fetches from external memory will be serialised.  So performance may take a significant hit.</p>\n"}], "owner": {"reputation": 41, "user_id": 4449852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59c78ffae2ba051be7bc7e9e626ebe4?s=128&d=identicon&r=PG&f=1", "display_name": "AGM", "link": "https://stackoverflow.com/users/4449852/agm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13397, "favorite_count": 7, "answer_count": 4, "score": 4, "last_activity_date": 1421329655, "creation_date": 1421245085, "last_edit_date": 1421329655, "question_id": 27945069, "link": "https://stackoverflow.com/questions/27945069/arm-cortex-m4-running-code-from-external-flash", "title": "ARM Cortex-M4: Running code from external flash", "body": "<p>Is it possible to separate base FW and application code on ARM Cortex-M4 architecture (e.g STM32 F4). What I\u00b4d like to do is to run applications from external flash and base FW from internal flash. Applications are all implementing same \"API\" (single header file), but functionality is different.</p>\n\n<p>Idea is that base FW is offering drivers, engine and UI and can work as standalone. Applications would provide extra functionality to base FW when needed. All applications cannot be flashed on internal flash since total code size for all applications is too big for internal flash. Another reason is that we\u00b4d like to update / add applications on the fly without re-flashing the device.</p>\n\n<p>So, far I have few ideas how to do this but is any of these feasible or are there other options?</p>\n\n<ol>\n<li>Load applications on the fly to internal SRAM\n<ul>\n<li>RAM consumption might be problem.</li>\n<li>Not sure if base FW and application code can be executed at \"same time\". Can application code functions be called from based FW and and wise verse? I have seen this technique used with flash-loaders, but once you start to run code from RAM the code from flash cannot be executed anymore?</li>\n</ul></li>\n<li>Flash application from external flash to internal flash.\n<ul>\n<li>Not sure how long internal flash will last. What is maximum amount of write cycles to internal flash. There is need to change application 1-20 times / day</li>\n<li>Can part of the internal flash be flashed when executing code from there (application loader)</li>\n</ul></li>\n<li>Find Cortex-M4 that supports running code same time at internal flash and external flash.\n<ul>\n<li>I haven't find any, probably not possible with Cortex-M4 architecture?</li>\n</ul></li>\n</ol>\n\n<p>All tips, hints and example codes appreciated!</p>\n\n<p><strong>EDIT:</strong> Thanks for the answers, need some time to digest those.</p>\n\n<p>Main reason for this trial is to allow updating the device functionality without flashing the base FW, not so much of saving SRAM/internal flash. Kind-of plugin architecture to offer simple interface to extend system functionality without need to alter the underlying system. If I cannot build system executing code from external flash (SD card, NAND) I will try first loading application on the fly to SRAM/internal flash. But I will also dig deeper to emcraft solution.</p>\n\n<p>There is no need to stick on STM chips, I just happen to have their devkits in my table. The final target is to load applications from SD card or NAND memory, so in this point I don't want to limit implementation to work only with NOR flash.</p>\n\n<p>I\u00b4ll start to work with minimal implementation by using STM32 F4 devkit. First I need to wrap some NAND/SD card on it. I will try both options for loading applications to SRAM and internal flash to see how those works and what is the impact for performance. As Clifford said the challenge will be more in linking, building and toolset settings. Even-tough I can force application to be always in same place on memory the functions will be in different place, need to figure out how to take care of this. Examples/demos would be helpful.</p>\n\n<p>Spec for my minimal implementation.</p>\n\n<pre><code>Project 1: Base FW\n    Driver for accessing applications from external flash\n    Minimal filesystem to write and read applications to/from external flash\n    UART commands -- Write applications to external flash -- Load applications from external flash to SRAM/Internal flash -- Execute application and print result to UART\nInterface.h\n    int functionWrapper(int functionNumber)\n    bool initApplication()\n    int executeMathOperation1(int a, int b)\n    int executeMathOperation2(int a, int b)\nProject 2: Application 1\n    MathOp1: Sums up two values\n    MathOp2: Multiply up two values\nProject 3: Application 2\n    MathOp1: Subtracts two values\n    MathOp2: Divide two values\n</code></pre>\n\n<p>I haven't think the final OS, but most probably it will be Free/OpenRTOS</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1421244455, "post_id": 27944824, "comment_id": 44284872, "body": "There&#39;s a difference in C between a two-dimensional array and an array-of-arrays, btw. This is the latter."}, {"owner": {"reputation": 1578, "user_id": 2528440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84f6b32e6e099bc721e93d0a397c85cd?s=128&d=identicon&r=PG", "display_name": "AndersNS", "link": "https://stackoverflow.com/users/2528440/andersns"}, "edited": false, "score": 0, "creation_date": 1421245476, "post_id": 27944824, "comment_id": 44285510, "body": "And the run time error is..?"}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1421244390, "last_edit_date": 1495541134, "creation_date": 1421244390, "answer_id": 27944850, "question_id": 27944824, "link": "https://stackoverflow.com/questions/27944824/making-a-two-dimensional-array-at-run-time-using-malloc/27944850#27944850", "title": "Making a two dimensional array at run time using malloc", "body": "<p>The reason for the runtime error is because you allocate memory just for <code>x[0]</code>.So, change </p>\n\n<pre><code>x[0]=(int *)malloc(3*sizeof(int));\n</code></pre>\n\n<p>to</p>\n\n<pre><code>x[i]=malloc(3*sizeof(int));\n</code></pre>\n\n<p>and <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don't cast the result of <code>malloc</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1421244470, "creation_date": 1421244470, "answer_id": 27944876, "question_id": 27944824, "link": "https://stackoverflow.com/questions/27944824/making-a-two-dimensional-array-at-run-time-using-malloc/27944876#27944876", "title": "Making a two dimensional array at run time using malloc", "body": "<p>In </p>\n\n<pre><code>x[0]=(int *)malloc(3*sizeof(int));\n</code></pre>\n\n<p>you ended up allocating memory for only index <code>0</code> three times. use <code>i</code>.</p>\n\n<p>After you're done using , don't forget to <code>free()</code> the allocated memory. Otherwise, it'll result in a <em>memory leak</em>.</p>\n\n<p>Also, no need to cast the return value of <code>malloc()</code>/<code>calloc()</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 4361473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4352581df1b6af8afc1fbc4bc95f420f?s=128&d=identicon&r=PG&f=1", "display_name": "New_Bee", "link": "https://stackoverflow.com/users/4361473/new-bee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 27944850, "answer_count": 2, "score": 0, "last_activity_date": 1421245588, "creation_date": 1421244311, "last_edit_date": 1421245588, "question_id": 27944824, "link": "https://stackoverflow.com/questions/27944824/making-a-two-dimensional-array-at-run-time-using-malloc", "title": "Making a two dimensional array at run time using malloc", "body": "<p>I have been trying to allocate a 2 dimensional array at run time using <code>malloc</code> by using the concept of pointers to pointers. This code doesn't show any compilation error but gives a runtime error.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint ** alpha(void)\n{\n    int **x;\n\n    x=(int **)malloc(3*sizeof(int *));\n\n    for(int i=0;i&lt;3;i++)\n    {\n    x[0]=(int *)malloc(3*sizeof(int));\n    }\n    for(int i=0;i&lt;3;i++)\n    {\n        for(int j=0;j&lt;3;j++)\n        {\n            x[i][j]=i+j;\n        }\n    }\n    return x;\n}\n\nint main()\n{\n    int **p;\n\n    p=alpha();\n\n    printf(\"%d\",p[1][2]);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "search", "strstr"], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421243447, "post_id": 27944474, "comment_id": 44284260, "body": "New to me. Just asking, does this fulfill the requirement of <code>either &quot;i,&quot; &quot;j,&quot; or &quot;k.&quot;</code>?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1421243669, "post_id": 27944474, "comment_id": 44284393, "body": "strcspn return size of a substring from first char to the first occurrence of &quot;ijk&quot;. Sourav is asching for the poiner to the firt occurence."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1421244372, "post_id": 27944474, "comment_id": 44284820, "body": "@LPs it&#39;s still useful in this case."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421245442, "last_edit_date": 1421245442, "creation_date": 1421243303, "answer_id": 27944474, "question_id": 27944409, "link": "https://stackoverflow.com/questions/27944409/can-i-search-a-string-for-character-x-or-y-in-c/27944474#27944474", "title": "Can I search a string for character (X OR Y) in C?", "body": "<p>You are looking for the <a href=\"http://man7.org/linux/man-pages/man3/strspn.3.html\" rel=\"nofollow\"><code>strcspn()</code></a> function, </p>\n\n<pre><code>char *foo = string + strcspn(string, \"ijk\");\n</code></pre>\n\n<p>and if you only want the position, then just</p>\n\n<pre><code>size_t position = strcspn(string, \"ijk\");\n</code></pre>\n\n<p>this is a sample implementation of how to use it in this case</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst char *findany(const char *const haystack, const char *const needle)\n{\n    size_t skip;\n\n    if (haystack == NULL)\n        return NULL;\n    if (needle == NULL)\n        return haystack;\n\n    skip = strcspn(haystack, needle);\n    if (*(haystack + skip) == '\\0')\n        return NULL;\n\n    return haystack + skip;\n}\n\nint main(void)\n{\n    const char *string = \"xksjadueaailkik\";\n    const char *found;\n\n    found = string;\n    while ((found = findany(found, \"ijk\")) != NULL)\n        printf(\"%s\\n\", found++);\n\n    return 0;\n}\nreturn 0;\n</code></pre>\n\n<p><strong>ouput</strong>:</p>\n\n<pre><code>ksjadueaailkik\njadueaailkik\nilkik\nkik\nik\nk\n</code></pre>\n\n<p>this makes the <code>findany()</code> function similar to <code>strchr()</code> but it takes a set of characters instead of a single one.</p>\n\n<p><strong>Note</strong>: I just noticed that this is the reinvention of <code>strpbrk()</code> so that's the right solution i.e. <strong>BLUEPIXY</strong>'s answer.</p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 7, "last_activity_date": 1421243648, "creation_date": 1421243648, "answer_id": 27944581, "question_id": 27944409, "link": "https://stackoverflow.com/questions/27944409/can-i-search-a-string-for-character-x-or-y-in-c/27944581#27944581", "title": "Can I search a string for character (X OR Y) in C?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void){\n    char *string = \"I'm trying to search a string\";\n    char *x = \"ijk\";\n    char *foo = strpbrk(string, x);\n    if(foo)\n        printf(\"%c at %d\\n\", *foo, foo - string);//zero origin\n    else\n        puts(\"not found\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4453628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8008f1b831f5ac3ca33a2440014930f?s=128&d=identicon&r=PG&f=1", "display_name": "awrgkhia rghjrh", "link": "https://stackoverflow.com/users/4453628/awrgkhia-rghjrh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1421245442, "creation_date": 1421243080, "last_edit_date": 1421243304, "question_id": 27944409, "link": "https://stackoverflow.com/questions/27944409/can-i-search-a-string-for-character-x-or-y-in-c", "title": "Can I search a string for character (X OR Y) in C?", "body": "<p>I'm trying to search a string for a character to find its position in the string, however, the character can be one of three.</p>\n\n<p>I'm trying to achieve the equivalent of this:</p>\n\n<pre><code>char *foo = strstr(string, x);\n</code></pre>\n\n<p>where x can be either \"i,\" \"j,\" or \"k.\"</p>\n\n<p>What would be the best way of going about this?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 12222, "user_id": 815938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8mNbc.png?s=128&g=1", "display_name": "kennyzx", "link": "https://stackoverflow.com/users/815938/kennyzx"}, "edited": false, "score": 0, "creation_date": 1421243020, "post_id": 27944260, "comment_id": 44284010, "body": "you are mixing up ANSI and UNICODE, <a href=\"http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc\" rel=\"nofollow noreferrer\">this article</a> explains the differences."}], "answers": [{"tags": [], "owner": {"reputation": 12222, "user_id": 815938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8mNbc.png?s=128&g=1", "display_name": "kennyzx", "link": "https://stackoverflow.com/users/815938/kennyzx"}, "is_accepted": true, "score": 3, "last_activity_date": 1421246838, "last_edit_date": 1421246838, "creation_date": 1421243582, "answer_id": 27944554, "question_id": 27944260, "link": "https://stackoverflow.com/questions/27944260/why-i-cant-get-directory-name/27944554#27944554", "title": "Why I can&#39;t get directory name", "body": "<p>A string defined as below is called an ANSI string.</p>\n\n<pre><code>char* fileExt = NULL;\n</code></pre>\n\n<p>And a string defined as below can be an ANSI string or a Unicode string. Your project is compiled with the <code>UNICODE/_UNICODE</code> macro, so it is a Unicode string.</p>\n\n<pre><code>TCHAR szDir[MAX_PATH];\n</code></pre>\n\n<p>You can't mix them together, for an introduction to the data type identifiers in VC++ like <code>TCHAR</code> and <code>LPCTSTR</code>, please refer to <a href=\"http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc\" rel=\"nofollow\">this article</a>.</p>\n\n<p>I made several modifications to your code, as following.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\nusing namespace std;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    TCHAR *fileExt = NULL; \n    TCHAR szDir[MAX_PATH];\n    GetFullPathName(argv[0], MAX_PATH, szDir, &amp;fileExt);\n    _tprintf(_T(\"Full path: %s\\nFilename: %s\\n\"), szDir, fileExt); \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2067, "user_id": 1708960, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39280172449cbd6609c6ca41dcf73d5a?s=128&d=identicon&r=PG&f=1", "display_name": "rel1x", "link": "https://stackoverflow.com/users/1708960/rel1x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 27944554, "answer_count": 1, "score": 0, "last_activity_date": 1421247707, "creation_date": 1421242595, "last_edit_date": 1495535599, "question_id": 27944260, "link": "https://stackoverflow.com/questions/27944260/why-i-cant-get-directory-name", "title": "Why I can&#39;t get directory name", "body": "<p>My program, where I work with Win API:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\nusing namespace std;\n\nint _main(int argc, _TCHAR* argv[]) {\n    char *fileExt = NULL;\n    TCHAR szDir[MAX_PATH];\n    GetFullPathName(argv[0], MAX_PATH, szDir, &amp;fileExt);\n    printf(\"Full path: %s\\nFilename: %s\\n\", szDir, fileExt);\n\n    return 0;\n}\n</code></pre>\n\n<p>I use example from <a href=\"http://forums.codeguru.com/showthread.php?118078-GetFullPathName\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://stackoverflow.com/questions/17632117/how-to-extract-the-file-name-without-folder-path-with-getfullpathname\">here</a>, but I've got an error message: Argument of type \u201cchar *\u201d is incompatible with parameter of type \u201cLPWSTR\u201d. </p>\n\n<p>Where is my mistake?</p>\n"}, {"tags": ["c", "arduino", "eeprom"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421242537, "post_id": 27944140, "comment_id": 44283693, "body": "<a href=\"https://en.wikipedia.org/wiki/EEPROM\" rel=\"nofollow noreferrer\">EEPROM</a> is a non-volatile memory (i.e. it will keep its content between boots and with no power). It&#39;s where you would store permanent data that should live between boots. Does this list of your need to be stored between boots? Then you could just <a href=\"https://en.wikipedia.org/wiki/Serialization\" rel=\"nofollow noreferrer\">serialize</a> a list that you have in RAM (which you should do anyway, create the list in RAM (heap) and then serialize it to non-volatile storage)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421242558, "post_id": 27944140, "comment_id": 44283708, "body": "As for the list itself, you <i>do</i> know how to create simple linked lists?"}, {"owner": {"reputation": 128, "user_id": 4289140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-yGpzQ4G7J1c/AAAAAAAAAAI/AAAAAAAAKOs/8OZV-bdo8rI/photo.jpg?sz=128", "display_name": "Emil Bonne Kristiansen", "link": "https://stackoverflow.com/users/4289140/emil-bonne-kristiansen"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1421242717, "post_id": 27944140, "comment_id": 44283806, "body": "I was not very specific. Yes, I need the list to be store when the unit is without power. And yes, I do know how to do that."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3802409"}, "is_accepted": false, "score": 0, "last_activity_date": 1421242902, "creation_date": 1421242902, "answer_id": 27944359, "question_id": 27944140, "link": "https://stackoverflow.com/questions/27944140/how-to-save-a-list-of-strings-in-arduino/27944359#27944359", "title": "How to save a list of strings in arduino?", "body": "<p>EEPROM means programmable for multiple times. Not mean storage. If you want to store list while the device is running, it is possible. Define an array like standard way. You can search in that array, add names to array by using arduino console. These are depends on your code. </p>\n\n<p>But if you want to store your array all the time (even device is closed) you need a storage device such as sd card or something like this. </p>\n"}, {"tags": [], "owner": {"reputation": 330, "user_id": 4454877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0129832b19e0227f7085a5782b34b85?s=128&d=identicon&r=PG&f=1", "display_name": "Retr0id", "link": "https://stackoverflow.com/users/4454877/retr0id"}, "is_accepted": false, "score": 0, "last_activity_date": 1421267230, "creation_date": 1421267230, "answer_id": 27951820, "question_id": 27944140, "link": "https://stackoverflow.com/questions/27944140/how-to-save-a-list-of-strings-in-arduino/27951820#27951820", "title": "How to save a list of strings in arduino?", "body": "<p>It is possible to <a href=\"http://arduino.cc/en/Reference/EEPROM\" rel=\"nofollow\">store data in the EEPROM</a>, but depending on the Arduino model there isn't much space. You would be better off using an SD card shield.</p>\n"}], "owner": {"reputation": 128, "user_id": 4289140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-yGpzQ4G7J1c/AAAAAAAAAAI/AAAAAAAAKOs/8OZV-bdo8rI/photo.jpg?sz=128", "display_name": "Emil Bonne Kristiansen", "link": "https://stackoverflow.com/users/4289140/emil-bonne-kristiansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421267230, "creation_date": 1421242191, "question_id": 27944140, "link": "https://stackoverflow.com/questions/27944140/how-to-save-a-list-of-strings-in-arduino", "title": "How to save a list of strings in arduino?", "body": "<p>I want to create a list of names on my Arduino. I want to be able to add a name to the list, I want to be able to remove a certain name from the list and I want to be able to check if a certain name exists in the list.</p>\n\n<p>As far as I understand I need to use something called EEPROM?</p>\n\n<p>BTW. I might gotten something all wrong, please tell me.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421240993, "post_id": 27943724, "comment_id": 44282746, "body": "is your code so badly indented, or you just failed to format it here?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1421241009, "post_id": 27943724, "comment_id": 44282754, "body": "<code>B[3,0] =  3;</code> This is not the way to index a 2dimensional array."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 1, "creation_date": 1421241063, "post_id": 27943724, "comment_id": 44282787, "body": "Please show the definition of <code>B</code>. I don&#39;t quite understand the question; there is only one writing access to <code>B</code>."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1421241106, "post_id": 27943724, "comment_id": 44282806, "body": "And you&#39;re making the same error when printing it.  <code>3,0</code> evaluates to <code>0</code> so you&#39;re only setting the <code>[0]</code> element.  Similarly when printing, you&#39;re only ever looking at the <code>[j]</code> element."}, {"owner": {"reputation": 1479, "user_id": 1570793, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/BX746.jpg?s=128&g=1", "display_name": "George Papatheodorou", "link": "https://stackoverflow.com/users/1570793/george-papatheodorou"}, "edited": false, "score": 0, "creation_date": 1421241272, "post_id": 27943724, "comment_id": 44282887, "body": "omg!! I m total noob!!"}], "answers": [{"tags": [], "owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "is_accepted": false, "score": 1, "last_activity_date": 1421241125, "creation_date": 1421241125, "answer_id": 27943791, "question_id": 27943724, "link": "https://stackoverflow.com/questions/27943724/unusuall-way-to-fill-multiple-rows-in-an-array-non-recursively/27943791#27943791", "title": "Unusuall way to fill multiple rows in an array non recursively?", "body": "<p>You're using the expression <code>3, 0</code> to index the array. That expression has the value 0 (it's using the sequence operator, the value of which is the value of the last expression, in this cas e a constant 0). To index a multi-dimensional array in C, you need to use something like <code>m[a][b]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 22183, "user_id": 1126268, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/4fd74fac60ad49e1f9cce828567adab4?s=128&d=identicon&r=PG", "display_name": "md5", "link": "https://stackoverflow.com/users/1126268/md5"}, "is_accepted": false, "score": 1, "last_activity_date": 1421241132, "creation_date": 1421241132, "answer_id": 27943794, "question_id": 27943724, "link": "https://stackoverflow.com/questions/27943724/unusuall-way-to-fill-multiple-rows-in-an-array-non-recursively/27943794#27943794", "title": "Unusuall way to fill multiple rows in an array non recursively?", "body": "<p>In C, the syntax for two-dimensional arrays is:</p>\n\n<pre><code>B[3][0] = 3\n</code></pre>\n\n<p>rather than:</p>\n\n<pre><code>B[3,0] =  3;`\n</code></pre>\n\n<p><code>,</code> is the comma operator which has an other meaning (basically, the value of the expression <code>a, b</code> is <code>b</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421241847, "creation_date": 1421241847, "answer_id": 27944022, "question_id": 27943724, "link": "https://stackoverflow.com/questions/27943724/unusuall-way-to-fill-multiple-rows-in-an-array-non-recursively/27944022#27944022", "title": "Unusuall way to fill multiple rows in an array non recursively?", "body": "<p>Because the <code>,</code> operator discards all the operands except the last. So this</p>\n\n<pre><code>B[3,0] = 3;\n</code></pre>\n\n<p>is effectively</p>\n\n<pre><code>B[0] = 3;\n</code></pre>\n\n<p>and how many columns does your table have? since it's an <code>int *</code> I doubt that you have a table. The suggested syntax</p>\n\n<pre><code>B[3][0] = 3;\n</code></pre>\n\n<p>is wrong too, because <code>B[3]</code> has type <code>int</code> and you cannot index an <code>int</code>.</p>\n"}], "owner": {"reputation": 1479, "user_id": 1570793, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/BX746.jpg?s=128&g=1", "display_name": "George Papatheodorou", "link": "https://stackoverflow.com/users/1570793/george-papatheodorou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1421241847, "creation_date": 1421240896, "last_edit_date": 1421240973, "question_id": 27943724, "link": "https://stackoverflow.com/questions/27943724/unusuall-way-to-fill-multiple-rows-in-an-array-non-recursively", "title": "Unusuall way to fill multiple rows in an array non recursively?", "body": "<p>Hi I m debugging a C app and seing this strange behavior in an array of 10 rows and 4 columns:</p>\n\n<pre><code>void fillArray(int *B){ \n //DEBUG\n    printArray(B,10,4);//printing all items 0's\n    B[3,0] =  3;\n    printArray(B,10,4); // results in B[0,0] = 3 , B[1,0] = 3 , B[2,0] = 3  , B[3,0]= 3 , ...\n                    // Rest values remains zero.\n}\n\n\n\n void printArray(int *B,int imax,int jmax){\n     printf(\" \\n --- Check---\");    \n\n    for(i=0;i&lt;imax;i++){\n        for(j=0;j&lt;jmax;j++){            \n            printf(\" \\n Check: B[%d,%d]=%d \",i,j,B[i,j]);\n        }\n    }    \n}\n</code></pre>\n\n<p>Why does value 3 is inserted in every row of the table for column 0 ?</p>\n"}, {"tags": ["c", "cmd"], "comments": [{"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 1, "creation_date": 1421240913, "post_id": 27943661, "comment_id": 44282690, "body": "1) if it needs to continue then in which way it works like <code>pause</code>?  Do you just want to execute some code in parallel? 2) Any attempt?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421240935, "post_id": 27943661, "comment_id": 44282704, "body": "Why do you use <code>system(&quot;pause&quot;)</code> anyway? I see it a lot, but I don&#39;t get it, if you are learning c programming, you must find a c solution, and avoid using external programs as much as possible. The other one is worst <code>#include &lt;conio.h&gt;</code> and still do <code>system(&quot;cls&quot;);</code>"}, {"owner": {"reputation": 648, "user_id": 4453461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5be5142ae727828469881f99b6fb5e61?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/4453461/iman"}, "reply_to_user": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1421241310, "post_id": 27943661, "comment_id": 44282914, "body": "Yes, i want to execute code in parallel. @AdrianoRepetti"}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 4453461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5be5142ae727828469881f99b6fb5e61?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/4453461/iman"}, "edited": false, "score": 0, "creation_date": 1421243890, "post_id": 27944536, "comment_id": 44284521, "body": "My compiler doesn&#39;t support thrd_sleep(). But anyway thank you for your help:)"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 648, "user_id": 4453461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5be5142ae727828469881f99b6fb5e61?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/4453461/iman"}, "edited": false, "score": 0, "creation_date": 1421244061, "post_id": 27944536, "comment_id": 44284619, "body": "@Iman: That&#39;s not very surprising, seeing how you talked about <code>cmd</code> and <code>pause</code> -- Microsoft doesn&#39;t even support C99. But I thought I&#39;d give the &quot;right&quot; answer before all the &quot;working&quot; ones float in. ;-)"}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1421246115, "post_id": 27944536, "comment_id": 44285880, "body": "If you&#39;re <i>limited</i> to Windows environment and you want to EXECUTE some code in parallel (not merely waste CPU time waiting in pause) then take a look to <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">CreateThread</a>. It&#39;s not portable but it works on Windows."}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 0, "last_activity_date": 1421243512, "creation_date": 1421243512, "answer_id": 27944536, "question_id": 27943661, "link": "https://stackoverflow.com/questions/27943661/pause-in-cmd-freeze-and-unfreeze/27944536#27944536", "title": "pause in cmd \\ Freeze and UnFreeze", "body": "<p>Don't ever use <code>system()</code> if you can avoid it. It's crude, error-prone, and non-portable.</p>\n\n<p>C11 introduces threading support, including <a href=\"http://en.cppreference.com/w/c/thread/thrd_sleep\" rel=\"nofollow\">thrd_sleep()</a>. That should be your preferred solution (if supported by your compiler setup).</p>\n\n<p>If your compiler vendor does <strong>not</strong> support C11, bugger him about it. That standard is almost four years old now.</p>\n"}, {"comments": [{"owner": {"reputation": 648, "user_id": 4453461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5be5142ae727828469881f99b6fb5e61?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/4453461/iman"}, "edited": false, "score": 0, "creation_date": 1421245592, "post_id": 27944887, "comment_id": 44285595, "body": "I tried this but it stops running the rest of code.I want something that run the code but update cmd only when I give the permission to it."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 648, "user_id": 4453461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5be5142ae727828469881f99b6fb5e61?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/4453461/iman"}, "edited": false, "score": 0, "creation_date": 1421245734, "post_id": 27944887, "comment_id": 44285665, "body": "@Iman: Voting to close the question as &quot;unclear what you&#39;re asking&quot;, because <code>pause</code> or <code>sleep</code> quite obviously isn&#39;t it. You need to phrase more exactly what it is that you actually want, and at this point it&#39;d be better to ask this in a new question."}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 0, "last_activity_date": 1421244493, "creation_date": 1421244493, "answer_id": 27944887, "question_id": 27943661, "link": "https://stackoverflow.com/questions/27943661/pause-in-cmd-freeze-and-unfreeze/27944887#27944887", "title": "pause in cmd \\ Freeze and UnFreeze", "body": "<p>WinAPI defines the <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>Sleep()</code></a> function:</p>\n\n<pre><code>VOID WINAPI Sleep(\n  _In_  DWORD dwMilliseconds\n);\n</code></pre>\n\n<blockquote>\n  <p>This function causes a thread to relinquish the remainder of its time\n  slice and become unrunnable for an interval based on the value of\n  dwMilliseconds.</p>\n</blockquote>\n\n<pre><code>#include &lt;windows.h&gt;\n\nint main()\n{\n    Sleep( 5000 ); // pause execution for at least 5 seconds\n    some_lines_of_code;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 0, "last_activity_date": 1437731409, "creation_date": 1437731409, "answer_id": 31607386, "question_id": 27943661, "link": "https://stackoverflow.com/questions/27943661/pause-in-cmd-freeze-and-unfreeze/31607386#31607386", "title": "pause in cmd \\ Freeze and UnFreeze", "body": "<blockquote>\n  <p>I want something that run the code but update cmd only when I give the\n  permission to it.</p>\n</blockquote>\n\n<p>If I understand correctly, <em>the code</em> shall produce output which you don't want to be shown before you press a key. If you don't mind to have the output paged, you could use something like</p>\n\n<pre><code>        FILE *stream = popen(\"PAUSE&lt;CON&amp;&amp;MORE\", \"w\");\n</code></pre>\n\n<p>and let <em>the code</em> output to stream (with <code>fprintf(stream, ...)</code> etc.).</p>\n"}, {"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1531871143, "creation_date": 1531871143, "answer_id": 51391632, "question_id": 27943661, "link": "https://stackoverflow.com/questions/27943661/pause-in-cmd-freeze-and-unfreeze/51391632#51391632", "title": "pause in cmd \\ Freeze and UnFreeze", "body": "<p>I think what you're looking for is a method to check if <code>stdin</code> contains data ready to read; you want to use some <em>non-blocking</em> or <em>asynchronous</em> I/O so that you can read input when it becomes available, and perform other tasks until then.</p>\n\n<p>You won't find a whole heap about non-blocking/asynchronous I/O in standard C, but in POSIX C you can set <code>STDIN_FILENO</code> as non-blocking using <code>fcntl</code>. As an example, here's a program which prompts you to press enter (like <code>pause</code> does) and busy-loops, allowing your code to conduct other (preferably non-blocking) actions inside the loop while it waits for the keystroke (ahemm, byte, since <code>stdin</code> is technically a <em>file</em>):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\nint main(void) {\n    char c;\n    puts(\"Press any key to continue...\");\n    fcntl(STDIN_FILENO, F_SETFL, fcntl(STDIN_FILENO, F_GETFL, 0) | O_NONBLOCK);\n    while (read(STDIN_FILENO, 1, &amp;c) != 1 &amp;&amp; errno == EAGAIN) {\n        /* code in here will execute repeatedly until a key is struck or a byte is sent */\n        errno = 0;\n    }\n    if (errno) {\n        /* code down here will execute when an input error occurs */\n    }\n    else {\n        /* code down here will execute when that precious byte is finally sent */\n    }\n}\n</code></pre>\n\n<p>That's non-blocking I/O. Other alternatives include using asynchronous I/O or extra threads. You should probably use non-blocking I/O or asynchronous I/O (i.e. <code>epoll</code> or <code>kqueue</code>) for this task in particular; using extra threads just to determine when a character is sent to <code>stdin</code> is likely a little bit too hefty.</p>\n"}], "owner": {"reputation": 648, "user_id": 4453461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5be5142ae727828469881f99b6fb5e61?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/4453461/iman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 31607386, "answer_count": 4, "score": 0, "last_activity_date": 1531871143, "creation_date": 1421240732, "last_edit_date": 1421241782, "question_id": 27943661, "link": "https://stackoverflow.com/questions/27943661/pause-in-cmd-freeze-and-unfreeze", "title": "pause in cmd \\ Freeze and UnFreeze", "body": "<p>I need a command in cmd that works like pause but I can code to continue.\ne.g.</p>\n\n<pre><code>system(\"pause\");\nsome lines of code;` \n</code></pre>\n\n<p>The problem with <code>system(\"pause\")</code> is that \"some lines of code\" will not work until the user press sth.\nI want to continue cmd with some command.</p>\n"}, {"tags": ["c", "cygwin", "stack-trace"], "comments": [{"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1437731957, "post_id": 27943489, "comment_id": 51165103, "body": "Is <code>test.exe.stackdump</code> written when the second (ugly) message is produced? (I wonder whether this message indicates a problem with writing the stackdumpfile, e. g. permission in the current directory, and would go away if that problem were solved.)"}], "answers": [{"comments": [{"owner": {"reputation": 1391, "user_id": 2318073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/959695710b096f3c939271b20f307669?s=128&d=identicon&r=PG", "display_name": "Ameen", "link": "https://stackoverflow.com/users/2318073/ameen"}, "edited": false, "score": 0, "creation_date": 1421470009, "post_id": 27943674, "comment_id": 44382756, "body": "who is going to handle the signal? what I know is that cygwin lib has default handlers for signals. is it possible that the environment will handle them"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1421240758, "creation_date": 1421240758, "answer_id": 27943674, "question_id": 27943489, "link": "https://stackoverflow.com/questions/27943489/why-cygwin-stack-dump-message-is-different-when-running-in-cygwin-terminal/27943674#27943674", "title": "Why Cygwin stack dump message is different when running in cygwin terminal", "body": "<p>The point is that the output you're seeing comes from the Cygwin standard library. You will either need to modify that (don't worry, it's surely open source). </p>\n\n<p>It seems that the cygwin terminal environment has a way of handling with such exceptions in a manner that doesn't cause the string you don't want to be printed. So, since abort should really not be overly user-configurable, you'll have to modify the way SIGABRTs are handled by the cygwin libc.</p>\n\n<p>Thus, you've excluded the only answer that seems correct: Don't use stock cygwin, or don't use <code>abort</code>. Generally, you <em>can't</em> rely on what <code>abort</code> gives on your console, since this definitely isn't defined behaviour, can change with localizations, and is generally a bad way of handing error codes out of your applications. The old-school unix way of doing this is return codes, so I recommend using them.</p>\n"}], "owner": {"reputation": 1391, "user_id": 2318073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/959695710b096f3c939271b20f307669?s=128&d=identicon&r=PG", "display_name": "Ameen", "link": "https://stackoverflow.com/users/2318073/ameen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421240758, "creation_date": 1421240188, "question_id": 27943489, "link": "https://stackoverflow.com/questions/27943489/why-cygwin-stack-dump-message-is-different-when-running-in-cygwin-terminal", "title": "Why Cygwin stack dump message is different when running in cygwin terminal", "body": "<p>I'm using <code>Cygwin</code> to compile my C programs</p>\n\n<p>I created a program that will call <code>abort</code> whenever an error occurs.</p>\n\n<p>when I run the program from <code>Cygwin Terminal</code> the function produces the following output:</p>\n\n<pre><code>Aborted (core dumped)\n</code></pre>\n\n<p>but If I run the program from Windows CMD or Explorer it produces the following:</p>\n\n<pre><code>      0 [main] test 1904 cygwin_exception::open_stackdumpfile: Dumping stack trace to test.exe.stackdump\n</code></pre>\n\n<p>Can I change the message to the first format? How?</p>\n\n<p>because the second format is very ugly and I can't tell if this is a bug in the program (e.g: Access Violation, Divide By Zero,...) or the <code>abort</code> function></p>\n\n<p>and why do I get different messages even though the build is the same?</p>\n\n<p><strong>Note:</strong> Please, Don't tell me not to use the <code>abort</code> function or the Cygwin compiler</p>\n"}, {"tags": ["c++", "c", "yacc", "lex"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1421240558, "post_id": 27943284, "comment_id": 44282496, "body": "Here&#39;s maybe some more helpful information for you <a href=\"http://stackoverflow.com/questions/9796608/error-handling-in-yacc\"><b>error handling in YACC</b></a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1421248245, "post_id": 27943284, "comment_id": 44287344, "body": "Did you declare yyerror in your bison file? Do you compile with <code>-Wall</code> so that you are warned about missing prototypes? Do you specify <code>%option nodefault</code> in your flex file so that you are warned about input which matches no pattern?"}], "answers": [{"tags": [], "owner": {"reputation": 5175, "user_id": 4370109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcQgO.jpg?s=128&g=1", "display_name": "Brian Tompsett - \u6c64\u83b1\u6069", "link": "https://stackoverflow.com/users/4370109/brian-tompsett-%e6%b1%a4%e8%8e%b1%e6%81%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1424968835, "creation_date": 1424968835, "answer_id": 28747900, "question_id": 27943284, "link": "https://stackoverflow.com/questions/27943284/how-to-get-more-parse-error-information-from-lex-yacc/28747900#28747900", "title": "How to get more parse error information from lex / yacc?", "body": "<p>Much of this is described in the <a href=\"http://www.gnu.org/software/bison/manual/html_node/Error-Reporting.html#Error-Reporting\" rel=\"nofollow\">official bison manual</a> when it shows how to use <code>yyerror</code> to get improved error messages.</p>\n\n<p>In particular, it suggests you use <code>%define parse.error verbose</code> in the Bison declarations section to get enhanced error messages.</p>\n"}], "owner": {"reputation": 2576, "user_id": 3447742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dceb051c6027a6f6931fc0b0f7d86fe1?s=128&d=identicon&r=PG&f=1", "display_name": "gornvix", "link": "https://stackoverflow.com/users/3447742/gornvix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 800, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424968835, "creation_date": 1421239541, "question_id": 27943284, "link": "https://stackoverflow.com/questions/27943284/how-to-get-more-parse-error-information-from-lex-yacc", "title": "How to get more parse error information from lex / yacc?", "body": "<p>How to get more parse error information from lex / yacc?</p>\n\n<p>Currently in the lex file I am using:</p>\n\n<pre><code>int yyerror(const char *msg)\n{\n    fprintf(stderr, \"Parse error: %s\\n\", msg);\n    return 0;\n}\n</code></pre>\n\n<p>But when I run my program yyerror outputs a blank message.  I tried adding yylineno and yytext to yyerror but these cause compilation errors.  I tried adding \"%error-verbose\" to the yacc file and \n\"%option debug\" to the lex file but these made no difference to the message.</p>\n\n<p>I did notice however that yyparse outputs a bracket: '{' from the file I am trying to parse, I don't know the significance of this.</p>\n\n<p>I am using win_flex and win_bison.</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1421238464, "post_id": 27942929, "comment_id": 44281304, "body": "It depends on what the output will be. <code>printf</code> formats the ouput, do you want formatted output too?"}, {"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "edited": false, "score": 3, "creation_date": 1421238466, "post_id": 27942929, "comment_id": 44281307, "body": "Have you measured that <code>printf</code> is slow or are you just parroting things heard from elsewhere? Don&#39;t try to optimize until you have something to optimize."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 10, "creation_date": 1421238469, "post_id": 27942929, "comment_id": 44281310, "body": "if you are a beginner, don&#39;t worry about performance. really, it&#39;s the wrong mind-set."}, {"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1421238742, "post_id": 27942929, "comment_id": 44281459, "body": "I want the output to be formatted"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1421238919, "post_id": 27942929, "comment_id": 44281549, "body": "It depends what kind of formatting you need. If it&#39;s just for exemple printing text and integers you can make your own functions using <code>fputs</code> and <code>itoa</code>."}, {"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1421238928, "post_id": 27942929, "comment_id": 44281551, "body": "but &#39;asser&#39; doesn&#39;t print text to standard output"}, {"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1421239019, "post_id": 27942929, "comment_id": 44281594, "body": "helped too much thanks Michael Walz"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1421239094, "post_id": 27942929, "comment_id": 44281620, "body": "@MichaelWalz <code>fputs</code> will be slow too, you can do it if you write characters 1 by 1 <code>write(STDOUT_FILENO, &amp;character, 1);</code> or if you want you can write a buffer of bytes <code>write(STDOUT_FILENO, buffer, lengthOfBuffer);</code> that will be fast, but <code>fputs()</code> will have almost the same problem as <code>printf()</code> except that it does no formatting."}], "answers": [{"comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 5, "creation_date": 1421244742, "post_id": 27944410, "comment_id": 44285033, "body": "If you need performance, don&#39;t call <code>write</code>, <code>fwrite</code> is far better. <code>write</code> is a system call a calling it is mucbh more costly than calling a library function such like <code>fwrite</code>. The later will provide you buffering which saves you some costly <code>write</code>s."}], "tags": [], "owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "is_accepted": true, "score": 4, "last_activity_date": 1421243080, "creation_date": 1421243080, "answer_id": 27944410, "question_id": 27942929, "link": "https://stackoverflow.com/questions/27942929/a-function-that-is-faster-than-printf/27944410#27944410", "title": "a function that is faster than printf", "body": "<p>actually I found that <code>write()</code> is the fastest alternative to <code>printf()</code>\nI have written 2 little programs that prints hello world to standard out\nthe first one</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt; int main() {\nchar* h = \"hello world\\n\";\nfor ( int i=0; i &lt; 100000; i++) write(0,h,strlen(h));\n}\n</code></pre>\n\n<p>and the second one</p>\n\n<pre><code>#include &lt;stdio.h&gt; \nint main() {\nchar* x = \"hello world\\n\";\nfor (int i =0;i&lt;100000; i++) printf(\"%s\",x); }\n</code></pre>\n\n<p>and compared the run time of the 2 programs on my pc computer\nthe first terminated in 2.740s\nwhile the second terminated in 3.071s</p>\n"}, {"tags": [], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "is_accepted": false, "score": 1, "last_activity_date": 1421243377, "creation_date": 1421243377, "answer_id": 27944497, "question_id": 27942929, "link": "https://stackoverflow.com/questions/27942929/a-function-that-is-faster-than-printf/27944497#27944497", "title": "a function that is faster than printf", "body": "<p>There are a reasons that discourages the use of printf.</p>\n\n<p>1) printf is a function and is not likely to be inline-able, so as a function it disrupts the compiler optimization of the code around it. If you have a loop that does a lot of heavy lifting and you want compiler to do a good job optimizing it, then don't call any non-inlined function inside that loop.</p>\n\n<p>2) The way stdio route out the content is very implementation dependent, and can be very slow. If you are using a development board to run the code, then stdio is usually implemented via JTAG. In this case, not only printf but everything through stdio are extremely slow. If you use printf too much, you'll hit the timing limit easily.</p>\n\n<p>3) Your target platform may not implement stdio. This is common for embedded platform, because they are EMBEDDED in something else and might not have an easy way to route contents in or out.</p>\n\n<p>And to your question: yes and no.</p>\n\n<p>Yes: there are, trace utilities that are designed to be lightweight and fast and can be used as a faster alternative to printf, like GT_TRACE by Texas Instruments for their DPS's. Unlike printf, trace can be easily turned off at run time and compile time. When turned off, they take very little time.</p>\n\n<p>No: trace utilities are not standard C. They are usually part of your target platform's SDK</p>\n\n<p>Bottom line: for now, don't think too much about it. Replace printfs with trace when you move to embedded platform, if necessary.</p>\n"}], "owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3970, "favorite_count": 1, "accepted_answer_id": 27944410, "answer_count": 2, "score": 0, "last_activity_date": 1422460807, "creation_date": 1421238360, "question_id": 27942929, "link": "https://stackoverflow.com/questions/27942929/a-function-that-is-faster-than-printf", "title": "a function that is faster than printf", "body": "<p>I am beginner c programmer and I read that <code>printf()</code> is very sophisticates function that is very slow and consumes many CPU cycles. So I want to know is there any function that exists in standard pure c library and is faster than <code>printf()</code> or not and when to use that function and when not to use it. My goal is to write efficient code that can work on any computer and/or embedded system</p>\n"}, {"tags": ["c", "compiler-construction", "bison", "yacc", "flex-lexer"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421237856, "post_id": 27942585, "comment_id": 44281001, "body": "It&#39;s not possible to know what is going wrong with this information, please post the name and content of each file, and how are you trying to compile the program."}, {"owner": {"reputation": 1750, "user_id": 1262568, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b7850546eac0298026dc778445fddcdc?s=128&d=identicon&r=PG", "display_name": "whd", "link": "https://stackoverflow.com/users/1262568/whd"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421238047, "post_id": 27942585, "comment_id": 44281097, "body": "You can see its *.y file from errors i compile it in standard way <code>flex file.l bison -dy file.y  gcc lex.yy.c y.tab.c -o file.exe</code>"}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1421239280, "creation_date": 1421239280, "answer_id": 27943196, "question_id": 27942585, "link": "https://stackoverflow.com/questions/27942585/mixing-bison-and-c-code/27943196#27943196", "title": "Mixing Bison and C code", "body": "<pre><code>head = NULL; \n</code></pre>\n\n<p>This is a statement outside of any function. This is not allowed.</p>\n\n<p>If you want to initialize global data, do it at the point of declaration:</p>\n\n<pre><code>list_ID * curr, * head = NULL;\n</code></pre>\n\n<p>In addition, you should not cast the result of <code>malloc</code>. Make sure you have zero warnings while compiling with <code>-Wall -Wextra.</code></p>\n"}], "owner": {"reputation": 1750, "user_id": 1262568, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b7850546eac0298026dc778445fddcdc?s=128&d=identicon&r=PG", "display_name": "whd", "link": "https://stackoverflow.com/users/1262568/whd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 27943196, "answer_count": 1, "score": 0, "last_activity_date": 1421239280, "creation_date": 1421237196, "question_id": 27942585, "link": "https://stackoverflow.com/questions/27942585/mixing-bison-and-c-code", "title": "Mixing Bison and C code", "body": "<p>Here is part of my program.</p>\n\n<pre><code>    %{\n    #include &lt;stdlib.h&gt;\n    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;math.h&gt;\n    int yylex(void);\n    int yylineno;\n    char* yytext;\n    void yyerror(const char *s) { printf(\"ERROR: %s\\n\", s); }\n    void addID(char *ID);\n\n%}\n\n%union{ char * string;}\n\n\n%%\n    program: \n|DECLARE vdeclarations IN commands END\n;\n\nvdeclarations:\nvdeclarations IDENTIFIER {addID($2);}\n| IDENTIFIER {addID($1);}\n;\n</code></pre>\n\n<p>and some C functions at the end</p>\n\n<pre><code>    struct list_ID {\n    char *ID;\n    int index;\n    struct list_ID * next;\n};\ntypedef struct list_ID list_ID;\nlist_ID * curr, * head;\nhead = NULL;\nint i = 0;\nvoid addID(char *s)\n{\n    curr = (list_ID *)malloc(sizeof(list_ID));\n    curr-&gt;ID = strdup(s);\n    curr-&gt;index = i++;\n    free(s);\n    curr-&gt;next = head;\n    head = curr;\n}\n</code></pre>\n\n<p>I simply want to add all IDENTIFIERS to linked list but gcc give me such errors.</p>\n\n<pre><code>kompilator.y:74:1: warning: data definition has no type or storage class [enable\nd by default]\nkompilator.y:74:1: error: conflicting types for 'head'\nkompilator.y:73:19: note: previous declaration of 'head' was here\nkompilator.y:74:8: warning: initialization makes integer from pointer without a\ncast [enabled by default]\nkompilator.y: In function 'addID':\nkompilator.y:82:13: warning: assignment makes pointer from integer without a cas\nt [enabled by default]\nkompilator.y:83:7: warning: assignment makes integer from pointer without a cast\n [enabled by default]\n</code></pre>\n\n<p>so isnt it possible to make such mixs  in bison ? or there is something wrong with my C code part? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1421236973, "post_id": 27942479, "comment_id": 44280502, "body": "What is the size of <code>size_t</code>? Is it 4?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1421237912, "post_id": 27942479, "comment_id": 44281025, "body": "Note that <code>*(size_t *)(last);</code> also causes undefined behaviour. Address stored in <code>last</code> isn&#39;t from <code>size_t</code> type, and it is very likely that said address also doesn&#39;t have correct alignment for <code>size_t</code> type."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1421238044, "post_id": 27942479, "comment_id": 44281094, "body": "<code>printf(&quot;0x%lx&quot;,u);</code> also has undefined behaviour. Sizes of <code>long</code> and <code>size_t</code> might not be the same. Either use <code>&quot;0x%zx&quot;,u</code> or <code>&quot;0x%lx&quot;, (long)u</code>"}, {"owner": {"reputation": 380, "user_id": 75367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752421e63a0830e11a61adec91baff24?s=128&d=identicon&r=PG", "display_name": "dog", "link": "https://stackoverflow.com/users/75367/dog"}, "reply_to_user": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 1, "creation_date": 1421239307, "post_id": 27942479, "comment_id": 44281740, "body": "@Codor As mentioned above I&#39;m assuming a standard 64 bit platform with sizeof(size_t)==8"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1421246372, "post_id": 27942479, "comment_id": 44286038, "body": "<a href=\"http://stackoverflow.com/questions/20312340/why-does-this-implementation-of-strlen-work\">Here</a> and maybe <a href=\"http://stackoverflow.com/questions/3246008/c-strings-strlen-and-valgrind\">here</a>, basically the same is discussed for common <code>strlen</code> implementations. Probably there are even better duplicates here, searching for <code>strlen</code> may help finding them."}, {"owner": {"reputation": 380, "user_id": 75367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752421e63a0830e11a61adec91baff24?s=128&d=identicon&r=PG", "display_name": "dog", "link": "https://stackoverflow.com/users/75367/dog"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421247992, "post_id": 27942479, "comment_id": 44287170, "body": "@mafso Thanks, this is what I&#39;ve been looking for."}], "answers": [{"comments": [{"owner": {"reputation": 380, "user_id": 75367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752421e63a0830e11a61adec91baff24?s=128&d=identicon&r=PG", "display_name": "dog", "link": "https://stackoverflow.com/users/75367/dog"}, "edited": false, "score": 0, "creation_date": 1421239050, "post_id": 27942561, "comment_id": 44281602, "body": "Yes, but this is only a shortened example. The code I took this from is heavily used, so I&#39;m assuming if there actually is potential to crash I&#39;d have seen a case by now."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 380, "user_id": 75367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752421e63a0830e11a61adec91baff24?s=128&d=identicon&r=PG", "display_name": "dog", "link": "https://stackoverflow.com/users/75367/dog"}, "edited": false, "score": 0, "creation_date": 1421239854, "post_id": 27942561, "comment_id": 44282078, "body": "@dog Of course there is a potential for a crash, since you&#39;re doing invalid things and getting undefined behavior."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1421237112, "creation_date": 1421237112, "answer_id": 27942561, "question_id": 27942479, "link": "https://stackoverflow.com/questions/27942479/accessing-invalid-memory-via-cast/27942561#27942561", "title": "Accessing invalid memory via cast?", "body": "<p>Your understanding is halting.</p>\n\n<p>What happens is that you get <em>undefined behavior</em>. The exact visible result when that happens is, of course, undefined. You cannot claim \"it works because it didn't crash\". Not crashing is certainly one thing that can happen, but so is crashing. The behavior is, after all, undefined.</p>\n"}], "owner": {"reputation": 380, "user_id": 75367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752421e63a0830e11a61adec91baff24?s=128&d=identicon&r=PG", "display_name": "dog", "link": "https://stackoverflow.com/users/75367/dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421239579, "creation_date": 1421236855, "last_edit_date": 1421239579, "question_id": 27942479, "link": "https://stackoverflow.com/questions/27942479/accessing-invalid-memory-via-cast", "title": "Accessing invalid memory via cast?", "body": "<p>Take this contrived example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main (int argc, char const *argv[])\n{\n    char *buf = malloc(8);\n    strcpy(buf,\"Hello W\");\n\n    char *last = &amp;buf[4];\n\n    size_t u = *(size_t *)(last);\n\n    printf(\"0x%lx\",u); // prints \"0x57206f\" on little endian\n\n    return 0;\n}\n</code></pre>\n\n<p>As per my (rather basic) understanding of C's memory management this would result in the following memory read (assuming 64 Bit):</p>\n\n<pre><code>+--+--+--+--+--+--+--+--+--+--+--+--+--+\n|H |e |l |l |o |  |W |\\0|? |? |? |? |\u2026 |\n+--+--+--+--+--+--+--+--+--+--+--+--+--+\n             ^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>Thereby accessing a memory region that might have not been allocated to the program and causing a crash.\nHowever this seems to work fine in practice \u2013 is this defined behavior?</p>\n\n<p><strong>Addition:</strong></p>\n\n<p>I made this example from the code shown here: <a href=\"http://www.daemonology.net/blog/2008-06-05-faster-utf8-strlen.html\" rel=\"nofollow\">http://www.daemonology.net/blog/2008-06-05-faster-utf8-strlen.html</a></p>\n"}, {"tags": ["c", "linux", "shell", "chdir"], "comments": [{"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 1, "creation_date": 1421236117, "post_id": 27942176, "comment_id": 44280073, "body": "Before calling the <code>chdir</code>, Have you check what is placed in that pointer."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1421236126, "post_id": 27942176, "comment_id": 44280080, "body": "Have you tried debugging your program? What is the value of <code>str</code>? What is the value of <code>dir</code>? What error do you get?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1421236162, "post_id": 27942176, "comment_id": 44280097, "body": "Oh, and if <code>cd</code> has an argument, the input string you need to compare to is <b><i>not</i></b> <code>&quot;cd\\n&quot;</code>. Something you should have found very quickly if you just used a debugger, or just printed out the contents of <code>str</code>."}], "answers": [{"comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1421237354, "post_id": 27942285, "comment_id": 44280715, "body": "If you are unable to understand what&#39;s going on here, maybe writing a complicated shell application might be something you want to postpone, until your skills improve, somewhat. Either your string has an additional word, or it&#39;s not. There are no other possibilities. This is not a big mystery. If it&#39;s not, you have no additional words to extract here. If it does, your strcmp() is wrong."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1421236169, "creation_date": 1421236169, "answer_id": 27942285, "question_id": 27942176, "link": "https://stackoverflow.com/questions/27942176/make-my-own-shell-c-chdir/27942285#27942285", "title": "make my own shell - C - chdir()", "body": "<p>The string comparison will never succeed if you expect there to be an argument.</p>\n\n<p>The string <code>\"cd\\n\"</code> which you're using with <code>strcmp()</code> doesn't include an argument, so it won't match if <code>str</code> is longer.</p>\n"}, {"tags": [], "owner": {"reputation": 901, "user_id": 2759002, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da56a1cda361fe8d877c115da7901e91?s=128&d=identicon&r=PG&f=1", "display_name": "KrunalParmar", "link": "https://stackoverflow.com/users/2759002/krunalparmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1440270912, "creation_date": 1440270912, "answer_id": 32159856, "question_id": 27942176, "link": "https://stackoverflow.com/questions/27942176/make-my-own-shell-c-chdir/32159856#32159856", "title": "make my own shell - C - chdir()", "body": "<p>you can try </p>\n\n<pre><code>if(strncmp(str,\"cd\\n\",2)==0)\n</code></pre>\n\n<p>in the 3rd line.. as you have to ignore white spaces .. to go inside if !!</p>\n"}], "owner": {"reputation": 1, "user_id": 4291025, "user_type": "registered", "profile_image": "https://graph.facebook.com/733730836/picture?type=large", "display_name": "\u039c\u03ac\u03c1\u03b9\u03bf\u03c2 \u039c\u03b9\u03c7\u03b1\u03ae\u03bb", "link": "https://stackoverflow.com/users/4291025/%ce%9c%ce%ac%cf%81%ce%b9%ce%bf%cf%82-%ce%9c%ce%b9%cf%87%ce%b1%ce%ae%ce%bb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1258, "favorite_count": 1, "answer_count": 2, "score": -4, "last_activity_date": 1440270912, "creation_date": 1421235845, "last_edit_date": 1421236411, "question_id": 27942176, "link": "https://stackoverflow.com/questions/27942176/make-my-own-shell-c-chdir", "title": "make my own shell - C - chdir()", "body": "<p>I have tried to write my own shell in C. I have a problem with <code>chdir()</code> function.\nSometimes I have an error message that says <code>execvp: No such file or Directory</code> and some others nothing. The directory is always the same. I am trying to reach a destination that exists. </p>\n\n<pre><code>if(strcmp(str,\"exit\\n\")!=0){\n\n    history_vector[i]=strdup(str);\n\n    if(strcmp(str,\"cd\\n\")==0){\n        char *dir  = strtok(str,\" \");\n        dir = strtok(NULL,\" \");\n        if(chdir(dir) == -1) {\n            perror(\"Cannot change directory\"); \n        }   \n        else {\n            printf(\"Changing Directory .....\\n\"); \n        }\n   }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1421235702, "post_id": 27941924, "comment_id": 44279843, "body": "Did you try using a debugger and set break point in your <code>send_command</code>?"}, {"owner": {"reputation": 198, "user_id": 3577994, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b57e421b03418199a3f198cb6fcb0508?s=128&d=identicon&r=PG&f=1", "display_name": "Crysis85", "link": "https://stackoverflow.com/users/3577994/crysis85"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1421272117, "post_id": 27941924, "comment_id": 44301202, "body": "I tryed after you told me but after I finally managed to run the debugger i still can&#39;t find the source of the mess. Also, how can i read global variables in the debugger? I read values only for local ones.The I run the program again and now the first printf prints 0.0.0.0 too..."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1421290882, "post_id": 27941924, "comment_id": 44306997, "body": "Okay. In that case I think that global variable is being changed in another thread. Put breakpoints at all places whereever you change it."}, {"owner": {"reputation": 198, "user_id": 3577994, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b57e421b03418199a3f198cb6fcb0508?s=128&d=identicon&r=PG&f=1", "display_name": "Crysis85", "link": "https://stackoverflow.com/users/3577994/crysis85"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1421317163, "post_id": 27941924, "comment_id": 44315882, "body": "I think I&#39;ll start again with a different approach, thanks for your help."}], "owner": {"reputation": 198, "user_id": 3577994, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b57e421b03418199a3f198cb6fcb0508?s=128&d=identicon&r=PG&f=1", "display_name": "Crysis85", "link": "https://stackoverflow.com/users/3577994/crysis85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421235141, "creation_date": 1421235141, "question_id": 27941924, "link": "https://stackoverflow.com/questions/27941924/saving-and-accessing-field-from-a-custom-struct", "title": "Saving and accessing field from a custom struct", "body": "<p>I defined a struct like this (and other fields but they are not relevant with the question)</p>\n\n<pre><code>typedef struct {\n\n  struct sockaddr_in addr_destination;\n\n}MY_PACKET;\n</code></pre>\n\n<p>The main call a function send_command</p>\n\n<pre><code>struct sockaddr_in *addr_server;\nsocklen_t addr_server_lenght;\nMY_PACKET command_packet;\n\nvoid send_command(char *comm, int socket_file_descriptor, struct sockaddr_in *server_address) {\n    addr_server = server_address;\n    addr_server_lenght = sizeof(*addr_server);\n    printf(\"Server address: %s\\n\", inet_ntoa(addr_server-&gt;sin_addr));\n\n    command_packet.addr_destination = *addr_server;\n    printf(\"Server address: %s\\n\", inet_ntoa(command_packet.addr_destination.sin_addr));\n}\n</code></pre>\n\n<p>so the first printf prints \"127.0.0.1\" correctly \nthe second prints \"0.0.0.0\"\nThe rest of the program consists on a thread that send this packet to a server and wait for ack (so i must be able to access all the fields of command_packet from the thread function), but I'm stuck saving the server address in the packet correctly, what am I doing wrong? Thanks</p>\n"}, {"tags": ["c", "file", "visual-studio-2008", "text"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 5, "creation_date": 1421233219, "post_id": 27941282, "comment_id": 44278483, "body": "Please show the code that attempts to open the file."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1421233284, "post_id": 27941282, "comment_id": 44278527, "body": "simple. remove <i><code>some</code></i> code, modify <i><code>some</code></i> other and don&#39;t forget to add <i><code>some</code></i> more. :-)"}, {"owner": {"reputation": 11, "user_id": 4453039, "user_type": "registered", "profile_image": "https://graph.facebook.com/514035906/picture?type=large", "display_name": "Dino Djakovac", "link": "https://stackoverflow.com/users/4453039/dino-djakovac"}, "edited": false, "score": 0, "creation_date": 1421234817, "post_id": 27941282, "comment_id": 44279329, "body": "the program compiles without error. The main problem is that I don&#39;t know where to put those notepad files i created... I&#39;ve put them in folder where my project is, but it still won&#39;t open. Then I&#39;ve put them in Debug folder(a subfolder of project folder). Then I included them in the project.. Nothing works with my files"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1421235852, "post_id": 27941282, "comment_id": 44279912, "body": "@DinoDjakovac Please don&#39;t put code on comments; it&#39;s nearly impossible to read. Edit your question and add code there."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4453039, "user_type": "registered", "profile_image": "https://graph.facebook.com/514035906/picture?type=large", "display_name": "Dino Djakovac", "link": "https://stackoverflow.com/users/4453039/dino-djakovac"}, "edited": false, "score": 0, "creation_date": 1421243301, "post_id": 27944281, "comment_id": 44284184, "body": "I already changed the c to ch, it still won&#39;t work. I put file where my project is, aswell... and cmdprmt still says CAN&#39;T OPEN FILE :/"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11, "user_id": 4453039, "user_type": "registered", "profile_image": "https://graph.facebook.com/514035906/picture?type=large", "display_name": "Dino Djakovac", "link": "https://stackoverflow.com/users/4453039/dino-djakovac"}, "edited": false, "score": 0, "creation_date": 1421243409, "post_id": 27944281, "comment_id": 44284239, "body": "Hopefully you have changed the current directory in your command prompt to the project directory. Can you at least see the file with <code>dir bitovi.txt</code>?"}, {"owner": {"reputation": 11, "user_id": 4453039, "user_type": "registered", "profile_image": "https://graph.facebook.com/514035906/picture?type=large", "display_name": "Dino Djakovac", "link": "https://stackoverflow.com/users/4453039/dino-djakovac"}, "edited": false, "score": 0, "creation_date": 1421243800, "post_id": 27944281, "comment_id": 44284461, "body": "I don&#39;t understand... you see, im pretty much new to this... so i know nothing"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1421242979, "last_edit_date": 1421242979, "creation_date": 1421242642, "answer_id": 27944281, "question_id": 27941282, "link": "https://stackoverflow.com/questions/27941282/working-with-txt-in-vs2008-in-c/27944281#27944281", "title": "Working with .txt in VS2008 in C", "body": "<p>The program did not compile without error, there is a pair of typos here, <code>c</code> should be <code>ch</code>:</p>\n\n<pre><code>... (c&gt;='A' &amp;&amp; c&lt;='F') ...\n</code></pre>\n\n<p>Apart from that the program <em>almost</em> works, and the output file (created in the same folder as the executable) is readable.</p>\n\n<p>There is a mistake in trying to handle <code>newline</code> chars, which mistakenly causes the next (printing) char to be passed through and not converted to binary. I left <code>newline</code> and <code>return</code> to be passed through like other non-hex chars.</p>\n\n<p>Other than that, the handling of <code>A..F</code> is clumsy. I suggest trapping them like this:</p>\n\n<pre><code>while((ch=fgetc(ul))!=EOF)\n{\n    if ((isdigit(ch)) || (ch&gt;='A' &amp;&amp; ch&lt;='F'))\n    {\n        if (isalpha(ch))\n            ch -= 7;\n        for(i=0;i&lt;4;i++)\n            {\n            fputc((ch &amp; 0X8)?'1':'0',iz);\n            ch&lt;&lt;=1;\n            }\n    }\n    else fputc(ch,iz);\n}\n</code></pre>\n\n<p>And you might want to check and convert the lower case <code>a..f</code> too.</p>\n"}], "owner": {"reputation": 11, "user_id": 4453039, "user_type": "registered", "profile_image": "https://graph.facebook.com/514035906/picture?type=large", "display_name": "Dino Djakovac", "link": "https://stackoverflow.com/users/4453039/dino-djakovac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 27944281, "answer_count": 1, "score": -2, "last_activity_date": 1421242979, "creation_date": 1421233118, "last_edit_date": 1421236236, "question_id": 27941282, "link": "https://stackoverflow.com/questions/27941282/working-with-txt-in-vs2008-in-c", "title": "Working with .txt in VS2008 in C", "body": "<p>I wrote some program which overwrites some text in .txt file and put the overwritten one in another output.txt... But it's constantly saying that the file can't be opened. What should I do?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#include &lt;stdio.h&gt;\r\n#include &lt;ctype.h&gt;\r\n\r\nint main()\r\n{\r\n FILE *ul=fopen(\"hexbr.txt\",\"r\"),*iz=fopen(\"bitovi.txt\",\"w\");\r\n int i;\r\n char ch;\r\n\r\n if ((!ul)||(!iz)) { printf(\"Neuspesno otvaranje datoteke!\");return 0; }\r\n while((ch=fgetc(ul))!=EOF)\r\n  {\r\n   if ((isdigit(ch)) || (c&gt;='A' &amp;&amp; c&lt;='F'))\r\n    {\r\n     if (isalpha(ch))\r\n       switch(ch)\r\n       {\r\n         case 'A': { fputc('1',iz);fputc('0',iz);fputc('1',iz);fputc('0',iz);continue; }\r\n         case 'B': { fputc('1',iz);fputc('0',iz);fputc('1',iz);fputc('1',iz);continue; }\r\n         case 'C': { fputc('1',iz);fputc('1',iz);fputc('0',iz);fputc('0',iz);continue; }\r\n         case 'D': { fputc('1',iz);fputc('1',iz);fputc('0',iz);fputc('1',iz);continue; }\r\n         case 'E': { fputc('1',iz);fputc('1',iz);fputc('1',iz);fputc('0',iz);continue; }\r\n         case 'F': { fputc('1',iz);fputc('1',iz);fputc('1',iz);fputc('1',iz);continue; }\r\n       }\r\n     for(i=0;i&lt;4;i++)\r\n      {\r\n       fputc((ch &amp; 0X8)?'1':'0',iz);\r\n       ch&lt;&lt;=1;\r\n      }\r\n    }\r\n   else fputc(ch,iz);\r\n   if (ch=='\\n') { ch=fgetc(ul);fputc(ch,iz); }\r\n  }\r\n fclose(ul);\r\n fclose(iz);\r\n return 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "linux", "bash"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1421232279, "post_id": 27941013, "comment_id": 44277918, "body": "The fact that <code>enc_ber</code> is a C program is not relevant at all."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 5, "creation_date": 1421232349, "post_id": 27941013, "comment_id": 44277955, "body": "When you say &quot;return value&quot; about the C program, do you mean what is returned using <code>return</code> at the end of <code>main()</code>? Because what you&#39;re doing is storing <i>the standard output</i> emitted by the program, which is something completely different."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1421232432, "post_id": 27941013, "comment_id": 44278003, "body": "Where do you set value of <code>$frames</code> with which value?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1421232499, "post_id": 27941013, "comment_id": 44278043, "body": "If <code>frame</code> has the value <code>10</code> then <code>for i in $frames</code> will loop exactly once with <code>$i</code> having the value <code>10</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1726549"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1421232558, "post_id": 27941013, "comment_id": 44278077, "body": "@unwind Yes, that&#39;s exactly what I mean. <code>return</code> at the end of <code>main()</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1421232694, "post_id": 27941013, "comment_id": 44278165, "body": "Be ware, that although <code>main()</code> returns <code>int</code> the OS only returns the lowest byte vlaue of the <code>int</code> returned by <code>main()</code>. So <code>return 257;</code> from <code>int main()</code> whould end up in the shell with <code>1</code>."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1421236977, "post_id": 27941013, "comment_id": 44280505, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4651437/how-to-set-a-bash-variable-equal-to-the-output-from-a-command\">How to set a BASH variable equal to the output from a command?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421232404, "post_id": 27941034, "comment_id": 44277992, "body": "what do you mean by <code>object file</code>? a <i>binary</i> one?"}, {"owner": {"reputation": 5580, "user_id": 3892259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FudFA.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/3892259/skynet"}, "edited": false, "score": 0, "creation_date": 1421232414, "post_id": 27941034, "comment_id": 44277997, "body": "If it take command line arguments then you should send it through same, but i don&#39;t think more than one line output can be stored like this."}, {"owner": {"reputation": 5580, "user_id": 3892259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FudFA.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/3892259/skynet"}, "edited": false, "score": 0, "creation_date": 1421232459, "post_id": 27941034, "comment_id": 44278020, "body": "object file is the compiled code file which can be run like the way i shown"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421232520, "post_id": 27941034, "comment_id": 44278059, "body": "Can you please show some reference where it is mentioned like you said above? I&#39;m really interested. Also, please use <code>@&lt;username&gt;</code> to notify about the updates in comment. :-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421232796, "post_id": 27941034, "comment_id": 44278228, "body": "Thanks for the link. The <i>very first line</i> of that reads like <i>An object file is a file containing object code, meaning relocatable format machine code that is <b>_usually not directly executable</i></b> _ Please correct me."}, {"owner": {"reputation": 5580, "user_id": 3892259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FudFA.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/3892259/skynet"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421232956, "post_id": 27941034, "comment_id": 44278337, "body": "@SouravGhosh here is more <a href=\"http://stackoverflow.com/questions/7718299/whats-an-object-file-in-c\">information</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421233090, "post_id": 27941034, "comment_id": 44278411, "body": "Please. stop sharing links until you <i>read and understand</i> them. None of the two links supports your version. if <code>abc</code> is object file, <code>.&#47;abc</code> is not possible. <code>abc</code> should be an executable. If you think otherwise, enlight me please."}, {"owner": {"reputation": 5580, "user_id": 3892259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FudFA.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/3892259/skynet"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421234056, "post_id": 27941034, "comment_id": 44278950, "body": "@SouravGhosh if this is not directly executable how can I running it?? <a href=\"http://prntscr.com/5sb9s2\" rel=\"nofollow noreferrer\">prntscr.com/5sb9s2</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421234336, "post_id": 27941034, "comment_id": 44279097, "body": "Aghh. Who told you <code>-o</code> creates <i>object</i> files? Heard anything called <code>-c</code> option of <code>gcc</code>? Please, do read them [type <code>man gcc</code>]. And, you&#39;re welcome. :-)"}, {"owner": {"reputation": 5580, "user_id": 3892259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FudFA.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/3892259/skynet"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421234699, "post_id": 27941034, "comment_id": 44279276, "body": "Ok thanks for all the information @SouravGhosh i will edit it to appropriate info"}], "tags": [], "owner": {"reputation": 5580, "user_id": 3892259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FudFA.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/3892259/skynet"}, "is_accepted": false, "score": 0, "last_activity_date": 1421234758, "last_edit_date": 1421234758, "creation_date": 1421232271, "answer_id": 27941034, "question_id": 27941013, "link": "https://stackoverflow.com/questions/27941013/how-to-call-a-c-program-inside-bash-script-and-store-its-return-value-to-a-varia/27941034#27941034", "title": "How to call a C program inside bash script and store its return value to a variable?", "body": "<p>If you have an out file,</p>\n\n<pre><code>gcc abc.c -o abc\n</code></pre>\n\n<p>Then you can do this,</p>\n\n<pre><code>output=`./abc &lt;agr1&gt; &lt;agr2&gt; &lt;arg3&gt;`\n\necho $output\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1421233178, "last_edit_date": 1421233178, "creation_date": 1421232450, "answer_id": 27941087, "question_id": 27941013, "link": "https://stackoverflow.com/questions/27941013/how-to-call-a-c-program-inside-bash-script-and-store-its-return-value-to-a-varia/27941087#27941087", "title": "How to call a C program inside bash script and store its return value to a variable?", "body": "<p>You don't need to store it's return value, it's stored in the special variable <code>?</code> so just</p>\n\n \n\n<pre><code>./cprogram\necho $?\n</code></pre>\n\n<p>that will output the exit code of <code>cprogram</code>, you could of course assign it to a variable now, if you need to call another program and retain this value.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1726549"}, "edited": false, "score": 0, "creation_date": 1421232719, "post_id": 27941092, "comment_id": 44278181, "body": "This works. But is there any way to work around the 255 restriction?"}, {"owner": {"reputation": 13020, "user_id": 3336968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvcNB.jpg?s=128&g=1", "display_name": "fredtantini", "link": "https://stackoverflow.com/users/3336968/fredtantini"}, "edited": false, "score": 3, "creation_date": 1421232794, "post_id": 27941092, "comment_id": 44278225, "body": "The only way I see is use what you have done, but print to stderr what you don&#39;t want and to stdout what you want to capture."}], "tags": [], "owner": {"reputation": 13020, "user_id": 3336968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvcNB.jpg?s=128&g=1", "display_name": "fredtantini", "link": "https://stackoverflow.com/users/3336968/fredtantini"}, "is_accepted": true, "score": 5, "last_activity_date": 1421232983, "last_edit_date": 1421232983, "creation_date": 1421232504, "answer_id": 27941092, "question_id": 27941013, "link": "https://stackoverflow.com/questions/27941013/how-to-call-a-c-program-inside-bash-script-and-store-its-return-value-to-a-varia/27941092#27941092", "title": "How to call a C program inside bash script and store its return value to a variable?", "body": "<p>The return value of a program is store in the <code>$?</code> variable. So you only need to add each <code>$?</code>:</p>\n\n<pre><code>for i in $frames;\ndo\n    ./enc_ber $bytes $snr $modulation $channel $alamouti\n    encBER=$((encBER + $?))\ndone\n</code></pre>\n\n<p>Note that the value is restricted to eight bits, so the maximum value is 255.</p>\n\n<hr>\n\n<p>If you want to capture an integer greater than 255 or a float for instance, use stderr for all the things you don't want (<code>fprintf(stderr, \"Things I don't want\\n\");</code>) and stdout to print the return value you want to catch.</p>\n"}, {"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1421236862, "post_id": 27941216, "comment_id": 44280443, "body": "i was about to upvote this but the temporary file is completely superfluous. Just <code>output=$(.&#47;enc_ber ...)</code> is the way to go, once you have fixed <code>enc_ber</code> to print, rather than <code>return()</code>, the result."}, {"owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1421252113, "post_id": 27941216, "comment_id": 44289878, "body": "@tripleee: Yes, that&#39;s a fair point. If the output was complex and needed filtering / parsing, I&#39;d normally write to a temporary file - deleted later - and process separately, but for a simple case, it makes perfect sense to combine the two lines. Thanks."}], "tags": [], "owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "is_accepted": false, "score": 4, "last_activity_date": 1421232878, "creation_date": 1421232878, "answer_id": 27941216, "question_id": 27941013, "link": "https://stackoverflow.com/questions/27941013/how-to-call-a-c-program-inside-bash-script-and-store-its-return-value-to-a-varia/27941216#27941216", "title": "How to call a C program inside bash script and store its return value to a variable?", "body": "<p>The <em>output</em> from a program is different from its <em>return code</em>. The return code should generally be 0, indicating success, or non zero, indicating failure. If you want the return code then you can simply run the program and check the variable <code>$?</code> afterwards:</p>\n\n<pre><code>./enc_ber $bytes $snr $modulation $channel $alamouti\nretVal=$?\n# retVal now contains the value passed back from the exit of your program.\n</code></pre>\n\n<p>Be careful not to do anything in between running your program and checking the result otherwise the value of <code>$?</code> will change again.</p>\n\n<p>On the other hand, if you want your program to write a value to stdout and that's the output you need to obtain then you'll have to redirect the output to a file and then read the content of file:</p>\n\n<pre><code>./enc_ber $bytes $snr $modulation $channel $alamouti &gt;./my_file.txt\noutput=$( cat my_file.txt )\n# output now contains whatever enc_ber wrote to stdio\n</code></pre>\n\n<p>Naturally, you program will have to write <strong>only</strong> those things you wish to capture. Log lines and other extra formatting will cause you problems. The above is a simple example - it's up to you to parse whatever your program outputs, but the above should work for a simple number output.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1726549"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3587, "favorite_count": 1, "accepted_answer_id": 27941092, "answer_count": 4, "score": 3, "last_activity_date": 1421234758, "creation_date": 1421232173, "question_id": 27941013, "link": "https://stackoverflow.com/questions/27941013/how-to-call-a-c-program-inside-bash-script-and-store-its-return-value-to-a-varia", "title": "How to call a C program inside bash script and store its return value to a variable?", "body": "<p>I have bash script where I ask the user for some inputs, and then I want to call a C program a few times, and sum the return value. Please note that the main function inside my C program has some <code>printf</code> statements also, and it returns an integer value. Here is the part of my bash script:</p>\n\n<pre><code> #!/bin/bash\n\nencBER=0\n\n// Some other code where I read the values from the user\n\nfor i in $frames;\ndo\n    tempEncBER=$(./enc_ber $bytes $snr $modulation $channel $alamouti)\n    encBER=$((encBER + tempEncBER))\ndone\n\necho \"Total BER is:\" $encBER\n</code></pre>\n\n<p>The point is that I ask it to execute 10 times, meaning the <code>frames</code> variables has the value of 10, but it executes once, it shows some syntax error, and then executes again, and for the final result, the value of <code>encBER</code> is 0. It simply doesn't store anything there. How can I get the value of the return statement in my main function in my C program and use it in bash?</p>\n"}, {"tags": ["c", "pointers", "dynamic-allocation"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421231831, "post_id": 27940886, "comment_id": 44277696, "body": "For whatever reason you have <code>char ***</code> it is very likely a bad idea, and also insufficient space, it should be <code>calloc(n, sizeof(char **))</code>; or even <code>calloc(n, sizeof(char *));</code> or <code>calloc(n, sizeof(void *));</code> i.e. <code>n</code> pointers, but not <code>calloc(sizeof(char));</code>. Also, don&#39;t cast <code>calloc</code>/<code>malloc</code> it could hide bugs in your program."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421232036, "post_id": 27940886, "comment_id": 44277809, "body": "what do you think this <code>*dptr[i] = GetDefinitions();</code> does?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 3, "creation_date": 1421232080, "post_id": 27940886, "comment_id": 44277836, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Don&#39;t cast the return value of <code>malloc()</code> and friends in C</a>."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1421232364, "post_id": 27940886, "comment_id": 44277968, "body": "what do you think is the result of <code>int indexcount = sizeof(dptr) &#47; sizeof(char)</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1421233129, "post_id": 27940886, "comment_id": 44278439, "body": "<a href=\"http://stackoverflow.com/a/25750950/775806\">stackoverflow.com/a/25750950/775806</a>"}, {"owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421233267, "post_id": 27940886, "comment_id": 44278514, "body": "i just went through the code and i think the problem is this line int indexcount = sizeof(dptr) / sizeof(char)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421234152, "post_id": 27940886, "comment_id": 44279002, "body": "@Puloko did you know <a href=\"http://stackoverflow.com/tour\">this</a>? and could you please send me an email with the details of what your program should do? I need to see why are so many people using this <code>***</code> thing, is there no better solution? iharob@gmail.com"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421232141, "post_id": 27940941, "comment_id": 44277865, "body": "the point of the third degree pointers is to make dictionary dictionaryPTR&gt;&gt;Dynamic Array of Pointers To Another dynamic Array of pointers&gt;&gt;Dynamic array of pointers pointing towards addresses of arrays of words or strings which are dynamically allocated"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421232188, "post_id": 27940941, "comment_id": 44277882, "body": "@Puloko Don&#39;t you think just a double pointer will serve your purpose?"}, {"owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421232287, "post_id": 27940941, "comment_id": 44277920, "body": "to be honest i have no idea"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421232391, "post_id": 27940941, "comment_id": 44277983, "body": "@Puloko Get rid of triple pointers ans re-design the code using double pointers and I think that is a much better idea and much easier instead of this. I don&#39;t see a need for triple pointer here"}, {"owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421232529, "post_id": 27940941, "comment_id": 44278064, "body": "i will have to qsort the words so i think that triple pointer is still necessary,"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421233485, "post_id": 27940941, "comment_id": 44278636, "body": "@Puloko <code>qsort</code> is not a good reason for triple pointers. But i must say, I have seen a lot of <code>dictionary</code> programs here in SO, that use <code>***</code>, I don&#39;t get it? is it that your teacher is telling you guys to do so?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421233772, "post_id": 27940941, "comment_id": 44278802, "body": "Could someone (propably you <i>Gopi</i>) give a serious reason for this wide spread triple-pointer bashing? Three levels of indirection naturllay lead to triple-pointers. An array of arrays of C-&quot;string&quot;s is three levels of indirection. So what?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421233962, "post_id": 27940941, "comment_id": 44278900, "body": "&quot;<i>just using double pointers is good here.</i>&quot; would you mind giving an example?"}, {"owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421234721, "post_id": 27940941, "comment_id": 44279283, "body": "@iharob yes pretty much, its a requirement to work with the triple pointer"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421231898, "creation_date": 1421231898, "answer_id": 27940941, "question_id": 27940886, "link": "https://stackoverflow.com/questions/27940886/pointer-to-dynamic-array-of-pointers-to-dynamic-array-of-pointer-that-points-to/27940941#27940941", "title": "pointer to dynamic array of pointers to dynamic array of pointer that points to strings", "body": "<p>As already mentioned in the comment this is a very bad idea and just using double pointers is good here. But the below fixes should be done if you want to use pointers to allocate memory </p>\n\n<pre><code>index = calloc(n, sizeof(char));\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>index = calloc(n, sizeof(char **));\n</code></pre>\n\n<p>and</p>\n\n<pre><code>definition = calloc(n+1, sizeof(char));\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>definition = calloc(n+1, sizeof(char *));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421232685, "post_id": 27941102, "comment_id": 44278158, "body": "the return just drops the program if allocation fails, is that wrong? i dont really think i can do exit(1) in a function that isnt a main()"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421233163, "post_id": 27941102, "comment_id": 44278460, "body": "&quot;<i>the return just drops the program if allocation fails, is that wrong?</i>&quot; It&#39;s ok, but not nice. You may call <code>exit()</code> any time, but in signal handlers. @Puloko"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421233437, "post_id": 27941102, "comment_id": 44278609, "body": "1+ for a complete answer. Still all <code>int</code>s shall be <code>size_t</code>s."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421233522, "post_id": 27941102, "comment_id": 44278651, "body": "@alk I didn&#39;t notice that, since there are so many other issues, but it&#39;s a good suggestion, i will fix it."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1421233603, "post_id": 27941102, "comment_id": 44278693, "body": "&quot;<i>... be <code>size_t</code>s.</i>&quot; or at least <code>unsigned</code>."}, {"owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421233652, "post_id": 27941102, "comment_id": 44278728, "body": "edited the *dptr[i] thing, the indexcount is 1 when i tried making the array with 4 cells,can i free an allocated memory within a function?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421233818, "post_id": 27941102, "comment_id": 44278827, "body": "It&#39;s because of the 3rd point of my answer, try the code I fixed. Read it, and try to understand it."}, {"owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "edited": false, "score": 0, "creation_date": 1421235075, "post_id": 27941102, "comment_id": 44279475, "body": "@iharob why does the Getindexes() function has an input value and a scanf value?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421235251, "post_id": 27941102, "comment_id": 44279574, "body": "Because that way you keep track of the number of indices, otherwise you could just <code>scanf</code> in main and pass it to <code>GetIndexes</code> function, but you must keep track of that value, the <code>sizeof</code> operator cannot give that value, it&#39;s not possible to compute it."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 4, "last_activity_date": 1421233756, "last_edit_date": 1421233756, "creation_date": 1421232526, "answer_id": 27941102, "question_id": 27940886, "link": "https://stackoverflow.com/questions/27940886/pointer-to-dynamic-array-of-pointers-to-dynamic-array-of-pointer-that-points-to/27941102#27941102", "title": "pointer to dynamic array of pointers to dynamic array of pointer that points to strings", "body": "<p>Your program is very broken</p>\n\n<ol>\n<li><p>You allocate <code>n</code> <code>char ***</code>s but only request space for <code>n</code> <code>char</code>s and also do it for <code>char **</code>, to prevent this kind of mistake you may use the <code>sizeof</code> operator this way</p>\n\n<pre><code>char ***index;\nindex = calloc(n, sizeof(*index));\n</code></pre>\n\n<p>and</p>\n\n<pre><code>char **definition;\ndefinition = calloc(n, sizeof(*definition));\n</code></pre>\n\n<p>and as you see casting <code>calloc</code> makes it harder and it's not necessary.</p></li>\n<li><p>You have a <code>return</code> statement that doesn't return anything an <code>GetIndexes()</code> as well as one in <code>GetDefinitions</code>.</p>\n\n<p>They should return <code>NULL</code> if you want to handle failure in the caller function</p>\n\n<pre><code>return NULL;\n</code></pre></li>\n<li><p>You erroneously use the <code>sizeof</code> operator to determine the number of <code>char ***</code> pointer allocated in</p>\n\n<pre><code>int indexcount = sizeof(dptr) / sizeof(char)\n</code></pre>\n\n<p>this will be either <code>4</code> or <code>8</code> depending on the architecture i.e. the size of a pointer divided by  1 <code>sizeof(char) == 1</code> always.</p>\n\n<p>You can't compute that value, you simply have to keep track of it. The size</p></li>\n<li><p>You dereference the triple pointer twice and try to assign a double pointer to it</p>\n\n<pre><code>*dptr[i] = GetDefinitions();\n</code></pre>\n\n<p>here the operator precedence is also an issue, but regardless of that, this is wrong, may be what you meant was</p>\n\n<pre><code>dptr[i] = GetDefinitions();\n</code></pre></li>\n<li><p>This is not going to make your program crash, but it's certainly important to <code>free</code> all <code>malloc</code>ed pointers before exiting the program.</p></li>\n</ol>\n\n<p>Here is a suggestion for your code to work, ignore it's purpose since it's not clear what you are trying to do</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar ***GetIndexes(unsigned int *count)\n{\n    char ***index;\n\n    printf(\"please insert the number of words you want to add to dictionary &gt; \");\n    scanf(\"%u\", count);\n\n    index = calloc(*count, sizeof(*index));\n    if (index == NULL)\n    {\n        printf(\"allocation Failed\");\n        return NULL;\n    }\n\n    return index;\n}\n\nchar **GetDefinitions(unsigned int *count)\n{\n    char **definition;\n\n    printf(\"please insert the number of defintions you want to add to the word &gt; \");\n    scanf(\"%u\", count);\n\n    definition = calloc(*count + 1, sizeof(*definition));\n    if (definition == NULL)\n    {\n        printf(\"allocation failed\");\n        return NULL;\n    }\n    return definition;\n}\n\nint main()\n{\n    unsigned int indexCount, i;\n    char      ***dptr = GetIndexes(&amp;indexCount);\n\n    if (dptr == NULL)\n    {\n        printf(\"memory Allocation failed\");\n    }\n\n    for (i = 0; i &lt; indexCount; i++)\n    {\n        unsigned int definitionsCount;\n\n        printf(\"Word number %u\\n\", i + 1);\n        dptr[i] = GetDefinitions(&amp;definitionsCount);\n        if (dptr[i] != NULL)\n        {\n            /* use dptr[i] here or maybe somewhere else, but when you finish */\n            free(dptr[i]);\n        }\n    }\n    printf(\"%p\", dptr);\n    /* now if you are done using dptr */\n    free(dptr);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4452911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WBEf59ysVjA/AAAAAAAAAAI/AAAAAAAAAD4/n0ura7z55lA/photo.jpg?sz=128", "display_name": "Puloko", "link": "https://stackoverflow.com/users/4452911/puloko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 27941102, "answer_count": 2, "score": 0, "last_activity_date": 1421233756, "creation_date": 1421231733, "question_id": 27940886, "link": "https://stackoverflow.com/questions/27940886/pointer-to-dynamic-array-of-pointers-to-dynamic-array-of-pointer-that-points-to", "title": "pointer to dynamic array of pointers to dynamic array of pointer that points to strings", "body": "<p>i have a problem with the initialization of the values inside the first dynamic array of pointers</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nchar*** GetIndexes()\n{\nint n = 0;\nchar ***index;\nprintf(\"please insert the number of words you want to add to dictionary\\n\");\nscanf(\"%d\", &amp;n);\nindex = (char***)calloc(n, sizeof(char));\nif (index == NULL)\n{\n    printf(\"allocation Failed\");\n    return;\n}\nreturn index;\n}\nchar** GetDefinitions()\n{\nint n = 0;\nchar **definition;\nprintf(\"please insert the number of defintions you want to add to the word\\n\");\nscanf(\"%d\", &amp;n);\ndefinition = (char**)calloc(n+1, sizeof(char));\nif (definition == NULL)\n{\n    printf(\"allocation failed\");\n    return;\n}\nreturn definition;\n}\nint main()\n{\nchar *** dptr = GetIndexes();\nif (dptr == NULL)\n{\n    printf(\"memory Allocation failed\");\n}\nint indexcount = sizeof(dptr) / sizeof(char),i;\nfor (i = 0; i &lt; indexcount; i++)\n{\n    printf(\"word number %d\\n\", i + 1);\n    *dptr[i] = GetDefinitions();\n}\nprintf(\"%p\",dptr);\n\n}\n</code></pre>\n\n<p>i tried running the debugger in VS2013 and after i enter the number of defintions i want it crashed with this message:</p>\n\n<p>Unhandled exception at 0x01103FB0 in ConsoleApplication1.exe: 0xC0000005: Access violation writing location 0x00000000.</p>\n\n<p>i missed an allocation of something but i cant quite figure out what i missed,</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["c", "protocol-buffers", "cross-compiling"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1421231777, "post_id": 27940874, "comment_id": 44277661, "body": "Not an answer, but I&#39;d recommend better to use nano-pb for c-bindings."}, {"owner": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "edited": false, "score": 0, "creation_date": 1421302462, "post_id": 27940874, "comment_id": 44309648, "body": "Open up the file and check what comes immediately before the line 20 &#39;typedef&#39;. The first error (and the only relevant one) is &quot;Something is missing before this typedef&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1072, "user_id": 203115, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d0059ea0f474c4b4d6efd47a908334fc?s=128&d=identicon&r=PG", "display_name": "Jinho Yoo", "link": "https://stackoverflow.com/users/203115/jinho-yoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1421317174, "creation_date": 1421317174, "answer_id": 27961228, "question_id": 27940874, "link": "https://stackoverflow.com/questions/27940874/issue-to-compile-protobuf-c-on-mips-target-system/27961228#27961228", "title": "Issue to compile protobuf-c on MIPS target system", "body": "<p>I found the reason. I used protobuf I compiled manually. That version is different from buildroot's protobuf version. I applied buildroot's protobuf and compiled proto file again. Then it worked. </p>\n"}], "owner": {"reputation": 1072, "user_id": 203115, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d0059ea0f474c4b4d6efd47a908334fc?s=128&d=identicon&r=PG", "display_name": "Jinho Yoo", "link": "https://stackoverflow.com/users/203115/jinho-yoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526481772, "creation_date": 1421231713, "last_edit_date": 1421231797, "question_id": 27940874, "link": "https://stackoverflow.com/questions/27940874/issue-to-compile-protobuf-c-on-mips-target-system", "title": "Issue to compile protobuf-c on MIPS target system", "body": "<p>This is cross compile issue. </p>\n\n<p>I crated <a href=\"https://github.com/protobuf-c/protobuf-c\" rel=\"nofollow\">xxxx.proto</a> and generated C code by using protobuf-c project. It was compiled successfully on x86 linux. </p>\n\n<p>But when I cross compiled it for MIPS, then it made compile error. I compiled protobuf, protobuf-c by using buildroot. And toolchain is sorcery tools.</p>\n\n<p>The source code is like below. </p>\n\n<pre><code>#include &lt;string.h&gt;\n#include \"egmessage.pb-c.h\"  //header file that protobuf-c generated. I never touched it. \n\nint main (void)\n{\n    printf(\"Hello, world.\");\n    return 0;\n}\n</code></pre>\n\n<p>I tried to compile this code by using command below. </p>\n\n<pre><code>mips-linux-gnu-gcc egmessage.pb-c.c test.c -o extest -I/home/vagrant/tools/buildroot-2014.11/output/staging/usr/include -lprotobuf-c\n</code></pre>\n\n<p>Then I got the compile error like below. </p>\n\n<pre><code>In file included from test.c:6:0:\negmessage.pb-c.h:20:1: error: expected '=', ',', ';', 'asm' or '__attribute__' b\nefore 'typedef'\n typedef struct _ControlMessage ControlMessage;\n ^\negmessage.pb-c.h:35:23: error: unknown type name 'ControlMessage'\n                      (ControlMessage         *message);\n                       ^\negmessage.pb-c.h:37:22: error: unknown type name 'ControlMessage'\n                      (const ControlMessage   *message);\n                      ^\negmessage.pb-c.h:39:22: error: unknown type name 'ControlMessage'\n                      (const ControlMessage   *message,\n                      ^\negmessage.pb-c.h:42:22: error: unknown type name 'ControlMessage'\n                      (const ControlMessage   *message,\n                      ^\negmessage.pb-c.h:44:1: error: unknown type name 'ControlMessage'\n ControlMessage *\n ^\negmessage.pb-c.h:50:23: error: unknown type name 'ControlMessage'\n                      (ControlMessage *message,\n                       ^\negmessage.pb-c.h:54:18: error: unknown type name 'ControlMessage'\n                  (const ControlMessage *message,\n                  ^\ntest.c:8:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'int'\n\n int main (void)\n ^\n</code></pre>\n\n<p>Error message said it want to use several symbol. Have you the experience like that? </p>\n"}, {"tags": ["c", "syntax-error"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1421231379, "post_id": 27940747, "comment_id": 44277432, "body": "Pseudo-code in C? Do you mean using macros to uncompile some stuff in your code?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421231414, "post_id": 27940747, "comment_id": 44277455, "body": "c and c++ source will be very different to parse."}, {"owner": {"reputation": 17, "user_id": 4452896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1ed2c5914b0f89fde58fd0acc0fb8a?s=128&d=identicon&r=PG&f=1", "display_name": "utiliopt ", "link": "https://stackoverflow.com/users/4452896/utiliopt"}, "edited": false, "score": 1, "creation_date": 1421231433, "post_id": 27940747, "comment_id": 44277469, "body": "No. Let&#39;s say you have a C source (let only C, not C++)file that contains errors. The idea of the pseudocode program is to describe how the compiler would notice these errors and how it should handle them."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421231629, "post_id": 27940747, "comment_id": 44277589, "body": "Where does the pseudocode flavour you use come from ? Pseudocode is not a language, and writings conventions vary."}, {"owner": {"reputation": 17, "user_id": 4452896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1ed2c5914b0f89fde58fd0acc0fb8a?s=128&d=identicon&r=PG&f=1", "display_name": "utiliopt ", "link": "https://stackoverflow.com/users/4452896/utiliopt"}, "edited": false, "score": 0, "creation_date": 1421231786, "post_id": 27940747, "comment_id": 44277667, "body": "I did not want to use it, but our teacher thinks it would be good for us to learn it by writing, sorry, describing, this &quot;program&quot;. Also, the teacher wants us to draw a diagram based on this code, a so called logical scheme, I think"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1421231843, "post_id": 27940747, "comment_id": 44277706, "body": "Identifying incorrect uses of # and % requires you to write a full C parser. I doubt you want to do that. In my opinion this problem is far too big for a (normally short) pseudo code."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1421233450, "post_id": 27940747, "comment_id": 44278621, "body": "It&#39;s better to begin with pseudo code instead of C or C++ because it saves you from syntax errors, and you can directly use the appropriate refinement level. But it cannot save you from knowing what you want to do : begin by listing correct (or incorrect) use cases up to an acceptable level, think of comments, litteral strings ... In short : 1. specify, 2. describe in pseudo code, 3. code (any language), 4 test"}], "answers": [{"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1421233697, "post_id": 27940944, "comment_id": 44278755, "body": "I really like your citation ! But until OP says what he wants to do, I&#39;m not sure he really needs a full parser. Especially as it is a teacher assignment ..."}], "tags": [], "owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "is_accepted": true, "score": 2, "last_activity_date": 1421231906, "creation_date": 1421231906, "answer_id": 27940944, "question_id": 27940747, "link": "https://stackoverflow.com/questions/27940747/pseudo-code-program-for-handling-errors/27940944#27940944", "title": "Pseudo-code program for handling errors", "body": "<p>Your approach doesn't work because it's <a href=\"http://quoteinvestigator.com/2011/05/13/einstein-simple\" rel=\"nofollow\">too simple</a>. The solution is a multi-step process called \"<a href=\"http://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow\">parsing</a>\" until you end up with an <a href=\"http://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow\">AST</a>:</p>\n\n<ul>\n<li>First, you need to convert the stream of characters in the source file into tokens (<code>b = a ++</code> -> <code>ID ASSIGN ID INCREMENT</code>).</li>\n<li>Then you need a <a href=\"http://en.wikipedia.org/wiki/LL_parser\" rel=\"nofollow\">LL parser</a> to convert those into higher level rules. The rules for a whole source file are usually called AST - <a href=\"http://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow\">Abstract Syntax Tree</a>.</li>\n</ul>\n\n<p>That tree now allows you to write pseudo code:</p>\n\n<pre><code>For all AST nodes with the text representation \"#\"\n    if the previous sibling is a variable\n        ...\n    else if the next sibling is \";\"\n        ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1421234249, "creation_date": 1421234249, "answer_id": 27941647, "question_id": 27940747, "link": "https://stackoverflow.com/questions/27940747/pseudo-code-program-for-handling-errors/27941647#27941647", "title": "Pseudo-code program for handling errors", "body": "<p>Pseudo code is a form of specification. If it is too difficult to write this specification in pseudo code, then write it first in natural language, for example \"All variables shall be perfixed by '#'.\" from which automatically follows that a variable not prefixed by '#' is an error.</p>\n\n<p>Writing a specification can make sure the problem is well-described. Following this, you can start with pseudo code, which then is a form of design, and you can end up with writing the real program, which can be in any language or mechanism. For example, you can decide the solution lends itself for a yacc script, or it is simple enough that you can code it directly in C or C++.</p>\n\n<p>As pseudo code is not well defined, it can lead to requirements being poorly described in this pseudo-implementation. Going from a poor pseudo-implementation to a real implementation then results in a poor implementation (see also: bugs).</p>\n\n<p>Maybe best not to use pseudo code at all.</p>\n"}], "owner": {"reputation": 17, "user_id": 4452896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1ed2c5914b0f89fde58fd0acc0fb8a?s=128&d=identicon&r=PG&f=1", "display_name": "utiliopt ", "link": "https://stackoverflow.com/users/4452896/utiliopt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 0, "accepted_answer_id": 27940944, "answer_count": 2, "score": 0, "last_activity_date": 1421234249, "creation_date": 1421231248, "question_id": 27940747, "link": "https://stackoverflow.com/questions/27940747/pseudo-code-program-for-handling-errors", "title": "Pseudo-code program for handling errors", "body": "<p>I want to write a program in pseudocode which will identify incorrect uses of \"#\" or \"%\" in a C/C++ source file. \nIt sounds simple, but I am not sure on how to write/describe in \"pseudo code\" the position on which that sign appears, whether or not is is before/after a variable name, for instance. </p>\n\n<p>Should I use something like:</p>\n\n<pre><code>  If \"#\" after var_a\n       then \"Error!\"\n    elseif before \";\"\n        .... and so on \n</code></pre>\n\n<p>or should I use something like #_ASCII_code is_after \"symbol\"....</p>\n\n<p>I really cannot figure how to describe these particular situations in pseudo-code. </p>\n\n<p>I have to mention that I read about Pseudo-code on the internet.( i have used the search button)</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "c", "linux", "cryptography", "openssl"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1421231416, "post_id": 27940708, "comment_id": 44277457, "body": "I have a hunch that the URL following &quot;For more information, visit &quot; contains at least some information about this problem."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1421253657, "post_id": 27940708, "comment_id": 44290940, "body": "<i>&quot;Please let me know what is the problem... What&#39;s that mean and how to resolve it?&quot;</i> - the page in the error message - en.bitcoin.it/wiki/OpenSSL_and_EC_Libraries - tells you what&#39;s wrong and how to work around it. What don&#39;t you understand about it?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4452895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lUdSR.jpg?s=128&g=1", "display_name": "Prasad", "link": "https://stackoverflow.com/users/4452895/prasad"}, "edited": false, "score": 0, "creation_date": 1421232037, "post_id": 27940839, "comment_id": 44277811, "body": "I am using Fedora 18. How to compile our own build. Actually I am searching for two days, I have found nothing. Give me some advice to do that. Thanks"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1421254138, "post_id": 27940839, "comment_id": 44291231, "body": "@jww You don&#39;t have ECC with the Fedora version of OpenSSL 1.0.1, it&#39;s disabled (or parts of it are, depending). See, for example <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=319901\" rel=\"nofollow noreferrer\">this bug report</a> and, more specifically, <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1021898\" rel=\"nofollow noreferrer\">this bug report</a>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1421263392, "post_id": 27940839, "comment_id": 44296663, "body": "Thanks @David. I was not aware that Fedora disabled them."}, {"owner": {"reputation": 11, "user_id": 4452895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lUdSR.jpg?s=128&g=1", "display_name": "Prasad", "link": "https://stackoverflow.com/users/4452895/prasad"}, "edited": false, "score": 0, "creation_date": 1421303247, "post_id": 27940839, "comment_id": 44309848, "body": "Thanks for reply. So ECC Support was disabled in fedora, How can we enable that? Or is there any other Unix OS version which by default have ecc support. Please let me know?"}, {"owner": {"reputation": 99643, "user_id": 445517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e2ba76e6290c4e9e19821a068bc8c1?s=128&d=identicon&r=PG", "display_name": "CodesInChaos", "link": "https://stackoverflow.com/users/445517/codesinchaos"}, "edited": false, "score": 0, "creation_date": 1421313850, "post_id": 27940839, "comment_id": 44314022, "body": "RedHat has a bit of an ECC patent paranoia. Older versions of RedHat (and derivatives like Fedora) didn&#39;t include ECC at all. Newer versions include ECC, but only a few curves (the bitcoin curve is not among them). Most other linux distributions contain OpenSSL with full ECC support."}, {"owner": {"reputation": 11, "user_id": 4452895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lUdSR.jpg?s=128&g=1", "display_name": "Prasad", "link": "https://stackoverflow.com/users/4452895/prasad"}, "edited": false, "score": 0, "creation_date": 1421320246, "post_id": 27940839, "comment_id": 44317403, "body": "thankyou, I have downloaded Ubuntu 14 and its working perfectly."}], "tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1421231548, "creation_date": 1421231548, "answer_id": 27940839, "question_id": 27940708, "link": "https://stackoverflow.com/questions/27940708/error-openssl-appears-to-lack-for-elliptic-curve-cryptography-whats-that-mean/27940839#27940839", "title": "Error openSSL appears to lack for elliptic curve cryptography? What&#39;s that mean and how to resolve it?", "body": "<p>Your platform (Fedora? RedHat?) ships with an OpenSSL build that doesn't have support for elliptic curve cryptography. You'll have to compile your own build that does or find a package that does and install it.</p>\n"}], "owner": {"reputation": 11, "user_id": 4452895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lUdSR.jpg?s=128&g=1", "display_name": "Prasad", "link": "https://stackoverflow.com/users/4452895/prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1421231548, "creation_date": 1421231128, "last_edit_date": 1421231242, "question_id": 27940708, "link": "https://stackoverflow.com/questions/27940708/error-openssl-appears-to-lack-for-elliptic-curve-cryptography-whats-that-mean", "title": "Error openSSL appears to lack for elliptic curve cryptography? What&#39;s that mean and how to resolve it?", "body": "<p>Follow the given step [mention on given below link] to compile Bitcoin code, but getting some error? Please let me know what is the problem? how to resolve this?</p>\n\n<pre><code>http://chimera.labs.oreilly.com/books/1234000001802/ch03.html#_btcd\nError\n[root@localhost bitcoin-0.10.0rc1]# bitcoind\nError: OpenSSL appears to lack support for elliptic curve cryptography. For more information, visit https://en.bitcoin.it/wiki/OpenSSL_and_EC_Libraries\nError: Initialization sanity check failed. Bitcoin Core is shutting down.\n[root@localhost bitcoin-0.10.0rc1]#\n</code></pre>\n"}, {"tags": ["c", "bmp", "image-loading", "sdl-image"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1421232804, "post_id": 27940495, "comment_id": 44278231, "body": "First thing is to make sure it <i>is</i> a valid BMP file. It could have the wrong extension."}, {"owner": {"reputation": 235, "user_id": 4240332, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d489f10204394e8d3b5d0fd33f038c68?s=128&d=identicon&r=PG", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4240332/beginner"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1421233248, "post_id": 27940495, "comment_id": 44278504, "body": "@Jongware: How do you check whether it is a valid BMP? I am using this figure for testing: <a href=\"http://file.fyicenter.com/a/sample.bmp\" rel=\"nofollow noreferrer\">file.fyicenter.com/a/sample.bmp</a>"}, {"owner": {"reputation": 235, "user_id": 4240332, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d489f10204394e8d3b5d0fd33f038c68?s=128&d=identicon&r=PG", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4240332/beginner"}, "reply_to_user": {"reputation": 3783, "user_id": 1240985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ea01986b62d10a33c8a96aeb3a9cf2?s=128&d=identicon&r=PG&f=1", "display_name": "Morpfh", "link": "https://stackoverflow.com/users/1240985/morpfh"}, "edited": false, "score": 0, "creation_date": 1421233308, "post_id": 27940495, "comment_id": 44278541, "body": "@Morpfh: I think you are right... how can I fix this?"}, {"owner": {"reputation": 3783, "user_id": 1240985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ea01986b62d10a33c8a96aeb3a9cf2?s=128&d=identicon&r=PG&f=1", "display_name": "Morpfh", "link": "https://stackoverflow.com/users/1240985/morpfh"}, "edited": false, "score": 0, "creation_date": 1421233622, "post_id": 27940495, "comment_id": 44278710, "body": "I must have done something wrong at first. No idea what. Works fine now."}, {"owner": {"reputation": 3783, "user_id": 1240985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ea01986b62d10a33c8a96aeb3a9cf2?s=128&d=identicon&r=PG&f=1", "display_name": "Morpfh", "link": "https://stackoverflow.com/users/1240985/morpfh"}, "edited": false, "score": 0, "creation_date": 1421233728, "post_id": 27940495, "comment_id": 44278773, "body": "@Beginner: I used <code>imagemagick</code>. Simply <code>identify sample.bmp</code>, should yield BMP etc."}, {"owner": {"reputation": 235, "user_id": 4240332, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d489f10204394e8d3b5d0fd33f038c68?s=128&d=identicon&r=PG", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4240332/beginner"}, "edited": false, "score": 0, "creation_date": 1421234048, "post_id": 27940495, "comment_id": 44278948, "body": "@Morph: I got the following: <code>sample.bmp BMP 256x256 256x256+0+0 4-bit PseudoClass 16c 32.9KB 0.000u 0:00.000</code> so I think it is a valid bmp, and that the problem is the 2nd reason you had mentioned previously... do you know how to fix this?"}], "answers": [{"comments": [{"owner": {"reputation": 235, "user_id": 4240332, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d489f10204394e8d3b5d0fd33f038c68?s=128&d=identicon&r=PG", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4240332/beginner"}, "edited": false, "score": 0, "creation_date": 1421238678, "post_id": 27941564, "comment_id": 44281422, "body": "Thanks a lot, both of your examples work as expected! :) The issue remains when I compile &amp; execute my C file though... It must be in the <code>CMakeLists.txt</code> file that I use for compiling my project. I will ask a separate question about that. Thanks for your time! :)"}, {"owner": {"reputation": 3783, "user_id": 1240985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ea01986b62d10a33c8a96aeb3a9cf2?s=128&d=identicon&r=PG&f=1", "display_name": "Morpfh", "link": "https://stackoverflow.com/users/1240985/morpfh"}, "reply_to_user": {"reputation": 235, "user_id": 4240332, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d489f10204394e8d3b5d0fd33f038c68?s=128&d=identicon&r=PG", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4240332/beginner"}, "edited": false, "score": 0, "creation_date": 1421239339, "post_id": 27941564, "comment_id": 44281756, "body": "@Beginner: Great. Glad I could help! :)"}], "tags": [], "owner": {"reputation": 3783, "user_id": 1240985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26ea01986b62d10a33c8a96aeb3a9cf2?s=128&d=identicon&r=PG&f=1", "display_name": "Morpfh", "link": "https://stackoverflow.com/users/1240985/morpfh"}, "is_accepted": true, "score": 2, "last_activity_date": 1421236355, "last_edit_date": 1592644375, "creation_date": 1421233966, "answer_id": 27941564, "question_id": 27940495, "link": "https://stackoverflow.com/questions/27940495/issue-loading-bmp-image-using-sdl-image/27941564#27941564", "title": "Issue loading BMP image using SDL_image", "body": "<p>Perhaps better example. This (might) yield more information and perhaps if BMP is supported:</p>\n<p><a href=\"https://www.libsdl.org/projects/SDL_image/docs/SDL_image_32.html\" rel=\"nofollow noreferrer\">https://www.libsdl.org/projects/SDL_image/docs/SDL_image_32.html</a></p>\n<p>You could also try using <code>IMG_LoadBMP_RW</code> as per example here:</p>\n<p><a href=\"https://www.libsdl.org/projects/SDL_image/docs/SDL_image_16.html#SEC16\" rel=\"nofollow noreferrer\">https://www.libsdl.org/projects/SDL_image/docs/SDL_image_16.html#SEC16</a></p>\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &quot;SDL/SDL.h&quot;\n#include &quot;SDL/SDL_image.h&quot;\n\nint main(int argc, char *argv[])\n{\n    const char *fn = &quot;sample.bmp&quot;;\n    SDL_Surface *surf;\n\n    if (argc &gt; 1)\n        fn = argv[1];\n\n    if ((surf = SDL_LoadBMP(fn)) == NULL) {\n        printf(&quot;SDL_loadBMP failed: %s\\n&quot;, SDL_GetError());\n        SDL_Quit();\n        return 1;\n    }\n\n    printf(&quot;%s is bmp\\n&quot;, fn);\n\n    SDL_FreeSurface(surf);\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n<hr />\n<h3>Old answer:</h3>\n<hr />\n<p>Tested and validated:</p>\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &quot;SDL/SDL.h&quot;\n#include &quot;SDL/SDL_image.h&quot;\n\nint main(int argc, char *argv[])\n{\n    const char *fn = &quot;sample.bmp&quot;;\n    int v;\n    SDL_RWops *rwop;\n\n    if (argc &gt; 1)\n        fn = argv[1];\n\n    if ((rwop = SDL_RWFromFile(fn, &quot;rb&quot;)) == NULL) {\n        printf(&quot;SDL_RWFromFile failed: %s\\n&quot;, SDL_GetError());\n        SDL_Quit();\n        return 1;\n    }\n\n    v = IMG_isBMP(rwop);\n\n    printf(&quot;%s is bmp = %d\\n&quot;, fn, v);\n\n    SDL_FreeRW(rwop);\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n<p>Compiled with:</p>\n<pre><code>gcc -Wall -Wextra -pedantic -o sdl sdl.c `sdl-config --libs` -lSDL_image\n</code></pre>\n<p>Yield for BMP images, e.g.:</p>\n<pre><code>$ ./sdltest lena.bmp \nlena.bmp is bmp = 1\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 4240332, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d489f10204394e8d3b5d0fd33f038c68?s=128&d=identicon&r=PG", "display_name": "Beginner", "link": "https://stackoverflow.com/users/4240332/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 27941564, "answer_count": 1, "score": 1, "last_activity_date": 1421236355, "creation_date": 1421230542, "last_edit_date": 1421232755, "question_id": 27940495, "link": "https://stackoverflow.com/questions/27940495/issue-loading-bmp-image-using-sdl-image", "title": "Issue loading BMP image using SDL_image", "body": "<p>I am new to SDL_image and I am trying to use it in a C file to load a BMP image.\nTo that end, I have written the following code:</p>\n\n<pre><code>#include \"SDL/SDL.h\"\n#include \"SDL_image.h\"\n\nSDL_RWops *rwop;\nrwop = SDL_RWFromFile(\"sample.bmp\", \"rb\");\n</code></pre>\n\n<p>However, for some reason, although <code>rwop</code> after those lines are executed is not <code>NULL</code> anymore, <code>IMG_isBMP(rwop)</code> is 0.</p>\n\n<p>Any idea what could be wrong?</p>\n"}, {"tags": ["c", "gcc", "compilation"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421230705, "post_id": 27940439, "comment_id": 44277064, "body": "Doppelg&#228;nger : <a href=\"http://stackoverflow.com/questions/6893285/why-do-all-these-crazy-function-pointer-definitions-all-work-what-is-really-goi\" title=\"why do all these crazy function pointer definitions all work what is really goi\">stackoverflow.com/questions/6893285/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421230546, "last_edit_date": 1495540256, "creation_date": 1421230546, "answer_id": 27940496, "question_id": 27940439, "link": "https://stackoverflow.com/questions/27940439/derefferencing-a-function-pointer-with-and-without-parentheses/27940496#27940496", "title": "derefferencing a function pointer with and without parentheses", "body": "<p>You need to know that</p>\n\n<pre><code>(*fp)() = fp()\n</code></pre>\n\n<p>The function pointer can be called in both the ways and both are valid and same.</p>\n\n<p>Check the below link:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2795575/how-does-dereferencing-of-a-function-pointer-happen\">How does dereferencing of a function pointer happen?</a></p>\n"}], "owner": {"reputation": 197, "user_id": 3513722, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f2dfa975f29679023d7d587a470898a6?s=128&d=identicon&r=PG&f=1", "display_name": "Usr1", "link": "https://stackoverflow.com/users/3513722/usr1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "closed_date": 1421230925, "answer_count": 1, "score": 0, "last_activity_date": 1421230546, "creation_date": 1421230397, "last_edit_date": 1421230424, "question_id": 27940439, "link": "https://stackoverflow.com/questions/27940439/derefferencing-a-function-pointer-with-and-without-parentheses", "closed_reason": "Duplicate", "title": "derefferencing a function pointer with and without parentheses", "body": "<p>What is the difference in dereferencing a function pointer with and without parentheses.\nboth the mechanism are working same on linux Gnu Gcc.</p>\n\n<pre><code>void (*fp)(void); //function pointer\n\nvoid func(void);\n\nfp = func; \n\n(*fp)();  //dereferencing with parentheses\n\nfp(); // without parentheses\n</code></pre>\n"}, {"tags": ["c++", "c", "crc", "crc32"], "comments": [{"owner": {"reputation": 6886, "user_id": 272708, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5cf904a50bb9106a1f177a0a81a405b?s=128&d=identicon&r=PG", "display_name": "dascandy", "link": "https://stackoverflow.com/users/272708/dascandy"}, "edited": false, "score": 7, "creation_date": 1421228820, "post_id": 27939882, "comment_id": 44275995, "body": "CRC32 can be implemented with no lookup table, or with a 1k-byte lookup table if you must, without a major speed penalty compared to the 256k lookup table variant. Example at <a href=\"http://wiki.osdev.org/CRC32\" rel=\"nofollow noreferrer\">wiki.osdev.org/CRC32</a>. If you really must save bytes, use adler32."}, {"owner": {"reputation": 70426, "user_id": 463115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dabb2e53ae031494cbe17a214cb285ab?s=128&d=identicon&r=PG", "display_name": "jeb", "link": "https://stackoverflow.com/users/463115/jeb"}, "edited": false, "score": 3, "creation_date": 1421228979, "post_id": 27939882, "comment_id": 44276093, "body": "What you mean with <code>ressources are VERY rare</code>? Less than 64MB, less than 8KB or less than 512byte?"}, {"owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "edited": false, "score": 0, "creation_date": 1421229145, "post_id": 27939882, "comment_id": 44276195, "body": "jeb: VERY rare means I currenty do not have enough space left to add the table as shown in <a href=\"http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/crc32.c\" rel=\"nofollow noreferrer\">opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/&hellip;</a>"}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1421229146, "post_id": 27939882, "comment_id": 44276197, "body": "this question seems to off-topic because the op is asking for offsite resources"}, {"owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "edited": false, "score": 1, "creation_date": 1421229286, "post_id": 27939882, "comment_id": 44276277, "body": "Irrational Person: no, I&#39;m asking for source code/algorithms! There is no statement in my question asking for a link or something like that..."}, {"owner": {"reputation": 9721, "user_id": 131057, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4d84023d355c712ca3a393881e862679?s=128&d=identicon&r=PG", "display_name": "Luka Rahne", "link": "https://stackoverflow.com/users/131057/luka-rahne"}, "edited": false, "score": 2, "creation_date": 1421229289, "post_id": 27939882, "comment_id": 44276280, "body": "Maybe just fix that code and put table in flash. Most linkers put constant variables in flash, and this days even low end CPU-s comes with descent amount of OTP. Just define table to be const."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1421229565, "post_id": 27939882, "comment_id": 44276456, "body": "If you don&#39;t have any particular requirements for the quality of the hash/checksum/whatever, something very simple like <a href=\"http://www.boost.org/doc/libs/1_35_0/doc/html/boost/hash_combine_id241013.html\" rel=\"nofollow noreferrer\"><code>boost::hash_combine</code></a>, or even just XOR, might be good enough."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1421230067, "post_id": 27939882, "comment_id": 44276719, "body": "Link for the source code of the fast crc algorithm -&gt; <a href=\"http://ideone.com/05tIaE\" rel=\"nofollow noreferrer\">ideone.com/05tIaE</a>"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1421255276, "post_id": 27939882, "comment_id": 44291945, "body": "Does it need to be a CRC? You could use a Reed Solomon like reversible polynomial with 8 bit coefficients with the pattern 1 x y x 1, where x and y are 8 bit values, each requiring a 256 byte lookup table for encoding and/or re-encoding to check for errors. If the size of the data to be encoded / re-encoded is known before encoding starts, the encode / re-encode loop can be unfolded, using switch / case or goto&#39;s for the initial jump into the loop."}, {"owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "edited": false, "score": 0, "creation_date": 1421316300, "post_id": 27939882, "comment_id": 44315432, "body": "Don&#39;t know where this question is off-topic, meanwhile there is an qualified answer to my question - and it seems to be on-topic too."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 1, "creation_date": 1485104418, "post_id": 27939882, "comment_id": 70775559, "body": "The question is not off topic. The stackoverflow police apparently don&#39;t know the difference between an algorithm and an implementation. It is entirely on topic here to ask for what algorithms exist to do a particular task."}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "reply_to_user": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1485136591, "post_id": 27939882, "comment_id": 70784731, "body": "@MarkAdler bit it&#39;s asking for a &quot;fast algorithm&quot; instead -- which is unanswerable due to unknown requirements/hardware/software and endless possible optimizations."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1485142668, "post_id": 27939882, "comment_id": 70786138, "body": "First off, that&#39;s absurd. Of course you can talk about algorithms that are faster or slower independent of the hardware. There are several volumes by Knuth that talk about nothing but that (and memory requirements). And the requirement is simply to compute a CRC. Second, despite the title, the body of the question was actually asking for slim, not fast. You can also talk about the code size of algorithms independent of the hardware."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1526404132, "post_id": 27939882, "comment_id": 87727818, "body": "The fastest, slimmest way to do this is to call an intrinsic.  ARM and Intel have these ready to go on their more modern CPUs.  If you don&#39;t have this, then resort to hard coding it."}], "answers": [{"tags": [], "owner": {"reputation": 70426, "user_id": 463115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dabb2e53ae031494cbe17a214cb285ab?s=128&d=identicon&r=PG", "display_name": "jeb", "link": "https://stackoverflow.com/users/463115/jeb"}, "is_accepted": false, "score": 1, "last_activity_date": 1421414229, "last_edit_date": 1421414229, "creation_date": 1421229343, "answer_id": 27940090, "question_id": 27939882, "link": "https://stackoverflow.com/questions/27939882/fast-crc-algorithm/27940090#27940090", "title": "Fast CRC algorithm?", "body": "<p>Obviously the biggest lookup table will bring the best performance, but you can use any (smaller) table for 16,8 or 4bit lookups.</p>\n\n<p>So the table sizes are for crc32:  </p>\n\n<pre><code>16bit-lookup: 4*2^16=256k  \n 8bit-lookup: 4*2^8=1k  \n 4bit-lookup: 4*2^4=64byte  \n</code></pre>\n\n<p>The 4bit table is four times slower than the 16bit table.<br>\nWhat you should use depends on your speed requirements.</p>\n\n<p>As Luka Rahne mentions it's a good idea to put a table to the flash memory, but on many platforms it's not enough to use the <code>const</code> keyword.<br>\nMost often you need to place the table into a section placed in flash, by modifying your linker command file.</p>\n"}, {"comments": [{"owner": {"reputation": 694, "user_id": 2685647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef7c1b716efd7b592cb9599582c425b1?s=128&d=identicon&r=PG&f=1", "display_name": "t0rakka", "link": "https://stackoverflow.com/users/2685647/t0rakka"}, "edited": false, "score": 1, "creation_date": 1518532629, "post_id": 27950866, "comment_id": 84539248, "body": "<code>crc = (crc &gt;&gt; 1) ^ (POLY &amp; (0 - (crc &amp; 1)));</code> is ~33% faster when compiled for x86 with GCC/ICC/CLANG (104 MB/s vs. 134 MB/s). On the same system the slice-8 is 2040 MB/s and Intel CRC32C is 8 GB/s so maybe it doesn&#39;t make much difference at the end."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "reply_to_user": {"reputation": 694, "user_id": 2685647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef7c1b716efd7b592cb9599582c425b1?s=128&d=identicon&r=PG&f=1", "display_name": "t0rakka", "link": "https://stackoverflow.com/users/2685647/t0rakka"}, "edited": false, "score": 0, "creation_date": 1518544998, "post_id": 27950866, "comment_id": 84547346, "body": "@SnappleLVR Faster still would be a byte-wise or word-wise table implementation. See <a href=\"https://github.com/madler/crcany\" rel=\"nofollow noreferrer\">crcany</a>, which will generate such routines."}, {"owner": {"reputation": 694, "user_id": 2685647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef7c1b716efd7b592cb9599582c425b1?s=128&d=identicon&r=PG&f=1", "display_name": "t0rakka", "link": "https://stackoverflow.com/users/2685647/t0rakka"}, "edited": false, "score": 0, "creation_date": 1518600130, "post_id": 27950866, "comment_id": 84568492, "body": "Benchmarked with same machine as above results: 1430 MB/s, not bad, but slice-8 is still 30% faster and the CRC32C instructions are 450% faster. I was just pointing out that the simple bitwise version can be optimized to be 33% faster with a small surgical modification to the source. The original code compiled into &quot;test/cmov&quot; with CLANG and GCC using -O3. The faster variant uses straightforward NEG/XOR/AND as can be expected from the source. The (0 - n) is just trick to allow negation on unsigned integers. So to be clear I didn&#39;t claim it was fastest possible routine. xD"}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 29, "last_activity_date": 1510294579, "last_edit_date": 1510294579, "creation_date": 1421263579, "answer_id": 27950866, "question_id": 27939882, "link": "https://stackoverflow.com/questions/27939882/fast-crc-algorithm/27950866#27950866", "title": "Fast CRC algorithm?", "body": "<p>CRC implementations use tables for speed.  They are not required.</p>\n\n<p>Here is a short CRC32 using either the Castagnoli polynomial (same one as used by the Intel crc32 instruction), or the Ethernet polynomial (same one as used in zip, gzip, etc.).</p>\n\n<pre><code>#include &lt;stddef.h&gt;\n#include &lt;stdint.h&gt;\n\n/* CRC-32C (iSCSI) polynomial in reversed bit order. */\n#define POLY 0x82f63b78\n\n/* CRC-32 (Ethernet, ZIP, etc.) polynomial in reversed bit order. */\n/* #define POLY 0xedb88320 */\n\nuint32_t crc32c(uint32_t crc, const unsigned char *buf, size_t len)\n{\n    int k;\n\n    crc = ~crc;\n    while (len--) {\n        crc ^= *buf++;\n        for (k = 0; k &lt; 8; k++)\n            crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;\n    }\n    return ~crc;\n}\n</code></pre>\n\n<p>The initial <code>crc</code> value should be zero.  The routine can be called successively with chunks of the data to update the CRC.  You can unroll the inner loop for speed, though your compiler might do that for you anyway.</p>\n"}], "owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24976, "favorite_count": 10, "accepted_answer_id": 27950866, "answer_count": 2, "score": 13, "last_activity_date": 1526403862, "creation_date": 1421228685, "question_id": 27939882, "link": "https://stackoverflow.com/questions/27939882/fast-crc-algorithm", "title": "Fast CRC algorithm?", "body": "<p>I want to create a 32 bit number out of an ASCII-string. CRC32 algorithm is exactly what I'm looking for but I can't use it because the table it requires is way too huge (it is for an embedded systems where ressources are VERY rare).</p>\n\n<p>So: any suggestions for a fast and slim CRC algorithm? It does not matter when collissions are a bit more probable than with the original CRC32.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "graph", "adjacency-list"], "comments": [{"owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "edited": false, "score": 0, "creation_date": 1421228267, "post_id": 27939660, "comment_id": 44275655, "body": "Note here that 0 is connected to 1  which is not shown is one of the inconcistencies with the code"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1421228324, "post_id": 27939660, "comment_id": 44275691, "body": "If you want to clarify your question, you should edit your question to do it, not add it as a comment."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1421228447, "post_id": 27939660, "comment_id": 44275760, "body": "When you <code>malloc(sizeof(struct grnode *))</code>, you need <code>malloc(sizeof(struct grnode))</code>. And why do you <code>malloc</code> in a function that jst prints the data (and hence shouldn&#39;t modify anything)?"}, {"owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "edited": false, "score": 0, "creation_date": 1421228966, "post_id": 27939660, "comment_id": 44276085, "body": "I removed the * in malloc it still works the same, can you please explain why it had to be removed i am a newbie so a bit unclear on my basics"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1421229386, "post_id": 27939660, "comment_id": 44276355, "body": "You were allocating space for a pointer, usually 4 or 8 bytes. You need space for your data type, which is a struct and may be much larger. (The handle that you allocate to is a pointer, however, so I can see where you got confused. You are usually safe if you stick to the idiom <code>Type *p = malloc(sizeof(*p))</code>.)"}, {"owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "edited": false, "score": 0, "creation_date": 1421229925, "post_id": 27939660, "comment_id": 44276648, "body": "Thanks for the help,i get your point but the code is working perfectly fine and i just can&#39;t seem to figure out the logical problem as to why the adjacency list only prints two integers,regardless of how many connections their might be in the undirected graph"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "edited": false, "score": 0, "creation_date": 1421232110, "post_id": 27940131, "comment_id": 44277853, "body": "Yes sir i get your point my code just replaces the last element in the linked list with my current input for edge, I do have a misconception about linked list, i just wanted to ask up what i could do so as to allocate new memory addition to linked list everytime i add an edge for example the edges 0 1 and 0 2 and 0 3 will be interpreted by my code as 0-&gt;3 so what is it that shall be done so that it becomes 0 -&gt;1-&gt;2 -&gt;3 Thanks \u2013"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1421229475, "last_edit_date": 1495535337, "creation_date": 1421229475, "answer_id": 27940131, "question_id": 27939660, "link": "https://stackoverflow.com/questions/27939660/incorrect-adjacency-list-representation-of-a-graph/27940131#27940131", "title": "Incorrect adjacency list representation of a graph", "body": "<p>The expression <code>malloc( sizeof( struct grnode*))</code> allocates a <em>pointer</em> and returns to you a pointer to the allocated pointer. If you don't use this as a pointer to a pointer, like you don't, then you have <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>I suspect you really want <code>malloc( sizeof( struct grnode))</code>.</p>\n\n<p>By the way, <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">in C you should not cast the result of <code>malloc</code></a>. And in C++ you should not use <code>malloc</code> anyway.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "edited": false, "score": 0, "creation_date": 1421231521, "post_id": 27940579, "comment_id": 44277525, "body": "Yes sir i get your point my code just replaces the last element in the linked list with my current input for edge, I do have a misconception about linked list, i just wanted to ask up what i could do so as to allocate new memory addition to linked list everytime i add an edge for example the edges 0 1  and 0 2 and 0 3 will be interpreted by my code as 0-&gt;3 so what is it that shall be done so that it becomes 0 -&gt;1-&gt;2 -&gt;3 Thanks"}, {"owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "edited": false, "score": 0, "creation_date": 1421257951, "post_id": 27940579, "comment_id": 44293647, "body": "Thank you very much sir your help has made my day i seem to have finally understood the idea behind adjacency list I still have a lot of doubts and will be working on it, Thanks a lot sir"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 0, "last_activity_date": 1421233036, "last_edit_date": 1421233036, "creation_date": 1421230793, "answer_id": 27940579, "question_id": 27939660, "link": "https://stackoverflow.com/questions/27939660/incorrect-adjacency-list-representation-of-a-graph/27940579#27940579", "title": "Incorrect adjacency list representation of a graph", "body": "<p>Besides the allocation issue, your data organisation needs rethinking.</p>\n\n<p>You also seem to have misconceptions about <code>malloc</code>. For example, you allocate memory inside the printing function. That function should just inspect the data and then print it. The allocation is unnecessary. In your code, you overwrite the handle to the allocated data immediately:</p>\n\n<pre><code>temp = (struct grnode*)malloc( sizeof( struct grnode*));\ntemp-&gt;next=&amp;graph-&gt;adj[n];\ntemp=temp-&gt;next;\n</code></pre>\n\n<p>That means that you lose access to the new data (and cannot <code>free</code> it later). That's like buying a house and throwing away the keys. It is enough to say:</p>\n\n<pre><code>temp = &amp;graph-&gt;adj[n];\n</code></pre>\n\n<p>When you work with pointers, keep in mind: A pointer should point to valid data or it should be <code>NULL</code>. When you allocate memory, don't change the handle to that memory and make sure to<code>free</code> it via that handle later.</p>\n\n<p>About your graph: You have four nodes. These nodes are fixed once you initialise them. You cann add edges between them, but you cannot re-use them to do double duty as elements of what should be four independent linked lists. Which is what your code wants to do.</p>\n\n<p>There are several ways to describe adjacency. You could add a matrix to your graph or you could make an edge structure that holds the two connecting nodes and that is organised by graph. Or you could make a linked list of connactions for each node. Choose one.</p>\n\n<p>The main point is that you need two idependent data structures for your nodes and edges.</p>\n\n<p><strong>Edit</strong> Based on your principal idea of using linked lists to represent connections, I've implemented a simple framework for unidirectional graphs below. You can see thet each <code>grnode</code> maintains its own linked list of <code>grconn</code> connections. The code also shows how to clean up used memoy after using it.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct grnode;\nstruct grconn;\n\nstruct grconn {                 /* Connection to node (linked list) */\n    struct grnode *dest;\n    struct grconn *next;\n};\n\nstruct grnode {                 /* Node in graph */\n    int id;\n    struct grconn *conn;\n};\n\nstruct graph {\n    int nnode;\n    struct grnode *node;\n};\n\n\n\n/*\n *      Create new connection to given node\n */\nstruct grconn *grconn_new(struct grnode *nd)\n{\n    struct grconn *c = malloc(sizeof(*c));\n\n    if (c) {\n        c-&gt;dest = nd;\n        c-&gt;next = NULL;\n    }\n\n    return c;\n}\n\n/*\n *      Clean up linked list of connections\n */\nvoid grconn_delete(struct grconn *c)\n{ \n    while (c) {\n        struct grconn *p = c-&gt;next;\n\n        free(c);\n        c = p;\n    }\n}\n\n/*\n *      Print connectivity list of a node\n */\nvoid grnode_print(struct grnode *nd)\n{\n    struct grconn *c;\n\n    printf(\"%d:\", nd-&gt;id);\n\n    c = nd-&gt;conn;\n    while (c) {\n        printf(\" %d\", c-&gt;dest-&gt;id);\n        c = c-&gt;next;\n    }\n\n    printf(\"\\n\");\n}\n\n\n\n/*\n *      Create new graph with given number of nodes\n */\nstruct graph *graph_new(int n)\n{\n    struct graph *g = malloc(sizeof(*g));\n    int i;\n\n    if (g == NULL) return g;\n\n    g-&gt;nnode = n;\n    g-&gt;node = malloc(n * sizeof(*g-&gt;node));\n    if (g-&gt;node == NULL) {\n        free(g);\n        return NULL;\n    }\n\n    for (i = 0; i &lt; n; i++) {\n        g-&gt;node[i].id = i;\n        g-&gt;node[i].conn = NULL;\n    }\n\n    return g;\n}\n\n/*\n *      Delete graph and all dependent data\n */\nvoid graph_delete(struct graph *g)\n{\n    int i;\n\n    for (i = 0; i &lt; g-&gt;nnode; i++) {\n        grconn_delete(g-&gt;node[i].conn);\n    }\n\n    free(g-&gt;node);\n    free(g);\n}\n\n/*\n *      Print connectivity of all nodes in graph\n */\nvoid graph_print(struct graph *g)\n{\n    int i;\n\n    for (i = 0; i &lt; g-&gt;nnode; i++) {\n        grnode_print(&amp;g-&gt;node[i]);\n    }\n}\n\n/*\n *      Create one-way connection from node a to node b\n */\nvoid graph_connect(struct graph *g, int a, int b)\n{\n    struct grnode *nd;\n    struct grconn *c;\n\n    if (a &lt; 0 || a &gt;= g-&gt;nnode) return;\n    if (b &lt; 0 || b &gt;= g-&gt;nnode) return;\n\n    nd = &amp;g-&gt;node[a];\n    c = grconn_new(&amp;g-&gt;node[b]);\n\n    c-&gt;next = nd-&gt;conn;\n    nd-&gt;conn = c;\n}\n\n/*\n *      Create two-way connection between nodes a and b\n */\nvoid graph_connect_both(struct graph *g, int a, int b)\n{\n    graph_connect(g, a, b);\n    graph_connect(g, b, a);\n}\n\n\n\n/*\n *      Example client code\n */\nint main()\n{\n    struct graph *g = graph_new(4);\n\n    graph_connect_both(g, 0, 1);\n    graph_connect_both(g, 1, 2);\n    graph_connect_both(g, 2, 3);\n    graph_connect_both(g, 0, 2);\n    graph_connect_both(g, 1, 3);\n\n    graph_print(g);\n\n    graph_delete(g);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4452643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4a0e189f04bdb2b21dc9054d2c41ad?s=128&d=identicon&r=PG&f=1", "display_name": "Arafat Khan", "link": "https://stackoverflow.com/users/4452643/arafat-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 1, "accepted_answer_id": 27940579, "answer_count": 2, "score": 0, "last_activity_date": 1421233036, "creation_date": 1421227965, "last_edit_date": 1421228745, "question_id": 27939660, "link": "https://stackoverflow.com/questions/27939660/incorrect-adjacency-list-representation-of-a-graph", "title": "Incorrect adjacency list representation of a graph", "body": "<p>I am trying to represent a graph using the adjacency list representation of graphs.\nMy code compiles correctly but shows  incorrect result, I can't seem to find the logical \ninconsistency in my code.\nThis is a sample input and output</p>\n\n<pre><code>Enter the number of Vertices \n 4\n\nEnter the number of Edges\n 6\n</code></pre>\n\n<p>Enter the Edges</p>\n\n<p>0 1</p>\n\n<p>1 2</p>\n\n<p>2 3</p>\n\n<p>3 0</p>\n\n<p>0 2</p>\n\n<p>1 3</p>\n\n<p>Adjacency list of vertex 0\n head -> 0-> 2</p>\n\n<p>Adjacency list of vertex 1\n head -> 1-> 3</p>\n\n<p>Adjacency list of vertex 2\n head -> 2</p>\n\n<p>Adjacency list of vertex 3\n head -> 3</p>\n\n<p>Note here that 0 is also connected to 1 </p>\n\n<p>2 is also connected to 1 and 0</p>\n\n<pre><code>struct grnode {\n\nlong long num;\nstruct grnode *next;\n};\n\nstruct graph {\n\nlong long v;\nlong long e;\nstruct grnode *adj;\n};\n\nstruct graph *adjlistgr(){\n\nlong long i,x,y;\nstruct grnode *temp;\nstruct graph *g = (struct graph*)malloc(sizeof(struct graph));\nif (!g) {\n    printf(\"memory error\");\n    return;\n}\n// here we scanf  the num of vertices and edges\nprintf(\"Enter the number of Vertices \\n\");\nscanf(\"%lld\", &amp;g-&gt;v);\nprintf(\"Enter the number of Edges\\n\");\nscanf(\"%lld\", &amp;g-&gt;e);\ng-&gt;adj = malloc(g-&gt;v*sizeof(struct grnode));\nfor (i = 0; i &lt; g-&gt;v; i++)\n{\n\n    g-&gt;adj[i].num = i;\n    g-&gt;adj[i].next = &amp;g-&gt;adj[i];\n}\nprintf(\"Enter the Edges\\n\");\nfor (i = 0; i &lt; g-&gt;e;i++)\n{   // now we scan the edges\n\n    scanf(\"%lld %lld\", &amp;x,&amp;y);\n\n    temp = (struct grnode*)malloc( sizeof( struct grnode*));\n    temp-&gt;num = y;\n    temp-&gt;next = &amp;g-&gt;adj[x];\n    g-&gt;adj[x].next = temp;\n    temp = (struct grnode*)malloc( sizeof( struct grnode*));\n    temp-&gt;num = y;\n    temp-&gt;next = &amp;g-&gt;adj[y];\n    g-&gt;adj[y].next = temp;\n}return g;\n}\n\n void printgraph(struct graph* graph)\n{                   \n\nint n;                         \nfor (n = 0; n &lt; graph-&gt;v; ++n)               \n{                                      \n    // struct grnode *pCrawl = graph-&gt;adj[n].num;\n    struct grnode *temp;\n    temp = (struct grnode*)malloc( sizeof( struct grnode*));\n    temp-&gt;next=&amp;graph-&gt;adj[n];\n    temp=temp-&gt;next;\n    printf(\"\\n Adjacency list of vertex %d\\n head \", n);\n    long long s=temp-&gt;num;\n    do \n    {\n        printf(\"-&gt; %d\", temp-&gt;num);\n        temp = temp-&gt;next;\n    }while(temp-&gt;num!=s);\n    printf(\"\\n\");\n}}    \n  int main(){      \n  struct graph *mylist=adjlistgr();          \n  printgraph(mylist);    \n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 0, "creation_date": 1421228060, "post_id": 27939546, "comment_id": 44275542, "body": "What shouldn&#39;t work is accessing a+5"}, {"owner": {"reputation": 7714, "user_id": 172695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M8IPi.png?s=128&g=1", "display_name": "Sebastian Dressler", "link": "https://stackoverflow.com/users/172695/sebastian-dressler"}, "edited": false, "score": 0, "creation_date": 1421228096, "post_id": 27939546, "comment_id": 44275563, "body": "I think he/she confuses pointer arithmetics."}, {"owner": {"reputation": 2675, "user_id": 1032781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b7dVp.jpg?s=128&g=1", "display_name": "PixelCloudSt", "link": "https://stackoverflow.com/users/1032781/pixelcloudst"}, "edited": false, "score": 0, "creation_date": 1421228126, "post_id": 27939546, "comment_id": 44275583, "body": "a is simply pointing to the memory location of b.  Why do you think this shouldn&#39;t work?  (a+5) will likely stomp on some memory, but otherwise I don&#39;t see a problem."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1421231342, "post_id": 27939546, "comment_id": 44277404, "body": "Related to <a href=\"http://stackoverflow.com/q/26426910/1708801\">Is accessing a global array outside its bound undefined behavior?</a> and <a href=\"http://stackoverflow.com/q/27850221/1708801\">Why don&#39;t I get SIGSEGV?</a>"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1421237260, "post_id": 27939546, "comment_id": 44280675, "body": "Please read the &quot;How to ask&quot; guidelines, especially the bit about the titles."}, {"owner": {"reputation": 67, "user_id": 4086839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59c37745e0175225a9364142983fd934?s=128&d=identicon&r=PG&f=1", "display_name": "Person1", "link": "https://stackoverflow.com/users/4086839/person1"}, "edited": false, "score": 0, "creation_date": 1421243569, "post_id": 27939546, "comment_id": 44284334, "body": "@ QPaysTaxes OK I&#39;ll do that. Sorry."}], "answers": [{"comments": [{"owner": {"reputation": 20035, "user_id": 2971, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3f6251940b41a2251e7a9f4b745a7f2?s=128&d=identicon&r=PG", "display_name": "Magnus Hoff", "link": "https://stackoverflow.com/users/2971/magnus-hoff"}, "edited": false, "score": 0, "creation_date": 1421228213, "post_id": 27939686, "comment_id": 44275620, "body": "I like this answer :) However, it is probably appropriate to explain the difference between undefined behavior and &quot;shouldn&#39;t work&quot; to this asker :)"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1421228241, "post_id": 27939686, "comment_id": 44275639, "body": "The behaviour is undefined and depends on the CPU architecture, wrt how it handles the stack.  <code>a+5</code> is a valid address and there may be no problems with it at all.  The <code>b</code> memory is on the stack, so <code>a+5</code> is five ints higher up the address space than teh address of <code>b</code>.  If the stack is ascending there will be no problem as this will be unused memory.  If it is descending, maybe a big oops."}, {"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 1, "creation_date": 1421228320, "post_id": 27939686, "comment_id": 44275686, "body": "a+5 is not a a valid address. a+1 is although you can&#39;t dereference it."}, {"owner": {"reputation": 67, "user_id": 4086839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59c37745e0175225a9364142983fd934?s=128&d=identicon&r=PG&f=1", "display_name": "Person1", "link": "https://stackoverflow.com/users/4086839/person1"}, "edited": false, "score": 0, "creation_date": 1421228744, "post_id": 27939686, "comment_id": 44275948, "body": "Thanks. I get it now."}, {"owner": {"reputation": 67, "user_id": 4086839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59c37745e0175225a9364142983fd934?s=128&d=identicon&r=PG&f=1", "display_name": "Person1", "link": "https://stackoverflow.com/users/4086839/person1"}, "edited": false, "score": 0, "creation_date": 1421228773, "post_id": 27939686, "comment_id": 44275966, "body": "Thanks. I get it. Thank everyone else for your answers."}, {"owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "edited": false, "score": 0, "creation_date": 1421229881, "post_id": 27939686, "comment_id": 44276630, "body": "All the answers and comments here doesn&#39;t take in count the case where &#39;a+5&#39; is a not allocated memory."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "edited": false, "score": 0, "creation_date": 1421230075, "post_id": 27939686, "comment_id": 44276726, "body": "@RoeeGavirel it&#39;s not actually relevant according to the standard, since going past <code>a+1</code> is a one-way ride to UB land."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 67, "user_id": 4086839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59c37745e0175225a9364142983fd934?s=128&d=identicon&r=PG&f=1", "display_name": "Person1", "link": "https://stackoverflow.com/users/4086839/person1"}, "edited": false, "score": 0, "creation_date": 1421230361, "post_id": 27939686, "comment_id": 44276879, "body": "@miv: as a newcomer, please <a href=\"http://stackoverflow.com/tour\">read the Introductory Tour</a>: &quot;The person who asked can mark one answer as &quot;accepted&quot;. Accepting doesn&#39;t mean it&#39;s the best answer, it just means that it worked for the person who asked.&quot; See also <a href=\"http://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}, {"owner": {"reputation": 4768, "user_id": 787366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a49b6d8775416297257c4c4d36e39967?s=128&d=identicon&r=PG", "display_name": "Shmoopy", "link": "https://stackoverflow.com/users/787366/shmoopy"}, "edited": false, "score": 0, "creation_date": 1421230795, "post_id": 27939686, "comment_id": 44277105, "body": "Why is a+1 a valid address?"}, {"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 0, "creation_date": 1421230906, "post_id": 27939686, "comment_id": 44277153, "body": "a+1 being a valid address lets you use the single pointer in a function that takes a range, where your range is of size 1. The standard says one past the end is valid. That&#39;s why it is. You cannot read or write from it but you can use it as a pointer."}], "tags": [], "owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "is_accepted": true, "score": 6, "last_activity_date": 1421228550, "last_edit_date": 1421228550, "creation_date": 1421228037, "answer_id": 27939686, "question_id": 27939546, "link": "https://stackoverflow.com/questions/27939546/pointer-behaves-strangely/27939686#27939686", "title": "Pointer behaves strangely", "body": "<p>Your program should indeed not encounter any problem at compile time. It is all valid code with regards to compilation.</p>\n\n<p>However it will encounter undefined behaviour at runtime as <code>a+5</code> is not a valid address.</p>\n\n<p>If you want to know why it should compile, you can write code like this:</p>\n\n<pre><code>int func( int * buf, size_t size )\n{\n    for( size_t i = 0; i &lt; size; ++i )\n    {\n       *(buf + size) = static_cast&lt;int&gt;(i); // or (int)i in C\n    }\n}\n\nint main()\n{\n   int buf[ 6 ];\n   func( buf, 6 );\n}\n</code></pre>\n\n<p>In your code <code>a</code> is a pointer to memory. <code>a + 5</code> means an address 5 \"ints\" on from where <code>a</code> points. As <code>a</code> was pointed at a single integer <code>b</code>, there are no guarantees about such an address. Interestingly enough, it is well defined to refer to <code>a+1</code> even though it points to a place in memory that you should not read from or write to. But the pointer itself has some guarantees, i.e. it will be greater than <code>a</code> and if you subtract 1 from it you will get back to <code>a</code> and if you do a ptrdiff between it and <code>a</code> you will get 1. But that is just a special property of \"one past the end\" which allows programmers to specify memory ranges.</p>\n"}, {"tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 0, "last_activity_date": 1421228447, "last_edit_date": 1421228447, "creation_date": 1421228102, "answer_id": 27939713, "question_id": 27939546, "link": "https://stackoverflow.com/questions/27939546/pointer-behaves-strangely/27939713#27939713", "title": "Pointer behaves strangely", "body": "<p>Yes it shouldn't work when you access memory space which is not in your process region, but perhaps no one has owned that particular region (<code>(a + 5)</code>) which didn't cause run time illegal memory access or it can. Hence its a UB.    </p>\n"}, {"tags": [], "owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "is_accepted": false, "score": 1, "last_activity_date": 1421229748, "creation_date": 1421229748, "answer_id": 27940222, "question_id": 27939546, "link": "https://stackoverflow.com/questions/27939546/pointer-behaves-strangely/27940222#27940222", "title": "Pointer behaves strangely", "body": "<p>The program do have an <strong>undefined behaviour</strong>:</p>\n\n<pre><code>int main()\n{\n    //This cause the loading of the \"main\" function to allocate memory for variable b\n    //It could be in a memory page that was already allocated to the program\n    //or in a new allocated page.\n    int b = 5;\n\n    //Here a just getting the address of variable b.\n    int*a = &amp;b;\n\n    //This is the undefined behavior and can end up in two cases:\n    // 1. If (a+5) value is in a memory space that is allocated to the application.\n    //    Then no runtime error will happen, and the value will be writing there.\n    //    probably dirting some other value, and can cause an undefined behavior later\n    //    in the application execution.\n    // 2. If (a+5) value is in a memory space that wasn't allocated to the application.\n    //    the application will crash\n    *(a+5) = 6;\n    return 0;\n\n}\n</code></pre>\n\n<p>Now, since a page size is probably 4096 and b is somewhere within a page, *b+5 is in most cases still be in the same page. If you want to challenge it more change it from 5 to 5000 or higher and the chance for crashes will increase.</p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421230174, "creation_date": 1421230174, "answer_id": 27940362, "question_id": 27939546, "link": "https://stackoverflow.com/questions/27939546/pointer-behaves-strangely/27940362#27940362", "title": "Pointer behaves strangely", "body": "<p>Just adding to the existing answers.</p>\n\n<p>The access</p>\n\n<pre><code>*(a+5) = a[5]\n</code></pre>\n\n<p>So this is the location not allocated by you.</p>\n\n<p>In the case of array say</p>\n\n<pre><code>int a[6];\n</code></pre>\n\n<p>You have a valid access from <code>a[0]</code> to <code>a[5]</code> where <code>a[5]</code> is the last element of the array and any further access like <code>a[6]</code> will lead to undefined behavior as that location is not allocated by you.</p>\n\n<p>Similarly you just have a integer allocated like</p>\n\n<pre><code>int b=5;\n\nint *a = &amp;b;\n</code></pre>\n\n<p>a is a pointer pointing to <code>&amp;b</code> i.e address of b.</p>\n\n<p>So the valid access for this is just <code>a[0]</code> which is the only location allocated by you on the stack.</p>\n\n<p>Any other access like <code>a[1] a[2]...</code> and so on will lead to undefined behavior.</p>\n\n<p>The access turns out to be <strong>VALID</strong> if you have something like</p>\n\n<pre><code>int b[6];\nint *a = b;\n</code></pre>\n\n<p>Now <code>a[5]</code> will give the value of the last element of the array <code>b</code></p>\n"}], "owner": {"reputation": 67, "user_id": 4086839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59c37745e0175225a9364142983fd934?s=128&d=identicon&r=PG&f=1", "display_name": "Person1", "link": "https://stackoverflow.com/users/4086839/person1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 27939686, "answer_count": 4, "score": 3, "last_activity_date": 1421230174, "creation_date": 1421227684, "last_edit_date": 1421228407, "question_id": 27939546, "link": "https://stackoverflow.com/questions/27939546/pointer-behaves-strangely", "title": "Pointer behaves strangely", "body": "<p>I'm a programming and c++ novice. I'd appreciate some help with this.</p>\n\n<p>the following program (in c++) doesn't encounter any problem either in compilation or run-time:</p>\n\n<pre><code>int main()\n{\n    int b = 5;\n    int*a = &amp;b;\n    *(a+5) = 6;\n    return 0;\n\n}\n</code></pre>\n\n<p>But according to everything I learned it shouldn't work, because a is a pointer to a single variable. What am I missing here?</p>\n"}, {"tags": ["c++", "c", "bluetooth"], "comments": [{"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1421227820, "post_id": 27939509, "comment_id": 44275413, "body": "normally you post code and we fix it, not the other way around"}, {"owner": {"reputation": 1714, "user_id": 3181136, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Vkt56.jpg?s=128&g=1", "display_name": "Nayana_Das", "link": "https://stackoverflow.com/users/3181136/nayana-das"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1421317697, "post_id": 27939509, "comment_id": 44316158, "body": "@IrrationalPerson Sorry, Now please check out, i have updated my question by posting the code too."}], "owner": {"reputation": 1714, "user_id": 3181136, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Vkt56.jpg?s=128&g=1", "display_name": "Nayana_Das", "link": "https://stackoverflow.com/users/3181136/nayana-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1048, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1421229386, "creation_date": 1421227585, "last_edit_date": 1421229386, "question_id": 27939509, "link": "https://stackoverflow.com/questions/27939509/how-to-implement-bluetooth-piconet-using-c-programming-language", "title": "How to implement bluetooth piconet using C programming language?", "body": "<p>I'm trying to implement bluetooth piconet using C programming language. I have read some papers and also gone through some examples. But i didn't get proper output. I designed server and client using following example, please check this <a href=\"http://people.csail.mit.edu/albert/bluez-intro/x559.html\" rel=\"nofollow\">link</a>. Please check out the code i'm working on:</p>\n\n<p>Can anyone please suggest a proper method to implement it. Thank you.</p>\n\n<p>slave.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/l2cap.h&gt;\n#include &lt;unistd.h&gt;\nvoid send_message_function(char[]);\nvoid receive_ack();\nint main()\n\n{\nint i;\n\npthread_t thread1, thread2;\n\n    char dest1[18] = \"00:1B:10:00:2A:EC\";\n    send_message_function(dest1);\n\n\n}\n\nvoid send_message_function(char ptr[18])\n{\n //printf(\"MAC::%s\",ptr);\nstruct sockaddr_l2 addr = { 0 };\nint s, stat, status, i;\n\nchar dest[18], buf[1024];\nint bytes_read;\n\nstrncpy(dest, ptr, 18);\n\n// allocate a socket\ns = socket(AF_BLUETOOTH, SOCK_SEQPACKET, BTPROTO_L2CAP);\n\n// set the connection parameters (who to connect to)\naddr.l2_family = AF_BLUETOOTH;\naddr.l2_psm = htobs(0x1001);\nstr2ba(dest, &amp;addr.l2_bdaddr);\n\nstatus = connect(s, (struct sockaddr *) &amp;addr, sizeof(addr));\nif (status == 0) {\n    stat = write(s, \"hello!\", 6);\n\n    bytes_read = read(s, buf, sizeof(buf));\n    if (bytes_read &gt; 0) {\n        printf(\"received %s\\n\", buf);\n        bzero(buf, 16);\n    }\n\n}\n\nif (status &lt; 0)\n    perror(\"uh oh\");\nclose(s);\n\n}\n</code></pre>\n\n<p>master.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/l2cap.h&gt;\nvoid send_ack(char[]);\nint main(int argc, char **argv) {\n\nstruct sockaddr_l2 loc_addr = { 0 }, rem_addr = { 0 };\nchar buf[1024] = { 0 };\nint s, client, bytes_read,status;\nsocklen_t opt = sizeof(rem_addr);\n// allocate socket\ns = socket(AF_BLUETOOTH, SOCK_SEQPACKET, BTPROTO_L2CAP);\n// bind socket to port 0x1001 of the first available\n// bluetooth adapter\nloc_addr.l2_family = AF_BLUETOOTH;\nloc_addr.l2_bdaddr = *BDADDR_ANY;\nloc_addr.l2_psm = htobs(0x1001);\nbind(s, (struct sockaddr *) &amp;loc_addr, sizeof(loc_addr));\n// put socket into listening mode\nlisten(s, 1);\nwhile(1){\nclient = accept(s, (struct sockaddr *) &amp;rem_addr, &amp;opt);\nmemset(buf, 0, sizeof(buf));\n// accept one connection\n\n// read data from the client\nbytes_read = read(client, buf, sizeof(buf));\nif (bytes_read &gt; 0) {\n    printf(\"received [%s]\\n\", buf);\n    status = write(client, \"acknowledgement!\", 16);\n}\n\n    //ba2str(&amp;rem_addr.l2_bdaddr, buf);\n    //send_ack(buf);\n}\nclose(client);\nclose(s);\n}\n</code></pre>\n"}, {"tags": ["c", "operating-system", "kernel", "grub", "bochs"], "comments": [{"owner": {"reputation": 655, "user_id": 1056303, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b08c0819e5dd2803c2bb65501e64e660?s=128&d=identicon&r=PG&f=1", "display_name": "mhl", "link": "https://stackoverflow.com/users/1056303/mhl"}, "edited": false, "score": 0, "creation_date": 1421228062, "post_id": 27939316, "comment_id": 44275544, "body": "Are you using cross-compiler specific to your os? There can be some problems when using system compiler."}, {"owner": {"reputation": 33, "user_id": 4128523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c507f8494589e1b9479e57574158ed?s=128&d=identicon&r=PG&f=1", "display_name": "max7", "link": "https://stackoverflow.com/users/4128523/max7"}, "reply_to_user": {"reputation": 655, "user_id": 1056303, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b08c0819e5dd2803c2bb65501e64e660?s=128&d=identicon&r=PG&f=1", "display_name": "mhl", "link": "https://stackoverflow.com/users/1056303/mhl"}, "edited": false, "score": 0, "creation_date": 1421250886, "post_id": 27939316, "comment_id": 44289008, "body": "I&#39;m using the default gcc (4.7.2 / Debian 4.7.2-5) on debian which is the same host I&#39;m booting bochs on. I&#39;m not that fluent in compilers unfortunatly, but should I use another compiler?"}, {"owner": {"reputation": 655, "user_id": 1056303, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b08c0819e5dd2803c2bb65501e64e660?s=128&d=identicon&r=PG&f=1", "display_name": "mhl", "link": "https://stackoverflow.com/users/1056303/mhl"}, "edited": false, "score": 0, "creation_date": 1421251925, "post_id": 27939316, "comment_id": 44289751, "body": "Yes. Setting up and cross-compiler for your target is not so hard, and can separate you from host dependencies. Check out this article: <a href=\"http://wiki.osdev.org/GCC_Cross-Compiler\" rel=\"nofollow noreferrer\">wiki.osdev.org/GCC_Cross-Compiler</a>"}, {"owner": {"reputation": 33, "user_id": 4128523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c507f8494589e1b9479e57574158ed?s=128&d=identicon&r=PG&f=1", "display_name": "max7", "link": "https://stackoverflow.com/users/4128523/max7"}, "reply_to_user": {"reputation": 655, "user_id": 1056303, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b08c0819e5dd2803c2bb65501e64e660?s=128&d=identicon&r=PG&f=1", "display_name": "mhl", "link": "https://stackoverflow.com/users/1056303/mhl"}, "edited": false, "score": 0, "creation_date": 1421395033, "post_id": 27939316, "comment_id": 44350533, "body": "Thanks. I&#39;m going to read up on it and try it out."}, {"owner": {"reputation": 655, "user_id": 1056303, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b08c0819e5dd2803c2bb65501e64e660?s=128&d=identicon&r=PG&f=1", "display_name": "mhl", "link": "https://stackoverflow.com/users/1056303/mhl"}, "edited": false, "score": 0, "creation_date": 1421850668, "post_id": 27939316, "comment_id": 44518667, "body": "It appears that linker doesn&#39;t create .rodata section. Can you remove .rodata section and put *(.rodata) after *(.text) in .text section?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1551720269, "post_id": 27939316, "comment_id": 96734548, "body": "<code>section text:</code> is a bug with the colon on the end, it should be <code>section text</code>"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 2688817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c106acdd8c4af82ccbcc60129e1b8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Lukhio", "link": "https://stackoverflow.com/users/2688817/lukhio"}, "is_accepted": false, "score": 0, "last_activity_date": 1436975992, "last_edit_date": 1495542193, "creation_date": 1436975992, "answer_id": 31435436, "question_id": 27939316, "link": "https://stackoverflow.com/questions/27939316/bochs-2-4-6-grub-0-97-error-13-invalid-or-unsupported-executable-format-wh/31435436#31435436", "title": "Bochs (2.4.6)/GRUB (0.97) &quot;Error 13 Invalid or unsupported executable format&quot; when passing char string in C function call", "body": "<p>I had the same problem. As <a href=\"https://stackoverflow.com/users/1056303/mhl\">mhl</a> stated in a comment, the linker does not create the <code>.rodata</code> section.</p>\n\n<p>You must remove the <code>.rodata</code> section and put <code>*(.rodata)</code> into the <code>.text</code> section just after <code>*(.text)</code> to be able to boot your OS.</p>\n\n<p>Good luck !</p>\n"}, {"tags": [], "owner": {"reputation": 4651, "user_id": 491708, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1360f8d7b46251a333e732e1d7e6cf11?s=128&d=identicon&r=PG", "display_name": "ErwinM", "link": "https://stackoverflow.com/users/491708/erwinm"}, "is_accepted": false, "score": 0, "last_activity_date": 1449492026, "last_edit_date": 1495539881, "creation_date": 1449492026, "answer_id": 34133794, "question_id": 27939316, "link": "https://stackoverflow.com/questions/27939316/bochs-2-4-6-grub-0-97-error-13-invalid-or-unsupported-executable-format-wh/34133794#34133794", "title": "Bochs (2.4.6)/GRUB (0.97) &quot;Error 13 Invalid or unsupported executable format&quot; when passing char string in C function call", "body": "<p>The reason that the <code>.rodata</code> section is not created is because you have a colon behind <code>section .text</code> where there should not be one.</p>\n\n<p>This colon creates an additional section called .text: which screws up your memory contents.</p>\n\n<p>Also see <a href=\"https://stackoverflow.com/questions/28709256/error-13-invalid-or-unsupported-executable-while-booting-simple-kernel-in-grub\">Error 13: Invalid or unsupported executable while booting simple kernel in grub with string literal</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8058914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e6cc1e5ede81b470e48ee61bcc690fa?s=128&d=identicon&r=PG&f=1", "display_name": "David Yu", "link": "https://stackoverflow.com/users/8058914/david-yu"}, "is_accepted": false, "score": 0, "last_activity_date": 1495871812, "last_edit_date": 1495871812, "creation_date": 1495622212, "answer_id": 44155926, "question_id": 27939316, "link": "https://stackoverflow.com/questions/27939316/bochs-2-4-6-grub-0-97-error-13-invalid-or-unsupported-executable-format-wh/44155926#44155926", "title": "Bochs (2.4.6)/GRUB (0.97) &quot;Error 13 Invalid or unsupported executable format&quot; when passing char string in C function call", "body": "<p>I think the problem is on your kmain.c file.  In your loader.s file, you pushed 3 parameters to the stack which your kmain function did not expect.  Re-read Chapter 3 again and you will get the idea.</p>\n\n<p>I suggested you rollback your changes to the stage where the kernel started function and start modifying from there.</p>\n"}], "owner": {"reputation": 33, "user_id": 4128523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c507f8494589e1b9479e57574158ed?s=128&d=identicon&r=PG&f=1", "display_name": "max7", "link": "https://stackoverflow.com/users/4128523/max7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1091, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1495871812, "creation_date": 1421226971, "question_id": 27939316, "link": "https://stackoverflow.com/questions/27939316/bochs-2-4-6-grub-0-97-error-13-invalid-or-unsupported-executable-format-wh", "title": "Bochs (2.4.6)/GRUB (0.97) &quot;Error 13 Invalid or unsupported executable format&quot; when passing char string in C function call", "body": "<p>I'm trying to follow the <a href=\"http://littleosbook.github.io/\" rel=\"nofollow\">\"The little book about OS development\"</a> and doing a small OS that I'm booting in bochs.</p>\n\n<p>But I've run into a problem that I can't solve or explain.\nIn short when passing a char string (in C), the kernel boot ok and works when doing;</p>\n\n<pre><code>char str[] = \"a string\";\ncall_some_function(str);\n</code></pre>\n\n<p>But when I try to call the function directly, with the char string defined in the function call, GRUB won't boot my kernel;</p>\n\n<pre><code>call_some_function(\"a string\");\n</code></pre>\n\n<p>Then I get</p>\n\n<pre><code>Booting 'os'\n\nkernel /boot/kernel.elf\n\nError 13: Invalid or unsupported executable format\n</code></pre>\n\n<p>The compilation and linking seems to go fine without any warning or error.</p>\n\n<p>What am I missing? Or what am I doing wrong?</p>\n\n<hr>\n\n<p><strong>kmain.c</strong></p>\n\n<pre><code>#include \"framebuffer.h\"\n\nvoid call_some_function(char* str)\n{\n  fb_write(str, 1); // just print the first char in str\n}\n\nint kmain(void)\n{\n  char str[] = \"a string\";\n  call_some_function(str); // this works and runs correctly\n\n  // if I add this call GRUB won't boot\n  // call_some_function(\"another string\");\n}\n</code></pre>\n\n<p><strong>loader.s</strong></p>\n\n<pre><code>global loader                           ; entry symbol for ELF\nglobal outb\nextern kmain\n\nKERN_STACK_SIZE equ 4096                ; kernel stack size\nMAGIC_NUMBER    equ 0x1BADB002          ; os magic number\nFLAGS           equ 0x0                 ; multiboot flags\nCHECKSUM        equ -MAGIC_NUMBER       ; magic number + checksum should eq 0\n\nsection .bss\nalign 4\nkernel_stack:\n        resb KERN_STACK_SIZE            ; reserve stack space\n\nsection .text:                          ; start code section\nalign 4                                 ; 4 byte aligned code\n        dd MAGIC_NUMBER                 ; write magic number\n        dd FLAGS                        ; write multiboot flags\n        dd CHECKSUM                     ; write checksum\n\nloader:                                 ; loader label (used as entry point in linker script)\n        mov esp, kernel_stack + KERN_STACK_SIZE ; init esp\n\n        push dword 3\n        push dword 2\n        push dword 1\n        call kmain\n.loop:\n        jmp .loop                       ; loop forever\n\noutb:\n; outb - send a byte to an IO port\n; stack: [esp + 8] data byte\n;        [esp + 4] cmd byte\n;        [esp    ] return addr\n        mov al, [esp + 8]       ; move data byte\n        mov dx, [esp + 4]       ; move cmd byte\n        out dx, al\n        ret\n</code></pre>\n\n<p><strong>link.ld</strong></p>\n\n<pre><code>ENTRY(loader)                           /* entry label */\n\nSECTIONS\n{\n        . = 0x00100000;                 /* code should be loader at 1MB */\n\n        .text : ALIGN (0x1000)          /* align at 4KB */\n        {\n                *(.text)                /* all text sections from all files */\n        }\n\n        .rodata : ALIGN (0x1000)        /* align at 4KB */\n        {\n                *(.rodata*)             /* all read-only data sections from all files */\n        }\n\n        .data : ALIGN (0x1000)          /* align at 4KB */\n        {\n                *(.data)                /* all data sections from all files */\n        }\n\n        .bss : ALIGN (0x1000)           /* align at 4KB */\n        {\n                *(COMMON)               /* all COMMON sections from all files */\n                *(.bss)                 /* all bss sections from all files */\n        }\n}\n</code></pre>\n\n<p><strong>bochsrc.txt</strong></p>\n\n<pre><code>megs:                   32\ndisplay_library:        sdl\nromimage:               file=/usr/share/bochs/BIOS-bochs-latest\nvgaromimage:            file=/usr/share/bochs/VGABIOS-lgpl-latest\nata0-master:            type=cdrom, path=os.iso, status=inserted\nboot:                   cdrom\nclock:                  sync=realtime, time0=local\ncpu:                    count=1, ips=1000000\n</code></pre>\n\n<p><strong>Makefile</strong></p>\n\n<pre><code>OBJECTS = loader.o framebuffer.o print.o kmain.o\nCC = gcc\nCFLAGS = -m32 -nostdlib -nostdinc -fno-builtin -fno-stack-protector \\\n         -nostartfiles -nodefaultlibs -Wall -Wextra -Werror -c\nLDFALGS = -T link.ld -melf_i386\nAS = nasm\nASFALGS = -f elf\n\nall: kernel.elf\n\nkernel.elf: $(OBJECTS)\n        ld $(LDFALGS) $(OBJECTS) -o kernel.elf\n\nos.iso: kernel.elf\n        cp kernel.elf iso/boot/kernel.elf\n        genisoimage     -R \\\n                        -b boot/grub/stage2_eltorito \\\n                        -no-emul-boot \\\n                        -boot-load-size 4 \\\n                        -A os \\\n                        -input-charset utf8 \\\n                        -quiet \\\n                        -boot-info-table \\\n                        -o os.iso \\\n                        iso\n\nrun: os.iso\n        bochs -f bochsrc.txt -q\n\n%.o: %.c\n        $(CC) $(CFLAGS) $&lt; -o $@\n\n%.o: %.s\n        $(AS) $(ASFALGS) $&lt; -o $@\n\nclean:\n        rm -rf *.o kernel.elf os.iso\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "split"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1421227782, "post_id": 27939074, "comment_id": 44275393, "body": "When you say &quot;make it a column of words&quot;, do you want to <i>store</i> the data or do you just want to <i>print</i> the text as columns? (I know you have this variable <code>temptext</code>, but you don&#39;t seem use it, and your question isn&#39;t very clear.)"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1421228311, "post_id": 27939074, "comment_id": 44275677, "body": "lili, If you have any requirements such as &quot;I cannot use pointers&quot;,please mention it in your question."}, {"owner": {"reputation": 121, "user_id": 3288244, "user_type": "registered", "profile_image": "https://graph.facebook.com/637116901/picture?type=large", "display_name": "user3288244", "link": "https://stackoverflow.com/users/3288244/user3288244"}, "edited": false, "score": 0, "creation_date": 1421228864, "post_id": 27939074, "comment_id": 44276027, "body": "In simple words, implementing your idea in C without any pointer is impossible unless the number of tokens and their lengths are explicitly specified."}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1421226999, "post_id": 27939175, "comment_id": 44274975, "body": "I showed the same thing and the OP says pointers should not be used :("}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 0, "last_activity_date": 1421227887, "last_edit_date": 1421227887, "creation_date": 1421226464, "answer_id": 27939175, "question_id": 27939074, "link": "https://stackoverflow.com/questions/27939074/split-a-string-between-words-and-insert-newlines/27939175#27939175", "title": "Split a string between words and insert newlines", "body": "<p>Suppose <code>line</code> is the <code>char</code> array that contains <code>hello world bye bye</code> and <code>text</code> is declared as</p>\n\n<pre><code>char text[100][15]; //I used 100 and 15 because your example contains it\n</code></pre>\n\n<p>and you want each word to be copied into each row of <code>text</code>. Then,use <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_strtok.htm\" rel=\"nofollow\"><code>strtok()</code></a> function with <code>\" \"</code>(space) as delimeter and place this in a loop that terminates when <code>strtok()</code> returns <code>NULL</code> to get each word. Copy each word to each row of <code>text</code> using <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_strcpy.htm\" rel=\"nofollow\"><code>strcpy()</code></a> in the loop.</p>\n\n<p>The code for this will look like this:</p>\n\n<pre><code>char text[100][15];\nchar line[]=\"hello world bye bye\";\nint i=0;\n\nchar *token=strtok(line,\" \");\n\nwhile(token!=NULL)\n{\n  strcpy(text[i],token);\n  i++;\n  token=strtok(NULL,\" \");\n}\n</code></pre>\n\n<p>Now, to print it,you can use</p>\n\n<pre><code>for(int j=0;j&lt;i;j++)\n  printf(\"text[%d]=%s\",j,text[j]);\n</code></pre>\n\n<p><hr>\nAnother method would be to manually copy each character until a space is seen.</p>\n\n<pre><code>int len=strlen(line);\nint i=0;\nint k=0;\n\nfor(int j=0;j&lt;len+1;j++)\n{\n  if(line[j]==' ')\n  {\n    text[i][k]='\\0';\n    i++;\n    k=0;\n  }\n  else\n  {\n    text[i][k]=line[j];\n    k++;\n  }\n}\n</code></pre>\n\n<p>Note that the above code does not prevent <a href=\"http://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow\">buffer overflows</a>. You can print each word using</p>\n\n<pre><code>for(int j=0;j&lt;i+1;j++)\n  printf(\"text[%d]=%s\",j,text[j]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1421228249, "post_id": 27939494, "comment_id": 44275644, "body": "@Gopi , OP never mentioned that in his post so most people would not notice it as OP told it only as a comment under my answer(and your deleted answer)."}, {"owner": {"reputation": 121, "user_id": 3288244, "user_type": "registered", "profile_image": "https://graph.facebook.com/637116901/picture?type=large", "display_name": "user3288244", "link": "https://stackoverflow.com/users/3288244/user3288244"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1421228679, "post_id": 27939494, "comment_id": 44275907, "body": "@Gopi , As a matter of fact, OP mentioned in his question: &quot;my idea is to run on all the length of my line and when i reach a space i want it to enter&quot; and the question is titled &quot;converting a string to a 2d array&quot;. Yet there is not way of doing that without playing with pointers because the number of tokens and their lengths are unknown prior to user input. Thus the array must be created dynamically."}], "tags": [], "owner": {"reputation": 121, "user_id": 3288244, "user_type": "registered", "profile_image": "https://graph.facebook.com/637116901/picture?type=large", "display_name": "user3288244", "link": "https://stackoverflow.com/users/3288244/user3288244"}, "is_accepted": false, "score": 0, "last_activity_date": 1421227543, "creation_date": 1421227543, "answer_id": 27939494, "question_id": 27939074, "link": "https://stackoverflow.com/questions/27939074/split-a-string-between-words-and-insert-newlines/27939494#27939494", "title": "Split a string between words and insert newlines", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n        char string[100];\n        fgets(string, 100, stdin);\n        string[strlen(string)-1] = 0;\n\n        // create an array of pointers\n        char **string_array = (char**)malloc(sizeof(char*));\n\n        int i = 0, array_size;\n\n        // tokenize input\n        char *token = strtok(string, \" \");\n        while(token!=NULL) {\n                // dynamically increase the array during run time\n                string_array = (char**)realloc(string_array, (i+1)*sizeof(char**));\n                // create the string as you would do when there is only one string\n                string_array[i] = (char*)malloc(strlen(token)+1);\n                strcpy(string_array[i], token);\n                token = strtok(NULL, \" \");\n                i++;\n        }\n        array_size = i;\n\n        for(i=0; i&lt;array_size; i++) {\n               printf(\"%s\\n\", string_array[i]);\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p>Basically you create an array of pointers and you allot memory for the strings one by one as you would do when there is only one string.\n(if number of token is unknown, use realloc to increase the size of pointer to pointers.)</p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1421228156, "last_edit_date": 1421228156, "creation_date": 1421227820, "answer_id": 27939606, "question_id": 27939074, "link": "https://stackoverflow.com/questions/27939074/split-a-string-between-words-and-insert-newlines/27939606#27939606", "title": "Split a string between words and insert newlines", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void){\n    char line[300] = \"hello world bye bye\\n\";\n    char temptext[100][15]={0};\n    int i=0, j, k=0;\n\n    while(line[k]){\n        if(isspace(line[k])){\n            ++k;//skip space to word\n            continue;\n        }\n        for(j=0; j &lt; 15-1 &amp;&amp; line[k] &amp;&amp; !isspace(line[k]); ++k, ++j)\n            temptext[i][j] = line[k];\n        if(j &amp;&amp; ++i == 100)\n            break;\n    }\n    for(j=0; j&lt;i; ++j)\n        puts(temptext[j]);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1421231070, "post_id": 27939969, "comment_id": 44277244, "body": "I like this simple solution, because that might well be what the OP wants. But why the ugly macro <code>NEWLINE</code> which doesn&#39;t buy you anything? And why the hard-codes number 32 instead of <code>&#39; &#39;</code>? Why don&#39;t you move the increment out of the conditional blocks, so that it occurs only once? And please return a value from <code>main</code>. (Not my downvote, by the way.)"}], "tags": [], "owner": {"reputation": 1, "user_id": 4106807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xNrBJokqJjk/AAAAAAAAAAI/AAAAAAAABiU/2fYJkBgjHms/photo.jpg?sz=128", "display_name": "K K SAI", "link": "https://stackoverflow.com/users/4106807/k-k-sai"}, "is_accepted": false, "score": -1, "last_activity_date": 1421228935, "creation_date": 1421228935, "answer_id": 27939969, "question_id": 27939074, "link": "https://stackoverflow.com/questions/27939074/split-a-string-between-words-and-insert-newlines/27939969#27939969", "title": "Split a string between words and insert newlines", "body": "<pre><code>#include&lt;stdio.h&gt;\n#define NEWLINE printf(\"\\n\")\nint main(void)\n{\n        char string[]=\"hello world bye bye\";\n        int index=0;\n        while(string[index])\n        {\n                if(string[index]==32)\n                {\n                        NEWLINE;\n                        index++;\n                }\n                else\n                {\n                        printf(\"%c\",string[index]);\n                        index++;\n                }\n        }\n        NEWLINE;\n}\n\n// Whenever i encountered with a space, i am printing a new line on the screen. Here 32       is the ASCII value for space\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 27939175, "answer_count": 4, "score": -4, "last_activity_date": 1421228935, "creation_date": 1421226113, "last_edit_date": 1421228737, "question_id": 27939074, "link": "https://stackoverflow.com/questions/27939074/split-a-string-between-words-and-insert-newlines", "title": "Split a string between words and insert newlines", "body": "<p>i have a string that is made out of a few sentences.\nfor example:</p>\n\n<pre><code> hello world bye bye\n</code></pre>\n\n<p>now, i need to make this sentence into a coulmn of words:</p>\n\n<pre><code>hello\nworld\nbye\nbye\n</code></pre>\n\n<p>i have this idea going on, but i dont know how to write it correctly, so i was hopiny ypu guys could help me out.\nthis is what i have so far:</p>\n\n<pre><code>int len=0, k=0, stopatspace=0;\nchar temptext[100][15]={0};\nchar line[300]={0};\n\n   len=strlen(line);\n   printf(\"len is: %d\", len);\n   for(k=0; k&lt;len; k++)\n   {\n       if (k == ' ')\n       {\n           // i dont know what to write here in order to make it a cloumn \n       }\n   }\n</code></pre>\n\n<p>basiclly, my idea is to run on all the length of my line and when i reach a space i want it to enter (to go one line down so that it will look like a coulmn)</p>\n"}, {"tags": ["c++", "c", "extern"], "answers": [{"comments": [{"owner": {"reputation": 39425, "user_id": 6918, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b93ef940e9862644d2c2e3526cedcff7?s=128&d=identicon&r=PG", "display_name": "Bruno De Fraine", "link": "https://stackoverflow.com/users/6918/bruno-de-fraine"}, "edited": false, "score": 2, "creation_date": 1421226879, "post_id": 27939238, "comment_id": 44274929, "body": "While gcc does not mangle C++ variable names in the global namespace, I&#39;ve encountered that Visual C++ <i>does</i>."}, {"owner": {"reputation": 49, "user_id": 3398809, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1460532826/picture?type=large", "display_name": "kbharuka", "link": "https://stackoverflow.com/users/3398809/kbharuka"}, "edited": false, "score": 0, "creation_date": 1421249321, "post_id": 27939238, "comment_id": 44288001, "body": "Thank you @Mike. It was helpful"}, {"owner": {"reputation": 49, "user_id": 3398809, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1460532826/picture?type=large", "display_name": "kbharuka", "link": "https://stackoverflow.com/users/3398809/kbharuka"}, "reply_to_user": {"reputation": 39425, "user_id": 6918, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b93ef940e9862644d2c2e3526cedcff7?s=128&d=identicon&r=PG", "display_name": "Bruno De Fraine", "link": "https://stackoverflow.com/users/6918/bruno-de-fraine"}, "edited": false, "score": 0, "creation_date": 1421249365, "post_id": 27939238, "comment_id": 44288031, "body": "@BrunoDeFraine : I was getting linking error infact in gcc."}], "tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 5, "last_activity_date": 1421226698, "creation_date": 1421226698, "answer_id": 27939238, "question_id": 27938862, "link": "https://stackoverflow.com/questions/27938862/is-extern-c-required-also-for-linking-global-variables-used-in-cpp-file-to-the/27939238#27939238", "title": "Is extern &quot;C&quot; required also for linking global variables used in Cpp file to the one defined in a cfile?", "body": "<blockquote>\n  <p>Is <code>extern \"C\"</code> required also for linking global variables used in Cpp file to the one defined in a c file?</p>\n</blockquote>\n\n<p>Portably, yes.</p>\n\n<p>You might find that leaving out <code>extern \"C\"</code> works for your compiler (for example, GCC, which doesn't mangle C++ variable names in the global namespace), but that's not something you can rely on for all compilers.</p>\n\n<blockquote>\n  <p>Does the C compiler also changes the name of variables??</p>\n</blockquote>\n\n<p>It depends on the compiler (specifically, on the ABI it uses). The language standards don't specify how language-level names map to linker symbols, so different compilers can use different name-mangling schemes.</p>\n"}, {"comments": [{"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 3, "creation_date": 1421228648, "post_id": 27939363, "comment_id": 44275891, "body": "Citation needed. I can&#39;t find anything in the specification of language linkage to say that C and C++ linkage are the same for variables."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1421241392, "post_id": 27939363, "comment_id": 44282962, "body": "Very simple - make project with .c and .cpp file, define <code>int my_int</code> in both of them, assign value in .c and read it in .cpp. The only difference can be underline char <code>_</code> in .c which can be enabled/disabled from compiler options/IDE."}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 1, "creation_date": 1421241622, "post_id": 27939363, "comment_id": 44283100, "body": "That may be true for your compiler. Where in the standard does it specify that this is the case for all conforming compilers?"}], "tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 0, "last_activity_date": 1421227145, "creation_date": 1421227145, "answer_id": 27939363, "question_id": 27938862, "link": "https://stackoverflow.com/questions/27938862/is-extern-c-required-also-for-linking-global-variables-used-in-cpp-file-to-the/27939363#27939363", "title": "Is extern &quot;C&quot; required also for linking global variables used in Cpp file to the one defined in a cfile?", "body": "<p>It is not required for variables. Extern \"C\" is required for functions because in C++ the functions can be defined multiple times for different number and type of parameters. Each function name includes parameters in encoded form. But the variables cannot be redefined and the names are identical (compatible) in C and C++.</p>\n"}], "owner": {"reputation": 49, "user_id": 3398809, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1460532826/picture?type=large", "display_name": "kbharuka", "link": "https://stackoverflow.com/users/3398809/kbharuka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1494851628, "creation_date": 1421225352, "question_id": 27938862, "link": "https://stackoverflow.com/questions/27938862/is-extern-c-required-also-for-linking-global-variables-used-in-cpp-file-to-the", "title": "Is extern &quot;C&quot; required also for linking global variables used in Cpp file to the one defined in a cfile?", "body": "<p>Is extern \"C\" required also for linking global variables used in Cpp file to the one defined in a c file? </p>\n\n<p>It is used for linking function from C++ file which is referenced in C file because of the name mangling of function names in C++ files. Does the C compiler also changes the name of variables??</p>\n"}, {"tags": ["c", "input", "buffer", "stdin", "scanf"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1421223005, "post_id": 27938290, "comment_id": 44273067, "body": "There are a lot more layers involved here. <code>gnome-terminal-server</code> -&gt; ptmx -&gt; kernel -&gt; pts -&gt; your process&#39;s <code>read()</code> call -&gt; libc buffering -&gt; <code>scanf()</code>"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1421223439, "post_id": 27938290, "comment_id": 44273264, "body": "<code>keyboard-electrical-contact -&gt; keyboard-matrix-scanner -&gt; usb-interface -&gt; keyboard-driver -&gt; gnome-terminal-server -&gt; ...</code> - and I&#39;ve probably missed quite a few as well :-)"}], "answers": [{"tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": false, "score": 1, "last_activity_date": 1421222885, "creation_date": 1421222885, "answer_id": 27938330, "question_id": 27938290, "link": "https://stackoverflow.com/questions/27938290/how-does-the-data-flow-from-input-stream-into-the-input-buffer-during-scanf-in/27938330#27938330", "title": "How does the data flow from input stream into the input buffer during scanf() in C?", "body": "<p>the buffer and primitive editing features are provided by the operating system.\nif you can set the terminal into \"raw mode\" you will see different behavior.</p>\n\n<p>eg: characters may be available to read before enter is pressed especially if the buffer can also be disabled.</p>\n"}, {"comments": [{"owner": {"reputation": 1122, "user_id": 2216108, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c39da234d4fed8285ed0666ad0a19de?s=128&d=identicon&r=PG", "display_name": "aste123", "link": "https://stackoverflow.com/users/2216108/aste123"}, "edited": false, "score": 0, "creation_date": 1421222979, "post_id": 27938331, "comment_id": 44273058, "body": "Does it start reading even before I have pressed the enter key on my keyboard? That is while I&#39;m still in the process of entering text into the terminal? In that case, how does it cope with the backspace keys pressed?"}, {"owner": {"reputation": 1122, "user_id": 2216108, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c39da234d4fed8285ed0666ad0a19de?s=128&d=identicon&r=PG", "display_name": "aste123", "link": "https://stackoverflow.com/users/2216108/aste123"}, "edited": false, "score": 0, "creation_date": 1421223479, "post_id": 27938331, "comment_id": 44273282, "body": "Thanks for the expansion on your answer. So, depending on the format specifier, the compiler (or the software) is requesting more lines in case of scanf(&quot;[^P]&quot;..). I&#39;m assuming that my terminal and OS presently deliver the lines once newline character is pressed. Please correct me if I understood you wrong."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 1122, "user_id": 2216108, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c39da234d4fed8285ed0666ad0a19de?s=128&d=identicon&r=PG", "display_name": "aste123", "link": "https://stackoverflow.com/users/2216108/aste123"}, "edited": false, "score": 0, "creation_date": 1421223595, "post_id": 27938331, "comment_id": 44273337, "body": "@aste123, yes, you&#39;re right (in cooked mode) and again, this is not something ISO C specifies, it&#39;s something done <i>outside</i> that scope. In raw or canonical mode, you may get a character as soon as it&#39;s pressed. But that&#39;ll just mean delivery to <code>scanf</code>, it&#39;s still in control of when it gives the final product back to you."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 2, "last_activity_date": 1421223196, "last_edit_date": 1421223196, "creation_date": 1421222889, "answer_id": 27938331, "question_id": 27938290, "link": "https://stackoverflow.com/questions/27938290/how-does-the-data-flow-from-input-stream-into-the-input-buffer-during-scanf-in/27938331#27938331", "title": "How does the data flow from input stream into the input buffer during scanf() in C?", "body": "<p><em>How</em> is it determined? It's determined by the format string itself.</p>\n\n<p>The <code>scanf</code> function will read items until they no longer match the format specifier given. Then it stops, leaving the first \"non-compliant\" character still in the buffer.</p>\n\n<p>If you mean \"how is it handled under the covers?\", that's a different issue.</p>\n\n<p>My first response to that is \"it doesn't matter\". The ISO standard mandates how the language works, and it describes a \"virtual machine\" capable of doing that. Provided you follow the rules of the machine, you don't need to worry about how things happen under the covers.</p>\n\n<p>My second answer is probably more satisfying but is very implementation dependent.</p>\n\n<p>For efficiency, the underlying software will probably not deliver <em>any</em> data to the implementation until it has a full line (though this of course is likely to be configurable, such as setting raw mode for the terminal). That means things like backspace may <em>change</em> the characters already entered rather than being inserted into the stream.</p>\n\n<p>It may (such as with the GNU <code>readline()</code> library allow all sorts of really fancy editing on the line before delivering the characters. There's nothing to stop the underlying software from even opening up a <code>vim</code> session to allow you to enter data, and only deliver it once you exit :-)</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1421223018, "creation_date": 1421223018, "answer_id": 27938355, "question_id": 27938290, "link": "https://stackoverflow.com/questions/27938290/how-does-the-data-flow-from-input-stream-into-the-input-buffer-during-scanf-in/27938355#27938355", "title": "How does the data flow from input stream into the input buffer during scanf() in C?", "body": "<p>I think, it is not related with <code>how much</code>, rather, what the format specifier tells.</p>\n\n<p>As per <code>C99</code>, chapter 7.19.6.2, paragraph 2, (for <code>fscanf()</code>)</p>\n\n<blockquote>\n  <p>The fscanf function reads input from the stream pointed to by stream, under control\n  of the string pointed to by format that specifies the admissible input sequences and how\n  they are to be converted for assignment, using subsequent arguments as pointers to the\n  objects to receive the converted input.</p>\n</blockquote>\n\n<p>And for the format specifiers, you need to refer to paragraph 12.</p>\n"}], "owner": {"reputation": 1122, "user_id": 2216108, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c39da234d4fed8285ed0666ad0a19de?s=128&d=identicon&r=PG", "display_name": "aste123", "link": "https://stackoverflow.com/users/2216108/aste123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 27938331, "answer_count": 3, "score": 0, "last_activity_date": 1421226121, "creation_date": 1421222679, "last_edit_date": 1421226121, "question_id": 27938290, "link": "https://stackoverflow.com/questions/27938290/how-does-the-data-flow-from-input-stream-into-the-input-buffer-during-scanf-in", "title": "How does the data flow from input stream into the input buffer during scanf() in C?", "body": "<p>For example, when I do <code>scanf(\"%s\",arg);</code> : Terminal allows me to input text until a newline is encountered but it only stores up to the first space character inside the arg variable. Rest remains in buffer.</p>\n\n<p><code>scanf(\"%c\", arg);</code> : In this case also it allows me to enter text into the terminal till I give a newline character, but only one is stored in arg while the rest remains in buffer.</p>\n\n<p><code>scanf(\"%[^P]\", arg)</code>; : In this case, I can enter text into the terminal even after giving it a newline character until I hit a line with 'P' in it and press enter key (newline character) and then transfers everything to the input buffer.</p>\n\n<p>How is it determined how much data from the input stream is to be transferred to the input buffer at a time?</p>\n\n<p>Assuming that <code>arg</code> is of the proper type.</p>\n\n<p>My understanding seems to be fundamentally wrong here. If someone can please explain this stuff, I will be very grateful.</p>\n"}, {"tags": ["c", "tree"], "comments": [{"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421222211, "post_id": 27937947, "comment_id": 44272754, "body": "@Sourav Ghosh In the 1st code, only the node pointer is passed and not the address of it, if we want the changes to be reflected outside the deleteTree function we should pass the address that is what I know."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421222642, "post_id": 27937947, "comment_id": 44272923, "body": "Sorry i mis-read your code. Removed the comments."}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421222673, "post_id": 27937947, "comment_id": 44272936, "body": "@Sourav Ghosh But why can&#39;t we set root to NULL in the first case while we can do so in the second case?"}], "answers": [{"comments": [{"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1421222315, "post_id": 27938080, "comment_id": 44272790, "body": "Yes we are passing the address in the second case but what about the first case we are not passing the address there, we are passing the root."}, {"owner": {"reputation": 6720, "user_id": 963564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/10383366a61905c0e3027703a3a47750?s=128&d=identicon&r=PG", "display_name": "WeaselFox", "link": "https://stackoverflow.com/users/963564/weaselfox"}, "reply_to_user": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1421222511, "post_id": 27938080, "comment_id": 44272873, "body": "in the first case you pass <code>root</code> which is a <code>node*</code> type - an address."}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1421223005, "post_id": 27938080, "comment_id": 44273068, "body": "node* basically states root is a struct node type pointer, is it an address? Aren&#39;t we passing just the pointer in the 1st case?"}, {"owner": {"reputation": 6720, "user_id": 963564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/10383366a61905c0e3027703a3a47750?s=128&d=identicon&r=PG", "display_name": "WeaselFox", "link": "https://stackoverflow.com/users/963564/weaselfox"}, "reply_to_user": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1421223072, "post_id": 27938080, "comment_id": 44273095, "body": "a pointer is a variable containing an address - <a href=\"http://www.cplusplus.com/doc/tutorial/pointers/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/pointers</a>"}, {"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1421250609, "post_id": 27938080, "comment_id": 44288824, "body": "yes so by passing pointers we can actually delete the nodes but why can&#39;t we set the root node to null in the main? In the delete function we delete all the nodes including the root node and after that we are setting the root to null so that there is no memory leak but here it is saying that root=null in the main actually doesn&#39;t happen?"}], "tags": [], "owner": {"reputation": 6720, "user_id": 963564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/10383366a61905c0e3027703a3a47750?s=128&d=identicon&r=PG", "display_name": "WeaselFox", "link": "https://stackoverflow.com/users/963564/weaselfox"}, "is_accepted": false, "score": 0, "last_activity_date": 1421221757, "creation_date": 1421221757, "answer_id": 27938080, "question_id": 27937947, "link": "https://stackoverflow.com/questions/27937947/binary-tree-deletion/27938080#27938080", "title": "Binary Tree Deletion", "body": "<p>You are confusing two concepts - memory freeing, and setting the pointer to <code>NULL</code>. By using <code>free</code> the memory is freed and th pointer now points to an unallocated piece of memory. By setting the node* to NULL, you are indicating that the pointer is not valid - you can see that the code checks for that - <code>if (node ==</code>NULL<code>) return;</code>. If you just set the root to NULL you are creating a memory leak, since the memory pointed to remains allocated.</p>\n\n<p>Also - <code>It is said the tree is deleted but for the tree to be deleted shouldn't we pass the address</code> - you are passing the address - <code>deleteTree(&amp;root);</code> - root is a node* containing the address of the root node. </p>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "edited": false, "score": 0, "creation_date": 1421250799, "post_id": 27938763, "comment_id": 44288957, "body": "what i was asking is for the 1st case why can&#39;t we set the root to null in the main, the tree is deleted fine but after deleting it we are setting the root to null so that it doesn&#39;t point to any unallocated place of memory but here it is said that the root doesn&#39;t change too null, why is it so?"}], "tags": [], "owner": {"reputation": 62, "user_id": 4427875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VBLcp.jpg?s=128&g=1", "display_name": "Roger.Kang", "link": "https://stackoverflow.com/users/4427875/roger-kang"}, "is_accepted": false, "score": 0, "last_activity_date": 1421224876, "creation_date": 1421224876, "answer_id": 27938763, "question_id": 27937947, "link": "https://stackoverflow.com/questions/27937947/binary-tree-deletion/27938763#27938763", "title": "Binary Tree Deletion", "body": "<p>In the first code, function <code>void deleteTree(struct node* node)</code> calls itself(recursion) to free the memory of each node.<code>It is said the tree is deleted but for the tree to be deleted shouldn't we pass the address</code>, in fact the para <code>node</code> is a address of one node, it is a pointer(<code>struct node *</code>). When you call <code>free(node)</code>, you free the memory which the <code>node</code> points to, not the node itself.</p>\n\n<p>As for set root to <code>NULL</code>, the second code is same with your first code logically. If the function <code>void deleteTree(struct node** node_ref)</code> is inline, then after compiling, it will be same with your first code.</p>\n"}], "owner": {"reputation": 225, "user_id": 4397231, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c55344642f3e1e1bfbaa21c1dfbcf277?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/4397231/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421224876, "creation_date": 1421221200, "last_edit_date": 1421221408, "question_id": 27937947, "link": "https://stackoverflow.com/questions/27937947/binary-tree-deletion", "title": "Binary Tree Deletion", "body": "<p>Given: The deleteTree() function deletes the tree, but doesn\u2019t change root to NULL which may cause problems if the user of deleteTree() doesn\u2019t change root to NULL and tries to access values using root pointer. We can modify the deleteTree() function to take reference to the root node so that this problem doesn\u2019t occur. </p>\n\n<p>[a link]<a href=\"http://www.geeksforgeeks.org/write-a-c-program-to-delete-a-tree/\" rel=\"nofollow\">http://www.geeksforgeeks.org/write-a-c-program-to-delete-a-tree/</a></p>\n\n<p>Doubt: In the deleteTree function the copy of the node from the main is passed then how are the actual memory of all these nodes freed in the deleteTree(). It is said the tree is deleted but for the tree to be deleted shouldn't we pass the address. Also if we consider that the tree is actually deleted then along with it the root node is also deleted so why doesn't it change to NULL in the main?</p>\n\n<pre><code>void deleteTree(struct node* node) \n{\n  if (node == NULL) return;\n  deleteTree(node-&gt;left);\n  deleteTree(node-&gt;right);\n  printf(\"\\n Deleting node: %d\", node-&gt;data);\n  free(node);\n}\nint main()\n{\n  struct node *root = newNode(1); \n  root-&gt;left            = newNode(2);\n  root-&gt;right          = newNode(3);\n  root-&gt;left-&gt;left     = newNode(4);\n  root-&gt;left-&gt;right   = newNode(5); \n\n  deleteTree(root);  \n  root = NULL;\n\n  printf(\"\\n Tree deleted \");\n\n  getchar();\n  return 0;\n}\n</code></pre>\n\n<p>The modified code:</p>\n\n<pre><code>void _deleteTree(struct node* node)\n{\n  if (node == NULL) return;\n\n  _deleteTree(node-&gt;left);\n  _deleteTree(node-&gt;right);\n  printf(\"\\n Deleting node: %d\", node-&gt;data);\n  free(node);\n}\n\n\nvoid deleteTree(struct node** node_ref)\n{\n  _deleteTree(*node_ref);\n  *node_ref = NULL;\n}\n\nint main()\n{\n  struct node *root = newNode(1);\n  root-&gt;left            = newNode(2);\n  root-&gt;right          = newNode(3);\n  root-&gt;left-&gt;left     = newNode(4);\n  root-&gt;left-&gt;right   = newNode(5);\n\n\n  deleteTree(&amp;root);\n  printf(\"\\n Tree deleted \");\n\n  getchar();\n  return 0;\n}\n</code></pre>\n\n<p>How does the freeing happen in this case what if we set the root=NULL in main and not in the deleteTree function?</p>\n"}, {"tags": ["c", "delimiter", "strtok"], "comments": [{"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1421217921, "post_id": 27937148, "comment_id": 44271128, "body": "You missed to tell us the actual parameters to strtok. Try this one: <code>strtok(str, &quot; \\n&quot;);</code>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1421217934, "post_id": 27937148, "comment_id": 44271132, "body": "<code>fgets</code> will keep the newline at the end. Consider including the newline (and maybe the tab for good measure) in your delimiter string: <code>strtok(str, &quot; \\n\\t&quot;)</code>."}, {"owner": {"reputation": 3063, "user_id": 825844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1d09e87b632fb0c71902ba0b9919d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/825844/ankur"}, "edited": false, "score": 1, "creation_date": 1421217970, "post_id": 27937148, "comment_id": 44271146, "body": "What is <code>s</code> ? <code>s</code> should be delimiter"}, {"owner": {"reputation": 89, "user_id": 2865640, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CBEbx.jpg?s=128&g=1", "display_name": "Deepak Uniyal", "link": "https://stackoverflow.com/users/2865640/deepak-uniyal"}, "reply_to_user": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1421218309, "post_id": 27937148, "comment_id": 44271266, "body": "@harper Thanks. It worked as I used <code>token = strtok(NULL, &quot; \\n&quot;);</code> i.e. space and newline together."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2865640, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CBEbx.jpg?s=128&g=1", "display_name": "Deepak Uniyal", "link": "https://stackoverflow.com/users/2865640/deepak-uniyal"}, "edited": false, "score": 0, "creation_date": 1421225522, "post_id": 27937213, "comment_id": 44274221, "body": "The strtok() function parses a string into a sequence of tokens. On the first call to <a href=\"http://linux.die.net/man/3/strtok\" rel=\"nofollow noreferrer\">strtok()</a> the string to be parsed should be specified in str. In each subsequent call that should parse the same string, <b>str should be NULL</b>. Why it should be NULL in subsequent calls?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 89, "user_id": 2865640, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CBEbx.jpg?s=128&g=1", "display_name": "Deepak Uniyal", "link": "https://stackoverflow.com/users/2865640/deepak-uniyal"}, "edited": false, "score": 0, "creation_date": 1421226336, "post_id": 27937213, "comment_id": 44274621, "body": "@DeepakUniyal it should be NULL only if you want to parse the <i>same</i> string again. For exaple, suppose you want to parse &quot;My name is Sourav&quot; based on delimiter space ` `. So here, you need to pass the string containing the line and the delimiter in first call to strtok, it will return &quot;My&quot;, now if you want to get &quot;name&quot;, you need to parse the same string again, in that case, you have to pass NULL as the first argument to <i>keep on</i> parsing the same string. Hope this is clear now. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1421220292, "last_edit_date": 1592644375, "creation_date": 1421218078, "answer_id": 27937213, "question_id": 27937148, "link": "https://stackoverflow.com/questions/27937148/strtok-reading-the-spaces-at-the-end-of-string-and-not-returning-null/27937213#27937213", "title": "strtok() reading the spaces at the end of string and not returning NULL", "body": "<p>Your problem is with the delimiter(s). <em>One</em> solution for <em>all</em> your questions is :</p>\n<p>Please add space [<code> </code>] and newline [<code>\\n</code>] both to your delimiter string, and optionally <code>\\t</code>.</p>\n<p>As per the <a href=\"http://linux.die.net/man/3/strtok\" rel=\"nofollow noreferrer\">man page</a> of <code>strtok()</code></p>\n<blockquote>\n<p><em>char *strtok(char *str, const char *delim);</em></p>\n<p>The <em>delim</em> argument specifies a set of bytes that delimit the tokens in the parsed string.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>A sequence of two or more contiguous delimiter bytes in the parsed string is considered to be a single delimiter.</p>\n</blockquote>\n<p>So, you can use</p>\n<pre><code>char *s = &quot; \\n\\t&quot;\n</code></pre>\n<p>and then</p>\n<pre><code>token = strtok(str, s);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 2865640, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CBEbx.jpg?s=128&g=1", "display_name": "Deepak Uniyal", "link": "https://stackoverflow.com/users/2865640/deepak-uniyal"}, "edited": false, "score": 0, "creation_date": 1421218540, "post_id": 27937236, "comment_id": 44271332, "body": "Thanks @Shan. I was confused in the delimiter part only so didn&#39;t pasted whole code. But now I used <code>token = strtok(NULL, &quot; \\n&quot;);</code>and it worked."}], "tags": [], "owner": {"reputation": 3063, "user_id": 825844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1d09e87b632fb0c71902ba0b9919d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/825844/ankur"}, "is_accepted": true, "score": 1, "last_activity_date": 1421218173, "creation_date": 1421218173, "answer_id": 27937236, "question_id": 27937148, "link": "https://stackoverflow.com/questions/27937148/strtok-reading-the-spaces-at-the-end-of-string-and-not-returning-null/27937236#27937236", "title": "strtok() reading the spaces at the end of string and not returning NULL", "body": "<p>The function you are using is not correct.Delimiter passed as a 2nd parameter should be correct.</p>\n\n<pre><code>token = strtok(str,\" \\n\\t\");  //should use delimiter\nwhile( token != NULL) \n{\n   int d = atoi(token);\n   printf(\"%d\\n\",d);\n   token = strtok(NULL,\" \\n\\t\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 4377391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nk8IR.jpg?s=128&g=1", "display_name": "rabi shaw", "link": "https://stackoverflow.com/users/4377391/rabi-shaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1421224329, "creation_date": 1421224329, "answer_id": 27938651, "question_id": 27937148, "link": "https://stackoverflow.com/questions/27937148/strtok-reading-the-spaces-at-the-end-of-string-and-not-returning-null/27938651#27938651", "title": "strtok() reading the spaces at the end of string and not returning NULL", "body": "<p>Signature of the strtok is char *strtok(char *str, const char *delim);</p>\n\n<p>delimiter can be space [ ], newline \\n , coma [,] , tab [\\t] anything that separate the two values in your string in a constant significant fashion are considered as delimiter.\nDelimiter characters  at  the  start  or  end  of the string are ignored by strtok.</p>\n\n<p>You can use n no of delimiter. as per your string you can use two delimiter \n1. space [ ]\n2. \\n</p>\n\n<p>change:</p>\n\n<p>1.token = strtok(str, \" \\n\");\n2.token = strtok(NULL,\" \\n\");</p>\n"}], "owner": {"reputation": 89, "user_id": 2865640, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CBEbx.jpg?s=128&g=1", "display_name": "Deepak Uniyal", "link": "https://stackoverflow.com/users/2865640/deepak-uniyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7108, "favorite_count": 0, "accepted_answer_id": 27937236, "answer_count": 3, "score": 0, "last_activity_date": 1421224329, "creation_date": 1421217750, "last_edit_date": 1421221099, "question_id": 27937148, "link": "https://stackoverflow.com/questions/27937148/strtok-reading-the-spaces-at-the-end-of-string-and-not-returning-null", "title": "strtok() reading the spaces at the end of string and not returning NULL", "body": "<p>I am using <code>fgets()</code> to read a line which contains integers values separated by spaces as follows:</p>\n\n<pre><code>while(fgets(str, sizeof(str), stdin) != NULL)\n</code></pre>\n\n<p>After reading string in str, I am using <code>strtok()</code> to convert string in to tokens and then using <code>atoi()</code> function to convert these values in to integers.</p>\n\n<pre><code>token = strtok(str, s);\nwhile( token != NULL)    //If token is NULL then don't convert it to integer\nint d = atoi(token);\n</code></pre>\n\n<p>The output of the first input is as expected.</p>\n\n<p><strong>Input-1:</strong></p>\n\n<pre><code>5 1 0 3 4\\n\n</code></pre>\n\n<p><strong>Output-1:</strong></p>\n\n<pre><code>d=5\nd=1\nd=0\nd=3\nd=4\n</code></pre>\n\n<p>Now the problem occurs when I give a space after string and hit enter.</p>\n\n<p><strong>Input-2:</strong></p>\n\n<pre><code>5 1 0 3 4 \\n\n</code></pre>\n\n<p><strong>Output-2:</strong></p>\n\n<pre><code>d=5\nd=1\nd=0\nd=3\nd=4\nd=0\n</code></pre>\n\n<p>So now my questions are:</p>\n\n<p><strong>1.</strong> Will <code>strtok()</code> not return NULL when there are only spaces at the end?</p>\n\n<p><strong>2.</strong> How to differentiate between the two zeros that are coming in output?</p>\n\n<p><strong>3.</strong> How can I avoid <code>strtok()</code> to read that final space or any number of spaces at the end?</p>\n"}, {"tags": ["c", "visual-studio-2013", "linked-list", "null-pointer"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421219520, "post_id": 27937143, "comment_id": 44271732, "body": "Variables are simply uninitialized. The debugger will store a 0xfdfdfdfd pattern in there to help you find places where you forgot to init them. In release builds, no such thing will happen. BTW: Check out <code>calloc()</code> and stop casting the returnvalue of such functions in C."}, {"owner": {"reputation": 40, "user_id": 932999, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fcd63a8b97cbb3e35f22c2d0af1a8acd?s=128&d=identicon&r=PG&f=1", "display_name": "esso", "link": "https://stackoverflow.com/users/932999/esso"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421219739, "post_id": 27937143, "comment_id": 44271824, "body": "Ulrich, thanks for the reply. I understood the 0xfdfdfdfd pattern. The problem is, how do i debug my code?"}, {"owner": {"reputation": 219328, "user_id": 15498, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wi4EN.png?s=128&g=1", "display_name": "Damien_The_Unbeliever", "link": "https://stackoverflow.com/users/15498/damien-the-unbeliever"}, "edited": false, "score": 0, "creation_date": 1421221404, "post_id": 27937143, "comment_id": 44272461, "body": "This is, primarily, a C question, so I&#39;ve added that tag."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 2, "creation_date": 1421222825, "post_id": 27937143, "comment_id": 44272999, "body": "Maybe I&#39;m not understanding your comments in the code, but free won&#39;t set the pointer to NULL.  If you want that you&#39;ll need to do it yourself after you call free."}, {"owner": {"reputation": 40, "user_id": 932999, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fcd63a8b97cbb3e35f22c2d0af1a8acd?s=128&d=identicon&r=PG&f=1", "display_name": "esso", "link": "https://stackoverflow.com/users/932999/esso"}, "edited": false, "score": 0, "creation_date": 1421227340, "post_id": 27937143, "comment_id": 44275151, "body": "I can&#39;t set it to NULL because when calling free() after setting pNext to NULL will cause exception. This relates to Ulrich Eckhardt response (Visual Studio issue)"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421518696, "post_id": 27937143, "comment_id": 44394192, "body": "Have you considered setting it to null <i>after</i> calling free()? You have to understand that malloc() returns a value that you must give to free(), where and how you store that value is irrelevant. Setting a pointer to the special value null is just a tool because it allows you to distinguish a pointer to something from a pointer that does not point to something."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1421228735, "post_id": 27938106, "comment_id": 44275941, "body": "@Erany in the loop you have commented &quot;issue 2&quot;, the last item in your list will not be printed, because the last item (validly) has <code>pNext == NULL</code>. That is why I said you are parsing the sequence incorrectly."}], "tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": true, "score": 1, "last_activity_date": 1421222322, "last_edit_date": 1421222322, "creation_date": 1421221866, "answer_id": 27938106, "question_id": 27937143, "link": "https://stackoverflow.com/questions/27937143/visual-studio-unallocted-pointer-not-null/27938106#27938106", "title": "visual studio unallocted pointer not NULL", "body": "<p>You seem to have a few issues here. One problem you are having is that you are not allocating enough memory.</p>\n\n<pre><code>listHead = (pItem) malloc(sizeof(listHead));\n</code></pre>\n\n<p><code>listHead</code> is a pointer. So you only allocate enough memory to hold a pointer, and not to hold your entire <code>item</code> struct. It should be:</p>\n\n<pre><code>listHead = (pItem) malloc(sizeof(item));\n</code></pre>\n\n<p>I can't see how issue 1 could ever not be NULL the first time through. Did you step through with a debugger? However, the problem with not allocating enough memory could definitely cause the problem with <code>free()</code>, and it's a little difficult to say for sure what other problems it might cause.</p>\n"}, {"comments": [{"owner": {"reputation": 40, "user_id": 932999, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fcd63a8b97cbb3e35f22c2d0af1a8acd?s=128&d=identicon&r=PG&f=1", "display_name": "esso", "link": "https://stackoverflow.com/users/932999/esso"}, "edited": false, "score": 0, "creation_date": 1421227393, "post_id": 27939208, "comment_id": 44275176, "body": "Did you run it in Visual Studio? Running in debug mode will cause exception in free since you set listCurr-&gt;pNext = NULL. This is my major issue"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 40, "user_id": 932999, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fcd63a8b97cbb3e35f22c2d0af1a8acd?s=128&d=identicon&r=PG&f=1", "display_name": "esso", "link": "https://stackoverflow.com/users/932999/esso"}, "edited": false, "score": 0, "creation_date": 1421227998, "post_id": 27939208, "comment_id": 44275507, "body": "@Erany my code does not deference or <code>free()</code> any pointer when it is <code>NULL</code>, or uninitialised."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 40, "user_id": 932999, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fcd63a8b97cbb3e35f22c2d0af1a8acd?s=128&d=identicon&r=PG&f=1", "display_name": "esso", "link": "https://stackoverflow.com/users/932999/esso"}, "edited": false, "score": 0, "creation_date": 1421228300, "post_id": 27939208, "comment_id": 44275675, "body": "@Erany <code>listCurr-&gt;pNext = NULL</code> indicates the end of the list, this is normal practice."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1421226920, "last_edit_date": 1421226920, "creation_date": 1421226561, "answer_id": 27939208, "question_id": 27937143, "link": "https://stackoverflow.com/questions/27937143/visual-studio-unallocted-pointer-not-null/27939208#27939208", "title": "visual studio unallocted pointer not NULL", "body": "<p>Syntax altered slightly to suit my compiler. The two main issues were (1) not allocating enough memory, as already commented. (2) wrong sequence for parsing the list.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct item {\n    char data;\n    struct item * pNext;\n} item, *pItem;\n\nvoid show (pItem list, int cue) {\n    printf(\"List %d: \", cue);\n    while(list != NULL) {\n        printf(\"%c \", list-&gt;data); \n        list = list-&gt;pNext;\n    }\n    printf(\"\\n\");\n}\n\nint main(int argc, char* argv[]) {\n    pItem listHead, listTemp, listCurr;\n\n    listHead = malloc(sizeof(item));\n    listHead-&gt;data = '0';\n    listHead-&gt;pNext = NULL;\n    show(listHead, 1);\n\n    listCurr = malloc(sizeof(item));\n    listCurr-&gt;data = '1';\n    listCurr-&gt;pNext = NULL;\n    listHead-&gt;pNext = listCurr;\n    show(listHead, 2);\n\n    printf(\"Freeing: \"); \n    while(listHead != NULL) {\n        listTemp = listHead;\n        printf(\"%c \", listHead-&gt;data); \n        listHead = listHead-&gt;pNext;\n        free(listTemp);\n    }\n    printf(\"\\n\");\n\n    show(listHead, 3);\n    return 0;\n}\n</code></pre>\n\n<p>The above code follows your method of adding the next item to the tail of the list, but I would normally add it before the head and set a new <code>listHead</code>.</p>\n\n<pre><code>listCurr = malloc(sizeof(item));\nlistCurr-&gt;data = '1';\nlistCurr-&gt;pNext = listHead;\nlistHead = listCurr;\n</code></pre>\n\n<p>and this will also work for the <em>first</em> item provided you initialised <code>listHead = NULL</code> to indicate an empty list.</p>\n"}, {"tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": false, "score": 0, "last_activity_date": 1421227922, "creation_date": 1421227922, "answer_id": 27939641, "question_id": 27937143, "link": "https://stackoverflow.com/questions/27937143/visual-studio-unallocted-pointer-not-null/27939641#27939641", "title": "visual studio unallocted pointer not NULL", "body": "<p>The answer is that you have to set the pointer to the freed memory to NULL yourself.  The <code>free</code> function will only release the memory at the pointer back to the heap.  The pointer parameter is passed by value and cannot be modified by the <code>free</code> function itself.</p>\n\n<p>Also, you will need to retain a reference to the previous item in your list, so that when you do free the memory and set the pointer to NULL, you do it in the list items and not on the temporary pointer.</p>\n\n<pre><code>listCurr = NULL;\nlistTemp = listHead;\n\nwhile(listTemp-&gt;pNext != NULL)\n{\n    listCurr = listTemp;\n    listTemp = listTemp-&gt;pNext;\n}\n\nif(NULL != listCurr)\n{\n    free(listCurr-&gt;pNext);\n    listCurr-&gt;pNext = NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 40, "user_id": 932999, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fcd63a8b97cbb3e35f22c2d0af1a8acd?s=128&d=identicon&r=PG&f=1", "display_name": "esso", "link": "https://stackoverflow.com/users/932999/esso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 1, "accepted_answer_id": 27938106, "answer_count": 3, "score": 0, "last_activity_date": 1421227922, "creation_date": 1421217725, "last_edit_date": 1421221363, "question_id": 27937143, "link": "https://stackoverflow.com/questions/27937143/visual-studio-unallocted-pointer-not-null", "title": "visual studio unallocted pointer not NULL", "body": "<p>I've encounter an issue in Visual Studio which drives me crazy.\nIt is regarding unallocated pointers.</p>\n\n<p>I wanted to write a simple linked list app.The problem is that freed and unallocated pointers are not NULL which prevents me from iterating the list.</p>\n\n<p>Consider following C code</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;malloc.h&gt; \n\ntypedef struct _item\n{\n    char data;\n    struct _item * pNext;\n}item, *pItem;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    pItem listHead;\n    pItem listTemp;\n    pItem listCurr;\n\n    listHead = (pItem) malloc(sizeof(listHead));\n    listHead-&gt;data = '0';\n    listHead-&gt;pNext = NULL; //will create exception in free\n\n    listTemp = listHead;\n\n    while(listTemp-&gt;pNext != NULL) //issue 1\n    {\n        listTemp = listTemp-&gt;pNext;//0xfdfdfdfd - never NULL? how to check?\n    }\n\n    listCurr = (pItem) malloc(sizeof(listHead));\n    listCurr-&gt;data = '1';\n    listCurr-&gt;pNext = NULL; //will create exception in free\n    listTemp-&gt;pNext = listCurr;\n\n    listTemp = listHead;\n    while(listTemp-&gt;pNext != NULL)  //issue 2\n    {\n        printf(\"%d \", listTemp-&gt;data - 48); //\"0 \"\n        listTemp = listTemp-&gt;pNext;\n    }\n\n    printf(\"%d \", listTemp-&gt;data - 48);\n    free(listTemp); //is set to oxfeeefee not to NULL?  //issue 3\n\n\n    listTemp = listHead;\n    while(listTemp-&gt;pNext != NULL)  //issue 4\n    {\n        listTemp = listTemp-&gt;pNext;\n    }\n\n    free(listTemp);//Not null?\n\n    return 0;\n}\n</code></pre>\n\n<p>in line issue 1 and issue 2, listTemp->pNext is not NULL but 0xfdfdfdfd. This prevents from getting the last element in the list\nin line issue 3, free doesn't set the freed pointer to null but to 0xfeeefeee. This prevents me from getting last element again.</p>\n\n<p>How can i handle these issues?\nThanks for help.</p>\n"}, {"tags": ["c", "pointers", "graph"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1421217118, "post_id": 27936951, "comment_id": 44270855, "body": "When you malloc, you reserve space for <code>v</code> pointers only, but you want to reserve space for <code>v</code> structs. In general, follow the pattern <code>Something *s = malloc(count * sizeof(*s))</code>. In other words, the handle for your dynamic array is a pointer, the array data are not."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1421217437, "post_id": 27936951, "comment_id": 44270957, "body": "Side note: After you fix your compilation errors, change <code>sizeof(struct grnode*)</code> to <code>sizeof(struct grnode)</code>.  This is the next problem you&#39;ll run into, and it will happen during runtime, which will make it harder for you to spot."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3692108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe400e48a79226b266fb87d1eb9f27b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3692108", "link": "https://stackoverflow.com/users/3692108/user3692108"}, "edited": false, "score": 0, "creation_date": 1421216832, "post_id": 27936966, "comment_id": 44270753, "body": "Thanks for answering but it shows request for member &#39;next&#39; in something not a structure or union"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 3, "user_id": 3692108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe400e48a79226b266fb87d1eb9f27b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3692108", "link": "https://stackoverflow.com/users/3692108/user3692108"}, "edited": false, "score": 0, "creation_date": 1421217331, "post_id": 27936966, "comment_id": 44270921, "body": "@user3692108 Please consider the changes shown. Your access needs to change"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1421217412, "post_id": 27936966, "comment_id": 44270945, "body": "<code>g-&gt;adj[i]</code> is struct, so you should access its field with the <code>.</code> operator, as Gopi said. That also means that you cannot assign its value to <code>x-&gt;next</code>; you&#39;ll need a pointer here: <code>g-&gt;adj[i].next = &amp;g-&gt;adj[i]</code>"}, {"owner": {"reputation": 3, "user_id": 3692108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe400e48a79226b266fb87d1eb9f27b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3692108", "link": "https://stackoverflow.com/users/3692108/user3692108"}, "edited": false, "score": 0, "creation_date": 1421217435, "post_id": 27936966, "comment_id": 44270956, "body": "it still shows incompatible types when assigning to type &#39;struct grnode *&#39; from type &#39;struct grnode&#39;"}, {"owner": {"reputation": 3, "user_id": 3692108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe400e48a79226b266fb87d1eb9f27b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3692108", "link": "https://stackoverflow.com/users/3692108/user3692108"}, "edited": false, "score": 0, "creation_date": 1421217596, "post_id": 27936966, "comment_id": 44271013, "body": "Thanks for the help  i used . and removed * and added the address everywhere          now still it shows                                   error: request for member &#39;next&#39; in something not a structure or union    temp.next = &amp;g-&gt;adj[x]; warning: assignment from incompatible pointer type [enabled by default]    g-&gt;adj[y].next = &amp;temp;"}, {"owner": {"reputation": 3, "user_id": 3692108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe400e48a79226b266fb87d1eb9f27b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3692108", "link": "https://stackoverflow.com/users/3692108/user3692108"}, "edited": false, "score": 0, "creation_date": 1421217988, "post_id": 27936966, "comment_id": 44271155, "body": "Thanks  my problem has been solved how do i close this thread i am a newbie"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 0, "last_activity_date": 1421217964, "last_edit_date": 1421217964, "creation_date": 1421216757, "answer_id": 27936966, "question_id": 27936951, "link": "https://stackoverflow.com/questions/27936951/error-with-the-next-pointer-while-representing-graph/27936966#27936966", "title": "Error with the next pointer while representing graph", "body": "<pre><code>g-&gt;adj[i]-&gt;next\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>g-&gt;adj[i].next\n</code></pre>\n\n<p><code>adj[i]</code> is a pointer already so no need to use the <code>-&gt;</code> operator. Fix the same thing everywhere.</p>\n\n<p>and</p>\n\n<pre><code>g-&gt;adj = malloc(g-&gt;v*sizeof(struct grnode*));\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>g-&gt;adj = malloc((g-&gt;v)*sizeof(struct grnode));\n</code></pre>\n\n<p>Allocate memory for your structure which is given by <code>sizeof(struct grnode)</code></p>\n\n<p>For your understanding:</p>\n\n<pre><code>struct b\n{\n   int b;\n};\n\nstruct a\n{\n   int a;\n   struct b *ptr;\n};\n\nint main()\n{\n   struct a *p = malloc(sizeof(struct a));\n   p-&gt;a = 10;\n   p-&gt;ptr = malloc(sizeof(struct b) * 2);\n   /* Now you have a pointer `ptr` which can hold 2 struct b */\n   /* So the access should be like */\n\n   p-&gt;ptr[0].b = 20; /* ptr[0] = *(ptr +0)  */ \n   p-&gt;ptr[1].b = 30; /* ptr[1] = *(ptr + 1) */\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3692108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe400e48a79226b266fb87d1eb9f27b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3692108", "link": "https://stackoverflow.com/users/3692108/user3692108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 27936966, "answer_count": 1, "score": 0, "last_activity_date": 1421217964, "creation_date": 1421216700, "last_edit_date": 1421217669, "question_id": 27936951, "link": "https://stackoverflow.com/questions/27936951/error-with-the-next-pointer-while-representing-graph", "title": "Error with the next pointer while representing graph", "body": "<p>I am trying to make the adjacency list representation of a graph in c.\nI am first trying to make the struct only.\nHowever i am getting the following error everytime i use the next pointer for traversing the adjacency list</p>\n\n<p><strong>invalid type argument of '->' (have 'struct grnode')</strong></p>\n\n<p><strong>incompatible types when assigning to type 'struct grnode *' from type 'struct grnode'</strong></p>\n\n<p>I am able to understand the logic behind my code.</p>\n\n<pre><code>struct grnode \n{\n    long long num;\n    struct grnode *next;\n};\n\nstruct graph \n{\n    long long v;\n    long long e;\n    struct grnode *adj;\n};\n\nstruct graph *adjlistgr()\n{\n    long long i,x,y;\n    struct grnode *temp;\n    struct graph *g = (struct graph*)malloc(sizeof(struct graph));\n    if (!g) {\n        printf(\"memory error\");\n        return;\n    }\n    // here we scanf  the num of vertices and edges\n    scanf(\"%lld %lld\", &amp;g-&gt;v, &amp;g-&gt;e);\n    g-&gt;adj = malloc(g-&gt;v*sizeof(struct grnode*));\n    for (i = 0; i &lt; g-&gt;v; i++)\n    {           \n        g-&gt;adj[i].num = i;\n        g-&gt;adj[i]-&gt;next = g-&gt;adj[i];\n    }\n    for (i = 0; i &lt; g-&gt;e;i++)\n    {   // now we scan the edges\n        scanf(\"%lld %lld\", &amp;x, &amp;y);\n        temp = (struct grnode*)malloc( sizeof( struct grnode*));\n        temp-&gt;num = y;\n        temp-&gt;next = g-&gt;adj[x];\n        g-&gt;adj[x]-&gt;next = temp;\n        temp = (struct grnode*)malloc( sizeof( struct grnode*));\n        temp-&gt;num = y;\n        temp-&gt;next = g-&gt;adj[y];\n        g-&gt;adj[y]-&gt;next = temp;\n    }\n    return g;\n} \n</code></pre>\n"}, {"tags": ["c", "web-services", "http", "unix", "cgi"], "comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1421301965, "post_id": 27936601, "comment_id": 44309517, "body": "You have to switch to a non-CGI interface.  CGI interface is designed to spawn a process for each request."}, {"owner": {"reputation": 1047, "user_id": 2524973, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/beaf52d3d28d6e26653336c359a3f5e1?s=128&d=identicon&r=PG", "display_name": "user2524973", "link": "https://stackoverflow.com/users/2524973/user2524973"}, "edited": false, "score": 0, "creation_date": 1433879699, "post_id": 27936601, "comment_id": 49539079, "body": "<a href=\"https://www.gnu.org/software/libmicrohttpd/\" rel=\"nofollow noreferrer\">gnu.org/software/libmicrohttpd</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4452005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61affda959e062c32e3970b4c4d4c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Marlo Stanfield", "link": "https://stackoverflow.com/users/4452005/marlo-stanfield"}, "edited": false, "score": 0, "creation_date": 1421216108, "post_id": 27936692, "comment_id": 44270502, "body": "I saw the FastCGI site but the project seemed unmaintained"}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "reply_to_user": {"reputation": 25, "user_id": 4452005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61affda959e062c32e3970b4c4d4c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Marlo Stanfield", "link": "https://stackoverflow.com/users/4452005/marlo-stanfield"}, "edited": false, "score": 0, "creation_date": 1421217125, "post_id": 27936692, "comment_id": 44270858, "body": "what about &quot;fcgi&quot; then?"}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1421221813, "post_id": 27936692, "comment_id": 44272615, "body": "FastCGI isn&#39;t dead.  It&#39;s just complete.  It&#39;s a protocol\u2014you <i>want</i> those to stop changing at some point so you can actually implement it, and there are a lot of implementations already.  <a href=\"https://en.wikipedia.org/wiki/FastCGI\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/FastCGI</a> lists some of them."}], "tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": true, "score": 1, "last_activity_date": 1421215270, "creation_date": 1421215270, "answer_id": 27936692, "question_id": 27936601, "link": "https://stackoverflow.com/questions/27936601/ways-to-design-web-app-backend-in-c/27936692#27936692", "title": "Ways to design &quot;web app&quot; backend in C?", "body": "<p>FastCGI seems like the obvious candidate</p>\n"}], "owner": {"reputation": 25, "user_id": 4452005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61affda959e062c32e3970b4c4d4c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Marlo Stanfield", "link": "https://stackoverflow.com/users/4452005/marlo-stanfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 27936692, "answer_count": 1, "score": 0, "last_activity_date": 1421215270, "creation_date": 1421214590, "question_id": 27936601, "link": "https://stackoverflow.com/questions/27936601/ways-to-design-web-app-backend-in-c", "title": "Ways to design &quot;web app&quot; backend in C?", "body": "<p>I decided to turn a program I wrote into a \"web app\". It's all C. I know it can be easily set up as a CGI binary on Apache, but doing so requires spawning a new process for every single little request, which seems resource intensive and possibly slower than even PHP. Is there a scalable alternative? ASIO or something? If so, what libraries are available? Or should I just turn the program into a PHP extension?</p>\n\n<p>My question is basically, can you list all the software/libraries that allow a binary to eventually interact with Javascript on a client?</p>\n"}, {"tags": ["c", "struct", "linked-list", "free"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1421213357, "post_id": 27936361, "comment_id": 44269665, "body": "<code>realloc()</code> / <code>free()</code> in <code>c++</code>? not a good approach."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1421213365, "post_id": 27936361, "comment_id": 44269668, "body": "Where are you freeing your memory allocated?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1421213376, "post_id": 27936361, "comment_id": 44269670, "body": "It seems like you couldn&#39;t be bothered to format/preview your post before posting it. So I can&#39;t be bothered to answer it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1421213395, "post_id": 27936361, "comment_id": 44269673, "body": "C or C++? Pick one. It can only be one."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1421213448, "post_id": 27936361, "comment_id": 44269694, "body": "Look for <a href=\"http://en.wikipedia.org/wiki/Memory_debugger\" rel=\"nofollow noreferrer\">tools to debug memory leaks</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1421213450, "post_id": 27936361, "comment_id": 44269695, "body": "@LightnessRacesinOrbit as per the <i>title</i>, it should be <code>c</code>. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4449265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb5d9e1fe09ed6d22ff575a54a2b970?s=128&d=identicon&r=PG&f=1", "display_name": "gargi", "link": "https://stackoverflow.com/users/4449265/gargi"}, "edited": false, "score": 0, "creation_date": 1421215507, "post_id": 27936455, "comment_id": 44270300, "body": "The problem still remains as the variable defined locally in the function should be freed by itself as soon as the function execution completes so if one function call is executed successfully it can be iterated any number of time."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 4449265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb5d9e1fe09ed6d22ff575a54a2b970?s=128&d=identicon&r=PG&f=1", "display_name": "gargi", "link": "https://stackoverflow.com/users/4449265/gargi"}, "edited": false, "score": 0, "creation_date": 1421215593, "post_id": 27936455, "comment_id": 44270328, "body": "@gargi Get rid of undefined behaviour and you&#39;ll have your goal."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1421217861, "last_edit_date": 1421217861, "creation_date": 1421213710, "answer_id": 27936455, "question_id": 27936361, "link": "https://stackoverflow.com/questions/27936361/memory-leak-in-c-program/27936455#27936455", "title": "Memory leak in C Program", "body": "<p>As per the formatting of your question, its too hard to understand the problem, but at first look, it seems, you're passing non-malloced pointers to <code>free()</code> . The result is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>Please remove</p>\n\n<pre><code>free(&amp;b-&gt;value_w);\nfree(&amp;m-&gt;from_x);\n</code></pre>\n\n<p>and the remaining compile-time allocated variable addresses.</p>\n\n<p>As per the rules, <code>free()</code>-ing is only allowed [rather, required] for dynamically allocated memory. OTOH, Compile-time memory need not to be freed explicitly from your program.</p>\n\n<p><em>Related Reading:</em> According to Chapter 7.20.3.2, <code>C99</code> standard, paragraph 2</p>\n\n<blockquote>\n  <p>The free function causes the space pointed to by ptr to be deallocated, that is, made available for further allocation. If ptr is a null pointer, no action occurs. Otherwise, if the argument does not match a pointer earlier returned by the calloc, malloc, or realloc function, or if the space has been deallocated by a call to free or realloc, the behavior is undefined.</p>\n</blockquote>\n\n<p>Also, you should refer to the <a href=\"http://linux.die.net/man/3/free\" rel=\"nofollow\">manual page</a> for <code>free()</code>.</p>\n\n<p>Other than this, for the <em>leak</em> in your case, you're freeing the <code>b-&gt;parent</code> but did not free the nested allocated memory for <code>b-&gt;parent</code>. Again, you did not free <code>children_w</code> and <code>children_b</code> at all. They all need to be taken care properly.</p>\n"}, {"tags": [], "owner": {"reputation": 513, "user_id": 2003556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q2nFq.jpg?s=128&g=1", "display_name": "akhileshmoghe", "link": "https://stackoverflow.com/users/2003556/akhileshmoghe"}, "is_accepted": false, "score": 0, "last_activity_date": 1421216719, "creation_date": 1421216719, "answer_id": 27936955, "question_id": 27936361, "link": "https://stackoverflow.com/questions/27936361/memory-leak-in-c-program/27936955#27936955", "title": "Memory leak in C Program", "body": "<p>In your <code>void del(Board* b)()</code> function, you freeing <code>free(b-&gt;parent);</code> which is a linked list but you have two more linked lists <code>struct Board* children_w;</code> and <code>struct Board* children_b;</code> which also needs to be freed properly.\nIn Linked lists, you have to reach to and delete each node explicitly using <code>free()</code>.\ntake a look at this aspect in your code. It is not clear from code above about these linked lists.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4443197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6de4b2474465713109c88955055f85a1?s=128&d=identicon&r=PG&f=1", "display_name": "Akila MG", "link": "https://stackoverflow.com/users/4443197/akila-mg"}, "is_accepted": false, "score": 0, "last_activity_date": 1421218199, "creation_date": 1421218199, "answer_id": 27937244, "question_id": 27936361, "link": "https://stackoverflow.com/questions/27936361/memory-leak-in-c-program/27937244#27937244", "title": "Memory leak in C Program", "body": "<p>Sourav is correct you don't free the parameters of Board unless u explicitly allocated memory for them, otherwise it result in undesirable effects (you may be freeing random memory and leaving dangling pointers in memory). I suggest u run Valgrind: <code>valgrind --leak-check=yes myprog arg1 arg2</code> and read <a href=\"http://valgrind.org/docs/manual/quick-start.html\" rel=\"nofollow\">http://valgrind.org/docs/manual/quick-start.html</a> for more infomation</p>\n"}], "owner": {"reputation": 1, "user_id": 4449265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb5d9e1fe09ed6d22ff575a54a2b970?s=128&d=identicon&r=PG&f=1", "display_name": "gargi", "link": "https://stackoverflow.com/users/4449265/gargi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1421239794, "creation_date": 1421213203, "last_edit_date": 1421239794, "question_id": 27936361, "link": "https://stackoverflow.com/questions/27936361/memory-leak-in-c-program", "title": "Memory leak in C Program", "body": "<p>I have made a C program in which I have used structures defined as:</p>\n\n<pre><code>typedef struct Move{\n\nint from_x; \nint from_y;\nint to_x; \nint to_y;\nint piece; \n}Move;\n\ntypedef struct ListofMove{\n\nMove* array;\nint len;\n}ListofMove;\n\ntypedef struct Board{\n\nint B[8][8];\ndouble value;       \ndouble value_w;\ndouble value_b;\nint material_w;    \nint material_b;    \nint mobility_w;\nint mobility_b;\nint dev_w;         \nint dev_b;\nint center_w;\nint center_b;\nint devArr[4][8]; \nint side;      \nListofMove moves_w;\nListofMove moves_b;\nstruct Board* children_w;\nstruct Board* children_b;\nint len_w;\nint len_b;  \nstruct Board *parent;\ndouble alpha;\ndouble beta;    \n}Board;\n</code></pre>\n\n<p>The data in <code>ListofMove</code> and <code>Board* children_w</code> and <code>children_b</code> are added using <code>realloc()</code> function.The <code>main()</code> contains only a single function call for some iterations (here let us say 30)</p>\n\n<pre><code>int main(){\n\ndouble BW[4] = {5.689821, 39.038832, 26.088224, 60.491498};\ndouble WW[4] = {82.091284, 83.026237, 46.478279, 49.979957};\nint outres, in;\n\nfor(in = 0 ; in&lt;20; in++){\n   depth = 0; Nply = 0; count = 0;\n   outres = gameplay(BW, WW);           \n }\n\n return 0;      \n}\n</code></pre>\n\n<p>All the variables are declared locally in the function <code>gameplay()</code> and are used further by other function call made in gameplay(either by call by value or call by address). Once used all the variables are explicitly deleted using the function <code>del(Board* b)</code> and <code>delm(Move* m)</code>.</p>\n\n<pre><code>int gameplay(double blwght[], double whwght[]){\n\nint i, ind;\nBoard pre;\nBoard result;   \nBoard current;  \nMove cur_B, cur_W;\n\n.............\n..............\n.......\n\ndel(&amp;pre);\ndel(&amp;result);\ndel(&amp;current);\ndelm(&amp;cur_B);\ndelm(&amp;cur_W);   \n}\n</code></pre>\n\n<p>The definition for deleting functions</p>\n\n<pre><code> void del(Board* b){\n\n    b-&gt;beta = 0; \n    b-&gt;alpha = 0;\n    b-&gt;material_w = 0;\n    b-&gt;material_b = 0;\n    b-&gt;mobility_w = 0;\n    b-&gt;mobility_b = 0;\n    b-&gt;center_w = 0;\n    b-&gt;center_b = 0;\n    b-&gt;dev_w = 0;\n    b-&gt;dev_b = 0;\n    b-&gt;value_w = 0;\n    b-&gt;value_b = 0;\n    b-&gt;value = 0;\n    b-&gt;side = 0;\n\n    free(&amp;b-&gt;value_w);\n    free(&amp;b-&gt;value_b);\n    free(&amp;b-&gt;center_w);\n    free(&amp;b-&gt;center_b);\n    free(&amp;b-&gt;dev_w);\n    free(&amp;b-&gt;dev_b);\n    free(&amp;b-&gt;mobility_w);\n    free(&amp;b-&gt;mobility_b);       \n    free(&amp;b-&gt;material_w);\n    free(&amp;b-&gt;material_b); \n    free(&amp;b-&gt;side);\n    free(&amp;b-&gt;len_w);\n    free(&amp;b-&gt;len_b);\n    free(&amp;b-&gt;alpha);\n    free(&amp;b-&gt;beta);\n    free(b-&gt;B);\n    free(b-&gt;devArr);\n    free(b-&gt;parent);\n    ClearWBoardList(b);\n    ClearBBoardList(b);\n    ClearMoveList(&amp;b-&gt;moves_w);\n    ClearMoveList(&amp;b-&gt;moves_b);\n    free(&amp;b-&gt;moves_w.array);\n    free(&amp;b-&gt;moves_b.array);\n    free(&amp;b-&gt;moves_w);\n    free(&amp;b-&gt;moves_b);\n } \n\n void delm(Move*  m){\n\n    m-&gt;from_x = 0;\n    m-&gt;from_y = 0;\n    m-&gt;to_x = 0; \n    m-&gt;to_y = 0; \n    m-&gt;piece = 0;\n\n    free(&amp;m-&gt;from_x);\n    free(&amp;m-&gt;from_y);\n    free(&amp;m-&gt;to_x);\n    free(&amp;m-&gt;to_y);\n    free(&amp;m-&gt;piece);\n  }\n</code></pre>\n\n<p>The problem is even after the variables are deleted and the function call is executed completely for few iterations the program crashes (after about 14 iteration in my case where system has a 3GB RAM). the problem detected was that before crashing it used about 2GB memory as memory used in one function call is not freed after its execution completes. Can anyone Pls suggest by the memory is retained by variables even after function call returned the value and even when they are explicitly deleted and any solution to solve this problem.</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 1272, "user_id": 373864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c34ede316e83d40011a76e986324e7a?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/373864/fernando"}, "edited": false, "score": 0, "creation_date": 1421212458, "post_id": 27936096, "comment_id": 44269443, "body": "Your use of the term &quot;overwriting returns&quot; is very confusing. You are not &quot;overwriting&quot; anything, you have a function which returns <code>true</code> if any of the recursive calls made by it returned <code>true</code> and returns <code>false</code> otherwise."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421213232, "post_id": 27936096, "comment_id": 44269633, "body": "Your &quot;refactored&quot; version is different; it will call <code>hasPathSum(NULL</code> in the case that exactly one of <code>left</code> and <code>right</code> is NULL; whereas the original does not."}, {"owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "reply_to_user": {"reputation": 1272, "user_id": 373864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c34ede316e83d40011a76e986324e7a?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/373864/fernando"}, "edited": false, "score": 0, "creation_date": 1421214131, "post_id": 27936096, "comment_id": 44269907, "body": "@Fernando yeah, I&#39;m trying to think of a better term but I&#39;m at a loss at the moment. I realized writing recursive solutions to problems that sometimes they won&#39;t work because I&#39;ll &quot;clobber results&quot; unless I do some kind of check and have that ensure the right result gets pulled back."}, {"owner": {"reputation": 1347, "user_id": 890624, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355e7d29b580cc1fbb9c70bff46e87d?s=128&d=identicon&r=PG", "display_name": "ecraig12345", "link": "https://stackoverflow.com/users/890624/ecraig12345"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1421219247, "post_id": 27936096, "comment_id": 44271616, "body": "@MattMcNabb actually, the refactored version should give the same results as the original, and it doesn&#39;t matter if he calls <code>hasPathSum(NULL)</code> because he handles it properly. He could even remove <code>if ( (sum == 0) &amp;&amp; (!tree-&gt;left &amp;&amp; !tree-&gt;right)) return 1;</code> and still get the same results."}, {"owner": {"reputation": 2024, "user_id": 157410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9f70621ca9855ae087e325291be818?s=128&d=identicon&r=PG", "display_name": "phoku", "link": "https://stackoverflow.com/users/157410/phoku"}, "edited": false, "score": 0, "creation_date": 1421230627, "post_id": 27936096, "comment_id": 44277020, "body": "The question for heuristics is somewhat general... I hope I gave you some idea how to structure recursive traversal functions at least. The original example code was fairly ugly to be honest and obscured what happened."}, {"owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "edited": false, "score": 1, "creation_date": 1421256478, "post_id": 27936096, "comment_id": 44292703, "body": "It should be worth noting that attempting to &quot;preserve&quot; values in a recursive call, is no different than if you treat it as a single function call. You evaluate the results of some set of calculations and return the one that is &quot;correct&quot;. If you&#39;re returning to/from a recursive call, it will just work if your algorithm is designed correctly. A non BST can still be evaluated for a min and any well-designed algorithm that can&#39;t rely on the definition of a binary search tree (unordered) will use the standard divide and conquer approach to find min values in both children, and return the lesser."}], "answers": [{"comments": [{"owner": {"reputation": 1347, "user_id": 890624, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355e7d29b580cc1fbb9c70bff46e87d?s=128&d=identicon&r=PG", "display_name": "ecraig12345", "link": "https://stackoverflow.com/users/890624/ecraig12345"}, "reply_to_user": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 1, "creation_date": 1421213184, "post_id": 27936189, "comment_id": 44269617, "body": "The logic will only short-circuit if the left side returns true (non-0). If the left side returns false (0), it will go on to evaluate the right side of the tree."}, {"owner": {"reputation": 1347, "user_id": 890624, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355e7d29b580cc1fbb9c70bff46e87d?s=128&d=identicon&r=PG", "display_name": "ecraig12345", "link": "https://stackoverflow.com/users/890624/ecraig12345"}, "reply_to_user": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 0, "creation_date": 1421214854, "post_id": 27936189, "comment_id": 44270119, "body": "I guess I&#39;m not understanding what you mean by &quot;overwriting.&quot; The function is essentially answering a yes or no question, so once you know &quot;yes, a path to a leaf with the given sum exists,&quot; why would you need any more information? If you were answering a question that doesn&#39;t have a yes/no answer, like &quot;what is the largest sum on any path?&quot; or &quot;what is the path with the largest sum?&quot; then wanting to store or return more information would make sense."}, {"owner": {"reputation": 1347, "user_id": 890624, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355e7d29b580cc1fbb9c70bff46e87d?s=128&d=identicon&r=PG", "display_name": "ecraig12345", "link": "https://stackoverflow.com/users/890624/ecraig12345"}, "reply_to_user": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 0, "creation_date": 1421220887, "post_id": 27936189, "comment_id": 44272257, "body": "It does seem like you have a valid question, I&#39;m just not quite sure yet what it is (and I did misunderstand it initially, sorry). I might try to say more later about what I think you might be getting at, but it would help if you could find/invent another example that illustrates your concern more clearly."}, {"owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 0, "creation_date": 1421223586, "post_id": 27936189, "comment_id": 44273331, "body": "I&#39;ve tried including an example with pseudocode that might help my question&#39;s clarity. Let me know if its still muddy and I&#39;ll try to work finessing the question more. I&#39;m mostly just curious about avoiding pitfalls in recursive designs when having to bring values up from (potentially) lots of calls."}], "tags": [], "owner": {"reputation": 1347, "user_id": 890624, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355e7d29b580cc1fbb9c70bff46e87d?s=128&d=identicon&r=PG", "display_name": "ecraig12345", "link": "https://stackoverflow.com/users/890624/ecraig12345"}, "is_accepted": false, "score": 2, "last_activity_date": 1421360161, "last_edit_date": 1495542041, "creation_date": 1421212021, "answer_id": 27936189, "question_id": 27936096, "link": "https://stackoverflow.com/questions/27936096/ensuring-recursive-functions-with-multiple-returns-preserve-desired-results/27936189#27936189", "title": "Ensuring Recursive Functions With Multiple Returns &quot;Preserve&quot; Desired Results", "body": "<p>EDIT: I misunderstood the original question, so phoku's answer is much more relevant.</p>\n\n<hr>\n\n<p>The logical or operator in C (and most other languages) does what's called <em>short-circuiting</em>: it stops evaluating operands as soon as it finds one that's true. So if <code>hasPathSum(tree-&gt;left, sum)</code> returns 1, <code>hasPathSum(tree-&gt;right, sum)</code> will never get called.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8759868/java-logical-operator-short-circuiting\">This question</a> has a more detailed explanation. It's written for Java, but the operators in C work the same way.</p>\n"}, {"comments": [{"owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 0, "creation_date": 1421268780, "post_id": 27940405, "comment_id": 44299419, "body": "Thanks so much, these are great points. Do you think I should modify the original title to reflect this as something more about preserving values and (in that, as Ryan J pointed out above) more succinct recursive algorithm design?"}, {"owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 0, "creation_date": 1421272004, "post_id": 27940405, "comment_id": 44301158, "body": "Also, just tried to compile and I think you left out time.h for when you call srand (when compiled with <code>gcc -Wall</code> throws up a warning of implicit declaration of time). I like how you display the findMin function works with a potentially incorrect call."}, {"owner": {"reputation": 2024, "user_id": 157410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9f70621ca9855ae087e325291be818?s=128&d=identicon&r=PG", "display_name": "phoku", "link": "https://stackoverflow.com/users/157410/phoku"}, "reply_to_user": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "edited": false, "score": 0, "creation_date": 1421308294, "post_id": 27940405, "comment_id": 44311583, "body": "@RJS Glad I could help you :) I&#39;ll add the missing time.h a bit later. As for renaming, that might actually be a good idea, though &quot;succinct recursive algorithm design&quot; sounds a bit grandiose/broad."}, {"owner": {"reputation": 1347, "user_id": 890624, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a355e7d29b580cc1fbb9c70bff46e87d?s=128&d=identicon&r=PG", "display_name": "ecraig12345", "link": "https://stackoverflow.com/users/890624/ecraig12345"}, "edited": false, "score": 0, "creation_date": 1421360327, "post_id": 27940405, "comment_id": 44340854, "body": "I&#39;d second &quot;try to treat the problem as a local problem&quot; as a good way to think about recursion."}], "tags": [], "owner": {"reputation": 2024, "user_id": 157410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9f70621ca9855ae087e325291be818?s=128&d=identicon&r=PG", "display_name": "phoku", "link": "https://stackoverflow.com/users/157410/phoku"}, "is_accepted": true, "score": 3, "last_activity_date": 1421235730, "last_edit_date": 1421235730, "creation_date": 1421230303, "answer_id": 27940405, "question_id": 27936096, "link": "https://stackoverflow.com/questions/27936096/ensuring-recursive-functions-with-multiple-returns-preserve-desired-results/27940405#27940405", "title": "Ensuring Recursive Functions With Multiple Returns &quot;Preserve&quot; Desired Results", "body": "<p>Here is the original example without optimization. You'll see that the algorithm is much cleaner now.</p>\n\n<pre><code>bool hasPathSum(struct node* node, int sum)\n{\n  /* return true if we run out of tree and sum==0 */\n  if (node == NULL)\n     return (sum == 0);\n\n  /* otherwise check both subtrees */\n  int subSum = sum - node-&gt;data;\n  return hasPathSum(node-&gt;left, subSum) ||  hasPathSum(node-&gt;right, subSum);\n}\n</code></pre>\n\n<p>With regards to the actual question - how to return values in this sort of recursion where there's no constraint on the data in the data structure. Returning the current minimum for the sub-tree (or whatever data structure you actually look at) works just fine.</p>\n\n<p>Simply consider the problem without regarding the actual data structure.</p>\n\n<pre><code>current = useful_start_value\nfor value in data:\n    if binaryOp(current, value):\n       current = value   \n</code></pre>\n\n<p>So for every value you <em>have</em> to test it against the <code>current</code> data. For the findMin function this results in the following code. I've adapted to use the original data structures.</p>\n\n<pre><code>int findMin(struct node* node, int min) {\n    if (!node) return min;\n    if (node-&gt;data &lt; min)\n       min = node-&gt;data;\n\n    int leftMin = findMin(node-&gt;left, min);\n    if(leftMin &lt; min)\n       min = leftMin;\n\n    int rightMin = findMin(node-&gt;right, min);\n    if(rightMin &lt; min)\n       min = rightMin;\n\n    return min;\n}\n</code></pre>\n\n<p>As a side - written like this you can also see the actual order the nodes are visited cleanly.</p>\n\n<p>My general advice would be:</p>\n\n<ul>\n<li><strong>Don't optimize early (and badly)</strong> </li>\n<li>Do the recursive calls at exactly one position in the source code (if you can).</li>\n<li>Try to treat the problem as a local problem - as in findMin we just had to find the minimum of three values - so we did that.</li>\n</ul>\n\n<p>I've uploaded <a href=\"http://pastebin.com/CPbuFpKc\" rel=\"nofollow\">a complete working example</a> with additional functions for testing and generating trees for testing.</p>\n"}], "owner": {"reputation": 749, "user_id": 2748415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d551faddd02dae2ef57874988c081ae?s=128&d=identicon&r=PG", "display_name": "rjs", "link": "https://stackoverflow.com/users/2748415/rjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 1, "accepted_answer_id": 27940405, "answer_count": 2, "score": 4, "last_activity_date": 1421360161, "creation_date": 1421211174, "last_edit_date": 1421270186, "question_id": 27936096, "link": "https://stackoverflow.com/questions/27936096/ensuring-recursive-functions-with-multiple-returns-preserve-desired-results", "title": "Ensuring Recursive Functions With Multiple Returns &quot;Preserve&quot; Desired Results", "body": "<p>Consider this code (quoted from <a href=\"http://www.geeksforgeeks.org/root-to-leaf-path-sum-equal-to-a-given-number/\" rel=\"nofollow\">geeksforgeeks.org</a>, author Tushar Roy) which calculates true or false if the path from a root to a <em>leaf</em> has keys that sum to a specified value:</p>\n\n<pre><code>bool hasPathSum(struct node* node, int sum)\n{\n  /* return true if we run out of tree and sum==0 */\n  if (node == NULL)\n  {\n     return (sum == 0);\n  }\n\n  else\n  {\n    bool ans = 0; \n\n    /* otherwise check both subtrees */\n    int subSum = sum - node-&gt;data;\n\n    /* If we reach a leaf node and sum becomes 0 then return true*/\n    if ( subSum == 0 &amp;&amp; node-&gt;left == NULL &amp;&amp; node-&gt;right == NULL )\n      return 1;\n\n    if(node-&gt;left)\n      ans = ans || hasPathSum(node-&gt;left, subSum);\n    if(node-&gt;right)\n      ans = ans || hasPathSum(node-&gt;right, subSum);\n\n    return ans;\n  }\n}\n</code></pre>\n\n<p>In this code, the author has used the logical OR operator in his assignments to a variable <code>ans</code> which he returns to avoid overwriting a return of true with a return of false. I have refactored the code into:</p>\n\n<pre><code>int hasPathSum(Treelink tree, int sum){\n    if ( !tree ) { //succesful path found\n        return (sum == 0);\n    } else {\n        sum -= tree-&gt;item;\n        if ( (sum == 0) &amp;&amp; (!tree-&gt;left &amp;&amp; !tree-&gt;right)) \n            return 1;\n        return hasPathSum(tree-&gt;left, sum) || hasPathSum(tree-&gt;right, sum);\n    } \n}\n</code></pre>\n\n<p>Although it is obvious with this case that using a temporary variable and/or the logical OR operator are effective in preventing overwrites of recursive returns, <strong>what are some best methods for carrying a value up a recursive call?</strong> </p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>Conversely, let us consider a slightly contrived example; Given an improperly ordered binary tree (say, key 100 as root with left child's key as 5 and right child's key as 2), find the minimum key from the tree recursively. I would naively approach this as so:</p>\n\n<p><em>Disclaimer: written but not compiled.</em></p>\n\n<pre><code>int findMin(Tree tree, int min) {\n    if (!tree) return 0; //defensive check\n\n    if ( tree-&gt;item &lt; min &amp;&amp; (tree-&gt;left || tree-&gt;right) ) { \n        //Can go deeper and reestablish the min in both directions\n        if ( tree-&gt;left ) \n            min = findMin(tree-&gt;left, tree-&gt;item);\n        if ( tree-&gt;right ) \n            min = findMin(tree-&gt;right, tree-&gt;item);\n    } else if ( tree-&gt;item &gt;= min &amp;&amp; (tree-&gt;left || tree-&gt;right ) ) {\n        //can go deeper but should not reestablish the min\n        if ( tree-&gt;left ) \n            min = findMin(tree-&gt;left, min);\n        if ( tree-&gt;right ) \n            min = findMin(tree-&gt;right, min);\n    } else {\n        return min; //return min's final value\n    }\n}\n</code></pre>\n\n<p>It would presumably be called via <code>findMin(testTree, testTree-&gt;item)</code>. Fundamentally; we are forced to go down both branches from the root to explore and find a key that might be anywhere in the tree (even the root itself!) We know we have to make assignments to 'pull up' the right key, however this would most probably overwrite the 'true' min of the previous call (the way this is currently written) unless we did some kind of bounded check on each assignment e.g.</p>\n\n<pre><code>tmpmin = findMin(tree-&gt;left);\nmin = (min &lt; tmpmin) ? min : tmpmin;  \n</code></pre>\n\n<p>We could also perhaps have two separate variables (as this is a binary tree, after all) that specify the left min and the right min and merely return the min of the two. In these cases I am still using some kind of temporary variables to piggy back to its original caller. Ultimately, <strong>I am curious about generic heuristics regarding avoiding these types of mistakes when designing recursive algorithms.</strong></p>\n"}, {"tags": ["c++", "c", "stack", "queue"], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1421210821, "post_id": 27936007, "comment_id": 44269040, "body": "Upticked. And that code isn&#39;t just horrendous to read. You can lose the &quot;to read&quot; and it is even more accurate. If one were trying to muster a <i>less-efficient</i> way of implementing a stack, one would be hard pressed to beat this algorithm."}, {"owner": {"reputation": 1847, "user_id": 683104, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4497fac3d0712a4b2302835529305aa5?s=128&d=identicon&r=PG", "display_name": "Expert Novice", "link": "https://stackoverflow.com/users/683104/expert-novice"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1421211800, "post_id": 27936007, "comment_id": 44269284, "body": "The Dark : Sorry about the readability part. @WhozCraig : It was never about efficiency, where in my question i asked anything about efficiency? It was just a puzzle i was trying to solve. Sometimes unneeded expert advice is as useless as such puzzles."}, {"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1421212162, "post_id": 27936007, "comment_id": 44269362, "body": "@The Dark: +1. In addition, don&#39;t you think that packing the queue in a struct is actually better here than passing reference or double pointer even? Your answer explains what went wrong but i would go with OP&#39;s first way of coding here."}, {"owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "reply_to_user": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1421216512, "post_id": 27936007, "comment_id": 44270638, "body": "@al-Acme I agree, the first way encapsulates the code better and makes it easier to call."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421217012, "post_id": 27936007, "comment_id": 44270820, "body": "the code should always check the returned value from a call to malloc() to assure the operation was successful"}], "tags": [], "owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "is_accepted": true, "score": 3, "last_activity_date": 1421210588, "creation_date": 1421210588, "answer_id": 27936007, "question_id": 27935905, "link": "https://stackoverflow.com/questions/27935905/implementing-stack-using-2-queues/27936007#27936007", "title": "Implementing Stack using 2 Queues", "body": "<p>Aside from being horrendously hard to read, the problem is that your second <code>Push</code> function changes the values of its parameters in the following lines of code.</p>\n\n<pre><code>Q t = qq1;\nqq1 = qq2;\nqq2 = t;\n</code></pre>\n\n<p><code>qq1</code> and <code>qq2</code> are parameters of the function, so the new values are not updated in the calling function (<code>main</code>).</p>\n\n<p>One way to fix this is to make the parameters pass by reference:</p>\n\n<pre><code>void Push(Q &amp;qq1, Q &amp;qq2, int data)\n</code></pre>\n\n<p>That way, changes to <code>qq1</code> and <code>qq2</code> will also change the values in the calling function.</p>\n"}], "owner": {"reputation": 1847, "user_id": 683104, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4497fac3d0712a4b2302835529305aa5?s=128&d=identicon&r=PG", "display_name": "Expert Novice", "link": "https://stackoverflow.com/users/683104/expert-novice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 27936007, "answer_count": 1, "score": 1, "last_activity_date": 1421211463, "creation_date": 1421209844, "last_edit_date": 1421211463, "question_id": 27935905, "link": "https://stackoverflow.com/questions/27935905/implementing-stack-using-2-queues", "title": "Implementing Stack using 2 Queues", "body": "<p>Why does this code work:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n\n#define N n *\n#define Q q *\n#define S s *\n\ntypedef struct n\n{\n    int data;\n    struct N nxt;\n}n;\n\ntypedef struct q\n{\n    N f;\n    N r;\n}q;\n\ntypedef struct stack\n{\n    Q q1;\n    Q q2;\n}s;\nQ Createq()\n{\n    Q qq = (Q)malloc(sizeof(q));\n    qq-&gt;f = qq-&gt;r  = 0;\n    return qq;\n}\n\nS CreateStk()\n{\n    S stk = (S)malloc(sizeof(s));\n    stk-&gt;q1 = Createq();\n    stk-&gt;q2 = Createq();\n    return stk;\n}\n\nint Deq(Q qq)\n{\n    if(qq-&gt;f == 0 &amp;&amp; qq-&gt;r == 0) return -1;\n    N nn = qq-&gt;r;\n    int data = nn-&gt;data;\n    qq-&gt;r = qq-&gt;r-&gt;nxt;\n    free(nn);\n    if(!qq-&gt;r)\n        qq-&gt;f = 0;\n    return data;\n}\n\nvoid Enq(Q qq, int data)\n{\n    if(!qq-&gt;f)\n    {\n        N nn = (N)malloc(sizeof(n));\n        nn-&gt;data = data;\n        nn-&gt;nxt = 0;\n        qq-&gt;f = qq-&gt;r = nn;\n    }\n    else\n    {\n        N nn = (N)malloc(sizeof(n));\n        nn-&gt;data = data;\n        nn-&gt;nxt = 0;\n        qq-&gt;f-&gt;nxt = nn;\n        qq-&gt;f = nn;\n    }\n}\n\nvoid Push(S stk, int data)\n{\n    Enq(stk-&gt;q2,data);\n\n    while(stk-&gt;q1-&gt;f)\n    {\n        Enq(stk-&gt;q2,Deq(stk-&gt;q1));\n    }\n\n    Q t = stk-&gt;q1;\n    stk-&gt;q1 = stk-&gt;q2;\n    stk-&gt;q2 = t;\n}\n\nint Pop(S stk)\n{\n    return Deq(stk-&gt;q1);\n}\nint main() \n{\n    S stk = CreateStk();\n    Push(stk,10);\n    Push(stk,30);\n    Push(stk,40);\n    Push(stk,50);\n    printf(\"\\nPopped: %d.\", Pop(stk));\n    printf(\"\\nPopped: %d.\", Pop(stk));\n    printf(\"\\nPopped: %d.\", Pop(stk));\n    printf(\"\\nPopped: %d.\", Pop(stk));\n    return 0;\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>Popped: 50.\nPopped: 40.\nPopped: 30.\nPopped: 10.\n</code></pre>\n</blockquote>\n\n<p>While this does not:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n\n#define N n *\n#define Q q *\n\ntypedef struct n\n{\n    int data;\n    struct N nxt;\n}n;\n\ntypedef struct q\n{\n    N f;\n    N r;\n}q;\n\nQ Createq()\n{\n    Q qq = (Q)malloc(sizeof(q));\n    qq-&gt;f = qq-&gt;r  = 0;\n    return qq;\n}\n\nint Deq(Q qq)\n{\n    if(qq-&gt;f == 0 &amp;&amp; qq-&gt;r == 0) return -1;\n    N nn = qq-&gt;r;\n    int data = nn-&gt;data;\n    qq-&gt;r = qq-&gt;r-&gt;nxt;\n    free(nn);\n    if(!qq-&gt;r)\n        qq-&gt;f = 0;\n    return data;\n}\n\nvoid Enq(Q qq, int data)\n{\n    if(!qq-&gt;f)\n    {\n        N nn = (N)malloc(sizeof(n));\n        nn-&gt;data = data;\n        nn-&gt;nxt = 0;\n        qq-&gt;f = qq-&gt;r = nn;\n    }\n    else\n    {\n        N nn = (N)malloc(sizeof(n));\n        nn-&gt;data = data;\n        nn-&gt;nxt = 0;\n        qq-&gt;f-&gt;nxt = nn;\n        qq-&gt;f = nn;\n    }\n}\n\nvoid Push(Q qq1, Q qq2, int data)\n{\n    Enq(qq2,data);\n\n    while(qq1-&gt;f)\n    {\n        Enq(qq2,Deq(qq1));\n    }\n\n    Q t = qq1;\n    qq1 = qq2;\n    qq2 = t;\n}\n\nint Pop(Q qq1)\n{\n    return Deq(qq1);\n}\n\nint main() {\n    // your code goes here\n    Q qq1 = Createq();\n    Q qq2 = Createq();\n    Push(qq1,qq2,10);\n    Push(qq1,qq2,30);\n    Push(qq1,qq2,40);\n    Push(qq1,qq2,50);\n    printf(\"\\nPopped: %d.\", Pop(qq1));\n    printf(\"\\nPopped: %d.\", Pop(qq1));\n    printf(\"\\nPopped: %d.\", Pop(qq1));\n    printf(\"\\nPopped: %d.\", Pop(qq1));\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Popped: -1.\n     Popped: -1.\n     Popped: -1.\n     Popped: -1.</p>\n</blockquote>\n\n<p>The expected output is the first one as its obvious by the question heading. However i do not understand the gory details of why the code did not work when i did not encapsulate the 2 queues in a struct in my second example.</p>\n\n<p>PS: I think the problem is with the <code>Push</code> method - but not sure what went wrong.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421211177, "post_id": 27935712, "comment_id": 44269128, "body": "Using <code>%c</code> is for single characters.  If you write <code>%1s</code>, you will also read at most one character, but you&#39;ll also get a null byte added after that character, which is part of the trouble you ran into in the first place."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 4451837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ade1415b45057cf3440ec464db17e337?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4451837/jeffrey"}, "edited": false, "score": 0, "creation_date": 1421208693, "post_id": 27935722, "comment_id": 44268572, "body": "have tried that, but doing that will make it worse. The next scanf will take in the &#39;enter&#39; keyed in on the previous scanf."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 139, "user_id": 4451837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ade1415b45057cf3440ec464db17e337?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4451837/jeffrey"}, "edited": false, "score": 0, "creation_date": 1421208733, "post_id": 27935722, "comment_id": 44268585, "body": "@Jeffrey Please read the whole answer you need to ignore the newline char and for it place a space before <code>%c</code>"}, {"owner": {"reputation": 139, "user_id": 4451837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ade1415b45057cf3440ec464db17e337?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4451837/jeffrey"}, "edited": false, "score": 0, "creation_date": 1421208847, "post_id": 27935722, "comment_id": 44268623, "body": "so sorry didnt see that carefully. thanks! it works!"}, {"owner": {"reputation": 139, "user_id": 4451837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ade1415b45057cf3440ec464db17e337?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4451837/jeffrey"}, "edited": false, "score": 0, "creation_date": 1421209089, "post_id": 27935722, "comment_id": 44268674, "body": "yea i know, but it requires 5mins to do so."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 3, "last_activity_date": 1421208564, "creation_date": 1421208564, "answer_id": 27935722, "question_id": 27935712, "link": "https://stackoverflow.com/questions/27935712/run-time-check-failure-2-stack-around-the-variable-char-was-corrupted/27935722#27935722", "title": "Run-Time Check Failure #2 - Stack around the variable &#39;char&#39; was corrupted", "body": "<p>To scan a char use</p>\n\n<pre><code>scanf(\"%c\", &amp;ch);\n</code></pre>\n\n<p>Using wrong format specifier will lead to undefined behavior.</p>\n\n<p>Please make sure you ignore the newline char and do it by placing a space before <code>%c</code></p>\n\n<pre><code>scanf(\" %c\", &amp;ch);\n</code></pre>\n\n<p>The space before the <code>%c</code> will make sure that the newline char in the buffer gets ignored. i.e space gobbles the newline char.</p>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1421208714, "creation_date": 1421208714, "answer_id": 27935746, "question_id": 27935712, "link": "https://stackoverflow.com/questions/27935712/run-time-check-failure-2-stack-around-the-variable-char-was-corrupted/27935746#27935746", "title": "Run-Time Check Failure #2 - Stack around the variable &#39;char&#39; was corrupted", "body": "<p>In scanf,</p>\n\n<p>If you want to the single character you have to use the control string <code>%c</code>. <code>%s</code> for \ngetting the string.</p>\n\n<p>So change the scanf into </p>\n\n<pre><code>scanf(\" %c\", &amp;ch);\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4451837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ade1415b45057cf3440ec464db17e337?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4451837/jeffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "accepted_answer_id": 27935722, "answer_count": 2, "score": 1, "last_activity_date": 1421208714, "creation_date": 1421208508, "question_id": 27935712, "link": "https://stackoverflow.com/questions/27935712/run-time-check-failure-2-stack-around-the-variable-char-was-corrupted", "title": "Run-Time Check Failure #2 - Stack around the variable &#39;char&#39; was corrupted", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    char ch;\n    int i;\n\n    for (i = 1; i &lt;= 5; i++) {\n        printf(\"Enter a Character: \");\n        scanf(\"%s\", &amp;ch);\n\n        if ((ch &gt;= '0') &amp;&amp; (ch &lt;= '9'))\n            printf(\"The character is a numeral\\n\");\n        else if ((ch &gt;= 'A') &amp;&amp; (ch &lt;= 'Z'))\n            printf(\"The character is in upper case\\n\");\n        else if ((ch &gt;= 'a') &amp;&amp; (ch &lt;= 'z'))\n            printf(\"The character is in lower case\\n\");\n        else\n            printf(\"The character is a special character\\n\");\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I want to read a character input from user and display the character type. However everytime after running the last scan of the program, it will have a debug error. I am using Visual Studios C++ 2010 Express.</p>\n\n<p>Run-Time Check Failure #2 - Stack around the variable 'ch' was corrupted.</p>\n\n<p>Please help!</p>\n"}, {"tags": ["c", "memory-leaks"], "comments": [{"owner": {"reputation": 32242, "user_id": 75889, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/37aa3ec65ec47c5a3f9e2a80534837f3?s=128&d=identicon&r=PG", "display_name": "StackedCrooked", "link": "https://stackoverflow.com/users/75889/stackedcrooked"}, "edited": false, "score": 2, "creation_date": 1421204502, "post_id": 27935158, "comment_id": 44267687, "body": "No, it&#39;s perfectly fine."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 5, "creation_date": 1421204606, "post_id": 27935158, "comment_id": 44267709, "body": "Yes, your code leaks a block of the size of ten integers. However, since it exits right away, the memory is returned back to the OS, so nobody is going to notice except valgrind."}, {"owner": {"reputation": 11660, "user_id": 2055998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/2Vx3A.jpg?s=128&g=1", "display_name": "PM 77-1", "link": "https://stackoverflow.com/users/2055998/pm-77-1"}, "edited": false, "score": 0, "creation_date": 1421204681, "post_id": 27935158, "comment_id": 44267730, "body": "To get a leak you need to have it in a function that is called in a long loop."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1421204702, "post_id": 27935158, "comment_id": 44267734, "body": "Define what you mean by &quot;leak&quot;"}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1421204782, "post_id": 27935158, "comment_id": 44267755, "body": "If nothing else you should use static memory for this kind of thing, it will improve performance and make your application safer."}, {"owner": {"reputation": 45, "user_id": 2455037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ad732ca2365943157e2262df034b98?s=128&d=identicon&r=PG", "display_name": "Zhaopeng Li", "link": "https://stackoverflow.com/users/2455037/zhaopeng-li"}, "edited": false, "score": 0, "creation_date": 1421205485, "post_id": 27935158, "comment_id": 44267865, "body": "Hi, Vality. This code is just used to get this &quot;leak&quot; thing clear."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421217372, "post_id": 27935158, "comment_id": 44270932, "body": "a memory leak, irregardless of the duration, is when a call to malloc(and family) allocates memory and that memory is not properly released via a call to free()."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 2455037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ad732ca2365943157e2262df034b98?s=128&d=identicon&r=PG", "display_name": "Zhaopeng Li", "link": "https://stackoverflow.com/users/2455037/zhaopeng-li"}, "edited": false, "score": 0, "creation_date": 1421205130, "post_id": 27935220, "comment_id": 44267811, "body": "I am writing a static analyzer to detect memory leaks. I&#39;m wondering whether or not to report a warning in such a case."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 45, "user_id": 2455037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ad732ca2365943157e2262df034b98?s=128&d=identicon&r=PG", "display_name": "Zhaopeng Li", "link": "https://stackoverflow.com/users/2455037/zhaopeng-li"}, "edited": false, "score": 0, "creation_date": 1421205453, "post_id": 27935220, "comment_id": 44267858, "body": "@ZhaopengLi: I&#39;d say yes, at least allow reporting it--but probably allow the user to disable reporting if desired, especially if every run results in a small, constant set of blocks being leaked. Leaks that vary between runs are probably more interesting as a rule."}, {"owner": {"reputation": 45, "user_id": 2455037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ad732ca2365943157e2262df034b98?s=128&d=identicon&r=PG", "display_name": "Zhaopeng Li", "link": "https://stackoverflow.com/users/2455037/zhaopeng-li"}, "edited": false, "score": 0, "creation_date": 1421205828, "post_id": 27935220, "comment_id": 44267927, "body": "thanks for your constructive advice. In our tool, currently each run results in the same result. (There is no random path chosen)"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 7, "last_activity_date": 1421204678, "creation_date": 1421204678, "answer_id": 27935220, "question_id": 27935158, "link": "https://stackoverflow.com/questions/27935158/is-it-a-memory-leak-in-the-following-c-code/27935220#27935220", "title": "Is it a memory leak in the following C code?", "body": "<p>At least the way most people use the term, the answer would be yes--any memory allocated by the program and never freed is considered a leak.</p>\n\n<p>At the same time, most people are concerned primarily with <em>progressive</em> leaks--ones that can/will leak progressively more memory as a program runs, for example from doing an allocation inside a loop, and failing to free that memory.</p>\n\n<p>Especially for something that really needs some memory to remain allocated for the entire life of the program anyway, the difference between freeing before exit and leaving the memory allocated until exit is complete becomes more a question of hair-splitting than a truly useful distinction. Some view it as a travesty to leave the memory allocated, even if it's only freed immediately before exit. Others view it as a waste of code (and invitation to bugs) to explicitly free memory immediately before exit (when any competently designed OS will regain the process' resources anyway).</p>\n"}, {"comments": [{"owner": {"reputation": 10964, "user_id": 2478565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/UnOcW.jpg?s=128&g=1", "display_name": "Drew McGowen", "link": "https://stackoverflow.com/users/2478565/drew-mcgowen"}, "edited": false, "score": 2, "creation_date": 1421204873, "post_id": 27935236, "comment_id": 44267768, "body": "Memory allocated by <code>malloc</code> that isn&#39;t explicitly <code>free</code>d isn&#39;t guaranteed to be reclaimed by the OS - such behavior is not required by the C standard. However, I won&#39;t downvote this because you mention linux and windows."}], "tags": [], "owner": {"reputation": 1605, "user_id": 2686135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHKtI.jpg?s=128&g=1", "display_name": "Farouq Jouti", "link": "https://stackoverflow.com/users/2686135/farouq-jouti"}, "is_accepted": false, "score": 2, "last_activity_date": 1421204822, "creation_date": 1421204822, "answer_id": 27935236, "question_id": 27935158, "link": "https://stackoverflow.com/questions/27935158/is-it-a-memory-leak-in-the-following-c-code/27935236#27935236", "title": "Is it a memory leak in the following C code?", "body": "<p>since the program exits as soon as it allocates then linux (or windows) will automatically <code>free</code> that memory space so there is no leak but you were to do stuff after <code>malloc</code> and before the program ends then there will be a leak</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 2455037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ad732ca2365943157e2262df034b98?s=128&d=identicon&r=PG", "display_name": "Zhaopeng Li", "link": "https://stackoverflow.com/users/2455037/zhaopeng-li"}, "edited": false, "score": 1, "creation_date": 1421205402, "post_id": 27935262, "comment_id": 44267852, "body": "Before I posted this question, I am a little confused. Now, I think I am clear on this topic. Thanks!"}], "tags": [], "owner": {"reputation": 8243, "user_id": 1629262, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/F9Q4g.jpg?s=128&g=1", "display_name": "doptimusprime", "link": "https://stackoverflow.com/users/1629262/doptimusprime"}, "is_accepted": false, "score": 2, "last_activity_date": 1421205079, "creation_date": 1421205079, "answer_id": 27935262, "question_id": 27935158, "link": "https://stackoverflow.com/questions/27935158/is-it-a-memory-leak-in-the-following-c-code/27935262#27935262", "title": "Is it a memory leak in the following C code?", "body": "<p>This will be reported by valgrind and Intel Inspector as memory leaks as the memory allocated is not freed. However, it may possible that this may not have an impact on the program.</p>\n\n<p>If this allocated memory is required till the exit of the program, then this leak warning can be avoided. But design must specify that not freeing will not lead to other problems like out of memory. For example, there might be some singleton instance of a controller object which must be present as long as program runs.</p>\n\n<p>However, if such allocations are lost and never used and design does not consider them, then it is definitely a leak.</p>\n\n<p>Now, in your case, this allocated memory is used no where. Hence, such allocations must be considered as leaks.</p>\n\n<p>It might possible that OS takes away all the memory when program exits. This must not be taken for granted when application has to run for a long time (like server applications) and will exists for a very long and will have lots of maintenance in the future.</p>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 4377391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nk8IR.jpg?s=128&g=1", "display_name": "rabi shaw", "link": "https://stackoverflow.com/users/4377391/rabi-shaw"}, "is_accepted": false, "score": 2, "last_activity_date": 1421219028, "last_edit_date": 1421219028, "creation_date": 1421210903, "answer_id": 27936056, "question_id": 27935158, "link": "https://stackoverflow.com/questions/27935158/is-it-a-memory-leak-in-the-following-c-code/27936056#27936056", "title": "Is it a memory leak in the following C code?", "body": "<p>Yes there is a memory leak in your program. You are allocating a memory of size 10*4 [ consider int takes 4 bytes ] and you are not freed the memory. To avoid memory leak you must free the allocated memory.</p>\n\n<pre><code>    #include &lt;stdlib.h&gt;\n    int *a;\n\n    int main()\n    {\n         /* allocating the Memory */\n         a = malloc( sizeof (int) *10 );\n         /* free the allocate memory */\n         free ( a );\n         return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 2455037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ad732ca2365943157e2262df034b98?s=128&d=identicon&r=PG", "display_name": "Zhaopeng Li", "link": "https://stackoverflow.com/users/2455037/zhaopeng-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 27935220, "answer_count": 4, "score": 3, "last_activity_date": 1421219028, "creation_date": 1421204215, "question_id": 27935158, "link": "https://stackoverflow.com/questions/27935158/is-it-a-memory-leak-in-the-following-c-code", "title": "Is it a memory leak in the following C code?", "body": "<p>Is it a memory leak in the flowing C code?</p>\n\n<pre><code> #include &lt;stdlib.h&gt;\n int *a;\n\n int main() {\n      a = malloc(sizeof(int)*10);\n      return 0;\n }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1064, "user_id": 3522564, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a80325f71c5ea2144816d46a70225edb?s=128&d=identicon&r=PG&f=1", "display_name": "bare_metal", "link": "https://stackoverflow.com/users/3522564/bare-metal"}, "edited": false, "score": 0, "creation_date": 1421202678, "post_id": 27934898, "comment_id": 44267288, "body": "can you mention the input which is causing the issue ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1421202745, "post_id": 27934898, "comment_id": 44267310, "body": "Works OK for me. Please include the exact input you are giving to cause the unexpected output."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1260, "user_id": 1602184, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9a65b4b6de5bf00c8dca49d833195ae4?s=128&d=identicon&r=PG", "display_name": "How Chen", "link": "https://stackoverflow.com/users/1602184/how-chen"}, "edited": false, "score": 0, "creation_date": 1421202775, "post_id": 27934898, "comment_id": 44267319, "body": "@HowChen there is one else for <code>0</code> division, and one for <code>invalid operator</code> it&#39;s just bad indentation."}, {"owner": {"reputation": 1260, "user_id": 1602184, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9a65b4b6de5bf00c8dca49d833195ae4?s=128&d=identicon&r=PG", "display_name": "How Chen", "link": "https://stackoverflow.com/users/1602184/how-chen"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421214708, "post_id": 27934898, "comment_id": 44270080, "body": "@iharob, then I suggest we add <b>braces</b>, even there is only one line after <code>if&#47;else</code>, or keep them in one same line"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1421215250, "post_id": 27934898, "comment_id": 44270227, "body": "Missing <code>#include &lt;stdio.h&gt;</code>?  (Not likely)   In any case, check the return value from <code>scanf()</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1421218089, "post_id": 27934898, "comment_id": 44271181, "body": "after adding the line: &#39;#include &lt;stdio.h&gt;&#39;  the program worked perfectly.  Without that header file, there were several compiler warnings raised and the resulting program failed in the manner you noticed."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1260, "user_id": 1602184, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9a65b4b6de5bf00c8dca49d833195ae4?s=128&d=identicon&r=PG", "display_name": "How Chen", "link": "https://stackoverflow.com/users/1602184/how-chen"}, "edited": false, "score": 0, "creation_date": 1421230529, "post_id": 27934898, "comment_id": 44276974, "body": "@HowChen keep them in one same line is worst, just indenting it is Ok."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421240091, "post_id": 27934898, "comment_id": 44282228, "body": "welp, adding braces certainly worked.  Does the text contain an error, or is this an example of the variation in systems?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421240474, "post_id": 27934898, "comment_id": 44282450, "body": "@JerrySingh the braces had nothing to do, it&#39;s just that the program is not handling the case of invalid input, and it&#39;s invoking undefined behavior in that case."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421240645, "post_id": 27934898, "comment_id": 44282546, "body": "@JerrySingh also, to avoid such mistake as forgetting to include a header file, use compiler warnings, it would warn you about implicit declaration of <code>scanf</code>. I never think of this problem because it never happens to me, I always compile with warnings ON."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421258599, "post_id": 27934898, "comment_id": 44294029, "body": "#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt;   was included at the head of the program, sorry should have included it below.  warnings are on."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421240209, "post_id": 27934938, "comment_id": 44282297, "body": "yea the switch is the next exercise :)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421240322, "post_id": 27934938, "comment_id": 44282370, "body": "@JerrySingh the braces where not the problem, the program was the same with or without them, and did you by any chance read <a href=\"http://stackoverflow.com/tour\">this</a>."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421258804, "post_id": 27934938, "comment_id": 44294145, "body": "yes i read that.  still unclear what the problem is, since the program does work with the curly braces, and doesnt without.  When putting the code into stack overflow I left off the headers, they existed in the original program."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421258971, "post_id": 27934938, "comment_id": 44294246, "body": "@JerrySingh explain doesn&#39;t work, I can&#39;t make it faile, without the braces, and there is absolutely no diference, the braces are required when multiple statements follow the if, but not in this case."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421276761, "post_id": 27934938, "comment_id": 44303283, "body": "the output was junk.  I think this is a compiler thing, I had a similar issue on a later problem.  it was resolved after retyping sections in (identically).  Now the above code, which had been copied directly from codeblocks, is functioning."}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421281410, "post_id": 27934938, "comment_id": 44304828, "body": "Also, as a noob i cant propose a tag, but ive found a number of users who have questions related to this book (Kochan Programming in C), perhaps it would be useful to add a tag for Kochan to orgnize questions related to this introductory text"}, {"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421285805, "post_id": 27934938, "comment_id": 44305951, "body": "@ iharob yes, the code in my question.  Please note, id edited the code to reflect the header files, but it is otherwise identical."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1421286076, "post_id": 27934938, "comment_id": 44306016, "body": "@JerrySingh it&#39;s not a bad Idea to have the tag, but I have no idea how to do that, nor if my reputation points are enough for such privilege, and yes your code should run correctly provided the input is correct, otherwise it will fail, for example try inputing characters instead of digits. The junk comes from something called <i>undefined behavior</i>, caused by the values of the variables passed to <code>scanf</code> not being initialized."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1421202715, "creation_date": 1421202715, "answer_id": 27934938, "question_id": 27934898, "link": "https://stackoverflow.com/questions/27934898/output-is-incorrect-and-cannot-find-error-in-code-kochans-book-on-c/27934938#27934938", "title": "Output is incorrect and cannot find error in code. kochans book on C", "body": "<p>You must check the return value of <code>scanf</code>, it returns the number of arguments matched, very likely it's failing to match one of them, and a garbage value is being printed.</p>\n\n<p>Try this </p>\n\n<pre><code>int main(void)\n{\n    float value1, value2;\n    char operato;\n\n    printf (\"Type in your expression.\\n\");\n    if (scanf (\"%f %c %f\", &amp;value1, &amp;operato, &amp;value2) == 3)\n    {\n        if (operato == '+')\n            printf (\"%.2f\\n\", value1 + value2);\n        else if (operato == '-')\n            printf (\"%.2f\\n\", value1 - value2);\n        else if (operato == '*' )\n            printf (\"%.2f\\n\", value1 * value2);\n        else if (operato == '/' )\n            if (value2 == 0)\n                printf (\"Division by zero.\\n\");\n            else\n                printf (\"%.2f\\n\", value1 / value2);\n        else\n            printf (\"Unknown operator.\\n\");\n    }\n    else\n        printf (\"Invalid expression.\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>I would prefere a switch, it would make the code clearer</p>\n\n<pre><code>int main(void)\n{\n    float value1, value2;\n    char operato;\n\n    printf (\"Type in your expression.\\n\");\n    if (scanf (\"%f %c %f\", &amp;value1, &amp;operato, &amp;value2) == 3)\n    {\n        switch (operato)\n        {\n        case '+':\n            printf (\"%.2f\\n\", value1 + value2);\n            break;\n        case '-':\n            printf (\"%.2f\\n\", value1 - value2);\n            break;\n        case '*':\n            printf (\"%.2f\\n\", value1 * value2);\n            break;\n        case '/':\n            if (value2 == 0)\n                printf (\"Division by zero.\\n\");\n            else\n                printf (\"%.2f\\n\", value1 / value2);\n            break;\n        default:\n            printf (\"Unknown operator.\\n\");\n        }\n    }\n    else\n        printf (\"Invalid expression.\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1605, "user_id": 2686135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHKtI.jpg?s=128&g=1", "display_name": "Farouq Jouti", "link": "https://stackoverflow.com/users/2686135/farouq-jouti"}, "is_accepted": false, "score": -1, "last_activity_date": 1421203348, "creation_date": 1421203348, "answer_id": 27935034, "question_id": 27934898, "link": "https://stackoverflow.com/questions/27934898/output-is-incorrect-and-cannot-find-error-in-code-kochans-book-on-c/27935034#27935034", "title": "Output is incorrect and cannot find error in code. kochans book on C", "body": "<p>you should use curly braces :</p>\n\n<pre><code>else if (operato == '/' )\nif (value2 == 0)\nprintf (\"Division by zero.\\n\");\nelse\nprintf (\"%.2f\\n\", value1 / value2);\nelse\nprintf (\"Unknown operator.\\n\");\nreturn 0;\n</code></pre>\n\n<p>when using nested control statements the indentation becomes important , you can solve this by adding curly braces :</p>\n\n<pre><code>else if (operato == '/' ) \n{\n    if (value2 == 0)\n        printf (\"Division by zero.\\n\");\n    else\n        printf (\"%.2f\\n\", value1 / value2);\n}\nelse\n    printf (\"Unknown operator.\\n\");\nreturn 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 4377391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nk8IR.jpg?s=128&g=1", "display_name": "rabi shaw", "link": "https://stackoverflow.com/users/4377391/rabi-shaw"}, "is_accepted": false, "score": -1, "last_activity_date": 1421212267, "creation_date": 1421212267, "answer_id": 27936222, "question_id": 27934898, "link": "https://stackoverflow.com/questions/27934898/output-is-incorrect-and-cannot-find-error-in-code-kochans-book-on-c/27936222#27936222", "title": "Output is incorrect and cannot find error in code. kochans book on C", "body": "<p>Switch case is nothing but a alternate form of if/else. Put a bracket in the last else if .\nI have tried to test the code in different test cases . Code is working fine for me.<img src=\"https://i.stack.imgur.com/yx1E9.jpg\" alt=\"enter image description here\"></p>\n\n<pre><code>int main(void)\n\n{\nfloat value1, value2;\nchar operato;\n\nprintf (\"Type in your expression.\\n\");\nscanf (\"%f %c %f\", &amp;value1, &amp;operato, &amp;value2);\n\nif (operato == '+')\n    printf (\"%.2f\\n\", value1 + value2);\nelse if (operato == '-')\n    printf (\"%.2f\\n\", value1 - value2);\nelse if (operato == '*' )\n    printf (\"%.2f\\n\", value1 * value2);\nelse if (operato == '/' )\n    {\n    if (value2 == 0)\n        printf (\"Division by zero.\\n\");\n    else\n        printf (\"%.2f\\n\", value1 / value2);\n    }\nelse\n    printf (\"Unknown operator.\\n\");\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1421258952, "creation_date": 1421202413, "last_edit_date": 1421258952, "question_id": 27934898, "link": "https://stackoverflow.com/questions/27934898/output-is-incorrect-and-cannot-find-error-in-code-kochans-book-on-c", "title": "Output is incorrect and cannot find error in code. kochans book on C", "body": "<p>I am working to learn C with Stephen Kochans book Programming in C.  I am having an issue with the program on page 82.  The program takes a mathmatical expression and solves it.  My problem is with the final else statement, which is intended to notify the user if they input an invalid character.  When I run the program, I receive a long number, not the statement \"Uknown operator\" that I have programmed.</p>\n\n<p>I am working in Codeblocks.  Ive checked the program a few times against the book (its written letter for letter).  Any input would be great.  Right now i suspect something with the compiler that I am overlooking or unaware of.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(void)\n\n{\nfloat value1, value2;\nchar operato;\n\nprintf (\"Type in your expression.\\n\");\nscanf (\"%f %c %f\", &amp;value1, &amp;operato, &amp;value2);\n\nif (operato == '+')\n    printf (\"%.2f\\n\", value1 + value2);\nelse if (operato == '-')\n    printf (\"%.2f\\n\", value1 - value2);\nelse if (operato == '*' )\n    printf (\"%.2f\\n\", value1 * value2);\nelse if (operato == '/' )\n    if (value2 == 0)\n        printf (\"Division by zero.\\n\");\n    else\n        printf (\"%.2f\\n\", value1 / value2);\nelse\n    printf (\"Unknown operator.\\n\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "random"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 2, "creation_date": 1421201971, "post_id": 27934690, "comment_id": 44267109, "body": "To confirm - you&#39;re looking for a <i>deterministic</i> algorithm that given some seed selects a fixed percentage of points and returns them, but does so with nice distribution properties?"}, {"owner": {"reputation": 150, "user_id": 4451400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/844a2e3a2a87faaac8bab12022b693f1?s=128&d=identicon&r=PG&f=1", "display_name": "aosdict", "link": "https://stackoverflow.com/users/4451400/aosdict"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1421247537, "post_id": 27934690, "comment_id": 44286823, "body": "Not exactly. It does not need to evaluate points in advance and return a set of them. It just needs to be able to decide a truth value for one coordinate point, and do so repeatably. That is what I meant by deterministic - for the same (x,y,seed) given, it must always return the same truth value."}], "answers": [{"comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1421203814, "post_id": 27935069, "comment_id": 44267541, "body": "Once you have the hash, though, how do you convert that to a fixed-sized random sample of points?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1421206706, "post_id": 27935069, "comment_id": 44268134, "body": "I think the issue here is that the sample space is all pairs of 32-bit integers... which is way too huge to actually hold in memory. You&#39;d need an implicit formula for seeing if one of those points was in the sample."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1421207255, "post_id": 27935069, "comment_id": 44268262, "body": "@templatetypedef: That&#39;s not how I interpreted the question. Maybe I&#39;m wrong. But it seemed like OP has an actual set of x,y points out of which a sample should be taken. If you just wanted a random set of points out of the entire universe, you could just use a good PRNG seeded with the seed value, and pull 32-bit integers out in pairs."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1421207468, "post_id": 27935069, "comment_id": 44268300, "body": "@templatetypedef: Otherwise, what sense can you make of <code>percentage</code>? Surely it is not reasonable to request 0.5% of all 2^64 possible x,y pairs, even if you have a google-sized infrastructure to play with."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1421206488, "last_edit_date": 1592644375, "creation_date": 1421203586, "answer_id": 27935069, "question_id": 27934690, "link": "https://stackoverflow.com/questions/27934690/deterministic-bit-scrambling-to-filter-coordinates/27935069#27935069", "title": "Deterministic bit scrambling to filter coordinates", "body": "<p>The easy solution is to use a good hashing algorithm. You can do the range check on the value of <code>hash(seed || x || y)</code>.</p>\n<p>Of course, selecting points individually with percentage <code>p</code> does not guarantee that you will end up with a sample whose size will be exactly <code>p * N</code>. (That's the expected size of the sample, but any given sample will deviate a bit.) If you want to get a sample of size precisely <code>k</code> from a universe of <code>N</code> objects, you can use the following simple algorithm:</p>\n<ul>\n<li><p>Examine the elements in the sample one at a time until <code>k</code> reaches 0.</p>\n</li>\n<li><p>When examining element <code>i</code>, add it to the sample if its hash value mapped onto the range <code>[0, N-i)</code> is less than <code>k</code>. If you add the element to the sample, decrement <code>k</code>.</p>\n</li>\n</ul>\n<p>There's no way to get the arithmetic absolutely perfect (since there is no way to perfectly partition <code>2<sup>i</sup></code> different hash values into <code>n</code> buckets unless <code>n</code> is a power of 2), so there will always be a tiny bias. (Floating point arithmetic does not help; the number of possible floating point values is also fixed, and suffers from the same bias.)</p>\n<p>If you do 64-bit arithmetic, the bias will be truly tiny, but the arithmetic is more complicated unless your environment provides a 128-bit multiply. So you might feel satisfied with 32-bit computations, where the bias of one in a couple of thousand million [Note 1] doesn't matter. Here, you can use the fact that any 32 bits in your hash should be as unbiased as any other 32 bits, assuming your hash algorithm is any good (see below). So the following check should work fine:</p>\n<pre><code>// I need k elements from a remaining universe of n, and I have a 64-bit hash.\n// Return true if I should select this element\nbool select(uint32_t n, uint32_t k, uint64_t hash) {\n  return ((hash &amp; (uint32_t)(-1)) * (uint64_t)n) &gt;&gt; 32 &lt; k;\n}\n\n// Untested example sampler\n// select exactly k elements from U, using a seed value\nstd::vector&lt;E&gt; sample(const std::vector&lt;E&gt;&amp; U, uint64_t seed, uint32_t k) {\n  std::vector&lt;E&gt; retval;\n  uint32_t n = U.size();\n  for (uint32_t n = U.size(); k &amp;&amp; n;) {\n    E&amp; elt = U[--n];\n    if (select(n, k, hash_function(seed, elt))) {\n      retval.push_back(elt);\n      --k;\n    }\n  }\n  return retval;\n}\n</code></pre>\n<p>Assuming you need to do this a lot, you'll want to use a fast hash algorithm; since you're not actually working in a secure environment, you don't need to worry about whether the algorithm is cryptographically secure.</p>\n<p>Many high-speed hashing algorithms work on 64-bit units, so you could maximize the speed by constructing a 128-bit input consisting of a 64-bit seed and the two 32-bit co-ordinates. You can then unroll the hash loop to do exactly two blocks.</p>\n<p>I won't venture a guess at the best hash function for your purpose. You might want to check out one or more of these open-source hashing functions:</p>\n<ul>\n<li>Farmhash <a href=\"https://code.google.com/p/farmhash/\" rel=\"nofollow noreferrer\">https://code.google.com/p/farmhash/</a></li>\n<li>Murmurhash <a href=\"https://code.google.com/p/smhasher/\" rel=\"nofollow noreferrer\">https://code.google.com/p/smhasher/</a></li>\n<li>xxhash <a href=\"https://code.google.com/p/xxhash/\" rel=\"nofollow noreferrer\">https://code.google.com/p/xxhash/</a></li>\n<li>siphash <a href=\"https://github.com/majek/csiphash/\" rel=\"nofollow noreferrer\">https://github.com/majek/csiphash/</a></li>\n</ul>\n<p>... and many more.</p>\n<hr />\n<h3>Notes</h3>\n<ol>\n<li>A couple of billion, if you're on that side of the Atlantic.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1421206682, "post_id": 27935402, "comment_id": 44268129, "body": "Unless the seed is changed on every invocation of that function, it&#39;s going to have a very serious bias on the probability of selecting point <code>(x, y)</code>. I think you probably meant to use a PRNG sequence instead of a fixed seed value."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1421207656, "post_id": 27935402, "comment_id": 44268341, "body": "So, that requires a minimum of three multiplies and six divides, assuming you can optimize fmod(x, 1.0) to avoid the divide. I&#39;m pretty sure that several of the hash functions I pointed to can beat that, if you specialize them to an aligned 128-bit input."}, {"owner": {"reputation": 9546, "user_id": 58866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6OsC0.jpg?s=128&g=1", "display_name": "Imran", "link": "https://stackoverflow.com/users/58866/imran"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1421208919, "post_id": 27935402, "comment_id": 44268638, "body": "That is interesting. I will have to read more about some of these simple hash functions. I would have to assume that they are not passing all the tests of randomness that the LCG is, because the LCG is supposed to be the fastest method to do this, but I will definitely have to investigate some more."}, {"owner": {"reputation": 150, "user_id": 4451400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/844a2e3a2a87faaac8bab12022b693f1?s=128&d=identicon&r=PG&f=1", "display_name": "aosdict", "link": "https://stackoverflow.com/users/4451400/aosdict"}, "edited": false, "score": 1, "creation_date": 1421246999, "post_id": 27935402, "comment_id": 44286462, "body": "However, because this approach uses an LCG, even if it evaluated to true on a certain x-y-seed tuple, for example, it might not necessarily evaluate to true on a subsequent call using those same values. If (370, 12, 58000) returned true the first time, it might not the second time because <code>si</code> changed. Correct me if I&#39;m wrong about this."}, {"owner": {"reputation": 9546, "user_id": 58866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6OsC0.jpg?s=128&g=1", "display_name": "Imran", "link": "https://stackoverflow.com/users/58866/imran"}, "edited": false, "score": 0, "creation_date": 1421248886, "post_id": 27935402, "comment_id": 44287748, "body": "You are correct. If you want the same result every time for the same x,y, and seed then don&#39;t update the seed. Just use the same seed."}], "tags": [], "owner": {"reputation": 9546, "user_id": 58866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6OsC0.jpg?s=128&g=1", "display_name": "Imran", "link": "https://stackoverflow.com/users/58866/imran"}, "is_accepted": false, "score": 1, "last_activity_date": 1421210814, "last_edit_date": 1421210814, "creation_date": 1421206052, "answer_id": 27935402, "question_id": 27934690, "link": "https://stackoverflow.com/questions/27934690/deterministic-bit-scrambling-to-filter-coordinates/27935402#27935402", "title": "Deterministic bit scrambling to filter coordinates", "body": "<p>I would prefer feeding seed, x, and y through a <a href=\"http://en.wikipedia.org/wiki/Combined_Linear_Congruential_Generator\" rel=\"nofollow\">Combined Linear Congruential Generator</a>.</p>\n\n<p>This is generally much faster than hashing, and it is designed specifically for the purpose: To output a pseudo-random number uniformly in a certain range.</p>\n\n<p>Using coefficients recommended by Wichmann-Hill (which are also used in some <a href=\"http://support.microsoft.com/kb/828795\" rel=\"nofollow\">versions</a> of Microsoft Excel) we can do:</p>\n\n<pre><code>si = 171 * s % 30269;\nxi = 172 * x % 30307;\nyi = 170 * y % 30323;\n\nr_combined = fmod(si/30269. + xi/30307. + yi/30323., 1.);\n\nreturn r_combined &lt; percentage;\n</code></pre>\n\n<p>Where <code>s</code> is the seed on the first call, and the previous <code>si</code> on each subsequent call. (Thanks to rici's comment for this point.)</p>\n"}], "owner": {"reputation": 150, "user_id": 4451400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/844a2e3a2a87faaac8bab12022b693f1?s=128&d=identicon&r=PG&f=1", "display_name": "aosdict", "link": "https://stackoverflow.com/users/4451400/aosdict"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 2, "answer_count": 2, "score": 8, "last_activity_date": 1421246666, "creation_date": 1421200769, "last_edit_date": 1421246666, "question_id": 27934690, "link": "https://stackoverflow.com/questions/27934690/deterministic-bit-scrambling-to-filter-coordinates", "title": "Deterministic bit scrambling to filter coordinates", "body": "<p>I am trying to write a function that, given an (x,y) coordinate pair and the random seed of the program, will psuedo-randomly return true for some preset percentage of all such pairs. There are no limits on x or y beyond the restrictions of the data type, which is a 32-bit signed int.</p>\n\n<p>My current approach is to scramble the bits of x, y, and the seed together and then compare the resulting number to the percentage:</p>\n\n<pre><code>float percentage = 0.005;\n...\nunsigned int n = (x ^ y) ^ seed;\nreturn (((float) n / UINT_MAX) &lt; percentage);\n</code></pre>\n\n<p>However, it seems that this approach would be biased for certain values of x and y. For example, if it returns true for (0,a), it will also return true for (a,0). </p>\n\n<p>I know this implementation that just XORs them together is naive. Is there a better bit-scrambling algorithm to use here that will not be biased?</p>\n\n<p><strong>Edit:</strong> To clarify, I am not starting with a set of (x,y) coordinates, nor am I trying to get a fixed-size set of coordinates that evaluate to true. The function should be able to evaluate a truth value for arbitrary x, y, and seed, with the percentage controlling the average frequency of \"true\" coordinates.</p>\n"}, {"tags": ["c", "robot", "nxt", "mindstorms"], "comments": [{"owner": {"reputation": 1290, "user_id": 3227815, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/932904f6217c372e891e1a36631019f1?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/3227815/katie"}, "edited": false, "score": 0, "creation_date": 1421198250, "post_id": 27934271, "comment_id": 44266307, "body": "It definitely sounds like it&#39;s storing it as a 16-bit int instead of a 32-bit long. The documentation on their site says &quot;Note that the long, float and string data types are not supported on the Arduino 328 platforms.&quot; But I see you set the NXT tag, so I&#39;m guessing that doesn&#39;t apply. It may be a compiler bug - I remember the NQC compiler having all sorts of strange problems back when I did Mindstorms programming. Have you contacted the vendor for support yet? Since it costs money, I would expect them to provide reasonable support."}, {"owner": {"reputation": 33, "user_id": 3783267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34434d75259df588ac202f18f3c8a52d?s=128&d=identicon&r=PG&f=1", "display_name": "mrmprog", "link": "https://stackoverflow.com/users/3783267/mrmprog"}, "reply_to_user": {"reputation": 1290, "user_id": 3227815, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/932904f6217c372e891e1a36631019f1?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/3227815/katie"}, "edited": false, "score": 0, "creation_date": 1421198580, "post_id": 27934271, "comment_id": 44266382, "body": "Yeah, I am on an NXT Mindstorm for a robotics competition. It seems that I can get around it by first storing the number in a long, but this is an annoying solution for a problem that (as far as I can tell) should not exist. I will try contacting them and see if I can get any help. Thanks, any other suggestions?"}, {"owner": {"reputation": 1290, "user_id": 3227815, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/932904f6217c372e891e1a36631019f1?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/3227815/katie"}, "edited": false, "score": 2, "creation_date": 1421198946, "post_id": 27934271, "comment_id": 44266465, "body": "Not really - the best I can suggest is throwing a few different ways of representing the problem at it and hope that one of them compiles correctly. Give the constant in hex, or as (long)90000, or add it up in chunks that are all 32,768 or less."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1421199230, "post_id": 27934271, "comment_id": 44266522, "body": "Do you have access to <code>stdint.h</code>?  It has <code>typedef</code>s such as <code>int32_t</code> and <code>defines</code> such as <code>INT32_MAX</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421200110, "post_id": 27934271, "comment_id": 44266688, "body": "It sounds like this compiler is just horribly broken"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3783267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34434d75259df588ac202f18f3c8a52d?s=128&d=identicon&r=PG&f=1", "display_name": "mrmprog", "link": "https://stackoverflow.com/users/3783267/mrmprog"}, "edited": false, "score": 0, "creation_date": 1421197860, "post_id": 27934292, "comment_id": 44266207, "body": "Thanks for the response! However, I tried this and the code would not compile. <code>**Error**:Expected-&gt;&#39;;&#39;. Found &#39;L&#39; **Error**:Undefined variable &#39;L&#39;. &#39;short&#39; assumed. *Warning*:Meaningless statement -- no code generated</code>"}, {"owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "edited": false, "score": 1, "creation_date": 1421200122, "post_id": 27934292, "comment_id": 44266695, "body": "Hmm, you actually aren&#39;t supposed to need the L on conforming versions of modern C -- it&#39;s supposed to use the smallest type that works for the value. Looks like you need a RobotC-specific answer, and I bet that&#39;s going to be:  <i>sorry, <code>long</code> is not supported.</i> You could test that with something like <code>int f(int a,int b){return a+b;}</code> then: look at the generated code, change all <code>int</code> to <code>long</code> and then see if the generated code changes. Or just look in the docs."}, {"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 0, "creation_date": 1474517359, "post_id": 27934292, "comment_id": 66565262, "body": "&quot;conforming versions of modern C&quot; i.e., not RobotC"}], "tags": [], "owner": {"reputation": 134595, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "is_accepted": false, "score": 1, "last_activity_date": 1421197652, "creation_date": 1421197652, "answer_id": 27934292, "question_id": 27934271, "link": "https://stackoverflow.com/questions/27934271/strange-behavior-when-adding-longs-in-robotc/27934292#27934292", "title": "Strange behavior when adding longs in RobotC", "body": "<p>Try making <code>90000</code> a long, i.e.: <code>90000L.</code></p>\n\n<pre><code>long heading;\ntask main()\n{\n    long num = 0;\n    heading = num + 90000L;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 1753938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zvZvg.gif?s=128&g=1", "display_name": "tfriez", "link": "https://stackoverflow.com/users/1753938/tfriez"}, "is_accepted": true, "score": 1, "last_activity_date": 1421269728, "creation_date": 1421269728, "answer_id": 27952479, "question_id": 27934271, "link": "https://stackoverflow.com/questions/27934271/strange-behavior-when-adding-longs-in-robotc/27952479#27952479", "title": "Strange behavior when adding longs in RobotC", "body": "<p>This is a known issue with 3.X and has been previously fixed for 4.X and is resolved in the current public release of 4.X. There is a workaround for 3.x, however.</p>\n\n<p>With the code you provided, the compiler output is truncating the result by only doing integer math. This was a previously found bug and later fixed, but still exists in older versions... here's the output:</p>\n\n<pre><code>long num = 0;\n0025: CB000000 num:S00(slong) = 0 // long/float\nheading = num + 90000;\n0029: BD0800002B000000905F heading:G00(slong) = num:S00(slong) + 90000\n</code></pre>\n\n<p>As a workaround in 3.X, if you treat the constant as a \"float\" by specifying <code>90000.0</code>, the compiler will generate code that will not truncate the long because it'll do 32-bit level math (on the NXT, \"int\" are actually short ints, hence the truncation)</p>\n\n<pre><code>long num = 0;\n0025: CB000000 num:S00(slong) = 0 // long/float\nheading = num + 90000.0;\n0029: AD2D04002B0000 S04(float) = num:S00(slong) // Store in temp variable :: Convert 'long' to 'float'\n0030: 902D040000C8AF47 S04(float) += 90000 // Perform &lt;op&gt; on temp variable :: float\n0038: 8C0800002D0400 heading:G00(slong) = S04(float) // Convert 'float' to 'long'\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3783267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34434d75259df588ac202f18f3c8a52d?s=128&d=identicon&r=PG&f=1", "display_name": "mrmprog", "link": "https://stackoverflow.com/users/3783267/mrmprog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 27952479, "answer_count": 2, "score": 0, "last_activity_date": 1421269728, "creation_date": 1421197472, "question_id": 27934271, "link": "https://stackoverflow.com/questions/27934271/strange-behavior-when-adding-longs-in-robotc", "title": "Strange behavior when adding longs in RobotC", "body": "<p>This is an example of the problem I am encountering with RobotC 3.62:</p>\n\n<pre><code>long heading;\ntask main()\n{\n    long num = 0;\n    heading=num+90000;\n}\n</code></pre>\n\n<p>This gives the result of <code>heading=24464</code>, which is not what I expected. </p>\n\n<p>I tried replacing the 90000 part with a long containing 90000, and it gave the expected result. It seems as though writing the number 90000 causes some sort of overflow error <code>(90000-256^2=24464)</code>. This is odd since a long should hold \"A whole number ranging from -2,147,483,648 to 2,147,483,647\" . Do I need to cast it somehow? I am not familiar with C, could someone explain this behavior? Thanks!</p>\n"}, {"tags": ["c", "window", "ncurses"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421196614, "post_id": 27934120, "comment_id": 44265895, "body": "I don&#39;t understand your question. Could you add your expected output?"}, {"owner": {"reputation": 75, "user_id": 4295880, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6b394b111960a7d16e8489728f53160d?s=128&d=identicon&r=PG&f=1", "display_name": "user20842454566", "link": "https://stackoverflow.com/users/4295880/user20842454566"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421196728, "post_id": 27934120, "comment_id": 44265920, "body": "The square is defined to start at the origin (0,0), the vertical line i&#39;m drawing is defined to start at (1,1) so mathematically speaking.. the vertical line should be drawn in the square, but it&#39;s not, it&#39;s drawn right below it."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4295880, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6b394b111960a7d16e8489728f53160d?s=128&d=identicon&r=PG&f=1", "display_name": "user20842454566", "link": "https://stackoverflow.com/users/4295880/user20842454566"}, "edited": false, "score": 0, "creation_date": 1421197368, "post_id": 27934204, "comment_id": 44266087, "body": "Cheers! Thanks so much!"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1421197051, "creation_date": 1421197051, "answer_id": 27934204, "question_id": 27934120, "link": "https://stackoverflow.com/questions/27934120/c-program-vertical-line-not-printing-within-window-square/27934204#27934204", "title": "C program Vertical line not printing within window (Square)", "body": "<p>You need <code>mvwvline</code> instead of <code>mvvline</code></p>\n\n<pre><code>mvwvline(win, 1, 1, '|', 10); // does print to screen\n</code></pre>\n\n<p>and of course you must move the code after the <code>win</code> varible is initialized</p>\n\n<pre><code>int main()\n{\n    initscr();\n    refresh();\n\n    WINDOW *win = newwin(10, 10, 0, 0);\n    box(win, '|', '-');\n    mvwvline(win, 1, 1, '|', 10); //does not print to screen\n    touchwin(win);\n    wrefresh(win);\n\n    getchar();\n    endwin();\n    return 0;\n}\n</code></pre>\n\n<p>I don't know if <code>win</code> is guaranteed to return non-<code>NULL</code> but check the documentation, because in the case it could return <code>NULL</code> you will have undefined behavior.</p>\n"}], "owner": {"reputation": 75, "user_id": 4295880, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6b394b111960a7d16e8489728f53160d?s=128&d=identicon&r=PG&f=1", "display_name": "user20842454566", "link": "https://stackoverflow.com/users/4295880/user20842454566"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "accepted_answer_id": 27934204, "answer_count": 1, "score": 0, "last_activity_date": 1421197051, "creation_date": 1421196517, "last_edit_date": 1421196896, "question_id": 27934120, "link": "https://stackoverflow.com/questions/27934120/c-program-vertical-line-not-printing-within-window-square", "title": "C program Vertical line not printing within window (Square)", "body": "<p>I currently have a program that simply draws a square to the screen,however, I'm trying to add vertical lines to this square, which does print to the screen, but not the the full length it is defined, and not within the square either. Any help would be much appreciated!</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\n\nint main()\n{\n    initscr();\n    mvvline(1,1,ACS_VLINE,10); //does not fully print to screen, and is printed outside of the square\n    refresh();\n\n    WINDOW *win = newwin(10,10,0,0);\n    box(win, '|', '-');\n    touchwin(win);\n    wrefresh(win);\n\n    getchar();\n    endwin();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 10964, "user_id": 2478565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/UnOcW.jpg?s=128&g=1", "display_name": "Drew McGowen", "link": "https://stackoverflow.com/users/2478565/drew-mcgowen"}, "edited": false, "score": 1, "creation_date": 1421195017, "post_id": 27933917, "comment_id": 44265484, "body": "The fact that <code>printf(&quot;%s&quot;, *b);</code> works is a moot point because it&#39;s undefined behavior. As far as the first question, <code>char name[11]</code> automatically allocates space for 11 <code>char</code>s, whereas <code>char *name</code> just declares a pointer - it doesn&#39;t actually point to anything."}, {"owner": {"reputation": 19682, "user_id": 790070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8SPP4.jpg?s=128&g=1", "display_name": "Timothy Jones", "link": "https://stackoverflow.com/users/790070/timothy-jones"}, "edited": false, "score": 0, "creation_date": 1421196244, "post_id": 27933917, "comment_id": 44265793, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/9627962/is-it-possible-to-convert-char-to-char-in-c\">Is it possible to convert char&#91;&#93; to char* in C?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421199028, "post_id": 27933917, "comment_id": 44266479, "body": "<code>printf(&quot;%s&quot;, *b)</code> doesn&#39;t &quot;work&quot;  , maybe you meant <code>%d</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421199085, "post_id": 27933917, "comment_id": 44266487, "body": "Try reading the <a href=\"http://c-faq.com/aryptr/\" rel=\"nofollow noreferrer\">C FAQ</a> chapter"}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1421195627, "post_id": 27933951, "comment_id": 44265632, "body": "<code>char buff[11]; char *name = buff;</code> is about the only thing missing from this answer."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1423962949, "post_id": 27933951, "comment_id": 45360899, "body": "There is also, of course, the enormous difference in where the data is actually stored in memory which you completely ignore.  <code>char array[11]</code> will be on the stack while <code>char *name; name = malloc(sizeof(char)*20);</code> will be coming from the heap."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 7, "last_activity_date": 1421196227, "last_edit_date": 1421196227, "creation_date": 1421195090, "answer_id": 27933951, "question_id": 27933917, "link": "https://stackoverflow.com/questions/27933917/what-is-difference-between-char-name11-and-char-name/27933951#27933951", "title": "What is difference between char name[11]; and char *name;", "body": "<p>Because</p>\n\n<pre><code>char name[11];\n</code></pre>\n\n<p>means create an array of <code>11</code> characters, whereas</p>\n\n<pre><code>char *name;\n</code></pre>\n\n<p>means, create a pointer and point with it somewhere later, you can then do this</p>\n\n<pre><code>name = malloc(11);\n</code></pre>\n\n<p>this will point to a block of memory of <code>11</code> chars.</p>\n\n<p>When you call <code>scanf</code> it expects the argument to point to valid memory to write into it.</p>\n\n<p>So if the pointer is not initialized, you don't know where it is pointing to, <code>malloc</code> gives you access to memory and returns a pointer to it, you assign that pointer to <code>name</code> and then <code>name</code> becomes writable, but not yet readable.</p>\n\n<p>The contents it points to, are not yet defined so you need to initialize it's contents too, for wich you can use</p>\n\n<pre><code>scanf(\"%10s\", name);\n</code></pre>\n\n<p>notice the <code>\"%10s\"</code> that way you prevent writing past the allowed memory and it's useful for both, for <code>malloc</code> and for the array.</p>\n\n<p><strong>Note</strong>: in <code>scanf(\"%10s\", name);</code> the number should be the number of characters the array can hold <code>-1</code>, because you need one extra character, the terminating <code>'\\0'</code>.</p>\n\n<p>After any call to <code>malloc</code> there are two responsabilities that you should assume, first you must make sure that there was valid memory to point to, in the opposite case <code>malloc</code> will return a special value, <code>NULL</code>, hence a correct call to <code>malloc</code> would be</p>\n\n<pre><code>name = malloc(11);\nif (name == NULL)\n    handleThisAndDontTryToUse_name_Anywhere();\n</code></pre>\n\n<p>the second thing, is that the system will gain you ownership of the memory the pointer points to until you decide you can release it, for which you need to call <code>free()</code></p>\n\n<pre><code>/* after you are done using the block of memory */\nfree(name);\n</code></pre>\n\n<p>In the case of</p>\n\n<pre><code>char name[11];\n</code></pre>\n\n<p>you will not have to worry about any of this things.</p>\n\n<p>One third thing you can do, is create the array and point to it with <code>char *name;</code> I mean</p>\n\n<pre><code>char array[11];\nchar *name = array;\n</code></pre>\n\n<p>now <code>name</code> is a pointer to the first element of <code>array</code> and from the text of your question, I trust that you understand what this means.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1421198958, "post_id": 27933988, "comment_id": 44266469, "body": "In the first case <code>name</code> is an array, not a pointer of any sort (constant or otherwise)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421201767, "post_id": 27933988, "comment_id": 44267054, "body": "Array names are absolutely identical to constant pointers under the covers and at runtime. During compilation they have different types in the symbol table, but they compile down to exactly the same thing. I suppose that makes a difference to pedantic language-lawyer types, but if you truly understand what C is doing--not just at the compiler level but at the actual running code--the difference is meaningless."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421202287, "post_id": 27933988, "comment_id": 44267178, "body": "The difference is essential at all levels. You&#39;ll probably find that <code>char name[11];</code> reserves (at least) <code>11</code> bytes of stack space, but <code>char *const name = (whatever);</code> reserves <code>4</code> (plus whatever &quot;whatever&quot; reserves); these amounts are different. Also, type distinctions persist at runtime, for example <code>int x; scanf(&quot;%d\\n, &amp;x); char name[x]; printf(&quot;%d\\n&quot;, sizeof name);</code>.  If <code>name</code> had boiled down to a constant pointer at some stage then <code>sizeof name</code> would give you the size of a pointer, but it doesn&#39;t.  The type system is crucial in C, it&#39;s not just an annoying detail."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421203127, "post_id": 27933988, "comment_id": 44267390, "body": "Yes, yes, of course I understand the allocation and other compile-time difference. You are mistaken in many details of your &quot;explanation&quot;. First, the const pointer allocates NO memory, it&#39;s a constant. Secondly, sizeof is a compile-time operator, so of course it&#39;s different. Here&#39;s what I&#39;m saying: if you begin a C file with something like <code>char a[11]; char * const b = a;</code>, any code later in the file--any expression, any function (except compile time stuff like sizeof)--will produce bit-for-bit identical code for a and b."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421203711, "post_id": 27933988, "comment_id": 44267520, "body": "<code>sizeof</code> is not a compile-time operator  (in my code sample in my previous comment, its result depends on a value not known until runtime).   In your latest sentence, <code>&amp;b</code> will behave differently to <code>&amp;a</code> . Are you aware of the conversion rule sometimes described as &quot;decay&quot; , and what &quot;rvalue&quot; means?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421204395, "post_id": 27933988, "comment_id": 44267658, "body": "Again, &quot;rvalue&quot; applies to expressions and variables--compile time things. There&#39;s no such thing as a variable or expression at runtime. And sizeof absolutely cannot make use of any info not known at compile time--that&#39;s why you can use it in constant expressions. Also, I&#39;m talking C here, you might be thinking C++ which is a bit different."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421204644, "post_id": 27933988, "comment_id": 44267720, "body": "You&#39;re right that VLAs like your example throw a monkey wrench in my argument. That&#39;s a newfangled thing I&#39;m not very used to--I learned C in the 80s."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421205418, "post_id": 27933988, "comment_id": 44267853, "body": "It&#39;s only a monkey wrench if you think of arrays as constant pointers :)  I also learned a similar way you did, however if you switch to thinking of arrays as blocks of memory (which is how they are defined in the standard, after all), and you know that using an array&#39;s name in most situations generates a pointer rvalue which points to the array&#39;s first element, then all the strangeness goes away."}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 0, "last_activity_date": 1421195420, "creation_date": 1421195420, "answer_id": 27933988, "question_id": 27933917, "link": "https://stackoverflow.com/questions/27933917/what-is-difference-between-char-name11-and-char-name/27933988#27933988", "title": "What is difference between char name[11]; and char *name;", "body": "<pre><code>char name[11];\n</code></pre>\n\n<p>allocates 11 bytes of writable memory into which you can store inputs. <code>name</code> is treated as a constant pointer to that memory.</p>\n\n<pre><code>char *name;\n</code></pre>\n\n<p>allocates space for a pointer variable called <code>name</code>, which may be changed, but it doesn't point to anything.</p>\n\n<pre><code>char *name = \"Fred\";\n</code></pre>\n\n<p>allocates both the pointer variable and 5 bytes for the string \"Fred\", but in non-writable memory.</p>\n"}, {"tags": [], "owner": {"reputation": 346, "user_id": 2623102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e39edcea696ce3f793b7df56fed754f?s=128&d=identicon&r=PG", "display_name": "RcnRcf", "link": "https://stackoverflow.com/users/2623102/rcnrcf"}, "is_accepted": false, "score": 0, "last_activity_date": 1421196677, "last_edit_date": 1421196677, "creation_date": 1421196057, "answer_id": 27934068, "question_id": 27933917, "link": "https://stackoverflow.com/questions/27933917/what-is-difference-between-char-name11-and-char-name/27934068#27934068", "title": "What is difference between char name[11]; and char *name;", "body": "<blockquote>\n  <p>why it doesn't work if i change \"char name[11]\" --> \"char *name\" ?</p>\n</blockquote>\n\n<p>name is pointer defined on stack and is initialized with a junk address thus it is pointing to a random location and depending on where it is pointing you may or may not get a segmentation fault. Even if you do not get a segmentation fault, the code will still be considered defective.</p>\n\n<p>Edit:</p>\n\n<blockquote>\n  <p>What is difference between pointer to array and just pointer?</p>\n</blockquote>\n\n<p>You probably mean what is the diff between an array and a pointer. If that's the case then, array's name is a constant pointer and a pointer is a non-constant pointer.</p>\n"}], "owner": {"reputation": 75, "user_id": 4438699, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/35ef72dd9e8df1d9714bca674ea6d74d?s=128&d=identicon&r=PG&f=1", "display_name": "Chois", "link": "https://stackoverflow.com/users/4438699/chois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10621, "favorite_count": 1, "accepted_answer_id": 27933951, "answer_count": 3, "score": 1, "last_activity_date": 1421198997, "creation_date": 1421194865, "last_edit_date": 1421198997, "question_id": 27933917, "link": "https://stackoverflow.com/questions/27933917/what-is-difference-between-char-name11-and-char-name", "title": "What is difference between char name[11]; and char *name;", "body": "<p>Belows are simple code to find what the pointer to array is.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ntypedef unsigned short int Ushort;\n\nvoid InputYear(char (*name), Ushort *year);\n\nint main(int argc, const char * argv[]) {\n    Ushort year;\n    char name[11] ;    \n\n    InputYear(name, &amp;year);\n\n    printf(\"MY name is %s\", message);\n    printf(\"%d\", year);\n}\n\nvoid InputYear(char (*name), Ushort *year){\n    printf(\"please enter your name and year\");\n    scanf(\"%s %hd\" ,name, year);\n}\n</code></pre>\n\n<p>But question is, why it doesn't work if i change <code>char name[11]</code> --> <code>char *name</code> ?</p>\n\n<p>The error is \"segmentation fault : 11\".  </p>\n\n<p>I learned that the name of array is also a pointer that indicates the address of first array value. In this respect, I think that <code>char name[11]</code> and <code>char *name</code> are same. </p>\n\n<p>Or is there anything that I didn't know about it?</p>\n\n<p>and Extra Question : </p>\n\n<pre><code>int a = 1;\nint* b = &amp;a;\nprintf(\"%s\", *b);\n</code></pre>\n\n<p>it works. The point is that second argument of printf is the value itself, not address. but,</p>\n\n<pre><code>char hi[11] = \"message\";\nprintf(\"%s\", hi);\n</code></pre>\n\n<p>in this case, second argument of printf is address itself, not value like above. What is it?? why does it happen?</p>\n\n<p>Thanks you so much!</p>\n"}, {"tags": ["c", "function", "pointers", "compiler-errors"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1421194119, "post_id": 27933764, "comment_id": 44265233, "body": "You&#39;ve already told xyz() what kinds of arguments to expect, so when you call the function you just pass them: <code>xyz(x, y)</code>. Of course, I don&#39;t see anywhere <code>x</code> and <code>y</code> are defined, so that&#39;s your next problem."}, {"owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "edited": false, "score": 2, "creation_date": 1421194154, "post_id": 27933764, "comment_id": 44265244, "body": "Kernighan &amp; Ritchie have the solution to your problem. Read their great book and Bob should be your uncle."}, {"owner": {"reputation": 346, "user_id": 2623102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e39edcea696ce3f793b7df56fed754f?s=128&d=identicon&r=PG", "display_name": "RcnRcf", "link": "https://stackoverflow.com/users/2623102/rcnrcf"}, "edited": false, "score": 0, "creation_date": 1421196248, "post_id": 27933764, "comment_id": 44265798, "body": "You might want to learn C properly. You have tried something without understanding everything that&#39;s needed."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1421194109, "creation_date": 1421194109, "answer_id": 27933794, "question_id": 27933764, "link": "https://stackoverflow.com/questions/27933764/c-error-compiling-expected-expression-and-nothing-else-written/27933794#27933794", "title": "C: Error compiling - &quot;expected expression&quot; and nothing else written?", "body": "<p>When you call a function, you need to provide just the arguments, not the type.</p>\n\n<p>instead of </p>\n\n<pre><code>return xyz(char* x, char* y);\n</code></pre>\n\n<p>use</p>\n\n<pre><code>return xyz(i, i);\n</code></pre>\n\n<p>or something along the line.</p>\n"}, {"tags": [], "owner": {"reputation": 3147, "user_id": 62671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FFsFU.png?s=128&g=1", "display_name": "Matt Razza", "link": "https://stackoverflow.com/users/62671/matt-razza"}, "is_accepted": false, "score": 0, "last_activity_date": 1421194310, "creation_date": 1421194310, "answer_id": 27933834, "question_id": 27933764, "link": "https://stackoverflow.com/questions/27933764/c-error-compiling-expected-expression-and-nothing-else-written/27933834#27933834", "title": "C: Error compiling - &quot;expected expression&quot; and nothing else written?", "body": "<p>If you're trying to return a function (as it appears you are from your tags) you need to return a reference to the function.</p>\n\n<p>First, define a function pointer type:<br>\n<code>typedef int (*funcPointer)(char *, char *);</code></p>\n\n<p>Then the rest of your code:</p>\n\n<pre><code>int xyz(char* x, char* y)\n{\n    [CODE HERE]\n}\n\nfuncPointer ijk(char *i)\n{\n    return &amp;xyz; // Return a pointer to the function\n}\n</code></pre>\n\n<p>Then you can do something like:<br>\n<code>ijk(\"b\")(\"a\", \"b\");</code></p>\n\n<p>Not sure exactly what your example is and if this is truly something you want to do. Not everything you learn in a functional world will translate well to C or other languages.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 4254779, "user_type": "registered", "profile_image": "https://graph.facebook.com/1388596870/picture?type=large", "display_name": "Nestor Daniel Flores", "link": "https://stackoverflow.com/users/4254779/nestor-daniel-flores"}, "is_accepted": false, "score": 0, "last_activity_date": 1421194324, "creation_date": 1421194324, "answer_id": 27933838, "question_id": 27933764, "link": "https://stackoverflow.com/questions/27933764/c-error-compiling-expected-expression-and-nothing-else-written/27933838#27933838", "title": "C: Error compiling - &quot;expected expression&quot; and nothing else written?", "body": "<p>You need to pass a value.</p>\n\n<pre><code>char* x = \"Hello\";\nchar* y = \"World\";\n\nreturn xyz(x,y);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4451131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae7ce5335ed5f2c773f81a811fc3cee1?s=128&d=identicon&r=PG&f=1", "display_name": "wenfl weMVL", "link": "https://stackoverflow.com/users/4451131/wenfl-wemvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1421195068, "creation_date": 1421193883, "last_edit_date": 1421195068, "question_id": 27933764, "link": "https://stackoverflow.com/questions/27933764/c-error-compiling-expected-expression-and-nothing-else-written", "title": "C: Error compiling - &quot;expected expression&quot; and nothing else written?", "body": "<p>I am writing the following program in C.</p>\n\n<pre><code>int xyz(char* x, char* y)\n{\n    [CODE HERE]\n}\n\nint ijk(char *i)\n{\n    return xyz(char* x, char* y);\n}\n</code></pre>\n\n<p>When I try to compile, I get this error:</p>\n\n<pre><code>error: expected expression\n    return xyz(char* x, char* y);\n               ^\n1 error generated.\n</code></pre>\n\n<p>Any idea on what the error might be? I have already checked for hidden characters.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "fread"], "comments": [{"owner": {"reputation": 4123, "user_id": 387103, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ce50d234d9b195ac5a8c70987cbf3a31?s=128&d=identicon&r=PG", "display_name": "danfuzz", "link": "https://stackoverflow.com/users/387103/danfuzz"}, "edited": false, "score": 1, "creation_date": 1421190787, "post_id": 27933226, "comment_id": 44264102, "body": "Can you simplify your code and provide an example of input and expected output?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1421190990, "post_id": 27933226, "comment_id": 44264179, "body": "What&#39;s your question?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421191212, "post_id": 27933226, "comment_id": 44264257, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon.  This is primarily a question and answer site, but you have not asked a question.  You have posted some code.  Apparently (from the question title) your concern is with the <code>fread()</code> and <code>fwrite()</code> functions, but you&#39;ve not shown us what you&#39;re getting, what you want to get, the input that you&#39;re using etc.  Please see how to create an MCVE (<a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>)."}, {"owner": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "edited": false, "score": 0, "creation_date": 1421191226, "post_id": 27933226, "comment_id": 44264260, "body": "The code is implementation of fread and fwrite functions. The guy shared the code with us to use them in our projects. Thank you bushra"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "edited": false, "score": 0, "creation_date": 1421191419, "post_id": 27933226, "comment_id": 44264323, "body": "@MustafaChelik: interesting thought, but the implementation seems to be lacking the key functions, suggesting your hypothesis is wrong."}, {"owner": {"reputation": 3, "user_id": 4451274, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005602032293/picture?type=large", "display_name": "Bushra Yousuf", "link": "https://stackoverflow.com/users/4451274/bushra-yousuf"}, "reply_to_user": {"reputation": 1985, "user_id": 3144560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/B4e0Y.jpg?s=128&g=1", "display_name": "Mustafa Chelik", "link": "https://stackoverflow.com/users/3144560/mustafa-chelik"}, "edited": false, "score": 0, "creation_date": 1421192107, "post_id": 27933226, "comment_id": 44264593, "body": "@MustafaChelik but the half of the code is not working, the view() function. So, it won&#39;t be much helpful to you."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4451274, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005602032293/picture?type=large", "display_name": "Bushra Yousuf", "link": "https://stackoverflow.com/users/4451274/bushra-yousuf"}, "edited": false, "score": 0, "creation_date": 1421234684, "post_id": 27937593, "comment_id": 44279269, "body": "Thank you soo much, believe me from last two days I was stuck at this point and it was not showing the entries I searched about 20 websites and I couldn&#39;t identify the error. Finally I made an account yesterday here, I really appreciate it."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 0, "last_activity_date": 1421219749, "creation_date": 1421219749, "answer_id": 27937593, "question_id": 27933226, "link": "https://stackoverflow.com/questions/27933226/fread-and-fwrite-function/27937593#27937593", "title": "Fread() and fwrite () function", "body": "<p>I removed the Windows-specific code and cleaned things up a bit.  The code religiously checks whether each <code>scanf()</code> returned the correct value; lazily, it just exits if it doesn't.  It also checks that the calls to <code>fopen()</code> work.</p>\n\n<p>Some of the <code>scanf()</code> calls were dodgy.  You don't need the <code>&amp;</code> in front of a string name, and you do need <code>%lf</code> to read a <code>double</code> (the phone number \u2014 interesting choice of data type).  I made sure that newlines appear in the output.</p>\n\n<p>The printing is a bit better, though there are problems of a sort with long names.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid menu(void); // for choosing a menu\nvoid addacc(void); // for adding account\nvoid view(void);  // for viewing existing list\n\nstruct date\n{\n    int date, month, year;   // struct for date\n};\n\nstruct customer\n{\n    char name[40], acctype[10];\n    int accno, age;\n    double phone;\n    float amount;\n    struct date dob;  // calling other struct inside struct\n    struct date deposit;\n    struct date withdraw;\n} add;   // struct variable\n\nvoid addacc(void)\n{\n    FILE *fp = fopen(\"cus.txt\", \"a+\");\n    if (fp == NULL)\n        exit(1);\n    printf(\"ADD RECORD\\n\");\n    printf(\"Enter today's date(date/month/year) \\n\");\n    if (scanf(\"%d/%d/%d\", &amp;add.deposit.date, &amp;add.deposit.month, &amp;add.deposit.year) != 3)\n        exit(1);\n    printf(\"Enter account number\\n\");\n    if (scanf(\"%d\", &amp;add.accno) != 1)\n        exit(1);\n    printf(\"Enter customer's name\\n\");\n    if (scanf(\"%s\", add.name) != 1)\n        exit(1);\n    printf(\"Enter customer's age\\n\");\n    if (scanf(\"%d\", &amp;add.age) != 1)\n        exit(1);\n    printf(\"Enter customer's phone num\\n\");\n    if (scanf(\"%lf\", &amp;add.phone) != 1)\n        exit(1);\n    printf(\"Enter the account type(in words): \\n\\t 1:Current\\n\\t 2:Saving\\n\\t 3:Fixed\\n\");\n    if (scanf(\"%s\", add.acctype) != 1)\n        exit(1);\n    printf(\"Almost done! Just enter the amount you want to deposit: \");\n    if (scanf(\"%f\", &amp;add.amount) != 1)\n        exit(1);\n\n    fwrite(&amp;add, sizeof(add), 1, fp);\n    fclose(fp);\n}\n\nvoid view(void)\n{\n    FILE *view;\n    int test = 0;\n    printf(\"Customer's List\\n\");\n    printf(\"\\tCustomer's Name:\");\n    printf(\"\\tAccount Number:\");\n    printf(\"\\tCustomer's Phone No:\\n\");\n    view = fopen(\"cus.txt\", \"r\");\n    if (view == NULL)\n        exit(1);\n\n    while (fread(&amp;add, sizeof(add), 1, view) != 0)\n    {\n        printf(\"\\t%16s\", add.name);\n        printf(\"\\t%15d\", add.accno);\n        printf(\"\\t%20.0f\", add.phone);\n        putchar('\\n');\n        test++;\n    }\n    fclose(view);\n    if (test == 0)\n    {\n        printf(\"NO RECORDS FOUND!\");\n    }\n}\n\nvoid menu(void)\n{\n    int n;\n    printf(\"Enter your choice 1, 2\\n\");\n    if (scanf(\"%d\", &amp;n) != 1)\n        exit(1);\n\n    switch (n)\n    {\n    case 1:\n        addacc();\n        break;\n    case 2:\n        view();\n        break;\n    }\n}\n\nint main(void)\n{\n    menu();\n    return 0;\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>Enter your choice 1, 2\n2\nCustomer's List\n        Customer's Name:        Account Number: Customer's Phone No:\n            BushraYousuf               12345678         112345987621\n        PresidentBarackObama          987654321           2021199920\n</code></pre>\n\n<p>He's got more money stashed away than you have.</p>\n"}], "owner": {"reputation": 3, "user_id": 4451274, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005602032293/picture?type=large", "display_name": "Bushra Yousuf", "link": "https://stackoverflow.com/users/4451274/bushra-yousuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "accepted_answer_id": 27937593, "answer_count": 1, "score": -4, "last_activity_date": 1421219749, "creation_date": 1421190711, "last_edit_date": 1421191539, "question_id": 27933226, "link": "https://stackoverflow.com/questions/27933226/fread-and-fwrite-function", "title": "Fread() and fwrite () function", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nvoid delay (int milliseconds); // for delay function \nvoid menu (); //for choosing a menu\nvoid addacc(); // for adding account\nvoid view ();  // for viewing existing list\nstruct date\n{\n   int date, month, year;    //struct for date\n};\n\nstruct customer\n{\n   char name[40],acctype[10];\n   int accno, age;\n   double phone;\n   float amount;\n   struct date dob;   //calling other struct inside struct\n   struct date deposit;\n   struct date withdraw;\n} add;   //struct variable\n\nvoid addacc()\n{\n\n\n   FILE *fp;\n   fp=fopen (\"cus.txt\", \"a+\");\n   textcolor (1);\n   printf (\"\\n\\t\\t\\t\\t\");\n   cprintf (\"ADD RECORD\");\n   printf(\"\\n\\n\\n\");\n   printf (\"Enter today's date(date/month/year) \\n\");\n   scanf (\"%d/%d/%d\", &amp;add.deposit.date, &amp;add.deposit.month,&amp;add.deposit.year);\n   printf (\"Enter account number\\n\");\n   scanf (\"%d\", &amp;add.accno);\n   printf (\"Enter customer's name\\n\");\n   scanf (\"%s\", add.name);\n   printf (\"Enter customer's age\\n\");\n   scanf (\"%d\", &amp;add.age);   printf (\"Enter customer's phone num\\n\");\n   scanf (\"%f\",&amp;add.phone);\n   printf (\"Enter the account type(in words): \\n\\t 1:Current\\n\\t 2:Saving\\n\\t 3:Fixed\\n\");\n   scanf (\"%s\",&amp;add.acctype);\n   textcolor (2);\n   cprintf (\"Almost done! Just enter the amount you want to deposit: \");\n   scanf (\"%f\",&amp;add.amount);\n\n   fwrite (&amp;add,sizeof(add),1,fp);\n   fclose (fp);\n\n}\n\nvoid view ()\n{\n   FILE *view;\n   int test=0;\n   system (\"cls\");\n   textcolor (3);\n   printf (\"\\n\\t\\t\\t\\t\");\n   cprintf (\"Customer's List\");\n   printf (\"\\n\\n\\n\");\n   textcolor(4);\n   cprintf (\"\\tCustomer's Name:\");\n   cprintf (\"\\tAccount Number:\");\n   cprintf (\"\\tCustomer's Phone No:\");\n   view=fopen(\"cus.txt\", \"r\");\n\n   while(fread(&amp;add, sizeof(add),1,view)!=0)\n   {\n      printf (\"%s\", add.name);\n      printf (\"%d\", add.accno);\n      printf (\"%f\", add.phone);\n      test++;\n\n   }\n   fclose (view);\n   if (test==0)\n   {\n      printf (\"NO RECORDS FOUND!\");\n   }\n}\n\nvoid menu ()\n{ \n   int n;\n   printf (\"Enter your choice 1, 2\\n\");\n   scanf (\"%d\", &amp;n);\n\n   switch (n)\n\n   {\n      case 1:\n         addacc();\n         break;\n      case 2:\n         view ();\n         break;\n   }\n} \n\nvoid main (void)\n{ \n   system (\"cls\");\n\n   menu ();\n}\n</code></pre>\n\n<p>Output: when you choose 1 as option</p>\n\n<p>ADD RECORD\nEnter today's date\nEnter customer's name\netc\noutput: when you choose option 2 for viewing the list of existing customers\nscreen blank</p>\n\n<p>So I would like to know is my syntax of fread wrong or of fwrite? why isn't it showing on the screen the entries which I just entered? I am using fread function for reading structures into the file and then I want to print the entries on the screen. </p>\n"}, {"tags": ["c", "memory-alignment", "c11"], "comments": [{"owner": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "edited": false, "score": 0, "creation_date": 1421190772, "post_id": 27933178, "comment_id": 44264096, "body": "If portability is important, you can guarantee you get your alignment by allocating n+alignment-1 bytes and self adjusting your pointer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1421191090, "post_id": 27933178, "comment_id": 44264217, "body": "Look into <code>max_align_t</code> : &quot;which is an object type whose alignment is as great as is supported by the implementation in all contexts;&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1421191283, "post_id": 27933178, "comment_id": 44264284, "body": "<a href=\"http://codereview.stackexchange.com/questions/73712/inferring-memory-alignment/75211\">inferring-memory-alignment</a> may be useful."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1421191711, "post_id": 27933178, "comment_id": 44264440, "body": "I&#39;ll leave it to others to write a detailed answer.  GTG"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1421191762, "post_id": 27933178, "comment_id": 44264462, "body": "<a href=\"http://coliru.stacked-crooked.com/a/c2172c55743636d8\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/c2172c55743636d8</a> Overallocate and align yourself?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1421192151, "post_id": 27933178, "comment_id": 44264610, "body": "@BuellaG&#225;bor: <code>size+alignment</code> will <i>always</i> have at least one byte extra.  (check with allocating 1 char, allocates 2 bytes). If the original allocation was already aligned, then there&#39;s a second potential aligned location in that allocation touching the end. I always return the second, which means there&#39;s always at least one extra in the beginning."}, {"owner": {"reputation": 1632, "user_id": 875023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0bf3d8b5bd7da63e35beb9006b7f8c7c?s=128&d=identicon&r=PG", "display_name": "G&#225;bor Buella", "link": "https://stackoverflow.com/users/875023/g%c3%a1bor-buella"}, "edited": false, "score": 0, "creation_date": 1421192287, "post_id": 27933178, "comment_id": 44264663, "body": "Sorry, I just read it already stores the uchar, not the char*, so yes. But <code>aligned_alloc</code> still looks better."}], "answers": [{"comments": [{"owner": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "edited": false, "score": 1, "creation_date": 1421190839, "post_id": 27933232, "comment_id": 44264120, "body": "<code>size_t</code> is required to hold the size of the largest object you can create. it is not required to be equal to a pointer in size. For that, use <code>intptr_t</code>."}, {"owner": {"reputation": 4123, "user_id": 387103, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ce50d234d9b195ac5a8c70987cbf3a31?s=128&d=identicon&r=PG", "display_name": "danfuzz", "link": "https://stackoverflow.com/users/387103/danfuzz"}, "edited": false, "score": 0, "creation_date": 1421190900, "post_id": 27933232, "comment_id": 44264150, "body": "I note that the post is tagged C and C11 but not C++, so <code>reinterpret_cast</code> might be out-of-scope for the question."}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "reply_to_user": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "edited": false, "score": 0, "creation_date": 1421190911, "post_id": 27933232, "comment_id": 44264152, "body": "@CoryNelson Maybe I don&#39;t know, anyways I changed <code>size_t</code> to <code>intptr_t</code>"}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "reply_to_user": {"reputation": 4123, "user_id": 387103, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ce50d234d9b195ac5a8c70987cbf3a31?s=128&d=identicon&r=PG", "display_name": "danfuzz", "link": "https://stackoverflow.com/users/387103/danfuzz"}, "edited": false, "score": 1, "creation_date": 1421191001, "post_id": 27933232, "comment_id": 44264181, "body": "@danfuzz, hah okay I changed them to C style casts."}, {"owner": {"reputation": 1632, "user_id": 875023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0bf3d8b5bd7da63e35beb9006b7f8c7c?s=128&d=identicon&r=PG", "display_name": "G&#225;bor Buella", "link": "https://stackoverflow.com/users/875023/g%c3%a1bor-buella"}, "edited": false, "score": 0, "creation_date": 1421191017, "post_id": 27933232, "comment_id": 44264190, "body": "<code>C11</code>, the whole point is to use <code>aligned_alloc</code> from &lt;stdlib.h&gt; , so there would be no need hack up a custom allocator. I can already do that. Also, that <code>auto</code> ain&#39;t going to work in C either. But thanks anyways."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1421191890, "post_id": 27933232, "comment_id": 44264514, "body": "If you&#39;re going to provide code, it might as well make it easy for callers: <a href=\"http://coliru.stacked-crooked.com/a/54a0d7c5e93d9d63\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/54a0d7c5e93d9d63</a>"}], "tags": [], "owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "is_accepted": false, "score": 1, "last_activity_date": 1421190738, "creation_date": 1421190738, "answer_id": 27933232, "question_id": 27933178, "link": "https://stackoverflow.com/questions/27933178/is-there-a-portable-way-to-find-out-what-alignments-are-supported-by-a-c11-imple/27933232#27933232", "title": "Is there a portable way to find out what alignments are supported by a C11 implementation?", "body": "<p>Or you can just always align. If you're scared of UB, you can write your aligned allocator, the only real issue is that you need to free the unaligned pointer:</p>\n\n<pre><code>auto align 16;\nauto aqbuf = malloc(alignedSize);\nauto aligned = (unsigned char*)(((intptr_t)(aqbuf) + (align-1)) &amp; ~(align-1));//aqbuf != aligned sometimes...\nfree(aqbuf);//forget about aligned\n</code></pre>\n"}], "owner": {"reputation": 1632, "user_id": 875023, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0bf3d8b5bd7da63e35beb9006b7f8c7c?s=128&d=identicon&r=PG", "display_name": "G&#225;bor Buella", "link": "https://stackoverflow.com/users/875023/g%c3%a1bor-buella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421191128, "creation_date": 1421190446, "last_edit_date": 1421191128, "question_id": 27933178, "link": "https://stackoverflow.com/questions/27933178/is-there-a-portable-way-to-find-out-what-alignments-are-supported-by-a-c11-imple", "title": "Is there a portable way to find out what alignments are supported by a C11 implementation?", "body": "<p>The context is: One would like to get a fairly well aligned memory, e.g. for allowing the compiler to use AVX, AVX2 . At the same time, one attempts to keep the code as portable as reasonably possible. Allocating using <code>aligned_alloc</code> sound nice, but <code>C11</code> lists this as undefined behaviour:</p>\n\n<p>\"The alignment requested of the aligned_alloc function is not valid or not supported by the implementation, or the size requested is not an integral multiple of the alignment\"</p>\n\n<p>Thus, using for example <code>aligned_alloc(32, 128)</code> can have great results often, but the other day, it can be UB in some other compiler.</p>\n\n<p>For that case, less strict alignment would suffice, resulting in slower, but correct code. Thus some ideal approach would request strictest alignment available up to 128 in this case. Is there any way to achieve something like this? </p>\n\n<p>-- The question is mainly about using <code>aligned_alloc</code>, instead up creating one's own allocator.</p>\n\n<p>==EDIT==</p>\n\n<p>Already answered in comment, it is <code>_Alignof (max_align_t)</code></p>\n\n<p>thx chux , I overlooked that one!</p>\n"}]