[{"tags": ["c", "security"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1446683353, "post_id": 33534321, "comment_id": 54850643, "body": "<a href=\"https://en.wikipedia.org/wiki/XSL_attack\" rel=\"nofollow noreferrer\">This</a>? That doesn&#39;t look related to the code in the question."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1446683650, "post_id": 33534321, "comment_id": 54850727, "body": "The definition of a linearization attack would help immensely."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5527016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4aff67e9ed208e2bf1ea2c49c8d27c3?s=128&d=identicon&r=PG&f=1", "display_name": "prodigy89", "link": "https://stackoverflow.com/users/5527016/prodigy89"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446689412, "post_id": 33535377, "comment_id": 54852284, "body": "That&#39;s how the book &quot;Information security principles and practice&quot; by Mark stamp referred to it as. I&#39;ll read up on timing attacks though to see how they compare."}], "tags": [], "owner": {"reputation": 11, "user_id": 5527016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4aff67e9ed208e2bf1ea2c49c8d27c3?s=128&d=identicon&r=PG&f=1", "display_name": "prodigy89", "link": "https://stackoverflow.com/users/5527016/prodigy89"}, "is_accepted": false, "score": 1, "last_activity_date": 1446688550, "creation_date": 1446688550, "answer_id": 33535377, "question_id": 33534321, "link": "https://stackoverflow.com/questions/33534321/linearization-attacks/33535377#33535377", "title": "Linearization attacks", "body": "<p>A linear attack is an attack that takes advantage certain coding flaws. If the above code ended when a incorrect character was entered an attacker could use that to determine how many correct characters were entered. I worked through it with a tutor and now I see that since the flag is set every time it is incorrect if 5 of 7 are incorrect and the flag it set 5 times. That attempt will run faster than if it was set all 7 times. So if an attacker tries every possible solution for the first character and inserts a standard character for the remaining portion of the string. The attempt with the correct first character will run slightly faster. Apply the same logic to each character will eventually obtain the serial number.   </p>\n"}], "owner": {"reputation": 11, "user_id": 5527016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4aff67e9ed208e2bf1ea2c49c8d27c3?s=128&d=identicon&r=PG&f=1", "display_name": "prodigy89", "link": "https://stackoverflow.com/users/5527016/prodigy89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1446688550, "creation_date": 1446681171, "last_edit_date": 1446681336, "question_id": 33534321, "link": "https://stackoverflow.com/questions/33534321/linearization-attacks", "title": "Linearization attacks", "body": "<p>I understand what a linearization attack is and how it is performed. I just wanted some clarity on how the code below allows for it since it should terminate with the same iteration count if the string entered is equal or greater than 8?</p>\n\n<pre><code>int main(int argc, const char *argv[])\n{\n\nint i;\nboolean flag = true;\nchar serial [9] = \u201cS123N456\\n\u201d;\nif(strlen(argv[1]) &lt; 8)\n{\nprintf(\u201c\\nError try again.\\n\\n\u201d);\nexit(0);\n\n}\n\nfor(i = 0; i &lt; 8; ++i)\n{\n\n    if(argv[1][i] != serial[i])flag = false;\n\n}\n\nif(flag)\n{\n\n    printf(\u201c\\bSerial number is correct!\\n\\n\u201d);\n\n}\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 3, "creation_date": 1446680360, "post_id": 33534154, "comment_id": 54849760, "body": "This cannot be answered in general. It depends on where you need the declarations. As a general rule: put into the header files what has to be there and leave in the source file what can be left there."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1446680499, "post_id": 33534154, "comment_id": 54849814, "body": "If you want all files to be able to directly access the fields of the struct then the first way is the correct way to do it. The second way will not work for that case as the files that include the header will not know about the struct fields (unless you define the struct in every source file). The second method is still valid for a different use case - opaque definitions."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3672051"}, "edited": false, "score": 0, "creation_date": 1446681027, "post_id": 33534204, "comment_id": 54849996, "body": "So is this analogous to private and public for OOP languages? stuff in the header is public and stuff in the source is private? I have heard that classes in c++ are just structures with functions... on a very basic level, is this how private and public fields are implemented?"}, {"owner": {"reputation": 9633, "user_id": 429431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ee7eb6c9044a977de255270ea1125c?s=128&d=identicon&r=PG", "display_name": "ralight", "link": "https://stackoverflow.com/users/429431/ralight"}, "edited": false, "score": 0, "creation_date": 1446682003, "post_id": 33534204, "comment_id": 54850277, "body": "Yes, essentially with an opaque struct you have only private members and a struct with a full definition you have public members."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446684214, "post_id": 33534204, "comment_id": 54850911, "body": "If you use inline functions, this is not useable. Or if you implement an OOP approach."}], "tags": [], "owner": {"reputation": 9633, "user_id": 429431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ee7eb6c9044a977de255270ea1125c?s=128&d=identicon&r=PG", "display_name": "ralight", "link": "https://stackoverflow.com/users/429431/ralight"}, "is_accepted": true, "score": 1, "last_activity_date": 1446680509, "creation_date": 1446680509, "answer_id": 33534204, "question_id": 33534154, "link": "https://stackoverflow.com/questions/33534154/structs-what-should-go-a-header-and-what-should-go-in-the-source/33534204#33534204", "title": "Structs: what should go a header and what should go in the source?", "body": "<p>Defining the contents of your struct in the .c file and just declaring the struct to exist in the header means that you need to provide a function to create the struct, e.g.</p>\n\n<pre><code>rc = my_struct_create(&amp;s);\n</code></pre>\n\n<p>It has the advantage that you can change the contents of your struct without having to recompile dependent code - this is because the struct is opaque, the only way to create it is with your function and the only way to access any members of the struct will be through functions you define.</p>\n\n<p>I'd personally recommend that approach for library code. Otherwise it really depends on what you're trying to achieve.</p>\n"}, {"tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": false, "score": 0, "last_activity_date": 1446680789, "creation_date": 1446680789, "answer_id": 33534247, "question_id": 33534154, "link": "https://stackoverflow.com/questions/33534154/structs-what-should-go-a-header-and-what-should-go-in-the-source/33534247#33534247", "title": "Structs: what should go a header and what should go in the source?", "body": "<p>In the .h file, you would put the structure definition, and the function prototypes:</p>\n\n<p><strong>point.h</strong></p>\n\n<pre><code>typedef struct {\n    int x, y;\n} point;\n\npoint *initpt(int, int);\n</code></pre>\n\n<p>In the .c file, you would implement the functions:</p>\n\n<p><strong>point.c</strong></p>\n\n<pre><code>point *initpt(int x, int y)\n{\n    point *p;\n\n    p-&gt;x = x;\n    p-&gt;y = y;\n\n    return p;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 0, "last_activity_date": 1446681026, "creation_date": 1446681026, "answer_id": 33534292, "question_id": 33534154, "link": "https://stackoverflow.com/questions/33534154/structs-what-should-go-a-header-and-what-should-go-in-the-source/33534292#33534292", "title": "Structs: what should go a header and what should go in the source?", "body": "<p>It depends if the structure members are part of the public API or not. If the users of the API are not supposed to access the structure members, leave the structure definition to the .c file only. If they are supposed to know the implementation of the structure (for example because you want to allow them to access the members of the structure) put the structure definition in the .h. By principle be more restrictive first, and then if you have too, you can still change it later. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3672051"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 33534204, "answer_count": 3, "score": 0, "last_activity_date": 1446681026, "creation_date": 1446680199, "question_id": 33534154, "link": "https://stackoverflow.com/questions/33534154/structs-what-should-go-a-header-and-what-should-go-in-the-source", "title": "Structs: what should go a header and what should go in the source?", "body": "<p>If I have a source file <code>mystruct.c</code> and a corresponding header file, what is the proper way to define it in each file?</p>\n\n<p>assume I have a structure:</p>\n\n<pre><code>typedef struct my_struct {\n    int a;\n} MyStruct;\n</code></pre>\n\n<p>should it be placed like this in the header? or should it look more like this:</p>\n\n<p>source file:</p>\n\n<pre><code>struct my_struct {\n    int a;\n};\n</code></pre>\n\n<p>header file:</p>\n\n<pre><code>typedef struct my_struct MyStruct;\n</code></pre>\n\n<p>I have the same question about enums and unions.</p>\n\n<p>Im basically looking for the standard way of defining these things so that they can be used in many other files without having to worry about redefinition errors.</p>\n"}, {"tags": ["c++", "c", "linux", "pipe"], "comments": [{"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 6, "creation_date": 1446679526, "post_id": 33534015, "comment_id": 54849469, "body": "Why not use stderr? But I would use files for output and introduce parameters to enable them"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1446679884, "post_id": 33534015, "comment_id": 54849587, "body": "<code>stderr</code> or a log file are the two common solutions."}, {"owner": {"reputation": 533, "user_id": 670163, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09359daf453c03ba6f007964a09e95b0?s=128&d=identicon&r=PG", "display_name": "RJinman", "link": "https://stackoverflow.com/users/670163/rjinman"}, "reply_to_user": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 2, "creation_date": 1446680083, "post_id": 33534015, "comment_id": 54849669, "body": "@Marged Yes, come to think of it, that&#39;s the norm isn&#39;t it? So on the server it would output the binary data to stdout, but when invoked on the terminal you&#39;d say --output-file=output.txt or something and get debug info to stdout. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2194, "user_id": 2142505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f16433508978bc7ab06ee6fd8f124b?s=128&d=identicon&r=PG", "display_name": "davejagoda", "link": "https://stackoverflow.com/users/2142505/davejagoda"}, "is_accepted": false, "score": 0, "last_activity_date": 1446681863, "creation_date": 1446681863, "answer_id": 33534433, "question_id": 33534015, "link": "https://stackoverflow.com/questions/33534015/when-stdout-is-being-used-to-output-binary-data-how-can-i-also-output-debug-ver/33534433#33534433", "title": "When stdout is being used to output binary data, how can I also output debug/verbose info to the terminal?", "body": "<p>Use stderr:</p>\n\n<pre><code>./program --some-option --verbose --file=\"./myfile.txt\" &gt; ./output.txt 2&gt; ./debug.out\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "is_accepted": true, "score": 2, "last_activity_date": 1446682431, "creation_date": 1446682431, "answer_id": 33534515, "question_id": 33534015, "link": "https://stackoverflow.com/questions/33534015/when-stdout-is-being-used-to-output-binary-data-how-can-i-also-output-debug-ver/33534515#33534515", "title": "When stdout is being used to output binary data, how can I also output debug/verbose info to the terminal?", "body": "<p>It is common practice to use stderr and stdout to separate different kinds of output.</p>\n\n<p>But preferably you should use parameters to allow the user specify where and if to write the output of a certain category.\nYou could use something like <code>--enable-verbose-output</code> or <code>--processing-log=foo.log</code></p>\n\n<p>You might also consider handling this within the log file you perhaps create already. By setting a certain verbosity in the logging framework you could write the desired output into your log as needed.</p>\n"}], "owner": {"reputation": 533, "user_id": 670163, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09359daf453c03ba6f007964a09e95b0?s=128&d=identicon&r=PG", "display_name": "RJinman", "link": "https://stackoverflow.com/users/670163/rjinman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 33534515, "answer_count": 2, "score": 2, "last_activity_date": 1446682431, "creation_date": 1446679415, "question_id": 33534015, "link": "https://stackoverflow.com/questions/33534015/when-stdout-is-being-used-to-output-binary-data-how-can-i-also-output-debug-ver", "title": "When stdout is being used to output binary data, how can I also output debug/verbose info to the terminal?", "body": "<p>I'm writing an application that will open a file and output some processed version. It will be a graphical desktop application, but must also be suitable for running on a web server. It therefore needs to provide a suitable interface for a web app's back-end code (which will likely be PHP).</p>\n\n<p>I decided the most versatile kind of interface was a CLI, where the program is invoked once per file. The generated data is piped out via stdout. This way, no temporary files have to be created; it all happens in memory.</p>\n\n<p>I'd like to be able to invoke the program manually from the terminal and see a verbose debug output. In general, when stdout is being used for outputting a data stream, what's the conventional way of outputting other information? Should I use stderr or is there another way? I'll like to be able to invoke the program like so and see some debug output.</p>\n\n<p>./program --some-option --verbose --file=\"./myfile.txt\" > ./output.txt</p>\n\n<p>Can I use file descriptor 3 (or some other number) for the binary data and stdout for the verbose info and do this?</p>\n\n<p>./program --some-option --verbose --file=\"./myfile.txt\" 3> ./output.txt</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1446679425, "post_id": 33533990, "comment_id": 54849437, "body": "Your loop should be <code>&lt; 3</code>."}, {"owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1446680197, "post_id": 33533990, "comment_id": 54849707, "body": "@user3121023 ops that is a silly mistake. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 10661, "user_id": 135351, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8281b1bd2eaad90adfda7f9aefac1d24?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/135351/dave"}, "is_accepted": true, "score": 0, "last_activity_date": 1446679659, "last_edit_date": 1446679659, "creation_date": 1446679406, "answer_id": 33534014, "question_id": 33533990, "link": "https://stackoverflow.com/questions/33533990/arrays-with-for-loops-give-segmentation-error/33534014#33534014", "title": "Arrays with for loops give segmentation error", "body": "<p>There are two issues with your code:</p>\n\n<p>The first (as others have noted) is that you need to <code>scanf</code> into a location thus:</p>\n\n<pre><code>scanf(\"%d\", &amp;num[1]);\n</code></pre>\n\n<p>Not doing this is causing a segmentation fault.</p>\n\n<p>You also need to get your array size and loop limit to match.</p>\n\n<p>You have defined your array as:</p>\n\n<pre><code>int num[3];\n</code></pre>\n\n<p>which has indexes 0, 1, 2.</p>\n\n<p>However your loop</p>\n\n<pre><code>for (i=0; i&lt;4; i++)\n</code></pre>\n\n<p>iterates from 0..3.</p>\n\n<p>Once you fix your first issue, you will reference <code>num[3]</code> which is invalid and will cause another error.</p>\n"}], "owner": {"reputation": 331, "user_id": 4231334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-ydgABLKCMVw/AAAAAAAAAAI/AAAAAAAAAFk/nqsO8Sy1MLU/photo.jpg?sz=128", "display_name": "Hassen Fatima", "link": "https://stackoverflow.com/users/4231334/hassen-fatima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 33534014, "answer_count": 1, "score": 0, "last_activity_date": 1446679659, "creation_date": 1446679309, "question_id": 33533990, "link": "https://stackoverflow.com/questions/33533990/arrays-with-for-loops-give-segmentation-error", "title": "Arrays with for loops give segmentation error", "body": "<p>I am creating a program which store three different marks as arrays. When I run the program I get the following error:</p>\n\n<pre><code>Enter marks: 95\nEnter marks: 64\nSegmentation fault\n</code></pre>\n\n<p>Here is the program I have written:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n\n        int num[3];\n        int i;\n        float total;\n\n        for (i=0;i&lt;4;i++) {\n\n                printf(\"Enter marks: \");\n                scanf(\"%d\", num[i]);\n        }\n\n        total = num[0] + num[1] + num[2] / 300 * 100;\n\n        printf(\"Average: %.2f\", total);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "c99", "language-design", "c11"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1446679594, "post_id": 33533809, "comment_id": 54849490, "body": "take a look at this answer <a href=\"http://stackoverflow.com/questions/252552/why-do-we-need-c-unions\" title=\"why do we need c unions\">stackoverflow.com/questions/252552/why-do-we-need-c-unions</a> &quot;reading value from a union member to which value was not written to, is undefined behaviour by standards&quot;"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1446680105, "post_id": 33533809, "comment_id": 54849672, "body": "@terencehill  it is specified behavior for members of the same size: <a href=\"http://stackoverflow.com/questions/11639947/is-type-punning-through-a-union-unspecified-in-c99-and-has-it-become-specified\" title=\"is type punning through a union unspecified in c99 and has it become specified\">stackoverflow.com/questions/11639947/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1446680183, "post_id": 33533809, "comment_id": 54849702, "body": "&quot;This should allow for statically checking whether the uninitialized member of the union is being accessed.&quot; Only sufficiently smart compilers can do that, which are rarer than unicorns. The verification is commonly done at runtime with a technique called &quot;tagged unions&quot; (where the union is preceded by information that unambiguously expresses which union fields were used)."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1446735441, "post_id": 33533809, "comment_id": 54875171, "body": "@ouah thanks i didn&#39;t know"}], "answers": [{"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1446708841, "post_id": 33534044, "comment_id": 54858491, "body": "+1, just an additional remark, the value that is written for one type, could be a trap representation of the other type."}, {"owner": {"reputation": 3526, "user_id": 717572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/97665d6b7e7dfd76f16e694f971cd83a?s=128&d=identicon&r=PG&f=1", "display_name": "user717572", "link": "https://stackoverflow.com/users/717572/user717572"}, "edited": false, "score": 0, "creation_date": 1446747558, "post_id": 33534044, "comment_id": 54883328, "body": "Assuming the <code>union</code> members are of the same size, but the one is accessed that was not last written to, wouldn&#39;t this still be undefined behaviour?"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 3526, "user_id": 717572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/97665d6b7e7dfd76f16e694f971cd83a?s=128&d=identicon&r=PG&f=1", "display_name": "user717572", "link": "https://stackoverflow.com/users/717572/user717572"}, "edited": false, "score": 0, "creation_date": 1446747810, "post_id": 33534044, "comment_id": 54883476, "body": "@user717572 I explicitly say in my answer it is not UB: <i>this is a specified behavior and no diagnostic is required</i>"}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1446679633, "creation_date": 1446679633, "answer_id": 33534044, "question_id": 33533809, "link": "https://stackoverflow.com/questions/33533809/typechecking-in-const-anonymous-union/33534044#33534044", "title": "Typechecking in const anonymous union", "body": "<blockquote>\n  <p>I'd hope to have the last two assignments to give an error (or at least a warning), but it gives none (using gcc 4.9.2). Is C designed to not check for this, or is it actually a shortcoming of the language/compiler? </p>\n</blockquote>\n\n<p>This is a correct behavior of the compiler.</p>\n\n<pre><code>float invalidInt = floatContainer.a;\nfloat invalidFloat = intContainer.b;\n</code></pre>\n\n<p>In the first declaration you are initializing a <code>float</code> object with an <code>int</code> value and in the second you are initializing a <code>float</code> object with a <code>float</code> value. In C you can assign (or initialize) any arithmetic types to any arithmetic types without any cast required. So no diagnostic required.</p>\n\n<p>In your specific case you are also reading <code>union</code> members that are not the same members as the <code>union</code> member last used to store its value. Assuming the <code>union</code> members are of the same size (e.g., <code>float</code> and <code>int</code> here), this is a specified behavior and no diagnostic is required. If the size of <code>union</code> members are different, the behavior is unspecified (but still, no diagnostic required).</p>\n"}], "owner": {"reputation": 3526, "user_id": 717572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/97665d6b7e7dfd76f16e694f971cd83a?s=128&d=identicon&r=PG&f=1", "display_name": "user717572", "link": "https://stackoverflow.com/users/717572/user717572"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1446747730, "creation_date": 1446678533, "last_edit_date": 1446747730, "question_id": 33533809, "link": "https://stackoverflow.com/questions/33533809/typechecking-in-const-anonymous-union", "title": "Typechecking in const anonymous union", "body": "<p><em>First off, typechecking is not exactly the correct term I'm looking for, so I'll explain:</em>\nSay I want to use an anonymous union, I make the union declaration in the struct <code>const</code>, so after initialization the values will not change. This should allow for statically checking whether the uninitialized member of the union is being accessed. In the below example the instances are initialized for either <code>a</code> (int) or <code>b</code> (float). After this initialization I would like to not be able to access the other member:</p>\n\n<pre><code>struct Test{\n    const union{\n        const int a;\n        const float b;\n    };\n};\n\nint main(){\n    struct Test intContainer = { .a=5 };\n    struct Test floatContainer = { .b=3.0 };\n\n    int validInt = intContainer.a;\n    int validFloat = floatContainer.b;\n\n    // For these, it could be statically determined that these values are not in use (therefore invalid access)\n    int invalidInt = floatContainer.a;\n    float invalidFloat =  intContainer.b;\n\n    return 0;\n}\n</code></pre>\n\n<p>I'd hope to have the last two assignments to give an error (or at least a warning), but it gives none (using gcc 4.9.2). Is C designed to not check for this, or is it actually a shortcoming of the language/compiler? Or is it just plain stupid to want to use such a pattern?</p>\n\n<p>In my eyes it looks like it has a lot of potential if this was a feature, so can someone explain to me why I can't use this as a way to differentiate between two \"sub-types\" of a same struct (one for each union value). (Potentially any suggestions how I can still do something like this?)</p>\n\n<hr>\n\n<p>EDIT:\nSo apparently it is not in the language standard, and also compilers don't check it. Still I personally think it would be a good feature to have, since it's just eliminating manually checking for the <code>union</code>'s contents using tagged unions. So I wonder, does anyone have an idea why it is not featured in the language (or it's compilers)?</p>\n"}, {"tags": ["c", "algorithm", "process", "preemptive"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446675852, "post_id": 33533212, "comment_id": 54848063, "body": "Where did you get these definitions? They look - incomplete - at best."}, {"owner": {"reputation": 661, "user_id": 4239526, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b5a5753be7ef22a631d0732df7aa9893?s=128&d=identicon&r=PG&f=1", "display_name": "RandomMath", "link": "https://stackoverflow.com/users/4239526/randommath"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446675901, "post_id": 33533212, "comment_id": 54848077, "body": "I found this on an online example - Just looking to see if my answer for the above code is correct?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446675958, "post_id": 33533212, "comment_id": 54848106, "body": "&quot;somewhere&quot; is really a very good reference fo an important definition. You should continue to use such references (disclaimer: comment may include sarcasm). And an algorithm is in general neither. That is a matter of implementation. Please do more research with reliable references. You seem to confuse some phrases and concepts."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446675981, "post_id": 33533212, "comment_id": 54848119, "body": "And: <b>Don&#39;t post images unless required for the question!</b>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446678737, "post_id": 33533212, "comment_id": 54849230, "body": "Off topic: Peterson&#39;s algorithm was developed in 1981 when processors were still quite primitive, i.e. simple. You should not attempt to use Peterson&#39;s algorithm on modern processors. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee418650(v=vs.85).aspx\" rel=\"nofollow noreferrer\">lockless multithreading</a>."}, {"owner": {"reputation": 362, "user_id": 1782798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5902363adb9f38595f20e29d8184756f?s=128&d=identicon&r=PG", "display_name": "Jamie", "link": "https://stackoverflow.com/users/1782798/jamie"}, "edited": false, "score": 0, "creation_date": 1478100823, "post_id": 33533212, "comment_id": 68019607, "body": "By any chance is this a coursework question you had last year? Because if so, same! Just a year out."}], "answers": [{"tags": [], "owner": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "is_accepted": false, "score": 1, "last_activity_date": 1446677364, "last_edit_date": 1446677364, "creation_date": 1446676973, "answer_id": 33533490, "question_id": 33533212, "link": "https://stackoverflow.com/questions/33533212/petersons-algorithm-preemptive-or-non-preemptive/33533490#33533490", "title": "Peterson&#39;s Algorithm - Preemptive or Non preemptive?", "body": "<p>Peterson's Algorithm is neither <strong>preemptive</strong> or <strong>non-preemptive</strong>.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Preemption_(computing)\" rel=\"nofollow\">Preemption</a> is a notion of the underlying Operating System, more precisely the <strong>scheduler</strong>. The task of the scheduler is to assign timeslots to processes in a timely (<em>pun intended</em>) manner.</p>\n\n<p>The scheduler can interrupt a process regarding of wait-state.</p>\n\n<p>However, it's \"prudent\" to signal the scheduler that <em>now is a good time to let another process run</em> by utilizing wait-states.</p>\n\n<p>For Peterson's Algorithm this signal should be inside the <code>while</code>-loop. A simple <code>sleep</code> should suffice.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Peterson%27s_algorithm\" rel=\"nofollow\">Wikipedia</a> also mentions:</p>\n\n<blockquote>\n  <p>The while condition works even with preemption</p>\n</blockquote>\n\n<p>So to conclude as we began:<br>\nPeterson's Algorithm is neither <strong>preemptive</strong> or <strong>non-preemptive</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 8697718, "user_type": "registered", "profile_image": "https://graph.facebook.com/670731456464319/picture?type=large", "display_name": "Abhishek Dutta", "link": "https://stackoverflow.com/users/8697718/abhishek-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1599378347, "creation_date": 1599378347, "answer_id": 63761868, "question_id": 33533212, "link": "https://stackoverflow.com/questions/33533212/petersons-algorithm-preemptive-or-non-preemptive/63761868#63761868", "title": "Peterson&#39;s Algorithm - Preemptive or Non preemptive?", "body": "<p>Peterson's solution works for a preemptive process. It might fail for a non-preemptive process.</p>\n<p>Suppose both process wish to enter the critical section.</p>\n<pre><code>do {\n   flag[0] = 1; \n   turn = 1;\n   while(flag[1] &amp;&amp; turn == 1);\n   CS\n   flag[0] = 0;\n   RS\n   } while(1);\n\ndo {\n   flag[1] = 1; \n   turn = 0;\n   while(flag[0] &amp;&amp; turn == 0);\n   CS\n   flag[1] = 0;\n   RS\n   } while(1);\n</code></pre>\n<p>If turn = 1 process 0 will be in a spinlock. It is wasting CPU cycles. It is preempted so that the other process (i.e. process 1) gets chance.</p>\n"}], "owner": {"reputation": 661, "user_id": 4239526, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b5a5753be7ef22a631d0732df7aa9893?s=128&d=identicon&r=PG&f=1", "display_name": "RandomMath", "link": "https://stackoverflow.com/users/4239526/randommath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1397, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1599378347, "creation_date": 1446675737, "question_id": 33533212, "link": "https://stackoverflow.com/questions/33533212/petersons-algorithm-preemptive-or-non-preemptive", "title": "Peterson&#39;s Algorithm - Preemptive or Non preemptive?", "body": "<p>I am looking online for peterson's algorithm, and I cant seem to distinguish whether or not it is preemptive.</p>\n\n<p><strong>Preemptive</strong> - Non voluntary scheduling, and OS decides when to stop the process</p>\n\n<p><strong>Non-preemptive</strong> - Voluntarily giving up CPU once process is complete</p>\n\n<p><a href=\"https://i.stack.imgur.com/h0jve.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h0jve.png\" alt=\"enter image description here\"></a></p>\n\n<p>I feel that peterson's algorithm seems to be non preemptive since there is no mention about priority of processes.</p>\n\n<p>Is that correct? Would somebody be able to shed some light on this?</p>\n"}, {"tags": ["c", "lua", "lua-api"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446675706, "post_id": 33533179, "comment_id": 54847995, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446676148, "post_id": 33533179, "comment_id": 54848198, "body": "What didn&#39;t you understand? Before the old code reading was fine, but now after the change occurs panic error. Error debugging <code>lua_getfield(L, -1, &quot;TimeAdd&quot;);</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446676256, "post_id": 33533179, "comment_id": 54848253, "body": "At least you should show the courtesy to read my comment carefully."}, {"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446677421, "post_id": 33533179, "comment_id": 54848761, "body": "Edited the topic explaining better, understand now?"}, {"owner": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 1, "creation_date": 1446677709, "post_id": 33533179, "comment_id": 54848850, "body": "Try <code>lua_getfield(L, -2, &quot;DaysAdd&quot;);</code>"}, {"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "edited": false, "score": 0, "creation_date": 1446679023, "post_id": 33533179, "comment_id": 54849322, "body": "Thank you Egor, is working now."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "edited": false, "score": 0, "creation_date": 1446679106, "post_id": 33533706, "comment_id": 54849348, "body": "Thank you Colonel, it&#39;s working now. I&#39;m new in lua, have some indication of some stuff for me to read more about respect?"}, {"owner": {"reputation": 3790, "user_id": 805875, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bbd9ac04d56f955c822cb28b5ab72fda?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/805875/nobody"}, "reply_to_user": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "edited": false, "score": 0, "creation_date": 1446724230, "post_id": 33533706, "comment_id": 54867458, "body": "@Chozie If you haven&#39;t, try reading the Lua book. (The old version is available online at <a href=\"http://www.lua.org/pil/contents.html\" rel=\"nofollow noreferrer\">lua.org/pil/contents.html</a> \u2013 slightly outdated by now, but still mostly relevant.) Also useful is reading the source of Lua libraries written in C, see e.g. the section &quot;Libraries&quot; of the <a href=\"http://www.lua.org/source/5.3/\" rel=\"nofollow noreferrer\">Lua source</a> for Lua&#39;s built-in libraries, or whatever other libraries you use or find via luarocks. (Not everything you&#39;ll find will be good code, but if you look at many different things you&#39;ll probably see some good code, too.)"}], "tags": [], "owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "is_accepted": false, "score": 2, "last_activity_date": 1446678045, "creation_date": 1446678045, "answer_id": 33533706, "question_id": 33533179, "link": "https://stackoverflow.com/questions/33533179/panic-error-while-reading-file-lua/33533706#33533706", "title": "Panic error while reading file lua", "body": "<p>Step through the code, visualizing the Lua stack as you go, and the error will become apparent.</p>\n\n<pre><code>lua_getglobal(L, \"Request\"); // Stack: [] -&gt; [(Request table)]\nlua_getfield(L, -1, \"TimeAdd\"); // [&gt;(Request table)&lt;] -&gt; [(Request table), true]\n\ntime_request = lua_toboolean(L, -1); // [(Request table), &gt;true&lt;]\n\nlua_getfield(L, -1, \"DaysAdd\"); // [(Request table), &gt;true&lt;] ERROR: Cannot index `true`\n</code></pre>\n\n<p>When you call <code>lua_getfield(L, -1, \"DaysAdd\")</code>, the top of the stack is the value <code>true</code>, which is not indexable.</p>\n\n<p>Either pop the <code>true</code> value off the stack before getting DaysAdd (<code>lua_pop(L, 1)</code>) or adjust the stack index to <code>lua_getfield</code> to point to the Request table (<code>lua_getfield(L, -2, \"DaysAdd\")</code>)</p>\n"}], "owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446712884, "creation_date": 1446675615, "last_edit_date": 1446712884, "question_id": 33533179, "link": "https://stackoverflow.com/questions/33533179/panic-error-while-reading-file-lua", "title": "Panic error while reading file lua", "body": "<p>I created a file with the following code</p>\n\n<pre><code>Request = {\n  TimeAdd = true;\n  DaysAdd = true;\n};\n</code></pre>\n\n<p>The source code is made in C</p>\n\n<pre><code>    lua_getglobal(L, \"Request\")\n    lua_getfield(L, -1, \"TimeAdd\");\n\n       time_request = lua_toboolean(L, -1);\n\n    lua_getfield(L, -1, \"DaysAdd\");\n        data_request = lua_toboolean(L, -1);\n</code></pre>\n\n<p>I do the compilation of the program normally more it occurs error lua</p>\n\n<p>LUA PANIC: unprotected error in call to Lua API (attempt to index boolean value)</p>\n"}, {"tags": ["c", "counting", "strlen"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446675714, "post_id": 33533177, "comment_id": 54848003, "body": "<code>*string</code> is a single character, so <code>sizeof(*string)</code> is the size of one character, which is always <code>1</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446675732, "post_id": 33533177, "comment_id": 54848009, "body": "You need to write a loop that counts characters until it gets to the null terminator."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1446675774, "post_id": 33533177, "comment_id": 54848030, "body": "A pointer is not an array is not a pointer."}, {"owner": {"reputation": 7319, "user_id": 2754599, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RakZ0.png?s=128&g=1", "display_name": "online Thomas", "link": "https://stackoverflow.com/users/2754599/online-thomas"}, "edited": false, "score": 0, "creation_date": 1446675798, "post_id": 33533177, "comment_id": 54848039, "body": "increment an integer inside  while (strcmp(input, &quot;End&quot;) != 0) {} would do the trick"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1446675808, "post_id": 33533177, "comment_id": 54848042, "body": "The way C (<code>%s</code>, <code>strlen</code>, and co.) determine if a string has terminated is to continue reading a <code>char</code> at a time until <code>\\0</code> (the null terminator) is encountered. Change your function to do the same."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1446695631, "post_id": 33533177, "comment_id": 54853841, "body": "What you are doing wrong is expecting <code>sizeof</code> to do something other than tell you the number of bytes a particular variable takes up. (In <code>stringLength</code> <code>string</code> is a <code>char*</code> so <code>*string</code> is a <code>char</code> and occupies one byte)"}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1446676587, "creation_date": 1446676587, "answer_id": 33533404, "question_id": 33533177, "link": "https://stackoverflow.com/questions/33533177/how-to-count-number-characters-of-strings-without-using-strlen/33533404#33533404", "title": "How to count number characters of strings without using strlen", "body": "<p>Please note that <code>sizeof</code> is evaluated at <em>compile time</em>. So it can't be used to determine the length of a string in <em>run time</em>.</p>\n\n<p>The length of a string is the number of characters until you encounter a null-character. The size of a string is thus one more than the number of characters. This final null-character is called the <em>terminating null character</em>.</p>\n\n<p>So to know the length of a string in run-time, you have to count the number of characters until you encounter a null-character.</p>\n\n<p>Programming this in C is simple; I leave this to you.</p>\n"}, {"comments": [{"owner": {"reputation": 590, "user_id": 5300594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/26uq4.jpg?s=128&g=1", "display_name": "PeterPan", "link": "https://stackoverflow.com/users/5300594/peterpan"}, "edited": false, "score": 0, "creation_date": 1446679198, "post_id": 33533436, "comment_id": 54849376, "body": "Great solution! Could you also add a solution for the way the other described? :-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1446680020, "post_id": 33533436, "comment_id": 54849640, "body": "<code>&quot;%n&quot;</code> will report the number of <code>char</code> parsed, including leading white-spaces.  Try entering <code>&quot; 123&quot;</code> and output will say the input was <code>&quot;123&quot;</code> with length 4."}, {"owner": {"reputation": 590, "user_id": 5300594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/26uq4.jpg?s=128&g=1", "display_name": "PeterPan", "link": "https://stackoverflow.com/users/5300594/peterpan"}, "edited": false, "score": 0, "creation_date": 1446722586, "post_id": 33533436, "comment_id": 54866502, "body": "Thank you! Question: Why is <code>while ( string[length] != &#39;\\0&#39; )</code> equal to <code>while ( string[length] )</code> ?"}, {"owner": {"reputation": 590, "user_id": 5300594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/26uq4.jpg?s=128&g=1", "display_name": "PeterPan", "link": "https://stackoverflow.com/users/5300594/peterpan"}, "edited": false, "score": 0, "creation_date": 1446722860, "post_id": 33533436, "comment_id": 54866631, "body": "Because the condition is always &gt;= 1 except when it reaches &#39;\\0&#39;, then it&#39;s 0 and breaks. Right?"}], "tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 2, "last_activity_date": 1446720655, "last_edit_date": 1446720655, "creation_date": 1446676771, "answer_id": 33533436, "question_id": 33533177, "link": "https://stackoverflow.com/questions/33533177/how-to-count-number-characters-of-strings-without-using-strlen/33533436#33533436", "title": "How to count number characters of strings without using strlen", "body": "<p>The <code>%n</code> specifier could also be used to capture the number of characters.<br>\nUsing <code>%39s</code> will prevent writing too many characters into the array <code>input[40]</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( void)\n{\n    char input[40] = {'\\0'};\n    int count = 0;\n\n    do {\n        printf(\"Please enter characters or End to quit.\\n\");\n        scanf(\"%39s%n\", input, &amp;count);\n        while (getchar() != '\\n');\n        printf(\"You've entered the following %s. Your input has a length of %d characters.\\n\", input, count);\n    } while (strcmp(input, \"End\") != 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT to correct flaw pointed out by @chux.<br>\nusing <code>\" %n</code> to record leading space and <code>%n\"</code> record total characters this should record the number of leading whitespace and the total characters parsed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( int argc, char *argv[])\n{\n    char input[40] = {'\\0'};\n    int count = 0;\n    int leading = 0;\n\n    do {\n        printf(\"Please enter characters. Enter End to quit.\\n\");\n        if ( ( scanf(\" %n%39s%n\", &amp;leading, input, &amp;count)) != 1) {\n            break;\n        }\n        while (getchar() != '\\n');\n        printf(\"You've entered %s, with a length of %d characters.\\n\", input, count - leading);\n    } while (strcmp(input, \"End\") != 0);\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT <code>stringLength()</code> function to return length</p>\n\n<pre><code>int stringLength(char string[]){\n    unsigned int length = 0;\n    while ( string[length]) {// true until string[length] is '\\0'\n        length++;\n    }\n    return length;\n}\n</code></pre>\n"}], "owner": {"reputation": 590, "user_id": 5300594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/26uq4.jpg?s=128&g=1", "display_name": "PeterPan", "link": "https://stackoverflow.com/users/5300594/peterpan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1562, "favorite_count": 0, "accepted_answer_id": 33533436, "answer_count": 2, "score": -2, "last_activity_date": 1446720655, "creation_date": 1446675605, "question_id": 33533177, "link": "https://stackoverflow.com/questions/33533177/how-to-count-number-characters-of-strings-without-using-strlen", "title": "How to count number characters of strings without using strlen", "body": "<p>I have the task to count the number of letters in random words until \"End\" is entered. I'm not allowed to use the strlen(); function. That's my solution so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint stringLength(char string[]){\n\u00a0\u00a0\u00a0\u00a0unsigned int length = sizeof(*string) / sizeof(char);\n\u00a0\u00a0\u00a0\u00a0return length;\n}\n\nint main(){\n\u00a0\u00a0\u00a0\u00a0char input[40];\n\u00a0\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0\u00a0while (strcmp(input, \"End\") != 0) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printf(\"Please enter characters.\\n\");\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0scanf(\"%s\", &amp;input[0]);\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0while (getchar() != '\\n');\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0printf(\"You've entered the following %s. Your input has a length of %d characters.\\n\", input, stringLength(input));\n\u00a0\u00a0\u00a0\u00a0}\n}\n</code></pre>\n\n<p>The stringLength value isn't correct. What am I doing wrong?</p>\n"}, {"tags": ["python", "c", "sockets", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446675041, "post_id": 33532942, "comment_id": 54847657, "body": "You are overwriting the name of the string module. Do not use <code>string</code> as identifier. And you seem to be using Python3. Read about the difference of <code>str</code> and <code>bytes</code>/<code>bytearray</code>"}, {"owner": {"reputation": 5410, "user_id": 1390022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d29e994a1301613f40c4cc99909edb0?s=128&d=identicon&r=PG", "display_name": "derricw", "link": "https://stackoverflow.com/users/1390022/derricw"}, "edited": false, "score": 0, "creation_date": 1446675353, "post_id": 33532942, "comment_id": 54847811, "body": "Could you post the exact string that you are sending that is not working?"}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1446675459, "creation_date": 1446675459, "answer_id": 33533145, "question_id": 33532942, "link": "https://stackoverflow.com/questions/33532942/server-cant-decode-c-string/33533145#33533145", "title": "Server can&#39;t decode c string", "body": "<p>You are sending too much data. This line:</p>\n\n<pre><code>send(client_socket, &amp;message, sizeof(message), 0);\n</code></pre>\n\n<p>sends the entire <code>message</code> buffer. That's not what you want.</p>\n\n<p>Instead, try this:</p>\n\n<pre><code>send(client_socket, message, strlen(message), 0);\n</code></pre>\n"}], "owner": {"reputation": 60, "user_id": 5522118, "user_type": "registered", "profile_image": "https://graph.facebook.com/1065693576782846/picture?type=large", "display_name": "Uifalean Sergiu Mihai", "link": "https://stackoverflow.com/users/5522118/uifalean-sergiu-mihai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 33533145, "answer_count": 1, "score": 1, "last_activity_date": 1446676699, "creation_date": 1446674673, "last_edit_date": 1592644375, "question_id": 33532942, "link": "https://stackoverflow.com/questions/33532942/server-cant-decode-c-string", "title": "Server can&#39;t decode c string", "body": "<p>i have yet another compatibility between python and c at basic computer networks.</p>\n<p>server.py</p>\n<pre><code>import socket\nimport threading\nthreads=[]\nglobal c\nc=0\ndef client_thread(client_socket):\n    global c\n    count=c\n    try:\n        message=client_socket.recv(1010)\n        \n    except socket.error as error:\n        print('error t recv:',error)\n        exit(1)\n    print('Client #',count,' sent:',message.decode('utf-8'))\n    c=c-1\n    client_socket.close()\ndef main():\n    server=socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n    try:\n        server.bind((str(socket.INADDR_ANY),1234))\n    except socket.error as error:\n        print('binding error:',error)\n        exit(1)\n    server.listen(5)\n    print('Server running')\n    while(1):\n        client_socket, _ =server.accept()\n        print('Client connected.')\n        th= threading.Thread(target=client_thread,args=(client_socket,))\n        threads.append(th)\n        global c\n        c=c+1\n        th.start()\nif __name__ == '__main__':\n    main()\n</code></pre>\n<p>My server should receive a string from the client and then print it,it's just a simplified way for me to check the error.</p>\n<p>client.c</p>\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\nint main(int argc, char* argv[]){\n    int client_socket = socket(AF_INET, SOCK_STREAM, 0);\n    if (client_socket &lt; 0){\n        perror(&quot;Error at creating socket\\n&quot;);\n        exit(1);\n    }\n    struct sockaddr_in server_address;\n    memset(&amp;server_address, 0, sizeof(server_address));\n    server_address.sin_port= ntohs(1234);\n    server_address.sin_family=AF_INET;\n    server_address.sin_addr.s_addr= inet_addr(&quot;127.0.0.1&quot;);\n    if (connect(client_socket, (struct sockaddr*) &amp;server_address, sizeof(server_address)) &lt; 0){\n        perror(&quot;Can not connect to server\\n&quot;);\n        exit(1);\n    }\n    printf(&quot;Give String:&quot;);\n    char message[1000];\n    \n    scanf(&quot;%s&quot;,message);\n    send(client_socket, message, strlen(message), 0);\n    return 0;\n}\n</code></pre>\n<p>The client connects,i read the string,everything ok,but my server gives me the following error:</p>\n<blockquote>\n<p>print('Client #',count,' sent:',message.decode('utf-8'))</p>\n<p>UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position\n3: invalid start byte</p>\n</blockquote>\n<p>Mentioning that i tried a bunch of encoding for the decode,nothing seems to work.</p>\n<p>Is there any way to make it work other than sending the characters one by one?Any information you can direct me to would be helpful.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1446673659, "post_id": 33532638, "comment_id": 54846895, "body": "You assume right. About every tutorial on strings in C mentions <code>strcmp</code> at some time."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1446673780, "post_id": 33532638, "comment_id": 54846950, "body": "Your code actually tests whether the two strings occupy the same memory location. What you actually want to do is test whether two different memory locations contain the same characters."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1446673822, "post_id": 33532638, "comment_id": 54846973, "body": "The function doesn&#39;t cope with the case of someone passing a longer string for the second argument"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1446673979, "post_id": 33532638, "comment_id": 54847058, "body": "Don&#39;t use <code>bool</code> as an identifier. This is reserved in C99 and used by <code>stdbool.h</code>."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1446682353, "post_id": 33532638, "comment_id": 54850369, "body": "You&#39;re calling strlen at each loop iteration twice.  Another approach is to jump to the end of both strings and compare backwards.  *s++"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1551943522, "post_id": 33532638, "comment_id": 96827583, "body": "another problem not mentioned yet, doing <code>s++</code> in the loop affects <code>strlen(s)</code> in the loop condition"}], "answers": [{"tags": [], "owner": {"reputation": 5635, "user_id": 1702077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/oGOpj.png?s=128&g=1", "display_name": "Chris Loonam", "link": "https://stackoverflow.com/users/1702077/chris-loonam"}, "is_accepted": false, "score": 1, "last_activity_date": 1446674197, "last_edit_date": 1446674197, "creation_date": 1446673880, "answer_id": 33532740, "question_id": 33532638, "link": "https://stackoverflow.com/questions/33532638/strend-function-in-c-using-pointers/33532740#33532740", "title": "strend function in C using pointers?", "body": "<p>Use <a href=\"http://linux.die.net/man/3/strcmp\" rel=\"nofollow\"><code>strcmp(3)</code></a></p>\n\n<pre><code>if (strcmp(s, t) == 0) return 1;\n</code></pre>\n\n<p>This actually compares the contents of the memory pointed to by <code>s</code> and <code>t</code> rather than their addresses.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1446679603, "post_id": 33533552, "comment_id": 54849494, "body": "Consider as code has paid the computation cost of the 2 string lengths, suggest <code>... &amp;&amp; !memcmp(s + len_s, t, t_len)) return 1</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1446680912, "post_id": 33533552, "comment_id": 54849963, "body": "<code>if ( condition) return 1; return 0;</code> could be replaced by <code>return condition;</code> since the condition is the result of <code>&amp;&amp;</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1446681036, "post_id": 33533552, "comment_id": 54850000, "body": "@chux I&#39;d hope a compiler would perform that optimization"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446681290, "post_id": 33533552, "comment_id": 54850075, "body": "@M.M: actually, clang also sort of does yours :) <code>-O3</code> produces <code>call strcmp &#47; mov %eax, %ecx &#47; mov 1, %eax &#47; test %ecx, %ecx &#47; je  + 2 &#47; xor %eax,%eax</code>. The result of <code>strcmp</code> may or may not be <code>1</code> and so it cannot use its return value right away. If the <code>strlen</code> test fails, it jumps straight to that <code>xor</code> line. Seems concise enough, and without any human intervention in an attempt to optimize. .. wait, let me add an alternative."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1551942404, "post_id": 33533552, "comment_id": 96827092, "body": "<i>It&#39;s not worth the trouble to cache the result of those four strlen calls into 2 temporary variables; a good compiler will work it out and do that for you.</i> I beg to differ! This is a very bad example to show <b>even</b> if good compilers might optimise the redundant calls away in this particular example. In most cases, the compiler cannot assume the strings to not change, especially when the pointers are not even declared <code>const</code>. If you wish to condense the code, remove the redundant <code>if</code>. And if you wish to optimise more, follow chux&#39; advice and use <code>memcmp</code>."}], "tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": true, "score": 1, "last_activity_date": 1446681611, "last_edit_date": 1446681611, "creation_date": 1446677256, "answer_id": 33533552, "question_id": 33532638, "link": "https://stackoverflow.com/questions/33532638/strend-function-in-c-using-pointers/33533552#33533552", "title": "strend function in C using pointers?", "body": "<p>You need to review your basic knowledge of C strings. There are lots of standard string functions in <a href=\"http://en.cppreference.com/w/c/string/byte\" rel=\"nofollow\"><code>string.h</code></a> that can help you with this test.</p>\n\n<p>The basic problem is that the test <code>s == t</code> is valid, but you are comparing memory addresses here. You can see that is valid if you change the strings to test to</p>\n\n<pre><code>char test[] = \"Hello\";\nint bool = strend_(test, test+1);\n</code></pre>\n\n<p>where <code>test</code> obviously is the same as your <code>\"Hello\"</code>, and similarly, <code>test+1</code> is the same as <code>\"ello\"</code> (try it by printing them). This <em>correctly</em> returns <code>1</code> with your routine.</p>\n\n<p>In addition, I get two warnings:</p>\n\n<ul>\n<li><p>on <code>*s++;</code> \"warning: expression result unused [-Wunused-value]\": you increment <code>s</code> but also ask what character is at that position through <code>*s</code>; and you don't use that information.<br>\nFix by removing the <code>*</code> there.</p></li>\n<li><p>on <code>p &lt; strlen(s) ..</code>; \"warning: comparison of integers of different signs: 'int' and 'unsigned long'\", because <code>strlen</code> does not return a signed integer but an unsigned one (apparently, my header uses <code>unsigned long</code>).<br>\nFix by declaring <code>p</code> as <code>unsigned long</code>, or even better, <code>size_t</code>.</p></li>\n</ul>\n\n<p>Your entire routine can be condensed to a simple</p>\n\n<pre><code>int strend (char *s, char *t)\n{\n    if (strlen(s) &gt;= strlen(t) &amp;&amp; !strcmp (s+strlen(s)-strlen(t),t))\n        return 1;\n    return 0;\n}\n</code></pre>\n\n<p>It's not worth the trouble to cache the result of those four <code>strlen</code> calls into 2 temporary variables; a good compiler will work it out and do that for you. (A quick glance to the assembly output of the compiler I'm using \u2013 <code>clang</code> \u2013 shows it does, even with the default optimization settings.)</p>\n\n<p>A slightly modified test, based on @M.M.'s comment:</p>\n\n<pre><code>int strend (char *s, char *t)\n{\n    if (strlen(s) &lt; strlen(t)) return 0;\n    return !strcmp (s+strlen(s)-strlen(t),t);\n}\n</code></pre>\n\n<p>but attempting to optimize it this way is not as easy parsed as the routine above, and its assembly is ever so slightly \"wordy\" as well. Personally, I'd go for the more humanly readable version.</p>\n"}, {"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1446678041, "post_id": 33533632, "comment_id": 54848973, "body": "There is a standard way of expressing the pointer arithmetics in <code>if (*(s+p) == *(t+count))</code>: <code>if (s[p] == t[count])</code>. There is no need for a <code>continue</code> inside this simple if/else. There is no need for a <code>flag</code> variable, you can insert <code>return 0;</code> immediately, and <code>return 1;</code> after the loop. (... I didn&#39;t check for any further issues. Truth be told, overall it&#39;s a reasonably good attempt.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446680861, "post_id": 33533632, "comment_id": 54849953, "body": "This version also doesn&#39;t cope with <code>s</code> being shorter than <code>t</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1551941921, "post_id": 33533632, "comment_id": 96826904, "body": "<code>while(count&lt;strlen(t)) </code> is very inefficient as you recompute the length of <code>t</code> at each iteration of the loop. The compiler might be shrewd enough to optimize this, but you should not rely on it. Compute the length once and store it in a local variable."}], "tags": [], "owner": {"reputation": 31, "user_id": 5522119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e11804168356f79565ab4384883e3bc?s=128&d=identicon&r=PG", "display_name": "Mutex202", "link": "https://stackoverflow.com/users/5522119/mutex202"}, "is_accepted": false, "score": 0, "last_activity_date": 1446677665, "creation_date": 1446677665, "answer_id": 33533632, "question_id": 33532638, "link": "https://stackoverflow.com/questions/33532638/strend-function-in-c-using-pointers/33533632#33533632", "title": "strend function in C using pointers?", "body": "<p>I corrected/modified your code, here is the code,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n//#pragma warning(disable:4996)\n\n\nint strend(char *s, char *t) \n{\n   int  p,flag=0,count=0;//count will be the starting index for *t\n   p = strlen(s) - strlen(t);//this will be the starting index for *s \n   while(count&lt;strlen(t)) \n   {\n\n       if (*(s+p) == *(t+count))\n       {\n          flag = 1;\n          count++;\n          p++;\n          continue;\n       }\n       else\n       {\n          flag = 0;\n          break;\n       }\n    }\n\n    return flag;\n}\n\nint main(void) \n{\n\n   int flag = strend(\"Hello\", \"ello\");\n   printf(\"%i\\n\", flag);\n   return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1551941765, "post_id": 55037125, "comment_id": 96826839, "body": "Your code has undefined behavior if <code>str2</code> is longer than <code>str1</code>."}], "tags": [], "owner": {"reputation": 29, "user_id": 4907505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cff3954a6883f954a6a6992ca5ccb15a?s=128&d=identicon&r=PG&f=1", "display_name": "Mohak", "link": "https://stackoverflow.com/users/4907505/mohak"}, "is_accepted": false, "score": 0, "last_activity_date": 1551939005, "creation_date": 1551939005, "answer_id": 55037125, "question_id": 33532638, "link": "https://stackoverflow.com/questions/33532638/strend-function-in-c-using-pointers/55037125#55037125", "title": "strend function in C using pointers?", "body": "<p>This code works too.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint strend (char *s1, char *s2);\nvoid main ()\n{\n    char str1[20] = \"somethings\";\n    char str2[20] = \"things\";\n    int f;\n    f = strend (str1,str2);\n    if (f==1)\n        printf (\"1\");\n    else\n        printf (\"0\");\n\n\n}\nint strend (char *str1, char *str2)\n{\n    int l = strlen(str1) - strlen(str2);\n    str1 = str1 + l;\n    int d = strcmp(str1,str2);\n    if (d == 0)\n        return 1;\n    else\n        return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1551945003, "post_id": 55037997, "comment_id": 96828336, "body": "Solid use of <code>memcmp</code> where there is no need to scan a second time for end-of-string. You are a bit more concise and include the <i>nul-terminating</i> character, I did <code>if (slen &lt; tlen) return 0; return !memcmp (s + slen - tlen, t, tlen);</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1551946743, "post_id": 55037997, "comment_id": 96829116, "body": "@DavidC.Rankin: indeed, there is no need to include the null terminator as the arguments are known to point <code>len2</code> from the end."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1551946615, "last_edit_date": 1551946615, "creation_date": 1551942804, "answer_id": 55037997, "question_id": 33532638, "link": "https://stackoverflow.com/questions/33532638/strend-function-in-c-using-pointers/55037997#55037997", "title": "strend function in C using pointers?", "body": "<p>Your code is broken in multiple ways:</p>\n\n<ul>\n<li><p>The initial loop is a very cumbersome way to advance <code>p</code> by the difference of lengths if positive.</p></li>\n<li><p>Once you have pointers at the same distance from the end of both strings, You should compare the characters with <code>strcmp()</code> (or <code>memcmp()</code> if you can first exclude the case of <code>strlen(s) &lt; strlen(t)</code>.</p></li>\n<li><p>Comparing the pointers obtained after the loop will only work if <code>t</code> points inside the string pointed to by <code>s</code>, a special case that may or may not be produced by the compiler for the specific call in <code>main</code>: <code>strend(\"Hello\", \"ello\");</code>.</p></li>\n</ul>\n\n<p>Here is a modified version:</p>\n\n<pre><code>#include &lt;string.h&gt;\n\nint strend(const char *str1, const char *str2) {\n    size_t len1 = strlen(str1);\n    size_t len2 = strlen(str2);\n    return len1 &gt;= len2 &amp;&amp; !memcmp(str1 + len1 - len2, str2, len2);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5526660"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 0, "accepted_answer_id": 33533552, "answer_count": 5, "score": 2, "last_activity_date": 1551946615, "creation_date": 1446673557, "last_edit_date": 1551942964, "question_id": 33532638, "link": "https://stackoverflow.com/questions/33532638/strend-function-in-c-using-pointers", "title": "strend function in C using pointers?", "body": "<p>I have created a function for <code>strend</code>, which basically returns <code>1</code> if string <code>t</code> is present at the end of string <code>s</code>, however it never returns <code>1</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint strend(char *s, char *t) {\n    int  p;\n    for (p = 0; p &lt; strlen(s) - strlen(t); p++) {\n        *s++;\n    }\n    printf(\"%s\\n%s\\n\", s, t);\n    if (s == t)\n        return 1;\n    return 0;\n}\n\nint main(void) {\n    int bool = strend(\"Hello\", \"ello\");\n    printf(\"%i\\n\", bool);\n    return 0;\n}\n</code></pre>\n\n<p>This gives me an output of:</p>\n\n<pre><code>ello\nello\n0\n</code></pre>\n\n<p>So technically I should get <code>1</code>. I assume the comparison using pointers is not used in this way?</p>\n"}, {"tags": ["c", "split", "strtok"], "comments": [{"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 4, "creation_date": 1446673463, "post_id": 33532570, "comment_id": 54846794, "body": "And? What is the problem? What is the expected output? What do you actually get?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1446673587, "post_id": 33532570, "comment_id": 54846860, "body": "Read the man page for strtok: <a href=\"http://www.cplusplus.com/reference/cstring/strtok/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstring/strtok</a>"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1446673587, "post_id": 33532570, "comment_id": 54846861, "body": "@gopi: How is strtok supposed to know which string to split, when you only send it NULL? You have to call strtok first with a pointer to the string you wish to split. Then you call it repeatedly with NULL, to get more tokens."}, {"owner": {"reputation": 24, "user_id": 5344563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-DksuGhRVxLs/AAAAAAAAAAI/AAAAAAAAAGw/GkJb1ncm1oU/photo.jpg?sz=128", "display_name": "gopi", "link": "https://stackoverflow.com/users/5344563/gopi"}, "edited": false, "score": 0, "creation_date": 1446673724, "post_id": 33532570, "comment_id": 54846929, "body": "Yes, sorry - I&#39;ve just realized it. It still doesn&#39;t work - even with &#39;line&#39; replacing NULL."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1446674190, "post_id": 33532570, "comment_id": 54847176, "body": "<i>It still doesn&#39;t work</i> Be specific. Is anything printing? Also, you need to call <code>strok</code> repeatedly until it returns <code>NULL</code> (first time with <code>line</code> as 1st parameter then with <code>NULL</code> as parameter."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1446674290, "post_id": 33532570, "comment_id": 54847240, "body": "@gopi: You need a loop for strtok, but not one that reads a completely new string from the user in each iteration."}], "answers": [{"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 24, "user_id": 5344563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-DksuGhRVxLs/AAAAAAAAAAI/AAAAAAAAAGw/GkJb1ncm1oU/photo.jpg?sz=128", "display_name": "gopi", "link": "https://stackoverflow.com/users/5344563/gopi"}, "edited": false, "score": 0, "creation_date": 1446683523, "post_id": 33532924, "comment_id": 54850692, "body": "@gopi You&#39;re welcome!  I never give just &quot;well you should check manpage&quot;--pedantic/frustrating/useless for someone who has already made an honest effort like you.  One way to teach is to give a hint or two:  &quot;you need an inner loop and look at strtok first arg closely&quot;.  Better.  But, I think people learn more with a complete solution [and easier for me--this comment is taking longer than the code :-)].  And, that&#39;s how I learned:  reading others&#39; code and asking &quot;Why did they do <i>that</i>?&quot;.  Anyway, happy programming!!!"}, {"owner": {"reputation": 24, "user_id": 5344563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-DksuGhRVxLs/AAAAAAAAAAI/AAAAAAAAAGw/GkJb1ncm1oU/photo.jpg?sz=128", "display_name": "gopi", "link": "https://stackoverflow.com/users/5344563/gopi"}, "edited": false, "score": 0, "creation_date": 1446758599, "post_id": 33532924, "comment_id": 54889736, "body": "Exactly. I was simply stuck &amp; needed a push. Thanks a lot - much appreciated!"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 1, "last_activity_date": 1446674612, "creation_date": 1446674612, "answer_id": 33532924, "question_id": 33532570, "link": "https://stackoverflow.com/questions/33532570/c-parsing-input-text-file-into-words/33532924#33532924", "title": "C parsing input text file into words", "body": "<p>Here's the corrected function [sorry for extra the style cleanup]:</p>\n\n<pre><code>int\nsplitInput(fp)\n{\n    int i = 0;\n    char *cp;\n    char *bp;\n    char line[255];\n    char *array[5000];\n    int x;\n\n    while (fgets(line, sizeof(line), fp) != NULL) {\n        bp = line;\n        while (1) {\n            cp = strtok(bp, \",.!? \\n\");\n            bp = NULL;\n\n            if (cp == NULL)\n                break;\n            array[i++] = cp;\n\n            printf(\"Check print - word %i:%s:\\n\",i-1, cp);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Now, take a look at the man page for <code>strtok</code> to understand the <code>bp</code> trick</p>\n"}, {"comments": [{"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "reply_to_user": {"reputation": 24, "user_id": 5344563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-DksuGhRVxLs/AAAAAAAAAAI/AAAAAAAAAGw/GkJb1ncm1oU/photo.jpg?sz=128", "display_name": "gopi", "link": "https://stackoverflow.com/users/5344563/gopi"}, "edited": false, "score": 0, "creation_date": 1446675032, "post_id": 33532927, "comment_id": 54847653, "body": "@gopi great, don&#39;t forget to remove your increment of <code>i</code> after the <code>printf</code> because that will be redundant."}], "tags": [], "owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "is_accepted": false, "score": 0, "last_activity_date": 1446674622, "creation_date": 1446674622, "answer_id": 33532927, "question_id": 33532570, "link": "https://stackoverflow.com/questions/33532570/c-parsing-input-text-file-into-words/33532927#33532927", "title": "C parsing input text file into words", "body": "<p>If I understand your question correctly you want to read every line and split each line into words and add that into an array.</p>\n\n<pre><code>    array[i] = strtok(line, \",.!? \\n\");\n</code></pre>\n\n<p>That will not work for obvious reasons because it will only return the first word for each line and you never allocate memory.</p>\n\n<p>This is probably what you want.</p>\n\n<pre><code>    char *pch;\n    pch = strtok(line, \",.!? \\n\");\n    while(pch != NULL) {\n      array[i++] = strdup(pch); // put the content of pch into array at position i and increment i afterwards.\n      pch = strtok(NULL, \",.!? \\n\"); // look for remaining words at the same line\n    }\n</code></pre>\n\n<p>Don't forget to free your array elements afterwards though using <code>free</code>.</p>\n"}], "owner": {"reputation": 24, "user_id": 5344563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-DksuGhRVxLs/AAAAAAAAAAI/AAAAAAAAAGw/GkJb1ncm1oU/photo.jpg?sz=128", "display_name": "gopi", "link": "https://stackoverflow.com/users/5344563/gopi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3211, "favorite_count": 0, "accepted_answer_id": 33532924, "answer_count": 2, "score": 0, "last_activity_date": 1446674622, "creation_date": 1446673314, "last_edit_date": 1446673741, "question_id": 33532570, "link": "https://stackoverflow.com/questions/33532570/c-parsing-input-text-file-into-words", "title": "C parsing input text file into words", "body": "<p>I am trying to parse input file (containing a text document with multiple lines and delimiters, i.e. \"!,.?\") into words. My function 'splitting function' is:</p>\n\n<pre><code>int splitInput(fp) {\n\n    int i= 0;\n    char  line[255];\n    char *array[5000];\n    int x;\n    while (fgets(line, sizeof(line), fp) != NULL) {     \n        array[i] = strtok(line, \",.!? \\n\");\n        printf(\"Check print - word %i:%s:\\n\",i, array[i]);\n        i++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1446672307, "post_id": 33532250, "comment_id": 54846212, "body": "<code>while (temp != NULL &amp;&amp; temp-&gt;data == key) {...}</code> This only loops when the key happens to be first on the list."}], "answers": [{"tags": [], "owner": {"reputation": 28, "user_id": 5521207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82571317da9e427bc45743002405989a?s=128&d=identicon&r=PG", "display_name": "Subhashini", "link": "https://stackoverflow.com/users/5521207/subhashini"}, "is_accepted": true, "score": 1, "last_activity_date": 1496134041, "last_edit_date": 1496134041, "creation_date": 1446675830, "answer_id": 33533230, "question_id": 33532250, "link": "https://stackoverflow.com/questions/33532250/who-can-help-me-with-a-key-list-in-c/33533230#33533230", "title": "Who can help me with a key list in C?", "body": "<p>If i understood it right, you want to achieve the requirements by using the program you wrote above. \n<br/>It possible to re-design it using your own code. </p>\n\n<p>eg : For  get() </p>\n\n<pre><code>struct node *get(int key, void *data)\n{\n    if(*head_ref != NULL)\n    {\n        key = *head_ref-&gt;data;\n        return *head_ref;\n    }\n    else\n    { \n        printf(\"Error in retrieving data from head of list\\n\");\n    }\n}\n</code></pre>\n\n<p>In this way you can use code from your program and modify it slightly to achieve what is asked. \nThe first node that you visit, if the list does exist- is the head of the list. You are asked to return a pointer to the head of the list and also copy the data in that node into variable 'key'.\nIf you are still having trouble, i would suggest you go through linked list concept once more to be sure you won't have any trouble. You can refer to Youtube to find videos on these concepts.</p>\n"}], "owner": {"reputation": 7, "user_id": 5512925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b674602de813e7260c36a40cf54fc?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/5512925/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 33533230, "answer_count": 1, "score": -10, "last_activity_date": 1603178308, "creation_date": 1446672156, "last_edit_date": 1603178308, "question_id": 33532250, "link": "https://stackoverflow.com/questions/33532250/who-can-help-me-with-a-key-list-in-c", "title": "Who can help me with a key list in C?", "body": "<p>That's my application code:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n\nstruct node {\n  int data;\n  struct node *next;\n};\n\nvoid push(struct node** head_ref, int new_data) {\n  struct node* new_node = (struct node*) malloc(sizeof(struct node));\n  new_node-&gt;data = new_data;\n  new_node-&gt;next = (*head_ref);\n  (*head_ref) = new_node;\n}\n\nvoid deleteKey(struct node **head_ref, int key) {\n  struct node* temp = *head_ref, *prev;\n  while (temp != NULL &amp;&amp; temp-&gt;data == key) {\n    *head_ref = temp-&gt;next;   // Changed head\n    free(temp);               // free old head\n    temp = *head_ref;         // Change Temp\n  }\n\n  while (temp != NULL) {\n    while (temp != NULL &amp;&amp; temp-&gt;data != key) {\n      prev = temp;\n      temp = temp-&gt;next;\n    }\n    if (temp == NULL) return;\n    prev-&gt;next = temp-&gt;next;\n    free(temp);  // Free memory\n    temp = prev-&gt;next;\n  }\n}\n\nvoid printList(struct node *node) {\n  while (node != NULL) {\n    printf(&quot; %d &quot;, node-&gt;data);\n    node = node-&gt;next;\n  }\n}\n\nint main() {\n  struct node* head = NULL;\n\n  push(&amp;head, 7);\n  push(&amp;head, 2);\n  push(&amp;head, 3);\n  push(&amp;head, 2);\n  push(&amp;head, 8);\n  push(&amp;head, 1);\n  push(&amp;head, 2);\n  push(&amp;head, 2);\n\n  int key = 2; // key to delete\n\n  puts(&quot;Created Linked List: &quot;);\n  printList(head);\n\n  deleteKey(&amp;head, key);\n  puts(&quot;\\nLinked List after Deletion of 1: &quot;);\n\n  printList(head);\n  return 0;\n}\n</code></pre>\n<p>Requirements :</p>\n<pre><code>#ifndef LNKDLST_H_\n#define LNKDLST_H_\n/*\n * Function : Initialises the list\n * Purpose : Ensures that pointers are set to point to the right thing\n  If the lists exists already it is emptied before\n  initialising a new.\n  * Return : 1 indicates success, 0 error\n \n int initialise ();\n /*\n  * Function : put\n  * Purpose : Add data mapped with key to the end of the list\n  * Return : 1 indicates success, 0 error\n \n int put (int key, void *data);\n /*\n  * Function : get\n  * Purpose : Get the first item in the list and return the data\n  * Return : A pointer to the data, NULL on error\n\n void *get ();\n /*\n  * Function : getKeyd\n  * Purpose : Get the item with key and return the data\n  * Return : A pointer to the data, NULL on error\n \n void *getKeyd (int key);\n /*\n  * Function : isEmpty\n  * Purpose : Checks if the list is empty\n  * Return : 1 to indicate an empty list, 0 a non empty list\n \n int isEmpty();\n /*\n  * Function : exists\n  * Purpose : Checks if the item with key exists in the list\n  * Return : 1 if key exists, 0 if not\n \n int exists (int key);\n #endif \n</code></pre>\n<p>I have tried to redesign the program to fulfill the requirements but I find it very difficult to follow. Do I need to make another program or it's possible to redesign this one?</p>\n<p>This is a <strong>homework task</strong>, however I'm stuck and cannot figure out how it needs to be done properly.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1245, "user_id": 4595837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Y0M8.jpg?s=128&g=1", "display_name": "Jack Ryan", "link": "https://stackoverflow.com/users/4595837/jack-ryan"}, "edited": false, "score": 0, "creation_date": 1446671200, "post_id": 33531980, "comment_id": 54845592, "body": "You should be passing the student array by reference, the scope is now limited to the function."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1245, "user_id": 4595837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Y0M8.jpg?s=128&g=1", "display_name": "Jack Ryan", "link": "https://stackoverflow.com/users/4595837/jack-ryan"}, "edited": false, "score": 0, "creation_date": 1446671261, "post_id": 33531980, "comment_id": 54845627, "body": "@JackRyan Arrays are always passed by reference."}, {"owner": {"reputation": 85, "user_id": 5275910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbe40d249d478b527ee8c30317fb0a0?s=128&d=identicon&r=PG", "display_name": "Ron Halfon", "link": "https://stackoverflow.com/users/5275910/ron-halfon"}, "edited": false, "score": 0, "creation_date": 1446671272, "post_id": 33531980, "comment_id": 54845634, "body": "can you please explain more and/or show me the solution?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446671278, "post_id": 33531980, "comment_id": 54845637, "body": "Compile with all warnings &amp; debug info (<code>gcc -Wall -Wextra -g</code>) then <b>use the debugger</b> (<code>gdb</code> )"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1446671305, "post_id": 33531980, "comment_id": 54845647, "body": "You&#39;re using the wrong format when you scan <code>gender</code>. For a single character you must use <code>%c</code>, not <code>%s</code>."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 1245, "user_id": 4595837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Y0M8.jpg?s=128&g=1", "display_name": "Jack Ryan", "link": "https://stackoverflow.com/users/4595837/jack-ryan"}, "edited": false, "score": 1, "creation_date": 1446671330, "post_id": 33531980, "comment_id": 54845664, "body": "@JackRyan OP is passing a pointer to the first element of the array, then using <code>operator[]</code> on it. Thar references the elements of the array from the outer scope."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446671368, "post_id": 33531980, "comment_id": 54845681, "body": "@juanchopanza: C does not have any <code>operator[]</code> (which is purely a C++ thing)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1446671403, "post_id": 33531980, "comment_id": 54845704, "body": "@BasileStarynkevitch OK, whatever it is called."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 1245, "user_id": 4595837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Y0M8.jpg?s=128&g=1", "display_name": "Jack Ryan", "link": "https://stackoverflow.com/users/4595837/jack-ryan"}, "edited": false, "score": 1, "creation_date": 1446671784, "post_id": 33531980, "comment_id": 54845927, "body": "@JackRyan The function declaration <code>void add_rec(student st[],int *itemcount)</code> is semantically the same as <code>void add_rec(student *st,int *itemcount)</code>. Which is to say that the OP <i>is</i> passing the array by pointer, and the function <i>is</i> changing the array in <code>main</code>."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1446677412, "post_id": 33531980, "comment_id": 54848759, "body": "What&#39;s all this talk about passing by reference? This is C, not C++. There is no pass by reference."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446677572, "post_id": 33531980, "comment_id": 54848810, "body": "@BasileStarynkevitch Of course C has subscripting operators (<code>[]</code>). They can&#39;t be redefined as they can in C++, but they certainly exist. Saying they don&#39;t exist just clouds the issue for newbies."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446702851, "post_id": 33531980, "comment_id": 54856097, "body": "I am sure that <code>operator</code>  is not a C keyword. You just should speak of array indexing in C++. It is not an operator and cannot be redefined"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5522119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e11804168356f79565ab4384883e3bc?s=128&d=identicon&r=PG", "display_name": "Mutex202", "link": "https://stackoverflow.com/users/5522119/mutex202"}, "is_accepted": false, "score": 1, "last_activity_date": 1446674461, "creation_date": 1446674461, "answer_id": 33532895, "question_id": 33531980, "link": "https://stackoverflow.com/questions/33531980/the-data-is-not-saved-in-the-array/33532895#33532895", "title": "The data is not saved in the array", "body": "<p>I corrected your Code. Here is the Corrected code,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n//#pragma warning(disable:4996)\n\ntypedef struct\n{\n  int stnumber;\n  char stname[20];\n  char gender;\n  float quiz1;\n  float quiz2;\n  float assigment;\n  float midterm;\n  float final;\n  float total;\n}student;\n\n\n void add_rec(student st[], int *itemcount)\n {\n     againID:\n\n      int temp = 0,count=0;\n      printf(\"\\nEnter the student's ID (9 digits): \");\n      scanf(\"%d\", &amp;st[*itemcount].stnumber);\n      temp = st[*itemcount].stnumber;\n      while (temp != 0)//Checks if it 9 digit number or not\n      {\n       temp = temp / 10;\n       ++count;\n      }\n      if (count!= 9)\n      {\n       printf(\"Error!9 digit Number!\\n\");\n       goto againID;\n      }\n\n      printf(\"Enter the student's Name: \");\n      scanf(\"%s\", &amp;st[*itemcount].stname);\n\n    againGender:\n\n      printf(\"Enter the student's Gender(F or M): \");\n      scanf(\"%s\", &amp;st[*itemcount].gender);\n      if (st[*itemcount].gender != 'm' &amp;&amp; st[*itemcount].gender != 'M' &amp;&amp;   st[*itemcount].gender != 'f' &amp;&amp; st[*itemcount].gender != 'F')\n      {\n        printf(\"invalid\\n\"); goto againGender;\n      }\n\n    againquiz1:\n\n     printf(\"Enter the student's 1st quiz score: \");\n     scanf(\"%f\", &amp;st[*itemcount].quiz1);\n     if (st[*itemcount].quiz1 &lt; 0 || st[*itemcount].quiz1 &gt; 100)\n     {\n       printf(\"invalid\\n\"); goto againquiz1;\n     }\n\n    againquiz2:\n\n      printf(\"Enter the student's 2nd quiz score: \"); scanf(\"%f\",   &amp;st[*itemcount].quiz2);\n      if (st[*itemcount].quiz2 &lt; 0 || st[*itemcount].quiz2 &gt; 100)\n      {\n         printf(\"invalid\\n\"); goto againquiz2;\n      }\n\n    againAssigment:\n\n      printf(\"Enter the student's assigment score: \"); scanf(\"%f\",  &amp;st[*itemcount].assigment);\n      if (st[*itemcount].assigment &lt; 0 || st[*itemcount].assigment &gt; 100)\n      {\n        printf(\"invalid\\n\"); goto againAssigment;\n      }\n\n    againMidterm:\n\n      printf(\"Enter the student's mid-term score: \"); scanf(\"%f\", &amp;st[*itemcount].midterm);\n      if (st[*itemcount].midterm &lt; 0 || st[*itemcount].midterm &gt; 100)\n      {\n         printf(\"invalid\\n\"); goto againMidterm;\n      }\n\n    againFinal:\n\n       printf(\"Enter the student's final score: \"); scanf(\"%f\", &amp;st[*itemcount].final);\n       if (st[*itemcount].final &lt; 0 || st[*itemcount].final &gt; 100)\n       {\n          printf(\"invalid\\n\"); goto againFinal;\n       }\n\n       st[*itemcount].total = st[*itemcount].quiz1 + st[*itemcount].quiz2 +   st[*itemcount].assigment + st[*itemcount].midterm + st[*itemcount].final;\n\n      ++(*itemcount);\n}\nint main()\n{\n  student st[20];\n  int itemcount = 0,i=0;\n  char confirm;\n  do\n  {\n    add_rec(st, &amp;itemcount);\n    printf(\"Press y or Y to continue: \");\n    scanf(\"%c\", &amp;confirm);\n  } while (confirm == 'y' || confirm == 'Y');\n  for (i = 0; i &lt; itemcount; i++)\n  {\n    printf(\"%s\\n\", st[i].stname);\n    printf(\"%d\\n\", st[i].stnumber);\n    printf(\"%c\\n\", st[i].gender);\n    printf(\"%f\\n\", st[i].quiz1);\n    printf(\"%f\\n\", st[i].quiz2);\n    printf(\"%f\\n\", st[i].assigment);\n    printf(\"%f\\n\", st[i].midterm);\n    printf(\"%f\\n\", st[i].final);\n    printf(\"%f\\n\", st[i].total);\n    printf(\"\\n\");\n  }\n  return 0;\n }\n</code></pre>\n\n<p>The Things which I changed/Added to your code are,</p>\n\n<ol>\n<li><p>I Changed <code>char stnumber[10];</code> to <code>int stnumber</code></p></li>\n<li><p>Accordingly,I changed this code </p>\n\n<pre><code> againID:\n  printf(\"\\nEnter the student's ID (9 digits): \");\n  scanf(\" %s\",&amp;st[*itemcount].stnumber);\n  if (strlen(st[*itemcount].stnumber) != 9)\n  {\n    printf(\"invalid\\n\"); goto againID;\n  }\n</code></pre>\n\n<p>To this code,</p>\n\n<pre><code> againID:\n  int temp = 0,count=0;\n  printf(\"\\nEnter the student's ID (9 digits): \");\n  scanf(\"%d\", &amp;st[*itemcount].stnumber);\n  temp = st[*itemcount].stnumber;\n  while (temp != 0)//Checks if it 9 digit number or not\n  {\n     temp = temp / 10;\n     ++count;\n  }\n  if (count!= 9)\n  {\n     printf(\"Error!9 digit Number!\\n\");\n     goto againID;\n  }\n</code></pre></li>\n<li><p>Changed this code <code>scanf(\"%s\",&amp;confirm);</code> to <code>scanf(\"%c\",&amp;confirm);</code></p></li>\n<li><p>Finally, I added the following code to show that your data is saved.</p>\n\n<pre><code>for (i = 0; i &lt; itemcount; i++)\n{\n  printf(\"%s\\n\", st[i].stname);\n  printf(\"%d\\n\", st[i].stnumber);\n  printf(\"%c\\n\", st[i].gender);\n  printf(\"%f\\n\", st[i].quiz1);\n  printf(\"%f\\n\", st[i].quiz2);\n  printf(\"%f\\n\", st[i].assigment);\n  printf(\"%f\\n\", st[i].midterm);\n  printf(\"%f\\n\", st[i].final);\n  printf(\"%f\\n\", st[i].total);\n  printf(\"\\n\");\n}\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 5275910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbe40d249d478b527ee8c30317fb0a0?s=128&d=identicon&r=PG", "display_name": "Ron Halfon", "link": "https://stackoverflow.com/users/5275910/ron-halfon"}, "edited": false, "score": 0, "creation_date": 1446677647, "post_id": 33533375, "comment_id": 54848837, "body": "Thanks alot it worked :) BTW can you please explain why should I remove the &amp; in those spesific 2 lines?"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 85, "user_id": 5275910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbe40d249d478b527ee8c30317fb0a0?s=128&d=identicon&r=PG", "display_name": "Ron Halfon", "link": "https://stackoverflow.com/users/5275910/ron-halfon"}, "edited": false, "score": 0, "creation_date": 1446677887, "post_id": 33533375, "comment_id": 54848923, "body": "st.stnumber is already a pointer, is a char[20], the same applies to the other one."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 85, "user_id": 5275910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbe40d249d478b527ee8c30317fb0a0?s=128&d=identicon&r=PG", "display_name": "Ron Halfon", "link": "https://stackoverflow.com/users/5275910/ron-halfon"}, "edited": false, "score": 0, "creation_date": 1446678102, "post_id": 33533375, "comment_id": 54848998, "body": "@Ron Halfon because they are defined as, respectively char[20] and char[10] in the struct and others are not."}], "tags": [], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "is_accepted": true, "score": 1, "last_activity_date": 1446676460, "last_edit_date": 1495541725, "creation_date": 1446676460, "answer_id": 33533375, "question_id": 33531980, "link": "https://stackoverflow.com/questions/33531980/the-data-is-not-saved-in-the-array/33533375#33533375", "title": "The data is not saved in the array", "body": "<p>The first two call to scanf in add_rec are wrong you have to remove the &amp;:</p>\n\n<p>those are the lines corrected:</p>\n\n<pre><code>scanf(\"%s\", st[*count].stnumber);\n\nscanf(\"%s\", st[*count].stname);\n</code></pre>\n\n<p>Moreover in the main this:</p>\n\n<pre><code>scanf(\"%s\",&amp;confirm);\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>scanf(\" %c\",&amp;confirm);\n</code></pre>\n\n<p>see also <a href=\"https://stackoverflow.com/questions/6582322/what-does-space-in-scanf-mean\">What does space in scanf mean?</a></p>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1446677407, "creation_date": 1446677407, "answer_id": 33533581, "question_id": 33531980, "link": "https://stackoverflow.com/questions/33531980/the-data-is-not-saved-in-the-array/33533581#33533581", "title": "The data is not saved in the array", "body": "<p>It might have been easier to see cleaned up a bit.  Good style is important because it let's you see the logics bugs more easily.  Don't go past 80 chars per line.  Simplify where possible.  Don't use goto's.  You used negative if's instead of positive if's.  add_rec had huge amounts of needless replication.</p>\n\n<p>I cleaned up Mutex202's solution for your existing style [credit to Mutex202]:</p>\n\n<pre><code>void\nadd_rec_score(const char *prompt,float *score)\n{\n\n    while (1) {\n        printf(\"Enter the student's %s score: \",prompt);\n        scanf(\"%f\", score);\n        if (*score &gt;= 0 &amp;&amp; *score &lt;= 100)\n            break;\n        printf(\"invalid\\n\");\n    }\n}\n\nvoid\nadd_rec(student *st, int *itemcount)\n{\n    int temp;\n    int count;\n\n    st += *itemcount;\n\n    while (1) {\n        printf(\"\\nEnter the student's ID (9 digits): \");\n        scanf(\"%d\", &amp;st-&gt;stnumber);\n        temp = st-&gt;stnumber;\n\n        // Checks if it 9 digit number or not\n        count = 0;\n        while (temp != 0) {\n            temp = temp / 10;\n            ++count;\n        }\n        if (count == 9)\n            break;\n\n        printf(\"Error!9 digit Number!\\n\");\n    }\n\n    printf(\"Enter the student's Name: \");\n    scanf(\"%s\", &amp;st-&gt;stname);\n\n    while (1) {\n        printf(\"Enter the student's Gender(F or M): \");\n        scanf(\"%s\", &amp;st-&gt;gender);\n        if (st-&gt;gender == 'm' || st-&gt;gender == 'M' ||\n            st-&gt;gender == 'f' || st-&gt;gender == 'F')\n            break;\n        printf(\"invalid\\n\");\n    }\n\n    add_rec_score(\"1st quiz\",&amp;st-&gt;quiz1);\n    add_rec_score(\"2nd quiz\",&amp;st-&gt;quiz2);\n    add_rec_score(\"assignment\",&amp;st-&gt;assignment);\n    add_rec_score(\"mid-term\",&amp;st-&gt;midterm);\n    add_rec_score(\"final\",&amp;st-&gt;final);\n\n    st-&gt;total = st-&gt;quiz1 + st-&gt;quiz2 + st-&gt;assigment + st-&gt;midterm + st-&gt;final;\n\n    *itemcount += 1;\n}\n</code></pre>\n\n<p>Notice that I replaced the <code>st[*itemcount].whatever</code> with <code>st-&gt;whatever</code> because it was invariant throughout add_rec.</p>\n"}], "owner": {"reputation": 85, "user_id": 5275910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbe40d249d478b527ee8c30317fb0a0?s=128&d=identicon&r=PG", "display_name": "Ron Halfon", "link": "https://stackoverflow.com/users/5275910/ron-halfon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 33533375, "answer_count": 3, "score": -1, "last_activity_date": 1446677407, "creation_date": 1446671090, "last_edit_date": 1446671923, "question_id": 33531980, "link": "https://stackoverflow.com/questions/33531980/the-data-is-not-saved-in-the-array", "title": "The data is not saved in the array", "body": "<p>For some reason, when I insert data to the student struct, the data that I inserted is not saved.</p>\n\n<p>If I print <code>st[]</code> after each run, the data that I inserted in <code>scanf()</code> is not beign saved.</p>\n\n<p>What should I do so that <code>add_rec()</code> will save my data?</p>\n\n<p>my code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct\n{\n    char stnumber[10];\n    char stname[20];\n    char gender;\n    float quiz1;\n    float quiz2;\n    float assigment;\n    float midterm;\n    float final;\n    float total;\n}student;\n\n/*\nDefining the add_rec(student[] st, int *itemcount) function to add a new record to the the array of student objects.\nThis function takes two arguments.\nThe first argument is the array of student objects(st) and the second argument is the number of items in the array.\nThis function firstly checks the new record(using the search function that is defined in the next step) before it is allowed to be appended to the array to avoid duplicate records.\nWhen the new item is added the value of itemcount variable increases by 1 that means the number of records in the list increases.\n*/\nvoid add_rec(student st[],int *itemcount)\n{\n    againID:\n    printf(\"\\nEnter the student's ID (9 digits): \");\n    scanf(\" %s\",&amp;st[*itemcount].stnumber);\n    if (strlen(st[*itemcount].stnumber) != 9)\n    {\n        printf(\"invalid\\n\"); goto againID;\n    }\n\nprintf(\"Enter the student's Name: \");\nscanf(\" %s\",&amp;st[*itemcount].stname);\n\nagainGender:\nprintf(\"Enter the student's Gender(F or M): \");\nscanf(\" %c\",&amp;st[*itemcount].gender);\nif (st[*itemcount].gender != 'm' &amp;&amp; st[*itemcount].gender != 'M' &amp;&amp; st[*itemcount].gender != 'f' &amp;&amp; st[*itemcount].gender != 'F')\n{\n    printf(\"invalid\\n\"); goto againGender;\n}\n\nagainquiz1:\nprintf(\"Enter the student's 1st quiz score: \");\nscanf(\" %f\",&amp;st[*itemcount].quiz1);\nif (st[*itemcount].quiz1 &lt; 0 || st[*itemcount].quiz1 &gt; 100)\n{\n    printf(\"invalid\\n\"); goto againquiz1;\n}\n\nagainquiz2:\nprintf(\"Enter the student's 2nd quiz score: \");scanf(\" %f\",&amp;st[*itemcount].quiz2);\nif (st[*itemcount].quiz2 &lt; 0 || st[*itemcount].quiz2 &gt; 100)\n{\n    printf(\"invalid\\n\"); goto againquiz2;\n}\n\nagainAssigment:\nprintf(\"Enter the student's assigment score: \");scanf(\" %f\",&amp;st[*itemcount].assigment);\nif (st[*itemcount].assigment &lt; 0 || st[*itemcount].assigment &gt; 100)\n{\n    printf(\"invalid\\n\"); goto againAssigment;\n}\n\nagainMidterm:\nprintf(\"Enter the student's mid-term score: \");scanf(\" %f\",&amp;st[*itemcount].midterm);\nif (st[*itemcount].midterm &lt; 0 || st[*itemcount].midterm &gt; 100)\n{\n    printf(\"invalid\\n\"); goto againMidterm;\n}\n\nagainFinal:\nprintf(\"Enter the student's final score: \");scanf(\" %f\",&amp;st[*itemcount].final);\nif (st[*itemcount].final &lt; 0 || st[*itemcount].final &gt; 100)\n{\n    printf(\"invalid\\n\"); goto againFinal;\n}\n\nst[*itemcount].total = st[*itemcount].quiz1 + st[*itemcount].quiz2 + st[*itemcount].assigment + st[*itemcount].midterm + st[*itemcount].final;\n\n++(*itemcount);\n}\n\nint main()\n{\n    student st[20];\n    int itemcount=0;\n    char confirm;\n    do\n    {\n        add_rec(st, &amp;itemcount);\n        printf(\"Press y or Y to continue: \");\n                scanf(\"%s\",&amp;confirm);\n    } while(confirm=='y'||confirm=='Y');\n    return 0;\n}\n</code></pre>\n\n<p>Thanks to all the helpers :)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446671427, "post_id": 33531976, "comment_id": 54845719, "body": "What if you run it as compiled executable? Anyway, you are allocating <i>very</i> large arrays on stack here, which might just overflow the allowed stack size."}, {"owner": {"reputation": 1, "user_id": 5513530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0825de6bbfe8baf72298fdd2b650e4a5?s=128&d=identicon&r=PG&f=1", "display_name": "Pepe P&#233;rez", "link": "https://stackoverflow.com/users/5513530/pepe-p%c3%a9rez"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446671594, "post_id": 33531976, "comment_id": 54845823, "body": "I changed them to 100, and now it works :D. How do I put to enlarge the string in function of how many are needed?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446671611, "post_id": 33531976, "comment_id": 54845832, "body": "Some news: google about &quot;debugger&quot;. And you can even use <code>printf</code> to print intermediate results."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446671757, "post_id": 33531976, "comment_id": 54845913, "body": "Either declare these arrays as global, or as <code>static</code> or allocate them dynamically (which might fail as well)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446675354, "post_id": 33531976, "comment_id": 54847813, "body": "@EugeneSh.: <code>static</code> actually <b>is</b> global (well, the C standard does not use this term in this context). You might think about external vs. internal linkage."}, {"owner": {"reputation": 6798, "user_id": 4174897, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gS0gI.jpg?s=128&g=1", "display_name": "Kyll", "link": "https://stackoverflow.com/users/4174897/kyll"}, "edited": false, "score": 1, "creation_date": 1446677400, "post_id": 33531976, "comment_id": 54848757, "body": "Please do not deface your own questions!"}], "answers": [{"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 5513530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0825de6bbfe8baf72298fdd2b650e4a5?s=128&d=identicon&r=PG&f=1", "display_name": "Pepe P&#233;rez", "link": "https://stackoverflow.com/users/5513530/pepe-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1446672089, "post_id": 33532184, "comment_id": 54846101, "body": "@PepeP&#233;rez Glad I could help.  Feel free to <a href=\"http://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1446672306, "last_edit_date": 1446672306, "creation_date": 1446671894, "answer_id": 33532184, "question_id": 33531976, "link": "https://stackoverflow.com/questions/33531976/problems-with-this-c-code/33532184#33532184", "title": "Problems with this C code", "body": "<p>Two issues:</p>\n\n<p>First, you have some very large arrays in main, which are allocated on the stack.  This can cause issues with stack overflow.</p>\n\n<p>Either declare these large arrays as globals, or allocate them dynamically using <code>malloc</code>.</p>\n\n<p>The second issue is that <code>i</code> is not initialized when entering the first <code>do...while</code> loop.   This value could be anything, so it could result in indexing off the end of the array <code>v</code>, leading to undefined behavior.  This is what caused your program to crash.  The fact that it didn't crash after changing the size of the arrays was luck.  Any other change to the code could cause the crash to resurface.</p>\n\n<p>Set <code>i</code> to 0 and you should be fine.</p>\n\n<pre><code>i=0;\ndo{\n    i++;\n    printf(\"N\u00famero de votos do %d\u00ba partido: \",i);\n    scanf(\"%f\",&amp;v[i]);\n}while(i&lt;n);\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Regarding making the block of code you mentioned a function, move any variables defined in <code>main</code> that are used ONLY in this block to the function, and pass in the remaining parameters that <code>main</code> uses.</p>\n"}], "owner": {"reputation": 1, "user_id": 5513530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0825de6bbfe8baf72298fdd2b650e4a5?s=128&d=identicon&r=PG&f=1", "display_name": "Pepe P&#233;rez", "link": "https://stackoverflow.com/users/5513530/pepe-p%c3%a9rez"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1446678387, "accepted_answer_id": 33532184, "answer_count": 1, "score": -3, "last_activity_date": 1446677380, "creation_date": 1446671051, "last_edit_date": 1446677380, "question_id": 33531976, "link": "https://stackoverflow.com/questions/33531976/problems-with-this-c-code", "closed_reason": "Not suitable for this site", "title": "Problems with this C code", "body": "<p>I build a C code to apply automatically D'Hondt Law. So I did it on C language, using NetBeans 8.0.2. I am trying to compile it (having no errors) and it gives this message <code>RUN FAILED (exit value 1, total time: 4s)</code>. I checked it a lot of times without result, that's why I am asking here. I'd apprecciate some help. <strong>SOLVED</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n\nint LerDeputados() {\n    int d;\n    printf(\"Indique o n\u00famero de deputados a repartir: \");\n    scanf(\"%d\",&amp;d);    \n    return d;\n}\n\nint LerPartidos() {\n    int n;\n    printf(\"Introduza o n\u00famero de partidos: \");\n    scanf(\"%d\",&amp;n);\n    return n;\n}\n\nint main(void) {\n    int d, n, i, k, m, j, z, x, aleatorio, b, dip[1000];\n    float e[1000][1000], maximo[1000], v[1000];\n    d= LerDeputados();\n    n= LerPartidos();\n\n    srand(time(NULL));\n    aleatorio=rand();\n\n    do{\n        i++;\n        printf(\"N\u00famero de votos do %d\u00ba partido: \",i);\n        scanf(\"%f\",&amp;v[i]);       \n    }while(i&lt;n);\n\n    for(j=1;j&lt;=d;j++){\n        for(k=1;k&lt;=i;k++){\n            e[j][k]=v[k]/j;\n        }         \n    }\n    for(x=1;x&lt;=n;x++) {\n        dip[x]=0;\n    }\n\n    for(m=1;m&lt;=d;m++){\n        maximo[m]=0;\n        for (j=1;j&lt;=d;j++) {\n            for (k=1;k&lt;=i;k++) {\n                if (e[j][k]&gt;maximo[m]) {\n                    maximo[m] = e[j][k];\n                    z=j;\n                    x=k; \n\n                }\n                else if (maximo[m]==e[j][k]) {\n                    if(v[k]&gt;v[x]) {\n                        maximo[m] = e[j][k];\n                        z=j;\n                        x=k; \n                    }\n                    else if(v[k]&lt;v[x]) {                        \n                    }\n                    else {\n                        if(aleatorio%2==0){\n                            maximo[m] = e[j][k];\n                            z=j;\n                            x=k;                           \n                        }\n                    }\n                }    \n            }\n        }\n        dip[x]=dip[x]+1;\n        e[z][x]=0;                     \n    }\n\n    printf(\"\\n\");\n\n    for(b=1;b&lt;=n;b++) {\n        printf(\"\\nO partido %d acadou %d diputados.\",b,dip[b]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>And how can I implement this code as a function that works on main?</p>\n\n<pre><code> for(m=1;m&lt;=d;m++){\n        maximo[m]=0;\n        for (j=1;j&lt;=d;j++) {\n            for (k=1;k&lt;=i;k++) {\n                if (e[j][k]&gt;maximo[m]) {\n                    maximo[m] = e[j][k];\n                    z=j;\n                    x=k; \n\n                }\n                else if (maximo[m]==e[j][k]) {\n                    if(v[k]&gt;v[x]) {\n                        maximo[m] = e[j][k];\n                        z=j;\n                        x=k; \n                    }\n                    else if(v[k]&lt;v[x]) {                        \n                    }\n                    else {\n                        if(aleatorio%2==0){\n                            maximo[m] = e[j][k];\n                            z=j;\n                            x=k;                           \n                        }\n                    }\n                }    \n            }\n        }\n        dip[x]=dip[x]+1;\n        e[z][x]=0;                     \n    }\n</code></pre>\n"}, {"tags": ["c", "gcc", "mathgl"], "answers": [{"comments": [{"owner": {"reputation": 2419, "user_id": 2094707, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/69d58eb588b8c86d9d7f3df2da72d2a0?s=128&d=identicon&r=PG", "display_name": "Stein", "link": "https://stackoverflow.com/users/2094707/stein"}, "edited": false, "score": 0, "creation_date": 1446756703, "post_id": 33553180, "comment_id": 54888615, "body": "ok I recompilled from source and it worked fine. I&#39;ll report it to mint as a bug."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 1, "last_activity_date": 1446751811, "creation_date": 1446751811, "answer_id": 33553180, "question_id": 33531866, "link": "https://stackoverflow.com/questions/33531866/compiling-mathgl-c-example/33553180#33553180", "title": "Compiling mathgl C-Example", "body": "<p>You appear to have an old version of the library, in which this is a bug.</p>\n\n<p>See this <a href=\"https://groups.google.com/forum/#!msg/mathgl/wSoS9I3C7JA/X3TSrdysyD0J\" rel=\"nofollow\">bug report</a>\nfrom May 2013. The Alexey Balakin who confirms the bug is the lead developer of MathGL.</p>\n\n<p>See that the bug is fixed in MathGL 2.3.3 version of <a href=\"https://fossies.org/dox/mathgl-2.3.3/data__cf_8h_source.html\" rel=\"nofollow\">data_ch.h</a>,\nwhere the declaration is:</p>\n\n<pre><code>void MGL_EXPORT mgl_fft(double *x, long s, long n, const void *wt, void *ws, int inv);\n</code></pre>\n\n<p>with <code>bool</code> replaced by <code>int</code>.</p>\n"}], "owner": {"reputation": 2419, "user_id": 2094707, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/69d58eb588b8c86d9d7f3df2da72d2a0?s=128&d=identicon&r=PG", "display_name": "Stein", "link": "https://stackoverflow.com/users/2094707/stein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "accepted_answer_id": 33553180, "answer_count": 1, "score": 3, "last_activity_date": 1446751811, "creation_date": 1446670664, "last_edit_date": 1446735302, "question_id": 33531866, "link": "https://stackoverflow.com/questions/33531866/compiling-mathgl-c-example", "title": "Compiling mathgl C-Example", "body": "<p>I'm trying to compile the first example of the MathGL library in C:</p>\n\n<p><a href=\"http://mathgl.sourceforge.net/doc_en/Examples.html\" rel=\"nofollow\">http://mathgl.sourceforge.net/doc_en/Examples.html</a></p>\n\n<pre><code>#include &lt;mgl2/mgl_cf.h&gt;\n\nint main()\n{\n  HMGL gr = mgl_create_graph(600,400);\n  mgl_fplot(gr,\"sin(pi*x)\",\"\",\"\");\n  mgl_write_frame(gr,\"test.png\",\"\");\n  mgl_delete_graph(gr);\n}\n</code></pre>\n\n<p>I installed libmgl-dev using aptitude and rejected the first option offered, because aptitude wanted to remove a number of different programs and accepted the second option, which only upgraded a few.</p>\n\n<p>If I try to compile:</p>\n\n<pre><code>gcc test.c  -o test -lmgl\nIn file included from /usr/include/mgl2/mgl_cf.h:29:0,\n                 from test.c:1:\n/usr/include/mgl2/data_cf.h:318:78: error: unknown type name \u2018bool\u2019\n EXPORT mgl_fft(double *x, long s, long n, const void *wt, void *ws, bool inv);\n</code></pre>\n\n<p>So I tried to add <code>#include &lt;stdbool.h&gt;</code> and tried flags like <code>-std=gnu11</code> or <code>-std=c11</code> and <code>-std=c99</code>. None of which worked. I tried adding the flag <code>-lmgl</code> (I even read that I should put it at the very end).</p>\n\n<p>How do I compile this example?</p>\n"}, {"tags": ["c", "memory", "malloc", "dynamic-memory-allocation", "gmp"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 2, "creation_date": 1446670491, "post_id": 33531762, "comment_id": 54845210, "body": "Argh, the code makes no sense..."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1446670515, "post_id": 33531762, "comment_id": 54845225, "body": "Why not use the <code>pow</code> function instead of the <code>normalPower</code> function? The <code>pow</code> function is optimized ."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446670588, "post_id": 33531762, "comment_id": 54845267, "body": "You don&#39;t need to <i>explicitly</i> <code>malloc</code>  for one GMP bignum. The GMP library handles its internal memory allocation. You really should spend hours reading its documentation"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1446670678, "post_id": 33531762, "comment_id": 54845309, "body": "As a beginner, you really should use C++, which hides most of the pain for you. <code>#include &lt;gmpxx.h&gt;</code>, then use the type <code>mpz_class</code> like you would use int, except that it magically has infinite precision."}, {"owner": {"reputation": 21, "user_id": 5085740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5669414092ee2a49eb5a1c49ff3b3f?s=128&d=identicon&r=PG&f=1", "display_name": "FieryHammer", "link": "https://stackoverflow.com/users/5085740/fieryhammer"}, "reply_to_user": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1446670957, "post_id": 33531762, "comment_id": 54845469, "body": "@stackptr that&#39;s because I&#39;m stupid, and completely forgot that exists. Maybe my brain was too occupied, but thanks for reminding me, going to fix it."}, {"owner": {"reputation": 21, "user_id": 5085740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5669414092ee2a49eb5a1c49ff3b3f?s=128&d=identicon&r=PG&f=1", "display_name": "FieryHammer", "link": "https://stackoverflow.com/users/5085740/fieryhammer"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1446671003, "post_id": 33531762, "comment_id": 54845489, "body": "@MarcGlisse I&#39;d really like to as I saw it as a solution, but unfortunatelly the prof at my uni really wants us to write this in C."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446671131, "post_id": 33531762, "comment_id": 54845551, "body": "Did you take time to read the documentation of GMP?"}, {"owner": {"reputation": 21, "user_id": 5085740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5669414092ee2a49eb5a1c49ff3b3f?s=128&d=identicon&r=PG&f=1", "display_name": "FieryHammer", "link": "https://stackoverflow.com/users/5085740/fieryhammer"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446671487, "post_id": 33531762, "comment_id": 54845745, "body": "@BasileStarynkevitch I did, but still this problem persists and anywhere I looked people solved similar issues by using malloc and telling GMP how much space to use."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1446671798, "post_id": 33531762, "comment_id": 54845934, "body": "Then, compile with all warnings &amp; debug info (<code>gcc -Wall -Wextra -g</code>) -perhaps not only your code, but GMPlib itself. Use the debugger (<code>gdb</code>) and <code>valgrind</code>  ; my first feeling is that your code does not smell very good."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1446672441, "post_id": 33531762, "comment_id": 54846276, "body": "Would <a href=\"https://gmplib.org/manual/Number-Theoretic-Functions.html#index-mpz_005ffib_005fui\" rel=\"nofollow noreferrer\">gmplib.org/manual/&hellip;</a> be considered cheating?"}, {"owner": {"reputation": 21, "user_id": 5085740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5669414092ee2a49eb5a1c49ff3b3f?s=128&d=identicon&r=PG&f=1", "display_name": "FieryHammer", "link": "https://stackoverflow.com/users/5085740/fieryhammer"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1446672806, "post_id": 33531762, "comment_id": 54846458, "body": "@MarcGlisse Probably, but if all fails, I&#39;m going to check it out, maybe it can help some way."}], "answers": [{"tags": [], "owner": {"reputation": 261, "user_id": 4173899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc74a74b89e30c83704d3224e97622d?s=128&d=identicon&r=PG&f=1", "display_name": "scerrecrow", "link": "https://stackoverflow.com/users/4173899/scerrecrow"}, "is_accepted": false, "score": -3, "last_activity_date": 1446670377, "creation_date": 1446670377, "answer_id": 33531784, "question_id": 33531762, "link": "https://stackoverflow.com/questions/33531762/using-malloc-to-handle-large-numbers-with-gmp/33531784#33531784", "title": "Using Malloc to handle large numbers with GMP", "body": "<p>If GMP library can't handle it, look into using a char* with your algorithm to take care of the number. You can easily out do anything GMP can support.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5085740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5669414092ee2a49eb5a1c49ff3b3f?s=128&d=identicon&r=PG&f=1", "display_name": "FieryHammer", "link": "https://stackoverflow.com/users/5085740/fieryhammer"}, "edited": false, "score": 0, "creation_date": 1446672507, "post_id": 33532228, "comment_id": 54846307, "body": "My original codes used simply mpz_t-s and mpz_clear()-ing as I have mentioned. I understand that I use malloc in a bad way in my code but I still need a way to increase the memory size mpz_t uses, as by default it won&#39;t allocate enough memory after a while."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 21, "user_id": 5085740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5669414092ee2a49eb5a1c49ff3b3f?s=128&d=identicon&r=PG&f=1", "display_name": "FieryHammer", "link": "https://stackoverflow.com/users/5085740/fieryhammer"}, "edited": false, "score": 1, "creation_date": 1446672551, "post_id": 33532228, "comment_id": 54846334, "body": "That should go into your question, not as a comment."}, {"owner": {"reputation": 21, "user_id": 5085740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5669414092ee2a49eb5a1c49ff3b3f?s=128&d=identicon&r=PG&f=1", "display_name": "FieryHammer", "link": "https://stackoverflow.com/users/5085740/fieryhammer"}, "edited": false, "score": 0, "creation_date": 1446746702, "post_id": 33532228, "comment_id": 54882854, "body": "Alright, you were right, and I feel soooo stupid. It turned out that everything worked fine except this: char res[10000]; was too small. I needed it to use more space."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 0, "last_activity_date": 1446674058, "last_edit_date": 1446674058, "creation_date": 1446672087, "answer_id": 33532228, "question_id": 33531762, "link": "https://stackoverflow.com/questions/33531762/using-malloc-to-handle-large-numbers-with-gmp/33532228#33532228", "title": "Using Malloc to handle large numbers with GMP", "body": "<p>These lines:</p>\n\n<pre><code>mpz_t *fib1;\nmpz_t *fib2;\nmpz_t *temp;\n\nfib1 = (mpz_t *) malloc(101000000 * sizeof(mpz_t));\nfib2 = (mpz_t *) malloc(101000000 * sizeof(mpz_t));\ntemp = (mpz_t *) malloc(101000000 * sizeof(mpz_t));\n</code></pre>\n\n<p>look very wrong to me (and your entire source code smells very bad, you should drop it). It seems that you want to allocate 101000000 different bignums, and I don't understand why you need that much.</p>\n\n<p>Read carefully the documentation of <a href=\"https://gmplib.org/\" rel=\"nofollow\">GMPlib</a> and the definition of <a href=\"https://en.wikipedia.org/wiki/Fibonacci_number\" rel=\"nofollow\">Fibonnaci numbers</a>. You only need a few <code>mpz_t</code> (very probably you need less than half a dozen of <code>mpz_t</code> variables), not many millions of them. Think about the mathematic definition of Fibonacci <em>before</em> coding your program. Notice that if you know <em>Fib(10000)</em> and <em>Fib(10001)</em> computing <em>Fib(10002)</em> is easy with GMPlib and then you don't need <em>Fib(10000)</em> any more and you can print <em>Fib(10002)</em> as soon as it has been computed. Be aware that you can use <a href=\"https://gmplib.org/manual/Assigning-Integers.html\" rel=\"nofollow\">mpz_set</a> to assign GMP big integers.</p>\n\n<p><sup>(you really should start rewriting your program from scratch <em>after</em> having thinking on the math; you can dump your existing code)</sup></p>\n\n<p>Don't forget to initialize every variable, to call <a href=\"https://gmplib.org/manual/Initializing-Integers.html\" rel=\"nofollow\">mpz_init</a> appropriately. </p>\n\n<p>Compile with all warnings and debug info (<code>gcc -Wall -Wextra -g</code>). <strong>Use the debugger</strong> (<code>gdb</code>) and <a href=\"http://valgrind.org/\" rel=\"nofollow\">valgrind</a> and perhaps <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html\" rel=\"nofollow\"><code>-fsanitize=</code>  debugging options</a></p>\n\n<p>As far as I understand you don't need even a <em>single</em> explicit call to <code>malloc</code>  in your code (of course, internally GMPlib is using <code>malloc</code>).</p>\n\n<p><sup>(BTW, as a student it is helpful to assume that your exercise is doable quite easily)</sup></p>\n"}], "owner": {"reputation": 21, "user_id": 5085740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5669414092ee2a49eb5a1c49ff3b3f?s=128&d=identicon&r=PG&f=1", "display_name": "FieryHammer", "link": "https://stackoverflow.com/users/5085740/fieryhammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 33532228, "answer_count": 2, "score": -1, "last_activity_date": 1446747262, "creation_date": 1446670275, "last_edit_date": 1446747262, "question_id": 33531762, "link": "https://stackoverflow.com/questions/33531762/using-malloc-to-handle-large-numbers-with-gmp", "title": "Using Malloc to handle large numbers with GMP", "body": "<h3>Solved:</h3>\n\n<p>I feel so stupid. GMP is fine and it was my oversight. After using <code>size_t mpz_sizeinbase (const mpz_t op, int base)</code>, I realised my char array I used to copy the result into was too small. Increasing it size solved it. Thanks for the help!</p>\n\n<hr>\n\n<p>My task is to write a C program which calculates the elements of the Fibonacci Sequence from the 1024th element to the 1048576th element (from the 10th power of 2 to the 20th power of 2, increasing by the power of 2). For this I'm using GMP library to handle the numbers. The problem is, that around the 17th power of 2, the number is so big, that even GMP can't handle it, which means I should use <strong>malloc()</strong>.</p>\n\n<p>Here is my <strong>main()</strong> (I modified the pasted code by taking out unnecessary parts like writing to file and time measurements which will be used for another part of the program):</p>\n\n<pre><code>int main(){\n    int powersOfTwo[11];\n    char res[10000];\n    char *c;\n    c = res;\n\n    for(int i = 0; i &lt; 11; i++){\n        powersOfTwo[i] = normalPower(2,i+10);\n    }\n    for(int i = 0; i &lt; 11; i++){\n        fibo(c, powersOfTwo[i]);\n        printf(\"The %d th element of Fibonacci is %s\\n\",powersOfTwo[i],res);\n        memset(res, 0, sizeof res);\n    }\n\n    return 0;\n} \n</code></pre>\n\n<p>Now here is the simple <strong>normalPower</strong> function (Doesn't really have anything to do with the problem just for the sake of clarity):</p>\n\n<pre><code>int normalPower(int n1, int n2){\n    if(n2 == 0){\n        return 1;\n    }else{\n        int temp = n1;\n        for(int i = 1; i &lt; n2; i++){\n            temp *= n1;\n        }\n        return temp;\n    }\n}\n</code></pre>\n\n<p>And now the problem, the <strong>fibo</strong> function:</p>\n\n<pre><code>void fibo(char *c, int n){\n    mpz_t *fib1;\n    mpz_t *fib2;\n    mpz_t *temp;\n\n    fib1 = (mpz_t *) malloc(101000000 * sizeof(mpz_t));\n    fib2 = (mpz_t *) malloc(101000000 * sizeof(mpz_t));\n    temp = (mpz_t *) malloc(101000000 * sizeof(mpz_t));\n\n    if (NULL == fib1 || NULL == fib2 || NULL == temp){\n      printf(\"ERROR: Out of memory\\n\");\n    }\n    mpz_init(*fib1);\n    mpz_init(*fib2);\n    mpz_init(*temp);\n\n    mpz_set_str(*fib1,\"0\",10);\n    mpz_set_str(*fib2,\"1\",10);\n\n    int i;\n    if(n == 0){\n      char *d = mpz_get_str(NULL,10,*fib1);\n      strcpy(c,d);\n    }\n\n    if(n == 1){\n      char *d = mpz_get_str(NULL,10,*fib2);\n      strcpy(c,d);\n    }\n\n    if(n &gt; 1){\n      for(i = 1; i &lt; n; i++){\n          mpz_set(*temp, *fib2);\n          mpz_add(*fib2, *fib1, *fib2);\n          mpz_set(*fib1,*temp);\n\n      }\n      char *d = mpz_get_str(NULL,10,*fib2);\n      strcpy(c,d);\n    }\n\n    free(fib1);\n    free(fib2);\n    free(temp); \n}\n</code></pre>\n\n<p>Originally I used simply mpz_t-s, initing them and mpz_clear()-ing them in the end, no pointers and malloc(), but that led to <strong>Segmentation fault (core dumped)</strong> error after calculating the 2 on the power of 17(-ish) element. This was a solution I found on the Internet and this was almost the biggest number I could allocate, still nothing changes, the program stops at the same point with the same error message. I also tried to use <strong>mp_set_memory_functions()</strong> and creating a custom <strong>mallocWrapper()</strong> and giving it the GMP, but that didn't seem to work either. Of course I'm 99% sure, it's because I'm new to GMP and relative new to using <strong>malloc()</strong> so my code is probably making most of you tearing your hair out right now and I apologise for that.</p>\n\n<p>So basically my question is: How should I use <strong>malloc()</strong> to get enough memory for the numbers? </p>\n\n<p>Thanks for all the help in advance!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 7, "creation_date": 1446669843, "post_id": 33531606, "comment_id": 54844822, "body": "<a href=\"http://stackoverflow.com/q/588004/3185968\">stackoverflow.com/q/588004/3185968</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446669910, "post_id": 33531606, "comment_id": 54844859, "body": "Everything is right except your expectation :)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446670388, "post_id": 33531606, "comment_id": 54845152, "body": "You expect <code>suma-cele</code> to be 0.56, but it might be 0.5599999999999999."}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1446670453, "post_id": 33531606, "comment_id": 54845183, "body": "Ehm, since when is <code>2 ... 4</code> valid. What did I miss?"}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446670486, "post_id": 33531606, "comment_id": 54845204, "body": "@BoPersson It&#39;s float. Not nearly that many nines."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446670725, "post_id": 33531606, "comment_id": 54845346, "body": "The actual value is 0.559999942779541015625. So multiply by 100 and round, e.g.  <code>centy = round( (suma-cele) * 100.0 );</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446671697, "post_id": 33531606, "comment_id": 54845877, "body": "Most important fact when dealing with currencies: <b>Do not use floating point</b>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446672649, "post_id": 33531606, "comment_id": 54846377, "body": "@Olaf That&#39;s a fine point of view, and I don&#39;t disagree with you. I suggest that you post an answer that shows how to input a fixed point number, because that&#39;s the part that&#39;s difficult for a beginner."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446672817, "post_id": 33531606, "comment_id": 54846467, "body": "@user3386109: Noo time/too lazy. Feel free. But there are already dozens  of Q/A here about this subject. They pop up regularily like new &quot;security&quot; laws."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446672993, "post_id": 33531606, "comment_id": 54846549, "body": "@Olaf My point was that you shouldn&#39;t be downvoting bruceg&#39;s perfectly valid answer, unless you&#39;re willing to take the time to provide a better answer."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1446673131, "post_id": 33531606, "comment_id": 54846619, "body": "I think 2 ... 4 is a non-standard gcc extension"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446673323, "post_id": 33531606, "comment_id": 54846727, "body": "@user3386109: Nice idea to require providing a better answer if you DV. However, afaik there is no such rule, yet. And the answer does not cover the actual problem, but provides a temporal workaround (without mentioning it is a workaround) which will eventually create larger problems (if not for this project, but for a potential latter - give a fish vs. teach how to fish). Finally: It would have been better to comment at the answer then."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1446673469, "post_id": 33531606, "comment_id": 54846798, "body": "@bruceg: You are right. It is an extension."}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1446706006, "post_id": 33531606, "comment_id": 54857246, "body": "Ah, <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Case-Ranges.html#Case-Ranges\" rel=\"nofollow noreferrer\">Case Ranges - Using the GNU Compiler Collection (GCC)</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5513579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6898559578b57008c3100c313d55ac2?s=128&d=identicon&r=PG&f=1", "display_name": "RA3SK", "link": "https://stackoverflow.com/users/5513579/ra3sk"}, "edited": false, "score": 0, "creation_date": 1446671414, "post_id": 33531954, "comment_id": 54845714, "body": "Thanks man. It works"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446671821, "post_id": 33531954, "comment_id": 54845949, "body": "No. When dealing with currencies or other precise values, never use floating point. Use fixed-point integers instead (e.g. calculate in cents or a fraction thereof)."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1446671984, "post_id": 33531954, "comment_id": 54846034, "body": "I agree.  It&#39;s probably better to read the input as a string and parse it into euros and cents using the &#39;.&#39; as a delimiter, but I wanted to get his code working easily.  Adding 0.5 often works when you don&#39;t need exact precision, but close enough will do."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446673507, "post_id": 33531954, "comment_id": 54846817, "body": "Please add that comment to the answer. I&#39;ll remove the DV then."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446673695, "post_id": 33531954, "comment_id": 54846916, "body": "There, I think that&#39;s an answer we can all live with, thanks @Olaf."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446673707, "post_id": 33531954, "comment_id": 54846921, "body": "Still not happy with it, but removed the DV. Hope my comment above will help. And the question might be closed soon anyway as a dup."}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": true, "score": 1, "last_activity_date": 1446673588, "last_edit_date": 1446673588, "creation_date": 1446670974, "answer_id": 33531954, "question_id": 33531606, "link": "https://stackoverflow.com/questions/33531606/code-is-wrong-or-in-c/33531954#33531954", "title": "Code is wrong or? in C", "body": "<p>You have to correct for rounding errors when using floating point numbers.  An easy way that often works is to add 0.5 before converting to an int.  So, something like this should work better:</p>\n\n<pre><code>centy= (int) (0.5 + suma * 100.0) - cele * 100;\n</code></pre>\n\n<p>It's probably better to read the input as a string and parse it into euros and cents using the '.' as a delimiter. But this will get the code working easily. Adding 0.5 often works when you don't need exact precision, but close enough will do.</p>\n"}], "owner": {"reputation": 11, "user_id": 5513579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6898559578b57008c3100c313d55ac2?s=128&d=identicon&r=PG&f=1", "display_name": "RA3SK", "link": "https://stackoverflow.com/users/5513579/ra3sk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1446674653, "accepted_answer_id": 33531954, "answer_count": 1, "score": -2, "last_activity_date": 1446673588, "creation_date": 1446669728, "question_id": 33531606, "link": "https://stackoverflow.com/questions/33531606/code-is-wrong-or-in-c", "closed_reason": "Duplicate", "title": "Code is wrong or? in C", "body": "<p>I wrote this code:</p>\n\n<pre><code>float suma;\nint centy;\nint cele;\nprintf(\"Zadaj sumu a ja ti ju napisem a zaroven aj vysklonujem:\\n\");\nscanf(\"%f\",&amp;suma);\ncele=(int)suma;\ncenty= (suma-cele)*100;\n\nswitch ((int)suma) {\n    case 1:\n        printf(\"%d euro\",(int)suma);\n        break;\n    case 2 ... 4:\n        printf(\"%d eura\",(int)suma);\n        break;\n\n    default:\n        printf(\"%d eur\",(int)suma);\n        break;\n\n}\nswitch (centy) {\n    case 1:\n        printf(\" a %d cent\\n\",centy);\n        break;\n    case 2 ... 4:\n        printf(\" a %d centy\\n\",centy);\n        break;\n\n    default:\n        printf(\" a %d centov\\n\",centy);\n        break;\n}\n</code></pre>\n\n<p>But when I type 5.56 it will say that I have typed 5.55 in console. What do you think. What should I change? I am newbie so...</p>\n"}, {"tags": ["python", "c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2317529, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3f4b405c44b77f099ec9db5e7cb17c33?s=128&d=identicon&r=PG", "display_name": "Miguel C&#225;rcamo", "link": "https://stackoverflow.com/users/2317529/miguel-c%c3%a1rcamo"}, "edited": false, "score": 1, "creation_date": 1446678615, "post_id": 33533746, "comment_id": 54849189, "body": "There is a way to open a CASA MS file in C? Are you sure?"}, {"owner": {"reputation": 511, "user_id": 5514372, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000918847905/picture?type=large", "display_name": "PeCosta", "link": "https://stackoverflow.com/users/5514372/pecosta"}, "reply_to_user": {"reputation": 13, "user_id": 2317529, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3f4b405c44b77f099ec9db5e7cb17c33?s=128&d=identicon&r=PG", "display_name": "Miguel C&#225;rcamo", "link": "https://stackoverflow.com/users/2317529/miguel-c%c3%a1rcamo"}, "edited": false, "score": 0, "creation_date": 1446680118, "post_id": 33533746, "comment_id": 54849679, "body": "Maybe I assumed it wrongly because CASA is bundled under c++ tools. Still you can call python functions from C as long you are using python 2.x or 3.x i think."}], "tags": [], "owner": {"reputation": 511, "user_id": 5514372, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000918847905/picture?type=large", "display_name": "PeCosta", "link": "https://stackoverflow.com/users/5514372/pecosta"}, "is_accepted": false, "score": 0, "last_activity_date": 1446678237, "creation_date": 1446678237, "answer_id": 33533746, "question_id": 33531523, "link": "https://stackoverflow.com/questions/33531523/call-python-function-from-c-pass-some-float-arrays-and-store-data-on-them/33533746#33533746", "title": "call python function from c, pass some float arrays and store data on them", "body": "<p>Yes it is,</p>\n\n<p><a href=\"https://docs.python.org/2.5/ext/callingPython.html\" rel=\"nofollow\">https://docs.python.org/2.5/ext/callingPython.html</a></p>\n\n<p>Still, why do it in python? You can do it in C as well! </p>\n"}], "owner": {"reputation": 13, "user_id": 2317529, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3f4b405c44b77f099ec9db5e7cb17c33?s=128&d=identicon&r=PG", "display_name": "Miguel C&#225;rcamo", "link": "https://stackoverflow.com/users/2317529/miguel-c%c3%a1rcamo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446678237, "creation_date": 1446669423, "last_edit_date": 1446674842, "question_id": 33531523, "link": "https://stackoverflow.com/questions/33531523/call-python-function-from-c-pass-some-float-arrays-and-store-data-on-them", "title": "call python function from c, pass some float arrays and store data on them", "body": "<p>I'm working in an astronomical app. I need to read an CASA MS File which is easy to read from python.</p>\n\n<p>The thing is that I'm working with CUDA and I need to save the file data as u,v coordinates, real and imaginary visibilities and weights, in host arrays.</p>\n\n<p>Is it possible to call a python function from C pass the arrays and the name of the file and fill them in the python function?</p>\n\n<p>How can be done?</p>\n\n<p>And there is an special way to compile the file?</p>\n\n<p>Thanks in advanced.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1446670634, "post_id": 33531510, "comment_id": 54845289, "body": "The <code>masyvas</code> function is incorrect. You should get compiler errors about this. Pay attention to what your compiler is saying."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5017004, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/57274e1423e89780ed4a9848f44ebdaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis", "link": "https://stackoverflow.com/users/5017004/gytis"}, "edited": false, "score": 0, "creation_date": 1446670475, "post_id": 33531682, "comment_id": 54845197, "body": "Thank you! It solved my problem.  Maybe you could explain why this way works and mine doesnt? If no, still thanks a lot! I will have to read about pointer-to-pointer passing."}], "tags": [], "owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "is_accepted": false, "score": 0, "last_activity_date": 1446671350, "last_edit_date": 1446671350, "creation_date": 1446669986, "answer_id": 33531682, "question_id": 33531510, "link": "https://stackoverflow.com/questions/33531510/assigned-value-to-dynamic-array-created-in-void-function-doesnt-return-the-same/33531682#33531682", "title": "assigned value to dynamic array created in void function doesnt return the same value in main()", "body": "<p>You need to pass a pointer-to-pointer here and do not need to return anything.</p>\n\n<pre><code>void masyvas (int **skaiciai, int n)\n{\n    *skaiciai = (int*)malloc(n*sizeof(int));\n    (*skaiciai)[2] = 5;\n}\n</code></pre>\n\n<p>When you declare <code>int *skaiciai</code>, the variable is a pointer to type int. <code>skaiciai</code> holds the address that points to an int. When you pass <code>&amp;skaiciai</code>, you're passing the address of the address that points to an int. So because this is an address of an address, its a double pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5017004, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/57274e1423e89780ed4a9848f44ebdaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis", "link": "https://stackoverflow.com/users/5017004/gytis"}, "edited": false, "score": 0, "creation_date": 1446670718, "post_id": 33531770, "comment_id": 54845342, "body": "Thanks! We just started pointers in university, so I dont really understand them well yet, I guess ill have to do some more reading.. Oh and I had it done with int function, but then was asked to change it into void for whatever reason."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "reply_to_user": {"reputation": 23, "user_id": 5017004, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/57274e1423e89780ed4a9848f44ebdaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis", "link": "https://stackoverflow.com/users/5017004/gytis"}, "edited": false, "score": 0, "creation_date": 1446671079, "post_id": 33531770, "comment_id": 54845524, "body": "A pointer is a &quot;target&quot; to a place in memory. An array is a pointer to the 1st element of a sequence in memory. Allocating consists in asking for a range of memory of requested size, and returns the pointer to the 1st element of this range. So a function that allocates something  have to get at last a pointer to this &quot;1st element&quot;. And in C only values are passed. So to get a pointer you have 2 solutions: 1. return a pointer, and get it into a pointer (here a int*), or pass a &quot;pointer to the pointer&quot; (the &amp;mytab in my example) so that the function knows where to put the pointer (in your int*)."}], "tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1446670303, "creation_date": 1446670303, "answer_id": 33531770, "question_id": 33531510, "link": "https://stackoverflow.com/questions/33531510/assigned-value-to-dynamic-array-created-in-void-function-doesnt-return-the-same/33531770#33531770", "title": "assigned value to dynamic array created in void function doesnt return the same value in main()", "body": "<p>First of all, you should translate variables and texts to english (your code lack of comments, this should apply to them too).</p>\n\n<p>Next your <code>masyvas()</code> function returns a pointer to the allocated array (why void* ?!) but when you call it you don't get the returned value.</p>\n\n<p>You have to choose: either you pass a pointer to your function (an array is a pointer, to if you want an array to be allocated from a function you have to pass a pointer to the pointer, so a int **), or you use the returned value.</p>\n\n<p>Allocating with returned value:</p>\n\n<pre><code>// this function allocates a int* tab of size n and set one value\nint *allocate_tab(int n) {\n  int *tmp;\n  tmp = malloc(n*sizeof(int));\n  if (tmp == NULL) {\n    return(NULL); // failed\n  }\n  tmp[2] = 5;\n  return(tmp);\n}\n// in main (or other function)\nint *mytab;\n\nmytab = alloc_tab(45);\n</code></pre>\n\n<p>Allocating by passing a pointer to the array:</p>\n\n<pre><code>void alloc_tab(int **tab, int n) {\n  *tab = malloc(n*sizeof(int));\n  if (*tab == NULL) {\n    return;\n  }\n  (*tab)[2] = 5;\n}\n// in main (or other)\nint *mytab;\nalloc_tab(&amp;mytab, 45);\n</code></pre>\n\n<p>If you can't understand this stuff I guess you should read more about memory, allocation and pointers.</p>\n"}], "owner": {"reputation": 23, "user_id": 5017004, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/57274e1423e89780ed4a9848f44ebdaf?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis", "link": "https://stackoverflow.com/users/5017004/gytis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1446671805, "creation_date": 1446669382, "last_edit_date": 1446671805, "question_id": 33531510, "link": "https://stackoverflow.com/questions/33531510/assigned-value-to-dynamic-array-created-in-void-function-doesnt-return-the-same", "title": "assigned value to dynamic array created in void function doesnt return the same value in main()", "body": "<p>I have a problem with dynamic arrays in C. My program was working perfectly, but I was asked to put the creation of dynamic array into a seperate void. I did it, and it still worked great, but then I had to assign a value to a certain point of the created array in void, and make it return the said value, however, what I get is a random value. The function works by sending a pointer and the lenght of required array into void, and then makes the pointer into a dynamic array. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX 255\nvoid ieskom (int skaiciai[],int n, int *de, int *me, int *n1, int *n2)\n{\n    int i = 0;\n    int j = 0;\n    int nr1 = 0;\n    int nr2 = 0;\n    int temp = 0;\n    int temp1 = 0;\n    int eile = 0;\n    int eile1 = 0;\n    int *did;\n    did = (int*)calloc(n,sizeof(int));\n    if (did==NULL)\n    {\n        printf(\"Nepriskirta atminties.\");\n        exit(0);\n    }\n    int *maz;\n    maz = (int*)calloc(n,sizeof(int));\n    if (maz==NULL)\n    {\n        printf(\"Nepriskirta atminties.\");\n        exit(0);\n    }\n    i = 0;\n    for (i = 0; i &lt; n; i++)\n    {\n        if (skaiciai[i] &lt; skaiciai[i+1])\n        {\n            did[j] = did[j] + 1;\n            if (did[j] &gt; temp)\n            {\n                eile = j;\n                temp = did[j];\n                nr1 = i+1;\n            }\n        }\n        else\n        {\n            did[j] = did[j] + 1;\n            if (did[j] &gt; temp)\n            {\n                eile = j;\n                temp = did[j];\n                nr1 = i+1;\n            }\n            j = j + 1;\n        }\n    }\n    j = 0;\n    for (i = 0; i &lt; n; i++)\n    {\n        if (skaiciai[i] &gt; skaiciai[i+1])\n        {\n            maz[j] = maz[j] + 1;\n            if (maz[j] &gt; temp1)\n            {\n                eile1 = j;\n                temp1 = maz[j];\n                nr2 = i+1;\n            }\n        }\n        else\n        {\n            maz[j] = maz[j] + 1;\n            if (maz[j] &gt; temp1)\n            {\n                eile1 = j;\n                temp1 = maz[j];\n                nr2 = i+1;\n            }\n            j = j + 1;\n        }\n    }\n    *de = did[eile];\n    *me = maz[eile1];\n    *n1 = nr1;\n    *n2 = nr2;\n    free(did);\n    free(maz);\n}\n/*int masyvas(x)\n{\n    int y;\n    y = (int*)malloc(x*sizeof(int));\n    return y;\n}*/\nvoid *masyvas (int *skaiciai, int n)\n{\n    *skaiciai = (int*)malloc(n*sizeof(int));\n    skaiciai[2] = 5;\n    return skaiciai;\n}\nint main()\n{\n    int n1 = 0;\n    int n2 = 0;\n    int de = 0;\n    int me = 0;\n    int i = 0;\n    int n = 0;\n    int *skaiciai;\n    scanf(\"%d\", &amp;n);\n    // skaiciai = masyvas(n); // naudojant int\n    masyvas(&amp;skaiciai, n);\n    printf(\"2 = %d\", skaiciai[2]);\n    if (skaiciai==NULL)\n    {\n        printf(\"Nepriskirta atminties.\");\n        exit(0);\n    }\n    for (;i &lt; n; i++)\n    {\n        scanf(\"%d\", &amp;skaiciai[i]);\n    }\n    ieskom (skaiciai, n, &amp;de, &amp;me, &amp;n1, &amp;n2);\n    if (de &gt; me)\n    {\n        printf(\"Elementu numeriai:\");\n        printf(\" %d\", n1-de+1);\n        printf(\" %d\\n\", n1);\n        printf(\"\\nAtstumas tarp ju: %d\", de-2);\n    }\n    else\n    {\n        printf(\"Elementu numeriai:\");\n        printf(\" %d\", n2-me+1);\n        printf(\" %d\\n\", n2);\n        printf(\"\\nAtstumas tarp ju: %d\", me-2);\n    }\n    free(skaiciai);\n    getchar();\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>The problem is in void masyvas and printf skaicia[2] - I assign a certain value to skaiciai[2], yet it prints a random one. How do I fix it?</p>\n\n<p>EDIT: Thank you for your answers and explanations, it really helped me a lot! I know have solved my problem, and most importantly, I know why it was a problem in the first place.</p>\n"}, {"tags": ["c", "kernel", "paging"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1446669614, "post_id": 33531427, "comment_id": 54844686, "body": "Yes, each process has their own memory mappings (also having 0 as a valid page is probably not a good idea if you&#39;re using <code>NULL = 0x0</code>)"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1446669626, "post_id": 33531427, "comment_id": 54844696, "body": "Each process has its own mapping from virtual to physical memory, so even if 2 processes access the same virtual memory address (the value of the pointer), it can be different physical memory. This is handled by the <a href=\"https://en.wikipedia.org/wiki/Memory_management_unit\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Memory_management_unit</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1446669916, "post_id": 33531427, "comment_id": 54844864, "body": "@ColonelThirtyTwo: A null pointer constant is not the same as address <code>0</code>."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446677608, "post_id": 33531427, "comment_id": 54848823, "body": "@Olaf I know. But if you are using the address <code>0</code> as the null pointer constant, then it&#39;s not a good idea to have address <code>0</code> be mapped (and thus accessible)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1446678288, "post_id": 33531427, "comment_id": 54849075, "body": "@ColonelThirtyTwo: Tell this an embedded system programmer where SRAM starts at address <code>0</code>;-). Yes, this is a nasty situation and should be avoided, if possible. But sometimes you cannot. One advantage of C is that there is no implicit check for a null pointer (allthough I sometimes wish the CPU would provide such in hardware - perhaps if they have more then 100 billion transistors per die they finally have safe instruction sets, not only security extensions which restict the users)."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446678526, "post_id": 33531427, "comment_id": 54849160, "body": "@Olaf Well yes, if you don&#39;t have virtual memory, then you&#39;re stuck with having <code>0</code> as a valid RAM address. But OP is asking about virtual memory, so I don&#39;t think it would be too much to ask to unmap the <code>NULL</code> address so that it isn&#39;t valid :)"}, {"owner": {"reputation": 373, "user_id": 2589103, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9c54e88768fb1ef5b60d1e9df67d97ee?s=128&d=identicon&r=PG", "display_name": "Michael Morrow", "link": "https://stackoverflow.com/users/2589103/michael-morrow"}, "edited": false, "score": 0, "creation_date": 1446681444, "post_id": 33531427, "comment_id": 54850119, "body": "I could always just map virtual memory starting somewhere besides 0, I simply gave that as an example."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1446683730, "post_id": 33531427, "comment_id": 54850749, "body": "@ColonelThirtyTwo: That&#39;s why I wrote &quot;should be avoided, if possible&quot;. Alternatively one could use a different null pointer constant, or even use a bit in a pointer - both are valid in C. <code>~(uintptr_t)0</code> comes into mind. But that would likely require changing the compiler:-)"}, {"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1447072717, "post_id": 33531427, "comment_id": 54993044, "body": "Learn paging: <a href=\"http://stackoverflow.com/questions/18431261/how-does-x86-paging-work\" title=\"how does x86 paging work\">stackoverflow.com/questions/18431261/how-does-x86-paging-wor&zwnj;&#8203;k</a>"}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "edited": false, "score": 0, "creation_date": 1447116689, "post_id": 33531427, "comment_id": 55016582, "body": "On most systems, the first page is not mapped BY DEFAULT. An application can then map the page if it desires."}], "owner": {"reputation": 373, "user_id": 2589103, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9c54e88768fb1ef5b60d1e9df67d97ee?s=128&d=identicon&r=PG", "display_name": "Michael Morrow", "link": "https://stackoverflow.com/users/2589103/michael-morrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1446669043, "creation_date": 1446669043, "question_id": 33531427, "link": "https://stackoverflow.com/questions/33531427/how-can-multiple-processes-access-the-same-virtual-memory-addresses-in-custom-ke", "title": "How can multiple processes access the same virtual memory addresses in custom Kernel?", "body": "<p>I'm writing a toy kernel and am quite curious how multiple processes can access the same virtual memory addresses. What I'm trying to say is, if I map the address 0x00000000 to 0x10800000 in physical space (using paging) how can separate process have their own protected memory that starts at 0 and goes to the end of their allocated memory? do they have to have separate mappings or...? I'd just like to get some clarification on this. Thanks</p>\n"}, {"tags": ["c", "linux", "bash"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1446668922, "post_id": 33531355, "comment_id": 54844285, "body": "Why is your program crashing? What is the failure? Have you looked at the backtrace/used a debugger? That doesn&#39;t look like <code>gedit</code> can&#39;t open it more like <code>gedit</code> doesn&#39;t like it but I would hope you could force it. If you use <code>cat -A file</code> does every other character look like <code>^@</code>? Because that would make it a UTF-16 file."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1446669102, "post_id": 33531355, "comment_id": 54844397, "body": "That&#39;s a weird way of detecting end of file by the way."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 2, "creation_date": 1446669168, "post_id": 33531355, "comment_id": 54844426, "body": "Don&#39;t use fscanf.  1000 bytes isn&#39;t a big buffer.  This would crash if you overran the buffer because you ran it on a file that doesn&#39;t contain a \\n.  Use fread, and parse the buffer."}, {"owner": {"reputation": 1130, "user_id": 2043876, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/49492119d7a66e43e549f0ff04d55598?s=128&d=identicon&r=PG", "display_name": "Tony Ruth", "link": "https://stackoverflow.com/users/2043876/tony-ruth"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1446669388, "post_id": 33531355, "comment_id": 54844549, "body": "@Etan, when I ran the cat -A there was a giant block of ^@ characters, but the rest of the file was fine."}, {"owner": {"reputation": 1130, "user_id": 2043876, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/49492119d7a66e43e549f0ff04d55598?s=128&d=identicon&r=PG", "display_name": "Tony Ruth", "link": "https://stackoverflow.com/users/2043876/tony-ruth"}, "reply_to_user": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1446669437, "post_id": 33531355, "comment_id": 54844579, "body": "@Matt, do you have an easier way to read a line at a time, or is there was way to prevent overflow? Also, I wrote this before I knew feof existed, so I will update that."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1446669556, "post_id": 33531355, "comment_id": 54844650, "body": "That&#39;s the problem. That&#39;s a giant block of <code>NUL</code> bytes. And is probably what&#39;s blowing up your buffers like Matt indicated."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1446669652, "post_id": 33531355, "comment_id": 54844709, "body": "And don&#39;t use feof(), at least not this way."}, {"owner": {"reputation": 1130, "user_id": 2043876, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/49492119d7a66e43e549f0ff04d55598?s=128&d=identicon&r=PG", "display_name": "Tony Ruth", "link": "https://stackoverflow.com/users/2043876/tony-ruth"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1446669787, "post_id": 33531355, "comment_id": 54844789, "body": "@wildplasser, do you have a recommendation how to do this? Having a single line was quite convenient since a lot of the data I&#39;m reading is like   <code>garbage    variable:   5   garbage \\n</code>"}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 1, "last_activity_date": 1446670481, "last_edit_date": 1446670481, "creation_date": 1446670065, "answer_id": 33531698, "question_id": 33531355, "link": "https://stackoverflow.com/questions/33531355/reading-corrupt-file-segmentation-fault/33531698#33531698", "title": "Reading corrupt file, segmentation fault", "body": "<p>You have a buffer overrun in <code>fscanf()</code>.  This is probably causing the program to write past the end of the array, overwrite a pointer somewhere, and crash.</p>\n\n<p>Your options are:</p>\n\n<p>Read a line into an input buffer with <code>fgets()</code> and parse it with <code>sscanf()</code> if necessary, probably what you want, or</p>\n\n<p>Tell <code>fscanf()</code> the sizes of the buffers, e.g. <code>fscanf( infile, \" %999[^\\n]%*[\\n]\", line );</code></p>\n\n<p>Additionally, you almost never want <code>while (!feof(infile))</code>.  This will stop when it reads <em>past</em> end-of-file.</p>\n\n<p>So you should really change this to:</p>\n\n<pre><code>static const size_t LINE_LEN = 1000;\nwhile (fgets( line, LINE_LEN, infile ))\n  /* Do stuff with line. */\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>while ( 1 == fscanf( infile, \" %999[^\\n]%*[\\n]\", line ) )\n  /* Do stuff with line. */\n</code></pre>\n"}], "owner": {"reputation": 1130, "user_id": 2043876, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/49492119d7a66e43e549f0ff04d55598?s=128&d=identicon&r=PG", "display_name": "Tony Ruth", "link": "https://stackoverflow.com/users/2043876/tony-ruth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 33531698, "answer_count": 1, "score": 0, "last_activity_date": 1446670481, "creation_date": 1446668790, "last_edit_date": 1446669475, "question_id": 33531355, "link": "https://stackoverflow.com/questions/33531355/reading-corrupt-file-segmentation-fault", "title": "Reading corrupt file, segmentation fault", "body": "<p>I run my program by passing it a bunch of directories like this:</p>\n\n<pre><code>./myprogram *\n</code></pre>\n\n<p>Each directory is a separate set of files that I am parsing for data which I then create into a spreadsheet. Each directory is a different row of the spreadsheet. I want to only put reliable data in the spreadsheet and so if an entry is missing I leave it out. It seems to work well on most of the directories but on some directories I get a segmentation fault during one of my parse functions. </p>\n\n<p>I have noticed that every file that results in a segmentation fault is unopenable with gedit. It gives this error: </p>\n\n<p>gedit has not been able to detect the character coding.\nPlease check that you are not trying to open a binary file.\nSelect a character coding from the menu and try again.</p>\n\n<p>However, I am able to display the file by use the cat or tail commands.</p>\n\n<p>The specific function that results in the segmentation fault is the fscanf function below, that I use to read a single line at a time. (increasing the size of the buffers did not help)</p>\n\n<pre><code> char *line = malloc(1000*sizeof(char));\n char *garbage = malloc(1000*sizeof(char));\n while(!feof(infile) )\n {\n     fscanf(infile,\"%[^\\n]%[\\n]\",line,garbage);\n     //parse the line\n }\n</code></pre>\n\n<p>Does anyone know why the file may be unopenable with gedit? Is it corrupted? Is there a way I can return an error code in my parse function instead of seg faulting?</p>\n"}, {"tags": ["c", "arrays", "matlab", "function", "random"], "comments": [{"owner": {"reputation": 1858, "user_id": 3699691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bb27331e7d100014ae30427ff7950a1?s=128&d=identicon&r=PG&f=1", "display_name": "downhillFromHere", "link": "https://stackoverflow.com/users/3699691/downhillfromhere"}, "edited": false, "score": 7, "creation_date": 1446668915, "post_id": 33531297, "comment_id": 54844280, "body": "You&#39;re exhausting your stack memory. What you want is heap allocation."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1446668956, "post_id": 33531297, "comment_id": 54844308, "body": "What is the <code>INT_MAX</code> on your system? You are indexing the array with <code>int</code>, which might overflow."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446669648, "post_id": 33531297, "comment_id": 54844707, "body": "&quot;close to 30&quot; is a fuzzy requirement.  Either it should be 30 or you need to detail &quot;how close&quot;."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446670247, "post_id": 33531297, "comment_id": 54845071, "body": "@chux the statistical expectation of the sum should be 30. How can you define it more precise?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446673796, "post_id": 33531297, "comment_id": 54846959, "body": "@Eugene Sh.  OP&#39;s &quot;close to 30&quot; and your &quot;sum should be 30&quot; differ.Your requirement of &quot;should be 30&quot; is unambiguous and precise.  OP&#39;s  &quot;close to 30&quot; is not.   How close is close enough?"}, {"owner": {"reputation": 37, "user_id": 5516617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nsSLl.jpg?s=128&g=1", "display_name": "Pullo86", "link": "https://stackoverflow.com/users/5516617/pullo86"}, "edited": false, "score": 0, "creation_date": 1446745213, "post_id": 33531297, "comment_id": 54882000, "body": "I meant the sum should be close to 30% of the entire array. Running the program with N=10000 gave me a sum = 3025, 2982, 3014, etc. Therefore is working (the distribution is reliable). Thanks to everyone!"}], "answers": [{"comments": [{"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 37, "user_id": 5516617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nsSLl.jpg?s=128&g=1", "display_name": "Pullo86", "link": "https://stackoverflow.com/users/5516617/pullo86"}, "edited": false, "score": 0, "creation_date": 1446755439, "post_id": 33532298, "comment_id": 54887867, "body": "@Pullo86 You\u2019re welcome.  By the way, here\u2019s a very similar STL solution I wrote: <a href=\"https://stackoverflow.com/questions/33532402/need-to-insert-random-numbers-of-1-100-into-a-three-dimensional-array/33535022#33535022\" title=\"need to insert random numbers of 1 100 into a three dimensional array\">stackoverflow.com/questions/33532402/&hellip;</a>"}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 0, "last_activity_date": 1446755097, "last_edit_date": 1446755097, "creation_date": 1446672323, "answer_id": 33532298, "question_id": 33531297, "link": "https://stackoverflow.com/questions/33531297/how-to-generate-array-of-random-numbers-using-functions-in-c/33532298#33532298", "title": "How to generate array of random numbers using functions in C", "body": "<p>What you almost certainly want to do is pass <code>rand_gen()</code> a pointer to the array it\u2019s to be filling, and have it write to that, rather than have it allocate large arrays which it then copies and leaks.  (This is an application for which the C++ STL, with <code>&lt;random&gt;</code> and <code>&lt;vector&gt;</code>, might be better-suited.)</p>\n\n<p>If you want to use this basic structure, though, declare:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* Set N. */\n\nbool *binarray[] = {\n  rand_gen( N, prob_a ), // binarray[0]\n  rand_gen( N, prob_a ), \n  rand_gen( N, prob_a ),\n  rand_gen( N, prob_a )  // binarray[3]\n};\nstatic const size_t m = sizeof(binarray)/sizeof(binarray[0]);\n\n/* Do stuff with binarray[0] through binarray[m-1]. */\n\nfor ( size_t i = 0; i &lt; m; ++i ) {\n  free(binarray[i]);\n  binarray[i] = NULL;\n}\n</code></pre>\n\n<p>In practice, though, you probably want an array of arrays that your random generator updates in place, something like:</p>\n\n<pre><code>bool *fill_arrays( size_t m, size_t n, bool to_fill[m][n], double prob )\n{\n  for ( size_t i = 0; i &lt; m; ++i )\n    rand_gen_in_place( to_fill[i], n, prob );\n\n  return to_fill;\n}\n\nvoid do_stuff_with( size_t m, size_t n, bool binarray[m][n] );\n\nint main(void)\n{\n  /* \u2026 */\n  bool* arrayp = calloc( M*N, sizeof(bool) );\n  fill_arrays( M, N, arrayp, prob_a );\n  do_stuff_with( M, N, arrayp );\n  free(arrayp);\n  /* \u2026 */\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5516617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nsSLl.jpg?s=128&g=1", "display_name": "Pullo86", "link": "https://stackoverflow.com/users/5516617/pullo86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 33532298, "answer_count": 1, "score": 2, "last_activity_date": 1446755097, "creation_date": 1446668573, "question_id": 33531297, "link": "https://stackoverflow.com/questions/33531297/how-to-generate-array-of-random-numbers-using-functions-in-c", "title": "How to generate array of random numbers using functions in C", "body": "<p>I am trying to port a program from Matlab to C in order to improve the execution time and the memory usage.\nSince there are not functions in C which generate uniformly populated arrays of 0 and 1 (or I could not find them) I created a function to populate an array accordingly to the associated probability.</p>\n\n<p><strong>Example</strong>: if the probability is 0.3 (30%) I would like to have an array of 100 elements, populated randomly with <strong>zeros</strong> and <strong>ones</strong>, and the sum of ones of the array must be close to 30.</p>\n\n<p>Instead of 100 I use N = number of trials, so if N=10000 then the sum of ones of the array should be something close to 3000, etc.</p>\n\n<p>The function in Matlab is just:</p>\n\n<pre><code>function [y] = rand_gen(N,Prob)\n\n    for i=1:N\n        y(i,1) = binornd(1,Prob);\n    end\nend\n</code></pre>\n\n<p>The function would be called as:</p>\n\n<pre><code>array = rand_gen(N, Probability);\n</code></pre>\n\n<p>Now, here is the issue in C: when I run the program I can generate some arrays but the maximum number of trials (N) its very low, and I don't think its a matter of memory. If I run the program with N = 100000 everything goes ok, but after 100000 (and something) crashes.\nThe program in C is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint * rand_gen(int N, double Prob); // Function declaration\nint sum_array(int a[], int num_elements);    // Function declaration\n\nint main()  // Main function\n{\nint N;  // Declaration: Number of trials\nprintf(\"Number of trials: \");\nscanf(\"%d\", &amp;N);    // Asks for Number of trials\n\ndouble Prob_a = 0.5;   // Probability (50%)\nint i;  // Declaration: Index\nint sum; // Declaration: sum of elements of arrays\nint bin_array_0[N]; // Declaration: array populated randomly by 0 and 1\nint bin_array_1[N]; // Declaration: array populated randomly by 0 and 1\nint bin_array_2[N]; // Declaration: array populated randomly by 0 and 1\nint bin_array_3[N]; // Declaration: array populated randomly by 0 and 1\nint *ptrnd = NULL; // Declaration: pointer to array\nint seed = time(NULL); // Declaration: random number generator seed (based on current time)\nsrand(seed);\n\n\nptrnd = rand_gen(N, Prob_a);    // Populate a temporary array with 0 and 1 using the rand_gen function\n\nfor(i=0 ; i&lt;N ; i++)\n{\n    bin_array_0[i] = *(ptrnd + i);\n}\n/* Print the sum of ones in the array\n * in order to check the rand_gen probability\n * reliability and compare to the temp array   */\nsum = sum_array(bin_array_0, N);\nprintf(\"\\n The sum of the bin_array_0 is %d\\n\", sum);\n\n\n\nptrnd = rand_gen(N, Prob_a);    // Populate a temporary array with 0 and 1 using the rand_gen function\n\nfor(i=0 ; i&lt;N ; i++)\n{\n    bin_array_1[i] = *(ptrnd + i);\n}\n/* Print the sum of ones in the array\n * in order to check the rand_gen probability\n * reliability and compare to the temp array   */\nsum = sum_array(bin_array_1, N);\nprintf(\"\\n The sum of the bin_array_1 is %d\\n\", sum);\n\n\nptrnd = rand_gen(N, Prob_a);    // Populate a temporary array with 0 and 1 using the rand_gen function\n\nfor(i=0 ; i&lt;N ; i++)\n{\n    bin_array_2[i] = *(ptrnd + i);\n}\n/* Print the sum of ones in the array\n * in order to check the rand_gen probability\n * reliability and compare to the temp array   */\nsum = sum_array(bin_array_2, N);\nprintf(\"\\n The sum of the bin_array_2 is %d\\n\", sum);\n\n\nptrnd = rand_gen(N, Prob_a);    // Populate a temporary array with 0 and 1 using the rand_gen function\n\nfor(i=0 ; i&lt;N ; i++)\n{\n    bin_array_3[i] = *(ptrnd + i);\n}\n/* Print the sum of ones in the array\n * in order to check the rand_gen probability\n * reliability and compare to the temp array   */\nsum = sum_array(bin_array_3, N);\nprintf(\"\\n The sum of the bin_array_3 is %d\\n\", sum);\n\nreturn(0);\n\n}\n\n\n// Function: generate an array populated by 0 and 1 according to a uniformed distribution\nint * rand_gen(int N, double Prob)\n{\n    int sum; // Declaration: sum of elements of arrays\n    int *array;\n    array = (int *)malloc(sizeof(int)*N);\n    if(array == NULL)\n    {\n        printf(\"\\nRun out of memory!\\n\");\n        exit(1);\n    }\n\n    int j;\n    double x;\n\n    for(j=0; j&lt;N; j++)\n    {\n        x=rand();\n        x=x/RAND_MAX;\n        if (x &lt; Prob)\n        {\n            array[j]=1;\n        }\n        else\n        {\n            array[j]=0;\n        }\n    }\n\n/* Print the sum of ones in the array\n * in order to check the rand_gen probability\n * reliability and compare to the bin_array_*   */\n    sum = sum_array(array, N);\n    printf(\"\\n The sum of the temp array is %d\\n\", sum);\n\n    return array;\n}\n\n\n// Function: sum elements of array and return the sum.\nint sum_array(int a[], int num_elements)\n{\n    int k, sum=0;\n    for (k=0; k&lt;num_elements; k++)\n        {\n        sum = sum + a[k];\n        }\n    return(sum);\n}\n</code></pre>\n\n<p>Please give me some tips how to solve the issue. I have already tried with different types of values (<strong>long</strong> instead of <strong>int</strong> and <strong>double</strong> instead of <strong>float</strong>) but without any result.\nThank you in advance!</p>\n\n<p>Cheers,</p>\n\n<p>Pullo86</p>\n"}, {"tags": ["c", "pointers", "printf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1446668537, "post_id": 33531262, "comment_id": 54844077, "body": "It will print a character representation of a <code>str</code> address casted to <code>char</code>. That&#39;s it."}, {"owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "edited": false, "score": 0, "creation_date": 1446668601, "post_id": 33531262, "comment_id": 54844113, "body": "<code>p</code> refers to the pointer i.e. its memory address. You should dereference it to get what it is pointing to: <code>*p</code>"}, {"owner": {"reputation": 63, "user_id": 5428722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9365d617ad925d7da1d3bdfe2840c789?s=128&d=identicon&r=PG&f=1", "display_name": "Varun Saproo", "link": "https://stackoverflow.com/users/5428722/varun-saproo"}, "edited": false, "score": 0, "creation_date": 1446668670, "post_id": 33531262, "comment_id": 54844148, "body": "Ok so if i use %s then it will print 123 right???"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446669470, "post_id": 33531262, "comment_id": 54844598, "body": "@EugeneSh.: Actually, since <code>printf()</code> is varargs, the behavior is undefined when the argument type doesn&#39;t match (some exceptions exist, but none for <code>char *&#47;int</code>)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1446669746, "post_id": 33531262, "comment_id": 54844765, "body": "@EOF, well, didn&#39;t get that deep yet :)"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1446668596, "creation_date": 1446668596, "answer_id": 33531303, "question_id": 33531262, "link": "https://stackoverflow.com/questions/33531262/unrecognized-behaviour-of-pointers/33531303#33531303", "title": "Unrecognized behaviour of Pointers", "body": "<p>To print the value at a pointer (i.e., 1, as you had expected), you got to dereference that pointer. In your case,</p>\n\n<pre><code>printf(\"%c\",p);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>printf(\"%c\", *p);\n</code></pre>\n\n<p>FWIW, <code>printf(\"%c\",p);</code> will invoke undefined behavior as the supplied argument type will be a mismatch with the supplied format specifier.</p>\n"}, {"tags": [], "owner": {"reputation": 956, "user_id": 3650441, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8b23d851c1041ae462677963d578c983?s=128&d=identicon&r=PG&f=1", "display_name": "personjerry", "link": "https://stackoverflow.com/users/3650441/personjerry"}, "is_accepted": false, "score": 2, "last_activity_date": 1446668641, "creation_date": 1446668641, "answer_id": 33531316, "question_id": 33531262, "link": "https://stackoverflow.com/questions/33531262/unrecognized-behaviour-of-pointers/33531316#33531316", "title": "Unrecognized behaviour of Pointers", "body": "<p>p is a pointer.</p>\n\n<p>You want <code>printf(\"%c\",*p);</code></p>\n"}], "owner": {"reputation": 63, "user_id": 5428722, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9365d617ad925d7da1d3bdfe2840c789?s=128&d=identicon&r=PG&f=1", "display_name": "Varun Saproo", "link": "https://stackoverflow.com/users/5428722/varun-saproo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446668990, "creation_date": 1446668443, "last_edit_date": 1446668901, "question_id": 33531262, "link": "https://stackoverflow.com/questions/33531262/unrecognized-behaviour-of-pointers", "title": "Unrecognized behaviour of Pointers", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main() {\n  char str[]={'1','2','3'},*p;\n  p=str;\n  printf(\"%c\",p);\n  return 0;\n}\n</code></pre>\n\n<p>Output-@.</p>\n\n<p>Shouldn't it print 1 or <code>%c</code> might be the reason?</p>\n"}, {"tags": ["c", "manpage"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1446668328, "post_id": 33531185, "comment_id": 54843965, "body": "It has to be minimum XX, as it says."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 2, "creation_date": 1446668366, "post_id": 33531185, "comment_id": 54843987, "body": "I&#39;ll bet my money that  IFNAMSIZ includes the <code>\\0</code> character."}, {"owner": {"reputation": 3652, "user_id": 1610530, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb145246cb9e317aa990ffa9bcf2f67c?s=128&d=identicon&r=PG", "display_name": "Moshe Gottlieb", "link": "https://stackoverflow.com/users/1610530/moshe-gottlieb"}, "edited": false, "score": 1, "creation_date": 1446668425, "post_id": 33531185, "comment_id": 54844012, "body": "Thanks EugeneSh. , so you&#39;re basically saying: YES, it does."}], "answers": [{"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": true, "score": 0, "last_activity_date": 1446668827, "creation_date": 1446668827, "answer_id": 33531362, "question_id": 33531185, "link": "https://stackoverflow.com/questions/33531185/does-the-definition-needs-to-be-at-least-xx-bytes-long-include-the-null-termin/33531362#33531362", "title": "Does the definition &quot;needs to be at least XX bytes long&quot; include the null terminator, or should I use XX+1?", "body": "<p>The character buffer is a <code>NUL</code> terminated string. Therefore the buffer needs to be large enough to hold the string, including the <code>NUL</code>.</p>\n"}], "owner": {"reputation": 3652, "user_id": 1610530, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb145246cb9e317aa990ffa9bcf2f67c?s=128&d=identicon&r=PG", "display_name": "Moshe Gottlieb", "link": "https://stackoverflow.com/users/1610530/moshe-gottlieb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 33531362, "answer_count": 1, "score": 1, "last_activity_date": 1518617296, "creation_date": 1446668156, "last_edit_date": 1518617296, "question_id": 33531185, "link": "https://stackoverflow.com/questions/33531185/does-the-definition-needs-to-be-at-least-xx-bytes-long-include-the-null-termin", "title": "Does the definition &quot;needs to be at least XX bytes long&quot; include the null terminator, or should I use XX+1?", "body": "<p>I was wondering, when you see an API that says that a character buffer should be <em>at least</em> XXX byte long, does it include the null terminating character?\nNot that I mind sparing a byte, but this thing bugs me... (no double meaning here!)</p>\n\n<p>From the Mac OS X manpage for <code>if_indextoname</code>:</p>\n\n<blockquote>\n  <p>The if_indextoname() function maps the interface index specified in ifindex to it corresponding name,\n       which is copied into the buffer pointed to by ifname, which must be of at least IFNAMSIZ bytes.</p>\n</blockquote>\n"}, {"tags": ["c", "macos", "gcc", "homebrew", "libssl"], "comments": [{"owner": {"reputation": 48820, "user_id": 182676, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/446fa39e5f227c92db408e1b68356b5e?s=128&d=identicon&r=PG", "display_name": "Macmade", "link": "https://stackoverflow.com/users/182676/macmade"}, "edited": false, "score": 0, "creation_date": 1446668532, "post_id": 33530865, "comment_id": 54844072, "body": "It&#39;s deprecated for a reason... You should create OSX specific code in your app, using Apple frameworks (like libcrypto)..."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 48820, "user_id": 182676, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/446fa39e5f227c92db408e1b68356b5e?s=128&d=identicon&r=PG", "display_name": "Macmade", "link": "https://stackoverflow.com/users/182676/macmade"}, "edited": false, "score": 1, "creation_date": 1446706780, "post_id": 33530865, "comment_id": 54857566, "body": "@Macmade libcrypto is part of OpenSSL. There is no directly equivalent native library; the closest equivalent (which isn&#39;t very close) is CommonCrypto."}], "answers": [{"tags": [], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "is_accepted": true, "score": 11, "last_activity_date": 1446668582, "last_edit_date": 1446668582, "creation_date": 1446668257, "answer_id": 33531221, "question_id": 33530865, "link": "https://stackoverflow.com/questions/33530865/compiling-c-programs-using-libssl-on-os-x-el-capitan/33531221#33531221", "title": "Compiling C programs using libssl on OS X El Capitan?", "body": "<p>I have Homebrew installed on El Capitan (10.11.1) and have installed a current version of OpenSSL with no apparent ill effects:</p>\n\n<pre><code>$ uname -a\nDarwin hostname.local 15.0.0 Darwin Kernel Version 15.0.0: Sat Sep 19 15:53:46 PDT 2015; root:xnu-3247.10.11~1/RELEASE_X86_64 x86_64\n\n$ brew info openssl\nopenssl: stable 1.0.2d (bottled)\nOpenSSL SSL/TLS cryptography library\nhttps://openssl.org/\n\nThis formula is keg-only.\nApple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries\n\n/usr/local/Cellar/openssl/1.0.2d_1 (464 files, 17M)\n  Built from source\nFrom: https://github.com/Homebrew/homebrew/blob/master/Library/Formula/openssl.rb\n==&gt; Dependencies\nBuild: makedepend \u2714\n==&gt; Options\n--universal\n    Build a universal binary\n--without-check\n    Skip build-time tests (not recommended)\n==&gt; Caveats\nA CA file has been bootstrapped using certificates from the system\nkeychain. To add additional certificates, place .pem files in\n  /usr/local/etc/openssl/certs\n\nand run\n  /usr/local/opt/openssl/bin/c_rehash\n\nThis formula is keg-only, which means it was not symlinked into /usr/local.\n\nApple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries\n\nGenerally there are no consequences of this for you. If you build your\nown software and it requires this formula, you'll need to add to your\nbuild variables:\n\n    LDFLAGS:  -L/usr/local/opt/openssl/lib\n    CPPFLAGS: -I/usr/local/opt/openssl/include\n</code></pre>\n\n<p>Have you tried adding the flags that it suggests to your app's build statement? You might edit your app's <code>makefile</code> or other build statement and add those entries, after a <code>brew install openssl</code>. This may help your compiler find and link the library and header files it needs.</p>\n\n<p>Looks like everything is there. Here are headers:</p>\n\n<pre><code>$ ls -al /usr/local/opt/openssl/include/openssl/\ntotal 3688\ndrwxr-xr-x  77 alexpreynolds  admin    2618 Aug 24 13:46 .\ndrwxr-xr-x   3 alexpreynolds  admin     102 Aug 24 13:46 ..\n-rw-r--r--   1 alexpreynolds  admin    6182 Aug 24 13:46 aes.h\n-rw-r--r--   1 alexpreynolds  admin   63142 Aug 24 13:46 asn1.h\n-rw-r--r--   1 alexpreynolds  admin   24435 Aug 24 13:46 asn1_mac.h\n-rw-r--r--   1 alexpreynolds  admin   34475 Aug 24 13:46 asn1t.h\n-rw-r--r--   1 alexpreynolds  admin   38566 Aug 24 13:46 bio.h\n-rw-r--r--   1 alexpreynolds  admin    5351 Aug 24 13:46 blowfish.h\n...\n</code></pre>\n\n<p>And static and dynamic libraries:</p>\n\n<pre><code>$ ls -al /usr/local/opt/openssl/lib\ntotal 11664\ndrwxr-xr-x  10 alexpreynolds  admin      340 Aug 24 13:46 .\ndrwxr-xr-x  11 alexpreynolds  admin      374 Aug 24 13:46 ..\ndrwxr-xr-x  14 alexpreynolds  admin      476 Aug 24 13:46 engines\n-r--r--r--   1 alexpreynolds  admin  1861780 Aug 24 13:46 libcrypto.1.0.0.dylib\n-r--r--r--   1 alexpreynolds  admin  3206344 Aug 24 13:46 libcrypto.a\nlrwxr-xr-x   1 alexpreynolds  admin       21 Aug 24 13:46 libcrypto.dylib -&gt; libcrypto.1.0.0.dylib\n-r--r--r--   1 alexpreynolds  admin   364144 Aug 24 13:46 libssl.1.0.0.dylib\n-r--r--r--   1 alexpreynolds  admin   524424 Aug 24 13:46 libssl.a\nlrwxr-xr-x   1 alexpreynolds  admin       18 Aug 24 13:46 libssl.dylib -&gt; libssl.1.0.0.dylib\ndrwxr-xr-x   5 alexpreynolds  admin      170 Aug 24 13:46 pkgconfig\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 86, "user_id": 1402165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34260361e15db6d362d8ef8549e34803?s=128&d=identicon&r=PG", "display_name": "John Fowler", "link": "https://stackoverflow.com/users/1402165/john-fowler"}, "edited": false, "score": 0, "creation_date": 1538018807, "post_id": 49688981, "comment_id": 91997266, "body": "yes, will add for a package with a ./configure step, I had to also do:  export PKG_CONFIG_PATH=&quot;/usr/local/opt/openssl/lib/pkgconfig&quot;"}], "tags": [], "owner": {"reputation": 485, "user_id": 2703937, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000268350473/picture?type=large", "display_name": "Tr\u1ea7n Vi\u1ec7t Ho&#224;ng", "link": "https://stackoverflow.com/users/2703937/tr%e1%ba%a7n-vi%e1%bb%87t-ho%c3%a0ng"}, "is_accepted": false, "score": 1, "last_activity_date": 1523004797, "creation_date": 1523004797, "answer_id": 49688981, "question_id": 33530865, "link": "https://stackoverflow.com/questions/33530865/compiling-c-programs-using-libssl-on-os-x-el-capitan/49688981#49688981", "title": "Compiling C programs using libssl on OS X El Capitan?", "body": "<p>The answer of @Alex Reynolds is correct, but if you want to compile/configure someone else's program, then you can run this beforehand:</p>\n\n<pre><code>export LDFLAGS=-L/usr/local/opt/openssl/lib\nexport CPPFLAGS=-I/usr/local/opt/openssl/include\n</code></pre>\n"}], "owner": {"reputation": 2507, "user_id": 4480139, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/324be61a829b02e128ac3073d9af0ded?s=128&d=identicon&r=PG&f=1", "display_name": "gogo_gorilla", "link": "https://stackoverflow.com/users/4480139/gogo-gorilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14638, "favorite_count": 4, "accepted_answer_id": 33531221, "answer_count": 2, "score": 16, "last_activity_date": 1523004797, "creation_date": 1446666929, "last_edit_date": 1495542261, "question_id": 33530865, "link": "https://stackoverflow.com/questions/33530865/compiling-c-programs-using-libssl-on-os-x-el-capitan", "title": "Compiling C programs using libssl on OS X El Capitan?", "body": "<p>I have a simple C program using libssl.</p>\n\n<p>On Linux, I installed the openssl-dev package and compiled the program with the following line:</p>\n\n<pre><code>gcc test_libssl.c -o test_libssl -lcrypto -lssl\n</code></pre>\n\n<p>Now I would like to do the same on my Mac. The same line resulted in:</p>\n\n<pre><code>fatal error: 'openssl/conf.h' file not found\n</code></pre>\n\n<p>I tried installing openssl (openssl-dev did not work) with home-brew via <code>brew install openssl</code></p>\n\n<p>This gave me:</p>\n\n<blockquote>\n  <p>...<br>\n  ==> Installing openssl<br>\n  ==> Downloading <a href=\"https://www.openssl.org/source/openssl-1.0.2a.tar.gz\" rel=\"noreferrer\">https://www.openssl.org/source/openssl-1.0.2a.tar.gz</a>\n  curl: (22) The requested URL returned error: 404 Not Found</p>\n</blockquote>\n\n<p>I found a <a href=\"https://stackoverflow.com/questions/29651258/install-openssl-devel-on-mac\">related SO question</a> with no answer.</p>\n\n<p>I also tried</p>\n\n<pre><code>brew info openssl\n</code></pre>\n\n<p>and got informed that</p>\n\n<blockquote>\n  <p>This formula is keg-only.\n  Mac OS X already provides this software and installing another version in\n  parallel can cause all kinds of trouble.</p>\n  \n  <p>Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries</p>\n</blockquote>\n\n<p>What do I have to do / install in order to be able to compile libssl-using C programs programs on OS X?</p>\n\n<p>Or, is it a bad idea the first place (given the warning above)?</p>\n\n<p><br>\n<br>\n<br>\n<strong>UPDATE:</strong></p>\n\n<p>I got the openssl installed using brew. I am not sure if this was the problem but I updated brew.\nTaking brew's advice</p>\n\n<blockquote>\n  <p>You should probably change the ownership and permissions of /usr/local\n  back to your user account.\n    <strong>sudo chown -R $(whoami):admin /usr/local</strong></p>\n</blockquote>\n\n<p>and <a href=\"https://github.com/Homebrew/homebrew/issues/44973\" rel=\"noreferrer\">this</a> issue into account.</p>\n\n<p>Then, following @Alex Reynolds's advice, I compiled it successfully with</p>\n\n<pre><code>gcc test_libssl.c -o test_libssl -lssl -lcrypto -L/usr/local/opt/openssl/lib -I/usr/local/opt/openssl/include\n</code></pre>\n"}, {"tags": ["c", "regex", "perl"], "comments": [{"owner": {"reputation": 7958, "user_id": 1069726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2cbbae354bb4f5f320b93ab3ad4b0fa1?s=128&d=identicon&r=PG", "display_name": "LeoNerd", "link": "https://stackoverflow.com/users/1069726/leonerd"}, "edited": false, "score": 2, "creation_date": 1446666796, "post_id": 33530496, "comment_id": 54843085, "body": "So, uhm, you want to parse C, without writing a parser for C? Ain&#39;t gonna happen with any amount of robustness, sorry. Better to actually write a parser."}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 4, "last_activity_date": 1446667534, "last_edit_date": 1446667534, "creation_date": 1446666405, "answer_id": 33530709, "question_id": 33530496, "link": "https://stackoverflow.com/questions/33530496/perl-regex-to-find-the-name-of-a-packed-struct-without-using-variable-length-loo/33530709#33530709", "title": "Perl regex to find the name of a packed struct without using variable length lookbehind?", "body": "<pre><code>$ perl -0777 -nE 'say $1 while m/typedef struct (\\w+) \\{[^}]+\\} __packed \\w+;/g' file\nbar_s\n</code></pre>\n\n<p>The keys here is <code>\\{[^}]+\\}</code> to match a braced block with no \"inner\" close braces.</p>\n"}], "owner": {"reputation": 35, "user_id": 1188076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da866cc4ef40d0df9b1aebcf61b20c5a?s=128&d=identicon&r=PG", "display_name": "Ben Shelton", "link": "https://stackoverflow.com/users/1188076/ben-shelton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 33530709, "answer_count": 1, "score": 3, "last_activity_date": 1446667534, "creation_date": 1446665702, "question_id": 33530496, "link": "https://stackoverflow.com/questions/33530496/perl-regex-to-find-the-name-of-a-packed-struct-without-using-variable-length-loo", "title": "Perl regex to find the name of a packed struct without using variable length lookbehind?", "body": "<p>I have a number of C structures across several different files.  Some of them are specified as packed, and some are not.  Like this:</p>\n\n<pre><code>typedef struct foo_s {\n    uint32 foo_field_1;\n    uint64 foo_field_2;\n} foo_t;\n\ntypedef struct bar_s {\n    uint32 bar_field_1;\n    uint64 bar_field_2;\n} __packed bar_t;\n</code></pre>\n\n<p>I'd like to get a list of the struct names for only the packed structs.  For the code above, that would include <code>bar_s</code>, but not <code>foo_s</code>.</p>\n\n<p>I wrote a Perl one-liner like this that seems to get me most of the way there:</p>\n\n<pre><code>perl -0777 -ne 'while(m/typedef struct (\\w+) {\\n(?:.*\\n)*?} __packed \\w+;/g){print \"$1\\n\";}' &lt;filename&gt;\n</code></pre>\n\n<p>The issue is that for the structs above, this actually returns foo_s, since it initially matches <code>typedef struct foo_s {</code> and then continues until it matches <code>} __packed bar_t</code>.</p>\n\n<p>I tried using lookbehind to go back and find the most recent match of <code>typedef struct</code> whenever <code>__packed</code> is found, but variable length lookbehind is not supported.</p>\n\n<p>Is there a way to handle this with regular expressions in Perl?  Ideally, it would be something like \"Match <code>typedef struct &lt;name&gt;</code> each time it's found, and then if you find <code>__packed</code>, print out the most recently matched struct name\".</p>\n\n<p>I'd like to avoid writing a parser if I can.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "function", "c++11", "callback"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446665662, "post_id": 33530465, "comment_id": 54842431, "body": "Maybe <a href=\"http://stackoverflow.com/questions/10938774/get-function-pointer-from-stdfunction-when-using-stdbind\">this</a> helps."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1446665820, "post_id": 33530465, "comment_id": 54842522, "body": "I assume that <code>void* args</code> is for userdata, that you can cast back to your type."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1446665873, "post_id": 33530465, "comment_id": 54842551, "body": "Is your register callback <b>actually</b> <code>void register_callback(void(*callback)(void*,int), void* args)</code> by any chance?  If yes, please correct.  If no, please provide more information on how the callback works, and what the arguments mean.  Ideally actually copy-paste the actual callback interface here, don&#39;t paraphrase."}, {"owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1446665992, "post_id": 33530465, "comment_id": 54842622, "body": "@Jarod42 yes it is for userdata"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446666149, "post_id": 33530465, "comment_id": 54842714, "body": "Avoid std:::function (If you bind to a class, have a static function dispatching to a member-function, where <code>args</code> represents the class object)"}, {"owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1446666370, "post_id": 33530465, "comment_id": 54842841, "body": "@Yakk you are right. Updated."}], "answers": [{"comments": [{"owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "edited": false, "score": 0, "creation_date": 1446681526, "post_id": 33530750, "comment_id": 54850145, "body": "Thanks. Can you elaborate a little more on your suggestion of using smart pointer? Did you mean to create a std::function object on heap and wrap it with a smart pointer? But then I would have to ensure that the the smart pointer remains valid right?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "edited": false, "score": 0, "creation_date": 1446684119, "post_id": 33530750, "comment_id": 54850875, "body": "@vikky.rk Yes but copies of the smart pointer mean that the pointer-to-element remain valid; unlike copies of the <code>std::function</code>.  So a bit easier to deal with."}, {"owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "edited": false, "score": 0, "creation_date": 1446750860, "post_id": 33530750, "comment_id": 54885217, "body": "Makes sense. One more question: Where is the lambda stored when it get converted to function pointer?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "edited": false, "score": 0, "creation_date": 1446750881, "post_id": 33530750, "comment_id": 54885226, "body": "@vikky.rk It isn&#39;t.  There is no state to store.  Well, the 1 byte no-state could be stored somewhere while it is a function, but neither calling the lambda nor the function <i>use</i> that state in any real sense."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1446666534, "creation_date": 1446666534, "answer_id": 33530750, "question_id": 33530465, "link": "https://stackoverflow.com/questions/33530465/working-with-stdfunction-on-c-libraries/33530750#33530750", "title": "Working with std::function on C libraries", "body": "<pre><code>std::function&lt;void(int)&gt; bob;\nregister_callback( [](int x, void* pbob){\n  auto&amp; bob = *static_cast&lt;std::function&lt;void(int)&gt;*&gt;(pbob);\n  bob(x);\n}, &amp;bob );\n</code></pre>\n\n<p>this remains valid for as long as the variable <code>bob</code> does.</p>\n\n<p>A copy of <code>bob</code> is not enough, the actual instance of <code>bob</code> that we took a pointer to in the <code>register_callback</code> call has to live long enough.</p>\n\n<p>If this is difficult, consider a smart pointer wrapping said <code>std::function</code> and doing a pointer to the stored <code>std::function</code>.</p>\n\n<p>There will be modest overhead in the above, in that we dispatch over a function pointer, then over the equivalent of a vtable, then inside the <code>std::function</code> again.</p>\n\n<p>What is going on above is that I make a stateless lambda to convert the <code>void* args</code> into a pointer-to-<code>std::function</code>, and invoke that <code>std::function</code> with the <code>int</code>.  Stateless lambdas can convert to function pointers implicitly.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1446668153, "creation_date": 1446668153, "answer_id": 33531183, "question_id": 33530465, "link": "https://stackoverflow.com/questions/33530465/working-with-stdfunction-on-c-libraries/33531183#33531183", "title": "Working with std::function on C libraries", "body": "<p>With:</p>\n\n<pre><code>class CallBack\n{\npublic:\n    explicit CallBack(std::function&lt;void(int)&gt; f) : f(f) {}\n\n    static void to_c_api(int a, void* that)\n    {\n        reinterpret_cast&lt;CallBack*&gt;(that)-&gt;f(a);\n    }\nprivate:\n    std::function&lt;void(int)&gt; f;\n};\n</code></pre>\n\n<p>You may then do</p>\n\n<pre><code>CallBack callback; // should live longer than the calls\nvoid register_callback(CallBack::to_c_api, &amp;callback);\n</code></pre>\n"}], "owner": {"reputation": 3391, "user_id": 1262000, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f304c63791dcf77af33b6a140842adb?s=128&d=identicon&r=PG&f=1", "display_name": "vikky.rk", "link": "https://stackoverflow.com/users/1262000/vikky-rk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 33530750, "answer_count": 2, "score": 1, "last_activity_date": 1446668153, "creation_date": 1446665582, "last_edit_date": 1446666352, "question_id": 33530465, "link": "https://stackoverflow.com/questions/33530465/working-with-stdfunction-on-c-libraries", "title": "Working with std::function on C libraries", "body": "<p>I have a C library function with the following signature,</p>\n\n<pre><code>void register_callback(void (*callback)(int, void*), void* args);\n</code></pre>\n\n<p>What is the best way to get this to work with, if I have a callback of the form,</p>\n\n<pre><code>std::function&lt;void(int)&gt;?\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "printing", "struct"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1446664220, "post_id": 33530038, "comment_id": 54841661, "body": "did you try to <code>#include &lt;stdio.h&gt;</code>?"}, {"owner": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1446664273, "post_id": 33530038, "comment_id": 54841692, "body": "Yes I did, it was just one of the things I cut out in order to save space here"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1446664337, "post_id": 33530038, "comment_id": 54841728, "body": "<code>prntWorker( roster, MAX_ROSTER, 0 )</code> should work, but your function is confused. It&#39;s printing the item at <code>indx</code>, and repeating it <code>siz</code> times."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1446664426, "post_id": 33530038, "comment_id": 54841783, "body": "Please post code we can compile... for example no <code>workerT</code> definition, and a stray <code>return</code> at the bottom or missing <code>}</code>."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1446664434, "post_id": 33530038, "comment_id": 54841789, "body": "You never call initWorkerArray, so there is nothing to print."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1446664476, "post_id": 33530038, "comment_id": 54841805, "body": "you missed some closing braces."}, {"owner": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "edited": false, "score": 0, "creation_date": 1446664913, "post_id": 33530038, "comment_id": 54842024, "body": "Sorry everyone, I updated with all of my code"}, {"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "reply_to_user": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1446665941, "post_id": 33530038, "comment_id": 54842590, "body": "Once you fix the previous problems and add the call to <code>initWorkerArray</code> like @FredK mentioned, you will want to address the <code>for (i = 0; i &lt; 4; ++i) {</code> loop inside it as you are effectively initializing your data 4 times, then overwrite everything again with zero&#39;d values. I&#39;m sure that&#39;s not what you intended!?"}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1446665987, "post_id": 33530038, "comment_id": 54842619, "body": "Why <code>prntWorker</code> has a <code>for</code> loop if you never use the looping var (<code>i</code>)? And you must call <code>initWorkerArray</code> before attempting to print anything in it"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "edited": false, "score": 0, "creation_date": 1446667095, "post_id": 33530642, "comment_id": 54843239, "body": "Thank you, this worked! The next step is when I&#39;ll be calculating the monthly salary, which is why it was left out."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "edited": false, "score": 0, "creation_date": 1446667173, "post_id": 33530642, "comment_id": 54843290, "body": "@peo965 it would be better to init the field in the first place, so that unused records don&#39;t have to be calculated from default values."}, {"owner": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "edited": false, "score": 0, "creation_date": 1446668305, "post_id": 33530642, "comment_id": 54843953, "body": "Yes I know, I&#39;m just following an assignment&#39;s instructions that tell us to do it this way. My professor has a weird way of going about things."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1446666217, "creation_date": 1446666217, "answer_id": 33530642, "question_id": 33530038, "link": "https://stackoverflow.com/questions/33530038/c-calling-a-print-function-in-main/33530642#33530642", "title": "C calling a print function in main", "body": "<p>Here is your tweaked code. Primarily I called <code>initWorkerArray()</code> from <code>main()</code>, but removed its loop that initialises the struct 4 times over. I also changed the loop control variable and added a <code>newline</code> in <code>prntWorker()</code> after printing each record. However the last field <code>month100_paycheck</code> is printing absurd values, because it has not been calculated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAX_ROSTER 10 //roster of employees\n\ntypedef struct workerT_struct {\n    char name[81]; //employee name\n    char title[81]; //employee title\n    int empID; //unique ID for employee\n    int empStatus; \n    int year100_salary; //before-tax salary, in cents\n    int year100_401k; //annual contribution to retirement, in cents\n    double taxRate; //fraction used to determine payroll taxes\n    int month100_paycheck; //monthly paycheck, in cents\n} workerT;\n\nvoid initWorkerArray(workerT list[], int siz);\nvoid prntWorker(workerT list[], int siz, int indx);\n\n\nint main()\n{\n    workerT roster[MAX_ROSTER];\n    initWorkerArray(roster, MAX_ROSTER);\n    prntWorker(roster, MAX_ROSTER, 0); //FIXME\n    return 0;\n}\n\nvoid initWorkerArray(workerT list[], int siz) {\n    int i = 0;\n\n    strcpy(list[0].name, \"Buggy, Orson\");\n    strcpy(list[0].title, \"Director/President\");\n    list[0].empID = 1;\n    list[0].empStatus = 1;\n    list[0].year100_salary = 12015000;\n    list[0].year100_401k = 950000;\n    list[0].taxRate = 0.45;\n\n    strcpy(list[1].name, \"Czechs, Imelda\");\n    strcpy(list[1].title, \"Chief Financial Officer\");\n    list[1].empID = 2;\n    list[1].empStatus = 1;\n    list[1].year100_salary = 8020000;\n    list[1].year100_401k = 960000;\n    list[1].taxRate = 0.39;\n\n    strcpy(list[2].name, \"Hold, Levon\");\n    strcpy(list[2].title, \"Customer Service\");\n    list[2].empID = 6;\n    list[2].empStatus = -1;\n    list[2].year100_salary = 8575000;\n    list[2].year100_401k = 1133000;\n    list[2].taxRate = 0.39;\n\n    strcpy(list[3].name, \"Andropov, Picov\");\n    strcpy(list[3].title, \"Shipping Coordinator\");\n    list[3].empID = 7;\n    list[3].empStatus = 1;\n    list[3].year100_salary = 4450000;\n    list[3].year100_401k = 375000;\n    list[3].taxRate = 0.31;\n\n    for (i = 4; i &lt; siz; ++i) {\n        strcpy(list[i].name, \"none\");\n        strcpy(list[i].title, \"none\");\n        list[i].empID = -1;\n        list[i].empStatus = -1;\n        list[i].year100_salary = 0;\n        list[i].year100_401k = 0;\n        list[i].taxRate = 0.0;\n    }\n    return;\n}\n\nvoid prntWorker(workerT list[], int siz, int indx) {\n    int i = 0;\n    for (i = 0; i &lt; siz; ++i) {\n        printf(\"%s \", list[i].name);\n        printf(\"%s \", list[i].title);\n        printf(\"%d \", list[i].empID);\n        printf(\"%d \", list[i].empStatus);\n        printf(\"%d \", list[i].year100_salary);\n        printf(\"%d \", list[i].year100_401k);\n        printf(\"%lf \", list[i].taxRate);\n        printf(\"%d \", list[i].month100_paycheck);\n        printf(\"\\n\");\n    }\n    return;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>Buggy, Orson Director/President 1 1 12015000 950000 0.450000 0\nCzechs, Imelda Chief Financial Officer 2 1 8020000 960000 0.390000 1636580\nHold, Levon Customer Service 6 -1 8575000 1133000 0.390000 40370720\nAndropov, Picov Shipping Coordinator 7 1 4450000 375000 0.310000 -2\nnone none -1 -1 0 0 0.000000 50397953\nnone none -1 -1 0 0 0.000000 2047\nnone none -1 -1 0 0 0.000000 -1\nnone none -1 -1 0 0 0.000000 5505360\nnone none -1 -1 0 0 0.000000 43441\nnone none -1 -1 0 0 0.000000 4222855\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1446666361, "creation_date": 1446666361, "answer_id": 33530686, "question_id": 33530038, "link": "https://stackoverflow.com/questions/33530038/c-calling-a-print-function-in-main/33530686#33530686", "title": "C calling a print function in main", "body": "<p>Several issue here:</p>\n\n<p>You never call <code>initWorkerArray</code> to initialize the array:</p>\n\n<pre><code>int main()\n{\n    workerT roster[MAX_ROSTER];\n    initWorkerArray(roster, MAX_ROSTER);   // add this call\n    prntWorker(roster, MAX_ROSTER, 0);\n    return 0;\n}\n</code></pre>\n\n<p>Inside of <code>initWorkerArray</code>, the first <code>for</code> loop is not needed, as you're updating specific indexes in your array.</p>\n\n<p>You never initialize <code>month100_paycheck</code>, either in the second <code>for</code> loop or for the initial fields, so this field contains garbage:</p>\n\n<pre><code>list[0].month100_paycheck = 0;\n...\nlist[1].month100_paycheck = 0;\n...\nlist[2].month100_paycheck = 0;\n...\nlist[3].month100_paycheck = 0;\n...\nfor (i = 4; i &lt; siz; ++i) {\n    ....\n    list[i].month100_paycheck = 0;\n}\n</code></pre>\n\n<p>Then in <code>prntWorker</code>, you're not using the loop index <code>i</code> to iterate through the list.  You're using the parameter <code>indx</code> instead, which you don't really need:</p>\n\n<pre><code>void prntWorker(workerT list[], int siz) {\n    int i = 0;\n    for (i = 0; i &lt; siz; ++i) {\n        printf(\"%s \", list[i].name);\n        printf(\"%s \", list[i].title);\n        printf(\"%d \", list[i].empID);\n        printf(\"%d \", list[i].empStatus);\n        printf(\"%d \", list[i].year100_salary);\n        printf(\"%d \", list[i].year100_401k);\n        printf(\"%lf \", list[i].taxRate);\n        printf(\"%d \", list[i].month100_paycheck);\n        printf(\"\\n\");    // put a newline at the end for nicer formatting\n    }\n    return;\n}\n</code></pre>\n\n<p>After changing this function, also change the call in <code>main</code>:</p>\n\n<pre><code>    prntWorker(roster, MAX_ROSTER);\n</code></pre>\n\n<p>After making these changes, you should get the following output:</p>\n\n<pre><code>Buggy, Orson Director/President 1 1 12015000 950000 0.450000 0\nCzechs, Imelda Chief Financial Officer 2 1 8020000 960000 0.390000 0\nHold, Levon Customer Service 6 -1 8575000 1133000 0.390000 0\nAndropov, Picov Shipping Coordinator 7 1 4450000 375000 0.310000 0\nnone none -1 -1 0 0 0.000000 0\nnone none -1 -1 0 0 0.000000 0\nnone none -1 -1 0 0 0.000000 0\nnone none -1 -1 0 0 0.000000 0\nnone none -1 -1 0 0 0.000000 0\nnone none -1 -1 0 0 0.000000 0\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5473407, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49fe2e7547e487ecbb1c0bfa013bf9a4?s=128&d=identicon&r=PG&f=1", "display_name": "peo965", "link": "https://stackoverflow.com/users/5473407/peo965"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1526, "favorite_count": 0, "accepted_answer_id": 33530686, "answer_count": 2, "score": 0, "last_activity_date": 1446666361, "creation_date": 1446663988, "last_edit_date": 1446665479, "question_id": 33530038, "link": "https://stackoverflow.com/questions/33530038/c-calling-a-print-function-in-main", "title": "C calling a print function in main", "body": "<p>I am really new to C and am writing a code that creates a struct with an array of employee information. As you can see in my code, there's employees (there's actually 4 but I cut it down to 1 here for space), and each employee has corresponding info. (Just FYI I left out some stuff in order to save space, like declaring the struct workerT). </p>\n\n<p>I made another function (prntWorker) that should print all the employees and their information, but I don't know how what perimeters to use when I call it in main(). No matter what perimeters I use, CodeBlocks returns that there's too few arguments. I'm sorry I know this is a novice question, but I would greatly appreciate any help!</p>\n\n<p>The goal is \"given an array of workerT structs that holds siz elements, print all employee information found in the array element list[indx]</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAX_ROSTER 10 //roster of employees\n\ntypedef struct workerT_struct {\n    char name[81]; //employee name\n    char title[81]; //employee title\n    int empID; //unique ID for employee\n    int empStatus; \n    int year100_salary; //before-tax salary, in cents\n    int year100_401k; //annual contribution to retirement, in cents\n    double taxRate; //fraction used to determine payroll taxes\n    int month100_paycheck; //monthly paycheck, in cents\n} workerT;\n\nvoid initWorkerArray(workerT list[], int siz);\nvoid prntWorker(workerT list[], int siz, int indx);\n\n\nint main()\n{\n    workerT roster[MAX_ROSTER];\n    prntWorker(roster, MAX_ROSTER, 0); //FIXME\n    return 0;\n}\n\nvoid initWorkerArray(workerT list[], int siz) {\n    int i = 0;\n    for (i = 0; i &lt; 4; ++i) {\n        strcpy(list[0].name, \"Buggy, Orson\");\n        strcpy(list[0].title, \"Director/President\");\n        list[0].empID = 1;\n        list[0].empStatus = 1;\n        list[0].year100_salary = 12015000;\n        list[0].year100_401k = 950000;\n        list[0].taxRate = 0.45;\n\n        strcpy(list[1].name, \"Czechs, Imelda\");\n        strcpy(list[1].title, \"Chief Financial Officer\");\n        list[1].empID = 2;\n        list[1].empStatus = 1;\n        list[1].year100_salary = 8020000;\n        list[1].year100_401k = 960000;\n        list[1].taxRate = 0.39;\n\n        strcpy(list[2].name, \"Hold, Levon\");\n        strcpy(list[2].title, \"Customer Service\");\n        list[2].empID = 6;\n        list[2].empStatus = -1;\n        list[2].year100_salary = 8575000;\n        list[2].year100_401k = 1133000;\n        list[2].taxRate = 0.39;\n\n        strcpy(list[3].name, \"Andropov, Picov\");\n        strcpy(list[3].title, \"Shipping Coordinator\");\n        list[3].empID = 7;\n        list[3].empStatus = 1;\n        list[3].year100_salary = 4450000;\n        list[3].year100_401k = 375000;\n        list[3].taxRate = 0.31;\n    }\n\n    for (i = 4; i &lt; siz; ++i) {\n        strcpy(list[i].name, \"none\");\n        strcpy(list[i].title, \"none\");\n        list[i].empID = -1;\n        list[i].empStatus = -1;\n        list[i].year100_salary = 0;\n        list[i].year100_401k = 0;\n        list[i].taxRate = 0.0;\n    }\n    return;\n}\n\nvoid prntWorker(workerT list[], int siz, int indx) {\n    int i = 0;\n    for (i = 0; i &lt; siz; ++i) {\n        printf(\"%s \", list[indx].name);\n        printf(\"%s \", list[indx].title);\n        printf(\"%d \", list[indx].empID);\n        printf(\"%d \", list[indx].empStatus);\n        printf(\"%d \", list[indx].year100_salary);\n        printf(\"%d \", list[indx].year100_401k);\n        printf(\"%lf \", list[indx].taxRate);\n        printf(\"%d \", list[indx].month100_paycheck);\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "byte", "bits"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 9, "creation_date": 1446662579, "post_id": 33529579, "comment_id": 54840672, "body": "Where is the definition of <code>struct bitset</code>? I only see the definition of <code>struct myset</code>."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1446663866, "post_id": 33529579, "comment_id": 54841458, "body": "<code>s-&gt;vector=malloc(sizeof(char)*(size&#47;(sizeof(char)*8))+1);</code> should be <code>s-&gt;vector=malloc(size+1);</code>."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1446664641, "post_id": 33529579, "comment_id": 54841896, "body": "You don&#39;t show where you call <code>bitset_intersect</code>"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1446666070, "post_id": 33529579, "comment_id": 54842672, "body": "sizeof(char) is guaranteed to be 1 by the standard."}], "answers": [{"tags": [], "owner": {"reputation": 28, "user_id": 5521207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82571317da9e427bc45743002405989a?s=128&d=identicon&r=PG", "display_name": "Subhashini", "link": "https://stackoverflow.com/users/5521207/subhashini"}, "is_accepted": false, "score": 0, "last_activity_date": 1446677965, "creation_date": 1446677965, "answer_id": 33533694, "question_id": 33529579, "link": "https://stackoverflow.com/questions/33529579/why-do-i-get-dereferencing-pointer-errors/33533694#33533694", "title": "Why do I get dereferencing pointer errors?", "body": "<p>Without the function call, its slightly hard to tell if you are passing the right values as parameters.</p>\n\n<p>If you are getting an error while trying to reference the pointer, then check the function call to make sure you are passing the address correctly. Doing so would remove this error. </p>\n\n<p>Both *dest and *src should have address that is being passed into it since both are from the same struct bitset.</p>\n"}], "owner": {"reputation": 71, "user_id": 4231341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/64c20e4e86e3729877f3f3effb7b93ee?s=128&d=identicon&r=PG&f=1", "display_name": "Herofire", "link": "https://stackoverflow.com/users/4231341/herofire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1446677965, "creation_date": 1446662484, "question_id": 33529579, "link": "https://stackoverflow.com/questions/33529579/why-do-i-get-dereferencing-pointer-errors", "title": "Why do I get dereferencing pointer errors?", "body": "<p>I'm currently doing a C programme which requires the use of pointers, which I'm not great at.\nI'm currently getting 4 errors which all say 'dereferencing pointer to incomplete type' and I don't know why.</p>\n\n<p>Here is an example of how I set up my pointers and where I get the errors.</p>\n\n<pre><code>struct myset\n{\n    unsigned char *vector;\n    int size;\n    int size_in_bytes;\n    int size_in_bits;\n};\n\nstruct myset* set_new(int size)\n{\n    int i;\n    struct myset* s;\n    s= malloc (sizeof (struct myset));\n    s-&gt;vector=malloc(sizeof(char)*(size/(sizeof(char)*8))+1);\n    for(i=0; i&lt;size; i++)\n    {\n        s-&gt;vector[i]=0;\n    }\n    s-&gt;size_in_bits=size;\n    s-&gt;size_in_bytes=(size/(sizeof(char)))+1;\n    return s;\n};\n</code></pre>\n\n<p>and I get an error whenever I try to reference the pointer, for example in this function.</p>\n\n<pre><code>void bitset_intersect(struct bitset * dest, struct bitset * src1, struct bitset * src2)\n{\n    int maxSize = dest -&gt; size_in_bits;\n    int i;\n    int j;\n    for(i = 0; i&lt;maxSize; i++)\n    {\n        for(j = 0; j&lt;maxSize; j++)\n        {\n        if(bitset_lookup(src1, i) == bitset_lookup(src2, j))\n          {\n              bitset_add(dest,i);\n          }\n        }\n    }\n}\n</code></pre>\n\n<p>The error is in the line <code>int maxSize = dest -&gt; size_in_bits;</code></p>\n\n<p>Any help would be appreciated, thanks.</p>\n"}, {"tags": ["c++", "c", "arrays", "char"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1446662550, "post_id": 33529525, "comment_id": 54840654, "body": "Looks like a bad mixture of zero terminated and  non zero terminated strings"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1446662619, "post_id": 33529525, "comment_id": 54840703, "body": "You better decide first whether to program in C or C++."}], "answers": [{"tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": false, "score": 0, "last_activity_date": 1446662468, "creation_date": 1446662468, "answer_id": 33529576, "question_id": 33529525, "link": "https://stackoverflow.com/questions/33529525/copy-characters-from-char-array-to-char-array/33529576#33529576", "title": "Copy characters from char array to char array", "body": "<p>You can use strncpy which allows you to specify the number of bytes to copy.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663041, "post_id": 33529584, "comment_id": 54840943, "body": "When i use memcpy like you said the sid inside the called functions gets the value &quot;593378e02614ebf8468cb67ca319beda&#240;&#250;&#217;,&#251;&#217;@ w&#222;UVS&#254;&#255;&#255;&#255;\u201e&#250;&#217;&lt;&quot; So it gets the bytes i want but adding useless stuff.."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663102, "post_id": 33529584, "comment_id": 54840992, "body": "@BillAdonopoulos: because it is not null terminated"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663136, "post_id": 33529584, "comment_id": 54841010, "body": "@BillAdonopoulos What is useless stuff? You said that you need to copy 32 characters. So where are the useless stuff from?"}, {"owner": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663179, "post_id": 33529584, "comment_id": 54841039, "body": "So how can i make it null terminated? If i set sessionID[33] i get null terminated string but it gets 33 characters not 32 that i need and with [32] it&#39;s not null terminated"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663278, "post_id": 33529584, "comment_id": 54841108, "body": "@BillAdonopoulos I think that the problem is not with this copy operation. The problem is how ypu are using the result string further in your code."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663403, "post_id": 33529584, "comment_id": 54841188, "body": "@BillAdonopoulos It is not clear now what you are trying to achieve. Whether you indeed need to copy 32 characters or something else. You could copy 31 characters and set the 32nd character to zero."}, {"owner": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "edited": false, "score": 0, "creation_date": 1446663812, "post_id": 33529584, "comment_id": 54841434, "body": "Thank you very much. Your solution fixed the problem :)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1446663048, "last_edit_date": 1446663048, "creation_date": 1446662512, "answer_id": 33529584, "question_id": 33529525, "link": "https://stackoverflow.com/questions/33529525/copy-characters-from-char-array-to-char-array/33529584#33529584", "title": "Copy characters from char array to char array", "body": "<p>Use <code>memcpy</code> function instead.</p>\n\n<pre><code>memcpy( sessionID, ticket, sizeof( sessionID )  );\n</code></pre>\n\n<p>Take into account that sessionID won;t contain a string. It will contain \"raw\" characters.</p>\n\n<p>As for function <code>strcpy</code> then it is designed to copy strings that is a sequence of characters termintaed by zero.\nSo in case of your code fragment it will copy as many characters as there are characters in <code>ticket</code> before the character with value '\\0' provided that such a character is present in <code>ticket</code> . </p>\n"}], "owner": {"reputation": 41, "user_id": 2808762, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251626556/picture?type=large", "display_name": "Bill Adonopoulos", "link": "https://stackoverflow.com/users/2808762/bill-adonopoulos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4221, "favorite_count": 0, "accepted_answer_id": 33529584, "answer_count": 2, "score": 0, "last_activity_date": 1446664644, "creation_date": 1446662294, "last_edit_date": 1446664644, "question_id": 33529525, "link": "https://stackoverflow.com/questions/33529525/copy-characters-from-char-array-to-char-array", "title": "Copy characters from char array to char array", "body": "<p>I have a char array with the size of 128. I want to copy the first 32 to another char array. This is how i'm trying to do it: </p>\n\n<pre><code>char ticket[128];\ndata.readBytes(ticketLength, (BYTE*)ticket);\nchar sessionID[32];\nstrcpy(sessionID, ticket);\n\nint userID = bdAuthService::checkLogin(sessionID);\n</code></pre>\n\n<p>The contents of \"ticket\" are <code>\"11aa14462ac96a9b389686672b99fa9e1IvtooKO6eVxVHO6URIQld8jFaceTaker\"</code> and when i'm trying to pass the sessionID to the checkLogin function it gets the same contents as ticket <code>\"11aa14462ac96a9b389686672b99fa9e1IvtooKO6eVxVHO6URIQld8jFaceTaker\"</code>. </p>\n\n<p>Can anyone help me here?</p>\n"}, {"tags": ["c", "eclipse"], "comments": [{"owner": {"reputation": 6274, "user_id": 2159867, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UrXXu.jpg?s=128&g=1", "display_name": "prasun", "link": "https://stackoverflow.com/users/2159867/prasun"}, "edited": false, "score": 0, "creation_date": 1446662291, "post_id": 33529407, "comment_id": 54840521, "body": "is it about adding library in eclipse for C, what is so special about socket programming?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5525672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade53657055fcc95f6fbc22c3eeaf1fd?s=128&d=identicon&r=PG&f=1", "display_name": "s.step", "link": "https://stackoverflow.com/users/5525672/s-step"}, "edited": false, "score": 0, "creation_date": 1446671476, "post_id": 33529453, "comment_id": 54845739, "body": "Followed the path you provide but library windows is empty, I would like to write client-server socket and experiencing lack of header files like&gt; sys/socket.h , netinet/in.h and so on ... how can I make use of them if they exist, if not, how can I integrate them to be able to use ones? @Eugene Sh."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 1, "user_id": 5525672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade53657055fcc95f6fbc22c3eeaf1fd?s=128&d=identicon&r=PG&f=1", "display_name": "s.step", "link": "https://stackoverflow.com/users/5525672/s-step"}, "edited": false, "score": 0, "creation_date": 1446671511, "post_id": 33529453, "comment_id": 54845764, "body": "Of course it is empty. You should add your libraries there."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 0, "last_activity_date": 1446662073, "creation_date": 1446662073, "answer_id": 33529453, "question_id": 33529407, "link": "https://stackoverflow.com/questions/33529407/need-to-set-up-network-library-for-eclipse-in-c-programming/33529453#33529453", "title": "Need to set up Network Library for eclipse in C programming", "body": "<p>Add it in <code>Project Properties-&gt;C/C++ build-&gt;Settings(Tool Settings)-&gt;Linker-&gt;Libraries</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5525672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade53657055fcc95f6fbc22c3eeaf1fd?s=128&d=identicon&r=PG&f=1", "display_name": "s.step", "link": "https://stackoverflow.com/users/5525672/s-step"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446662073, "creation_date": 1446661935, "question_id": 33529407, "link": "https://stackoverflow.com/questions/33529407/need-to-set-up-network-library-for-eclipse-in-c-programming", "title": "Need to set up Network Library for eclipse in C programming", "body": "<p>How can I make network library available on eclipse for client socket programming in C language.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4591150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca631b0d79cfe03b09e7e8145a0c19d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kris1112", "link": "https://stackoverflow.com/users/4591150/kris1112"}, "edited": false, "score": 0, "creation_date": 1446662861, "post_id": 33529572, "comment_id": 54840833, "body": "Oh god I think I&#39;m blind. Yes it was that, it was enough to close the sockfd"}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 1, "last_activity_date": 1446662450, "creation_date": 1446662450, "answer_id": 33529572, "question_id": 33529389, "link": "https://stackoverflow.com/questions/33529389/gethostbyname-returns-null-after-1021th-request/33529572#33529572", "title": "Gethostbyname returns NULL after 1021th request", "body": "<p>Most likely explanation is that each process on your system is only allowed to have 1024 open file descriptors at a time. 3 of those are reserved for <code>stdin</code>, <code>stdout</code> and <code>stderr</code>.</p>\n\n<p>So the problem is that each time you call <code>gethostbyname</code>, you create a new <code>sockfd</code>, but the code doesn't <code>close</code> the socket when it's done with it.</p>\n"}], "owner": {"reputation": 19, "user_id": 4591150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca631b0d79cfe03b09e7e8145a0c19d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kris1112", "link": "https://stackoverflow.com/users/4591150/kris1112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 33529572, "answer_count": 1, "score": 0, "last_activity_date": 1446662450, "creation_date": 1446661892, "question_id": 33529389, "link": "https://stackoverflow.com/questions/33529389/gethostbyname-returns-null-after-1021th-request", "title": "Gethostbyname returns NULL after 1021th request", "body": "<p>Hello I'm sending requests in cycle and then processing them, I have to make that until the program's not stopped by the user. I have to use UDP and after testing on localhost after 1020 requests I get error in gethostbyname, it returns NULL</p>\n\n<pre><code>int sockfd, portno, n, serverlen;\nstruct sockaddr_in serveraddr;\nstruct hostent *server;\nportno = my_port;\nsockfd = socket(AF_INET, SOCK_DGRAM, 0);\nserver = gethostbyname(my_host);\nbzero(buf, BUFSIZE);\n\nif (sockfd &lt; 0) {\n  error(\"ERROR opening socket\");\n}\nif (server == NULL) {\n  fprintf(stderr,\"ERROR, no such host as %s\\n\", my_host);\n  exit(0);\n}\n\nbzero((char *) &amp;serveraddr, sizeof(serveraddr));\nserveraddr.sin_family = AF_INET;\nbcopy((char *)server-&gt;h_addr, \n(char *)&amp;serveraddr.sin_addr.s_addr, server-&gt;h_length);\nserveraddr.sin_port = htons(portno);\nserverlen = sizeof(serveraddr);\nn = sendto(sockfd, packet, myArraySize, 0, (struct sockaddr *)&amp;serveraddr, serverlen); \n\nif (n &lt; 0) {\n  error(\"ERROR in sendto\");\n}\n\nn = recvfrom(sockfd, buf, BUFSIZE, 0, (struct sockaddr *)&amp;serveraddr, &amp;serverlen);\nif (n &lt; 0) {\n  error(\"ERROR in recvfrom\");\n} \n</code></pre>\n\n<p>I found nothing about this behavior, and if I'm not using the localhost then I get the error after just 120 requests.  </p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446661763, "post_id": 33529330, "comment_id": 54840220, "body": "A null byte has the value zero. An expression is false if it&#39;s equal to zero, true otherwise. Combine this and you got it."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1446661767, "post_id": 33529330, "comment_id": 54840222, "body": "It just gets the <code>i</code>th value of the array <code>a</code>. If its zero, the loop terminates; if it&#39;s nonzero, it continues."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1446661816, "post_id": 33529330, "comment_id": 54840248, "body": "For the love of!... Don&#39;t use <code>gets()</code>!"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1446661784, "creation_date": 1446661784, "answer_id": 33529358, "question_id": 33529330, "link": "https://stackoverflow.com/questions/33529330/what-does-this-for-loops-condition-do/33529358#33529358", "title": "What does this for loop&#39;s condition do?", "body": "<p><code>a[i]</code> evaluates to non-zero (true) for all the characters except the terminating null character. Hence, the loop breaks when <code>a[i]</code> is the terminating null character.</p>\n"}, {"tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": true, "score": 2, "last_activity_date": 1446661816, "creation_date": 1446661816, "answer_id": 33529365, "question_id": 33529330, "link": "https://stackoverflow.com/questions/33529330/what-does-this-for-loops-condition-do/33529365#33529365", "title": "What does this for loop&#39;s condition do?", "body": "<p><code>gets()</code> will return a 0-terminated string, as all C strings should be. So if you entered \"four\", the actual contents added to <code>a</code> will be those four letters followed by a <code>0</code> byte.</p>\n\n<pre><code> // as if you'd declared\n char a[] = { 'f', 'o', 'u', 'r', 0 };\n</code></pre>\n\n<p>The loop tests each character to see that it's not <code>0</code>. When <code>a[i]</code> is <code>0</code>, the condition fails, and the loop ends.  It's simply looping over all of the actual characters in the string.</p>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1446661869, "creation_date": 1446661869, "answer_id": 33529382, "question_id": 33529330, "link": "https://stackoverflow.com/questions/33529330/what-does-this-for-loops-condition-do/33529382#33529382", "title": "What does this for loop&#39;s condition do?", "body": "<p>By convention, strings in C have a zero byte at the end to indicate the end of the string. The for checks for this byte and stops executing when it is reached because all non-zero bytes in the string evaluate to true.</p>\n"}], "owner": {"reputation": 188, "user_id": 5516474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71edc807db6aa3176cd7538ebd05b012?s=128&d=identicon&r=PG&f=1", "display_name": "Sparkzz", "link": "https://stackoverflow.com/users/5516474/sparkzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 33529365, "answer_count": 3, "score": 0, "last_activity_date": 1446662150, "creation_date": 1446661684, "last_edit_date": 1446662150, "question_id": 33529330, "link": "https://stackoverflow.com/questions/33529330/what-does-this-for-loops-condition-do", "title": "What does this for loop&#39;s condition do?", "body": "<p>This is a program for converting letters to upper case.</p>\n\n<p>Could anyone explain me what the condition of the for loop in the below program does?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;ctype.h&gt;\n\nint main()\n{\n    int i;\n    char a[50];\n    gets(a);\n\n    for(i=0;a[i];i++)\n      a[i]=toupper(a[i]);\n\n    puts(a);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "gdb"], "comments": [{"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 2, "creation_date": 1446661677, "post_id": 33529254, "comment_id": 54840177, "body": "Looks like you scribbled on the stack pointer and are now executing at address 0x0 which generally causes SEGV."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1447684074, "post_id": 33529254, "comment_id": 55243701, "body": "are you sure this is not just the fact that the signal handler is call in this thread context"}], "answers": [{"tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1452241250, "creation_date": 1452241250, "answer_id": 34672404, "question_id": 33529254, "link": "https://stackoverflow.com/questions/33529254/process-crashed-in-a-thread-that-shouldnt-be-running/34672404#34672404", "title": "Process crashed in a thread that shouldn&#39;t be running", "body": "<p>Just a hint, perhaps your binary is compiled with no debug information (option -g for GCC). Perhaps the backtrace would look more informatively using this option and you get more ideas. Or the backtrace looks so because of a corrupted stack...</p>\n"}], "owner": {"reputation": 478, "user_id": 27437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b633efe017ff33cc906e8f38aaba04e?s=128&d=identicon&r=PG", "display_name": "jrb", "link": "https://stackoverflow.com/users/27437/jrb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1452241250, "creation_date": 1446661348, "question_id": 33529254, "link": "https://stackoverflow.com/questions/33529254/process-crashed-in-a-thread-that-shouldnt-be-running", "title": "Process crashed in a thread that shouldn&#39;t be running", "body": "<p>I have a multi-threaded process that crashed due to a SEGV, and GDB shows this strange looking backtrace:</p>\n\n<pre><code>Thread 1 (LWP 3726):\n#0  0x00000000 in ?? ()\n#1  0x00000000 in ?? ()\n</code></pre>\n\n<p>This is a thread that has already exited but hasn't been joined. Can I believe this backtrace? Has this thread really been scheduled even though it has finished? All other threads appear to be in a sensible state. This is on an ARM embedded system running Linux kernel 3.10.</p>\n"}, {"tags": ["c", "rust", "c-preprocessor"], "comments": [{"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 3, "creation_date": 1446660722, "post_id": 33529030, "comment_id": 54839592, "body": "Asking for tools/books/etc... is off-topic on Stack-Overflow unfortunately. A simple trick would be to reword the question to just ask &quot;how to&quot; instead of specifying that you are looking for a tool... after all there may be a tool-less way of doing it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1446670767, "post_id": 33529030, "comment_id": 54845366, "body": "In C, the general answer is &quot;no&quot;. This is because literals are considered <i>constant expressions</i>, whereas variables with a <code>const</code> qualifier are not. And there are some contexts in C where a <i>constant expression</i> is required (for example, initializers for static variables).  So this change might break the program."}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 508023, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d2576d83a2b732ace62aa75c5a643857?s=128&d=identicon&r=PG", "display_name": "Target-san", "link": "https://stackoverflow.com/users/508023/target-san"}, "edited": false, "score": 0, "creation_date": 1446719944, "post_id": 33531393, "comment_id": 54864881, "body": "That&#39;s what I  struggle against. There are several hundreds of constants defined via <code>#define</code>. And I need to preserve them."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "reply_to_user": {"reputation": 421, "user_id": 508023, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d2576d83a2b732ace62aa75c5a643857?s=128&d=identicon&r=PG", "display_name": "Target-san", "link": "https://stackoverflow.com/users/508023/target-san"}, "edited": false, "score": 0, "creation_date": 1464562790, "post_id": 33531393, "comment_id": 62524903, "body": "@Target-san with <code>-dM</code> or <code>-dD</code> you can preserve macros (the difference is &quot;only&quot; vs &quot;both&quot;)"}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 0, "last_activity_date": 1446720132, "last_edit_date": 1446720132, "creation_date": 1446668921, "answer_id": 33531393, "question_id": 33529030, "link": "https://stackoverflow.com/questions/33529030/convert-simple-c-defines-into-rust-constants/33531393#33531393", "title": "Convert simple C #define&#39;s into Rust constants", "body": "<p>Running the headers through <code>gcc -E</code> (i.e. the preprocessor) will remove the <code>#define</code>s. It may remove more than you want though.</p>\n\n<p>If you want to selectively preprocess, there used to be a utility called <code>scpp</code> that did that. I can't immediately find a reference to it other than to some tar files to download, but you may have more luck.</p>\n"}], "owner": {"reputation": 421, "user_id": 508023, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d2576d83a2b732ace62aa75c5a643857?s=128&d=identicon&r=PG", "display_name": "Target-san", "link": "https://stackoverflow.com/users/508023/target-san"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1220, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464562295, "creation_date": 1446660569, "last_edit_date": 1464562295, "question_id": 33529030, "link": "https://stackoverflow.com/questions/33529030/convert-simple-c-defines-into-rust-constants", "title": "Convert simple C #define&#39;s into Rust constants", "body": "<p>I have a proprietary library with a long story and 30KLoC header. I'd like to generate bindings for Rust to it. And I've used <code>bindgen</code> crate almost successfully. Except <code>bindgen</code> can't transform macro constants into normal constants. Because those constants are defined in a fuzzy way, like</p>\n\n<pre><code>#define CONSTANT ((const_type)SOME_OTHER_CONSTANT)\n</code></pre>\n\n<p>So, is there some way to translate such half-constants into normal Rust ones:</p>\n\n<pre><code>const Type name = value;\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Apparently, crate <code>bindgen</code> uses <code>clang</code> as its backend. And <code>clang</code> is able to deal with macro definitions and other such stuff, if right flag is provided to parser. So, can anyone advice good tutorial on dealing with macro definitions using <code>libclang</code> API?</p>\n"}, {"tags": ["c", "gcc", "arm", "inline-assembly", "gcc-extensions"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446660291, "post_id": 33528857, "comment_id": 54839332, "body": "Why do you tag <code>my_function</code> as immediate argument? And how would <code>may_function</code> return, as you only branch? The following line will never be executed."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1446661093, "post_id": 33528857, "comment_id": 54839845, "body": "Create a very short C program that calls <code>my_function</code>. Then compile with the <code>-S</code> option and take a look at the assembly that the compiler generates."}, {"owner": {"reputation": 7, "user_id": 5285937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6de2c8d0e9ea58445330642349609f6?s=128&d=identicon&r=PG&f=1", "display_name": "Geancarlo Abich", "link": "https://stackoverflow.com/users/5285937/geancarlo-abich"}, "edited": false, "score": 0, "creation_date": 1446661839, "post_id": 33528857, "comment_id": 54840261, "body": "This code works at Cortex-M4 instruction set, but not at Cortex-M0. Olaf"}, {"owner": {"reputation": 7, "user_id": 5285937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6de2c8d0e9ea58445330642349609f6?s=128&d=identicon&r=PG&f=1", "display_name": "Geancarlo Abich", "link": "https://stackoverflow.com/users/5285937/geancarlo-abich"}, "edited": false, "score": 0, "creation_date": 1446662277, "post_id": 33528857, "comment_id": 54840510, "body": "This not solve my problem. user3386109"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1446663946, "post_id": 33528857, "comment_id": 54841499, "body": "Given that the <code>b</code> mnemonic takes a symbol as an argument, not an immediate, <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.2.0/gcc/Machine-Constraints.html#Machine-Constraints\" rel=\"nofollow noreferrer\">the appropriate constraint</a> would appear to be <code>S</code>, if just writing <code>&quot;b my_function\\n&quot;</code> in the asm isn&#39;t good enough. The fact that this code won&#39;t assemble is at least saving you the fun of debugging the &quot;bogus clobber list&quot; and/or &quot;tail call with unknown return address and without popping the stack frame&quot; issues..."}], "answers": [{"comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1446680307, "post_id": 33534002, "comment_id": 54849742, "body": "There should be no need for a <i>call site</i> to ever preserve callee-saved registers, even when doing totally undefined craziness like transferring control outside of an inline asm (<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#GotoLabels\" rel=\"nofollow noreferrer\">asm goto</a> excepted). In this case, it&#39;s all the registers the callee <i>won&#39;t</i> preserve that need to be saved, but since you&#39;d have to declare all of them and more on the clobber list anyway for this to have the remotest chance of working, it&#39;s effectively already taken care of."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1446682163, "post_id": 33534002, "comment_id": 54850314, "body": "@Notlikethat I answered the primary about the bl.  I pulled code from a standalone.  I told OP to disassemble and check wrapper and it might do the save/restore for him.  Also, at the end, I said the bl by itself might be sufficient.  Overkill, maybe, OP will figure it out.  But, with anything more complex:  (e.g.) containing func takes 3 arguments:  calls fA(a1), fB(a2), fC(a3).  You&#39;d need to save a1-a3 in v1-v3 first [and do a1 = v2, a1 = v3] before the calls.  Then stmfd/ldmfd is just v1-v3.  Maybe easier than trying to do it with constraints [if possible at all]"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1446683897, "post_id": 33534002, "comment_id": 54850798, "body": "This doesn&#39;t even address the actual question; you&#39;ve just added an inappropriate boilerplate function prologue and epilogue around the still-broken line of code being asked about, and suggested the OP should generate their syntax error with a slightly different instruction in their quest to implement a fundamentally broken self-crashing code idea. Furthermore, even the &quot;helpful suggestion&quot; is actively harmful as there&#39;s no guarantee that r14 contains a return address at that point, and even if it did, popping it back into the PC <i>inside an inline asm</i> is utterly wrong."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1446693908, "post_id": 33534002, "comment_id": 54853384, "body": "@Notlikethat Read the <i>first</i> sentence/paragraph again [<i>several</i> times until <i>you</i> get it]: need to use BL inst.  Question answered.  Beyond that, OP&#39;s use of BX was wrong--using unreliable r14 and trying to switch to thumb arch--not supported on most unixlike OSes [some chips don&#39;t even have it].  If called function didn&#39;t change r14/lr, he&#39;d loop infinitely on the BX.  There were more than enough caveats in what I said, I gave OP a roadmap on how to decide to use/not use.  Remember, I said that wrapper may do stmfd/ldmfd for you [implying leave off].  Move on."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1446715411, "post_id": 33534002, "comment_id": 54862049, "body": "The problem posed in the question is that <code>b %[my_function]</code> fails to assemble with a syntax error. Changing that to <code>bl %[my_function]</code> does nothing to resolve said syntax error."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1446679976, "last_edit_date": 1446679976, "creation_date": 1446679365, "answer_id": 33534002, "question_id": 33528857, "link": "https://stackoverflow.com/questions/33528857/asm-inline-call-c-external-function/33534002#33534002", "title": "ASM Inline call C external function", "body": "<p>You want the <code>BL</code> instruction.  This is \"branch and link\".  It does a jump and stores the return address in <code>r14</code>.</p>\n\n<p>But, you've still got a problem ...  When you do <code>BL</code>, it <em>destroys</em> the <code>r14</code> that <em>you</em> need.  You've still got more work to do, even after the following:</p>\n\n<pre><code>stmfd   sp!,{v1-v6,lr}              // preserve caller registers\nbl      %[my_function]              // call function\nldmfd   sp!,{v1-v6,pc} @std         // restore caller registers and return\n</code></pre>\n\n<p>You'll need more investigation.  You might want to disassemble the compiled function and see what wrapper goes around your inline asm and adjust accordingly.  It may do the <code>stmfd/ldmfd</code> for you.  Try marking <code>r14</code> as a clobber.</p>\n\n<p>You may be better off with just the <code>BL</code>.  The <code>BX</code> without restore might produce an infinite loop or unpredictable results.  I'd leave it off</p>\n"}, {"comments": [{"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1446734453, "post_id": 33546682, "comment_id": 54874458, "body": "<b>NOTE!!</b> You can not use this mechanism for a complex function (with a stack frame).  The <code>f()</code> function is extremely simple.  If you wanted to actually return to <code>f()</code>, then you need to use <code>bl</code> and should add <code>lr</code> to the clobber list.  However, the <code>b</code> might be useful for an advanced programmer; conditional <code>TAIL_CALL</code> with a <code>longjmp()</code> may implement some primitive exception handling for instance."}], "tags": [], "owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "is_accepted": false, "score": 0, "last_activity_date": 1446745879, "last_edit_date": 1446745879, "creation_date": 1446732491, "answer_id": 33546682, "question_id": 33528857, "link": "https://stackoverflow.com/questions/33528857/asm-inline-call-c-external-function/33546682#33546682", "title": "ASM Inline call C external function", "body": "<p>After composing the below, I remembered the <a href=\"http://www.ethernut.de/en/documents/arm-inline-asm.html\" rel=\"nofollow\">ethernut tutorial</a>.  He has virtually the same answer,</p>\n\n<pre><code>asm volatile(\n    \"mov lr, %1\\n\\t\"\n    \"bx %0\\n\\t\"\n    : : \"r\" (main), \"r\" (JMPADDR));\n</code></pre>\n\n<p>The OP would do well to read this tutorial; even though it is for traditional ARM as opposed to an 'm0'.</p>\n\n<hr>\n\n<p>You may use the <code>'r'</code> constraint to place the address in a register and branch to it.</p>\n\n<p><a href=\"https://goo.gl/OOwREk\" rel=\"nofollow\">An example</a> can be found on the online compiler godbolt.</p>\n\n<pre><code>extern int my_function(void);\n\nvoid f(void)\n{\n__asm volatile (\n                \"   cmp     r3,#0                   \\n\"                     \n                \"   b %[my_function]                \\n\" //Call function\n                \"   bx r14                          \\n\"\n                : // no output\n                : [my_function] \"r\" (my_function) // input\n                : \"r0\" // clobber\n            );\n\n }\n</code></pre>\n\n<p>With the output,</p>\n\n<pre><code>f():\n    ldr r3, .L2\n       cmp     r3,#0                   \n   b r3                \n   bx r14                          \n\n    bx  lr\n.L2:\n    .word   my_function()\n</code></pre>\n\n<p>We can see several issues with the output.  r14 is <code>lr</code> and the <code>b r3</code> will transfer control directly and return to the caller of <code>f</code>.  The <code>cmp r3, #0</code> seems completely un-needed (given limited context of question).</p>\n\n<p>The sample above answers the question and it could be used for a tail-call macro or other use, but it obviously needs some work.  A function pointer like,</p>\n\n<pre><code>int (*g)(void) = my_function;\n</code></pre>\n\n<p>will also work as the parameter <em>'my_function'</em> to the GCC extended assembler.</p>\n\n<p><a href=\"https://goo.gl/jp39KQ\" rel=\"nofollow\">Another method</a> is just to use 'C' macro string concatenation.  Here is a starting sample,</p>\n\n<pre><code>#define xstr(s) str(s)\n#define str(s) #s\n#define TAIL_CALL(func) __asm volatile(\" b  \" str(func) \"\\n\")\n</code></pre>\n\n<p>For most code sizes (jump distance), the branch will be able to resolve (4MB?).  If you use the function pointer method, then there is no issue.</p>\n"}], "owner": {"reputation": 7, "user_id": 5285937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6de2c8d0e9ea58445330642349609f6?s=128&d=identicon&r=PG&f=1", "display_name": "Geancarlo Abich", "link": "https://stackoverflow.com/users/5285937/geancarlo-abich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2486, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446745879, "creation_date": 1446659964, "last_edit_date": 1446733641, "question_id": 33528857, "link": "https://stackoverflow.com/questions/33528857/asm-inline-call-c-external-function", "title": "ASM Inline call C external function", "body": "<p>I'm trying to call an external function in c by an asm inline with a branch. I'm compiling to an arm m0 instruction set but it returns bad expression.</p>\n\n<p>The code is:</p>\n\n<pre><code>__asm volatile (\n                \"   cmp     r3,#0                   \\n\"                     \n                \"   b %[my_function]                \\n\" //Call function\n                \"   bx r14                          \\n\"\n                : // no output\n                : [my_function] \"i\" (my_function) // input\n                : \"r0\" // clobber\n            );\n</code></pre>\n\n<p>The return is:</p>\n\n<pre><code>/tmp/ccICkDIE.s: Assembler messages:\n/tmp/ccICkDIE.s:152: Error: bad expression -- `b #my_function'\n</code></pre>\n\n<p>What we need to do?</p>\n"}, {"tags": ["c", "merge"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1446658827, "post_id": 33528306, "comment_id": 54838331, "body": "Typo? <code>int temp_b[n1];</code> --&gt; <code>int temp_b[n2];</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446658828, "post_id": 33528306, "comment_id": 54838332, "body": "Try to debug your &quot;mergeArray&quot;. The problem is likely there."}, {"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446658959, "post_id": 33528306, "comment_id": 54838415, "body": "@WeatherVane thanks for pointing it out. But code is still not working."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446658989, "post_id": 33528306, "comment_id": 54838435, "body": "@learner Are you using a debugger?"}, {"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "edited": false, "score": 0, "creation_date": 1446659036, "post_id": 33528306, "comment_id": 54838468, "body": "I am using linux + sublime text + command line"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446659092, "post_id": 33528306, "comment_id": 54838496, "body": "Then use it! <b>gdb</b> is the standard suggestion for linux systems."}], "answers": [{"tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": true, "score": 1, "last_activity_date": 1446659742, "creation_date": 1446659742, "answer_id": 33528789, "question_id": 33528306, "link": "https://stackoverflow.com/questions/33528306/merge-sort-not-working-in-all-cases/33528789#33528789", "title": "Merge sort not working in all cases", "body": "<p>Three problems:  (1) in <code>mergeArray</code>, you used <code>n1</code> in place of <code>n2</code> for <code>temp_b</code>.  Change it to:</p>\n\n<pre><code>int temp_b[n2];\n</code></pre>\n\n<p>(2) After creating <code>temp_a</code> and <code>temp_b</code>, after the comment \"now merge these two arrays\", you need to set <code>k</code> to <code>left</code> rather than <code>0</code>:</p>\n\n<pre><code>k = left;\n</code></pre>\n\n<p>(3) In mergeSort, your expression for <code>middle</code> is incorrect, you need to add rather than subtract:</p>\n\n<pre><code>int middle = ( right + left ) / 2 ;\n</code></pre>\n\n<p>It should work with these three changes.</p>\n"}], "owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 33528789, "answer_count": 1, "score": 0, "last_activity_date": 1446659742, "creation_date": 1446658245, "last_edit_date": 1446658981, "question_id": 33528306, "link": "https://stackoverflow.com/questions/33528306/merge-sort-not-working-in-all-cases", "title": "Merge sort not working in all cases", "body": "<p>I have written following code for merge sort:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid mergeSort(int array[],int left, int right);\n\nvoid mergeArray(int array[],int left,int middle, int right);\n\nvoid mergeArray(int array[],int left,int middle, int right)\n{\n\n    int n1 = middle - left + 1;\n    int n2 = right - middle ;\n\n    int temp_a[n1];\n    int temp_b[n2];\n\n    int i = 0;\n    int j = 0;\n    int k = 0;\n\n    for ( i = left ; i &lt;= middle ; i++ )\n    {\n        temp_a[k++] = array[i];\n    }\n\n    for ( i = middle + 1 ; i &lt; right + 1; i++ )\n    {\n        temp_b[j++] = array[i];\n    }\n\n    // now merge these two arrays\n\n\n     i = 0;\n     j = 0;\n     k = 0;\n\n\n    while ( i &lt; n1 &amp;&amp; j &lt; n2 )\n    {\n        if ( temp_a[i] &lt; temp_b[j])\n        {\n            array[k++] = temp_a[i++];\n\n        }\n        else\n        {\n            array[k++] = temp_b[j++];\n        }\n    }\n\n    while ( i &lt; n1 )\n    {\n        array[k++] = temp_a[i++];       \n    }\n\n    while ( j &lt; n2 )\n    {\n        array[k++] = temp_b[j++];\n    }\n\n\n\n}\n\n\nvoid mergeSort(int array[],int left, int right)\n{\n    // since there is only one element in the array.\n    printf(\"I am in merge sort. left : %d, right : %d\\n\",left,right);\n    if ( right - left &lt; 1 )\n    {\n        return;\n    }\n    else\n    {\n        int middle = ( right - left ) / 2 ;\n        mergeSort( array,left, middle );    \n        mergeSort( array, middle +1 , right);\n\n        mergeArray(array,left,middle,right);\n    }\n\n\n}\n\nint main(int argc, char const *argv[])\n{\n    int n = 3;\n    int i;\n\n    int array[] = { 12,11,14,19};\n\n    mergeSort(array,0,n);\n    printf(\"\\nArray is: \\n\");\n\n    for (i = 0; i &lt;= n; ++i)\n    {\n        printf(\"%d\\n\",array[i] );\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The above code is working for <code>n = 1</code> and <code>n = 2</code> but not for other values. </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446658377, "post_id": 33528222, "comment_id": 54838029, "body": "The term &quot;pre&quot; and &quot;post&quot; actually not only refer to the position of the operator, but also to its semantics..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1446658534, "post_id": 33528222, "comment_id": 54838137, "body": "Is there a good reason to use such a construct? The only one I can see is academic (arguably)."}, {"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "edited": false, "score": 0, "creation_date": 1446658553, "post_id": 33528222, "comment_id": 54838154, "body": "but also to its semantics : I couldn&#39;t get it."}, {"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446658676, "post_id": 33528222, "comment_id": 54838236, "body": "@EugeneSh. Yeah, this was the case."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1446659448, "post_id": 33528222, "comment_id": 54838740, "body": "Yes, so don&#39;t do it.  It&#39;s trash code."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1446659580, "post_id": 33528222, "comment_id": 54838842, "body": "I&#39;m voting to close this question as off-topic because it&#39;s trash code of zero or negative use to future SO users."}], "answers": [{"comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1446658337, "post_id": 33528244, "comment_id": 54838002, "body": "@EOF Yep, fixed. Have overlooked the corresponding line."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 2, "last_activity_date": 1446658327, "last_edit_date": 1446658327, "creation_date": 1446658098, "answer_id": 33528244, "question_id": 33528222, "link": "https://stackoverflow.com/questions/33528222/using-p-in-a-c-program-gives-segmentation-fault/33528244#33528244", "title": "Using ++*p++ in a c program gives segmentation fault", "body": "<pre><code>++*p1++;\n</code></pre>\n\n<p>is equal to</p>\n\n<pre><code>(++*(p1++));\n</code></pre>\n\n<p>which attempts to modify the string literal. Problem is:<br>\n<strong>Modifying string literals is undefined behavior.</strong><br></p>\n\n<p>Therefore <code>p1</code> should be a <code>const char*</code>, which is also strictly enforced in C++.</p>\n\n<p>Try</p>\n\n<pre><code>char str[] = \"khan\";\nchar* p1 = str;\n</code></pre>\n\n<p>for example. This will store the string on the stack and not in some read-only section.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1446658402, "post_id": 33528345, "comment_id": 54838043, "body": "Actually it is not! Read about operator preceedence."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1446658432, "post_id": 33528345, "comment_id": 54838064, "body": "<code>p</code> and <code>*p</code> are separate objects."}, {"owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1446658543, "post_id": 33528345, "comment_id": 54838143, "body": "p points to string literal and *p to first position in that string literal. I know"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1446658597, "post_id": 33528345, "comment_id": 54838183, "body": "You&#39;re not modifying the same object; the postfix operator advances the pointer, while the prefix operator increments the thing it&#39;s pointing <i>to</i>."}, {"owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1446658943, "post_id": 33528345, "comment_id": 54838400, "body": "if p points to whole string literal increment p++ would make it point out of bound but in my computer it incrementing by 1byte I am getting output <a href=\"http://picpaste.com/post-PrDLkB6v.png\" rel=\"nofollow noreferrer\">picpaste.com/post-PrDLkB6v.png</a>"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1446660532, "post_id": 33528345, "comment_id": 54839469, "body": "@RaghibAhsan: no, <code>p++</code> advances to the next character in the string, not to the end of the literal.  The type of <code>p</code> is <code>char *</code>, not <code>char (*)[5]</code>."}], "tags": [], "owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "is_accepted": false, "score": -1, "last_activity_date": 1446659530, "last_edit_date": 1446659530, "creation_date": 1446658363, "answer_id": 33528345, "question_id": 33528222, "link": "https://stackoverflow.com/questions/33528222/using-p-in-a-c-program-gives-segmentation-fault/33528345#33528345", "title": "Using ++*p++ in a c program gives segmentation fault", "body": "<p>Actually it is undefined behaviour.</p>\n\n<blockquote>\n  <p>++*p++</p>\n</blockquote>\n\n<p>We would have no way of knowing which order the two increments would happen in, and in fact the compiler wouldn't have any idea either. We could not argue that since post has higher precedence than pre, and since * and ++ associates from left to right, you are thinking that it would happen like this:</p>\n\n<pre><code>p1++;\n++(*p1);\n</code></pre>\n\n<p>but it could happen the other way <code>++(*p1)</code> followed by <code>p1++</code>. The string could be modified and the string would become</p>\n\n<blockquote>\n  <p>\"libo\"</p>\n</blockquote>\n\n<p>because ++ just says that the increment happens later, not that it happens immediately.</p>\n"}, {"comments": [{"owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1446661048, "post_id": 33528982, "comment_id": 54839815, "body": "why you said and emphasise that output would be &quot;libo &quot; not &quot;kibo&quot; .Wouldn&#39;t be there undefined behaviour as more than one sideeffects is in single statement and on single variable."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1446663094, "post_id": 33528982, "comment_id": 54840984, "body": "@RaghibAhsan: there&#39;s no undefined behavior here; the postfix <code>++</code> is applied to the pointer, the prefix <code>++</code> is applied to what it <i>points to</i>.  We&#39;re not modifying the same object."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1446665459, "post_id": 33528982, "comment_id": 54842318, "body": "There is no guarantee that <code>&#39;k&#39;+1</code> is equal to &#39;l&#39;."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1446660407, "creation_date": 1446660407, "answer_id": 33528982, "question_id": 33528222, "link": "https://stackoverflow.com/questions/33528222/using-p-in-a-c-program-gives-segmentation-fault/33528982#33528982", "title": "Using ++*p++ in a c program gives segmentation fault", "body": "<p>The expression</p>\n\n<pre><code>++*p1++\n</code></pre>\n\n<p>is parsed as</p>\n\n<pre><code>(++ (* (p1 ++) ) )\n</code></pre>\n\n<p>and evaluated as follows:</p>\n\n<ol>\n<li><code>p1++</code> is evaluated; the result of the expression is the value of <code>p1</code> <em>before</em> the increment;</li>\n<li>the result of 1 is dereferenced</li>\n<li>the result of 2 is incremented</li>\n<li>Somewhere between the end of 1 and now, <code>p1</code> is advanced to point to the next element.</li>\n</ol>\n\n<p>You're getting the segfault because you're attempting to alter the contents of a <em>string literal</em>, which is not allowed.  Change your code to something like</p>\n\n<pre><code>char str[] = \"khan\";\nchar *p1 = str;\n</code></pre>\n\n<p>and it should work.  Note that your output will be <code>\"libo\"</code>, not <code>\"kibo\"</code>.  </p>\n"}], "owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 33528982, "answer_count": 3, "score": -3, "last_activity_date": 1446660407, "creation_date": 1446657988, "question_id": 33528222, "link": "https://stackoverflow.com/questions/33528222/using-p-in-a-c-program-gives-segmentation-fault", "title": "Using ++*p++ in a c program gives segmentation fault", "body": "<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char const *argv[])\n{\n    char *p1=\"khan\",*p2;\n    p2 = p1;\n\n    while ( *p1 != '\\0')\n    {\n        // printf(\"I am in while.\\n\");\n        ++*p1++;\n        // printf(\"I am after ++*p1++.\\n\");\n\n        printf(\"%c\\n\",*p1 );\n    }\n    printf(\"%s %s\\n\", p1,p2);\n}\n</code></pre>\n\n<p>The compilation of above code gives unexpected results:</p>\n\n<blockquote>\n  <p>Segmentation fault (core dumped)</p>\n</blockquote>\n\n<p>Here is what I am expecting:</p>\n\n<pre><code>++*p1++;\n</code></pre>\n\n<ol>\n<li>Post ++ has higher precedance: p1 = p1 + 1.</li>\n<li>Now, p1 will point to the p1 -> h.</li>\n<li>We have two operators here <code>++*</code>, * has higher precedance. So *p1 will be increased and we have value, *p1 = i;</li>\n</ol>\n\n<p>Now, I should get \"ki..\" in p1. But, I am unable to iterate only once in while loop.</p>\n\n<pre><code> printf(\"I am in while.\\n\");\n   ++*p1++; //getting error here.\n printf(\"I am after ++*p1++.\\n\"); //this line is never called\n</code></pre>\n"}, {"tags": ["c", "pointers", "dynamic", "allocation"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446658090, "post_id": 33528202, "comment_id": 54837819, "body": "What is the question?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446658182, "post_id": 33528202, "comment_id": 54837890, "body": "It looks like there is only one problem: <code>&quot;\\0&quot;</code> should be <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 2189, "user_id": 1517864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/21534592a6956b64bd30df031d9dd2d0?s=128&d=identicon&r=PG", "display_name": "jayant", "link": "https://stackoverflow.com/users/1517864/jayant"}, "edited": false, "score": 0, "creation_date": 1446658188, "post_id": 33528202, "comment_id": 54837894, "body": "If all you want to do is to initialise to <code>\\0</code> then you can use <code>calloc</code> instead of <code>malloc</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1446658277, "post_id": 33528202, "comment_id": 54837957, "body": "Anyway, <code>2^n = 1 &lt;&lt; n</code>. No need to use functions."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446658312, "post_id": 33528202, "comment_id": 54837988, "body": "@EugeneSh. He is using <code>pow</code> for that ."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1446658372, "post_id": 33528202, "comment_id": 54838024, "body": "@ameyCU As I said, no need for that. Especially given that it is <code>double</code>."}], "answers": [{"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 13, "user_id": 5471417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075caa016fe6eedcd918448ec48dfaa3?s=128&d=identicon&r=PG&f=1", "display_name": "giux", "link": "https://stackoverflow.com/users/5471417/giux"}, "edited": false, "score": 0, "creation_date": 1446658917, "post_id": 33528274, "comment_id": 54838385, "body": "@giux Glad it helped  :-)"}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 1, "last_activity_date": 1446658170, "creation_date": 1446658170, "answer_id": 33528274, "question_id": 33528202, "link": "https://stackoverflow.com/questions/33528202/how-i-deal-with-pointers/33528274#33528274", "title": "How I deal with pointers?", "body": "<pre><code> str[i][j] = \"\\0\";\n</code></pre>\n\n<p>This expression is assigning a string . You should use single quotes-</p>\n\n<pre><code> str[i][j] = '\\0';\n</code></pre>\n\n<p>And to initialize , you don't need loop, use <code>memset</code> for it , or instead use <code>calloc</code> for allocation and initialization.</p>\n"}], "owner": {"reputation": 13, "user_id": 5471417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/075caa016fe6eedcd918448ec48dfaa3?s=128&d=identicon&r=PG&f=1", "display_name": "giux", "link": "https://stackoverflow.com/users/5471417/giux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 33528274, "answer_count": 1, "score": -1, "last_activity_date": 1446658461, "creation_date": 1446657924, "last_edit_date": 1446658461, "question_id": 33528202, "link": "https://stackoverflow.com/questions/33528202/how-i-deal-with-pointers", "title": "How I deal with pointers?", "body": "<p>It's been two days I'm stuck with this problem. \nI don't know how to handle pointers, I've read some books but they just tell what they are etc but not how to implement them with structures or functions..</p>\n\n<p>This is a simple example where I dynamically allocate a <code>char**</code> with <code>2^n</code> lines and <code>n</code> columns. \nHow I can initialize the string putting it equal to \"\\0\" since it's a pointer? It gives error with two nested for.. What do I do?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nvoid alloc_str(char **str,int n);\n\nint main()\n{\n    int i,j,n;\n    char **str;\n\n    printf(\"n: \\n\");\n    scanf(\"%d\", &amp;n);\n    alloc_str(str,n);\n    for(i=0;i&lt;pow(2,n);i++)\n        for(j=0;j&lt;n;j++)\n            str[i][j] = \"\\0\";\n    return 0;\n}\n\nvoid alloc_str(char **str,int n){\n    int i;\n    str = malloc (pow(2,n) * sizeof(char *));\n    if(str == NULL) exit(1);\n    for(i=0;i&lt;pow(2,n);i++){\n        str[i] = malloc(n * sizeof (char));\n        if(str[i] == NULL) exit(1);\n}\n</code></pre>\n"}, {"tags": ["c", "parsing"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1446656933, "post_id": 33527832, "comment_id": 54837039, "body": "I believe Google is not down currently \u2013 why don&#39;t you consult it for some beginners&#39; tutorials or language references in which operators are explained?"}, {"owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "edited": false, "score": 2, "creation_date": 1446657043, "post_id": 33527832, "comment_id": 54837110, "body": "This is a perfectly legitimate newbie question."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1446657343, "post_id": 33527832, "comment_id": 54837321, "body": "see <a href=\"http://stackoverflow.com/q/52550/1708801\">What does the comma operator <code>,</code> do in C?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "edited": false, "score": 1, "creation_date": 1446658758, "post_id": 33527832, "comment_id": 54838288, "body": "@JohannGerell To wonder, yes. To ask here without any sort of basic searching, no. That&#39;s pretty much the main thing given as a valid reason for down voting."}, {"owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "edited": false, "score": 0, "creation_date": 1446727858, "post_id": 33527832, "comment_id": 54869724, "body": "@hvd I doubt that many newbies can successfully formulate a Google search term for that unless they already know that &#39;,&#39; (comma) is an <i>operator</i> in C, and if they did know that, the need to ask at all would diminish. Or how would <i>you</i> do that search?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "edited": false, "score": 1, "creation_date": 1446729061, "post_id": 33527832, "comment_id": 54870500, "body": "@JohannGerell I would search for &quot;what does a comma-separated list of numbers mean in c&quot;. And that does give an answered question in its results. Actually, the question you find in the results was answered by me, but I promise I didn&#39;t go through my own posting history to guess search terms that might work. :)"}], "answers": [{"comments": [{"owner": {"reputation": 622, "user_id": 1738714, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/LXC33.jpg?s=128&g=1", "display_name": "bilserial", "link": "https://stackoverflow.com/users/1738714/bilserial"}, "edited": false, "score": 1, "creation_date": 1446656974, "post_id": 33527846, "comment_id": 54837064, "body": "Why is this thing legal in C? Is there any useful need for this fancy syntax?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 622, "user_id": 1738714, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/LXC33.jpg?s=128&g=1", "display_name": "bilserial", "link": "https://stackoverflow.com/users/1738714/bilserial"}, "edited": false, "score": 1, "creation_date": 1446657155, "post_id": 33527846, "comment_id": 54837192, "body": "@MariusMarusanici <a href=\"http://stackoverflow.com/questions/52550/what-does-the-comma-operator-do-in-c\">This</a>."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 2, "last_activity_date": 1446656983, "last_edit_date": 1446656983, "creation_date": 1446656889, "answer_id": 33527846, "question_id": 33527832, "link": "https://stackoverflow.com/questions/33527832/how-does-the-c-compiler-interpret-the-following-code-sequence/33527846#33527846", "title": "How does the C compiler interpret the following code sequence", "body": "<p>The comma operator evaluates all its \"members\" but returns the value of the last expression.<br>From the C11 standard:</p>\n\n<blockquote>\n  <p>The left operand of a comma operator is evaluated as a void\n  expression; there is a sequence point between its evaluation and that\n  of the right operand. Then the right operand is evaluated; <strong>the result\n  has its type and value.</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 622, "user_id": 1738714, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/LXC33.jpg?s=128&g=1", "display_name": "bilserial", "link": "https://stackoverflow.com/users/1738714/bilserial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1446657790, "answer_count": 1, "score": -3, "last_activity_date": 1446656983, "creation_date": 1446656835, "question_id": 33527832, "link": "https://stackoverflow.com/questions/33527832/how-does-the-c-compiler-interpret-the-following-code-sequence", "closed_reason": "Duplicate", "title": "How does the C compiler interpret the following code sequence", "body": "<p>I have this C code line:</p>\n\n<pre><code>int a;\na = (1, 2, 3);\n\nprintf(\"%d\", a);\n</code></pre>\n\n<p>Why the value <code>3</code> is printed? (the last one).</p>\n"}, {"tags": ["c", "hashtable", "gnu"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1446658663, "post_id": 33527659, "comment_id": 54838223, "body": "&quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself.&quot; <a href=\"http://stackoverflow.com/help/mcve\"><b>How to create a Minimal, Complete, and Verifiable example</b></a> There is no guarantee the link you provided will work tomorrow. This insures that the code is available for future SO users to learn from."}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 1508423, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/25183b4d482320e0ecc08414dc68a1fa?s=128&d=identicon&r=PG&f=1", "display_name": "venkrao", "link": "https://stackoverflow.com/users/1508423/venkrao"}, "edited": false, "score": 0, "creation_date": 1446715260, "post_id": 33529596, "comment_id": 54861952, "body": "@M Oehm: Thank you. you are probably right that &quot;cause it just stores the entry as it is without making a deep copy of the pointers.&quot; With the limited knowledge I&#39;ve I kind of managed to understand that behavior. <a href=\"http://troydhanson.github.io/uthash/userguide.html\" rel=\"nofollow noreferrer\">uthash</a> is much better hash table implementation I think. Using this, I could kind of get inotifywait do what I wanted. But, I had to again do a <code>strdup</code> like you suggested, even in uthash. I will try to read more to see how I can release the memory."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 257, "user_id": 1508423, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/25183b4d482320e0ecc08414dc68a1fa?s=128&d=identicon&r=PG&f=1", "display_name": "venkrao", "link": "https://stackoverflow.com/users/1508423/venkrao"}, "edited": false, "score": 0, "creation_date": 1446716220, "post_id": 33529596, "comment_id": 54862525, "body": "Yes, <code>uthash</code> looks good. You can iterate over the items - something that you can&#39;t do with <code>hsearch</code>- and <code>free</code> all strings before destroying the hash table. The <code>delete_all</code> function in the example shows that."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 1, "last_activity_date": 1446662556, "creation_date": 1446662556, "answer_id": 33529596, "question_id": 33527659, "link": "https://stackoverflow.com/questions/33527659/hsearch-r-overwrites-hash-table/33529596#33529596", "title": "hsearch_r overwrites hash table", "body": "<p>I haven't looked at your code in depth, but <code>hsearch</code> requires that the keys' lifetime is at least as long as the <code>htables</code>'s, because it just stores the entry as it is without making a deep copy of the pointers.</p>\n\n<p>You use a temporary pointer to store the current key; you <code>aprintf</code> to and <code>free</code> this pointer frequently. At the time of the second look-up, the handle is no longer valid. (You could run the code in Valgrind to find such memory access errors.)</p>\n\n<p>You could probably get away with duplicating the string:</p>\n\n<pre><code>hadd(&amp;tab, strdup(next_file), dir_count);\n</code></pre>\n\n<p>but that's not a proper solution either, because when you destroy the <code>htable</code> the memory for the keys is leaked.</p>\n\n<p>From <a href=\"http://linux.die.net/man/3/hcreate_r\" rel=\"nofollow\"><code>man hsearch</code></a>:</p>\n\n<blockquote>\n  <p>The <strong>hdestroy()</strong> and <strong>hdestroy_r()</strong> functions do not free the buffers pointed to by the key and data elements of the hash table entries.</p>\n</blockquote>\n\n<p>A <code>htable</code> doesn't own the data. It just provides a fast look-up for already existing data, which you must manage yourself. (It has other limitations: The maximum number of entries must be known beforehand and items can't be deleted.)</p>\n"}], "owner": {"reputation": 257, "user_id": 1508423, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/25183b4d482320e0ecc08414dc68a1fa?s=128&d=identicon&r=PG&f=1", "display_name": "venkrao", "link": "https://stackoverflow.com/users/1508423/venkrao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 33529596, "answer_count": 1, "score": 1, "last_activity_date": 1446663000, "creation_date": 1446656329, "last_edit_date": 1495541744, "question_id": 33527659, "link": "https://stackoverflow.com/questions/33527659/hsearch-r-overwrites-hash-table", "title": "hsearch_r overwrites hash table", "body": "<p>I'm trying to see if I can put a new feature into <a href=\"https://github.com/rvoicilas/inotify-tools/wiki\" rel=\"nofollow noreferrer\">inotifywait</a> that during the watching phase tracks the list of directories that did not receive any event on them, and before it quits, it prints the list.\nAs of now, inotifywait is capable of showing on directories that received an event. What I'm looking for is for a list of directories that did not receive any event.</p>\n\n<p>To achieve this, I'm taking the following approach.</p>\n\n<ol>\n<li>While inotifywait is placing watches, generate an array of all the directories, and a hashtable using hsearch_r with key as directory name, using the function <code>hadd</code>, and value as the index of the array element just created for this directory.<a href=\"https://github.com/venkrao/inotify-tools/blob/master/libinotifytools/src/inotifytools.c#L1418\" rel=\"nofollow noreferrer\">See code here</a></li>\n<li>When an even occurs on a given directory, then, I go to the hash table created in step1, <code>hfind</code> out the value corresponding to this directory name(which is the index of the array element), and set the element at that index in the array to NULL. See <a href=\"https://github.com/venkrao/inotify-tools/blob/master/libinotifytools/src/inotifytools.c#L1891\" rel=\"nofollow noreferrer\">search for hash key</a></li>\n<li>Before I exit inotifywait, I will print all the elements in the array that are not NULL. This is essentially the list of directories that did not receive any EVENT from inotifywait.</li>\n</ol>\n\n<p>The problem I'm seeing is, <code>hadd</code> succeeds, and the next statement to <code>hfind</code> for the element just inserted works. When the hsearch_r FIND when an even occurs, step 2 above fails. To see how many elements are there in the hashtable, I hardcoded a dir name in <code>hfind</code> on after I did a <code>hadd</code>. This passes only when the hardcoded directory is just inserted. Subsequently, the next search fails, because, the hashtable seem to have been overwritten with the next element.</p>\n\n<p>I'm hoping that somebody sees where I went wrong.\nI read the question <a href=\"https://stackoverflow.com/questions/25971505/how-to-delete-element-from-hsearch\">hsearch_r</a> and posting a new one after a brief discussion there.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1446656215, "post_id": 33527566, "comment_id": 54836495, "body": "I don&#39;t understand you question. What do you mean with &quot;why could a data object has different size from its sizeof()?&quot;?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1446656249, "post_id": 33527566, "comment_id": 54836524, "body": "@Superlokkus His example <code>char</code> is <code>4</code> bytes big but <code>sizeof(char)</code> returns <code>1</code>. And <code>4 != 1</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 4, "creation_date": 1446656340, "post_id": 33527566, "comment_id": 54836606, "body": "@cad: No, a <code>char</code> is 1 byte by definition. On that system, a byte is 32 bits."}, {"owner": {"reputation": 163, "user_id": 5175084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b996a1c088833afd7717cb2e74c8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Chen", "link": "https://stackoverflow.com/users/5175084/kenneth-chen"}, "edited": false, "score": 0, "creation_date": 1446656383, "post_id": 33527566, "comment_id": 54836635, "body": "Sorry, I might have confused you. In the question it says that on a machine the size of char is 32bits, but the sizeof(char) is 1. I thought sizeof(char) will also be 32, isn&#39;t it? Isn&#39;t char a single character? It is because the machine deliberately assign 32 bits to a char type, but eventually the sizeof(char) only return the real size of it? In that case the other digits are simply wasted."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1446656512, "post_id": 33527566, "comment_id": 54836728, "body": "<i>@KennethChen</i> You should have written your own answer, not answering in the question. Answering your own questions is perfectly OK and actually appreciated."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446656558, "post_id": 33527566, "comment_id": 54836761, "body": "It won&#39;t be <code>32</code> even in that case. One could think it would be <code>4 = 32&#47;8</code> in the worst case."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656583, "post_id": 33527566, "comment_id": 54836783, "body": "<code>sizeof</code> yields the size <i>in bytes</i>. If a <code>char</code> is 32 bits, then a byte is 32 bits. We don&#39;t know that any of the bits are wasted; a <code>char</code> can hold any of 2**32 distinct values."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446656619, "post_id": 33527566, "comment_id": 54836807, "body": "&quot;The standard does NOT require a char to be 8-bits, but does require that sizeof(char) return 1.&quot; You answerded your question already. What is your point?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446656638, "post_id": 33527566, "comment_id": 54836824, "body": "@EugeneSh.: No, in the worst <i>and only</i> case, <code>sizeof (char) == 1</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446656714, "post_id": 33527566, "comment_id": 54836881, "body": "@EugeneSh.: Why the <code>8</code>? It is actually <code>32</code>, because <code>CHAR_BIT</code> would be <code>32</code> here."}, {"owner": {"reputation": 163, "user_id": 5175084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b996a1c088833afd7717cb2e74c8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Chen", "link": "https://stackoverflow.com/users/5175084/kenneth-chen"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656762, "post_id": 33527566, "comment_id": 54836904, "body": "@KeithThompson Yes you&#39;re right! I learned that a byte is 8 digits, I didn&#39;t know that byte could have a different number of bits! I got it now."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656766, "post_id": 33527566, "comment_id": 54836908, "body": "@KeithThompson Do you mind reading the whole comment?  Olaf: <code>sizeof</code> is never returning the bit size"}, {"owner": {"reputation": 163, "user_id": 5175084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b996a1c088833afd7717cb2e74c8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Chen", "link": "https://stackoverflow.com/users/5175084/kenneth-chen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446656785, "post_id": 33527566, "comment_id": 54836925, "body": "@Olaf Yeah I just didn&#39;t understand the explanation."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656818, "post_id": 33527566, "comment_id": 54836947, "body": "@KeithThompson: The range is not necessarily realted. That&#39;s what  <code>CHAR_MAX</code> &amp; friends are for."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446656918, "post_id": 33527566, "comment_id": 54837029, "body": "@EugeneSh.: I read the whole comment. What did I miss?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446656927, "post_id": 33527566, "comment_id": 54837036, "body": "@Olaf, oh, I see. I mean one that thinks that the <code>sizeof</code> is returning the number of octets. Which is a plenty of people."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446656965, "post_id": 33527566, "comment_id": 54837056, "body": "@KeithThompson Perhaps I wasn&#39;t clear, see my previous comment to Olaf."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446656995, "post_id": 33527566, "comment_id": 54837089, "body": "@KennethChen: Your teachers were wrong. A type with 8 bits is an <b>octet</b>. The width of a byte is machine-dependent. It&#39;s just that most architectures <b>nowadays</b> have 8 bits/byte. Some decades ago e.g. 9 bits  were quite common. And on some DSPs it still has e.g. 24 bits."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446657065, "post_id": 33527566, "comment_id": 54837124, "body": "@Olaf while you are formally right, people are mostly trying to refer the non-octet-sized bytes as &quot;machine words&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657093, "post_id": 33527566, "comment_id": 54837156, "body": "@EugeneSh.: Yeah, bad enough. Perhaps time for a new architecture with  11 bits (next larger prime would be nice). You have the phone number of Intel? ;-)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446657101, "post_id": 33527566, "comment_id": 54837160, "body": "Add BTW: &quot;<i>Isn&#39;t sizeof() function ...</i>&quot; <code>sizeof</code> is an operator, not a function."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446657171, "post_id": 33527566, "comment_id": 54837203, "body": "@alk: While you are right, I actually wish it was a function. Anyway, I confess, I always use parenthesis, although they are semantically not for <code>sizeof</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657331, "post_id": 33527566, "comment_id": 54837315, "body": "@EugeneSh.: No, a &quot;machine word&quot; is normally the size of the (data) registers. That would be e.g. 32 bits for ARM &lt;v8 or x86. A byte is the smallest seperately addressable unit. That&#39;s the reason it&#39;s size may vary. The WP article is worth reading, although it also concentrates a bit too much on  &quot;byte &lt;=&gt; 8 bits&quot; imo. I also used to take this &quot;shortcut&quot;. Since some years, I tend to prefer &quot;octets&quot; or define &quot;byte == 8 bits&quot; in my documenation."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657381, "post_id": 33527566, "comment_id": 54837345, "body": "@EugeneSh.: Referring to bytes, even 32-bit bytes, as &quot;words&quot; is IMHO not helpful. A word may be several bytes wide. For example, a machine might have 16-bit bytes and 64-bit words. The standard doesn&#39;t even talk about &quot;words&quot;."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446657456, "post_id": 33527566, "comment_id": 54837393, "body": "@Olaf What&#39;s &quot;WP article&quot;?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446657464, "post_id": 33527566, "comment_id": 54837401, "body": "@Olaf: One is never to old to learn. I had dropped this habit after about 20 years ... ;-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657504, "post_id": 33527566, "comment_id": 54837440, "body": "@EugeneSh.: Sorry, I&#39;m too much used to kde&#39;s shortcuts. &quot;WikiPedia&quot;"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446657543, "post_id": 33527566, "comment_id": 54837470, "body": "@Olaf: Indeed &quot;<i>too much</i>&quot; .. KDE? &quot;<i>Kalles Desktop Environment</i>&quot;?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446657609, "post_id": 33527566, "comment_id": 54837513, "body": "@alk &quot;K Desktop Environment&quot;? Don&#39;t ask about the &quot;K&quot; :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446657637, "post_id": 33527566, "comment_id": 54837533, "body": "@alk: You are asking what <a href=\"https://www.kde.org/\" rel=\"nofollow noreferrer\">KDE</a> is?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1446657659, "post_id": 33527566, "comment_id": 54837551, "body": "@EugeneSh.: Well, I did. Answer: Don&#39;t ask ;-)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446657748, "post_id": 33527566, "comment_id": 54837608, "body": "@Olaf: No; but why is &quot;<i>WP</i>&quot; is a &quot;<i>KDE</i>&quot; shortcut? :-S <i>lost, sigh</i>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1446657891, "post_id": 33527566, "comment_id": 54837678, "body": "@alk: In Plasma: <code>Alt-F2</code> (Command-line pops up), type e.g. <code>wp:byte</code> (enter); it&#39;s actually lowercase. Will open WP with the given searchphrase. Same for e.g. <code>gg:byte</code> or <code>leo:nette sache</code>. One of the things I miss most if I have to work on Windows. It&#39;s actually called &quot;Webshortcuts&quot;/&quot;Web-K&#252;rzel&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446656633, "post_id": 33527633, "comment_id": 54836818, "body": "Re. the down-vote, if there is any inaccuracy in this answer, I&#39;d gladly fix it given some feedback."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446656845, "post_id": 33527633, "comment_id": 54836971, "body": "Perhaps some disliked the word &quot;<i>byte</i>&quot; and would have liked to read &quot;<i>... yields the size of a type in <code>char</code>s</i>&quot;?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446656947, "post_id": 33527633, "comment_id": 54837047, "body": "@alk Probably someone unfamiliar with the C and C++ standards :-)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657285, "post_id": 33527633, "comment_id": 54837274, "body": "I think you should mention that term <code>byte</code> is used as defined in C/C++. Because this term used in many programming languages and not only there. (not related to downvote)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657596, "post_id": 33527633, "comment_id": 54837503, "body": "@Slava I think that is clear enough in the answer, especially given the quotes."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657826, "post_id": 33527633, "comment_id": 54837645, "body": "@juanchopanza I do not think so. Problem is term <code>byte</code> is so widely used novadays. Many programming languages, hard drive size etc etc. It is very easy to confuse what you mean by that term."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446658022, "post_id": 33527633, "comment_id": 54837771, "body": "@Slava I have already said what a byte means here. It is the size of a <code>char</code>. That should be quite simple to understand."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1446658390, "post_id": 33527633, "comment_id": 54838033, "body": "No it is not simple to understand. If you say that hard drive is 2Terra__bytes__ on platform where char is represented by 32bits, does it mean that each byte on that hard drive is 32bits?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446658471, "post_id": 33527633, "comment_id": 54838092, "body": "@Slava Not so simple to understand if one doesn&#39;t know how to read and think a little."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446658683, "post_id": 33527633, "comment_id": 54838239, "body": "@juanchopanza I know how to read, I just try to explain you that for somebody your answer can be misleading, because term <code>byte</code> is used so widely. Look into Superlokkus&#39;s answer, he says that this understanding of byte is general, which is is questionable at least. So confusion is definitely there."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446658819, "post_id": 33527633, "comment_id": 54838326, "body": "Not only mention that you got downvote most probably because somebody did not like your definition of <code>byte</code>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446659725, "post_id": 33527633, "comment_id": 54838951, "body": "@Slava I wasn&#39;t suggesting you can&#39;t read! I know you know all this stuff. I expect readers here to be able to think a little, and I think I have given enough definitions here for someone who is willing to think to figure out that there are different definitions of byte. I have given the one that matters for this question."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 12, "last_activity_date": 1446660129, "last_edit_date": 1446660129, "creation_date": 1446656275, "answer_id": 33527633, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527633#33527633", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>The <code>sizeof</code> operator yields the size of a type in <em>bytes</em>, where a byte is defined to be the size of a <code>char</code>. So <code>sizeof(char)</code> is always 1 by definition, regardless of how many <em>bits</em>  <code>char</code> has on a given platform.</p>\n\n<p>This applies to both C and C++.</p>\n\n<hr>\n\n<p>From the C11 standard, <strong>6.5.3.4</strong></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>The <code>sizeof</code> operator yields the size (in bytes) of its operand, which may be an expression or the parenthesized name of a type. The size is determined from the type of the operand....\n  <br></li>\n  </ol>\n</blockquote>\n\n<p>Then,</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>When <code>sizeof</code> is applied to an operand that has type <code>char</code>, <code>unsigned char</code>, or <code>signed char</code>, (or a qualified version thereof) the result is 1.</li>\n  </ol>\n</blockquote>\n\n<p>From the C++11 standard, <strong>5.3.3</strong></p>\n\n<blockquote>\n  <ol>\n  <li>The <code>sizeof</code> operator yields the number of bytes in the object representation of its operand. The operand is either an expression, which is an unevaluated operand (Clause 5), or a parenthesized <em>type-id</em>.... ... <strong><code>sizeof(char)</code>, <code>sizeof(signed char)</code> and <code>sizeof(unsigned char)</code> are 1.</strong></li>\n  </ol>\n</blockquote>\n\n<p>(emphasis mine)</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446656609, "post_id": 33527644, "comment_id": 54836802, "body": "@juanchopanza bytes/bits does it actually matter in the context?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1446656668, "post_id": 33527644, "comment_id": 54836842, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Yes, because &quot;how many bytes a char takes&quot; can only be one."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1446656700, "post_id": 33527644, "comment_id": 54836869, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Certainly it matters. Why wouldn&#39;t it?"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1446656814, "last_edit_date": 1446656814, "creation_date": 1446656293, "answer_id": 33527644, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527644#33527644", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>Per 5.3.3 [expr.sizeof]</p>\n\n<blockquote>\n  <p>The sizeof operator yields the number of bytes in the object representation of its operand. The operand is either an expression, which is an unevaluated operand (Clause 5), or a parenthesized type-id. The sizeof operator shall not be applied to an expression that has function or incomplete type, to an enumeration\n  type whose underlying type is not fixed before all its enumerators have been declared, to the parenthesized name of such types, or to a glvalue that designates a bit-field. <strong><em>sizeof(char), sizeof(signed char) and sizeof(unsigned char) are 1.</em></strong>[...]</p>\n</blockquote>\n\n<p><sup>emphasis mine</sup></p>\n\n<p>So no matter how many bits a <code>char</code> takes up its size is always 1</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1446656369, "creation_date": 1446656369, "answer_id": 33527671, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527671#33527671", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p><code>sizeof(x)</code> is returning the size of  <code>x</code> expressed in units of size of <code>char</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657056, "post_id": 33527695, "comment_id": 54837118, "body": "I am afraid you make it even more confusing. Term <code>byte</code> used not only in C or C++, there it means the same as <code>octet</code>."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657281, "post_id": 33527695, "comment_id": 54837268, "body": "@Slava could you please proof your statement that the size is a byte is fixed in the C/C++ standards?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657416, "post_id": 33527695, "comment_id": 54837367, "body": "By there I mean somewhere else, not C/C++. Sorry for confusing."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657856, "post_id": 33527695, "comment_id": 54837661, "body": "No, byte != octet they have a different definition and knowing the difference is sometimes important. But I thought the 3rd comment to his question (and answer to mine) was from him, and so I bet on the wrong horse."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1446657994, "post_id": 33527695, "comment_id": 54837747, "body": "byte != octet in C/C++. byte equal to 8 bits in java, c#. byte equal to 8 bits when you say hard drive is 2Terra<code>byte</code>s  size. I do not think that C/C++ has monopoly of using this term."}], "tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": false, "score": 3, "last_activity_date": 1446656811, "last_edit_date": 1446656811, "creation_date": 1446656446, "answer_id": 33527695, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527695#33527695", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>You're just confused with the <strong>difference</strong> between <strong>bytes</strong> and <strong>octets</strong>.</p>\n\n<p>A byte is the size of one character. This yields to the always true <code>sizeof(char) == 1</code>, because <code>sizeof</code> return the size in <strong>bytes</strong></p>\n\n<p>While an <strong>octet</strong> consists out of <strong>8 bits</strong>.</p>\n\n<p>On almost all modern platforms, the size of a byte is coincidentally the same as of an octet. That's the reason why it's a common error to mix them up, even book authors and professors are doing this. </p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1446657016, "post_id": 33527822, "comment_id": 54837096, "body": "The question as given is perfectly valid. It assumes a <code>char</code> is 32 bits. It has nothing to do with the size of a word or of a register."}, {"owner": {"reputation": 1934, "user_id": 4373992, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xgw9p.jpg?s=128&g=1", "display_name": "jha-G", "link": "https://stackoverflow.com/users/4373992/jha-g"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446657157, "post_id": 33527822, "comment_id": 54837193, "body": "spec says nothing about size of char in terms of bits, it says size of char is one byte.. so <code>char is 32 bits</code> is an incomplete statement"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446657472, "post_id": 33527822, "comment_id": 54837411, "body": "The standard also says that a <code>char</code> is <code>CHAR_BIT</code> bits,  where <code>CHAR_BIT &gt;= 8</code>. And a &quot;word&quot; can be multiple bytes, so your suggestion that the question <i>should</i> have specified the word size doesn&#39;t make much sense."}, {"owner": {"reputation": 2036, "user_id": 2649104, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Tcl1T.png?s=128&g=1", "display_name": "Srujan Barai", "link": "https://stackoverflow.com/users/2649104/srujan-barai"}, "edited": false, "score": 0, "creation_date": 1446658049, "post_id": 33527822, "comment_id": 54837791, "body": "@GautamJha It is not, according to C 1 byte is the size of char and not vice verse. Therefore irrespective of how much size is used by a char (which could be 32 bits), it will always return 1"}, {"owner": {"reputation": 1934, "user_id": 4373992, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xgw9p.jpg?s=128&g=1", "display_name": "jha-G", "link": "https://stackoverflow.com/users/4373992/jha-g"}, "edited": false, "score": 0, "creation_date": 1446659609, "post_id": 33527822, "comment_id": 54838864, "body": "It is other way round <code>according to C size of char is one byte, and definition of byte is beyond C&#39;s scope</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446685555, "post_id": 33527822, "comment_id": 54851320, "body": "No, the definition of &quot;byte&quot; is not &quot;beyond C&#39;s scope&quot;. The latest draft of the ISO C standard is <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">N1570.pdf</a>. The definition of &quot;byte&quot; is section 3.6: &quot;addressable unit of data storage large enough to hold any member of the basic character set of the execution environment&quot;. The C++ standard has a similar definition. The word &quot;byte&quot; may be used differently in other contexts, but that&#39;s how it&#39;s used by the C and C++ standards."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1446685737, "post_id": 33527822, "comment_id": 54851379, "body": "And again, I&#39;m concerned about your first paragraph (it&#39;s why I downvoted). The original question asks about an implementation where a <code>char</code> is 32 bits. You suggest that the question <i>should</i> be about an implementation where a word is 32 bits. The result of <code>sizeof (char)</code> is the same in both cases, but this has nothing to do with the size of a &quot;word&quot;."}], "tags": [], "owner": {"reputation": 1934, "user_id": 4373992, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xgw9p.jpg?s=128&g=1", "display_name": "jha-G", "link": "https://stackoverflow.com/users/4373992/jha-g"}, "is_accepted": false, "score": -1, "last_activity_date": 1446661334, "last_edit_date": 1446661334, "creation_date": 1446656810, "answer_id": 33527822, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527822#33527822", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>The question should have been -- Suppose in a hypothetical machine, the <code>word size(size of registers)</code> is 32 bits. What would sizeof(char) return?</p>\n\n<p>And answer will be <code>1 byte</code>.</p>\n\n<blockquote>\n  <p>In computing, word is a term for the natural unit of data used by a\n  particular processor design. A word is a fixed-sized piece of data\n  handled as a unit by the instruction set or the hardware of the\n  processor. The number of bits in a word (the word size, word width, or\n  word length) is an important characteristic of any specific processor\n  design or computer architecture. -- <a href=\"https://en.wikipedia.org/wiki/Word_%28computer_architecture%29\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Word_%28computer_architecture%29</a></p>\n</blockquote>\n\n<p>In you case <code>word-size</code> will be 32 bits. Also</p>\n\n<blockquote>\n  <p>Historically, the byte was the number of bits used to encode a single\n  character of text in a computer and for this reason it is the smallest\n  addressable unit of memory in many computer architectures. -- <a href=\"https://en.wikipedia.org/wiki/Byte\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Byte</a></p>\n</blockquote>\n\n<p>1 byte is smallest addressable unit of memory, it cat be 8 bit , 9 bits or 16 bits anything that hardware spec chooses.</p>\n\n<p>As far as <code>sizeof</code> is concerned it first determines the type of argument, eventually computes the size in bytes. So, following two C++ statements will produce same result.</p>\n\n<pre><code>  int n;\n  std::cout&lt;&lt;sizeof(int);\n  std::cout&lt;&lt;sizeof(n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2036, "user_id": 2649104, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Tcl1T.png?s=128&g=1", "display_name": "Srujan Barai", "link": "https://stackoverflow.com/users/2649104/srujan-barai"}, "is_accepted": false, "score": 0, "last_activity_date": 1446657321, "creation_date": 1446657321, "answer_id": 33527985, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type/33527985#33527985", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>There are no machines where sizeof(char) is 4. It's always 1 byte. That byte might contain 32 bits, but as far as the C compiler is concerned, it's one byte.</p>\n\n<p>The correct name for \"8 bits\" is octet. The C Standard uses the word \"byte\" for an object that is the size of a char. Others may use the word \"byte\" in different ways, often when they mean \"octet\", but in C (and C++, or Objective-C) it means \"object the size of a char\". A char may be more than 8 bits, or more than one octet, but it's always one byte.</p>\n"}], "owner": {"reputation": 163, "user_id": 5175084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b996a1c088833afd7717cb2e74c8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Chen", "link": "https://stackoverflow.com/users/5175084/kenneth-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2260, "favorite_count": 1, "accepted_answer_id": 33527633, "answer_count": 6, "score": 4, "last_activity_date": 1446661334, "creation_date": 1446656100, "last_edit_date": 1446657271, "question_id": 33527566, "link": "https://stackoverflow.com/questions/33527566/the-difference-between-size-of-datatype-and-sizeofdata-type", "title": "The difference between size of datatype and sizeof(data type)", "body": "<p>I was learning C++ and come across the following question. I'm just a beginner and I got confused. Isn't sizeof() function supposed to return the size of the datatype? Why could a data object has different size from its sizeof()? I don't understand the explanation of the answer. </p>\n\n<p>Suppose in a hypothetical machine, the size of char is 32 bits. What would sizeof(char) return?</p>\n\n<p>a) 4</p>\n\n<p>b) 1</p>\n\n<p>c) Implementation dependent</p>\n\n<p>d) Machine dependent</p>\n\n<p>Answer:b</p>\n\n<p>Explanation: The standard does NOT require a char to be 8-bits, but does require that sizeof(char) return 1.</p>\n"}, {"tags": ["c", "file", "console"], "comments": [{"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1446655947, "post_id": 33527418, "comment_id": 54836287, "body": "Very similar to <a href=\"https://stackoverflow.com/questions/33476708/setting-define-identifier-using-command-line-argument/33476949#33476949\">https://stackoverflow.com/questions/33476708/setting-define-&zwnj;&#8203;identifier-using-com&zwnj;&#8203;mand-line-argument/3&zwnj;&#8203;3476949#33476949</a>."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446656066, "post_id": 33527418, "comment_id": 54836381, "body": "<code>int main(void)</code> is strictly-conforming."}, {"owner": {"reputation": 3539, "user_id": 1054020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rn9f9.jpg?s=128&g=1", "display_name": "SoftwareCarpenter", "link": "https://stackoverflow.com/users/1054020/softwarecarpenter"}, "edited": false, "score": 0, "creation_date": 1446657225, "post_id": 33527418, "comment_id": 54837236, "body": "What operating system are you running your program on? Here are the 2nd editon book solutions created by the authors : K&amp;R2 solutions- <a href=\"http://clc-wiki.net/wiki/K%26R2_solutions\" rel=\"nofollow noreferrer\">clc-wiki.net/wiki/K%26R2_solutions</a>"}, {"owner": {"reputation": 893, "user_id": 5016201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axdqP.jpg?s=128&g=1", "display_name": "aurelienC", "link": "https://stackoverflow.com/users/5016201/aurelienc"}, "reply_to_user": {"reputation": 3539, "user_id": 1054020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rn9f9.jpg?s=128&g=1", "display_name": "SoftwareCarpenter", "link": "https://stackoverflow.com/users/1054020/softwarecarpenter"}, "edited": false, "score": 0, "creation_date": 1446667941, "post_id": 33527418, "comment_id": 54843759, "body": "@SoftwareCarpenter I already checked this site, it&#39;s awesome but they don&#39;t mention how to execute program with a file parameter. ( I edited my question to add stuff like OS, compiler...)"}, {"owner": {"reputation": 893, "user_id": 5016201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axdqP.jpg?s=128&g=1", "display_name": "aurelienC", "link": "https://stackoverflow.com/users/5016201/aurelienc"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1446669801, "post_id": 33527418, "comment_id": 54844798, "body": "@user3121023 That&#39;s it, this is exactly what i was looking for, i dont know why this is not mentionned in the book :/ . Thanks!"}, {"owner": {"reputation": 3539, "user_id": 1054020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rn9f9.jpg?s=128&g=1", "display_name": "SoftwareCarpenter", "link": "https://stackoverflow.com/users/1054020/softwarecarpenter"}, "edited": false, "score": 0, "creation_date": 1446671132, "post_id": 33527418, "comment_id": 54845552, "body": "While redirection is very useful, it is really part of the operating system (not C)"}], "answers": [{"comments": [{"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1446656160, "post_id": 33527479, "comment_id": 54836450, "body": "@Samer: The same <code>int main(int argc, char *argv[])</code> applies to Windows. This is standard C++"}, {"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1446656325, "post_id": 33527479, "comment_id": 54836587, "body": "@scerr ./a.out myTextFile.txt... is not windows!"}, {"owner": {"reputation": 261, "user_id": 4173899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc74a74b89e30c83704d3224e97622d?s=128&d=identicon&r=PG&f=1", "display_name": "scerrecrow", "link": "https://stackoverflow.com/users/4173899/scerrecrow"}, "edited": false, "score": 0, "creation_date": 1446656566, "post_id": 33527479, "comment_id": 54836766, "body": "a.out is self explanatory as an executable."}, {"owner": {"reputation": 893, "user_id": 5016201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axdqP.jpg?s=128&g=1", "display_name": "aurelienC", "link": "https://stackoverflow.com/users/5016201/aurelienc"}, "edited": false, "score": 0, "creation_date": 1446668834, "post_id": 33527479, "comment_id": 54844236, "body": "In fact i had heard of this main() signature and i suspected it to be use for something among those lines. But the book is dedicated to C begginers so i am trying to resolves exercices whith information met in the book only. Thanks still."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 893, "user_id": 5016201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axdqP.jpg?s=128&g=1", "display_name": "aurelienC", "link": "https://stackoverflow.com/users/5016201/aurelienc"}, "edited": false, "score": 0, "creation_date": 1446724816, "post_id": 33527479, "comment_id": 54867837, "body": "@aurelienC: If you&#39;re trying to limit yourself only to the information provided in the book, then why ask here? The point is that the modified signature for <code>main</code> is what allows your program to receive the arguments the caller has sent through the command-line, regardless of whether you&#39;re on Windows or GNU/Linux."}], "tags": [], "owner": {"reputation": 261, "user_id": 4173899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/afc74a74b89e30c83704d3224e97622d?s=128&d=identicon&r=PG&f=1", "display_name": "scerrecrow", "link": "https://stackoverflow.com/users/4173899/scerrecrow"}, "is_accepted": true, "score": 1, "last_activity_date": 1446656082, "last_edit_date": 1446656082, "creation_date": 1446655854, "answer_id": 33527479, "question_id": 33527418, "link": "https://stackoverflow.com/questions/33527418/how-to-pass-a-file-to-an-exe-in-console/33527479#33527479", "title": "How to pass a file to an .exe in console", "body": "<p>You need to use the commandline arguments</p>\n\n<pre><code> int main(int argc, char** argv)\n{\n//argc = number of arguments on command line\n\n//argv[] = the file names on the command line. Note* the exe will always be argv[0]\n}\n</code></pre>\n\n<p>In your program you can refer to argv[1] as your text file that you pass in.</p>\n\n<pre><code>./a.out myTextFile.txt\n</code></pre>\n\n<p>here argc = 2 and argv[0] = a.out while argv[1] = myTextFile.txt</p>\n\n<p>I suggest you look into modifying your code to include this, during file reading.</p>\n"}, {"tags": [], "owner": {"reputation": 3539, "user_id": 1054020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rn9f9.jpg?s=128&g=1", "display_name": "SoftwareCarpenter", "link": "https://stackoverflow.com/users/1054020/softwarecarpenter"}, "is_accepted": false, "score": 0, "last_activity_date": 1446670565, "last_edit_date": 1446670565, "creation_date": 1446669833, "answer_id": 33531636, "question_id": 33527418, "link": "https://stackoverflow.com/questions/33527418/how-to-pass-a-file-to-an-exe-in-console/33531636#33531636", "title": "How to pass a file to an .exe in console", "body": "<p>If you are using Windows OS and cl then do the following.\nAlso, refer to the c standard regarding main <a href=\"http://c0x.coding-guidelines.com/5.1.2.2.1.html\" rel=\"nofollow\">C Standard - 5.1.2.2.1 Program startup</a></p>\n\n<p><strong>1.</strong> Overload your main function to accept command line arguments.</p>\n\n<p><strong>2.</strong> Compile your program from the command line using cl.exe :</p>\n\n<pre><code>cl simple.c\n</code></pre>\n\n<p><strong>3.</strong> Call the compiled .exe from the command line</p>\n\n<pre><code>simple \"filepath\\filename\"\n</code></pre>\n\n<p><strong>See MSDN Walkthrough</strong>: <a href=\"https://msdn.microsoft.com/en-us/library/bb384838.aspx\" rel=\"nofollow\">Compiling a C Program on the Command Line</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\n#define LINES_PER_PAGE 10\n#define TRUE           1\n#define FALSE          0\n\n\nvoid print_file(char* file_name)\n{\n    FILE* f;\n    int page_number = 1;\n    int line_count;\n    int c;\n    int new_page = TRUE;\n\n    assert(file_name != NULL);\n    FILE** f2;\n    if ((f = fopen(file_name, \"r\")) != NULL)\n    {\n        while ((c = fgetc(f)) != EOF)\n        {\n            if (new_page)\n            {\n                /* print out the header */\n                printf(\"[%s] page %d starts\\n\", file_name, page_number);\n                new_page = FALSE;\n                line_count = 1;\n            }\n            putchar(c);\n            if (c == '\\n' &amp;&amp; ++line_count &gt; LINES_PER_PAGE)\n            {\n                /* print out the footer */\n                printf(\"[%s] page %d ends\\n\", file_name, page_number);\n                /* skip another line so we can see it on screen */\n                putchar('\\n');\n                new_page = TRUE;\n                page_number++;\n            }\n        }\n        if (!new_page)\n        {\n            /* file ended in the middle of a page, so we still need to\n            print a footer */\n            printf(\"[%s] page %d ends\\n\", file_name, page_number);\n        }\n        /* skip another line so we can see it on screen */\n        putchar('\\n');\n        fclose(f);\n    }\n}\n\nint main(int argc, char* argv[])\n{\n\n    int i;\n\n    if (argc &lt; 2)\n    {\n        fputs(\"no files specified\\n\", stderr);\n        return EXIT_FAILURE;\n    }\n    for (i = 1; i &lt; argc; i++)\n    {\n\n        print_file(argv[i]);\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 893, "user_id": 5016201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/axdqP.jpg?s=128&g=1", "display_name": "aurelienC", "link": "https://stackoverflow.com/users/5016201/aurelienc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 33527479, "answer_count": 2, "score": -1, "last_activity_date": 1446670565, "creation_date": 1446655669, "last_edit_date": 1446668379, "question_id": 33527418, "link": "https://stackoverflow.com/questions/33527418/how-to-pass-a-file-to-an-exe-in-console", "title": "How to pass a file to an .exe in console", "body": "<p>i am currently learning C by reading \"The C proggraming Language\".\nI have issues with exercices that implies input and output with <code>getchar()</code>/<code>putchar()</code>/<code>EOF</code>. It seems that the programs made with the exercises are supposed to be used on files. But once i have my <code>.exe</code> i only know how to start the \"raw\" .exe, i would like to do something like: <code>myProgram.exe file.txt</code>\nThis way the program could read the file as input. Unfortunatly the way i try to do this doesn't work, could you tell me how to do this properly?</p>\n\n<p>Program i want to use on a file \n(<strong>this is code from the book</strong>, there is no int main() or anything else):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n    int c;\n    while((c = getchar()) != EOF)\n    {\n         putchar(c);\n    }\n}\n</code></pre>\n\n<p>I am on Windows 8.1, using cl ( visual studio compiler), version 19 x64.</p>\n"}, {"tags": ["c", "pic", "microchip"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1446654600, "post_id": 33527034, "comment_id": 54835320, "body": "&quot;Does not work&quot; is not a clear problem description. Use a debugger and provide details. Just a future hint: You should debunce (I will not explain, as you can serach for this!) a button in general (it is not necessary here). And check the vlotage at the button-GPIO."}, {"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 0, "creation_date": 1446654873, "post_id": 33527034, "comment_id": 54835528, "body": "You probably should move your question to <a href=\"http://electronics.stackexchange.com/\">electronics.stackexchange.com</a>."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 0, "creation_date": 1446654970, "post_id": 33527034, "comment_id": 54835596, "body": "@HannoBinder Sure they welcome code there?"}, {"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446654994, "post_id": 33527034, "comment_id": 54835618, "body": "@Olaf Typo: &quot;debunce&quot; may not be easy to search for :)  -- Make sure you have debouncing circuitry and/or software in place."}, {"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 0, "creation_date": 1446655106, "post_id": 33527034, "comment_id": 54835699, "body": "They sure do if it&#39;s for &#181;C. Asking for a check on whether or not you have an error in your initialization of the PIC peripherals is a pretty common question."}, {"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 0, "creation_date": 1446655247, "post_id": 33527034, "comment_id": 54835803, "body": "A quick test: What happens when you swap <code>GPIO0=1;</code> and <code>GPIO0=0;</code>? The LED should stay dark. If it does we can assume that the IO configuration of the LED pin is correct, and that the PIC is actually running and executing instructions."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1446656129, "post_id": 33527034, "comment_id": 54836427, "body": "yeah, we don&#39;t know whether the problem is software or hardware,and we can&#39;t debug hardware problems by blog.  You posted nothing to indicate that the hardware is OK and, even if you did, nobody would believe you without a detailed explanation of how you proved  it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 1, "creation_date": 1446656450, "post_id": 33527034, "comment_id": 54836690, "body": "@HannoBinder: Try googling &quot;debunce&quot;. I got the dict.cc entry for &quot;debounce&quot; as first hit and the next ten were also about debouncing, e.g. Arduino. YMMV, however. (Not that you were wrong about the typo)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1446658471, "post_id": 33527034, "comment_id": 54838091, "body": "What happens without considering the button? Modify your program so that you write a <code>1</code> to the LED pin in the <code>while</code> loop and observe the result. Next modify your program to instead write a <code>0</code> to the LED pin and observe the result. This will tell you if the program is running, the LED is connected correctly, and the logic sense of the LED. Only then should you consider the button."}, {"owner": {"reputation": 428, "user_id": 3776183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3248785563d509df4f86da80a6ab5dac?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu L.", "link": "https://stackoverflow.com/users/3776183/mathieu-l"}, "edited": false, "score": 0, "creation_date": 1446661121, "post_id": 33527034, "comment_id": 54839862, "body": "GPIO1/2 are ICSP pins, this is likely a hardware issue."}, {"owner": {"reputation": 11, "user_id": 5525598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OZdZQUYzUko/AAAAAAAAAAI/AAAAAAAAAAA/OB78TkHxTeM/photo.jpg?sz=128", "display_name": "Matej", "link": "https://stackoverflow.com/users/5525598/matej"}, "edited": false, "score": 0, "creation_date": 1446677765, "post_id": 33527034, "comment_id": 54848875, "body": "Updated question. Answered on your comments."}, {"owner": {"reputation": 11, "user_id": 5525598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OZdZQUYzUko/AAAAAAAAAAI/AAAAAAAAAAA/OB78TkHxTeM/photo.jpg?sz=128", "display_name": "Matej", "link": "https://stackoverflow.com/users/5525598/matej"}, "edited": false, "score": 0, "creation_date": 1446678228, "post_id": 33527034, "comment_id": 54849048, "body": "Now it works but I do not know why. Details in edited questions."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5525598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OZdZQUYzUko/AAAAAAAAAAI/AAAAAAAAAAA/OB78TkHxTeM/photo.jpg?sz=128", "display_name": "Matej", "link": "https://stackoverflow.com/users/5525598/matej"}, "edited": false, "score": 0, "creation_date": 1446755726, "post_id": 33537305, "comment_id": 54888027, "body": "I add CMCON = 0x07; but still do not works if button is on GPIO1."}], "tags": [], "owner": {"reputation": 24611, "user_id": 2065121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c92f2d7b7f3af9e4e0c7a5cb1289982b?s=128&d=identicon&r=PG", "display_name": "Roger Rowland", "link": "https://stackoverflow.com/users/2065121/roger-rowland"}, "is_accepted": false, "score": 1, "last_activity_date": 1446701737, "last_edit_date": 1446701737, "creation_date": 1446701248, "answer_id": 33537305, "question_id": 33527034, "link": "https://stackoverflow.com/questions/33527034/pic-in-c-push-button-did-not-work/33537305#33537305", "title": "PIC in C - push button did not work", "body": "<p>I know you've \"fixed\" it by using a different pin, but the original problem is that GPIO1, as well as being an analog input by default (which you correctly disabled), is also used as input to the comparator, which you also need to disable.</p>\n\n<p>Quoting two sections from the datasheet:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1yjSs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1yjSs.png\" alt=\"cmp1\"></a></p>\n\n<p>and also</p>\n\n<p><a href=\"https://i.stack.imgur.com/odv19.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/odv19.png\" alt=\"cmp2\"></a></p>\n\n<p>So, you had dealt with the ANSEL register but not CMCON, therefore your initialisation section needs an additional line of code:</p>\n\n<pre><code>CMCON = 0x07;    // turn off comparator\n</code></pre>\n\n<p>If you try this, see if it now works with your original pin configuration. If you're wondering where the 0x07 came from, refer to <a href=\"http://ww1.microchip.com/downloads/en/devicedoc/41190c.pdf\" rel=\"nofollow noreferrer\">page 37 of the datasheet</a> where the setting for the lower three bits of CMCON are shown. To disable the comparator, these three bits should be set to 1, so binary 111 == 0x07.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zzgLu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zzgLu.png\" alt=\"cmp3\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 5525598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OZdZQUYzUko/AAAAAAAAAAI/AAAAAAAAAAA/OB78TkHxTeM/photo.jpg?sz=128", "display_name": "Matej", "link": "https://stackoverflow.com/users/5525598/matej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1446755521, "creation_date": 1446654512, "last_edit_date": 1446755521, "question_id": 33527034, "link": "https://stackoverflow.com/questions/33527034/pic-in-c-push-button-did-not-work", "title": "PIC in C - push button did not work", "body": "<p>I am trying use one pin on PIC12F675 for button, another pin for LED. I wrote this code but button did not work. LED is still on.\nGPIO0 is connected to +LED, GPIO1 is connected to button, button is connected to ground.\nPlease help. Thank you.</p>\n\n<pre><code>#pragma config FOSC = INTRCIO   // Oscillator Selection bits (INTOSC oscillator: I/O function on GP4/OSC2/CLKOUT pin, I/O function on GP5/OSC1/CLKIN)\n#pragma config WDTE = OFF       // Watchdog Timer Enable bit (WDT disabled)\n#pragma config PWRTE = OFF      // Power-Up Timer Enable bit (PWRT disabled)\n#pragma config MCLRE = OFF      // GP3/MCLR pin function select (GP3/MCLR pin function is digital I/O, MCLR internally tied to VDD)\n#pragma config BOREN = OFF      // Brown-out Detect Enable bit (BOD disabled)\n#pragma config CP = OFF         // Code Protection bit (Program Memory code protection is disabled)\n#pragma config CPD = OFF        // Data Code Protection bit (Data memory code protection is disabled)\n\n#include &lt;xc.h&gt;\n\nint main(void) {\n\n    ANSEL=0x00;                 // ANALOG SELECT REGISTER (digital)\n    CMCON=0x07;                 // COPMARATOR DISABLE\n    nGPPU=0;                    // GPIO pull-ups are enabled by individual port latch values\n    WPU1=1;                     // WEAK PULL-UP REGISTER\n    TRISIO0=0;\n    TRISIO1=1;\n\n    while(1) {\n\n    if(GPIO1)\n      GPIO0=0;\n    else\n      GPIO0=1;\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>Edit 1:</strong> If I comment everything in while(1) except GPIO0=1, LED is on. If I comment everything in while(1) except GPIO0=0, LED is off.\nSo probably hardware is OK.\nI think debounce is not necessary in this program.\nIf in original program swap GPIO0=1; and GPIO0=0; then LED is off. PIC executes what is in else.</p>\n\n<p><strong>Edit 2:</strong> I now tried use pin5 for button and it works. What does it mean? Is my PIC damaged or there is a bug in code?</p>\n\n<p><strong>Edit 3:</strong> Now I add CMCON=0x07; but no change. Still did not working. If button is on GPIO5, it works fine. If button is on GPIO1, it do not works.</p>\n"}, {"tags": ["c", "text-files", "user-input"], "comments": [{"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1446654600, "post_id": 33526918, "comment_id": 54835319, "body": "What about reading C courses? Get input text from console, open, read, print file content is very basic and should be found in many examples. By the way what is a &quot;valid text file&quot;? It will depend on text encoding\u2026 In pure ASCII text you can check bounds of each characters (see ASCII docs), but in \u2212 let say \u2212 utf-8 it is far more complex, and then you should check for UTF8 format docs."}], "answers": [{"comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1446654628, "post_id": 33527029, "comment_id": 54835338, "body": "<b><i>DON&#39;T. USE. GETS</i></b>. Even the man page explicitly advises <b>against</b> its usage!"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1446654830, "post_id": 33527029, "comment_id": 54835492, "body": "@cad Not against but <i>removed</i>  :-)"}, {"owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "edited": false, "score": 0, "creation_date": 1446655183, "post_id": 33527029, "comment_id": 54835762, "body": "what would you advise to use instead of gets"}, {"owner": {"reputation": 178, "user_id": 4812166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OB80c.jpg?s=128&g=1", "display_name": "spyshiv", "link": "https://stackoverflow.com/users/4812166/spyshiv"}, "edited": false, "score": 0, "creation_date": 1446655274, "post_id": 33527029, "comment_id": 54835822, "body": "see this may be usefull <a href=\"http://stackoverflow.com/questions/16895390/open-file-with-user-input-string-c\" title=\"open file with user input string c\">stackoverflow.com/questions/16895390/&hellip;</a>"}], "tags": [], "owner": {"reputation": 178, "user_id": 4812166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OB80c.jpg?s=128&g=1", "display_name": "spyshiv", "link": "https://stackoverflow.com/users/4812166/spyshiv"}, "is_accepted": true, "score": -1, "last_activity_date": 1446654503, "creation_date": 1446654503, "answer_id": 33527029, "question_id": 33526918, "link": "https://stackoverflow.com/questions/33526918/how-do-you-open-a-text-file-inputted-from-the-user-on-c/33527029#33527029", "title": "How do you open a text file inputted from the user on C", "body": "<p>use something like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n   char ch, file_name[25];\n   FILE *fp;\n\n   printf(\"Enter the name of file you wish to see\\n\");\n   gets(file_name);\n\n   fp = fopen(file_name,\"r\"); // read mode\n\n   if( fp == NULL )\n   {\n      perror(\"Error while opening the file.\\n\");\n      exit(EXIT_FAILURE);\n   }\n\n   printf(\"The contents of %s file are :\\n\", file_name);\n\n   while( ( ch = fgetc(fp) ) != EOF )\n      printf(\"%c\",ch);\n\n   fclose(fp);\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 33527029, "answer_count": 1, "score": -2, "last_activity_date": 1446654503, "creation_date": 1446654161, "question_id": 33526918, "link": "https://stackoverflow.com/questions/33526918/how-do-you-open-a-text-file-inputted-from-the-user-on-c", "title": "How do you open a text file inputted from the user on C", "body": "<p>I just started learning C and I am trying to get this type of code:</p>\n\n<pre><code>Enter text file: cat.txt\n</code></pre>\n\n<p>Then when it runs it should display all the text but if it is not a valid text file it should throw an error</p>\n"}, {"tags": ["c", "math", "floating", "fixed-point", "sqrt"], "comments": [{"owner": {"reputation": 108835, "user_id": 15541, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/515ca9736a9a8ce65e58af764ccddf46?s=128&d=identicon&r=PG", "display_name": "leppie", "link": "https://stackoverflow.com/users/15541/leppie"}, "edited": false, "score": 2, "creation_date": 1446654639, "post_id": 33526804, "comment_id": 54835350, "body": "<code>(int)  32767.0f  * 65536.0f</code> will need 31-bits of space. You to use larger int type or make denominator smaller."}, {"owner": {"reputation": 31, "user_id": 5525556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb731c09be0ba2e1173617b7165b0656?s=128&d=identicon&r=PG&f=1", "display_name": "monkey", "link": "https://stackoverflow.com/users/5525556/monkey"}, "reply_to_user": {"reputation": 108835, "user_id": 15541, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/515ca9736a9a8ce65e58af764ccddf46?s=128&d=identicon&r=PG", "display_name": "leppie", "link": "https://stackoverflow.com/users/15541/leppie"}, "edited": false, "score": 0, "creation_date": 1446674702, "post_id": 33526804, "comment_id": 54847461, "body": "Thanks, I edited my main post would you mind taking a look at it and tell me if it&#39;s ok?"}, {"owner": {"reputation": 108835, "user_id": 15541, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/515ca9736a9a8ce65e58af764ccddf46?s=128&d=identicon&r=PG", "display_name": "leppie", "link": "https://stackoverflow.com/users/15541/leppie"}, "edited": false, "score": 0, "creation_date": 1446694441, "post_id": 33526804, "comment_id": 54853530, "body": "The scaling issue has been overcome now, but I cant tell offhand if the fp_sqrt code works on a <code>long long</code> int. Run a few tests to check. If that fails, lower the denominator to 4096 (12-bits) as 1000000 requires 20 bits,  using the original function, if acceptable."}], "owner": {"reputation": 31, "user_id": 5525556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb731c09be0ba2e1173617b7165b0656?s=128&d=identicon&r=PG&f=1", "display_name": "monkey", "link": "https://stackoverflow.com/users/5525556/monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1446674649, "creation_date": 1446653870, "last_edit_date": 1446674649, "question_id": 33526804, "link": "https://stackoverflow.com/questions/33526804/fixed-point-square-root-function-wrong-results-for-big-numbers", "title": "Fixed point square root function wrong results for big numbers", "body": "<p>Hello friends and enemies</p>\n\n<p>I have this square root function from a library called libfixmath which works great, however from 32767.0f and above it starts returning wrong and negative results. The numbers I need square root of are rather big, up to 999999.0f. Any of you know what I could do to fix the problem?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nfloat into_float(const int value) {\n    return ((float)value / 65536.0f);\n}\n\nint from_float(const float value) {\n    return (int)(value * 65536.0f);\n}\n\nint fp_sqrt(int value) {\n    unsigned char neg = (value &lt; 0);\n    unsigned int num = (neg ? -value : value);\n    unsigned int result = 0;\n    unsigned int bit;\n    unsigned char n;\n    if (num &amp; 0xFFF00000) {\n        bit = (unsigned int)1 &lt;&lt; 30;\n    } else {\n        bit = (unsigned int)1 &lt;&lt; 18;\n    }\n    while (bit &gt; num) bit &gt;&gt;= 2;\n    for (n = 0; n &lt; 2; n++) {\n        while (bit) {\n            if (num &gt;= result + bit) {\n                num -= result + bit;\n                result = (result &gt;&gt; 1) + bit;\n            } else {\n                result = (result &gt;&gt; 1);\n            }\n            bit &gt;&gt;= 2;\n        }\n        if (n == 0) {\n            if (num &gt; 65535) {\n                num -= result;\n                num = (num &lt;&lt; 16) - 0x8000;\n                result = (result &lt;&lt; 16) + 0x8000;\n            } else {\n                num &lt;&lt;= 16;\n                result &lt;&lt;= 16;\n            }\n            bit = 1 &lt;&lt; 14;\n        }\n    }\n    if (num &gt; result) {\n        result++;\n    }\n    return (neg ? -result : result);\n}\n\nvoid main() {\n    float flt_value = 32767.0f;\n    int int_value = from_float(flt_value);\n    float flt_root = sqrt(flt_value);\n    int int_root = fp_sqrt(int_value);\n    float flt_root2 = into_float(int_root);\n    printf(\"sqrt: %f fp_sqrt: %f\", flt_root, flt_root2);\n    getchar();\n}\n</code></pre>\n\n<p>Thank you leppie, I changed some stuff around and it works with big numbers now, I am not sure if what I did is totally right though but here it is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nfloat into_float(const int value) {\n    return ((float)value / 65536.0f);\n}\n\nlong long from_float(const float value) {\n    return (long long)(value * 65536.0f);\n}\n\nlong long fp_sqrt(long long value) {\n    unsigned char neg = (value &lt; 0);\n    long long num = (neg ? -value : value);\n    long long result = 0;\n    long long bit;\n    unsigned char n;\n    if (num &amp; 0xFFF00000) {\n        bit = (long long)1 &lt;&lt; 60;\n    } else {\n        bit = (long long)1 &lt;&lt; 36;\n    }\n    while (bit &gt; num) bit &gt;&gt;= 2;\n    for (n = 0; n &lt; 2; n++) {\n        while (bit) {\n            if (num &gt;= result + bit) {\n                num -= result + bit;\n                result = (result &gt;&gt; 1) + bit;\n            } else {\n                result = (result &gt;&gt; 1);\n            }\n            bit &gt;&gt;= 2;\n        }\n        if (n == 0) {\n            if (num &gt; 65535) {\n                num -= result;\n                num = (num &lt;&lt; 16) - 0x8000;\n                result = (result &lt;&lt; 16) + 0x8000;\n            } else {\n                num &lt;&lt;= 16;\n                result &lt;&lt;= 16;\n            }\n            bit = 1 &lt;&lt; 14;\n        }\n    }\n    if (num &gt; result) {\n        result++;\n    }\n    return (neg ? -result : result);\n}\n\nvoid main() {\n    float flt_value = 11932767.0f;\n    long long ll_value = from_float(flt_value);\n    float flt_root = sqrt(flt_value);\n    int int_root = (int)fp_sqrt(ll_value);\n    float flt_root2 = into_float(int_root);\n    printf(\"sqrt: %f fp_sqrt: %f\", flt_root, flt_root2);\n    getchar();\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11", "solaris", "solaris-studio"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1446653729, "post_id": 33526716, "comment_id": 54834673, "body": "Hasn&#39;t this been asked just about ten minutes ago?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446653771, "post_id": 33526716, "comment_id": 54834699, "body": "@cad...umm, i think 23 minutes..."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1446653996, "post_id": 33526716, "comment_id": 54834861, "body": "@cad, you know something more strange. I have seen this kind of trend from a week. May be some students from the same class are here. Asking similar questions regarding their work."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446654065, "post_id": 33526716, "comment_id": 54834921, "body": "@SouravGhosh Whatever, I hope my point&#39;s clear anyway. :-)"}, {"owner": {"reputation": 1324, "user_id": 1784001, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/446ed58618bcd7c524db204d3e6f89d7?s=128&d=identicon&r=PG", "display_name": "otisonoza", "link": "https://stackoverflow.com/users/1784001/otisonoza"}, "edited": false, "score": 1, "creation_date": 1446654223, "post_id": 33526716, "comment_id": 54835041, "body": "I deleted <i>my</i> question (I think I&#39;m <i>allowed</i> to do it) because in the meanwhile I found out it&#39;s not specific to linking, and can be reproduced by a small example. So I opened a (in my opinion) better question to avoid the &quot;show me your code&quot; and &quot;show me the compiler flags&quot; questions. And I&#39;m at a workplace so I coudln&#39;t provide the exact information."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1446656383, "post_id": 33526716, "comment_id": 54836636, "body": "From the &quot;<b><i>CONFORMING TO</i></b>&quot; section of a recent Linux man-page for <code>sigset()</code>: &quot;<i>SVr4, POSIX.1-2001.  These functions are obsolete: do not use them in new programs.  POSIX.1-2008 marks sighold(), sigignore(), sigpause(), sigrelse(), and sigset() as obsolete, recommending the use        of sigaction(2), sigprocmask(2), pthread_sigmask(3), and sigsuspend(2) instead.</i>&quot;"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446656621, "post_id": 33526716, "comment_id": 54836810, "body": "For completeness the current POSIX page on this: <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sighold.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/functions/sighold.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446661209, "post_id": 33526716, "comment_id": 54839916, "body": "@alk - But <code>sigset()</code> still exists in Solaris 11:  <a href=\"http://docs.oracle.com/cd/E23824_01/html/821-1465/sigset-3c.html#scrolltoc\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E23824_01/html/821-1465/&hellip;</a>  The fact that it&#39;s obsolete doesn&#39;t mean it doesn&#39;t exist.  The <code>sigset()</code> call will still exist in the library, even if only to support legacy applications.  I don&#39;t have access to Solaris 11 right now, but I suspect a non-demangled name dump of the object file from <code>CC -std=c++11 -c test.cpp -o test.o</code> might be illuminating."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1446675549, "post_id": 33526716, "comment_id": 54847918, "body": "@otisonoza, If you run <code>CC -std=c++11 -c test.cpp -o test.o</code>, what&#39;s the output from <code>nm -A test.o | grep sigset</code>?  And what&#39;s the output from <code>nm -A &#47;usr&#47;lib&#47;libc.so | grep sigset</code>?"}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1446721509, "post_id": 33526716, "comment_id": 54865870, "body": "As remember there is some problem with Solaris&#39;s includes, and I have to include both <code>signal.h</code> and <code>csignal</code>, but it was related to <code>kill</code>. May be this helps also for sigset, try also <code>std::sigset</code>"}, {"owner": {"reputation": 1324, "user_id": 1784001, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/446ed58618bcd7c524db204d3e6f89d7?s=128&d=identicon&r=PG", "display_name": "otisonoza", "link": "https://stackoverflow.com/users/1784001/otisonoza"}, "reply_to_user": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1446724738, "post_id": 33526716, "comment_id": 54867788, "body": "@user1034749 : Thanks for the hint. Unfortunately, it doesn&#39;t help."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1446751384, "post_id": 33526716, "comment_id": 54885490, "body": "It looks like, when given the <code>-std=c++11</code> option, CC will generate mangled names for any var that&#39;s a function pointer, even when it&#39;s in an <code>extern &quot;C&quot;</code> block. Try compiling this with <code>-c</code> and then running <code>nm</code> on the .o file: <code>extern &quot;C&quot; { void (*foo()); } int main(int, char**) { foo(); }</code> . And <code>sigset</code> is one of the few C library functions whose type is a function pointer. <code>extern void (*sigset(int, void (*)(int)))(int);</code>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1446808271, "post_id": 33526716, "comment_id": 54908899, "body": "@MarkPlotnick It&#39;s either a C++11 compiler bug or a problem with the system include files failing to declare <code>sigset()</code> as <code>extern &quot;C&quot;</code>.  Given the problem only appears when using <code>-std=c++11</code>, I&#39;d bet on a compiler bug.  If you don&#39;t have an Oracle support contract and can&#39;t file a bug report, you might want to post the problem here:  <a href=\"https://community.oracle.com/community/server_%26_storage_systems/application_development_in_c__c%2B%2B__and_fortran/solaris_studio_c_c%2B%2B_fortran_compilers\" rel=\"nofollow noreferrer\">community.oracle.com/community/server_%26_storage_systems/&hellip;</a>"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1446822429, "post_id": 33526716, "comment_id": 54917450, "body": "@AndrewHenle Thanks. I ran OP&#39;s program through <code>CC -E</code>. In the preprocessed output, <code>sigset</code> is declared <code>extern &quot;C&quot;</code>, whether or not the <code>-std=c++11</code> option is given. I think it&#39;s either a compiler bug or there&#39;s some rule in C++11 that says these types shall unconditionally have C++ linkage."}], "owner": {"reputation": 1324, "user_id": 1784001, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/446ed58618bcd7c524db204d3e6f89d7?s=128&d=identicon&r=PG", "display_name": "otisonoza", "link": "https://stackoverflow.com/users/1784001/otisonoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 872, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1446719852, "creation_date": 1446653681, "last_edit_date": 1446719852, "question_id": 33526716, "link": "https://stackoverflow.com/questions/33526716/sigset-not-found", "title": "sigset not found", "body": "<p>Consider the following example:</p>\n\n<pre><code>#include &lt;signal.h&gt;\n\nextern \"C\" {\n    static void signalHandler(int signal) {}\n}\n\nint main(int, char**)\n{\n    sigset (SIGTERM, signalHandler);\n    return 0;\n}\n</code></pre>\n\n<p><code>CC test.cpp</code> succeeds. </p>\n\n<p>But</p>\n\n<pre><code>CC test.cpp -std=c++11\nUndefined                       first referenced\n symbol                             in file\nsigset                           test.o\nld: fatal: symbol referencing errors\n</code></pre>\n\n<p>I also tried the following:</p>\n\n<pre><code>CC test.cpp -std=c++11 -lstdc++ -lgcc_s -lc\n</code></pre>\n\n<p>But yields the same error. <code>-m64</code> doesn't help either.</p>\n\n<p>Nor does -<code>lstdc++ -lgcc_s -lCrunG3</code>.</p>\n\n<p>OS: Solaris 11\nCompiler: CC from Oracle Solaris Studio 12.4</p>\n\n<p>Output requested:</p>\n\n<pre><code>me@myhost:~/projects/cpptest&gt; CC -std=c++11 -c test.cpp -o test.o\nme@myhost:~/projects/cpptest&gt; nm -A test.o | grep sigset\ntest.o: [14]    |         0|         0|FUNC |GLOB |0    |UNDEF  |_Z6sigset\nme@myhost:~/projects/cpptest&gt; nm -A /usr/lib/libc.so | grep sigset\n/usr/lib/libc.so: [527] |    883372|       224|FUNC |LOCL |2    |16     |__csigsetjmp\n/usr/lib/libc.so: [5694]        |    736724|       420|FUNC |WEAK |3    |16     |_sigset\n/usr/lib/libc.so: [6599]        |    883868|        28|FUNC |GLOB |3    |16     |_sigsetjmp\n/usr/lib/libc.so: [4906]        |    833680|       532|FUNC |WEAK |3    |16     |_thr_sigsetmask\n/usr/lib/libc.so: [6267]        |    736724|       420|FUNC |GLOB |3    |16     |sigset\n/usr/lib/libc.so: [4590]        |    883868|        28|FUNC |GLOB |3    |16     |sigsetjmp\n/usr/lib/libc.so: [2244]        |         0|         0|FILE |LOCL |0    |ABS    |sigsetops.c\n/usr/lib/libc.so: [4502]        |    833680|       532|FUNC |GLOB |3    |16     |thr_sigsetmask\nme@myhost:~/projects/cpptest&gt;\n</code></pre>\n\n<p>If I use <code>&lt;csignal&gt;</code> instead of <code>&lt;signal.h&gt;</code>, I get the following error:</p>\n\n<pre><code>\"test.cpp\", line 17: Error: The function \"sigset\" must have a prototype.\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446653504, "post_id": 33526489, "comment_id": 54834513, "body": "Do you really want to create a copy or would you just move the files in the end, that is delete the source(s) after having copied?"}, {"owner": {"reputation": 635, "user_id": 5503203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fc16849bdc2cf90674e4cc38f02e6f?s=128&d=identicon&r=PG&f=1", "display_name": "ITguy", "link": "https://stackoverflow.com/users/5503203/itguy"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446653622, "post_id": 33526489, "comment_id": 54834599, "body": "@alk no I would like to copy and paste ,  not cut and paste."}, {"owner": {"reputation": 1858, "user_id": 4799193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87fb12a6ad909323fb42a48e78b3f28?s=128&d=identicon&r=PG&f=1", "display_name": "ramana_k", "link": "https://stackoverflow.com/users/4799193/ramana-k"}, "edited": false, "score": 3, "creation_date": 1446653677, "post_id": 33526489, "comment_id": 54834636, "body": "Any implementation of file copying, under the hood, has to open the file and copy the bytes using system calls"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1446653832, "post_id": 33526489, "comment_id": 54834745, "body": "On Windows you have functions as <code>CopyFile</code> or <code>CopyFileEx</code>, but internally those functions just open, read and write files."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446654279, "post_id": 33526489, "comment_id": 54835078, "body": "Related if not a duplicate: <a href=\"http://stackoverflow.com/q/1006797/694576\">stackoverflow.com/q/1006797/694576</a>"}, {"owner": {"reputation": 904, "user_id": 1602017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84839e34585903558aebd8cfddd34255?s=128&d=identicon&r=PG", "display_name": "user1602017", "link": "https://stackoverflow.com/users/1602017/user1602017"}, "edited": false, "score": 0, "creation_date": 1446741405, "post_id": 33526489, "comment_id": 54879536, "body": "Can you use links, hardlinks, softlinks maybe?"}], "answers": [{"comments": [{"owner": {"reputation": 635, "user_id": 5503203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fc16849bdc2cf90674e4cc38f02e6f?s=128&d=identicon&r=PG&f=1", "display_name": "ITguy", "link": "https://stackoverflow.com/users/5503203/itguy"}, "edited": false, "score": 0, "creation_date": 1446653790, "post_id": 33526640, "comment_id": 54834714, "body": "up vote for you but this would remove my original file and I need to keep them untouched."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1446654214, "post_id": 33526640, "comment_id": 54835032, "body": "Also <code>rename()</code> might very well fail if source and destination aren&#39;t in the same file system."}], "tags": [], "owner": {"reputation": 1309, "user_id": 3089271, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e0b91a7c8c3b12362285d9c28bd37987?s=128&d=identicon&r=PG&f=1", "display_name": "Maxqueue", "link": "https://stackoverflow.com/users/3089271/maxqueue"}, "is_accepted": false, "score": 1, "last_activity_date": 1446653487, "creation_date": 1446653487, "answer_id": 33526640, "question_id": 33526489, "link": "https://stackoverflow.com/questions/33526489/is-there-a-way-to-directly-copy-files-from-one-folder-to-another-without-opening/33526640#33526640", "title": "Is there a way to directly copy files from one folder to another without opening", "body": "<p>This is how i have moved a file in the past without having to open it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n  rename(\"C:\\\\oldFile.txt\", \"C:\\\\newfile.txt\");\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1446653934, "post_id": 33526698, "comment_id": 54834812, "body": "Why use memory mapped files?  Just open in binary mode and read a large chunk, then write the chunk to the destination.  If you want it to be as fast as possible, then thread the reads/writes so you&#39;re not serializing the latencies (though this may just cause the serialization delays to move further up the chain)"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1446654283, "post_id": 33526698, "comment_id": 54835082, "body": "AFAIK the most operating systems got some optimizing when using mmf, but I&#39;m afraid I got no hard facts, yet."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1446655931, "post_id": 33526698, "comment_id": 54836270, "body": "The performance should be similar to copying a block that\u2019s aligned to the block size: the OS can optimize if it can just page out entire blocks with no offset."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1446656451, "post_id": 33526698, "comment_id": 54836691, "body": "Also, glib has platform-independent memory-mapped files."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1446667190, "post_id": 33526698, "comment_id": 54843298, "body": "Given that file copying is strictly a sequential operation that gains little to no benefit from caching, <code>read</code>/<code>write</code> with a sufficiently large buffer will probably be faster than <code>mmap</code>.  See <a href=\"http://stackoverflow.com/a/6383253/1687119\">this answer</a> for more details."}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1446668842, "post_id": 33526698, "comment_id": 54844241, "body": "@dbush Thank you very much, I appeased my doubt&#39;s with the complex internals of the kernel, but since you&#39;re link also takes care of that."}], "tags": [], "owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "is_accepted": false, "score": 1, "last_activity_date": 1446655635, "last_edit_date": 1446655635, "creation_date": 1446653635, "answer_id": 33526698, "question_id": 33526489, "link": "https://stackoverflow.com/questions/33526489/is-there-a-way-to-directly-copy-files-from-one-folder-to-another-without-opening/33526698#33526698", "title": "Is there a way to directly copy files from one folder to another without opening", "body": "<p><strong>One thing to be aware</strong> is that you're copying the slowest possible way, because you're doing it character by character. One improvement would be to copy full lines or bigger text chunks, using <code>fgets</code> and <code>fputs</code></p>\n\n<p><strong>Even better is to not copy the file as a text file</strong>, but instead just as a binary chunk. This is achieved by opening the file in binary mode with the <code>b</code> flag, so e.g. <code>target = fopen(target_file, \"wb\");</code> and using <code>fread</code> and <code>fwrite</code> instead of the put character functions. </p>\n\n<p>In both scenarios you have to use a temporary buffer with a reasonable size (could be the size of the file or fixed). To determine the optimal size is not trivial.</p>\n\n<p><strong>Yet another way to copy</strong>, and according to my operating systems professor <strong>what <code>cp</code> does</strong>, is by using <a href=\"https://en.wikipedia.org/wiki/Memory-mapped_file\" rel=\"nofollow\">memory mapped files</a>.\nHow to use memory mapped files is unfortunately not portable, but depending on your operating system i.e. platform. For unix the manpage of <code>mmap</code> is your friend. This is an example unix implementation by me:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\n\nint main(int argc, const char * argv[]) {\n\n    if (argc != 3)\n    {\n        fprintf(stderr, \"Usage %s &lt;SourceFile&gt; &lt;DestinationFile&gt;\\n\",argv[0]);\n        return EXIT_FAILURE;\n    }\n\n    int source_file_desc = open(argv[1], O_RDONLY);\n    if (source_file_desc == -1) {\n        perror(\"Can't open source file\");\n        return EXIT_FAILURE;\n    }\n    struct stat source_info;\n    if (stat(argv[1], &amp;source_info) != 0) {\n        perror(\"Can't get source file infos\");\n        return EXIT_FAILURE;\n    }\n    void *source_mem = mmap(NULL, source_info.st_size, PROT_READ, MAP_FILE|MAP_PRIVATE, source_file_desc, 0);\n    if (source_mem == MAP_FAILED) {\n        perror(\"Mapping source file failed\");\n        return EXIT_FAILURE;\n    }\n\n    int destination_file_desc = open(argv[2], O_TRUNC|O_CREAT|O_RDWR);\n    if (destination_file_desc == -1) {\n        perror(\"Can't open destination file\");\n    }\n    if (chmod(argv[2], source_info.st_mode) != 0) {\n        perror(\"Can't copy file permissions\");\n    }\n    if (lseek(destination_file_desc, source_info.st_size-1, SEEK_SET) == -1) {\n        perror(\"Can'T seek to new end of destination file\");\n    }\n    unsigned char dummy = 0;\n    if (write(destination_file_desc,  &amp;dummy, 1) == -1)\n    {\n        perror(\"Couldn't write dummy byte\");\n    }\n\n\n    void *destination_mem = mmap(NULL, source_info.st_size, PROT_WRITE,MAP_FILE|MAP_SHARED, destination_file_desc,0);\n    if (destination_mem == MAP_FAILED) {\n        perror(\"Mapping destination file failed\");\n    }\n\n    memcpy(destination_mem, source_mem, source_info.st_size);\n\n    munmap(source_mem,source_info.st_size);\n    munmap(destination_mem, source_info.st_size);\n    close(source_file_desc);\n    close(destination_file_desc);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 3, "last_activity_date": 1446655030, "creation_date": 1446655030, "answer_id": 33527198, "question_id": 33526489, "link": "https://stackoverflow.com/questions/33526489/is-there-a-way-to-directly-copy-files-from-one-folder-to-another-without-opening/33527198#33527198", "title": "Is there a way to directly copy files from one folder to another without opening", "body": "<p>Well, what do you imagine the <code>cp</code> command itself do for copying files? If opens source file in read mode, destination file is write mode and copy everything by binary chunks! Ok more things can be involved if you pass other options to <code>cp</code>, but the copy itself is not more magic than that.</p>\n\n<p>That being said, what you do is not that. You are copying the file character by character. Even if the standard library does some buffering, you are repeatedly calling an function when it could be avoided. And... <strong>never use gets</strong>. It is deprecated for ages because it is unsecure. If the user enters looong file names (more than 19 characters) you get a buffer overflow. And do not forget to test <strong>all</strong> io functions including output ones. When writing a huge file on a external media such an USB key, you could get out of space on device, and you program would just say it could successfully do the copy.</p>\n\n<p>Copying loop could be something like:</p>\n\n<pre><code>#define SIZE 16384\nchar buffer[SIZE];\nint crin, crout = 0;\n\nwhile ((crin = fread(buffer, 1, SIZE, source)) &gt; 0) {\n    crout = fwrite(buffer, 1, crin, target);\n    if (crout != crin) { /* control everything could be written */\n        perror(\"Write error\");\n        crout = -1;\n        break;\n    }\nif (crin &lt; 0) { /* test read error (removal of amovible media, ...) */\n    perror(\"Read error\");\n}\n</code></pre>\n\n<p>A low level optimization here would be to directly use posix functions instead of standard library ones, because as soon as you are using binary IO in big chunks, the buffering of the standard library gives no advantage, and you simply have its overhead.</p>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1446666368, "last_edit_date": 1446666368, "creation_date": 1446665921, "answer_id": 33530561, "question_id": 33526489, "link": "https://stackoverflow.com/questions/33526489/is-there-a-way-to-directly-copy-files-from-one-folder-to-another-without-opening/33530561#33530561", "title": "Is there a way to directly copy files from one folder to another without opening", "body": "<p>If it\u2019s not a problem that any changes to one copy would affect the other, you can create a link to the file.  How this works depends on the OS.</p>\n\n<p>If you want to optimize a file copy as much as possible using only the standard library, here is what I suggest (untested):</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nextern bool copy_file( FILE* dest, FILE* restrict src );\nstatic bool error_helper( const char* file, int line, const char* msg );\n\n#if defined(__amd64) || defined(__amd64__) || defined(__x86_64) || defined(__x86_64__) || defined(_M_X64) || defined(_M_AMD64) || defined(__i386) || defined(_M_IX86) || defined(_X86_) || defined(__X86__) || defined(__I86__) || defined(__INTEL__) || defined(__386)\n#  define PAGE_SIZE 4096U\n#else\n#  error \"Define the page size on your system, or use a system call such as sysconf() to find it.\"\n#endif\n\n#define non_fatal_stdlib_error() error_helper( __FILE__, __LINE__, strerror(errno) )\n\nbool copy_file( FILE* dest, FILE* restrict src )\n{\n  errno = 0;\n  if ( !(dest = freopen( NULL, \"w+\", dest )) )\n    return non_fatal_stdlib_error();\n\n  /* Try to help the library out by turning buffering off and allocating an aligned block; it might be able to detect that at runtime.\n   * On the other hand, the unbuffered implementation might be worse. */\n  setvbuf( src,  NULL, _IONBF, BUFSIZ );\n  setvbuf( dest, NULL, _IONBF, BUFSIZ );\n\n  char* const buffer = aligned_alloc( PAGE_SIZE, PAGE_SIZE );\n  if (!buffer)\n    return non_fatal_stdlib_error();\n\n  size_t n = fread( buffer, 1, PAGE_SIZE, src );\n  while ( PAGE_SIZE == n ) {\n    const size_t written = fwrite( buffer, 1, PAGE_SIZE, dest );\n    if ( written != PAGE_SIZE )\n      return non_fatal_stdlib_error();\n\n    n = fread( buffer, 1, PAGE_SIZE, src );\n  } // end while\n\n  if (ferror(src))\n    return non_fatal_stdlib_error();\n\n  if ( n &gt; 0 ) {\n    const size_t written = fwrite( buffer, 1, n, dest );\n    if ( written != n )\n      return non_fatal_stdlib_error();\n  }\n\n  return true;\n}\n\nbool error_helper( const char* file, int line, const char* msg )\n{\n  fflush(stdout);\n  fprintf( stderr, \"Error at %s, line %d: %s.\\n\", file, line, msg );\n  fflush(stderr);\n  return false;\n}\n</code></pre>\n\n<p>This at least gives the library implementation a chance to detect that all reads and writes are single memory pages.</p>\n"}], "owner": {"reputation": 635, "user_id": 5503203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fc16849bdc2cf90674e4cc38f02e6f?s=128&d=identicon&r=PG&f=1", "display_name": "ITguy", "link": "https://stackoverflow.com/users/5503203/itguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 33527198, "answer_count": 4, "score": 0, "last_activity_date": 1446666368, "creation_date": 1446653061, "question_id": 33526489, "link": "https://stackoverflow.com/questions/33526489/is-there-a-way-to-directly-copy-files-from-one-folder-to-another-without-opening", "title": "Is there a way to directly copy files from one folder to another without opening", "body": "<p>I know this way of copying files, which I think is pretty much standard way of copying files in C.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n   char ch, source_file[20], target_file[20];\n   FILE *source, *target;\n\n   printf(\"Enter name of file to copy\\n\");\n   gets(source_file);\n\n   source = fopen(source_file, \"r\");\n\n   if( source == NULL )\n   {\n      printf(\"Press any key to exit...\\n\");\n      exit(EXIT_FAILURE);\n   }\n\n   printf(\"Enter name of target file\\n\");\n   gets(target_file);\n\n   target = fopen(target_file, \"w\");\n\n   if( target == NULL )\n   {\n      fclose(source);\n      printf(\"Press any key to exit...\\n\");\n      exit(EXIT_FAILURE);\n   }\n\n   while( ( ch = fgetc(source) ) != EOF )\n      fputc(ch, target);\n\n   printf(\"File copied successfully.\\n\");\n\n   fclose(source);\n   fclose(target);\n\n   return 0;\n</code></pre>\n\n<p>But this way opens the file and copies line by line. The files I want to copy are HUGE and many. This way will take very VERY LONG. Is there a way I can achieve my goal of copying these files directly. I know terminal or command prompt are completely different things than C language, but a simple </p>\n\n<pre><code>cp sourcefile.txt destinationfile.txt\n</code></pre>\n\n<p>can do the trick. </p>\n\n<p>Is there any such commands or tricks in C that I can use. I cannot use </p>\n\n<pre><code>system(\"cp sourcefile.txt destinationfile.txt\");\n</code></pre>\n\n<p>command because I am writing a robust program that should work in Linux and windows.</p>\n"}, {"tags": ["c++", "c", "header-files", "extern", "extern-c"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1446672351, "post_id": 33526457, "comment_id": 54846233, "body": "<code>extern &quot;C&quot;</code> does not &quot;prevent&quot; name mangling. It tells the compiler, among other things, to use C-style name mangling."}], "answers": [{"tags": [], "owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "is_accepted": false, "score": 9, "last_activity_date": 1446653329, "creation_date": 1446653329, "answer_id": 33526575, "question_id": 33526457, "link": "https://stackoverflow.com/questions/33526457/is-there-any-reason-to-use-extern-c-on-headers-without-methods/33526575#33526575", "title": "Is there any reason to use extern &quot;C&quot; on headers without methods?", "body": "<p>No, <code>extern C</code> is not needed there, but it may be convenient to have it in all headers to make sure it is not forgotten when a new function is added.</p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1446659885, "post_id": 33526759, "comment_id": 54839080, "body": "Are you sure that type linkage is <i>required</i> by the standard ? If so, why is it so rare ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1446660041, "post_id": 33526759, "comment_id": 54839189, "body": "@Quentin Yes, I am sure. However, there is very little demand from users for this feature, so implementations focus on other features that are in higher demand."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1446674716, "post_id": 33526759, "comment_id": 54847479, "body": "Thank you for acknowledging that &quot;required by the standard&quot; doesn&#39;t mean &quot;always available/implemented.&quot;"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1446711939, "post_id": 33526759, "comment_id": 54860048, "body": "@Quentin: Personally, I consider function type linkage a C++ anti-feature. For instance, that makes technically impossible to use a pointer to a C++ static member as a C pointer to function. The C++ committee makes a hack for <code>qsort()</code> and <code>bsearch()</code> and they believe the problem does not exist any more."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 23, "last_activity_date": 1446657584, "last_edit_date": 1446657584, "creation_date": 1446653777, "answer_id": 33526759, "question_id": 33526457, "link": "https://stackoverflow.com/questions/33526457/is-there-any-reason-to-use-extern-c-on-headers-without-methods/33526759#33526759", "title": "Is there any reason to use extern &quot;C&quot; on headers without methods?", "body": "<p>Some compilers (it's rare) implement name mangling for variables too, not just for functions. In that case, <code>extern \"C\"</code> may be needed.</p>\n\n<p>Some compilers (it's also rare, but required by the standard) implement language linkage for function <em>types</em>, not just names, so <code>typedef void f();</code> and <code>extern \"C\" { typedef void f(); }</code> declare different types.</p>\n\n<p>Also, some maintainers won't notice the absence of <code>extern \"C\"</code> if they modify the header to add functions.</p>\n\n<p>I recommend you just include it.</p>\n"}], "owner": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 1, "accepted_answer_id": 33526759, "answer_count": 2, "score": 18, "last_activity_date": 1446670354, "creation_date": 1446652975, "last_edit_date": 1446670354, "question_id": 33526457, "link": "https://stackoverflow.com/questions/33526457/is-there-any-reason-to-use-extern-c-on-headers-without-methods", "title": "Is there any reason to use extern &quot;C&quot; on headers without methods?", "body": "<p>I frequently come across C header files that contain <code>extern \"C\"</code> guards,<br>\nbut don't contain any actual functions.  For example:  </p>\n\n<pre><code>/* b_ptrdiff.h - base type ptrdiff_t definition header */\n\n#ifndef __INCb_ptrdiff_th\n#define __INCb_ptrdiff_th\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#ifndef _PTRDIFF_T\n#define _PTRDIFF_T\ntypedef long ptrdiff_t;\n#endif /* _PTRDIFF_T */\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif /* __INCb_ptrdiff_th */\n</code></pre>\n\n<p>I know that <code>extern \"C\"</code> prevents name mangling on functions, but does it also prevent against other interfacing issues on variable and type declarations?  </p>\n\n<p>Is the use of <code>extern \"C\"</code> in the example above meaningless in terms of resulting compatibility?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1446652664, "post_id": 33526269, "comment_id": 54833932, "body": "Think about it: how to divide the string into two strings? Google for it if infeasible to do on your own."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1446652897, "post_id": 33526269, "comment_id": 54834100, "body": "<code>sscanf</code> it, this will give you the  32 bit number 0x08fc0021. Now you can separate this number into the two numbers 0x08fc and 0x0021. This very very basic operation is left as an exercice to the reader."}, {"owner": {"reputation": 105, "user_id": 4125774, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5dd6599c3fffbbef169307e2c7e8b0b?s=128&d=identicon&r=PG&f=1", "display_name": "KapaA", "link": "https://stackoverflow.com/users/4125774/kapaa"}, "edited": false, "score": 0, "creation_date": 1446653890, "post_id": 33526269, "comment_id": 54834788, "body": "thx you two, for a fast answer. A sulotion could e.g, be to do a simple &quot;binary and&quot; operation (shift 4 bit to left/right..what so ever) to get the wanted info.   What i was after is if there is a build in function that can do the work. e.g., by you defining a start memory address ...e.g, ala sscanf ..where you give a start and end address of the string"}], "answers": [{"tags": [], "owner": {"reputation": 494, "user_id": 2827680, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e5ec98bc941aa049ad9010ff7610613d?s=128&d=identicon&r=PG&f=1", "display_name": "The Light Spark", "link": "https://stackoverflow.com/users/2827680/the-light-spark"}, "is_accepted": true, "score": 1, "last_activity_date": 1446654461, "last_edit_date": 1446654461, "creation_date": 1446653642, "answer_id": 33526703, "question_id": 33526269, "link": "https://stackoverflow.com/questions/33526269/converting-a-hex-string-into-two-different-context-of-decimal-num-in-c/33526703#33526703", "title": "Converting a hex-string into two different context of decimal num. in C", "body": "<p><strong>Bitwise AND to the Rescue!</strong></p>\n\n<p>So, doing what you require can be done using the bitwise AND opperator on the resulting 32bit number (<code>int</code>?) you get from <code>sscanf</code>.</p>\n\n<p>You first get the number from the string:</p>\n\n<pre><code>char* hexstring = \"0x08fc0021\";\nint num = 0;\nsscanf(hexstring, \"%x\", &amp;num); //put the number into num.\n</code></pre>\n\n<p>Then you get the bits you want using <code>&amp;</code>:</p>\n\n<pre><code>int varA=0, varB=0;\nvarA = num &amp; 0xFFFF; //will get the second half.\nvarB = num &amp; 0xFFFF0000; \nvarB = varB &gt;&gt; 16; // now you have the first half as well.\n</code></pre>\n\n<p>And there you have it.</p>\n"}, {"tags": [], "owner": {"reputation": 635, "user_id": 2010398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GnCdn.png?s=128&g=1", "display_name": "gmug", "link": "https://stackoverflow.com/users/2010398/gmug"}, "is_accepted": false, "score": 1, "last_activity_date": 1446654566, "last_edit_date": 1446654566, "creation_date": 1446654237, "answer_id": 33526946, "question_id": 33526269, "link": "https://stackoverflow.com/questions/33526269/converting-a-hex-string-into-two-different-context-of-decimal-num-in-c/33526946#33526946", "title": "Converting a hex-string into two different context of decimal num. in C", "body": "<pre><code>int main(int argc, char *argv[]) {\n\n    char *hexstring = \"08fc0021\";\n    unsigned long hexnumber = 0u;\n    unsigned short a = 0u;\n    unsigned short b = 0u;\n\n    /* Use sscanf() to convert the string to integer */\n    sscanf(hexstring, \"%x\", &amp;hexnumber);\n\n    /* Use bitwise and to filter out the two higher bytes *\n     * and shift it 16 bits right                         */\n    a = ((hexnumber &amp; 0xFFFF0000u) &gt;&gt; 16u);\n\n    /* Use bitwise AND to filter out the two lower bytes */\n    b = (hexnumber &amp; 0x0000FFFFu);\n\n    printf(\"0x%X 0x%X\\n\",a,b);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2064, "user_id": 2013192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61664c28be6e3faeb34d1ba67c043e2?s=128&d=identicon&r=PG", "display_name": "honzakuzel1989", "link": "https://stackoverflow.com/users/2013192/honzakuzel1989"}, "is_accepted": false, "score": 1, "last_activity_date": 1446729218, "last_edit_date": 1446729218, "creation_date": 1446654252, "answer_id": 33526952, "question_id": 33526269, "link": "https://stackoverflow.com/questions/33526269/converting-a-hex-string-into-two-different-context-of-decimal-num-in-c/33526952#33526952", "title": "Converting a hex-string into two different context of decimal num. in C", "body": "<p>You can use this approach (bit operations):</p>\n\n<pre><code>char *hexstring = \"08fc0021\";\n\nint aux; \nsscanf(hexstring, \"%x\", &amp;aux);\nprintf(\"aux = 0x%x = %d\\n\", aux, aux);\n\nint varA = (aux &amp; 0xFFFF0000) &gt;&gt; 16, varB = aux &amp; 0x0000FFFF;\nprintf(\"varA = 0x%x = %d\\n\", varA, varA);\nprintf(\"varB = 0x%x = %d\\n\", varB, varB);\n</code></pre>\n\n<p>Result:</p>\n\n<blockquote>\n  <p>aux = 0x8fc0021 = 150732833<br>\n  varA = 0x8fc = 2300<br>\n  varB = 0x21 = 33</p>\n</blockquote>\n\n<p><strong>EDIT:</strong><br>\nOr this approach (string manipulation):</p>\n\n<pre><code>// requires a hexstring length of 8 or more sophisticated logic\nchar *hexstring = \"08fc0021\";\nint len = strlen(hexstring);\n\nchar varA[5], varB[5];\nfor(int i = 0; i&lt;len; i++)\n{\n    if(i &lt; 4) varA[i] = hexstring[i];\n    else varB[i-4] = hexstring[i];\n}\n\nvarA[4] = varB[4] = '\\0';\n\nint varAi, varBi;\nsscanf(varA, \"%x\", &amp;varAi);\nsscanf(varB, \"%x\", &amp;varBi);\n\nprintf(\"varAi = 0x%x = %d\\n\", varAi, varAi);\nprintf(\"varBi = 0x%x = %d\\n\", varBi, varBi);\n</code></pre>\n\n<p>Same result:  </p>\n\n<blockquote>\n  <p>varAi = 0x8fc = 2300<br>\n  varBi = 0x21 = 33</p>\n</blockquote>\n"}], "owner": {"reputation": 105, "user_id": 4125774, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5dd6599c3fffbbef169307e2c7e8b0b?s=128&d=identicon&r=PG&f=1", "display_name": "KapaA", "link": "https://stackoverflow.com/users/4125774/kapaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 33526703, "answer_count": 3, "score": 1, "last_activity_date": 1446729218, "creation_date": 1446652524, "last_edit_date": 1446652734, "question_id": 33526269, "link": "https://stackoverflow.com/questions/33526269/converting-a-hex-string-into-two-different-context-of-decimal-num-in-c", "title": "Converting a hex-string into two different context of decimal num. in C", "body": "<p>I have a string say:</p>\n\n<pre><code>char *hexstring = \"08fc0021\";\n</code></pre>\n\n<p>this is a concatenation of two information each two bytes long. \nThe first two bytes of this string, ie.: 08fc corresponds to 2300 in dec.\nthe last 4 bytes, ie., 0021 -> 33.</p>\n\n<p>My problem is to convert this string into two different variables, say: </p>\n\n<pre><code>int varA, varB;\n</code></pre>\n\n<p>here varA will have the number 2300, and varB = 33.</p>\n\n<p>normally I would have used sscanf to convert the string into a decimal num. \nbut now i have this problem of a concatenated string with two different info. </p>\n\n<p>any idea suggestion how to nail this ? </p>\n\n<p>thx in advance  </p>\n"}, {"tags": ["c", "linux", "firebird", "udf"], "answers": [{"tags": [], "owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "is_accepted": false, "score": 1, "last_activity_date": 1446714763, "creation_date": 1446714763, "answer_id": 33540468, "question_id": 33526072, "link": "https://stackoverflow.com/questions/33526072/how-to-return-firebird-timestamp-from-udf-written-in-c-under-linux/33540468#33540468", "title": "How to return firebird timestamp from udf written in C under Linux", "body": "<p>You need to use <code>ISC_TIMESTAMP</code> which is defined in <code>ibase.h</code>. You should be able to use <code>isc_encode_timestamp</code> to convert from the <code>tm</code> of <code>time.h</code>, but as I don't program in C or C++ myself, I don't have more detailed information or an example ready.</p>\n"}, {"tags": [], "owner": {"reputation": 3758, "user_id": 826938, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1f5fa15f4142e9ec9ade8ea8142a030a?s=128&d=identicon&r=PG", "display_name": "BigONotation", "link": "https://stackoverflow.com/users/826938/bigonotation"}, "is_accepted": false, "score": 1, "last_activity_date": 1446739448, "creation_date": 1446739448, "answer_id": 33549351, "question_id": 33526072, "link": "https://stackoverflow.com/questions/33526072/how-to-return-firebird-timestamp-from-udf-written-in-c-under-linux/33549351#33549351", "title": "How to return firebird timestamp from udf written in C under Linux", "body": "<p>Using Mark's advice, here is an implementation:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;ibase.h&gt;\n#include &lt;ib_util.h&gt;\n\n\ntypedef long long int SINT64;\n\n\nISC_TIME encode_time(int hours, int minutes, int seconds, int fractions)\n{\n\n    return ((hours * 60 + minutes) * 60 + seconds) * ISC_TIME_SECONDS_PRECISION + fractions;\n}\n\nISC_DATE encodeDate(const struct tm* t){\n    // Convert a calendar date to a numeric day\n    // (the number of days since the base date)\n\n    const int day = t-&gt;tm_mday;\n    int month = t-&gt;tm_mon + 1;\n    int year = t-&gt;tm_year + 1900;\n\n    if (month &gt; 2)\n        month -= 3;\n    else\n    {\n        month += 9;\n        year -= 1;\n    }\n\n    const int c = year / 100;\n    const int ya = year - 100 * c;\n\n\n    return (ISC_DATE) (((SINT64) 146097 * c) / 4 +\n                   (1461 * ya) / 4 +\n                   (153 * month + 2) / 5 + day + 1721119 - 2400001);\n}\n\n\n\nISC_TIMESTAMP* UTCServerTime(){\n    time_t t = time(NULL);\n\n    struct tm utc;\n    gmtime_r(&amp;t, &amp;utc);\n\n    ISC_TIMESTAMP* ib_utc = (ISC_TIMESTAMP*)\n        ib_util_malloc(sizeof(ISC_TIMESTAMP));\n\n    ib_utc-&gt;timestamp_date = encodeDate(&amp;utc);\n    ib_utc-&gt;timestamp_time = encode_time(utc.tm_hour,utc.tm_min,utc.tm_sec, 0);\n\n    return ib_utc;\n}\n</code></pre>\n"}], "owner": {"reputation": 3758, "user_id": 826938, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1f5fa15f4142e9ec9ade8ea8142a030a?s=128&d=identicon&r=PG", "display_name": "BigONotation", "link": "https://stackoverflow.com/users/826938/bigonotation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1446739448, "creation_date": 1446652027, "question_id": 33526072, "link": "https://stackoverflow.com/questions/33526072/how-to-return-firebird-timestamp-from-udf-written-in-c-under-linux", "title": "How to return firebird timestamp from udf written in C under Linux", "body": "<p>Could someone please show me how to return a firebird TIMESTAMP type from  a udf written in C?</p>\n\n<p>More specifically, is there a corresponding C type which maps to the TIMESTAMP type in Firebird? If yes, which header includes its definition?Thanks! </p>\n"}, {"tags": ["c", "algorithm", "sorting", "data-structures", "merge"], "answers": [{"tags": [], "owner": {"reputation": 30866, "user_id": 1139393, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4f7f66aa636f33c3e5784d3581213ba8?s=128&d=identicon&r=PG", "display_name": "Peter de Rivaz", "link": "https://stackoverflow.com/users/1139393/peter-de-rivaz"}, "is_accepted": true, "score": 2, "last_activity_date": 1446651479, "creation_date": 1446651479, "answer_id": 33525884, "question_id": 33525290, "link": "https://stackoverflow.com/questions/33525290/error-in-merge-sort-program/33525884#33525884", "title": "Error in merge sort program", "body": "<p>You are terminating your a1 and a2 arrays at the wrong location.</p>\n\n<p>Try changing:</p>\n\n<pre><code>for(k=0,i=start;i&lt;=mid;i++,k++){\n    a1[k]=array[i];\n}\nfor(k=0,j=i;j&lt;=end;j++,k++){\n    a2[k]=array[j]; \n}\na1[mid]=999;\na2[j]=999;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for(k=0,i=start;i&lt;=mid;i++,k++){\n    a1[k]=array[i];\n}\na1[k]=999;\nfor(k=0,j=i;j&lt;=end;j++,k++){\n    a2[k]=array[j]; \n}\na2[k]=999;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1446651557, "creation_date": 1446651557, "answer_id": 33525914, "question_id": 33525290, "link": "https://stackoverflow.com/questions/33525290/error-in-merge-sort-program/33525914#33525914", "title": "Error in merge sort program", "body": "<p>When you create your temporary arrays:</p>\n\n<pre><code>for (k = 0, i = start; i &lt;= mid; i++, k++) {\n    a1[k] = array[i];\n}\na1[i] = 999;\n</code></pre>\n\n<p>you put a sentinel value with a high value at the end. But <code>i</code> is the index into the original <code>array</code>. You must use <code>k</code>, the index of the temporary array <code>a1</code>:</p>\n\n<pre><code>for (k = 0, i = start; i &lt;= mid; i++, k++) {\n    a1[k] = array[i];\n}\na1[k] = 999;\n</code></pre>\n\n<p>Even so, the double control structure with <code>k</code> and <code>i</code> is clumsy. And  there's no need to guess a high number; <code>&lt;limits.h&gt;</code> has constants defined for the min and max values of most types:</p>\n\n<pre><code>k = 0;\nfor (i = start; i &lt;= mid; i++) {\n    a1[k++] = array[i];\n}\na1[k] = INT_MAX;\n</code></pre>\n\n<p>Here, you increment <code>k</code> when an item is appended. This works even when the assignment happens conditionally, i.e. not in all iterations.</p>\n\n<p>Finally, I would recommend to use exclusive upper bounds. That's the natural way to express ranges in C. <code>mid</code> would then be both the exclusive upper bound of the left array and the inclusive lower bound of the right array.</p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 4964265, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed4edb3e1ca20225eb76a802fe9cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Swap", "link": "https://stackoverflow.com/users/4964265/swap"}, "is_accepted": false, "score": 0, "last_activity_date": 1446655092, "creation_date": 1446655092, "answer_id": 33527212, "question_id": 33525290, "link": "https://stackoverflow.com/questions/33525290/error-in-merge-sort-program/33527212#33527212", "title": "Error in merge sort program", "body": "<p>I have solved it <br/>\na[mid + 1]=999 <br/>\na[k]=999 <br/></p>\n"}], "owner": {"reputation": 149, "user_id": 4964265, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ed4edb3e1ca20225eb76a802fe9cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Swap", "link": "https://stackoverflow.com/users/4964265/swap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 33525884, "answer_count": 3, "score": 0, "last_activity_date": 1446655092, "creation_date": 1446649899, "last_edit_date": 1446650543, "question_id": 33525290, "link": "https://stackoverflow.com/questions/33525290/error-in-merge-sort-program", "title": "Error in merge sort program", "body": "<p>I am doing a merge sort program in C but I'm getting some unexpected output.\nCan anyone find out error in the program? </p>\n\n<pre><code>   #include&lt;stdio.h&gt;\n\n    int array[100],n;\n    void merge(int l,int m,int h);\n    void mergesort(int start,int end);\n    main(){\n    int i;\n    printf(\"Enter Size: \");\n    scanf(\"%d\",&amp;n);\n    for(i=0;i&lt;n;i++){\n        scanf(\"%d\",&amp;array[i]);      \n    }\n    mergesort(0, n-1);\n    for(i=0;i&lt;n;i++){\n        printf(\"%d\\n\",array[i]);        \n        }\n    }\n\n    void mergesort(int start,int end){\n    int mid;\n    if(start&lt;end){\n        mid=(start+end)/2;\n        mergesort(start,mid);\n        mergesort(mid+1,end);\n        merge(start,mid,end);\n        }\n     }\n\n    void merge(int start,int mid,int end){\n    int i,j,k;\n    int a1[100],a2[100];\n\n    for(k=0,i=start;i&lt;=mid;i++,k++){\n        a1[k]=array[i];\n    }\n    for(k=0,j=i;j&lt;=end;j++,k++){\n        a2[k]=array[j]; \n    }\n    a1[mid]=999;\n    a2[j]=999;\n    i=0;j=0;\n    for(k=start; k &lt;=end; k++)\n    {\n        if(a1[i]&lt;=a2[j])\n            array[k]=a1[i++];\n        else\n            array[k]=a2[j++];\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Enter Size: 5\n1 2 3 2 3\n2\n2\n3\n3\n-1818025592\n</code></pre>\n\n<p>For larger arrays, the output is more scrambled. I think there is an error in merge() function.</p>\n"}, {"tags": ["c", "if-statement", "int", "max"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 7, "creation_date": 1446649905, "post_id": 33525244, "comment_id": 54831840, "body": "<code>INT_MAX</code> is the maximum value an <code>int</code> can have. Think about that."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1446649977, "post_id": 33525244, "comment_id": 54831877, "body": "You should do some reading on how overflows actually work. Hint: an <i>integer</i> has a <i>sign</i>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446650158, "post_id": 33525244, "comment_id": 54832017, "body": "You should also consider why you use signed numbers, when your program has an obvious need of storing as large unsigned numbers as possible."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 3, "creation_date": 1446650230, "post_id": 33525244, "comment_id": 54832077, "body": "@Arc676 What is there to read about them, other than learning that signed integer overflow invokes undefined behavior? There is nothing of interest to know beyond that."}, {"owner": {"reputation": 2064, "user_id": 2013192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61664c28be6e3faeb34d1ba67c043e2?s=128&d=identicon&r=PG", "display_name": "honzakuzel1989", "link": "https://stackoverflow.com/users/2013192/honzakuzel1989"}, "edited": false, "score": 0, "creation_date": 1446650311, "post_id": 33525244, "comment_id": 54832136, "body": "Int number multiple by int number is always int number! And int number is always smaller or equal like INT_MAX. In your case init_num * i &lt; INT_MAX will be false only when init_num * i will be INT_MAX (othwrwise true)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1446650330, "post_id": 33525244, "comment_id": 54832155, "body": "@Arc676: If you need defined behaviour of integer overflow, you have to use <code>unsgned</code> integers (which would be better here anyway - but don&#39;t solve the actual problem)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2064, "user_id": 2013192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61664c28be6e3faeb34d1ba67c043e2?s=128&d=identicon&r=PG", "display_name": "honzakuzel1989", "link": "https://stackoverflow.com/users/2013192/honzakuzel1989"}, "edited": false, "score": 0, "creation_date": 1446650417, "post_id": 33525244, "comment_id": 54832233, "body": "@honza: As already stated by Lundin, signed integer overflwo is UB. And casting will not solve anything!"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446651418, "post_id": 33525244, "comment_id": 54832991, "body": "@Olaf: &quot;<i>And casting will not solve anything!</i>&quot; please elaborate. <code>if ((long) init_num * i &lt; (long) INT_MAX)</code> should work pretty well, shouldn&#39; it? Ok, to a certain extend ..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446651511, "post_id": 33525244, "comment_id": 54833064, "body": "@alk: Not on most 32 bit systems with <code>MAX_LONG == MAX_INT</code> and e.g. Windows64 which also has 32 bit <code>long</code>. Similar for ILP64 systems (rare,but real). The correct approach would be to check before the multiplication."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446651579, "post_id": 33525244, "comment_id": 54833125, "body": "@Olaf: Yes well, I obviously implied <code>long</code> is wider than <code>int</code> ... :-/ Your wording &quot;<i>anything</i>&quot; definitely isn&#39;t accurate."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446651833, "post_id": 33525244, "comment_id": 54833307, "body": "@Olaf: &quot;<i>The correct approach would be to check before the multiplication.</i>&quot; This would would be the answer to accept then, yes ... ;-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446654374, "post_id": 33525244, "comment_id": 54835151, "body": "@alk: Welcome to comment ..."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446650397, "post_id": 33525327, "comment_id": 54832211, "body": "Change <code>false</code> to 0 pretty please? We are in C."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446650467, "post_id": 33525327, "comment_id": 54832267, "body": "@Bathsheba Yeah , I will do that ."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1446650501, "post_id": 33525327, "comment_id": 54832296, "body": "@Bathsheba even if <code>C</code> doesn&#39;t have the boolean data type, it still has the concept of boolean. A condition is either false or true."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446650510, "post_id": 33525327, "comment_id": 54832302, "body": "@Bathsheba In C, &quot;<code>false</code> which expands to the integer constant 0&quot;  C11 &#167;7.18 3  <code>false</code> is fine in C."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446650518, "post_id": 33525327, "comment_id": 54832308, "body": "1 or 0 according to the standard."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1446650852, "post_id": 33525327, "comment_id": 54832520, "body": "<code>Each of the operators &lt; (less than), [...] shall yield 1 if the specified relation is true and 0 if it is false. The result has type int.</code> So while the result of the expression is <code>1</code> or <code>0</code> there is nothing wrong with saying the <code>condition will never be false</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1446653266, "post_id": 33525327, "comment_id": 54834351, "body": "@bolov: Who says C does not have a boolean datatype? Where have you been the last 16 years?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446653411, "post_id": 33525327, "comment_id": 54834459, "body": "@ameyCU: <code>true</code> and <code>false</code> are the better (and correct) phrases. Even if you use the keywords (<code>false</code>), since C99."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446654011, "post_id": 33525327, "comment_id": 54834875, "body": "@Olaf As you can see there was a discussion on this , therefore , I mentioned both . I also prefer <code>true</code> and <code>false</code> , and is more clear ."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446654416, "post_id": 33525327, "comment_id": 54835192, "body": "@ameyCU: I wanted to strenghten your back (provide backup for you) actually against the C90 followers :-)"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446654606, "post_id": 33525327, "comment_id": 54835327, "body": "@Olaf  Yes , surely I understand your point . I really appreciate that . Thank You !! :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446654921, "post_id": 33525327, "comment_id": 54835560, "body": "Uh, but you should not have <code>false</code> as a keyword. In this aspect they are right: C comparison operators yield an integer result. Try <code>sizeof (1LL &lt; 2LL)</code>, which should equal <code>sizeof(int)</code>. OTOH, it would be correct to write &quot;equals <code>false</code>&quot;."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446655003, "post_id": 33525327, "comment_id": 54835627, "body": "@Olaf Yes , but I did not suggested use of <code>false</code> particularly in expression but to describe what will be state of  the expression ."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446655070, "post_id": 33525327, "comment_id": 54835674, "body": "Yes, I know. But once you put a work into code-tags, it is suppose to be - well - code, not just natural language. To emphasise text, use either bold or italics (I&#39;d use none her, though)."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446655159, "post_id": 33525327, "comment_id": 54835745, "body": "@Olaf I edited it . I think these things increase ambiguity :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446656220, "post_id": 33525327, "comment_id": 54836496, "body": "It&#39;s perfectly now;-) But I disagree; markup helps to make very clear what you actually mean. As given, I see that &quot;false&quot; has a specific meaning, but is not a keyword, while <code>0</code> is a value of the program (it is no token from the context). Nitpicky? Maybe, but <b>unambigously</b>."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446656676, "post_id": 33525327, "comment_id": 54836851, "body": "@Olaf I would not call it <i>nitpicking</i> but preference  :-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1446665394, "post_id": 33525327, "comment_id": 54842290, "body": "Note: <code>sizeof (1LL &lt; 2LL) ==  sizeof(int) == sizeof(false)</code> which may not equal <code>sizeof(bool)</code>."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 5, "last_activity_date": 1446655109, "last_edit_date": 1446655109, "creation_date": 1446650015, "answer_id": 33525327, "question_id": 33525244, "link": "https://stackoverflow.com/questions/33525244/int-max-does-not-behave-right-in-an-if-statement/33525327#33525327", "title": "INT_MAX does not behave right in an If-Statement", "body": "<pre><code>if (init_num * i &lt; INT_MAX)\n</code></pre>\n\n<p><code>INT_MAX</code> is the maximum value of <code>int</code> , therefore , this condition will never be <em>false</em> or in other words <code>0</code> (<em>except when it is equal to <code>INT_MAX</code></em>). </p>\n\n<p>If you want you can write your condition like this -</p>\n\n<pre><code>if (init_num &lt; INT_MAX/i)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446653539, "post_id": 33525403, "comment_id": 54834534, "body": "A boolena expression yields true or false. Either you use <code>0</code> as a token or &quot;false&quot; as logical term, but &quot;0&quot; is wrong as would <code>false</code> be. And you are wrong in general, as any overflow is UB, which may yield anything, including nasal daemons."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1446650289, "last_edit_date": 1446650289, "creation_date": 1446650214, "answer_id": 33525403, "question_id": 33525244, "link": "https://stackoverflow.com/questions/33525244/int-max-does-not-behave-right-in-an-if-statement/33525403#33525403", "title": "INT_MAX does not behave right in an If-Statement", "body": "<p><code>init_num * i &lt; INT_MAX</code> will only be 0 if <code>int_num * i</code> <em>is</em> <code>INT_MAX</code>. This is not particularly likely. Note that signed integer overflow is undefined behaviour in C, so do be particularly careful here.</p>\n\n<p>You can rewrite your statement to <code>init_num &lt; INT_MAX / i</code> in your particular case. Do note that integer division truncates though.</p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1446651233, "last_edit_date": 1446651233, "creation_date": 1446650853, "answer_id": 33525665, "question_id": 33525244, "link": "https://stackoverflow.com/questions/33525244/int-max-does-not-behave-right-in-an-if-statement/33525665#33525665", "title": "INT_MAX does not behave right in an If-Statement", "body": "<pre><code>init_num * int\n</code></pre>\n\n<p>results in an <code>int</code> and though cannot grow beyond a maximum possible <code>int</code> (<code>INT_MAX</code>) by defintion.</p>\n\n<p>So provide \"room\" for calculations \"larger\" than an <code>int</code> by replacing</p>\n\n<pre><code>if (init_num * i &lt; INT_MAX)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>if ((long) init_num * i &lt; (long) INT_MAX)\n</code></pre>\n\n<p>The casting to <code>long</code> leads to a <code>long</code> result.</p>\n\n<p>(The above approach assumes <code>long</code> being wider then <code>int</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 2, "last_activity_date": 1446654343, "creation_date": 1446654343, "answer_id": 33526976, "question_id": 33525244, "link": "https://stackoverflow.com/questions/33525244/int-max-does-not-behave-right-in-an-if-statement/33526976#33526976", "title": "INT_MAX does not behave right in an If-Statement", "body": "<p>The problem is signed integer overflow is undefined behaviour. Concentrate on the \"undefined\" part and think about it. Briefly: avoid under all circumstances.</p>\n\n<p>To avoid this, you can either use a devinitively wider type which is gauranteed to hold the result of the multiplication and then test:</p>\n\n<pre><code>// ensure the type we use for cast is large enough\n_Static_assert(LLONG_MAX &gt; INT_MAX, \"LLONG too small.\");\n\nif ( (long long)init_num * i &lt; (long long)INT_MAX )\n</code></pre>\n\n<p>This apparently does not work is you are already at the limit (i.e. use the largest data type). So you have to check in advance:</p>\n\n<pre><code>if ( init_num &lt; (INT_MAX / i) ) {\n    init_num *= i;\n</code></pre>\n\n<p>Although more time-consuming due to the extra division, this is in general the better approach, as it does not require a larger data type (where multiplication might be also more expensive).</p>\n"}], "owner": {"reputation": 13, "user_id": 5517048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc59b22ea4a6757efbd34289a476604b?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/5517048/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 33525327, "answer_count": 4, "score": 0, "last_activity_date": 1446655109, "creation_date": 1446649774, "question_id": 33525244, "link": "https://stackoverflow.com/questions/33525244/int-max-does-not-behave-right-in-an-if-statement", "title": "INT_MAX does not behave right in an If-Statement", "body": "<p>My C-Program performs a \"Turmrechnung\"(A predefined number(\"init_num\" gets multiplied with a predefined range of numbers(init_num*2*3*4*5*6*7*8*9 in my case, defined by the variable \"h\"), and after that it is divided by those same numbers and the result should be the initial value of \"init_num\". My task is to integrate a way to stop the calculation if the value of init_num becomes larger than INT_MAX(from limits.h).\nBut the If-Statement is always true, even if it is not, in case of a larger initial value of \"init_num\", which results in values bigger than INT_MAX along the way of the calculation. </p>\n\n<p>It only works if i replace \"INT_MAX\" with a smaller number than INT_MAX like 200000000 in my If-Statement. Why?</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n  int init_num = 1000000;\n  int h = 9;\n\n  for (int i = 2; i &lt; h+1; ++i)\n  {\n    if (init_num * i &lt; INT_MAX)\n    {\n      printf(\"%10i %s %i\\n\", init_num, \"*\", i);\n      init_num *= i;\n    }\n    else\n    {\n      printf(\"%s\\n\",\"An overflow has occurred!\");\n      break;\n    }\n  }\n  for (int i = 2; i &lt; h+1; ++i)\n  {\n    printf(\"%10i %s %i\\n\", init_num, \":\", i);\n    init_num /= i;\n  }\n  printf(\"%10i\\n\", init_num);\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1446651561, "post_id": 33525194, "comment_id": 54833105, "body": "I suggest you just compile it in Visual Studio and see what the compiler/linker tells you. Seems that most of your code is supported in VS."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1446655499, "post_id": 33525194, "comment_id": 54835969, "body": "Not likely. Anything  <code>pthread</code> will be a problem, as well as sockets."}, {"owner": {"reputation": 1, "user_id": 5525169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b5abc42dc2313963f68201fbd49b12?s=128&d=identicon&r=PG&f=1", "display_name": "John Peterson", "link": "https://stackoverflow.com/users/5525169/john-peterson"}, "edited": false, "score": 0, "creation_date": 1446659535, "post_id": 33525194, "comment_id": 54838805, "body": "If I just compile it, the compiler show me many errors, because of unsupported libraries."}], "owner": {"reputation": 1, "user_id": 5525169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b5abc42dc2313963f68201fbd49b12?s=128&d=identicon&r=PG&f=1", "display_name": "John Peterson", "link": "https://stackoverflow.com/users/5525169/john-peterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446651429, "creation_date": 1446649603, "last_edit_date": 1446651429, "question_id": 33525194, "link": "https://stackoverflow.com/questions/33525194/can-i-run-this-c-code-in-visual-studio", "title": "Can I run this C code in Visual Studio?", "body": "<p>Can I run this code in Visual Studio ? I know there is Linux/Unix libraries, but how can convert the code for Visual Studio ?</p>\n\n<p>All of the code is here: <a href=\"https://drive.google.com/file/d/0BxYN1HoaM7pJV1JVRmtnZzhqUEk/view?usp=sharing\" rel=\"nofollow\">https://drive.google.com/file/d/0BxYN1HoaM7pJV1JVRmtnZzhqUEk/view?usp=sharing</a></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/timeb.h&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;errno.h&gt;\n\n#define MAX_CLIENT_PER_THREAD 300\n#define MAX_THREAD 200\n#define PORT 3355\n#define MAX_CLIENT_BUFFER 256\n\nint listenfd;\n\ntypedef struct {\n    pthread_t tid;\n    int client_count;\n    int clients[MAX_CLIENT_PER_THREAD];\n}Thread;\n\npthread_cond_t new_connection_cond = PTHREAD_COND_INITIALIZER;\npthread_mutex_t new_connection_mutex = PTHREAD_MUTEX_INITIALIZER;\n\nThread threads[MAX_THREAD];\n\nvoid nonblock(int sockfd) {\n    int opts;\n    opts = fcntl(sockfd, F_GETFL);\n    if(opts &lt; 0) {\n        perror(\"fcntl(F_GETFL)\\n\");\n        exit(1);\n    }\n    opts = (opts | O_NONBLOCK);\n    if(fcntl(sockfd, F_SETFL, opts) &lt; 0) {\n        preror(\"fcntl(F_SETFL)\\n\");\n        exit(1);\n    }\n}\n...\n</code></pre>\n"}, {"tags": ["c", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 2, "creation_date": 1446649545, "post_id": 33525155, "comment_id": 54831576, "body": "What have you tried so far? Show some effort (post your code in your question). Edit the question. Don&#39;t post code in comments."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1446649608, "post_id": 33525155, "comment_id": 54831619, "body": "If you &quot;tried&quot; you should&#39;ve some code to show."}], "answers": [{"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1446669076, "last_edit_date": 1446669076, "creation_date": 1446668235, "answer_id": 33531214, "question_id": 33525155, "link": "https://stackoverflow.com/questions/33525155/number-sequences-length-element-first-and-last-indexes-in-array/33531214#33531214", "title": "Number sequences length, element first and last indexes in array", "body": "<p>Your task is a good exercise to familiarize you with the <code>0-based</code> array indexes used in C, iterating arrays, and adjusting the array indexes to <code>1-based</code> when the output requires.</p>\n\n<p>Taking the first two together, <code>0-based</code> arrays in C, and iterating over the elements, you must first determine how many elements are in your array. This is something that gives new C programmers trouble. The reason being is for general arrays (as opposed to <em>null-terminated</em> strings), you must either know the number of elements in the array, or determine the number of elements <em>within the scope</em> where the array <em>was declared</em>. </p>\n\n<p>What does that mean? It means, the only time you can use the <code>sizeof</code> operator to determine the size of an array <em>is inside the same scope</em> (i.e. inside the same block of code <code>{...}</code> where the array is declared. If the array is passed to a function, the parameter passing the array is converted (you may see it referred to as <em>decays</em>) to a pointer. When that occurs, the <code>sizeof</code> operator simply returns the size of <code>a pointer</code> (generally 8-bytes on x86_64 and 4-bytes on x86), not the size of the array.</p>\n\n<p>So now you know the first part of your task. <strong>(1)</strong> declare the array; and <strong>(2)</strong> save the size of the array to use in iterating over the elements. The first you can do with <code>int array[] = {0,0,1,1,1,1,1,1,0,1,0,1,1,1};</code> and the second with <code>sizeof array;</code></p>\n\n<p>Your next job is to iterate over each element in the array and test whether it is <code>'0'</code> or <code>'1'</code> and respond appropriately. To iterate over each element in the array (as opposed to a string), you will typically use a <code>for</code> loop coupled with an index variable ( <code>'i'</code> below) that will allow you to access each element of the array. You may have something similar to:</p>\n\n<pre><code>size_t i = 0;\n...\nfor (i = 0; i&lt; sizeof array; i++) {\n    ...  /* elements accessed as array[i] */\n}\n</code></pre>\n\n<p>(note: you are free to use <code>int</code> as the type for <code>'i'</code> as well, but for your choice of type, you generally want to ask can <code>'i'</code> ever be negative here? If not, a choice of a type that handles only positive number will help the compiler warn if you are misusing the variable later in your code)</p>\n\n<p>To build the complete logic you will need to test for all changes from <code>'0'</code> to <code>'1'</code> you may have to use nested <code>if ... else ...</code> statements. (You may have to check if you are dealing with <code>array[0]</code> specifically as part of your test logic) You have 2 tasks here. <strong>(1)</strong> determine if the last element was <code>'0'</code> and the current element <code>'1'</code>, then update your <code>sequence_count++;</code> and <strong>(2)</strong> test if the current element is <code>'1'</code>, then store the <em>adjusted index</em> in a second array and update the count or index for the second array so you can keep track of where to store the next <em>adjusted index</em> value. I will let you work on the test logic and will help if you get stuck.</p>\n\n<p>Finally, you need only print out your final <code>sequence_count</code> and then iterate over your second array (where you stored the <em>adjusted index values</em> for each time <code>array</code> was <code>'1'</code>.</p>\n\n<p>This will get you started. Edit your question and add your current code when you get stuck and people can help further.</p>\n"}], "owner": {"reputation": 3, "user_id": 4357326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83954be2683906a9ff230af416fe7d9?s=128&d=identicon&r=PG&f=1", "display_name": "xBLADEx", "link": "https://stackoverflow.com/users/4357326/xbladex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 33531214, "answer_count": 1, "score": -1, "last_activity_date": 1446669076, "creation_date": 1446649472, "last_edit_date": 1446665425, "question_id": 33525155, "link": "https://stackoverflow.com/questions/33525155/number-sequences-length-element-first-and-last-indexes-in-array", "title": "Number sequences length, element first and last indexes in array", "body": "<p>Im beginner in programming. My question is how to count number sequences in input array? For example:</p>\n\n<pre><code>input array = [0,0,1,1,1,1,1,1,0,1,0,1,1,1]\noutput integer = 3 (count one-sequences)\n</code></pre>\n\n<p>And how to calculate number sequences first and last indexes in input array? For example:</p>\n\n<pre><code>input array = [0,0,1,1,1,1,1,1,0,1,0,1,1,1]\noutput array = [3-8,10-10,12-14] (one first and last place in a sequence)\n</code></pre>\n\n<p>I tried to solve this problem in C with arrays. Thank you!</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 1, "creation_date": 1446649534, "post_id": 33525014, "comment_id": 54831563, "body": "Can you provide an example of the args given? Also, does the school use the same platform as you at home, and did you take the executable to the school or did you compile it there. Were you able to debug?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1446652566, "post_id": 33525014, "comment_id": 54833850, "body": "@MrLister What is CS?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1446654433, "post_id": 33525014, "comment_id": 54835203, "body": "@MrLister In your context.:)"}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1446654510, "post_id": 33525014, "comment_id": 54835256, "body": "@VladfromMoscow Wait, you mean my profile. C#, or C Sharp."}, {"owner": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "edited": false, "score": 0, "creation_date": 1446656824, "post_id": 33525014, "comment_id": 54836952, "body": "the program should be run like ./program_name 262262 50 1000"}, {"owner": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "edited": false, "score": 0, "creation_date": 1446656903, "post_id": 33525014, "comment_id": 54837016, "body": "Also, i dont know what platform the school uses. It is just an unix system that is all i know."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "edited": false, "score": 0, "creation_date": 1446657025, "post_id": 33525360, "comment_id": 54837102, "body": "Having a little trouble understanding your code. For the parameter, why is there two stars?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "edited": false, "score": 1, "creation_date": 1446657139, "post_id": 33525360, "comment_id": 54837183, "body": "@JohnDoe To change an argument you have to pass it by reference to a function. Otherwise function parameters are its local variables that initialized by copies of the values of arguments."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "edited": false, "score": 0, "creation_date": 1446657288, "post_id": 33525360, "comment_id": 54837277, "body": "@JohnDoe  Consider for example void f( int *x ) { *x = 10; } int main( void ) { int x; f( &amp;x ); printf( &quot;%d\\n&quot;, x ); }"}, {"owner": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "edited": false, "score": 0, "creation_date": 1446658538, "post_id": 33525360, "comment_id": 54838140, "body": "Okay, I get the example. Just to make sure though. (**head ) means I am passing a pointer to the pointer named head?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "edited": false, "score": 0, "creation_date": 1446658700, "post_id": 33525360, "comment_id": 54838252, "body": "@JohnDoe Yes. In the function the head can be changed for example when  it is initially equal to NULL or an element is inserted before it. So you have to pass it to the function by reference. Otherwise the function will deal with a copy of the head and the original head will not be changed."}, {"owner": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "edited": false, "score": 0, "creation_date": 1446677942, "post_id": 33525360, "comment_id": 54848939, "body": "Thank you for clearing that up. Really appreciate it."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1446650098, "creation_date": 1446650098, "answer_id": 33525360, "question_id": 33525014, "link": "https://stackoverflow.com/questions/33525014/linked-list-issue-in-c/33525360#33525360", "title": "Linked list issue in C", "body": "<p>Your function </p>\n\n<ol>\n<li>has undefined behaviour because in some cases it returns nothing and</li>\n<li>in the main you did not reassign the head <code>dummy</code>. So it is not\nchanged.</li>\n</ol>\n\n<p>The function can look the following way</p>\n\n<pre><code> node_t* insertNodeSorted( node_t **head, int x )\n {\n    node_t *p = ( node_t * )malloc( sizeof( node_t ) );\n\n    if ( p == NULL )\n    {\n            printf( \"Failed to create a new node.\\n\" );\n    }//end if\n\n    else\n    {  \n        p-&gt;num = x;\n\n        if ( *head == NULL || x &lt; ( *head )-&gt;num )\n        {\n            p-&gt;next = *head;\n            *head = p;\n        }\n        else\n        {\n            node_t *current = *head;\n            while ( current-&gt;next != NULL &amp;&amp; !( x &lt; current-&gt;next-&gt;num ) )\n            {\n                current = current-&gt;next;\n            }\n\n            p-&gt;next = current-&gt;next;\n            current-&gt;next = p;\n        }\n    }\n\n    return p;  \n}\n</code></pre>\n\n<p>And the function must be called like</p>\n\n<pre><code>insertNodeSorted( &amp;dummy, a );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38, "user_id": 1879528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/461dc5e52679926365db9baf3810017e?s=128&d=identicon&r=PG", "display_name": "NickOverflow", "link": "https://stackoverflow.com/users/1879528/nickoverflow"}, "is_accepted": false, "score": 0, "last_activity_date": 1446651438, "creation_date": 1446651438, "answer_id": 33525865, "question_id": 33525014, "link": "https://stackoverflow.com/questions/33525014/linked-list-issue-in-c/33525865#33525865", "title": "Linked list issue in C", "body": "<p>Since it's homework I will not give you the full answer.... but look at what is going on with main's dummy, and the local value of head inside insertNodeSorted.  </p>\n\n<p>If you are just using gcc and no debugger... add more printfs it'll help a ton...</p>\n"}], "owner": {"reputation": 17, "user_id": 5525264, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b16502e989a3ca895ff4f7d25d2bd8c5?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5525264/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1446651438, "creation_date": 1446649069, "question_id": 33525014, "link": "https://stackoverflow.com/questions/33525014/linked-list-issue-in-c", "title": "Linked list issue in C", "body": "<p>I have to generate random numbers and put them in a linked list sorted. my code runs fine on my home computer on cygwin, however when I run it on the schools system, i keep getting that the list is empty. Not sure what the issue is.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\ntypedef struct node{\n    int num;\n    struct node *next;\n}node_t;\n\nnode_t* insertNodeSorted(node_t *head, int x);\nvoid printList(node_t *head);\nvoid deleteList(node_t *head);\n\nint main(int argc, char *argv[])\n{\n    node_t *dummy;\n    int counter = 1;\n    int a;\n\n    if(argc != 4)\n    {\n            printf(\"Error. Exiting program...\");\n            exit(1);\n    }//end if\n\n    //seed random number\n    srandom(atoi(argv[1]));\n    dummy = NULL;\n\n    while(counter &lt; atoi(argv[2]))\n    {\n            a = random() % (atoi(argv[3]) + 1);\n\n            printf(\"%d \" ,a);\n\n            insertNodeSorted(dummy, a);\n\n            counter++;\n    }//end while\n\n    printf(\"\\n\\n\");\n    printList(dummy);\n\n    deleteList(dummy);\n\n    return 0;\n\n\n\n }\n\n node_t* insertNodeSorted(node_t *head, int x)\n {\n    if(head == NULL)\n    {\n            head = (node_t *)malloc(sizeof(node_t));\n            if(head == NULL)\n            {\n                    printf(\"Failed to create head node\");\n                    return head;\n            }//end if\n    head-&gt;num = x;\n    head-&gt;next = NULL;\n    return head;\n    }//end if\n\n    node_t *p;\n\n    p = (node_t*)malloc(sizeof(node_t));\n    if(p == NULL)\n    {\n            printf(\"Failed to create a new node.\");\n            return p;\n    }//end if\n\n    p-&gt;num = x;\n    p-&gt;next = NULL;\n\n    if(x &lt; head-&gt;num)\n    {\n            p-&gt;next = head;\n            return p;\n    }//end if\n\n    node_t *q, *r;\n    q = head;\n    while(q != NULL &amp;&amp; q-&gt;num &lt;= x)\n    {\n            r = q;\n            q = q-&gt;next;\n    }//end while\n    p-&gt;next = q;\n    r-&gt;next = p;\n\n }\n\n void printList(node_t *head)\n {\n    node_t *p;\n\n    if(head == NULL)\n    {\n            printf(\"List is empty\");\n            exit(1);\n    }//end if\n\n    p = head-&gt;next;\n    while(p != NULL)\n    {\n            printf(\"%d \",p-&gt;num);\n            p = p-&gt;next;\n    }//end while\n }\n\n void deleteList(node_t *head)\n {\n    node_t *p;\n    while(p != NULL)\n    {\n            p = head-&gt;next;\n            free(head);\n            head = p;\n    }//end while\n }\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 2, "creation_date": 1446648207, "post_id": 33524651, "comment_id": 54830528, "body": "You haven&#39;t allocated any memory for <code>nums</code>. Also, this doesn&#39;t look like C++."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446648212, "post_id": 33524651, "comment_id": 54830529, "body": "the <code>nums</code> pointer is not initialized and it points to some random location."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1446648409, "post_id": 33524651, "comment_id": 54830681, "body": "@MichaelWalz  it&#39;s actually initialized to zero, as all global scope variables are by definition."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1446648454, "post_id": 33524651, "comment_id": 54830714, "body": "@RussSchultz, correct, but 0 is still not a valid memory address."}, {"owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "reply_to_user": {"reputation": 15799, "user_id": 1195273, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/392b9a49e8a308036d37c9d07e9c7d9b?s=128&d=identicon&r=PG", "display_name": "crush", "link": "https://stackoverflow.com/users/1195273/crush"}, "edited": false, "score": 0, "creation_date": 1446648588, "post_id": 33524651, "comment_id": 54830813, "body": "@crush Thanks for pointing that out."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446648974, "post_id": 33524651, "comment_id": 54831138, "body": "@MichaelWalz  Actually, 0 is a valid memory address.   ARM processors, for example, generally have their vector tables out of reset at 0, and there&#39;s stuff there that needs to be read by the processor and/or boot code.  By convention, however, most systems try to not use it so the whole NULL pointer expectations work, and most larger systems (i.e. linux and windows) set up the MMU so that accesses cause exceptions."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1446649711, "post_id": 33524651, "comment_id": 54831694, "body": "@RussSchultz: The reset vector is not part of the C language. Even more, as the SP is not initialised at that time. An environment might make address 0 very well invalid. However, you are right, a null pointer is not the same as address <code>0</code> either and you are right, the C standard does not reserve any specific address value."}], "answers": [{"comments": [{"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1446648823, "post_id": 33524823, "comment_id": 54831006, "body": "Could also use <code>calloc(10,sizeof(int))</code> for a nicely initialized array."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1446648565, "creation_date": 1446648565, "answer_id": 33524823, "question_id": 33524651, "link": "https://stackoverflow.com/questions/33524651/pointer-error-with-c/33524823#33524823", "title": "Pointer Error with C", "body": "<p>You need this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint *nums;\n\nvoid main() {    \n    nums = malloc(10 * sizeof(int));    // &lt;&lt;&lt; allocate memory for 10 ints\n\n    printf(\"Enter 10 numbers\");\n    for (int i = 0;i &lt; 10;i++) {\n        scanf_s(\"%d\", (nums + i));      // &lt;&lt;&lt; (nums + i) is already a pointer\n    }\n    printf(\"Number are: \");\n    for (int i = 0;i &lt; 10; i++) {\n        printf(\" %d,\", *(nums + i));\n    }\n}\n</code></pre>\n\n<p>You should read about memory allocation.</p>\n\n<p>BTW instead of writing <code>*(nums + i)</code> you can write <code>nums[i]</code> which is strictly equivalent but more readable.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1446649150, "last_edit_date": 1446649150, "creation_date": 1446648574, "answer_id": 33524828, "question_id": 33524651, "link": "https://stackoverflow.com/questions/33524651/pointer-error-with-c/33524828#33524828", "title": "Pointer Error with C", "body": "<p>You have to reserve memory where you are going to store entered values.</p>\n\n<p>Take into account that this statement </p>\n\n<pre><code>scanf_s(\"%d\", *(nums + i));\n</code></pre>\n\n<p>is also wrong. The argument of <code>scanf</code> must be a pointer.</p>\n\n<p>The program could look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N 10\n\nint main( void ) \n{\n    int nums[N];\n\n    printf( \"Enter %d numbers: \", N );\n\n    for ( int i = 0; i &lt; N; i++) \n    {\n        scanf_s( \"%d\", nums + i );\n    }\n\n    printf( \"Number are: \" );\n\n    for ( int i = 0; i &lt; N; i++ ) \n    {\n        printf(\" %d,\", *( nums + i) );\n    }\n}\n</code></pre>\n\n<p>Another approach is to allocate the array dynamically.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define N 10\n\nint main( void ) \n{\n    int *nums = malloc( N * sizeof( int ) );\n\n    printf( \"Enter %d numbers: \", N );\n\n    for ( int i = 0; i &lt; N; i++) \n    {\n        scanf_s( \"%d\", nums + i );\n    }\n\n    printf( \"Number are: \" );\n\n    for ( int i = 0; i &lt; N; i++ ) \n    {\n        printf(\" %d,\", *( nums + i) );\n    }\n\n    free( nums );\n}\n</code></pre>\n\n<p>As for this error</p>\n\n<pre><code>Exception thrown at 0x00007FF698C7190C in Assignment 1D.exe: 0xC0000005:\n Access violation reading location 0x0000000000000000\n</code></pre>\n\n<p>then as you did not allocate memory then the pointer <code>nums</code> as it has the static storage duration was initialized by the system by zero. And the error message says that you are trying to access memory at address 0 (0x0000000000000000)</p>\n"}], "owner": {"reputation": 227, "user_id": 3149152, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100001080502383/picture?type=large", "display_name": "Logan", "link": "https://stackoverflow.com/users/3149152/logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 33524828, "answer_count": 2, "score": 0, "last_activity_date": 1446649150, "creation_date": 1446648072, "last_edit_date": 1446648423, "question_id": 33524651, "link": "https://stackoverflow.com/questions/33524651/pointer-error-with-c", "title": "Pointer Error with C", "body": "<p>I have just started experimenting with pointers in C using Visual Studio IDE.</p>\n\n<p>I have written this simple program in an attempt to get 10 numbers from the user, store them in memory by using pointers and imitating a standard 1D array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint *nums;\n\nvoid main() {\n    printf(\"Enter 10 numbers\");\n    for (int i = 0;i &lt; 10;i++) {\n        scanf_s(\"%d\", *(nums + i));\n    }\n    printf(\"Number are: \");\n    for (int i = 0;i &lt; 10; i++) {\n        printf(\" %d,\", *(nums + i));\n    }\n}\n</code></pre>\n\n<p>However, I'm getting this error:</p>\n\n<blockquote>\n  <p>Exception thrown at 0x00007FF698C7190C in Assignment 1D.exe: 0xC0000005:<br>\n  Access violation reading location 0x0000000000000000.</p>\n</blockquote>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c++", "c", "linux", "ubuntu", "segmentation-fault"], "comments": [{"owner": {"reputation": 832, "user_id": 1153349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6ad04bff031b8e9268cd4e2e2930d182?s=128&d=identicon&r=PG", "display_name": "Ragav", "link": "https://stackoverflow.com/users/1153349/ragav"}, "edited": false, "score": 0, "creation_date": 1471847613, "post_id": 33524602, "comment_id": 65493398, "body": "DO you remember how you fixed this issue. I am facing same issue here"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4374638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e172e8491a610384ba820c6343eae6?s=128&d=identicon&r=PG&f=1", "display_name": "AdamsP", "link": "https://stackoverflow.com/users/4374638/adamsp"}, "edited": false, "score": 0, "creation_date": 1446654006, "post_id": 33525581, "comment_id": 54834873, "body": "I have did it, and still no result."}, {"owner": {"reputation": 17, "user_id": 4374638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e172e8491a610384ba820c6343eae6?s=128&d=identicon&r=PG&f=1", "display_name": "AdamsP", "link": "https://stackoverflow.com/users/4374638/adamsp"}, "edited": false, "score": 0, "creation_date": 1446654649, "post_id": 33525581, "comment_id": 54835359, "body": "I am sorry, for double post, couldn&#39;t edit post after 5 mins.  I have added user to group dialout, but this did not solve my problem. My user is also in group udev, still without result. Also i have tried to remove modemmanager package from system, another fail.  This device in not visible at /media/  .  It is not storage device, just interface to directly cominicate device. It is this chip : <a href=\"http://www.ftdichip.com/Products/ICs/FT2232D.htm\" rel=\"nofollow noreferrer\">link</a>.  The device is fully operational, under windows, with the same code it runs perfectly."}, {"owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "reply_to_user": {"reputation": 17, "user_id": 4374638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e172e8491a610384ba820c6343eae6?s=128&d=identicon&r=PG&f=1", "display_name": "AdamsP", "link": "https://stackoverflow.com/users/4374638/adamsp"}, "edited": false, "score": 0, "creation_date": 1446655622, "post_id": 33525581, "comment_id": 54836053, "body": "Ahhh ok it&#39;s a FTDI chip gotcha gotcha. First just to make sure when you add yourself to a group log out and back in for the changes to take effect. Another guess then would be looking for something like /dev/ttyUSB0 (or similar depending on how many USB devices you have) I would try basically plugging in and out and finding the difference in the /dev/ directory. Try changing the permissions of that device, this would need to be repeated each time the device is plugged in though so it&#39;s not ideal."}, {"owner": {"reputation": 17, "user_id": 4374638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e172e8491a610384ba820c6343eae6?s=128&d=identicon&r=PG&f=1", "display_name": "AdamsP", "link": "https://stackoverflow.com/users/4374638/adamsp"}, "edited": false, "score": 0, "creation_date": 1446709250, "post_id": 33525581, "comment_id": 54858675, "body": "$ ls -l /dev/ | grep ttyUSB crwxrwxrwx  1 root dialout 188,   0 lis  5 08:23 ttyUSB0  $ id -Gn adams adm dialout cdrom sudo dip plugdev lpadmin sambashare  And still nothing, still -8"}], "tags": [], "owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "is_accepted": false, "score": 0, "last_activity_date": 1446650625, "creation_date": 1446650625, "answer_id": 33525581, "question_id": 33524602, "link": "https://stackoverflow.com/questions/33524602/ubuntu-libftdi-priviliges-seg-fault-when-non-root-user-run-program/33525581#33525581", "title": "Ubuntu, libftdi priviliges, seg fault when non-root user run program", "body": "<p>There is a few different ways to fix this but generally it sounds like your user account does not have permission to interface with the USB device. You could add the user to the appropriate group I believe for ubuntu that is dialout so.</p>\n\n<pre><code>sudo usermod -a -G dialout user\n</code></pre>\n\n<p>Alternatively if multiple accounts need to use it but they all should have permissions you could change the filesystem it's mounted to to have full permissions.</p>\n\n<pre><code>sudo chmod 777 /media/drive_name\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4374638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e172e8491a610384ba820c6343eae6?s=128&d=identicon&r=PG&f=1", "display_name": "AdamsP", "link": "https://stackoverflow.com/users/4374638/adamsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 650, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446650625, "creation_date": 1446647915, "last_edit_date": 1592644375, "question_id": 33524602, "link": "https://stackoverflow.com/questions/33524602/ubuntu-libftdi-priviliges-seg-fault-when-non-root-user-run-program", "title": "Ubuntu, libftdi priviliges, seg fault when non-root user run program", "body": "<p>I am trying to write simple program, that uses libftdi, and I have come across a strange problem.</p>\n<p>When running the program as non-root it looks like this:</p>\n<blockquote>\n<p>./BoxDriver\nNaruszenie ochrony pami\u0119ci (zrzut pami\u0119ci)</p>\n</blockquote>\n<p>And in Dmesg the last line I see is:</p>\n<blockquote>\n<p>[ 3320.467864] BoxDriver[4205]: segfault at 0 ip 00007f05c2821f7a sp 00007ffd9c6c9c00 error 4 in libftdi.so.1.20.0[7f05c2820000+7000]</p>\n</blockquote>\n<p>I am using Ubuntu:</p>\n<p>Linux AdamsPC 3.19.0-30-generic #34-Ubuntu SMP Fri Oct 2 22:08:41 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>And FTDI device:</p>\n<p>Bus 001 Device 011: ID 0403:6010 Future Technology Devices International, Ltd FT2232C Dual USB-UART/FIFO IC</p>\n<p>The program runs fine, when it is running as a root:</p>\n<blockquote>\n<p>sudo ./BoxDriver</p>\n<p>OK, started</p>\n</blockquote>\n<p>I have also tried to debug the source code (in eclipse ang gcc, no seg fault occurred), and the problem is with:</p>\n<pre><code>ftdi_usb_open(ftc, 0x0403, 0x6010)\n</code></pre>\n<p>It always returns -8, that stands for : &quot;get product description failed&quot;</p>\n<p>I have searched for any answer, most are about adding user to dialout group, or adding rule to udev, but none of answers I have founded worked.</p>\n<p>Any suggestions are highly appreciated. Thanks</p>\n"}, {"tags": ["c", "arrays", "pointers", "memory"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 9, "creation_date": 1446645391, "post_id": 33523664, "comment_id": 54828486, "body": "<code>data[3]</code> is out of bounds. Array only has indexes 0, 1, and 2."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446647942, "post_id": 33523664, "comment_id": 54830308, "body": "Even if this program didn&#39;t contain the mentioned undefined behavior bug, you could still end up with two pointers pointing at the same location, since these are pointers to <i>constant string literals</i> which you cannot modify. If you have two such literals in your program, both of them <code>&quot;hello&quot;</code> and then point to each literal with an unique pointer, those two literals may still be allocated at the same memory address, because the compiler can tell that they are the same and that they are read-only. This is a compiler optimization called &quot;string pooling&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1446646217, "creation_date": 1446646217, "answer_id": 33524007, "question_id": 33523664, "link": "https://stackoverflow.com/questions/33523664/why-both-the-pointers-show-same-memory-address/33524007#33524007", "title": "Why both the pointers show same memory address", "body": "<p>When you write</p>\n\n<pre><code>  char *data[3] = {};\n</code></pre>\n\n<p>the <code>[3]</code> means \"allocate space for three elements of the array\".\nIt does not mean that you have just created a pointer named\n<code>data[3]</code> (in fact <code>data[3]</code> is not a pointer)\nnor that <code>data[3]</code> is part of the memory that was\njust allocated; rather, the three elements of the memory allocated for\nthe array are <code>data[0]</code>, <code>data[1]</code>, and <code>data[2]</code>,\nwhich are at the memory locations <code>data</code> (0x408738),\n<code>data + 1</code> (0x408739), and <code>data + 2</code> (0x40873a).</p>\n\n<p>If you write</p>\n\n<pre><code>  data[3] == options[0]\n</code></pre>\n\n<p>then <code>data[3]</code> means whatever is at the memory location <code>data + 3</code>,\nwhich is the first thing <em>after</em> the last allocated element of <code>data</code>.\nThe compiler happens to have started the memory allocation \nfor <code>options</code> there, that is, location 0x40873b is where the\nfirst contents of <code>options</code> are to be found.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 1421147, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e75e7c175c61e1daeac0c6888979c231?s=128&d=identicon&r=PG", "display_name": "user1421147", "link": "https://stackoverflow.com/users/1421147/user1421147"}, "edited": false, "score": 0, "creation_date": 1446705406, "post_id": 33524943, "comment_id": 54857037, "body": "Everything Said Above is understood . But what&#39;s the Solution for this problem called &quot;String Pooling&quot; ?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 19, "user_id": 1421147, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e75e7c175c61e1daeac0c6888979c231?s=128&d=identicon&r=PG", "display_name": "user1421147", "link": "https://stackoverflow.com/users/1421147/user1421147"}, "edited": false, "score": 0, "creation_date": 1446736581, "post_id": 33524943, "comment_id": 54876018, "body": "@user1421147: The &quot;string pooling&quot; that Lundin described isn&#39;t a problem; it&#39;s okay to have multiple pointers pointing to the same string literal, since string literals are supposed to be immutable.  However, if you want to have multiple copies of the same string, you&#39;ll need to allocate memory for each copy, such as <code>char *copy = malloc( strlen( str ) + 1); if ( copy ) strcpy( copy, str );</code>"}, {"owner": {"reputation": 19, "user_id": 1421147, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e75e7c175c61e1daeac0c6888979c231?s=128&d=identicon&r=PG", "display_name": "user1421147", "link": "https://stackoverflow.com/users/1421147/user1421147"}, "edited": false, "score": 0, "creation_date": 1446796213, "post_id": 33524943, "comment_id": 54902023, "body": "What I want is that my string data should not overlap. I want data[3] and options[0] to store different data instead pointing to same memory location.  Can I control in which memory location I can store which data ?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 19, "user_id": 1421147, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e75e7c175c61e1daeac0c6888979c231?s=128&d=identicon&r=PG", "display_name": "user1421147", "link": "https://stackoverflow.com/users/1421147/user1421147"}, "edited": false, "score": 0, "creation_date": 1446822312, "post_id": 33524943, "comment_id": 54917389, "body": "@user1421147: As it is currently declared, <code>data[3]</code> is past the end of your <code>data</code> array (3 elements with indices 0, 1, and 2).  You shouldn&#39;t be trying to store <i>anything</i> there.  Do you mean you don&#39;t want <code>data[2]</code> and <code>options[0]</code> to point to the same memory locations?"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1446650047, "last_edit_date": 1446650047, "creation_date": 1446648885, "answer_id": 33524943, "question_id": 33523664, "link": "https://stackoverflow.com/questions/33523664/why-both-the-pointers-show-same-memory-address/33524943#33524943", "title": "Why both the pointers show same memory address", "body": "<p>It <em>looks</em> like the compiler laid your objects out as follows:</p>\n\n<pre><code>          +---+\n    data: |   | data[0] \n          +---+\n          |   | data[1]\n          +---+ \n          |   | data[2] &lt;-- last element of data array\n          +---+\noptions:  |   | options[0], data[3]\n          +---+\n          |   | options[1], data[4]\n          +---+\n          |   | options[2], data[5]\n          +---+ \n          |   | options[3], data[6] &lt;-- last element of options array\n          +---+\n</code></pre>\n\n<p>Your <code>data</code> array contains 3 elements, indexed from 0 to 2.  When you access <code>data[3]</code>, you're accessing an object one past the end of the <code>data</code> array, and it <em>just so happens</em> to be the first object of the <code>options</code> array.  </p>\n\n<p>Note that attempting to read an object one past the end of an array invokes undefined behavior; C doesn't do any bounds checking on array accesses, so doing this won't raise an OutOfBounds exception or anything like that.  In this particular case, you got a reasonable-looking value because the object following the last element of the <code>data</code> array has the same type as that element (<code>char *</code>).  You could theoretically iterate through the entire <code>options</code> array using <code>data</code> (as shown above), although that will only \"work\" in this specific case; if you add another variable or change the code, the compiler could change the order in which things are laid out in memory, and this would suddenly not \"work\" anymore.  </p>\n"}], "owner": {"reputation": 19, "user_id": 1421147, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e75e7c175c61e1daeac0c6888979c231?s=128&d=identicon&r=PG", "display_name": "user1421147", "link": "https://stackoverflow.com/users/1421147/user1421147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1446650047, "creation_date": 1446645306, "question_id": 33523664, "link": "https://stackoverflow.com/questions/33523664/why-both-the-pointers-show-same-memory-address", "title": "Why both the pointers show same memory address", "body": "<pre><code>.....\n// Some code\nchar *options[] = {\"\\nDATA:\",\"\\nSUBJECT:\",\"\\nMAILFROM:\",\"\\nRCPTO:\"};\nchar *data[3] = {};\n</code></pre>\n\n<p>I am initializing this array of pointers.</p>\n\n<p>But when I try to access each member of array of pointers, I can see that \noptions[0]  = data[3] \n   0x40873b = 0x40873b\nthey both point to same memory location.</p>\n\n<p>Even I have declared 'options' array before the 'data' array.\nSo How to resolve this.\nHow can be sure that they are at different memory location and store the contents properly.without overlapping , different data at 2 different location.</p>\n"}, {"tags": ["c", "parsing", "text", "tags"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1446644592, "post_id": 33523405, "comment_id": 54827954, "body": "Try to debug it first... using your favorite debugger."}, {"owner": {"reputation": 11569, "user_id": 5015207, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3GiGl.jpg?s=128&g=1", "display_name": "B&#246; macht Blau", "link": "https://stackoverflow.com/users/5015207/b%c3%b6-macht-blau"}, "edited": false, "score": 0, "creation_date": 1446644704, "post_id": 33523405, "comment_id": 54828023, "body": "I think your input statement contains no tags (just a single &quot;&gt;&quot;). Please edit the question to fix the input statement."}, {"owner": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "edited": false, "score": 0, "creation_date": 1446644861, "post_id": 33523405, "comment_id": 54828128, "body": "0X0nosugar - Please check the edited part."}, {"owner": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446645258, "post_id": 33523405, "comment_id": 54828394, "body": "@Michael Walz Please check the edited part."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1446647513, "post_id": 33523405, "comment_id": 54830012, "body": "BTW, you could&#39;ve put your opening/close tags in a code block: <code>&lt;person&gt;Mark Z&lt;&#47;person&gt;</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1446651656, "post_id": 33523405, "comment_id": 54833170, "body": "If you want to do this in C, why did you add tag for <code>c++</code>?  They are different languages, for example, C++ has <code>std::string</code> class and C doesn&#39;t.  I suggest you remove the C++ tag in your post."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "edited": false, "score": 0, "creation_date": 1446645755, "post_id": 33523762, "comment_id": 54828746, "body": "How to do that ? Can you please show in code ? I am not able to figure this out."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "edited": false, "score": 0, "creation_date": 1446645994, "post_id": 33523762, "comment_id": 54828908, "body": "You need to keep calling <code>strtok</code>, with <code>NULL</code> as the first argument, until you have consumed the entire line.  Only then should you read a new line and reset <code>strtok</code> by passing a non-<code>NULL</code> first argument."}, {"owner": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "edited": false, "score": 0, "creation_date": 1446646116, "post_id": 33523762, "comment_id": 54828981, "body": "Tried. Getting errors. Please show in code. I am new to this and not able to figure out anything."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "edited": false, "score": 1, "creation_date": 1446647307, "post_id": 33523762, "comment_id": 54829863, "body": "See my edit above.  This is just a sample, not a real solution.  You will need spend some time working out the details for yourself."}], "tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 1, "last_activity_date": 1446647251, "last_edit_date": 1446647251, "creation_date": 1446645554, "answer_id": 33523762, "question_id": 33523405, "link": "https://stackoverflow.com/questions/33523405/how-to-parse-data-between-tags-from-a-text-file-in-c/33523762#33523762", "title": "How to parse data between tags from a text file in C", "body": "<p>Your <code>fgets()</code> call is reading the entire line.  Then you call <code>getfield()</code> and print the result.  You then discard the rest of what you read, try to read more, there isn't any more, and you exit your loop.  You need to keep looping as long as you have unprocessed data in <code>line</code>.</p>\n\n<p>Edit:  Here's some sample code to get you started:</p>\n\n<pre><code>int main()\n{\n    char line[500000];\n    while (fgets(line, 500000, stdin))\n    {\n        char *arg = line;\n        const char *tok;\n        while ((tok = getfield(arg, 2)) != NULL) {\n            printf(\"%s\\n\", tok);\n            arg = NULL;\n        }\n    }\n}\n</code></pre>\n\n<p>But note that this isn't a real solution.  For one, it will give you the text outside of the tags as well as text inside the tags, so you will need to skip that.  For another, it won't really work properly if your input file contains more than one line.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "edited": false, "score": 0, "creation_date": 1446657906, "post_id": 33526503, "comment_id": 54837692, "body": "Applied your approach, still in same position. It is reading the data between the first tags only i.e, It is only printing Mark Zuckerberg. Can same one edit the code please ?"}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "reply_to_user": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "edited": false, "score": 1, "creation_date": 1446658962, "post_id": 33526503, "comment_id": 54838419, "body": "I think you don&#39;t understand my code. With the same input than you it will prints &quot;Mark Zuckerberg&quot; + &quot;USA&quot; + &quot;Facebook&quot; (really coded an ran on my machine). It is only a print, of course. If you want all the elements you have return them. In your code you seems to always ask for the &quot;2&quot;nd element..."}], "tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": false, "score": 2, "last_activity_date": 1446659662, "last_edit_date": 1446659662, "creation_date": 1446653099, "answer_id": 33526503, "question_id": 33523405, "link": "https://stackoverflow.com/questions/33523405/how-to-parse-data-between-tags-from-a-text-file-in-c/33526503#33526503", "title": "How to parse data between tags from a text file in C", "body": "<p>Your <code>getfield</code> don't do what you want I guess. On example string (remplacing parenthesis) your <code>for</code> loop starts <code>strtok</code> will cut at the first \">\" (<code>strtok</code> uses any of the characters as delimiter) so the one after the 1st \"PERSON\". After that you only cut for \">\\n\" so at end of this tag. With a big enough <code>num</code> it would give (inside the loop):</p>\n\n<pre><code>&lt;PERSON\n Mark Zuckerberg \n/PERSON&gt; is a entrepreneur from \nLOCATION&gt; USA \n/LOCATION&gt;. He is also the CEO of \nORGANIZATION&gt; Facebook \n/ORGANIZATION&gt;\n</code></pre>\n\n<p>You should alternate searches: search for closing tag (>), then search for opening tag (&lt;): in beetween is the content of 1st tag. Then skip the closing tag and start again the same until the end. Something like:</p>\n\n<pre><code>char *gf(char *line, int num) {\n  char *n1, *n2;\n  // comments are for the 1st loop\n  // search end of 1st tag (opening)\n  n1 = strtok(line, \"&gt;\\n\");\n  while(n1) {\n    // search begin of 2nd tag (correp. closing)\n    n2 = strtok(NULL, \"&lt;\");\n    // this one is good, shall we return it?\n    if (num == 0) {\n      return(n2);\n    }\n    printf(\"Found: %s\\n\", n2);\n    // search end 2nd tag (have to skip it)\n    n1 = strtok(NULL, \"&gt;\\n\");\n    // search end of 3rd tag (opening), then loop (same situation)\n    n1 = strtok(NULL, \"&gt;\\n\");\n  }\n  return NULL;\n}\n</code></pre>\n\n<p>Note that this code is not very nice. If you have \">\" or \"&lt;\" inside regular text it will go wrong (as do you own code, BTW). And it don't stop properly if string don't ends with a \\n.</p>\n\n<p>Note bis: whatever if you need a robust approach you will have to <em>read</em> tags. I mean find a tag (stuff beetween \"&lt;\" and \">\"), then find the corresponding closing tag (same, but with the / and the same content), and then only get the text inside or generate an error.</p>\n\n<p>EDIT: I changed the function so that it returns the <code>num</code>th element. You will now have to deal with a <code>main()</code> function able to call this function several times, with increasing values of <code>num</code>, storing (or printing) the result until getting NULL answer.\nAs home work you will have to find how to manage the main string (line) in <code>main</code> so that successive calls are possible (else you will really only get the first tag) :)</p>\n"}, {"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1446688175, "post_id": 33531206, "comment_id": 54851994, "body": "The tags are supposed to be standard XML tags, delimited by angle brackets, not parentheses.  The edit at the bottom of the post explained that."}, {"owner": {"reputation": 31, "user_id": 5522119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e11804168356f79565ab4384883e3bc?s=128&d=identicon&r=PG", "display_name": "Mutex202", "link": "https://stackoverflow.com/users/5522119/mutex202"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1446689994, "post_id": 33531206, "comment_id": 54852423, "body": "Oops!Sorry didn&#39;t see that will edit the code. Anyways thanks Tom Karzes for pointing it out."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1446726620, "post_id": 33531206, "comment_id": 54868968, "body": "Nice to answer the question quite literally, but I really don&#39;t see why the top test is necessary. Apart from being unnecessary, it also breaks for <b>all</b> other characters than the supplied list. The <code>&lt;..&gt;</code> could simply be moved up as the only necessary test. It may benefit from an end-of-line check in case of a missing <code>&gt;</code>."}], "tags": [], "owner": {"reputation": 31, "user_id": 5522119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e11804168356f79565ab4384883e3bc?s=128&d=identicon&r=PG", "display_name": "Mutex202", "link": "https://stackoverflow.com/users/5522119/mutex202"}, "is_accepted": false, "score": 0, "last_activity_date": 1446690269, "last_edit_date": 1446690269, "creation_date": 1446668218, "answer_id": 33531206, "question_id": 33523405, "link": "https://stackoverflow.com/questions/33523405/how-to-parse-data-between-tags-from-a-text-file-in-c/33531206#33531206", "title": "How to parse data between tags from a text file in C", "body": "<p><strong>EDIT:Changed <code>(</code> and <code>)</code> this to <code>&lt;</code> and <code>&gt;</code> respectiveley in the code and in the explanation. Thanks Tom.</strong></p>\n\n<p>Here is the Solution. Try to Understand the code. Also, feel free to modify it to your needs. Basically, what you need to do is scan for the tags <code>&lt;&gt;</code> or/and <code>&lt;/&gt;</code> by scanning for characters <code>&lt;</code> and <code>&gt;</code>. When you encounter the character <code>&lt;</code> increment your index till you encounter the character <code>&gt;</code>.Once you encounter <code>&gt;</code> character then start copying the character following the <code>&gt;</code> character till you encounter another <code>&lt;</code> character and then repeat the process till you reach the null terminating Character <code>'\\0'</code>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n//#pragma warning(disable : 4996)\n\nvoid removeTags(char inpData[], int dataLen);\n\nint main()\n{\n   char letter, fileData[400];\n   int numLetters;\n   FILE *pfile;\n   pfile = fopen(\"test.txt\", \"r\");\n\n   if (pfile == NULL)\n   {\n     printf(\"Error!Can not open file\");\n   }\n   else \n   {\n    numLetters = 0;\n    while ((letter = fgetc(pfile)) != EOF) \n    {\n        fileData[numLetters] = letter;\n        numLetters++;\n    }\n    fileData[numLetters] = '\\0';\n    printf(\"File Data:\\n\\n\");\n    printf(\"%s\", fileData);\n    printf(\"\\nRemoving Tags.....\\n\");\n    removeTags(fileData,numLetters);\n}\n\nreturn 0;\n}\n\nvoid removeTags(char inpData[],int inpLen)\n{\n   char character,temp[400];\n   int index = 0,tindex=0;\n\n   while (inpData[index] != '\\0')\n   {\n      if ((inpData[index] &gt;= 'A' &amp;&amp; inpData[index] &lt;= 'Z') || (inpData[index] &gt;= 'a' &amp;&amp; inpData[index] &lt;= 'z') || inpData[index] == ' ' || inpData[index] == '.')\n      {\n        temp[tindex] = inpData[index];\n        index++;\n        tindex++;\n      }\n      else if (inpData[index] == '&lt;')\n      {\n        while (inpData[index] != '&gt;')\n        {\n            index++;\n        }\n        index++;\n        temp[tindex] = ' ';\n        if (tindex &gt; 0)\n        {\n            tindex++;\n        }\n\n    }\n    else\n    {\n        break;\n    }\n}\ntemp[tindex] = '\\0';\nprintf(\"%s\", temp);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5524897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4fa29c2bb93cc4aec4bf61d7690567d?s=128&d=identicon&r=PG&f=1", "display_name": "babai.calcutta", "link": "https://stackoverflow.com/users/5524897/babai-calcutta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1446690269, "creation_date": 1446644451, "last_edit_date": 1446658149, "question_id": 33523405, "link": "https://stackoverflow.com/questions/33523405/how-to-parse-data-between-tags-from-a-text-file-in-c", "title": "How to parse data between tags from a text file in C", "body": "<p>I want to print the data between tags from a text file using C.</p>\n\n<p>Input statement : \n(PERSON) Mark Zuckerberg (/PERSON) is a entrepreneur from (LOCATION) USA (/LOCATION). He is also the CEO of (ORGANIZATION) Facebook (/ORGANIZATION).</p>\n\n<p>Output: Mark Zuckerberg USA Facebook.</p>\n\n<p>My Program code is :</p>\n\n<pre><code>    const char* getfield(char* line, int num)\n    {\n        const char* tok;\n        for (tok = strtok(line, \"/&gt;\");\n                tok &amp;&amp; *tok;\n                tok = strtok(NULL, \"&lt;\\n\"))\n        {\n            if (!--num)\n                return tok;\n        }\n        return NULL;\n    }\n\n    int main()\n    {\n        char line[500000];\n        while (fgets(line, 500000, stdin))\n        {\n            char* tmp = strdup(line);\n            printf(\" %s\\n\", getfield(tmp, 2));\n            free(tmp);\n        }\n    }\n</code></pre>\n\n<p>It is only printing Mark Zuckerberg. Other data between tags are not showing ? Can someone please help where I went wrong ? I have just started learning file processing in C, so guidance is highly appreciated. Thanks.</p>\n\n<p>EDIT: Please replace \"(\" by \"&lt;\" and \")\" by \"/>\".</p>\n"}, {"tags": ["c", "arrays", "integer"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1446643955, "post_id": 33523160, "comment_id": 54827514, "body": "Is this the <i>only</i> integer you need, or do you need a dynamic way of doing this?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446644014, "post_id": 33523160, "comment_id": 54827561, "body": "What did you try so far?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1446644028, "post_id": 33523160, "comment_id": 54827570, "body": "You can use modulo and division to get each multiple of 10."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1446644110, "post_id": 33523160, "comment_id": 54827633, "body": "@JohnnyMopp: that is indeed exactly how you do it, but you do get the least significant digit first using that method, and getting the size of the array is interesting too."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644352, "post_id": 33523160, "comment_id": 54827783, "body": "It&#39;s almost answerable now. Two more things: 1) is the number allowed to be negative, 2) what happens if int[6] is insufficient, or too big to hold the data."}, {"owner": {"reputation": 57, "user_id": 3057880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cbUhm.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3057880/anonymous"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644947, "post_id": 33523160, "comment_id": 54828197, "body": "@Bathsheba I am only allowed to use positive numbers. And the fact that the array is either insufficient or too big to hold the data is not taken into account in this scenario."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446645127, "post_id": 33523160, "comment_id": 54828319, "body": "Then use an <code>unsigned</code> for <code>my_num</code>: this will greatly simplify the implementation."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3057880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cbUhm.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3057880/anonymous"}, "edited": false, "score": 0, "creation_date": 1446644051, "post_id": 33523185, "comment_id": 54827591, "body": "So lets say you have an integer in your main declared <code>int my_num = 967892;</code> and you have an array <code>int a[6];</code>. How would you put that integer into the array so it looks like <code>{ 9, 6, 7, 8, 9, 2 }</code>?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644139, "post_id": 33523185, "comment_id": 54827656, "body": "That comment is better than the question text. Could you move it there too?"}, {"owner": {"reputation": 57, "user_id": 3057880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cbUhm.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3057880/anonymous"}, "edited": false, "score": 0, "creation_date": 1446646281, "post_id": 33523185, "comment_id": 54829107, "body": "So would something like this work  <code>for (int i = 0; i &lt; size; ++i, my_num &#47;= 10){         a[(size - 1) - i] = my_num % 10;}</code>"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 2, "last_activity_date": 1446644392, "last_edit_date": 1446644392, "creation_date": 1446643763, "answer_id": 33523185, "question_id": 33523160, "link": "https://stackoverflow.com/questions/33523160/how-do-i-populate-an-array-with-the-digits-of-a-given-integer-in-c/33523185#33523185", "title": "How do I populate an array with the digits of a given integer in C?", "body": "<p>Perhaps like this:</p>\n\n<pre><code>const unsigned char digits[] = { 9, 6, 7, 8, 9, 2 };\n</code></pre>\n\n<p>but there are many things that are unclear with your question, of course.</p>\n\n<p>If you want to do this at runtime, as your comment now makes me believe, you need more code of course. Also, it will be tricky to make the array \"fit\" the number exactly, since that requires runtime-sizing of the array.</p>\n\n<p>The core operation is <code>% 10</code>, which when applied to a number results in the rightmost digit (the \"ones\" digit).</p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1446644157, "creation_date": 1446644157, "answer_id": 33523316, "question_id": 33523160, "link": "https://stackoverflow.com/questions/33523160/how-do-i-populate-an-array-with-the-digits-of-a-given-integer-in-c/33523316#33523316", "title": "How do I populate an array with the digits of a given integer in C?", "body": "<p>If this shall be done dynamically:</p>\n\n<ol>\n<li>Determine the number of digits as <code>N</code>.</li>\n<li>Allocate an array large enough (<code>&gt;=N</code>) to hold the digits.</li>\n<li>Loop <code>N</code> times chopping of the digits and storing them in the array allocated under 2.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 35869, "user_id": 7512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d064a7aca29011d3246302b27c41f4d9?s=128&d=identicon&r=PG", "display_name": "slim", "link": "https://stackoverflow.com/users/7512/slim"}, "is_accepted": false, "score": 0, "last_activity_date": 1446644563, "last_edit_date": 1446644563, "creation_date": 1446644172, "answer_id": 33523325, "question_id": 33523160, "link": "https://stackoverflow.com/questions/33523160/how-do-i-populate-an-array-with-the-digits-of-a-given-integer-in-c/33523325#33523325", "title": "How do I populate an array with the digits of a given integer in C?", "body": "<p>I assume you want to achieve something like this:</p>\n\n<pre><code>int arr[SOME_SIZE];\nint len = int_to_array(arr,421);\nassert(len == 3);\nassert(arr[0] == 4);\nassert(arr[1] == 2);\nassert(arr[1] == 1);\n</code></pre>\n\n<p>Since this is probably a homework problem, I won't give the full answer, but you'll want a loop, and you'll want a way to get the last decimal digit from an int, and an int with the last digit removed.</p>\n\n<p>So here's a hint:</p>\n\n<pre><code>421 / 10 == 42\n421 % 10 == 1\n</code></pre>\n\n<p>If you want to create an array of the right length, there are various approaches:</p>\n\n<ul>\n<li>you could loop through twice; once to count digits (then create the array); once again to populate</li>\n<li>you could populate an array that's bigger than you need, then create a new array and copy in as many members as necessary</li>\n<li>you could populate an array that's bigger than you need, then use <code>realloc()</code> or similar (a luxury we didn't used to have!)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 0, "last_activity_date": 1446644281, "creation_date": 1446644281, "answer_id": 33523349, "question_id": 33523160, "link": "https://stackoverflow.com/questions/33523160/how-do-i-populate-an-array-with-the-digits-of-a-given-integer-in-c/33523349#33523349", "title": "How do I populate an array with the digits of a given integer in C?", "body": "<p>The least significant digit is num % 10</p>\n\n<p>The next digit can be found by num/=10;</p>\n\n<p>This works for positive numbers, but is implementation defined for negative</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1446644558, "post_id": 33523377, "comment_id": 54827931, "body": "One can also get the magnitude by doing <code>log10f(tmp) + 1</code>."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644612, "post_id": 33523377, "comment_id": 54827972, "body": "I wasn&#39;t aware of all the functions in the C math library as I don&#39;t use it often. @Bathsheba Could you provide a link explaining the VLA extension?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446644667, "post_id": 33523377, "comment_id": 54827999, "body": "@alk: I&#39;m not certain that&#39;s completely reliable due to floating point."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644718, "post_id": 33523377, "comment_id": 54828027, "body": "Oops. VLAs have been standard C for nearly 20 years! My bad."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644746, "post_id": 33523377, "comment_id": 54828043, "body": "Note that this is implementation defined for negative <code>theNum</code>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644782, "post_id": 33523377, "comment_id": 54828068, "body": "Pity. I think using <code>log10f</code> to calculate the number of digits is not always guaranteed to work. Why not test it for every <code>unsigned</code>? I think you might be surprised by the result. Your old method was better."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644823, "post_id": 33523377, "comment_id": 54828092, "body": "@Bathsheba Alright, I&#39;ll roll back. Could you still provide some documentation for the VLA extension? I would really appreciate that. Thanks."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644841, "post_id": 33523377, "comment_id": 54828114, "body": "It&#39;s variable length arrays, and they have been standard C since 1999. Oops."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644851, "post_id": 33523377, "comment_id": 54828118, "body": "@Bathsheba: There also of <code>log10l()</code> doing <code>long double</code>, but you are right this is another question."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1446644868, "post_id": 33523377, "comment_id": 54828137, "body": "I think this answer is perfect now. (Apart from no negative check). Plus one."}], "tags": [], "owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "is_accepted": false, "score": 2, "last_activity_date": 1446645538, "last_edit_date": 1495542192, "creation_date": 1446644340, "answer_id": 33523377, "question_id": 33523160, "link": "https://stackoverflow.com/questions/33523160/how-do-i-populate-an-array-with-the-digits-of-a-given-integer-in-c/33523377#33523377", "title": "How do I populate an array with the digits of a given integer in C?", "body": "<p>You can do this by getting each digit and putting it into an array. Kudos to @unwind for thinking of using <code>unsigned int</code> because digits don't have signs. I didn't think of that.</p>\n\n<p><strong>DISClAIMER</strong>: this code is untested but would, theoretically, if I haven't made any mistakes that the community will catch, accomplish your task.</p>\n\n<p><strong>NOTE</strong>: This program is implementation-defined when <code>theNum</code> is negative. See <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">this</a> SO question for more info on what that means. Also, the accepted answer in the question of which this post is a duplicate has shorter code than this but uses <code>log10</code> which (according to commenters) could be inaccurate.</p>\n\n<pre><code>//given theNum as the number\nint tmp = theNum;\nint magnitude = 0;\n//if you keep dividing by 10, you will eventually reach 0 (integer division)\n//and that will be the magnitude of the number + 1 (x * 10^n-1)\nfor (; tmp &gt; 0; magnitude++){ //you could use a while loop but this is more compact\n    tmp /= 10;\n}\n//the number of digits is equal to the magnitude + 1 and they have no sign\nunsigned int digits[magnitude];\n//go backwards from the magnitude to 0 taking digits as you go\nfor (int i = magnitude - 1; i &gt; 0; i--){\n    //get the last digit (because modular arithmetic gives the remainder)\n    int digit = theNum % 10;\n    digits[i] = digit; //record digit\n    theNum /= 10; //remove last digit\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 3057880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cbUhm.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3057880/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "closed_date": 1446645153, "accepted_answer_id": 33523185, "answer_count": 5, "score": 0, "last_activity_date": 1446645538, "creation_date": 1446643686, "last_edit_date": 1446644268, "question_id": 33523160, "link": "https://stackoverflow.com/questions/33523160/how-do-i-populate-an-array-with-the-digits-of-a-given-integer-in-c", "closed_reason": "Duplicate", "title": "How do I populate an array with the digits of a given integer in C?", "body": "<p>So lets say you have an integer in your code declared </p>\n\n<pre><code>int my_num = 967892; \n</code></pre>\n\n<p>and you have an array </p>\n\n<pre><code>int a[6]; \n</code></pre>\n\n<p>How would you put that integer into the array so it looks like this? </p>\n\n<pre><code>{ 9, 6, 7, 8, 9, 2 }\n</code></pre>\n"}, {"tags": ["c", "iteration", "floating-accuracy", "polynomials"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5524625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1176003365750071/picture?type=large", "display_name": "Tom&#225;\u0161 Opichal", "link": "https://stackoverflow.com/users/5524625/tom%c3%a1%c5%a1-opichal"}, "edited": false, "score": 1, "creation_date": 1446644040, "post_id": 33522947, "comment_id": 54827579, "body": "I see your point, at first this was my idea too, but then I don&#39;t get the exact number of iterations because the value of fluctutation can be much lower than the real value of accuracy compared to the exact result. Thanks for your reaction though."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3235832"}, "is_accepted": false, "score": 0, "last_activity_date": 1446643050, "creation_date": 1446643050, "answer_id": 33522947, "question_id": 33522845, "link": "https://stackoverflow.com/questions/33522845/number-of-iterations-to-get-desired-accuracy-in-c-ln-x-taylor-polynomial/33522947#33522947", "title": "Number of iterations to get desired accuracy in C (ln x, taylor polynomial)", "body": "<p>You could try to exit the loop when the fluctuation in the results of successive iterations falls below your desired resolution. i.e. <code>fabs(taylorTheSecond(x, i) - taylorTheSecond(x, i - 1)) &lt; 1e-3</code> or whatever. </p>\n\n<p>.. and obviously use a variable to store the previous value; also instead of re-calculating the Taylor series each time, just calculate the next term, and see if this falls below the desired resolution.</p>\n"}], "owner": {"reputation": 31, "user_id": 5524625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1176003365750071/picture?type=large", "display_name": "Tom&#225;\u0161 Opichal", "link": "https://stackoverflow.com/users/5524625/tom%c3%a1%c5%a1-opichal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464875427, "creation_date": 1446642735, "last_edit_date": 1464875427, "question_id": 33522845, "link": "https://stackoverflow.com/questions/33522845/number-of-iterations-to-get-desired-accuracy-in-c-ln-x-taylor-polynomial", "title": "Number of iterations to get desired accuracy in C (ln x, taylor polynomial)", "body": "<p>I am trying to write a c program to</p>\n\n<ol>\n<li>get result of \"n\" iterations of taylor series for ln(x)</li>\n<li>get number of iterations needed to get the result with desired accuracy compared to log(x) from </li>\n</ol>\n\n<p>So far i have created two functions for taylor series, first one for 0 &lt; x &lt; 1 and second for x > 1. To make it simple, I will post just the second one because these functions work fine. The input is \"x\" as the parameter of ln() and \"n\" as the number of iterations. As I can't use math.h I had to create \"xTOn\" function which simply does the x^n. In this function I have implemented following formula: </p>\n\n<p><a href=\"http://i.stack.imgur.com/YnpkJ.jpg\" rel=\"nofollow\">Taylor series</a></p>\n\n<pre><code>double taylorTheSecond(double x, int n) // second formula for taylor x &gt; 1\n{\n    double sum = 0.0;\n\n    for (int i = 1; i &lt;= n; i++)\n    {\n        sum += xTOn((x-1)/x, i) / i;\n    }\n\n    return sum;\n}\n</code></pre>\n\n<p>I have also the function to count number of needed iterations but it compares the result with the function log() from math.h, which is undiserable. It should be done by comparing two consecutive iterations but i have no idea how to do that because i don't understand what's the point when you compare two inaccurate numbers. Now, \"x\" is the parameter of ln function and \"eps\" is desired accuracy (e.g. 0.001 or 1e-3 ...).</p>\n\n<pre><code>#include &lt;math.h&gt;\n\nint iterations(double x, double eps)\n{\n    int i = 1;\n\n    while(1)\n    {\n        if (fabs(taylorTheSecond(x, i) - log(x)) &lt;= eps)\n        {\n            break;\n        }\n        i++;\n    }   \n\n    return i;\n}\n</code></pre>\n\n<p>This is really simple. But to count the iterations without using the math library, it just looks impossible to me. I will be grateful for any suggestions how to get this done :).</p>\n"}, {"tags": ["c", "pcap", "libpcap"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1446642576, "post_id": 33522705, "comment_id": 54826626, "body": "<code>ts</code> is uninitialized. Perhaps it&#39;s unintentionally set to 0xffffffff which is also in the wrong place in your structure."}, {"owner": {"reputation": 630, "user_id": 3375166, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-ueMaK6yqY_0/AAAAAAAAAAI/AAAAAAAAABM/bubjZpCCPLk/photo.jpg?sz=128", "display_name": "Charrette", "link": "https://stackoverflow.com/users/3375166/charrette"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1446643297, "post_id": 33522705, "comment_id": 54827099, "body": "You are right, and that&#39;s working now, but i&#39;m editing my post to ask for some details"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": false, "score": 5, "last_activity_date": 1446665661, "creation_date": 1446665661, "answer_id": 33530489, "question_id": 33522705, "link": "https://stackoverflow.com/questions/33522705/how-to-write-pcap-file-from-scratch-decorticating-libpcap-functions/33530489#33530489", "title": "How to write pcap file from scratch, decorticating libpcap functions?", "body": "<blockquote>\n  <p><code>struct pcap_pkthdr packet_header;</code></p>\n</blockquote>\n\n<p>That's the format of a packet header <em>as it's provided to a program</em>.  It is <em>not</em> necessarily the format of a packet header as it's stored in the file; it contains a <code>struct timeval</code>, whose size differs depending on whether a <code>time_t</code> is 32 bits or 64 bits.</p>\n\n<p>What you need is:</p>\n\n<pre><code>struct pcap_timeval {\n    bpf_int32 tv_sec;       /* seconds */\n    bpf_int32 tv_usec;      /* microseconds */\n};\nstruct pcap_sf_pkthdr {\n    struct pcap_timeval ts; /* time stamp */\n    bpf_u_int32 caplen;     /* length of portion present */\n    bpf_u_int32 len;        /* length this packet (off wire) */\n</code></pre>\n\n<p>};</p>\n\n<p>and use <code>struct pcap_sf_pkthdr</code> instead.  Writing <code>struct pcap_pkthdr</code> structures to a file will produce invalid pcap files on any system where the <code>tv_sec</code> or <code>tv_usec</code> field of <code>struct timeval</code> isn't 32 bits; that will probably be the case on any 64-bit system.  In that case, you may well get errors like the \"damaged or corrupt\" error you saw.</p>\n\n<p>As for what the meaning of the time stamp is, in an actual capture it represents the time at which the packet was seen by whatever part of the capture code path time stamped it, which is an approximation to the time at which the packet arrived at the machine capturing it.  It's a UN*X time stamp, so <code>tv_sec</code> is a count of seconds since January 1, 1970, 00:00:00 UTC, and <code>tv_usec</code> is a count of microseconds since that second.</p>\n"}], "owner": {"reputation": 630, "user_id": 3375166, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-ueMaK6yqY_0/AAAAAAAAAAI/AAAAAAAAABM/bubjZpCCPLk/photo.jpg?sz=128", "display_name": "Charrette", "link": "https://stackoverflow.com/users/3375166/charrette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5292, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1608233366, "creation_date": 1446642285, "last_edit_date": 1608233366, "question_id": 33522705, "link": "https://stackoverflow.com/questions/33522705/how-to-write-pcap-file-from-scratch-decorticating-libpcap-functions", "title": "How to write pcap file from scratch, decorticating libpcap functions?", "body": "<p>I've got this code which is working fine to write a pcap file (with just the Ethernet protocol for the test) with libpcap:</p>\n<pre><code>struct ethernet {\n  u_char        mac1[6];\n  u_char        mac2[6];\n  u_short       protocol;\n};\n\nint main() {\n  pcap_t *pd;\n  pcap_dumper_t *pdumper;\n\n  pd = pcap_open_dead(DLT_EN10MB, 65535);\n  pdumper = pcap_dump_open(pd, &quot;test.pcap&quot;);\n  \n  struct pcap_pkthdr packet_header;\n  struct timeval ts;\n\n  packet_header.ts = ts;\n  packet_header.caplen = sizeof(struct ethernet);\n  packet_header.len = sizeof(struct ethernet);\n\n  struct ethernet ethernet;\n\n  bzero(ethernet.mac1, 6);\n  bzero(ethernet.mac2, 6);\n  ethernet.protocol = 8977; // randomly choose\n  pcap_dump((u_char*)pdumper, &amp;packet_header, (const u_char*)&amp;ethernet);\n  pcap_close(pd);\n  pcap_dump_close(pdumper);\n  return 0;\n}\n</code></pre>\n<p>But I wanted to try not using the pcap functions, so I started decorticating the functions used above.</p>\n<p>Here are the sources I found:</p>\n<p>pcap_open_dead function: <a href=\"http://www.wand.net.nz/trac/libtrace/browser/lib/pcap_open_dead.c?rev=808a478a2459f3cf0e8bf927fcaad371138efb20\" rel=\"nofollow noreferrer\">http://www.wand.net.nz/trac/libtrace/browser/lib/pcap_open_dead.c?rev=808a478a2459f3cf0e8bf927fcaad371138efb20</a></p>\n<p>pcap_dump_open, pcap_dump and others: <a href=\"http://www.opensource.apple.com/source/libpcap/libpcap-2.1/libpcap/savefile.c\" rel=\"nofollow noreferrer\">http://www.opensource.apple.com/source/libpcap/libpcap-2.1/libpcap/savefile.c</a></p>\n<p>So, here is my thought:</p>\n<p>The pcap_open_dead function is kind of useless, just instanciating a pcap_t struct (which I don't want to use in my code) and filling its values with the parameters.</p>\n<p>The pcap_dump_open, returning a pcap_dumper_t (which seems to be just like a FILE*), is just opening the file and writing the header in it (if we don't care about the errors handling). By the way, seems like its giving &quot;p-&gt;tzoff&quot; as parameter to sf_write_header, which has not been initialized in my code (and it's still working).\nAbout the linktype, in our case it's just equal to 1.</p>\n<p>Finally, the pcap_dump function take the pcap_dumper_t variable as first parameter, which is implicitly cast to u_char* then explicitly cast to FILE* (why not use a FILE* from the beginning?)\nThen it take a packet header and a packet data to write them into the file with fwrite.</p>\n<p>So here is what I did:</p>\n<pre><code>FILE *fd = fopen(&quot;test.pcap&quot;, &quot;w&quot;);\n\nstruct pcap_file_header header;\n\nheader.magic = 0xa1b2c3d4;\nheader.version_major = 2;\nheader.version_minor = 4;\nheader.thiszone = 0;\nheader.sigfigs = 0;\nheader.snaplen = 65535;\nheader.linktype = DLT_EN10MB;\n\nstruct pcap_pkthdr packet_header;\nstruct timeval ts;\n\npacket_header.ts = ts;\npacket_header.caplen = sizeof(struct ethernet);\npacket_header.len = sizeof(struct ethernet);\n\nstruct ethernet ethernet;\n\nbzero(ethernet.mac1, 6);\nbzero(ethernet.mac2, 6);\nethernet.protocol = 8977;\n\nfwrite((char*)&amp;header, sizeof(header), 1, fd);\nfwrite((char*)&amp;packet_header, sizeof(struct pcap_pkthdr), 1, fd);\nfwrite((char*)&amp;ethernet, sizeof(struct ethernet), 1, fd);\nclose(fd);\n</code></pre>\n<p>No need to use a pcap_t structure, I put the snaplen and linktype values directly in the pcap_file_header structure.</p>\n<p>And then I use fwrite the same way they do in the pcap functions.</p>\n<p>The header file is good, i'm able to open the file with wireshark if I just write the header in the file.\nBut when I add the 2 last fwrite (to write the packet header and the packet), wireshark tells me:</p>\n<pre><code>The capture file appears to be damaged or corrupt.\n(pcap: File has 4195245-byte packet, bigger than maximum of 65535)\n</code></pre>\n<p>I can't find where is my mistake, and I don't know where he's seeing that much bytes.</p>\n<p>EDIT</p>\n<p>Instead of using an uninitialized timeval, I did :</p>\n<pre><code>packet_header.ts = (struct timeval){0};\n</code></pre>\n<p>And now that's working, but how do you explain it was working when using the pcap functions? &quot;ts&quot; was still uninitialized.</p>\n<p>And what's the meaning of this timeval? Does it make sense to set it to zero?</p>\n<p>EDIT:\ncorrected magic number to 0xa1b2c3d4</p>\n"}, {"tags": ["c++", "c", "tiff", "libtiff"], "comments": [{"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 1, "creation_date": 1446644509, "post_id": 33522589, "comment_id": 54827895, "body": "If you can&#39;t find any uptodate library, writing a TIFF info reader from scratch isn&#39;t that hard; the docs are pretty straightforward. (I made one years ago; I&#39;ll see if I can find the source, but it&#39;s probably rather out of date by now.)"}], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 3502070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbebb7bbec647ebfef105a43f504a4c?s=128&d=identicon&r=PG&f=1", "display_name": "0Tech", "link": "https://stackoverflow.com/users/3502070/0tech"}, "is_accepted": true, "score": 2, "last_activity_date": 1446717258, "last_edit_date": 1446717258, "creation_date": 1446699802, "answer_id": 33537058, "question_id": 33522589, "link": "https://stackoverflow.com/questions/33522589/how-to-read-custom-tiff-tags-w-o-tifffieldinfo/33537058#33537058", "title": "How to read custom TIFF tags (w/o TIFFFieldInfo)", "body": "<p>Finally I've found the solution. \nThe manual (<a href=\"http://web.mit.edu/fwtools_v1.1.2/man/man3/TIFFGetField.3tiff\" rel=\"nofollow\">TIFFGetField(3tiff)</a>) says all we need. See the AUTOREGISTERED TAGS session. The following is copy-pasted one.</p>\n\n<blockquote>\n  <p>AUTOREGISTERED TAGS If you can't find the tag in the table above  that\n  means  this  is  an unsupported  tag  and  is  not  directly \n  supported  by  libtiff(3TIFF) library. You will still be able to read\n  it's value if you know the data type  of that tag. For example, if you\n  want to read the LONG value from the tag 33424 and ASCII string from\n  the tag 36867 you can use the following code:</p>\n\n<pre><code>uint32  count;\nvoid    *data;\n\nTIFFGetField(tiff, 33424, &amp;count, &amp;data);\nprintf(\"Tag %d: %d, count %d0\", 33424, *(uint32 *)data, count);\nTIFFGetField(tiff, 36867, &amp;count, &amp;data);\nprintf(\"Tag %d: %s, count %d0\", 36867, (char *)data, count);\n</code></pre>\n</blockquote>\n\n<p>For example, I need to read a tag which is double, so I used the following code (but I didn't check IT):</p>\n\n<pre><code>tiff *tif = TIFFOpen(\"ex_file.tif\", \"rc\");   // read tif\nstatic ttag_t const TIFFTAG_SOMETAG = 34362; // some custom tag\nif(tif != nullptr) // if the file is open\n{\n    uint count; // get count\n    double *data; // get data\n    if(TIFFGetField(tif, TIFFTAG_SOMETAG, &amp;count, &amp;data) == 1) // read tag\n        throw std::logic_error(\"the tag does not exist.\");\n\n    // print the values (caution: count is in bytes)\n    for(int index = 0; index &lt; count / sizeof(double); ++index)\n        std::cout &lt;&lt; data[index];\n    TIFFClose(tif); // close the file\n}\nelse\n    throw std::runtime_error(\"cannot open the file\");\n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 3502070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbebb7bbec647ebfef105a43f504a4c?s=128&d=identicon&r=PG&f=1", "display_name": "0Tech", "link": "https://stackoverflow.com/users/3502070/0tech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1536, "favorite_count": 0, "accepted_answer_id": 33537058, "answer_count": 1, "score": 1, "last_activity_date": 1446717258, "creation_date": 1446641887, "question_id": 33522589, "link": "https://stackoverflow.com/questions/33522589/how-to-read-custom-tiff-tags-w-o-tifffieldinfo", "title": "How to read custom TIFF tags (w/o TIFFFieldInfo)", "body": "<p>I'm trying to read a custom tag in a tiff file.</p>\n\n<p>There are few instruction about this topic, but AFAIK they are using an interface (struct) called TIFFFieldInfo. I've read the <a href=\"http://www.remotesensing.org/libtiff/addingtags.html\" rel=\"nofollow\">documentation</a> already, and again TIFFFieldInfo showed up.\nI could go with it, but they (<a href=\"https://code.google.com/p/openjpeg/source/browse/trunk/libs/libtiff/tiffio.h?r=697\" rel=\"nofollow\">the library</a>) are saying, that interface is OBSOLETED. Could you suggest me reasonable alternatives?\nOr have I just misreaded the header file?</p>\n"}, {"tags": ["c", "string", "algorithm", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 3, "creation_date": 1446641216, "post_id": 33522312, "comment_id": 54825749, "body": "Using <code>gets</code> is discouraged because this function cannot prevent buffer overrun."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446641295, "post_id": 33522312, "comment_id": 54825799, "body": "Your loop in <code>strrev</code> will never run for strings with a length of more than one characters. For zero-length string you will have <i>undefined behavior</i>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1446641306, "post_id": 33522312, "comment_id": 54825805, "body": "Unrelated to your errors, maybe just check all the other posts already on SO which does exactly the same thing, such as <a href=\"http://stackoverflow.com/questions/5673155/how-to-reverse-a-c-style-string-completely\">this one</a>?"}, {"owner": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "edited": false, "score": 0, "creation_date": 1446641862, "post_id": 33522312, "comment_id": 54826202, "body": "Since you are just starting to learn c, now would be a good time to learn how to use GDB. It&#39;s a debugger that allows you to step through your code. It helps you learn the ins and outs of your code. It&#39;s simple and makes debugging errors like this a breeze. Here&#39;s a simple starter: <a href=\"http://www.cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pdf\" rel=\"nofollow noreferrer\">cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pd&zwnj;&#8203;f</a>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1446642709, "post_id": 33522312, "comment_id": 54826712, "body": "You&#39;re also not initializing c, which could be anything.  So you&#39;re writing to a random location in memory."}, {"owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "edited": false, "score": 0, "creation_date": 1446746533, "post_id": 33522312, "comment_id": 54882762, "body": "But we can directly assign a string value to a char type pointer. I mean char *ptr=&quot;witch&quot; is completely acceptance then why do I have to assign memory in the above case. Please explain."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1446643289, "last_edit_date": 1495535237, "creation_date": 1446641188, "answer_id": 33522354, "question_id": 33522312, "link": "https://stackoverflow.com/questions/33522312/getting-segmentation-fault-core-dumped-error-while-reversing-a-string/33522354#33522354", "title": "Getting &quot;Segmentation fault Core Dumped Error &quot; while reversing a string", "body": "<p>Inside your <code>strrev()</code> function, <code>str1</code> is not allocated memory. Hence, <code>*(str1+c) = *(str+i);</code> is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">UB</a>.</p>\n\n<p>Then, <code>c</code> is an automatic local variable which is not initialized before use. Also UB.</p>\n\n<p>Next, <a href=\"https://stackoverflow.com/a/33522387/2173917\">as Giorgi mentioned</a>, correct your for loop.</p>\n\n<p>That said, don't use <code>gets()</code>, it suffers from buffer overrun issues. Use <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1446641355, "post_id": 33522387, "comment_id": 54825836, "body": "Strictly speaking, not never. What if the length of string <code>str</code> is zero or one ?"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1446641581, "post_id": 33522387, "comment_id": 54825999, "body": "@MikeCAT: Yes, incorporated"}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": false, "score": 2, "last_activity_date": 1446641683, "last_edit_date": 1446641683, "creation_date": 1446641274, "answer_id": 33522387, "question_id": 33522312, "link": "https://stackoverflow.com/questions/33522312/getting-segmentation-fault-core-dumped-error-while-reversing-a-string/33522387#33522387", "title": "Getting &quot;Segmentation fault Core Dumped Error &quot; while reversing a string", "body": "<pre><code>  for (i=length-1;i&lt;=0;i--)\n</code></pre>\n\n<p>This will never (unless string is 0 or 1 character long) run due to <code>i&lt;=0</code>, should be <code>i&gt;=0</code> probably.</p>\n\n<p>Also in general you need to make pointer point to some valid memory in order to be able to dereference it. In your case you should probably use <code>malloc</code> for allocating sufficient number of bytes, and assign its result to <code>str1</code>. Then you can write to it as you are doing.</p>\n"}, {"comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1446641668, "post_id": 33522423, "comment_id": 54826057, "body": "<code>i&lt;=0</code> do become true if <code>length&lt;=1</code>."}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 0, "last_activity_date": 1446641729, "last_edit_date": 1446641729, "creation_date": 1446641389, "answer_id": 33522423, "question_id": 33522312, "link": "https://stackoverflow.com/questions/33522312/getting-segmentation-fault-core-dumped-error-while-reversing-a-string/33522423#33522423", "title": "Getting &quot;Segmentation fault Core Dumped Error &quot; while reversing a string", "body": "<p>In your function, you did not initialize <code>c</code></p>\n\n<pre><code>int i,length,c;\n</code></pre>\n\n<p>and are using it inside the <code>for</code> loop</p>\n\n<pre><code>*(str1+c) = *(str+i);\n</code></pre>\n\n<p>Plus other problems are there..</p>\n\n<p>1) <code>str1</code> inside the function is not allocated memory.</p>\n\n<p>2) This loop will never get executed, as the condition in <code>for (i=length-1;i&lt;=0;i--)</code> is never true (unless string is 0 or 1 character long).</p>\n\n<p>3) Do not use <code>gets()</code>, it is deprecated. Instead use <code>fgets()</code></p>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1446641532, "creation_date": 1446641532, "answer_id": 33522469, "question_id": 33522312, "link": "https://stackoverflow.com/questions/33522312/getting-segmentation-fault-core-dumped-error-while-reversing-a-string/33522469#33522469", "title": "Getting &quot;Segmentation fault Core Dumped Error &quot; while reversing a string", "body": "<ol>\n<li>You don't initialize <code>str1</code> in <code>strrev()</code></li>\n<li>If you enter string whose length is 2 characters or more, <code>i&lt;=0</code> is false and the block inside the <code>for</code> loop won't be executed.</li>\n<li><code>*(str1+c) ='\\0';</code> will cause the crash because the value of <code>str1</code> is indeterminate and you have few chance that <code>str1</code> points some valid place.</li>\n</ol>\n\n<p>UPD: <code>c</code> in <code>strrev()</code> is also uninitialized, and it <strong>will</strong> cause some trouble.</p>\n"}, {"comments": [{"owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "edited": false, "score": 0, "creation_date": 1446746642, "post_id": 33522747, "comment_id": 54882822, "body": "What do you mean by not initialized? What do I need to to initialize a pointer? Should I just assign a value?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "edited": false, "score": 0, "creation_date": 1446748082, "post_id": 33522747, "comment_id": 54883652, "body": "@AsfakulIslam You are using a pointer that has undetermined value. You need 1) to allocate memory where you are going to write the reversed string and 2) to assign the pointer by the address of the allocated memory."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1446642428, "creation_date": 1446642428, "answer_id": 33522747, "question_id": 33522312, "link": "https://stackoverflow.com/questions/33522312/getting-segmentation-fault-core-dumped-error-while-reversing-a-string/33522747#33522747", "title": "Getting &quot;Segmentation fault Core Dumped Error &quot; while reversing a string", "body": "<p>What you are trying to do is not reversing a string. Neither string is reversed in your program. You are trying to copy one string in another string in the reverse order.</p>\n\n<p>So the sring where you are going to copy the original string in the reverse order shall have enough space to store the copied characters.</p>\n\n<p>However in your function</p>\n\n<pre><code>char* strrev(char *str)\n{\n  char *str1\n  //...\n</code></pre>\n\n<p>pointer <code>str1</code> was not initialized and does not point to an extent of memory of the appropriate size.</p>\n\n<p>So your program has undefined behaviour.</p>\n\n<p>Take also in account that function <code>gets</code> is unsafe and is not supported by the C standard any more. Use function <code>fgets</code> instead.</p>\n\n<p>If your compiler supports Variable Length Arrays (VLA) then the program can look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * reverse_copy( char *s2, const char *s1 )\n{\n    size_t n = strlen( s1 );\n    size_t i = 0;\n\n    for ( ; i &lt; n; i++ ) s2[i] = s1[n-i-1];\n\n    s2[i] = '\\0';\n\n    return s2;\n}\n\nint main( void )\n{\n    char s1[1000];\n\n    printf( \"Please enter a String: \" );\n    fgets( s1, sizeof( s1 ), stdin );\n\n    size_t n = strlen( s1 );\n\n    if ( n != 0 &amp;&amp; s1[n-1] == '\\n' ) s1[n-1] = '\\0';\n\n    char s2[n + 1];\n\n    puts( s1 );\n    puts( reverse_copy( s2, s1 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>If to enter for example</p>\n\n<pre><code>Hello Asfakul Islam\n</code></pre>\n\n<p>then the output will look like</p>\n\n<pre><code>Please enter a String: Hello Asfakul Islam\nHello Asfakul Islam\nmalsI lukafsA olleH\n</code></pre>\n\n<p>Otherwise if your compiler does not support VLA(s) you need to dynamically allocate an array of the appropriate size. In this case the program can look for example the following way</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * reverse_copy( char *s2, const char *s1 )\n{\n    size_t n = strlen( s1 );\n    size_t i = 0;\n\n    for ( ; i &lt; n; i++ ) s2[i] = s1[n-i-1];\n\n    s2[i] = '\\0';\n\n    return s2;\n}\n\nint main( void )\n{\n    char s1[1000];\n\n    printf( \"Please enter a String: \" );\n    fgets( s1, sizeof( s1 ), stdin );\n\n    size_t n = strlen( s1 );\n\n    if ( n != 0 &amp;&amp; s1[n-1] == '\\n' ) s1[n-1] = '\\0';\n\n    char *s2 = malloc( ( n + 1 ) * sizeof( char ) );\n\n    puts( s1 );\n    puts( reverse_copy( s2, s1 ) );\n\n    free( s2 );\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 33522747, "answer_count": 5, "score": 2, "last_activity_date": 1446655179, "creation_date": 1446641101, "last_edit_date": 1446655179, "question_id": 33522312, "link": "https://stackoverflow.com/questions/33522312/getting-segmentation-fault-core-dumped-error-while-reversing-a-string", "title": "Getting &quot;Segmentation fault Core Dumped Error &quot; while reversing a string", "body": "<p>I am trying to learn C, I am getting this error while reversing a string.  I am not well versed with memory allocation stuffs, can you please point out where I am doing wrong.  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nchar* strrev(char *str);\nint main()\n{\n  char str[1000];\n  char *str1;\n  printf(\"Please enter a String\\n\");\n  gets(str);\n\n  str1=strrev(str);\n  puts(str1);\n\n}\n\nchar* strrev(char *str)\n{\n  char *str1;\n  int i,length,c;\n  length=strlen(str);\n\n  for (i=length-1;i&lt;=0;i--)\n  {\n     *(str1+c) = *(str+i);\n     c++;\n  }\n  *(str1+c) ='\\0';\n  return str1;\n\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "opengl"], "comments": [{"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "edited": false, "score": 2, "creation_date": 1446651030, "post_id": 33522233, "comment_id": 54832664, "body": "If you create a minimal application that does nothing except try to compile that same shader, does it still crash? If it crashes standalone, I would file a bug with Apple and try to rewrite your shader so it doesn&#39;t cause the crash. Otherwise: I ask because it seems odd that it crashes in <code>getenv()</code> - this doesn&#39;t seem like it would be data dependent, so it&#39;s more likely that you&#39;ve got yourself an accidental memory overwrite somewhere in your app. Have you run the full gamut of memory checks? Can you test your application in <code>valgrind</code>?"}, {"owner": {"reputation": 6020, "user_id": 4052193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6062c93ce987aa90ac59d06e758f03b6?s=128&d=identicon&r=PG&f=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/4052193/columbo"}, "edited": false, "score": 0, "creation_date": 1446667899, "post_id": 33522233, "comment_id": 54843726, "body": "It could be an unrelated memory splat somewhere else in your code that happens to break at this point. Try enabling the memory debug features to see if it flags anything: <a href=\"https://developer.apple.com/library/mac/documentation/Performance/Conceptual/ManagingMemory/Articles/MallocDebug.html#//apple_ref/doc/uid/20001884-CJBJFIDD\" rel=\"nofollow noreferrer\">developer.apple.com/library/mac/documentation/Performance/&hellip;</a>"}], "owner": {"reputation": 69, "user_id": 3814792, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ac2c719a5130d39b9de70ee66b3e42e0?s=128&d=identicon&r=PG&f=1", "display_name": "user3814792", "link": "https://stackoverflow.com/users/3814792/user3814792"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1446640867, "creation_date": 1446640867, "question_id": 33522233, "link": "https://stackoverflow.com/questions/33522233/glcompileshader-crashes-on-osx", "title": "glCompileShader Crashes on OSX", "body": "<p>This has got me stumped. I am writing an OpenGL application on my Macbook Pro running OSX Yosemite using Objective C / C. My application always crashes on <code>glCompileShader(...)</code> and I was hoping one of you could help me find out why.</p>\n\n<p>All other GL3+ functions work perfectly and produce no error messages or flags. In addition, I have tried using GLEW to see if that would fix the problem but it has not. I would put this down to being a simple driver bug if not for the fact I have written tons of OpenGL application on this Macbook and have never encountered this problem before.</p>\n\n<p>Here is the code I am using to load and compile the vertex shader:</p>\n\n<pre><code>shaderProgram = glCreateProgram();\nconst GLchar *v = vertSrc;\n\nshaderVertex = glCreateShader(GL_VERTEX_SHADER);\nglShaderSource(shaderVertex, 1, &amp;v, NULL);\nglCompileShader(shaderVertex); // This is where it crashes\n</code></pre>\n\n<p>Here is the vertex shader source itself:</p>\n\n<pre><code>const char *vertSrc = {\n\"#version 150 core\\n\"\n\"in vec3 vPosition;\\n\"\n\"in vec3 vRotation;\\n\"\n\"in vec4 vColor;\\n\"\n\"in vec3 vNormal;\\n\"\n\"in vec3 vTexture;\\n\"\n\"uniform mat4 mModel;\\n\"\n\"uniform mat4 mView;\\n\"\n\"uniform mat4 mProj;\\n\"\n\"void main(){\\n\"\n    \"gl_Position = (mProj * mView * mModel) * vec4(vPosition.xyz,1.0);\\n\"\n\"}\\n\"\n};\n</code></pre>\n\n<p>Finally, here is the Problem Report generated by Apple when the application crashes:</p>\n\n<pre><code>Exception Type:        EXC_BAD_ACCESS (SIGSEGV)\nException Codes:       KERN_INVALID_ADDRESS at 0x00007fff00000000\n\nVM Regions Near 0x7fff00000000:\n    MALLOC_SMALL           00007fbc64000000-00007fbc65000000 [ 16.0M] rw-/rwx SM=PRV  \n--&gt; \n    STACK GUARD            00007fff59b6c000-00007fff5d36c000 [ 56.0M] ---/rwx SM=NUL  stack guard for thread 0\n\nThread 0 Crashed:: Dispatch queue: com.apple.main-thread\n0   libsystem_c.dylib               0x00007fff895d1c43 __findenv + 90\n1   libsystem_c.dylib               0x00007fff895d1cc7 getenv + 29\n2   libGLProgrammability.dylib      0x00007fff894a504a glpMakeCompiler + 266\n3   libGLProgrammability.dylib      0x00007fff894cf9ca ShCompile + 124\n4   GLEngine                        0x00007fff9351e3bb gleShaderParse + 482\n5   GLEngine                        0x00007fff93464f36 glCompileShaderIncludeARB_Exec + 490\n6   libCarbon.dylib                 0x000000010209dd97 myApp_addShaderProgram + 231\n7   libCarbon.dylib                 0x000000010209dc2f myApp_setShaderGroup + 63\n8   main                            0x0000000102095b8a main + 458\n9   libdyld.dylib                   0x00007fff965fa5c9 start + 1\n</code></pre>\n\n<p>Has anybody seen this error before or believe they can help?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446641081, "post_id": 33522201, "comment_id": 54825662, "body": "What does <code>cvCreatePOSITObject()</code> do? This is essential to know, for deciding which solution to take, as there are multiple."}, {"owner": {"reputation": 414, "user_id": 5524637, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd799d5baded791177ba35f8c4d1b085?s=128&d=identicon&r=PG&f=1", "display_name": "Eumel", "link": "https://stackoverflow.com/users/5524637/eumel"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446641139, "post_id": 33522201, "comment_id": 54825708, "body": "a value of type void* cannot be used to initialize an entity of type CvPoint3D32f, also is it possible to use malloc(point_count, sizeof(CVPoint3D32f))? it creates a opencv structure from points"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446641356, "post_id": 33522201, "comment_id": 54825840, "body": "<code>malloc(point_count, sizeof(CVPoint3D32f))</code> should have read <code>calloc(point_count, sizeof(CVPoint3D32f))</code>?"}, {"owner": {"reputation": 414, "user_id": 5524637, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd799d5baded791177ba35f8c4d1b085?s=128&d=identicon&r=PG&f=1", "display_name": "Eumel", "link": "https://stackoverflow.com/users/5524637/eumel"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446641452, "post_id": 33522201, "comment_id": 54825915, "body": "same error as with malloc"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446641615, "post_id": 33522201, "comment_id": 54826022, "body": "Which compiler, which platform?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446641649, "post_id": 33522201, "comment_id": 54826043, "body": "<code>malloc(point_count, sizeof(CVPoint3D32f))</code> shouldn&#39;t even compile."}, {"owner": {"reputation": 414, "user_id": 5524637, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd799d5baded791177ba35f8c4d1b085?s=128&d=identicon&r=PG&f=1", "display_name": "Eumel", "link": "https://stackoverflow.com/users/5524637/eumel"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446641832, "post_id": 33522201, "comment_id": 54826174, "body": "vista visual studio 2010 c/c++"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446642126, "post_id": 33522201, "comment_id": 54826372, "body": "Then go to the Project&#39;s properties and select &quot;<i>Configuration Properties -&gt; C/C++ -&gt; Advanced</i>&quot; and set &quot;<i>Compile As</i>&quot; to &quot;<i>Compile as C Code</i>&quot;, otherwise you are using the C++ compiler, which indeed does not accept assigning a <code>void*</code> to any other pointer typed variable without casting it."}, {"owner": {"reputation": 414, "user_id": 5524637, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd799d5baded791177ba35f8c4d1b085?s=128&d=identicon&r=PG&f=1", "display_name": "Eumel", "link": "https://stackoverflow.com/users/5524637/eumel"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446642394, "post_id": 33522201, "comment_id": 54826532, "body": "that did not change anything"}], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 5524637, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd799d5baded791177ba35f8c4d1b085?s=128&d=identicon&r=PG&f=1", "display_name": "Eumel", "link": "https://stackoverflow.com/users/5524637/eumel"}, "edited": false, "score": 0, "creation_date": 1446641611, "post_id": 33522274, "comment_id": 54826019, "body": "malloc says: a value of type void* cannot be used to initialize an entity of type CvPoint3D32f freeing the memory happens in another function"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 414, "user_id": 5524637, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd799d5baded791177ba35f8c4d1b085?s=128&d=identicon&r=PG&f=1", "display_name": "Eumel", "link": "https://stackoverflow.com/users/5524637/eumel"}, "edited": false, "score": 0, "creation_date": 1446641803, "post_id": 33522274, "comment_id": 54826158, "body": "@Eumel: Mind the <code>*</code>  in <code>CvPoint3D32f* P;</code>!"}, {"owner": {"reputation": 414, "user_id": 5524637, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd799d5baded791177ba35f8c4d1b085?s=128&d=identicon&r=PG&f=1", "display_name": "Eumel", "link": "https://stackoverflow.com/users/5524637/eumel"}, "edited": false, "score": 0, "creation_date": 1446641972, "post_id": 33522274, "comment_id": 54826273, "body": "oh yes there should be a * there"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1446640989, "creation_date": 1446640989, "answer_id": 33522274, "question_id": 33522201, "link": "https://stackoverflow.com/questions/33522201/initializing-array-pointer-to-a-struct/33522274#33522274", "title": "initializing array pointer to a struct", "body": "<p>I don't know much about OpenCV, but I think you should <strong>allocate</strong> some memory to store the data.</p>\n\n<pre><code>#include &lt;stdlib.h&gt; // add this to the head of the file to use malloc\n\nCVAPI(CvPOSITObject*)  lvCreatePOSITObject( float points[5][3], int point_count )\n{\n    CvPoint3D32f* P; //array of structs with int x,y,z\n    P = malloc(sizeof(CvPoint3D32f) * point_count); // allocate some memory\n    for(int i = 0; i&lt; point_count; i++)\n    {\n        P[i].x = points[i][0];\n        P[i].y = points[i][1];\n        P[i].z = points[i][2];\n    }\n    return cvCreatePOSITObject(P,point_count);\n}\n</code></pre>\n\n<p>This code may be bad because this may not free the allocated buffer.</p>\n"}], "owner": {"reputation": 414, "user_id": 5524637, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd799d5baded791177ba35f8c4d1b085?s=128&d=identicon&r=PG&f=1", "display_name": "Eumel", "link": "https://stackoverflow.com/users/5524637/eumel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446640989, "creation_date": 1446640778, "question_id": 33522201, "link": "https://stackoverflow.com/questions/33522201/initializing-array-pointer-to-a-struct", "title": "initializing array pointer to a struct", "body": "<p>I get the Error run-time check failure #3, and i have to initialize P and i know why but not how to do it. </p>\n\n<p>Points is supposed to be a variable 2D array like float* points[3] for testing purposes its constant for now.</p>\n\n<pre><code>CVAPI(CvPOSITObject*)  lvCreatePOSITObject( float points[5][3], int point_count )\n{\n    CvPoint3D32f* P; //array of structs with int x,y,z \n    for(int i = 0; i&lt; point_count; i++)\n    {\n        P[i].x = points[i][0];\n        P[i].y = points[i][1];\n        P[i].z = points[i][2];\n    }\n    return cvCreatePOSITObject(P,point_count);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1446640276, "post_id": 33521994, "comment_id": 54825094, "body": "em? variable on heap? hmmmm"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446640279, "post_id": 33521994, "comment_id": 54825096, "body": "C does not specify implementation details."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446640335, "post_id": 33521994, "comment_id": 54825132, "body": "@SouravGhosh: You can use a heap-based approach instead of a stack."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446640632, "post_id": 33521994, "comment_id": 54825336, "body": "Please be more specific. What are you trying to achieve ?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1446640768, "post_id": 33521994, "comment_id": 54825438, "body": "<code>static</code> may be useful to prevent local variables from being allocated on the stack."}, {"owner": {"reputation": 109, "user_id": 5073861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a0e1464fc306c43d5c89cb0f70d7e00?s=128&d=identicon&r=PG&f=1", "display_name": "Saverio", "link": "https://stackoverflow.com/users/5073861/saverio"}, "edited": false, "score": 0, "creation_date": 1446641482, "post_id": 33521994, "comment_id": 54825934, "body": "Is there any alternative in case I do not want to use the &#39;static&#39; keyword?"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 2, "creation_date": 1446641653, "post_id": 33521994, "comment_id": 54826047, "body": "Please read <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a> . Then ask a new question about what you&#39;re trying to <i>accomplish</i>, rather than what you&#39;re trying to <i>figure out</i>."}, {"owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "edited": false, "score": 0, "creation_date": 1446642997, "post_id": 33521994, "comment_id": 54826905, "body": "you can also use malloc/calloc to allocate memory from heap area."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1446643117, "post_id": 33521994, "comment_id": 54826975, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/426737/does-this-type-of-memory-get-allocated-on-the-heap-or-the-stack\">Does this type of memory get allocated on the heap or the stack?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1446645250, "creation_date": 1446645250, "answer_id": 33523648, "question_id": 33521994, "link": "https://stackoverflow.com/questions/33521994/global-declaration-is-in-stack-or-heap/33523648#33523648", "title": "global declaration is in stack or heap?", "body": "<p>Please note that a variable is <em>never</em> declared \"on the heap\". Only memory pointed to by a pointer can be <em>allocated</em> on (from) the heap.</p>\n\n<p>In your example, you can declare <code>name</code> indeed outside any function and then it will exist in global memory. You can also delcare the variable inside a function, preceded by the keyword <code>static</code>. This latter will allocate the variable also in global memory, but it will only be visible in the function where you declared it.</p>\n\n<p>To use your pointer variable, you now must alocate memory for it to point to, which you allocate on the heap using <code>malloc</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1446652430, "creation_date": 1446652430, "answer_id": 33526232, "question_id": 33521994, "link": "https://stackoverflow.com/questions/33521994/global-declaration-is-in-stack-or-heap/33526232#33526232", "title": "global declaration is in stack or heap?", "body": "<p><strong>TL;DR Version</strong></p>\n\n<p>You cannot declare a variable such that the variable itself lives on the heap.</p>\n\n<p><strong>James Michener Version</strong></p>\n\n<p>The C language definition doesn't talk about stacks or heaps; it talks about <em>storage durations</em>.</p>\n\n<p>Objects with <code>auto</code> storage duration (anything declared within a block and without the <code>static</code> keyword) have lifetimes that extend from the beginning of that block and end when the block exits<sup>1</sup>:</p>\n\n<pre><code>void foo( void )\n{\n  int a = 0;                        // lifetime of a extends to the end of\n                                    // the function\n  for ( int i = 0; i &lt; 10; i++ )    // lifetime of i and b extend to the end\n  {                                 // of the for loop\n    int b = a + i;    \n    printf( \"b = %d\\n\", b );     \n  }\n}\n</code></pre>\n\n<p>Most implementations allocate storage for <code>auto</code> objects from the hardware stack, because a stack makes that behavior easy to implement<sup>2</sup>.  </p>\n\n<p>Objects with <code>static</code> storage duration (anything declared outside of a function or with the <code>static</code> keyword) have lifetimes that extend from the time the program is loaded into memory until the program exits:</p>\n\n<pre><code>int a = 0;                   // lifetime of a extends over the lifetime of\n                             // the entire program\nint main( void )\n{\n  static int b = 10;         // lifetime of b also extends over the lifetime\n                             // of the program, but is only visible within\n                             // main\n  ...\n}\n</code></pre>\n\n<p>Most implementations will set aside storage for <code>static</code> objects within the body of the executable itself (for an executable using the <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow\">ELF</a> format, such objects will be stored in the <code>.bss</code>, <code>.data</code>, or <code>.rodata</code> sections of the image).  </p>\n\n<p>Objects with <code>allocated</code> storage duration (anything allocated with <code>malloc</code>, <code>calloc</code>, or <code>realloc</code>) have lifetimes that extend from the time that they are allocated until they are explicitly deallocated with a call to <code>free</code>.  </p>\n\n<pre><code>int *foo( size_t size )\n{\n  int *ptr = malloc( sizeof *ptr * size );  \n  return ptr;                               \n}\n\nvoid bar( void )\n{\n  int *p = foo( 10 );                       \n  // do something with p\n  free( p );\n}\n</code></pre>\n\n<p>The <em>variables</em> <code>ptr</code> and <code>p</code> only exist for the lifetimes of their respective functions, and they will be typically allocated from the stack.  The object both variables <em>point to</em> exists from the time it is allocated with <code>malloc</code> until it is deallocated with <code>free</code>.  </p>\n\n<p>Most implementations allocate storage for <code>allocated</code> objects from the heap.  </p>\n\n<p>There's really no way for you to <em>declare</em> an object that has <code>allocated</code> storage duration; the only way you can create such an object is via <code>malloc</code>, <code>calloc</code>, or <code>realloc</code>.  Whatever object you declare to store the pointer value returned by any of those functions will have either <code>auto</code> or <code>static</code> storage duration.  </p>\n\n<p><hr>\n<sup>1.  In practice, storage for all local objects is allocated at function entry and released at function exit, regardless of whether the object's lifetime is over the entire function or limited to a block within the function.  However, you should never rely on that storage being accessible outside of that object's lifetime.  For example, the lifetimes of <code>i</code> and <code>b</code> are limited to the <code>for</code> loop; even though the storage for each may have been allocated at function entry, you should not attempt to access that storage outside of the loop body.<br><br>\n2.  C was designed on a machine with a stack, after all.<br>\n</sup></p>\n"}], "owner": {"reputation": 109, "user_id": 5073861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a0e1464fc306c43d5c89cb0f70d7e00?s=128&d=identicon&r=PG&f=1", "display_name": "Saverio", "link": "https://stackoverflow.com/users/5073861/saverio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1446652430, "creation_date": 1446640229, "question_id": 33521994, "link": "https://stackoverflow.com/questions/33521994/global-declaration-is-in-stack-or-heap", "title": "global declaration is in stack or heap?", "body": "<p>I need to declare a variable that is not in the stack memory but in the heap, like below</p>\n\n<pre><code>struct mystruct *name;\n</code></pre>\n\n<p>Should I declare it outside all functions (even outside main()) at the begin of file?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446638150, "post_id": 33521191, "comment_id": 54823726, "body": "try to print the addresses."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446638188, "post_id": 33521191, "comment_id": 54823755, "body": "Invoking undefined behaviour."}, {"owner": {"reputation": 251, "user_id": 2218931, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/962ce6ae1a76fac9ab25b139666d7443?s=128&d=identicon&r=PG", "display_name": "ponypaver", "link": "https://stackoverflow.com/users/2218931/ponypaver"}, "edited": false, "score": 0, "creation_date": 1446638254, "post_id": 33521191, "comment_id": 54823807, "body": "I have done that already. address of p is the same with a, but not pc. And dd.a[0] is not assigned any value. So I don&#39;t know where is the content of p-&gt;pc stored."}], "answers": [{"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1446639903, "post_id": 33521848, "comment_id": 54824857, "body": "Sir , if you print <code>&amp;p-&gt;pc</code> then you would get same addresses ."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1446640239, "last_edit_date": 1446640239, "creation_date": 1446639795, "answer_id": 33521848, "question_id": 33521191, "link": "https://stackoverflow.com/questions/33521191/c-memory-allocate/33521848#33521848", "title": "C memory allocate", "body": "<blockquote>\n  <p>how come the output of line 27 is not the same?</p>\n</blockquote>\n\n<p>In \"line 27\" </p>\n\n<ul>\n<li><p><code>&amp;dd.a[0]</code> evaluates to the address of <code>dd.a</code>'s first element.</p></li>\n<li><p><code>p-&gt;pc</code> <em>holds</em> the address of the string literal <code>\"testasdfsadfasdfasdfas...\"</code> as assigned in this line</p>\n\n<pre><code>p-&gt;pc = \"testasdfsadfasdfasdfas...\";\n</code></pre></li>\n</ul>\n\n<p>(You are aware one cannot assign arrays in C, aren't you?)</p>\n"}, {"tags": [], "owner": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "is_accepted": false, "score": 0, "last_activity_date": 1446642835, "creation_date": 1446642835, "answer_id": 33522872, "question_id": 33521191, "link": "https://stackoverflow.com/questions/33521191/c-memory-allocate/33522872#33522872", "title": "C memory allocate", "body": "<p>You are doing everything in the stack. So you aren't needing to malloc anything to the heap. You don't segfault because your program still has access to the memory you assigned your string to (accounting for the fact that you can't assign strings).</p>\n"}], "owner": {"reputation": 251, "user_id": 2218931, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/962ce6ae1a76fac9ab25b139666d7443?s=128&d=identicon&r=PG", "display_name": "ponypaver", "link": "https://stackoverflow.com/users/2218931/ponypaver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1446642835, "creation_date": 1446637992, "question_id": 33521191, "link": "https://stackoverflow.com/questions/33521191/c-memory-allocate", "title": "C memory allocate", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nstruct data\n{\n    char a[100*1024];\n};\n\nstruct test\n{\n    void * pc;\n    struct test * next;\n};\n\nstruct data dd; \nstruct data * pd = &amp;dd;\n\nvoid *mall(struct data *p) \n{\n    return (void *)(&amp;(p-&gt;a[0]));\n}\n\nint main(void)\n{\n    struct test * p = mall(pd);\n    p-&gt;pc = \"testasdfsadfasdfasdfasdfsadfsadfsadfsadfsadfsadfsadfsadfasdfsadfsadfsadfsadfsadfasdfsadfsadfsadfsadf\";\n   printf(\"%p\\n%p\\n\", &amp;dd.a[0], p-&gt;pc); // &lt;-- line 27\n   return 0;\n}\n</code></pre>\n\n<p>I don't understand how is the memory allocated to p in main, I think there is no memory allocated to p->pc, however the program could run properly. if you think the memory is the global array, then how come the output of line 27 is not the same?</p>\n"}, {"tags": ["c", "gcc", "assembly", "x86", "inline-assembly"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446637885, "post_id": 33521099, "comment_id": 54823525, "body": "Declaration is not enough. You need to <b>define</b> it. And: you cannot define an <i>integer</i> in Assembler; Assembler does not have a concept of datatypes. And if that shall be 32 bit data, you do you declare it in your C code as <code>char</code>? (And &quot;I have to use ... someone pointing a gun at you?)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1446638034, "post_id": 33521099, "comment_id": 54823639, "body": "Why did you think <code>unsigned char *</code> was right? That doesn&#39;t make any sense to me, at all. Perhaps <code>extern int number[8];</code> but I&#39;m really out on a limb here."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1446638112, "post_id": 33521099, "comment_id": 54823700, "body": "If you declare <code>unsigned char *number</code>, that means the value at the location <code>number</code> represents holds an address or a pointer. In this case, that address or pointer is <code>0xFFFFFFFF</code>. Then when you dereference it as <code>number[0]</code>, you are attempting to reference whatever is at address <code>0xFFFFFFFF</code>, which is invalid. Try <code>&quot;number: my_array\\n&quot;</code> followed by <code>&quot;my_array:\\n&quot; prefacing your list of </code>.long` values. Or try the method @unwind suggested."}, {"owner": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1446644156, "post_id": 33521099, "comment_id": 54827667, "body": "Do you want a 32 <i>byte</i> value or 32 <i>bit</i> value?"}, {"owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "reply_to_user": {"reputation": 1496, "user_id": 3013334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f80883e570c1ca4c51e19309f7836c34?s=128&d=identicon&r=PG&f=1", "display_name": "Linus", "link": "https://stackoverflow.com/users/3013334/linus"}, "edited": false, "score": 0, "creation_date": 1446644379, "post_id": 33521099, "comment_id": 54827808, "body": "@Linus, 32 byte. Based on unwind&#39;s comment I declared it as extern unsigned char number[32]."}], "answers": [{"tags": [], "owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "is_accepted": true, "score": 2, "last_activity_date": 1446682242, "last_edit_date": 1446682242, "creation_date": 1446681755, "answer_id": 33534415, "question_id": 33521099, "link": "https://stackoverflow.com/questions/33521099/access-array-defined-in-inline-assembler-from-c/33534415#33534415", "title": "Access array defined in inline assembler from C", "body": "<p>Your inline assembler does this</p>\n\n<pre><code>asm(\n            \"number:    \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            [snip rest of array]\n);\n</code></pre>\n\n<p>You then tell <em>C</em> that <em>number</em> is</p>\n\n<pre><code>extern unsigned char* number;\n</code></pre>\n\n<p>This says that <em>number</em> is a pointer to an unsigned character. Then you access it like this:</p>\n\n<pre><code>printf(\"%x \", number[0]);\n</code></pre>\n\n<p>This says to de-reference the pointer in <em>number</em> and return the first character. It would have been the same as doing:</p>\n\n<pre><code>printf(\"%x \", *(number+0));\n</code></pre>\n\n<p>Problem is that <em>number</em> was defined as a pointer. Assuming 32-bit pointers that translates to:</p>\n\n<pre><code>*(0xFFFFFFFF+0)\n</code></pre>\n\n<p>If you get a segfault it is probably because the address 0xFFFFFFFF is not accessible to your program.</p>\n\n<p>You can change your <em>extern</em> statement to read:</p>\n\n<pre><code>extern unsigned char number[32];\n</code></pre>\n\n<p>Now <em>number</em> is an array of 32 unsigned characters. I'd be inclined to use the <code>inttypes.h</code> header and declare it as:</p>\n\n<pre><code>extern uint8_t number[32];\n</code></pre>\n\n<p><code>uint8_t</code> is guaranteed to be 8 bits (or 1 byte). <code>char</code> on the other hand is defined as being a minimum of 8 bits (but can be more). However <code>sizeof(char)</code> will always return 1. I prefer <code>uint8_t</code> (unsigned 8 bit integers) just so you know you are dealing with 8 bit values which seems to be the case here. I'd modify the code to be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;inttypes.h&gt;\n\n__asm__(\n            \"number:    \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFE \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n);\n\nextern uint8_t number[32];\n\nint main() {\n    printf(\"%x \", number[0]);\n    return 0;\n}\n</code></pre>\n\n<p>Also note that if you intend to compile using GCC as C99 (will work with GCC's C89 as well) it is preferable to use <code>__asm__</code> instead of <code>asm</code> since GCC's default is to disable the <code>asm</code> keyword (unless overridden with <code>-fasm</code>) when using <code>-std=c99</code> option.</p>\n\n<p><em>number</em> is probably not a good name for an array of unsigned characters. It may cause confusion when someone has to come along and maintain your code.</p>\n"}], "owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 33534415, "answer_count": 1, "score": 2, "last_activity_date": 1568173756, "creation_date": 1446637767, "last_edit_date": 1568173756, "question_id": 33521099, "link": "https://stackoverflow.com/questions/33521099/access-array-defined-in-inline-assembler-from-c", "title": "Access array defined in inline assembler from C", "body": "<p>I have an integer declared in Assembler, and I use it in C in the following way:</p>\n\n<pre><code>asm(\n            \"number:    \\n\"\n            \".long 0xFFFFFFFF \\n\n);\n\nextern int number;\nint main(){\n    //do something with number\n}\n</code></pre>\n\n<p>Now I want to declare a 32 byte array in Assembler. I tried the following:</p>\n\n<pre><code>asm(\n            \"number:    \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n            \".long 0xFFFFFFFF \\n\"\n);\n\nextern unsigned char* number;\nint main() {\n    printf(\"%x \", number[0]); //gives segmentation fault\n}\n</code></pre>\n\n<p>I do not really know Assembler, but I have to use for this specific variable.</p>\n"}, {"tags": ["java", "c", "exec"], "comments": [{"owner": {"reputation": 20365, "user_id": 1759845, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/RUTxR.jpg?s=128&g=1", "display_name": "BackSlash", "link": "https://stackoverflow.com/users/1759845/backslash"}, "edited": false, "score": 0, "creation_date": 1446637497, "post_id": 33520997, "comment_id": 54823285, "body": "Check for output in the error stream"}], "answers": [{"comments": [{"owner": {"reputation": 1088, "user_id": 4600588, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5281e25d0860b6bb36a0841bce6ee8c0?s=128&d=identicon&r=PG", "display_name": "DaSqy Stc", "link": "https://stackoverflow.com/users/4600588/dasqy-stc"}, "edited": false, "score": 0, "creation_date": 1446640680, "post_id": 33521291, "comment_id": 54825366, "body": "&quot;flush the stdout stream after the printf&quot; is perfect."}], "tags": [], "owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1446645435, "last_edit_date": 1446645435, "creation_date": 1446638226, "answer_id": 33521291, "question_id": 33520997, "link": "https://stackoverflow.com/questions/33520997/java-runtime-execute-c-language-program-get-no-output/33521291#33521291", "title": "Java Runtime execute C language program get no output", "body": "<p>Here's what is happening.</p>\n\n<ol>\n<li><p>The Java program launches the AskMe.exe program.</p></li>\n<li><p>The AskMe.exe writes a line to the output buffer for stdout</p></li>\n<li><p>The AskMe.exe calls <code>getChar</code> which blocks waiting for a character on its standard input.</p></li>\n</ol>\n\n<p>Meanwhile</p>\n\n<ol start=\"4\">\n<li>The Java program attempts to read a line from the child processes standard output.</li>\n</ol>\n\n<p>Deadlock!</p>\n\n<p>The problem is that AskMe.exe has not flushed the standard output buffer yet.  And it won't do that until it exits ... after it has read the character that is never going to arrive!</p>\n\n<p>There are a number of possible fixes, including the following:</p>\n\n<ul>\n<li><p>You could remove the <code>getChar()</code> call.</p></li>\n<li><p>You could explicitly flush the <code>stdout</code> stream after the <code>printf</code>.  (But that just moves the bug to another place.  The Java program will now read and then print \"hello world\" message, and then wait for the the child process to exit ... which won't ever happen.)</p></li>\n<li><p>You could modify the Java program to write a character to child processes standard input.  If you don't modify AskeMe.exe, this has to be done BEFORE the Java program attempts to read from the child ... or you will deadlock, again.</p></li>\n</ul>\n"}], "owner": {"reputation": 1088, "user_id": 4600588, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5281e25d0860b6bb36a0841bce6ee8c0?s=128&d=identicon&r=PG", "display_name": "DaSqy Stc", "link": "https://stackoverflow.com/users/4600588/dasqy-stc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 1, "accepted_answer_id": 33521291, "answer_count": 1, "score": 2, "last_activity_date": 1446645435, "creation_date": 1446637441, "question_id": 33520997, "link": "https://stackoverflow.com/questions/33520997/java-runtime-execute-c-language-program-get-no-output", "title": "Java Runtime execute C language program get no output", "body": "<p>I write a simple C program, and build it to \"AskStack.exe\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    printf(\"Hello world!\\n\");\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>and then i use the java program to exec the C program, i want to get the output.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\n\npublic class Test {\n\n    /**\n     * @param args\n     * @throws Exception \n     */\n    public static void main(String[] args) throws Exception {\n        Process p = Runtime.getRuntime().exec(\"AskStack.exe\");\n        BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));\n        String line = null;\n        do{\n            line = reader.readLine();\n            System.out.println(line);\n        }while(line != null);\n        p.waitFor();\n    }\n\n}\n</code></pre>\n\n<p>but i failed. the java program did not output anything.\ni note that if i remove the getchar() of the C program, it will get the output.\nBut my purpose is to interact with the C program.</p>\n\n<p>So how should i modify my java code? thanks in advance.</p>\n"}, {"tags": ["c", "pipe", "fork", "dup2"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1446637299, "post_id": 33520838, "comment_id": 54823172, "body": "Format your code! Remove unnecessary empty lines."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 1, "creation_date": 1446637853, "post_id": 33520838, "comment_id": 54823499, "body": "You&#39;re talking about<code>popen2()</code> not <code>popen()</code> I guess. I also guess that the 2nd code block is the <code>popen2()</code> function. You should refer to <code>man 2 pipe</code> and read the description. A pipe is represented by 2 file descriptors, one for write and one for read. What you write in it can be read from it. After <code>fork()</code> one of the processes can write in it and the other read from it, so they communicate."}, {"owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "edited": false, "score": 0, "creation_date": 1446877684, "post_id": 33520838, "comment_id": 54936788, "body": "yah i knew this.and also i knew that it was popen2 function.but i cant understand the use of integer to implement of bidirectional pipe and it wasnt in man!!"}], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "edited": false, "score": 0, "creation_date": 1446877537, "post_id": 33530336, "comment_id": 54936762, "body": "i knew this.my main problem was about bidirectional pipe.you know in popen we can just set w or r mood at the second parameter but in my program i need to use rw mood.so i need bidirectional pipe!"}, {"owner": {"reputation": 5635, "user_id": 365340, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/MxRJQ.jpg?s=128&g=1", "display_name": "Karthik Balaguru", "link": "https://stackoverflow.com/users/365340/karthik-balaguru"}, "reply_to_user": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "edited": false, "score": 0, "creation_date": 1447790806, "post_id": 33530336, "comment_id": 55299701, "body": "pipe is unidirectional. popen supports only &#39;r&#39; or &#39;w&#39; and it does not support other option such as &#39;read and write&#39;. In case of bidirectional communication requirement using pipes, you might need to implement two pipes such that one for each direction."}], "tags": [], "owner": {"reputation": 5635, "user_id": 365340, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/MxRJQ.jpg?s=128&g=1", "display_name": "Karthik Balaguru", "link": "https://stackoverflow.com/users/365340/karthik-balaguru"}, "is_accepted": false, "score": 2, "last_activity_date": 1446665958, "last_edit_date": 1592644375, "creation_date": 1446665051, "answer_id": 33530336, "question_id": 33520838, "link": "https://stackoverflow.com/questions/33520838/how-does-popen2-work-in-c/33530336#33530336", "title": "how does popen2() work in c?", "body": "<blockquote>\n<p>i dont understand the popen function.</p>\n<p>how can pipes comunicate with each other?</p>\n</blockquote>\n<p><strong>pipe() :</strong> A pipe is unidirectional and a byte stream buffer in kernel. As it is of type byte stream, a writer can write in arbitrary number of bytes and reader can read out arbitrary number of bytes. However, note that sequential reads are possible , but seek (like lseek) is not possible. Since pipe is uni-directinal, the data that is written into pipe shall be buffered in kernel, until it is read from the read-end of the pipe. Also, if pipe gets full, the write blocks.</p>\n<p>Let's consider that fd is an integer array of 2 file descriptors (int fd[2]), then the pipe(fd) system call shall create a pipe and return a pair of file  descriptors  such that fd[1] (stdout is 1)  shall be the write-end of the pipe and the fd[0] (stdin is 0) shall be the read-end of the pipe. Unlike named pipe(like FIFO - a pipe with name in File system), the anonymous pipes can be used only between related processes like parent-child. So, fork shall be done to duplicate these 2 parent file descriptors in child, thereby parent shares the pipe with child so that the child shall write in write-end and parent shall read from read-end of pipe or Parent shall write into write-end and child shall read from read-end of pipe. Care should be taken to ensure to close the unused read(fd[0]) file descriptor / unused write(fd[1]) file descriptor by the parent or child as per the scenario.</p>\n<p><strong>popen() :</strong> popen enables you to invoke another program as a new process and thereby transmit data to it or receive data from it. In case of popen, note that the direction of data flow is based on the 2nd argument. We need not manually create a child process as popen automatically forks for creating a child process, starts a shell and executes the command argument passed via popen. It also establishes appropriate read or write stream between parent and child automatically based on the type argument.</p>\n<p>Thus, popen() simplifies things, as it avoids the need to manually call/invoke pipe,fork,exec and simplifies establishment of appropriate streams between parent / child automatically as per argument type. However, the other side of popen is that, it should be noted that every invocation of the popen() shall result in creation of extra process - that is, the shell is invoked every time apart from the program that is being invoked which in-turn leads to high resource consumption.</p>\n"}], "owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2088, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1446665958, "creation_date": 1446636955, "last_edit_date": 1446639159, "question_id": 33520838, "link": "https://stackoverflow.com/questions/33520838/how-does-popen2-work-in-c", "title": "how does popen2() work in c?", "body": "<p>im trying to execute md5sume command in my programm using pipe,fork and dup.i found sum code that run succesfully but i cant understand some line of code. Here is my code:</p>\n\n<pre><code>int infp, outfp;\n\nchar buf[128];\n\nif (popen2(\"md5sum\", &amp;infp, &amp;outfp) &lt;= 0)\n\n  {\n\n    printf(\"Unable to exec sort\\n\");\n\n    exit(1);\n\n  }\n\nwrite(infp, \"hello\\n\", 2);\n\nclose(infp);\n\n*buf = '\\0';\n\nread(outfp, buf, 128);\n\nprintf(\"buf = '%s'\\n\", buf);\n\nreturn 0;\n\n}\n</code></pre>\n\n<hr>\n\n<pre><code>int p_stdin[2], p_stdout[2];\n\npid_t pid;\n\nif (pipe(p_stdin) != 0 || pipe(p_stdout) != 0)\n\n  return -1;\n\npid = fork();\n\nif (pid &lt; 0)\n\n  return pid;\n\nif (pid == 0)\n\n  {\n\n    close(p_stdin[WRITE]);\n\n    dup2(p_stdin[READ], READ);\n\n    close(p_stdout[READ]);\n\n    dup2(p_stdout[WRITE], WRITE);\n\n    execl(\"/bin/sh\", \"sh\", \"-c\", command, NULL);\n\n    perror(\"execl\");\n\n    exit(1);\n\n  }\n\nelse \n\n  {\n\nif (infp == NULL)\n\n    close(p_stdin[WRITE]);\n\nelse\n\n    *infp = p_stdin[WRITE];\n\nif (outfp == NULL)\n\n    close(p_stdout[READ]);\n\nelse\n\n    *outfp = p_stdout[READ];\n  }\n\nreturn pid;\n\n}\n</code></pre>\n\n<p>i dont understand the popen function. What does this line exactly do?</p>\n\n<pre><code>*infp = p_stdin[WRITE];\n</code></pre>\n\n<p>how can pipes comunicate with each other?</p>\n"}, {"tags": ["c", "caching", "operating-system"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1446635622, "post_id": 33520251, "comment_id": 54822070, "body": "Is this really a problem for you? Have you measured and profiled to make sure what you think is the bottleneck really is? It&#39;s not a case of premature optimization? And why have a structure with members you do not use? And what requirement or design rationale is there to create a structure so large that you have to worry about the CPU cache and performance due to its size?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446635867, "post_id": 33520251, "comment_id": 54822243, "body": "And <code>malloc</code> will really allocate stack-aligned? There is no &quot;unexpected alignment? ... too broad. Write your code to be most maintainable first. Then benchmark. If it <b>really</b> is too slow, profile then optimise the hotspots. Re-iterate."}, {"owner": {"reputation": 966, "user_id": 1386127, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/01cef9fb064e908463d83e6cb1f08cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Soumen", "link": "https://stackoverflow.com/users/1386127/soumen"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446635956, "post_id": 33520251, "comment_id": 54822318, "body": "@JoachimPileborg I have to use the unused variables in future, so they are there. Compiling out the unused part improves performance. I don&#39;t know if I can reduce the structure size (this is a packet metadata structure, somewhat like sk_buff of linux). Also, I am curious from theoretical aspect of the problem."}, {"owner": {"reputation": 966, "user_id": 1386127, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/01cef9fb064e908463d83e6cb1f08cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Soumen", "link": "https://stackoverflow.com/users/1386127/soumen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446636119, "post_id": 33520251, "comment_id": 54822428, "body": "@Olaf Cache line size is 64 bytes. I have checked that malloc allocates the structure aligned to 64 byte boundary (which it should in normal case, as my structure is 64 byte aligned)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446636258, "post_id": 33520251, "comment_id": 54822511, "body": "I don&#39;t see any alignnment specifiers. However, read the comments carefully again. And SO is not a discussion forum either. Write running code and maybe post this on code review, but read their FAQs first."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1446637357, "post_id": 33520251, "comment_id": 54823197, "body": "You mean <code>*foo</code>. Please post actual runnable code."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1446639136, "post_id": 33520251, "comment_id": 54824388, "body": "The code you have posted will have the same performance regardless of the size of the struct because it will never finish because you have an endless loop. What does &quot;improves performance&quot; mean? What do you measure? How do you measure it? Is your sample size big enough? How many of those structs do you allocate? Do you free them?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 1, "creation_date": 1449008446, "post_id": 33520251, "comment_id": 55818114, "body": "From the pure standpoint of a uniform cache line, yes, it should not impact performance provided those cold fields aren&#39;t being accessed. There could be other factors though that impact this like paging with a larger structure."}], "owner": {"reputation": 966, "user_id": 1386127, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/01cef9fb064e908463d83e6cb1f08cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Soumen", "link": "https://stackoverflow.com/users/1386127/soumen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543987720, "creation_date": 1446635260, "last_edit_date": 1543987720, "question_id": 33520251, "link": "https://stackoverflow.com/questions/33520251/performance-dependency-on-structure-size", "title": "Performance dependency on structure size", "body": "<p>I have a structure like this</p>\n\n<pre><code>struct mystruct {\n  /* used variables */\n  /* cache line 1 */\n  &lt;variables&gt;\n\n  /* cache line 2 */\n  &lt;variables&gt;\n\n  ...\n\n  /* unused variables */\n  /* cache line n */\n  &lt;variables&gt;\n  /* cache line n+1 */\n  &lt;variables&gt;\n};\n</code></pre>\n\n<p>As shown above I have grouped variables, which are similar, into cache lines within the structure. There are also some unused variables (also grouped in cache lines), which will be used later.</p>\n\n<p>Now I am using this structure like this</p>\n\n<pre><code>struct mystruct *foo = malloc(sizeoof(struct mystruct));\n\nwhile (1) \n{\n  /* access variables from used part only */\n}\n</code></pre>\n\n<p>So as far as I know, as I am not accessing the variables of the unused part of the structure, those variables will never be cached. So, even if I store some unused variables in the structure, code performance should not degrade from if I had only stored the used variables.</p>\n\n<p>Am I right?</p>\n"}, {"tags": ["c", "compiler-errors"], "comments": [{"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 4, "creation_date": 1446633006, "post_id": 33519393, "comment_id": 54820377, "body": "check the very first line #include &lt;`stdio.h&gt;"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1446633007, "post_id": 33519393, "comment_id": 54820378, "body": "Please copy-paste the compiler output, using images for text is very annoying and brittle (I can&#39;t access the image due to some redirection failure)."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 4, "creation_date": 1446633018, "post_id": 33519393, "comment_id": 54820393, "body": "<code>==</code> operator is not an hypotetical <code>any_of_these()</code> function. <code>if (oper == &#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;&#47;&#39;, &#39;S&#39;)</code> is wrong, you <b>may</b> rewrite it as <code>if (oper == &#39;+&#39; || oper == &#39;-&#39; || oper == &#39;*&#39;)</code>but because you already have a <code>switch</code> construct you may drop that in favor of <code>default</code> block. Note that your error message <i>&quot;Error. Please ensure you enter...&quot;</i> is actually never shown..."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446633268, "post_id": 33519393, "comment_id": 54820561, "body": "You could use <code>if (strchr(&quot;+-*&#47;S&quot;, oper))</code> instead of <code>if (oper == &#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;&#47;&#39;, &#39;S&#39;)</code>. Or even just drop the whole <code>if</code>-clause, as it does the same as the <code>switch</code>&#39;s <code>default</code> branch."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1446633771, "post_id": 33519393, "comment_id": 54820861, "body": "What did you expect <code>(oper == &#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;&#47;&#39;, &#39;S&#39;)</code> to do?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1446636601, "post_id": 33519393, "comment_id": 54822746, "body": "Do not post external links or images in general. Site rules require all relevant information <b>in</b> the question, unless this is not possible."}, {"owner": {"reputation": 27, "user_id": 4174643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1fG4.jpg?s=128&g=1", "display_name": "Dilshan De Zoysa", "link": "https://stackoverflow.com/users/4174643/dilshan-de-zoysa"}, "edited": false, "score": 0, "creation_date": 1446649670, "post_id": 33519393, "comment_id": 54831670, "body": "Thank you very much for the support. Finally, got it right!"}], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 4012159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793c50ef837e295b43fbe7e90d21ec0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Debott&#233;", "link": "https://stackoverflow.com/users/4012159/benjamin-debott%c3%a9"}, "is_accepted": false, "score": 3, "last_activity_date": 1446633353, "creation_date": 1446633353, "answer_id": 33519600, "question_id": 33519393, "link": "https://stackoverflow.com/questions/33519393/what-have-i-done-wrong-here/33519600#33519600", "title": "What have I done wrong here?", "body": "<p>First, be cautious about your inclusion :</p>\n\n<pre><code>#include &lt;`stdio.h&gt; \n</code></pre>\n\n<p>should be </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n</code></pre>\n\n<p>Furthermore, you can't use the if-keyword the way you did :</p>\n\n<pre><code>if (oper == '+', '-', '*', '/', 'S')\n</code></pre>\n\n<p>should be :</p>\n\n<pre><code>if (oper == '+' || oper =='-' || oper == '*' || oper == '/' || oper ==  'S')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 4, "last_activity_date": 1446633759, "last_edit_date": 1446633759, "creation_date": 1446633444, "answer_id": 33519637, "question_id": 33519393, "link": "https://stackoverflow.com/questions/33519393/what-have-i-done-wrong-here/33519637#33519637", "title": "What have I done wrong here?", "body": "<p>Following the rules for the <code>,</code>-operator this</p>\n\n<pre><code>if (oper == '+', '-', '*', '/', 'S')\n</code></pre>\n\n<p>is the same as this</p>\n\n<pre><code>if ('-', '*', '/', 'S')\n</code></pre>\n\n<p>is the same as this</p>\n\n<pre><code>if ('*', '/', 'S')\n</code></pre>\n\n<p>is the same as this</p>\n\n<pre><code>if ('/', 'S')\n</code></pre>\n\n<p>is the same as this</p>\n\n<pre><code>if ('S')\n</code></pre>\n\n<p>which is not equal <code>0</code> and though is always \"<em>true</em>\".</p>\n\n<p>From the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.17p2\" rel=\"nofollow\">C11 Standard (draft)</a>:</p>\n\n<blockquote>\n  <p><strong>6.5.17 Comma operator</strong></p>\n  \n  <p>[...]</p>\n  \n  <p><strong>Semantics</strong></p>\n  \n  <p><strong>2</strong> The left operand of a comma operator is evaluated as a void expression; there is a\n  sequence point between its evaluation and that of the right operand. Then the right\n  operand is evaluated; the result has its type and value.</p>\n</blockquote>\n"}], "owner": {"reputation": 27, "user_id": 4174643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1fG4.jpg?s=128&g=1", "display_name": "Dilshan De Zoysa", "link": "https://stackoverflow.com/users/4174643/dilshan-de-zoysa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 33519637, "answer_count": 2, "score": 0, "last_activity_date": 1446633759, "creation_date": 1446632775, "last_edit_date": 1446633173, "question_id": 33519393, "link": "https://stackoverflow.com/questions/33519393/what-have-i-done-wrong-here", "title": "What have I done wrong here?", "body": "<p>I've tried this many times but I can't figure out what's wrong! Please help me to solve this error.</p>\n\n<pre><code>#include &lt;`stdio.h&gt;\n\nint main(void)\n{\n  float accum = 0, number = 0;\n  char oper;\n\n  printf(\"\\nHello. This is a simple 'printing' calculator. Simply enter the number followed\");\n  printf(\" by the operator that you wish to use. \");\n  printf(\"It is possible to use the standard \\noperators ( +, -, *, / ) as well as two extra \");\n  printf(\"operators:\\n\");\n  printf(\"1) S, which sets the accumulator; and\\n\");\n  printf(\"2) N, that ends  the calculation (N.B. Must place a zero before N). \\n\");\n\n  do\n  {\n    printf(\"\\nPlease enter a number and an operator: \");\n    scanf(\"%f %c\", &amp;number, &amp;oper);\n    if (number == 0 &amp;&amp; oper == 'N')\n    {\n      printf(\"Total = %f\", accum);\n      printf(\"\\nEnd of calculations.\");\n    }\n    else if (oper == '+', '-', '*', '/', 'S')\n    {\n      switch (oper)\n      {\n        case 'S':\n          accum = number;\n          printf(\"= %f\", accum);\n          break;\n        case '+':\n          accum = accum + number;\n          printf(\"= %f\", accum);\n          break;\n        case '-':\n          accum = accum - number;\n          printf(\"= %f\", accum);\n          break;\n        case '*':\n          accum = accum * number;\n          printf(\"= %f\", accum);\n          break;\n        case '/':\n          if (number != 0)\n          {\n            accum = accum / number;\n            printf(\"= %f\", accum);\n          }\n          else\n            printf(\"Cannot divide by zero.\");\n          break;\n        default:\n          printf(\"Error. Please ensure you enter a correct number and operator.\");\n          break;\n      }\n    }\n    else\n      printf(\"Error. Please ensure you enter a correct number and operator.\");\n  }\n  while (oper != 'N');\n  return 0;\n}\n</code></pre>\n\n<p>When I compile this code I get the following error as in the snapshot image here.\n<a href=\"http://i.stack.imgur.com/GSjbK.jpg\" rel=\"nofollow\">snapshot of error message</a></p>\n"}, {"tags": ["c++", "c", "unit-testing", "state-machine"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 2837591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/467b22028f01cc4230c6d627709ea489?s=128&d=identicon&r=PG&f=1", "display_name": "Enok82", "link": "https://stackoverflow.com/users/2837591/enok82"}, "edited": false, "score": 0, "creation_date": 1446636411, "post_id": 33519778, "comment_id": 54822614, "body": "What i was hoping to achieve was not access to the <code>static</code> variable but rather a way to create a new, fresh instance of the statemachine.  Yes the multiple executives way has occured to me but as you say it will take magnitudes of extra time versus just performing another run on a new object."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 115, "user_id": 2837591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/467b22028f01cc4230c6d627709ea489?s=128&d=identicon&r=PG&f=1", "display_name": "Enok82", "link": "https://stackoverflow.com/users/2837591/enok82"}, "edited": false, "score": 0, "creation_date": 1446637243, "post_id": 33519778, "comment_id": 54823134, "body": "@Enok82 But there is no concept of an &quot;instance&quot; with this kind of C code. A global variable is a global variable, forever. It will be initialized by the startup code (before <code>main()</code> runs in a normal program) and that can&#39;t be called again later."}, {"owner": {"reputation": 115, "user_id": 2837591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/467b22028f01cc4230c6d627709ea489?s=128&d=identicon&r=PG&f=1", "display_name": "Enok82", "link": "https://stackoverflow.com/users/2837591/enok82"}, "edited": false, "score": 0, "creation_date": 1446645625, "post_id": 33519778, "comment_id": 54828645, "body": "Success... your pointer to dynamic code loading sent me down a path that led to something quite useful. I will post my solution here in a minute or two! Thanks!"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1446633849, "creation_date": 1446633849, "answer_id": 33519778, "question_id": 33519285, "link": "https://stackoverflow.com/questions/33519285/how-to-reset-state-machines-when-unit-testing-c/33519778#33519778", "title": "How to reset state machines when unit testing C", "body": "<p>The wrapping won't help. The C++ code has no way of reaching the internal <code>static</code> variable inside the state machine written in C.</p>\n\n<p>One solution is to use dynamic code loading for the C  parts, that will make the early initialization code and clear the <code>static</code> variable.</p>\n\n<p>You could also split the tests into multiple executables, that has the same effect but probably larger overhead (=tests will run more slowly).</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 2837591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/467b22028f01cc4230c6d627709ea489?s=128&d=identicon&r=PG&f=1", "display_name": "Enok82", "link": "https://stackoverflow.com/users/2837591/enok82"}, "is_accepted": true, "score": 1, "last_activity_date": 1447319071, "last_edit_date": 1495541036, "creation_date": 1446647899, "answer_id": 33524598, "question_id": 33519285, "link": "https://stackoverflow.com/questions/33519285/how-to-reset-state-machines-when-unit-testing-c/33524598#33524598", "title": "How to reset state machines when unit testing C", "body": "<p>@unwind sent me looking at dynamic code loading!<br>\nReading these:\n<a href=\"https://stackoverflow.com/questions/8696653/dynamically-load-a-function-from-a-dll\">Dynamically load a function from a DLL</a> and <a href=\"http://www.transmissionzero.co.uk/computing/building-dlls-with-mingw/\" rel=\"nofollow noreferrer\">http://www.transmissionzero.co.uk/computing/building-dlls-with-mingw/</a> gave me enough to concoct the following solution.</p>\n\n<p>in statemachine.h:</p>\n\n<pre><code>    void stateMachine(void);\n</code></pre>\n\n<p>in statemachine.c:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    void stateMachine(void)\n    {\n      static int myState = 0;\n\n      switch(myState)\n      {\n      case 0:\n      {\n        printf(\"Init State\");\n        myState = 1;\n        break;\n      }\n      case 1:\n      {\n        printf(\"Second state\");\n        break;\n      }\n      default:\n      {\n        printf(\"Default\");\n        break;\n      }\n      }\n    }\n</code></pre>\n\n<p>in statemachinelib.c:</p>\n\n<pre><code>    #include \"statemachine.h\"\n\n    __declspec(dllexport) void __cdecl statemachineWrap()\n    {\n      stateMachine();\n    }\n</code></pre>\n\n<p>in main.c:</p>\n\n<pre><code>    #include &lt;windows.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;stdio.h&gt;\n\n    typedef int (__stdcall *f_funci)();\n\n    int main(int argc, char **argv)\n    {\n      HINSTANCE hGetProcIDDLL = LoadLibrary(\"statemachinelib.dll\");\n\n      f_funci funci = (f_funci)GetProcAddress(hGetProcIDDLL, \"statemachineWrap\");\n\n      funci();\n\n      funci();\n\n      funci();\n\n      FreeLibrary(hGetProcIDDLL);  //Windows detects that no one is using this library anymore and unloads it from memory, giving the new LoadLibrary a fresh instance\n\n      hGetProcIDDLL = LoadLibrary(\"statemachinelib.dll\");\n\n      funci = (f_funci)GetProcAddress(hGetProcIDDLL, \"statemachineWrap\");\n\n      funci();\n\n      funci();\n\n      funci();\n\n      return 0;\n    }\n</code></pre>\n\n<p>In this code i have omitted a lot of safety statements such as checking if the DLL could be loaded, if the function is found, whether we want too dllexport or dllimport and so on only to make it easier to grasp what is going on. If you are going to implement this in any real project you should at least read both of the resources i mentioned above.</p>\n\n<p>compilation of the DLL using MinGW:</p>\n\n<pre><code>&gt;gcc -c statemachine.c statemachinelib.c\n&gt;gcc -o statemachinelib.dll -s -shared statemachinelib.o statemachine.o -Wl,--subsystem,windows\n</code></pre>\n\n<p>compilation of the executable, also MinGW:</p>\n\n<pre><code>&gt;gcc -o main.exe main.c\n</code></pre>\n\n<p>execution yields:</p>\n\n<pre><code>&gt;main.exe\nInit State\nSecond state\nSecond state\nInit State\nSecond state\nSecond state\n</code></pre>\n\n<p>I'll just leave this here for a few days and if no one objects i will mark this as my accepted answer!</p>\n\n<p>Edit: I have elaborated a bit and there's another (solved) question from me here with just a slight tweak <a href=\"https://stackoverflow.com/questions/33667049/exporting-a-function-cast-into-a-pointer-through-a-dll\">Exporting a function, cast into a pointer through a DLL</a></p>\n"}], "owner": {"reputation": 115, "user_id": 2837591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/467b22028f01cc4230c6d627709ea489?s=128&d=identicon&r=PG&f=1", "display_name": "Enok82", "link": "https://stackoverflow.com/users/2837591/enok82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 1, "accepted_answer_id": 33524598, "answer_count": 2, "score": 4, "last_activity_date": 1447319071, "creation_date": 1446632516, "question_id": 33519285, "link": "https://stackoverflow.com/questions/33519285/how-to-reset-state-machines-when-unit-testing-c", "title": "How to reset state machines when unit testing C", "body": "<p>I have a se of embedded C for a TI processor that need to be unit tested.<br>\nFor target compilation IAR is used but i am running the tests on a Win7 machine using MinGW GCC.</p>\n\n<p>In the C code there are functions containing state machines that sometimes need to be reset between tests. These state machines often keep their state variable locally static, making that task difficult if not impossible.</p>\n\n<p>I'm not very C++ class savvy but i had an idea about \"importing\" the C functions into a wrapping C++ class as memberfunctions making it possible to just create a new object whenever a reset i needed. The code below is non functional but it illustrates my idea.</p>\n\n<p>in main.cpp:</p>\n\n<pre><code>    #include \"statemachine.h\"\n\n    using namespace std;\n\n    class stateMachineWrapper {\n    public:\n        extern void stateMachine(void);\n    };\n\n    int main() {\n        stateMachineWrapper myObject;\n\n        myObject.stateMachine();\n\n        myObject.stateMachine();\n\n        stateMachineWrapper myNewObject;\n\n        myNewObject.stateMachine();\n\n        myNewObject.stateMachine();\n\n        return 0;\n    }\n</code></pre>\n\n<p>in statemachine.h:</p>\n\n<pre><code>    void stateMachine(void);\n</code></pre>\n\n<p>in statemachine.c:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    void stateMachine(void)\n    {\n      static int myState = 0;\n\n      switch(myState)\n      {\n      case 0:\n      {\n        printf(\"Init State\");\n        myState = 1;\n        break;\n      }\n      case 1:\n      {\n        printf(\"Second state\");\n        break;\n      }\n      default:\n      {\n        printf(\"Default\");\n        break;\n      }\n      }\n    }\n</code></pre>\n\n<p>Alterations to the statemachine.c/.h is not encouraged since it can be considered \"legacy\".<br>\nAny other solutions is of course welcome as well!</p>\n"}, {"tags": ["c", "openssl", "cryptography"], "comments": [{"owner": {"reputation": 338, "user_id": 4012159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793c50ef837e295b43fbe7e90d21ec0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Debott&#233;", "link": "https://stackoverflow.com/users/4012159/benjamin-debott%c3%a9"}, "edited": false, "score": 1, "creation_date": 1446631602, "post_id": 33518893, "comment_id": 54819428, "body": "You should post more information about the error encountered : edit your post and give the failed compilation log"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1446631652, "post_id": 33518893, "comment_id": 54819460, "body": "<i>I have seen some people say that you need to use -lcrypto but I am confused what they are referring to</i> &lt;- this is the solution to your problem"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1446632629, "post_id": 33518893, "comment_id": 54820114, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 49, "user_id": 5523981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e705c9cf35962ea8a2b28dab290b889?s=128&d=identicon&r=PG&f=1", "display_name": "The Nutty Professor", "link": "https://stackoverflow.com/users/5523981/the-nutty-professor"}, "edited": false, "score": 0, "creation_date": 1446632710, "post_id": 33518893, "comment_id": 54820173, "body": "I might sound silly but I dont know what -lcrypto is and how I am supposed to use it. I thought maybe this is a header file but no. What do you suggest."}, {"owner": {"reputation": 338, "user_id": 4012159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5793c50ef837e295b43fbe7e90d21ec0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Debott&#233;", "link": "https://stackoverflow.com/users/4012159/benjamin-debott%c3%a9"}, "edited": false, "score": 0, "creation_date": 1446633117, "post_id": 33518893, "comment_id": 54820471, "body": "You need to add a compilation flag to tell your compiler &quot;Hey man, you need &#39;crypto&#39; to build my program&quot;. This is done by adding -lcrypto. You should read some documentation about how a C program works and how it is compiled"}, {"owner": {"reputation": 49, "user_id": 5523981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e705c9cf35962ea8a2b28dab290b889?s=128&d=identicon&r=PG&f=1", "display_name": "The Nutty Professor", "link": "https://stackoverflow.com/users/5523981/the-nutty-professor"}, "edited": false, "score": 0, "creation_date": 1446633930, "post_id": 33518893, "comment_id": 54820951, "body": "Zenith I went through your refereed post but could not locate a possible solution in the added link"}, {"owner": {"reputation": 49, "user_id": 5523981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e705c9cf35962ea8a2b28dab290b889?s=128&d=identicon&r=PG&f=1", "display_name": "The Nutty Professor", "link": "https://stackoverflow.com/users/5523981/the-nutty-professor"}, "edited": false, "score": 0, "creation_date": 1446636899, "post_id": 33518893, "comment_id": 54822908, "body": "Ben: could you please elaborate briefly: &quot;you need crypto&quot;. The other problem is that I think it is not possible to add compilation flags in DevC++. correct me if I am wrong."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1446637762, "post_id": 33518893, "comment_id": 54823443, "body": "&quot;I think it is not possible to add compilation flags in DevC++. correct me if I am wrong.&quot;. I&#39;m correcting you. You are wrong."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5523981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e705c9cf35962ea8a2b28dab290b889?s=128&d=identicon&r=PG&f=1", "display_name": "The Nutty Professor", "link": "https://stackoverflow.com/users/5523981/the-nutty-professor"}, "edited": false, "score": 0, "creation_date": 1446643076, "post_id": 33521711, "comment_id": 54826956, "body": "I followed your exact step. Now I am getting the error &quot;cannot find -lcrypto&quot;"}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 49, "user_id": 5523981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e705c9cf35962ea8a2b28dab290b889?s=128&d=identicon&r=PG&f=1", "display_name": "The Nutty Professor", "link": "https://stackoverflow.com/users/5523981/the-nutty-professor"}, "edited": false, "score": 0, "creation_date": 1446644685, "post_id": 33521711, "comment_id": 54828009, "body": "Is the error just <code>cannot find -lcrypto</code> or are there some <code>skipping incompatible ...</code> messages before it? If it&#39;s just missing, then you need to add the path to the library in the <code>Library Directories</code> option of the <code>Directories</code> tab of the project properties. On my system this directory is <code>C:\\Program Files (x86)\\Dev-cpp\\lib</code>, it may be different for you. If the error is about incompatible libraries, then it&#39;s likely that you&#39;re compiling in 64bit, while the dev package is 32bit. If that&#39;s the case, then you can choose to compile in 32bit, or find/obtain a 64bit copy of the devpack"}], "tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1446639452, "creation_date": 1446639452, "answer_id": 33521711, "question_id": 33518893, "link": "https://stackoverflow.com/questions/33518893/undefined-reference-to-sha1/33521711#33521711", "title": "Undefined reference to &#39;SHA1&#39;", "body": "<p>in your project options, in the <code>Parameters</code> tab you have three boxes for options, one specifies <code>C compiler</code>, the second specifies <code>C++ Compiler</code> the third specifies <code>Linker</code>.</p>\n\n<p>In the <code>Linker</code> box you need to add <code>-lcrypto</code> and rebuild your project.</p>\n\n<p>This is specific to the Dev-C++ development environment, but duplicates what people are telling you in the comments.</p>\n\n<blockquote>\n  <p>I presume you're using the Dev-C++ v5.11 version as the last one available on the bloodshed website is a beta and doesn't work on my system, which is Win 10.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 5523981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e705c9cf35962ea8a2b28dab290b889?s=128&d=identicon&r=PG&f=1", "display_name": "The Nutty Professor", "link": "https://stackoverflow.com/users/5523981/the-nutty-professor"}, "is_accepted": true, "score": 0, "last_activity_date": 1446723326, "creation_date": 1446723326, "answer_id": 33543533, "question_id": 33518893, "link": "https://stackoverflow.com/questions/33518893/undefined-reference-to-sha1/33543533#33543533", "title": "Undefined reference to &#39;SHA1&#39;", "body": "<p>Thanks to all those who have contributed and assisted in solving the problem. Special thanks to Prof Petesh ;) without whos help I would have wasted another week.</p>\n\n<p>I will provide the details as follows:</p>\n\n<ul>\n<li><p>First of all download the latest DEVC++ preferably 5.11. Make sure you use the correct 32/64 bit version of the compiler otherwise you will encounter linking/ build errors.</p></li>\n<li><p>-lcrypto and other libraries need to be added to the project by going to project options->Parameters-> Linker. The files can be added by<br>\nusing the add library or object button.</p></li>\n<li><p>Ensure that the include directory holds the link to the openssl<br>\nfolder. In my system the path was \"C:\\Program Files<br>\n(x86)\\Dev-Cpp\\include\"</p></li>\n</ul>\n"}], "owner": {"reputation": 49, "user_id": 5523981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e705c9cf35962ea8a2b28dab290b889?s=128&d=identicon&r=PG&f=1", "display_name": "The Nutty Professor", "link": "https://stackoverflow.com/users/5523981/the-nutty-professor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 0, "accepted_answer_id": 33543533, "answer_count": 2, "score": 0, "last_activity_date": 1446723326, "creation_date": 1446631463, "last_edit_date": 1446634009, "question_id": 33518893, "link": "https://stackoverflow.com/questions/33518893/undefined-reference-to-sha1", "title": "Undefined reference to &#39;SHA1&#39;", "body": "<p>I am using Bloodshed DevC++ in windows 7. I installed the OpenSSL library package using the package installation feature in DEV.</p>\n\n<p>I started with a simple C code to find the SHA. I am sure that the libraries are connecting correctly. But for some odd reason I am getting a linker error i.e. [linker error] Undefined reference to 'SHA1'</p>\n\n<p>I have seen other sites including SOF but I am unable to figure out the source of the problem. I have seen various posts on SOF that address this issue but non of the comments address the problem I encounter. Any assistance will be highly appreciated. I have seen some people say that you need to use -lcrypto but I am confused what they are referring to.</p>\n\n<p>[EDIT]</p>\n\n<p>I give the code as follows:</p>\n\n<pre><code>#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;openssl/sha.h&gt;\n\nint main ()\n{\n unsigned char ibuf[] = \"compute sha1\";  \n unsigned char obuf[20];  \n SHA1(ibuf,strlen(ibuf),obuf); \n int i=0;  \n for (i = 0; i &lt; 20; i++)  \n {  \n   printf(\"%02x \", obuf[i]);  \n }  \n printf(\"\\n\");  \n getch();  \n}   \n</code></pre>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1446630933, "post_id": 33518683, "comment_id": 54819011, "body": "OMG. You need a basic C lesson, don&#39;t mind."}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 2, "creation_date": 1446630948, "post_id": 33518683, "comment_id": 54819020, "body": "An especially long lesson on pointers."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 5, "creation_date": 1446630948, "post_id": 33518683, "comment_id": 54819021, "body": "Look up for pass-by-value and then read about pointers."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 1, "creation_date": 1446630976, "post_id": 33518683, "comment_id": 54819040, "body": "@Arc676 beat me by 3 seconds... :)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1446631133, "post_id": 33518683, "comment_id": 54819145, "body": "You&#39;re not passing the variable <code>a</code>, you&#39;re passing its value. (What would you expect to happen if you did <code>change(10,a)</code>? Would ten become sixty?)"}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1446631172, "post_id": 33518683, "comment_id": 54819176, "body": "@molbdnilo that could be a funny behavior :)"}, {"owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "edited": false, "score": 3, "creation_date": 1446632512, "post_id": 33518683, "comment_id": 54820032, "body": "For those bashing this question - it&#39;s a totally legitimate newbie question. You could have answered it properly with no loss of fidelity in the same or fewer characters than your comments consisted of."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446636986, "post_id": 33518683, "comment_id": 54822967, "body": "@SouravGhosh: I would not even think about using pointers here - or confuse OP even more with them. Why not just return the result?"}], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "is_accepted": false, "score": 1, "last_activity_date": 1446632300, "creation_date": 1446632300, "answer_id": 33519211, "question_id": 33518683, "link": "https://stackoverflow.com/questions/33518683/why-has-this-function-no-effect-when-called/33519211#33519211", "title": "Why has this function no effect when called?", "body": "<p>The variable <code>i</code> and <code>j</code> in <code>change()</code> are copies from the variables inside <code>main()</code>. You have to learn about pointers to achieve what you are trying to do. Basically it look like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid change(int *i, int j) {\n    *i = *i + j;\n}\n\nint main() {\n    int a = 50;\n\n    printf(\"a before = %d\\n\", a);\n\n    change(&amp;a, 10);\n\n    printf(\"a after = %d\\n\", a);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1446632673, "creation_date": 1446632673, "answer_id": 33519342, "question_id": 33518683, "link": "https://stackoverflow.com/questions/33518683/why-has-this-function-no-effect-when-called/33519342#33519342", "title": "Why has this function no effect when called?", "body": "<p>Function parameters are its local variables. Function parameters are initialized by <strong>copies</strong> of the values of the supplied arguments. So any changing of a parameter does not influence on the corresponding argument.\nAfter exiting the function its parameters (local variables) are destroyed.</p>\n\n<p>For example you can imagine your function</p>\n\n<pre><code>void change(int i, int j) {\n    i = i + j;\n}\n</code></pre>\n\n<p>that is called like</p>\n\n<pre><code>change(a, 10);\n</code></pre>\n\n<p>the following way</p>\n\n<pre><code>void change(/*int i, int j*/) {\n    int i = a;\n    int j = 10;\n\n    i = i + j;\n}\n</code></pre>\n\n<p>As you can see variable a itself will not be changed.</p>\n\n<p>There are two approaches. Either the first parameter will be passed by reference or the function will return its result. For example</p>\n\n<pre><code>#inlcude &lt;stdio.h&gt;\n\nvoid change( int *i, int j) {\n    *i = *i + j;\n}\n\nint main() {\n    int a = 50;\n\n    printf(\"a before = %d\\n\", a);\n\n    change( &amp;a, 10);\n\n    printf(\"a after = %d\\n\", a);\n    return 0;\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>#inlcude &lt;stdio.h&gt;\n\nint change(int i, int j) {\n    i = i + j;\n\n    return i;\n}\n\nint main() {\n    int a = 50;\n\n    printf(\"a before = %d\\n\", a);\n\n    a = change(a, 10);\n\n    printf(\"a after = %d\\n\", a);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1446637086, "post_id": 33519505, "comment_id": 54823035, "body": "Why would one pass the second argument by pointer? And why not just return the result from the function? Also you are using quite uncommon phrases (e.g. a pointer is not a &quot;tool&quot;). Well meant perhaps to try help a beginner, but not well done, beacuse he has to learn the terms anyway, or will become even more confused."}], "tags": [], "owner": {"reputation": 1142, "user_id": 1463878, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/00d7f2e6e796c07f46e80544cfc5fd62?s=128&d=identicon&r=PG", "display_name": "0xEDD1E", "link": "https://stackoverflow.com/users/1463878/0xedd1e"}, "is_accepted": true, "score": 2, "last_activity_date": 1446633105, "last_edit_date": 1592644375, "creation_date": 1446633105, "answer_id": 33519505, "question_id": 33518683, "link": "https://stackoverflow.com/questions/33518683/why-has-this-function-no-effect-when-called/33519505#33519505", "title": "Why has this function no effect when called?", "body": "<p>This is a very simple case in C.</p>\n<p>In C, It uses a method called Call-By-Value to evaluate function parameters.\nIt means when you called a function with your arguments the called function receives the values of those arguments not the arguments.</p>\n<p>Which in this program, function &quot;change&quot; receives integer 50 (value the 'a' is holding) and 10 instead of a and 10. So i is 50 and j is 10 when you called the function. In the function i is changed to 60. But a remains the same. If you add a printf() to print the value of i in &quot;change&quot; you can see the change happened.</p>\n<p>So to make &quot;change&quot; effective you have to use pointers, a special &quot;tool&quot; in C.</p>\n<p>you have to change your &quot;change&quot; function as following:</p>\n<pre><code>void change(int *pi, int *pj)\n{\n    *pi += *pj;\n}\n</code></pre>\n<p>and you should change the call also.</p>\n<pre><code>int main()\n{\n    int a = 50, b = 10;\n    /* printf line */\n    change(&amp;a, &amp;b);\n    /* printf line */\n}\n</code></pre>\n<p>in the function &quot;change&quot;</p>\n<blockquote>\n<pre><code>   void change(int i, int j)\n</code></pre>\n<p>is changed into</p>\n<pre><code>   void change(int *pi, int *pj)\n</code></pre>\n</blockquote>\n<p>this means that pi, pj are pointers to <code>int</code>. <code>pi</code> &amp; <code>pj</code> are variables to hold an address of a variable.</p>\n<p><code>*pi</code> &amp; <code>*pj</code> are the variable that resides in the addresses that <code>pi</code> &amp; <code>pj</code> have.\nWhich means that <code>*pi</code> refers to (points to) <code>a</code>, <code>*pj</code> points to <code>b</code></p>\n<blockquote>\n<pre><code>   *pi += *pj\n</code></pre>\n<p>is equal to</p>\n<pre><code>   a = a + b;\n</code></pre>\n</blockquote>\n<p>and you can see that I have changed way &quot;change&quot; called</p>\n<p>it is now</p>\n<blockquote>\n<pre><code>   change(&amp;a, &amp;b);\n</code></pre>\n<p>instead of</p>\n<pre><code>   change(a, 10);\n</code></pre>\n</blockquote>\n<p>the ampersand (&amp;) gives the address of a variable\nSo &amp;a and &amp;b are the addresses of a &amp; b, Which are meant to be hold in pi and pj</p>\n<p>I think this lengthy answer would help you. However you should read some lessons about pointers.</p>\n"}], "owner": {"reputation": 61, "user_id": 5523891, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EPTuhDxniAg/AAAAAAAAAAI/AAAAAAAAADQ/lsKUGPOL6cI/photo.jpg?sz=128", "display_name": "Vlad Dracula", "link": "https://stackoverflow.com/users/5523891/vlad-dracula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 33519505, "answer_count": 3, "score": 2, "last_activity_date": 1446633105, "creation_date": 1446630891, "last_edit_date": 1446631294, "question_id": 33518683, "link": "https://stackoverflow.com/questions/33518683/why-has-this-function-no-effect-when-called", "title": "Why has this function no effect when called?", "body": "<p>I'm a newcomer C learner and following code is my problem:</p>\n\n<p>I wrote it to change the value of the passed variable, but in the output notihng has happened.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#inlcude &lt;stdio.h&gt;\n\nvoid change(int i, int j) {\n    i = i + j;\n}\n\nint main() {\n    int a = 50;\n\n    printf(\"a before = %d\\n\", a);\n\n    change(a, 10);\n\n    printf(\"a after = %d\\n\", a);\n    return 0;\n}\n</code></pre>\n\n<p>What is the reason for this error?</p>\n"}, {"tags": ["c", "linux", "pthreads", "mutex", "semaphore"], "comments": [{"owner": {"reputation": 3145, "user_id": 4367286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gItAv.jpg?s=128&g=1", "display_name": "plonser", "link": "https://stackoverflow.com/users/4367286/plonser"}, "edited": false, "score": 1, "creation_date": 1446631046, "post_id": 33518639, "comment_id": 54819082, "body": "I would recommend to use a debugger like gdb, see <a href=\"http://www.unknownroad.com/rtfm/gdbtut/gdbsegfault.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1446631418, "post_id": 33518639, "comment_id": 54819326, "body": "Thank, I ran gdb and it said the error occurred at rand_r function, but now I am having trouble knowing why this function is causing problem."}, {"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 0, "creation_date": 1446631672, "post_id": 33518639, "comment_id": 54819476, "body": "You are passing the value 1 as a pointer: <code>rand_r((unsigned*)1);</code>  This causes the seg fault.  You must pass a valid pointer, e.g. <code>int seed = 1; rand_r(&amp;seed);</code>.  Similarly for the call <code>rand_r(time(NULL));</code>."}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1446631538, "post_id": 33518879, "comment_id": 54819394, "body": "thank, I got the same error log when i ran gdb, but now I dont know why the error occurred at rand_r()"}], "tags": [], "owner": {"reputation": 5392, "user_id": 695787, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/flhSj.jpg?s=128&g=1", "display_name": "Jameson", "link": "https://stackoverflow.com/users/695787/jameson"}, "is_accepted": false, "score": 0, "last_activity_date": 1446631420, "creation_date": 1446631420, "answer_id": 33518879, "question_id": 33518639, "link": "https://stackoverflow.com/questions/33518639/segmentation-faultcore-dumped-error-message/33518879#33518879", "title": "segmentation fault(core dumped) error message", "body": "<p>When I run it in <code>gdb</code>, I see a complaint about <code>rand_r()</code>:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7ffff77f6700 (LWP 6018)]\nrand_r (seed=0x5639d757) at rand_r.c:31\n31  rand_r.c: No such file or directory.\n(gdb) bt \n#0  rand_r (seed=0x5639d757) at rand_r.c:31\n#1  0x0000000000400af7 in ta_check (p=0x0) at foo.c:71\n#2  0x00007ffff7bc4182 in start_thread (arg=0x7ffff77f6700) at pthread_create.c:312\n#3  0x00007ffff78f147d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": true, "score": 4, "last_activity_date": 1446631645, "creation_date": 1446631645, "answer_id": 33518950, "question_id": 33518639, "link": "https://stackoverflow.com/questions/33518639/segmentation-faultcore-dumped-error-message/33518950#33518950", "title": "segmentation fault(core dumped) error message", "body": "<p>The <code>rand_r</code> function needs a pointer to an unsigned int (not the same usage than <code>rand</code>.</p>\n\n<p>So you should do:</p>\n\n<pre><code>unsigned int myrand = (unsigned int)time(NULL);\nrand_r(&amp;myrand);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1446632997, "post_id": 33519313, "comment_id": 54820366, "body": "Thank, I fix it by using unsigned int seed"}], "tags": [], "owner": {"reputation": 426, "user_id": 5029430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfebca461b5469f748ae8fff3fcea68a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Mills", "link": "https://stackoverflow.com/users/5029430/dan-mills"}, "is_accepted": false, "score": 0, "last_activity_date": 1446632602, "creation_date": 1446632602, "answer_id": 33519313, "question_id": 33518639, "link": "https://stackoverflow.com/questions/33518639/segmentation-faultcore-dumped-error-message/33519313#33519313", "title": "segmentation fault(core dumped) error message", "body": "<p>This is your problem:  rand_r((unsigned*)1) (Also rand_r(time(NULL))</p>\n\n<p>Any time you find yourself casting a literal to a pointer (and you are not doing deeply embedded programming) you should be suspicious (And when you are writing drivers you should be paranoid instead). </p>\n\n<p>In this instance, rand_r WRITES to the memory pointed to by the pointer so this needs to be a per thread int, not a literal. </p>\n\n<p>rand_r(time(NULL) will not segfault but also will not work as you expect because you are in effect re seeding the RNG with the current time every time you call the thing (I expect the RNG output to change precisely once a second in this case). </p>\n\n<p>Easiest thing might be to make the students and TAs small structures and have each contain an int rand_state which you can initialise with random values before starting the threads (The initial seeds), then calling rand_r (&amp;student->rand_state) will give you the result you expect. \nThese structures could also contain the pthread for the student or TA.</p>\n\n<p>Regards, Dan.</p>\n"}], "owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1174, "favorite_count": 0, "accepted_answer_id": 33518950, "answer_count": 3, "score": 3, "last_activity_date": 1446632602, "creation_date": 1446630776, "question_id": 33518639, "link": "https://stackoverflow.com/questions/33518639/segmentation-faultcore-dumped-error-message", "title": "segmentation fault(core dumped) error message", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n\npthread_mutex_t mutex_lock;\n\n/* semaphore declarations */\nsem_t students_sem; /* ta waits for a student to show up, student notifies ta his/her arrival */\nsem_t ta_sem;       /* students waits for ta to help, ta notifies student he/she is ready to help */\n\n/* the number of waiting students */\nint waiting_students;\n\n/* ta sleeping status indicator */\nint ta_sleep = 1;\n/* the maximum time (in seconds) to sleep */\n#define MAX_SLEEP_TIME 3 \n\n/* number of potential students */\n#define NUM_OF_STUDENTS 4\n\n#define NUM_OF_HELPS 2\n\n/* number of available seats */\n#define NUM_OF_SEATS 2\n\n/* Student IDs */\nint stud_id[NUM_OF_STUDENTS];\n\n/* TA and student threads */\npthread_t students_thread[NUM_OF_STUDENTS];\npthread_t ta_thread;\n\n/* function prototype */\nvoid* ta_check(void* p);\nvoid* student_check(void* p);\n\nint main (void) \n{\n    /* local variable declaration */\n    int i;\n\n    /* initialize mutex and semaphore */\n    pthread_mutex_init(&amp;mutex_lock, NULL);\n    sem_init(&amp;ta_sem, 0, 0);\n    sem_init(&amp;students_sem,0,0);\n\n    /* create ta thread */\n    pthread_create(&amp;ta_thread, 0, ta_check,0);\n\n    /* create student threads */\n    for (i = 0; i &lt; NUM_OF_STUDENTS; i++)\n        pthread_create(&amp;students_thread[i], 0, student_check,(void*)&amp;stud_id[i]);\n\n    /* join student threads */\n    for (i = 0; i &lt; NUM_OF_STUDENTS; i++)\n        pthread_join(students_thread[i], NULL);\n\n    /* cancel ta thread when all student threads terminate */\n    pthread_cancel(ta_thread);\n    printf(\"The TA finished helping all students.\\n\");\n\n    return 0;\n}\n\nvoid* ta_check(void* p)\n{\n    /* invoke random number generator */\n    rand_r(time(NULL));\n    while (1)\n    {\n        pthread_mutex_lock(&amp;mutex_lock);\n        ta_sleep = 1;\n        pthread_mutex_unlock(&amp;mutex_lock);\n        sem_wait(&amp;students_sem);\n        // help a student \n        printf(\"Helping a student for %d seconds, # of waiting students = %d\", MAX_SLEEP_TIME, waiting_students);\n        sleep(MAX_SLEEP_TIME);\n        // check if there are more student to help\n        while (waiting_students &gt; 0)\n        {\n            sem_post(&amp;ta_sem);\n            pthread_mutex_lock(&amp;mutex_lock);\n            waiting_students--;\n            pthread_mutex_unlock(&amp;mutex_lock);\n            // help student\n            printf(\"Helping a student for %d seconds, # of waiting students = %d\", MAX_SLEEP_TIME, waiting_students);\n            sleep(MAX_SLEEP_TIME);\n        }\n    }\n    return NULL;\n}\n\nvoid* student_check(void* p)\n{\n    /* invoke random number generator */\n    rand_r((unsigned*)1);\n    int num_help = 0;\n    int seat_taken = 0;\n\n    while (num_help &lt;= NUM_OF_HELPS)\n    {\n        // check if ta is not sleeping \n        if (!ta_sleep)\n        {\n            if (!seat_taken)\n            {\n                if (waiting_students &lt; NUM_OF_SEATS)\n                {\n                    // student take a seat\n                    seat_taken = 1;\n                    pthread_mutex_lock(&amp;mutex_lock);\n                    waiting_students++;\n                    pthread_mutex_unlock(&amp;mutex_lock);\n                    printf(\"Stdudent %d takes a seat, # of waiting student = %d\", *(int*)p, waiting_students);\n                    sem_wait(&amp;ta_sem); \n                    seat_taken = 0;\n                    num_help++;\n                }\n                else\n                {\n                    printf(\"\\tStudent %d programming for %d seconds\\n\",*(int*)p,MAX_SLEEP_TIME);\n                    sleep(MAX_SLEEP_TIME);\n                    printf(\"\\tStudent %d will try later\\n\",*(int*)p);\n                }\n            }\n        }\n        // check if ta is sleeping\n        else if (ta_sleep)\n        {\n            pthread_mutex_lock(&amp;mutex_lock);\n            ta_sleep = 0;\n            pthread_mutex_unlock(&amp;mutex_lock);\n            sem_post(&amp;students_sem);\n            sem_wait(&amp;ta_sem);\n            num_help++;\n        }\n    }\n    printf(\"Student %d is receiving help\", *(int*)p);\n    return NULL;\n}\n</code></pre>\n\n<p>After I finished fixings all errors and warnings messages for this program, I encountered this error message <code>segmentation fault(core dumped)</code> for the first time. It has never appear before I was debugging this program. Can I get some help with finding where this error occurred. Thank you very much for helping.</p>\n"}, {"tags": ["c", "arrays", "linux", "pointers"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1446630645, "post_id": 33518526, "comment_id": 54818822, "body": "Both are undefined behaviour. Please follow a beginners tutorial on C. Figure out what <code>filenames[3]= ...</code> means before using it."}], "answers": [{"comments": [{"owner": {"reputation": 635, "user_id": 5503203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fc16849bdc2cf90674e4cc38f02e6f?s=128&d=identicon&r=PG&f=1", "display_name": "ITguy", "link": "https://stackoverflow.com/users/5503203/itguy"}, "edited": false, "score": 0, "creation_date": 1446630790, "post_id": 33518603, "comment_id": 54818915, "body": "Thank you that clears it up. I did not study computer science but I am working in IT now. So sometimes my basic knowledge can be a bit shaky."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1446630857, "last_edit_date": 1495540317, "creation_date": 1446630684, "answer_id": 33518603, "question_id": 33518526, "link": "https://stackoverflow.com/questions/33518526/char-filenames1-or-char-filenames-what-is-the-difference/33518603#33518603", "title": "char *filenames[1] or char *filenames What is the difference?", "body": "<p>At the outset, <code>char *filenames</code> represents a <code>char *</code> variable named <code>filenames</code> whereas, <code>char *filenames[1]</code> represents an array of <code>char *</code> variables, with one element.</p>\n\n<p>From the point of the usage, both are same, but the major difference is, the first one has to be used as a normal variable and the second one can be indexed, as an array.</p>\n\n<p>If you're in need to use only one variable, don't use an array. You may be in danger of using out of bound indexes if you're not careful enough.</p>\n\n<p>Also, as a note, <a href=\"https://stackoverflow.com/q/605845/2173917\">please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1446630815, "creation_date": 1446630815, "answer_id": 33518652, "question_id": 33518526, "link": "https://stackoverflow.com/questions/33518526/char-filenames1-or-char-filenames-what-is-the-difference/33518652#33518652", "title": "char *filenames[1] or char *filenames What is the difference?", "body": "<p>Relative to this statement</p>\n\n<pre><code>filenames[3]= (char*)malloc( strlen(line) + 1);//here ERROR is : Cannot assign char* to char.\n</code></pre>\n\n<p>the both declarations are wrong.</p>\n\n<p>The firwt declaration</p>\n\n<pre><code>char *filenames[1]\n</code></pre>\n\n<p>is wrong because it declares an array of pointers to <code>char</code> having only one element. But in the statement with memory allocation there is used index <code>3</code>. So there is an attempt to access memory beyond the array becuase the only valid index for an array that has one element is <code>0</code>.</p>\n\n<p>The second declaration </p>\n\n<pre><code>char *filenames \n</code></pre>\n\n<p>is wrong because it does not declare an array of pointers. So applying the subscript operator for identifier <code>filenames</code></p>\n\n<pre><code>filenames[3]\n</code></pre>\n\n<p>gives a scalar object of type <code>char</code> instead of a pointer of type <code>char *</code></p>\n"}], "owner": {"reputation": 635, "user_id": 5503203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fc16849bdc2cf90674e4cc38f02e6f?s=128&d=identicon&r=PG&f=1", "display_name": "ITguy", "link": "https://stackoverflow.com/users/5503203/itguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 33518603, "answer_count": 2, "score": 0, "last_activity_date": 1446630900, "creation_date": 1446630457, "last_edit_date": 1446630900, "question_id": 33518526, "link": "https://stackoverflow.com/questions/33518526/char-filenames1-or-char-filenames-what-is-the-difference", "title": "char *filenames[1] or char *filenames What is the difference?", "body": "<p>I am writing a program which will store a list of file names as a string array. When I declare it as </p>\n\n<pre><code>char *filenames[1]\n</code></pre>\n\n<p>I have no errors... but when I do </p>\n\n<pre><code>char *filenames \n</code></pre>\n\n<p>I get a few errors. Not at the declaration but in later use. for example when I do:</p>\n\n<pre><code>filenames[3]= (char*)malloc( strlen(line) + 1);//here ERROR is : Cannot assign char* to char.\n</code></pre>\n\n<p>But with the first declaration with [1] it is all fine. I was just wondering what is the difference between them? </p>\n\n<p>Trust me I tried looking for the answer on google but can't find any good ones regarding this case. </p>\n"}, {"tags": ["c", "named-pipes"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446629080, "post_id": 33517930, "comment_id": 54817885, "body": "You write <code>i</code> bytes (where <code>i</code> is the option the user entered) of your uninitialized buffer <code>buf</code> to the pipe. That doesn&#39;t make any sense. What are you trying to achieve ?"}, {"owner": {"reputation": 15, "user_id": 5435430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96aa6bf5b6e4990b28086c5689b0d6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Son", "link": "https://stackoverflow.com/users/5435430/jeff-son"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446629283, "post_id": 33517930, "comment_id": 54818010, "body": "I want to tranfer the user enterd value to another program"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5435430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96aa6bf5b6e4990b28086c5689b0d6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Son", "link": "https://stackoverflow.com/users/5435430/jeff-son"}, "edited": false, "score": 0, "creation_date": 1446646586, "post_id": 33518141, "comment_id": 54829344, "body": "Thanks Michael! You are helpful...but I have changed the code and run the program again... I still can&#39;t get to Option 1 is selected... I don&#39;t know why.."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 15, "user_id": 5435430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96aa6bf5b6e4990b28086c5689b0d6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Son", "link": "https://stackoverflow.com/users/5435430/jeff-son"}, "edited": false, "score": 0, "creation_date": 1446647683, "post_id": 33518141, "comment_id": 54830138, "body": "@JeffSon if the post was helpfull you may upvote it or even mark it as &quot;answer&quot;. Concerning your program still not running as you expect, you should post a new question."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1446629873, "last_edit_date": 1446629873, "creation_date": 1446629424, "answer_id": 33518141, "question_id": 33517930, "link": "https://stackoverflow.com/questions/33517930/transfer-switch-cases-value-to-another-process-with-named-pipe/33518141#33518141", "title": "Transfer switch cases value to another process with named pipe", "body": "<p>You probably need to use <code>write</code> like this:</p>\n\n<pre><code>bufs[0] = i;           // put value entered by user into buffer\nwrite(fds, bufs, 1);   // write 1 byte from the buffer\n</code></pre>\n\n<p>BTW you could narrow down your code like this:</p>\n\n<pre><code>...\nscanf(\"%d\", &amp;select1);\n\nif (select1 == 1 || select1 == 2)\n{\n  if ((fds = open(pipeselect, O_WRONLY)) &lt; 0) {\n    printf(\"Pipe open error\\n\");\n    exit(1);\n  }\n\n  bufs[0] = select1;     // put value entered by user into buffer\n  write(fds, bufs, 1);   // write 1 byte from the buffer\n  close(fds);\n\n  printf(\"Option %d is selected\\n\", select1);\n}\nelse {\n  printf(\"Wrong Input!\\n\");\n}\n\nunlink(pipeselect);\nexit(0);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5435430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96aa6bf5b6e4990b28086c5689b0d6e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Son", "link": "https://stackoverflow.com/users/5435430/jeff-son"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 33518141, "answer_count": 1, "score": 0, "last_activity_date": 1446630726, "creation_date": 1446628847, "last_edit_date": 1446630726, "question_id": 33517930, "link": "https://stackoverflow.com/questions/33517930/transfer-switch-cases-value-to-another-process-with-named-pipe", "title": "Transfer switch cases value to another process with named pipe", "body": "<p>In my program, I want to send my switch case value to another process using named pipe \"pipeselect\". I write the number in the pipe and read the number in another program. But When I run the problem, it cannot show anything when I enter a case value. How can I do this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main()\n{\n  char pipeselect[] = \"/tmp/pipeselect\";\n  char bufs[2];\n  int fds;\n  int select1;\n\n  /* Pipe Creation */\n  if (access(pipeselect, F_OK) == -1)\n  {\n    fds = mkfifo(pipeselect, 0700);\n    if (fds != 0)\n    {\n      printf(\"Pipe creation error\\n\");\n      exit(1);\n    }\n  }\n\n  printf(\"1. Option 1\\n\");\n  printf(\"2. Option 2\\n\");\n  printf(\"Please select an option: \");\n  scanf(\"%d\", &amp;select1);\n\n  int i = select1;\n\n  switch (i)\n  {\n  case 1:\n    if ((fds = open(pipeselect, O_WRONLY)) &lt; 0)\n    {\n      printf(\"Pipe open error\\n\");\n      exit(1);\n    }\n    write(fds, bufs, i);\n    close(fds);\n\n    printf(\"Option 1 is selected\\n\");\n    break;\n\n  case 2:\n    if ((fds = open(pipeselect, O_WRONLY)) &lt; 0)\n    {\n      printf(\"Pipe open error\\n\");\n      exit(1);\n    }\n    write(fds, bufs, i);\n    close(fds);\n\n    printf(\"Option 2 is selected\\n\");\n    break;\n\n  default:\n    printf(\"Wrong Input!\\n\");\n    break;\n\n    unlink(pipeselect);\n    exit(0);\n\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "regex", "string"], "comments": [{"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1446629019, "post_id": 33517916, "comment_id": 54817837, "body": "<code>char *items[20+1]</code> is array of 21 string pointers. To define N elements of 20+1 chars, write <code>char items[][20+1]</code>."}, {"owner": {"reputation": 651, "user_id": 5339325, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4c0445328c6e85f21e465ced36344f1a?s=128&d=identicon&r=PG&f=1", "display_name": "northerner", "link": "https://stackoverflow.com/users/5339325/northerner"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1446629146, "post_id": 33517916, "comment_id": 54817930, "body": "@i486: The char array should be able to contain a maximum of 20 words (pluss 1), not a maximum of 20 characters."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1446629437, "post_id": 33517916, "comment_id": 54818092, "body": "Help with what problem?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1446629864, "post_id": 33517916, "comment_id": 54818368, "body": "Can you outline what part of your code does not seem to work? (I&#39;m only assuming it doesn&#39;t.) Must you duplicate the strings, or is it enough to have <i>pointers</i> into <code>command</code>? This mainly depends on where <code>command</code> came from and what its lifetime is through your program."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1446630507, "post_id": 33517916, "comment_id": 54818729, "body": "There are library functions that will do this for you. Look up <a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow noreferrer\"><code>strtok()</code></a> and <a href=\"http://man7.org/linux/man-pages/man3/strsep.3.html\" rel=\"nofollow noreferrer\"><code>strsep()</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 806, "user_id": 3186618, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e19994ea853c31f7fe179aae8be227c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3186618/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1446629578, "creation_date": 1446629578, "answer_id": 33518207, "question_id": 33517916, "link": "https://stackoverflow.com/questions/33517916/removing-spaces-from-string-adding-words-to-array-in-c/33518207#33518207", "title": "Removing spaces from string, adding words to array in C", "body": "<p>Loop through each character. If it's a space, continue. If it's not, add the address of that character to the array, loop until the first occurring space and replace it with a null terminator. Repeat.</p>\n\n<p>Note that this destroys your initial string (<code>command</code> in your case). Also remember it must be modifiable (cannot be a read-only string).</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1451797197, "post_id": 33518609, "comment_id": 56891924, "body": "<b>Note:</b> the pointers assigned to the <code>items</code> array are only valid so long as the memory containing <code>str</code> remains valid. You will need to provide <i>adequate storage</i> for, and <i>copy</i>, each string pointed to by <code>pch</code> to <code>items</code> (instead of simply assigning the pointer) if for instance you call <code>strtok</code> in a function and return a pointer to <code>items</code>."}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": true, "score": 4, "last_activity_date": 1451794553, "last_edit_date": 1451794553, "creation_date": 1446630695, "answer_id": 33518609, "question_id": 33517916, "link": "https://stackoverflow.com/questions/33517916/removing-spaces-from-string-adding-words-to-array-in-c/33518609#33518609", "title": "Removing spaces from string, adding words to array in C", "body": "<p>This problem may be solved naturally using <code>strtok</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char str[] = \"apple   banana orange  dogfood\";\n    char *items[20] = { NULL };\n    char *pch;\n\n    pch = strtok( str,\" \\t\\n\" );\n    int i = 0;\n    while( NULL != pch )\n    {\n        items[i++] = pch;\n        pch = strtok( NULL, \" \\t\\n\" );\n    }\n\n    for( i = 0; i &lt; 20; i++ )\n    {\n        if( NULL != items[i] )\n        {\n            printf( \"items[%d] = %s\\n\", i, items[i] );\n        }\n        else\n        {\n            break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>items[0] = apple\nitems[1] = banana\nitems[2] = orange\nitems[3] = dogfood\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": false, "score": 0, "last_activity_date": 1446634601, "creation_date": 1446634601, "answer_id": 33520038, "question_id": 33517916, "link": "https://stackoverflow.com/questions/33517916/removing-spaces-from-string-adding-words-to-array-in-c/33520038#33520038", "title": "Removing spaces from string, adding words to array in C", "body": "<p>Here is a function that identify words in a string and stores them in an array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint GetWords(char *String,char **buffer);\n\nint main(void)\n{\n    char command[120] = \"   apple   banana orange  dogfood\";\n\n    char *items[20+1];\n\n    int num_of_words = GetWords(command,items);\n\n    for( int n = 0 ; n &lt; num_of_words ; n++ )\n    {\n        printf(\"%s \",items[n]);\n        free(items[n]);\n    }\n    puts(\"\");\n    return 0;\n}\n\nint GetWords(char *String,char **buffer)\n{\n    int x = -1 , y = 0 , z = 0 ;\n\n    size_t len = strlen(String) , n ;\n\n    for( n = 0 ; n &lt; len ; n++ )\n    {\n        y++;\n\n        if( String[n] == ' ' )\n        {\n            y = 0;\n            z = 0;\n        }\n\n        if( y == 1 )\n        {\n            x++;\n            buffer[x] = (char*)malloc(len+1);\n        }\n\n        if( y &gt; 0 )\n        {\n            buffer[x][z] = String[n];\n            z++;\n            buffer[x][z] = '\\0';\n        }\n    }\n    //return number of words\n    return (x+1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1446647168, "post_id": 33523190, "comment_id": 54829767, "body": "What is <code>String tryarray[]=new String[count];</code> in this C language post?"}], "tags": [], "owner": {"reputation": 327, "user_id": 3997280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bi3zP.jpg?s=128&g=1", "display_name": "Anurag Yadav", "link": "https://stackoverflow.com/users/3997280/anurag-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1446643775, "creation_date": 1446643775, "answer_id": 33523190, "question_id": 33517916, "link": "https://stackoverflow.com/questions/33517916/removing-spaces-from-string-adding-words-to-array-in-c/33523190#33523190", "title": "Removing spaces from string, adding words to array in C", "body": "<pre><code>String Current = \"hello java example\";\nString trimstr=Current.trim().replace(\" \", \"\");\n\nint count=trimstr.length();\n\nString tryarray[]=new String[count];\nfor(int i =0;i&lt;count;i++){\ntryarray[i]=trimstr.substring(i, i+1);\nSystem.out.println(trimstr.substring(i, i+1));\n}\nSystem.out.println(\"arrays is \"+Arrays.toString(tryarray));\n</code></pre>\n"}], "owner": {"reputation": 651, "user_id": 5339325, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4c0445328c6e85f21e465ced36344f1a?s=128&d=identicon&r=PG&f=1", "display_name": "northerner", "link": "https://stackoverflow.com/users/5339325/northerner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 33518609, "answer_count": 4, "score": 2, "last_activity_date": 1451794553, "creation_date": 1446628801, "last_edit_date": 1446629655, "question_id": 33517916, "link": "https://stackoverflow.com/questions/33517916/removing-spaces-from-string-adding-words-to-array-in-c", "title": "Removing spaces from string, adding words to array in C", "body": "<p>I am trying to remove all spaces from a string and add each word into a string array.</p>\n\n<p>For instance, provided the string: </p>\n\n<pre><code>char command[120] = \"apple   banana orange  dogfood\"\n</code></pre>\n\n<p>an array, defined as: </p>\n\n<pre><code>char *items[20+1]; //Maximum 20 items in string + 0\n</code></pre>\n\n<p>would contain the elements: </p>\n\n<pre><code>{\"apple\", \"banana\", \"orange\" \"dogfood\"}\n</code></pre>\n\n<p>That is, all spaces have been removed. </p>\n\n<p>My goal is to be able to make the call:</p>\n\n<pre><code>echo    1    3 2\n</code></pre>\n\n<p>and printing out </p>\n\n<pre><code>1 3 2\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>    1    3 2\n</code></pre>\n\n<p><strong>CODE</strong></p>\n\n<p>So far, I have the following: </p>\n\n<pre><code>    char temp_array[120];\n    //Populate array with words\n    int i, j = 0, ant = 0;\n    for(i = 0; i &lt; strlen(command); i++) {\n        if(isspace(command[i]) || command[i] == '\\0') {\n            if(ant &lt;= 20) {\n                temp_array[j] = '\\0';\n                memo = (char *) malloc(sizeof(temp_array)); //allocate memory\n                strcpy(memo, temp_array);\n                items[ant] = memo;\n                memset(temp_array, 0, j);\n                ant++;\n                j= 0;\n            }\n        }\n        else if(!isspace(command[i])) {\n            temp_array[j] = command[i];\n            j++;\n        }\n    }//Done populating array\n    items[ant] = NULL;\n</code></pre>\n\n<p>Any help is highly appreciated!</p>\n"}, {"tags": ["c", "macros"], "answers": [{"tags": [], "owner": {"reputation": 806, "user_id": 3186618, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e19994ea853c31f7fe179aae8be227c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3186618/john"}, "is_accepted": true, "score": 4, "last_activity_date": 1446629076, "creation_date": 1446629076, "answer_id": 33518011, "question_id": 33517741, "link": "https://stackoverflow.com/questions/33517741/is-there-a-one-macro-way-to-prefix-and-quote-c-macro-argument/33518011#33518011", "title": "Is there a one-macro way to prefix and quote C macro argument", "body": "<p><code>#define SET(x) x = \"pre_\"#x</code></p>\n\n<p>C does string concatenation at compile time, so two string literals next to each other are concatenated.</p>\n\n<p><code>\"hello \" \"world\"</code> -> <code>\"hello world\"</code></p>\n"}], "owner": {"reputation": 941, "user_id": 641507, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da022790c1f8ad049451ed74dab37114?s=128&d=identicon&r=PG", "display_name": "LRFLEW", "link": "https://stackoverflow.com/users/641507/lrflew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 33518011, "answer_count": 1, "score": 4, "last_activity_date": 1446629940, "creation_date": 1446628239, "last_edit_date": 1446629940, "question_id": 33517741, "link": "https://stackoverflow.com/questions/33517741/is-there-a-one-macro-way-to-prefix-and-quote-c-macro-argument", "title": "Is there a one-macro way to prefix and quote C macro argument", "body": "<p>So when looking into getting my define macro to work, I found the <code>#</code> and <code>##</code> macro helpers, and used them to simplify my macro. The key part of the macro sets a variable to a string containing the name of the variable (but not the variable name alone). As a simplified example, let's take a macro called <code>SET(X)</code> that should expand <code>SET(something)</code> into <code>something = \"pre_something\"</code>.</p>\n\n<p>The only way I've found to do it so far is with two macros like <code>#define QUOTE(X) #X</code> and <code>#define SET(X) X = QUOTE(pre_##X)</code>. However, using multiple macros seems excessive, and may cause problems with further macro expansion (I think). Is there a cleaner, one-line way of doing the same thing?</p>\n"}, {"tags": ["c#", "c", "winapi"], "comments": [{"owner": {"reputation": 12248, "user_id": 235660, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/98ef0371256aeebaa378d1acc31ff4a8?s=128&d=identicon&r=PG", "display_name": "Alois Kraus", "link": "https://stackoverflow.com/users/235660/alois-kraus"}, "edited": false, "score": 0, "creation_date": 1446628534, "post_id": 33517696, "comment_id": 54817511, "body": "Please read the asserting method carefully. You give a a method a pointer which expects a pointer on the unmanaged Heap. Check from where the value comes from."}, {"owner": {"reputation": 733, "user_id": 4727842, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0483ae091acc1d00135c0bc5a1df6e6d?s=128&d=identicon&r=PG", "display_name": "Grayden Hormes", "link": "https://stackoverflow.com/users/4727842/grayden-hormes"}, "reply_to_user": {"reputation": 12248, "user_id": 235660, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/98ef0371256aeebaa378d1acc31ff4a8?s=128&d=identicon&r=PG", "display_name": "Alois Kraus", "link": "https://stackoverflow.com/users/235660/alois-kraus"}, "edited": false, "score": 0, "creation_date": 1446629961, "post_id": 33517696, "comment_id": 54818413, "body": "Which value are you referring to?"}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1446644103, "post_id": 33517696, "comment_id": 54827627, "body": "In <code>OpenRecord</code>, you&#39;re allocating memory and passing its address to <code>StartDialog</code>. That is, <code>b</code> holds the address of the buffer. However, the first thing you do in <code>StartDialog</code> is to assign <code>&amp;pSaveBuffer</code> to <code>b</code> where <code>&amp;pSaveBuffer</code> is the address of a variable that contains the address of another buffer! What are you trying to do?"}, {"owner": {"reputation": 1124, "user_id": 1480104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab2ab26e771b47c29a6a7dd8bac239ec?s=128&d=identicon&r=PG", "display_name": "Artem Razin", "link": "https://stackoverflow.com/users/1480104/artem-razin"}, "edited": false, "score": 0, "creation_date": 1446648392, "post_id": 33517696, "comment_id": 54830664, "body": "Why both GlobalAlloc and Marshal.AllocHGlobal allocates only a single byte. If you cast to <code>Byte**</code>, you need at least space for one pointer (4 or 8 bytes depending on the process bitness)."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1446655374, "post_id": 33517696, "comment_id": 54835884, "body": "The <i>CRT</i> in <code>CrtIsValidHeapPointer</code> suggests, that the CRT is performing a check. Since you allocated the memory using <code>AllocHGlobal</code> directly, without going through the CRT, the memory is not part of the heap controlled by the CRT. The pointer is not valid, as far as the CRT is concerned. You also don&#39;t seem to understand, why there are pointers to pointers. This usually indicates an <i>out</i> parameter, that is dereferenced and assigned a valid pointer."}], "owner": {"reputation": 733, "user_id": 4727842, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0483ae091acc1d00135c0bc5a1df6e6d?s=128&d=identicon&r=PG", "display_name": "Grayden Hormes", "link": "https://stackoverflow.com/users/4727842/grayden-hormes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446628098, "creation_date": 1446628098, "question_id": 33517696, "link": "https://stackoverflow.com/questions/33517696/win32-in-c-debug-assertion-failed-crtlsvalidheappointerblock", "title": "win32 in C# debug assertion failed CrtlsValidHeapPointer(block)", "body": "<p>I am calling exported functions from a win32 dll in C#. I am trying to record audio and then get back the data in my C# program. As for the win32, the recording and playing all work, the problem is I get a debug assertion failed when I start the record now that I am trying to use global alloc so that the memory for the data is shared globally between both applications. </p>\n\n<p>the C#:</p>\n\n<pre><code>[DllImport(\"\\\\Wave Editor\\\\Wave Editor\\\\lib\\\\Record.dll\", CharSet = CharSet.Auto, CallingConvention = CallingConvention.Cdecl)]\nunsafe public static extern Boolean StartDialog(Byte** d);\n\nunsafe private void OpenRecord(object sender, EventArgs e) {\n    unsafe Byte** recordSamples = (Byte**)Marshal.AllocHGlobal(1);\n\n    if (StartDialog(recordSamples) == false)\n        Debug.WriteLine(\"Dialog failed\");\n    else\n        Debug.WriteLine(\"Dialog success\");\n}\n</code></pre>\n\n<p>The important parts of the win32 code relating to pSaveBuffer (the shared memory):</p>\n\n<pre><code>PBYTE pSaveBuffer;\nswitch (message)\n{\ncase WM_INITDIALOG:\n\n    // Allocate memory for save buffer\n    pSaveBuffer = GlobalAlloc(GMEM_FIXED | GMEM_SHARE, 1);\n    return 0;\ncase MM_WIM_CLOSE:\n    GlobalFree(pSaveBuffer);\n    return 0;\n}\n</code></pre>\n\n<p>The win32 function that creates the dialog:</p>\n\n<pre><code>BOOL StartDialog(BYTE** b)\n{\n    b = &amp;pSaveBuffer;\n    if (CreateDialog(hdll, MAKEINTRESOURCE(DLG_RECORD), NULL, DlgProc) == NULL)\n    {\n        return FALSE;\n    }\n    return TRUE;\n}\n</code></pre>\n\n<p>The win32 header file:</p>\n\n<pre><code>#pragma once\n#pragma comment(lib, \"winmm.lib\")\n\n#include &lt;Windows.h&gt;\n\n#ifdef __cplusplus\n#define EXPORT extern \"C\" __declspec (dllexport)\n#else\n#define EXPORT __declspec (dllexport)\n#endif\n\nEXPORT BOOL StartDialog(BYTE** p);\n</code></pre>\n\n<p>This isn't the actual layout of the code, I put like things closer together to try get the point across. I think CrtlsValidHeapPointer(block) means I'm overwriting someone's heap, but I don't know how to fix that.</p>\n"}, {"tags": ["c", "gcc", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "edited": false, "score": 0, "creation_date": 1446628160, "post_id": 33517642, "comment_id": 54817273, "body": "the structure for msg data has a pointer to another msg data instead of signal data. I&#39;m not sure if thats what you intended since the picture says otherwise"}, {"owner": {"reputation": 904, "user_id": 4004688, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1002512873/picture?type=large", "display_name": "Itay Sela", "link": "https://stackoverflow.com/users/4004688/itay-sela"}, "edited": false, "score": 1, "creation_date": 1446628259, "post_id": 33517642, "comment_id": 54817333, "body": "didn&#39;t you just implement it? I don&#39;t understand the question"}, {"owner": {"reputation": 1261, "user_id": 1575764, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0e42fc1609fafe73051dd9462b54c23b?s=128&d=identicon&r=PG", "display_name": "ganeshredcobra", "link": "https://stackoverflow.com/users/1575764/ganeshredcobra"}, "edited": false, "score": 0, "creation_date": 1446628830, "post_id": 33517642, "comment_id": 54817712, "body": "A Message Data may contain a number of signals. That&#39;s why i created image like that. Nope i didn&#39;t implement it yet. Is the structure design correct?"}, {"owner": {"reputation": 1377, "user_id": 5016443, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HeENV_1tcBs/AAAAAAAAAAI/AAAAAAAAAXk/cjxvCWBV0IM/photo.jpg?sz=128", "display_name": "Sergii Martynenko Jr", "link": "https://stackoverflow.com/users/5016443/sergii-martynenko-jr"}, "edited": false, "score": 0, "creation_date": 1446629494, "post_id": 33517642, "comment_id": 54818133, "body": "Couldn&#39;t find no error in your code. Should work"}], "answers": [{"comments": [{"owner": {"reputation": 1261, "user_id": 1575764, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0e42fc1609fafe73051dd9462b54c23b?s=128&d=identicon&r=PG", "display_name": "ganeshredcobra", "link": "https://stackoverflow.com/users/1575764/ganeshredcobra"}, "edited": false, "score": 0, "creation_date": 1446631708, "post_id": 33518178, "comment_id": 54819501, "body": "Will insert function works correctly? newnode is of type Sig_ptr esp newnode-&gt;message_id = data.message_id;"}, {"owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "reply_to_user": {"reputation": 1261, "user_id": 1575764, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0e42fc1609fafe73051dd9462b54c23b?s=128&d=identicon&r=PG", "display_name": "ganeshredcobra", "link": "https://stackoverflow.com/users/1575764/ganeshredcobra"}, "edited": false, "score": 0, "creation_date": 1446632926, "post_id": 33518178, "comment_id": 54820331, "body": "my bad, I&#39;ll fix that. It should append a Sig_node, not Message"}], "tags": [], "owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "is_accepted": false, "score": 1, "last_activity_date": 1446633021, "last_edit_date": 1446633021, "creation_date": 1446629514, "answer_id": 33518178, "question_id": 33517642, "link": "https://stackoverflow.com/questions/33517642/how-to-implement-linked-list-with-two-structures/33518178#33518178", "title": "How to implement linked list with two structures", "body": "<p>Implement a standard linked list of signal data nodes and hold a pointer of head nodes in your message data node.</p>\n\n<pre><code>typedef struct sigMsg_t *Sig_ptr;\ntypedef struct sigMsg_t {\n    unsigned char*   signal_name;  \n    unsigned int     signal_bit_start;\n    unsigned char    signal_bit_len;\n    unsigned char    signal_endianess;\n    unsigned char    signal_signedness;   \n    Sig_ptr  SIG_INFO_NEXT;\n}Sig_node;\n\ntypedef struct dbcMsg_t {\n    unsigned char*   message_id;\n    unsigned char*   message_name;\n    unsigned char*   message_len;\n    unsigned char*   message_sender;\n    unsigned char*   message_comment;\n    unsigned char*   message_attribute_list;\n    unsigned char*   message_transmitter_list;\n    Sig_ptr  SIG_INFO_HEAD;\n} Message;\n</code></pre>\n\n<p>Since you asked how to implement insert and print functions:</p>\n\n<pre><code>void insert_to_list_end(Sig_ptr *list, Sig_node data) {\n    Sig_ptr newnode, last = *list;\n    newnode = (Sig_ptr)malloc(sizeof(Sig_node));\n    /*  fill the new load with new data here\n    newnode-&gt;message_id = data.message_id; \n    ...\n    */\n    newnode-&gt; SIG_INFO_NEXT = NULL;\n    if (last == NULL){\n        *list = newnode;\n    }//first node\n    else{\n        while (1) {\n            if (last-&gt; SIG_INFO_NEXT == NULL) {\n                last-&gt; SIG_INFO_NEXT = newnode;\n                break;\n            }\n            last = last-&gt; SIG_INFO_NEXT;\n        }\n    }\n}\n</code></pre>\n\n<p>And print:</p>\n\n<pre><code>//prints whole list using printItem extern function\nvoid print_list(Sig_ptr list) {\n    //implement this print func for a node in your main file\n    extern void PrintItem(Sig_node c); \n\n    Sig_ptr aux1, aux2;\n\n    aux1 = list;\n    while (aux1 != NULL) {\n        PrintItem(aux1);\n        aux2 = aux1-&gt;SIG_INFO_NEXT;\n        aux1 = aux2;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1261, "user_id": 1575764, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0e42fc1609fafe73051dd9462b54c23b?s=128&d=identicon&r=PG", "display_name": "ganeshredcobra", "link": "https://stackoverflow.com/users/1575764/ganeshredcobra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446633021, "creation_date": 1446627896, "question_id": 33517642, "link": "https://stackoverflow.com/questions/33517642/how-to-implement-linked-list-with-two-structures", "title": "How to implement linked list with two structures", "body": "<p>I want to implement a data structure like this.What will be a good method\nto implement this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mwyBk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mwyBk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Well i am trying to implement linkedlist for signals</p>\n\n<p><strong>structure for Msg data</strong> </p>\n\n<pre><code>struct dbcMsg_t\n{\nunsigned char*   message_id;\nunsigned char*   message_name;\nunsigned char*   message_len;\nunsigned char*   message_sender;\nunsigned char*   message_comment;\nunsigned char*   message_attribute_list;\nunsigned char*   message_transmitter_list;\nstruct sigMsg_t  *SIG_INFO;\n};\n</code></pre>\n\n<p><strong>structure for Signal data</strong></p>\n\n<pre><code>struct sigMsg_t\n{\nunsigned char*   signal_name;  \nunsigned int     signal_bit_start;\nunsigned char    signal_bit_len;\nunsigned char    signal_endianess;\nunsigned char    signal_signedness;   \nstruct sigMsg_t  *SIG_INFO_NEXT;\n}*start=NULL;\n</code></pre>\n\n<p>There will be an <strong>array of MSG DATA</strong></p>\n\n<pre><code>struct dbcMsg_t *new_node[MAX_DBC];\n</code></pre>\n\n<p>I am confused on how to implement this?I mean how to insert and how to display?</p>\n"}, {"tags": ["c", "struct", "null-pointer"], "comments": [{"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1446627148, "post_id": 33517385, "comment_id": 54816670, "body": "So what do they point to instead?"}, {"owner": {"reputation": 293, "user_id": 1894957, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0a310f1203e16cea2e0b26ecf3e40ae9?s=128&d=identicon&r=PG", "display_name": "mathieu_b", "link": "https://stackoverflow.com/users/1894957/mathieu-b"}, "reply_to_user": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1446627211, "post_id": 33517385, "comment_id": 54816703, "body": "@Arc676 If I print their address, I have something like that <code>0x2000000000000000</code> and <code>0x7fff7cbd0010</code>. If I print their label member, I have a segmentation fault."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1446627373, "post_id": 33517385, "comment_id": 54816798, "body": "Is writing <code>struct node n1 = { .lchild = NULL}</code> also boring?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1446627496, "post_id": 33517385, "comment_id": 54816861, "body": "You create <code>n1</code> on the stack; C makes no guarantees about the initial values of stack-allocated variables, and they can and usually will contain random garbage. If you want them to contain specific values, you&#39;ll have to take care of that yourself. You could declare a function to do this for you: <code>struct node* initNode(struct node* newNode)</code> - sets the fields to their proper initial values and returns the pointer to the same struct."}, {"owner": {"reputation": 293, "user_id": 1894957, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0a310f1203e16cea2e0b26ecf3e40ae9?s=128&d=identicon&r=PG", "display_name": "mathieu_b", "link": "https://stackoverflow.com/users/1894957/mathieu-b"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1446627611, "post_id": 33517385, "comment_id": 54816923, "body": "@szczurcio Thanks for your explanations, that could be a solution."}], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 1894957, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0a310f1203e16cea2e0b26ecf3e40ae9?s=128&d=identicon&r=PG", "display_name": "mathieu_b", "link": "https://stackoverflow.com/users/1894957/mathieu-b"}, "edited": false, "score": 0, "creation_date": 1446627911, "post_id": 33517485, "comment_id": 54817107, "body": "Alright, I thought all members are initialized with their default value, so pointers with null value. I will write a function to initialise this struct."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 293, "user_id": 1894957, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0a310f1203e16cea2e0b26ecf3e40ae9?s=128&d=identicon&r=PG", "display_name": "mathieu_b", "link": "https://stackoverflow.com/users/1894957/mathieu-b"}, "edited": false, "score": 0, "creation_date": 1446628313, "post_id": 33517485, "comment_id": 54817362, "body": "There are no &quot;default&quot;-values on C. @mathieu_b"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1446630573, "post_id": 33517485, "comment_id": 54818776, "body": "Trivial edit since I accidentally downvoted this! Have an upvote now."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 7, "last_activity_date": 1446630555, "last_edit_date": 1446630555, "creation_date": 1446627393, "answer_id": 33517485, "question_id": 33517385, "link": "https://stackoverflow.com/questions/33517385/initialize-a-structure-with-null-values/33517485#33517485", "title": "Initialize a structure with NULL values", "body": "<blockquote>\n  <p>I don't understand why I need to do that </p>\n</blockquote>\n\n<p>Because the compiler doesn't do it for you.</p>\n\n<p>You could skip this in case you can make sure the members aren't read before having been written to.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446627804, "post_id": 33517575, "comment_id": 54817037, "body": "The the null-pointer not necessarily is represented by <code>0</code>s. So using <code>memset()</code> (or any other approach initialising with <code>0</code>) might mostly work, but isn&#39;t portable."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446627868, "post_id": 33517575, "comment_id": 54817077, "body": "@alk I didn&#39;t say anything about <code>memset</code>. But are you sure zero-initialization of a pointer type is not guaranteed to <code>NULL</code> initialize it?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446627892, "post_id": 33517575, "comment_id": 54817094, "body": "Right, you didn&#39;t ,copypasta bs from my side. Sry!"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446627969, "post_id": 33517575, "comment_id": 54817146, "body": "I think the standard doesn&#39;t guarantee that <code>NULL == 0</code>, which is what @alk meant."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1446628030, "post_id": 33517575, "comment_id": 54817190, "body": "@szczurcio That is definitely true. But it doesn&#39;t mean that zero initializing a pointer isn&#39;t guaranteed to set it to <code>NULL</code>. I think it is, but not 100% sure. Looking it up."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446628035, "post_id": 33517575, "comment_id": 54817195, "body": "I am not sure about initialisers, need to check the Standard. Using <code>memset()</code>, as well as <code>calloc()</code> to initialise pointers to <code>NULL</code>, however is not portable to any platform which does not use the value of <code>0</code> to represent a null-pointer."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446628083, "post_id": 33517575, "comment_id": 54817222, "body": "@alk Yes, that makes sense (the <code>memset</code>/<code>calloc</code> thing)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446628112, "post_id": 33517575, "comment_id": 54817246, "body": "I am <b>not</b> referring to any operation involving the assignment operator."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1446628172, "post_id": 33517575, "comment_id": 54817286, "body": "<code>= {1}</code> is fine: N1570 6.7.9.21  <i>&quot;If there are fewer initializers in a brace-enclosed list than there are elements or members of an aggregate, ... , the remainder of the aggregate shall be initialized implicitly the same as objects that have static storage duration.&quot;</i>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1446628250, "post_id": 33517575, "comment_id": 54817326, "body": "@user694733 Thx for double checking this. So my claim does <b>not</b> apply to initialisers. :-}"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1446628273, "post_id": 33517575, "comment_id": 54817340, "body": "And about static storage duration initialization: 6.7.9.10 <i>&quot;... And If an object that has static or thread storage duration is not initialized explicitly, then:  \u2014 if it has pointer type, it is initialized to a null pointer; ...&quot;</i>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1446628722, "post_id": 33517575, "comment_id": 54817640, "body": "@user694733 Thanks. I put the relevant quotes in references (C11 standard)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446628984, "post_id": 33517575, "comment_id": 54817803, "body": "For completeness, the link to the C11 Standard: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.7.9</a>"}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 6, "last_activity_date": 1446628686, "last_edit_date": 1446628686, "creation_date": 1446627664, "answer_id": 33517575, "question_id": 33517385, "link": "https://stackoverflow.com/questions/33517385/initialize-a-structure-with-null-values/33517575#33517575", "title": "Initialize a structure with NULL values", "body": "<p>The members of an automatic storage object such as <code>n1</code> do not get zero-initialized automatically (See C11 standard, <strong>6.7.9.10</strong>). You have to do this yourself.</p>\n\n<p>You can take care of this easily by suitably initializing <code>n1</code>:</p>\n\n<pre><code>struct node n1 = {1};\n</code></pre>\n\n<p>This will set the first member to <code>1</code> and will zero-initialize the rest, meaning the pointers get initialized to <code>NULL</code>. You can be more explicit if you wish:</p>\n\n<pre><code>struct node n1 = {1, NULL, NULL};\n</code></pre>\n\n<hr>\n\n<p>References:</p>\n\n<p>From the C11 standard, <strong>6.7.9 Initialization</strong>:</p>\n\n<blockquote>\n  <ol start=\"21\">\n  <li>If there are fewer initializers in a brace-enclosed list than there are elements or members of an aggregate, or fewer characters in\n  a string literal used to initialize an array of known size than there\n  are elements in the array, <em>the remainder of the aggregate shall be\n  initialized implicitly the same as objects that have static storage\n  duration</em>.</li>\n  </ol>\n</blockquote>\n\n<p>And, previously in the same section,</p>\n\n<blockquote>\n  <ol start=\"10\">\n  <li>... If an object that has static or thread storage duration is not initialized explicitly, then:<br> \u2014 if it has pointer type, it is\n  <em>initialized to a null pointer</em>;</li>\n  </ol>\n</blockquote>\n\n<p>(emphasis mine)</p>\n"}], "owner": {"reputation": 293, "user_id": 1894957, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0a310f1203e16cea2e0b26ecf3e40ae9?s=128&d=identicon&r=PG", "display_name": "mathieu_b", "link": "https://stackoverflow.com/users/1894957/mathieu-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3317, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1446630555, "creation_date": 1446627110, "last_edit_date": 1446628860, "question_id": 33517385, "link": "https://stackoverflow.com/questions/33517385/initialize-a-structure-with-null-values", "title": "Initialize a structure with NULL values", "body": "<p>I have a problem when I'm initializing this structure :</p>\n\n<pre><code>struct node {\n    int label;\n    struct node *lchild;\n    struct node *rchild;\n}\n\nint main(void) {\n    struct node n1;\n    n1.label = 1;\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The problem is my members <code>lchild</code> and <code>rchild</code> don't point to NULL.</p>\n\n<p>I can resolve the problem by adding</p>\n\n<pre><code>n1.lchild = NULL;\nn1.rchild = NULL;\n</code></pre>\n\n<p>But I don't understand why I need to do that?</p>\n"}, {"tags": ["c", "linux-kernel"], "comments": [{"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 2, "creation_date": 1446627154, "post_id": 33517350, "comment_id": 54816678, "body": "Given what Linus said, I would not use it... Ever..."}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 3, "creation_date": 1446761728, "post_id": 33517350, "comment_id": 54891422, "body": "@Thomas Linus isn&#39;t god."}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "reply_to_user": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 1, "creation_date": 1446763848, "post_id": 33517350, "comment_id": 54892348, "body": "@MillieSmith did I write that somewhere? :)"}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1446766467, "post_id": 33517350, "comment_id": 54893286, "body": "@Thomas, No, my apologies for the abrasiveness. I just don&#39;t think his argument is compelling. Linus was right that the code was terribly written and ineligible, but Linus didn&#39;t give any arguments to never use <code>overflow_usub</code> (except saying that you shouldn&#39;t). I think <code>overflow_usub</code> has its place - it just needs to be used correctly like pretty much everything else (gotos, regex, coding in general)."}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1446782369, "post_id": 33517350, "comment_id": 54897598, "body": "Er... illegible*. Ineligible for checkin though ;)."}], "answers": [{"tags": [], "owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1446627255, "creation_date": 1446627255, "answer_id": 33517432, "question_id": 33517350, "link": "https://stackoverflow.com/questions/33517350/what-is-overflow-usub/33517432#33517432", "title": "What is overflow_usub?", "body": "<p>It's a (possibly optimised) overflow detecting unsigned subtraction: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0103r0.html#Overflow\" rel=\"nofollow\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0103r0.html#Overflow</a> and <em>can</em> be done as compiler intrinsics, so <em>could</em> be implemented to be higher performance than the readable code Linus uses. <em>could</em> being the operative word here, as who knows? The optimisation is probably not that useful in many cases (certainly not in the Linux example) and yet the code is more unreadable. Hence the rant.</p>\n"}, {"comments": [{"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1446627611, "post_id": 33517438, "comment_id": 54816925, "body": "Its an overflow detection for unsigned substraction. If a unsigned substraction overflows, the result will be bigger than the first operand, as the overflow occurs. Thats the check. Imagine <code>a = 10</code> and <code>b = 20</code> and that (for simplification) as 8bit, the result would be <code>res = 245</code> as it overflowed and is unsigned. Thus <code>res &gt; a</code> is <code>true</code> and the overflow is detected. But it has flaws in it that would not get detected... e.g. <code>b=255</code>"}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 9, "creation_date": 1446627683, "post_id": 33517438, "comment_id": 54816970, "body": "He&#39;s asking what the point of <code>? true : false</code> is. There is none. I see that useless code way too much."}, {"owner": {"reputation": 7866, "user_id": 531840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02a5c102e4b3adced1096222d2997e5a?s=128&d=identicon&r=PG", "display_name": "Constantin", "link": "https://stackoverflow.com/users/531840/constantin"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1446627747, "post_id": 33517438, "comment_id": 54817012, "body": "@Thomas There is no point in it: the code is simply not written well - that is also why Linus complaint about it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447339869, "post_id": 33517438, "comment_id": 55121262, "body": "@Constantin It&#39;s not so much about the implementation as the semantics of <code>overflow_usub</code>. Linus mostly notes that this function does too many things (subtracting <i>and</i> checking for overflow) and thus makes the code less readable (besides being yet another function to learn about)."}, {"owner": {"reputation": 12089, "user_id": 44232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fdd3c3e0d7d466ac420fde81104607f?s=128&d=identicon&r=PG", "display_name": "Nils", "link": "https://stackoverflow.com/users/44232/nils"}, "edited": false, "score": 0, "creation_date": 1447840175, "post_id": 33517438, "comment_id": 55319865, "body": "Aaargh it is supposed to be C code and c does NOT have bool, C++ has bool!"}, {"owner": {"reputation": 7866, "user_id": 531840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02a5c102e4b3adced1096222d2997e5a?s=128&d=identicon&r=PG", "display_name": "Constantin", "link": "https://stackoverflow.com/users/531840/constantin"}, "reply_to_user": {"reputation": 12089, "user_id": 44232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3fdd3c3e0d7d466ac420fde81104607f?s=128&d=identicon&r=PG", "display_name": "Nils", "link": "https://stackoverflow.com/users/44232/nils"}, "edited": false, "score": 3, "creation_date": 1447852794, "post_id": 33517438, "comment_id": 55328575, "body": "@Nils In C99 there exists bool - it&#39;s defined in stdbool.h"}], "tags": [], "owner": {"reputation": 7866, "user_id": 531840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02a5c102e4b3adced1096222d2997e5a?s=128&d=identicon&r=PG", "display_name": "Constantin", "link": "https://stackoverflow.com/users/531840/constantin"}, "is_accepted": true, "score": 19, "last_activity_date": 1446627698, "last_edit_date": 1446627698, "creation_date": 1446627273, "answer_id": 33517438, "question_id": 33517350, "link": "https://stackoverflow.com/questions/33517350/what-is-overflow-usub/33517438#33517438", "title": "What is overflow_usub?", "body": "<p>The function <code>overflow_usub</code> is defined as:</p>\n\n<pre><code>static inline bool overflow_usub(unsigned int a, unsigned int b, unsigned int *res){\n  *res = a - b;\n  return *res &gt; a ? true : false;\n}\n</code></pre>\n\n<p>It will check for integer overflows in subtraction and doesn't involve any compiler magic. It's usually a fallback, if the compiler has no <code>__builtin_usub_overflow</code>.</p>\n"}], "owner": {"reputation": 21282, "user_id": 140367, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/686b6807a5e05236c44c9472e99e146a?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s Szelei", "link": "https://stackoverflow.com/users/140367/tam%c3%a1s-szelei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5065, "favorite_count": 2, "accepted_answer_id": 33517438, "answer_count": 2, "score": 22, "last_activity_date": 1447357335, "creation_date": 1446626961, "question_id": 33517350, "link": "https://stackoverflow.com/questions/33517350/what-is-overflow-usub", "title": "What is overflow_usub?", "body": "<p>Linus Torvalds has recently made it to mainstream news with a rant over a pull request. This pull request included a function, <code>overflow_usub</code>, which is apparently non-standard and uses some kind of compiler magic. As a result of the widespread reporting of this rant, it is near-impossible to find any useful information about this function. My question is: what is <code>overflow_usub</code>, when should it be used and what kind of compiler magic does it require?</p>\n"}, {"tags": ["c", "getopt"], "comments": [{"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 1, "creation_date": 1446626795, "post_id": 33517228, "comment_id": 54816443, "body": "Is <code>getopt</code> required? You could just declare <code>int main(int argc, char * argv[])</code> and take the filenames from <code>argv[]</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446626809, "post_id": 33517228, "comment_id": 54816456, "body": "&quot;<i>how to use the getopt command</i>&quot; just don&#39;t. Use <code>main()</code>&#39;s arguments directly."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446626936, "post_id": 33517228, "comment_id": 54816529, "body": "Related, if not a duplicate: <a href=\"http://stackoverflow.com/q/18079340/694576\">stackoverflow.com/q/18079340/694576</a>"}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 5523735, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0cd51b33a60dbf810b491c9bf0cb064?s=128&d=identicon&r=PG&f=1", "display_name": "craaaft", "link": "https://stackoverflow.com/users/5523735/craaaft"}, "edited": false, "score": 0, "creation_date": 1446635313, "post_id": 33517834, "comment_id": 54821876, "body": "OK I got it. How could I check if there are any options and if there really are I want to give out an error. At the moment I get an inavlid option message. I guess I could do if(getopt(argc,argv,&quot;&quot;)!=-1) then error."}, {"owner": {"reputation": 5016, "user_id": 5508736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156be54ad8a1d4eb8a3c3e82a333d0fd?s=128&d=identicon&r=PG&f=1", "display_name": "Darwin von Corax", "link": "https://stackoverflow.com/users/5508736/darwin-von-corax"}, "reply_to_user": {"reputation": 155, "user_id": 5523735, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0cd51b33a60dbf810b491c9bf0cb064?s=128&d=identicon&r=PG&f=1", "display_name": "craaaft", "link": "https://stackoverflow.com/users/5523735/craaaft"}, "edited": false, "score": 0, "creation_date": 1446657019, "post_id": 33517834, "comment_id": 54837098, "body": "You could try that and see what happens, but I&#39;m not aware of any stock Unix tools that explicitly check for unwanted <i>types</i> of args. The most I&#39;ve ever done in this sort of situation is something like <code>if (argc &lt; MINARGS || argc &gt; MAXARGS)</code> where <code>MAXARGS = 3</code> and <code>MINARGS = 3</code> (or <code>MINARGS = 1</code> if we can run as a filter.)"}], "tags": [], "owner": {"reputation": 5016, "user_id": 5508736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156be54ad8a1d4eb8a3c3e82a333d0fd?s=128&d=identicon&r=PG&f=1", "display_name": "Darwin von Corax", "link": "https://stackoverflow.com/users/5508736/darwin-von-corax"}, "is_accepted": false, "score": 1, "last_activity_date": 1446628532, "creation_date": 1446628532, "answer_id": 33517834, "question_id": 33517228, "link": "https://stackoverflow.com/questions/33517228/getopt-function-without-options-just-arguments/33517834#33517834", "title": "Getopt function without options just arguments", "body": "<p>If your program does not accept POSIX-style options, then alk has the right of it - you don't need <code>getopt()</code> if you have no options to get.</p>\n\n<p>Per the getopt(3) manpage, once <code>getopt()</code> has exhausted the provided options (which, being <em>options,</em> may be zero in number), it returns <code>(int) -1</code> and sets <code>optind</code> to the index of the first non-opt argument in <code>argv[]</code> which, in your example, would be <code>argv[1] -&gt; file1</code>.</p>\n"}], "owner": {"reputation": 155, "user_id": 5523735, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0cd51b33a60dbf810b491c9bf0cb064?s=128&d=identicon&r=PG&f=1", "display_name": "craaaft", "link": "https://stackoverflow.com/users/5523735/craaaft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446628532, "creation_date": 1446626498, "last_edit_date": 1446626879, "question_id": 33517228, "link": "https://stackoverflow.com/questions/33517228/getopt-function-without-options-just-arguments", "title": "Getopt function without options just arguments", "body": "<p>I am not sure how to use the getopt command in my scenario.\nI want the following input command:</p>\n\n<pre><code>mydiff file1 file2\n</code></pre>\n\n<p>So there are no options just the two filenames. Any idea on how to do that? </p>\n"}, {"tags": ["c", "hex", "printf", "decimal", "ascii"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1446626049, "post_id": 33517063, "comment_id": 54816023, "body": "<code>atoi</code> only knows about decimal numbers - use <code>strtol</code> with base 16 or <code>sscanf</code> with <code>%x</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1446626577, "post_id": 33517063, "comment_id": 54816317, "body": "What about just doing <code>value = number;</code>?"}, {"owner": {"reputation": 91, "user_id": 5465789, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NRsSV.png?s=128&g=1", "display_name": "O.k", "link": "https://stackoverflow.com/users/5465789/o-k"}, "edited": false, "score": 0, "creation_date": 1446627002, "post_id": 33517063, "comment_id": 54816572, "body": "Because, i change the content of the ascii array by incrementing or decrementing the values, after convert to decimal then save it."}], "answers": [{"tags": [], "owner": {"reputation": 1192, "user_id": 5203926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIMga.png?s=128&g=1", "display_name": "kcraigie", "link": "https://stackoverflow.com/users/5203926/kcraigie"}, "is_accepted": false, "score": 4, "last_activity_date": 1446626182, "creation_date": 1446626182, "answer_id": 33517132, "question_id": 33517063, "link": "https://stackoverflow.com/questions/33517063/hexadecimal-to-decimal-conversion-with-sprintf-in-c/33517132#33517132", "title": "Hexadecimal to decimal conversion with sprintf in C", "body": "<p>The problem is atoi doesn't parse hex. You need a function that parses a hex digit. <code>sscanf(ascii, \"%x\", &amp;i)</code> comes to mind...</p>\n"}, {"tags": [], "owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "is_accepted": false, "score": 4, "last_activity_date": 1446626319, "creation_date": 1446626319, "answer_id": 33517174, "question_id": 33517063, "link": "https://stackoverflow.com/questions/33517063/hexadecimal-to-decimal-conversion-with-sprintf-in-c/33517174#33517174", "title": "Hexadecimal to decimal conversion with sprintf in C", "body": "<p>As pointed by others <code>atoi</code> doesnt parse hex. You can try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    char s[] = \"3F\";\n    int x;\n    sscanf(s, \"%x\", &amp;x);\n    printf(\"%u\\n\", x);\n}\n</code></pre>\n\n<p><strong><a href=\"https://ideone.com/uYnNOM\" rel=\"nofollow\">IDEONE SAMPLE</a></strong></p>\n\n<p>or you can use <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow\">strol</a> like this:</p>\n\n<pre><code>printf(\"%u\\n\", strtol(\"3F\", NULL, 16));\n</code></pre>\n\n<p><strong><a href=\"https://ideone.com/uYnNOM\" rel=\"nofollow\">IDEONE SAMPLE</a></strong></p>\n"}], "owner": {"reputation": 91, "user_id": 5465789, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NRsSV.png?s=128&g=1", "display_name": "O.k", "link": "https://stackoverflow.com/users/5465789/o-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3458, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1446626352, "creation_date": 1446625934, "last_edit_date": 1446626352, "question_id": 33517063, "link": "https://stackoverflow.com/questions/33517063/hexadecimal-to-decimal-conversion-with-sprintf-in-c", "title": "Hexadecimal to decimal conversion with sprintf in C", "body": "<p>I have</p>\n\n<pre><code>sprintf(ascii,\"%X\",number) // number = 63 is a decimal integer`\n</code></pre>\n\n<p><code>char ascii[] = {51, 70, 0, 0, 0, .... }</code>  which displayed as \"3F\"</p>\n\n<p>When I have</p>\n\n<pre><code>value = atoi(ascii);\n</code></pre>\n\n<p>It returns <code>value = 3</code>  not 63.</p>\n\n<p>The thing that I want is hexadecimal conversion with sprintf, display it but then save the value inside the table as decimal to another variable.</p>\n\n<p>How it can be done ?</p>\n"}, {"tags": ["c", "linked-list", "malloc", "binary-tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1446625869, "post_id": 33517003, "comment_id": 54815934, "body": "<code>t</code> is a local variable in <code>TREEinsert</code>. Any changes you make to it are not refceted in the calling function. You should pass the address of the root pointer as <code>struct node **p</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1446626450, "post_id": 33517003, "comment_id": 54816245, "body": "Please format your code correctly."}], "answers": [{"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 3, "last_activity_date": 1446626442, "creation_date": 1446626442, "answer_id": 33517211, "question_id": 33517003, "link": "https://stackoverflow.com/questions/33517003/how-to-insert-numbers-into-a-binary-search-tree-in-c/33517211#33517211", "title": "How to insert numbers into a binary search tree in C?", "body": "<p>The node pointer <code>t</code> is a local variable in <code>TREEinsert</code>. Any changes you make to it are not reflected in the calling function.</p>\n\n<p>You should pass the address of the root pointer as <code>struct node *p</code> from the calling function. When you recurse, pass the adress of the left or right pointer of te current node respectively.</p>\n\n<p>Here's how:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct node {\n    int info;\n    struct node *left;\n    struct node *right;\n};\n\n\nvoid TREEclear(struct node *t)\n{\n    t = NULL;\n}\n\nvoid TREEinsert(struct node **t, int x)\n{\n    if (*t == NULL) {\n        *t = malloc(sizeof(**t));\n        // TODO: check allocation success\n\n        (*t)-&gt;info = x;\n        (*t)-&gt;left = NULL;\n        (*t)-&gt;right = NULL;\n    } else {\n        if (x &lt; (*t)-&gt;info) TREEinsert(&amp;(*t)-&gt;left, x);\n        if (x &gt; (*t)-&gt;info) TREEinsert(&amp;(*t)-&gt;right, x);\n    }\n}\n\nvoid Displayinorder(struct node *t)\n{\n    if (t != NULL) {\n        Displayinorder(t-&gt;left);\n        printf(\"%d\\n\", t-&gt;info);\n        Displayinorder(t-&gt;right);\n    }\n\n}\n\nint main()\n{\n    struct node *root = NULL;\n\n    TREEinsert(&amp;root, 5);\n    TREEinsert(&amp;root, 8);\n    TREEinsert(&amp;root, 2);\n    TREEinsert(&amp;root, 6);\n\n    Displayinorder(root);\n\n    // TODO: need to free the tree nodes\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that you pass <code>&amp;root</code> to the insertion function, which may have to modify it, but just <code>root</code> to the display functon, which only has to inspect it.</p>\n\n<p>I've gotten rid of your <code>TREEclear</code> function. First, it has the same problems as your original <code>TREEinsert</code>: it modifies a local variable and doesn't change anything in <code>main</code>. Second, this function should <code>free</code> all nodes, not just set the root to <code>NULL</code>. (That said, you should write this function, so that you can deallocate the tree after use.)</p>\n"}, {"tags": [], "owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "is_accepted": false, "score": 2, "last_activity_date": 1446626490, "creation_date": 1446626490, "answer_id": 33517224, "question_id": 33517003, "link": "https://stackoverflow.com/questions/33517003/how-to-insert-numbers-into-a-binary-search-tree-in-c/33517224#33517224", "title": "How to insert numbers into a binary search tree in C?", "body": "<p>The <code>t</code> in your <code>TREEinsert</code> function is a local variable so from there you have two options: either you return it and have the code like below, or your parameter <code>t</code> should be a <code>struct node**</code><br>\nSo first option is:</p>\n\n<pre><code> struct node* TREEinsert(struct node*  t, int x)\n {\n\n  //insert in BST\n  if(t == NULL)\n  {\n\n    t = (struct node*)malloc(sizeof(struct node));\n    t-&gt;info = x;\n    t-&gt;left = NULL;\n    t-&gt;right = NULL;\n    return t ;\n  }\n else\n  {\n    if (x &lt; t-&gt;info)\n        return(TREEinsert(t-&gt;left, x));\n    if (x &gt; t-&gt;info)\n       return(TREEinsert(t-&gt;right, x));\n  }\n\n\n}\n</code></pre>\n\n<p>Second option is:</p>\n\n<pre><code>void TREEinsert(struct node **t, int x)\n{\n    if (*t == NULL) {\n        *t = malloc(sizeof(**t));\n        (*t)-&gt;info = x;\n        (*t)-&gt;left = NULL;\n        (*t)-&gt;right = NULL;\n    } else {\n        if (x &lt; (*t)-&gt;info) \n            TREEinsert(&amp;(*t)-&gt;left, x);\n        if (x &gt; (*t)-&gt;info) \n            TREEinsert(&amp;(*t)-&gt;right, x);\n    }\n}\n</code></pre>\n\n<p>Side-note: you may want to check whether your <code>malloc</code> succeeded or not.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1446626978, "last_edit_date": 1446626978, "creation_date": 1446626568, "answer_id": 33517242, "question_id": 33517003, "link": "https://stackoverflow.com/questions/33517003/how-to-insert-numbers-into-a-binary-search-tree-in-c/33517242#33517242", "title": "How to insert numbers into a binary search tree in C?", "body": "<p>First of all function <code>TREEclear</code> does not set to zero the original head of three. It deals with a copy of the head. The original head is not changed. </p>\n\n<p>Also the name of the function is confusing. It is better to name it for example like  <code>TREEinit</code>.</p>\n\n<p>It can look the following way</p>\n\n<pre><code>void TREEinit( struct node * *t)\n{\n    *t = NULL;\n}\n</code></pre>\n\n<p>Recursive function <code>TREEinsert</code>  can look like</p>\n\n<pre><code>void TREEinsert( struct node * *t, int x )\n{\n    if ( *t == NULL )\n    {\n        *t = ( struct node* )malloc( sizeof( struct node ) );\n        ( *t )-&gt;info = x;\n        ( *t )-&gt;left = NULL;\n        ( *t )-&gt;right = NULL;\n    }\n    else if (  x &lt; ( *t )-&gt;info )\n    {       \n        TREEinsert( &amp;( *t )-&gt;left, x );\n    }\n    else if ( x &gt; ( *t )-&gt;info )\n    {\n        TREEinsert( &amp;( *t )-&gt;right, x );\n    }\n}\n</code></pre>\n\n<p>and it should be called like </p>\n\n<pre><code>TREEinsert( &amp;root, 5 );\n</code></pre>\n\n<p>Take into account that you need to write also a function that will free all allocated memory for the tree.</p>\n"}, {"tags": [], "owner": {"reputation": 203, "user_id": 2282655, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/aad98cd956a6cf64d804c87ac0bda1c3?s=128&d=identicon&r=PG", "display_name": "SR230", "link": "https://stackoverflow.com/users/2282655/sr230"}, "is_accepted": false, "score": 0, "last_activity_date": 1446627771, "last_edit_date": 1446627771, "creation_date": 1446627417, "answer_id": 33517495, "question_id": 33517003, "link": "https://stackoverflow.com/questions/33517003/how-to-insert-numbers-into-a-binary-search-tree-in-c/33517495#33517495", "title": "How to insert numbers into a binary search tree in C?", "body": "<pre><code>There is two way to fixed it\n1. change the return type of Insert function \n\n\nStruct node * TREEinsert(){\n              //your code\n\n            return the local variable( t)\n           }\n\n2. If you don't want to change the return type of function then change the argument you are passing to Insert function\n            TREEinsert(&amp;root, intVariable);\n    and in  TREEinsert(Struct node **,int);\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5283614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f9b495dd406a106a3e2036f4bb579908?s=128&d=identicon&r=PG&f=1", "display_name": "JonSnow", "link": "https://stackoverflow.com/users/5283614/jonsnow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 33517211, "answer_count": 4, "score": 0, "last_activity_date": 1446627771, "creation_date": 1446625710, "last_edit_date": 1446626454, "question_id": 33517003, "link": "https://stackoverflow.com/questions/33517003/how-to-insert-numbers-into-a-binary-search-tree-in-c", "title": "How to insert numbers into a binary search tree in C?", "body": "<p>I am trying to insert a list of numbers into a binary search tree by calling the TREEinsert function frim the main function however whenever my program runs it does not print any number inserted into the binary search tree. I have gone over both my TREEinsert function and Displayinorder function but cannot seem to find any issues with the functionality of either function. I have a basic understanding of binary search trees and have looked at many examples trying to get an insight as to how BST's work. Any guidance will be greatly helpful.</p>\n\n<pre><code>struct node\n {\n     int info;\n     struct node *left;\n     struct node *right;\n };\n\n\n\nvoid TREEclear(struct node* t)\n{\n     t = NULL;\n}\n\nvoid TREEinsert(struct node*  t, int x)\n{\n\n    //insert in BST\n    if(t == NULL)\n    {\n        t = (struct node*)malloc(sizeof(struct node));\n        t-&gt;info = x;\n        t-&gt;left = NULL;\n        t-&gt;right = NULL;\n    }\n    else\n    {\n        if (x &lt; t-&gt;info)\n        TREEinsert(t-&gt;left, x);\n        if (x &gt; t-&gt;info)\n            TREEinsert(t-&gt;right, x);\n    }\n}\n\nvoid Displayinorder(struct node* t)\n{\n    //in order: (LC)(P)(RC)\n    if (t != NULL)\n    {\n        Displayinorder(t-&gt;left); //LC\n        printf(\"%d\\t\", t-&gt;info); //P\n        Displayinorder(t-&gt;right); //RC\n    }\n}\n\nstruct node *root;\n\nint main()\n{\n    TREEclear(root);\n\n    TREEinsert(root, 5);\n    TREEinsert(root, 8);\n    TREEinsert(root, 2);\n    TREEinsert(root, 6);\n\n    Displayinorder(root);\n\n    printf(\"\\n\\n\");\n    system(\"PAUSE\");\n    return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "makefile", "flags"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1446625162, "post_id": 33516839, "comment_id": 54815571, "body": "what is that <code>.</code> in <code>-DDEBUG.</code>?"}, {"owner": {"reputation": 5013, "user_id": 969617, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/2412de50d273085f5dcf3f2101c3996e?s=128&d=identicon&r=PG", "display_name": "beoliver", "link": "https://stackoverflow.com/users/969617/beoliver"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446625230, "post_id": 33516839, "comment_id": 54815609, "body": "@SouravGhosh from the <code>$(CFLAGS).</code>"}, {"owner": {"reputation": 5013, "user_id": 969617, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/2412de50d273085f5dcf3f2101c3996e?s=128&d=identicon&r=PG", "display_name": "beoliver", "link": "https://stackoverflow.com/users/969617/beoliver"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446625309, "post_id": 33516839, "comment_id": 54815643, "body": "If I remove it, when I compile using <code>make</code> I get <code>gcc-5 -o foo foo.c -I gcc-5: error: missing path after &#39;-I&#39; make: *** [main] Error 1</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446625520, "post_id": 33516839, "comment_id": 54815760, "body": "I din&#39;t see a reson for <code>-I</code> to exist as of now."}, {"owner": {"reputation": 5013, "user_id": 969617, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/2412de50d273085f5dcf3f2101c3996e?s=128&d=identicon&r=PG", "display_name": "beoliver", "link": "https://stackoverflow.com/users/969617/beoliver"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1446625859, "post_id": 33516839, "comment_id": 54815927, "body": "@SouravGhosh, no reason in this example, but the actual project requires it (header files)"}], "answers": [{"comments": [{"owner": {"reputation": 5013, "user_id": 969617, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/2412de50d273085f5dcf3f2101c3996e?s=128&d=identicon&r=PG", "display_name": "beoliver", "link": "https://stackoverflow.com/users/969617/beoliver"}, "edited": false, "score": 0, "creation_date": 1446625553, "post_id": 33516956, "comment_id": 54815772, "body": "This is a super stripped down example. Ah, so the <code>.</code> is the argument to <code>I</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 5013, "user_id": 969617, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/2412de50d273085f5dcf3f2101c3996e?s=128&d=identicon&r=PG", "display_name": "beoliver", "link": "https://stackoverflow.com/users/969617/beoliver"}, "edited": false, "score": 0, "creation_date": 1446625620, "post_id": 33516956, "comment_id": 54815807, "body": "@ThemanontheClaphamomnibus It <i>could</i> be, but then you need to provided it at the right spot, like <code>CFLAGS=-I.</code>."}, {"owner": {"reputation": 5013, "user_id": 969617, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/2412de50d273085f5dcf3f2101c3996e?s=128&d=identicon&r=PG", "display_name": "beoliver", "link": "https://stackoverflow.com/users/969617/beoliver"}, "edited": false, "score": 0, "creation_date": 1446625628, "post_id": 33516956, "comment_id": 54815812, "body": "Solved! I need the <code>I</code> flag, just changed <code>CFLAGS=-I</code> to <code>CFLAGS=-I.</code>"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1446625570, "last_edit_date": 1446625570, "creation_date": 1446625500, "answer_id": 33516956, "question_id": 33516839, "link": "https://stackoverflow.com/questions/33516839/problems-setting-flags-from-makefile/33516956#33516956", "title": "problems setting flags from makefile", "body": "<p>The<code>-I</code> option expects an argument, and right now its <code>-DDEBUG.</code>. Either remove the <code>-I</code> option, or provide it with an argument. I recommend removing it, since I see nothing that warrants adding a directory to the include search paths.</p>\n"}], "owner": {"reputation": 5013, "user_id": 969617, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/2412de50d273085f5dcf3f2101c3996e?s=128&d=identicon&r=PG", "display_name": "beoliver", "link": "https://stackoverflow.com/users/969617/beoliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "accepted_answer_id": 33516956, "answer_count": 1, "score": 0, "last_activity_date": 1446625570, "creation_date": 1446625054, "last_edit_date": 1446625296, "question_id": 33516839, "link": "https://stackoverflow.com/questions/33516839/problems-setting-flags-from-makefile", "title": "problems setting flags from makefile", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char** argv) {\n\n#ifdef DEBUG\n  printf(\"Debug!\\n\");\n#endif\n\n  printf(\"hello world\\n\");\n\n}\n</code></pre>\n\n<p>makefile:</p>\n\n<pre><code>CC=gcc-5\n\nCFLAGS=-I\n\nDEPS=foo.c\n\nmain: $(DEPS)\n    $(CC) -o foo $(DEPS) $(CFLAGS).\n\ndebug: CFLAGS += -DDEBUG\ndebug: main\n</code></pre>\n\n<p>when I run <code>make debug</code></p>\n\n<pre><code>gcc-5 -o foo foo.c -I -DDEBUG.\n&gt; ./foo \nhello world\n</code></pre>\n\n<p>Why am I not seeing \"Debug!\"?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1446625060, "post_id": 33516807, "comment_id": 54815521, "body": "A little more formatting woun&#39;t have hurt. :("}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 1, "creation_date": 1446625066, "post_id": 33516807, "comment_id": 54815524, "body": "Are you serious? You want help (btw debugging help is not appreciated) and do not even format your code to be readable?"}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1446625247, "post_id": 33516807, "comment_id": 54815616, "body": "<code>(2.0(Dx * Dx) + (Dy * Dy));</code> -&gt; you forgot a <code>*</code> between <code>2.0</code> and <code>(Dx...</code>. Even you teacher allows that in math it is not allowed in C to &quot;forget&quot; the multiplication sign"}, {"owner": {"reputation": 1, "user_id": 5433212, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e84c0eb44ea43d9cc9bf3a94e857b27b?s=128&d=identicon&r=PG&f=1", "display_name": "aki", "link": "https://stackoverflow.com/users/5433212/aki"}, "edited": false, "score": 0, "creation_date": 1446626270, "post_id": 33516807, "comment_id": 54816142, "body": "So sorry fr not doing the proper formatting..thanks fr ur answer, it helped..can u please tell me how to get the results now? Because im new to programming..Im using linux..i ran the code after compiling bt it gave nothing..please help..thanks."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1446627704, "post_id": 33516807, "comment_id": 54816979, "body": "I definitively wont read and understand the code for you and seek your error. Thats your work, no mine... But I give you a hint: Without any function that outputs text, of course you wont get any results printed to your console..."}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 0, "last_activity_date": 1446625363, "creation_date": 1446625363, "answer_id": 33516920, "question_id": 33516807, "link": "https://stackoverflow.com/questions/33516807/compiling-error-called-function-is-not-an-object/33516920#33516920", "title": "Compiling error (called function is not an object)", "body": "<p>The error is near the end of the line:</p>\n\n<pre><code>(2.0(Dx*Dx)+(Dy*Dy))  \n</code></pre>\n\n<p>You need an operator between <code>2.0</code> and the parenthesis.\nI guess you are missing a <code>*</code>?</p>\n\n<p><strong>Note:</strong></p>\n\n<p>I compiled it with <code>gcc</code> and got the much clearer error message:</p>\n\n<blockquote>\n  <p>error: called object '2.0e+0' is not a function</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 5433212, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e84c0eb44ea43d9cc9bf3a94e857b27b?s=128&d=identicon&r=PG&f=1", "display_name": "aki", "link": "https://stackoverflow.com/users/5433212/aki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 33516920, "answer_count": 1, "score": -4, "last_activity_date": 1446644605, "creation_date": 1446624906, "last_edit_date": 1446644605, "question_id": 33516807, "link": "https://stackoverflow.com/questions/33516807/compiling-error-called-function-is-not-an-object", "title": "Compiling error (called function is not an object)", "body": "<p>I am trying to write a code for poissons equation. I have written the code but it is giving a compiling error of 'called function is not an object or function pointer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n\nint main(int argc, char* argv[])\n{\n    int U[101][101];\n    int Unew[101][101];\n    double Nx = 100, Ny = 100;\n    float tol = 0.00001;\n    float L = 2.0;\n    int i, j;\n    float pi = 3.14;\n    float Dx, Dy, x, y;\n    Dx = (L / Nx) + 1;\n    Dy = (L / Ny) + 1;\n    for(i = 1; i &lt;= 101; i++) {\n        for(j = 1; j &lt;= 101; j++) {\n        }\n    }\n    x = (i - 1) * Dx;\n    y = (j - 1) * Dy;\n    for(i = 1; i &lt;= 101; i++) {\n        for(j = 1; j &lt;= 101; j++) {\n            U[i][j] = 0.0;\n        }\n    }\n    for(i = 1; i &lt;= 101; i++) {\n        U[i][1] = 0.0;\n    }\n    for(j = 1; j &lt;= 101; j++) {\n        U[101][j] = 0.0;\n    }\n    for(i = 1; i &lt;= 101; i++) {\n        U[i][j] = 0.0;\n    }\n    double iter;\n    double residual;\n    for(iter = 1; iter &lt;= 10000; iter++) {\n        for(i = 2; i &lt;= 101; i++) {\n            for(j = 2; j &lt;= 101; j++) {\n                Unew[i][j] = (Dy * Dy * (U[i - 1][j] + U[i + 1][j]) + Dx * Dx * (U[i][j - 1] + U[i][j + 1]) -\n                              Dx * Dx * Dy * Dy * (cos(pi * Dx) * sin(pi * Dy) + pi * pi * cos(pi * Dx) * sin(Dy))) /\n                             (2.0(Dx * Dx) + (Dy * Dy));\n            }\n        }\n        if(Unew[i][j] - U[i][j] &lt;= tol)\n            break;\n\n        else {\n            iter = iter + 1;\n        }\n        U[i][j] = Unew[i][j];\n    }\n}\n</code></pre>\n\n<p>It gives an error </p>\n\n<pre><code>Unew[i][j]=(Dy*Dy*(U[i-1][j]+U[i+1][j])+Dx*Dx*(U[i][j-1]+U[i][j+1])-Dx*Dx*Dy*Dy*(cos (pi*Dx)*sin(pi*Dy)+pi*pi*cos(pi*Dx)*sin(Dy)))/(2.0(Dx*Dx)+(Dy*Dy));\n</code></pre>\n\n<blockquote>\n  <p>called function is not an object or function pointer</p>\n</blockquote>\n"}, {"tags": ["c", "string", "split"], "comments": [{"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 2, "creation_date": 1446624731, "post_id": 33516723, "comment_id": 54815362, "body": "replace &#39;/0&#39; with &#39;\\0&#39;"}, {"owner": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "reply_to_user": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 0, "creation_date": 1446624821, "post_id": 33516723, "comment_id": 54815397, "body": "thanks. I corrected it, but logic-wise any comments? Kinda first time doing strings."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1446625091, "post_id": 33516723, "comment_id": 54815536, "body": "You <i>are</i> aware of that arrays decays naturally to pointer to their first element? Meaning if you have an array <code>str</code> and pass it to a function taking a pointer, what the compiler will pass is effectively the same as <code>&amp;str[0]</code>. So you don&#39;t have to be explicit about it, just pass <code>str</code> and it will work the same."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1446625567, "post_id": 33516949, "comment_id": 54815776, "body": "The expression <code>L &#47; 2</code> is an integer division and will yield an integer. I don&#39;t think you need floating-point arithmetic here. Just take <code>L&#47;2</code> for the left substring and <code>L - L&#47;2</code> for the right one. (I&#39;ve used an upper-case ell here, because otherwise it looks too much like the fraction one half.)"}, {"owner": {"reputation": 374, "user_id": 5518073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3efaeaaf518957290df7589793c670f0?s=128&d=identicon&r=PG&f=1", "display_name": "PeteB", "link": "https://stackoverflow.com/users/5518073/peteb"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1446626131, "post_id": 33516949, "comment_id": 54816075, "body": "Yes that will work too.  To keep it neat that way I would want to store the first division into a temporary variable: int lowHalf = L /  2; and then the subtraction for the other half would be clear as L - lowHalf.  Doing it with two separate divides risks errors if only one of them is rounded up.  Note that this approach puts the short string in LowerHalf if done exactly as described."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1446638795, "post_id": 33516949, "comment_id": 54824177, "body": "What do you mean with &quot;too&quot;? Your approach doesn&#39;t work. (Or, more gently put, it works only in theory.) Say <code>L</code> is 7. Then <code>L&#47;2</code> is 3, not 3.5, because this is an integer division. 3 + 0.5 is 3.5, which will be truncated to just 3 again on conversion to int. You could say <code>L&#47;2.0 + 0.5</code> to move the middle element to the left subarray. But that can be expressed as <code>(L + 1) &#47; 2</code>, for which you don&#39;t need any floating-point maths."}, {"owner": {"reputation": 374, "user_id": 5518073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3efaeaaf518957290df7589793c670f0?s=128&d=identicon&r=PG&f=1", "display_name": "PeteB", "link": "https://stackoverflow.com/users/5518073/peteb"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1446676908, "post_id": 33516949, "comment_id": 54848543, "body": "Ack yes of course you&#39;re correct.  I&#39;ve spent too long with type promoted languages!"}, {"owner": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "edited": false, "score": 0, "creation_date": 1446697249, "post_id": 33516949, "comment_id": 54854277, "body": "Btw, for the memset portion of the code, you&#39;re initializing the entire array with &#39;\\0&#39; right? But if you do strncpy for the lowerhalf, strncpy(LowerHalf, str, half); will copy the characters in str, from 0-4? In the case of a length 8 character. But for the upperhalf, isn&#39;t l-half going to give me 4 as well and won&#39;t I be copying from 0-4 as well?"}, {"owner": {"reputation": 374, "user_id": 5518073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3efaeaaf518957290df7589793c670f0?s=128&d=identicon&r=PG&f=1", "display_name": "PeteB", "link": "https://stackoverflow.com/users/5518073/peteb"}, "reply_to_user": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "edited": false, "score": 0, "creation_date": 1446771047, "post_id": 33516949, "comment_id": 54894642, "body": "@Morde Thanks, yes you&#39;re correct about the copy start for upper half and I&#39;ve fixed that using a pointer arithmetic approach (your &amp;str[half] approach will also work but is a little &#39;wordy&#39; for C).  I&#39;m not clear on what you&#39;re saying about the memset - perhaps I should clarify that &#39;\\0&#39; is the string terminator character which evaluates to zero?"}], "tags": [], "owner": {"reputation": 374, "user_id": 5518073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3efaeaaf518957290df7589793c670f0?s=128&d=identicon&r=PG&f=1", "display_name": "PeteB", "link": "https://stackoverflow.com/users/5518073/peteb"}, "is_accepted": false, "score": 1, "last_activity_date": 1446770787, "last_edit_date": 1446770787, "creation_date": 1446625457, "answer_id": 33516949, "question_id": 33516723, "link": "https://stackoverflow.com/questions/33516723/spilt-a-string-into-half-and-join-it-with-another-string/33516949#33516949", "title": "Spilt a string into half and join it with another string", "body": "<p>Yes you definitely need to consider the odd number string lengths.  There are code approaches which will either round it up or down (so that the first or second string will have the extra character) but you need to decide which way you want it to go.</p>\n\n<p>Looking at your code, I would suggest that using the temp string is not needed.  You can copy directly from the original 'str' and save that memory and processor overhead.  A few changes will be needed:\nCurrently you're overwriting one of the characters in your source string with the '\\0' character, and your second strcpy is starting at that '\\0' which will return a zero length string.\nTo copy a fixed number of characters, you can use strncpy which will work better here than strcpy by simplifying your code and keeping things clear.\nDon't forget to terminate your strings with a \\0, or you could initialise the buffers with 0 values as I have here.</p>\n\n<p>So, an example might look like this:</p>\n\n<pre><code>char UpperHalf[MAX_LENGTH];\nchar LowerHalf[MAX_LENGTH];\n\nint l = strlen(str);\nint half = l / 2;\nmemset(LowerHalf, '\\0', MAX_LENGTH);\nstrncpy(LowerHalf, str, half);\nmemset(UpperHalf, '\\0', MAX_LENGTH);\nstrncpy(UpperHalf, str + half, l - half);\n</code></pre>\n\n<p>This will put the longer part of an odd length string into the UpperHalf char array.\nTo make the code safe you should also consider doing length comparisons to ensure that all strings will fit in the buffers provided (with at least one character left over for the string terminating \\0 character).</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "edited": false, "score": 0, "creation_date": 1446637731, "post_id": 33517243, "comment_id": 54823427, "body": "Hi, can you explain a little more on memcpy and memset? Because I have only learn the normal strcpy, strlen, strcmp and strcat."}, {"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "reply_to_user": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "edited": false, "score": 0, "creation_date": 1446664179, "post_id": 33517243, "comment_id": 54841636, "body": "@Morde: <code>memcpy(destination, source, count)</code> copies <code>count</code> bytes from <code>source</code> to <code>destination</code>. If you wanted to do this with <i>only</i> <code>strcpy</code>, you would need to do basically as you thought: replace the character at the end of the first string with a null terminator, then restore it when you\u2019re done. <code>char temp = str[upper_length]; str[upper_length] = &#39;\\0&#39;; strcpy(upper_half, &amp;str[0]); str[upper_length] = temp; strcpy(lower_half, &amp;str[upper_length]);</code> However, this code is a little harder to reason about than the version that simply copies the data out directly."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1446678380, "post_id": 33517243, "comment_id": 54849108, "body": "&quot;... while <code>memcpy</code> copies a given number of bytes ...&quot; but there is also a <code>strncpy</code> :) (Oh well, I see it&#39;s missing from OPs shortlist anyway.)"}], "tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": false, "score": 0, "last_activity_date": 1446626569, "creation_date": 1446626569, "answer_id": 33517243, "question_id": 33516723, "link": "https://stackoverflow.com/questions/33516723/spilt-a-string-into-half-and-join-it-with-another-string/33517243#33517243", "title": "Spilt a string into half and join it with another string", "body": "<p>Yes, you must first use <code>strlen</code> to get the length of the input string, and halve it to give the length of <code>upper_half</code>:</p>\n\n<pre><code>size_t length = strlen(str);\nsize_t upper_length = length / 2;\nsize_t lower_length = length - upper_length;\n</code></pre>\n\n<p>In this case, if the length of the input string is odd, then due to integer division, <code>upper_length</code> will equal <code>lower_length - 1</code>, e.g.:</p>\n\n<pre><code>length == 3\nupper_length == 3 / 2 == 1\nlower_length == 3 - 1 == 2\n</code></pre>\n\n<p>It\u2019s easier to do the actual copying without modifying the original string, as your code is doing.</p>\n\n<p>You must allocate space to store the copies of the string halves, with null terminators:</p>\n\n<pre><code>char *upper_half = malloc(upper_length + 1);\nchar *lower_half = malloc(lower_length + 1);\n</code></pre>\n\n<p>Then use <code>memcpy</code> to copy the string data:</p>\n\n<pre><code>memcpy(upper_half, &amp;str[0], upper_length);\nupper_half[upper_length] = '\\0';\n</code></pre>\n\n<p>(Similarly for <code>lower_half</code>.)</p>\n\n<p><code>strcpy</code> copies characters until a null byte, while <code>memcpy</code> copies a given number of bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1446779096, "creation_date": 1446779096, "answer_id": 33558764, "question_id": 33516723, "link": "https://stackoverflow.com/questions/33516723/spilt-a-string-into-half-and-join-it-with-another-string/33558764#33558764", "title": "Spilt a string into half and join it with another string", "body": "<p>While it is fine to use all the standard functions to copy the lower/upper halves to separate strings, you can also split the string using only pointers and a separate buffer to hold the lower-half of the string. </p>\n\n<p>Basically, you can find the length of the string, adjust the odd/even location of the midpoint (if desired to always but the additional char on odd lengths in the lower-half), and then use a simple loop to copy to lower-half. At the end of the loop, the pointer used points to the upper-half (or you can simply use the pointer for the location of the midpoint). A short example would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAXC 64\n\nint main (int argc, char **argv) {\n\n    if (argc &lt; 2 ) {\n        fprintf (stderr, \"error: insufficient input, usage: %s string\\n\",\n                argv[0]);\n        return 1;\n    }\n\n    char lower_half[MAXC] = {0};    /* array to hold lower_half */\n    char *p = argv[1];              /* poiter to string         */\n    char *pl = lower_half;          /* pointer to lower_half    */\n    char *split = NULL;             /* pointer to split point   */\n    size_t len = 0;                 /* string length            */\n\n    for (; *p; p++);        /* find end of string   */\n    len = p - argv[1];      /* get string length    */\n    p = argv[1];            /* reset pointer        */\n    split = p + len/2;      /* set split at middle  */\n    if (len &amp; 1) split++;   /* if odd, add 1        */\n\n    for (; p &lt; split; p++)  /* for each ch &lt; split  */\n        *pl++ = *p;         /* copy to lower_half   */\n    *pl = 0;                /* null-terminate       */\n\n    /* print results */\n    printf (\"\\n lower_half : '%s'    upper_half : '%s'\\n\",\n            lower_half, split);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/str_half 123456789\n\n lower_half : '12345'    upper_half : '6789'\n\n$ ./bin/str_half 1234567890\n\n lower_half : '12345'    upper_half : '67890'\n</code></pre>\n\n<p>Regardless of whether you use pointers or use <code>strlen</code>, <code>strncpy</code>, or <code>memcpy</code>, etc., just be sure you <code>null-terminate</code> the separated strings. Above, the explicit null-termination is not required due to <code>lower_half</code> being initialized to all <code>0</code> at the beginning. However, it is good practice to always insure your code is null-terminating your strings.</p>\n"}], "owner": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1446779096, "creation_date": 1446624621, "last_edit_date": 1446766868, "question_id": 33516723, "link": "https://stackoverflow.com/questions/33516723/spilt-a-string-into-half-and-join-it-with-another-string", "title": "Spilt a string into half and join it with another string", "body": "<p>I wanna ask if say i have a string \"abcdefgh\" and I want to half it to become \"abcd\" and \"efgh\" and store it into their own strings say I call it \"UpperHalf\" and \"LowerHalf\". So the way to do this is to first make use of the strlen() to find out the length of my input and half it? Then I would need to use strcpy() and copy it to their respective strings right? </p>\n\n<p>Actually I don't even know if my code makes any sense. Anyone can give me some comments on it? </p>\n\n<p>I realized I only need to consider even input numbers which means I do not need to worry about odd inputs. Previously I was trying to spilt a 1d string into half and then strcat it with something else. But now I am given a series of input strings that are stored in 2d array format. In this case, how do I retrieve these strings and manipulate them as though it is the same as the previous 1d case? I don't think I need to use for loops? Can I just point to the row?</p>\n\n<pre><code>int d = strlen(str); // just an example where str = the characters inside my string\nstrcpy(temp, &amp;str[0]); // store original string into a temp string starting from 0 to \\0\nstr[d/2] = '\\0';\nstrcpy(UpperHalf, &amp;str[0]); // starts copying from position 0 to \\0 which is the half way point\nstr[0] = temp;  //revert back to normal -&gt; Does this line even make sense?\nstrcpy(LowerHalf, &amp;str[d/2]);\n</code></pre>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 2, "creation_date": 1446624642, "post_id": 33516680, "comment_id": 54815325, "body": "<code>Is it correct?</code> Every journey starts with a single step."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1446624646, "post_id": 33516680, "comment_id": 54815329, "body": "Is the <code>C++</code> tag a mistake? The question looks like it is intended to be (bad, but my opinion) <code>C</code>, and the answers will be very different in the 2 different languages. <a href=\"http://en.cppreference.com/w/c/string/byte/isalnum\" rel=\"nofollow noreferrer\"><code>isalnum</code></a> is likely to be your friend (more so in the <code>C</code> case than the <code>C++</code>, I think)."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 4, "creation_date": 1446624780, "post_id": 33516680, "comment_id": 54815384, "body": "Sounds correct. If there are subtle bugs, you&#39;ll get it after coding, so i would suggest you start coding."}, {"owner": {"reputation": 2111, "user_id": 4090903, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/852d1cca847148adca9647aa4931c6ac?s=128&d=identicon&r=PG&f=1", "display_name": "thepace", "link": "https://stackoverflow.com/users/4090903/thepace"}, "edited": false, "score": 1, "creation_date": 1446636749, "post_id": 33516680, "comment_id": 54822826, "body": "The best approach is keeping simple which is what your solution is. Try coding it and cover the edge cases and you would be good to go. For CPP, inbuilt functions can be used which will do a similar thing."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1446636904, "post_id": 33516680, "comment_id": 54822910, "body": "What about consecutive whitespaces? Is that something you have to handle?"}], "owner": {"reputation": 167, "user_id": 3851344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcbe9763c7db1f8f6c264bb1f640403b?s=128&d=identicon&r=PG&f=1", "display_name": "max", "link": "https://stackoverflow.com/users/3851344/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 1, "closed_date": 1446780077, "answer_count": 0, "score": 1, "last_activity_date": 1446638477, "creation_date": 1446624499, "last_edit_date": 1446624763, "question_id": 33516680, "link": "https://stackoverflow.com/questions/33516680/to-return-the-ith-word-in-the-string", "closed_reason": "Duplicate", "title": "To return the ith word in the string", "body": "<p>Implement <code>char * ithword(char * str, int i)</code> that will return the <code>i</code>th word in str. The words are alphanumeric and separated by non-alphanumeric characters. The function will allocate memory for the word returned, and return a pointer to it.</p>\n\n<p>My approach is :\nStart traversing the string and count the numbers of spaces and non-alphanumeric characters and when the count reaches <code>i-1</code>, start printing till you get another space or non-alphanumeric characters.</p>\n\n<p>Is it correct?</p>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1446690972, "post_id": 33516340, "comment_id": 54852662, "body": "Any statement past <code>execvp()</code> will never get executed. As soon as the parent calls <code>execvp()</code>, the new process will replace the parent process. All <code>exec*()</code> family never returns to the caller. This must be the last call within a process and the process is then considered gone (replaced by the new process). Move the call to <code>execvp()</code> before the <code>while</code> loop and delete the <code>while</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 0, "creation_date": 1446650602, "post_id": 33520031, "comment_id": 54832363, "body": "Can you explain what the parent/child piping is supposed to do? What is supposed to be sent by the parent. What is the child supposed to do with it and what is the child supposed to send back?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5329895"}, "edited": false, "score": 0, "creation_date": 1446656294, "post_id": 33520031, "comment_id": 54836555, "body": "<b>the parent/child piping is supposed to do.</b> The parent process will send the result execute of <code>execvp(&quot;ls&quot;,&amp;address)</code> which is  a string of current directory such as a.txt b.pdf ... displayed on screen of server. I use <code>dup2(1,pipefd[1])</code> to put data from screen into pipefd[1]. The child process will receive data from parent process by pipefd[0] and send data to path variable. Finally, The data of path will be sent to client using  <code>send(sock,path,strlen(path),0)</code>"}], "tags": [], "owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1446634585, "creation_date": 1446634585, "answer_id": 33520031, "question_id": 33516340, "link": "https://stackoverflow.com/questions/33516340/how-to-send-result-of-execute-command-from-server-to-client/33520031#33520031", "title": "How to send result of execute command from server to client?", "body": "<p>You've got a segmentation fault on this line because you're attempting to pass an integer to <code>strlen</code>:</p>\n\n<pre><code>write(STDOUT_FILENO,pipefd[1],strlen(pipefd[1]));\n</code></pre>\n\n<p>Your compiler should emit at least a warning for this; gcc does:</p>\n\n<pre><code>server.c:84: warning: passing argument 1 of 'strlen' makes pointer from integer without a cast\n/usr/include/string.h:399: note: expected 'const char *' but argument is of type 'int'\n</code></pre>\n\n<p>If the intention was to write the value of <code>pipefd[1]</code> to <code>STDOUT_FILENO</code> as a binary integer then did you mean to do this?</p>\n\n<pre><code>write(STDOUT_FILENO,&amp;pipefd[1],sizeof(pipefd[1]));\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5329895"}, "edited": false, "score": 0, "creation_date": 1446711501, "post_id": 33536587, "comment_id": 54859815, "body": "While server sent <code>path</code> to client, it couldn&#39;t send <code>buffer</code> ( That have been sent from client ). Why?"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1446736428, "post_id": 33536587, "comment_id": 54875913, "body": "It sends it on mine. Did you test this code as written? Or maybe I am not understanding what you mean?"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1446736870, "post_id": 33536587, "comment_id": 54876224, "body": "In your original code the buffer isn&#39;t sent because both server and client are waiting on <code>recvfrom()</code>. I removed the extra while loop that receive data so server can send buffer. Please copy the whole code from here. Use strace whenever you are debugging."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5329895"}, "edited": false, "score": 0, "creation_date": 1446741275, "post_id": 33536587, "comment_id": 54879460, "body": "Your code worked with me. Why do you use <code>signal</code>?. Addition, My old code use <code>while(1)</code> in client to repeat type request command until I type <code>&quot;exit&quot;</code>; However, when i add <code>while(1)</code> in client as previous that doesn&#39;t work. How to client request server  consecutive work without exit at the same time?."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1446747706, "post_id": 33536587, "comment_id": 54883414, "body": "The server code you originally wrote exit after a command. The client won&#39;t be able to send another request if the server is down. You will need to loop in the server code as well instead of exiting. I&#39;ll update my reply for the explanation of the codes I added and deleted."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1446752110, "post_id": 33536587, "comment_id": 54885939, "body": "@L\u1ee3i - I added while loops in both client and server."}], "tags": [], "owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "is_accepted": true, "score": 1, "last_activity_date": 1446752075, "last_edit_date": 1446752075, "creation_date": 1446696887, "answer_id": 33536587, "question_id": 33516340, "link": "https://stackoverflow.com/questions/33516340/how-to-send-result-of-execute-command-from-server-to-client/33536587#33536587", "title": "How to send result of execute command from server to client?", "body": "<p>I modified the code to what I believe is your intended behavior. Note that <code>execvp()</code> is being executed at the end instead of the beginning as in your original code. I fixed a few places where both server and client were attempting to receive when one of them should be sending.</p>\n\n<p>I added while loop to allow executing commands until client types exit.</p>\n\n<p>Please see the comments within the code.</p>\n\n<p><strong>Server</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n#include &lt;signal.h&gt;\n\n#define MAXPENDING 5\n#define BUFFSIZE 2048\n#define MAX 2048\nvoid Die(char *mess) \n{\n    perror(mess);\n    exit(1);\n}\n\nvoid setup(char inputBuffer[], char *args[], int *background) //Ham xu li (cat) chuoi lenh\n{\n    const char s[4] = \" \\t\\n\";\n    char *token;\n    token = strtok(inputBuffer, s);\n    int i = 0;\n    while( token != NULL)\n    {\n        args[i] = token;\n        i++;\n        //printf(\"%s\\n\", token);\n        token = strtok(NULL,s);\n    }\n    args[i] = NULL;\n}\n\nvoid HandeClient(int sock){\n\nchar buffer[BUFFSIZE];\nint received = -1;\nchar data[MAX];\nmemset(data,0,MAX);\n\nwhile(1) { // this will make server wait for another command to run until it receives exit\n    data[0] = '\\0';\n    if((received = recv(sock, buffer,BUFFSIZE,0))&lt;0){\n\n        Die(\"Failed\");\n    }\n\n    buffer[received] = '\\0';\n\n    strcat (data,  buffer);\n    if (strcmp(data, \"exit\")==0) // this will force the code to exit\n        exit(0);\n/* This block causes server to wait for more data from client when all data are already received.\n    while(received&gt;0)\n    {\n        if(send(sock,buffer, received,0)!= received){\n            Die(\"Failed\");\n        }\n        if((received=recv(sock,buffer,BUFFSIZE,0))&lt;0){\n            Die(\"Failed\");\n        }\n\n        buffer[received] = '\\0';\n        strcat (data, buffer);\n    }\n*/\n\n    puts (data);\n        char *args[100];\n        setup(data,args,0);\n        int pipefd[2],lenght;\n\n        if(pipe(pipefd))\n            Die(\"Failed to create pipe\");\n\n        pid_t pid = fork();\n        char path[MAX];\n\n        if(pid==0)\n        {\n            close(1); // close the original stdout\n            dup2(pipefd[1],1); // duplicate pipfd[1] to stdout\n            close(pipefd[0]); // close the readonly side of the pipe\n            close(pipefd[1]); // close the original write side of the pipe\n            execvp(args[0],args); // finally execute the command\n        }\n        else\n            if(pid&gt;0)\n            {\n                close(pipefd[1]);\n                memset(path,0,MAX);\n                while(lenght=read(pipefd[0],path,MAX-1)){\n                    printf(\"Data read so far %s\\n\", path);\n                    if(send(sock,path,strlen(path),0) != strlen(path) ){\n                        Die(\"Failed\");\n                    }\n                    fflush(NULL);\n                    printf(\"Data sent so far %s\\n\", path);\n                memset(path,0,MAX);\n                }\n                close(pipefd[0]);\n                //exit(1); removed so server will not terminate\n            }\n            else\n            {\n                printf(\"Error !\\n\");\n                exit(0);//\n            }\n}\n/*\n    if (strcmp (data, \"exit\")==0)\n    {\n        exit (1);\n    }\n    printf(\"Closing socket\\n\");\n    close(sock);\n*/\n}\n\nint main(int argc, char const *argv[])\n{\n    int serversock,clientsock;\n    struct sockaddr_in echoserver, echoclient;\n    unsigned int clientlen = sizeof(echoclient);\n    signal(SIGPIPE, SIG_IGN); // this will allow code to handle SIGPIPE instead of crashing\n    if((serversock = socket(PF_INET, SOCK_STREAM,IPPROTO_TCP))&lt;0){\n        Die(\"Failed\");\n    }\n    memset(&amp;echoserver,0,sizeof(echoserver));\n    echoserver.sin_family = AF_INET;\n    echoserver.sin_addr.s_addr= htonl(INADDR_ANY);\n    echoserver.sin_port = htons(atoi(argv[1]));\n\n    if(bind(serversock, (struct sockaddr *) &amp; echoserver,sizeof(echoserver))&lt;0){\n        Die(\"Failed\");\n    }\n    if(listen(serversock,MAXPENDING)&lt;0){\n        Die(\"Failed\");\n    }\n    while(1)\n    {\n        if((clientsock = \n            accept(serversock,(struct sockaddr *) &amp;echoclient,\n                                &amp;clientlen))&lt;0){\n            Die(\"Failed\");\n        }\n        fprintf(stdout, \"Client connected: %s\\n\",\n                        inet_ntoa(echoclient.sin_addr));\n        fprintf(stdout,\"Message from client:\");\n        HandeClient(clientsock);        \n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Client</strong></p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;arpa/inet.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #define BUFFSIZE 2048\n\n    void Die(char *mess) \n    {\n        perror(mess); \n        exit(1); \n    }\n    int main(int argc, char *argv[]) \n    {\n        int sock;\n        struct sockaddr_in echoserver;\n        char buffer[BUFFSIZE];\n        unsigned int echolen;\n        int received = 0;\n        if (argc != 3) \n        {\n            fprintf(stderr, \"USAGE: TCPecho &lt;server_ip&gt; &lt;word&gt; &lt;port&gt;\\n\");\n            exit(1);\n        }\n        if ((sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) &lt; 0) \n        {\n            Die(\"Failed to create socket\");\n        }\n        memset(&amp;echoserver, 0, sizeof(echoserver));\n        echoserver.sin_family = AF_INET;\n        echoserver.sin_addr.s_addr = inet_addr(argv[1]);\n        echoserver.sin_port = htons(atoi(argv[2]));\n        if (connect(sock,(struct sockaddr *) &amp;echoserver,sizeof(echoserver)) &lt; 0) \n        {\n            Die(\"Failed to connect with server\");\n        }\n        char s[100];\n    while(1) { // to repeat the whole process until exit is typed\n        fgets(s,100,stdin);\n        s[strlen(s)-1]='\\0'; //fgets doesn't automatically discard '\\n'\n        echolen = strlen(s);\n\n        /*  send() from client; */\n        if (send(sock, s, echolen, 0) != echolen) \n        {\n            Die(\"Mismatch in number of sent bytes\");\n        }\n        if(strcmp(s,\"exit\") == 0) // check if exit is typed\n        exit(0);\n        fprintf(stdout, \"Message from server: \");\n        while (received &lt; echolen) \n        {\n            int bytes = 0;\n            /* recv() from server; */\n            if ((bytes = recv(sock, buffer, echolen, 0)) &lt; 1) \n            {\n                Die(\"Failed to receive bytes from server\");\n            }\n            received += bytes;\n            buffer[bytes] = '\\0';\n            /* Assure null terminated string */\n            fprintf(stdout, buffer);\n        }\n        int bytes = 0;\n// this d {...} while block will receive the buffer sent by server\n        do {\n            buffer[bytes] = '\\0';\n            printf(\"%s\\n\", buffer);\n        } while((bytes = recv(sock, buffer, BUFFSIZE-1, 0))&gt;=BUFFSIZE-1);\n        buffer[bytes] = '\\0';\n        printf(\"%s\\n\", buffer);\n        printf(\"\\n\");\n    }\n    }\n</code></pre>\n\n<p>There isn't any need to loop the client because the server exits after sending back the result.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5329895"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6492, "favorite_count": 2, "accepted_answer_id": 33536587, "answer_count": 2, "score": 1, "last_activity_date": 1456264795, "creation_date": 1446623248, "last_edit_date": 1446655478, "question_id": 33516340, "link": "https://stackoverflow.com/questions/33516340/how-to-send-result-of-execute-command-from-server-to-client", "title": "How to send result of execute command from server to client?", "body": "<p>I'm implementing a socket program in C.</p>\n\n<p><strong>Program description:</strong><br>\nAfter server and client have been connected, the client sends a command to the server.<br>\nThe server receives the request from the client and executes it.<br>\nThe server sends the result of the execution to the client.<br>\nThe client will display that server execute and display.<br></p>\n\n<p><strong>My problem:</strong> <br>\n<strong>Server:</strong><br>I put result of <code>execvp()</code> function into pipe <code>pipefd[1]</code> and send this data to the client with <code>send()</code>.<br>\n<strong>Client:</strong><br>\nI receive  <code>recv()</code> data to server and display.</p>\n\n<p>But it doesn't work.<br></p>\n\n<p><strong>Result that I want:</strong><br>\n<strong><em>Client</em></strong> : <code>ls</code><br></p>\n\n<p><strong>Server:</strong> <br></p>\n\n<blockquote>\n  <p>a.txt   b.pdf    c.jpg <br></p>\n</blockquote>\n\n<p><strong>Client:</strong><br></p>\n\n<blockquote>\n  <p>a.txt b.pdf c.jpg</p>\n</blockquote>\n\n<p><strong>Here is my code:</strong><br></p>\n\n<p><strong>Server:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXPENDING 5\n#define BUFFSIZE 32\n#define MAX 128\nvoid Die(char *mess) \n{\n    perror(mess);\n    exit(1);\n}\nvoid setup(char inputBuffer[], char *args[], int *background) //Ham xu li (cat) chuoi lenh\n{\n        const char s[4] = \" \\t\\n\";\n        char *token;\n        token = strtok(inputBuffer, s);\n        int i = 0;\n        while( token != NULL)\n        {\n            args[i] = token;\n            i++;\n            //printf(\"%s\\n\", token);\n            token = strtok(NULL,s);\n        }\n        args[i] = NULL;\n}\nvoid HandeClient(int sock){\n\nchar buffer[BUFFSIZE];\nint received = -1;\nchar data[MAX];\n\n    data[0] = '\\0';\n\n    /*recv() from client;*/\n    if((received = recv(sock, buffer,BUFFSIZE,0))&lt;0){\n\n        Die(\"Failed\");\n    }\n\n    buffer[received] = '\\0';\n\n    strcat (data,  buffer);\n    while(received&gt;0)\n    {\n        /* send() from server; //acknowledge to client */\n        if(send(sock,buffer, received,0)!= received){\n            Die(\"Failed\");\n        }\n        /* recv() from client; */\n        if((received=recv(sock,buffer,BUFFSIZE,0))&lt;0){\n            Die(\"Failed\");\n        }\n\n        buffer[received] = '\\0';\n        strcat (data, buffer);\n    }\n\n    puts (data);\n    {\n        char *args[100];\n        setup(data,args,0);\n\n        // pipe\n        int pipefd[2],lenght;\n\n        pipe(pipefd);\n\n        pid_t pid = fork();\n        char path[MAX];\n\n        if(pid&gt;0)\n        {\n            // parent process // write to pipe\n\n            execvp(args[0],args);\n            dup2(1,pipefd[1]);\n            close(pipefd[0]);\n            write(STDOUT_FILENO,pipefd[1],strlen(pipefd[1]));\n            close(pipefd[1]);\n            while (wait(NULL) != pid);\n        }\n        else\n            if(pid==0)\n            {\n                //child process // read from pipe\n\n                close(pipefd[1]);\n                while(lenght=read(pipefd[0],path,1) &gt; 0){\n                    // send the result of execvp for client.\n                    if(send(sock,path,strlen(path),0) != strlen(path) ){\n                        Die(\"Failed\");\n                    }\n                }\n                close(pipefd[0]);\n                exit(1);//\n            }\n            else\n            {\n                printf(\"Error !\\n\");\n                exit(0);//\n            }\n    }\n    if (strcmp (data, \"exits\")==0)\n    {\n        exit (1);\n    }\n    close(sock);\n}\nint main(int argc, char const *argv[])\n{\n    int serversock,clientsock;\n    struct sockaddr_in echoserver, echoclient;\n    /*if(argc !=2)\n    {\n        fprintf(stderr, \"USAGE: echoserver &lt;port&gt;\\n\");\n        exit(0);\n    }*/\n    if((serversock = socket(PF_INET, SOCK_STREAM,IPPROTO_TCP))&lt;0){\n        Die(\"Failed\");\n    }\n    memset(&amp;echoserver,0,sizeof(echoserver));\n    echoserver.sin_family = AF_INET;\n    echoserver.sin_addr.s_addr= htonl(INADDR_ANY);\n    echoserver.sin_port = htons(atoi(argv[1]));\n\n    if(bind(serversock, (struct sockaddr *) &amp; echoserver,sizeof(echoserver))&lt;0){\n        Die(\"Failed\");\n    }\n    if(listen(serversock,MAXPENDING)&lt;0){\n        Die(\"Failed\");\n    }\n    while(1)\n    {\n        unsigned int clientlen = sizeof(echoclient);\n        if((clientsock = \n            accept(serversock,(struct sockaddr *) &amp;echoclient,\n                                &amp;clientlen))&lt;0){\n            Die(\"Failed\");\n        }\n        fprintf(stdout, \"Client connected: %s\\n\",\n                        inet_ntoa(echoclient.sin_addr));\n        fprintf(stdout,\"Message from client:\");\n        HandeClient(clientsock);        \n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Client:</strong><br></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netinet/in.h&gt;\n#define BUFFSIZE 32\n/// Client chuyen mot chuoi ki tu, sau khi an enter n gui cho server roi ket thuc\nvoid Die(char *mess) \n{\n    perror(mess); \n    exit(1); \n}\nint main(int argc, char *argv[]) \n{\nwhile(1){\n    int sock;\n    struct sockaddr_in echoserver;\n    char buffer[BUFFSIZE];\n    unsigned int echolen;\n    int received = 0;\n    if (argc != 3) \n    {\n        fprintf(stderr, \"USAGE: TCPecho &lt;server_ip&gt; &lt;word&gt; &lt;port&gt;\\n\");\n        exit(1);\n    }\n/* Create the TCP socket */\n    if ((sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) &lt; 0) \n    {\n        Die(\"Failed to create socket\");\n    }\n/* Construct the server sockaddr_in structure */\n    memset(&amp;echoserver, 0, sizeof(echoserver));\n    echoserver.sin_family = AF_INET;\n    echoserver.sin_addr.s_addr = inet_addr(argv[1]);\n    echoserver.sin_port = htons(atoi(argv[2]));\n/* Establish connection */\n    if (connect(sock,(struct sockaddr *) &amp;echoserver,sizeof(echoserver)) &lt; 0) \n    {\n        Die(\"Failed to connect with server\");\n    }\n/* Send the word to the server */\n    //tao mot chuoi s, chuoi s nhan ki tu tu ban phim, roi chuyen cho phia server\n    char s[100];\n    fgets(s,100,stdin);\n    echolen = strlen(s);\n\n    /*  send() from client; */\n    if (send(sock, s, echolen, 0) != echolen) \n    {\n        Die(\"Mismatch in number of sent bytes\");\n    }\n/* Receive the word back from the server */\n    fprintf(stdout, \"Message from server: \");\n    while (received &lt; echolen) \n    {\n        int bytes = 0;\n        /* recv() from server; */\n        if ((bytes = recv(sock, buffer, BUFFSIZE-1, 0)) &lt; 1) \n        {\n            Die(\"Failed to receive bytes from server\");\n        }\n        received += bytes;\n        buffer[bytes] = '\\0';\n        /* Assure null terminated string */\n        fprintf(stdout, buffer);\n    }\n\n    fprintf(stdout, \"\\n\");\n    close(sock);\n    if(strcmp(s,\"exit\") == 0)\n    exit(0);\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "pthreads", "affinity"], "comments": [{"owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "edited": false, "score": 0, "creation_date": 1446622708, "post_id": 33516163, "comment_id": 54814437, "body": "Please, choose between <b>C</b> or <b>C++</b>."}, {"owner": {"reputation": 43189, "user_id": 346804, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xZg8n.jpg?s=128&g=1", "display_name": "ronag", "link": "https://stackoverflow.com/users/346804/ronag"}, "reply_to_user": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "edited": false, "score": 0, "creation_date": 1446623420, "post_id": 33516163, "comment_id": 54814740, "body": "@Kotshi: I see no reason. It&#39;s relevant for both."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1446628788, "post_id": 33516163, "comment_id": 54817685, "body": "What is your outer problem? What do you think that doing this will solve or improve?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1446639138, "post_id": 33516163, "comment_id": 54824389, "body": "It&#39;s not even a choice between C or C++. The priority is a dynamic thread property regardless of the language the code was originally written in. A single thread may even execute code which is a mixture from different languages."}], "answers": [{"tags": [], "owner": {"reputation": 43189, "user_id": 346804, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xZg8n.jpg?s=128&g=1", "display_name": "ronag", "link": "https://stackoverflow.com/users/346804/ronag"}, "is_accepted": true, "score": 0, "last_activity_date": 1446628677, "creation_date": 1446628677, "answer_id": 33517876, "question_id": 33516163, "link": "https://stackoverflow.com/questions/33516163/disable-core-affinity-for-all-thread-defaults/33517876#33517876", "title": "Disable core affinity for all thread defaults", "body": "<p>Threads inherit their affinity from the calling thread.</p>\n\n<p>See <a href=\"http://man7.org/linux/man-pages/man3/pthread_create.3.html\" rel=\"nofollow\">pthread_create</a></p>\n\n<blockquote>\n  <p>Linux-specific details\n         The new thread inherits copies of the calling thread's capability\n         sets (see capabilities(7)) and CPU affinity mask (see\n         sched_setaffinity(2)).</p>\n</blockquote>\n\n<p>So just setting the affinity for both threads as wanted will cause any additionally spawned threads to inherit their affinity. Which would do exactly what I want.</p>\n"}], "owner": {"reputation": 43189, "user_id": 346804, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xZg8n.jpg?s=128&g=1", "display_name": "ronag", "link": "https://stackoverflow.com/users/346804/ronag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 33517876, "answer_count": 1, "score": 0, "last_activity_date": 1446628677, "creation_date": 1446622594, "last_edit_date": 1446623936, "question_id": 33516163, "link": "https://stackoverflow.com/questions/33516163/disable-core-affinity-for-all-thread-defaults", "title": "Disable core affinity for all thread defaults", "body": "<p>I'm using ffmpeg in my application which internally spawns lots of threads. However, I would like that my application which has real-time semantics has one of the cpu cores for itself. So basically I need a way to disable scheduling of ffmpeg spawned threads to a core and set the affinity of my main thread to that core.</p>\n\n<p>Is this possible?</p>\n\n<p>e.g.</p>\n\n<pre><code>main()\n{\n    struct sched_param param;\n    param.sched_priority = 95;\n    sched_setscheduler(getpid(), SCHED_FIFO, &amp;param);\n\n    int core_id = 0;\n\n    // TODO: Remove core_id from cpuset for all future thread default affinities.\n\n    pthread_t ffmpeg_thread;\n    pthread_create(&amp;ffmpeg_thread, NULL, run_ffmpeg, NULL);\n\n    pthread_t rt_thread;\n    pthread_create(&amp;rt_thread, NULL, run_rt, NULL);\n\n    cpu_set_t rt_cpuset;\n    CPU_ZERO(&amp;rt_cpuset);\n    CPU_SET(core_id, &amp;rt_cpuset);\n    pthread_setaffinity_np(rt_thread, sizeof(rt_cpuset), &amp;rt_cpuset);\n\n    pthread_join(ffmpeg_thread, NULL);\n    pthread_join(rt_threadm, NULL);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "hmac", "cryptoapi"], "comments": [{"owner": {"reputation": 30076, "user_id": 1828637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/46b5428a878306d5af0a87fc7b2db499?s=128&d=identicon&r=PG", "display_name": "Noitidart", "link": "https://stackoverflow.com/users/1828637/noitidart"}, "edited": false, "score": 0, "creation_date": 1481667431, "post_id": 33515969, "comment_id": 69467305, "body": "Hi there did you solve this? On Windows and Mac there are built in APIs for crypto which handle hmac_sha1, I was now trying to do same on *nix."}], "owner": {"reputation": 41, "user_id": 5523375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfd09a98fba02b7238e103d891e9912e?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5523375/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1446625298, "creation_date": 1446621866, "last_edit_date": 1446625298, "question_id": 33515969, "link": "https://stackoverflow.com/questions/33515969/create-hmac-sha1-in-c-using-pure-linux-crypto-api", "title": "Create HMAC SHA1 in C using pure linux crypto api", "body": "<p>I need to apply HMAC SHA1 on some scatterlists in a C program.\nI have a sample code written for <strong>kernel 2.4</strong> hmac crypto api, that uses this function:</p>\n\n<p><code>void crypto_hmac(struct crypto_tfm *tfm, u8 *key, unsigned int *keylen, struct scatterlist *sg, unsigned int nsg, u8 *out)</code></p>\n\n<p>but the crypto API in <strong>kernel 3.13</strong> and after is SO MUCH DIFFERENT than 2.4!</p>\n\n<p>I looked everywhere to find any example of using new strange minimalized function</p>\n\n<pre><code>static int hmac_create(struct crypto_template *tmpl, struct rtattr **tb)\n</code></pre>\n\n<p>provided in <strong>hmac.c (source/crypto)</strong>, but I cannot find any topic or examples that uses kernel crypto api <strong>specificly</strong> <strong>hmac</strong> transform.</p>\n\n<p>Any body has any experience using <strong>Linux Crypto API HMAC in C</strong>? Using this procedure will not be more than a few line of C codes.</p>\n"}, {"tags": ["c", "linux", "windows", "crash"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 6, "creation_date": 1446621407, "post_id": 33515746, "comment_id": 54813846, "body": "Since you&#39;re using recursion and this problem is platform-dependent and only occurs at a certain level of recursion it suggests that you are encountering a classic <a href=\"https://en.wikipedia.org/wiki/Stack_buffer_overflow\" rel=\"nofollow noreferrer\">stack overflow</a>. Try increasing the stack size."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1446621570, "post_id": 33515746, "comment_id": 54813908, "body": "The default process stack size in Linux is 8 MB, but on Windows it&#39;s only 1 MB. If your recursion runs deep enough you might get a stack overflow in Windows but not on Linux."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1446628700, "post_id": 33515746, "comment_id": 54817619, "body": "... and the code as shown seems to inflict the stack space required by printf() onto every level of recursion."}], "answers": [{"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 3, "last_activity_date": 1446623663, "creation_date": 1446623663, "answer_id": 33516463, "question_id": 33515746, "link": "https://stackoverflow.com/questions/33515746/why-is-this-c-program-crashes-on-windows-and-works-fine-on-linux/33516463#33516463", "title": "Why is this C program crashes on windows and works fine on linux?", "body": "<p>As already been stated in the comments you're most probably experiencing a stack-overflow. There's hope though, your recursion can be transformed easily to an iteration as follows:</p>\n\n<pre><code>double harmonic(int n) {\n  if(n == 0) return 1.0;\n  double res = 0.0;\n  while(n &gt; 0) {\n    res += (1.0 / (double) n);\n    --n;\n  }\n  return res;\n}\n</code></pre>\n\n<p>This way your program will work for big <code>n</code>.</p>\n"}], "owner": {"reputation": 1142, "user_id": 1463878, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/00d7f2e6e796c07f46e80544cfc5fd62?s=128&d=identicon&r=PG", "display_name": "0xEDD1E", "link": "https://stackoverflow.com/users/1463878/0xedd1e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 33516463, "answer_count": 1, "score": 1, "last_activity_date": 1446623663, "creation_date": 1446621102, "question_id": 33515746, "link": "https://stackoverflow.com/questions/33515746/why-is-this-c-program-crashes-on-windows-and-works-fine-on-linux", "title": "Why is this C program crashes on windows and works fine on linux?", "body": "<p>I wrote a program to find the harmonic numbers</p>\n\n<blockquote>\n  <p><em>(the n-th <strong>harmonic number</strong> is the sum of the <strong>reciprocals</strong> of the first n <strong>natural numbers</strong>)</em></p>\n</blockquote>\n\n<p>of sequence of numbers. My program takes its input as command line arguments and prints the harmonic numbers in the table format. \nAs an example This is how it works:</p>\n\n<pre><code> C:\\Users\\EDDiE\\c&gt;har 10 30 5\n      10 2.9289682539682538\n      15 3.3182289932289937\n      20 3.5977396571436819\n      25 3.8159581777535068\n      30 3.9949871309203906   \n</code></pre>\n\n<blockquote>\n  <p>10(<strong>argv [1]</strong>) = starting number,</p>\n  \n  <p>30(<strong>argv[2]</strong>) = ending number,</p>\n  \n  <p>5(<strong>argv[3]</strong>) = step to advance.</p>\n</blockquote>\n\n<p><strong>In</strong> my <strong>windows 8</strong> machine this program <strong>crashes</strong> <strong>at</strong> the number <strong>43429</strong></p>\n\n<p>Then I execute on <a href=\"http://goo.gl/E8uNZK\" rel=\"nofollow\">an online c compiler</a> it is a linux environment ( \"I think\", I'm not a linux user ) And it works fine then.</p>\n\n<p>Here is my program:</p>\n\n<blockquote>\n  <p>har.c</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ndouble harmonic(int);\n\nint main(int argc, char *argv[])\n{\n\n    int j;\n    int start = 1, end = 10, step = 1;\n\n    switch(argc) {\n    case 1:\n        break;\n    case 2:\n        end = atoi(argv[1]);\n        break;\n    case 3:\n        start = atoi(argv[1]);\n        end = atoi(argv[2]);\n        break;\n    case 4:\n        start = atoi(argv[1]);\n        end = atoi(argv[2]);\n        step = atoi(argv[3]);\n        break;\n    }\n\n    for (j = start; j &lt;= end; j += step)\n        printf(\"%7d %3.20g\\n\", j, harmonic(j));\n\n    return 0;\n}\n\n\ndouble harmonic(int n)\n{\n    //double H;\n    if (n == 1 || n == 0)\n        return 1.0;\n    else\n        return (1.0 / (double) n) + harmonic(n - 1);\n\n    //return H;\n}\n</code></pre>\n\n<p>I need to know why this program crashes at windows environment. </p>\n\n<p>Is there anything I need to modify in the code (or in my system)?</p>\n"}, {"tags": ["c#", "c", "interop", "marshalling", "nim-lang"], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446625269, "post_id": 33516542, "comment_id": 54815624, "body": "kodre you got it wrong, as i did not post the c# code( i will edit and add), the return type is an array of structs, not a string"}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446625721, "post_id": 33516542, "comment_id": 54815850, "body": "i will post the usage code too, thanks for trying to help"}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446626537, "post_id": 33516542, "comment_id": 54816296, "body": "any way what did you suggest?  the problem is not with the c implementation but the nim one, the c code is working, the c# call and signature translates the content as expected, but the nim code returns allmost same but i could properly see only the int value, but not the string value"}, {"owner": {"reputation": 171, "user_id": 4786683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39f2bf77f13b01d2c298070cf577ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Kodre", "link": "https://stackoverflow.com/users/4786683/kodre"}, "reply_to_user": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446627705, "post_id": 33516542, "comment_id": 54816981, "body": "I thought that is something wrong with translating nim/c char* to string in c#. Because of that i set [MarshalAs(UnmanagedType.LPStr)] for this extern method"}, {"owner": {"reputation": 625, "user_id": 5471706, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/904857529607067/picture?type=large", "display_name": "Raj Felix", "link": "https://stackoverflow.com/users/5471706/raj-felix"}, "edited": false, "score": 0, "creation_date": 1446628018, "post_id": 33516542, "comment_id": 54817180, "body": "can u add an attribute like <code>[MarshalAs(UnmanagedType.LPStr)]</code>  for the string on the return type which is a pointer to an array and it would apply on the content of the array ?"}, {"owner": {"reputation": 625, "user_id": 5471706, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/904857529607067/picture?type=large", "display_name": "Raj Felix", "link": "https://stackoverflow.com/users/5471706/raj-felix"}, "edited": false, "score": 0, "creation_date": 1446628544, "post_id": 33516542, "comment_id": 54817517, "body": "in your edit, you added the struct with a string which could not be marashaled via a pointer to the array did you try it? if you actually tested it to work, please edit the signature on the dll import"}, {"owner": {"reputation": 171, "user_id": 4786683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39f2bf77f13b01d2c298070cf577ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Kodre", "link": "https://stackoverflow.com/users/4786683/kodre"}, "reply_to_user": {"reputation": 625, "user_id": 5471706, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/904857529607067/picture?type=large", "display_name": "Raj Felix", "link": "https://stackoverflow.com/users/5471706/raj-felix"}, "edited": false, "score": 0, "creation_date": 1446628672, "post_id": 33516542, "comment_id": 54817599, "body": "@Raj Felix I don&#39;t know if you can. I didn&#39;t saw that return type was array, i thougth it is char*. He says that his dll import signature is working ok, so only struct should be modified"}, {"owner": {"reputation": 625, "user_id": 5471706, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/904857529607067/picture?type=large", "display_name": "Raj Felix", "link": "https://stackoverflow.com/users/5471706/raj-felix"}, "edited": false, "score": 0, "creation_date": 1446628845, "post_id": 33516542, "comment_id": 54817720, "body": "the return is  <code>DataPackg.TestC*</code> you could test the whole code by copying the c# code posted with the question and then you should see the implementation with <code>c</code> and C# does work as it is written"}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446629428, "post_id": 33516542, "comment_id": 54818084, "body": "@Kodre the code in the question regarding the c implementation is perfectly fine, i guess you could manipulate it to work with a string to be marshaled in another approach, though the issue here is not about c problem, but as the implementation with nim to try do same with nim as i did with the c implementation is problematic for now, so c code is working good nim not, are you familiar with nim"}, {"owner": {"reputation": 171, "user_id": 4786683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39f2bf77f13b01d2c298070cf577ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Kodre", "link": "https://stackoverflow.com/users/4786683/kodre"}, "reply_to_user": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446633156, "post_id": 33516542, "comment_id": 54820500, "body": "@AviaAfer I&#39;m not familiar with nim, but i saw that nim is compiled to c and then to native code. Maybe you should look at generated c code to see how DataPack structure was generated."}, {"owner": {"reputation": 625, "user_id": 5471706, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/904857529607067/picture?type=large", "display_name": "Raj Felix", "link": "https://stackoverflow.com/users/5471706/raj-felix"}, "edited": false, "score": 0, "creation_date": 1446635867, "post_id": 33516542, "comment_id": 54822244, "body": "thanks i did, it&#39;s not that clear to read an autogenerated code, i could follow until i reach a point  where the typedef is not clear or i can&#39;t follow where it&#39;s declared, i&#39;ll try again, thanks for looking into it"}], "tags": [], "owner": {"reputation": 171, "user_id": 4786683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39f2bf77f13b01d2c298070cf577ebd?s=128&d=identicon&r=PG&f=1", "display_name": "Kodre", "link": "https://stackoverflow.com/users/4786683/kodre"}, "is_accepted": false, "score": 0, "last_activity_date": 1446628746, "last_edit_date": 1446628746, "creation_date": 1446624002, "answer_id": 33516542, "question_id": 33515570, "link": "https://stackoverflow.com/questions/33515570/interop-with-nim-return-struct-array-containing-a-string-char-member/33516542#33516542", "title": "interop with nim return Struct Array containing a string /char* member", "body": "<p>Try to change your struct to:</p>\n\n<pre><code>public unsafe static class DataPackg\n{\n   [StructLayout(LayoutKind.Sequential)]\n   public struct TestC\n   {\n      public uint Id;\n      [MarshalAs(UnmanagedType.LPStr)]\n      public String StrVal;\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446657659, "post_id": 33527840, "comment_id": 54837553, "body": "in the same spirit and hours after trying every possible way on the c# side , what about just changing <code>string</code> to <code>cstring</code> ? i got it working like that few minutes before you posted your answer , now that it works with <code>cstring</code> as the buffer on nim&#39;s side, please just let me know  how to fix the trailing digit value char in the loop and i will close the deal (:"}, {"owner": {"reputation": 625, "user_id": 5471706, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/904857529607067/picture?type=large", "display_name": "Raj Felix", "link": "https://stackoverflow.com/users/5471706/raj-felix"}, "edited": false, "score": 0, "creation_date": 1446660912, "post_id": 33527840, "comment_id": 54839724, "body": "so looping over a struct-like type assigning its <code>cstring</code> member with some random values(here the trailingdigit just simulates random data could be file names or database query fed in to) so until what point it&#39;s safe and where does it looses it&#39;s safty , as soon as loop is finished , control returns to c# there i put it in to a list, the proc in nim has allready exited..."}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446662535, "post_id": 33527840, "comment_id": 54840643, "body": "@zach could you show little example as to using option for buffer of type <code>ptr char</code> as i&#39;d like to test it (also as my code is a bit unstable while looping in c# over the returned collection i see some disorder when printing to console) so i&#39;ll epriciate some code sample implementing candidate #1"}, {"owner": {"reputation": 4905, "user_id": 35511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6O2yC.jpg?s=128&g=1", "display_name": "zah", "link": "https://stackoverflow.com/users/35511/zah"}, "edited": false, "score": 1, "creation_date": 1446720268, "post_id": 33527840, "comment_id": 54865085, "body": "Let&#39;s collaborate on a gist for some final working code that I&#39;ll include in the answer: <a href=\"https://gist.github.com/zah/fe8f5956684abee6bec9\" rel=\"nofollow noreferrer\">gist.github.com/zah/fe8f5956684abee6bec9</a> . By the way, you may have everything a bit easier if you create a single managed C++ module that uses the magic of IJW to implement all the marshalling: <a href=\"https://msdn.microsoft.com/en-us/library/aa712982(v=vs.71).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/aa712982(v=vs.71).aspx</a>"}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446738210, "post_id": 33527840, "comment_id": 54877281, "body": "first of all thanks a lot for the effort, i will now have a look at that gist thanks, and second, i will be happy to learn about that option <i>&quot;C++ module that uses magic of IJW&quot;</i> i did visit that second link i need to better understand what is that <code>IJW</code>.."}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446782007, "post_id": 33527840, "comment_id": 54897502, "body": "zah i have updated the gist , left you a comment and made a fork. please chek it if you can. thanks."}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1446789656, "post_id": 33527840, "comment_id": 54899580, "body": "i have an update on regarding the reason i have failed to implement, it seem that with every iteration the fields exchange place when marashalling  now it has nothing to do with data types (yet) first there&#39;s a problem with the layout (i have tried to set different layouts and i have tried to change call to <code>stdcall</code> insted of <code>cdecl</code>) .. but no chang its spinning the array is not sequent something is wrong and it&#39;s nothing to do with the string vs cstring at this point did u ever encounter that ?"}, {"owner": {"reputation": 4905, "user_id": 35511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6O2yC.jpg?s=128&g=1", "display_name": "zah", "link": "https://stackoverflow.com/users/35511/zah"}, "reply_to_user": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1447095894, "post_id": 33527840, "comment_id": 55006904, "body": "@AviaAfer, I&#39;ve updated the gist with a working example, involving sequences and strings."}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1447164874, "post_id": 33527840, "comment_id": 55037275, "body": "@zah i have updated comments in nimSharp Gist, and added my benchmark project folder thanks for the effort again."}, {"owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "edited": false, "score": 0, "creation_date": 1447304403, "post_id": 33527840, "comment_id": 55102805, "body": "@zah first problem solved, i don&#39;t know how to thank you enough, and for now, i suggest that i will further investigate what is it that i do wrong with setting of the nim compiler, as soon as i rebuild/compile nims dll it&#39;s not running against the executable of the call from c#."}], "tags": [], "owner": {"reputation": 4905, "user_id": 35511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6O2yC.jpg?s=128&g=1", "display_name": "zah", "link": "https://stackoverflow.com/users/35511/zah"}, "is_accepted": true, "score": 9, "last_activity_date": 1447323109, "last_edit_date": 1447323109, "creation_date": 1446656850, "answer_id": 33527840, "question_id": 33515570, "link": "https://stackoverflow.com/questions/33515570/interop-with-nim-return-struct-array-containing-a-string-char-member/33527840#33527840", "title": "interop with nim return Struct Array containing a string /char* member", "body": "<p>The <code>string</code> type in Nim is not equivalent to the C's <code>const char*</code> type. Strings in Nim are represented as pointers, pointing into a heap-allocated chunk of memory, which has the following layout:</p>\n\n<pre><code>NI length;   # the length of the stored string\nNI capacity; # how much room do we have for growth\nNIM_CHAR data[capacity]; # the actual string, zero-terminated\n</code></pre>\n\n<p>Please beware that these types are architecture specific and they are really an implementation detail of the compiler that can be changed in the future. <code>NI</code> is the architecture-default interger type and <code>NIM_CHAR</code> is usually equivalent to a 8-bit char, since Nim is leaning towards the use of UTF8.</p>\n\n<p>With this in mind, you have several options: </p>\n\n<p>1) You can teach C# about this layout and access the string buffers at their correct location (the above caveats apply). An example implementation of this approach can be found here: \n<a href=\"https://gist.github.com/zah/fe8f5956684abee6bec9\" rel=\"nofollow\">https://gist.github.com/zah/fe8f5956684abee6bec9</a></p>\n\n<p>2) You can use a different type for the <code>buffer</code> field in your Nim code. Possible candidates are <code>ptr char</code> or the fixed size <code>array[char]</code>. The first one will require you to give up the automatic garbage collection and maintain a little bit of code for manual memory management. The second one will give up a little bit of space efficiency and it will put hard-limits on the size of these buffers.</p>\n\n<p>EDIT:\nUsing <code>cstring</code> may also look tempting, but it's ultimately dangerous. When you assign a regular string to a <code>cstring</code>, the result will be a normal <code>char *</code> value, pointing to the data buffer of the Nim string described above. Since the Nim garbage collector handles properly interior pointers to allocated values, this will be safe as long as the <code>cstring</code> value is placed in a traced location like the stack. But when you place it inside an object, the <code>cstring</code> won't be traced and nothing prevents the GC from releasing the memory, which may create a dangling pointer in your C# code.</p>\n"}], "owner": {"reputation": 846, "user_id": 1930832, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1e2a4b6a4656098c2e615d6585997ac0?s=128&d=identicon&r=PG", "display_name": "Avia Afer", "link": "https://stackoverflow.com/users/1930832/avia-afer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 1, "accepted_answer_id": 33527840, "answer_count": 2, "score": 10, "last_activity_date": 1447323109, "creation_date": 1446620381, "last_edit_date": 1592644375, "question_id": 33515570, "link": "https://stackoverflow.com/questions/33515570/interop-with-nim-return-struct-array-containing-a-string-char-member", "title": "interop with nim return Struct Array containing a string /char* member", "body": "<p>interoping nim dll from c# i could call and execute the code below</p>\n<p>if i will add another function (proc) that Calls <code>GetPacks()</code> and try to echo on each element's <code>buffer</code> i could see the output in the C# console correctly\nbut i could not transfer the data as it is, i tried everything but i could not  accomplish the task</p>\n<pre><code>proc GetPacksPtrNim(parSze: int, PackArrINOUT: var DataPackArr){.stdcall,exportc,dynlib.} =\n  PackArrINOUT.newSeq(parSze)\n  var dummyStr = &quot;abcdefghij&quot;\n  for i, curDataPack in PackArrINOUT.mpairs:\n    dummyStr[9] = char(i + int8'0')\n    curDataPack = DataPack(buffer:dummyStr, intVal: uint32 i)\n\ntype\n  DataPackArr = seq[DataPack]\n  DataPack = object\n    buffer: string\n    intVal: uint32\n</code></pre>\n<p>when i do same in c/c++ the type i am using is either an <code>IntPtr</code> or <code>char*</code>\nthat is happy to contain returned <code>buffer</code> member</p>\n<pre><code>EXPORT_API void __cdecl c_returnDataPack(unsigned int size, dataPack** DpArr)\n{\n    unsigned int dumln, Index;dataPack* CurDp = {NULL};\n    char dummy[STRMAX];\n    *DpArr = (dataPack*)malloc( size * sizeof( dataPack ));\n    CurDp = *DpArr;\n    strncpy(dummy, &quot;abcdefgHij&quot;, STRMAX);\n\n    dumln = sizeof(dummy);\n\n    for ( Index = 0; Index &lt; size; Index++,CurDp++)\n    {\n        CurDp-&gt;IVal = Index;\n        dummy[dumln-1] = '0' + Index % (126 - '0');\n        CurDp-&gt;Sval = (char*) calloc (dumln,sizeof(dummy));\n        strcpy(CurDp-&gt;Sval, dummy);\n    }\n\n}\n</code></pre>\n<p>c# signature for c code above</p>\n<pre><code>    [DllImport(@&quot;cdllI.dll&quot;, CallingConvention = CallingConvention.Cdecl), SuppressUnmanagedCodeSecurity]\n    private static extern uint c_returnDataPack(uint x, DataPackg.TestC** tcdparr);\n</code></pre>\n<p>C# Struct</p>\n<pre><code>public unsafe static class DataPackg\n{\n\n   [StructLayout(LayoutKind.Sequential)]\n    public struct TestC\n    {\n        public uint Id;\n        public IntPtr StrVal;\n    }\n\n}\n</code></pre>\n<p>finally calling the function like so:</p>\n<pre><code>    public static unsafe List&lt;DataPackg.TestC&gt; PopulateLstPackC(int ArrL)\n    {\n        DataPackg.TestC* PackUArrOut;\n        List&lt;DataPackg.TestC&gt; RtLstPackU = new List&lt;DataPackg.TestC&gt;(ArrL);\n        c_returnDataPack((uint)ArrL, &amp;PackUArrOut);\n        DataPackg.TestC* CurrentPack = PackUArrOut;\n        for (int i = 0; i &lt; ArrL; i++, CurrentPack++)\n        {\n\n            RtLstPackU.Add(new DataPackg.TestC() { StrVal = CurrentPack-&gt;StrVal, Id = CurrentPack-&gt;Id });\n        }\n        //Console.WriteLine(&quot;Res={0}&quot;, Marshal.PtrToStringAnsi((IntPtr)RtLstPackU[1].StrVal));//new string(RtLstPackU[0].StrVal));\n        return RtLstPackU;\n    }\n</code></pre>\n<p><strong>how could i produce similar c code as above from Nim ?</strong></p>\n<p><sub>it doesn't have to be same code, but same effect, that in c# i would be able to read the content of the string. for now, the int is readable but the string is not</sub></p>\n<p>Edit:</p>\n<p>this is what i tried to make things simple\n<a href=\"http://pastebin.com/M3Jhppzj\" rel=\"nofollow noreferrer\">struct array of int members</a></p>\n<p><strong>Update:</strong></p>\n<p>it seem that the problem is to do with my settings of nim in my windows OS.\ni will be updating as soon as i discover what exactly is wrong.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1446620449, "post_id": 33515556, "comment_id": 54813462, "body": "Note: it doesn&#39;t &quot;return&quot; anything."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1446620810, "post_id": 33515556, "comment_id": 54813599, "body": "@juanchopanza: The strictly correct word is &quot;yield&quot;."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1446620861, "post_id": 33515556, "comment_id": 54813614, "body": "It&#39;s also important to note that the comma separating arguments in a function call is not a comma operator."}], "tags": [], "owner": {"reputation": 3958, "user_id": 2819719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10551eddf1a7e1196ac8a52d0215fcff?s=128&d=identicon&r=PG&f=1", "display_name": "mihai", "link": "https://stackoverflow.com/users/2819719/mihai"}, "is_accepted": true, "score": 4, "last_activity_date": 1446620331, "creation_date": 1446620331, "answer_id": 33515556, "question_id": 33515528, "link": "https://stackoverflow.com/questions/33515528/c-int-x-k-x1-x2-x3/33515556#33515556", "title": "C: int x = k * (x1, x2, x3)?", "body": "<blockquote>\n  <p>In the C and C++ programming languages, the comma operator\n  (represented by the token ,) is a binary operator that evaluates its\n  first operand and discards the result, and then evaluates the second\n  operand and returns this value (and type).</p>\n</blockquote>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Comma_operator</a></p>\n\n<p>So, the result of the <code>(4, 5)</code> expression will be <code>5</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 3139573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ecb46078e976e6f00455ac0a6b5a4?s=128&d=identicon&r=PG&f=1", "display_name": "user3139573", "link": "https://stackoverflow.com/users/3139573/user3139573"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "closed_date": 1446620372, "accepted_answer_id": 33515556, "answer_count": 1, "score": -2, "last_activity_date": 1446620396, "creation_date": 1446620238, "question_id": 33515528, "link": "https://stackoverflow.com/questions/33515528/c-int-x-k-x1-x2-x3", "closed_reason": "Duplicate", "title": "C: int x = k * (x1, x2, x3)?", "body": "<p>What exactly is this called in C?</p>\n\n<p>If I have int x = 3 * (4, 5);</p>\n\n<p>I end up with 15. </p>\n\n<p>Can someone give explanation?</p>\n\n<p>Is this a list where the result is just the first number times the last one?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446619632, "post_id": 33515272, "comment_id": 54813116, "body": "HTTP doesn&#39;t care about the order of the parameters, why do you need to sort them?"}, {"owner": {"reputation": 55, "user_id": 5200237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22eae58048f2e6283f4543b98cc3f477?s=128&d=identicon&r=PG&f=1", "display_name": "MiterV", "link": "https://stackoverflow.com/users/5200237/miterv"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446619890, "post_id": 33515272, "comment_id": 54813231, "body": "I have to calculate the SHA1 value.It need the parameters sort in ASCII"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446620191, "post_id": 33515272, "comment_id": 54813360, "body": "When comparing two checksums, the important thing is that the data you use is the same for both checksums. Ordering the parameters is one way of doing it, but it&#39;s not needed as long as the order is the same for both checksums."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446620252, "post_id": 33515272, "comment_id": 54813386, "body": "By the way, regarding your second point, what do you mean by &quot;analyzing it&quot;? Split it into key-value pairs and split each pair into its separate keys and values?"}, {"owner": {"reputation": 55, "user_id": 5200237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22eae58048f2e6283f4543b98cc3f477?s=128&d=identicon&r=PG&f=1", "display_name": "MiterV", "link": "https://stackoverflow.com/users/5200237/miterv"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446620545, "post_id": 33515272, "comment_id": 54813494, "body": "yes.split it into key-value pairs."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446620706, "post_id": 33515272, "comment_id": 54813554, "body": "For the second point, you might want to read about <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\"><code>strtok</code></a>."}, {"owner": {"reputation": 55, "user_id": 5200237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22eae58048f2e6283f4543b98cc3f477?s=128&d=identicon&r=PG&f=1", "display_name": "MiterV", "link": "https://stackoverflow.com/users/5200237/miterv"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1446635077, "post_id": 33515272, "comment_id": 54821732, "body": "Thanks a lot.I got a point from what you said."}], "owner": {"reputation": 55, "user_id": 5200237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22eae58048f2e6283f4543b98cc3f477?s=128&d=identicon&r=PG&f=1", "display_name": "MiterV", "link": "https://stackoverflow.com/users/5200237/miterv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1446619507, "creation_date": 1446619311, "last_edit_date": 1446619507, "question_id": 33515272, "link": "https://stackoverflow.com/questions/33515272/how-to-set-http-post-parameter", "title": "How to set http post parameter", "body": "<p>In my project, I need to set http post parameters using \"Key=Value\" method and cat the parameters using \"&amp;\".<br>\nExample.  </p>\n\n<pre><code>while () { \n    //Key \n    strcat(PackBuf, Key);\n    strcat(PackBuf, \"=\"); \n    //Value\nstrcat(PackBuf, Value);\n}\n</code></pre>\n\n<p>The PackBuf is a large buffer to store data. In the end I get the string like </p>\n\n<blockquote>\n  <p>id=123456&amp;name=Bill&amp;age=20......</p>\n</blockquote>\n\n<p>But the problem is  </p>\n\n<ul>\n<li><ol>\n<li>I have to sort the Key string by ASCII.Do i set it by manual or any other good method?  </li>\n</ol></li>\n<li><ol start=\"2\">\n<li>When I get the data like \"id=123456&amp;name=Bill&amp;age=20......\",how can i analyze it?</li>\n</ol></li>\n</ul>\n"}]