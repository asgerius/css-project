[{"tags": ["c", "emulation", "sdl-2"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1536191720, "post_id": 52194701, "comment_id": 91339088, "body": "Why does the function called<code>InitialiseRegisters</code> take a <code>Nintendo</code> struct at all? Why not a <code>Registers *</code> as the name implies?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1536191783, "post_id": 52194701, "comment_id": 91339098, "body": "Well you have to define Registers, then Nintendo, then InitializeRegisters."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536191942, "post_id": 52194701, "comment_id": 91339131, "body": "Unrelated re your comment: The orignal Nintendo CPU certainly  did not have general purpose registers; all were very specialised."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9303932, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p8XZYy4puMM/AAAAAAAAAAI/AAAAAAAAEDw/cLlb2zOOkFs/photo.jpg?sz=128", "display_name": "Conner Turmon", "link": "https://stackoverflow.com/users/9303932/conner-turmon"}, "edited": false, "score": 0, "creation_date": 1536193319, "post_id": 52194770, "comment_id": 91339387, "body": "Thank you so much. Just wondering, why is mixed case for headers bad?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536193638, "post_id": 52194770, "comment_id": 91339435, "body": "That&#39;s bad advice, working around a bad program architecture."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 25, "user_id": 9303932, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p8XZYy4puMM/AAAAAAAAAAI/AAAAAAAAEDw/cLlb2zOOkFs/photo.jpg?sz=128", "display_name": "Conner Turmon", "link": "https://stackoverflow.com/users/9303932/conner-turmon"}, "edited": false, "score": 0, "creation_date": 1536193692, "post_id": 52194770, "comment_id": 91339448, "body": "@ConnerTurmon: It is not, that&#39;s just a singular opinion. Actually it&#39;s pretty common if CamelCase or mixedCase is used. Also see my comment above."}, {"owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "edited": false, "score": 2, "creation_date": 1536203919, "post_id": 52194770, "comment_id": 91341454, "body": "Header files are fundamentally an external, or system provided construct.  DOS and Windows made the stunningly stupid decision to ignore case in the file system;  MacOS followed suit.   Once they discovered the error, they made worse decisions about it, so that sometimes x.h matched X.H and other times it didn&#39;t.   The end result is, don&#39;t used mixed case because you cannot depend upon the decisions of the people who make the operating systems you depend upon.   They just aren&#39;t that smart."}], "tags": [], "owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "is_accepted": true, "score": 0, "last_activity_date": 1536191976, "creation_date": 1536191976, "answer_id": 52194770, "question_id": 52194701, "link": "https://stackoverflow.com/questions/52194701/how-to-solve-this-circular-dependency-issue-with-functions-taking-structs/52194770#52194770", "title": "How to solve this circular dependency issue with functions taking structs?", "body": "<p>The easiest answer is to add the line:</p>\n\n<pre><code>typedef struct Nintendo Nintendo;\n</code></pre>\n\n<p>near the top of registers.h ( using mixed case for header files is a very bad idea ).   A characteristic of C is that typedef statements may be repeated provided they are all consistent, and serve as a \"forward declaration\", which is what you require.</p>\n\n<p>If you wanted to be perverse, you could put it in nintendo.h above the #ifndef line, but there are other ways to get your jollies if that is your thing.</p>\n"}], "owner": {"reputation": 25, "user_id": 9303932, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p8XZYy4puMM/AAAAAAAAAAI/AAAAAAAAEDw/cLlb2zOOkFs/photo.jpg?sz=128", "display_name": "Conner Turmon", "link": "https://stackoverflow.com/users/9303932/conner-turmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 52194770, "answer_count": 1, "score": 0, "last_activity_date": 1536191976, "creation_date": 1536191250, "question_id": 52194701, "link": "https://stackoverflow.com/questions/52194701/how-to-solve-this-circular-dependency-issue-with-functions-taking-structs", "title": "How to solve this circular dependency issue with functions taking structs?", "body": "<p>I'm trying to solve an issue with a function in one header requiring a structure as a parameter that includes the structure from the same header as the function. Here is the code:</p>\n\n<h3>Nintendo.h</h3>\n\n<pre><code>/**\n * Nintendo.h - Nintendo Entertainment System\n * \n * This header file is the struct that cotains every component of our\n * Ninetendo Entertainment System. This is the core file, so to speak,\n * that brings together components such as the CPU, PPU, and APU, along\n * with some other smaller components.\n */\n\n#ifndef _NINTENDO_H\n#define _NINTENDO_H\n\n#include \"Registers.h\"\n\ntypedef struct Nintendo\n{\n    Registers reg;\n} Nintendo;\n\n#endif /* _NINTENDO_H */\n</code></pre>\n\n<h3>Registers.h</h3>\n\n<pre><code>#ifndef _REGISTERS_H\n#define _REGISTERS_H\n\n#include \"Constants.h\"\n#include \"Nintendo.h\"\n\ntypedef struct Registers\n{\n    /* Special Purpose Registers */\n    Uint16 pc;  /* Program Counter */\n    Uint8  sp;  /* Stack Pointer */\n\n    /* Bit 7 - Negative Flag        N\n       Bit 6 - Overflow Flag        V\n       Bit 5 - Unused\n       Bit 4 - Break Command        B\n       Bit 3 - Decimal Mode         D\n       Bit 2 - Interrupt Disable    I\n       Bit 1 - Zero Flag            Z\n       Bit 0 - Carry Flag           C\n    */\n    Uint8  p;   /* Processor Status */\n\n    /* General Purpose Registers */\n    Uint8  a;   /* Accumulator */\n    Uint8  x;\n    Uint8  y;\n\n} Registers;\n\nvoid InitializeRegisters(Nintendo *nes);\n\n#endif /* _REGISTERS_H */\n</code></pre>\n\n<p>As you can see, the 'InitializeRegisters' function takes a Nintendo structure as an argument, but that Nintendo structure includes the Registers structure in its definition. This is causing circular dependency problems.</p>\n\n<p>I know I can solve this by making the parameter take Registers* and just pass &amp;Nintendo.reg, but I'd rather not do that.</p>\n\n<p>Here is the error output:</p>\n\n<pre><code>In file included from source/Nintendo.h:13:\nsource/Registers.h:31:26: error: unknown type name 'Nintendo'\nvoid InitializeRegisters(Nintendo *nes);\n                         ^\n1 error generated.\nIn file included from source/Registers.h:5:\nsource/Nintendo.h:17:5: error: unknown type name 'Registers'\n    Registers reg;\n    ^\n1 error generated.\n/bin/ld: /bin/../lib64/gcc/x86_64-pc-linux-gnu/8.2.0/../../../../lib64/Scrt1.o: in function `_start':\n(.text+0x24): undefined reference to `main'\nclang-6.0: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [Makefile:2: test] Error 1\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 2, "creation_date": 1536190213, "post_id": 52194607, "comment_id": 91338841, "body": "What output do you get from your <code>printf</code> statements?  Anyway, it&#39;s because your array has an odd number of elements and is symmetrical, so it&#39;s giving you the right answer :) .  Try <code>{ 1, 2, 3, 3, 2, 1 }</code>.  Voting to close as a typo, but that&#39;s no reflection on you!  We all do things like that sometimes :D ."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 2, "creation_date": 1536190440, "post_id": 52194607, "comment_id": 91338883, "body": "The error might have been easier to spot with a single <code>printf(&quot;sumL = %d; sumR = %d\\n&quot;, sumL, sumR);</code>.  That way you can tell which <code>sumL</code> value lines up with which <code>sumR</code> value more easily."}], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 3323850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYzBr.png?s=128&g=1", "display_name": "alebian", "link": "https://stackoverflow.com/users/3323850/alebian"}, "is_accepted": true, "score": 2, "last_activity_date": 1536190934, "creation_date": 1536190934, "answer_id": 52194679, "question_id": 52194607, "link": "https://stackoverflow.com/questions/52194607/why-doesnt-equating-two-sums-in-a-conditional-evaluate-to-true/52194679#52194679", "title": "Why doesn&#39;t equating two sums in a conditional evaluate to true?", "body": "<p>Because you are comparing the numbers after adding and subtracting both of them. So in the moment they are about to be the same:</p>\n\n<pre><code>sumL = 6; sumR = 10\n</code></pre>\n\n<p>You then sum 4 to sumL and subtract 4 to sumR:</p>\n\n<pre><code>sumL = 10; sumR = 6\n</code></pre>\n\n<p>And then you compare and get different values. You have to check in between the operations.</p>\n"}], "owner": {"reputation": 339, "user_id": 5627817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b7a4f6294e1d3bb219ee7f19921d68a7?s=128&d=identicon&r=PG&f=1", "display_name": "Death_by_Ch0colate", "link": "https://stackoverflow.com/users/5627817/death-by-ch0colate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 52194679, "answer_count": 1, "score": 2, "last_activity_date": 1536235907, "creation_date": 1536190123, "question_id": 52194607, "link": "https://stackoverflow.com/questions/52194607/why-doesnt-equating-two-sums-in-a-conditional-evaluate-to-true", "title": "Why doesn&#39;t equating two sums in a conditional evaluate to true?", "body": "<p>I am trying to return the index where the sum of the left hand side is equal to the right hand side. But I get a default of -1. Why doesn't the conditional evaluate to true?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint find_even_index(const int *values, int length)\n{\n  int count = 0;\n  int sumL = 0;\n  int sumR = 0;\n\n  while(count &lt; length)\n  {\n    sumR += values[count];\n    count++;\n  }\n  count = 0;\n\n  while(count &lt; length)\n  {\n    sumL += values[count];\n    sumR -= values[count];\n    printf(\"sumL = %d\\n\", sumL);\n    printf(\"sumR = %d\\n\", sumR);\n    if(sumL == sumR)//why doesn't this condition work?\n    {\n      return count;\n    }\n\n    count++;\n  }\n\n  return -1;\n}\n\nint main (void)\n{\n\n  int arr[] = { 1,2,3,4,3,2,1 };\n  printf(\"%d\\n\", (find_even_index(arr, 7)));\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1536189727, "post_id": 52194539, "comment_id": 91338731, "body": "If you want to write code that reads in a line of data and parses it, start with code that reads in a line of data. Then write code to parse that line."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1536189764, "post_id": 52194539, "comment_id": 91338739, "body": "Have you tried? fscanf(fp, &quot;%s;%d;%d%%;%d&quot;, name,id,score,number);"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1536200621, "last_edit_date": 1536200621, "creation_date": 1536189850, "answer_id": 52194567, "question_id": 52194539, "link": "https://stackoverflow.com/questions/52194539/fscanf-troubles-after-opening-file-in-c/52194567#52194567", "title": "fscanf troubles after opening file in C", "body": "<p>The problem with <code>fscanf</code>'s <code>%s</code> format specifier is that it stops as soon as it reaches a space. Given your format, this is incorrect: you are looking for a read of data up to a semicolon.</p>\n\n<p>This can be achieved with <code>%[^;]</code> format. The complete format string would also use semicolons as separators between <code>%d</code> specifiers to match your file's format, like this:</p>\n\n<pre><code>fscanf(fp, \"%32[^;];%d;%d%%;%d\", name, id, score, number);\n</code></pre>\n\n<p>Note <code>32</code> above. This limit should correspond to the longest name that you would like to read. If <code>name</code> is an array of <code>N</code> characters, use <code>N-1</code> for the value between <code>%</code> and <code>[^;]</code> to avoid buffer overruns. Also note the <code>%%</code> after the second <code>%d</code>. That is required to match the percentage sign (second <code>%</code> is required by <code>fscanf</code>'s rules).</p>\n"}], "owner": {"reputation": 33, "user_id": 5763533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f064aa8a23d7890b82a243c632b44562?s=128&d=identicon&r=PG&f=1", "display_name": "D Doe", "link": "https://stackoverflow.com/users/5763533/d-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536200621, "creation_date": 1536189627, "question_id": 52194539, "link": "https://stackoverflow.com/questions/52194539/fscanf-troubles-after-opening-file-in-c", "title": "fscanf troubles after opening file in C", "body": "<p>I'm writing a program that opens a file and reads and stores the data.</p>\n\n<p>The layout of the datafile appears as name;id#;score;number</p>\n\n<p>i.e Bobby Ray Reynolds;111;10%;1</p>\n\n<p>How do I store these fields in different variables.\nThis is what I'm trying:</p>\n\n<pre><code>    fscanf(fp, \"%s %d %d %d\", name,id,score,number);\n</code></pre>\n"}, {"tags": ["c", "unix", "fork", "execv"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1536183812, "post_id": 52193731, "comment_id": 91337286, "body": "Try adding <code>fflush(stdout)</code> immediately before the <code>execv</code>.  If that fixes everything, I will explain."}, {"owner": {"reputation": 13, "user_id": 9006439, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CE2tFBqlRFg/AAAAAAAAAAI/AAAAAAAAAJM/NZ6XKG9rCk4/photo.jpg?sz=128", "display_name": "Adil Hamid", "link": "https://stackoverflow.com/users/9006439/adil-hamid"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1536184134, "post_id": 52193731, "comment_id": 91337392, "body": "@zwol the output was the same, nothing changed."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536184897, "post_id": 52193731, "comment_id": 91337628, "body": "Look hard at whether <a href=\"https://stackoverflow.com/questions/2530663/\"><code>printf()</code> anomaly after <code>fork()</code></a> can help you.  It is hard to know what code does what when there are comments all over the place.  I suggest embedding the version that reproduces the trouble in the question, or use conditional compilation (<code>#ifdef DEBUG_FORK</code> / <code>#else</code> / <code>#endif</code> around the print statements, and show the output when compiled with <code>-DDEBUG_FORK</code> and without it).  It is much easier than us having to guess what we need to look at.  Indenting the code for readability would help.  See also MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536187119, "post_id": 52193731, "comment_id": 91338204, "body": "Distracting that  <code>str[80];</code> is so much smaller than <code>input[200];</code> and  susceptible to <code>strcat(str, token);</code> overrun."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536187584, "post_id": 52193731, "comment_id": 91338330, "body": "I changed code to <code>assert(counter &lt; 15);         myargs[counter] = strtok(input, &quot; &quot;);</code>, ran and the assertion failed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536187746, "post_id": 52193731, "comment_id": 91338370, "body": "<code>while (myargs[counter] != NULL) {      counter++;         myargs[counter] = strtok(input, &quot; &quot;);   printf(myargs[counter]);       }</code> makes little sense to attempt <code>printf(NULL)</code>.  The check for <code>myargs[counter] != NULL</code> needs to occur before <code>printf()</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536188352, "post_id": 52193731, "comment_id": 91338481, "body": "Suggest <code>input[strcspn( input, &quot;\\n\\r&quot; )] = &#39;\\0&#39;;</code>  (Add <code>\\r</code>) to eliminate a potential  input issue."}, {"owner": {"reputation": 13, "user_id": 9006439, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CE2tFBqlRFg/AAAAAAAAAAI/AAAAAAAAAJM/NZ6XKG9rCk4/photo.jpg?sz=128", "display_name": "Adil Hamid", "link": "https://stackoverflow.com/users/9006439/adil-hamid"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536207400, "post_id": 52193731, "comment_id": 91342100, "body": "@chux I changed the str and input sizes to match more.Anyway I figured out the problem, in my while loop, when using strtok, I replaced input with NULL and it started working. All the printf statements and execv. Still dont understand why the printf before that line were not working but whatever."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1536209527, "post_id": 52193731, "comment_id": 91342614, "body": "Always put a newline at the <i>end</i> of each output line. Read about stdout buffering. You&#39;ll find lots of questions here about the subject."}], "owner": {"reputation": 13, "user_id": 9006439, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CE2tFBqlRFg/AAAAAAAAAAI/AAAAAAAAAJM/NZ6XKG9rCk4/photo.jpg?sz=128", "display_name": "Adil Hamid", "link": "https://stackoverflow.com/users/9006439/adil-hamid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536184047, "creation_date": 1536183653, "last_edit_date": 1536184047, "question_id": 52193731, "link": "https://stackoverflow.com/questions/52193731/fork-child-issue-with-printf-output-and-execv", "title": "Fork child issue with printf output and execv", "body": "<p>So basically my fork code is running really wack. I am sure the problem is something simple, I just can't see it. For some reason my fork() is not completing all the way. Like the first printf is not printing, yet the 2nd printf, which is commented; if I uncomment it, it prints the first and 2nd printf, but nothing after that seems to print for the child. The execv process also does not seem to run, even though it was running at one point. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\nint main(int argc, char *argv[]){\nchar input[200];\nchar path[]=\"/bin/\";\nchar str[80];\n\ndo{\nprintf(\"dash&gt; \");\nfgets(input, 200, stdin);\ninput[strcspn( input, \"\\n\" )] = '\\0';\nchar* token = strtok(input, \" \");\n// printf(\"TEST: %s\",token);\nstrcpy(str, path);\nstrcat(str, token);\n// printf(\"str1: %s\", str);\nint rc=fork();\nif(rc&lt;0){  // fork failed\n printf(\"Error\");\nreturn 0;\n}\n   else if(rc==0){//child process\n    printf(\"hello toekn is: %s \",token);\n   // printf(\"\\nhello, I am child (pid:%d)\\n\", (int) getpid());\n   // char* arr[] = {\"ls\", NULL};\n   // printf(\"hello, I am child\");\n   char *myargs[15];\n   myargs[0]=token;\n   int counter=0;\n   printf(token);\n   while(myargs[counter] != NULL){\n   counter++;\n   myargs[counter]=strtok(input, \" \");\n   printf(myargs[counter]);\n   }\n   // myargs[1]=token;\n    myargs[counter+1]=NULL;\n\n   execv(str,myargs );\n   printf(\"failed\");\n  }\n   else{ //parent process\n     int rc_wait=wait(NULL);\n     printf(\"hello, I am parent of %d (rc_wait:%d) (pid:%d)\\n\", rc, rc_wait, \n  (int) getpid());\n\n // printf(\"\\nHello %d\", rc_wait);\n}\n\n }while(strcmp(input,\"exit\")!=0);\n return 0;\n}\n</code></pre>\n\n<p>So for example when the 2nd printf in the child is not commented this is the output: </p>\n\n<pre><code>dash&gt; ls\nhello toekn is: ls\nhello, I am child (pid:33522)\nhello, I am parent of 33522 (rc_wait:33522) (pid:33095)\ndash&gt;\n</code></pre>\n\n<p>And when it is commented :</p>\n\n<pre><code> dash&gt; ls\n hello, I am parent of 4017 (rc_wait:4017) (pid:3377)\n dash&gt;\n</code></pre>\n\n<p>As you can see for some reason, because the first printf is commented out the 2nd one also does not display. As well as the rest of the child process.</p>\n\n<p>I feel like the problem is the child process does not complete in time, of the wait in parent.\nIf anyone can help I would greatly appreciate it. Thanks</p>\n\n<p>Using gcc (GCC) 4.8.5</p>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 1415, "user_id": 4288486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceeebcdab5325a9b458c1af8c51111d?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Neto", "link": "https://stackoverflow.com/users/4288486/jo%c3%a3o-neto"}, "edited": false, "score": 1, "creation_date": 1536185178, "post_id": 52193411, "comment_id": 91337701, "body": "I&#39;m not too familiar with MPI but... Isn&#39;t the <code>MPI_Scatter</code> being executed by all the processes?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 3, "creation_date": 1536185372, "post_id": 52193411, "comment_id": 91337750, "body": "You should not use <code>count=12</code> in the collective operations. Also, all ranks must call <code>MPI_Finalize()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1536305336, "post_id": 52204484, "comment_id": 91383412, "body": "the <code>assert()</code> is only here to abort if there are not 3 MPI tasks (since <code>4</code> is hardcoded, the program will fail if ran with a different number of tasks). <code>MPI_Scatter()</code> nor <code>MPI_Barrier()</code> are barriers. For example, in a <code>MPI_Scatter()</code>, the root rank might return before non root rank even enter <code>MPI_Scatter()</code>."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1536307963, "post_id": 52204484, "comment_id": 91384825, "body": "@GillesGouaillardet, that&#39;s true, corrected the answer. The point was that <code>MPI_Barrier()</code> are not needed here."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 1, "last_activity_date": 1536307994, "last_edit_date": 1536307994, "creation_date": 1536238067, "answer_id": 52204484, "question_id": 52193411, "link": "https://stackoverflow.com/questions/52193411/difficulty-understanding-mpi-scatter-and-gather-in-c/52204484#52204484", "title": "difficulty understanding MPI scatter and gather in C", "body": "<p>Though your main error is using <code>12</code> instead of <code>4</code>, let's do it step-by-step.</p>\n\n<pre><code>// int size = 3; // number of processes/nodes\nint size;\n...\nMPI_Comm_size(MPI_COMM_WORLD, &amp;size); // initialize MPI\nassert(size == 3);\n</code></pre>\n\n<p>There is no point in setting <code>size</code> to <code>3</code>. This value will be overwritten by <code>MPI_Comm_size</code> with the actual number of processes. This number is determined by how you run your MPI application (e.g. <code>mpirun -np 3</code>).</p>\n\n<pre><code>//unsigned char outData[12]; // buffer for receiving data\nunsigned char outData[4];\n</code></pre>\n\n<p>We have 12 elements and 3 processes, 4 elements per processes. So, 4 elements are enough for <code>outData</code>.</p>\n\n<pre><code>outData[i] = 0;\ninData[i] = 0;\n</code></pre>\n\n<p>There is no point in zeroing these buffers, they will be overwritten.</p>\n\n<pre><code>// scatter the data to the processes\n// I am not clear about the numbers sent in and out\nMPI_Scatter(&amp;testData, 4 /*12*/, MPI_UNSIGNED_CHAR, &amp;outData,\n    4 /*12*/, MPI_UNSIGNED_CHAR, 0, MPI_COMM_WORLD);\n</code></pre>\n\n<p>We have 4 elements per processes, so the number should be 4, not 12.</p>\n\n<pre><code>MPI_Barrier(MPI_COMM_WORLD);\n</code></pre>\n\n<p>You don't need barriers here.</p>\n\n<pre><code>MPI_Gather(&amp;outData, 4 /*12*/, MPI_UNSIGNED_CHAR, &amp;inData, \n    4 /*12*/, MPI_UNSIGNED_CHAR, 0, MPI_COMM_WORLD);\n</code></pre>\n\n<p>Same story, <code>4</code> instead of <code>12</code>.</p>\n\n<pre><code>MPI_Finalize();\n</code></pre>\n\n<p>This should be called by all processes.</p>\n"}], "owner": {"reputation": 29, "user_id": 6121870, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153860835977891/picture?type=large", "display_name": "Sean Wayland", "link": "https://stackoverflow.com/users/6121870/sean-wayland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "accepted_answer_id": 52204484, "answer_count": 1, "score": 0, "last_activity_date": 1536307994, "creation_date": 1536181789, "last_edit_date": 1536242150, "question_id": 52193411, "link": "https://stackoverflow.com/questions/52193411/difficulty-understanding-mpi-scatter-and-gather-in-c", "title": "difficulty understanding MPI scatter and gather in C", "body": "<p>I am trying to learn to use MPI. Below is my simple program to test MPI scatter and gather. I don't understand how it works and why it produces the result</p>\n\n<pre><code>1 2 3 4 4 5 6 7 8 9 10 11\n</code></pre>\n\n<p>instead of expected</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10 11 12\n</code></pre>\n\n<p>The documentation and all the examples I can find are too complicated/poorly worded for me to understand. I just want to scatter an array across 3 processes and add one to each value in each process. Alternatively I would be happy to see how a 2D array was sent row by row to each process and each row was processed simply.</p>\n\n<pre><code>int main(int argc, char **argv) {\n    int rank; // my process ID\n    int size = 3; // number of processes/nodes\n    MPI_Status status;\n    MPI_Init(&amp;argc, &amp;argv); // start MPI\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size); // initialize MPI\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n    unsigned char inData[12]; // data returned after being \"processed\"\n    unsigned char outData[12]; // buffer for receiving data\n    unsigned long datasize = 12; // size of data to process\n    unsigned char testData[12]; // data to be processed\n\n    if (rank == 0) {\n        // initialize data\n        for (int i = 0; i &lt; datasize; i++) {\n            testData[i] = i;\n            outData[i] = 0;\n            inData[i] = 0;\n        }\n    }\n\n    // scatter the data to the processes\n    // I am not clear about the numbers sent in and out\n    MPI_Scatter(&amp;testData, 12, MPI_UNSIGNED_CHAR, &amp;outData, \n        12, MPI_UNSIGNED_CHAR, 0, MPI_COMM_WORLD);\n    MPI_Barrier(MPI_COMM_WORLD);\n\n    // process data\n    for (int i = 0; i &lt; 4; i++) { outData[i] = outData[i] + 1; }\n\n    MPI_Barrier(MPI_COMM_WORLD);\n\n    // gather processed data\n    MPI_Gather(&amp;outData, 12, MPI_UNSIGNED_CHAR, &amp;inData, \n        12, MPI_UNSIGNED_CHAR, 0, MPI_COMM_WORLD);\n\n    //print processed data from root \n    if (rank == 0) {\n        for (int i = 0; i &lt; 12; i++) {\n            printf(\"\\n%d\", inData[i]);\n        }\n\n        MPI_Finalize();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 786, "user_id": 2502372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ETaor.jpg?s=128&g=1", "display_name": "Lucas Wieloch", "link": "https://stackoverflow.com/users/2502372/lucas-wieloch"}, "edited": false, "score": 0, "creation_date": 1536179750, "post_id": 52193003, "comment_id": 91335794, "body": "Yes it does, in a lot of ways actually!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1536179997, "post_id": 52193003, "comment_id": 91335906, "body": "You may want to create a structure and pass that around than some arbitrary <code>int*&#47;size_t</code> pair."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536183620, "post_id": 52193003, "comment_id": 91337233, "body": "Try a new approach.  If you allocate space, the MX number will be larger, your are still limited to the memory resources of the machine.  Instead, perform the <code>countd()</code> as code generates on each 1 dice roll, then you can go on and on, only limited by the time you want to take."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536192460, "post_id": 52193003, "comment_id": 91339227, "body": "Sidenote: <code>int genNum();</code> is not a valid prototype, your compiler should complain. If you don&#39;t have parameters, use <code>void</code>: <code>int genNum(void)</code>. Similar for the definitions. This allies to <b>all</b> functions."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10241590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RPbnXSL7sN8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP2fCslRVxW-DNxKvucDMV0Ky1D2g/mo/photo.jpg?sz=128", "display_name": "Ragde Nutzer", "link": "https://stackoverflow.com/users/10241590/ragde-nutzer"}, "edited": false, "score": 0, "creation_date": 1536181711, "post_id": 52193059, "comment_id": 91336577, "body": "I tried both methods and both work perfectly, is there any difference between using static and malloc?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 13, "user_id": 10241590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RPbnXSL7sN8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP2fCslRVxW-DNxKvucDMV0Ky1D2g/mo/photo.jpg?sz=128", "display_name": "Ragde Nutzer", "link": "https://stackoverflow.com/users/10241590/ragde-nutzer"}, "edited": false, "score": 0, "creation_date": 1536181794, "post_id": 52193059, "comment_id": 91336611, "body": "@RagdeNutzer <code>malloc</code> : dynamic memory allocation, size is determined at runtime. <code>static</code> : size is determined at compile time. Your C text book contains this information."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 13, "user_id": 10241590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RPbnXSL7sN8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP2fCslRVxW-DNxKvucDMV0Ky1D2g/mo/photo.jpg?sz=128", "display_name": "Ragde Nutzer", "link": "https://stackoverflow.com/users/10241590/ragde-nutzer"}, "edited": false, "score": 0, "creation_date": 1536182374, "post_id": 52193059, "comment_id": 91336823, "body": "@RagdeNutzer: <code>static</code> objects are initialized to zero (or pointers to null pointers), which is a waste in your case since you assign other values to the elements of <code>throw</code> without using any initial value first. So using <code>malloc</code> would avoid this needless initialization (although a good compiler might recognize that your code does not benefit from the initialization and could optimize it away). (Except the operating system has to zero/randomize memory before it gives it to your process anyway, to avoid disclose other processes\u2019 data. Computing is complicated.)"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": true, "score": 3, "last_activity_date": 1536180464, "last_edit_date": 1536180464, "creation_date": 1536179800, "answer_id": 52193059, "question_id": 52193003, "link": "https://stackoverflow.com/questions/52193003/dice-experiment-increasing-maximum-amount-of-throws/52193059#52193059", "title": "Dice experiment, increasing maximum amount of throws", "body": "<p>Try changing this;</p>\n\n<pre><code>int throws[MX];\n</code></pre>\n\n<p>to either this, or move it to a global scope;</p>\n\n<pre><code>static int throws[MX];\n</code></pre>\n\n<p>I think you're probably overflowing the stack.</p>\n\n<p>You can try to put the array on the heap like this;</p>\n\n<pre><code>int *throws = malloc(sizeof(int)*MX);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10241590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RPbnXSL7sN8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP2fCslRVxW-DNxKvucDMV0Ky1D2g/mo/photo.jpg?sz=128", "display_name": "Ragde Nutzer", "link": "https://stackoverflow.com/users/10241590/ragde-nutzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 52193059, "answer_count": 1, "score": -1, "last_activity_date": 1536180464, "creation_date": 1536179542, "question_id": 52193003, "link": "https://stackoverflow.com/questions/52193003/dice-experiment-increasing-maximum-amount-of-throws", "title": "Dice experiment, increasing maximum amount of throws", "body": "<p>I was building a simple program to count the frequencies of the numbers in a dice experiment, but I tried to expand it and increase the maximum amount of throws to huge numbers, and by trial and error I found the max limit to be 519253.</p>\n\n<p>With this maximum value I can\u2019t create any new arrays either, it crashes.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\n#define MX 519253\n#define DICE 6\nvoid throwdice(int n[], int size);\nint genNum();\nvoid printv(int n[], int size);\nvoid countd(int n[], int size, int count[DICE]);\nint main ()\n{\n    srand(time(NULL));\n    int throws[MX];\n    int count[DICE]={0};\n    int n;\n    //printf(\"Number of dice to throw: \");\n    //scanf(\"%d\",&amp;n);\n    n=MX;\n    throwdice(throws,n);\n    //printf(\"Throw\\tNumber\");\n    //printv(throws,n);\n    countd(throws,n,count);\n    printf(\"\\n\\nNumber\\tFrequency\");\n    printv(count,DICE);\n}\nint genNum()\n{\n    int n;\n    n=rand()%DICE+1;\n    return n;\n}\n\nvoid printv(int n[], int size)\n{\n    int i;\n    for (i = 0; i &lt; size; i++)\n        printf(\"\\n%d  \\t%d\",i+1,n[i]);\n}\n\nvoid throwdice(int n[], int size)\n{\n    int i;\n    for (i = 0; i &lt; size; i++)\n        n[i]=genNum();\n}\n\nvoid countd(int n[], int size, int count[DICE])\n{\n    int i;\n    for (i = 0; i &lt; size; i++)\n        count[n[i]-1]++;\n}\n</code></pre>\n\n<p>Is there a way to expand this program to account for, say a million throws? </p>\n"}, {"tags": ["c", "arrays", "recursion", "sum", "powerset"], "comments": [{"owner": {"reputation": 259, "user_id": 2710319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62e82d1d25764466572d0aa49b0b2c5?s=128&d=identicon&r=PG", "display_name": "HeLLo", "link": "https://stackoverflow.com/users/2710319/hello"}, "edited": false, "score": 0, "creation_date": 1536177884, "post_id": 52192614, "comment_id": 91335049, "body": "I think  you are missing <code>arrSum()</code>."}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 1, "creation_date": 1536177893, "post_id": 52192614, "comment_id": 91335056, "body": "Can you show the <code>arrSum</code> code? The line <code>if (arrSum(0, pos, p, 0) == 100)</code> seems suspicious to me since from the posted code you are calling it with an uninitialized 12 element array where you have only explicitly set the value at location <code>pos</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1536178157, "post_id": 52192614, "comment_id": 91335170, "body": "The proper declarations for <code>main</code> are <code>int main (void)</code> and <code>int main (int argc, char **argv)</code> (which you will see written with the equivalent <code>char *argv[]</code>). <b>note:</b> <code>main</code> is a function of <code>type int</code> and it returns a value. See: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1p1\" rel=\"nofollow noreferrer\">C11 Standard &#167;5.1.2.2.1 Program startup p1 (draft n1570)</a>. See also: <a href=\"http://stackoverflow.com/questions/204476/\">See What should main() return in C and C++?</a>"}, {"owner": {"reputation": 21, "user_id": 10322160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0f22ac7aa6a85423c5971c03a51621?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Scott", "link": "https://stackoverflow.com/users/10322160/travis-scott"}, "reply_to_user": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1536178755, "post_id": 52192614, "comment_id": 91335406, "body": "i posted arrSum function, sorry about the confusion, and once again the entire solution is correct, i get valid arrays that their sum is equal to 0, but i only want the first one. @pstrjds"}, {"owner": {"reputation": 21, "user_id": 10322160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0f22ac7aa6a85423c5971c03a51621?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Scott", "link": "https://stackoverflow.com/users/10322160/travis-scott"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536179051, "post_id": 52192614, "comment_id": 91335515, "body": "@DavidC.Rankin nothing much i can do about it, as that&#39;s how my professor instructed me to do."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1536183177, "post_id": 52192614, "comment_id": 91337092, "body": "Are you allowed to change the function declaration of the <code>powerSet</code> function, i.e. change the return type or the function arguments?"}, {"owner": {"reputation": 21, "user_id": 10322160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0f22ac7aa6a85423c5971c03a51621?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Scott", "link": "https://stackoverflow.com/users/10322160/travis-scott"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1536183217, "post_id": 52192614, "comment_id": 91337106, "body": "@user3386109 yes, that is allowed."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536193311, "post_id": 52192614, "comment_id": 91339385, "body": "@TravisScott - if you are not on some strange embedded system, then print a copy of the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1p1\" rel=\"nofollow noreferrer\">C11 Standard &#167;5.1.2.2.1 Program startup p1 (draft n1570)</a> take it to him (or her) and ask why? If they can&#39;t answer, drop the class (you still have time) and re-enroll with another professor."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536282447, "post_id": 52192614, "comment_id": 91377319, "body": "while the returned type from <code>main(()</code> is always <code>int</code>.  There are some (WAY BEHIND) compilers, like Visual Studio, that will accept invalid code without outputting a message complaining about the return type"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10322160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0f22ac7aa6a85423c5971c03a51621?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Scott", "link": "https://stackoverflow.com/users/10322160/travis-scott"}, "edited": false, "score": 0, "creation_date": 1536178843, "post_id": 52192701, "comment_id": 91335443, "body": "This solution would probably work, but is there a more elegant way to solve the problem? or is it the fact that my function is built the way it is?"}, {"owner": {"reputation": 21, "user_id": 10322160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0f22ac7aa6a85423c5971c03a51621?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Scott", "link": "https://stackoverflow.com/users/10322160/travis-scott"}, "edited": false, "score": 0, "creation_date": 1536182162, "post_id": 52192701, "comment_id": 91336745, "body": "Also, i have just been informed i can&#39;t do that."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1536178027, "creation_date": 1536178027, "answer_id": 52192701, "question_id": 52192614, "link": "https://stackoverflow.com/questions/52192614/sum-of-integer-subset-of-an-array-getting-all-results-instead-of-first-one/52192701#52192701", "title": "sum of integer subset of an array, getting all results instead of first one", "body": "<p>It's because the call stack is full of <code>powerset</code>-function executions that will all be brought to an end, each having the chance to enter <code>print</code> without the chance to detect that it has been called before.</p>\n\n<p>You could introduce a \"shared counter\" that is incremented once <code>print</code> is called. Share this counter by, for example, passing it by reference to all the calls:</p>\n\n<pre><code>int main() {\n    int printCounter=0;\n    powerSet(...., &amp;printCounter);\n}\n\nvoid powerSet(int* arr, int* p, int n, int pos, int index, int *counter) {\n   ...\n   if(!*counter) {  // this block avoids that print will be called more than once\n      print(...);\n      (*counter)++;\n   }\n   ...\n   powerSet(...., counter);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10322160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0f22ac7aa6a85423c5971c03a51621?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Scott", "link": "https://stackoverflow.com/users/10322160/travis-scott"}, "edited": false, "score": 1, "creation_date": 1536184849, "post_id": 52193846, "comment_id": 91337611, "body": "Splendid! that worked perfectly, thank you very much. I used int instead of bool."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 2, "last_activity_date": 1536184367, "creation_date": 1536184367, "answer_id": 52193846, "question_id": 52192614, "link": "https://stackoverflow.com/questions/52192614/sum-of-integer-subset-of-an-array-getting-all-results-instead-of-first-one/52193846#52193846", "title": "sum of integer subset of an array, getting all results instead of first one", "body": "<p>To force the recursion to end early, you can have the <code>powerSet</code> function return a boolean that indicates that the task is completed. After <code>PrintRec</code> is called, <code>powerSet</code> should return <code>true</code>, and if any recursive call returns <code>true</code>, then the caller should immediately return <code>true</code>. That will prevent any additional calls to <code>powerSet</code> and will force the recursion stack to unwind.</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nbool powerSet(int* arr, int* p, int n, int pos, int index)\n{\n    if (index &gt;= n)\n    {\n        return false;\n    }\n    p[pos] = arr[index];\n    if (arrSum(0, pos, p, 0) == 100)\n    {\n        PrintRec(0, pos, p);\n        return true;\n    }\n    else\n    {\n        if (powerSet(arr, p, n, pos + 1, index + 1))\n            return true;\n        if (powerSet(arr, p, n, pos, index+1))\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>Note: if you aren't allowed to use <code>&lt;stdbool.h&gt;</code>, then replace <code>bool</code> with <code>int</code>, replace <code>true</code> with <code>1</code>, and replace <code>false</code> with <code>0</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 10322160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0f22ac7aa6a85423c5971c03a51621?s=128&d=identicon&r=PG&f=1", "display_name": "Travis Scott", "link": "https://stackoverflow.com/users/10322160/travis-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 52193846, "answer_count": 2, "score": 1, "last_activity_date": 1536184367, "creation_date": 1536177599, "last_edit_date": 1536178690, "question_id": 52192614, "link": "https://stackoverflow.com/questions/52192614/sum-of-integer-subset-of-an-array-getting-all-results-instead-of-first-one", "title": "sum of integer subset of an array, getting all results instead of first one", "body": "<p>my problem is quite unique. i am recursively finding powerset of an integer array, after that i am finding the sum of the array, if the sum is a certain number N i look for, it should print the array and stop executing, however, in my case it prints out all the subsets that equal to that N instead of just the first one.</p>\n\n<p>snippet:</p>\n\n<pre><code>void main()\n{\n    char a;\n    int arr[] = { 1, 4, 15, 20, 1, 1, 2, 3, 66, 14, 33 };\n    int n = sizeof(arr) / sizeof(arr[0]);\n    int temp[12];\n    powerSet(arr, temp, n, 0, 0);\n\n    scanf(\"%c\", &amp;a);\n}\nvoid powerSet(int* arr, int* p, int n, int pos, int index)\n{\n    if (index &gt;= n)\n    {\n        return;\n    }\n    p[pos] = arr[index];\n    if (arrSum(0, pos, p, 0) == 100)\n    {\n        PrintRec(0, pos, p);\n        return;\n    }\n    else\n    {\n        //Most likely an issue here.\n        powerSet(arr, p, n, pos + 1, index + 1);\n        powerSet(arr, p, n, pos, index+1);\n    }\n}\nvoid PrintRec(int j, int end, int* p)\n{\n    if (j &gt; end)\n    {\n        printf(\"\\n\");\n        return;\n    }\n    printf(\"%d \", p[j]);\n    PrintRec(j + 1, end, p);\n}\n</code></pre>\n\n<p>arrSum:</p>\n\n<pre><code>int arrSum(int j, int end, int* p, int sum)\n{\n    if (j &gt; end)\n    {\n        return sum;\n    }\n    arrSum(j + 1, end, p, sum +=p[j]);\n}\n</code></pre>\n\n<p>The results i get are correct, but i only want the first result.</p>\n"}, {"tags": ["c", "primes"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536174062, "post_id": 52191799, "comment_id": 91333355, "body": "So your program has some bad logic. In order to fix it, first <i>describe</i> it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536174146, "post_id": 52191799, "comment_id": 91333386, "body": "BTW, your <code>prime</code> is very suboptimal. Why do you keep looping after a first factor is found?"}, {"owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536174298, "post_id": 52191799, "comment_id": 91333445, "body": "I am actually very new to programming. Any suggestions on how to optimise the function and/or improve the code ?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1536174320, "post_id": 52191799, "comment_id": 91333454, "body": "Why is <code>a</code> a <code>float</code>? I think that <code>int</code> may be a better choice"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1536174406, "post_id": 52191799, "comment_id": 91333501, "body": "You can use the <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">Sieve of Eratosthenes</a> to create a list of primes."}, {"owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 0, "creation_date": 1536174583, "post_id": 52191799, "comment_id": 91333582, "body": "Is it better now ? And can anyone please tell me why is it at least not working as expected."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1536175044, "post_id": 52191799, "comment_id": 91333795, "body": "The first step is to write a good code to find prime numbers efficiently, before going further. The sieve is one method. With yours, if you store the primes in an array, those are the only trial divisors you will need up the the square root of the candidate . . . preferably the limit is the square of the supposed prime which should be &lt;= candidate."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 0, "creation_date": 1536174974, "post_id": 52191975, "comment_id": 91333764, "body": "Such a naive mistake. Any other way to optimise the code more ?"}, {"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "reply_to_user": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 1, "creation_date": 1536175076, "post_id": 52191975, "comment_id": 91333812, "body": "Yes, when you check for prime you need to check only until &lt;= <code>sqrt(x)</code>."}], "tags": [], "owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "is_accepted": false, "score": 1, "last_activity_date": 1536174771, "creation_date": 1536174771, "answer_id": 52191975, "question_id": 52191799, "link": "https://stackoverflow.com/questions/52191799/program-to-check-whether-a-number-can-be-expressed-as-a-sum-of-two-prime-numbers/52191975#52191975", "title": "Program to check whether a number can be expressed as a sum of two prime numbers", "body": "<p>Here is a corrected code:</p>\n\n<pre><code>/* Program to check whether a number can be expressed as a sum of two prime numbers*/\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint prime(int x)\n{\n    int fact=0,i;\n    if(x &lt; 2) return 0;\n    for(i=2;i&lt;x;i++)\n    {\n        if(x%i==0)\n        {\n            fact++;\n        }\n    }\n    if (fact==0)\n        return 1;\n    else return 0;\n}\nint main()\n{\n    int a;\n    int b,c,d,count=0;\n    printf(\"Enter Number\\n\");\n    scanf(\"%d\",&amp;a);\n    for(b=2;b&lt;(a+1)/2;b++)//;mistake here!!\n    {\n        c = prime(b);\n        d = prime(a-b);\n        if (c==1 &amp;&amp; d==1)\n        {\n            printf(\"%d = %d + %d\\n\",a,b,a-b);\n            count++;\n        }\n    }\n    if(count==0)\n        {\n            printf(\"%d cannot be expressed as sum of two prime numbers.\\n\",a);\n        }\n    return 0;\n}\n</code></pre>\n\n<p>The main issue was that you were ending the loop with semi column <code>;</code>. The other suggestion is to use <code>int</code> type everywhere.</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536175190, "post_id": 52192020, "comment_id": 91333861, "body": "Good spot on the <code>;</code> after the <code>for</code> statement, but bad advice on the limit, which only needs to be the square root of <code>x</code>. All prime numbers are odd, so <code>2</code> is an exception which can be discounted in any algorithm."}, {"owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 0, "creation_date": 1536175300, "post_id": 52192020, "comment_id": 91333914, "body": "For i=2, it won&#39;t enter the <code>for(i=2;i&lt;x;i++)</code> loop and thus fact would still remain 0 and the function would return 1. Isn&#39;t it ?"}, {"owner": {"reputation": 259, "user_id": 2710319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62e82d1d25764466572d0aa49b0b2c5?s=128&d=identicon&r=PG", "display_name": "HeLLo", "link": "https://stackoverflow.com/users/2710319/hello"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536175673, "post_id": 52192020, "comment_id": 91334082, "body": "@WeatherVane you are right, but it has to be checked if x is 2."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536176325, "post_id": 52192020, "comment_id": 91334365, "body": "@HeLLo yes, but only once. the trade-off is checking every even divisor, which is far more expensive!"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 0, "creation_date": 1536177319, "post_id": 52192020, "comment_id": 91334805, "body": "@AASingh what is the problem, isn&#39;t <code>2</code> a prime?"}, {"owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 0, "creation_date": 1536177520, "post_id": 52192020, "comment_id": 91334882, "body": "That is what I am saying. It counts 2 as a prime number and thus that is not a problem."}], "tags": [], "owner": {"reputation": 259, "user_id": 2710319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62e82d1d25764466572d0aa49b0b2c5?s=128&d=identicon&r=PG", "display_name": "HeLLo", "link": "https://stackoverflow.com/users/2710319/hello"}, "is_accepted": true, "score": 4, "last_activity_date": 1536177043, "last_edit_date": 1536177043, "creation_date": 1536174996, "answer_id": 52192020, "question_id": 52191799, "link": "https://stackoverflow.com/questions/52191799/program-to-check-whether-a-number-can-be-expressed-as-a-sum-of-two-prime-numbers/52192020#52192020", "title": "Program to check whether a number can be expressed as a sum of two prime numbers", "body": "<p>There are two errors in your code:</p>\n\n<p>In your function <code>prime()</code> you don't check <code>x</code> for the value of <code>2</code>, which would also be a prime number.</p>\n\n<p>The second mistake is the <code>;</code> after the <code>for</code> statement.</p>\n\n<pre><code>for(b=2;b&lt;(a+1)/2;b++);\n</code></pre>\n\n<p>Remove it, otherwise the following block (the part between <code>{</code> and <code>}</code>) is not executed for every loop iteration but only after the loop ended.</p>\n\n<p>In general you don't want to read a float, you want an integer.  Use <code>fgets()</code> and <code>atoi()</code> for your use case.  These are much safer than <code>scanf()</code>.</p>\n\n<p>As a last point: Add spaces before and after operators.  This makes the code much more readable.</p>\n\n<h2>full code</h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint prime(int x)\n{\n    int i;\n\n    if (x == 2)\n    {\n        return 1;\n    }\n\n    for (i = 2; i &lt; x; i++)\n    {\n        if (x % i == 0)\n        {\n            return 0;\n        }\n    }\n\n    return 1;\n}\n\nint main()\n{\n    int read_number;\n    int summand1;\n    int summand2;\n    int count = 0;\n    int max;\n    char buffer[100];\n\n    printf(\"Enter Number\\n\");\n    fgets(buffer, sizeof(buffer), stdin);\n    read_number = atoi(buffer);\n\n    max = (read_number + 1) / 2;\n\n    for (summand1 = 2; summand1 &lt; max; ++summand1)\n    {\n        summand2 = read_number - summand1;\n        if ((prime(summand1) == 1) &amp;&amp; (prime(summand2) == 1))\n        {\n            printf(\"%d = %d + %d\\n\", read_number, summand1, summand2);\n            count++;\n        }\n    }\n\n    if (count == 0)\n    {\n        printf(\"%d cannot be expressed as sum of two prime numbers.\\n\", read_number);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Of course you could do some optimizations.  For example in <code>prime()</code>:  If you already checked, that <code>x</code> is not a multiple of <code>2</code>, you can start your loop with <code>3</code> and increase <code>i</code> by <code>2</code> in very iteration.  Or you could stop this loop if <code>i</code> is greater than the square root of <code>x</code>.  These measures might speed up your code for large numbers, but it could make the code less readable.  That's a trade off you have to think about, especially if you are starting to learn programming.</p>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 1, "last_activity_date": 1536180865, "last_edit_date": 1536180865, "creation_date": 1536178161, "answer_id": 52192728, "question_id": 52191799, "link": "https://stackoverflow.com/questions/52191799/program-to-check-whether-a-number-can-be-expressed-as-a-sum-of-two-prime-numbers/52192728#52192728", "title": "Program to check whether a number can be expressed as a sum of two prime numbers", "body": "<p>Note that the others have caught your bugs, but since you asked for an optimized version, here is a version that will go a bit faster.</p>\n\n<p>The <code>prime</code> function only goes to <code>sqrt(x)</code> and only looks at odd values in the main loop. Also, in <code>main</code>, the loop only looks at odd values.</p>\n\n<pre><code>/* Program to check whether a number can be expressed as a sum of two prime\nnumbers*/\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint\nprime(int x)\n{\n    int pflg = 1;\n    int sqr;\n    int i;\n\n    // 2,3 are prime\n    if (x &lt;= 3)\n        return (x &gt;= 2);\n\n    // even numbers are not\n    if ((x &amp; 1) == 0)\n        return 0;\n\n    // get sqrt(x)\n    for (sqr = 0;  (sqr * sqr) &lt; x;  ++sqr);\n\n    // we only need to check odd numbers\n    for (i = 3; i &lt;= sqr; i += 2) {\n        if (x % i == 0) {\n            pflg = 0;\n            break;\n        }\n    }\n\n    return pflg;\n}\n\nint\nmain()\n{\n    int a,\n     b,\n     a2,\n     count = 0;\n\n    printf(\"Enter Number\\n\");\n    scanf(\"%d\", &amp;a);\n\n    a2 = (a + 1) / 2;\n\n    // check when b is 2\n    b = 2;\n    if (b &lt; a2) {\n        // NOTE: if prime(b) is 0, no need to calculate prime(a - b)\n        if (prime(b) &amp;&amp; prime(a - b)) {\n            printf(\"%d = %d + %d\\n\", a, b, a - b);\n            count++;\n        }\n    }\n\n    // only odd b values can be prime\n    for (b = 3; b &lt; a2; b += 2) {\n        // NOTE: if prime(b) is 0, no need to calculate prime(a - b)\n        if (! prime(b))\n            continue;\n        if (! prime(a - b))\n            continue;\n        printf(\"%d = %d + %d\\n\", a, b, a - b);\n        count++;\n    }\n\n    if (count == 0) {\n        printf(\"%d cannot be expressed as sum of two prime numbers.\\n\", a);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that in <code>main</code>, the <code>if (prime(b) &amp;&amp; prime(a - b)</code> uses what is called \"short circuit evaluation\". This means that if <code>prime(b)</code> returns 0, <code>prime(a - b)</code> will <em>not</em> be called/evaluated because <code>0 &amp;&amp; whatever</code> can <em>never</em> be non-zero</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14951709, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gi9kThR3jfyl4YTy7aC3JLORTnPzdD2eBM-1uAd8Q=k-s128", "display_name": "Akshay Baburaj", "link": "https://stackoverflow.com/users/14951709/akshay-baburaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1609947175, "last_edit_date": 1609947175, "creation_date": 1609936898, "answer_id": 65595964, "question_id": 52191799, "link": "https://stackoverflow.com/questions/52191799/program-to-check-whether-a-number-can-be-expressed-as-a-sum-of-two-prime-numbers/65595964#65595964", "title": "Program to check whether a number can be expressed as a sum of two prime numbers", "body": "<p>You can refer to this simple code.</p>\n<pre><code>#include &lt;stdio.h&gt;\nint check_Prime(int s)\n{\n    int flag = 0;\n    for (int k = 2; k &lt; s; k++)\n    {\n        if (s % k == 0) {\n            flag = 1;\n            break;\n        }\n    }\n    if (flag == 0)\n        return 1;\n    else\n        return 0;\n}\nint main()\n{\n    int n, i, j;\n    printf(&quot;Enter the number : &quot;);\n    scanf(&quot;%d&quot;, &amp;n);\n    for (i = 1, j = n - 1; i &lt; n / 2, j &gt;= n / 2; i++, j--) {\n        int a = check_Prime(i);\n        int b = check_Prime(j);\n        if (a == 1 &amp;&amp; b == 1) {\n            printf(&quot;%d = %d + %d\\n&quot;, n, i, j);\n        }\n    }\n}\n</code></pre>\n<p>Consider if the input is 34,the variable i takes values from 1 to 34/2=17 and j takes values from 34-1=33 to 17.</p>\n<p>So the corresponding sum i+j becomes</p>\n<p>1+33, increment i by 1 and decrement j by 1</p>\n<p>2+32</p>\n<p>3+31......</p>\n<p>Now check whether the corresponding i and j are prime by function check_Prime and display if it is.</p>\n"}], "owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1296, "favorite_count": 0, "accepted_answer_id": 52192020, "answer_count": 4, "score": -4, "last_activity_date": 1609947175, "creation_date": 1536173855, "last_edit_date": 1536174529, "question_id": 52191799, "link": "https://stackoverflow.com/questions/52191799/program-to-check-whether-a-number-can-be-expressed-as-a-sum-of-two-prime-numbers", "title": "Program to check whether a number can be expressed as a sum of two prime numbers", "body": "<p>I wrote the following program to check whether a given number can be expressed as a sum of two prime numbers. It compiles fine but does not work as expected. For eg, for input = 16, it displays that 16 cannot be expressed as a sum of two prime numbers. Also for eg, input = 5, it displays 5 = 3 + 2 rather than 5 = 2 + 3.</p>\n\n<pre><code>/* Program to check whether a number can be expressed as a sum of two prime numbers*/\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint prime(int x)\n{\n    int fact=0,i;\n    for(i=2;i&lt;x;i++)\n    {\n        if(x%i==0)\n        {\n            fact++;\n            break;\n        }\n    }\n    if (fact==0)\n        return 1;\n    else return 0;\n}\nint main()\n{\n    int a,b,c,d,count=0;\n    printf(\"Enter Number\\n\");\n    scanf(\"%d\",&amp;a);\n    for(b=2;b&lt;(a+1)/2;b++);\n    {\n        c = prime(b);\n        d = prime(a-b);\n        if (c==1 &amp;&amp; d==1)\n        {\n            printf(\"%d = %d + %d\\n\",a,b,a-b);\n            count++;\n        }\n    }\n    if(count==0)\n        {\n            printf(\"%d cannot be expressed as sum of two prime numbers.\\n\",a);\n        }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1536172082, "post_id": 52191342, "comment_id": 91332513, "body": "In this case <code>-1</code> does mean a error. What else did you expect? If you input <code>ABC</code> after running it, it should print <code>0</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536172553, "post_id": 52191342, "comment_id": 91332722, "body": "What input file are you giving the program to process?  If you give it an empty file, or <code>&#47;dev&#47;null</code>, or if you immediately indicate EOF at the terminal (typing <code>^D</code> or <code>^Z</code>, depending on platform), then the <code>-1</code> return indicates EOF. For anything other than an empty file, the return value should be 0 \u2014 the file might start ABC or it might not, but you&#39;ll get a matching failure if it does not, and zero conversions if it does, so the result will be 0. Neither the <code>printf()</code> nor the <code>scanf()</code> functions are required to produce any error message when misused, abused, or otherwise used erroneously."}], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1536172044, "creation_date": 1536172044, "answer_id": 52191389, "question_id": 52191342, "link": "https://stackoverflow.com/questions/52191342/what-is-the-output-of-printfd-scanfabc/52191389#52191389", "title": "What is the output of printf(&quot;%d&quot;,scanf(&quot;ABC&quot;));?", "body": "<blockquote>\n  <p>The value EOF is returned if the end of input is reached before<br>\n  either the first successful conversion or a matching failure occurs.<br>\n  EOF is also returned if a read error occurs</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": -1, "last_activity_date": 1536174038, "last_edit_date": 1536174038, "creation_date": 1536172209, "answer_id": 52191430, "question_id": 52191342, "link": "https://stackoverflow.com/questions/52191342/what-is-the-output-of-printfd-scanfabc/52191430#52191430", "title": "What is the output of printf(&quot;%d&quot;,scanf(&quot;ABC&quot;));?", "body": "<p>Here</p>\n\n<pre><code>printf(\"%d\",scanf(\"ABC\")); \n</code></pre>\n\n<p><code>scanf()</code> waits for user input and if user input is other than EOF(sending EOF indication by hitting CTRL+D on linux or CTRL+Z on windows) &amp; an empty file, it returns <code>zero</code>. and that return value gets printed by <code>printf()</code>. </p>\n\n<p>As I highlighted below this <code>scanf(\"ABC\")</code> return <code>0</code> even in the event of an early matching failure.</p>\n\n<p>From the manual page of <code>scanf()</code></p>\n\n<blockquote>\n  <p><strong>RETURN VALUE</strong></p>\n  \n  <p>These  functions  <strong>return the number of input items successfully</strong>\n  matched\n         and assigned, which can be fewer than provided for, or <strong>even zero in the\n         event of an early matching failure</strong>.</p>\n  \n  <p>The  <strong>value EOF is returned if the end of input is reached before\n  either\n         the first successful conversion or a matching failure occurs</strong>.   EOF  is\n         also returned if a read error occurs, in which case the error indicator\n         for the stream (see ferror(3)) is set, and errno is  set  indicate  the\n         error.</p>\n</blockquote>\n\n<p><em>Should it not give out an error ideally?</em> No,read the syntax of <code>scanf()</code>, it is</p>\n\n<pre><code>int scanf(const char *format, ...);\n</code></pre>\n\n<p>and it's first argument is of <code>const char*</code> type i.e <code>scanf()</code> expects 1st argument as of <code>const char*</code> and 1st argument provided is <code>\"ABC\"</code> which is of <code>char*</code> type though you should provide some format specifier like <code>%s</code> etc.</p>\n\n<p>Also as mentioned in comments neither <code>printf()</code> nor <code>scanf()</code> functions are required to produce any error message when misused, abused, or otherwise used erroneously.  </p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1536179424, "last_edit_date": 1536179424, "creation_date": 1536177401, "answer_id": 52192575, "question_id": 52191342, "link": "https://stackoverflow.com/questions/52191342/what-is-the-output-of-printfd-scanfabc/52192575#52192575", "title": "What is the output of printf(&quot;%d&quot;,scanf(&quot;ABC&quot;));?", "body": "<blockquote>\n  <p>What is the output of <code>printf(\"%d\",scanf(\"ABC\"));</code>?</p>\n</blockquote>\n\n<p>Lets try some slightly more informative test:</p>\n\n<pre><code>int main() {\n    printf(\"%d\\n\",scanf(\"ABC\"));\n    int ch =   fgetc(stdin);\n    printf(\"%d &lt;%c&gt;\\n\",ch, ch);\n}\n</code></pre>\n\n<p>With input \"ABCD\\n\", the <code>scanf(\"ABC\")</code> result of 0 as expected as 0 input specifiers were matched (there are no specifiers to match and so no conversions) and neither end of-file nor rare input error occurred. <code>\"ABC\"</code> was consumed. The next character received was <code>'D'</code>.  </p>\n\n<pre><code>0\n68 &lt;D&gt;\n</code></pre>\n\n<p>With input \"AB\\n\", the <code>scanf(\"ABC\")</code> result of 0 as expected as 0 input specifiers were matched. <code>\"AB\"</code> was consumed. The next character received was <code>'\\n'</code>.  </p>\n\n<pre><code>0\n13 &lt;\n&gt;\n</code></pre>\n\n<p>With input \"xyz\\n\", the <code>scanf(\"ABC\")</code> result of 0 as expected as 0 input specifiers were matched. Nothing was consumed. The next character received was <code>'x'</code>.  </p>\n\n<pre><code>xyz\n0\n120 &lt;x&gt;\n</code></pre>\n\n<p>With input \"Ayz\\n\", the <code>scanf(\"ABC\")</code> result of 0 as expected as 0 input specifiers were matched. <code>\"A\"</code> was consumed. The next character received was <code>'y'</code>.  </p>\n\n<pre><code>Ayz\n0\n121 &lt;y&gt;\n</code></pre>\n\n<p>With input \"ABC\" and then end-of-file signaled, the <code>scanf(\"ABC\")</code> result of -1 (<code>EOF</code> on my machine) as expected as 0 input specifiers were matched and end-of-file was detected. <code>\"ABC\"</code> was consumed. The next character received was not a character but the <code>EOF</code> from <code>fgetc()</code>.  </p>\n\n<pre><code>ABC-1\n-1 &lt;\ufffd&gt;\n</code></pre>\n\n<p>With no inpit and then end-of-file immediate signaled, the <code>scanf(\"ABC\")</code> result of -1 (<code>EOF</code> on my machine) as expected as 0 input specifiers were matched and end-of-file was detected. Nothing was consumed. The next character received was not a character but the <code>EOF</code> from <code>fgetc()</code>.  </p>\n\n<pre><code>-1\n-1 &lt;\ufffd&gt;\n</code></pre>\n\n<blockquote>\n  <p>When I tried running it gives output as -1. Should it not give out an error ideally?</p>\n</blockquote>\n\n<p>No as there is no <em>error</em> and C does not generally give out error messages.</p>\n\n<p>Depending on input, a result of 0 or the -1 (or whatever the negative value of <code>EOF</code> on your machine) is expected.  There can be input matching failures and the results seen above.</p>\n\n<hr>\n\n<p>With <code>scanf(\"ABC\")</code>, input is consumed if it matches, first <code>'A'</code>, then <code>'B'</code>, etc.  Note that <code>\"A\"</code> and the rest are not <code>*scanf()</code> <em>specifiers</em> like <code>\"%d\"</code>.  If end-of-file did not occur (or rare input error - broken keyboard cable, etc.), 0 is returned, else <code>EOF</code>.</p>\n\n<blockquote>\n  <p>The <code>fscanf</code> function returns the value of the macro <code>EOF</code> if an input failure occurs before the first conversion (if any) has completed. Otherwise, the function returns the number of input items assigned, which can be fewer than provided for, or even zero, in the event of an early matching failure.  C11dr \u00a77.21.6.2 16</p>\n</blockquote>\n\n<p>Well then what is an <em>input failure</em>?</p>\n\n<blockquote>\n  <p>If the length of the input item is zero, the execution of the directive fails; this condition is a matching failure unless end-of-file, an encoding error, or a read error prevented input from the stream, in which case it is an input failure.   \u00a77.21.6.2 9</p>\n</blockquote>\n"}], "owner": {"reputation": 25, "user_id": 9173826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PsCGixYzxXQ/AAAAAAAAAAI/AAAAAAAADog/MK46Eiu8uK0/photo.jpg?sz=128", "display_name": "Mizu", "link": "https://stackoverflow.com/users/9173826/mizu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 1, "accepted_answer_id": 52191430, "answer_count": 3, "score": -3, "last_activity_date": 1536179424, "creation_date": 1536171869, "question_id": 52191342, "link": "https://stackoverflow.com/questions/52191342/what-is-the-output-of-printfd-scanfabc", "title": "What is the output of printf(&quot;%d&quot;,scanf(&quot;ABC&quot;));?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n\n    printf(\"%d\",scanf(\"ABC\"));\n    return 0;\n\n}\n</code></pre>\n\n<p>When I tried running it gives output as -1. Should it not give out an error ideally?</p>\n"}, {"tags": ["c", "memory", "valgrind"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1536171888, "post_id": 52191317, "comment_id": 91332411, "body": "Why are you allocating memory? You&#39;re dropping the pointer to it in the line right after allocating."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 4, "creation_date": 1536171894, "post_id": 52191317, "comment_id": 91332415, "body": "You <code>malloc</code> n_info then immediately re-assign it. The mem from the <code>malloc</code> is lost."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 1, "creation_date": 1536171906, "post_id": 52191317, "comment_id": 91332424, "body": "what&#39;s the purpose of this <code>n_info = (struct net_info *)malloc(sizeof(struct net_info));</code> if you over write <code>n_info</code> in immediate next statement like <code>n_info = (struct net_info *)n;</code> ?"}, {"owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "edited": false, "score": 0, "creation_date": 1536172705, "post_id": 52191317, "comment_id": 91332796, "body": "OK...thanks for pointing out this problem.  So, keeping in mind that this is a function called by <code>pthread_create</code> and passed the variable <code>n</code>, would it be correct to have the statement <code>struct net_info *n_info = n;</code> and then let the main loop release the memory associated with the input?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 2, "creation_date": 1536173826, "post_id": 52191317, "comment_id": 91333236, "body": "If main thread does <code>malloc</code>, it is usual to have main do the <code>free</code>. But, <i>if</i> the struct is <i>not</i> used to pass back data to main at the end, then child thread <i>may</i> do the <code>free</code> at the bottom. Otherwise, after doing <code>pthread_join</code>, main may examine the struct and then <code>free</code> it"}], "answers": [{"comments": [{"owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "edited": false, "score": 0, "creation_date": 1536176186, "post_id": 52191712, "comment_id": 91334309, "body": "<b>because that would lead to use after free bug</b> This would only be the case if the main loop exited <i>before</i> the thread, correct?  I call <code>pthread_join</code> in the main loop to wait for the completion of this loop.  <b>What you need to do is transfer the ownership of this buffer to the thread.</b>  No - this structure is used for communication between the main loop and this thread, so this is not what I want to do."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "edited": false, "score": 1, "creation_date": 1536176723, "post_id": 52191712, "comment_id": 91334535, "body": "@cirrusio I assume you are creating a lot of threads. Probably one for every client. In that case the main would have to save all the pointers (probably in some array) and then free it if you want to do it after <code>pthread_join</code>. Regarding the ownership, the struct can still be used by main for communication even if the ownership is with the thread. Ownership simply means who manages the buffer. Any thread can read write to it. Keeping the free (and the owner ship) with the thread makes it easy for you to track the buffers for each thread and get free&#39;d as the thread is done using it."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "edited": false, "score": 0, "creation_date": 1536176782, "post_id": 52191712, "comment_id": 91334571, "body": "You probably do not want to delay the freeing untill <b>all</b> the threads are done."}, {"owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "edited": false, "score": 0, "creation_date": 1536177390, "post_id": 52191712, "comment_id": 91334837, "body": "Thanks for the input.  This <i>is</i> the client, not the server (hence the name <code>run_client</code>) and so there is only one thread associated with this function. <b>Keeping the free (and the owner ship) with the thread makes it easy for you to track the buffers</b> OK, this makes a lot of sense.  So, going  back to the original code, this would still be something like <code>struct net_info *n_info = n</code> correct?  And then at the close of the function I would <code>free(n_info)</code>?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "edited": false, "score": 1, "creation_date": 1536177482, "post_id": 52191712, "comment_id": 91334874, "body": "@cirrusio yes, that would be the correct way. Don&#39;t use malloc inside the thread. Just call free at the end (assuming malloc was called in the main loop)."}, {"owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "edited": false, "score": 0, "creation_date": 1536177529, "post_id": 52191712, "comment_id": 91334888, "body": "Thanks, that looked manky to me anyway.  Will keep that in mind."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1536173458, "creation_date": 1536173458, "answer_id": 52191712, "question_id": 52191317, "link": "https://stackoverflow.com/questions/52191317/valgrind-indicates-a-memory-leak/52191712#52191712", "title": "Valgrind indicates a memory leak", "body": "<p>From the comments it appears that you want to pass the input struct to the client thread. \nThe leak appears because you allocate some memory and immediately discard the pointer to it. </p>\n\n<p>No, you cannot just do - </p>\n\n<pre><code>struct net_info *n_info = n;\n</code></pre>\n\n<p>and <code>free</code> the memory from the main loop, because that would lead to use after free bug.</p>\n\n<p>What you need to do is transfer the ownership of this buffer to the thread. This basically means that from the point the thread starts, the input buffer is owned by the thread and it is the thread's responsibility to <code>free</code> it. </p>\n\n<p>You need to remove the new <code>malloc</code> in the thread and just use the pointer directly. The pointer will be <code>free</code>'d after the thread is done using it. </p>\n\n<p>Also be careful that the main loop (or any other thread) should not be sharing the same buffer. This means that the main loop should <code>malloc</code> a separate buffer for every thread it creates. </p>\n"}, {"tags": [], "owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "is_accepted": false, "score": 0, "last_activity_date": 1536173811, "creation_date": 1536173811, "answer_id": 52191789, "question_id": 52191317, "link": "https://stackoverflow.com/questions/52191317/valgrind-indicates-a-memory-leak/52191789#52191789", "title": "Valgrind indicates a memory leak", "body": "<pre><code>n_info = (struct net_info *)malloc(sizeof(struct net_info));\n</code></pre>\n\n<p>You just allocated memory... and the very next line:</p>\n\n<pre><code>n_info = (struct net_info *)n;\n</code></pre>\n\n<p>You overwrite <code>n_info</code> with <code>n</code>, losing the reference to the memory you just allocated. The <code>free()</code> by the end of the function is actually freeing <code>n</code>, not the memory this <code>malloc()</code> allocated.</p>\n"}], "owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 52191712, "answer_count": 2, "score": 0, "last_activity_date": 1536173811, "creation_date": 1536171757, "question_id": 52191317, "link": "https://stackoverflow.com/questions/52191317/valgrind-indicates-a-memory-leak", "title": "Valgrind indicates a memory leak", "body": "<p>So, I have some code and Valgrind seems to indicate that there is a memory leak present but I am not seeing it.  The code in question is</p>\n\n<pre><code>void *run_client(void *n)\n{\n\n    char recv_buffer[1024];\n\n    // This is random, but right now we will allocate 5120 bytes\n    // for the data coming from the instrument.\n    const int data_size = 5120;\n    int numbytes;\n\n    struct net_info *n_info;\n    n_info = (struct net_info *)malloc(sizeof(struct net_info));\n    n_info = (struct net_info *)n;\n\n    int clientfd;\n    clientfd = init_client(&amp;n_info-&gt;cfg);\n\n    while (!*(n_info-&gt;flag))\n    {\n        // Clear the buffer every time...\n        memset(recv_buffer, 0, 1024);\n        if ((numbytes = recv(clientfd, recv_buffer, data_size - 1, 0)) == -1)\n        {\n            perror(\"recv\");\n            exit(1);\n        }\n        if (recv_buffer[0] != '{' || recv_buffer[numbytes - 1] != '\\n')\n            continue;\n\n        // remove last two bytes that are EOL indicators\n        numbytes -= 2;\n        recv_buffer[numbytes] = 0;\n\n        wclear(n_info-&gt;packet_win);\n        box(n_info-&gt;packet_win, 0, 0);\n\n        mvwprintw(n_info-&gt;packet_win, 1, 1, \"%s\", recv_buffer);\n        wrefresh(n_info-&gt;packet_win);\n    }\n\n    close(clientfd);\n    free(n_info);\n    return 0;\n}\n</code></pre>\n\n<p>I am not sure if the details are necessary, but they are provided here so that you can understand the context.  The function above  is called from <code>pthread_create</code> and listens on a specified port for data.  The string data is then posted to an ncurses window (the code is preliminary and is currently just used for testing).  The function exits when the main loop receives a request to exit and the flag in the while loop is set high.</p>\n\n<p>The message from Valgrind is </p>\n\n<pre><code>==24037== 88 bytes in 1 blocks are definitely lost in loss record 14 of 55\n==24037==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==24037==    by 0x401897: run_client (ncurses-cpc.c:60)\n==24037==    by 0x52906DA: start_thread (pthread_create.c:463)\n==24037==    by 0x57D588E: clone (clone.S:95)\n</code></pre>\n\n<p>and line 60 refers to <code>n_info = (struct net_info *)malloc(sizeof(struct net_info));</code>.  As you can see, before exiting the function requests a <code>free</code> of the memory associated with that struct before exiting.  Am I missing something?  Why is Valgrind flagging this? (the message is posted <em>after</em> the heap summary message when valgrind is run with the option <code>leak-check=yes</code>.)</p>\n"}, {"tags": ["c", "arrays", "function-pointers"], "comments": [{"owner": {"reputation": 1177, "user_id": 4802431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913d82f4ab2d30e0c3cb0937f5d10185?s=128&d=identicon&r=PG&f=1", "display_name": "William_Wilson", "link": "https://stackoverflow.com/users/4802431/william-wilson"}, "edited": false, "score": 0, "creation_date": 1536169122, "post_id": 52190678, "comment_id": 91331137, "body": "The difference is the dereferencing *, it&#39;s clear as day. Seems like we&#39;re doing your homework for you..."}, {"owner": {"reputation": 85, "user_id": 9700490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b10cdb428fcf8197bf42b2e482406?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Resal", "link": "https://stackoverflow.com/users/9700490/patrick-resal"}, "reply_to_user": {"reputation": 1177, "user_id": 4802431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913d82f4ab2d30e0c3cb0937f5d10185?s=128&d=identicon&r=PG&f=1", "display_name": "William_Wilson", "link": "https://stackoverflow.com/users/4802431/william-wilson"}, "edited": false, "score": 0, "creation_date": 1536169803, "post_id": 52190678, "comment_id": 91331521, "body": "I&#39;ve just discovered dereferencing today, could you give some more information or  could you link me good explanation ??"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536170167, "post_id": 52190678, "comment_id": 91331684, "body": "Can you please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows what you have tried?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1536170245, "post_id": 52190678, "comment_id": 91331725, "body": "Spelling \u2014 the <code>(*f)(tab[i])</code> notation was mandatory before the C90 standard; the <code>f(tab[i])</code> notation was allowed by C90.  The advantage of <code>(*f)(tab[i])</code> is that you don&#39;t accidentally head off looking for a function <code>f</code> \u2014 you can see it&#39;s a function pointer immediately.  (Of course, that assumes you don&#39;t have a colleague who delights in writing <code>(*sqrt)((*sin)(x)*(*cos)(x))</code> or other similar absurdities."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 3, "last_activity_date": 1536170444, "creation_date": 1536170444, "answer_id": 52191009, "question_id": 52190678, "link": "https://stackoverflow.com/questions/52190678/function-pointer-what-is-the-difference-between-f-and-f/52191009#52191009", "title": "Function Pointer, what is the difference between (*f) and f", "body": "<p>Your code looks as if you are invoking a function via a function pointer, and you're seeking to pass one element of an array to that function.  The pointer might be defined as:</p>\n\n<pre><code>void (*f)(int);     // Function pointer \u2014 guessed argument and return types\n</code></pre>\n\n<p>The difference between the invocations <code>(*f)(tab[i])</code> and <code>f(tab[i])</code> is spelling and history \u2014 the result is the same.</p>\n\n<p>The <code>(*f)(tab[i])</code> notation was mandatory before the C90 standard; the <code>f(tab[i])</code> notation was allowed by C90.  The advantage of <code>(*f)(tab[i])</code> is that you don't accidentally head off looking for a function <code>f</code> \u2014 you can see it's a function pointer immediately.  (Of course, that assumes you don't have a colleague who delights in writing <code>(*sqrt)((*sin)(x)*(*cos)(x))</code> or other similar valid but unconscionably obscure absurdities.)</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 3, "last_activity_date": 1536170661, "creation_date": 1536170661, "answer_id": 52191068, "question_id": 52190678, "link": "https://stackoverflow.com/questions/52190678/function-pointer-what-is-the-difference-between-f-and-f/52191068#52191068", "title": "Function Pointer, what is the difference between (*f) and f", "body": "<p>If <code>tab</code> is an array of integer, then this below statement</p>\n\n<pre><code>(*f)(tab[i])\n</code></pre>\n\n<p>is invoking a function using <strong>function pointer</strong>, where <code>f</code> is a <strong>function pointer</strong> which can points to a function which takes argument as <code>tab[i]</code>. for e.g In below code block </p>\n\n<pre><code>void print_arr(int arr_ele_value) {\n        printf(\"%d\\t\",arr_ele_value);\n}\nint main(void) {\n        int arr[] = {1,2,3,4,5},ele;\n        ele = sizeof(arr)/sizeof(arr[0]);\n        void (*f)(int); /* function pointer declaration */\n        f = print_arr; /* fun-ptr initialization */\n        for(int row = 0; row &lt; ele; row++) {\n                (*f)(arr[row]); /* calling a function through function pointer */\n        }\n        return 0;\n}\n</code></pre>\n\n<p>This</p>\n\n<pre><code>void (*f)(int);\n</code></pre>\n\n<p>is <strong>function pointer declaration</strong> which says, <code>f</code> is a function pointer which can points to a function which takes input argument as <code>int</code> and returns <code>void</code>.</p>\n\n<p>And here</p>\n\n<pre><code>f = function;\n</code></pre>\n\n<p><code>f</code> is assigned with <code>function</code> which satisfies above condition of function-pointer declaration.</p>\n\n<p>And this is how you can call a function using function pointer</p>\n\n<pre><code>(*f)(arr[row]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1536172105, "last_edit_date": 1536172105, "creation_date": 1536171427, "answer_id": 52191239, "question_id": 52190678, "link": "https://stackoverflow.com/questions/52190678/function-pointer-what-is-the-difference-between-f-and-f/52191239#52191239", "title": "Function Pointer, what is the difference between (*f) and f", "body": "<p>There is no difference nowadays for the compiler; there is only a difference for the humans.</p>\n"}], "owner": {"reputation": 85, "user_id": 9700490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b10cdb428fcf8197bf42b2e482406?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Resal", "link": "https://stackoverflow.com/users/9700490/patrick-resal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "closed_date": 1536171503, "answer_count": 3, "score": -1, "last_activity_date": 1536172105, "creation_date": 1536169008, "question_id": 52190678, "link": "https://stackoverflow.com/questions/52190678/function-pointer-what-is-the-difference-between-f-and-f", "closed_reason": "Duplicate", "title": "Function Pointer, what is the difference between (*f) and f", "body": "<p>I have a an array of int and I need to assign a function pointer,</p>\n\n<pre><code>f(tab[i]) and (*f)(tab[i])\n</code></pre>\n\n<p>What is the difference between those 2 syntax ??</p>\n"}, {"tags": ["c", "debugging", "gdb", "local-variables", "callstack"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 2, "creation_date": 1536169840, "post_id": 52190506, "comment_id": 91331546, "body": "&quot;t = &lt;optimized out&gt;&quot; is a hint that your code is compiled with optimizations turned on. After the compiler has optimized your code, it can remove your variables and greatly re-organize your code."}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "edited": false, "score": 0, "creation_date": 1536170261, "post_id": 52190506, "comment_id": 91331735, "body": "So if not on the stack, where else does the local variable be stored!?"}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1536170549, "post_id": 52190506, "comment_id": 91331844, "body": "@nos: much appreciated. So as part of optimisation, compiler would have not allocated storage for the variable <code>c</code> on the function stack. Is that what you mean?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1536170699, "post_id": 52190506, "comment_id": 91331895, "body": "Yes, that&#39;s right."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1536171037, "post_id": 52190506, "comment_id": 91332052, "body": "A variable doesn&#39;t have to be stored. The compiler has to do whatever it takes to make your program produce the result it needs to produce according to the standard. If the compiler manages to build executable code with two variables instead of three, it has every right to do that."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1536171819, "post_id": 52190506, "comment_id": 91332374, "body": "The most likely location for a local variable that isn&#39;t on the stack is in a CPU register. Another possibility (perhaps less likely these days) is an FPU register. Unless your debugger is clever enough to spot the usage of register variables, it isn&#39;t going to be able to print their values."}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536208579, "post_id": 52190506, "comment_id": 91342349, "body": "@Tim Randall: Oh... Yeah. That makes sense for the part- where else out could stored. Thank you very much."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": -1, "last_activity_date": 1536182077, "creation_date": 1536182077, "answer_id": 52193466, "question_id": 52190506, "link": "https://stackoverflow.com/questions/52190506/why-some-of-the-local-variables-are-not-listed-in-the-corresponding-stack-frame/52193466#52193466", "title": "Why some of the local variables are not listed in the corresponding stack frame when inspected using GDB?", "body": "<p>Objects local to a C function often do not appear on the stack because optimization during compilation often makes it unnecessary to store objects on the stack. In general, while an implementation of the C abstract machine may be viewed as storing objects to local to a function on the stack, the actual implementation on a real processor after compilation and optimization may be very different. In particular:</p>\n\n<ul>\n<li>An object local to a function may be created and used only inside a processor register. When there are enough processor registers to hold a function\u2019s local objects, or some of them, there is no point in writing them to memory, so optimized code will not do so.</li>\n<li>Optimization may eliminate a local object completely or fold it into other values. For example, given <code>void foo(int x) { int t = 10; bar(x+2*t); \u2026 }</code>, the compiler may merely generate code that adds an immediate value of 20 to <code>x</code>, with the result that neither 10 nor any other instantiation of <code>t</code> ever appears on stack, in a register, or even in the immediate operand of an instruction. It simply does not exist in the generated code because there was no need for it.</li>\n<li>An object local to a function may appear on the stack at one point during a function\u2019s code but not at others. And the places it appears may differ from place to place in the code. For example, with <code>{ int t = x*x; \u2026 bar(t); \u2026 t = x/3; \u2026 bar(t); \u2026 }</code>, the compiler may decide to stash the first value of <code>t</code> in one place on the stack. But the second value assigned to <code>t</code> is effectively a separate lifetime, and the compiler may stash it in another place on the stack (or not at all, per the above). In a good implementation, the debugger may be aware of these different places and display the stored value of <code>t</code> while the program counter is in a matching section of code. And, while the program counter is not in a matching section of code, <code>t</code> may effectively not exist, and the debugger could report it is optimized out at that point.</li>\n</ul>\n"}], "owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1536182077, "creation_date": 1536168232, "last_edit_date": 1536169643, "question_id": 52190506, "link": "https://stackoverflow.com/questions/52190506/why-some-of-the-local-variables-are-not-listed-in-the-corresponding-stack-frame", "title": "Why some of the local variables are not listed in the corresponding stack frame when inspected using GDB?", "body": "<p>I have a piece of code in C as shown below-</p>\n\n<p>In a .c file-</p>\n\n<pre><code>1    custom_data_type2 myFunction1(custom_data_type1 a, custom_data_type2 b)\n2    {\n3        int c=foo();\n4        custom_data_type3 t;\n5        check_for_ir_path();\n6        ...\n7        ...\n8    }\n9\n10    custom_data_type4 myFunction2(custom_data_type3 c, const void* d)\n11    {\n12        custom_data_type4 e;\n13        struct custom_data_type5 f;\n14        check_for_ir_path();\n15        ...\n16        temp = myFunction1(...);\n17        return temp;\n18    }\n</code></pre>\n\n<p>In a header file-</p>\n\n<pre><code>1    void CRASH_DUMP(int *i)\n2     __attribute__((noinline));\n3    \n4    #define INTRPT_FORCE_DUMMY_STACK    3\n5    \n6    #define check_for_ir_path() { \\\n7        if (checkfunc1() &amp;&amp; !checkfunc2()) { \\\n8            int sv = INTRPT_FORCE_DUMMY_STACK; \\\n9            ...\n10            CRASH_DUMP(&amp;sv);\\\n11        }\\\n12    }\\\n</code></pre>\n\n<p>In an unknown scenario, there is a crash.\nAfter processing the core dump using GDB, we get the call stack like -</p>\n\n<pre><code>#0  0x00007ffa589d9619 in myFunction1 [...] \n(custom_data_type1=0x8080808080808080, custom_data_type2=0x7ff9d77f76b8) at ../xxx/yyy/zzz.c:5\n\n        sv = 32761\n\n        t = &lt;optimized out&gt;\n\n\n\n#1  0x00007ffa589d8f91 in myFunction2 [...]\n\n(custom_data_type3=&lt;optimized out&gt;, d=0x7ff9d77f7748) at ../xxx/yyy/zzz.c:16\n\n        sv = 167937677\n\n        f = {\n\n          ...\n\n        }\n</code></pre>\n\n<hr>\n\n<p>If you see the function, <code>myFunction1</code> there are three local variables- <code>c</code>, <code>t</code>, <code>sv</code> (defined as part of macro definition). However, in the backtrace, in the frame 0, we see only two local variables - <code>t</code> and <code>sv</code>. And i dont see the variable <code>c</code> being listed.</p>\n\n<p>Same is the case, in the function <code>myFunction2</code>, there are three local variables - <code>e</code>, <code>f</code>, <code>sv</code>(defined as part of macro definition). However, from the backtrace, in the frame 1, we see only two local variables - <code>f</code> and <code>sv</code>. And i dont see the variable <code>e</code> being listed.</p>\n\n<p>Why is the behavior like this?</p>\n\n<p>Any non-static variable declared inside the function, should be put on the callstack during execution and which should have been listed in the backtrace full, isn't it? However, some of the local variables are missing in the backtrace. Could someone provide an explanation?</p>\n"}, {"tags": ["c", "file", "structure", "heap"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536166921, "post_id": 52190170, "comment_id": 91330128, "body": "Read documentation of <a href=\"https://en.cppreference.com/w/c/io\" rel=\"nofollow noreferrer\">C I/O functions</a>."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536166922, "post_id": 52190170, "comment_id": 91330129, "body": "With <code>students[x].name=(char*)malloc(sizeof(char*)); </code> you allocate ONE size of a pointer, which is not enough storage for the string."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536167004, "post_id": 52190170, "comment_id": 91330174, "body": "In sscanf, <code>&amp;students[x].name</code> is wrong and should just be <code>students[x].name</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536167058, "post_id": 52190170, "comment_id": 91330204, "body": "<code>strtok</code> just chops <code>buffer</code> into tokens, it does not allocate memory."}, {"owner": {"reputation": 17, "user_id": 10076095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7638fd4df66c69330ab2016bdd1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Immo", "link": "https://stackoverflow.com/users/10076095/immo"}, "edited": false, "score": 0, "creation_date": 1536168017, "post_id": 52190170, "comment_id": 91330630, "body": "How can I name what I want to do in other way, that would allow me to google it? Before I ask a question, I spend at least 20 hours on a problem. What I know how to do is: reading from stdin to struct fields, from bin file where I know length of fields, but it&#39;s all regarding 1 student."}, {"owner": {"reputation": 17, "user_id": 10076095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7638fd4df66c69330ab2016bdd1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Immo", "link": "https://stackoverflow.com/users/10076095/immo"}, "edited": false, "score": 0, "creation_date": 1536168981, "post_id": 52190170, "comment_id": 91331075, "body": "There was no topic about reading multiple structures from file, so I asked this question. I thought that if someone does not want to answer, skips this question. Now when I&#39;m downvoted to oblivion, I&#39;d need to spend another 200 hours with this 1 simple task, but my holidays are over."}, {"owner": {"reputation": 17, "user_id": 10076095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7638fd4df66c69330ab2016bdd1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Immo", "link": "https://stackoverflow.com/users/10076095/immo"}, "edited": false, "score": 0, "creation_date": 1536169108, "post_id": 52190170, "comment_id": 91331132, "body": "I don&#39;t know how to name it. But assuming, in main(): <code>struct student_t *p=malloc(100);</code>, how can I write <code>p[x].name</code> using <code>-&gt;</code>? Is it just <code>p[x]-&gt;name</code>?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536169422, "post_id": 52190170, "comment_id": 91331300, "body": "It looks like your <code>printf()</code> call is already properly formatted and it should work correctly. You don&#39;t need to use the <code>-&gt;</code> operator in this case. The easiest way to do random access with a pointer is to use the array syntax, as you did. If you wanted to use pointer arithmetic syntax as an exercise, it would look like this: <code>printf(&quot;first name: %s, index: %d\\n&quot;,(students+x)-&gt;name, (students+x)-&gt;index);</code>"}, {"owner": {"reputation": 1453, "user_id": 2018010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fwCYF.gif?s=128&g=1", "display_name": "magras", "link": "https://stackoverflow.com/users/2018010/magras"}, "edited": false, "score": 0, "creation_date": 1536169551, "post_id": 52190170, "comment_id": 91331379, "body": "Try to write function <code>student_t * read_one_student(FILE * file)</code> which allocates memory for one student and reads it from file (you said that you know how to do this). Then create an array of pointers to students and fill it in a loop using this function."}, {"owner": {"reputation": 17, "user_id": 10076095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7638fd4df66c69330ab2016bdd1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Immo", "link": "https://stackoverflow.com/users/10076095/immo"}, "reply_to_user": {"reputation": 1453, "user_id": 2018010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fwCYF.gif?s=128&g=1", "display_name": "magras", "link": "https://stackoverflow.com/users/2018010/magras"}, "edited": false, "score": 0, "creation_date": 1536169826, "post_id": 52190170, "comment_id": 91331533, "body": "@magras array of pointers like: <code>struct student_t **ptr=malloc(number_of_students);</code>? (I mean, is it a double pointer here?)"}, {"owner": {"reputation": 17, "user_id": 10076095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7638fd4df66c69330ab2016bdd1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Immo", "link": "https://stackoverflow.com/users/10076095/immo"}, "edited": false, "score": 0, "creation_date": 1536170132, "post_id": 52190170, "comment_id": 91331663, "body": "I can&#39;t use fread function (which I used for a .bin file containing lengths) because I don&#39;t know the length of words in the file, is it correct?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1536170402, "post_id": 52190170, "comment_id": 91331789, "body": "You can use <code>fread</code> like: read one character, check if it&#39;s comma, if it isn&#39;t realloc the name +1, copy the character that you read, then fread one character again. If you encounter a comma, realloc the name +1, add a null delimeter and then proceed with scanning for index."}, {"owner": {"reputation": 1453, "user_id": 2018010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fwCYF.gif?s=128&g=1", "display_name": "magras", "link": "https://stackoverflow.com/users/2018010/magras"}, "edited": false, "score": 0, "creation_date": 1536237118, "post_id": 52190170, "comment_id": 91357406, "body": "@Immo almost <code>struct student_t **ptr=malloc(number_of_students * sizeof(void*));</code> Malloc accepts size in bytes. You need to store <code>number_of_students</code> pointers each of which has size <code>sizeof(void*)</code>. Or you can follow accepted solution and allocate array of students like <code>malloc(number_of_students * sizeof(student_t)</code> and pass pointer where new student should be written into function like that: <code>void read_one_student(student_t * write_pointer, FILE * file)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1536171144, "post_id": 52190943, "comment_id": 91332099, "body": "Couple of notes: (1) <code>realloc(students, (students_cnt + 1)..</code> reallocating by <code>1</code> each time is highly inefficient. Better to allocate an initial block of <code>students</code> (say <code>alloc=2, 4 or 8;</code>) and then when <code>student_cnt == alloc</code>, realloc <code>2 x alloc</code> and update <code>alloc *= 2;</code> (2) <code>if (commapos == NULL)</code> don&#39;t exit, just skip the line with <code>continue</code>. (3) Why <code>memcpy</code>? You can <code>strcpy (students[students_cnt].name, commapos + 1);</code> and then remove the <code>&#39;\\n&#39;</code> (either way, it&#39;s up to you). (4) compare <code>&amp;line[namelen] == endptr &amp;&amp; tmp == 0</code> to fully validate the <code>strtol</code> conversion. (good effort <code>:)</code>"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536172037, "post_id": 52190943, "comment_id": 91332495, "body": "@David Thanks! (1) Good idea for optimization. But, nowadays, I stopped caring about malloc overhead. (2) Well, I decided not to skip the line as part of error handling (3) memcpy is faster, I know the string length, so no need to check if each char is zero (4) Thanks! I feel really lost as to when strtol returns errored, so I just check errno and hope for implementation that sets EINVAL ;) I feel like I should <code>(errno == ERANGE &amp;&amp; (tmp == LONG_MAX || tmp == LONG_MIN) || (errno != 0 &amp;&amp; tmp == 0) || endptr == &amp;line[namelen]</code>  to fully check for conversion errors ;) but hell, I just check errno!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1536174957, "post_id": 52190943, "comment_id": 91333754, "body": "Just remember there are 2 validations for <code>strtol</code> (1) check whether any digits were converted. <code>strtol</code> will return <code>0</code> and <code>ptr == endptr</code> if no digits were found (and <code>errno</code> is NOT set). (2) checking <code>errno</code> covers all other cases (underflow/overflow, etc..). It&#39;s a toss up here whether parsing with <code>strchr</code> and <code>strtol</code> wouldn&#39;t be better as <code>sscanf</code>. Same result either way, but <code>sscanf</code> (to a fixed buf for <code>name</code>) and validating 2 conversions took place followed by a <code>malloc</code> &amp; <code>strcpy</code> (or <code>strdup</code>) may be a bit shorter <code>:)</code>"}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1536170138, "creation_date": 1536170138, "answer_id": 52190943, "question_id": 52190170, "link": "https://stackoverflow.com/questions/52190170/how-to-load-multiple-clones-of-structure-from-file-c/52190943#52190943", "title": "How to load multiple &quot;clones&quot; of structure from FILE? C", "body": "<p>C is a little harsh. I use GNU <a href=\"https://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\">getline</a> below,  which may be not portable, which you might end up implementing yourself. I use <code>stdin</code> for input <code>FILE *</code> just for simplicity.<br>\nThe program reads the students list into the <code>students</code> array. Then I sort the students by comparing indexes, then by name, each time with printing out.<br>\nYour code is a bit of a mishmash - try to write a separate function for loading a single student, you don't need <code>char ptr[students]</code> just a single <code>char *ptr</code> for <code>strtok</code> function. <code>strtok</code> is a little mixy, I prefer using just <code>strchr</code> mutliple times. I used <code>memcpy</code> to just copy the name from the string and remember to null delimeter it.</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;limits.h&gt;\n\nstruct student_s {\n    char *name;\n    int index;\n};\n\nstatic int students_name_cmp(const void *a, const void *b)\n{\n    const struct student_s *s1 = a;\n    const struct student_s *s2 = b;\n    return strcmp(s1-&gt;name, s2-&gt;name);\n}\n\nstatic int students_index_cmp(const void *a, const void *b)\n{\n    const struct student_s *s1 = a;\n    const struct student_s *s2 = b;\n    return s1-&gt;index - s2-&gt;index;\n}\n\nint main()\n{\n    struct student_s *students = NULL;\n    size_t students_cnt = 0;\n    FILE *fp = stdin;\n    size_t read;\n    char *line = NULL;\n    size_t len = 0;\n\n    // for each line\n    while ((read = getline(&amp;line, &amp;len, fp)) != -1) {\n\n        // resize students!\n        students = realloc(students, (students_cnt + 1) * sizeof(*students));\n        // handle erros            \n        if (students == NULL) {\n            fprintf(stderr, \"ERROR allocating students!\\n\");\n            exit(-1);\n        }\n\n        // find the comma in the line\n        const const char * const commapos = strchr(line, ',');\n        if (commapos == NULL) {\n            fprintf(stderr, \"ERROR file is badly formatted!\\n\");\n            exit(-1);\n        }\n        // student has the neme between the start to the comma adding null delimeter\n        const size_t namelen = (commapos - line) + 1;\n        // alloc memory for the name and copy it and null delimeter it\n        students[students_cnt].name = malloc(namelen * sizeof(char));\n        // handle errors\n        if (students[students_cnt].name == NULL) {\n             fprintf(stderr, \"ERROR allocating students name!\\n\");\n             exit(-1);\n        }\n        memcpy(students[students_cnt].name, line, namelen - 1);\n        students[students_cnt].name[namelen] = '\\0';\n\n        // convert the string after the comma to the number\n        // strtol (sadly) discards whitespaces before it, but in this case it's lucky\n        // we can start after the comma\n        errno = 0;\n        char *endptr;\n        const long int tmp = strtol(&amp;line[namelen], &amp;endptr, 10);\n        // handle strtol errors\n        if (errno) {\n            fprintf(stderr, \"ERROR converting student index into number\\n\");\n            exit(-1);\n        }\n        // handle out of range values, I use INT_MIN/MAX cause index is int, no better idea, depends on application\n        if (tmp &lt;= INT_MIN || INT_MAX &lt;= tmp) {\n            fprintf(stderr, \"ERROR index number is out of allowed range\\n\");\n            exit(-1);\n        }\n        students[students_cnt].index = tmp;\n\n        // handle the case when the line consist of any more characters then a string and a number\n        if (*endptr != '\\n' &amp;&amp; *endptr != '\\0') {\n            fprintf(stderr, \"ERROR there are some rabbish characters after the index!\");\n            exit(-1);\n        }\n\n        // finnally, increment students count\n        students_cnt++;\n    }\n    if (line) {\n        free(line);\n    }\n\n    // sort by index\n    qsort(students, students_cnt, sizeof(*students), students_index_cmp);\n\n    // print students out sorted by index\n    printf(\"Students sorted by index:\\n\");\n    for (size_t i = 0; i &lt; students_cnt; ++i) {\n        printf(\"student[%zu] = '%s', %d\\n\", i, students[i].name, students[i].index);\n    }\n\n    // now we have students. We can sort them.\n    qsort(students, students_cnt, sizeof(*students), students_name_cmp);\n\n    // print students out sorted by name\n    printf(\"Students sorted by name:\\n\");\n    for (size_t i = 0; i &lt; students_cnt; ++i) {\n        printf(\"student[%zu] = '%s', %d\\n\", i, students[i].name, students[i].index);\n    }\n\n    // free students, lucky them!\n    for (size_t i = 0; i &lt; students_cnt; ++i) {\n        free(students[i].name);\n    }\n    free(students);\n\n    return 0;\n}\n</code></pre>\n\n<p>For the following input on stdin:</p>\n\n<pre><code>Achilles, 9999\nHector, 9998\nMenelaos, 9997\n</code></pre>\n\n<p>the program outputs:</p>\n\n<pre><code>Students sorted by index:\nstudent[0] = 'Menelaos', 9997\nstudent[1] = 'Hector', 9998\nstudent[2] = 'Achilles', 9999\nStudents sorted by name:\nstudent[0] = 'Achilles', 9999\nstudent[1] = 'Hector', 9998\nstudent[2] = 'Menelaos', 9997\n</code></pre>\n\n<p>A test version available <a href=\"https://onlinegdb.com/SkEkwcTPX\" rel=\"nofollow noreferrer\">here on onlinegdb</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 10076095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7638fd4df66c69330ab2016bdd1b03?s=128&d=identicon&r=PG&f=1", "display_name": "Immo", "link": "https://stackoverflow.com/users/10076095/immo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 52190943, "answer_count": 1, "score": -3, "last_activity_date": 1536170138, "creation_date": 1536166777, "last_edit_date": 1536167620, "question_id": 52190170, "link": "https://stackoverflow.com/questions/52190170/how-to-load-multiple-clones-of-structure-from-file-c", "title": "How to load multiple &quot;clones&quot; of structure from FILE? C", "body": "<p>I want to learn how to load multiple structures (many students: name, surname, index, address...) from a <strong>text file</strong> looking like:</p>\n\n<pre><code>Achilles, 9999\nHector, 9998\nMenelaos, 9997\n... and so on\n</code></pre>\n\n<p>Struct can be like:</p>\n\n<pre><code>struct student_t {\n    char *name;\n    int index;\n}\n</code></pre>\n\n<p>My attempt (doesn't work; I'm not even sure if fgets+sscanf is a considerable option here):</p>\n\n<pre><code>int numStudents=3; //to simplify... I'd need a function to count num of lines, I imagine\nint x, y=1000, err_code=1;\n\nFILE *pfile = fopen(\"file.txt\", \"r\");\nif(pfile==0) {return 2;}\n\nSTUDENT* students = malloc(numStudents * sizeof *students);\n\nchar buffer[1024];\nchar *ptr[numStudents];\nfor (x = 0; x &lt; numStudents; x++){ //loop for each student\n    students[x].name=malloc(100); //allocation of each *name field \n    fgets(buffer, 100, pfile); //reads 1 line containing data of 1 student, to buffer\n    if(x==0) *ptr[x] = strtok(buffer, \",\");//cuts buffer into tokens: ptr[x] for *name\n    else *ptr[x] = strtok(NULL, \",\"); //cuts next part of buffer\n    sscanf(ptr[x], \"%19s\", students[x].name); //loads the token to struct field\n    *ptr[y] = strtok(NULL, \",\"); //cuts next part of the buffer\n    students[y].index = (int)strtol(ptr[y], NULL, 10); //loads int token to struct field\n    *buffer='\\0';//resets buffer to the beginning for the next line from x++ fgets...\n    y++;//the idea with y=1000 is that I need another pointer to each struct field right?\n}\n\nfor (x = 0; x &lt; numStudents; x++)\n    printf(\"first name: %s, index: %d\\n\",students[x].name, students[x].index);\n\nreturn students;\n</code></pre>\n\n<p>Then printf it to see what was loaded. (to simplify my real structure that has 6 fields). I know a nice method to load 1 student from user input...(<a href=\"https://stackoverflow.com/questions/51343178/how-to-scanf-commas-but-with-commas-not-assigned-to-a-structure-c\">How to scanf commas, but with commas not assigned to a structure? C</a>) however to load multiple, I have this idea but I'm not sure if it's too clumsy to work or just terrybly written.<br/></p>\n\n<p>Later I'd try <strong>to sort students by name</strong> , and perhaps even try to do a realloc buffer that increases it's size along with new students being loaded to buffer... and then to sort what'd been loaded... but I imagine that first I need to load it from the file to buffer and from buffer to fill structure, to be able to sort it then?...</p>\n\n<p>Thanks A LOT for all the help!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3572, "user_id": 412044, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WZZOJ.png?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/412044/martin"}, "edited": false, "score": 1, "creation_date": 1536166734, "post_id": 52190131, "comment_id": 91330038, "body": "Try using codeblocks&#39; debugger."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 3, "creation_date": 1536166825, "post_id": 52190131, "comment_id": 91330081, "body": "You haven&#39;t allocated space for the name, only for a pointer to a string. Also, <code>&amp;players[0]</code> has type &quot;pointer to struct player&quot;, not pointer to char. You should crank up your compiler&#39;s warning level!"}, {"owner": {"reputation": 45, "user_id": 9050469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdSyjSDGQpw/AAAAAAAAAAI/AAAAAAAAAHc/Hd30iDnVwes/photo.jpg?sz=128", "display_name": "Tin Serti\u0107", "link": "https://stackoverflow.com/users/9050469/tin-serti%c4%87"}, "edited": false, "score": 0, "creation_date": 1536166994, "post_id": 52190131, "comment_id": 91330171, "body": "Should I redifine struct player like this? typedef struct {     char name[20];     }player;  What should i do? &amp;players[0] works. String comparison is the part that is not working"}, {"owner": {"reputation": 45, "user_id": 9050469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdSyjSDGQpw/AAAAAAAAAAI/AAAAAAAAAHc/Hd30iDnVwes/photo.jpg?sz=128", "display_name": "Tin Serti\u0107", "link": "https://stackoverflow.com/users/9050469/tin-serti%c4%87"}, "edited": false, "score": 0, "creation_date": 1536167213, "post_id": 52190131, "comment_id": 91330274, "body": "Last 9 or 10 lines are not working? When i comment them, everything is fine? How should i make them work?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9050469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdSyjSDGQpw/AAAAAAAAAAI/AAAAAAAAAHc/Hd30iDnVwes/photo.jpg?sz=128", "display_name": "Tin Serti\u0107", "link": "https://stackoverflow.com/users/9050469/tin-serti%c4%87"}, "edited": false, "score": 0, "creation_date": 1536168005, "post_id": 52190385, "comment_id": 91330625, "body": "You&#39;re right, i will change that. I was translating the Croatian code on english, so i forgot that part. But still the function strncmp does not work."}], "tags": [], "owner": {"reputation": 3076, "user_id": 4427870, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh5.googleusercontent.com/-gZZq2ak7cZU/AAAAAAAAAAI/AAAAAAAAAI4/u9zvfaYPRgw/photo.jpg?sz=128", "display_name": "Rishav", "link": "https://stackoverflow.com/users/4427870/rishav"}, "is_accepted": false, "score": 0, "last_activity_date": 1536167755, "creation_date": 1536167755, "answer_id": 52190385, "question_id": 52190131, "link": "https://stackoverflow.com/questions/52190131/string-comparison-in-cgame-project/52190385#52190385", "title": "String comparison in C(Game project)", "body": "<p>I don't know C that much but shouldn't there be a <code>.name</code> in the first input?</p>\n\n<p>It should look like I suppose:</p>\n\n<pre><code>printf(\"What's your name?\\n\");\nscanf(\"%s\",&amp;players[0].name);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 9050469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdSyjSDGQpw/AAAAAAAAAAI/AAAAAAAAAHc/Hd30iDnVwes/photo.jpg?sz=128", "display_name": "Tin Serti\u0107", "link": "https://stackoverflow.com/users/9050469/tin-serti%c4%87"}, "edited": false, "score": 0, "creation_date": 1536168214, "post_id": 52190460, "comment_id": 91330710, "body": "It worked! Thank you! I changed this; char * name; to char name[20]; and this char * starter; to this char starter[100];"}, {"owner": {"reputation": 45, "user_id": 9050469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdSyjSDGQpw/AAAAAAAAAAI/AAAAAAAAAHc/Hd30iDnVwes/photo.jpg?sz=128", "display_name": "Tin Serti\u0107", "link": "https://stackoverflow.com/users/9050469/tin-serti%c4%87"}, "edited": false, "score": 0, "creation_date": 1536168304, "post_id": 52190460, "comment_id": 91330766, "body": "Thank you very much! I am a newbie, so i didn&#39;t knew that!"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": true, "score": 0, "last_activity_date": 1536168061, "creation_date": 1536168061, "answer_id": 52190460, "question_id": 52190131, "link": "https://stackoverflow.com/questions/52190131/string-comparison-in-cgame-project/52190460#52190460", "title": "String comparison in C(Game project)", "body": "<p>You need to have some memory for <code>char *starter</code> to point at. </p>\n\n<p>Here's your mistake.</p>\n\n<pre><code>char * starter;\nscanf(\"%s\",&amp;starter);\n</code></pre>\n\n<p>also here;</p>\n\n<pre><code>typedef struct {\nchar * name;\n}player;\n</code></pre>\n\n<p>Instead try this;</p>\n\n<pre><code>typedef struct {\nchar name[100];\n}player;\n\nchar starter[100];\nscanf(\"%s\",starter);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9050469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdSyjSDGQpw/AAAAAAAAAAI/AAAAAAAAAHc/Hd30iDnVwes/photo.jpg?sz=128", "display_name": "Tin Serti\u0107", "link": "https://stackoverflow.com/users/9050469/tin-serti%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 52190460, "answer_count": 2, "score": 0, "last_activity_date": 1536170380, "creation_date": 1536166616, "last_edit_date": 1536170380, "question_id": 52190131, "link": "https://stackoverflow.com/questions/52190131/string-comparison-in-cgame-project", "title": "String comparison in C(Game project)", "body": "<p>I am making a little game, in which I would like to make string comparison, to compare 2 strings, and if they are equal I would like to print it out.:</p>\n\n<p>I included <code>stdio.h</code> and <code>string.h</code> I use <em>codeblocks</em>.\nI tried to run the code, but codeblocks says </p>\n\n<blockquote>\n  <p>code.exe has stopped working</p>\n</blockquote>\n\n<p>Could someone help me? \nThe code looks like this:</p>\n\n<pre><code>int main(void)\n{\n    typedef struct {\n        char * name;\n    } player;\n\n    int player_number;\n    player players[100];\n\n    printf(\"What's your name?\\n\");\n    scanf(\"%s\",&amp;players[0].name);\n\n    printf(\"How many players are playing the game?\\n\");\n    scanf(\"%d\", &amp;player_number);\n\n\n    printf(\"Can you name your friends?\\n\");\n    int d;\n    for(d=1;d&lt;player_number;d++)\n    {\n        scanf(\"%s\", &amp;players[d].name);\n    }\n\n    printf(\"Who is starting the game?\\n\");\n    char * starter;\n    scanf(\"%s\",&amp;starter);\n\n    int e;\n    for(e=0;e&lt;player_number;e++)\n    {\n        if(strncmp(players[e].name, starter, 10)==0)\n        {\n            printf(\"%s is starting the game\",starter);\n            break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "networking"], "comments": [{"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 3, "creation_date": 1536166618, "post_id": 52190039, "comment_id": 91329985, "body": "Why not just Google for libnet source code?  It&#39;s freely available.  For example: <a href=\"https://fossies.org/dox/libnet-libnet-1.2/\" rel=\"nofollow noreferrer\">fossies.org/dox/libnet-libnet-1.2</a>"}, {"owner": {"reputation": 19, "user_id": 9493627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b8b94dcd82a543a2ed21655bdc5cdb?s=128&d=identicon&r=PG&f=1", "display_name": "just_a_tiny_fish", "link": "https://stackoverflow.com/users/9493627/just-a-tiny-fish"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1536167450, "post_id": 52190039, "comment_id": 91330392, "body": "It&#39;s a good idea, but I would still like to know how to read the assembly for the referenced functions. If not for libnet, then for research&#39;s sake."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536167558, "post_id": 52190039, "comment_id": 91330435, "body": "What do you mean with &quot;read the assembly&quot;? Read the reference manual for the CPU/SoC/MCU you use and work through the code as everyone else had to. And why is this tagged C if you are asing about Assembler?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1536167559, "post_id": 52190039, "comment_id": 91330436, "body": "huh?  Single-step into it with a debugger (preferably into the 2nd or later call so you don&#39;t get lost in the PLT / lazy dynamic loading code), or disassemble the shared library, or set a breakpoint on the library function.  Or use <code>gcc -static</code> so all the library code will be part of your executable, if you have a static version of the library."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1536171126, "post_id": 52190039, "comment_id": 91332088, "body": "@just_a_tiny_fish There is no &quot;the assembly code&quot; for these functions.   Someone (usually your distributor) used a C compiler to translate the library&#39;s source code into assembly and assembled it into machine code.  Every C compiler might generate different assembly in each of its versions, so it is hard to say how exactly the code in your copy of the library looks.  Perhaps try disassembling the <code>libnet.so</code> shared object in <code>&#47;usr&#47;lib</code>, it&#39;s where the machine code is."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9493627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b8b94dcd82a543a2ed21655bdc5cdb?s=128&d=identicon&r=PG&f=1", "display_name": "just_a_tiny_fish", "link": "https://stackoverflow.com/users/9493627/just-a-tiny-fish"}, "edited": false, "score": 0, "creation_date": 1536181648, "post_id": 52193261, "comment_id": 91336546, "body": "Thanks, that was really helpful."}, {"owner": {"reputation": 1780, "user_id": 715363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a863a21a7ba2588adc3fc69d4949110b?s=128&d=identicon&r=PG", "display_name": "wkz", "link": "https://stackoverflow.com/users/715363/wkz"}, "reply_to_user": {"reputation": 19, "user_id": 9493627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b8b94dcd82a543a2ed21655bdc5cdb?s=128&d=identicon&r=PG&f=1", "display_name": "just_a_tiny_fish", "link": "https://stackoverflow.com/users/9493627/just-a-tiny-fish"}, "edited": false, "score": 0, "creation_date": 1536181855, "post_id": 52193261, "comment_id": 91336630, "body": "@just_a_tiny_fish cool! If you feel I&#39;ve answered your question, please consider marking it as an accepted solution (the green check mark)."}], "tags": [], "owner": {"reputation": 1780, "user_id": 715363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a863a21a7ba2588adc3fc69d4949110b?s=128&d=identicon&r=PG", "display_name": "wkz", "link": "https://stackoverflow.com/users/715363/wkz"}, "is_accepted": true, "score": 1, "last_activity_date": 1536180862, "creation_date": 1536180862, "answer_id": 52193261, "question_id": 52190039, "link": "https://stackoverflow.com/questions/52190039/cant-find-assembly-for-pre-written-functions/52193261#52193261", "title": "can&#39;t find assembly for pre-written functions", "body": "<p>GDB is your friend in situations like this. You don't say anything about what platform you're on, the following example works on Ubuntu, but should work similarly on other distributions.</p>\n\n<p>First, make sure that you have debug-symbols for libnet installed:</p>\n\n<pre><code>sudo apt install libnet1-dbg\n</code></pre>\n\n<p>Find out where libnet is installed:</p>\n\n<pre><code>~$ dpkg -L libnet1 | grep \\.so\n/usr/lib/x86_64-linux-gnu/libnet.so.1.7.0\n/usr/lib/x86_64-linux-gnu/libnet.so.1\n</code></pre>\n\n<p>Open it (or your own application) with GDB:</p>\n\n<pre><code>~$ gdb /usr/lib/x86_64-linux-gnu/libnet.so.1.7.0\nReading symbols from /usr/lib/x86_64-linux-gnu/libnet.so.1.7.0...Reading symbols from /usr/lib/debug//usr/lib/x86_64-linux-gnu/libnet.so.1.7.0...done.\ndone.\n</code></pre>\n\n<p>Use the <code>disassemble</code> command to inspect anything you like:</p>\n\n<pre><code>(gdb) disassemble libnet_build_ipv4\nDump of assembler code for function libnet_build_ipv4:\n   0x0000000000007d60 &lt;+0&gt;: push   %r15\n   0x0000000000007d62 &lt;+2&gt;: push   %r14\n   0x0000000000007d64 &lt;+4&gt;: push   %r13\n   0x0000000000007d66 &lt;+6&gt;: push   %r12\n   0x0000000000007d68 &lt;+8&gt;: push   %rbp\n   0x0000000000007d69 &lt;+9&gt;: push   %rbx\n   0x0000000000007d6a &lt;+10&gt;:    sub    $0x48,%rsp\n   0x0000000000007d6e &lt;+14&gt;:    mov    0xa8(%rsp),%rbx\n   0x0000000000007d76 &lt;+22&gt;:    mov    %edx,0x8(%rsp)\n   0x0000000000007d7a &lt;+26&gt;:    mov    %fs:0x28,%rax\n   0x0000000000007d83 &lt;+35&gt;:    mov    %rax,0x38(%rsp)\n   0x0000000000007d88 &lt;+40&gt;:    xor    %eax,%eax\n   0x0000000000007d8a &lt;+42&gt;:    mov    %ecx,0x14(%rsp)\n   0x0000000000007d8e &lt;+46&gt;:    mov    0x80(%rsp),%r14d\n   0x0000000000007d96 &lt;+54&gt;:    test   %rbx,%rbx\n   0x0000000000007d99 &lt;+57&gt;:    mov    0x98(%rsp),%r15\n   0x0000000000007da1 &lt;+65&gt;:    je     0x810a &lt;libnet_build_ipv4+938&gt;\n   0x0000000000007da7 &lt;+71&gt;:    mov    %esi,%r13d\n   0x0000000000007daa &lt;+74&gt;:    mov    0xb0(%rsp),%esi\n   0x0000000000007db1 &lt;+81&gt;:    mov    %edi,%ebp\n   0x0000000000007db3 &lt;+83&gt;:    mov    $0xd,%ecx\n   0x0000000000007db8 &lt;+88&gt;:    mov    $0x14,%edx\n   0x0000000000007dbd &lt;+93&gt;:    mov    %rbx,%rdi\n   0x0000000000007dc0 &lt;+96&gt;:    mov    %r9d,0x1c(%rsp)\n   0x0000000000007dc5 &lt;+101&gt;:   mov    %r8d,0x18(%rsp)\n   0x0000000000007dca &lt;+106&gt;:   callq  0xea10 &lt;libnet_pblock_probe&gt;\n   0x0000000000007dcf &lt;+111&gt;:   test   %rax,%rax\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---q\nQuit\n(gdb) \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9493627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b8b94dcd82a543a2ed21655bdc5cdb?s=128&d=identicon&r=PG&f=1", "display_name": "just_a_tiny_fish", "link": "https://stackoverflow.com/users/9493627/just-a-tiny-fish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 52193261, "answer_count": 1, "score": -1, "last_activity_date": 1536180862, "creation_date": 1536166177, "question_id": 52190039, "link": "https://stackoverflow.com/questions/52190039/cant-find-assembly-for-pre-written-functions", "title": "can&#39;t find assembly for pre-written functions", "body": "<p>I am a huge fan of network protocols and libnet, which is why I've been trying to imitate some network protocols that are not included by libnet. Capturing packets, imitating headers etc works so far. Now I need a way to actually write these exact packets to my network card. I've tried libnet_adv_write_rawipv4() and -link(), both won't work. I can't cull the headers with libnet_adv_cull_header() because of the stupid errors and bugs. So I figured, that the problem could be solved with a little assembly: get the assembly code for the actual libnet_build() and libnet_write() call, alter some bytes and voila: raw bytes get written to the network card. So I have written a dummy program: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;libnet.h&gt;\n\nint main() {\nlibnet_t *l;\n\n\nl = libnet_init(LIBNET_RAW4, 0, NULL);\n\n\nlibnet_build_tcp(2000, 450, 0, 1234, TH_SYN, 254, 0, NULL, LIBNET_TCP_H + 5, \n\"aaaaa\", 5, l, 0);\nlibnet_build_ipv4(LIBNET_TCP_H + LIBNET_IPV4_H + 5, 0, 1, 0, 64, 6, 0, \n2186848448, 22587584, NULL, 0, l, 0);\n\nlibnet_write(l);\nreturn 0;\n}\n</code></pre>\n\n<p>Works so far. Now I got the assembly version of the program using</p>\n\n<pre><code>gcc -o program program.c -S\n</code></pre>\n\n<p>And this is where the actual problem starts:</p>\n\n<pre><code> .LC0:\n .string    \"aaaaa\"\n .text\n .globl main\n .type  main, @function\n  main:\n .LFB2:\n .cfi_startproc\n  pushq %rbp\n.cfi_def_cfa_offset 16\n.cfi_offset 6, -16\nmovq    %rsp, %rbp\n.cfi_def_cfa_register 6\nsubq    $16, %rsp\nmovl    $0, %edx\nmovl    $0, %esi\nmovl    $1, %edi\ncall    libnet_init\nmovq    %rax, -8(%rbp)\nsubq    $8, %rsp\npushq   $0\npushq   -8(%rbp)\npushq   $5\npushq   $.LC0\npushq   $25\npushq   $0\npushq   $0\nmovl    $254, %r9d\nmovl    $2, %r8d\nmovl    $1234, %ecx\nmovl    $0, %edx\nmovl    $450, %esi\nmovl    $2000, %edi\ncall    libnet_build_tcp\naddq    $64, %rsp\nsubq    $8, %rsp\npushq   $0\npushq   -8(%rbp)\npushq   $0\npushq   $0\npushq   $22587584\npushq   $-2108118848\npushq   $0\nmovl    $6, %r9d\nmovl    $64, %r8d\nmovl    $0, %ecx\nmovl    $1, %edx\nmovl    $0, %esi\nmovl    $45, %edi\ncall    libnet_build_ipv4\naddq    $64, %rsp\nmovq    -8(%rbp), %rax\nmovq    %rax, %rdi\ncall    libnet_write\nmovl    $0, %eax\nleave\n.cfi_def_cfa 7, 8\nret\n.cfi_endproc\n.LFE2:\n.size   main, .-main\n</code></pre>\n\n<p>See this?</p>\n\n<pre><code>call    libnet_build_ipv4\n</code></pre>\n\n<p>I can't copy the assembly code of these build() or write() calls, because all there is is a reference to them. Now, where would I find the assembly code for these pre-written functions included in libnet-functions.h (libnet_build_ipv4(), libnet_build_tcp(), libnet_write()) ?????</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1536164557, "post_id": 52189636, "comment_id": 91329031, "body": "move the stuff after <code>:</code> to the next indented line."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536165868, "post_id": 52189636, "comment_id": 91329640, "body": "Note that compilation line your <code>all</code> rule uses <code>fork.o</code> but that isn&#39;t available (and the dependency is on <code>forkk.o</code>).  Usually, you&#39;d make <code>all</code> depend on <code>forkk.out</code>, and have a rule to compile <code>forkk.out</code> from <code>forkk.o</code> (or use a built-in rule to build direct from <code>forkk.c</code>)."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1536166219, "post_id": 52189636, "comment_id": 91329810, "body": "Use <a href=\"http://bashdb.sourceforge.net/remake/\" rel=\"nofollow noreferrer\">remake</a> as <code>remake -x</code> to debug your <code>Makefile</code>"}], "answers": [{"tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": false, "score": 2, "last_activity_date": 1536165193, "creation_date": 1536165193, "answer_id": 52189822, "question_id": 52189636, "link": "https://stackoverflow.com/questions/52189636/make-file-error-no-rule-to-make-target-3-needed-by-run-stop/52189822#52189822", "title": "Make File Error *** No rule to make target `3&#39;, needed by `run&#39;. Stop", "body": "<p>To be more specific on Eugene's comment, this line:</p>\n\n<pre><code>run: ./forkk.out $(H) $(C)\n</code></pre>\n\n<p>is wrong.  You've put the recipe (command to be invoked) on the same line as the target, so make thinks that the recipe command is actually a set of prerequisites.  When you run:</p>\n\n<pre><code>make H=3 C=3\n</code></pre>\n\n<p>this line expands to:</p>\n\n<pre><code>run: ./forkk.out 3 3\n</code></pre>\n\n<p>and make tries to find a way to build a prerequisite \"3\" causing the error you see.</p>\n\n<p>You want this:</p>\n\n<pre><code>run:\n        ./forkk.out $(H) $(C)\n</code></pre>\n\n<p>If you really want it to be on one line you have to use a <code>;</code> to separate the rule from the recipe line:</p>\n\n<pre><code>run: ; ./forkk.out $(H) $(C)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1536165933, "last_edit_date": 1536165933, "creation_date": 1536165293, "answer_id": 52189844, "question_id": 52189636, "link": "https://stackoverflow.com/questions/52189636/make-file-error-no-rule-to-make-target-3-needed-by-run-stop/52189844#52189844", "title": "Make File Error *** No rule to make target `3&#39;, needed by `run&#39;. Stop", "body": "<p>This rule ...</p>\n\n<blockquote>\n<pre><code>run: ./forkk.out $(H) $(C)\n</code></pre>\n</blockquote>\n\n<p>... says that the \"run\" target has <code>./forkk.out</code> and the expansions of variables <code>$(H)</code> and <code>$(C)</code> as its dependencies.  When you ask <code>make</code> to build that target -- which you do -- it first ensures that those dependencies are up to date.  Since <code>$(H)</code> and <code>$(C)</code> both expand to <code>3</code>, <code>make</code> looks in its working directory for a file named <code>3</code>.  Not finding any such file, and not having any applicable rule to build one, it bails.</p>\n\n<p>You probably meant this, instead:</p>\n\n<pre><code>run:\n     ./forkk.out $(H) $(C)\n</code></pre>\n\n<p>.  There, the <code>run</code> target has <em>no</em> dependencies, so its recipe, starting (and ending) on the next line, is executed every time that target is built.</p>\n\n<p>Do note, however, that the <code>run</code> target does have a <em>bona fide</em> dependency on <code>forkk.out</code>, which that revised rule does not express.  And that's probably just as well, because it is not a target either, so <code>make</code> does not know how to build it.  A more robust Makefile would introduce both the dependency and the target, something like this:</p>\n\n<pre><code>all: forkk.out\n\nforkk.out: forkk.o\n     gcc -Wall forkk.o -o forkk.out\n\nforkk.o: forkk.c\n     gcc -Wall -c forkk.c\n\nrun:\n     ./forkk.out $(H) $(C)\n</code></pre>\n\n<p>Note also that your <code>clean</code> rule cleans a file that none of the other rules create, and fails to clean some that the other rules do create.  It probably ought to be</p>\n\n<pre><code>clean:\n     rm -f forkk.out forkk.o\n</code></pre>\n"}], "owner": {"reputation": 96, "user_id": 6405227, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MlagIIHaQak/AAAAAAAAAAI/AAAAAAAAAUQ/f4yypBPVz7s/photo.jpg?sz=128", "display_name": "Dipesh Desai", "link": "https://stackoverflow.com/users/6405227/dipesh-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "closed_date": 1536165929, "answer_count": 2, "score": -1, "last_activity_date": 1536165933, "creation_date": 1536164356, "question_id": 52189636, "link": "https://stackoverflow.com/questions/52189636/make-file-error-no-rule-to-make-target-3-needed-by-run-stop", "closed_reason": "Not suitable for this site", "title": "Make File Error *** No rule to make target `3&#39;, needed by `run&#39;. Stop", "body": "<p>I am creating a makefile for C, I am passing two arguments via the command line. This is what I am running on the command line.</p>\n\n<pre><code>    dipesh@ubuntu:~/Desktop$ make run H=3 C=3\n</code></pre>\n\n<p>But I am getting the following error</p>\n\n<pre><code>Make File Error *** No rule to make target `3', needed by `run'.  Stop\n</code></pre>\n\n<p>This is my make file</p>\n\n<pre><code>all: forkk.o\n     gcc -Wall fork.o -o forkk.out\nforkk.o: forkk.c\n     gcc -Wall -c forkk.c\n\nrun: ./forkk.out $(H) $(C)\n\nclean:\n     rm forkk\n</code></pre>\n"}, {"tags": ["c", "windows", "linker", "main", "entry-point"], "comments": [{"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1536163672, "post_id": 52189150, "comment_id": 91328559, "body": "It depends on your tool chain whether and how you can do this. The C run-time generally requires a function with one of several type signatures, usually along the lines of <code>void (*)(void)</code>, <code>int (*)(void)</code>, <code>int (*)(int, char**)</code>, <code>int (*)(int, char**, char**)</code>. Yours does not match any of those."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 3, "creation_date": 1536163697, "post_id": 52189150, "comment_id": 91328579, "body": "Why are you trying to do this?"}, {"owner": {"reputation": 493, "user_id": 8884758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a88115ae6fac5961c636926539e19f1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rek", "link": "https://stackoverflow.com/users/8884758/d-rek"}, "reply_to_user": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1536163909, "post_id": 52189150, "comment_id": 91328705, "body": "@jwdonahue i just found out that it was possible in a book and i was curious to try"}, {"owner": {"reputation": 493, "user_id": 8884758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a88115ae6fac5961c636926539e19f1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rek", "link": "https://stackoverflow.com/users/8884758/d-rek"}, "reply_to_user": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1536163991, "post_id": 52189150, "comment_id": 91328743, "body": "@jwdonahue i used this firm because it wasa the one i found on the MSND to specify a new entry. I do have tried even other ways like <code>void test()</code> or <code>int test()</code> but the result didn&#39;t change"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536164345, "post_id": 52189150, "comment_id": 91328928, "body": "It depends upon the <a href=\"https://en.wikipedia.org/wiki/Crt0\" rel=\"nofollow noreferrer\">crt0</a> linked by your compiler"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536166059, "post_id": 52189150, "comment_id": 91329731, "body": "I thnk there is absolutely no use in this, except when you are cross-compiling, and even then should you have a run-time startup prepared that calls <code>main</code>."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1536166343, "post_id": 52189150, "comment_id": 91329861, "body": "Note BTW that <code>main</code> is <i>not</i> the program&#39;s entry point. That is the start of the run-time startup. The CRT eventually calls <code>main</code>. So your <code>ENTRY</code> instruction should point to your run-time startup. And since you did not do a run-time startup, <code>printf</code> won&#39;t work because <code>stdin</code>/<code>stdout</code> are not yet connected."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1536173129, "post_id": 52189150, "comment_id": 91332951, "body": "this symbols defined in <i>ucrt.lib</i> (x86) - so add it to linker input. the signature of entry point must be <code>int __stdcall test(void* peb)</code>"}, {"owner": {"reputation": 493, "user_id": 8884758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a88115ae6fac5961c636926539e19f1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rek", "link": "https://stackoverflow.com/users/8884758/d-rek"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1536223111, "post_id": 52189150, "comment_id": 91348802, "body": "Thanks @RbMm your suggestion did the trick! i added <code>#pragma comment(lib, &quot;ucrt.lib&quot;)</code> and changed the firm as you suggested and it worked like a charm. If you post it as an answer i&#39;ll accept it,"}], "owner": {"reputation": 493, "user_id": 8884758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a88115ae6fac5961c636926539e19f1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rek", "link": "https://stackoverflow.com/users/8884758/d-rek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "closed_date": 1536189560, "answer_count": 0, "score": 3, "last_activity_date": 1536164083, "creation_date": 1536162680, "last_edit_date": 1592644375, "question_id": 52189150, "link": "https://stackoverflow.com/questions/52189150/using-another-entry-point-instead-of-main", "closed_reason": "Needs details or clarity", "title": "Using another entry point instead of main()", "body": "<p>the question here is simple, how can i change the default start function from main to another using the windows compiler/linker?</p>\n<p>i've tried this (using <code>/SUBSYSTEM:CONSOLE</code> linker option):</p>\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n\n#pragma comment(linker, &quot;/ENTRY:\\&quot;test\\&quot;&quot;)\n\nvoid test(LPVOID asd, LPVOID var1, LPVOID var2) {\n    printf(&quot;Prova&quot;);\n    return;\n}\n</code></pre>\n<p>But the linker throws those error</p>\n<blockquote>\n<p>LNK2001 external symbol ___acrt_iob_func not resolved</p>\n<p>LNK2001 external symbol ___stdio_common_vfprintf not resolved</p>\n</blockquote>\n<p>What should i do to resolve this issue?</p>\n"}, {"tags": ["c", "linux", "limit"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "edited": false, "score": 0, "creation_date": 1536163786, "post_id": 52189060, "comment_id": 91328636, "body": "Thanks. (1) do you mean a limit can be both a compile time limit in a system, and a runtime limit on another system? (2) Do you mean that on a system, a limit may be provided in a header file, but it is not accurate, and to get an accurate limit, we must call a function, so in this case the limit is actually a runtime limit not a compile time limit?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "edited": false, "score": 0, "creation_date": 1536172312, "post_id": 52189060, "comment_id": 91332622, "body": "@Tim: 1: Yes. 2. Yes (e.g. some <code>sysconf</code> values with definitions in the header are guaranteed minimums, but actually calling <code>sysconf</code> might reveal a higher value). <code>sysconf</code>&#39;s man page is a good example of this mixed setup; the constant limits aren&#39;t guaranteed to be defined, so when they&#39;re not available you need to use <code>sysconf</code> for a run-time value. If the header defines it, that limit should <i>work</i>, but run-time querying might let your code perform better using the higher run-time determined limit."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 2, "last_activity_date": 1536162342, "creation_date": 1536162342, "answer_id": 52189060, "question_id": 52188869, "link": "https://stackoverflow.com/questions/52188869/what-are-the-definitions-of-runtime-limits-and-compile-time-limits/52189060#52189060", "title": "What are the definitions of runtime limits and compile time limits?", "body": "<p>Your original definition is already correct. If you are able to use an accurate limit from a header, then it implies that for that system, it's a compile-time limit. It could be a run-time limit on some other system, in which case the header wouldn't provide a static definition.</p>\n\n<p>Alternatively, you could think of anything for which a function exists as a run-time limit; sure, it's actually a constant value on some systems, but for portable code you'd need to use the function anyway, so it's a run-time limit that just happens to be really cheap to check on some systems (where the function can be defined to return the static value).</p>\n\n<p>Point is, there isn't one exact answer; some things are conditionally run-time or compile-time depending on the system, some things are always compile-time, some things are always run-time. It's a Venn Diagram.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1536162368, "creation_date": 1536162368, "answer_id": 52189070, "question_id": 52188869, "link": "https://stackoverflow.com/questions/52188869/what-are-the-definitions-of-runtime-limits-and-compile-time-limits/52189070#52189070", "title": "What are the definitions of runtime limits and compile time limits?", "body": "<p>@Tim not. Imagine that you have system which may have many file devices attached. Any of those may have own different limits. It can be only discovered runtime as compile time you do not know what hardware will be used. </p>\n"}, {"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 2, "last_activity_date": 1536163795, "last_edit_date": 1536163795, "creation_date": 1536163179, "answer_id": 52189321, "question_id": 52188869, "link": "https://stackoverflow.com/questions/52188869/what-are-the-definitions-of-runtime-limits-and-compile-time-limits/52189321#52189321", "title": "What are the definitions of runtime limits and compile time limits?", "body": "<p>The runtime limit, of say a full pathname may well depend on the version of the operating system.</p>\n\n<p>If you want your program to be able to run on an old system with shorter path name limits(say 128 characters), you would not want it to artificially limited on newer systems with much larger limits (say 4096) characters.</p>\n\n<p>The only way to get best behaviour is to make a system call to determine the current limit, or to adapt your code so that it can cope with longer strings if it encounters them, and properly reports system errors if too-long paths are passed to older systems.</p>\n\n<p>As PJ says, you need some flexibility anyway if you have different file systems attached that impose their own limits that you also need to handle gracefully, but they are often inside a whole-system imposed limit.</p>\n\n<p>To some extent, if you are using high level languages with dynamic string lengths and such, you are insulated from these runtime limits, but it is useful to understand that they do exist.</p>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1536163795, "creation_date": 1536161629, "last_edit_date": 1536162021, "question_id": 52188869, "link": "https://stackoverflow.com/questions/52188869/what-are-the-definitions-of-runtime-limits-and-compile-time-limits", "title": "What are the definitions of runtime limits and compile time limits?", "body": "<p>From <a href=\"https://books.google.com/books?id=_kpsAQAAQBAJ&amp;lpg=PA37&amp;ots=Fawy3-NZL_&amp;dq=if%20a%20particular%20runtime%20limit%20does%20not%20vary%20on%20a%20given%20system%2C%20it%20can%20be%20de%EF%AC%81ned%20statically%20in%20a%20header&amp;pg=PA36#v=onepage&amp;q&amp;f=false\" rel=\"nofollow noreferrer\">APUE</a></p>\n\n<blockquote>\n  <p>Many of these have been hard coded into programs or were determined\n  using ad hoc techniques. With the various standardization efforts that\n  we\u2019ve described, more portable methods are now provided to determine\n  these magic numbers and implementation-de\ufb01ned limits, greatly\n  improving the portability of software written for the UNIX\n  environment.</p>\n  \n  <p>Two types of limits are needed:</p>\n  \n  <ol>\n  <li><p>Compile-time limits (e.g., what\u2019s the largest value of a short integer?)</p></li>\n  <li><p>Runtime limits (e.g., how many bytes in a \ufb01lename?)</p></li>\n  </ol>\n  \n  <p><strong>Compile-time limits can be de\ufb01ned in headers</strong> that any program can include at compile time.  But <strong>runtime limits require the process to\n  call a function to obtain the limit\u2019s value.</strong></p>\n  \n  <p>... </p>\n  \n  <p>To further confuse things, <strong>if a particular runtime limit does not\n  vary on a given system, it  can  be  de\ufb01ned  statically  in  a \n  header.</strong> If it is not  de\ufb01ned  in  a  header, however, the\n  application  must  call  one  of  the  three conf functions  (which \n  we  describe  shortly)  to determine its value at runtime.</p>\n</blockquote>\n\n<p>At first, it seems to me that compile-time limits are defined as those which can be defined in headers, and runtime limits are defined as those which cannot.</p>\n\n<p>Then it seems to me that a runtime limit can be defined in a header too.</p>\n\n<p>So what are the definitions of runtime limits and compile time limits?</p>\n"}, {"tags": ["c", "git", "libgit2"], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 4581067, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G4R_k1wzXRE/AAAAAAAAAAI/AAAAAAAAAZo/WcAHq-NuiKA/photo.jpg?sz=128", "display_name": "Jason Haslam", "link": "https://stackoverflow.com/users/4581067/jason-haslam"}, "is_accepted": true, "score": 7, "last_activity_date": 1536185397, "creation_date": 1536185397, "answer_id": 52194002, "question_id": 52188664, "link": "https://stackoverflow.com/questions/52188664/how-can-i-create-an-empty-commit-using-libgit2/52194002#52194002", "title": "How can I create an empty commit using libgit2?", "body": "<p>Call <code>git_commit_create</code> with the same tree as the parent commit. That is:</p>\n\n<pre><code>// Get parent somehow.\ngit_commit *parent = ...;\n\n// Use the same tree as the parent.\ngit_tree *tree;\ngit_commit_tree(&amp;tree, parent);\n\n// Create the commit.\ngit_commit_create(..., tree, 1, parent);\n</code></pre>\n"}], "owner": {"reputation": 1418, "user_id": 5946921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa6d24b5cd68697ac3f92d8b7e608ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Will Da Silva", "link": "https://stackoverflow.com/users/5946921/will-da-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 52194002, "answer_count": 1, "score": 4, "last_activity_date": 1536185397, "creation_date": 1536160915, "question_id": 52188664, "link": "https://stackoverflow.com/questions/52188664/how-can-i-create-an-empty-commit-using-libgit2", "title": "How can I create an empty commit using libgit2?", "body": "<p>I've been looking over the <a href=\"https://libgit2.org/libgit2/\" rel=\"nofollow noreferrer\">libgit2 C API reference</a>, but I don't see how I could emulate the behaviour of <code>git commit --allow-empty</code>. Does libgit2 have a built-in way to create empty commits? If not, how does git create an empty commit under-the-hood, and how should I go about achieving the same behaviour using libgit2?</p>\n"}, {"tags": ["c", "struct", "casting", "standards"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536161777, "post_id": 52188655, "comment_id": 91327519, "body": "Is it type casting, or construction?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536162040, "post_id": 52188655, "comment_id": 91327656, "body": "@TimRandall no, it is not."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536162788, "post_id": 52188655, "comment_id": 91328081, "body": "@TimRandall It depends what you mean by &quot;construction&quot;. It&#39;s a source code construction in the same way that a string literal is a source code construction. It certainly is not a type cast."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536166153, "post_id": 52188655, "comment_id": 91329777, "body": "See <a href=\"https://stackoverflow.com/questions/52159776\">Possible to declare an array in function argument</a>, which references the C standard where compound literals are defined, and is itself a duplicate of <a href=\"https://stackoverflow.com/questions/36797540/\">Why can&#39;t I pass constant arrays as arguments</a>, also discussing compound literals.  I suspect there are earlier relevant Q&amp;A too, but haven&#39;t hunted them down (yet)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536167988, "post_id": 52188655, "comment_id": 91330619, "body": "<i>Many of us know</i> this is not an anonymous <code>struct</code>, but a compound literal. And there is no type casting involved."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536213691, "post_id": 52188655, "comment_id": 91344013, "body": "Note that the data passed to the function will be the same if you use <code>(struct data_s){ .p_4 = 4, .p_1 = 1, .p_3 = 2, .p_2 = 2 }</code> \u2014 the order of the data is determined by the layout of the structure when you use designated initializers."}], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 3, "last_activity_date": 1536166278, "last_edit_date": 1536166278, "creation_date": 1536161862, "answer_id": 52188936, "question_id": 52188655, "link": "https://stackoverflow.com/questions/52188655/function-argument-anonymous-struct/52188936#52188936", "title": "Function argument anonymous struct", "body": "<p>This is the <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5.2.5\" rel=\"nofollow noreferrer\">compound literal</a>. </p>\n\n<p>I was introduced in C99 and there is no difference between it and other constants and literals.</p>\n\n<p>From web:</p>\n\n<blockquote>\n  <p>The compound literal expression constructs an unnamed object of the\n  type specified by type and initializes it as specified by\n  initializer-list.</p>\n  \n  <p>The type of the compound literal is type (except when type is an array\n  of unknown size; its size is deduced from the initializer-list as in\n  array initialization).</p>\n  \n  <p>The value category of a compound literal is lvalue (its address can be\n  taken).</p>\n  \n  <p>The unnamed object to which the compound literal evaluates has static\n  storage duration if the compound literal occurs at file scope and\n  automatic storage duration if the compound literal occurs at block\n  scope (in which case the object's lifetime ends at the end of the\n  enclosing block).</p>\n</blockquote>\n"}], "owner": {"reputation": 593, "user_id": 4599151, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/1050011471682240/picture?type=large", "display_name": "Karolis Milie\u0161ka", "link": "https://stackoverflow.com/users/4599151/karolis-milie%c5%a1ka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "accepted_answer_id": 52188936, "answer_count": 1, "score": 1, "last_activity_date": 1536166278, "creation_date": 1536160891, "question_id": 52188655, "link": "https://stackoverflow.com/questions/52188655/function-argument-anonymous-struct", "title": "Function argument anonymous struct", "body": "<p><br>\nMany of us know that this works:</p>\n\n<pre><code>struct data_s\n{\n    uint32_t p_1;\n    uint32_t p_2;\n    uint32_t p_3;\n    uint32_t p_4;\n};\n\nvoid foo(struct data_s data)\n{\n    printf(\"p1: %d\\r\\n\", data.p_1);\n    printf(\"p2: %d\\r\\n\", data.p_2);\n    printf(\"p3: %d\\r\\n\", data.p_3);\n    printf(\"p4: %d\\r\\n\", data.p_4);\n}\n\nint main(void)\n{\n    foo((struct data_s){\n            .p_1 = 1,\n            .p_2 = 2,\n            .p_3 = 3,\n            .p_4 = 4});\n}\n</code></pre>\n\n<p>I have seen this many times, but now cannot find anything in C reference manual about it. Is this construct standard or implementation defined?</p>\n\n<p>Also, that type casting is kinda odd, because it is more like \"I will tell compiler how and what to allocate and how to arrange it\" than \"cast that type to this type\". Will the data layout in memory of the argument passed to function will be exactly the same as of object created by <code>struct data_s obj;</code>?</p>\n"}, {"tags": ["java", "c", "fmi"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3745385, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae95d6ed34337b937720b20df30c95a4?s=128&d=identicon&r=PG&f=1", "display_name": "xTrmwYs", "link": "https://stackoverflow.com/users/3745385/xtrmwys"}, "edited": false, "score": 0, "creation_date": 1536761303, "post_id": 52237103, "comment_id": 91542124, "body": "Thank you. My understanding of the FMU model was actually wrong. The description from the manual helped, and this works with both with the plugin I used, and JavaFMI."}, {"owner": {"reputation": 43, "user_id": 3745385, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae95d6ed34337b937720b20df30c95a4?s=128&d=identicon&r=PG&f=1", "display_name": "xTrmwYs", "link": "https://stackoverflow.com/users/3745385/xtrmwys"}, "edited": false, "score": 0, "creation_date": 1536761356, "post_id": 52237103, "comment_id": 91542163, "body": "&quot;All variable values of an FMU are identified with a variable handle called \u201cvalue reference\u201d. The handle is defined in the modelDescription.xml file (as attribute \u201cvalueReference\u201d in element \u201cScalarVariable\u201d). Element \u201cvalueReference\u201d might not be unique for all variables. If two or more variables of the same base data type (such as fmi2Real) have the same valueReference, then they have identical values but other parts of the variable definition might be different&quot;"}], "tags": [], "owner": {"reputation": 21, "user_id": 3589445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b85b9bc87e7144724591272651541cb?s=128&d=identicon&r=PG&f=1", "display_name": "laht", "link": "https://stackoverflow.com/users/3589445/laht"}, "is_accepted": false, "score": 1, "last_activity_date": 1536423420, "creation_date": 1536423420, "answer_id": 52237103, "question_id": 52188553, "link": "https://stackoverflow.com/questions/52188553/jfmi-number-of-scalar-variables-passing-string/52237103#52237103", "title": "JFMI, number of scalar variables, passing string", "body": "<p>Isn't JFMI only for FMI 1.0?</p>\n\n<p>Anyway, I would consider using either JavaFMI or FMI4j as these are still actively maintained and available from maven central. </p>\n\n<p>JavaFMI supports FMI 1.0 and 2.0 for Co-simulation and has a more stable API.\nFMI4j is faster (JNI vs. JNA) and supports FMI 2.0 for Co-Simulation and Model-Exchange. </p>\n"}], "owner": {"reputation": 43, "user_id": 3745385, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae95d6ed34337b937720b20df30c95a4?s=128&d=identicon&r=PG&f=1", "display_name": "xTrmwYs", "link": "https://stackoverflow.com/users/3745385/xtrmwys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536423420, "creation_date": 1536160568, "question_id": 52188553, "link": "https://stackoverflow.com/questions/52188553/jfmi-number-of-scalar-variables-passing-string", "title": "JFMI, number of scalar variables, passing string", "body": "<p>I am using JFMI (<a href=\"https://ptolemy.berkeley.edu/java/jfmi/\" rel=\"nofollow noreferrer\">https://ptolemy.berkeley.edu/java/jfmi/</a>) to communicate with FMI (in C) from Java.</p>\n\n<p>For the communication, I use existing functions (e.g., simulation.write(inPort.getName()).with((Double) value);).</p>\n\n<p>However, I face two problems:</p>\n\n<ul>\n<li>fmuTemplate.c contains global variables for configuring numbers of float, integer, and other variables. However, the configuration does not seem logical to me. For example, if I write that the NUMBER_OF_REALS is 2, and the NUMBER_OF_INTEGERS is 2, I can only use two times write to real/float or two times to integers. If I want to use 4 scalar variables (2 float, 2 int), I need to define NUMBER_OF_REALS 2 and NUMBER_OF_INTEGERS 4. As if the order is incremental.</li>\n<li>Writting strings from Java to FMI seems to crash the program (\"invalidState:fmi2SetString: Illegal call sequence.\").</li>\n</ul>\n\n<p>Did you perhaps encounter similar issues? If yes, could you please share your experience?</p>\n\n<p>Best regards and thank you.</p>\n"}, {"tags": ["c", "avro"], "answers": [{"tags": [], "owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "is_accepted": false, "score": 0, "last_activity_date": 1536177028, "last_edit_date": 1536177028, "creation_date": 1536161198, "answer_id": 52188734, "question_id": 52188432, "link": "https://stackoverflow.com/questions/52188432/write-nullable-item-to-avro-record-in-avro-c/52188734#52188734", "title": "Write nullable item to avro record in Avro C", "body": "<p>See the following code which sets the union branch and the int branch:</p>\n\n<p>Note: For union, you need to set the relevant branch before you set the data. The union branch index starts from 0 and is called discriminant. For the int field at this example the discriminant is 0 (as it is the first field). For the null branch the discriminant is 1 (as it is the second field). It is more common having the null as the first branch, however, I followed your question example.</p>\n\n<pre><code>#include \"avro.h\"\nvoid main()\n{\n    const char schema_json[] =\n        \"{ \\\"type\\\":\\\"record\\\", \\\"name\\\":\\\"foo\\\",\"\n        \"\\\"fields\\\": [\"\n        \"{ \\\"name\\\": \\\"nullableint\\\", \\\"type\\\":[\\\"int\\\",\\\"null\\\"]}\"\n        \"]}\";\n    avro_schema_t my_schema;\n    avro_schema_from_json( schema_json, 0, &amp;my_schema, NULL );\n    avro_datum_t  my_record = avro_datum_from_schema( my_schema );\n    avro_datum_t  my_int_field = NULL;\n    avro_datum_t  branch = NULL;\n    char  *json = NULL;\n\n    //get the int field\n    avro_record_get( my_record, \"nullableint\", &amp;my_int_field );\n\n    //set the int branch on this field\n    avro_union_set_discriminant( my_int_field, 0, &amp;branch );\n    //set value of 100 at this int branch\n    avro_int32_set( branch, 100 );\n    //convert the datum record data to json\n    avro_datum_to_json( my_record, 1, &amp;json );\n    printf( \"got json for int branch: %s\\n\", json );\n\n    //get the int field\n    avro_record_get( my_record, \"nullableint\", &amp;my_int_field );\n    //set the null branch on this field\n    avro_union_set_discriminant( my_int_field, 1, &amp;branch );\n    //convert the datum record data to json\n    avro_datum_to_json( my_record, 1, &amp;json );\n    printf( \"got json for null branch: %s\\n\", json );\n\n}\n</code></pre>\n\n<p>I printed the data as json for better examination of the results. output of this program is </p>\n\n<pre><code>got json for int branch: {\"nullableint\": {\"int\": 100}}\ngot json for null branch: {\"nullableint\": null}\n</code></pre>\n\n<p>BTW, the convention is to have the null branch as the first branch, having </p>\n\n<pre><code>\"{ \\\"name\\\": \\\"nullableint\\\", \\\"type\\\":[\\\"null\\\",\\\"int\\\"]}\"\n</code></pre>\n\n<p>and <strong>not</strong>  </p>\n\n<pre><code>\"{ \\\"name\\\": \\\"nullableint\\\", \\\"type\\\":[\\\"int\\\",\\\"null\\\"]}\"\n</code></pre>\n\n<p>see this cite from avro specification: <a href=\"https://avro.apache.org/docs/1.8.2/spec.html\" rel=\"nofollow noreferrer\">https://avro.apache.org/docs/1.8.2/spec.html</a></p>\n\n<blockquote>\n  <p>(Note that when a default value is specified for a record field whose type is a union, the type of the default value must match the first element of the union. Thus, for unions containing \"null\", the \"null\" is usually listed first, since the default value of such unions is typically null.)</p>\n</blockquote>\n"}], "owner": {"reputation": 21361, "user_id": 3834415, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pdydZ.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3834415/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536177028, "creation_date": 1536160231, "question_id": 52188432, "link": "https://stackoverflow.com/questions/52188432/write-nullable-item-to-avro-record-in-avro-c", "title": "Write nullable item to avro record in Avro C", "body": "<p>Schema: </p>\n\n<pre><code>const char schema[] = \n    \"{ \\\"type\\\":\\\"record\\\", \\\"name\\\":\\\"foo\\\",\"\n    \"\\\"fields\\\": [\"\n        \"{ \\\"name\\\": \\\"nullableint\\\", \\\"type\\\":[\\\"int\\\",\\\"null\\\"]}\"\n    \"]}\";\n</code></pre>\n\n<p>Setting the schema: </p>\n\n<pre><code>avro_datum_t foo_record = avro_record(schema);\n</code></pre>\n\n<p>Setting the nullable datum up: </p>\n\n<pre><code>avro_datum_t nullableint = avro_int32(1);\n</code></pre>\n\n<p>Set the item: </p>\n\n<pre><code>int err = avro_record_set(foo_record,\"nullableint\",nullableint);\n</code></pre>\n\n<p>Write the item:</p>\n\n<pre><code>int err2 = avro_file_writer_append(avro_writer, foo_record);\n</code></pre>\n\n<hr>\n\n<p>And there is an error. Somehow, I must set the branch of my nullable entry, yet I see no functions that will do this. </p>\n\n<p>How do I set this value to either <code>null</code> or an int? </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "edited": false, "score": 3, "creation_date": 1536160240, "post_id": 52188403, "comment_id": 91326583, "body": "It is just initializing a volatile integer pointer to NULL.  The address 0 (NULL) is a special address/value used to indicate that the pointer doesn&#39;t point to anything so it should not be used (dereferenced)."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1536160446, "post_id": 52188403, "comment_id": 91326717, "body": "It&#39;s an <i>assignment</i> of one pointer -- the right hand side <code>(int *)0x0</code> to another pointer the left hand side <code>p</code> with a volatile type qualifier.  So, no, <code>p</code> is not a pointer to a pointer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1536161538, "post_id": 52188403, "comment_id": 91327400, "body": "To make this worse, there&#39;s actually many systems where address 0 is a valid register. Long time ago I had some bug where a null pointer access bug made a microcontroller GPIO go haywire. Sometimes C simply decides to shoot you in the foot."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "edited": false, "score": 0, "creation_date": 1536162753, "post_id": 52188403, "comment_id": 91328057, "body": "@Marker Strictly speaking, it&#39;s an incorrect way of initializing <code>p</code> to <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.3.2.3p3\" rel=\"nofollow noreferrer\">a null pointer constant.</a>  The cast to <code>int *</code> does not result in a standard null pointer constant - only an integer zero value or an integer zero value cast to <code>void *</code> are null pointer constants by the C standard.  Note also that <code>NULL</code>, while also a null pointer constant, does not have to have a zero value, as Lundin mentions above.  IMO the late addition to the C standard of zero values as null pointer constants is a sop to poor code."}, {"owner": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536196955, "post_id": 52188403, "comment_id": 91340059, "body": "@AndrewHenle, I&#39;m curious, in which of the following statements does p not ultimately get set to the same value?  int* p = (int*)0;  int *p = (void *)0; int *p = 0;"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "edited": false, "score": 0, "creation_date": 1536225247, "post_id": 52188403, "comment_id": 91350210, "body": "@Marker How do you know <code>int *</code> and <code>void *</code> have the same internal representation? <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.2.5p28\" rel=\"nofollow noreferrer\">They don&#39;t have to.</a> Did you know that <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.3.2.3p1\" rel=\"nofollow noreferrer\">you can&#39;t even cast a function pointer to <code>void *</code></a> in strictly-conforming C code?"}, {"owner": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536234635, "post_id": 52188403, "comment_id": 91355840, "body": "@AndrewHenle, as I said, I&#39;m just curious.  On what platforms (in C/C++) does the pointer ultimately not get assigned the to same value?  Now you&#39;ve also made me curious, on what C/C++ platforms do &quot;int *&quot; and &quot;void *&quot; not have the same internal representation?  I see from your links what the spec says, but on what platforms does this this actually happen?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "edited": false, "score": 0, "creation_date": 1536248994, "post_id": 52188403, "comment_id": 91365102, "body": "@Marker <a href=\"http://c-faq.com/null/machexamp.html\" rel=\"nofollow noreferrer\">Quite a few in fact:</a> &quot;Older, word-addressed Prime machines were also notorious for requiring larger byte pointers (char *&#39;s) than word pointers (int *&#39;s)... Some 64-bit Cray machines represent int * in the lower 48 bits of a word; char * additionally uses some of the upper 16 bits to indicate a byte address within a word.&quot;  Those are a couple of cases where a cast to <code>( int * )</code> can produce a different result than a cast to <code>void *</code>, which by the C standard has the same representation as <code>char *</code>. Thus <code>(int *)0</code> is not a &quot;null pointer constant&quot;."}, {"owner": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536255895, "post_id": 52188403, "comment_id": 91368557, "body": "@AndrewHenle, interesting, thanks.  Sounds like mostly older and/or more obscure (certainly not mainstream) machines so maybe only a few percent though still true.  I have worked on a number of different platforms over the years (Motorola, Intel, Microchip, ARM) and never encountered that.   BTW, I never said (int *)0 was a &quot;null pointer constant&quot;; for readability and maintainability, I have always used NULL which should be (I hope) defined appropriately the current compiler/platform."}], "answers": [{"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1536175752, "post_id": 52188703, "comment_id": 91334119, "body": "Please remove first para. I don&#39;t see where there is enough information in the question for you to make the intuitive leap that having a pointer that points to address zero makes sense or not for this particular question. It depends on the compiler and tool chain and the target hardware. <a href=\"https://stackoverflow.com/questions/2761360/could-i-ever-want-to-access-the-address-zero\" title=\"could i ever want to access the address zero\">stackoverflow.com/questions/2761360/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/2759845/why-is-address-zero-used-for-the-null-pointer\" title=\"why is address zero used for the null pointer\">stackoverflow.com/questions/2759845/&hellip;</a>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1536176711, "post_id": 52188703, "comment_id": 91334532, "body": "@RichardChambers the standard defines NULL pointer this way 6.3.2.3. Making the NULL pointer volatile does not make any sense. If the system have a valid address which can be accessed by cast of zero to the pointer - it is an implementation exception from the rule  <code>.I fa n invalid  v alue  has  been  assigned  to  the  pointer ,the  beha vior  of  the  unary * operator  is undefined</code> and"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1536176731, "post_id": 52188703, "comment_id": 91334543, "body": "<code>Among  the  in valid  v alues  for  dereferencing  a  pointer  by  the  unary * operator  are  a  **null  pointer**  ,a n address inappropriately aligned for the type of object pointed to, and the address of an object after the end of its lifetime.</code>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536190360, "post_id": 52188703, "comment_id": 91338867, "body": "@P__J__: There exist platforms which map hardware registers starting at address zero.  A quality implementation intended for low-level programming on such an implementation will process a request to write <code>*((uint16_t *volatile)0)</code> as a request to perform a 16-bit write to address zero, with whatever effect that happens to have."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536190567, "post_id": 52188703, "comment_id": 91338912, "body": "@supercat . As I wrote it is an implementation exception."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536190983, "post_id": 52188703, "comment_id": 91338984, "body": "@P__J__: It&#39;s not really an exception from the rule.  The rule says that implementations can do anything they want.  Quality implementations suitable for low-level programming will want to process it like any other <code>volatile</code> (the <code>volatile</code> is important because quality implementations, even for platforms where address zero is meaningful, may squawk at attempts to write to that address with an lvalue that isn&#39;t qualified <code>volatile</code>).  Processing behavior usefully is a subcategory of &quot;do whatever they want&quot;, not an exception to it."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536191780, "post_id": 52188703, "comment_id": 91339096, "body": "@supercat please. NULL pointer as standard says is not dereferenvable. If zero address is valid the implementation should define another not referencable  NULL pointer. Something which cannot be referenced - by definition is not side effects prone.  So the volatile NULL pointer does not make any sense but syntactically is valid of course."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536205604, "post_id": 52188703, "comment_id": 91341761, "body": "@P__J__: All the Standard says about violation of runtime constraints is that it does not specify any requirements or guarantees about what implementations do in response.  As with all forms of UB, implementations are free to offer whatever guarantees they see fit in cases where the Standard imposes no requirements."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1536161373, "last_edit_date": 1536161373, "creation_date": 1536161053, "answer_id": 52188703, "question_id": 52188403, "link": "https://stackoverflow.com/questions/52188403/what-does-this-complex-expression-using-volatile-pointers-and-memory-allocation/52188703#52188703", "title": "What does this complex expression using volatile, pointers and memory allocation does under the hood?", "body": "<p><code>volatile</code> NULL pointer does not have too much sense as no one is going to dereference it.</p>\n\n<p>But if I make this expression to have more sense ( this is STM32 microcontroller specific example)</p>\n\n<pre><code> volatile uint32_t *GPIOA_CRL = (volatile uint32_t *)0x40010800UL;\n</code></pre>\n\n<p>I declare the <code>volatile</code> pointer <code>GPIO_CLR</code> to the <code>uint32_t</code> object. The assignment casts the address of this hardware register defined by the unsigned long constant to the pointer type.</p>\n\n<p><code>0x40010800UL</code> - address of the hardware register</p>\n\n<p><code>(volatile uint32_t *)</code> - converts the unsigned long address to the pointer</p>\n\n<p>Then I can set or read the value of this register.</p>\n\n<p>Why have I defined this pointer as <code>volatile</code>? Because it can be changed by the hardware and compiler will not know about it. So volatile will force the compiler to read the value stores under this address before every use (when i dereference this pointer) and store it after every change. Otherwise the compiler may optimize those reads and writes as it will see no effect of it in the normal program execution path.</p>\n"}, {"tags": [], "owner": {"reputation": 259, "user_id": 2710319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62e82d1d25764466572d0aa49b0b2c5?s=128&d=identicon&r=PG", "display_name": "HeLLo", "link": "https://stackoverflow.com/users/2710319/hello"}, "is_accepted": true, "score": 1, "last_activity_date": 1536174143, "creation_date": 1536174143, "answer_id": 52191848, "question_id": 52188403, "link": "https://stackoverflow.com/questions/52188403/what-does-this-complex-expression-using-volatile-pointers-and-memory-allocation/52191848#52191848", "title": "What does this complex expression using volatile, pointers and memory allocation does under the hood?", "body": "<p>Let`s analyze this line.</p>\n\n<p><code>volatile int * p;</code> declares a pointer to a <code>volatile int</code>.  A <code>volatile int</code> is from the storage and semantics a normal <code>int</code>.  But <code>volatile</code> instructs the compiler, that its value could change anytime or has other side effects.</p>\n\n<p>On the right side of the assignment you have <code>(int *) 0x0</code>.  Here you tell the compiler, that it should assume a pointer to <code>int</code> which points to the address <code>0x0</code>.</p>\n\n<p>The full assignment <code>volatile int * p = (int *) 0x0;</code> assigns <code>p</code> the value <code>0x0</code>.  So in total you told the compiler, that at address <code>0x0</code> is an integer value which has side effects.  It can be access by <code>*p</code>.</p>\n\n<h2>volatile</h2>\n\n<p>You seem to be unclear what volatile means.  Take a look at this code:</p>\n\n<pre><code>int * ptr = (int *) 0x0BADC0DE;\n*ptr = 0;\n*ptr = 1;\n</code></pre>\n\n<p>An optimizing compiler would take a short look on this code and say: <em>Setting <code>*ptr</code> to <code>0</code> has no effect.  So we will skip this line and will only assign <code>1</code> immediately to safe some execution time and shrink the binary at the same time.</em></p>\n\n<p>So effectively the compiler would only compile the following code:</p>\n\n<pre><code>int * ptr = (int *) 0x0BADC0DE;\n*ptr = 1;\n</code></pre>\n\n<p>Normally this is OK, but when we are talking about memory mapped IOs, things get different.</p>\n\n<p>A memory mapped IO is some hardware that can be manipulated by accessing special RAM addresses.  A very simple example would be an output -- a simple wire coming out of your processor.</p>\n\n<p>So let's assume, that at the address <code>0x0BADC0DE</code> is a memory mapped output.  And when we write <code>1</code> to it, this output is set to high and when we write <code>0</code> the output is set to low.</p>\n\n<p>When the compiler skips the first assignment, the output is not changed.  But we want to signalize another component something with a rising edge.  In this case we want to get rid of the optimization.  And one common way to do this, is to use the <code>volatile</code> keyword.  It instructs the compiler that it can't check every aspect of read or write accesses to this register.</p>\n\n<pre><code>volatile int * ptr = (int *) 0x0BADC0DE;\n*ptr = 0;\n*ptr = 1;\n</code></pre>\n\n<p>Now the compiler will not optimize the accesses to <code>*ptr</code> and we are able to signalize a rising edge to an outside component.</p>\n\n<p>Memory mapped IOs are important in programming embedded systems, operating systems and drivers.  Another use case for the <code>volatile</code> keyword would be shared variables in parallel computing (that in addition to the <code>volatile</code> keyword would need some kind of mutex of semaphore to restrict simultaneous access to these variables).</p>\n"}], "owner": {"reputation": 145, "user_id": 9439673, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209247576366109/picture?type=large", "display_name": "Ari", "link": "https://stackoverflow.com/users/9439673/ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 1, "accepted_answer_id": 52191848, "answer_count": 2, "score": 1, "last_activity_date": 1536174143, "creation_date": 1536160112, "question_id": 52188403, "link": "https://stackoverflow.com/questions/52188403/what-does-this-complex-expression-using-volatile-pointers-and-memory-allocation", "title": "What does this complex expression using volatile, pointers and memory allocation does under the hood?", "body": "<p>I know that people have already answered what volatile is and that (int *) is just casting but I cannot understand what really goes under the hood in this expression: <code>volatile int *p = (int *)0x0</code></p>\n\n<p>So we have a pointer p to an int that can obviously have its value changed unexpectedly. We assign it another pointer that points to the memory address 0? So is it a pointer to a pointer or am I making it more complex than it should be? I would really appreciate it if you could provide a simple sketch like this as it helps me understand.</p>\n\n<p><a href=\"https://i.stack.imgur.com/iFd4V.png\" rel=\"nofollow noreferrer\">Sketch</a></p>\n"}, {"tags": ["c", "recursion", "powerset"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 8, "creation_date": 1536160004, "post_id": 52188290, "comment_id": 91326438, "body": "What is the problem? &quot;Roadblock&quot; is not a technical term."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1536160037, "post_id": 52188290, "comment_id": 91326459, "body": "Where is the version of your code that is a &quot;pure recursive&quot;? The code you&#39;ve included has the for loop still"}, {"owner": {"reputation": 55, "user_id": 8554942, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0fbe4b3b18e13d1266ec028e9a4a3dd8?s=128&d=identicon&r=PG&f=1", "display_name": "TricksterJoe", "link": "https://stackoverflow.com/users/8554942/tricksterjoe"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536160556, "post_id": 52188290, "comment_id": 91326798, "body": "@Jabberwocky i simply dont know how to go from here. chris, i am aware, i simply can&#39;t understand how to go from here to pure recursive."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536161038, "post_id": 52188290, "comment_id": 91327091, "body": "What happens when you run the program? Please read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1536161158, "post_id": 52188290, "comment_id": 91327164, "body": "Hint: changing just the <code>for (int j = 0; j &lt;= pos; j++) printf(&quot;%d &quot;, p[j]);</code> part into a pure recursive function would be something like <code>PrintRec(0, pos, p); void PrintRec(int j, int end, int* p) { if (j &gt; end) return; printf(&quot;%d &quot;, p[j]); PrintRec(j + 1, end, p); }</code>"}, {"owner": {"reputation": 55, "user_id": 8554942, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0fbe4b3b18e13d1266ec028e9a4a3dd8?s=128&d=identicon&r=PG&f=1", "display_name": "TricksterJoe", "link": "https://stackoverflow.com/users/8554942/tricksterjoe"}, "edited": false, "score": 0, "creation_date": 1536161725, "post_id": 52188290, "comment_id": 91327486, "body": "Jabber, the program is working and is displaying the result as intended."}, {"owner": {"reputation": 55, "user_id": 8554942, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0fbe4b3b18e13d1266ec028e9a4a3dd8?s=128&d=identicon&r=PG&f=1", "display_name": "TricksterJoe", "link": "https://stackoverflow.com/users/8554942/tricksterjoe"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1536162099, "post_id": 52188290, "comment_id": 91327689, "body": "@500-InternalServerError thanks! this example helped a lot!"}, {"owner": {"reputation": 55, "user_id": 8554942, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0fbe4b3b18e13d1266ec028e9a4a3dd8?s=128&d=identicon&r=PG&f=1", "display_name": "TricksterJoe", "link": "https://stackoverflow.com/users/8554942/tricksterjoe"}, "edited": false, "score": 0, "creation_date": 1536162984, "post_id": 52188290, "comment_id": 91328180, "body": "I have updated my question"}], "answers": [{"comments": [{"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1536246387, "post_id": 52189908, "comment_id": 91363429, "body": "the function that generates the powerset should not be coupled with the function that prints the result - this is known as a side effect and you should learn to nip these in the bud sooner than later."}], "tags": [], "owner": {"reputation": 55, "user_id": 8554942, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0fbe4b3b18e13d1266ec028e9a4a3dd8?s=128&d=identicon&r=PG&f=1", "display_name": "TricksterJoe", "link": "https://stackoverflow.com/users/8554942/tricksterjoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1536165584, "creation_date": 1536165584, "answer_id": 52189908, "question_id": 52188290, "link": "https://stackoverflow.com/questions/52188290/turning-a-recursive-function-with-for-loop-to-pure-recursive/52189908#52189908", "title": "Turning a recursive function with for loop, to pure recursive", "body": "<p>I finally managed to figured it out, here is the answer for anybody who cares:</p>\n\n<pre><code>void main()\n{\n    int arr[] = { 1,2,3 };\n    int n = sizeof(arr) / sizeof(arr[0]);\n    int temp[4];\n    powerSet(arr, temp, n, 0, 0);\n}\n\nvoid powerSet(int* arr, int* p, int n, int pos, int index)\n{\n    if (index &gt;= n)\n    {\n        return;\n    }\n    p[pos] = arr[index];\n    PrintRec(0, pos, p);\n    powerSet(arr, p, n, pos + 1, index + 1);\n    powerSet(arr, p, n, pos, index+1);\n\n}\nvoid PrintRec(int j, int end, int* p)\n{\n    if (j &gt; end)\n    {\n        printf(\"\\n\");\n        return;\n    }\n    printf(\"%d \", p[j]);\n    PrintRec(j + 1, end, p);\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1\n1 2\n1 2 3\n1 3\n2\n2 3\n3\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 8554942, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0fbe4b3b18e13d1266ec028e9a4a3dd8?s=128&d=identicon&r=PG&f=1", "display_name": "TricksterJoe", "link": "https://stackoverflow.com/users/8554942/tricksterjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1536165609, "creation_date": 1536159747, "last_edit_date": 1536165609, "question_id": 52188290, "link": "https://stackoverflow.com/questions/52188290/turning-a-recursive-function-with-for-loop-to-pure-recursive", "title": "Turning a recursive function with for loop, to pure recursive", "body": "<p>I have made this function to print  powerset within a given array,\nI Inherently built the function with for loop as a base, and then convert it to pure recursive, but i seem to hit a roadbloack.</p>\n\n<p>here's the function:</p>\n\n<pre><code>void powerSet(int* arr, int* p, int n, int pos, int index)\n{\n    if (index == n)\n    {\n        return;\n    }\n    for (int i = index; i&lt;n; i++)\n    {\n        p[pos] = arr[i];\n\n        for (int j = 0; j &lt;= pos; j++)\n            printf(\"%d \", p[j]);\n        printf(\"\\n\");\n\n        powerSet(arr, p, n, pos + 1, i + 1);\n    }\n}\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>here is my code so far, for some reason, it only prints out</p>\n\n<pre><code>1\n1 2\n1 2 3\n1 2 3 4\n1 2 3 4 5\n</code></pre>\n\n<p>snippet:</p>\n\n<pre><code>void powerSet(int* arr, int* p, int n, int pos, int index)\n{\n    if (index == n)\n    {\n        return;\n    }\n    p[pos] = arr[index];\n    PrintRec(0, pos, p);\n    powerSet(arr, p, n, pos + 1, index + 1);\n}\nvoid getSubSet(int*arr, int*p, int n, int i, int end)\n{\n    if (i &gt; end)\n        return;\n    powerSet(arr, p, n, i, end);\n    getSubSet(arr, p, n, i + 1, end);\n}\nvoid PrintRec(int j, int end, int* p)\n{\n    if (j &gt; end)\n    {\n        printf(\"\\n\");\n        return;\n    }\n    printf(\"%d \", p[j]);\n    PrintRec(j + 1, end, p);\n}\n</code></pre>\n\n<p>main:</p>\n\n<pre><code>int arr[] = { 1,2,3,4,5 };\nint n = sizeof(arr) / sizeof(arr[0]);\nint temp[5];\ngetSubSet(arr, temp, n, 0, 0);\n</code></pre>\n\n<p>EDIT: Posted the solution!</p>\n"}, {"tags": ["c", "opengl", "draw"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 2, "creation_date": 1536156827, "post_id": 52187007, "comment_id": 91324242, "body": "Have you tried looping through a different range of values for <code>i</code>? What about adding a constant offset value to <code>theta</code>?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1536157184, "post_id": 52187007, "comment_id": 91324465, "body": "&quot;I&#39;ve tried modifying the code to tilt the circle, but it doesn&#39;t work&quot; can you show us the original code and your modification?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 2, "creation_date": 1536158069, "post_id": 52187007, "comment_id": 91325044, "body": "Have you considered using <a href=\"https://en.cppreference.com/w/c/numeric/math/atan2\" rel=\"nofollow noreferrer\"><code>atan2</code></a> instead of calculating the angle in two steps? It <i>&quot;computes the arc tangent of y/x using the signs of arguments to determine the correct quadrant&quot;</i>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536161040, "post_id": 52187007, "comment_id": 91327092, "body": "That seems to be a math/geometry, not a programming problem. Should be explained in every middle school math book."}, {"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 1, "creation_date": 1536189980, "post_id": 52187007, "comment_id": 91338791, "body": "I&#39;m glad you found a solution to your problem. However, an actual answer/solution should <b>not</b> be edited into your Question. In general, you should <a href=\"https://stackoverflow.com/posts/52187007/edit\">edit</a> the Question to <i>clarify the Question</i>, but not to include an Answer within the Question. You should create your own Answer with the code you used to solve your problem, then accept it (the system may require a 48 hour delay prior to accepting your own answer). When you have solved the problem yourself, <a href=\"//stackoverflow.com/help/self-answer\">answering your own question is encouraged</a>."}], "answers": [{"tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1536997040, "last_edit_date": 1536997040, "creation_date": 1536160301, "answer_id": 52188463, "question_id": 52187007, "link": "https://stackoverflow.com/questions/52187007/drawing-a-diagonal-semicircle-in-opengl/52188463#52188463", "title": "Drawing a diagonal semicircle in OpenGL", "body": "<p>I recommend to calculate the angle to the start point and the angle to the end point by <code>atan2</code>.<br>\nInterpolate the angle between the start angle and the end angle and draw a line along the corresponding points on the circe:</p>\n\n<pre><code>float ang_start, ang_end, theta, x, y;\n\nang_start = atan2( pts[0].y, pts[0].x );\nang_end   = atan2( pts[1].y, pts[1].x );\nif ( ang_start &gt; ang_end )\n    ang_start -= 2.0f * M_PI;\n\nglBegin(GL_LINE_STRIP);\n\nfor(int i = 0; i &lt;= circle_points; i++)\n{\n    float w = (float)i / (float)circle_points;\n    float theta = ang_start + w * ( ang_end - ang_start );\n\n    x = radius * cos(theta);\n    y = radius * sin(theta);\n\n    glVertex2f(x, y);\n}\n\nglEnd(); \n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 7848802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3cedbc391a8672e95b83105a154f806?s=128&d=identicon&r=PG&f=1", "display_name": "Uncle_Timothy", "link": "https://stackoverflow.com/users/7848802/uncle-timothy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 52188463, "answer_count": 1, "score": 1, "last_activity_date": 1537087136, "creation_date": 1536156027, "last_edit_date": 1537087136, "question_id": 52187007, "link": "https://stackoverflow.com/questions/52187007/drawing-a-diagonal-semicircle-in-opengl", "title": "Drawing a diagonal semicircle in OpenGL", "body": "<p>I'm trying to draw a diagonal semicircle. So far I've only been able to draw ones that begin and end on a horizontal or vertical axis, like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/j4zEj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j4zEj.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've tried modifying the code to tilt the circle, but it doesn't work. Can someone please tell me where I've gone wrong, this is infuriating!</p>\n\n<pre><code>float theta, tanTheta, x, y, dx, dy;\nint circle_points = 1000, radius = 70;\n\nglBegin(GL_POLYGON);\n\n    for(int i = 0; i &lt; circle_points; i++)\n    {\n        dx = pts[1].x - pts[0].x;\n        dy = pts[1].y - pts[0].y;\n\n        tanTheta = tan(dy / dx);\n\n        // get the inverse\n        theta = atan(tanTheta);\n\n        x = radius * cos(theta);\n        y = radius * sin(theta);\n\n        glVertex2f(x, y);\n    }\n\nglEnd();\n</code></pre>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536155728, "post_id": 52186846, "comment_id": 91323520, "body": "You are freeing <code>node</code> in a loop <code>SIZE_OF_CHILD</code> times."}, {"owner": {"reputation": 91, "user_id": 9003793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef15c34d254337904beb14e28c3b8c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Elvin Pang", "link": "https://stackoverflow.com/users/9003793/elvin-pang"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536155886, "post_id": 52186846, "comment_id": 91323622, "body": "OMG!! Thanks a lot! that solved my questions"}, {"owner": {"reputation": 91, "user_id": 9003793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef15c34d254337904beb14e28c3b8c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Elvin Pang", "link": "https://stackoverflow.com/users/9003793/elvin-pang"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536157736, "post_id": 52186846, "comment_id": 91324837, "body": "@EugeneSh. I would like to have a follow up questions. The program can compile now. However, when i use valgrind, it said i did not free the memory of temp. When i try to put temp at the end of the main, it said double free or corruption (out). any advice what can i do?"}, {"owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "edited": false, "score": 0, "creation_date": 1536158979, "post_id": 52186846, "comment_id": 91325702, "body": "you assign root to temp, so you have lost your reference to it and can&#39;t free it anymore, root and temp are aliases after your assignment and point to the same memory address. If you free them both, you will get a double free error."}, {"owner": {"reputation": 91, "user_id": 9003793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef15c34d254337904beb14e28c3b8c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Elvin Pang", "link": "https://stackoverflow.com/users/9003793/elvin-pang"}, "edited": false, "score": 0, "creation_date": 1536159168, "post_id": 52186846, "comment_id": 91325853, "body": "if i will assign temp to root, does it mean that i dun needa malloc for the temp as temp is only a mirror of the root which is already malloc - ed. am i correct to think in this way?"}, {"owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "edited": false, "score": 0, "creation_date": 1536159352, "post_id": 52186846, "comment_id": 91325996, "body": "Yes, but I can&#39;t decide for you if you need to allocate memory or not, only that you have created aliases, or a &quot;mirror&quot; as you call it."}], "owner": {"reputation": 91, "user_id": 9003793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef15c34d254337904beb14e28c3b8c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Elvin Pang", "link": "https://stackoverflow.com/users/9003793/elvin-pang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536157672, "creation_date": 1536155548, "last_edit_date": 1536157672, "question_id": 52186846, "link": "https://stackoverflow.com/questions/52186846/cs50-pset5-unload-problem-memory-leakage", "title": "cs50 pset5 unload problem - memory leakage", "body": "<p>I am trying to solve the cs50 pset5. I am using a tries method.</p>\n\n<p>I can insert word into the tries successfully. However, when i unload the memory, it fails. I am so stuck at the unload problem for a few days.</p>\n\n<p>When I try the unload function, it stated that Erorr Message: double free or corruption (!prev): 0x000000000205d010 ***</p>\n\n<p>It is probably due to my unload function, but i have drawn out the logic. It seems fine to me. Anyone has any idea where to amend?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n#define LENGTH 45\n#define SIZE_OF_CHILD 27\n\ntypedef struct Node {\n    bool is_word;\n    struct Node* child[SIZE_OF_CHILD];\n} Node;\n\n\nNode* root;\nNode* temp;\n\nNode* create_node(Node* node);\nvoid test();\nint cal_key(char c);\nNode* insert(const char* word);\nvoid unload(Node* node);\n\nint main() {\n    root = malloc(sizeof(Node));\n    if (root == NULL) {\n        exit(0);\n    }\n\n    root = create_node(root);\n    temp = malloc(sizeof(Node));\n        if (temp == NULL) {\n        exit(0);\n    }\n\n    test();\n\n}\n\n// **************** function to create a node *******************\nNode* create_node(Node* node) {\n    node-&gt;is_word = false;\n    for (int i = 0; i &lt; SIZE_OF_CHILD; i++) {\n        node-&gt;child[i] = NULL;\n    }\n    return node; \n}\n\n//************* calculate the key value ************\n// Assume that the input is in lower case\nint cal_key(char c) {\n    if (isalpha(c)) {\n        if (islower(c)) {\n             return c - 'a';\n        }\n        else {\n            return c + 32 -'a';\n        }\n    }\n    else {\n        return SIZE_OF_CHILD - 1;\n    }\n}\n\n//*************** function to insert an item in the the node ***********\nNode* insert(const char* word) {\n    int str_len = strlen(word);\n    temp = root;\n    int key;\n    for (int i = 0; i &lt; str_len; i++) {\n        key = cal_key(word[i]);\n        if (temp-&gt;child[key] == NULL) {\n            Node* node = malloc(sizeof(Node));  \n            if (node == NULL) {\n                fprintf(stderr, \"Error in creating node\\n\");\n                exit(0);\n            }\n            node = create_node(node);\n            temp-&gt;child[key] = node;\n        }\n\n        temp = temp-&gt;child[key];\n    }\n    temp-&gt;is_word = true;\n    return root;\n}\n\n\n//***************** function to unload a function ********************\nvoid unload(Node* node) {\n    // This is to find the last node\n    for (int i = 0; i &lt; SIZE_OF_CHILD; i++) {\n        if (node-&gt;child[i] != NULL) {\n            unload(node-&gt;child[i]);\n        }\n    free(node);\n    }\n}\n\nvoid test() {\n    root = insert(\"Peter\");\n    unload(root);\n    }\n</code></pre>\n"}, {"tags": ["c", "pointers", "casting", "initialization", "assignment-operator"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1536155788, "post_id": 52186834, "comment_id": 91323559, "body": "the question could explicitly say that &quot;I want to have a pointer that points to memory address 0x12345678&quot; and then the answer could tackle this"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1536156179, "post_id": 52186834, "comment_id": 91323848, "body": "@AnttiHaapala Yeah good call, especially since the answer already hinted of best practices when dealing with memory addresses. I added a new sentence at the top of the question."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1536155893, "post_id": 52186835, "comment_id": 91323630, "body": "You could add sth about the footnote 67) of C11: <i>The mapping functions for converting a pointer to an integer or an integer to a pointer are intended to be consistent with the addressing structure of the execution environment.</i> I.e. a quality implementation wouldn&#39;t just pull the numbers from hat ;)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1536156696, "post_id": 52186835, "comment_id": 91324158, "body": "@AnttiHaapala Added the foot note. And yeah pre-ANSI tended to treat all types as <code>int</code>. Regardless, it has never been standardized. More worrying is that some semi-modern embedded systems compilers let this kind of code through without any diagnostic messages. IIRC, some older PC compilers like Borland did this too."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536157008, "post_id": 52186835, "comment_id": 91324362, "body": "So <code>p = 0x10000000;</code> would be OK (not a constrain violation) iff <code>0x10000000</code> happened to be another implementation specific  <i>null pointer constant</i>?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1536160699, "post_id": 52186835, "comment_id": 91326876, "body": "<i>&quot;An integer constant expression with the value 0, or such an expression cast to type void *, is called a null pointer constant.&quot;</i>; you could add that, from <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.3p3\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.3.2.3p3</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536160912, "post_id": 52186835, "comment_id": 91327007, "body": "@chux A <i>null pointer</i> may have the binary representation 0x1234.... whatever, but a <i>null pointer constant</i> is either <code>0</code> or <code>(void*)0</code>. See the posted link in the answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536161252, "post_id": 52186835, "comment_id": 91327222, "body": "The spec allows <code>0u</code>, <code>0L</code>, <code>(void*) 0LL</code> as a <i>null pointer constant</i>, not only <code>0</code> as <a href=\"https://stackoverflow.com/questions/52186834/pointer-from-integer-integer-from-pointer-without-a-cast-issues/52186835?noredirect=1#comment91326855_52186835\">commented</a>.  Also the spec does not clearly disallow other forms of a <i>null pointer constant</i> - the crux of the question on the <a href=\"https://stackoverflow.com/questions/52186834/pointer-from-integer-integer-from-pointer-without-a-cast-issues/52186835?noredirect=1#comment91324362_52186835\">comment</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1536161370, "post_id": 52186835, "comment_id": 91327302, "body": "The standard calls ICE with value 0 or such cast to <code>(void*)</code> as a null pointer constant. How do you read that other values that are not <code>== 0</code> are permissible? Then the entire standard is is void because you can add anything after a list that contains <code>or</code>?!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536161464, "post_id": 52186835, "comment_id": 91327355, "body": "I believe the implementation-defined value of <code>NULL</code> in the standard refers to a compiler either using <code>0</code> or <code>(void*)0</code> as the NULL macro."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1536161546, "post_id": 52186835, "comment_id": 91327405, "body": "Well it can use <code>0LL</code> for sure, or <code>0ULL</code> or <code>&#39;\\0&#39;</code> or <code>(5-5)</code>. But not <code>42</code>. As <code>42</code> is not what the standard calls a null pointer constant."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536162809, "post_id": 52186835, "comment_id": 91328091, "body": "&quot;How do you read that other values that are not == 0 are permissible?&quot; --&gt; Had the spec been: &quot;a <i>null pointer constant</i> is an integer constant expression with the value 0, or such an expression cast to type void *&quot; (A is defined only from B or b), I would readily agree with the limited possibilities you suggest.  Yet the spec is the other way around (B or b leads to A). As I read that, other forms of <i>null pointer constant</i> are possible, even if not common in practice (C may lead to A).  Thanks for your insights."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536163005, "post_id": 52186835, "comment_id": 91328190, "body": "I am not saying you are correct or incorrect as much as wondering about the possible interpretations of the C spec.  Your assertion is reasonable and certainly true in practice - which the later point tends to win the day when divining ambiguity."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536215391, "post_id": 52186835, "comment_id": 91344747, "body": "@chux From the C99 rationale 7.17: &quot;NULL can be defined as any null pointer constant. Thus existing code can retain definitions of NULL as 0 or 0L, but an implementation may also choose to define it as (void*)0. This latter form of definition is convenient on architectures where sizeof(void*) does not equal the size of any integer type.&quot;"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 12, "last_activity_date": 1536156507, "last_edit_date": 1536156507, "creation_date": 1536155522, "answer_id": 52186835, "question_id": 52186834, "link": "https://stackoverflow.com/questions/52186834/pointer-from-integer-integer-from-pointer-without-a-cast-issues/52186835#52186835", "title": "&quot;Pointer from integer/integer from pointer without a cast&quot; issues", "body": "<p>No, it is not valid C and have never been valid C. These examples are so-called <em>constraint violation</em> of the standard. </p>\n\n<p>The standard does not allow you to initialize/assign a pointer to an integer, nor an integer to a pointer. You need to manually force a type conversion with a cast:</p>\n\n<pre><code>int* p = (int*) 0x1234;\n\nint i = (int)p;\n</code></pre>\n\n<p>If you don't use the cast, the code is not valid C and your compiler is not allowed to let the code pass without displaying a message. Specifically, this is regulated by the rules of <em>simple assignment</em>, C17 6.5.16.1 \u00a71:</p>\n\n<blockquote>\n  <p><strong>6.5.16.1 Simple assignment</strong></p>\n  \n  <p><strong>Constraints</strong></p>\n  \n  <p>One of the following shall hold:  </p>\n  \n  <ul>\n  <li>the left operand has atomic, qualified, or unqualified arithmetic type, and the right has\n  arithmetic type;  </li>\n  <li>the left operand has an atomic, qualified, or unqualified version of a structure or union type\n  compatible with the type of the right;  </li>\n  <li>the left operand has atomic, qualified, or unqualified pointer type, and (considering the type\n  the left operand would have after lvalue conversion) both operands are pointers to qualified\n  or unqualified versions of compatible types, and the type pointed to by the left has all the\n  qualifiers of the type pointed to by the right;  </li>\n  <li>the left operand has atomic, qualified, or unqualified pointer type, and (considering the type\n  the left operand would have after lvalue conversion) one operand is a pointer to an object type,\n  and the other is a pointer to a qualified or unqualified version of void, and the type pointed to\n  by the left has all the qualifiers of the type pointed to by the right;  </li>\n  <li>the left operand is an atomic, qualified, or unqualified pointer, and the right is a null pointer\n  constant; or  </li>\n  <li>the left operand has type atomic, qualified, or unqualified _Bool, and the right is a pointer.</li>\n  </ul>\n</blockquote>\n\n<p>In case of <code>int* p = 0x12345678;</code>, the left operand is a pointer and the right is an arithmetic type.<br>\nIn case of <code>int i = p;</code>, the left operand is an arithmetic type and the right is a pointer.<br>\nNeither of these fit in with any of the constraints cited above.</p>\n\n<p>As for why <code>int* p = 0;</code> works, it is a special case. The left operand is a pointer and the right is a <em>null pointer constant</em>. <a href=\"https://stackoverflow.com/a/32136460/584518\">More info about the difference between null pointers, null pointer constants and the NULL macro</a>.</p>\n\n<hr>\n\n<p>Some things of note:</p>\n\n<ul>\n<li><p>If you assign a raw address to a pointer, the pointer likely need to be <code>volatile</code> qualified, given that it points at something like a hardware register or an EEPROM/Flash memory location, that can change its contents in run-time.</p></li>\n<li><p>Converting a pointer to an integer is by no means guaranteed to work even with the cast. The standard (C17 6.3.2.3 \u00a75 and \u00a76 says):</p>\n\n<blockquote>\n  <p>An integer may be converted to any pointer type. Except as previously specified, the\n  result is implementation-defined, might not be correctly aligned, might not point to an\n  entity of the referenced type, and might be a trap representation. <sup>68)</sup></p>\n  \n  <p>Any pointer type may be converted to an integer type. Except as previously specified, the result\n  is implementation-defined. If the result cannot be represented in the integer type, the behavior is\n  undefined. The result need not be in the range of values of any integer type.</p>\n</blockquote>\n\n<p>Informative foot note:</p>\n\n<blockquote>\n  <p><sup>68)</sup> The mapping functions for converting a pointer to an integer or an integer to a pointer are intended to be consistent with the addressing structure of the execution environment.</p>\n</blockquote>\n\n<p>In addition, the address from a pointer might be larger than what will fit inside an <code>int</code>, as is the case for most 64 bit systems. Therefore it is better to use the <code>uintptr_t</code> from <code>&lt;stdint.h&gt;</code></p></li>\n</ul>\n"}], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 6, "accepted_answer_id": 52186835, "answer_count": 1, "score": 10, "last_activity_date": 1536156507, "creation_date": 1536155522, "last_edit_date": 1536156127, "question_id": 52186834, "link": "https://stackoverflow.com/questions/52186834/pointer-from-integer-integer-from-pointer-without-a-cast-issues", "title": "&quot;Pointer from integer/integer from pointer without a cast&quot; issues", "body": "<p><em>This question is meant to be a FAQ entry for all initialization/assignment between integer and pointer issues.</em></p>\n\n<hr>\n\n<p>I want to do write code where a pointer is set to a specific memory address, for example <code>0x12345678</code>. But when compiling this code with the gcc compiler, I get \"initialization makes pointer from integer without a cast\" warnings/errors:</p>\n\n<pre><code>int* p = 0x12345678;\n</code></pre>\n\n<p>Similarly, this code gives \"initialization makes integer from pointer without a cast\":</p>\n\n<pre><code>int* p = ...;\nint i =  p;\n</code></pre>\n\n<p>If I do the same outside the line of variable declaration, the message is the same but says \"assignment\" instead of \"initialization\":</p>\n\n<pre><code>p = 0x12345678; // \"assignment makes pointer from integer without a cast\"\ni = p;          // \"assignment makes integer from pointer without a cast\"\n</code></pre>\n\n<p>Tests with other popular compilers also give error/warning messages:</p>\n\n<ul>\n<li>clang says \"incompatible integer to pointer conversion\"</li>\n<li>icc says \"a value of type <code>int</code> cannot be used to initialize an entity of type <code>int*</code>\"</li>\n<li>MSVC (cl) says \"initializing <code>int*</code> differs in levels of indirection from <code>int</code>\".</li>\n</ul>\n\n<p><strong>Question: Are the above examples valid C?</strong> </p>\n\n<hr>\n\n<p>And a follow-up question:</p>\n\n<p>This does not give any warnings/errors:</p>\n\n<pre><code>int* p = 0;\n</code></pre>\n\n<p>Why not?</p>\n"}, {"tags": ["c", "linux", "shell", "autocomplete", "busybox"], "comments": [{"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 0, "creation_date": 1536166106, "post_id": 52186394, "comment_id": 91329753, "body": "FYI, when posting questions, do not put pictures of code.  Nothing in your pictures could not have been pasted in the question.  See <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question\" title=\"why not upload images of code on so when asking a question\">meta.stackoverflow.com/questions/285551/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10313893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YrHPsNdAiGs/AAAAAAAAAAI/AAAAAAAAAAY/yhv2b9Fx0qU/photo.jpg?sz=128", "display_name": "gc12138", "link": "https://stackoverflow.com/users/10313893/gc12138"}, "edited": false, "score": 0, "creation_date": 1536196366, "post_id": 52186850, "comment_id": 91339922, "body": "Do you mean that the right input and output of busybox is terminal and what i should do is to figure out which role terminal take?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 15, "user_id": 10313893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YrHPsNdAiGs/AAAAAAAAAAI/AAAAAAAAAAY/yhv2b9Fx0qU/photo.jpg?sz=128", "display_name": "gc12138", "link": "https://stackoverflow.com/users/10313893/gc12138"}, "edited": false, "score": 0, "creation_date": 1536208472, "post_id": 52186850, "comment_id": 91342318, "body": "@gc12138 no that&#39;s figured out but you need to use I/O multiplexing with select to read from and write to the pseudoterminal which is much more complex than piping to one side of the program only... this just in case it behaves differently if the <i>output</i> is not a terminal."}, {"owner": {"reputation": 15, "user_id": 10313893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YrHPsNdAiGs/AAAAAAAAAAI/AAAAAAAAAAY/yhv2b9Fx0qU/photo.jpg?sz=128", "display_name": "gc12138", "link": "https://stackoverflow.com/users/10313893/gc12138"}, "edited": false, "score": 0, "creation_date": 1536238864, "post_id": 52186850, "comment_id": 91358493, "body": "Maybe i should learn more about terminal. Thank you very much anyway!"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 0, "last_activity_date": 1536208384, "last_edit_date": 1536208384, "creation_date": 1536155567, "answer_id": 52186850, "question_id": 52186394, "link": "https://stackoverflow.com/questions/52186394/why-cant-i-simulate-auto-completion-with-t-in-busybox/52186850#52186850", "title": "Why can&#39;t I simulate auto-completion with &#39;\\t&#39; in busybox", "body": "<p>Your code fails because a pipe is not a terminal. Many programs will use <a href=\"http://man7.org/linux/man-pages/man3/isatty.3.html\" rel=\"nofollow noreferrer\"><code>isatty(3)</code></a> and alike to detect if the standard input is connected to a terminal and adjust their behaviour depending on the result.</p>\n\n<p>What you can do is to open a pseudo terminal pair using <a href=\"http://man7.org/linux/man-pages/man3/openpty.3.html\" rel=\"nofollow noreferrer\"><code>openpty(3)</code></a> and run the command with the slave duplicated to its standard input, output and error descriptors, and using the master to communicate with it. Unfortunately I have no time right now writing a full solution as it is rather intricate; I've done it ever in Python and it was tricky even there.</p>\n"}], "owner": {"reputation": 15, "user_id": 10313893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YrHPsNdAiGs/AAAAAAAAAAI/AAAAAAAAAAY/yhv2b9Fx0qU/photo.jpg?sz=128", "display_name": "gc12138", "link": "https://stackoverflow.com/users/10313893/gc12138"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 52186850, "answer_count": 1, "score": 0, "last_activity_date": 1539092022, "creation_date": 1536154225, "last_edit_date": 1539092022, "question_id": 52186394, "link": "https://stackoverflow.com/questions/52186394/why-cant-i-simulate-auto-completion-with-t-in-busybox", "title": "Why can&#39;t I simulate auto-completion with &#39;\\t&#39; in busybox", "body": "<p>I want to use \"yp\\t\\n\\0\" to run \u201cypdomainname\u201d command by exploiting auto-completion in busybox, but it failed. my code and result are below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;fcntl.h&gt;\n\n#define DEFAULT_BUSYBOX_PATH \"/bin/busybox\"\n#define MAX_BUF 1000\n\nint main()\n{\n    int fd[2];\n    pid_t pid;\n    FILE *file;\n    int status;\n\n    if(pipe(fd) &lt; 0){\n        fprintf(stderr, \"pipe error!\\n\");\n        return -1;\n    }\n\n    if((pid = fork()) &lt; 0){\n        fprintf(stderr, \"pipe error!\\n\");\n    }else if(pid == 0){     //child\n        close(fd[1]);\n\n        int fd_output;\n        fd_output = open(\"result\", O_CREAT | O_RDWR, 777);\n\n        if(fd_output != STDOUT_FILENO){\n            if(dup2(fd_output, STDOUT_FILENO) != STDOUT_FILENO)\n                fprintf(stderr, \"dup2 error to stdout\\n\");\n        }\n\n        if(fd[0] != STDIN_FILENO){\n            if(dup2(fd[0], STDIN_FILENO) != STDIN_FILENO)\n                fprintf(stderr, \"dup2 error to stdin\\n\");\n        }\n        execl(DEFAULT_BUSYBOX_PATH, DEFAULT_BUSYBOX_PATH, \"ash\", NULL);\n        close(fd[0]);\n        close(fd_output);\n        return 0;\n    }else{                  //parent\n        close(fd[0]);\n\n        char buf[MAX_BUF] = \"yp\";\n        buf[2] = '\\t';\n        buf[3] = '\\n';\n        buf[4] = '\\0';\n\n        write(fd[1], buf, strlen(buf));\n\n        close(fd[1]);\n        return 0;\n    }\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/btSb7.jpg\" rel=\"nofollow noreferrer\">Result of my code</a></p>\n\n<p>What makes me confused is that the character is not changed in function <code>lineedit_read_key()</code> in file lineedit.c and it will run the function <code>input_tab()</code> when the character is '\\t'.\n<a href=\"https://i.stack.imgur.com/a7WES.png\" rel=\"nofollow noreferrer\">input_tab will be executed when character is '\\t'</a></p>\n\n<p>Recently, i took some time to learn about terminal to simulate auto-completion, but i still failed. My code is below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;pty.h&gt;\n\n#define DEFAULT_BUSYBOX_PATH \"/bin/busybox\"\n#define MAX_BUF 1000\n#define BUFFSIZE 512\n\ntypedef void Sigfunc(int);\n\nstatic void sig_term(int);\nstatic volatile sig_atomic_t sigcaught;\n\nssize_t writen(int fd, const void *ptr, size_t n){\n    size_t nleft;\n    ssize_t nwritten;\n\n    nleft = n;\n    while(nleft &gt; 0){\n        if((nwritten = write(fd, ptr, nleft)) &lt; 0){\n            if(nleft == n){\n                return(-1); \n            }else{\n                break; \n            }\n        }else if(nwritten == 0) {\n            break;\n        }\n        nleft -= nwritten;\n        ptr += nwritten;\n    }\n    return(n - nleft);\n}\n\nSigfunc *signal_intr(int signo, Sigfunc *func){\n    struct sigaction act;\n    struct sigaction oact;\n\n    act.sa_handler = func;\n    sigemptyset(&amp;act.sa_mask);\n    act.sa_flags = 0;\n#ifdef  SA_INTERRUPT\n    act.sa_flags |= SA_INTERRUPT;\n#endif\n    if (sigaction(signo, &amp;act, &amp;oact) &lt; 0)\n        return(SIG_ERR);\n    return(oact.sa_handler);\n}\n\nint ptym_open(char *pts_name, int pts_namesz)\n{\n    char ptr[50];\n    int fdm;\n    int err;\n\n    if((fdm = posix_openpt(O_RDWR)) &lt; 0){\n        return(-1);\n    }   \n    if(grantpt(fdm) &lt; 0){ \n        goto errout;\n    }           \n    if(unlockpt(fdm) &lt; 0){  \n        goto errout;\n    }       \n\n    if(ptsname_r(fdm, ptr, 50) != 0){\n        goto errout;\n    }\n\n    strncpy(pts_name, ptr, pts_namesz);\n    pts_name[pts_namesz - 1] = '\\0';\n    return(fdm);            /* return fd of master */\nerrout:\n    err = errno;\n    close(fdm);\n    errno = err;\n    return(-1);\n}\n\nint ptys_open(char *pts_name){\n    int fds;\n\n    if((fds = open(pts_name, O_RDWR)) &lt; 0)\n        return(-1);\n\n    return(fds);\n}\n\npid_t pty_fork(int *ptrfdm, char *slave_name, int slave_namesz, const struct termios *slave_termios, const struct winsize *slave_winsize){\n    int     fdm, fds;\n    pid_t   pid;\n    char    pts_name[20];\n\n    if((fdm = ptym_open(pts_name, sizeof(pts_name))) &lt; 0){\n        fprintf(stderr, \"can't open master pty: %s, error %d\", pts_name, fdm);\n    }   \n\n    if(slave_name != NULL) {\n        strncpy(slave_name, pts_name, slave_namesz);\n        slave_name[slave_namesz - 1] = '\\0';\n    }\n\n    if((pid = fork()) &lt; 0) {\n        return(-1);\n    }else if (pid == 0) {       /* child */\n        if(setsid() &lt; 0){\n            fprintf(stderr, \"setsid error\");\n        }\n\n        if((fds = ptys_open(pts_name)) &lt; 0){\n            fprintf(stderr, \"can't open slave pty\");\n        }\n        close(fdm);     \n\n        if(slave_termios != NULL) {\n            if (tcsetattr(fds, TCSANOW, slave_termios) &lt; 0)\n                fprintf(stderr, \"tcsetattr error on slave pty\");\n        }\n        if(slave_winsize != NULL) {\n            if (ioctl(fds, TIOCSWINSZ, slave_winsize) &lt; 0)\n                fprintf(stderr, \"TIOCSWINSZ error on slave pty\");\n        }\n\n        if(dup2(fds, STDIN_FILENO) != STDIN_FILENO){\n            fprintf(stderr, \"dup2 error to stdin\");\n        }\n        if(dup2(fds, STDOUT_FILENO) != STDOUT_FILENO){\n            fprintf(stderr, \"dup2 error to stdout\");\n        }\n        if(dup2(fds, STDERR_FILENO) != STDERR_FILENO){\n            fprintf(stderr, \"dup2 error to stderr\");\n        }\n        if(fds != STDIN_FILENO &amp;&amp; fds != STDOUT_FILENO &amp;&amp; fds != STDERR_FILENO){\n            close(fds);\n        }\n        return(0);      \n    } else {                    /* parent */\n        *ptrfdm = fdm;  \n        return(pid);    \n    }\n}\n\nvoid loop(int ptym, int ignoreeof)\n{\n    pid_t   child;\n    int     nread;\n    char    buf[BUFFSIZE];\n\n    if((child = fork()) &lt; 0) {\n        fprintf(stderr, \"fork error\");\n    }else if(child == 0) {  \n        /*for ( ; ; ){\n            if((nread = read(STDIN_FILENO, buf, BUFFSIZE)) &lt; 0){\n                fprintf(stderr, \"read error from stdin\");\n            }else if(nread == 0){\n                break;\n            }\n\n            if(writen(ptym, buf, nread) != nread)\n                fprintf(stderr, \"writen error to master pty\");\n        }*/\n        char *temp_buf = \"yp\\t\\n\";\n        if(writen(ptym, temp_buf, strlen(temp_buf)) != strlen(temp_buf)){\n            fprintf(stderr, \"writen error to master pty\");\n        }\n\n        if(ignoreeof == 0){\n            kill(getppid(), SIGTERM);\n        }\n\n        exit(0);\n    }\n\n    if (signal_intr(SIGTERM, sig_term) == SIG_ERR)\n        fprintf(stderr, \"signal_intr error for SIGTERM\");\n\n    for( ; ; ){\n        if ((nread = read(ptym, buf, BUFFSIZE)) &lt;= 0){\n\n        }\n        //printf(\"nread = %d\\n\", nread);\n        if (writen(STDOUT_FILENO, buf, nread) != nread){\n            fprintf(stderr, \"writen error to stdout\");\n        }\n    }\n\n    if (sigcaught == 0){\n        printf(\"sigcaught == 0 and kill child\\n\");\n        kill(child, SIGTERM);\n    }   \n}\n\nstatic void sig_term(int signo)\n{\n    sigcaught = 1;      \n}\n\nint main(int argc, char *argv[]){\n    int fd[2];\n    pid_t pid;\n    FILE *file;\n    int status;\n    int fdm;\n    int ignoreeof;\n    char slave_name[40];\n    struct termios orig_termios;\n    struct winsize size;\n\n    pid = pty_fork(&amp;fdm, slave_name, sizeof(slave_name), &amp;orig_termios, &amp;size);\n    if(pid &lt; 0){\n        fprintf(stderr, \"fork error!\\n\");\n    }else if(pid == 0){  //child\n        if(execl(DEFAULT_BUSYBOX_PATH, DEFAULT_BUSYBOX_PATH, \"ash\", NULL) &lt; 0){\n            fprintf(stderr, \"can't execute: %s\", DEFAULT_BUSYBOX_PATH);\n        }\n        /*if(execvp(argv[1], &amp;argv[1]) &lt; 0){\n            fprintf(stderr, \"can't execute: %s\", argv[1]);\n        }*/\n    }\n\n    loop(fdm, ignoreeof);\n}\n</code></pre>\n\n<p>like the result of my first try, the result is: ash: yp: not found.</p>\n"}, {"tags": ["c++", "c", "qt", "ffmpeg", "h.264"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1536159377, "post_id": 52186274, "comment_id": 91326017, "body": "In what part of your example is there some Qt code that is not just print?"}], "answers": [{"tags": [], "owner": {"reputation": 84, "user_id": 8135119, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HnvmQAoA_8Y/AAAAAAAAAAI/AAAAAAAAAEU/fDJr7wUow3o/photo.jpg?sz=128", "display_name": "niraj gandha", "link": "https://stackoverflow.com/users/8135119/niraj-gandha"}, "is_accepted": true, "score": 1, "last_activity_date": 1537351263, "creation_date": 1537351263, "answer_id": 52403223, "question_id": 52186274, "link": "https://stackoverflow.com/questions/52186274/issue-in-opening-the-8mp-h264-stream-from-tcp-server/52403223#52403223", "title": "Issue in opening the 8MP H264 Stream from tcp server", "body": "<p>I got the answer for my above asked question. Code for the issue and getting rgb frames from raw H.264 Frame for 8MP resolution is as follows:</p>\n\n<pre><code>avcodec_register_all();\nav_register_all();\navformat_network_init();\n\nAVDictionary *options = NULL;\nAVFormatContext *refrenceFormatCtx = NULL;\nAVInputFormat *fmts = av_find_input_format(\"h264\");\nchar errorsdef[100];\nAVCodecContext* codec_ctx = NULL;\nint video_stream_index = 0;    \nSwsContext *img_convert_ctx = NULL;\nAVFrame* picture_yuv = NULL;\nAVFrame* picture_rgb = NULL;\nuint8_t* picture_buffer_rgb;\nuint8_t *rgb_image_data;\nint sizeofrgbpicture = 0;\nint initialize_rgb_requirements=1;\npicture_yuv = av_frame_alloc();\n\nav_dict_set(&amp;options, \"flags\", \"bicubic\", 0);\nav_opt_set(refrenceFormatCtx,\"f\",\"h264\", AV_OPT_SEARCH_CHILDREN);\nav_opt_set(refrenceFormatCtx,\"codec:v\",\"h264\",AV_OPT_SEARCH_CHILDREN);\nav_opt_set(refrenceFormatCtx,\"probesize\",\"32M\", AV_OPT_SEARCH_CHILDREN);\n\n// Open video file\nint err = avformat_open_input(&amp;refrenceFormatCtx,\"tcp://192.168.42.129:2226\", fmts, &amp;options);\nif (!options) {\n    int dict_count = av_dict_count(options);\n    qDebug() &lt;&lt; \"dict_count \" &lt;&lt; dict_count;\n}\nav_strerror(err,errorsdef,100);\nqDebug() &lt;&lt; \"OPening Stream error: \"&lt;&lt; err &lt;&lt; \" \"&lt;&lt; errorsdef;\nif (refrenceFormatCtx!=NULL){\n    err = avformat_find_stream_info(refrenceFormatCtx, &amp;options);\n    if( err&lt; 0){\n        av_strerror(err,errorsdef,100);\n        qDebug() &lt;&lt; \"Not able to find stream: \"&lt;&lt; err &lt;&lt; \" \"&lt;&lt; errorsdef;\n    }\n}else{\n    qDebug() &lt;&lt; \"referencecontext null\";\n    exit(1);\n}\n//search video stream\nfor (int i = 0; i &lt; (int)refrenceFormatCtx-&gt;nb_streams; i++) {\n    AVStream* s = refrenceFormatCtx-&gt;streams[i];\n    if (s-&gt;codec == NULL){\n        continue;\n    }\n    codec_ctx = (s-&gt;codec);\n    if (codec_ctx-&gt;codec_type == AVMEDIA_TYPE_VIDEO){\n        video_stream_index = i;\n    }\n}\nAVPacket packet;\nav_init_packet(&amp;packet);\n\n//open output file\nAVFormatContext* output_ctx = avformat_alloc_context();\nAVStream* stream = NULL;\n\n//start reading packets from stream and emit data pointer to slot\nav_read_play(refrenceFormatCtx);    //play RTSP\navcodec_copy_context(codec_ctx, refrenceFormatCtx-&gt;streams[video_stream_index]-&gt;codec);\n\nif (avcodec_open2(codec_ctx, avcodec_find_decoder(AV_CODEC_ID_H264), NULL) &lt; 0){\n    qDebug() &lt;&lt; \"avcodec_open2 null\";\n}\nwhile (av_read_frame(refrenceFormatCtx, &amp;packet) &gt;= 0) {\n    if (packet.stream_index == video_stream_index) {    //packet is video\n        if (stream == NULL) {    //create stream in file\n            stream = avformat_new_stream(output_ctx, refrenceFormatCtx-&gt;streams[video_stream_index]-&gt;codec-&gt;codec);\n            avcodec_copy_context(stream-&gt;codec, refrenceFormatCtx-&gt;streams[video_stream_index]-&gt;codec);\n            stream-&gt;sample_aspect_ratio = refrenceFormatCtx-&gt;streams[video_stream_index]-&gt;codec-&gt;sample_aspect_ratio;\n        }\n        int check = 0;\n        packet.stream_index = stream-&gt;id;\n        int result = avcodec_decode_video2(codec_ctx, picture_yuv, &amp;check, &amp;packet);\n        av_free_packet(&amp;packet);\n        av_packet_unref(&amp;packet);\n        if(result &lt;= 0 || check == 0){\n            continue;\n        }\n        if(initialize_rgb_requirements)\n        {\n            sizeofrgbpicture = avpicture_get_size(AV_PIX_FMT_RGB24, codec_ctx-&gt;width, codec_ctx-&gt;height);\n            picture_rgb = av_frame_alloc();\n            picture_buffer_rgb = (uint8_t*) (av_malloc(sizeofrgbpicture));\n            avpicture_fill((AVPicture *) picture_rgb, picture_buffer_rgb, AV_PIX_FMT_RGB24, codec_ctx-&gt;width, codec_ctx-&gt;height);\n            img_convert_ctx = sws_getContext(codec_ctx-&gt;width, codec_ctx-&gt;height, AV_PIX_FMT_YUV420P, codec_ctx-&gt;width, codec_ctx-&gt;height, AV_PIX_FMT_RGB24, SWS_BICUBIC, NULL, NULL, NULL);\n            initialize_rgb_requirements=0;\n        }\n        int height = 0;\n        if(picture_yuv-&gt;data != NULL)\n        {\n            height = sws_scale(img_convert_ctx, ((AVPicture*)picture_yuv)-&gt;data, ((AVPicture*)picture_yuv)-&gt;linesize, 0, codec_ctx-&gt;height, ((AVPicture*)picture_rgb)-&gt;data,((AVPicture*)picture_rgb)-&gt;linesize);\n        }\n        rgb_image_data = (uint8_t *)malloc(sizeofrgbpicture * sizeof(uint8_t));\n        int ret = avpicture_layout((AVPicture *)picture_rgb, AV_PIX_FMT_RGB24, codec_ctx-&gt;width, codec_ctx-&gt;height, rgb_image_data, sizeofrgbpicture);\n        emit imageQueued(rgb_image_data, codec_ctx-&gt;width,codec_ctx-&gt;height);\n    }\n    msleep(1);\n}\nav_freep(picture_buffer_rgb);\nav_frame_free(&amp;picture_rgb);\navio_close(output_ctx-&gt;pb);\navformat_free_context(output_ctx);\navformat_close_input(&amp;refrenceFormatCtx);\n</code></pre>\n\n<p>I came to know that for raw H.264 stream we have to tell ffmpeg that the format is h264.  For that I have used <code>AVInputFormat</code>, to set other options like video codec and probesize, I have used <code>av_op_set()</code>. To set the default flags in ffmpeg, I have used <code>av_dict_set()</code>. I have emitted the data pointer to my required slot. If any one wants to create a file from it, then it can generate .ppm file by writing this pointer into file.</p>\n"}], "owner": {"reputation": 84, "user_id": 8135119, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HnvmQAoA_8Y/AAAAAAAAAAI/AAAAAAAAAEU/fDJr7wUow3o/photo.jpg?sz=128", "display_name": "niraj gandha", "link": "https://stackoverflow.com/users/8135119/niraj-gandha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 52403223, "answer_count": 1, "score": 0, "last_activity_date": 1537351263, "creation_date": 1536153868, "last_edit_date": 1536212937, "question_id": 52186274, "link": "https://stackoverflow.com/questions/52186274/issue-in-opening-the-8mp-h264-stream-from-tcp-server", "title": "Issue in opening the 8MP H264 Stream from tcp server", "body": "<p>I am facing issue in opening the raw h264 stream of 8MP resolution over tcp server from Android in Qt Application. To open the stream in ffplay, I give following command in terminal and it is able to play it</p>\n\n<pre><code>ffplay -f h264 -codec:v h264 -probesize 32M &lt;tcp://ipaddress:port&gt;\n</code></pre>\n\n<p>But when I try to open the stream in Qt Application, <strong>avformat_open_input()</strong> gives error <strong>Invalid data found while processing input</strong>.\nBelow is the code I am using in Qt Application:</p>\n\n<pre><code> av_register_all();\n avcodec_register_all();\n avformat_network_init();\n AVFormatContext *refrenceFormatCtx = NULL;\n SwsContext *img_convert_ctx;\n AVIOContext *avio_ctx = NULL;\n int video_stream_index = 0;\n AVCodecContext* codec_ctx = NULL;\n AVSampleFormat *fmt = NULL;\n char errorsdef[100];\n AVDictionary *options = NULL;\n av_dict_set(&amp;options, \"video_size\",\"3264x2448\",0);\n av_dict_set(&amp;options,\"pixel_format\",\"yuv420p\",0);\n av_dict_set(&amp;options, \"f\", \"h264\", 0);\n av_dict_set(&amp;options, \"codec:v\", \"h264\", 0);\n av_dict_set(&amp;options, \"codec:a\", \"aac\", 0);\n av_dict_set(&amp;options, \"probesize\", \"32M\", 0);\n\n  int err = avformat_open_input(&amp;refrenceFormatCtx,\"tcp://192.168.42.129:2226\", NULL, &amp;options);\n  av_strerror(err,errorsdef,100);\n  qDebug() &lt;&lt; \"OPening Stream error: \"&lt;&lt; err &lt;&lt; \" \"&lt;&lt; errorsdef;\n  if(err&lt;0)\n      abort();\n  av_dict_free(&amp;options);\n</code></pre>\n\n<p>Is the path to set the options in avformat_open_input is correct? Are parameters set by me are correct?</p>\n"}, {"tags": ["c", "openssl"], "answers": [{"comments": [{"owner": {"reputation": 3509, "user_id": 622266, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63d90906e7d270d6ad70455c02d379f4?s=128&d=identicon&r=PG", "display_name": "Pawel Veselov", "link": "https://stackoverflow.com/users/622266/pawel-veselov"}, "edited": false, "score": 0, "creation_date": 1536668032, "post_id": 52270212, "comment_id": 91498827, "body": "Thank you. In essence, this means - can&#39;t drill down using low-level functions, have to define your ASN.1 structures, so the low level part is handled by OpenSSL."}, {"owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "reply_to_user": {"reputation": 3509, "user_id": 622266, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63d90906e7d270d6ad70455c02d379f4?s=128&d=identicon&r=PG", "display_name": "Pawel Veselov", "link": "https://stackoverflow.com/users/622266/pawel-veselov"}, "edited": false, "score": 1, "creation_date": 1536670805, "post_id": 52270212, "comment_id": 91500701, "body": "In the end, the <code>IMPLEMENT_ASN1_FUNCTIONS</code> template expands to code that you could disseminate and reproduce in your own application. It uses the low-level functions <code>ASN1_item_d2i()</code> and <code>ASN1_item_i2d()</code>. With the provided code snippet, you could use a debugger to see what is going on, or you could just inspect the OpenSSL source code. I do not think that would be the intended way to use those functions though."}], "tags": [], "owner": {"reputation": 14334, "user_id": 1380680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/TRgwX.png?s=128&g=1", "display_name": "Reinier Torenbeek", "link": "https://stackoverflow.com/users/1380680/reinier-torenbeek"}, "is_accepted": false, "score": 1, "last_activity_date": 1536680549, "last_edit_date": 1536680549, "creation_date": 1536648595, "answer_id": 52270212, "question_id": 52185841, "link": "https://stackoverflow.com/questions/52185841/parsing-other-asn-1-types-with-openssl-1-1-api/52270212#52270212", "title": "Parsing &quot;OTHER&quot; ASN.1 types with OpenSSL 1.1 API", "body": "<p>The OpenSSL documentation is rather limited when it comes to the ASN.1 functionality. The best way to learn about it is by inspecting the associated header files <a href=\"https://github.com/openssl/openssl/blob/OpenSSL_1_1_0i/include/openssl/asn1.h\" rel=\"nofollow noreferrer\"><code>asn1.h</code></a> and <a href=\"https://github.com/openssl/openssl/blob/OpenSSL_1_1_0i/include/openssl/asn1t.h\" rel=\"nofollow noreferrer\"><code>asn1t.h</code></a>, which are public. They define a set of macros that allow you to create your own ASN.1 types. Again, looking at the source code is the best way to understand how those are used, for example in <a href=\"https://github.com/openssl/openssl/blob/OpenSSL_1_1_0i/crypto/ts/ts_asn1.c\" rel=\"nofollow noreferrer\"><code>ts_asn1.c</code></a>. A rudimentary explanation is given in <a href=\"https://www.openssl.org/docs/man1.1.0/crypto/ASN1_ITEM.html\" rel=\"nofollow noreferrer\">ASN1_ITEM()</a>. Have fun!</p>\n\n<p>Fortunately, your example <code>Rocket</code> type is simple. Its ASN.1 type definition with helper functions can be created as follows:</p>\n\n<pre><code>/* Rocket.h */\n#include &lt;openssl/asn1.h&gt;\n\ntypedef struct Rocket_st {\n    ASN1_IA5STRING *name;\n    ASN1_IA5STRING *type;\n} ROCKET;\n\nDECLARE_ASN1_FUNCTIONS(ROCKET)\n</code></pre>\n\n<p>The structure is hand-coded, the <code>DECLARE_ASN1_FUNCTIONS</code> macro expands to a set of helper functions that get implemented in the following way:</p>\n\n<pre><code>/* Rocket.c */\n#include \"Rocket.h\"\n#include &lt;openssl/asn1t.h&gt;\n\nASN1_SEQUENCE(ROCKET) = {\n        ASN1_SIMPLE(ROCKET, name, ASN1_IA5STRING),\n        ASN1_SIMPLE(ROCKET, type, ASN1_IA5STRING),\n} ASN1_SEQUENCE_END(ROCKET)\n\nIMPLEMENT_ASN1_FUNCTIONS(ROCKET)\n</code></pre>\n\n<p>After compilation, the symbol table looks like this (I am using a Mac):</p>\n\n<pre><code>$ objdump -t Rocket.o\n\nRocket.o:   file format Mach-O 64-bit x86-64\n\nSYMBOL TABLE:\n00000000000000d0 l       __DATA,__const _ROCKET_seq_tt\n00000000000000a0 g     F __TEXT,__text  _ROCKET_free\n0000000000000120 g       __DATA,__const _ROCKET_it\n0000000000000080 g     F __TEXT,__text  _ROCKET_new\n0000000000000000 g     F __TEXT,__text  _d2i_ROCKET\n0000000000000040 g     F __TEXT,__text  _i2d_ROCKET\n0000000000000000         *UND*  _ASN1_IA5STRING_it\n0000000000000000         *UND*  _ASN1_item_d2i\n0000000000000000         *UND*  _ASN1_item_free\n0000000000000000         *UND*  _ASN1_item_i2d\n0000000000000000         *UND*  _ASN1_item_new\n</code></pre>\n\n<p>The undefined symbols are provided by the OpenSSL <code>crypto</code> library. You can use the functions with <code>ROCKET</code> in their name for back and forth conversion between C-structured and DER-serialized data. Some more information about the <code>d2i</code> and <code>i2d</code> functions can be found in the OpenSSL documentation page called <a href=\"https://www.openssl.org/docs/man1.1.0/crypto/d2i_X509.html\" rel=\"nofollow noreferrer\"><code>d2i_X509</code></a>. Your application code could look like something along these lines:</p>\n\n<pre><code>ROCKET *rocket;\nROCKET *rocket2;\nunsigned char *rocketString;\nconst unsigned char *ptr;\nint len;\n\nrocket = ROCKET_new();\nrocket-&gt;name = ASN1_IA5STRING_new();\nASN1_STRING_set(rocket-&gt;name, \"Falcon\", -1);\nrocket-&gt;type = ASN1_IA5STRING_new();\nASN1_STRING_set(rocket-&gt;type, \"Boo\", -1);\n\nlen = i2d_ROCKET(rocket, &amp;rocketString);\nprintf(\"DER-encoded Rocket has length %d\\n\", len);\n\nptr = rocketString;\nrocket2 = d2i_ROCKET(NULL, &amp;ptr, len);\nprintf(\"rocket2 fields are:\\n  name = \\\"%s\\\"\\n  type = \\\"%s\\\"\\n\",\n   ASN1_STRING_get0_data(rocket2-&gt;name),\n   ASN1_STRING_get0_data(rocket2-&gt;type));\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>$ ./main\nDER-encoded Rocket has length 15\nrocket2 fields are:\n  name = \"Falcon\"\n  type = \"Boo\"\n</code></pre>\n"}], "owner": {"reputation": 3509, "user_id": 622266, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63d90906e7d270d6ad70455c02d379f4?s=128&d=identicon&r=PG", "display_name": "Pawel Veselov", "link": "https://stackoverflow.com/users/622266/pawel-veselov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536680549, "creation_date": 1536152584, "question_id": 52185841, "link": "https://stackoverflow.com/questions/52185841/parsing-other-asn-1-types-with-openssl-1-1-api", "title": "Parsing &quot;OTHER&quot; ASN.1 types with OpenSSL 1.1 API", "body": "<p>I'm trying to understand how to deal with parsing ASN.1 types with application specific contents. Given a rather simple schema:</p>\n\n<pre><code>World-Schema DEFINITIONS AUTOMATIC TAGS ::= \nBEGIN\n  Rocket ::= SEQUENCE       \n  {                                                     \n     name      IA5String,\n     type      IA5String\n  }                                                     \nEND\n</code></pre>\n\n<p>And data:</p>\n\n<pre><code>value Rocket ::= {\n  name \"Falcon\",\n  type \"Boo\"\n}\n</code></pre>\n\n<p>(I use <a href=\"http://asn1-playground.oss.com/\" rel=\"nofollow noreferrer\">http://asn1-playground.oss.com/</a> to generate serialized DER data).</p>\n\n<p>I can get the outer container with a d2i function:</p>\n\n<pre><code>ASN1_SEQUENCE_ANY * container = d2i_ASN1_SEQUENCE_ANY(0, (const unsigned char**)&amp;ptr, (long)len);\nASN1_TYPE * el = sk_ASN1_TYPE_value(container, 0);\n</code></pre>\n\n<p>That <code>el</code> is has a type of -3, which is <code>V_ASN1_OTHER</code>, which is correct for my schema. But I'm banging my head against the wall on how to, using ASN.1 API, drill into the contents, that are IA5Strings. I believe the contents are in <code>el-&gt;value.asn1_value</code>, but I'm not supposed to access that directly (the type is opaque to me), and I'm only considering functions that are in <a href=\"https://www.openssl.org/docs/man1.1.0/crypto/\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man1.1.0/crypto/</a>. Is there also any document(ation) that explains how it should be done?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "driver", "linux-device-driver"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1536153133, "post_id": 52185809, "comment_id": 91321682, "body": "You can&#39;t wait for user input in a critical section. This is a BUG. How do you want to get the &quot;user input&quot;? How do you enter a critical section? Critical sections are for atomic operations only, not for I/O"}, {"owner": {"reputation": 13, "user_id": 10320153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94b085fad3ece6079d5d190ca7f15de?s=128&d=identicon&r=PG&f=1", "display_name": "azicko", "link": "https://stackoverflow.com/users/10320153/azicko"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1536155274, "post_id": 52185809, "comment_id": 91323180, "body": "I get the user input through a netlink socket. I wrote a callback function for receiving msgs in the drv_init file not in a critical section. I want to block/wait in the critical section until the callback function has been called."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1536158409, "post_id": 52185809, "comment_id": 91325253, "body": "Yeah - your design is borked:("}], "answers": [{"tags": [], "owner": {"reputation": 2476, "user_id": 312067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc6d2132ca2e178cba31998f15aa9e2?s=128&d=identicon&r=PG", "display_name": "Jon Ander Ortiz Dur&#225;ntez", "link": "https://stackoverflow.com/users/312067/jon-ander-ortiz-dur%c3%a1ntez"}, "is_accepted": true, "score": 2, "last_activity_date": 1536153267, "creation_date": 1536153267, "answer_id": 52186062, "question_id": 52185809, "link": "https://stackoverflow.com/questions/52185809/waiting-in-linux-kernel-moduledriver-critical-section-for-user-space-input/52186062#52186062", "title": "Waiting in Linux Kernel Module(Driver) Critical Section for user-space input", "body": "<p>As explained <a href=\"https://stackoverflow.com/questions/3537252/how-to-solve-bug-scheduling-while-atomic-swapper-0x00000103-0-cpu0-in-ts\">in other questions</a>, you are calling wait_event_timeout in a context when you already have some lock acquired (inside a critical section). In this point your process can potentially deadlock with other processes and the scheduler complains about it. Please, review the point where you are calling wait_event_timeout and check if the I/O is performed in the correct place and if you have unlocked all synchronization primitives before sending your process to sleep.</p>\n"}], "owner": {"reputation": 13, "user_id": 10320153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94b085fad3ece6079d5d190ca7f15de?s=128&d=identicon&r=PG&f=1", "display_name": "azicko", "link": "https://stackoverflow.com/users/10320153/azicko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 52186062, "answer_count": 1, "score": 1, "last_activity_date": 1536153267, "creation_date": 1536152501, "question_id": 52185809, "link": "https://stackoverflow.com/questions/52185809/waiting-in-linux-kernel-moduledriver-critical-section-for-user-space-input", "title": "Waiting in Linux Kernel Module(Driver) Critical Section for user-space input", "body": "<p>I'm new to kernel programming and I was making changes in a Linux Driver. I want to block/wait in a Critical Section for user input(The communication between the Driver and the user-space Application work). The Problem is that when I used wait_event_timeout() the System is being crashed and I am getting \n<code>BUG: scheduling while atomic: swapper</code>. \n Is anybody have any idea how to solve this problem and can give me some advice where to start? </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536151827, "post_id": 52185474, "comment_id": 91320813, "body": "<code>(double)(NUM) &#47; DENUM</code> seems odd. I&#39;d use <code>(double)NUM &#47; DENUM</code> or <code>((double)NUM) &#47; DENUM</code> if you want to be explicit about the order."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1536151868, "post_id": 52185474, "comment_id": 91320838, "body": "@user694733: Personally I always use <code>1.0 * NUM &#47; DENUM</code> but that&#39;s for another time. Worth nothing that <code>NUM &#47; DENUM * 1.0</code> does not work."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536163392, "post_id": 52185474, "comment_id": 91328422, "body": "The <code>1.0*</code> is better as it coaxes the math to resolve to the wider of math possibilities between the <code>double</code>, <code>1.0</code> and the type of <code>NUM</code>  <i>which may change</i> in the future to say <code>long double</code>.  Casting could truncate information."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 14, "last_activity_date": 1536164580, "last_edit_date": 1536164580, "creation_date": 1536151510, "answer_id": 52185474, "question_id": 52185459, "link": "https://stackoverflow.com/questions/52185459/hexadecimal-values-division-in-c/52185474#52185474", "title": "Hexadecimal values division in C", "body": "<p>The notation is a red herring: the problem is that the cast happens <em>after</em> the integer division due to your enclosing that operation in parentheses.</p>\n\n<p>Use simply</p>\n\n<pre><code>(double)NUM / DENUM\n</code></pre>\n\n<p>although I prefer</p>\n\n<pre><code>1.0 * NUM / DENUM\n</code></pre>\n\n<p>not only for clarity but in case NUM is ever changed to a wider type than a double whereupon a cast could cause truncation.</p>\n"}], "owner": {"reputation": 661, "user_id": 5537770, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f97da445cf7af4efd508de4586b80150?s=128&d=identicon&r=PG&f=1", "display_name": "Pryda", "link": "https://stackoverflow.com/users/5537770/pryda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 52185474, "answer_count": 1, "score": 3, "last_activity_date": 1536164580, "creation_date": 1536151461, "last_edit_date": 1536163562, "question_id": 52185459, "link": "https://stackoverflow.com/questions/52185459/hexadecimal-values-division-in-c", "title": "Hexadecimal values division in C", "body": "<p>I have two numbers represented in a hexadecimal format:</p>\n\n<pre><code>uint16_t NUM   = 0xEEEE;  // Numerator\nuint16_t DENUM = 0XFFFF;  // Denominator\n</code></pre>\n\n<p>I want to have the numeric value of the division. Let us declare a <code>double</code> here:</p>\n\n<pre><code>double divisonResult = (double)(NUM / DENUM); // Shall be 0.9333333333333333\n</code></pre>\n\n<p>When I debug, the value of <code>divisonResult</code> is always 0.</p>\n\n<p>In my case, is casting allowed or not?</p>\n\n<p>Is there another way to get the wanted result?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536153369, "post_id": 52185333, "comment_id": 91321852, "body": "It is almost always confusing to use the same name for objects used at different places, especially when they have different levels of indirection. In the context of the calling code, <code>min</code> is a pointer to an integer. In the function <code>MinMax()</code>, it is the address of a pointer to an integer. Any discussion about <code>min</code> is going to be ambiguous."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536278675, "post_id": 52185333, "comment_id": 91376577, "body": "regarding: <code>MinMax(ar,ar+8,&amp;min,&amp;max);</code>  this seems to be a prototype for the actual function.  If that is correct, then it is written wrong.  Prototypes should use the parameter types like <code>int</code>, <code>char</code>, etc.  The names of actual data is totally optional"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1536151631, "creation_date": 1536151631, "answer_id": 52185518, "question_id": 52185333, "link": "https://stackoverflow.com/questions/52185333/double-pointer-dereferences-in-a-function/52185518#52185518", "title": "Double pointer dereferences in a function", "body": "<p>At the point you have <code>**min = 3</code> the value of <code>*min</code> is 0, i.e. a NULL pointer, which means it doesn't point anywhere.  Attempting to dereference <code>*min</code> and subsequently write to it invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>The following lines set both <code>*min</code> and <code>*max</code> to point to the same place as <code>start</code>, so after that they can be dereferenced.</p>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1536151778, "creation_date": 1536151778, "answer_id": 52185571, "question_id": 52185333, "link": "https://stackoverflow.com/questions/52185333/double-pointer-dereferences-in-a-function/52185571#52185571", "title": "Double pointer dereferences in a function", "body": "<p>On entering the function *min is zero so **min = 3 is setting an integer at address zero to three. Not normally allowed at run time. It is only after initialising *min to a valid address, for example *min = start, that you can then set **min to a value.</p>\n"}, {"comments": [{"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1536152036, "post_id": 52185576, "comment_id": 91320951, "body": "I don&#39;t think this is helpful to solving the misunderstanding. *min is overridden so the allocation will be orphaned."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 1, "creation_date": 1536159408, "post_id": 52185576, "comment_id": 91326035, "body": "Sure it will if the function is kept in its current form. The thing is, once line commented out is uncommented, more changes are required."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 1, "last_activity_date": 1536151798, "creation_date": 1536151798, "answer_id": 52185576, "question_id": 52185333, "link": "https://stackoverflow.com/questions/52185333/double-pointer-dereferences-in-a-function/52185576#52185576", "title": "Double pointer dereferences in a function", "body": "<pre><code>void MinMax(int *start,int *end, int **min,int **max) {\n    // **min = 3;\n</code></pre>\n\n<p>You start with initializing your function's argument to point to null so <code>**min</code> is not a defined value (<code>*min</code> is null but dereferencing a null pointer is UB.) To make <code>**min</code> a valid object, first set <code>*min</code> to point to a valid object, for instance</p>\n\n<pre><code>int *min = malloc(sizeof(int));\n</code></pre>\n\n<p>(don't forget to deallocate it later) or</p>\n\n<pre><code>int m = 0;\nint *min = &amp;m;\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>int *min = ar;\n</code></pre>\n\n<p>(thought that latter is already performed in <code>MinMax</code>.)</p>\n"}], "owner": {"reputation": 131, "user_id": 2119564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78c56e31a5c211d883a66ea7d34cbb95?s=128&d=identicon&r=PG", "display_name": "Sean Smith", "link": "https://stackoverflow.com/users/2119564/sean-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52185518, "answer_count": 3, "score": 0, "last_activity_date": 1536151798, "creation_date": 1536151072, "question_id": 52185333, "link": "https://stackoverflow.com/questions/52185333/double-pointer-dereferences-in-a-function", "title": "Double pointer dereferences in a function", "body": "<p>I'm trying to understand double pointers. I think i should be able to write (**min = 3;) in the MinMax loop below, but it is just ignored. I think it should set the value pointed to by the value of min (pointer to start) to 3 (or of course to any int). Can someone help me understand why this is crazy talk? There is no reason in the function to set this value of course, i just want to understand why it doesn't work.</p>\n\n<pre><code>int ar[] = {1,23,4,32,5,67,999,-1};\nint *min= 0;\nint *max= 0;\nMinMax(ar,ar+8,&amp;min,&amp;max);\n\nvoid MinMax(int *start,int *end, int **min,int **max) {\n  // **min = 3; //why not?\n  *min = start; \n  *max = start;\n  while(++start &lt; end) {\n  if(*start &lt; **min) *min = start;\n  if(*start &gt; **max) *max = start;\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "owner": {"reputation": 349, "user_id": 1044414, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/49fd2de020f49277b0f4cbee807efa07?s=128&d=identicon&r=PG", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/1044414/nikhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1536151059, "answer_count": 0, "score": 1, "last_activity_date": 1536150558, "creation_date": 1536150558, "question_id": 52185145, "link": "https://stackoverflow.com/questions/52185145/c-program-to-identify-whether-file-is-elf", "closed_reason": "Duplicate", "title": "C Program to Identify whether file is ELF", "body": "<p>I am writing a C program which will read directories and find out only ELF files.\nSo that the checksums of these files will be calculated and if someone tampers these files, a notification will be sent. </p>\n\n<p>With stat system call there is no way to find the ELF type of file.</p>\n\n<p>Could you please let me know how to find the ELF files in a particular directory.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "windows", "multithreading", "kernel-mode"], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 329, "user_id": 7424032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mNUt2R2XeSo/AAAAAAAAAAI/AAAAAAAAAAk/J91o7VsUih0/photo.jpg?sz=128", "display_name": "Michael Strobel", "link": "https://stackoverflow.com/users/7424032/michael-strobel"}, "edited": false, "score": 0, "creation_date": 1536155921, "post_id": 52185634, "comment_id": 91323650, "body": "@MichaelStrobel - exist much better solution"}, {"owner": {"reputation": 329, "user_id": 7424032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mNUt2R2XeSo/AAAAAAAAAAI/AAAAAAAAAAk/J91o7VsUih0/photo.jpg?sz=128", "display_name": "Michael Strobel", "link": "https://stackoverflow.com/users/7424032/michael-strobel"}, "edited": false, "score": 0, "creation_date": 1536156045, "post_id": 52185634, "comment_id": 91323746, "body": "Care to elaborate?"}], "tags": [], "owner": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "is_accepted": true, "score": 3, "last_activity_date": 1536153739, "last_edit_date": 1536153739, "creation_date": 1536151985, "answer_id": 52185634, "question_id": 52185144, "link": "https://stackoverflow.com/questions/52185144/how-do-i-properly-implement-threads-in-windows-kernel-driver/52185634#52185634", "title": "How do i properly implement threads in Windows Kernel Driver?", "body": "<p>Once the thread is created, you have <code>HANDLE threadHandle</code> result. Then you need to convert this handle to <code>PETHREAD ThreadObject;</code> :</p>\n\n<pre><code>ObReferenceObjectByHandle(threadHandle,\n                          THREAD_ALL_ACCESS,\n                          NULL,\n                          KernelMode,\n                          &amp;ThreadObject,\n                          NULL );\n</code></pre>\n\n<p>and close <code>threadHandle</code>:</p>\n\n<pre><code>ZwClose(threadHandle);\n</code></pre>\n\n<p>When you want to stop the thread, set the flag and wait for thread completion:</p>\n\n<pre><code>Kill = TRUE;\n\nKeWaitForSingleObject(ThreadObject,\n                    Executive,\n                    KernelMode,\n                    FALSE,\n                    NULL );\n\nObDereferenceObject(ThreadObject);\n</code></pre>\n\n<p>Then <code>f_DriverUnload</code> function may exit.</p>\n\n<p>You can see all this stuff here: <a href=\"https://github.com/Microsoft/Windows-driver-samples/tree/master/general/cancel/sys\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/Windows-driver-samples/tree/master/general/cancel/sys</a> </p>\n\n<p>See cancel.h and cancel.c files. Additionally, this code uses semaphore instead of global flag to stop the thread.</p>\n"}, {"tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 1, "last_activity_date": 1536164744, "creation_date": 1536164744, "answer_id": 52189716, "question_id": 52185144, "link": "https://stackoverflow.com/questions/52185144/how-do-i-properly-implement-threads-in-windows-kernel-driver/52189716#52189716", "title": "How do i properly implement threads in Windows Kernel Driver?", "body": "<p>when you create thread which used your driver, the driver of course must not be unloaded, until thread not exit. for do this need call <code>ObfReferenceObject</code> for your driver object, before create thread. if create thread fail - call <code>ObfDereferenceObject</code>. and when thread exit - need call <code>ObfDereferenceObject</code>. but here is problem - how / from where call this ? call <code>ObfDereferenceObject</code> from the end of thread routine no sense - the driver can be unloaded inside <code>ObfDereferenceObject</code> and we return from call to not existing memory place. ideally will be if external code (windows itself) call this, just after thread return. </p>\n\n<p>look for <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/content/wdm/nf-wdm-ioallocateworkitem\" rel=\"nofollow noreferrer\"><code>IoAllocateWorkItem</code></a> for good example. work item - like thread, and driver must not be unloaded, until <code>WorkerRoutine</code> not return. and here system care about this - for this we pass <code>DeviceObject</code> to <code>IoAllocateWorkItem</code>: <em>Pointer to the caller's driver object or to one of the caller's device objects.</em> - the system reference this object (device or driver) when we call <code>IoQueueWorkItem</code> and this is guarantee that driver will be not unloaded during <code>WorkerRoutine</code> execution. when it return - windows call <code>ObfDereferenceObject</code> for passed device or driver object. and here all ok, because we return to system kernel code (not to driver) after this. but unfortunately <code>PsCreateSystemThread</code> not take pointer to driver object and not implement such functional. </p>\n\n<p>another good example <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683153(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>FreeLibraryAndExitThread</code></a> - the driver is kernel mode dll by fact, which can be loaded and unloaded. and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683153(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>FreeLibraryAndExitThread</code></a> exactly implement functional which we need, but for user mode dlls only. again no such api in kernel mode. </p>\n\n<p>but anyway solution is possible. possible yourself <strong>jump</strong> (not call) to <code>ObfDereferenceObject</code> at the end of thread execution, but for this need use assembler code. not possible do this trick in <em>c/c++</em>.</p>\n\n<p>first of all let declare pointer to driver object in global variable  - we initialize it to valid value in driver entry point.</p>\n\n<pre><code>extern \"C\" PVOID g_DriverObject;\n</code></pre>\n\n<p>than some macros for get mangled <em>c++</em> names, this need for use it in asm file:</p>\n\n<pre><code>#if 0\n#define __ASM_FUNCTION __pragma(message(__FUNCDNAME__\" proc\\r\\n\" __FUNCDNAME__ \" endp\"))\n#define _ASM_FUNCTION {__ASM_FUNCTION;}\n#define ASM_FUNCTION {__ASM_FUNCTION;return 0;}\n#define CPP_FUNCTION __pragma(message(\"extern \" __FUNCDNAME__ \" : PROC ; \"  __FUNCSIG__))\n#else\n#define _ASM_FUNCTION\n#define ASM_FUNCTION\n#define CPP_FUNCTION\n#endif\n</code></pre>\n\n<p>in <em>c++</em> we declare 2 functions for thread:</p>\n\n<pre><code>VOID _AThread(IN PVOID Context)_ASM_FUNCTION;\n\nVOID __fastcall AThread(IN PVOID Context)\n{\n    CPP_FUNCTION;\n    // some code here\n    // but not call PsTerminateSystemThread !!\n}\n</code></pre>\n\n<p>(<em>don't forget <code>__fastcall</code> on <code>AThread</code> - for x86 this need</em>)</p>\n\n<p>now we create thread with next code:</p>\n\n<pre><code>    ObfReferenceObject(g_DriverObject);\n    HANDLE hThread;\n    if (0 &gt; PsCreateSystemThread(&amp;hThread, 0, 0, 0, 0, _AThread, ctx)) \n    {\n        ObfDereferenceObject(g_DriverObject);\n    }\n    else\n    {\n        NtClose(hThread);\n    }\n</code></pre>\n\n<p>so you set thread entry point to <code>_AThread</code> which will be implemented in <em>asm</em> file. at begin you call <code>ObfReferenceObject(g_DriverObject);</code>. the <code>_AThread</code> will call you actual thread implementation <code>AThread</code> in <em>c++</em>. finally it return back to <code>_AThread</code> (because this you must not call <code>PsTerminateSystemThread</code>. anyway call this api is optional at all - when thread routine return control to system - this will be auto called). and <code>_AThread</code> at the end de-reference <code>g_DriverObject</code> and return to system.</p>\n\n<p>so main trick in asm files. here 2 asm for x86 and x64:</p>\n\n<p>x86:</p>\n\n<pre><code>.686p\n\nextern _g_DriverObject:DWORD\nextern __imp_@ObfDereferenceObject@4:DWORD\nextern ?AThread@@YIXPAX@Z : PROC ; void __fastcall AThread(void *)\n\n_TEXT segment\n\n?_AThread@@YGXPAX@Z proc\n        pop ecx\n        xchg ecx,[esp]\n        call ?AThread@@YIXPAX@Z\n        mov ecx,_g_DriverObject\n        jmp __imp_@ObfDereferenceObject@4\n?_AThread@@YGXPAX@Z endp\n\n_TEXT ends\n\nEND\n</code></pre>\n\n<p>x64:</p>\n\n<pre><code>extern g_DriverObject:QWORD\nextern __imp_ObfDereferenceObject:QWORD\nextern ?AThread@@YAXPEAX@Z : PROC ; void __cdecl AThread(void *)\n\n_TEXT segment 'CODE'\n\n?_AThread@@YAXPEAX@Z proc\n    sub rsp,28h\n    call ?AThread@@YAXPEAX@Z\n    add rsp,28h\n    mov rcx,g_DriverObject\n    jmp __imp_ObfDereferenceObject\n?_AThread@@YAXPEAX@Z endp\n\n_TEXT ENDS\n\nEND\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 7424032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mNUt2R2XeSo/AAAAAAAAAAI/AAAAAAAAAAk/J91o7VsUih0/photo.jpg?sz=128", "display_name": "Michael Strobel", "link": "https://stackoverflow.com/users/7424032/michael-strobel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1611, "favorite_count": 1, "accepted_answer_id": 52185634, "answer_count": 2, "score": 2, "last_activity_date": 1536164744, "creation_date": 1536150558, "question_id": 52185144, "link": "https://stackoverflow.com/questions/52185144/how-do-i-properly-implement-threads-in-windows-kernel-driver", "title": "How do i properly implement threads in Windows Kernel Driver?", "body": "<p>I am trying to learn how to code windows kernel drivers. \nIn my driver i have 2 threads which are created at some point with <code>PsCreateSystemThread</code></p>\n\n<p>I have a global variable called <code>Kill</code> which signals the threads to terminate like this.</p>\n\n<pre><code>VOID AThread(IN PVOID Context)\n{\n    for (;;)\n    {\n        if(Kill == True)\n            break;\n\n        KmWriteProcessMemory(rProcess, &amp;NewValue, dwAAddr, sizeof(NewValue));\n    }\n\n\n    PsTerminateSystemThread(STATUS_SUCCESS);\n}\n</code></pre>\n\n<p>In my unload function i am setting <code>Kill = TRUE</code></p>\n\n<pre><code>VOID f_DriverUnload(PDRIVER_OBJECT pDriverObject)\n{\n    Kill = TRUE;\n    IoDeleteSymbolicLink(&amp;SymLinkName);\n    IoDeleteDevice(pDeviceObject);\n    DbgPrint(\"Driver Unloaded successfully..\\r\\n\");\n}\n</code></pre>\n\n<p>Most of the time there's no problem, but sometimes the machine will crash when i try to unload the driver. It happens more frequently when i have some kind of sleep function being used in the threads, so i'm assuming it's crashing because the threads have not yet terminated before the driver tries to unload.</p>\n\n<p>I'm not too sure how to use synchronisation and such, and there's not a lot of clear information out there that i can find. So how do i properly implement threads and ensure they're terminated before the driver is unloaded?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1536150104, "post_id": 52184935, "comment_id": 91319744, "body": "What is the &quot;riddle for the number 7.11&quot;? Is it an assignment from a book? Which book? What is the assignment or exercise?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1536150251, "post_id": 52184935, "comment_id": 91319836, "body": "As for your problem, remember that arrays naturally decays to pointers to their first element. That means you could have a function taking <code>int *</code> as its argument, and you could pass an <code>int</code> array of <i>any</i> size to it. Then you of course needs to pass the size (number of elements) of the array as an argument, as well as the &quot;window&quot; size (<code>n</code> in your example). Start with that, and try to figure out the permutation algorithm on paper once you got the basis function working."}], "owner": {"reputation": 341, "user_id": 2928799, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100001768450280/picture?type=large", "display_name": "Andreas Hubert", "link": "https://stackoverflow.com/users/2928799/andreas-hubert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536149888, "creation_date": 1536149888, "question_id": 52184935, "link": "https://stackoverflow.com/questions/52184935/multiply-an-amount-of-numbers-n-times-in-all-variations", "title": "Multiply an amount of numbers n-times in all variations", "body": "<p>short version of my problem is:\nI have an array with different numbers and I'd like to multiply them in all different variations n-times.\nSo for example the array could be</p>\n\n<pre><code>int a[5] = { 1, 2, 3, 4, 5 }\n</code></pre>\n\n<p>or it could also be like</p>\n\n<pre><code>int a[3] = { 3, 6, 9 } \n</code></pre>\n\n<p>next is I have a variable n that tells me how many times I want to multiply, so for example</p>\n\n<pre><code>int n = 2\n# would lead to following results:\nresult = 3 * 3  # a[0] * a[0]\nresult = 3 * 6  # a[0] * a[1]\nresult = 3 * 9  # a[0] * a[2]\nresult = 6 * 6  # a[1] * a[1]\nresult = 6 * 9  # a[1] * a[2]\nresult = 9 * 9  # a[2] * a[2]\n\nint n = 3\n# would lead to following results:\nresult = 3 * 3 * 3 # a[0] * a[0] * a[0]\nresult = 3 * 3 * 6 # a[0] * a[0] * a[1]\nresult = 3 * 3 * 9 # a[0] * a[0] * a[2]\nresult = 3 * 6 * 6 # a[0] * a[1] * a[1]\nresult = 3 * 6 * 9 # a[0] * a[1] * a[2]\nresult = 3 * 9 * 9 # a[0] * a[2] * a[2]\nresult = 6 * 6 * 6 # a[1] * a[1] * a[1]\nresult = 6 * 6 * 9 # a[1] * a[1] * a[2]\nresult = 6 * 9 * 9 # a[1] * a[2] * a[2]\nresult = 9 * 9 * 9 # a[2] * a[2] * a[2]\n</code></pre>\n\n<p>For the bigger picture: I try to solve a riddle for the number 7.11\nThere are 4 floats that can be added or be multiplied and in both cases you end up with 7.11 \nSo I do some math in my code to get all the prime numbers I need to rebuild those 4 numbers. Then I have permutation on these 4 numbers and that will be my variable <code>n</code>. Next is to make three for-loops, one for every number but the last one, as this will be all the primes I have left. So I also need a way to skip certain values if I'm out of that prime number, but I guess that could work easily with a <code>continue</code> in a for-loop.</p>\n"}, {"tags": ["c", "null", "char"], "comments": [{"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "edited": false, "score": 0, "creation_date": 1536149503, "post_id": 52184786, "comment_id": 91319373, "body": "This applies for determing the length of the array i guess."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536149781, "post_id": 52184786, "comment_id": 91319532, "body": "Which character is really at index <code>6</code>? Draw out the string on a squared paper, one character per square, and count if you&#39;re unsure."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536149892, "post_id": 52184786, "comment_id": 91319595, "body": "It certainly does not skip the character. Try piping your programs output to <code>sed &#39;s&#47;\\x0&#47;\\n&#47;g&#39;</code>, see what gets printed."}, {"owner": {"reputation": 1905, "user_id": 8713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed61e21ec072346277da9569f1c9f966?s=128&d=identicon&r=PG&f=1", "display_name": "ceno980", "link": "https://stackoverflow.com/users/8713450/ceno980"}, "edited": false, "score": 0, "creation_date": 1536150433, "post_id": 52184786, "comment_id": 91319960, "body": "Sorry, my bad. It should be &#39;i &lt; 6&#39; not &#39;i &lt; 7&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "is_accepted": false, "score": 0, "last_activity_date": 1536149773, "creation_date": 1536149773, "answer_id": 52184897, "question_id": 52184786, "link": "https://stackoverflow.com/questions/52184786/printing-char-array-with-null-character-in-the-middle-in-c/52184897#52184897", "title": "Printing char array with null character in the middle in C", "body": "<p>You can use below two options<br>\n1. <code>size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);</code><br>\n2.Iterate through each character and print it.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1536149784, "creation_date": 1536149784, "answer_id": 52184903, "question_id": 52184786, "link": "https://stackoverflow.com/questions/52184786/printing-char-array-with-null-character-in-the-middle-in-c/52184903#52184903", "title": "Printing char array with null character in the middle in C", "body": "<p><code>int i; for(i=0; i&lt;7; i++)</code> generates 7, not 6 iterations.\nPrinting <code>\\0</code> generates no pixels on the console (character 6) and then the 7th character (<code>B</code> follows).</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 1, "last_activity_date": 1536150175, "creation_date": 1536150175, "answer_id": 52185027, "question_id": 52184786, "link": "https://stackoverflow.com/questions/52184786/printing-char-array-with-null-character-in-the-middle-in-c/52185027#52185027", "title": "Printing char array with null character in the middle in C", "body": "<p>The construction <code>'\\0'</code> is commonly used to represent the null character. Here</p>\n\n<pre><code>printf(\"%c\", '\\0');\n</code></pre>\n\n<p>it prints nothing.</p>\n\n<p>And in the decalaration of <code>s</code></p>\n\n<pre><code>char s[] = \"Hello\\0Bye\"; \n</code></pre>\n\n<p>when you print like</p>\n\n<pre><code>for(i = 0; i &lt; 7; i++) {\n    printf(\"%c\", s[i]); \n}\n</code></pre>\n\n<p><code>printf()</code> prints upto <code>0&lt;7(h)</code>, <code>1&lt;7(e)</code>..<code>5&lt;7(nothing on console)</code>,<code>6&lt;7(B)</code> iterations only and <code>6th</code> charactar is <code>B</code> hence its prints <code>HelloB</code>.</p>\n\n<p><em>I was expecting \"Hello\" to be printed ?</em> For that you should rotate loop until <code>\\0</code> encountered. For e.g</p>\n\n<pre><code>for(i = 0; s[i] != '\\0'; i++) { /* rotate upto \\0 not 7 or random no of times */ \n   printf(\"%c\", s[i]); \n}\n</code></pre>\n\n<p>Or even you no need to check <code>s[i] != '\\0'</code></p>\n\n<pre><code>for(i = 0; s[i]; i++) { /* loop terminates automatically when \\0 encounters */ \n     printf(\"%c\", s[i]); \n}\n</code></pre>\n"}], "owner": {"reputation": 1905, "user_id": 8713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed61e21ec072346277da9569f1c9f966?s=128&d=identicon&r=PG&f=1", "display_name": "ceno980", "link": "https://stackoverflow.com/users/8713450/ceno980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2333, "favorite_count": 1, "accepted_answer_id": 52185027, "answer_count": 3, "score": 0, "last_activity_date": 1536150175, "creation_date": 1536149390, "question_id": 52184786, "link": "https://stackoverflow.com/questions/52184786/printing-char-array-with-null-character-in-the-middle-in-c", "title": "Printing char array with null character in the middle in C", "body": "<p>I have noticed that when you try to print a null character in C, nothing will get printed.</p>\n\n<pre><code>printf(\"trying to print null\\n\");\nprintf(\"%c\", '\\0');\n</code></pre>\n\n<p>However, I am trying to print the characters in the following array one by one, up to the sixth character which is the null character.</p>\n\n<pre><code>char s[] = \"Hello\\0Bye\";\nint i;\nfor(i = 0; i &lt; 7; i++) {\n    printf(\"%c\", s[i]);\n}\nprintf(\"\\n\");\n</code></pre>\n\n<p>I was expecting \"Hello\" to be printed, as since the sixth character is null nothing will be printed. However my output was: \"HelloB\".\nIt seems like printf skipped the null character and just went to the next character. I am not sure why the output is \"HelloB\" instead of \"Hello\".</p>\n\n<p>Any insights would be really appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536145371, "post_id": 52183470, "comment_id": 91316763, "body": "Why do you expect a file containing binary values to be readable as text? Also you have written other values to file besides the <code>struct</code> but not read them back."}, {"owner": {"reputation": 415, "user_id": 7305358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/909955eb7835150dae7bfbfa4e587e23?s=128&d=identicon&r=PG&f=1", "display_name": "Zinki", "link": "https://stackoverflow.com/users/7305358/zinki"}, "edited": false, "score": 2, "creation_date": 1536145512, "post_id": 52183470, "comment_id": 91316839, "body": "Please only tag languages your question is actually about. You said C, so tag it only as C and only C."}, {"owner": {"reputation": 18719, "user_id": 1997232, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/y6na2.png?s=128&g=1", "display_name": "Sinatr", "link": "https://stackoverflow.com/users/1997232/sinatr"}, "edited": false, "score": 0, "creation_date": 1536145603, "post_id": 52183470, "comment_id": 91316892, "body": "You want to read about <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/serialization/\" rel=\"nofollow noreferrer\">serialization</a> first (<a href=\"https://en.wikipedia.org/wiki/Serialization\" rel=\"nofollow noreferrer\">wiki</a>)."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1536146260, "post_id": 52183722, "comment_id": 91317290, "body": "There is a problem with the non-standard <code>fflush(stdin)</code> and a better way should be found to get rid of unwanted newlines in the input, perhaps with <code>scanf(&quot; %c&quot;, &amp;num[i].gend);</code> (note the leading space)."}], "tags": [], "owner": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "is_accepted": true, "score": 2, "last_activity_date": 1536145895, "creation_date": 1536145895, "answer_id": 52183722, "question_id": 52183470, "link": "https://stackoverflow.com/questions/52183470/file-read-write-not-working-with-multiple-datatypes/52183722#52183722", "title": "File read write not working with multiple datatypes", "body": "<p>The problem is that your <strong>writing</strong> and <strong>reading</strong> are <strong>asymmetrical</strong>.</p>\n\n<p>You write each <code>student</code> record like this:</p>\n\n<pre><code>  fputs(\"Student \", fptr); /**/\n  putw(i, fptr);           /**/\n  fwrite(&amp;num[i], sizeof(struct student), 1, fptr);\n  fputs(\"\\n\",fptr);        /**/\n</code></pre>\n\n<p>and then you read each <code>student</code> record like this:</p>\n\n<pre><code>  fread(&amp;num1, sizeof(struct student), 1, fptr);\n</code></pre>\n\n<p>Just get rid of the extra writes (the lines I marked with asterisks) and it should work.</p>\n"}], "owner": {"reputation": 107, "user_id": 9990640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8492578095cfbb3f57692616ed58f8a3?s=128&d=identicon&r=PG&f=1", "display_name": "Neetu", "link": "https://stackoverflow.com/users/9990640/neetu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52183722, "answer_count": 1, "score": -4, "last_activity_date": 1536145895, "creation_date": 1536145108, "last_edit_date": 1536145828, "question_id": 52183470, "link": "https://stackoverflow.com/questions/52183470/file-read-write-not-working-with-multiple-datatypes", "title": "File read write not working with multiple datatypes", "body": "<p>I have a program in C language in which I want to store multiple dataype values in a file and read the same from the file. The following code writes data into file but stores the data in unreadable form. Also when I fetch that data, I get garbage values.</p>\n\n<p>I am using Codeblocks 17.x</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct student\n{\n   char name[100];\n   int maths, hindi;\n   char gend;\n};\n\nint main()\n{\n   struct student num[3];\n   struct student num1;\n   int i;\n   FILE *fptr;\n   if ((fptr = fopen(\"studlist.txt\",\"w\")) == NULL){\n       printf(\"Error! opening file\");\n       exit(1);\n   }\n\n   for(i=0; i&lt;=2; i++)\n   {\n      printf(\"Enter your name: \");\n      gets(num[i].name);\n      printf(\"Enter Marks in Maths: \");\n      scanf(\"%d\", &amp;num[i].maths);\n      printf(\"Enter Marks in Hindi: \");\n      scanf(\"%d\", &amp;num[i].hindi);\n      printf(\"Enter Gender (M/F) \");\n      fflush(stdin);\n      num[i].gend=getchar();\n      fflush(stdin);\n      fputs(\"Student \", fptr);\n      putw(i, fptr);\n      fwrite(&amp;num[i], sizeof(struct student), 1, fptr);\n      fputs(\"\\n\",fptr);\n   }\n   fclose(fptr);\n   if ((fptr = fopen(\"studlist.txt\",\"r\")) == NULL){\n       printf(\"Error! opening file\");\n       exit(1);\n   }\n\n   for(i=0; i&lt;=2; i++)\n   {\n      printf(\"Student %d: \",i);\n      fread(&amp;num1, sizeof(struct student), 1, fptr);\n      printf(\"%s | Maths: %d\\tHindi: %d\\tGender: %c\\n\", num1.name, num1.maths, num1.hindi, num1.gend);\n   }\n   fclose(fptr);\n   return 0;\n}\n</code></pre>\n\n<p><strong>Data stored in the file:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/ONXs8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ONXs8.jpg\" alt=\"Data stored in the file\"></a></p>\n\n<p><strong>Data shown as a result of read operation:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/mH4vV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mH4vV.jpg\" alt=\"Data Shown as a result of read operation\"></a></p>\n\n<p>Also, I am not able to implement the search and update code. For example, if I want to update the marks of Jenny, I am not able to do it.</p>\n\n<p>Please help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1536144399, "post_id": 52183191, "comment_id": 91316176, "body": "Why would you get 6070 (or should that be 7060?)? Whence did 100 come?"}, {"owner": {"reputation": 661, "user_id": 5537770, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f97da445cf7af4efd508de4586b80150?s=128&d=identicon&r=PG&f=1", "display_name": "Pryda", "link": "https://stackoverflow.com/users/5537770/pryda"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1536144727, "post_id": 52183191, "comment_id": 91316378, "body": "@Biffen I don&#39;t understand why should it be 7060 ? Let&#39;s say that I have a this number 6070, it&#39;s an uint16_t and I need to copy it to another variable but I have a function that only takes uint8_t types. What should I do in this case ? My idea is to make an array that contains two elements: 70 and 60 and then append them to get the uint16_t value."}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 3, "creation_date": 1536145707, "post_id": 52183191, "comment_id": 91316961, "body": "60 * 256 + 70 = 15430"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1536150982, "post_id": 52183191, "comment_id": 91320290, "body": "@zerocoldTUN I was thinking 7060 because you have 70 in <code>ui8[0]</code> and 60 in <code>ui8[1]</code>, but nevermind, it seems you want to use little-endian. What\u2019s still unclear though is why you want to make <i>decimal</i> operations. If you think of the 8-bit values as binary \u2018halves\u2019 of the 16-bit value then 60 and 70 \u2018concatenated\u2019 become 15430."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 3, "creation_date": 1536144833, "post_id": 52183229, "comment_id": 91316440, "body": "Also note the code should cast the <code>uint8_t</code> value to <code>uint16_t</code> before shifting it. Otherwise, a <code>uint8_t</code> will be promoted to <code>int</code>, which could be 16 bits, in which case the shift could overflow, which has undefined behavior."}], "tags": [], "owner": {"reputation": 41428, "user_id": 440564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3dbcb5159c02d59f52159faa8437c97?s=128&d=identicon&r=PG", "display_name": "blue112", "link": "https://stackoverflow.com/users/440564/blue112"}, "is_accepted": true, "score": 7, "last_activity_date": 1536144954, "last_edit_date": 1536144954, "creation_date": 1536144315, "answer_id": 52183229, "question_id": 52183191, "link": "https://stackoverflow.com/questions/52183191/convert-uint8-t-array-to-uint16-t/52183229#52183229", "title": "Convert uint8_t array to uint16_t", "body": "<p>Maybe you meant to work with hexadecimal numbers :</p>\n\n<pre><code>uint8_t ui8[2]; // uint8_t array\nui8[0] = 0x70; // LSB\nui1[1] = 0x60; // MSB\n\nuint16_t ui16 = ui8[1] | (ui8[0] &lt;&lt; 8);\nprintf(\"%x\\n\", ui16); // 7060\n</code></pre>\n\n<hr>\n\n<p>If you want to work with decimal number, when you need to multiply the \"MSB\" by 100 and add them. It's far more uncommon to work with decimal number for that.</p>\n\n<pre><code>uint8_t ui8[2]; // uint8_t array\nui8[0] = 70; // LSB\nui1[1] = 60; // MSB\n\nuint16_t ui16 = ui8[1] + (ui8[0] * 100);\nprintf(\"%d\\n\", ui16); // 7060\n</code></pre>\n\n<hr>\n\n<p>Please not than in both case, \"70\" will be before the \"60\", because you're shifting the first element of the array (70). The 70 will be the MSB.</p>\n"}, {"tags": [], "owner": {"reputation": 1199, "user_id": 2827901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a274b3f7a545e83440885b59f08792a?s=128&d=identicon&r=PG&f=1", "display_name": "cpp_enthusiast", "link": "https://stackoverflow.com/users/2827901/cpp-enthusiast"}, "is_accepted": false, "score": 0, "last_activity_date": 1536145854, "last_edit_date": 1536145854, "creation_date": 1536145662, "answer_id": 52183643, "question_id": 52183191, "link": "https://stackoverflow.com/questions/52183191/convert-uint8-t-array-to-uint16-t/52183643#52183643", "title": "Convert uint8_t array to uint16_t", "body": "<pre><code>uint8_t ui8[2]; // uint8_t array\nui8[0] = 70; // LSB\nui1[1] = 60; // MSB\n</code></pre>\n\n<p>To copy the both values into a uint16, you can do as below:</p>\n\n<pre><code>uint16_t output = 0;\noutput |= (uint16_t)ui8[0] &lt;&lt; 8;\noutput |= (uint16_t)ui8[1] &lt;&lt; 0;\n</code></pre>\n\n<p>You can use the similar logic for writing the uint32_t/uint64_t from the array of uint8_t.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 5, "last_activity_date": 1536152172, "last_edit_date": 1536152172, "creation_date": 1536147297, "answer_id": 52184177, "question_id": 52183191, "link": "https://stackoverflow.com/questions/52183191/convert-uint8-t-array-to-uint16-t/52184177#52184177", "title": "Convert uint8_t array to uint16_t", "body": "<p>you can also use union punning for it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\ntypedef union {\n    uint8_t u8[2];\n    uint16_t u16;\n}data16;\n\nint main() {\n    data16 d16;\n\n    d16.u8[0] = 0x60;\n    d16.u8[1] = 0x70;\n\n    printf(\"%hx\\n\", d16.u16);\n\n    // it works in the opposite direction as well\n    // lets try to store 7060 decimal in two bytes\n\n    d16.u16 = 7060u;\n\n    printf(\"storing %hu decimal in two bytes: LSB:0x%0hhx (%hhu decimal), MSB:0x%0hhx (%hhu decimal)\\n\", d16.u16, d16.u8[0], d16.u8[0], d16.u8[1], d16.u8[1]);\n\n    return 0; }\n</code></pre>\n"}], "owner": {"reputation": 661, "user_id": 5537770, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/f97da445cf7af4efd508de4586b80150?s=128&d=identicon&r=PG&f=1", "display_name": "Pryda", "link": "https://stackoverflow.com/users/5537770/pryda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4677, "favorite_count": 1, "accepted_answer_id": 52183229, "answer_count": 3, "score": 3, "last_activity_date": 1536152172, "creation_date": 1536144204, "question_id": 52183191, "link": "https://stackoverflow.com/questions/52183191/convert-uint8-t-array-to-uint16-t", "title": "Convert uint8_t array to uint16_t", "body": "<p>I have a uint8_t array that contains two elements:</p>\n\n<pre><code>uint8_t ui8[2]; // uint8_t array\nui8[0] = 70; // LSB\nui1[1] = 60; // MSB\n</code></pre>\n\n<p>I want to get a uint16_t number (not an array) from these two uin8_t values. I used this approach in order to get this result: <code>uint16_t ui16 = 6070</code></p>\n\n<pre><code>uint16_t ui16 = ui8[1] | (ui8[0] &lt;&lt; 8);\n</code></pre>\n\n<p>But I got <code>uint16_t ui16 = 15430;</code></p>\n\n<p>Am using the wrong method to get what I need? Or is there something missing?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 3, "creation_date": 1536142418, "post_id": 52182561, "comment_id": 91314999, "body": "References don&#39;t exist in C. <code>&amp;x</code> is a pointer to <code>x</code>, i.e. a pointer to a pointer."}, {"owner": {"reputation": 41, "user_id": 5581264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QjfcZFPxCFI/AAAAAAAAAAI/AAAAAAAAABM/jY9b_awfQX4/photo.jpg?sz=128", "display_name": "Dave Chen", "link": "https://stackoverflow.com/users/5581264/dave-chen"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1536144214, "post_id": 52182561, "comment_id": 91316066, "body": "Thank you all for fast and suitable answers."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5581264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QjfcZFPxCFI/AAAAAAAAAAI/AAAAAAAAABM/jY9b_awfQX4/photo.jpg?sz=128", "display_name": "Dave Chen", "link": "https://stackoverflow.com/users/5581264/dave-chen"}, "edited": false, "score": 0, "creation_date": 1536143686, "post_id": 52182613, "comment_id": 91315782, "body": "Ok, this explains a lot. Thank you."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536148791, "post_id": 52182613, "comment_id": 91318900, "body": "Note it&#39;s safe to read an uninitialised char, signed char, or unsigned char."}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536149110, "post_id": 52182613, "comment_id": 91319111, "body": "@Bathsheba can you please explain or give a link?"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1536142428, "creation_date": 1536142428, "answer_id": 52182613, "question_id": 52182561, "link": "https://stackoverflow.com/questions/52182561/c-pointer-reference/52182613#52182613", "title": "C - Pointer &amp; Reference", "body": "<p>Uninitialized variables have unspecified values. It is <strong>undefined behavior</strong> to read them before they are assigned. Therefore the <code>x</code> and <code>*x</code> expressions are <strong>undefined behavior</strong>. </p>\n\n<p>Very roughly, undefined behavior means that anything can happen and that your code is broken. This is covered in any beginner C book.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5581264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QjfcZFPxCFI/AAAAAAAAAAI/AAAAAAAAABM/jY9b_awfQX4/photo.jpg?sz=128", "display_name": "Dave Chen", "link": "https://stackoverflow.com/users/5581264/dave-chen"}, "edited": false, "score": 0, "creation_date": 1536143740, "post_id": 52182874, "comment_id": 91315807, "body": "Thanks for answer my question. That helps me."}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 2, "last_activity_date": 1536149484, "last_edit_date": 1536149484, "creation_date": 1536143166, "answer_id": 52182874, "question_id": 52182561, "link": "https://stackoverflow.com/questions/52182561/c-pointer-reference/52182874#52182874", "title": "C - Pointer &amp; Reference", "body": "<p>Here</p>\n\n<pre><code>int *x;\n</code></pre>\n\n<p><code>x</code> is integer pointer, <em>pointer should point to valid memory location</em> but in your case it's uninitialized. Hence <code>de-referencing(*x)</code> uninitialized pointer causes <code>undefined behavior</code> i.e any thing can happen, it may crash.</p>\n\n<p>So answer of this</p>\n\n<pre><code>printf(\"Value int: %d\\n\", *x);\n</code></pre>\n\n<p>is <strong>undefined behavior</strong> since <strong>x</strong> doesn't have any valid memory location.</p>\n\n<p>And here</p>\n\n<pre><code>printf(\"Pointer ref: %p\\n\", &amp;x);\n</code></pre>\n\n<p>you are simply <em>printing address of pointer variable</em> <code>x</code>, there is no concept of <strong>reference</strong> in <strong>C</strong>.</p>\n\n<p><strong>Edit :-</strong> From  <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard n1570</a></p>\n\n<blockquote>\n  <p><strong>3.4.3</strong></p>\n  \n  <p>1 <strong>undefined behavior</strong> behavior, upon use of a nonportable or\n  erroneous program construct or of erroneous data, for which this\n  International Standard imposes no requirements.</p>\n  \n  <p><strong>Section</strong> <strong>6.7</strong> <strong>Declarations</strong></p>\n\n<pre><code>double *dp;\n\n*dp = 42; // undefined behavior\n</code></pre>\n</blockquote>\n\n<p>An uninitialized pointer doesn't point anywhere. It is illegal to de-reference it.</p>\n"}, {"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1536145839, "post_id": 52183063, "comment_id": 91317039, "body": "<code>&amp;x</code> is well defined. It is the valid address of an uninitialized pointer to int. You can use it to assign a value to the underlying pointer: <code>*(&amp;x) = &#47;* x = *&#47; NULL;</code>"}, {"owner": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1536145902, "post_id": 52183063, "comment_id": 91317083, "body": "Right except to that of printf(&quot;Pointer ref: %p\\n&quot;, &amp;x);. Correct the answer."}], "tags": [], "owner": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "is_accepted": false, "score": 0, "last_activity_date": 1536145950, "last_edit_date": 1536145950, "creation_date": 1536143810, "answer_id": 52183063, "question_id": 52182561, "link": "https://stackoverflow.com/questions/52182561/c-pointer-reference/52183063#52183063", "title": "C - Pointer &amp; Reference", "body": "<pre><code>Pointer: 0x7ffe99ea7420\nValue int: 1\nPointer ref: 0x7ffe99ea7330\n</code></pre>\n\n<p>This output is a subset of <code>undefined</code> behavior set. The output you are getting may change when you execute the code various times.</p>\n\n<p>In the code you have not initialized <code>int *x;</code>, hence it will have unspecified values. And all 3 of the following statements are called on an un-initialized variable hence output of each of them is <code>undefined</code></p>\n\n<pre><code>printf(\"Pointer: %p\\n\", x);\nprintf(\"Value int: %d\\n\", *x);\n</code></pre>\n\n<p>However </p>\n\n<pre><code>printf(\"Pointer ref: %p\\n\", &amp;x);\n</code></pre>\n\n<p>will print the address of the x.</p>\n"}], "owner": {"reputation": 41, "user_id": 5581264, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QjfcZFPxCFI/AAAAAAAAAAI/AAAAAAAAABM/jY9b_awfQX4/photo.jpg?sz=128", "display_name": "Dave Chen", "link": "https://stackoverflow.com/users/5581264/dave-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 52182613, "answer_count": 3, "score": 0, "last_activity_date": 1536149484, "creation_date": 1536142271, "last_edit_date": 1536143967, "question_id": 52182561, "link": "https://stackoverflow.com/questions/52182561/c-pointer-reference", "title": "C - Pointer &amp; Reference", "body": "<p>I'm studying computer science and try out C programming language in my spare time. Beside I use this book for a better understanding: <strong>Computer Systems: A programmer's perspective</strong>. It gives some example codes in C aswell.</p>\n\n<p>So, i wrote a code with some pointers - like this: <code>int *x</code>. And I'm still struggling with pointers and references - though I think I understand it.</p>\n\n<p>So I wrote a little Script and experimented with pointers and references.\nCode:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n        int *x;\n        printf(\"Pointer: %p\\n\", x);\n        printf(\"Value int: %d\\n\", *x);\n        printf(\"Pointer ref: %p\\n\", &amp;x);\n}\n</code></pre>\n\n<p>Output in bash / terminal:</p>\n\n<pre><code>Pointer: 0x7ffe99ea7420\nValue int: 1\nPointer ref: 0x7ffe99ea7330\n</code></pre>\n\n<p>(Setup: Ubuntu 16.04 x86_64 )</p>\n\n<p>Now i was a little bit confused, that a non-initialized variable <code>x</code> has the value 1 - and that the Pointer and Reference is point to a memory address.\nIn my first semester at the university I have learned Java and also understand how the JVM and the Stack works.\nSo I assume that it is the same in C. The compiler allocated some memory for each object in code. But why is the Value of <code>x</code> <strong>1</strong>.</p>\n\n<p>Maybe someone would be so nice and would explain it to me.\nI'm also very grateful for any links for further reading or some exchange of knowledge.</p>\n"}, {"tags": ["c", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1536153187, "post_id": 52182527, "comment_id": 91321723, "body": "In gtk2, the correct form ar <code>gtk_text_buffer_get_start_iter(buf, start);</code>, <code>gtk_text_buffer_get_end_iter(buf, start);</code> and <code>gtk_text_buffer_get_text([...], buf, start, [...]);</code> (no <code>&amp;</code>). Have you checked that <code>contents</code> is not <code>NULL</code>?"}, {"owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1536153716, "post_id": 52182527, "comment_id": 91322114, "body": "@purplepsycho As for the forms, yes I know (this is gtk3 btw). I changed that but I still get an error <code>Segmentation fault (core dumped)</code>. As for the <code>contents</code>, I can&#39;t check that because <code>gtk_text_buffer_get_text()</code> never returns."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1536156970, "post_id": 52182527, "comment_id": 91324339, "body": "Well, how is <code>struct buffer</code> defined, and are you sure that <code>B.buffer0</code> is a valid <code>GtkTextBuffer*</code>?"}, {"owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1536158473, "post_id": 52182527, "comment_id": 91325311, "body": "@purplepsycho I&#39;ll edit my answer to include that information."}, {"owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1536159489, "post_id": 52182527, "comment_id": 91326095, "body": "@purplepsycho Done."}], "answers": [{"tags": [], "owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "is_accepted": true, "score": 0, "last_activity_date": 1536182128, "creation_date": 1536182128, "answer_id": 52193478, "question_id": 52182527, "link": "https://stackoverflow.com/questions/52182527/iterators-do-not-belong-to-their-assigned-text-buffer/52193478#52193478", "title": "Iterators do not belong to their assigned text buffer", "body": "<p>Finally solved it. It looks like that <code>GtkTextIter</code> is a little bit different than most GTK types.</p>\n\n<p>Here is how it should be done:</p>\n\n<pre><code>gint save_as(GtkWidget *parent, struct buffers B)\n{\n    GtkWidget *file_chooser = gtk_file_chooser_dialog_new(\"Save As\", GTK_WINDOW(parent), GTK_FILE_CHOOSER_ACTION_SAVE, \"Cancel\", GTK_RESPONSE_CANCEL, \"Save\", GTK_RESPONSE_OK, NULL);\n    gtk_file_chooser_set_current_name(GTK_FILE_CHOOSER(file_chooser), \"Untitled\");\n\n    gint response = gtk_dialog_run(GTK_DIALOG(file_chooser));\n    switch(response)\n    {\n        case GTK_RESPONSE_OK:\n                GFile *file = g_file_new_for_path(gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(file_chooser)));\n                GtkTextIter start;\n                gtk_text_buffer_get_start(B.buffer0, &amp;start);\n                GtkTextIter end;\n                gtk_text_buffer_get_end(B.buffer0, &amp;end);\n                // program abnormally terminates on the following line\n                gchar *contents = gtk_text_buffer_get_text(B.buffer0, &amp;start, &amp;end, FALSE);\n                g_file_replace_contents(file, contents, strlen(contents), NULL, FALSE, G_FILE_CREATE_NONE, NULL, NULL, NULL);\n                g_free(contents);\n                gtk_widget_destroy(file_chooser);\n                return GTK_RESPONSE_OK;\n                break;\n        case GTK_RESPONSE_CANCEL:\n                gtk_widget_destroy(file_chooser);\n                return GTK_RESPONSE_CANCEL;\n    }\n    // user pressed X\n    gtk_widget_destroy(file_chooser);\n    return GTK_RESPONSE_CANCEL;\n}\n</code></pre>\n\n<p>As you can see, the only difference in this code and the code from my question are the following two lines:</p>\n\n<p><strong>Wrong</strong></p>\n\n<pre><code>GtkTextIter *start;\nGtkTextIter *end;\n</code></pre>\n\n<p><strong>Right</strong></p>\n\n<pre><code>GtkTextIter start;\nGtkTextIter end;\n</code></pre>\n\n<p>Most of the GTK types want you to make them pointers, but this one is an exception.</p>\n"}], "owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 52193478, "answer_count": 1, "score": 1, "last_activity_date": 1536182128, "creation_date": 1536142144, "last_edit_date": 1536170375, "question_id": 52182527, "link": "https://stackoverflow.com/questions/52182527/iterators-do-not-belong-to-their-assigned-text-buffer", "title": "Iterators do not belong to their assigned text buffer", "body": "<p>This is a bare bones <code>save_as()</code> function:</p>\n\n<pre><code>gint save_as(GtkWidget *parent, struct buffers B)\n{\n    GtkWidget *file_chooser = gtk_file_chooser_dialog_new(\"Save As\", GTK_WINDOW(parent), GTK_FILE_CHOOSER_ACTION_SAVE, \"Cancel\", GTK_RESPONSE_CANCEL, \"Save\", GTK_RESPONSE_OK, NULL);\n    gtk_file_chooser_set_current_name(GTK_FILE_CHOOSER(file_chooser), \"Untitled\");\n\n    gint response = gtk_dialog_run(GTK_DIALOG(file_chooser));\n    switch(response)\n    {\n        case GTK_RESPONSE_OK:\n                GFile *file = g_file_new_for_path(gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(file_chooser)));\n                GtkTextIter *start;\n                gtk_text_buffer_get_start(B.buffer0, &amp;start);\n                GtkTextIter *end;\n                gtk_text_buffer_get_end(B.buffer0, &amp;end);\n                // program abnormally terminates on the following line\n                gchar *contents = gtk_text_buffer_get_text(B.buffer0, &amp;start, &amp;end, FALSE);\n                g_file_replace_contents(file, contents, strlen(contents), NULL, FALSE, G_FILE_CREATE_NONE, NULL, NULL, NULL);\n                g_free(contents);\n                gtk_widget_destroy(file_chooser);\n                return GTK_RESPONSE_OK;\n                break;\n        case GTK_RESPONSE_CANCEL:\n                gtk_widget_destroy(file_chooser);\n                return GTK_RESPONSE_CANCEL;\n    }\n    // user pressed X\n    gtk_widget_destroy(file_chooser);\n    return GTK_RESPONSE_CANCEL;\n}\n</code></pre>\n\n<p>This is pretty much all we need to diagnose and fix the problem.</p>\n\n<p>Here is the full message I get when I try to click on <em>File -> Save As...</em> and then on <em>Save</em>:</p>\n\n<pre><code>(test:4478): Gtk-WARNING **: 11:56:20.184: Invalid text buffer iterator: either the iterator is uninitialized, or the characters/pixbufs/widgets in the buffer have been modified since the iterator was created.\nYou must use marks, character numbers, or line numbers to preserve a position across buffer modifications.\nYou can apply tags and insert marks without invalidating your iterators, but any mutation that affects 'indexable' buffer contents (contents that can be referred to by character offset) will invalidate all outstanding iterators\n\n\n(test:4478): Gtk-CRITICAL **: 11:56:20.184: gtk_text_buffer_get_text: assertion 'gtk_text_iter_get_buffer (start) == buffer' failed\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>For some reason, it seems that the iterators <code>start</code> and <code>end</code> do not belong to <code>B.buffer0</code>. Apart from <a href=\"https://developer.gnome.org/gtk3/stable/\" rel=\"nofollow noreferrer\">GTK+3 documentation</a>, I also followed answers to <a href=\"https://stackoverflow.com/questions/11088338/how-to-save-content-of-gtktextbuffer-to-a-file\">this question</a> as a guide.</p>\n\n<p>Why is this happening and how it can be fixed?\n<hr>\nI also tried changing the following lines:</p>\n\n<p><code>gtk_text_buffer_get_start_iter(B.buffer0, &amp;start);</code> to <code>gtk_text_buffer_get_start_iter(B.buffer0, start);</code></p>\n\n<p><code>gtk_text_buffer_get_start_iter(B.buffer0, &amp;end);</code> to <code>gtk_text_buffer_get_start_iter(B.buffer0, end);</code></p>\n\n<p><code>gchar *contents = gtk_text_buffer_get_text(B.buffer0, &amp;start, &amp;end, FALSE);</code> to <code>gchar *contents = gtk_text_buffer_get_text(B.buffer0, start, end, FALSE);</code></p>\n\n<p>The only error I get is:</p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n\n<p>This is also supposed to be the correct way to send arguments according to the <a href=\"https://developer.gnome.org/gtk3/stable/GtkTextBuffer.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p>Also, I tried replacing <code>contents = gtk_text_buffer_get_text(B.buffer0, start, end, FALSE);</code> with <code>contents = gtk_text_iter_get_text(start, end);</code> but I get the same error.</p>\n\n<p>I also noticed that I get two warnings during compiling after applying those changes:</p>\n\n<pre><code>src/save.c:96:5: warning: \u2018start\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n     gtk_text_buffer_get_start_iter(B.buffer0, start);\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nsrc/save.c:98:5: warning: \u2018end\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n     gtk_text_buffer_get_end_iter(B.buffer0, end);\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>This obviously means that <code>gtk_text_buffer_get_start/end_iter()</code> fails to associate <code>start</code> and <code>end</code> with <code>B.buffer0</code>, but why? It says that <code>start</code> and <code>end</code> are passed uninitialized, but isn't that normal since I'm initializing them now? Or I should do something before that?\n<hr>\nDefinition of struct buffer is in a file called <code>buffer.h</code>. Here it is (not the whole file, just the struct definition):</p>\n\n<pre><code>struct buffers\n{\n    GtkTextBuffer *buffer0;\n    GtkTextBuffer *buffer1;\n    GtkTextBuffer *buffer2;\n};\n</code></pre>\n\n<p>The instance I use is:</p>\n\n<pre><code>struct buffers Buffer;\n</code></pre>\n\n<p>This is a global variable, so <code>buffer.h</code> is included in every file that uses <code>Buffer</code>. And for the same purpose (globality), of course it is declared <code>extern struct buffers Buffer;</code> in the header file associated with the source file in which it is defined.</p>\n\n<p>This buffer is passed to a function <code>save_as()</code> like this:</p>\n\n<pre><code>gint response = save_as(main_window, Buffer);\n</code></pre>\n\n<p><em>In case you're wondering why I just don't use global variable instead of passing it as a parameter, it is because I can just pass any variable of type <code>struct buffers</code> to a <code>save_file()</code> and let it do the job, instead of having another function for each <code>struct buffers</code> variable.</em>\n<hr>\nI tried initializing iterators upon their definition:</p>\n\n<pre><code>GtkTextIter *start = NULL;\nGtkTextIter *end = NULL;\n</code></pre>\n\n<p>Everything compiles without any warnings. Unfortunately, this doesn't solve the problem. Upon clicking <em>File -> Save As</em> and then <em>Save</em>, the program exits and I get messages:</p>\n\n<pre><code>(test:4081): Gtk-CRITICAL **: 19:48:29.843: gtk_text_buffer_get_start_iter: assertion 'iter != NULL' failed\n\n(test:4081): Gtk-CRITICAL **: 19:48:29.844: gtk_text_buffer_get_end_iter: assertion 'iter != NULL' failed\n\n(test:4081): Gtk-CRITICAL **: 19:48:29.844: gtk_text_buffer_get_text: assertion 'start != NULL' failed\n</code></pre>\n\n<p>Why is it even important that my <code>start</code> and <code>end</code> iterators are <code>NULL</code> at least in the first two cases? Aren't those two functions supposed to set <code>start</code> and <code>end</code> iterators to the start and the end of a file, respectively? Therefore, why does it matter to what iterators are set prior to that?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1536142053, "post_id": 52182467, "comment_id": 91314785, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 16152, "user_id": 205233, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd3b79356ba4ea1f7e8d6be783446e59?s=128&d=identicon&r=PG&f=1", "display_name": "Filburt", "link": "https://stackoverflow.com/users/205233/filburt"}, "edited": false, "score": 1, "creation_date": 1536142195, "post_id": 52182467, "comment_id": 91314866, "body": "What&#39;s a <i>decimal integer</i>?"}, {"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "edited": false, "score": 0, "creation_date": 1536142203, "post_id": 52182467, "comment_id": 91314873, "body": "Have you tried doing that?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1536142449, "post_id": 52182467, "comment_id": 91315019, "body": "By the way, the outcome of that addition <i>really</i> depends on compiler and target, since <code>char</code> can be either signed or unsigned (it&#39;s implementation specific). And signed overflow leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1536142890, "post_id": 52182676, "comment_id": 91315274, "body": "They have a signed char though"}, {"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1536143120, "post_id": 52182676, "comment_id": 91315422, "body": "The standard does not guarantee that <code>char</code> will always be signed; it doesn&#39;t even guarantee that <code>char</code> will <i>only</i> have 8 bits."}, {"owner": {"reputation": 81, "user_id": 10291110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfjEKUgJpTE/AAAAAAAAAAI/AAAAAAAAAAk/AE_MA17Dx1k/photo.jpg?sz=128", "display_name": "Reece Ward", "link": "https://stackoverflow.com/users/10291110/reece-ward"}, "edited": false, "score": 0, "creation_date": 1536143535, "post_id": 52182676, "comment_id": 91315694, "body": "It guarantees a char is always 1 byte. A byte can be different sizes. So you can do the calculations based on how many bits in your byte. This scales perfectly fine"}], "tags": [], "owner": {"reputation": 81, "user_id": 10291110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pfjEKUgJpTE/AAAAAAAAAAI/AAAAAAAAAAk/AE_MA17Dx1k/photo.jpg?sz=128", "display_name": "Reece Ward", "link": "https://stackoverflow.com/users/10291110/reece-ward"}, "is_accepted": false, "score": 0, "last_activity_date": 1536142580, "creation_date": 1536142580, "answer_id": 52182676, "question_id": 52182467, "link": "https://stackoverflow.com/questions/52182467/need-help-regarding-the-output-of-the-following-code-with-explanation-if-possibl/52182676#52182676", "title": "need help regarding the output of the following code with explanation if possible", "body": "<p>For an unsigned char you have a minimum value of 0 and a maximum value of 255. </p>\n\n<p>Therefore if you add 250 to 8 you get 2.<br>\nThis happens because when you have a value of 255 all the bits in that byte are 1. Incrementing the least significant bit will overflow all the way \"to the end\" and you are left with all bits at 0.</p>\n\n<p>If you need a better understanding of this I recommend these:<br>\n<a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Integer_overflow</a><br>\n<a href=\"https://en.wikipedia.org/wiki/Binary_number\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Binary_number</a></p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 2, "last_activity_date": 1536144006, "creation_date": 1536144006, "answer_id": 52183131, "question_id": 52182467, "link": "https://stackoverflow.com/questions/52182467/need-help-regarding-the-output-of-the-following-code-with-explanation-if-possibl/52183131#52183131", "title": "need help regarding the output of the following code with explanation if possible", "body": "<p>The type <code>char</code> can be signed or unsigned - that depends on the implementation. Assuming 8-bit <code>char</code> the range of values that can be held are</p>\n\n<blockquote>\n  <p>Signed: -128 to 127</p>\n  \n  <p>Unsigned: 0 to 255</p>\n</blockquote>\n\n<p>The code starts with</p>\n\n<pre><code>char c = 250;\n</code></pre>\n\n<p>which is out of the permissible range of a signed <code>char</code> and what happens when you assign that value to a signed <code>char</code> is <em>undefined</em>. So lets assume that the <code>char</code> is unsigned and now</p>\n\n<pre><code>char c = 250;\n</code></pre>\n\n<p>is a valid assignment. So let's do the addition in binary as you were advised</p>\n\n<pre><code>  Binary   Decimal\n\n 11111010    250\n 00001000      8\n --------    ---\n100000010    ???\n</code></pre>\n\n<p>The sum overflows 8 bits, and with unsigned values, it is truncated to 8 bits (modulo 256).</p>\n\n<pre><code> 00000010      2\n</code></pre>\n\n<p>So the result is either <code>2</code> (unsigned) or <em>undefined</em> (signed).</p>\n"}], "owner": {"reputation": 1, "user_id": 8716806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87a45e546ec14c285cbaeb79b70b464a?s=128&d=identicon&r=PG", "display_name": "user8716806", "link": "https://stackoverflow.com/users/8716806/user8716806"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4337, "favorite_count": 1, "closed_date": 1536165979, "answer_count": 2, "score": -6, "last_activity_date": 1536144006, "creation_date": 1536141969, "last_edit_date": 1536142145, "question_id": 52182467, "link": "https://stackoverflow.com/questions/52182467/need-help-regarding-the-output-of-the-following-code-with-explanation-if-possibl", "closed_reason": "Needs details or clarity", "title": "need help regarding the output of the following code with explanation if possible", "body": "<pre><code>char c = 250;\nc += 8;\n</code></pre>\n\n<p>What value does c have after the above statements are executed? (Give your answer as a decimal integer.)</p>\n\n<p>i have tried the value 258,3.\ntip : write out addition in binary.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1536141815, "post_id": 52182340, "comment_id": 91314633, "body": "It might be but it is not the best way. Please read <a href=\"https://stackoverflow.com/questions/7097678/removing-elements-from-dynamic-arrays\" title=\"removing elements from dynamic arrays\">stackoverflow.com/questions/7097678/&hellip;</a> for better ideas"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536142753, "post_id": 52182340, "comment_id": 91315195, "body": "Your <code>calloc</code> call seems assume that <code>sizeof(int)</code> is 2, which might not be correct and certainly is not portable. If <code>sizeof(int)</code> is in fact 2, your <code>calloc</code> call allocates space for <code>size-1</code> elements, but your loop accesses elements at index <code>size-1</code> and <code>size</code> which will be beyond the end of the memory allocated by <code>calloc</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536142855, "post_id": 52182340, "comment_id": 91315257, "body": "Your loop is <code>for(i=0;i&lt;=size;i++)</code> so you certainly don&#39;t want <code>size-1</code> elements in the array, you need <code>size+1</code> elements. Moreover <code>pointer1[i+j]</code> is likely to index beyond the bounds of the memory allocation although we don&#39;t see the allocation for <code>pointer1</code>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1536143237, "post_id": 52182340, "comment_id": 91315504, "body": "That first loop will never finish as you have <code>i--</code> and <code>i++</code> cancelling each other out, so it&#39;ll get stuck when <code>i==index</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8158847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7317c989beb2584f9610eb40833a12d2?s=128&d=identicon&r=PG&f=1", "display_name": "Owais Qureshi", "link": "https://stackoverflow.com/users/8158847/owais-qureshi"}, "edited": false, "score": 0, "creation_date": 1536142103, "post_id": 52182473, "comment_id": 91314816, "body": "thanks for ans! but can i do calloc(size-1,2);. user will enter size."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 31, "user_id": 8158847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7317c989beb2584f9610eb40833a12d2?s=128&d=identicon&r=PG&f=1", "display_name": "Owais Qureshi", "link": "https://stackoverflow.com/users/8158847/owais-qureshi"}, "edited": false, "score": 0, "creation_date": 1536143206, "post_id": 52182473, "comment_id": 91315479, "body": "@OwaisQureshi I suggest <code>pointer2 = calloc(size + 1, sizeof *pointer2);</code>"}, {"owner": {"reputation": 31, "user_id": 8158847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7317c989beb2584f9610eb40833a12d2?s=128&d=identicon&r=PG&f=1", "display_name": "Owais Qureshi", "link": "https://stackoverflow.com/users/8158847/owais-qureshi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536144445, "post_id": 52182473, "comment_id": 91316210, "body": "@WeatherVane but i want to delete element! that&#39;s  why calloc(size-1,sizeof(pointer2));.  thank you."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 31, "user_id": 8158847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7317c989beb2584f9610eb40833a12d2?s=128&d=identicon&r=PG&f=1", "display_name": "Owais Qureshi", "link": "https://stackoverflow.com/users/8158847/owais-qureshi"}, "edited": false, "score": 0, "creation_date": 1536144632, "post_id": 52182473, "comment_id": 91316313, "body": "@OwaisQureshi your code is <code>for(i=0;i&lt;=size;i++){ ... pointer2[i]= ... </code> etc. In the final iteration you are indexing <code>pointer2[size]</code> and therefore there must be <code>size+1</code> elements."}], "tags": [], "owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "is_accepted": false, "score": 0, "last_activity_date": 1536141984, "creation_date": 1536141984, "answer_id": 52182473, "question_id": 52182340, "link": "https://stackoverflow.com/questions/52182340/is-that-valid-to-use-intcallocsize-1-2/52182473#52182473", "title": "is that valid to use (int*)calloc(size-1,2)?", "body": "<p>Function signature for calloc is as below.<br></p>\n\n<pre><code>void * calloc( size_t num, size_t size );\n</code></pre>\n\n<p>Make sure that <code>num &gt; 0</code> and <code>size &gt; 0</code></p>\n"}, {"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 0, "last_activity_date": 1536142433, "last_edit_date": 1536142433, "creation_date": 1536142048, "answer_id": 52182497, "question_id": 52182340, "link": "https://stackoverflow.com/questions/52182340/is-that-valid-to-use-intcallocsize-1-2/52182497#52182497", "title": "is that valid to use (int*)calloc(size-1,2)?", "body": "<p>Since you do not tell us what is <code>pointer2</code>, it's difficult to answer.</p>\n\n<p>But, if you write:</p>\n\n<pre><code>int *pointer2 = NULL;\nsize_t size = 10; \n\nif (size-1 &gt; 0)\n{\n    pointer2 = calloc(size-1, sizeof *pointer);\n}\n</code></pre>\n\n<p>The <code>pointer2</code> will points to an portion of memory able to store <code>size-1</code> integer (<code>int</code>) values.</p>\n\n<hr>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/605845/1212012\">In <strong>C</strong>, it is not necessary to cast <code>[m|c|re]alloc</code> results</a>   </li>\n<li>Magic values, like the <code>2</code> in <code>calloc(..., 2);</code> are dangerous : if the type of <code>pointer2</code> changed, the allocation could become invalid, or if the type size change over some architectures, it can become problematic.</li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 8158847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7317c989beb2584f9610eb40833a12d2?s=128&d=identicon&r=PG&f=1", "display_name": "Owais Qureshi", "link": "https://stackoverflow.com/users/8158847/owais-qureshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 52182497, "answer_count": 2, "score": -2, "last_activity_date": 1536145322, "creation_date": 1536141566, "last_edit_date": 1536145322, "question_id": 52182340, "link": "https://stackoverflow.com/questions/52182340/is-that-valid-to-use-intcallocsize-1-2", "title": "is that valid to use (int*)calloc(size-1,2)?", "body": "<p>I am making a program where  user can edit array.\nI am new in programming.code is not finished yet. </p>\n\n<p>Can I use <code>calloc(size-1,2)</code>?  Is that valid ?\nDoes it creates array <code>size-1</code>?</p>\n\n<pre><code>#include &lt;stdlib.h&gt; \n#include &lt;stdio.h&gt;\n\n int main()\n {\n\nint *pointer1,*pointer2,size,i,choice,j=0,index;\n\n     printf(\"Enter Elements of Arrays \" );\n     scanf(\"%d\",&amp;size);\n\n      pointer1=(int*)calloc(size,2);\n\n     for(i=0;i!=size;i++){\n        scanf(\"%d\",pointer1+i);\n     }\n\n    printf(\"Enter your choice \\n\" );\n    scanf(\"%d\",&amp;choice);\n\n      switch(choice) \n     {\n     case 0:\n         printf(\"Enter Index for Deletation \");\n         scanf(\"%d\",&amp;index);\n /* I know that code is not finish. but calloc(size-1,2) is that valid or not ?*/\n         pointer2=(int*)calloc(size-1,2);\n         for(i=0;i!=size-1;i++){\n            if(i!=index){\n             *pointer2+i=*pointer1+i+j;\n                    }\n                    else{\n                 j++;  \n              }\n             }\n                  for(i=0;i&lt;=size;i++)\n                  {\n              printf(\"\\n%d\",*pointer2+i);\n            }\n\n           break;\n\n     default:\n         printf(\"Error!\");\n     } \n  return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "memory-management", "instructions", "processing-instruction"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1536141003, "post_id": 52181952, "comment_id": 91314139, "body": "It could be. C specifies <i>what</i> must happen, but not <i>how</i>."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1536141351, "post_id": 52182169, "comment_id": 91314356, "body": "argh you even used <code>putchar</code> too :/ I am getting bad at FGITW."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 4, "last_activity_date": 1536141455, "last_edit_date": 1536141455, "creation_date": 1536141116, "answer_id": 52182169, "question_id": 52181952, "link": "https://stackoverflow.com/questions/52181952/is-my-translation-c-code-to-instructions-for-cpu-correct/52182169#52182169", "title": "is my translation C code to instructions for CPU correct?", "body": "<p>That's pretty much <em>one</em> way to translate it<sup>(a)</sup>, although local variables to a function usually get allocated on the stack rather than asking the OS for some amount of memory to store them.</p>\n\n<p>Of course, with a smart compiler, there's enough information in that source code to simply optimise the whole thing down to:</p>\n\n<pre><code>int main(void) { putchar('3'); }\n</code></pre>\n\n<hr>\n\n<p><sup>(a)</sup> The ISO C standard does not dictate <em>how</em> things are done under the covers, only that they behave in certain ways. Think of C as a virtual machine that implements the standard. How the VM does it is not really relevant, and certainly not mandated in any way other than the behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536173972, "post_id": 52182251, "comment_id": 91333313, "body": "as-if rule and abstract C machine look interesting. Thanks."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 3, "last_activity_date": 1536141336, "creation_date": 1536141336, "answer_id": 52182251, "question_id": 52181952, "link": "https://stackoverflow.com/questions/52181952/is-my-translation-c-code-to-instructions-for-cpu-correct/52182251#52182251", "title": "is my translation C code to instructions for CPU correct?", "body": "<p>As far as I read, yes it is a valid translation. No, it is almost 100 % certainly not the translation your compiler is going to produce. The C standard has the so-called <a href=\"https://stackoverflow.com/a/46455917/918959\">as-if rule</a> which means the compiler is free to produce <em>any</em> program whose side effects are <em>as if</em> the program were compiled for the so-called abstract C machine and run in there.</p>\n\n<p>In practice, a compiler could for example produce the following program:</p>\n\n<ul>\n<li>place the integer <code>'3'</code> into the register that is used as the first argument in function calls</li>\n<li>call <code>putchar</code></li>\n<li>zero the register that is used as the return value</li>\n<li>return from the <code>main</code> function</li>\n</ul>\n\n<p>To an observer, the side effects of this program would be indistinguishable from those of your program: it prints <code>3</code> and returns from <code>main</code> with <code>0</code> as return value.</p>\n"}, {"tags": [], "owner": {"reputation": 1415, "user_id": 4288486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceeebcdab5325a9b458c1af8c51111d?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Neto", "link": "https://stackoverflow.com/users/4288486/jo%c3%a3o-neto"}, "is_accepted": false, "score": 1, "last_activity_date": 1536141706, "last_edit_date": 1536141706, "creation_date": 1536141356, "answer_id": 52182260, "question_id": 52181952, "link": "https://stackoverflow.com/questions/52181952/is-my-translation-c-code-to-instructions-for-cpu-correct/52182260#52182260", "title": "is my translation C code to instructions for CPU correct?", "body": "<p><em>Step 1</em> The variables <code>a</code>, <code>b</code> and <code>pa</code> will be allocated in the stack. Therefore, there is no request to the OS for memory allocation -- you'll just use the stack, which is controlled by the process itself. Maybe it won't ask for 16 bytes -- 4 bytes are enough, since you're effectively using variable <code>a</code>. And even that one is constant, so instances of <code>a</code> can be replaced by <code>1</code>.</p>\n\n<p><em>Step 4:</em> This step may be completely skipped by the compiler, since you are not using the value of <code>pa</code> until it is reassigned in the next step.</p>\n\n<p><em>Step 6:</em> Push the two arguments (<code>%d\\0</code> string and the value <code>1</code>) into the stack and call function named <code>printf</code>. No idea if it outputs into a terminal -- maybe <code>stdout</code> is redirecting into a file?</p>\n\n<p>In the end it's impossible to know exactly what instructions will be produced from that source code. Depends on the architecture, operating system/OS version, compiler/cc version, compiler flags...</p>\n"}], "owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 52182251, "answer_count": 3, "score": 0, "last_activity_date": 1536142120, "creation_date": 1536140531, "last_edit_date": 1536142120, "question_id": 52181952, "link": "https://stackoverflow.com/questions/52181952/is-my-translation-c-code-to-instructions-for-cpu-correct", "title": "is my translation C code to instructions for CPU correct?", "body": "<p>For this code:</p>\n\n<pre><code>int main(void) {\n  int a = 1;\n  int b = 2;\n  int* pa = &amp;a;\n  *pa = a + b;\n  printf(\"%d\", a);\n}\n</code></pre>\n\n<p>At compile time the compiler calculates how much space it needs. We have 2 integers and one pointer. So it is <code>2*4 + 8 = 16</code>. Then it specifies where the memory of a given variable is in relation to the start point address.\n<code>pa</code> is at the start point address and have length of 8 bytes.\n<code>b</code> is at start point address + 8 bytes and have length 4 bytes.\n<code>a</code> is at start point address + 12 bytes and have length 4 bytes.</p>\n\n<p>Then go instructions for execution time:</p>\n\n<ol>\n<li>Ask OS to allocate 16 bytes and provide address for that space in memory. This will be start point address.</li>\n<li>put the binary representation of <code>1</code> at the location of <code>a</code>.</li>\n<li>put the binary representation of <code>2</code> at the location of <code>b</code>.</li>\n<li>translate relative address of <code>a</code> (start point address + 12 bytes) to its absolute location and put it at location of <code>pa</code>.</li>\n<li>get bytes at location <code>a</code> and bytes at location <code>b</code>, add them and then get bytes at location <code>pa</code>. Use bytes at location <code>pa</code> as an address and put there the calculated sum.</li>\n<li>print the bytes at location <code>a</code> converting them to decimal number first.</li>\n<li>free memory and let the OS know that program finished.</li>\n</ol>\n\n<p>Is this a valid translation?</p>\n\n<h1>edit:</h1>\n\n<p>Let's assume a super simple compiler is used (no optimizations). All it cares about is a valid execution of C code.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1536139749, "post_id": 52181648, "comment_id": 91313361, "body": "For me it&#39;s <code>9,9,9</code> <a href=\"https://wandbox.org/permlink/Uk8QhbAymYacOIvs\" rel=\"nofollow noreferrer\">wandbox.org/permlink/Uk8QhbAymYacOIvs</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1536139789, "post_id": 52181648, "comment_id": 91313389, "body": "In <code>3.8 + 5.2</code> you are adding two <code>double</code> values. In <code>x + y</code> you are adding two <code>float</code> values. Please see <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a> and <a href=\"https://stackoverflow.com/questions/21895756/why-are-floating-point-numbers-inaccurate\">Why Are Floating Point Numbers Inaccurate?</a>"}, {"owner": {"reputation": 47, "user_id": 6717124, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IyMmm8NNPEs/AAAAAAAAAAI/AAAAAAAAABA/j9tUUR7XYKM/photo.jpg?sz=128", "display_name": "Hongyuan", "link": "https://stackoverflow.com/users/6717124/hongyuan"}, "edited": false, "score": 0, "creation_date": 1536198211, "post_id": 52181648, "comment_id": 91340288, "body": "Found the cause.When I remove gcc flag -std=c11,it print 9,9,9.When I add -std=c11,it print 9,8,9."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536216387, "post_id": 52181648, "comment_id": 91345209, "body": "Reopened. This is not the normal floating point inaccurate question. There are a variety of reasons behind the output that I feel the duplicate does not cover."}], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1536139805, "post_id": 52181716, "comment_id": 91313401, "body": "But can you explain why that happens for <code>b</code>, but not for <code>a</code>? I believe that&#39;s what the question is actually about."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1536140305, "post_id": 52181716, "comment_id": 91313704, "body": "@Angew: Not strict FP is the only explanation for that (as I&#39;m sure you know - you&#39;re being nice and asking me to spruce up the answer)."}, {"owner": {"reputation": 47, "user_id": 6717124, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IyMmm8NNPEs/AAAAAAAAAAI/AAAAAAAAABA/j9tUUR7XYKM/photo.jpg?sz=128", "display_name": "Hongyuan", "link": "https://stackoverflow.com/users/6717124/hongyuan"}, "edited": false, "score": 0, "creation_date": 1536140600, "post_id": 52181716, "comment_id": 91313897, "body": "Thank you for your answer.@Angew I hava the same puzzle."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1536217658, "post_id": 52181716, "comment_id": 91345776, "body": "The program produces <code>9,9,9</code> on OS/X with clang with or without optimisations. Another case of non strict FP?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1536140288, "last_edit_date": 1536140288, "creation_date": 1536139739, "answer_id": 52181716, "question_id": 52181648, "link": "https://stackoverflow.com/questions/52181648/in-the-sample-why-float-convert-to-int-print-different-result/52181716#52181716", "title": "In the sample,why float convert to int print different result?", "body": "<p>In a single precision IEEE754 (the <code>float</code> scheme most likely used on your platform), <code>x</code> is <code>3.7999999523162841796875</code> and <code>y</code> is <code>5.19999980926513671875</code>. The sum of those is a little under 9, and the cast to <code>int</code> truncates the result. (Note that <code>float x = 3.8</code> actually truncates the <code>double</code> constant <code>3.8</code> to a <code>float</code>: <code>3.8f</code> is a constant of type <code>float</code>.)</p>\n\n<p>But <code>3.8 + 5.2</code> is computed in <em>double</em> precision. In double precision IEEE754 <code>3.8</code> is <code>3.79999999999999982236431605997495353221893310546875</code> and <code>5.2</code> is <code>5.20000000000000017763568394002504646778106689453125</code>. This sums to just over 9, and so the <code>int</code> truncation recovers 9.</p>\n\n<p>The fact that <code>a</code> and <code>b</code> are different is due to floating point evaluations not being <em>strict</em> on your compiler. You should be able to change its settings should you need to.</p>\n"}], "owner": {"reputation": 47, "user_id": 6717124, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IyMmm8NNPEs/AAAAAAAAAAI/AAAAAAAAABA/j9tUUR7XYKM/photo.jpg?sz=128", "display_name": "Hongyuan", "link": "https://stackoverflow.com/users/6717124/hongyuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1536216969, "creation_date": 1536139570, "last_edit_date": 1536216969, "question_id": 52181648, "link": "https://stackoverflow.com/questions/52181648/in-the-sample-why-float-convert-to-int-print-different-result", "title": "In the sample,why float convert to int print different result?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;float.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    float x = 3.8, y = 5.2;\n    int a, b, c;\n    float d = x + y;\n    a = d;\n    b = (int)(x + y);\n    c = (int)(3.8 + 5.2);\n    printf(\"a=%d,b=%d,c=%d\\n\", a, b, c);\n    return 0;\n}\n</code></pre>\n\n<p>The result is </p>\n\n<blockquote>\n<pre><code>9,8,9\n</code></pre>\n</blockquote>\n\n<p>And I thought <code>9,9,9</code> is the right output, please tell me, why.</p>\n"}, {"tags": ["c", "winforms"], "comments": [{"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 2, "creation_date": 1536138156, "post_id": 52181151, "comment_id": 91312264, "body": "It&#39;s not slow. You are <i>not</i> adding anything from another thread. You can&#39;t modify <i>any</i> UI control from another thread. You are still on the UI thread. If that thread is busy, the call to <code>BeginInvoke</code> will wait until the UI thread is free"}, {"owner": {"reputation": 111, "user_id": 8836394, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bc991764b07ac74663ac2e770edc197b?s=128&d=identicon&r=PG&f=1", "display_name": "heapoverflow", "link": "https://stackoverflow.com/users/8836394/heapoverflow"}, "reply_to_user": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536138277, "post_id": 52181151, "comment_id": 91312349, "body": "@PanagiotisKanavos Thanks for answering. Yes i must add only ui thread. But why the begin invoke is slow? It is same that between add nodes in main thread and use begin invoke in other thread."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536138292, "post_id": 52181151, "comment_id": 91312358, "body": "Why do you want to load the treeview &quot;in the background&quot; anyway? If you have a lot of data the trick is to <i>not</i> load what can&#39;t be displayed. This is available through virtual scrolling, data virtualization techniques that are already available on Windows Forms."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536138376, "post_id": 52181151, "comment_id": 91312414, "body": "What other thread? <code>BeginInvoke</code> on a UI control says: &quot;run this code on the UI thread&quot;."}, {"owner": {"reputation": 111, "user_id": 8836394, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bc991764b07ac74663ac2e770edc197b?s=128&d=identicon&r=PG&f=1", "display_name": "heapoverflow", "link": "https://stackoverflow.com/users/8836394/heapoverflow"}, "reply_to_user": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536138415, "post_id": 52181151, "comment_id": 91312442, "body": "I have another more logic like networking or merging tree with another tree and so on. It has a little overhead. So i must do this in another thread because i don&#39;t want to stop ui (main) thread."}, {"owner": {"reputation": 111, "user_id": 8836394, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bc991764b07ac74663ac2e770edc197b?s=128&d=identicon&r=PG&f=1", "display_name": "heapoverflow", "link": "https://stackoverflow.com/users/8836394/heapoverflow"}, "reply_to_user": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536138632, "post_id": 52181151, "comment_id": 91312580, "body": "Well, &#39;other thread&#39; means that a working thread except ui(main) thread. It will do networking , make trees , merge trees and so on."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536138664, "post_id": 52181151, "comment_id": 91312603, "body": "Like any <code>async&#47;await</code> example. First, you don&#39;t need <code>BeginInvoke</code> at all, you can use <code>async&#47;await</code> and keep modifying the UI after each asynchronous operation. Second, pushing calls from one thread to another will always be slow. <i>Don&#39;t</i> do it without a reason. If you want to add nodes for 10 items, call a method that accepts an array of items and adds them at once. Don&#39;t make 10 cross-thread calls"}, {"owner": {"reputation": 111, "user_id": 8836394, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bc991764b07ac74663ac2e770edc197b?s=128&d=identicon&r=PG&f=1", "display_name": "heapoverflow", "link": "https://stackoverflow.com/users/8836394/heapoverflow"}, "reply_to_user": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536140749, "post_id": 52181151, "comment_id": 91313980, "body": "Hum... i convert this to async method but it is slow too."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536143728, "post_id": 52181151, "comment_id": 91315801, "body": "<i>What</i> is too slow? You still haven&#39;t posted any relevant code. And using <code>async</code> doesn&#39;t make any cross-threaded calls. When you write <code>var result=await httpClient.GetStringAsync(..); treeView1.Nodes.Add(new TreeNode(result));</code> the second line is already back in the UI thread"}, {"owner": {"reputation": 111, "user_id": 8836394, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bc991764b07ac74663ac2e770edc197b?s=128&d=identicon&r=PG&f=1", "display_name": "heapoverflow", "link": "https://stackoverflow.com/users/8836394/heapoverflow"}, "reply_to_user": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1536220107, "post_id": 52181151, "comment_id": 91347059, "body": "I fixed my question and i add detail about my async trying. It is also slow when i add treenode to treeview by async method."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 8836394, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bc991764b07ac74663ac2e770edc197b?s=128&d=identicon&r=PG&f=1", "display_name": "heapoverflow", "link": "https://stackoverflow.com/users/8836394/heapoverflow"}, "edited": false, "score": 0, "creation_date": 1536220282, "post_id": 52191650, "comment_id": 91347155, "body": "thanks, but it also block ui thread when the invoke action has overhead."}], "tags": [], "owner": {"reputation": 647, "user_id": 8290859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576dd7c76c6f0358c15d2359ed1bc508?s=128&d=identicon&r=PG&f=1", "display_name": "OH.IO.DEV", "link": "https://stackoverflow.com/users/8290859/oh-io-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1536173202, "creation_date": 1536173202, "answer_id": 52191650, "question_id": 52181151, "link": "https://stackoverflow.com/questions/52181151/why-the-winform-begineinvoke-is-too-slow/52191650#52191650", "title": "why the Winform BegineInvoke is too slow?", "body": "<p>I'm not sure I totally understand the question. If you're just looking to modify a control off the UI thread you can try something like this with a <code>BackgroundWorker</code>:</p>\n\n<pre><code>                Control.Invoke((MethodInvoker) delegate\n                {\n                      // Anything you want do.\n                });\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 8836394, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bc991764b07ac74663ac2e770edc197b?s=128&d=identicon&r=PG&f=1", "display_name": "heapoverflow", "link": "https://stackoverflow.com/users/8836394/heapoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1536219921, "creation_date": 1536138070, "last_edit_date": 1536219921, "question_id": 52181151, "link": "https://stackoverflow.com/questions/52181151/why-the-winform-begineinvoke-is-too-slow", "title": "why the Winform BegineInvoke is too slow?", "body": "<p>Why the Winform BegineInvoke is too slow?</p>\n\n<p>Here is the code that i make winform treeview and add nodes.\nI do this in main thread, which is in form's constructor.</p>\n\n<pre><code>//Create many tree nodes\n\nTreeNode first = new TreeNode(\"First\");\nfor (int i = 0; i &lt; 3; i++)\n{\n  TreeNode secondChild = new TreeNode(\"Second\" + i);\n  for (int j = 0; j &lt; 100; ++j)\n  {\n     TreeNode thirdChild = new TreeNode(\"Third\" + j);\n     for (int k = 0; k &lt; 3000; ++k)\n     {\n       TreeNode fourthChild = new TreeNode(\"Fourth\" + i);\n       thirdChild.Nodes.Add(fourthChild);\n     }\n     secondChild.Nodes.Add(thirdChild);\n  }\n  first.Nodes.Add(secondChild);\n}\n\n//Measure the time add nodes to treeview\nStopwatch watch = new Stopwatch();\nwatch.Start();\nConsole.WriteLine(\"Start\");\ntreeView1.Nodes.Add(node2); //add to treeview\nConsole.WriteLine(\"End : \" + watch.Elapsed.ToString());\n</code></pre>\n\n<p>It takes under 0.1 seconds. It is not slow.\nBut If i make new thread and do same things in new thread, then it takes over 40 seconds.</p>\n\n<p>I use BeginInvoke to add nodes to treeview outside of main thread.</p>\n\n<pre><code>if (treeView1.InvokeRequired == true)\n   treeView1.BeginInvoke(new Action(() =&gt; \n   treeView1.Nodes.Add(first)));\n</code></pre>\n\n<p>Why the begin invoke is very slow? </p>\n\n<p>And i also used async method instead to do this.</p>\n\n<pre><code>public TreeNode GetTreeNode()\n{\n\n  TreeNode rootTree = null;\n\n  rootTree = new TreeNode(\"First\");\n  for (int i = 0; i &lt; 3; i++)\n  {\n      TreeNode secondChild = new TreeNode(\"Second\" + i);\n      for (int j = 0; j &lt; 100; ++j)\n      {\n         TreeNode thirdChild = new TreeNode(\"Third\" + j);\n         for (int k = 0; k &lt; 3000; ++k)\n         {\n             TreeNode fourthChild = new TreeNode(\"Fourth\" + i);\n             thirdChild.Nodes.Add(fourthChild);\n         }\n         secondChild.Nodes.Add(thirdChild);\n      }\n     rootTree.Nodes.Add(secondChild);\n   }\n\n    return rootTree;\n}\n\npublic async void AddNodeToTreeView()\n{\n            TreeNode node = null;\n            Task&lt;TreeNode&gt; task = Task&lt;TreeNode&gt;.Factory.StartNew(() =&gt; node = GetTreeNode());\n            await task;\n\n            Console.WriteLine(\"Start\");\n            Stopwatch watch = new Stopwatch();\n            watch.Start();\n            treeView1.Nodes.Add(node);\n            Console.WriteLine(\"End : \" + watch.Elapsed.ToString());\n}\n</code></pre>\n\n<p>And i called AddNodeToTreeView method. But the elapsed time was slow too.</p>\n\n<p>Why async and begin invoke is too slow? How should i solve this problem?</p>\n"}, {"tags": ["c", "ncurses"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1536138389, "post_id": 52181084, "comment_id": 91312421, "body": "Sounds like you need to use pipes to read in the output from the subprocess so you can output it via ncurses"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6635723, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ziVHn.png?s=128&g=1", "display_name": "mikkel1156", "link": "https://stackoverflow.com/users/6635723/mikkel1156"}, "edited": false, "score": 0, "creation_date": 1536147415, "post_id": 52181834, "comment_id": 91317975, "body": "Finally got it working, didn&#39;t know you needed to do that, simple fix overlooked. Thank you very much!"}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 0, "last_activity_date": 1536140067, "creation_date": 1536140067, "answer_id": 52181834, "question_id": 52181084, "link": "https://stackoverflow.com/questions/52181084/execvp-output-creates-indent-for-ncurses/52181834#52181834", "title": "execvp() output creates indent for ncurses", "body": "<p>If you've initialized the screen with ncurses, that's in <em>raw mode</em>, which (among other things) makes newline no longer map to carriage-return/line-feed.</p>\n\n<p>If you're going to run a subshell, then on the way you should restore the terminal modes, and then reinstate the raw mode on return.  Those are done with <a href=\"https://invisible-island.net/ncurses/man/curs_kernel.3x.html#h3-reset_prog_mode_-reset_shell_mode\" rel=\"nofollow noreferrer\">reset_shell_mode</a> and reset_prog_mode.</p>\n"}], "owner": {"reputation": 41, "user_id": 6635723, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ziVHn.png?s=128&g=1", "display_name": "mikkel1156", "link": "https://stackoverflow.com/users/6635723/mikkel1156"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 52181834, "answer_count": 1, "score": 0, "last_activity_date": 1536140067, "creation_date": 1536137830, "question_id": 52181084, "link": "https://stackoverflow.com/questions/52181084/execvp-output-creates-indent-for-ncurses", "title": "execvp() output creates indent for ncurses", "body": "<p>I'm having a weird problem with my current project. Using ncurses I'm making a shell based on <em>lsh</em>, before I introduced ncurses it was working as one would expect with just writing the output from execvp. Now however, the length of the output makes an indent before my prompt which actually also shifts the X coordination with it to the side (so the indent doesn't seem to be part of the line).</p>\n\n<p>I'm thinking it is due to forking into a child process without ncurses (or something along those lines).</p>\n\n<p>You can see the full code <a href=\"https://github.com/mikkel1156/Shell-Forum/blob/master/shell.c\" rel=\"nofollow noreferrer\">here</a> but this here is the part where execvp is run:</p>\n\n<pre><code>int shell_launch(char **args) {\n    pid_t pid;\n    int status;\n\n    pid = fork();\n    if (pid == 0) {\n        //  Child process.\n\n        //  Check if user is trying to run an allowed program.\n        for (int i = 0; i &lt; arrlen(allowed_cmds); i++) {\n            if (strcmp(allowed_cmds[i], args[0]) == 0) {\n                if (execvp(args[0], args) == -1) {\n                    perror(\"shell\");\n                }\n            }\n        }\n        exit(EXIT_FAILURE);\n    } else if (pid &lt; 0) {\n        //  Error forking\n        perror(\"shell\");\n    } else {\n        //  Parent process\n        do {\n            waitpid(pid, &amp;status, WUNTRACED);\n        } while (!WIFEXITED(status) &amp;&amp; !WIFSIGNALED(status));\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "edited": false, "score": 0, "creation_date": 1536148171, "post_id": 52179719, "comment_id": 91318492, "body": "the code I am looking at uses the following declaration"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1536133800, "creation_date": 1536133800, "answer_id": 52179856, "question_id": 52179719, "link": "https://stackoverflow.com/questions/52179719/memory-allocation-for-pointer-to-a-char-array/52179856#52179856", "title": "Memory allocation for pointer to a char array", "body": "<p>The second line <a href=\"https://cdecl.org/\" rel=\"nofollow noreferrer\">decodes as</a> \"declare names as pointer to array 3 of char\".</p>\n\n<p>I've been writing C for over 25 years, and I've never used such a variable.</p>\n\n<p>Anyway, I guess this should work:</p>\n\n<pre><code>char data[3];\nchar (*names) = data;\n</code></pre>\n\n<p>Note that the variable name, <code>names</code>, is highly misleading since the variable holds only 3 single characters, as opposed to <code>char *names[3]</code> which is three pointers to characters and thus easily could be used to hold three strings.</p>\n\n<p>Also note that the above code makes little sense, you could just use <code>data</code> directly if you had it.</p>\n"}, {"comments": [{"owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "edited": false, "score": 0, "creation_date": 1536147926, "post_id": 52179893, "comment_id": 91318309, "body": "thanks @paxdiablo, Can you please explain why I would need char (<i>names)[3] instead of char</i> names[3] ,  char pointers just point to the starting address of a string so it&#39;s not like  pointer to an array of char of length 3 is going to make any difference."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 3, "last_activity_date": 1536135115, "last_edit_date": 1536135115, "creation_date": 1536133918, "answer_id": 52179893, "question_id": 52179719, "link": "https://stackoverflow.com/questions/52179719/memory-allocation-for-pointer-to-a-char-array/52179893#52179893", "title": "Memory allocation for pointer to a char array", "body": "<p>When faced with questions like this, you can usually turn to <code>cdecl</code> (online version <a href=\"https://cdecl.org/\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>cdecl&gt; explain char *names[3]\ndeclare names as array 3 of pointer to char\n\ncdecl&gt; explain char (*names)[3]\ndeclare names as pointer to array 3 of char\n</code></pre>\n\n<p>So the former creates array of three pointers-to-char:</p>\n\n<pre><code>+----------+\n| names[0] | -&gt; char\n|      [1] | -&gt; char\n|      [2] | -&gt; char\n+----------+\n</code></pre>\n\n<p>And the latter creates a <em>single</em> pointer to a char array of size three.</p>\n\n<pre><code>+-------+\n| names | -&gt; char, char, char - no, not a dance step :-)\n+-------+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 1, "last_activity_date": 1536134451, "last_edit_date": 1536134451, "creation_date": 1536134072, "answer_id": 52179941, "question_id": 52179719, "link": "https://stackoverflow.com/questions/52179719/memory-allocation-for-pointer-to-a-char-array/52179941#52179941", "title": "Memory allocation for pointer to a char array", "body": "<p>The first an array of three pointers to <code>char</code>.  </p>\n\n<p>The second is a pointer to an array of three <code>char</code>s.<br>\n(Read it as \"<code>*names</code> is a <code>char[3]</code>\").</p>\n\n<p>You can create such a pointer by taking the address of an array of three <code>char</code>s:</p>\n\n<pre><code>char name[3];\nchar (*names)[3] = &amp;name;\n</code></pre>\n\n<p>or dynamically in the normal way:</p>\n\n<pre><code>char (*names)[3] = malloc(sizeof(*names)); /* or sizeof(char[3]), if you're fond of bugs */\n</code></pre>\n\n<p>or through the regular array-to-pointer conversion:</p>\n\n<pre><code>char stuff[2][3] = {};\nchar (*names)[3] = stuff; /* Same as &amp;stuff[0], as normal. */ \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1536135186, "last_edit_date": 1536135186, "creation_date": 1536134365, "answer_id": 52180043, "question_id": 52179719, "link": "https://stackoverflow.com/questions/52179719/memory-allocation-for-pointer-to-a-char-array/52180043#52180043", "title": "Memory allocation for pointer to a char array", "body": "<ul>\n<li><code>char *names[3]</code> is an array of 3 <code>char</code> pointers.</li>\n<li><code>char (*names)[3]</code> is an array pointer (pointer to array) to an array of 3 characters <code>char[3]</code>.</li>\n</ul>\n\n<p>So these two have fundamentally different meanings! Don't confuse them with each other.</p>\n\n<p>If you wish to allocate <em>an array of pointers</em>, then you can do it as in either of these examples:</p>\n\n<pre><code>char** names = malloc(3 * sizeof(*names) );\nchar** names = malloc(sizeof(char*[3]));\nchar** names = calloc(3, sizeof(char*));\n</code></pre>\n\n<p>These are all equivalent (but calloc also sets all pointers to NULL). <code>names</code> will be a pointer to the first element in the array. It will be a pointer to a <code>char*</code>.</p>\n\n<p>If you wish to allocate <em>an array</em> and point to the first element, simply do:</p>\n\n<pre><code>char* names = malloc(3 * sizeof(*names));\n</code></pre>\n\n<p>Alternatively, you can use the array pointer syntax and point to the array as whole:</p>\n\n<pre><code>char (*names)[3] = malloc(sizeof(*names));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1536134572, "creation_date": 1536134572, "answer_id": 52180119, "question_id": 52179719, "link": "https://stackoverflow.com/questions/52179719/memory-allocation-for-pointer-to-a-char-array/52180119#52180119", "title": "Memory allocation for pointer to a char array", "body": "<blockquote>\n  <p>and how to read this operators?</p>\n</blockquote>\n\n<p>Let's take the second one as it is the more complex of the two:  </p>\n\n<pre><code>char (*names)[3]; \n</code></pre>\n\n<p>When you are looking at a complex definition like this, the best way to attack it is to start in the middle and work your way out. \u201cStarting in the middle\u201d means starting at the variable name, which is <code>names</code>.<br>\n\u201cWorking your way out\u201d means looking to the right for the nearest item (nothing in this case; the right parenthesis stops you short), then looking to the left (a pointer denoted by the asterisk), then looking to the right (an array of 3), then looking to the left (char).<br>\nThis right-left-right motion works with most declarations. </p>\n\n<p>This means <code>names</code> is a pointer to an char array of size 3.\nThis is very strange declaration but that is how it is read.</p>\n\n<blockquote>\n  <p>If I want to allocate memory for them dynamically how to do so?</p>\n</blockquote>\n\n<p>Now that you know what the declaration means, memory allocation becomes easy:  </p>\n\n<pre><code>char (*names)[3] = malloc(3 * sizeof(char));\n</code></pre>\n"}], "owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 1, "accepted_answer_id": 52179893, "answer_count": 5, "score": 0, "last_activity_date": 1536135186, "creation_date": 1536133412, "last_edit_date": 1536133607, "question_id": 52179719, "link": "https://stackoverflow.com/questions/52179719/memory-allocation-for-pointer-to-a-char-array", "title": "Memory allocation for pointer to a char array", "body": "<p>would someone please explain the difference between </p>\n\n<pre><code>char *names[3] \n</code></pre>\n\n<p>and </p>\n\n<pre><code>char (*names)[3] \n</code></pre>\n\n<p>and how to read this operators?<br>\nIf I want to allocate memory for them dynamically how to do so?</p>\n\n<p>For the first case, I think it's just an array of <code>char*</code> of length 3, so no memory allocation not applicable. But in second case how to do memory allocation? </p>\n"}, {"tags": ["c", "data-structures", "linked-list", "binary-search-tree"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1536128726, "post_id": 52178362, "comment_id": 91306802, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, take <a href=\"http://stackoverflow.com/tour\">the SO tour</a>, read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, and <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1536247340, "post_id": 52178362, "comment_id": 91364041, "body": "It&#39;s kind of difficult to help you with your code if you don&#39;t post it. Please post your code so that we can examine it. Otherwise there&#39;s no way we can make any recommendations."}], "owner": {"reputation": 1, "user_id": 10318481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b9fce0d432d1d8d4cccf20e0f94262e?s=128&d=identicon&r=PG&f=1", "display_name": "Daniyal Tariq", "link": "https://stackoverflow.com/users/10318481/daniyal-tariq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536138338, "creation_date": 1536128577, "last_edit_date": 1536138338, "question_id": 52178362, "link": "https://stackoverflow.com/questions/52178362/adding-linked-lists-to-a-bst-if-key-is-identical", "title": "Adding Linked Lists to a BST if key is identical", "body": "<p>I have built a BST dict in C. Now I have to tweak it to make it more efficient by making a linked list of equal keys. The data for each key is a struct. I am rewriting the code but I am confused as to how I will implement it in C. Can someone help?</p>\n"}, {"tags": ["c", "linux", "linker", "static-libraries"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536128706, "post_id": 52178358, "comment_id": 91306790, "body": "Strip the symbols from the final executable?"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1536129769, "post_id": 52178358, "comment_id": 91307367, "body": "would it be possible to show some code (mcve)[<a href=\"https://stackoverflow.com/help/mcve]\">stackoverflow.com/help/mcve]</a>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 9054412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e48e9c9d95738c80ae47ceb93acc68f?s=128&d=identicon&r=PG&f=1", "display_name": "coddygeek", "link": "https://stackoverflow.com/users/9054412/coddygeek"}, "edited": false, "score": 0, "creation_date": 1536147854, "post_id": 52182217, "comment_id": 91318258, "body": "This -ffunction not found working.suppose a.c contain xx() and yy(),and a.o is made using flag ffunction-sections and stat.a made out of a.o,then it links to a test.c which give a binary test on compilation .On verification with nm test shows both symbols xx and yy.@rantan pan"}], "tags": [], "owner": {"reputation": 91, "user_id": 10240559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AKDeE.png?s=128&g=1", "display_name": "rantan pan", "link": "https://stackoverflow.com/users/10240559/rantan-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1536141232, "last_edit_date": 1592644375, "creation_date": 1536141232, "answer_id": 52182217, "question_id": 52178358, "link": "https://stackoverflow.com/questions/52178358/how-to-prevent-all-symbols-from-static-library-to-load-and-why-other-symbols-fro/52182217#52182217", "title": "How to prevent all symbols from static library to load and why other symbols from same .o file get exported to test while linking static library", "body": "<ol>\n<li>I would like to know why the symbols qq and rr do not get exported ?</li>\n</ol>\n<p>You have to inform the linker of your intention <a href=\"https://stackoverflow.com/questions/14116420/how-to-force-gcc-to-link-an-unused-static-library\">How to force gcc to link an unused static library</a></p>\n<blockquote>\n<p>gcc -L./ -o test test.c -Wl,--whole-archive stat.a -Wl,--no-whole-archive</p>\n</blockquote>\n<ol start=\"2\">\n<li>Is there any method to prevent any other symbols than xx being loaded?</li>\n</ol>\n<p>From <a href=\"https://stackoverflow.com/questions/5307348/how-do-i-include-only-used-symbols-when-statically-linking-with-gcc\">How do I include only used symbols when statically linking with gcc?</a></p>\n<blockquote>\n<p>gcc -ffunction-sections -c a.c</p>\n<p>gcc -L./ -o test test.c -Wl,--gc-sections stat.a</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 105, "user_id": 9054412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e48e9c9d95738c80ae47ceb93acc68f?s=128&d=identicon&r=PG&f=1", "display_name": "coddygeek", "link": "https://stackoverflow.com/users/9054412/coddygeek"}, "edited": false, "score": 0, "creation_date": 1536246242, "post_id": 52187976, "comment_id": 91363350, "body": "@coddygeek Welcome to Stackoverflow! Please check out <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 0, "last_activity_date": 1536158811, "creation_date": 1536158811, "answer_id": 52187976, "question_id": 52178358, "link": "https://stackoverflow.com/questions/52178358/how-to-prevent-all-symbols-from-static-library-to-load-and-why-other-symbols-fro/52187976#52187976", "title": "How to prevent all symbols from static library to load and why other symbols from same .o file get exported to test while linking static library", "body": "<p>Here is an implementation of your scenario:</p>\n\n<p><strong>a.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid xx(void)\n{\n    puts(__func__);\n}\n\nvoid yy(void)\n{\n    puts(__func__);\n}\n</code></pre>\n\n<p><strong>b.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid nn(void)\n{\n    puts(__func__);\n}\n\nvoid mm(void)\n{\n    puts(__func__);\n}\n</code></pre>\n\n<p><strong>c.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid qq(void)\n{\n    puts(__func__);\n}\n\nvoid rr(void)\n{\n    puts(__func__);\n}\n</code></pre>\n\n<p><strong>test.c</strong></p>\n\n<pre><code>extern void xx(void);\n\nint main(void)\n{\n    xx();\n    return 0;\n}\n</code></pre>\n\n<p>Compile all the <code>*.c</code> files to <code>*.o</code> files:</p>\n\n<pre><code>$ gcc -Wall -c a.c b.c c.c test.c\n</code></pre>\n\n<p>Make a static library <code>stat.a</code>, containing <code>a.o</code>, <code>b.o</code>, <code>c.o</code>:</p>\n\n<pre><code>$ ar rcs stat.a a.o b.o c.o\n</code></pre>\n\n<p>Link program <code>test</code>, inputting <code>test.o</code> and <code>stat.a</code>:</p>\n\n<pre><code>$ gcc -o test test.o stat.a\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>$ ./test\nxx\n</code></pre>\n\n<p>Let's see the symbol tables of the object files in <code>stat.a</code>:</p>\n\n<pre><code>$ nm stat.a\n\na.o:\n0000000000000000 r __func__.2250\n0000000000000003 r __func__.2254\n                 U _GLOBAL_OFFSET_TABLE_\n                 U puts\n0000000000000000 T xx\n0000000000000013 T yy\n\nb.o:\n0000000000000000 r __func__.2250\n0000000000000003 r __func__.2254\n                 U _GLOBAL_OFFSET_TABLE_\n0000000000000013 T mm\n0000000000000000 T nn\n                 U puts\n\nc.o:\n0000000000000000 r __func__.2250\n0000000000000003 r __func__.2254\n                 U _GLOBAL_OFFSET_TABLE_\n                 U puts\n0000000000000000 T qq\n0000000000000013 T rr\n</code></pre>\n\n<p>The definitions (<code>T</code>) of <code>xx</code>, <code>yy</code> are in member <code>stat.a(a.o)</code>. Definitions of <code>nn</code>, <code>mm</code>\nare in <code>stat.a(b.o)</code>. Definitions of <code>qq</code>, <code>rr</code> are in <code>stat.a(c.o)</code>.</p>\n\n<p>Let's see which of those symbols are also defined in the symbol table of the program <code>test</code>:</p>\n\n<pre><code>$ nm test | egrep 'T (xx|yy|qq|rr|nn|mm)'\n000000000000064a T xx\n000000000000065d T yy\n</code></pre>\n\n<p><code>xx</code>, which is <em>called</em> in the program, is defined. <code>yy</code>, which is <em>not</em> called, is also\ndefined. <code>nn</code>, <code>mm</code>, <code>qq</code> and <code>rr</code>, none of which are called, are all absent.</p>\n\n<p>That's what you've observed.</p>\n\n<blockquote>\n  <p>I would like to know why the symbols <code>qq</code> and <code>rr</code> do not get exported?</p>\n</blockquote>\n\n<p>What is a <em>static library</em>, such as <code>stat.a</code>, and what is its special role in a linkage?</p>\n\n<p>It is an <a href=\"https://linux.die.net/man/1/ar\" rel=\"nofollow noreferrer\"><code>ar</code> archive</a> that conventionally - but not necessarily - contains nothing\nbut object files. You can offer such an archive to the linker from which to select the\nobject files it <em>needs</em>, if any, to carry on the linkage. The linker <em>needs</em> those object\nfiles in the archive that provide definitions for symbols that have been\nreferenced, but not yet defined, in input files it has already linked. The\nlinker extracts the <em>needed</em> object files from the archive and inputs them to the\nlinkage, exactly as if they were individually named input files and the static library\nwas not mentioned at all.</p>\n\n<p>So what the linker does with an input static library is different from what it does\nwith an input <em>object file</em>. Any input object file is linked into the output file <em>unconditionally</em>\n(whether it is needed or not).</p>\n\n<p>In this light, let's redo the linkage of <code>test</code> with some diagnostics (<code>-trace)</code> to show what\nfiles are actually linked:</p>\n\n<pre><code>$ gcc -o test test.o stat.a -Wl,--trace\n/usr/bin/x86_64-linux-gnu-ld: mode elf_x86_64\n/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/Scrt1.o\n/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/crti.o\n/usr/lib/gcc/x86_64-linux-gnu/7/crtbeginS.o\ntest.o\n(stat.a)a.o\nlibgcc_s.so.1 (/usr/lib/gcc/x86_64-linux-gnu/7/libgcc_s.so.1)\n/lib/x86_64-linux-gnu/libc.so.6\n(/usr/lib/x86_64-linux-gnu/libc_nonshared.a)elf-init.oS\n/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\n/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\nlibgcc_s.so.1 (/usr/lib/gcc/x86_64-linux-gnu/7/libgcc_s.so.1)\n/usr/lib/gcc/x86_64-linux-gnu/7/crtendS.o\n/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/crtn.o\n</code></pre>\n\n<p>Apart from all the boiler-plate files for a C program linkage that <code>gcc</code> adds by\ndefault, the only files of <em>ours</em> in the linkage are the two object files:</p>\n\n<pre><code>test.o\n(stat.a)a.o\n</code></pre>\n\n<p>The linkage:</p>\n\n<pre><code>$ gcc -o test test.o stat.a\n</code></pre>\n\n<p>is <em>exactly the same</em> as the linkage:</p>\n\n<pre><code>$ gcc -o test test.o a.o\n</code></pre>\n\n<p>Let's think that through.</p>\n\n<ul>\n<li><code>test.o</code> was the first linker input. This object file was linked unconditionally into the program.</li>\n<li><code>test.o</code> contains a reference (specifically, a function call) to <code>xx</code> but no definition of the function <code>xx</code>.</li>\n<li>So the linker now needs to find a definition of <code>xx</code> to complete the linkage.</li>\n<li>The next linker input is the static library <code>stat.a</code>.</li>\n<li>The linker searches <code>stat.a</code> for an object file that contains a defintion of <code>xx</code>.</li>\n<li>It finds <code>a.o</code>. It extracts <code>a.o</code> from the archive and links it into the program.</li>\n<li>There are no other unresolved symbol references in the linkage for which the\nlinker can find definitions in <code>stat.a(b.o)</code> or <code>stat(c.o)</code>. So neither of those\nobject files is extracted and linked.</li>\n</ul>\n\n<p>By extracting an linking (just) <code>stat.a(a.o)</code> the linker has got a definition\nof <code>xx</code> that it needed to resolved the function call in <code>test.o</code>. But <code>a.o</code> <em>also</em> contains\nthe definition of <code>yy</code>. So that definition is also linked into the program.\n<code>nn</code>, <code>mm</code>, <code>qq</code> and <code>rr</code> are not defined in the program because none of them\nare defined in the object files that were linked into the program.</p>\n\n<p>That's the answer to your first question. Your second is:</p>\n\n<blockquote>\n  <p>Is there any method to prevent any other symbols than <code>xx</code> being loaded?</p>\n</blockquote>\n\n<p>There are at least two ways.</p>\n\n<p>One is simply to define each of <code>xx</code>, <code>yy</code>, <code>nn</code>, <code>mm</code>, <code>qq</code>, <code>rr</code> <em>in a source\nfile by itself</em>. Then compile object files <code>xx.o</code>, <code>yy.o</code>, <code>nn.o</code>, <code>mm.o</code>, <code>qq.o</code>, <code>rr.o</code>\nand archive all of them in <code>stat.a</code>. Then, if the linker ever needs to find an\nobject file in <code>stat.a</code> that defines <code>xx</code>, it will find <code>xx.o</code>, extract and link it,\nand the definition of <code>xx</code> <em>alone</em> will be added to linkage.</p>\n\n<p>There's another way that does not require you code just one function in each source\nfile. This way depends on the fact that an ELF object file, as produced by the\ncompiler, is composed of various <em>sections</em> and these sections are in fact the\nunits that the linker distinguishes and merges together into the output file. By\ndefault, there is a standard ELF section for each kind of symbol. The\ncompiler places all of the function definitions in one <em>code</em> section and\nall data definitions in an appropriate <em>data</em> section. The reason that your\nlinkage of program <code>test</code> contains the definitions of both <code>xx</code> and <code>yy</code> is that\nthe compiler has placed both of these definitions in the single code section of <code>a.o</code>,\nso the linker can either merge that code section into the program, or not: it can\nonly link the definitions of <code>xx</code> <em>and</em> <code>yy</code>, or neither of them, so it is obliged\nto link both, even though only <code>xx</code> is needed. Let's see the disassembly of the code section of <code>a.o</code>. By default the\ncode section is is called <code>.text</code>:</p>\n\n<pre><code>$ objdump -d a.o\n\na.o:     file format elf64-x86-64\n\nDisassembly of section .text:\n\n0000000000000000 &lt;xx&gt;:\n   0:   55                      push   %rbp\n   1:   48 89 e5                mov    %rsp,%rbp\n   4:   48 8d 3d 00 00 00 00    lea    0x0(%rip),%rdi        # b &lt;xx+0xb&gt;\n   b:   e8 00 00 00 00          callq  10 &lt;xx+0x10&gt;\n  10:   90                      nop\n  11:   5d                      pop    %rbp\n  12:   c3                      retq\n\n0000000000000013 &lt;yy&gt;:\n  13:   55                      push   %rbp\n  14:   48 89 e5                mov    %rsp,%rbp\n  17:   48 8d 3d 00 00 00 00    lea    0x0(%rip),%rdi        # 1e &lt;yy+0xb&gt;\n  1e:   e8 00 00 00 00          callq  23 &lt;yy+0x10&gt;\n  23:   90                      nop\n  24:   5d                      pop    %rbp\n  25:   c3                      retq\n</code></pre>\n\n<p>There you see the definitions of <code>xx</code> and <code>yy</code>, both in the <code>.text</code> section.</p>\n\n<p>But you can <em>ask</em> the compiler to place the definition of each global symbol\n<em>in its own section</em> in the object file. Then the linker can seperate the code\nsection for any function definition from any other, and you can ask the linker\nto throw away any sections that aren't used in the output file. Let's try that.</p>\n\n<p>Compile all the source files again, this time asking for a separate section per symbol:</p>\n\n<pre><code>$ gcc -Wall -ffunction-sections -fdata-sections -c a.c b.c c.c test.c\n</code></pre>\n\n<p>Now look again at the disassembly of <code>a.o</code>:</p>\n\n<pre><code>$ objdump -d a.o\n\na.o:     file format elf64-x86-64\n\n\nDisassembly of section .text.xx:\n\n0000000000000000 &lt;xx&gt;:\n   0:   55                      push   %rbp\n   1:   48 89 e5                mov    %rsp,%rbp\n   4:   48 8d 3d 00 00 00 00    lea    0x0(%rip),%rdi        # b &lt;xx+0xb&gt;\n   b:   e8 00 00 00 00          callq  10 &lt;xx+0x10&gt;\n  10:   90                      nop\n  11:   5d                      pop    %rbp\n  12:   c3                      retq\n\nDisassembly of section .text.yy:\n\n0000000000000000 &lt;yy&gt;:\n   0:   55                      push   %rbp\n   1:   48 89 e5                mov    %rsp,%rbp\n   4:   48 8d 3d 00 00 00 00    lea    0x0(%rip),%rdi        # b &lt;yy+0xb&gt;\n   b:   e8 00 00 00 00          callq  10 &lt;yy+0x10&gt;\n  10:   90                      nop\n  11:   5d                      pop    %rbp\n  12:   c3                      retq\n</code></pre>\n\n<p>Now we've got <em>two</em> code sections in <code>a.o</code>: <code>.text.xx</code>, containing only the definition of <code>xx</code>,\nand <code>.text.yy</code>, containing only the definition of <code>yy</code>. The linker can merge either of\nthese sections into a program and not merge the other.</p>\n\n<p>Rebuild <code>stat.a</code></p>\n\n<pre><code>$ rm stat.a\n$ ar rcs stat.a a.o b.o c.o\n</code></pre>\n\n<p>Relink the program, this time asking the linker to discard unused input sections\n(<code>-gc-sections</code>). We'll also ask it to trace the files it loads (<code>-trace</code>)\nand to print a mapfile for us (<code>-Map=mapfile</code>):</p>\n\n<pre><code>$ gcc -o test test.o stat.a -Wl,-gc-sections,-trace,-Map=mapfile\n/usr/bin/x86_64-linux-gnu-ld: mode elf_x86_64\n/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/Scrt1.o\n/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/crti.o\n/usr/lib/gcc/x86_64-linux-gnu/7/crtbeginS.o\ntest.o\n(stat.a)a.o\nlibgcc_s.so.1 (/usr/lib/gcc/x86_64-linux-gnu/7/libgcc_s.so.1)\n/lib/x86_64-linux-gnu/libc.so.6\n(/usr/lib/x86_64-linux-gnu/libc_nonshared.a)elf-init.oS\n/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\n/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\nlibgcc_s.so.1 (/usr/lib/gcc/x86_64-linux-gnu/7/libgcc_s.so.1)\n/usr/lib/gcc/x86_64-linux-gnu/7/crtendS.o\n/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/crtn.o\n</code></pre>\n\n<p>The <code>-trace</code> output is exactly the same as before. But check again which of our\nsymbols are defined in the program:</p>\n\n<pre><code>$ nm test | egrep 'T (xx|yy|qq|rr|nn|mm)'\n000000000000064a T xx\n</code></pre>\n\n<p>Only <code>xx</code>, which is what you want.</p>\n\n<p>The output of the program is the same as before:</p>\n\n<pre><code>$ ./test\nxx\n</code></pre>\n\n<p>Finally look at the mapfile. Near the top you see:</p>\n\n<p><strong>mapfile</strong></p>\n\n<pre><code>...\nDiscarded input sections\n...\n...\n .text.yy       0x0000000000000000       0x13 stat.a(a.o)\n...\n...\n</code></pre>\n\n<p>The linker was able to throw away the redundant code section <code>.text.yy</code> from\nthe input file <code>stat.a(a.o)</code>. That's why the redundant definition of <code>yy</code> is\nno longer in the program.</p>\n"}], "owner": {"reputation": 105, "user_id": 9054412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e48e9c9d95738c80ae47ceb93acc68f?s=128&d=identicon&r=PG&f=1", "display_name": "coddygeek", "link": "https://stackoverflow.com/users/9054412/coddygeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 52187976, "answer_count": 2, "score": 1, "last_activity_date": 1536158811, "creation_date": 1536128554, "last_edit_date": 1536132691, "question_id": 52178358, "link": "https://stackoverflow.com/questions/52178358/how-to-prevent-all-symbols-from-static-library-to-load-and-why-other-symbols-fro", "title": "How to prevent all symbols from static library to load and why other symbols from same .o file get exported to test while linking static library", "body": "<p>Suppose there are three c files, say <code>a.c</code> contains functions  <code>xx()</code>, <code>yy()</code> and <code>b.c</code> contains <code>nn()</code>, <code>mm()</code> and <code>c.c</code> contains <code>qq()</code>, <code>rr()</code>.</p>\n\n<p>I made a static library <code>stat.a</code> out of <code>a.o</code>, <code>b.o</code> and <code>c.o</code>. If I link <code>stat.a</code> into a test which calls <code>xx()</code>, then symbol <code>yy()</code> also gets exported: <code>nm test</code> has both symbols <code>xx</code> and <code>yy</code>.</p>\n\n<ol>\n<li>I would like to know why the symbols <code>qq</code> and <code>rr</code> do not get exported ?</li>\n<li>Is there any method to prevent any other symbols than <code>xx</code> being loaded?</li>\n</ol>\n"}, {"tags": ["c", "file", "errno"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1536129196, "post_id": 52178334, "comment_id": 91307052, "body": "If you want to report back the cause of the error to the user, then using <code>errno</code> is indeed what you want. If you want to know if a file <i>exists</i>, then the absence of an <code>ENOENT</code> does not guarantee that (you could have gotten another error like <code>EPERM</code> eg., or the file could have been created as part of the <code>fopen</code> call, or ...). Can you describe in a bit more detail what you&#39;re trying to achieve ?"}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1536129333, "post_id": 52178334, "comment_id": 91307117, "body": "I shall post code. wait a minute."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 3, "last_activity_date": 1536130898, "last_edit_date": 1536130898, "creation_date": 1536130343, "answer_id": 52178848, "question_id": 52178334, "link": "https://stackoverflow.com/questions/52178334/will-errno-enoent-be-a-sufficient-check-to-check-if-file-exists-in-c/52178848#52178848", "title": "Will errno == ENOENT be a sufficient check to check if file exists in C?", "body": "<p><code>fopen</code> needs to do lots of stuff and checking before the file is opened. <code>ENOENT</code> <em>implies</em> that the file does not exist, but <em>file not existing</em> does not imply <code>ENOENT</code>.</p>\n\n<p>It is possible for a file to not exist and you to get another error, such as <code>EACCES</code> for not being able to read the parent directory for example.</p>\n\n<hr>\n\n<p>On the other hand, <code>ENOENT</code> from <code>fopen</code> does not mean that some other process couldn't have created the file even before <code>fopen</code> returns or before you're inspecting the <code>errno</code> and so on; this is the reason why C11 added the <code>x</code> flag for opening a file for <em>writing</em> in exclusive mode - failing if the file already exists.</p>\n\n<hr>\n\n<p>To sum it up: if you get <code>ENOENT</code>, the file did not exist when you tried opening it. If you get some other error, then each other error code would belong to one of 3 these classes - that it is certain that either</p>\n\n<ul>\n<li>the file existed, or </li>\n<li>it <em>cannot have existed</em></li>\n<li>or it might have existed at the time</li>\n</ul>\n\n<p>at the time of opening. It is up to you and your required logic how you'd handle these other errors. A simple way would be to refuse to continue processing, reporting the error to the user.</p>\n"}], "owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "accepted_answer_id": 52178848, "answer_count": 1, "score": 1, "last_activity_date": 1536131259, "creation_date": 1536128452, "last_edit_date": 1536131259, "question_id": 52178334, "link": "https://stackoverflow.com/questions/52178334/will-errno-enoent-be-a-sufficient-check-to-check-if-file-exists-in-c", "title": "Will errno == ENOENT be a sufficient check to check if file exists in C?", "body": "<p>Using PellesC on Windows 8.1.</p>\n\n<p>I know this topic has been addressed many times with many solutions. I have read solutions stating the usage of <code>CreateFile</code>, <code>PathFileExists</code>, <code>GetFileAttributes</code>, <code>_access</code> which I somewhat understand.</p>\n\n<p>I have also read an important point about race conditions in the answer to the questions <a href=\"https://stackoverflow.com/questions/44741326/quickest-way-to-check-whether-or-not-file-exists\">Quickest way to check whether or not file exists</a>\nand <a href=\"https://stackoverflow.com/questions/230062/whats-the-best-way-to-check-if-a-file-exists-in-c-cross-platform\">What&#39;s the best way to check if a file exists in C? (cross platform)</a>.</p>\n\n<p>So if I open a file using <code>fopen()</code> in C and when it fails (for any reason) and passes <code>NULL</code> back; then can I further check for <code>errno == ENOENT</code> and be content with it and report correctly that the file does not exists.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nint file_exists(char filename[]) {\n    int err = 0; //copy of errno at specific instance\n    int r = 0;   //1 for exists and 0 for not exists\n    FILE *f = NULL;\n\n    //validate\n    if (filename == NULL) {\n        puts(\"Error: bad filename.\");\n        return 0;\n    }\n\n    printf(\"Checking if file %s exists...\\n\", filename);\n\n    //check\n    errno = 0;\n    f = fopen(filename, \"r\");\n    err = errno;\n    if (f == NULL) {\n        switch (errno) {\n          case ENOENT:\n            r = 0;\n            break;\n          default:\n            r = 1;\n        }\n        printf(\"errno = %d\\n%s\\n\", err, strerror(err));\n    } else {\n        fclose(f);\n        r = 1;\n    }\n\n    if (r == 0) {\n        puts(\"It does not.\");\n    } else {\n        puts(\"It does.\");\n    }\n\n    return r;\n}\n</code></pre>\n"}, {"tags": ["c", "pic", "mplab"], "answers": [{"tags": [], "owner": {"reputation": 809, "user_id": 9466270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UGJdFqyAs24/AAAAAAAAAAI/AAAAAAAAAEE/JCJU2OmxEk0/photo.jpg?sz=128", "display_name": "Hein Wessels", "link": "https://stackoverflow.com/users/9466270/hein-wessels"}, "is_accepted": true, "score": 0, "last_activity_date": 1536128019, "creation_date": 1536128019, "answer_id": 52178233, "question_id": 52178080, "link": "https://stackoverflow.com/questions/52178080/for-loop-not-working-properly-in-mplab-ide-for-pic-micrcontroller-program/52178233#52178233", "title": "For Loop not working properly in MPLAB IDE for PIC Micrcontroller Program", "body": "<p>It actuality the LED turns on and off <s>5</s> 2 times (see code), it just happens so fast that it looks like it's happening once. This is because there is no delay between where you turn it off and on again. Add this little snippet to your code:</p>\n\n<pre><code>//other code...\n\nfor(int i=0;i&lt;2;i++)   // The 2 here means the LED will only flash twice!\n{\n    led();   \n    __delay(500);\n}\n\n// other code...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "is_accepted": false, "score": 0, "last_activity_date": 1536128082, "creation_date": 1536128082, "answer_id": 52178245, "question_id": 52178080, "link": "https://stackoverflow.com/questions/52178080/for-loop-not-working-properly-in-mplab-ide-for-pic-micrcontroller-program/52178245#52178245", "title": "For Loop not working properly in MPLAB IDE for PIC Micrcontroller Program", "body": "<p>If you expand out what you are doing in the loop, it becomes</p>\n\n<pre><code>RB0=~RB0;\n__delay_ms(delay);\nRB0=~RB0; \n// No delay here before it switches back\nRB0=~RB0;\n__delay_ms(delay);\nRB0=~RB0; \nRB0=~RB0;\n__delay_ms(delay);\nRB0=~RB0;\n</code></pre>\n\n<p>Notice that there is no delay between the LED changing states when it leaves the routine.  Add another delay after changing the state.</p>\n\n<pre><code>void led(void)\n{\n    RB0=~RB0;\n    __delay_ms(delay);\n    RB0=~RB0; \n    __delay_ms(delay);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10318408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1fdfb6c85a2e70812372ca8fd0db94e?s=128&d=identicon&r=PG&f=1", "display_name": "Faizan Zaheer", "link": "https://stackoverflow.com/users/10318408/faizan-zaheer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 52178233, "answer_count": 2, "score": 1, "last_activity_date": 1536146826, "creation_date": 1536127384, "last_edit_date": 1536146826, "question_id": 52178080, "link": "https://stackoverflow.com/questions/52178080/for-loop-not-working-properly-in-mplab-ide-for-pic-micrcontroller-program", "title": "For Loop not working properly in MPLAB IDE for PIC Micrcontroller Program", "body": "<p>I am running the below-given program but the problem is that for loop runs only once and turns on the LED and then Turns OFF. It should run for 5 times.\nBelow is the code:</p>\n\n<pre><code>void led(void)\n{\n    RB0=~RB0;\n    __delay_ms(delay);\n    RB0=~RB0; \n}\n\nvoid main(void) \n{\n    ANSEL = 0;                        //Disable Analog PORTA\n    TRISA0 = 1;                       //Make RA0 as Input\n    TRISB = 0x00;\n    PORTA = 0;\n    PORTB = 0x01;\n     // RB0=0;\n     while(1)\n     {\n         //Switch Pressed\n         if(swch==0)                      //Check for Switch Pressed\n         {\n             __delay_ms(delay_debounce);   //Switch Debounce Delay\n             if(swch==0)                      //Check again Switch Pressed                     \n             { \n             //Blink LED at PORT RB0    \n                 for (int i = 0; i &lt; 2; i++)\n                 {\n                     led();   \n                 }\n             }\n         }\n         else if(swch==1)\n         {\n             //Do Nothing    \n         }\n     }\n     return;\n }\n</code></pre>\n"}, {"tags": ["c", "cmake", "linker", ".a"], "comments": [{"owner": {"reputation": 2081, "user_id": 3048763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdaRb.jpg?s=128&g=1", "display_name": "compor", "link": "https://stackoverflow.com/users/3048763/compor"}, "edited": false, "score": 0, "creation_date": 1536137021, "post_id": 52177515, "comment_id": 91311542, "body": "According to the <a href=\"https://cmake.org/cmake/help/latest/command/target_link_libraries.html\" rel=\"nofollow noreferrer\">doc</a> I believe that you either need a full path or maybe just the library name. Can you amend the library path to be <code>${CMAKE_CURRENT_SOURCE_DIR}&#47;myLib&#47;win32&#47;myLibrary.a</code>? How does that do?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1536148407, "post_id": 52177515, "comment_id": 91318644, "body": "Static library <code>myLibrary.a</code> is NOT &quot;win32&quot; library. This library is for <i>Linux</i>, because it has <code>.a</code> extension . The library also could be used by MinGW compiler/linker. But on <i>Windows</i> a static library should have <code>.lib</code> extension (so, they should be built by the appropriate compiler). This is why VS2013 looks for <code>.lib</code> file."}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1536397479, "post_id": 52177515, "comment_id": 91416292, "body": "@Tsyvarev, given the library has only C stuff (public) the <code>a</code> library should be consumed by MSVC w/o any problem."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "edited": false, "score": 0, "creation_date": 1536397833, "post_id": 52177515, "comment_id": 91416373, "body": "@ixSci: First time here that MSVC may work with <code>.a</code> libraries. Aren&#39;t libraries for MSVC should have format different from <code>.a</code> one?"}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1536403350, "post_id": 52177515, "comment_id": 91417661, "body": "@Tsyvarev, they have to be compatible to support C-interface. I can&#39;t say about difference in the format but MSVC has no choice but support it."}], "answers": [{"tags": [], "owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "is_accepted": false, "score": 0, "last_activity_date": 1536126369, "creation_date": 1536126369, "answer_id": 52177865, "question_id": 52177515, "link": "https://stackoverflow.com/questions/52177515/link-a-file-with-cmake-using-vs-2013-compiler/52177865#52177865", "title": "Link .a file with CMake, using VS 2013 compiler", "body": "<p>Try the following:</p>\n\n<pre><code>unset(CMAKE_LINK_LIBRARY_SUFFIX)\n</code></pre>\n\n<p>But note that it will affect any lib name passed to the <code>target_link_libraries</code> from this line on.</p>\n"}], "owner": {"reputation": 353, "user_id": 1638349, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be3dc0ae22e0c17e176126f9ccc2e21a?s=128&d=identicon&r=PG", "display_name": "Nave Tseva", "link": "https://stackoverflow.com/users/1638349/nave-tseva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536126369, "creation_date": 1536124528, "question_id": 52177515, "link": "https://stackoverflow.com/questions/52177515/link-a-file-with-cmake-using-vs-2013-compiler", "title": "Link .a file with CMake, using VS 2013 compiler", "body": "<p>I've got the following file tree: </p>\n\n<pre><code>   C:.\n    \u2502   CMakeLists.txt\n    \u2502   myLibraryHeader.h\n    \u2502   test.c\n    \u2502\n    \u2514\u2500\u2500\u2500myLib\n        \u251c\u2500\u2500\u2500win32\n        \u2502       myLibrary.a\n        \u2502\n        \u2514\u2500\u2500\u2500win64\n                myLibrary.a\n</code></pre>\n\n<p>And the following CMake file:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(myProject)\nlink_directories(myLib/win32) \nadd_executable(main test.c)\ntarget_link_libraries(main myLib/win32/myLibrary.a)\n</code></pre>\n\n<p><code>myLibraryHeader.h</code> is the header, while the implementation is in the <code>.a</code> files. \n<code>test.c</code> uses functions declared in <code>myLibraryHeader.h</code>.</p>\n\n<p>However, when I try to compile it using VS2013 compiler, I get this error:</p>\n\n<pre><code>Error   1   error LNK1104: cannot open file 'myLibrary.lib'\n</code></pre>\n\n<p>What is the reason that VS is looking for a .lib file instead of .a file?</p>\n\n<p>How can it be fixed?</p>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1536125112, "post_id": 52177440, "comment_id": 91305280, "body": "It might be easier to just use a named pipe."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536131712, "post_id": 52177440, "comment_id": 91308413, "body": "@Shawn:  this appears to be using Windows, where named pipes are a lot more complicated than on UNIX-type systems."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1536131900, "post_id": 52177440, "comment_id": 91308534, "body": "There is very little on the answer you link to that is C++ specific, just the <code>cout</code> (replace with <code>printf</code>) and ignore the <code>::</code> at the start of global API calls.  The include files will probably be <code>stdio.h</code> and <code>windows.h</code>.  A <code>HANDLE</code> is an <code>unsigned int</code> by the way.  Passing an address to a child process is <i>usually</i> pointless, since it has a different address space."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1536132343, "post_id": 52177440, "comment_id": 91308778, "body": "@cdarke - <code>HANDLE</code> is not <code>unsigned int</code> (32 bit always) - it is <code>void*</code> so <code>UINT_PTR</code> if want (64 bit in 64 bit system)"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1536134602, "post_id": 52177440, "comment_id": 91310105, "body": "@RbMm: sorry, that&#39;s changed then."}], "answers": [{"tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 1, "last_activity_date": 1536132246, "creation_date": 1536132246, "answer_id": 52179381, "question_id": 52177440, "link": "https://stackoverflow.com/questions/52177440/passing-an-anonymous-pipe-handle-to-child-process/52179381#52179381", "title": "Passing an anonymous PIPE HANDLE to Child Process", "body": "<p>yes, this is ok pass <code>HANDLE</code> by value. in practice currently your code will be work ok. however need remember that <code>HANDLE</code> is 64-bit size on 64-bit system - so not fit in <code>int</code> which is 32-bit size (<em>now user mode handle values in practice fit to 32bit</em>). so need use say <code>%I64x</code> format to encode handle value and <code>_atoi64</code> or <code>_wcstoi64</code> to decode.</p>\n\n<p>for example in parent:</p>\n\n<pre><code>WCHAR child_cmd[32];\nswprintf(child_cmd, L\"&lt;%I64x&gt;\", (ULONG64)(ULONG_PTR)hWrite);\n</code></pre>\n\n<p>and in child:</p>\n\n<pre><code>HANDLE hWrite = 0;\nif (PWSTR sz = wcschr(GetCommandLineW(), '&lt;'))\n{\n    hWrite = (HANDLE)(ULONG_PTR)_wcstoi64(sz + 1, &amp;sz, 16);\n    if (*sz != '&gt;')\n    {\n        hWrite = 0;\n    }\n}\n</code></pre>\n\n<p>as separate note - use <code>CreatePipe</code> not the best choice - this api very bad design, say one handle only for write, another only for read, can not select asynchronous I/O, can not make one handle inherit and another not (as need in this case) - better use <code>CreateNamedPipeW</code> + <code>CreateFileW</code> for create pipe pair. or <a href=\"https://stackoverflow.com/a/51448441/6401656\">this</a> way if you want no name on pipe (work from win7)</p>\n"}], "owner": {"reputation": 1013, "user_id": 9620849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15a5b6d6f847b894c33e0c72301f179b?s=128&d=identicon&r=PG&f=1", "display_name": "Wizard", "link": "https://stackoverflow.com/users/9620849/wizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 52179381, "answer_count": 1, "score": 1, "last_activity_date": 1607805426, "creation_date": 1536124030, "last_edit_date": 1607805426, "question_id": 52177440, "link": "https://stackoverflow.com/questions/52177440/passing-an-anonymous-pipe-handle-to-child-process", "title": "Passing an anonymous PIPE HANDLE to Child Process", "body": "<p>I am wanting to pass an anonymous Pipe HANDLE to a Child Process. <a href=\"https://stackoverflow.com/questions/7420508/how-to-pass-handle-to-child-process\">This</a> answer seems to explain it well for C++, however I am wanting to do this in C.</p>\n<p>Do I convert the handle into an integer? Or do I pass the memory address of the HANDLE to the child process, and then make another HANDLE pointing to that?</p>\n<p>For example:</p>\n<p>Parent:</p>\n<pre><code>    BOOL bCreatePipe, bReadFile;\n    HANDLE hRead = NULL;\n    HANDLE hWrite = NULL;\n    SECURITY_ATTRIBUTES lpPipeAttributes;\n    lpPipeAttributes.nLength = sizeof(lpPipeAttributes);\n    lpPipeAttributes.lpSecurityDescriptor = NULL;\n    lpPipeAttributes.bInheritHandle = TRUE;\n\n    // Create pipe file descriptors for parent and child\n    bCreatePipe = CreatePipe(&amp;hRead, &amp;hWrite, &amp;lpPipeAttributes, (DWORD)BUFFER_SIZE);\n    if (bCreatePipe == FALSE) {\n        printf(&quot;[-]Error creating IPC pipe : %d&quot;, GetLastError());\n        exit(-1);\n    }\n\n    // Create command line arguments for child process\n    snprintf(child_cmd, CMD_LINE_SIZE, &quot;%d&quot;, &amp;hWrite);\n\n    // Create child process to handle request\n    if ( !CreateProcess(\n         &quot;C:\\\\Users\\\\Child.exe&quot;,        // No module name (use command line)\n         child_cmd,      // Command line\n         NULL,           // Process handle not inheritable\n         NULL,           // Thread handle not inheritable\n         TRUE,           // Set handle inheritance to TRUE (for pipe)\n         0,              // No creation flags\n         NULL,           // Use parent's environment block\n         NULL,           // Use parent's starting directory\n         &amp;si,            // Pointer to STARTUPINFO structure\n         &amp;pi)            // Pointer to PROCESS_INFORMATION structure\n         )\n    {\n        printf(&quot;[-]CreateProcess failed : %d\\n&quot;, GetLastError());\n        exit(-1);\n    }\n</code></pre>\n<p>Child:</p>\n<pre><code>// Set variables to arguments passed by parent \nHANDLE hWrite = atoi(argv[0]);\n</code></pre>\n"}, {"tags": ["c", "malloc", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1536123337, "post_id": 52177282, "comment_id": 91304747, "body": "there is no default value, just garbage if you don&#39;t initialize it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536123362, "post_id": 52177282, "comment_id": 91304754, "body": "<code>struct Node* node = (struct Node){value, index};</code> are you sure?"}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1536123684, "post_id": 52177282, "comment_id": 91304859, "body": "1 question in a post please. Note that primarily opinion based questions are off-topic according to <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1536123687, "post_id": 52177282, "comment_id": 91304860, "body": "Add a counter <code>int count = 0;</code> that counts the number of allocated structures. When  accessing structure in the array at index <code>i</code>, check if <code>i &lt; count</code> if yes, ok it&#39;s allocated, if no, allocate that structure, check for null, put the pointer into the array (at <code>[i]</code>) and increment <code>count</code> (assuming <code>i &lt; DEFAULT_SIZE</code>, and that every <code>j &lt; i</code> positions in array are all already allocated)."}, {"owner": {"reputation": 21, "user_id": 10318033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qCMEp246RX0/AAAAAAAAAAI/AAAAAAAAAEo/fVHRxTBowOg/photo.jpg?sz=128", "display_name": "yusu", "link": "https://stackoverflow.com/users/10318033/yusu"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536123855, "post_id": 52177282, "comment_id": 91304907, "body": "@Jean-Fran&#231;oisFabre edited... sorry but I am not familiar with struct and pointers."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536124558, "post_id": 52177282, "comment_id": 91305103, "body": "There is no need to cast the return of <code>malloc</code>, it is unnecessary. See: <a href=\"http://stackoverflow.com/q/605845/995714\">Do I cast the result of malloc?</a>. Don&#39;t <code>realloc</code> to the pointer itself, (e.g. <code>array = realloc(array, index + 1);</code> - if <code>realloc</code> fails (and it will), you create a memory leak. Instead <code>void *tmp = realloc(array, index + 1); if (tmp != NULL) array = tmp;</code> Also, don&#39;t <code>realloc</code> by <code>1</code> (horribly inefficient), instead allocate some reasonable number of pointers and increase by <code>times 3&#47;2</code> or <code>times 2</code> with each reallocation."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1536125682, "post_id": 52177282, "comment_id": 91305472, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/7240365/pointer-default-value\" title=\"pointer default value\">stackoverflow.com/questions/7240365/pointer-default-value</a> and <a href=\"https://stackoverflow.com/questions/21067199/do-i-need-to-initiallizeset-to-0-memory-after-calling-realloc\" title=\"do i need to initiallizeset to 0 memory after calling realloc\">stackoverflow.com/questions/21067199/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/32732449/is-it-common-practice-to-memset-reallocated-memory-to-0\" title=\"is it common practice to memset reallocated memory to 0\">stackoverflow.com/questions/32732449/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/2347766/how-many-elements-are-full-in-a-c-array\" title=\"how many elements are full in a c array\">stackoverflow.com/questions/2347766/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536124705, "post_id": 52177463, "comment_id": 91305141, "body": "you mean that you&#39;ll test unitialized memory for an integer value? that&#39;s risky. What it a valid cell is deallocated, then reallocated. It will have the validation value at the proper offset, but won&#39;t be valid."}, {"owner": {"reputation": 136, "user_id": 5001107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7dade1c93e3b09e5e2e7e3b100b59a3?s=128&d=identicon&r=PG&f=1", "display_name": "Leandro Keen Zapa", "link": "https://stackoverflow.com/users/5001107/leandro-keen-zapa"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536124896, "post_id": 52177463, "comment_id": 91305201, "body": "The memory to be allocated should always be cleared thats all. or when deleting a node, just allocate its member to zero."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1536126565, "post_id": 52177463, "comment_id": 91305812, "body": "<code>i+=sizeof(struct Node)</code> is wrong. It should be <code>i++</code>"}, {"owner": {"reputation": 136, "user_id": 5001107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7dade1c93e3b09e5e2e7e3b100b59a3?s=128&d=identicon&r=PG&f=1", "display_name": "Leandro Keen Zapa", "link": "https://stackoverflow.com/users/5001107/leandro-keen-zapa"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1536128424, "post_id": 52177463, "comment_id": 91306635, "body": "@Jean-Fran&#231;oisFabre sorry, thank you for pointing out. hahaha i edited my correct answer to wrong."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1536131071, "post_id": 52177463, "comment_id": 91308046, "body": "<code>(*(array+i))-&gt;...</code> should be written as <code>array[i]-&gt;...</code>"}, {"owner": {"reputation": 136, "user_id": 5001107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7dade1c93e3b09e5e2e7e3b100b59a3?s=128&d=identicon&r=PG&f=1", "display_name": "Leandro Keen Zapa", "link": "https://stackoverflow.com/users/5001107/leandro-keen-zapa"}, "edited": false, "score": 0, "creation_date": 1536133244, "post_id": 52177463, "comment_id": 91309332, "body": "it&#39;s the same though. you can try to compile it"}], "tags": [], "owner": {"reputation": 136, "user_id": 5001107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7dade1c93e3b09e5e2e7e3b100b59a3?s=128&d=identicon&r=PG&f=1", "display_name": "Leandro Keen Zapa", "link": "https://stackoverflow.com/users/5001107/leandro-keen-zapa"}, "is_accepted": false, "score": 0, "last_activity_date": 1536133898, "last_edit_date": 1536133898, "creation_date": 1536124162, "answer_id": 52177463, "question_id": 52177282, "link": "https://stackoverflow.com/questions/52177282/default-value-of-allocated-struct-pointer-in-c/52177463#52177463", "title": "&quot;default value&quot; of allocated struct pointer in C", "body": "<p>You might need something like this</p>\n\n<pre><code>unsigned long i;\nfor (i = 0; i &lt; size; i++) {\n    if (array[i]-&gt;someValidationMember==yourIntValue) {\n        // do something\n    }\n}\n</code></pre>\n\n<p>Edit.\nThe memory to be allocated must be blank. Or if an item is deleted just simply change the Node member to zero or any of your choice.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1536124617, "last_edit_date": 1536124617, "creation_date": 1536124276, "answer_id": 52177476, "question_id": 52177282, "link": "https://stackoverflow.com/questions/52177282/default-value-of-allocated-struct-pointer-in-c/52177476#52177476", "title": "&quot;default value&quot; of allocated struct pointer in C", "body": "<p>When you <code>realloc</code> (or <code>malloc</code>) your list of pointers, the system resizes/moves the array, copying your data if needed, and reserving more space ahead <em>without changing the data</em>, so you get what was there before. You cannot rely on the values.</p>\n\n<p>Only <code>calloc</code> does a zero init, but you cannot <code>calloc</code> when you <code>realloc</code>.</p>\n\n<p>For starters you should probably use <code>calloc</code>:</p>\n\n<pre><code>struct Node** array = calloc(DEFAULT_SIZE,sizeof(*array));\n</code></pre>\n\n<p>In your loop, just use <code>realloc</code> and set the new memory to <code>NULL</code> so you can test for null pointers</p>\n\n<p>Note that your <code>realloc</code> size is incorrect, you have to multiply by the size of the element. Also update the <code>size</code> after reallocation or that won't work more than once.</p>\n\n<p>Note the tricky <code>memset</code> which zeroes only the unallocated data without changing the valid pointer data. <code>array+size</code> computes the proper address size due to pointer arithmetic, but the size parameter is in bytes, so you have to multiply by <code>sizeof(*array)</code> (the size of the element)</p>\n\n<pre><code>if (index &gt;= size)\n   {\n      array = realloc(array, (index + 1)*sizeof(*array));  // fixed size\n      memset(array+size,0,(index+1-size) * sizeof(*array));  // zero the rest of elements\n      size = index+1;  // update size\n   }\n</code></pre>\n\n<p>aside:</p>\n\n<ul>\n<li><code>realloc</code> for each element is inefficient, you should realloc by chunks to avoid too many system calls/copies</li>\n<li>I have simplified the <code>malloc</code> calls, no need to cast the return value of <code>malloc</code>, and also better to pass <code>sizeof(*array)</code> instead of <code>sizeof(Node **)</code>. In case the type of <code>array</code> changes you're covered (also protects you from one-off errors with starred types)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 1, "last_activity_date": 1536126623, "last_edit_date": 1536126623, "creation_date": 1536124768, "answer_id": 52177558, "question_id": 52177282, "link": "https://stackoverflow.com/questions/52177282/default-value-of-allocated-struct-pointer-in-c/52177558#52177558", "title": "&quot;default value&quot; of allocated struct pointer in C", "body": "<p>The newly-allocated memory contains garbage and reading a pointer from uninitialized memory is a bug.</p>\n\n<p>If you allocated using <code>calloc( DEFAULT_SIZE, sizeof(Node*) )</code> instead, the contents of the array would be defined: all bits would be set to zero.  On many implementations, this is a <code>NULL</code> pointer, although the standard does not guarantee it.  Technically, there could be a standard-conforming compiler that makes the program crash if you attempt to read a pointer with all bits set to zero.</p>\n\n<p>(Only language lawyers need to worry about that, though. In practice, even the fifty-year-old mainframes people bring up as the example of a machine where <code>NULL</code> was not binary 0 updated its C compiler to recognize 0 as a <code>NULL</code> pointer, because that broke too much code.)</p>\n\n<p>The safe, portable way to do what you want is to initialize every pointer in the array to <code>NULL</code>:</p>\n\n<pre><code>struct Node** const array = malloc(sizeof(Node**) * DEFAULT_SIZE);\n// Check for out-of-memory error if you really want to.\nfor ( ptrdiff_t i = 0; i &lt; DEFAULT_SIZE; ++i )\n  array[i] = NULL;\n</code></pre>\n\n<p>After the loop executes, every pointer in the array is equal to <code>NULL</code>, and the <code>!</code> operator returns 1 for it, until it is set to something else.</p>\n\n<p>The <code>realloc()</code> call is erroneous.  If you do want to do it that way, the size argument should be the new number of elements times the element size.  That code will happily make it a quarter or an eighth the desired size.  Even without that memory-corruption bug, you\u2019ll find yourself doing reallocations far too often, which might require copying the entire array to a new location in memory.</p>\n\n<p>The classic solution to that is to create a linked list of array pages, but if you\u2019re going to <code>realloc()</code>, it would be better to multiply the array size by a constant each time.</p>\n\n<p>Similarly, when you create each <code>Node</code>, you\u2019d want to initialize its pointer fields, if you care about portability.  No compiler this century will generate less-efficient code if you do.</p>\n\n<p>If you only allocate nodes in sequential order, an alternative is to create an array of <code>Node</code> rather than <code>Node*</code>, and maintain a counter of how many nodes are in use. A modern desktop OS will only map in as many pages of physical memory for the array as your process writes to, so simply allocating and not initializing a large dynamic array does not waste real resources in <em>most</em> environments.</p>\n\n<p>One other mistake that\u2019s probably benign: the elements of your array have type <code>struct Node*</code>, but you allocate <code>sizeof(Node**)</code> rather than <code>sizeof(Node*)</code> bytes for each.  However, the compiler does not type-check this, and I am unaware of any compiler where the sizes of these two kinds of object pointer could be different.</p>\n"}], "owner": {"reputation": 21, "user_id": 10318033, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qCMEp246RX0/AAAAAAAAAAI/AAAAAAAAAEo/fVHRxTBowOg/photo.jpg?sz=128", "display_name": "yusu", "link": "https://stackoverflow.com/users/10318033/yusu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1074, "favorite_count": 0, "accepted_answer_id": 52177476, "answer_count": 3, "score": 1, "last_activity_date": 1536133898, "creation_date": 1536123106, "last_edit_date": 1536124643, "question_id": 52177282, "link": "https://stackoverflow.com/questions/52177282/default-value-of-allocated-struct-pointer-in-c", "title": "&quot;default value&quot; of allocated struct pointer in C", "body": "<p>I am storing the input data which includes the specific order, so I choose to use array to sort them:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct Node** array = (struct Node**)malloc(sizeof(Node**) * DEFAULT_SIZE);\n\nint i;\nint size = DEFAULT_SIZE;\nwhile(/* reading input */) {\n    // do something\n    int index = token;    // token is part of an input line, which specifies the order\n    struct Node* node = (struct Node*)malloc(sizeof(struct Node));\n    *node = (struct Node){value, index};\n    // do something\n\n    if (index &gt;= size) {\n        array = realloc(array, index + 1);\n        size = index + 1;\n    }\n\n    array[index] = node;\n}\n</code></pre>\n\n<p>I am trying to loop through the array and do something when the node exists at the index</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int i;\nfor (i = 0; i &lt; size; i++) {\n    if (/* node at array[i] exists */) {\n        // do something\n    }\n}\n</code></pre>\n\n<p>How can I check if node exists at the specific index of the array? (Or what is the \"default value\" of the struct node after I allocated its memory?) I only know it is not <code>NULL</code>...</p>\n\n<p>Should I use <code>calloc</code> and try <code>if ((int)array[index] != 0)</code>? Or there is a better data structure I am able to use?</p>\n"}, {"tags": ["java", "c", "arrays", "java-native-interface"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1536132610, "post_id": 52176622, "comment_id": 91308935, "body": "I would probably treat <code>arr</code> as a <code>jobjectArray</code>. Its length is the number of rows, and the length of <code>((jcharArray) env-&gt;GetObjectArrayElement(arr, 0))</code> is the number of columns."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536237645, "post_id": 52176622, "comment_id": 91357741, "body": "More explicitly, <code>JNIEXPORT void JNICALL Java_Array_DArray (JNIEnv *env, jobject obj, jcharArray arr)</code> is likely wrong.  Did you use <code>javah</code> to generate the header file for the native function? Because <code>native void DArray(char[][] Arr);</code> in Java should have resulted in you seeing a <code>jobjectArray</code> in the header file&#39;s native function declaration, not <code>jcharArray</code>."}], "answers": [{"tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": false, "score": 0, "last_activity_date": 1536121546, "creation_date": 1536121546, "answer_id": 52177060, "question_id": 52176622, "link": "https://stackoverflow.com/questions/52176622/jni-dimensional-array-passing-2d-array-from-java-to-c/52177060#52177060", "title": "JNI dimensional array: passing 2D array from java to c", "body": "<p>First of all please understand that Java does not have a notion of two dimensional array. The best approximation is an array of 1 dimensional arrays but there is nothing in the language that will enforce same lengths for the nested arrays.</p>\n\n<p>Second I believe that your assignment included creating of the array in native code not only filling it with random content.</p>\n\n<p>I would probably pass two integers to my native method that would then use JNI functions NewObjectArray and NewCharArray to create the array of arrays, and fill it with random chars.</p>\n\n<p>The native method would return this array to Java.</p>\n\n<p>Printing has been covered extensively here: <a href=\"https://stackoverflow.com/questions/19648240/java-best-way-to-print-2d-array\">Java - Best way to print 2D array?</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10317903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a401be4b68fa2ee4af550c4a0c10e4?s=128&d=identicon&r=PG&f=1", "display_name": "Mohanad", "link": "https://stackoverflow.com/users/10317903/mohanad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536124440, "creation_date": 1536118035, "last_edit_date": 1536124440, "question_id": 52176622, "link": "https://stackoverflow.com/questions/52176622/jni-dimensional-array-passing-2d-array-from-java-to-c", "title": "JNI dimensional array: passing 2D array from java to c", "body": "<p>I am trying to achieve the following task.</p>\n\n<ul>\n<li><p>Java file requests user to enter two numbers where both number are used to determine the number of rows and column of two dimensional array.</p></li>\n<li><p>The two numbers are passed into native method.</p></li>\n<li><p>In the native method, content of the array is created based on random character from A to Z.</p></li>\n<li><p>Native method then passes the generated array back to the Java file.</p></li>\n<li><p>Java file then display the content of the array.</p></li>\n</ul>\n\n<p>I have coded the java function and also some of the c code. But my problem is on how to get the full length of the array since it is a 2D array. Using <code>(*env)-&gt;GetArrayLength</code> I get only the number of rows! But I don't know how to get the number of columns.</p>\n\n<p><strong>Java</strong></p>\n\n<pre><code>import java.util.Scanner;\n\nclass Array { \nint num1, num2; \nnative void DArray(char[][] Arr);\n\nstatic { System.loadLibrary(\"CArray\");}\n\npublic static void main(String args[]) { \nScanner inp = new Scanner(System.in); \nArray obj = new Array();\nSystem.out.printf(\"Enter the Number of rows: \"); obj.num1 = inp.nextInt();\nSystem.out.printf(\"Enter the shape &lt;number&gt;: \"); obj.num2 = inp.nextInt();\nchar Arr[][] = new char[obj.num1][obj.num2];\nobj.DArray(Arr);\n}\n}\n</code></pre>\n\n<p><strong>C code (JNI)</strong></p>\n\n<pre><code>#include &lt;jni.h&gt; \n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nJNIEXPORT void JNICALL Java_Array_DArray (JNIEnv *env, jobject obj, jcharArray arr){\n\njsize len =(*env)-&gt;GetArrayLength(env, arr);\n\njchar Arr[len];\n        for (int i=0;i&lt;len;i++){\n        Arr[i] = (rand()%26)+65;\n        }       \n\n        for (int i=0;i&lt;len;i++){\n            printf(\"%c\"\"%c\",Arr[i],' ');\n        }       \nreturn ;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "serial-port", "microblaze", "pyvisa"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10317595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ace1cea947de94c05068356673cac3d?s=128&d=identicon&r=PG&f=1", "display_name": "p.sg_RF", "link": "https://stackoverflow.com/users/10317595/p-sg-rf"}, "is_accepted": false, "score": 0, "last_activity_date": 1536283838, "creation_date": 1536283838, "answer_id": 52214106, "question_id": 52175994, "link": "https://stackoverflow.com/questions/52175994/serial-port-data-transfer-between-python-and-c-application-running-on-microblaz/52214106#52214106", "title": "Serial Port data transfer between Python and C application (Running on Microblaze)", "body": "<p>For completeness, I manage to work out a solution using NIMAX to trace all VISA transactions and a VISA test panel to achieve a working state, which I could then implement in my code </p>\n\n<p><strong>The issue</strong>: I was setting the baud rate and read/write termination characters in my instrument class definition and they were never getting implemented.  It appears that I was trying to query with default settings of BAUD=9600 and incorrect read termination. </p>\n\n<p><strong>The Fix</strong>, I moved the lines of code which set the baud rate and read termination into my device class so that when I define the device as an Instrument, it sets these attributes before any transactions occur.  Now I can read and write just fine.  </p>\n\n<p>Cheers, </p>\n"}], "owner": {"reputation": 1, "user_id": 10317595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ace1cea947de94c05068356673cac3d?s=128&d=identicon&r=PG&f=1", "display_name": "p.sg_RF", "link": "https://stackoverflow.com/users/10317595/p-sg-rf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536283838, "creation_date": 1536112164, "last_edit_date": 1536125189, "question_id": 52175994, "link": "https://stackoverflow.com/questions/52175994/serial-port-data-transfer-between-python-and-c-application-running-on-microblaz", "title": "Serial Port data transfer between Python and C application (Running on Microblaze)", "body": "<p>I am trying to use a python console from my PC to read from and write to an embedded C application running on a microblaze host.  The connection between the two is USB -> UART through a FTDI chip. </p>\n\n<p><strong>Brief Note on my skills/background</strong>: RF/Microwave Engineer, lots of hardware experience and lots of HDL experience, however little to no software experience, certainly none in C or python. </p>\n\n<p><strong>Problem/Questions</strong>:</p>\n\n<ol>\n<li>I can use a PuTTy or Termite console to enter commands (such as 'frequency?')and receive the expected return values from the functions. I can even set the values using a 'set' version of the function. In my C application the uart_write_char function is using 'putchar()' and I suspect it is simply printing characters and strings rather than 'transmitting' data (bytes, doubles, floats etc.).</li>\n</ol>\n\n<p>Here is a snippet of code describing the uart_write function:</p>\n\n<p>*</p>\n\n<pre><code>void uart_write_char(char data)\n{\n    putchar(data);\n}\n</code></pre>\n\n<p>*\nI would like to know if there is a difference between 'printing' data to console and 'transmitting' data to the other end, so I can receive it and dump it to a file. </p>\n\n<ol start=\"2\">\n<li>I would like to know the best way to use pyVISA on my python side to receive the data transmitted over the serial port.  At the moment I open the port using ResourceManager() and openResource(), I set the baudrate accordingly, however I cannot seem to 'query' the device.  Query is a pyVISA function(?) which is a write followed by a read.  In this instance I would hope to transmit the command 'frequency?' to the embedded microblaze and I would expect the result to be transmitted back. If I can do this successfully using a console such as PuTTy or Termite, what is the difference in using a pyVISA query function? encoding perhaps?</li>\n</ol>\n\n<p><strong>Edit:</strong> I have also tried query_ascii_value() and query_binary_value() as documented in <a href=\"https://media.readthedocs.org/pdf/pyvisa/1.6/pyvisa.pdf\" rel=\"nofollow noreferrer\">https://media.readthedocs.org/pdf/pyvisa/1.6/pyvisa.pdf</a>\nThe result is still the same, I receive a Timeout error in my python console.</p>\n\n<p><strong>UPDATE</strong> I have used NI-MAX to capture the Trace IO and the timeout appears to be on the read side.  If I am connected to the device, I assume it will complete the write function, is this true?  Here is the Ni-MAX log</p>\n\n<ol>\n<li><p>viOpenDefaultRM (0x00001001)\nProcess ID: 0x000082C8         Thread ID: 0x00006F90\nStart Time: 15:21:12.0642      Call Duration 00:00:00.0139\nStatus: 0 (VI_SUCCESS)</p></li>\n<li><p>viClose (0x00000000)\nProcess ID: 0x000082C8         Thread ID: 0x00006F90\nStart Time: 15:21:12.0781      Call Duration 00:00:00.0000\nStatus: 0x3FFF0082 (VI_WARN_NULL_OBJECT)</p></li>\n<li><p>viParseRsrcEx (0x00001001, \"ASRL6::INSTR\", 4 (0x4), 6 (0x6), \"INSTR\", \"ASRL6::INSTR\", \"COM6\")\nProcess ID: 0x000082C8         Thread ID: 0x00006F90\nStart Time: 15:21:12.0781      Call Duration 00:00:00.0000\nStatus: 0 (VI_SUCCESS)</p></li>\n<li><p>viOpen (0x00001001, \"ASRL6::INSTR\", 0 (0x0), 0 (0x0), 0x00000001)\nProcess ID: 0x000082C8         Thread ID: 0x00006F90\nStart Time: 15:21:12.0792      Call Duration 00:00:00.0657\nStatus: 0 (VI_SUCCESS)</p></li>\n<li><p>viParseRsrcEx (0x00001001, \"ASRL6::INSTR\", 4 (0x4), 6 (0x6), \"INSTR\", NULL, NULL)\nProcess ID: 0x000082C8         Thread ID: 0x00006F90\nStart Time: 15:21:12.1450      Call Duration 00:00:00.0000\nStatus: 0 (VI_SUCCESS)</p></li>\n<li><p>viWrite (ASRL6::INSTR (0x00000001), \"tx_lo_freq?...\", 14 (0xE), 14 (0xE))\nProcess ID: 0x000082C8         Thread ID: 0x00006F90\nStart Time: 15:21:24.5897      Call Duration 00:00:00.0000\nStatus: 0 (VI_SUCCESS)</p></li>\n</ol>\n\n<blockquote>\n  <ol start=\"7\">\n  <li>viRead (ASRL6::INSTR (0x00000001), 0x000001DF461F5420, 20480 (0x5000), 0 (0x0))\n  Process ID: 0x000082C8         Thread ID: 0x00006F90\n  Start Time: 15:21:24.5897      Call Duration 00:00:02.0006\n  Status: 0xBFFF0015 (<strong>VI_ERROR_TMO</strong>)</li>\n  </ol>\n</blockquote>\n\n<p>I appreciate any advice on this issue and am happy to provide some more code snippets/info. Also keen for any feedback regarding post etiquette and potential for improving the post request</p>\n\n<p>Cheers,</p>\n"}, {"tags": ["c", "linux", "hostname"], "answers": [{"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 2, "last_activity_date": 1536111524, "creation_date": 1536111524, "answer_id": 52175925, "question_id": 52175868, "link": "https://stackoverflow.com/questions/52175868/what-differences-are-between-utsnames-field-nodename-and-the-output-string/52175925#52175925", "title": "What differences are between `utsname`&#39;s field `nodename` and the output string pointed by `name` of `gethostname()`?", "body": "<p>Since you tagged this <a href=\"/questions/tagged/linux\" class=\"post-tag\" title=\"show questions tagged &#39;linux&#39;\" rel=\"tag\">linux</a>, I assume we're talking specifically on Linux.</p>\n\n<p>Linux man pages project's <a href=\"http://man7.org/linux/man-pages/man2/gethostname.2.html\" rel=\"nofollow noreferrer\">man 2 gethostname</a> says:</p>\n\n<blockquote>\n  <p>The GNU C library does not employ the gethostname() system call;\n    instead, it implements gethostname() as a library function that calls\n    uname(2) and copies up to len bytes from the returned nodename field\n    into name.</p>\n</blockquote>\n\n<p>So, on Linux, both are provided by the same system call, and there is no difference.</p>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536111524, "creation_date": 1536110868, "question_id": 52175868, "link": "https://stackoverflow.com/questions/52175868/what-differences-are-between-utsnames-field-nodename-and-the-output-string", "title": "What differences are between `utsname`&#39;s field `nodename` and the output string pointed by `name` of `gethostname()`?", "body": "<p>From APUE</p>\n\n<blockquote>\n<pre><code>#include &lt;sys/utsname.h&gt;\nint uname(struct utsname *name);\n</code></pre>\n  \n  <p>where</p>\n\n<pre><code>struct utsname {\nchar  sysname[]; /* name of the operating system */\nchar  nodename[]; /* name of this node */\nchar  release[]; /* current release of operating system */\nchar  version[]; /* current version of this release */\nchar  machine[]; /* name of hardware type */\n};\n</code></pre>\n  \n  <p>This function is from System V, and in older days, the <code>nodename</code>\n  element was adequate for referencing the host on a UUCP network.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>BSD-derived  systems  provided  the gethostname function  to  return\n  only  <strong>the  name  of  the  host</strong>.  <strong>If the host is connected to a\n  TCP/IP network, the host name is normally the fully quali\ufb01ed domain\n  name of the host</strong>.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\nint gethostname(char *name, int namelen);\n</code></pre>\n</blockquote>\n\n<p>I was wondering what differences are between <code>utsname</code>'s field <code>nodename</code> and the output string pointed by <code>name</code> of <code>gethostname()</code>?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536117143, "post_id": 52175799, "comment_id": 91303403, "body": "The line starting <code>values **v</code> defines a pointer to an array of pointers to your <code>value</code> struct (which could eventually be treated as a &#39;2D array&#39; of structures).  You then allocate an array of size <code>y</code> structures for each row of the matrix.  But none of this has done anything about the matrix embedded in each of the structures.  Are you sure that&#39;s what you wanted?"}], "answers": [{"comments": [{"owner": {"reputation": 1489, "user_id": 3954447, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/AVq0Y.jpg?s=128&g=1", "display_name": "Mathiasfc", "link": "https://stackoverflow.com/users/3954447/mathiasfc"}, "edited": false, "score": 0, "creation_date": 1536148551, "post_id": 52175894, "comment_id": 91318734, "body": "Thanks a lot. Would you know how to fill the value of the row in the struct as well? And just to confirm, the function declaration looks like this: <code>void * somaLinha(v values)</code>?"}, {"owner": {"reputation": 312, "user_id": 6032037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEWJ8.png?s=128&g=1", "display_name": "gmelodie", "link": "https://stackoverflow.com/users/6032037/gmelodie"}, "reply_to_user": {"reputation": 1489, "user_id": 3954447, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/AVq0Y.jpg?s=128&g=1", "display_name": "Mathiasfc", "link": "https://stackoverflow.com/users/3954447/mathiasfc"}, "edited": false, "score": 1, "creation_date": 1536158828, "post_id": 52175894, "comment_id": 91325588, "body": "As I believe this discussion does not directly refer to the question, I sent you an email with the answer."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1489, "user_id": 3954447, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/AVq0Y.jpg?s=128&g=1", "display_name": "Mathiasfc", "link": "https://stackoverflow.com/users/3954447/mathiasfc"}, "edited": false, "score": 0, "creation_date": 1536174620, "post_id": 52175894, "comment_id": 91333601, "body": "@MathiasFalci: Note that all thread &#39;main&#39; functions should have the signature <code>void *function(void *data);</code> (the name of the function and the argument is variable; the type information is not).  Your <code>somaLinha()</code> should therefore have the declaration <code>void *someLina(void *data)</code>.  Inside the function, you can use <code>values *vp = data;</code> or equivalent to get the pointer to the matrix.  The <code>pthread_create()</code> call is then OK.  You need to decide whether the thread launching code or the thread main function (<code>somaLinha</code>) releases the allocated space; it&#39;s usually best if the launch code cleans up."}], "tags": [], "owner": {"reputation": 312, "user_id": 6032037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEWJ8.png?s=128&g=1", "display_name": "gmelodie", "link": "https://stackoverflow.com/users/6032037/gmelodie"}, "is_accepted": true, "score": 2, "last_activity_date": 1536158510, "last_edit_date": 1536158510, "creation_date": 1536111168, "answer_id": 52175894, "question_id": 52175799, "link": "https://stackoverflow.com/questions/52175799/how-to-pass-a-struct-with-an-matrix-as-pthread-argument/52175894#52175894", "title": "How to pass a struct with an matrix as pthread argument?", "body": "<p>When you allocate the space for the struct, C is actually going to allocate the space for an integer plus the space for the pointer (which is 4+8 bytes)</p>\n\n<p>You need to allocate the space for the struct, and then <a href=\"https://stackoverflow.com/questions/1403150/how-do-you-dynamically-allocate-a-matrix#1403157\">allocate for the matrix</a></p>\n\n<pre><code>values *v = (values *) malloc(sizeof(values));\nv-&gt;matrix = (int **) malloc(y * sizeof(int *));\nfor (int z = 0; z &lt; y; ++z)\n    v-&gt;matrix[z] = (int *) malloc(y * sizeof(int));\n</code></pre>\n\n<p>And then you create the thread</p>\n\n<pre><code>pthread_create(&amp;thread1, NULL, somaLinha, v);\n</code></pre>\n"}], "owner": {"reputation": 1489, "user_id": 3954447, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/AVq0Y.jpg?s=128&g=1", "display_name": "Mathiasfc", "link": "https://stackoverflow.com/users/3954447/mathiasfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 52175894, "answer_count": 1, "score": 1, "last_activity_date": 1536158510, "creation_date": 1536110216, "last_edit_date": 1536149242, "question_id": 52175799, "link": "https://stackoverflow.com/questions/52175799/how-to-pass-a-struct-with-an-matrix-as-pthread-argument", "title": "How to pass a struct with an matrix as pthread argument?", "body": "<p>I have the following struct:</p>\n\n<pre><code>typedef struct {\n  int row;\n  int** matrix;\n} values ;\n</code></pre>\n\n<p>To fill the struct matrix I tried the following code:</p>\n\n<pre><code>values **v = (values **)malloc(x * sizeof(values *));\nfor (int z = 0; z &lt; y; ++z)\n     [z] = (values *)malloc(y * sizeof(values));\n</code></pre>\n\n<p>Where x is the number of rows and y columns.</p>\n\n<p>How can I populate the arguments (<code>row</code> and <code>matrix</code>) of struct and pass as parameter to a function called by pthread?\nSomething similar to...</p>\n\n<pre><code>pthread_create(&amp;thread1, NULL, somaLinha, v);\n</code></pre>\n"}, {"tags": ["c", "pipe", "fork"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1536112146, "post_id": 52175687, "comment_id": 91302533, "body": "<code>strerror(errno)</code> will tell you why"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536125265, "post_id": 52175687, "comment_id": 91305337, "body": "You probably need some <a href=\"https://en.wikipedia.org/wiki/Event_loop\" rel=\"nofollow noreferrer\">event loop</a> around <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">poll(2)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536140637, "post_id": 52177175, "comment_id": 91313915, "body": "But I close it in the child will not use it, he will write only. In the father it&#39;s open s2f[0] and it&#39;s close s2f[1] for the same reason. Is conceptually wrong? Thanks again"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536140858, "post_id": 52177175, "comment_id": 91314048, "body": "You can close it but you have to handle the SIGPIPE signal in your code. In the &quot;father&quot;, you are not printing <code>n</code>, the value returned from the <code>write</code>."}, {"owner": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536143982, "post_id": 52177175, "comment_id": 91315932, "body": "I remove the close and the program doesn&#39;t work again."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536144177, "post_id": 52177175, "comment_id": 91316039, "body": "Can you print the errno and see what is the error? Use strerror(errno)"}, {"owner": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536144762, "post_id": 52177175, "comment_id": 91316399, "body": "Yes. &quot;Bad file descriptor&quot; on read but now &quot;printf(&quot;WRITE of %d BYTES\\n&quot;, n);&quot; and &quot;printf(&quot;Child exit \\n&quot;);&quot; aren&#39;t displayed."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536145512, "post_id": 52177175, "comment_id": 91316840, "body": "If read of f2s[0] fails, then nothing following it will work."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536146784, "post_id": 52177175, "comment_id": 91317570, "body": "You are closing f2s[0] in &quot;father&quot; process and attempting to read from it in &quot;son&quot; process. It will result in  EBADF (fd is not a valid file descriptor or is not open for reading)."}, {"owner": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536147000, "post_id": 52177175, "comment_id": 91317719, "body": "Remove close f2s[0] in father doesn&#39;t solve the problem."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536147158, "post_id": 52177175, "comment_id": 91317805, "body": "You are exiting only if both pipe calls fail. <code>if(pipe (f2s) == -1 &amp;&amp; pipe (s2f) == -1)</code>. You have to exit even if one of them fails."}, {"owner": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536147749, "post_id": 52177175, "comment_id": 91318190, "body": "Right. I modify the line but now I have another problem. The program only print &quot;I&#39;m inside father process I&#39;m inside child process&quot; and remains blocked... I don&#39;t understand anything.."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536148235, "post_id": 52177175, "comment_id": 91318534, "body": "Since I don&#39;t have your latest code, please read this article and you will know where you are going wrong. <a href=\"https://www.tldp.org/LDP/lpg/node11.html#SECTION00722000000000000000\" rel=\"nofollow noreferrer\">tldp.org/LDP/lpg/node11.html#SECTION00722000000000000000</a>"}, {"owner": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "edited": false, "score": 0, "creation_date": 1536867178, "post_id": 52177175, "comment_id": 91588624, "body": "Unfortunately no. I abandoned the exercise because I didn&#39;t find any errors."}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1536123012, "last_edit_date": 1536123012, "creation_date": 1536122398, "answer_id": 52177175, "question_id": 52175687, "link": "https://stackoverflow.com/questions/52175687/problem-with-multidirectional-pipe-father-son/52177175#52177175", "title": "Problem with multidirectional pipe (father &lt;-&gt; son)", "body": "<p>You have closed the reading end of the pipe <code>s2f</code> before writing into it.</p>\n\n<pre><code>close(s2f[0]);\n</code></pre>\n\n<p>So there will be a <code>EPIPE</code> error when you write into the pipe. From the <a href=\"https://linux.die.net/man/2/write\" rel=\"nofollow noreferrer\">online</a> reference on <code>write</code> (with added emphasis):</p>\n\n<blockquote>\n  <p>The EPIPE error occurs when <strong>fd is connected to a pipe or socket whose reading end is closed</strong>. When this happens the writing process will also receive a SIGPIPE signal. (<strong>Thus, the write return value is seen only if the program catches, blocks or ignores this signal</strong>.)</p>\n</blockquote>\n\n<p>Since your program does not catch, block or ignore this signal, the write return value is not as expected and instead is -1.</p>\n"}], "owner": {"reputation": 21, "user_id": 10317487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c37fb46af168b78f9d01855c9eec2c5?s=128&d=identicon&r=PG&f=1", "display_name": "Pasquale", "link": "https://stackoverflow.com/users/10317487/pasquale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1536123054, "creation_date": 1536109042, "last_edit_date": 1536123054, "question_id": 52175687, "link": "https://stackoverflow.com/questions/52175687/problem-with-multidirectional-pipe-father-son", "title": "Problem with multidirectional pipe (father &lt;-&gt; son)", "body": "<p>My little program includes two pipes to create a multidirectional communication between father and son.</p>\n\n<p>The write on s2f [1] returns -1 but I did not understand why.</p>\n\n<p>Can you help me?  Is there anything else that does not work or that I could improve?</p>\n\n<pre><code>/*\nWrite a program in C language that in sequence:\n1) create 2 pipes and a child (the 2 pipes will be used for two-way communication between the parent\nand son);\n2) the father, after the creation of the child, takes in input from the user a file name;\n3) send the child the name of the file using the first pipe;\n4) make the child look for the number of spaces in the file and communicate this number to the father through the use of the second pipe;\n5) let the father print the number received from son;\n*/\n\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main (int argc, char *argv[])\n{\n    int f2s[2]; \n    int s2f[2];\n    int fd, n;\n    pid_t p;\n    char buf[20];\n    char c;\n    int countspace=0, valueofspace;\n    if (argc&lt;2)\n    {\n        printf(\"ERROR!\\n\");\n        exit (-1);\n    }\n    if (pipe (f2s) == -1 &amp;&amp; pipe (s2f) == -1)\n        exit(-1);\n    p=fork();\n    if (p&gt;0)\n    {\n        printf(\"I'm inside the father process.\\n\");\n        close(f2s[0]);\n        close(s2f[1]);\n        write(f2s[1],argv[1],sizeof(argv[1]));\n\n        read(s2f[0],&amp;valueofspace, sizeof(int));\n        printf(\"The spaces are %d\", valueofspace);      \n        printf(\"Father exit\\n\");\n        exit(0);\n    }\n    if (p==0)\n    {\n        printf(\"I'm inside the child process.\\n\");\n        close(f2s[1]);\n        close(s2f[0]);\n        read (f2s[0],buf,20);\n\n        if (fd = open(buf, O_RDONLY) == -1)\n            printf(\"Error when opening the file\\n\");\n\n        while (read(fd,&amp;c,1) &gt; 0)\n        {\n            if (c==' ')\n                countspace++;\n        }\n        close(fd);\n        printf(\"Count: %d\\n\",countspace);\n        n = write(s2f[1],&amp;countspace, sizeof(countspace));\n        printf(\"WRITE of %d BYTES\\n\", n);\n        printf(\"Son exit \\n\");\n        exit(0);\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4933, "user_id": 2987253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa772cdc439443e5243e9d7aa41a9c6a?s=128&d=identicon&r=PG", "display_name": "Loocid", "link": "https://stackoverflow.com/users/2987253/loocid"}, "edited": false, "score": 6, "creation_date": 1536106571, "post_id": 52175423, "comment_id": 91301621, "body": "Your implementation of <code>powerOfThree</code> should be outside your main function."}, {"owner": {"reputation": 1623, "user_id": 3263719, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a3aff3452a5b060165118cd3a18f5e54?s=128&d=identicon&r=PG&f=1", "display_name": "c1moore", "link": "https://stackoverflow.com/users/3263719/c1moore"}, "edited": false, "score": 0, "creation_date": 1536106718, "post_id": 52175423, "comment_id": 91301643, "body": "Please format your code and make sure to use appropriate white space to make it readable.  For example, add tabs as necessary to show scope."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1536106742, "post_id": 52175423, "comment_id": 91301650, "body": "The indentation here is quite chaotic, and parts of the code appear to be missing or really badly formatted. Declare functions prior to use. <code>main</code> is generally the last thing in your file."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1536107093, "post_id": 52175423, "comment_id": 91301722, "body": "This is a mess. Your powerOfThree function is inside your main"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536124396, "post_id": 52175423, "comment_id": 91305047, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 5, "last_activity_date": 1536124775, "last_edit_date": 1536124775, "creation_date": 1536108051, "answer_id": 52175583, "question_id": 52175423, "link": "https://stackoverflow.com/questions/52175423/undefined-reference-to-powerofthree/52175583#52175583", "title": "Undefined reference to &#39;powerOfThree&#39;", "body": "<p>GCC is a menace on occasion.</p>\n\n<p>It allows you to define functions inside other functions \u2014 nested functions.  You have (presumably accidentally and unintentionally) nested your <code>powerOfThree()</code> function inside <code>main()</code>.  If you move the <code>return 0;</code> before the start of <code>powerOfThree()</code> and add the missing close brace, then things will work sanely.</p>\n\n<p>I think that nested functions must be defined before they're used.  See the GCC manual on <a href=\"https://gcc.gnu.org/onlinedocs/gcc-8.2.0/gcc/Nested-Functions.html#Nested-Functions\" rel=\"nofollow noreferrer\">nested functions</a> \u2014 which does allow a declaration using <code>auto</code> if you must declare it before you define it.  As it stands, the compiler assumes you meant to call the non-nested version of the function declared before <code>main()</code>.  I recommend against using the GCC-only feature (nested functions).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic int powerOfThree(int);\n\nint main(void)\n{\n    int userInput;\n    printf(\"Please enter a number: \");\n    if (scanf(\"%d\", &amp;userInput) == 1 &amp;&amp; userInput &gt;= 0)\n    {\n        printf(\"The value of 3 to the power %d is: %d\\n\",\n               userInput, powerOfThree(userInput));\n    }\n    return (0);\n}\n\nstatic int powerOfThree(int n)\n{\n    if (n &lt; 1)\n        return 1; \n    else\n        return (3 * powerOfThree(n-1));\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7548588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/962a80a9539bd3e45e9be1d15f7af5a7?s=128&d=identicon&r=PG&f=1", "display_name": "guppies999", "link": "https://stackoverflow.com/users/7548588/guppies999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1536124775, "creation_date": 1536106297, "last_edit_date": 1536107753, "question_id": 52175423, "link": "https://stackoverflow.com/questions/52175423/undefined-reference-to-powerofthree", "title": "Undefined reference to &#39;powerOfThree&#39;", "body": "<p>I keep on getting the error of <code>Undefined reference to 'powerOfThree'</code>.  The <code>powerOfThree</code> is my recursive method as you can see below.  Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint powerOfThree(int);\n\nint main(void){\n\n    int userInput;\n    printf(\"PLease enter a number: \"); //asking the user to enter a value\n    scanf(\"%d\", &amp;userInput); //store that value into userInput\n    printf(\"the value of %d three to the power is: %d\", userInput, powerOfThree(userInput)); //passing the value of userInput into powerOfThree.\n\nint powerOfThree(int n) { //recursion method\n\n    if(n&lt;1) {\n        return 1; //control \n    } \n    else {\n        return (3*powerOfThree(n-1)); //actual calculation\n    }\n}\nreturn (0);\n</code></pre>\n\n<p>I ask the user to enter a number and store it in the <code>userInput</code>. In theory I can pass that input to the recursion method.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1536112166, "post_id": 52175111, "comment_id": 91302536, "body": "In what way is it 2D?"}], "answers": [{"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1536105169, "post_id": 52175171, "comment_id": 91301398, "body": "That&#39;s one way to do it--the other is to declare the pointer to be a pointer to sub-array types, i.e. <code>int (*student)[5] = malloc(2 * 5 * sizeof(int));</code>"}, {"owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1536105637, "post_id": 52175171, "comment_id": 91301471, "body": "@LeeDanielCrocker  I was trying to give OP a break down of the array memory layout. But your way is more concise and shorter definitely."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1536105772, "post_id": 52175171, "comment_id": 91301490, "body": "The two methods have different memory layouts. Just thought the OP should know that there are two entirely different kinds of 2D array in C."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536109689, "post_id": 52175171, "comment_id": 91302144, "body": "Not only are there at least two different ways to implement two-dimensional arrays in C, but the pointer-to-pointer method ought to be discouraged. It is inefficient (more memory lookups, and memory lookups that are likely to break processor look-ahead optimizations). The variable length array method Lee Daniel Crocker shows should be favored, or, if targeting C implementations where it may not be available, then manual calculation of indices into a one-dimensional array (<code>row*ColumnSize+column</code>) can be used."}], "tags": [], "owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "is_accepted": true, "score": 1, "last_activity_date": 1536103578, "creation_date": 1536103578, "answer_id": 52175171, "question_id": 52175111, "link": "https://stackoverflow.com/questions/52175111/error-when-accessing-elements-in-a-2d-array/52175171#52175171", "title": "Error when accessing elements in a 2d array", "body": "<p>A 2D array is a pointer pointing to another array, so when you declare student it needs to be of the type <code>int **</code>. </p>\n\n<p>When you initialize student, first you need to allocate memory for the outer pointer, which will be pointing to the inner array. Then allocate memory for the inner array.  </p>\n\n<pre><code>  int **student; //int student[2][5]\n  int main() {\n   student = (int**)malloc(2 * sizeof(int *));\n   student[0] = (int *)malloc(5 * sizeof(int));\n   student[0][1] = 10; //error\n   printf(\"student %d \\n\",student[0][1]); //error\n   return 0;\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1536113327, "creation_date": 1536113327, "answer_id": 52176117, "question_id": 52175111, "link": "https://stackoverflow.com/questions/52175111/error-when-accessing-elements-in-a-2d-array/52176117#52176117", "title": "Error when accessing elements in a 2d array", "body": "<p>There are several ways to do this:</p>\n\n<p>If you know how big the dimensions need to be at compile time, and you want the rows to be contiguous in memory, do the following:</p>\n\n<pre><code>#define ROWS 2\n#define COLUMNS 5\n...\nint (*student)[COLUMNS] = malloc( sizeof *student * ROWS );\n...\nstudent[i][j] = some_value;\n</code></pre>\n\n<p>If you don't know how big the dimensions need to be at compile time, and you want the rows to be contiguous in memory, and your version of C supports variable-length array syntax (C99 or later):</p>\n\n<pre><code>size_t rows;\nsize_t columns;\n\n// get rows and columns somehow\n\nint (*student)[columns] = malloc( sizeof *student * rows ); \n...\nstudent[i][j] = some_value;\n</code></pre>\n\n<p>Strictly speaking, this will invoke undefined behavior since <code>sizeof</code> on a VLA is evaluated at runtime, and <code>student</code> hasn't been initialized to point anywhere meaningful yet.  However, I and others argue that this is a weakness in the wording of the language standard, and I've never had this not work as expected.  But, be aware, this isn't <em>guaranteed</em> to work everywhere all the time.  </p>\n\n<p>If you don't know how big the dimensions need to be at compile time, and you need the rows to be contiguous in memory, and you don't have variable-length arrays available:</p>\n\n<pre><code>size_t rows; \nsize_t columns;\n\n// get rows and columns;\n\nint *student = malloc( sizeof *student * rows * columns );\n</code></pre>\n\n<p>Yeah, this is a 1D array; you'll have to map \"rows\" and \"columns\" onto this 1D structure:</p>\n\n<pre><code>student[i * ROWS + j] = some_value;\n</code></pre>\n\n<p>If you don't know how big your dimensions need to be at compile time, and you don't care whether rows are contiguous or not, you can do this:</p>\n\n<pre><code>size_t rows;\nsize_t columns;\n\n// get rows and columns;\n\nint **student = malloc( sizeof *student * rows );\nif ( student )\n{\n  for ( size_t i = 0; i &lt; rows; i++ )\n  {\n    student[i] = malloc( sizeof *student[i] * columns );\n  }\n}\n...\nstudent[i][j] = some_value;\n</code></pre>\n\n<p>For the first three methods, cleanup is easy:</p>\n\n<pre><code>free( student );\n</code></pre>\n\n<p>For the last method, you'll have to deallocate each \"row\" individually:</p>\n\n<pre><code>for ( size_t i = 0; i &lt; rows; i++ )\n  free( student[i] );\nfree( student );\n</code></pre>\n"}], "owner": {"reputation": 1537, "user_id": 968000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tU8sw.jpg?s=128&g=1", "display_name": "user968000", "link": "https://stackoverflow.com/users/968000/user968000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52175171, "answer_count": 2, "score": 0, "last_activity_date": 1536113327, "creation_date": 1536102966, "question_id": 52175111, "link": "https://stackoverflow.com/questions/52175111/error-when-accessing-elements-in-a-2d-array", "title": "Error when accessing elements in a 2d array", "body": "<p>I am trying to dynamically allocate memory for a 2D array and then access the array. I am getting the following error:\nerror: subscripted value is neither array nor pointer nor vector</p>\n\n<pre><code>    int *student; //int student[2][5]\n    int main() {\n       student= (int*)malloc(10*sizeof(int));\n       student[0][1] = 10; //error\n       printf(\"student %d \\n\",student[0][1]); //error\n       return 0;\n   }\n</code></pre>\n"}, {"tags": ["c", "floating-point", "double"], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1536144524, "post_id": 52177745, "comment_id": 91316254, "body": "Comparing to <code>DBL_EPSILON</code> is inappropriate. <code>a</code>, b<code>, and </code>c` can be compared to zero with <code>== 0</code>; there is no \u201cfuzziness\u201d in comparison. And <code>DBL_EPSILON</code> is <b>huge</b> compared to values in the small end of the floating-point range; comparing to it produces false results for perfectly fine values of <code>a</code>, <code>b</code>, or <code>c</code> even when no error is present."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536144595, "post_id": 52177745, "comment_id": 91316293, "body": "@AntoineMathys: x:=-b/2a is not a solution when \u0394&lt;0."}], "tags": [], "owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "is_accepted": false, "score": 1, "last_activity_date": 1536158891, "last_edit_date": 1536158891, "creation_date": 1536125752, "answer_id": 52177745, "question_id": 52174394, "link": "https://stackoverflow.com/questions/52174394/solve-quadratic-equation-when-coefficients-may-be-0/52177745#52177745", "title": "Solve quadratic equation when coefficients may be 0", "body": "<p>Since division by zero is not allowed, you have to split the problem into 4 cases :</p>\n\n<ol>\n<li><p>a != 0:\nthis is case you treated in your code.</p></li>\n<li><p>a == 0 &amp;&amp; b != 0 :\nThis is a linear equation where the solution is x = -c/b</p></li>\n<li><p>a == 0 &amp;&amp; b == 0 &amp;&amp; c != 0 : There's no possible value for x.</p></li>\n<li><p>In this last case, a, b and c are equals to 0 : there's infinitly many solutions for x.</p></li>\n</ol>\n\n<p>EDIT: comparisons with epsilon removed since they seem to be useless</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1536164075, "last_edit_date": 1536164075, "creation_date": 1536132297, "answer_id": 52179391, "question_id": 52174394, "link": "https://stackoverflow.com/questions/52174394/solve-quadratic-equation-when-coefficients-may-be-0/52179391#52179391", "title": "Solve quadratic equation when coefficients may be 0", "body": "<p>There are some problems in your code:</p>\n\n<ul>\n<li>you should check the return values of <code>scanf()</code> to avoid undefined behavior on invalid input.</li>\n<li>you should use local variables for intermediary results to improve code readability</li>\n<li><p>your <code>printf</code> statements are incorrect: you should pass the values of the double variables instead of their addresses: <code>printf(\"%lf\", &amp;x1);</code> should read:</p>\n\n<pre><code>printf(\"%f\", x1);\n</code></pre></li>\n</ul>\n\n<p>Regarding the degenerate cases, you should just test those before trying to resolve the second degree equation.</p>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n    double a, b, c, delta, x1, x2;\n\n    if (scanf(\"%lf%lf%lf\", &amp;a, &amp;b, &amp;c) != 3) {\n        printf(\"invalid input\\n\");\n        return 1;\n    }\n    if (a == 0) {\n        // not a quadratic equation\n        if (b != 0) {\n            printf(\"one solution: %g\\n\", -c / b);\n        } else {\n            if (c != 0) {\n                printf(\"no solution\\n\");\n            } else {\n                printf(\"all real values are solutions\\n\");\n            }\n        }\n    } else {\n        delta = b * b - 4 * a * c;\n\n        if (delta &lt; 0) {\n            printf(\"no real solution\\n\");\n        } else\n        if (delta == 0) {\n            printf(\"one double solution: %g\\n\", -b / (2 * a));\n        } else {\n            x1 = (-b + sqrt(delta)) / (2 * a);\n            x2 = (-b - sqrt(delta)) / (2 * a);\n            printf(\"two solutions: %g, %g\\n\", x1, x2);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1536216751, "post_id": 52189462, "comment_id": 91345354, "body": "<code>printf(&quot;%lf&quot;, &amp;x1);</code> should really be <code>printf(&quot;%f&quot;, x1);</code> No <code>&amp;</code>, nor <code>l</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1536219290, "post_id": 52189462, "comment_id": 91346623, "body": "@chqrlie Since C99 the <code>l</code> is OK and &quot;has no effect on a following a, A, e, E, f, F, g, or G conversion specifier.&quot;"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1536166669, "last_edit_date": 1536166669, "creation_date": 1536163766, "answer_id": 52189462, "question_id": 52174394, "link": "https://stackoverflow.com/questions/52174394/solve-quadratic-equation-when-coefficients-may-be-0/52189462#52189462", "title": "Solve quadratic equation when coefficients may be 0", "body": "<p><strong>Solve quadratic equation when coefficients may be 0</strong></p>\n\n<blockquote>\n  <p>How can I make it detect an infinite number of solutions?</p>\n</blockquote>\n\n<p>When <code>a==0 &amp;&amp; b == 0 &amp;&amp; c == 0</code>.<br>\nNo <code>DBL_EPSILON</code> needed really anywhere in this code.  See also <a href=\"https://stackoverflow.com/questions/52174394/solve-quadratic-equation-when-coefficients-may-be-0/52189462#comment91316254_52177745\">@Eric Postpischil</a>.</p>\n\n<blockquote>\n  <p>But what if b == 0 ?</p>\n</blockquote>\n\n<pre><code>if (b == 0) {  // y = a*x*x + c\n  if (a) {\n    double dd = -c/a;\n    if (dd &gt;= 0) {\n      double d = sqrt(d);\n      printf_roots(\"+/- roots\", d,-d);\n    } else {\n      printf_roots(\"Complex roots\", NAN, NAN);  // Note NAN may not exist\n    }\n  } else if (c) { // y = 0*x*x + c, c != 0\n    printf_roots(\"No roots\", NAN, NAN);\n  } else { // y = 0*x + 0\n    printf_roots(\"Infinite roots\", -HUGE_VAL, HUGE_VAL);\n  }\n</code></pre>\n\n<blockquote>\n  <p>Or should I just include b == 0 in b &lt; 0 and have b &lt;= 0 ?</p>\n</blockquote>\n\n<p>Unless the coding goal requires a special output when <code>b==0</code>, I would only vector code on <code>b==0</code> as a subtest when <code>a==0</code> occurred.</p>\n\n<pre><code>if (a==0) {\n  if (b == 0) {\n</code></pre>\n\n<hr>\n\n<p>The quadric equation, like much FP code, can readily overflow and hit 0, both cases losing all precision.</p>\n\n<p>Consider the code below: the unnecessary subtraction may cause overflow or truncation to 0 versus the second which may not.  It is dependent on many things.</p>\n\n<pre><code>if ((b * b - 4 * a * c) &lt; 0)\n// \nif (b * b &lt; 4 * a * c) \n</code></pre>\n\n<p>Further, C allows various calculations to occur using wider math.  Research <a href=\"https://en.wikipedia.org/wiki/C99#IEEE_754_floating_point_support\" rel=\"nofollow noreferrer\"><code>FLT_EVAL_METHOD</code></a>.  Because of this, to prevent <code>sqrt(value_less_than_0)</code>, code should calculate the <a href=\"https://en.wikipedia.org/wiki/Discriminant#Degree_2\" rel=\"nofollow noreferrer\">discriminate</a> and then test the object <code>x</code> that is going to be applied to <code>sqrt(x)</code>.</p>\n\n<pre><code>//if ((b * b - 4 * a * c) &lt; 0) {\n//    printf(\"no\"); \n//} else {\n//    x1 = (-b + sqrt(b * b - 4 * a * c))\n\ndouble discriminate = b * b - 4 * a * c;\nif (discriminate &lt; 0) {\n    printf(\"no\"); \n} else {\n    double d = sqrt(discriminate);  \n    x1 = (-b + d)\n</code></pre>\n\n<hr>\n\n<p>As to the idea of \"calculate the root with the minus before the discriminant if b > 0 and then use the Viet's theorem\", I'd suggest for improved retained precision the below which does not subtract like signed values.</p>\n\n<pre><code>    double d = sqrt(discriminate);\n\n    // Note x1*x2 = c/a\n    if (b &lt; 0) {\n      x2 = (-b + d)/(2*a);\n      x1 = c/a/x2;\n    } else {\n      x1 = (-b - d)/(2*a);\n      x2 = c/a/x1;\n    } \n    printf_roots(\"2 roots\", x1, x2);\n</code></pre>\n\n<hr>\n\n<p>Notes on <code>printf(\"%lf\", &amp;x1);</code>.  You are not compiling with all warnings enabled.  Save time - enable them. Should be <code>printf(\"%lf\", x1);</code>  No <code>&amp;</code>.</p>\n\n<p>Further <code>double</code> is <em>floating point</em>.  For FP code development use <code>\"%e\"</code>, <code>\"%a\"</code> or<code>\"%g\"</code> to full see significant information.</p>\n\n<pre><code>printf(\"%g\\n\", some_double);\n// or better\nprintf(\"%.*e\\n\", DBL_DECIMAL_DIG -1, some_double);\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 8791942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e552cdd3b46afda4d6bc5e7bea4621b9?s=128&d=identicon&r=PG&f=1", "display_name": "student28", "link": "https://stackoverflow.com/users/8791942/student28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 1, "accepted_answer_id": 52189462, "answer_count": 3, "score": 1, "last_activity_date": 1536166669, "creation_date": 1536097578, "last_edit_date": 1536131790, "question_id": 52174394, "link": "https://stackoverflow.com/questions/52174394/solve-quadratic-equation-when-coefficients-may-be-0", "title": "Solve quadratic equation when coefficients may be 0", "body": "<p>I was given a problem to write a C program which would solve the equation <strong>ax<sup>2</sup>+bx+c=0</strong>, where <strong>a</strong>, <strong>b</strong> and <strong>c</strong> are coefficients with <code>double</code> type. Any of the coefficients may be zero. In this problem it is unclear to me how to handle the <code>double</code> variables.</p>\n\n<p>Here is my code. As for now, I know that my program can't distinguish between two roots and infinitely many roots. It also doesn't detect the \"linear equation situation\". How can I make it detect an infinite number of solutions? I was also advised in the comments to calculate the root with the minus before the discriminant if b > 0 and then use the Viet's theorem. I understand that it is because it is always more accurate to sum two numbers. I also guess I should do the exact opposite with b &lt; 0. But what if b == 0 ? In this case, the program will not do anything. Or should I just include b == 0 in b &lt; 0 and have b &lt;= 0 ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;float.h&gt;\n\nint main() {\n    double a, b, c, x1, x2;\n\n    scanf(\"%lf\", &amp;a);\n    scanf(\"%lf\", &amp;b);\n    scanf(\"%lf\", &amp;c); // just reading variables \n    //ax^2+bx+c=0\n    if ((b * b - 4 * a * c) &lt; 0) {\n        printf(\"no\"); \n    } else {\n        x1 = (-b + sqrt(b * b - 4 * a * c)) / (2 * a); //calculating roots \n        x2 = (-b - sqrt(b * b - 4 * a * c)) / (2 * a);\n        if ((fabs((a * x1 * x1 + b * x1 + c)) &lt; DBL_EPSILON) &amp; (fabs((a * x2 * x2 + b * x2 + c)) &lt; DBL_EPSILON)) { //plugging the roots in\n            if (fabs((x1 - x2)) &lt; DBL_EPSILON) { //checking if the roots are equal\n                printf(\"%lf\", &amp;x1); // if they are equal, we print only one of them\n            } else {\n                printf(\"%lf\", &amp;x1); // if they are not equal, we print both.\n                printf(\"\\n %lf\", &amp;x2);\n            }\n        } else { // if there are no two valid roots\n            if ((fabs((a * x1 * x1 + b * x1 + c)) &lt; DBL_EPSILON)) // we try to find one root.\n                printf(\"%lf\", &amp;x1);\n            if (fabs((a * x2 * x2 + b * x2 + c)) &lt; DBL_EPSILON)\n                printf(\"%lf\", &amp;x2);\n            if ((fabs((a * x1 * x1 + b * x1 + c)) &gt; DBL_EPSILON) &amp; (fabs((a * x2 * x2 + b * x2 + c)) &gt; DBL_EPSILON)) // if both of the plugged roots don't satisfy the equation\n                printf(\"no\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "usergroups"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536097314, "post_id": 52174320, "comment_id": 91299614, "body": "It operates on the current process, not a user."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1536097608, "creation_date": 1536097608, "answer_id": 52174400, "question_id": 52174320, "link": "https://stackoverflow.com/questions/52174320/how-can-initgroups-call-setgroups-to-initialize-the-supplementary-group-id-l/52174400#52174400", "title": "How can `initgroups` call `setgroups` to initialize the supplementary group ID list for a user?", "body": "<p><code>setgroups()</code> operates on the current process, not a user. <code>initgroups()</code> gets the username as a parameter, looks up the user's groups, then passes that list of groups to <code>setgroups()</code> to modify the current process's supplementary group list.</p>\n\n<p>This is normally done during login, the username is the name that you're logging in as. The <code>login</code> process sets its group list, then execs your login shell. The group list is inherited by all the other processes in your login session.</p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1536108341, "creation_date": 1536108341, "answer_id": 52175616, "question_id": 52174320, "link": "https://stackoverflow.com/questions/52174320/how-can-initgroups-call-setgroups-to-initialize-the-supplementary-group-id-l/52175616#52175616", "title": "How can `initgroups` call `setgroups` to initialize the supplementary group ID list for a user?", "body": "<p>While Barmar <a href=\"https://stackoverflow.com/a/52174400/1475978\">already answered</a> the stated question, I think it might be useful to go into the details a bit.</p>\n\n<blockquote>\n  <p>Then how can initgroups call setgroups to initialize the supplementary group ID list for an arbitrary user?</p>\n</blockquote>\n\n<p><code>initgroups()</code> scans the group database (using <a href=\"http://man7.org/linux/man-pages/man3/getgrent.3.html\" rel=\"nofollow noreferrer\"><code>getgrent()</code></a> or a similar internal facility) to construct the list of supplementary groups to set using <code>setgroups()</code>.</p>\n\n<p>In other words, <code>setgroups()</code> is the interface to manipulate the supplementary group IDs of the current process. <code>initgroups()</code> is a helper function, that scans the group database to construct a list of all the group IDs the specified user is a member of, and calls <code>setgroups()</code> to install that set as supplementary group IDs.</p>\n\n<p>Here is an example implementation of <code>initgroups()</code>:</p>\n\n<pre><code>int initgroups(const char *name, gid_t group)\n{\n    gidarray      gids = GIDARRAY_INIT;\n    struct group *gr;\n    size_t        i;\n\n    /* Initialize the gids list to the specified group. */\n    if (gidarray_add(&amp;gids, group)) {\n        errno = ENOMEM;\n        return -1;\n    }\n\n    /* Loop through the group database. */\n    setgrent();\n    while (1) {\n\n        errno = 0;\n        gr = getgrent();\n        if (!gr) {\n            /* End of groups, or an error? */\n            if (errno) {\n                const int saved_errno = errno;\n                gidarray_free(&amp;gids);\n                endgrent();\n                errno = saved_errno;\n                return -1;\n            }\n            /* No error, just end of groups. */\n            break;\n        }\n\n        /* Is there is no member list, this group is not interesting. */\n        if (!gr-&gt;gr_mem)\n            continue;\n\n        /* Check if the user is listed in this group member list. */\n        for (i = 0; gr-&gt;gr_mem[i] != NULL; i++) {\n            if (!strcmp(gr-&gt;gr_mem[i], name)) {\n                /* Yes; add to list, break out of this for loop. */\n                if (gidarray_add(&amp;gids, gr-&gt;gr_gid)) {\n                    gidarray_free(&amp;gids);\n                    endgrent();\n                    errno = ENOMEM;\n                    return -1;\n                }\n                break;\n            }\n        }\n    }\n    endgrent();\n\n    /* Set the supplementary group list. */\n    if (setgroups(gidarray_size(&amp;gids), gidarray_ptr(&amp;gids)) == -1) {\n        const int saved_errno = errno;\n        gidarray_free(&amp;gids);\n        errno = saved_errno;\n        return -1;\n    }\n\n    gidarray_free(&amp;gids);\n    return 0;\n}\n\ntypedef struct {\n    size_t  max;\n    size_t  num;\n    gid_t  *gid;\n} gidarray;\n#define  GIDARRAY_INIT  { 0, 0, NULL }\n\nstatic void gidarray_free(gidarray *garr)\n{\n    if (garr) {\n        free(garr-&gt;gid);\n        garr-&gt;max = 0;\n        garr-&gt;num = 0;\n        garr-&gt;gid = NULL;\n    }\n}\n\nstatic size_t gidarray_size(gidarray *garr)\n{\n    return (garr) ? garr-&gt;num : 0;\n}\n\nstatic gid_t *gidarray_ptr(gidarray *garr)\n{\n    return (garr) ? garr-&gt;gid : NULL;\n}\n\nstatic int gidarray_add(gidarray *garr, const gid_t gid)\n{\n    /* Check if already included. */\n    size_t  i = garr-&gt;num;\n    while (i--&gt;0)\n        if (garr-&gt;gid[i] == gid)\n            return 0;\n\n    if (garr-&gt;num &gt;= garr-&gt;max) {\n        size_t  max = (garr-&gt;num | 15) + 17;\n        void   *tmp;\n\n        tmp = realloc(garr-&gt;gid, max * sizeof garr-&gt;gid[0]);\n        if (!tmp)\n            return -1;\n\n        garr-&gt;gid = tmp;\n        garr-&gt;max = max;\n    }\n\n    garr-&gt;gid[garr-&gt;num++] = gid;\n    return 0;\n}\n</code></pre>\n\n<p>The <code>gidarray_free()</code>, <code>gidarray_add()</code>, <code>gidarray_size()</code>, and <code>gidarray_ptr()</code> are helper functions listed below the function above, that manage the group ID array.</p>\n\n<p>In practice, when a privileged (root) process drops the privileges and switches to the identity of a specific user, it sets the user and group ID as specified in the <a href=\"http://man7.org/linux/man-pages/man3/getpwent.3.html\" rel=\"nofollow noreferrer\">password database</a>, and supplementary group IDs as specified in the <a href=\"http://man7.org/linux/man-pages/man3/getgrent.3.html\" rel=\"nofollow noreferrer\">group database</a>. In practice, such a function is something similar to</p>\n\n<pre><code>int drop_privileges(const char *username)\n{\n    struct passwd *pw;\n\n    /* Find out the user and group ID. */\n    pw = getpwnam(username);\n    if (!pw) {\n        errno = ENOENT; /* For \"no such user\" */\n        return -1;\n    }\n\n    /* Initialize supplementary groups. */\n    if (initgroups(username, pw-&gt;pw_gid) == -1)\n        return -1;\n\n    /* Set real, effective, and saved group ID. */\n    if (setresgid(pw-&gt;pw_gid, pw-&gt;pw_gid, pw-&gt;pw_gid) == -1)\n        return -1;\n\n    /* Omitted: Dropping Linux capabilities. */\n\n    /* Drop privileges by setting real, effective, and saved user ID. */\n    if (setresuid(pw-&gt;pw_uid, pw-&gt;pw_uid, pw-&gt;pw_uid) == -1)\n        return -1;\n\n    /* Now this process has the identity and thus privileges\n       of user 'username', and no more. */\n    return 0;\n}\n</code></pre>\n\n<p>There are other relevant details to be considered when dropping privileges (in particular, access checks for files and devices are typically done only at open time, so leaking privileged open files is a problem), but the above is a rough sketch of how the user and group identity part of it works.</p>\n\n<p>Note that you can use the <a href=\"http://man7.org/linux/man-pages/man1/id.1.html\" rel=\"nofollow noreferrer\"><code>id</code></a> utility (part of Coreutils, so should be installed on all systems) to examine the identity of the current process. For example, <code>id -un</code> shows the user name matching the current user ID, <code>id -gn</code> shows the group name matching the current group ID, and <code>id -Gn</code> lists the group names matching the supplementary group IDs.</p>\n\n<p>Similarly, you can use the <a href=\"http://man7.org/linux/man-pages/man1/getent.1.html\" rel=\"nofollow noreferrer\"><code>getent</code></a> utility (installed as part of the C library) to examine the user and password databases: <code>getent passwd</code> shows the public fields of the user database, <code>getent passwd username</code> shows the public fields for user 'username' in the user database, <code>getent group</code> shows the public fields of the group database, and <code>getent group groupname</code> shows the public fields of the group 'groupname' in the group database.</p>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1536108341, "creation_date": 1536097133, "last_edit_date": 1536097446, "question_id": 52174320, "link": "https://stackoverflow.com/questions/52174320/how-can-initgroups-call-setgroups-to-initialize-the-supplementary-group-id-l", "title": "How can `initgroups` call `setgroups` to initialize the supplementary group ID list for a user?", "body": "<p>From APUE</p>\n\n<blockquote>\n<pre><code>#include &lt;grp.h&gt; /* on Linux */\nint setgroups(int ngroups, const gid_t grouplist[]);\n</code></pre>\n  \n  <p>The <code>setgroups</code> function can be called by the superuser to <strong>set the\n  supplementary group  ID  list  for  the  calling  process</strong></p>\n\n<pre><code>#include &lt;grp.h&gt; /* on Linux and Solaris */\nint initgroups(const char *username, gid_t basegid);\n</code></pre>\n  \n  <p>The <code>setgroups</code> function is usually called from the <code>initgroups</code> function,\n  which reads the entire group \ufb01le\u2014with the functions <code>getgrent</code>,\n  <code>setgrent</code>, and <code>endgrent</code>, which  we  described  earlier\u2014and  determines \n  the  group  membership  for username. <strong>It then calls <code>setgroups</code> to\n  initialize the supplementary group ID list for the user</strong>.</p>\n</blockquote>\n\n<p><code>initgroups</code> can take a username as a parameter, while <code>setgroups</code> doesn't take a username as a parameter. Then how can <code>initgroups</code> call <code>setgroups</code> to initialize the supplementary group ID list for an arbitrary user?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "linux", "privileges", "access-control"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536105150, "post_id": 52174287, "comment_id": 91301396, "body": "For privileged operations, POSIX frequently uses the term &#39;appropriate privileges&#39;, which typically (and historically) means &#39;effective UID (EUID) of process is 0&#39;. However, modern Linux also has capabilities, and there could be a capability which allows a different EUID to achieve the same result \u2014 and be POSIX compliant. (See, for example, POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/setuid.html\" rel=\"nofollow noreferrer\"><code>setuid()</code></a> for an example.) . POSIX doesn&#39;t define <code>initgroups()</code> or <code>setgroups()</code>, but similar rules would apply. Setting the groups list is inherently a privileged operation."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1536100866, "creation_date": 1536100866, "answer_id": 52174839, "question_id": 52174287, "link": "https://stackoverflow.com/questions/52174287/what-is-the-mechanism-that-decides-that-setgroups-and-initgroups-must-be-cal/52174839#52174839", "title": "What is the mechanism that decides that setgroups() and initgroups() must be called with the superuser?", "body": "<p>The wording in APUE is perhaps a bit imprecise; it's a tutorial guide for programmers, not a legal compendium. Any process can <em>call</em> <code>setgroups()</code> or <code>initgroups()</code>. But if the process does not have root privileges, the function will do nothing more than set <code>errno</code> to <code>EPERM</code> and return an error indication.</p>\n\n<p>Obviously, the permissions test cannot be done with user privileges. The library function is just a thin wrapper around a syscall, and the tests are done inside the kernel.</p>\n\n<p>For what it's worth, here is the first hit Google gave me when asked about the Linux syscall mechanism: <a href=\"http://www.linux.it/~rubini/docs/ksys/\" rel=\"nofollow noreferrer\">http://www.linux.it/~rubini/docs/ksys/</a>. But perhaps you have a better resource closer to hand.</p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 2, "last_activity_date": 1536110137, "creation_date": 1536110137, "answer_id": 52175789, "question_id": 52174287, "link": "https://stackoverflow.com/questions/52174287/what-is-the-mechanism-that-decides-that-setgroups-and-initgroups-must-be-cal/52175789#52175789", "title": "What is the mechanism that decides that setgroups() and initgroups() must be called with the superuser?", "body": "<p>In Linux, if a process has the <code>CAP_SETGID</code> <a href=\"http://man7.org/linux/man-pages/man7/capabilities.7.html\" rel=\"nofollow noreferrer\">capability</a>, the kernel will honor <code>setgid()</code>, <code>setegid()</code>, <code>setregid()</code>, <code>setresgid()</code>, and <code>setgroups()</code> calls (unless denied by a Linux Security Module like SELinux).</p>\n\n<p>There are two main mechanisms how an unprivileged user may obtain a capability:</p>\n\n<ul>\n<li><p>Inheriting it from a privileged process. For normal users, extra capabilities may be granted by PAM modules at login.</p></li>\n<li><p>Via filesystem capabilities.</p></li>\n</ul>\n\n<p>The filesystem capabilities are the more interesting, and useful for services/applications. They only work for binaries, not scripts, because the kernel updates the capabilities as part of the mechanism for executing binaries; scripts are interpreted by shells using a completely different, entirely userspace mechanism.</p>\n\n<p>(The filesystem must support extended attributes. Some filesystems like ext2, ext3, and reiserfs, must be mounted with the <code>user_xattr</code> mount option to enable extended attributes. ext4, xfs, jfs, btrfs, and zfs all should support extended attributes using default mount options. Some Linux distributions like Debian and Ubuntu already rely on extended attributes and filesystem capabilities.)</p>\n\n<p>Note: you can use the <code>getcap</code> and <code>lsattr</code> utilities to examine binaries filesystem capabilities and extended attributes. On my Ubuntu 16.04.4 LTS system, the <code>/usr/bin/systemd-detect-virt</code> binary has both CAP_DAC_OVERRIDE and CAP_SYS_PTRACE capabilities permitted and effective.</p>\n\n<p>Using filesystem capabilities is very easy in practice, but for safe operation, the security implications should be carefully considered first: it is a powerful tool, but you (developer, package manager, and/or system administrator) are responsible for making sure it is used correctly.</p>\n\n<p>For example, if you are installing <code>/usr/bin/yourprog</code> that is trusted and requires the CAP_SETGID capability, all you need to do is set that capability permitted and effective for that binary. To do that, you run <code>setcap cap_setgid=pe /usr/bin/yourprog</code> with root privileges. (In a Debian .deb package install script, that is typically run in the post-install script.)</p>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 2, "last_activity_date": 1536113259, "creation_date": 1536113259, "answer_id": 52176109, "question_id": 52174287, "link": "https://stackoverflow.com/questions/52174287/what-is-the-mechanism-that-decides-that-setgroups-and-initgroups-must-be-cal/52176109#52176109", "title": "What is the mechanism that decides that setgroups() and initgroups() must be called with the superuser?", "body": "<p>You can look at the <a href=\"https://github.com/torvalds/linux/blob/bdcf0a423ea1c40bbb40e7ee483b50fc8aa3d758/kernel/groups.c#L190\" rel=\"nofollow noreferrer\">actual code for setgroups</a>. It starts like this:</p>\n\n<pre><code>SYSCALL_DEFINE2(setgroups, int, gidsetsize, gid_t __user *, grouplist)\n{\n    struct group_info *group_info;\n    int retval;\n\n    if (!may_setgroups())\n        return -EPERM;\n\n    // other stuff\n}\n</code></pre>\n\n<p>And here is <code>may_setgroups</code>:</p>\n\n<pre><code>bool may_setgroups(void)\n{\n    struct user_namespace *user_ns = current_user_ns();\n\n    return ns_capable(user_ns, CAP_SETGID) &amp;&amp;\n        userns_may_setgroups(user_ns);\n}\n</code></pre>\n\n<p>And here is <code>userns_may_setgroups</code>, if you aren't using user namespaces:</p>\n\n<pre><code>static inline bool userns_may_setgroups(const struct user_namespace *ns)\n{\n    return true;\n}\n</code></pre>\n\n<p>So: <code>setgroups</code> will return an <code>EPERM</code> error <em>if you don't have the <code>CAP_SETGID</code> capability</em>.</p>\n\n<p>Corollary: You can call <code>setgroups</code> if you have the <code>CAP_SETGID</code> capability.</p>\n\n<p>Root has all capabilities automatically (so root can call <code>setgroups</code>), but you can also call it if you are not root and you have the <code>CAP_SETGID</code> capability.</p>\n"}], "owner": {"reputation": 1, "user_id": 156458, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3PCjR.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/156458/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1536113259, "creation_date": 1536096913, "question_id": 52174287, "link": "https://stackoverflow.com/questions/52174287/what-is-the-mechanism-that-decides-that-setgroups-and-initgroups-must-be-cal", "title": "What is the mechanism that decides that setgroups() and initgroups() must be called with the superuser?", "body": "<p>From APUE</p>\n\n<blockquote>\n<pre><code>#include &lt;grp.h&gt; /* on Linux */\nint setgroups(int ngroups, const gid_t grouplist[]);\n</code></pre>\n  \n  <p>The <code>setgroups</code> function can be <strong>called by the superuser</strong> to set the supplementary group  ID  list  for  the  calling  process: grouplist contains  the  array  of  group  IDs,  and\n  ngroups speci\ufb01es the number of elements in the array. The value of ngroups cannot be larger than NGROUPS_MAX.</p>\n\n<pre><code>#include &lt;grp.h&gt; /* on Linux and Solaris */\nint initgroups(const char *username, gid_t basegid);\n</code></pre>\n  \n  <p><strong>One must  be  superuser</strong>  to  call <code>initgroups()</code>, since  it  calls <code>setgroups()</code>.</p>\n</blockquote>\n\n<p>What is the mechanism that decides that <code>setgroups()</code> and <code>initgroups()</code> must be called with the superuser?</p>\n\n<p>By \"mechanism\", I mean something similar to or as a counterpart  to the following. in Linux, I  learned that we can determine accessibility of a process to a file, based on access control list (ACL):</p>\n\n<ul>\n<li><p>the effective user ID, effective group ID and supplementary group IDs of the process and</p></li>\n<li><p>the permission bits of the file.</p></li>\n</ul>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "recursion", "return"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 5, "creation_date": 1536095040, "post_id": 52173962, "comment_id": 91298828, "body": "It means the same thing there that it means anywhere else.  It is the logical or operator."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1536095147, "post_id": 52173962, "comment_id": 91298870, "body": "It is not so much &quot;in a return&quot;, as much as you evaluate that expression and then return the result of it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1536095463, "post_id": 52173962, "comment_id": 91298982, "body": "It means the return statement returns either <code>0</code> or <code>1</code>.  If the left-hand call to <code>m</code> returns <code>1</code> (or any other non-zero value), the right-hand call won&#39;t be made (and the result will be <code>1</code>); if the left-hand call returns <code>0</code>, the right-hand call will be made, and the return value will be <code>0</code> if the RH call returns <code>0</code> and <code>1</code> otherwise.  This is the normal short-circuiting behaviour of the <code>||</code> operator."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536096211, "post_id": 52173962, "comment_id": 91299224, "body": "@JonathanLeffler You can&#39;t count on a 1, it could be some other non-zero value."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 1, "creation_date": 1536096407, "post_id": 52173962, "comment_id": 91299291, "body": "@nicomp: what can&#39;t be counted on to be a 1?  The question is tagged &#39;recursion&#39; and &#39;<code>m</code>&#39; is specified as the function, so it is probable that <code>m</code> is a recursive function and this <code>return</code> statement is in <code>m</code>.  There could be other <code>return</code> statements in the function; it cannot be guaranteed that those return <code>0</code> or <code>1</code> because we&#39;ve not been shown them.  However, this <code>return</code> statement is only going to return <code>0</code> or <code>1</code> because the <code>||</code> operator only evaluates to <code>0</code> or <code>1</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1536096409, "post_id": 52173962, "comment_id": 91299292, "body": "@nicomp the result of a boolean expression is <code>0</code> or <code>1</code>. There are other situations where you might expect that, but is as you say, such as the library function <code>isupper()</code> and more, which return <b>non-0</b> result."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1536096437, "post_id": 52173962, "comment_id": 91299301, "body": "The standard disagrees with you, @nicomp: &quot;The || operator shall yield 1 if either of its operands compare unequal to 0; otherwise, it yields 0.&quot;  (<a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5.14p3\" rel=\"nofollow noreferrer\">C2011 6.5.14/3</a>).  All values other than 0 are interpreted as true in boolean context, but relational operations always evaluate to either 1 or 0."}, {"owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "edited": false, "score": 0, "creation_date": 1536096848, "post_id": 52173962, "comment_id": 91299451, "body": "Crazy how many languages can&#39;t do <code>||</code> and <code>&amp;&amp;</code>right. <code>5 || 0</code>  and <code>2 &amp;&amp; 4</code> should evaluate to <code>5</code> and <code>4</code> and not <code>1</code> and <code>1</code>.. It&#39;s sad."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "edited": false, "score": 0, "creation_date": 1536097113, "post_id": 52173962, "comment_id": 91299547, "body": "@Sylwester: it&#39;s crazy that there are any languages where <code>||</code> or <code>&amp;&amp;</code> do not evaluate to a boolean value.  They&#39;re logical operators, not numeric operators. \u2026 \u2014 \u2026 Or, more validly, there are different languages with different designs, and the design of C is as described (where the logical operators return <code>0</code> or <code>1</code>) and other languages can do anything they choose because they aren&#39;t C."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "edited": false, "score": 0, "creation_date": 1536097570, "post_id": 52173962, "comment_id": 91299694, "body": "@Sylwester I am sorry that so many crazy/sad languages can&#39;t get it right. The question is about the logical <code>||</code> not the bitwise <code>|</code>. In your first example the result of <code>5 | 0</code> is indeed <code>5</code>, but in your second example <code>2 &amp; 4</code> evaluates to <code>0</code>, not <code>4</code>."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 9, "last_activity_date": 1536096112, "creation_date": 1536096112, "answer_id": 52174148, "question_id": 52173962, "link": "https://stackoverflow.com/questions/52173962/an-or-operator-in-a-return/52174148#52174148", "title": "An or operator in a return?", "body": "<p>There's nothing special about using the <code>||</code> operator in a <code>return</code> statement. A statement like:</p>\n\n<pre><code>return &lt;expression&gt;;\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>temp = &lt;expression&gt;;\nreturn temp;\n</code></pre>\n\n<p>(where <code>temp</code> has the same type as the function's return type).</p>\n\n<p>So your statement is equivalent to:</p>\n\n<pre><code>int temp = (m(s1 + 1, s2) || m(s1 + 1, s2 + 1));\nreturn temp;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 5, "last_activity_date": 1536096174, "creation_date": 1536096174, "answer_id": 52174153, "question_id": 52173962, "link": "https://stackoverflow.com/questions/52173962/an-or-operator-in-a-return/52174153#52174153", "title": "An or operator in a return?", "body": "<p>The line <code>return (m(s1 + 1, s2) || m(s1 + 1, s2 + 1));</code> can be rewritten in this form:</p>\n\n<pre><code>if ( m(s1 + 1, s2) )\n{ \n    /* if left part not null, return 1, without \n       evaluationg the right part */\n    return 1;\n}\nelse if ( m(s1 + 1, s2 + 1) )\n{  \n    /* if left was 0, test right part */\n    return 1;\n}\nelse\n{ \n    /* if both are null, return 0*/\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536098799, "post_id": 52174203, "comment_id": 91300036, "body": "In C, &quot;implicit <code>int</code>&quot; as shown in <code>auto value = m(s1 + 1, s2);</code> went the way of the dodo in C99 (though there are certainly C compilers that would still accept it).  In C, you don&#39;t use <code>auto</code> \u2014 there is no reason to do so and writing <code>auto</code> would be effectively wrong (very non-idiomatic).  In C++, the rules are dramatically different \u2014 but C++ is a very different language from C."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1536101426, "post_id": 52174203, "comment_id": 91300656, "body": "The code in this answer is not equivalent to the original, as the original necessarily returns 0 or 1, while this code returns a value returned by <code>m</code>, which may differ."}, {"owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536105014, "post_id": 52174203, "comment_id": 91301375, "body": "@EricPostpischil It was wishful thinking. Of course C would implement <code>||</code> and <code>&amp;&amp;</code> wrong :-(. Anyway fixed the code."}, {"owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536105956, "post_id": 52174203, "comment_id": 91301529, "body": "@JonathanLeffler my edit didn&#39;t need bindings anymore, but thanks for the comment. My C experience predates C99 so I might be a little rusty :-p"}], "tags": [], "owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "is_accepted": false, "score": 1, "last_activity_date": 1536104845, "last_edit_date": 1536104845, "creation_date": 1536096421, "answer_id": 52174203, "question_id": 52173962, "link": "https://stackoverflow.com/questions/52173962/an-or-operator-in-a-return/52174203#52174203", "title": "An or operator in a return?", "body": "<p><code>||</code> is a short circuiting or, meaning that the expression will stop executing at the first true value as the result.\nIt has the same effect as this code but is a lot shorter and easier to read if you know what <code>||</code> means:</p>\n\n<pre><code>if (m(s1 + 1, s2)) {\n  return 1;\n}\nif(m(s1 + 1, s2 + 1)) {\n  return 1;\n}\nreturn 0;\n</code></pre>\n\n<p>If <code>m</code> printed something to screen it would only print once if the first call returned a true value. You also have <code>&amp;&amp;</code> which does something similar but stops at the first false value. <code>return (m(s1 + 1, s2) &amp;&amp; m(s1 + 1, s2 + 1));</code>  is the same as:</p>\n\n<pre><code>if (!m(s1 + 1, s2)) {\n  return 0;\n}\nif (!m(s1 + 1, s2 + 1)) {\n  return 0;\n}\nreturn 1;\n</code></pre>\n\n<p>The obvious reason to use the operators is that you need less boilerplate. </p>\n"}], "owner": {"reputation": 85, "user_id": 9700490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b10cdb428fcf8197bf42b2e482406?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Resal", "link": "https://stackoverflow.com/users/9700490/patrick-resal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 52174153, "answer_count": 3, "score": 0, "last_activity_date": 1536104845, "creation_date": 1536095001, "last_edit_date": 1536095320, "question_id": 52173962, "link": "https://stackoverflow.com/questions/52173962/an-or-operator-in-a-return", "title": "An or operator in a return?", "body": "<p>I just saw something like:</p>\n\n<pre><code>return (m(s1 + 1, s2) || m(s1 + 1, s2 + 1));\n</code></pre>\n\n<p>What does the <code>||</code> mean in a <code>return</code> statement?\nHere, <code>m</code> is a function; <code>s1</code> and <code>s2</code> are strings.</p>\n"}, {"tags": ["c", "visual-studio", "visual-studio-2017"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1536094987, "post_id": 52173923, "comment_id": 91298806, "body": "If you are writing stuff in C, why the C++ tag?  They are two distinct languages.  The C++ language has <code>std::string, std::vector, templates</code> and passing by reference.  Please update your tags accordingly."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1536095163, "post_id": 52173923, "comment_id": 91298876, "body": "Create folders manually and in VS use filters as folders."}, {"owner": {"reputation": 41, "user_id": 9955194, "user_type": "registered", "profile_image": "https://graph.facebook.com/1835397126482903/picture?type=large", "display_name": "Maor Waynshtein", "link": "https://stackoverflow.com/users/9955194/maor-waynshtein"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1536095401, "post_id": 52173923, "comment_id": 91298955, "body": "@Evg What do you mean? In file explorer create the folders I want, then in VS create according filters? I feel like it&#39;s not the best way to do it... Isn&#39;t there a way to put real folders in VS?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1536096545, "post_id": 52173923, "comment_id": 91299335, "body": "Exactly. It seems to be the only way."}, {"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1536103553, "post_id": 52173923, "comment_id": 91301104, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5321404/vc2010-c-organizing-source-files\">VC2010 C++ - organizing source files</a> Yes it&#39;s for 2010 but still very relevant"}], "answers": [{"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 1, "last_activity_date": 1536148808, "last_edit_date": 1536148808, "creation_date": 1536098324, "answer_id": 52174519, "question_id": 52173923, "link": "https://stackoverflow.com/questions/52173923/visual-studio-2017-folders-in-project/52174519#52174519", "title": "Visual Studio 2017 Folders in Project", "body": "<p>The way that I think of Visual Studio 2017 (earlier versions of the IDE as well) and its presentation of files in File View is as a kind of virtual file organizing system. File View allows you to logically organize files, presenting the actual file system in a more helpful manner.</p>\n\n<p>The icons that look like folders in the File View are not really folders but are instead labels, called filters, which allow you to group your files however you like regardless of how they are physically stored in your persistent storage area such as a hard drive.</p>\n\n<p>Filters are more flexible by not corresponding to the physical file folder hierarchy as they allow you to organize files that are all in a single folder into logical groups. Filters allow this to be done at a finer grain than is typically used by grouping files in folders. Filters also allow you to group files that are in multiple folders together into a single logical folder within File View.</p>\n\n<p>However filters can be confusing because most of us are so accustomed to file folder hierarchies that the filter methodology can disconnect the logical file as represented in a Filter from the physical file location located in a folder.</p>\n\n<p><strong>My typical methods of adding files</strong></p>\n\n<p>Typically what I do is to create the physical folders through Windows or doing a clone of an existing Git or Subversion or VS Team Services source tree. With something new I may use the New Solution or New Project wizard to create my initial starting point and then organize and add files and folders physically through Windows and then go into the Visual Studio IDE to create the Filters and then Add existing files to the Filters. In some cases I will create sub-filters within a Filter in order to better organize the files within a physical Folder.</p>\n\n<p>For new files I will just use the <code>Add New Item</code> menu option to add the item to the proper project. If you right click on a filter name, the new file will automatically be added to the filter. In some cases when I have added additional filters to the project to organize files, I will drag the newly created item to the proper filter and drop it there.</p>\n\n<p>This drag and drop is not changing the physical location of the file but is changing its logical position by moving it from one filter to another. To move the file physically from one folder to another, I will usually do that with Windows. Just remember that if you do physically move a file with Windows you must also modify the file's entry in the Visual Studio 2017 filter to which it has been assigned, I usually do a <code>Remove</code> on the file followed by <code>Add Existing Item</code> and browse to its new location.</p>\n\n<p>It appears you can not have the same file in multiple filters within the same project.</p>\n\n<p>In some cases when I <code>Add New item</code>, I will change from the suggested folder displayed in the <code>Add New Item</code> dialog to a different folder using the <code>Browse</code> button. And if I need a different extension to the file then I will make that change as well, a common action when adding a new C source file to a project which requires changing the <code>.cpp</code> extension to <code>.c</code>.</p>\n\n<p>You can also use the <code>Browse</code> button to navigate to a folder where you can then create a new folder if you like using the right click menu that displays when you do a right click in the displayed list of files and folders.</p>\n\n<p>Unfortunately, the <code>Add New Item</code> dialog always wants to put a file into the project directory with all the other files. The <code>Add Class</code> wizard doesn't give you the opportunity to specify anything other than the default project folder. I have in some cases created C++ classes using the Visual Studio IDE, removed them from the project, moved the physical files to where I want them to be and then added them back to the project.</p>\n\n<p>The filter approach seems to work well because the total solution is divided up into multiple projects and each project has its own physical folder. The multiple projects may correspond to particular DLLs or static libraries or other components that are used by the solution.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/3242897/can-i-configure-visual-studio-to-use-real-folders-instead-of-filters-in-c-proj\">Can I configure Visual Studio to use real folders instead of filters in C++ projects?</a></p>\n\n<p><strong>Example screenshots of folder and filters</strong></p>\n\n<p>Here is a Windows folder view of a small project of the resources being used:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BHWcV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BHWcV.png\" alt=\"screenshot of a Windows folder showing the files in it\"></a></p>\n\n<p>And this is how I have the filters set up. Normally the list of resource files can be quite long however I have created two sub-filters to logically separate out bitmap files from icon files though they both share the same physical resource folder.</p>\n\n<p><a href=\"https://i.stack.imgur.com/W7gr3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W7gr3.png\" alt=\"screenshot of Solution View from Visual Studio 2017 showing same files\"></a></p>\n\n<p>Also the filter named PepIncludes corresponds with an actual physical folder named the same while the filters named \"Header Files\" and \"Source Files\" are groups of files that all reside in the same physical folder which is named the same as the project folder.</p>\n\n<p>The following screen shot shows how filters can provide flexibility. I have a folder with include files, PepIncludes, and I have the same collection of files in two different projects within this Visual Studio 2017 solution. In a solution with 30 or 40 projects, this can make it a lot easier to manage files. For instance you can see that after modifying the file \"ECR.h\" the fact that it has been modified shows in both of the filter file listings (the small red check mark next to the name).</p>\n\n<p><a href=\"https://i.stack.imgur.com/6C1pN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6C1pN.png\" alt=\"screenshow Visual Studio 2017 Solution Explorer showing same filter duplicated in two projects with same files\"></a></p>\n"}], "owner": {"reputation": 41, "user_id": 9955194, "user_type": "registered", "profile_image": "https://graph.facebook.com/1835397126482903/picture?type=large", "display_name": "Maor Waynshtein", "link": "https://stackoverflow.com/users/9955194/maor-waynshtein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1287, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1536148808, "creation_date": 1536094774, "last_edit_date": 1536098563, "question_id": 52173923, "link": "https://stackoverflow.com/questions/52173923/visual-studio-2017-folders-in-project", "title": "Visual Studio 2017 Folders in Project", "body": "<p>I am using Visual Studio 2017 to write some stuff in C. When I open a new project, I have some default filters and in \"add\" option for the project there's only filter and no folder/directory.</p>\n\n<p>I want my project to have a folder structure, but can't add folders to the project in Visual Studio. Looking online I can only find solutions for adding an existing folder to a project and not adding a new one.</p>\n\n<p>How can I add new folders to a Visual Studio C project?</p>\n\n<p>How can I disable filters?</p>\n"}, {"tags": ["c", "graph-theory", "breadth-first-search"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536093705, "post_id": 52173701, "comment_id": 91298322, "body": "Your &quot;edges&quot; part is essentially an adjacency matrix. It is giving the coordinates of the non-zero cells."}, {"owner": {"reputation": 176, "user_id": 7215755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a55e8d00684ad36996a6d4b91166e16f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7215755/jack"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536093861, "post_id": 52173701, "comment_id": 91298384, "body": "Hmm, is there a faster way to look up the adjacent node then? :/"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536093981, "post_id": 52173701, "comment_id": 91298437, "body": "If you have a readily available algorithm working with adj. matrix, the best for you will be just to build one, especially with such a trivial &quot;conversion&quot;."}, {"owner": {"reputation": 176, "user_id": 7215755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a55e8d00684ad36996a6d4b91166e16f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7215755/jack"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536094274, "post_id": 52173701, "comment_id": 91298542, "body": "Well I have stumbled upon an exercise and I think that the BFS is the way to go. I tried to write it \u201con my own\u201d translating that pseudocode. Didn\u2019t know how to efficiently look up the adjacent nodes and so tried to look it up and only found code expecting adjacent matrix"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536094367, "post_id": 52173701, "comment_id": 91298575, "body": "BFS is working better with a different data structure (node + pointers to a adjacent nodes)."}, {"owner": {"reputation": 176, "user_id": 7215755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a55e8d00684ad36996a6d4b91166e16f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7215755/jack"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536094463, "post_id": 52173701, "comment_id": 91298612, "body": "Oh, so I guess I should use different algorithm?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536094553, "post_id": 52173701, "comment_id": 91298639, "body": "Algorithm is the same. Your pseudocode has no notion of the underlying data structure. But the <code>for all neighbours w of v</code> part is done more efficiently with the nodes-pointers structure."}, {"owner": {"reputation": 176, "user_id": 7215755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a55e8d00684ad36996a6d4b91166e16f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7215755/jack"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536094724, "post_id": 52173701, "comment_id": 91298705, "body": "Could you pretty please send link or try it explain it real simple? :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1536094835, "post_id": 52173701, "comment_id": 91298741, "body": "The correct name is apparently &quot;adjacency list&quot;... <a href=\"https://www.geeksforgeeks.org/graph-and-its-representations/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/graph-and-its-representations</a>"}, {"owner": {"reputation": 176, "user_id": 7215755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a55e8d00684ad36996a6d4b91166e16f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7215755/jack"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536094890, "post_id": 52173701, "comment_id": 91298767, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/179416/discussion-between-jack-and-eugene-sh\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1536097657, "last_edit_date": 1536097657, "creation_date": 1536097303, "answer_id": 52174344, "question_id": 52173701, "link": "https://stackoverflow.com/questions/52173701/how-to-find-all-neighbors-of-node-if-the-graph-is-not-in-form-of-adjacency-matri/52174344#52174344", "title": "How to find all neighbors of node if the graph is not in form of adjacency matrix?", "body": "<blockquote>\n  <p>I have tried to google BFS implementations in C but all of them seem to be expecting graph in form of adjacency matrix, and from what I have understood it enables to find out all adjacent nodes in no time.</p>\n</blockquote>\n\n<p>Well, no.  An adjacency matrix allows you to find the <em>set</em> of adjacent nodes in a nonzero amount of time that is independent of the number of nodes.  But it still takes time proportional to the number of nodes to determine what all the elements of that set are.  Other representations, such as an adjacency <em>list</em>, can allow finding the set in the same constant time, and finding its elements in time proportional to their number (which can be much less than the total number of nodes).</p>\n\n<blockquote>\n  <ol>\n  <li>But what am I supposed to do to find out adjacent nodes if the input is in form of pair of nodes?</li>\n  </ol>\n</blockquote>\n\n<p>How about building an adjacency matrix or adjacency list or alternative representation, and then using it?</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Am i supposed to store the edges and loop through them each time I am looking for neighbours? But that sounds slow and like something dummy like me would do :( .</li>\n  </ol>\n</blockquote>\n\n<p>A flat list of edges is one possible representation.  There are ways you could make such a list more efficient to work with (by sorting it and / or indexing it, for example), but whether that's actually a win depends on the problem.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Or am I somehow supposed to convert the input to adjacency matrix?</li>\n  </ol>\n</blockquote>\n\n<p>If indeed you want to create an adjacency matrix, then start by creating a matrix representing all the nodes, with no edges.  Read the edge list, and fill in the appropriate entry for each edge in it, or the appropriate two entries if the graph is undirected.</p>\n"}], "owner": {"reputation": 176, "user_id": 7215755, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a55e8d00684ad36996a6d4b91166e16f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7215755/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 1, "accepted_answer_id": 52174344, "answer_count": 1, "score": 1, "last_activity_date": 1542273255, "creation_date": 1536093582, "last_edit_date": 1542273255, "question_id": 52173701, "link": "https://stackoverflow.com/questions/52173701/how-to-find-all-neighbors-of-node-if-the-graph-is-not-in-form-of-adjacency-matri", "title": "How to find all neighbors of node if the graph is not in form of adjacency matrix?", "body": "<p>I have tried to google BFS implementations in C but all of them seem to be expecting graph in form of adjacency matrix, and from what I have understood it enables  to find out all adjacent nodes in no time.</p>\n\n<ol>\n<li>But what am I supposed to do to find out adjacent nodes if the input is in form of pair of nodes?</li>\n<li>Am i supposed to store the edges and loop through them each time I am looking for neighbours? But that sounds slow and like something dummy like me would do :( .</li>\n<li>Or am I somehow supposed to convert the input to adjacency matrix?</li>\n</ol>\n\n<p><strong>Example of input</strong></p>\n\n<pre><code>{\n    Nodes:\n    0\n    1\n    2\n    3\n    Edges:\n    0 2\n    1 3\n    2 3\n    0 1\n}\n</code></pre>\n\n<p>\u200b</p>\n\n<p><strong>Pseducode</strong></p>\n\n<pre><code>BFS (G, s)   //Where G is the graph and s is the source node\n      let Q be queue.\n      Q.enqueue( s )\n      mark s as visited.\n      while ( Q is not empty)\n           v  =  Q.dequeue( )\n\n          for all neighbours w of v in Graph G  /* &lt;---------------------------------------- HOW? */\n               if w is not visited \n                        Q.enqueue( w )             \n                        mark w as visited.\n</code></pre>\n\n<p>from <a href=\"https://www.hackerearth.com/practice/algorithms/graphs/breadth-first-search/tutorial/\" rel=\"nofollow noreferrer\">https://www.hackerearth.com/practice/algorithms/graphs/breadth-first-search/tutorial/</a></p>\n"}, {"tags": ["c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536092752, "post_id": 52173477, "comment_id": 91297886, "body": "What does <code>run perl -e &#39;print &quot;A&quot;x100&#39;</code> have to do with this C program? Is <code>run</code> the name of the executable?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536092903, "post_id": 52173477, "comment_id": 91297970, "body": "<code>buf</code> is not a variable, you can&#39;t change where it points to. It&#39;s a fixed stack offset, and the debugging symbol <code>buf</code> just tells <code>gdb</code> where to find the contents."}, {"owner": {"reputation": 13, "user_id": 10265255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878d18101ef90a78ecb63ae37880a0bd?s=128&d=identicon&r=PG&f=1", "display_name": "asdfasdfasdf", "link": "https://stackoverflow.com/users/10265255/asdfasdfasdf"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536093123, "post_id": 52173477, "comment_id": 91298085, "body": "@barmar <code>perl -e &#39;print &quot;A&quot;x100&#39;</code> mean to print <code>A</code> 100 times, so rather than doing: <code>run AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&zwnj;&#8203;AAAAAAAAAAAAAAAAAAAA&zwnj;&#8203;AAAAAAAAAAAAAAAAAAAA&zwnj;&#8203;AAAAAAAAAAAAAAAAAAAA&zwnj;&#8203;AAAAAAAAAAAAAAAAAAAA&zwnj;&#8203;AAAAAAAAAAAAAAAAAAAA&zwnj;&#8203;AAAAAAAAAAAAAAAAAAAA&zwnj;&#8203;AAAAAAAAAAAAAAA</code>, you simply do <code>perl -e &#39;print &quot;A&quot;x100&#39;</code> it&#39;s perl script for ease of access"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536095380, "post_id": 52173477, "comment_id": 91298944, "body": "If you want <code>AAA...</code> to be the argument to the program, you need to use <code>run $(perl -e &#39;print &quot;A&quot;x100&#39;)</code>. The way you wrote it, <code>argv[1]</code> is just the word <code>perl</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536095575, "post_id": 52173477, "comment_id": 91299028, "body": "Are you trying to create a buffer overflow? <code>char buf[100]</code> isn&#39;t big enough for 100 A + null terminator."}, {"owner": {"reputation": 13, "user_id": 10265255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878d18101ef90a78ecb63ae37880a0bd?s=128&d=identicon&r=PG&f=1", "display_name": "asdfasdfasdf", "link": "https://stackoverflow.com/users/10265255/asdfasdfasdf"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536151655, "post_id": 52173477, "comment_id": 91320701, "body": "@barmar, sorry, there is actually an extra ` but apparently stackoverflow doesn&#39;t like it there!!!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536168540, "post_id": 52173477, "comment_id": 91330868, "body": "See <a href=\"https://meta.stackoverflow.com/questions/254364/how-to-print-backtick-inside-backticks\" title=\"how to print backtick inside backticks\">meta.stackoverflow.com/questions/254364/&hellip;</a> for how to do it. But it&#39;s easier if you just use an indented code block instead of inline code."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10265255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878d18101ef90a78ecb63ae37880a0bd?s=128&d=identicon&r=PG&f=1", "display_name": "asdfasdfasdf", "link": "https://stackoverflow.com/users/10265255/asdfasdfasdf"}, "edited": false, "score": 0, "creation_date": 1536094422, "post_id": 52173604, "comment_id": 91298593, "body": "I did as you said, but the output is that <code>bufp</code> is located at <code>0x7fffffffea80</code> and if I do <code>x&#47;200x $rsp</code> and locate <code>0x7fffffffea80</code>, its content is the same as <code>buf</code> contains <code>A</code> 100 times, so once again I am going to have to ask: <code>How to modify pointer location to point to a different location in memory using GDB?</code>"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1536168707, "last_edit_date": 1536168707, "creation_date": 1536093042, "answer_id": 52173604, "question_id": 52173477, "link": "https://stackoverflow.com/questions/52173477/how-to-redirect-to-a-different-location-using-gdb/52173604#52173604", "title": "How to redirect to a different location using GDB?", "body": "<p><code>buf</code> is not a variable, so you can't change it dynamically. If you want to be able to change the address, add a pointer variable.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char buf[100];\n    char *bufp = buf;\n    strcpy(buf, argv[1]);\n    printf(\"Buf contains: %s\\n\", bufp);\n    return 0;\n}\n</code></pre>\n\n<p>Then you can change the value of <code>bufp</code> after <code>strcpy()</code> and it will use that.</p>\n\n<pre><code>(gdb) set variable bufp = 0x7fffffffeb20;\n</code></pre>\n\n<p>BTW, you're causing a buffer overflow with your 100 A's. <code>buf[100]</code> only has room for 100 characters, but you need <code>buf[101]</code> to allow room for the 100 letters and the trailing null byte. So the <code>strcpy()</code> results in undefined behavior.</p>\n\n<p>If you're studying buffer overflows and shellcode, this may be intentional, but otherwise you should fix it.</p>\n"}], "owner": {"reputation": 13, "user_id": 10265255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878d18101ef90a78ecb63ae37880a0bd?s=128&d=identicon&r=PG&f=1", "display_name": "asdfasdfasdf", "link": "https://stackoverflow.com/users/10265255/asdfasdfasdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536168707, "creation_date": 1536092396, "last_edit_date": 1536168511, "question_id": 52173477, "link": "https://stackoverflow.com/questions/52173477/how-to-redirect-to-a-different-location-using-gdb", "title": "How to redirect to a different location using GDB?", "body": "<p>Basically I have:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char buf[100];\n    strcpy(buf, argv[1]);\n    printf(\"Buf congains: %s\\n\", buf);\n    return 0;\n}\n</code></pre>\n\n<p>As far as I have debugged it, Below is what happening:</p>\n\n<p>executing shell: </p>\n\n<pre><code>run `perl -e 'print \"A\"x100'`\n</code></pre>\n\n<ol>\n<li>Copy <code>argv[1]</code> to $rbp</li>\n<li>after executing <code>strcpy()</code> copy argv[1] from $rbp to <code>$rsp/buf</code></li>\n<li>print data from $rsp</li>\n</ol>\n\n<p>Stack print while breakpoint on line <code>printf()</code></p>\n\n<pre><code>Breakpoint 1, main (argc=2, argv=0x7fffffffebd8) at main.c:7                                                         \n7           printf(\"Buf congains: %s\\n\", buf);                                                                       \n(gdb) x/50x $rsp                                                                                                     \n0x7fffffffea70: 0xffffebd8      0x00007fff      0x00400372      0x00000002                                           \n0x7fffffffea80: 0x41414141      0x41414141      0x41414141      0x41414141                                           \n0x7fffffffea90: 0x41414141      0x41414141      0x41414141      0x41414141                                           \n0x7fffffffeaa0: 0x41414141      0x41414141      0x41414141      0x41414141                                           \n0x7fffffffeab0: 0x41414141      0x41414141      0x41414141      0x41414141                                           \n0x7fffffffeac0: 0x41414141      0x41414141      0x41414141      0x41414141                                           \n0x7fffffffead0: 0x41414141      0x41414141      0x41414141      0x41414141                                           \n0x7fffffffeae0: 0x41414141      0x00007f00      0x79529b00      0x7349452f                                           \n0x7fffffffeaf0: 0x00000000      0x00000000      0xf7a35ec5      0x00007fff                                           \n0x7fffffffeb00: 0x00000000      0x00000000      0xffffebd8      0x00007fff                                           \n0x7fffffffeb10: 0x00000000      0x00000002      0x004005f6      0x00000000                                           \n0x7fffffffeb20: 0x00000000      0x00000000      0xd23fb797      0xacdf42c3                                           \n0x7fffffffeb30: 0x00400500      0x00000000\n</code></pre>\n\n<p><strong>Question:</strong> Basically what I want is to modify data of a different memory location and point the <code>buf</code> to that location.</p>\n\n<p>for example modify <code>0x7fffffffeb20</code> in $rsp using <code>set {char[5]}0x7fffffffeb20 = \"BCDE\"</code> and then set the data of <code>0x7fffffffeab0</code> to point to <code>0x7fffffffeb20</code> so when $rip is executing <code>0x7fffffffeab0</code> address, it should point to read extra data from <code>0x7fffffffeb20</code>.</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["c", "firmware"], "comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1536092413, "post_id": 52173266, "comment_id": 91297740, "body": "What processor are you using? There are free preemptive operating systems for the common embedded processors like ARM, Micro Blaze, ... ."}, {"owner": {"reputation": 143, "user_id": 5230923, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/rtJGj.png?s=128&g=1", "display_name": "Otus", "link": "https://stackoverflow.com/users/5230923/otus"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1536096324, "post_id": 52173266, "comment_id": 91299258, "body": "There is no specific processor. Just a conceptual design at this point."}], "answers": [{"comments": [{"owner": {"reputation": 646, "user_id": 1494134, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e0ad40b49b7be9f65ddd411039814672?s=128&d=identicon&r=PG", "display_name": "Carmine Ingaldi", "link": "https://stackoverflow.com/users/1494134/carmine-ingaldi"}, "edited": false, "score": 0, "creation_date": 1536092828, "post_id": 52173439, "comment_id": 91297927, "body": "I would add that, instead of a big if/elseif block, one could register command/callback pairs to a table that will be looked up at each cycle refresh, to improve modularity and extendibility  However, if you add a queue of these commands that is dequeued at each polling iteration, and if you add a global &#39;enqueue&#39; function, you will just achieve e message bus architecture"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 646, "user_id": 1494134, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e0ad40b49b7be9f65ddd411039814672?s=128&d=identicon&r=PG", "display_name": "Carmine Ingaldi", "link": "https://stackoverflow.com/users/1494134/carmine-ingaldi"}, "edited": false, "score": 0, "creation_date": 1536094266, "post_id": 52173439, "comment_id": 91298541, "body": "@sscnapoli1926: In many cases (especially on devices with small screens, but also sometimes with wizard-based UIs), the most natural way of describing a UI is with a flowchart which has many different boxes that read a character.  One could use an event registration system, but registering handlers for &quot;yes&quot; and &quot;no&quot; buttons, showing a prompt, and then having the handler for either button perform the appropriate action, unregister than handlers, and then showing the next prompt and registering handlers for it, etc. is apt to be far messier than simply using if/else logic."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536094559, "post_id": 52173439, "comment_id": 91298642, "body": "As demonstrated by the failure of the ancient Apple /// in 1984 which tried to implement an event driven system on the humble 6502 processor. That processor had been used to good effect with Apple ][ but overstretched the ability of the hardware and software designs."}, {"owner": {"reputation": 646, "user_id": 1494134, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e0ad40b49b7be9f65ddd411039814672?s=128&d=identicon&r=PG", "display_name": "Carmine Ingaldi", "link": "https://stackoverflow.com/users/1494134/carmine-ingaldi"}, "edited": false, "score": 0, "creation_date": 1536095995, "post_id": 52173439, "comment_id": 91299159, "body": "@supercat totally agree....but if the requirement is to add abstraction, scalability and encapulation (that maybe together form the concept of &#39;extendibility&#39;) i would also think about a dynamic mechanism to dispatch command"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 646, "user_id": 1494134, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e0ad40b49b7be9f65ddd411039814672?s=128&d=identicon&r=PG", "display_name": "Carmine Ingaldi", "link": "https://stackoverflow.com/users/1494134/carmine-ingaldi"}, "edited": false, "score": 0, "creation_date": 1536096303, "post_id": 52173439, "comment_id": 91299253, "body": "@sscnapoli1926: If a user will need to be able to interact with several aspects of the interface in arbitrary order, it will be necessary to use either state-machine or event-driven logic for all but one of them.  For the scenario where the number of independent aspects is one, however, the state or event logic wouldn&#39;t need to handle any aspects of state and may as well not exist unless or until it becomes necessary, whereupon it could be added to the &quot;main poll&quot; routine."}, {"owner": {"reputation": 143, "user_id": 5230923, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/rtJGj.png?s=128&g=1", "display_name": "Otus", "link": "https://stackoverflow.com/users/5230923/otus"}, "edited": false, "score": 0, "creation_date": 1536168774, "post_id": 52173439, "comment_id": 91330982, "body": "I&#39;m not sure I understand your meaning. It looks like &quot;wait_for_button();&quot; would block in the above example. How are you able to poll the other subsystem polling routines?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 143, "user_id": 5230923, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/rtJGj.png?s=128&g=1", "display_name": "Otus", "link": "https://stackoverflow.com/users/5230923/otus"}, "edited": false, "score": 0, "creation_date": 1536169656, "post_id": 52173439, "comment_id": 91331435, "body": "@Otus: The <code>wait_for_button()</code> routine <i>itself</i> would call all the other polling routines while it&#39;s waiting for the button."}, {"owner": {"reputation": 143, "user_id": 5230923, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/rtJGj.png?s=128&g=1", "display_name": "Otus", "link": "https://stackoverflow.com/users/5230923/otus"}, "edited": false, "score": 0, "creation_date": 1536170768, "post_id": 52173439, "comment_id": 91331923, "body": "@supercat How do you handle when there are multiple sources to monitor. Maybe we&#39;re waiting on a button push, or a watchdog timeout, or an over temperature condition that needs to be monitored via an I2C interface, etc?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 143, "user_id": 5230923, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/rtJGj.png?s=128&g=1", "display_name": "Otus", "link": "https://stackoverflow.com/users/5230923/otus"}, "edited": false, "score": 0, "creation_date": 1536173513, "post_id": 52173439, "comment_id": 91333109, "body": "@Otus: The <code>wait_for_button()</code> function may exit early for certain things that aren&#39;t actual button pushes, but need to trigger some UI interaction.  One of my programs using this approach has two such kinds of &quot;dummy&quot; button pushes--one for things that should spin around the immediate surrounding loop [which, among other things, redraws the prompt] and one of which requests that the UI exit the current context [used for things like keyboard timeouts].  Many other events are handled by state machines which are handled within the poll() functions called by <code>wait_for_button()</code>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 143, "user_id": 5230923, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/rtJGj.png?s=128&g=1", "display_name": "Otus", "link": "https://stackoverflow.com/users/5230923/otus"}, "edited": false, "score": 0, "creation_date": 1536177285, "post_id": 52173439, "comment_id": 91334791, "body": "@Otus: Incidentally, most of the timers used by my program are passively polled, but if none of the polling tasks indicate that they want the CPU to stay awake, and no button is pushed, <code>wait_for_button()</code> can determine which timer is set to expire first, and then put the CPU to sleep until either an external event occurs or enough time elapses for a timer to expire.  Handling that within <code>wait_for_button()</code> is easier than having to intermingle sleep logic within the UI code."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": true, "score": 5, "last_activity_date": 1536092194, "creation_date": 1536092194, "answer_id": 52173439, "question_id": 52173266, "link": "https://stackoverflow.com/questions/52173266/embedded-firmware-architecture/52173439#52173439", "title": "Embedded Firmware Architecture", "body": "<p>The concept of an \"event bus\" is over-complicated.  In many cases, the simplest approach is to minimize the number of things that need to happen asynchronously, but instead have a \"main poll\" routine which runs on an \"as often as convenient\" basis and calls polling routines for each subsystem.  It may be helpful to have such routine in a compilation by itself, so that the essence of that file would simply be a list of all polling functions used by other subsystems, rather than anything with semantics of its own.  If one has a \"get button push\" routine, one can have a loop within that routine which calls the main poll routine until a button is pushed, there's a keyboard timeout, or something else happens that the caller needs to deal with.  That would then allow the main UI to be implemented using code like:</p>\n\n<pre><code>void maybe_do_something_fun(void)\n{\n  while(1)\n  {\n    show_message(\"Do something fun?\");\n    wait_for_button();\n    if (button_hit(YES_BUTTON))\n    {\n      ... do something fun\n      return;\n    }\n    else if (button_hit(NO_BUTTON))\n    {\n      ... do something boring\n      return;\n    }\n  } while(1);\n}\n</code></pre>\n\n<p>This is often much more convenient than trying to have a giant state machine and say that if the code is the <code>STATE_MAYBE_DO_SOMETHING_FUN</code> state and the <code>yes</code> or <code>no</code> button is pushed, it will need to advance to the <code>STATE_START_DOING_SOMETHING_FUN</code> or <code>STATE_START_DOING_SOMETHING_BORING</code> state.</p>\n\n<p>Note that if one uses this approach, one will need to ensure that the worst-case time between calls to main_poll will always satisfy the timeliness requirements of the polling operations handled through <code>main_poll</code>, but in cases where that requirement can be met, this approach can be far more convenient and efficient than doing everything necessary to preemptively-scheduled multi-threaded code along with the locks and other guards needed to make it work reliably.</p>\n"}], "owner": {"reputation": 143, "user_id": 5230923, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/rtJGj.png?s=128&g=1", "display_name": "Otus", "link": "https://stackoverflow.com/users/5230923/otus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1518, "favorite_count": 0, "accepted_answer_id": 52173439, "answer_count": 1, "score": 2, "last_activity_date": 1536092194, "creation_date": 1536091296, "question_id": 52173266, "link": "https://stackoverflow.com/questions/52173266/embedded-firmware-architecture", "title": "Embedded Firmware Architecture", "body": "<p>I\u2019ve been writing increasingly complex firmware and am starting to notice that my knowledge of design patterns and architecture is a bit lacking. I\u2019m trying to work on developing these skills and am hoping for some input. Note: this is for embedded c for microcontrollers.</p>\n\n<p>I\u2019m working with a concept for a new project as an exercise right now that goes something like this:</p>\n\n<ol>\n<li>We have a battery management module with user I/O</li>\n<li>The main controller is responsible for I/O (button, LCD, UART debug), detecting things like the charger being plugged in/unplugged, and managing high level operations.</li>\n<li>The sub controller is a battery management controller (pretty much a custom PMIC) capable of monitoring battery levels, running charging/discharging firmware etc.</li>\n<li>The PMIC interfaces with a fuel gauge IC that it uses to read battery information from </li>\n<li>The interface between the two controllers, fuel gauge and the LCD are all I2C</li>\n</ol>\n\n<p>Here is a rough system diagram:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tXL3K.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tXL3K.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Now what I\u2019m trying to do is to come up with a good firmware architecture that will allow for expandability (adding multiple batteries, adding more sensors, changing the LCD (or other) interface from I2C to SPI, etc), and for testing (simulate button presses via UART, replace battery readings with simulated values to test PMIC charge firmware, etc).</p>\n\n<p>What I would normally do is write a custom driver for each peripheral, and a firmware module for each block. I would implement a flagging module as well with a globally available get/set that would be used throughout the system. For example my timers would set 100Hz, 5Hz, 1Hz, flags, which the main loop would handle and call the individual modules at their desired rate. Then the modules themselves could set flags for the main loop to handle for events like I2C transaction complete, transaction timed out, temperature exceeded, etc.</p>\n\n<p>What I am hoping to get from this is a few suggestions on a better way to architect the system to achieve my goals of scalability, encapsulation and abstraction. It seems like what I\u2019m doing is sort of a pseudo event-driven system but one that\u2019s been hacked together.\nIn any case here\u2019s my attempt at an architecture diagram:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RTcaU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RTcaU.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/nmjwW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nmjwW.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "multithreading", "posix", "eof"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536091473, "post_id": 52173208, "comment_id": 91297328, "body": "<i>When I run this and I insert a string for 1 of the N files and I press CTRL+C</i>  Do you hit &quot;Enter&quot; before pressing <code>CTRL-C</code>?  If not, your process never reads the input.  Also, you can only safely call async-signal-safe functions from a signal handler. The list of POSIX async-signal-safe functions is at <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/functions/&hellip;</a>  Calling a function not on the list can invoke undefined behavior.  Additionally, <code>read()</code> and <code>write()</code> return <code>ssize_t</code>, not <code>int</code>."}, {"owner": {"reputation": 1, "user_id": 6082467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q7kGH.jpg?s=128&g=1", "display_name": "SBJ", "link": "https://stackoverflow.com/users/6082467/sbj"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536091569, "post_id": 52173208, "comment_id": 91297366, "body": "Yes, I&#39;ve also pressed Enter"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536091737, "post_id": 52173208, "comment_id": 91297437, "body": "What exactly is the point of creating a thread and then immediately <code>pthread_join</code>ing it?  This gives you no concurrency; it is almost equivalent to just calling the thread function (<i>i.e.</i> <code>writer()</code>) directly."}, {"owner": {"reputation": 1, "user_id": 6082467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q7kGH.jpg?s=128&g=1", "display_name": "SBJ", "link": "https://stackoverflow.com/users/6082467/sbj"}, "edited": false, "score": 0, "creation_date": 1536092055, "post_id": 52173208, "comment_id": 91297586, "body": "You are right. I revised my code. But the problem remains."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1536092260, "post_id": 52173208, "comment_id": 91297674, "body": "Potential problems: Not checking return code of <code>scanf</code>. Using <code>scanf</code> to read string without specifying target buffer size. Printing buffer you read with <code>read</code> without adding terminating <code>&#39;\\0&#39;</code>. Using non-async-signal-safe functions in signal handler. Maybe more. It&#39;s pointless to try and solve strange behavior of code as long as it has this kind of UB situations."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1536092400, "post_id": 52173208, "comment_id": 91297735, "body": "&quot;Without any synchronization&quot; does not seem to be an apt characterization, @n.m..  Most of the body of the thread function is protected by a mutex."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1536092536, "post_id": 52173208, "comment_id": 91297793, "body": "@JohnBollinger ouch, I must be going blind. Everything is indeed mutexed away, But this means there&#39;s still no parallelism at all."}, {"owner": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 1, "creation_date": 1536092979, "post_id": 52173208, "comment_id": 91298007, "body": "Small note: avoid the use of <code>signal</code> and use <code>sigaction</code> instead (portability)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1536093214, "post_id": 52173208, "comment_id": 91298127, "body": "The assignment makes little sense. The problem is user-interaction-bound, the user must enter data for one job at a time, and the job is typically finished much faster than the user gets to start entering the next one. There&#39;s nothing to run in parallel. All threads will be waiting for user input almost all the time."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536093602, "post_id": 52173208, "comment_id": 91298287, "body": "To make initializing a mutex easier, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutex_destroy.html\" rel=\"nofollow noreferrer\">per POSIX</a> you can use <code>pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;</code> and not need to call <code>pthread_mutex_init()</code>."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1536095023, "post_id": 52173208, "comment_id": 91298822, "body": "<code>scanf(&quot;%s&quot;, &amp;buffer);</code> =&gt; <code>scanf(&quot;%s&quot;, buffer);</code> <code>write(fd_in, &amp;buffer, strlen(buffer));</code> =&gt; <code>write(fd_in, buffer, strlen(buffer));</code> <code>write(fdGlobal, &amp;buffer, strlen(buffer));</code> =&gt; <code>write(fdGlobal, buffer, strlen(buffer));</code> etc"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536105925, "post_id": 52173208, "comment_id": 91301523, "body": "@JohnBollinger - deleted my prior comment, will delete this one later."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1536210831, "post_id": 52173208, "comment_id": 91343024, "body": "<code>0&lt;=i&lt;= N</code> in your description is an off-by-one error, it would allow N+1 values for i. That said, typically you would set the EOF on the stdin of the program to terminate input, which is often control-D, which isn&#39;t an answer but a possible workaround."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6082467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q7kGH.jpg?s=128&g=1", "display_name": "SBJ", "link": "https://stackoverflow.com/users/6082467/sbj"}, "edited": false, "score": 0, "creation_date": 1536094656, "post_id": 52173742, "comment_id": 91298671, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1536093802, "creation_date": 1536093802, "answer_id": 52173742, "question_id": 52173208, "link": "https://stackoverflow.com/questions/52173208/why-when-i-press-ctrlc-the-program-reads-zero-bytes-c-posix/52173742#52173742", "title": "Why when I press CTRL+C the program reads zero bytes? (C-Posix)", "body": "<p>Your code has numerous problems revolving around async-signal-safety, buffer sizes, and (non-)concurrency, but by far the most likely reason for the symptom you describe:</p>\n\n<blockquote>\n  <p>the function read returns 0</p>\n</blockquote>\n\n<p>is that your belief that the file pointer is not at the end of the file is misplaced.</p>\n\n<p>Indeed, <code>read()</code> returning 0 is a positive indicator that the file offset is currently at (or past) the end of the file.  If the file was newly created then I don't see any reason to think that the offset would be anywhere else.  Even when the file already exists, you need to move the file offset back to the beginning to read the data written in the current run of the program.  You could do this with an appropriate call to <code>lseek()</code>, for example.</p>\n"}], "owner": {"reputation": 1, "user_id": 6082467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q7kGH.jpg?s=128&g=1", "display_name": "SBJ", "link": "https://stackoverflow.com/users/6082467/sbj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1536093802, "creation_date": 1536091025, "last_edit_date": 1536091984, "question_id": 52173208, "link": "https://stackoverflow.com/questions/52173208/why-when-i-press-ctrlc-the-program-reads-zero-bytes-c-posix", "title": "Why when I press CTRL+C the program reads zero bytes? (C-Posix)", "body": "<p>My program has to do this:\nThe user has to pass N absolute pathname for files by command line. Then the i-th thread, with 0&lt;=i&lt;= N, has to write in the i-th file a string passed by user with scanf (or fgets). If CTRL+C is pressed, the program has to print all strings that user has passed with scanf.</p>\n\n<p>When I run this and I insert a string for 1 of the N files and I press CTRL+C, in the function onPress the function read returns 0 (I think that in this case not indicates that the file pointer is in the end of file) and it prints only the string \"Strings:\"</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;string.h&gt;\n#include &lt;signal.h&gt;\n\npthread_mutex_t mutex;\nint fdGlobal;\n\nvoid* writer (int* arg) {\n   int fd_in = *(arg);\n   char buffer[100];  \n   pthread_mutex_lock(&amp;mutex);\n   printf(\"Write the string that you want to insert in the file\\n\");\n   scanf(\"%s\", &amp;buffer);\n   write(fd_in, &amp;buffer, strlen(buffer));\n   write(fdGlobal, &amp;buffer, strlen(buffer));\n   printf(\"Finished\\n\");\n   pthread_mutex_unlock(&amp;mutex); \n}\n\nvoid onPress(int sig) {\n   char buff[100];\n   printf(\"I'm going to print all strings passed in files...\\n\");\n   int rd = read(fdGlobal, &amp;buff, sizeof(buff));\n   if (rd == -1) perror(\"Error in the read of global file\\n\");\n   printf(\"I read %d bytes\\n\", rd);\n   printf(\"Strings: %s\\n\", buff);\n   exit(0);\n}\n\nvoid main (int argc, char* argv[]) {\n   int fds[argc-1];\n   pthread_t tid[argc-1];\n   int i, mu;\n\n   if (argc&lt;=1) {\n      printf(\"Insert a number &gt;=1 of  pathname/s\\n\");\n   }\n\n   for ( i = 1 ; i&lt;argc; i++) {\n      if (argv[i][0] != '/') {\n        printf(\"Insert a pathname\\n\");\n       }\n   }\n\n   signal(SIGINT, onPress);\n\n   fdGlobal = open(\"globalFile.txt\", O_CREAT|O_RDWR, 0666);\n   if (fdGlobal == -1) perror(\"Error in the open of global file\\n\"); \n\n   mu = pthread_mutex_init(&amp;mutex, NULL);\n   if (mu &lt; 0) perror(\"Error in the creation of mutex\\n\");\n\n   for (i=0; i&lt;argc-1; i++) {\n      fds[i] = open(argv[i+1], O_CREAT|O_WRONLY, 0666);\n      if (fds[i] &lt; 0 ) perror(\"Error in the open of the file\\n\");\n\n      pthread_create ( &amp;tid[i], NULL, (void*) writer, &amp;(fds[i]) );\n   }\n\n  for (i=0; i&lt;argc-1; i++) {\n      pthread_join(tid[i], NULL);\n  }\n  }\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536090192, "post_id": 52172996, "comment_id": 91296702, "body": "Please fix your code. It has some unintended insertions there. Also correct the indentation."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1536090345, "post_id": 52172996, "comment_id": 91296763, "body": "What&#39;s the purpose of <code>str = realloc(str, strlen(str)+1);</code> here? It&#39;s pretty pointless."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1536090396, "post_id": 52172996, "comment_id": 91296791, "body": "And what is the program supposed to do? Please show an example of input and expected output."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536090537, "post_id": 52172996, "comment_id": 91296851, "body": "Why would the condition be true anyways? What is your input? It will be only true if the input is starting with <code>&#39;j&#39;</code>"}, {"owner": {"reputation": 61, "user_id": 9953773, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pYio8Aurs3c/AAAAAAAAAAI/AAAAAAAAArM/UN2-VRa-1Sg/photo.jpg?sz=128", "display_name": "Kudo Shinichi", "link": "https://stackoverflow.com/users/9953773/kudo-shinichi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536090755, "post_id": 52172996, "comment_id": 91296969, "body": "@EugeneSh. The input may be any character or any number. If at any j (say j=5) *str is equal to j ( or 5 in this case ) I intend to update a[j] (or a[5]) ."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536090870, "post_id": 52172996, "comment_id": 91297024, "body": "So.. ? What is that <code>&#39;j&#39;</code> magic then? Why are you comparing to it?"}, {"owner": {"reputation": 61, "user_id": 9953773, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pYio8Aurs3c/AAAAAAAAAAI/AAAAAAAAArM/UN2-VRa-1Sg/photo.jpg?sz=128", "display_name": "Kudo Shinichi", "link": "https://stackoverflow.com/users/9953773/kudo-shinichi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536091271, "post_id": 52172996, "comment_id": 91297218, "body": "I&#39;m trying to check if <code>*str==&#39;j&#39;</code> meaning if like in the test case the second character == 1 or not.   By the way is there any other way to do this? @EugeneSh."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536091837, "post_id": 52172996, "comment_id": 91297469, "body": "I don&#39;t understand, sorry. You are comparing the first character to <code>&#39;j&#39;</code> that&#39;s it. There is no second character or <code>1</code> anywhere."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536092107, "post_id": 52172996, "comment_id": 91297609, "body": "You should consider using <code>&lt;ctype.h&gt;</code> and <code>isdigit()</code> \u2014 and if it is a digit, then you can subtract <code>&#39;0&#39;</code> from the digit&#39;s value to get the correct index into <code>a</code>.  You should not be looping to find out which digit it is.  Also, consider adding appropriate print statements to see what&#39;s going on, and don&#39;t forget to end lines of output with a newline character.  (See <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> too.)"}], "answers": [{"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536092022, "post_id": 52173377, "comment_id": 91297564, "body": "<code>str</code> is advanced by <code>str++</code>.... but this will confuse the <code>strlen()</code> test, so yes. There&#39;s a problem"}, {"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536092193, "post_id": 52173377, "comment_id": 91297648, "body": "Uhm why would you do that instead of what I do in the answer?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1536092270, "post_id": 52173377, "comment_id": 91297680, "body": "I was just commenting on your remark &quot;You never advance str&quot; which isn&#39;t accurate."}, {"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536095665, "post_id": 52173377, "comment_id": 91299058, "body": "&quot;You never advance str&quot; is an accurate statement. <code>str</code> is never advanced in OP&#39;s code. But instead of advancing it, I proposed accessing the char to compare with <code>str[i]</code>."}, {"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536232217, "post_id": 52173377, "comment_id": 91354345, "body": "Oops totally missed that, you are correct. I still prefer <code>str[i]</code> though."}], "tags": [], "owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1536232153, "last_edit_date": 1536232153, "creation_date": 1536091908, "answer_id": 52173377, "question_id": 52172996, "link": "https://stackoverflow.com/questions/52172996/scanning-a-integer-from-a-character-array/52173377#52173377", "title": "Scanning a integer from a character array", "body": "<ul>\n<li>The <code>str = realloc(str, strlen(str)+1);</code> step is pointless. You could just delete this line.</li>\n<li>Comparison to <code>j</code> is pointless. Since you are counting digits, it should be <code>'0' + j</code> instead.</li>\n<li>Instead of advancing <code>str</code> with <code>str++</code> I suggest <code>str[i]</code>. This way you still have your original <code>str</code> pointer around in case you want to pass it into <code>printf</code> or <code>strlen</code> for example.</li>\n</ul>\n\n<p>For the inner loop try this instead:</p>\n\n<pre><code>for ( int j = 0; j &lt;= 9; j++ )\n{\n    if(str[i] == ('0' + j)) a[j]++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 0, "last_activity_date": 1536091925, "creation_date": 1536091925, "answer_id": 52173379, "question_id": 52172996, "link": "https://stackoverflow.com/questions/52172996/scanning-a-integer-from-a-character-array/52173379#52173379", "title": "Scanning a integer from a character array", "body": "<p>I think perhaps what you want is <code>if(*str=='0'+j) a[j]++;</code></p>\n\n<p>In other words, if j is zero, check for a '0' character; if j is 1, check for '1', and so on</p>\n"}], "owner": {"reputation": 61, "user_id": 9953773, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pYio8Aurs3c/AAAAAAAAAAI/AAAAAAAAArM/UN2-VRa-1Sg/photo.jpg?sz=128", "display_name": "Kudo Shinichi", "link": "https://stackoverflow.com/users/9953773/kudo-shinichi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 52173379, "answer_count": 2, "score": 1, "last_activity_date": 1536232153, "creation_date": 1536090063, "last_edit_date": 1536091936, "question_id": 52172996, "link": "https://stackoverflow.com/questions/52172996/scanning-a-integer-from-a-character-array", "title": "Scanning a integer from a character array", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n\n    int a[10];\n    for (int i=0 ; i&lt;10;i++){\n        a[i]=0;\n    }\n\n    char *str = (char *)malloc(1024*sizeof(char));\n    scanf(\"%s\",str);\n    str = realloc(str, strlen(str)+1);\n\n    for (int i = 0;i&lt;strlen(str);i++){\n\n        for ( int j = 0;j&lt;=9;j++){\n            if(*str=='j') a[j]++;\n        }\n\n        str++;\n    }\n    for (int i=0 ; i&lt;10;i++){\n        printf(\"%d \",a[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>In this code  during the <code>if(*str=='j') a[j]++;</code> the condition <code>*str == j</code> is always returning false, due to which the value of <code>a[j]</code> is not changing at all.</p>\n\n<p>Why is this happening and what can I do to fix this?</p>\n\n<p>The code is supposed to scan for integer in a given array and give the frequency of the digit occured.</p>\n\n<p>Example Input : <code>a11472o5t6</code></p>\n\n<p>Output : <code>0 2 1 0 1 1 1 1 0 0</code></p>\n"}, {"tags": ["c", "pointers", "pass-by-reference", "pass-by-value"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536089619, "post_id": 52172819, "comment_id": 91296448, "body": "The compiler might maintain such a map of &quot;pairs&quot; but they do not exist at runtime (&quot;C code execution&quot;)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536089653, "post_id": 52172819, "comment_id": 91296467, "body": "&quot;By value&quot; and &quot;by reference&quot; are usually referring to the passing of the function parameters. Which is not something any of your examples is doing."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536090475, "post_id": 52172819, "comment_id": 91296825, "body": "In the first example <code>=</code> copies the entire <code>struct</code> contents. Then there are two <code>struct</code>s with the same content, until you change one of them, which does not change the other. You can&#39;t do that with an array. In the second example <code>=</code> creates a <i>pointer</i> to the first <code>struct</code>. There is only one <code>struct</code>, and whatever you to the <code>struct</code> is the same through the pointer. You can do that with an array too. The third example allocates memory, and the same applies: there is only one <code>struct</code>. In the first two cases the storage is automatic, in the third case it has to be <code>free</code>d."}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536093710, "post_id": 52172819, "comment_id": 91298325, "body": "@WeatherVane I can&#39;t clone an array because an array is virtually a pointer to a sequence of values, right?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536093869, "post_id": 52172819, "comment_id": 91298387, "body": "I said &quot;you can&#39;t do that with an array&quot;. Meaning you can&#39;t just equate an array to another, unlike what you can do with a <code>struct</code>. But you can assign a pointer and copy the pointer wherever you like with <code>=</code>. That does not copy any content."}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536094688, "post_id": 52172819, "comment_id": 91298688, "body": "@WeatherVane oh right, I cannot just assign one array to a different identifier. If I want to clone an array I need to iterate through and copy array values."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536094774, "post_id": 52172819, "comment_id": 91298720, "body": "Or use bulk copy like <code>memcpy</code>."}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536094805, "post_id": 52172819, "comment_id": 91298730, "body": "@WeatherVane cool, thanks."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1536097570, "post_id": 52172819, "comment_id": 91299693, "body": "No, an array is not &quot;virtually a pointer to a sequences of values&quot;. An array is a sequence of values.  You could point to it like you could point to any other variable."}], "answers": [{"comments": [{"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536092761, "post_id": 52173258, "comment_id": 91297894, "body": "Thank you for your thorough answer, I really appreciate it. A reference is a memory address to a location where a value begins and a pointer is a data type that stores a reference, right?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 1, "creation_date": 1536094161, "post_id": 52173258, "comment_id": 91298504, "body": "No, @marzelin.  A pointer (in C) is an object whose value represents an address.  The usual meaning of a &quot;reference&quot; in language contexts where it is defined is, approximately, the address <i>of an object</i>.  The distinction is a bit subtle, but very important."}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536094578, "post_id": 52173258, "comment_id": 91298649, "body": "so there are no references in C and what <code>&amp;</code> operator returns is an address. A reference in other languages is an address of an object (and in those languages there are generally no way (no use) to get address of non-objects). Is this correct?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536094885, "post_id": 52173258, "comment_id": 91298764, "body": "Yes, @marzelin, with the caveat that some languages provide a special reference value (often named <code>null</code>, <code>nil</code>, or similar) that explicitly does not refer to any object.  C has a concept analogous to that, too, but more generally provides no inherent guarantee that the values of pointers necessarily point to objects (or functions, for function pointers)."}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536095169, "post_id": 52173258, "comment_id": 91298878, "body": "Awesome. Thanks for your time."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1536091259, "creation_date": 1536091259, "answer_id": 52173258, "question_id": 52172819, "link": "https://stackoverflow.com/questions/52172819/is-my-understanding-of-copying-by-value-copying-by-reference-in-c-correct/52173258#52173258", "title": "is my understanding of copying by value / copying by reference in C correct?", "body": "<blockquote>\n  <p>Here's how I think a C code execution works:</p>\n  \n  <p>There's a map of variables used in a given code block that contains\n  pairs:</p>\n</blockquote>\n\n<p>In an \"as if\" sense, perhaps.  Real-world C implementations do not have literal maps such as you describe.  In fact, variables' identifiers are not generally available at runtime at all.  They are resolved to addresses at compile and / or link time, before the program runs.</p>\n\n<blockquote>\n  <p>They are discarded when a block ends and memory is automatically freed\n  (but memory that we allocated ourselves is not released).</p>\n</blockquote>\n\n<p>Automatically-allocated objects' lifetimes end at the point where their identifiers go out of scope.  This may or may not have exactly the same meaning and implications as those you describe by the term \"discarded\".</p>\n\n<blockquote>\n  <p>Their values are always copied if assigned to other identifiers.</p>\n</blockquote>\n\n<p>Yes, assignment is a copy operation.  But in the context of this particular question, it is important to understand what the value is that is copied (assigned).  In particular, pointers are first-class objects in C, distinct from the objects, if any, to which they point.  Assigning a pointer value to a different pointer is an altogether different operation from assigning the value of one pointed-to object to the other pointed-to object.</p>\n\n<blockquote>\n  <p>For example, below we have a structure in <code>t1</code> that is assigned to <code>t2</code>. The values are copied and we now have two exact objects (<code>t2</code> stores a copy of <code>t1</code>). Changing one doesn't change the other. This is different from i.e. javascript where <code>t1 = t2</code> would always lead to <code>t1</code> and <code>t2</code> point to the same location in memory.</p>\n</blockquote>\n\n<p>Yes, in C, objects having structure type are directly accessible, and assigning to one modifies the object itself.  But note that such an assignment operation is shallow, in the sense that when any of the structure members are pointers, <em>the pointer</em> is copied, leaving that member an alias of the corresponding member of the original structure.</p>\n\n<blockquote>\n  <p>Below, we have copied reference (memory location where a value starts) to <code>t1</code> in <code>t2</code>. [...]</p>\n</blockquote>\n\n<p>I note at this point that C does not have \"references\".  It has <em>pointers</em>, whose values represent addresses.  This is a very similar concept, but not an identical one.</p>\n\n<p>In any case, however, your understanding of the address-of operator, <code>&amp;</code>, and of pointer assignment appears to be correct.</p>\n\n<blockquote>\n  <p>Finally, the last example shows how to handle objects similarly to how they are treated in javascript where non-primitive objects are always passed by reference:</p>\n</blockquote>\n\n<p>Your example shows a way to create a pointer to a structure object without declaring the object itself (and thereby having it allocated automatically and associated with its own identifier).  Note well, however, that although this is reminiscent of handling objects via references in Javascript, it has little to do with <em>pass by reference</em>, which is about calling functions / invoking methods.</p>\n\n<p>C (unlike C++) does not have pass-by-reference.  C function calls are always pass-by-value, but the values passed can be pointers.  As I understand it, this is analogous to Javascript, which also has only pass by value (where the values passed can be references).</p>\n"}], "owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 52173258, "answer_count": 1, "score": 0, "last_activity_date": 1536091259, "creation_date": 1536089229, "question_id": 52172819, "link": "https://stackoverflow.com/questions/52172819/is-my-understanding-of-copying-by-value-copying-by-reference-in-c-correct", "title": "is my understanding of copying by value / copying by reference in C correct?", "body": "<p>Here's how I think a C code execution works:</p>\n\n<p>There's a map of variables used in a given code block that contains pairs:</p>\n\n<p><code>identifier: &lt;address in memory where the value of a given type is located (its first byte)&gt;</code></p>\n\n<p>They are discarded when a block ends and memory is automatically freed (but memory that we allocated ourselves is not released).</p>\n\n<p>Their values are always copied if assigned to other identifiers. For example, below we have a structure in <code>t1</code> that is assigned to <code>t2</code>. The values are copied and we now have two exact objects (<code>t2</code> stores a copy of <code>t1</code>). Changing one doesn't change the other. This is different from i.e. javascript where <code>t1 = t2</code> would always lead to <code>t1</code> and <code>t2</code> point to the same location in memory.</p>\n\n<pre><code>typedef struct _thing \n{ \n    char item;\n    char item2;\n} THING;\n\nint main (void) {\n  THING t1;\n  t1.item = 'a';\n  t1.item2 = 'b';\n  THING t2 = t1;\n  t2.item = 'c';\n  if (t1.item == 'a') {\n    printf(\"t1.item is a\");\n  }\n}\n</code></pre>\n\n<p>Below, we have copied reference (memory location where a value starts) to <code>t1</code> in <code>t2</code>. Identifier <code>t2</code> is mapped to memory address where memory address to object stored in <code>t1</code> starts. <code>&amp;t1 == t2</code> but <code>&amp;t1 != &amp;t2</code>;</p>\n\n<pre><code>int main (void) {\n  THING t1;\n  t1.item = 'a';\n  t1.item2 = 'b';\n  THING* t2 = &amp;t1;\n  t2-&gt;item = 'c';\n  if (t1.item == 'c') {\n    printf(\"item is c\");\n  }\n}\n</code></pre>\n\n<p>Finally, the last example shows how to handle objects similarly to how they are treated in javascript where non-primitive objects are always passed by reference: </p>\n\n<pre><code>int main (void) {\n  THING* t1;\n  THING* t2;\n  t1 = (THING *) malloc (sizeof(THING));\n  t1-&gt;item = 'a';\n  t1-&gt;item2 = 'b';\n  t2 = t1;\n  t2-&gt;item = 'c';\n  if (t1-&gt;item == 'c') {\n    printf(\"item is c\");\n  }\n  free(t1);\n}\n</code></pre>\n\n<p>Here we have to explicitly say that <code>t1</code> and <code>t2</code> store pointers (<code>*</code>). Also we have to use arrow notation (<code>-&gt;</code>) instead of dot notation (<code>.</code>) and allocate/free memory manually.</p>\n\n<p>Is this correct?</p>\n"}, {"tags": ["c", "linux-kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 63, "user_id": 1678486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db771e93e548f1121341022ca8083ff?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther", "link": "https://stackoverflow.com/users/1678486/gunther"}, "edited": false, "score": 1, "creation_date": 1606810305, "post_id": 52172544, "comment_id": 115067326, "body": "&quot;1. Deal with it&quot; was the approach we took. It was relatively easy because the device access used a special API anyway. On Windows the dma buffer is allocated using VirtualAlloc, on Linux with valloc."}], "owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536087850, "creation_date": 1536087850, "question_id": 52172544, "link": "https://stackoverflow.com/questions/52172544/get-user-pages-fast-for-dma", "title": "get_user_pages_fast() for DMA?", "body": "<p>I have a Linux driver that does DMA transfers to/from a device. For sending data to the device (to prevent copy operations) the driver maps the userspace buffer and uses it for DMA directly via <code>get_user_pages_fast()</code>. The user pages are then added to a scatter-gather list and used for DMA.</p>\n\n<p>This works rather well, but the one issue is that this forces the userspace buffer to have various alignment requirements to the cache line of the CPU. My system returns <code>128</code> when you call <code>dma_get_cache_alignment()</code>, which means that in userspace I have to ensure that the start address is aligned to this value. Also, I have to check that the buffer is sized to a multiple of 128.</p>\n\n<p>I see two options for handling this:</p>\n\n<ol>\n<li>Deal with it. That is, in userspace ensure that the buffer is properly aligned. This sounds reasonable, but I have run into some issues since my device has to be integrated into a larger project, and I don't have control over the buffers that get passed to me. As a result, I have to allocate a properly aligned buffer in userspace to sit between the driver and the application and use that buffer in the event the caller's buffer is not aligned. This adds a copy operation and isn't the end of the world, but the resulting code is rather messy.</li>\n<li>Rework the driver to use a kernel space buffer. That is, change the code such that the driver uses <code>copy_from_user()</code> to move the data into a properly aligned kernel space buffer. I'm not too concerned about the performance here, so this is an option, but would require a good amount of rework.</li>\n</ol>\n\n<p>Is there anything that I'm missing? I'm hoping that there might be some magic flag or something that I overlooked to remove the alignment requirement altogether.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536083829, "post_id": 52171674, "comment_id": 91294005, "body": "Please format the question properly and state the problem as described in <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1536084826, "post_id": 52171674, "comment_id": 91294488, "body": "Exercise 1: check <code>argc</code> to establish that you do have an <code>argv[1]</code> and print its value. Exercise 2: ditto but print it character by character in a loop. Exercise 3: compare <b>two</b> arguments character by character. Step by step, you can get there, and each step will focus the mind on the next step."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536086856, "post_id": 52171674, "comment_id": 91295335, "body": "Please show some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. So edit your question to improve it"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536086904, "post_id": 52171674, "comment_id": 91295360, "body": "Notice that <code>a[i]</code> is the same as <code>*(a+i)</code>"}, {"owner": {"reputation": 7, "user_id": 8660797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b44c370081c50a3e84e453a1801bb5?s=128&d=identicon&r=PG&f=1", "display_name": "maple", "link": "https://stackoverflow.com/users/8660797/maple"}, "edited": false, "score": 0, "creation_date": 1536087032, "post_id": 52171674, "comment_id": 91295410, "body": "I&#39;m sorry guys, I didn&#39;t mean to make it messy, I did type my question in a formatted way, but somehow after I send it out it&#39;s scrambled together. It&#39;s like all the &quot;\\n&quot; are deleted"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536088831, "post_id": 52171674, "comment_id": 91296102, "body": "Suppose you could use the <code>&lt;string.h&gt;</code> functions \u2014 how would you write the code then? (You should be using <code>strcmp()</code> if you were allowed to, as you hint in the question.) . Now replace <code>strcmp()</code> with your own implementation that achieves the same effect \u2014 or write a simpler <code>str_equal()</code> function to compare whether the two strings are equal and return a boolean."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536090653, "post_id": 52171674, "comment_id": 91296914, "body": "@maple, have your tried declaring a variable called something other than <code>argv</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 2, "creation_date": 1536085485, "post_id": 52171812, "comment_id": 91294796, "body": "This logic is backwards, sorry. (If the first characters are the same, you do NOT have a match.) You need to assume that the strings match, and as soon as you find a difference, that&#39;s when you do <code>match=false; break;</code>. If/when you get to the end of the strings without  difference, then <code>match</code> will still be true."}, {"owner": {"reputation": 7, "user_id": 8660797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b44c370081c50a3e84e453a1801bb5?s=128&d=identicon&r=PG&f=1", "display_name": "maple", "link": "https://stackoverflow.com/users/8660797/maple"}, "edited": false, "score": 0, "creation_date": 1536086816, "post_id": 52171812, "comment_id": 91295314, "body": "I&#39;m sorry for being not clear. I&#39;m asking how should I deal with char **. I knew that char * is stored in read-only memories, by incrementing the address I can access each character, but how is char ** stored? I&#39;m assuming that my argument is stored like {&quot;String 1&quot;, &quot;String 2&quot;, &quot;String 3} in char **. The weird thing is that, using *(argv + 1) can give me the string in the shell, but when I try to do it the same way in IDE (e.g. I set argv ={&quot;String 1&quot;, &quot;String 2&quot;, &quot;String 3} ) , it is giving me an error."}], "tags": [], "owner": {"reputation": 1, "user_id": 5583855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d1e23f95ac8a1bfae7c5eb5ad46761?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/5583855/nik"}, "is_accepted": false, "score": -1, "last_activity_date": 1536084895, "last_edit_date": 1536084895, "creation_date": 1536084394, "answer_id": 52171812, "question_id": 52171674, "link": "https://stackoverflow.com/questions/52171674/c-programming-command-line-argument-problem/52171812#52171812", "title": "C programming Command Line Argument problem", "body": "<p>Assuming that you are using properly null terminated strings, checking character by character is the best way to go.</p>\n\n<pre><code>bool match = false;\nchar* arg = argv[1];\nwhile(*str &amp;&amp; *arg){\n  if (*str == *arg) {\n    match = true;\n    break;\n  }\n  str++;\n  arg++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536087695, "post_id": 52172415, "comment_id": 91295666, "body": "I like to post minimal complete and verifiable answers. You can check it out for yourself!"}, {"owner": {"reputation": 7, "user_id": 8660797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b44c370081c50a3e84e453a1801bb5?s=128&d=identicon&r=PG&f=1", "display_name": "maple", "link": "https://stackoverflow.com/users/8660797/maple"}, "edited": false, "score": 0, "creation_date": 1536088174, "post_id": 52172415, "comment_id": 91295858, "body": "It turns out that your code does give the correct result, but my last problem is how char ** works. I don&#39;t understand why *(argv+1) works on char **, if I try to declare char ** inside IDE and run it, it returns error and some strange results."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1536087201, "creation_date": 1536087201, "answer_id": 52172415, "question_id": 52171674, "link": "https://stackoverflow.com/questions/52171674/c-programming-command-line-argument-problem/52172415#52172415", "title": "C programming Command Line Argument problem", "body": "<p>This solution satisfies the question's constraints.</p>\n\n<p>I have not commented it, because you provided no code.</p>\n\n<p>Can you figure out how it works? The question is about pointers and pointer arithmetic.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    if(argc &lt; 3) {\n        puts(\"Not enough arguments\");\n        return 1;\n    }\n    char *a1 = *(argv + 1);\n    char *a2 = *(argv + 2);\n\n    while(*a1 &amp;&amp; *a2 &amp;&amp; *a1 == *a2) {\n        a1++;\n        a2++;\n    }\n\n    if(*a1 || *a2) {\n        puts(\"Different\");\n        return 1;\n    }\n    puts(\"Same\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 6195676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c243be73e093b8db35728462ddf9f6?s=128&d=identicon&r=PG&f=1", "display_name": "Dead Beetle", "link": "https://stackoverflow.com/users/6195676/dead-beetle"}, "is_accepted": false, "score": 0, "last_activity_date": 1536087267, "creation_date": 1536087267, "answer_id": 52172433, "question_id": 52171674, "link": "https://stackoverflow.com/questions/52171674/c-programming-command-line-argument-problem/52172433#52172433", "title": "C programming Command Line Argument problem", "body": "<p>Array subscripting is just \"syntactic sugar\", as my old CS professor used to say. The compiler converts <code>array[i]</code> to <code>*(array + i)</code>. Knowing this, you can use the method of walking the strings character by character to determine equality:</p>\n\n<pre><code>const char *compstring = \"Example\";\nconst int stringlength = 7; /* length of compstring */\nint arg = 1;\nint argchar;\nint match;\nwhile (*(argv + arg)) /* argv is null-terminated */ {\n    argchar = 0;\n    match = 1; /* assume they match */\n    while (*(*(argv + arg) + argchar)) /* arguments are 0-terminated */ {\n        if (argchar == stringlength) /* The string is too long to match */ {\n            match = 0;\n            break;\n        }\n        if (*(*(argv + arg) + argchar) != *(compstring + argchar)) /* The characters do not match */ {\n            match = 0;\n            break;\n        }\n    }\n    printf(\"%s %s %s\", *(argv + arg),\n                       (match &amp;&amp; argchar == stringlength) ? \"matches\" : \"does not match\", /* If the string is the wrong length, it does not match */\n                       compstring);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 8660797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b44c370081c50a3e84e453a1801bb5?s=128&d=identicon&r=PG&f=1", "display_name": "maple", "link": "https://stackoverflow.com/users/8660797/maple"}, "edited": false, "score": 0, "creation_date": 1536109786, "post_id": 52173157, "comment_id": 91302158, "body": "You are very clear in explaining this. I somehow figured parts of it out before I see ur post, but my only question now is how can I define such a double pointer in IDE. char** pp = {&quot;String&quot;, &quot;String2&quot;} is obviously not acceptable, what should be the right way to define it if I want to test on my own."}, {"owner": {"reputation": 7, "user_id": 8660797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b44c370081c50a3e84e453a1801bb5?s=128&d=identicon&r=PG&f=1", "display_name": "maple", "link": "https://stackoverflow.com/users/8660797/maple"}, "edited": false, "score": 0, "creation_date": 1536110445, "post_id": 52173157, "comment_id": 91302285, "body": "I tried char **pp = {a,b} just now where a,b are String1 and String2, I noticed that print(&quot;%s&quot;, pp) will simply print String1. This is weird because argv needs *(argv + 1) to get string address."}, {"owner": {"reputation": 259, "user_id": 2710319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62e82d1d25764466572d0aa49b0b2c5?s=128&d=identicon&r=PG", "display_name": "HeLLo", "link": "https://stackoverflow.com/users/2710319/hello"}, "reply_to_user": {"reputation": 7, "user_id": 8660797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b44c370081c50a3e84e453a1801bb5?s=128&d=identicon&r=PG&f=1", "display_name": "maple", "link": "https://stackoverflow.com/users/8660797/maple"}, "edited": false, "score": 0, "creation_date": 1536171447, "post_id": 52173157, "comment_id": 91332221, "body": "Just a hint:  When you talk about &quot;IDE&quot; or a compiler, please name it.  e.g. gcc for a compiler or eclipse with cdt as the IDE."}], "tags": [], "owner": {"reputation": 259, "user_id": 2710319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62e82d1d25764466572d0aa49b0b2c5?s=128&d=identicon&r=PG", "display_name": "HeLLo", "link": "https://stackoverflow.com/users/2710319/hello"}, "is_accepted": true, "score": 1, "last_activity_date": 1536171390, "last_edit_date": 1536171390, "creation_date": 1536090749, "answer_id": 52173157, "question_id": 52171674, "link": "https://stackoverflow.com/questions/52171674/c-programming-command-line-argument-problem/52173157#52173157", "title": "C programming Command Line Argument problem", "body": "<h2>Comparing Strings without []</h2>\n\n<p>When your lecturer asks you not to use <code>strcmp()</code> from <code>string.h</code>, it doesn't mean you are forbidden to write your own!</p>\n\n<p>To do this, you have to think about, what <code>strcmp()</code> does.  In C strings are basically arrays, that are terminated with <code>0</code> -- that means, that the last element in an array is <code>0</code>.  So if you go through your array and find such an element, you know you have reached the end.</p>\n\n<p>From your question I assume, that you know how the access to an array by the <code>[]</code> operator works.  So I will show you how to compare two strings with the <code>[]</code> operator.</p>\n\n<pre><code>int my_strcmp(const char * str1, const char * str2)\n{\n    int idx = 0;\n\n    while (   (str1[idx] == str2[idx])\n           &amp;&amp; (str1[idx] != 0)\n           &amp;&amp; (str2[idx] != 0)) {\n        ++idx;\n    }\n\n    return  str2[idx] - str1[idx];\n}\n</code></pre>\n\n<p>So we begin to compare the first elements of both strings.</p>\n\n<p><code>(str1[idx] == str2[idx])</code> checks, if the elements are the same.\n<code>(str1[idx] != 0)</code> checks, if string 1 is terminated and <code>(str1[idx] != 0)</code> checks if string 2 is terminated.  So we stay in the loop while the strings are equal and not ending.</p>\n\n<p>When any of this condition fails, we return the difference of the current element -- consider, that <code>strcmp()</code> returns <code>0</code> if both strings are equal -- we have the same behaviour in the above function.</p>\n\n<p>The next step is to translate the <code>[]</code> access into pointer accesses.  Here you have multiple possibilities.</p>\n\n<ol>\n<li><p>You can increment the string pointers (<code>++str1;</code>) and compare dereference them (<code>*str1</code>).</p>\n\n<pre><code>int my_strcmp(const char * str1, const char * str2)\n{\n    while (   (*str1 == *str2)\n           &amp;&amp; (*str1 != 0)\n           &amp;&amp; (*str2 != 0)) {\n        ++str1;\n        ++str2;\n    }\n\n    return  *str2 - *str1;\n}\n</code></pre></li>\n<li><p>You can use an index (<code>++idx;</code>)that is added to the base pointers of the strings and dereference the sum (<code>*(str1 + idx)</code>).</p>\n\n<pre><code>int my_strcmp(const char * str1, const char * str2)\n{\n    int idx = 0;\n\n    while (   (*(str1 + idx) == *(str2 + idx))\n           &amp;&amp; (*(str1 + idx) != 0)\n           &amp;&amp; (*(str2 + idx) != 0)) {\n        ++idx;\n    }\n\n    return  *(str2 + idx) - *(str1 + idx);\n}\n</code></pre></li>\n</ol>\n\n<p>So you only have to use this function in your main function.</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    if (argc &lt; 2) {\n        fprintf(stderr, \"missing parameter\\n\");\n        return 1;\n    } else {\n        if (my_strcmp(*(argv + 1), \"my secret compare string\") == 0) {\n            printf(\"argument is equal\\n\");\n        } else {\n            printf(\"argument is unequal\\n\");\n        }\n        return 0;\n    }\n}\n</code></pre>\n\n<h2>Pointer to Pointer</h2>\n\n<p>What I also see from your question, is that you are not familiar with the <code>**</code>.</p>\n\n<p>When we want to store a character, we declare a variable like</p>\n\n<pre><code>char v = 'x';\n</code></pre>\n\n<p>In this case, the compiler reserves some space in the RAM, e.g. on address <code>1003</code>.  And every time you access the variable <code>v</code>, the value of address <code>1003</code> is read or written.</p>\n\n<pre><code>addr.  value\n     +--------+\n1002 |   'x'  |\n     +--------+\n</code></pre>\n\n<p>If you declare this</p>\n\n<pre><code>char * pv = \"text2\";\n</code></pre>\n\n<p>Multiple things are stored in the RAM.  First the string itself -- consisting of the 5 characters of the string and a terminating <code>0</code> -- e.g. on address <code>1100</code>.  And additionally a pointer to that array is stored, e.g. on Address <code>3004</code>.  On address <code>3004</code> the value <code>1100</code> is stored -- so the address of the string.</p>\n\n<pre><code>addr.  value\n     +--------+\n1100 |   't'  |&lt;--------+\n     +--------+         |\n1101 |   'e'  |         |\n     +--------+         |\n1102 |   'x'  |         |\n     +--------+         |\n1103 |   't'  |         |\n     +--------+         |\n1104 |   '2'  |         |\n     +--------+         |\n1105 |    0   |         |\n     +--------+         |\n          .             |\n          .             |\n          .             |\n     +--------+         |\n3004 |  1100  |---------+\n     +--------+\n</code></pre>\n\n<p>And as a last step, you have an array of such pointers.  To address this, you store a pointer to a pointer. </p>\n\n<pre><code>char ** ppv = &amp;pv;\n</code></pre>\n\n<p>Here are the strings itself stored (on addresses <code>1000</code>, <code>1100</code> and <code>1300</code>), pointers to these strings (on addresses <code>3000</code>, <code>3004</code>, <code>3008</code>) and as a last element a pointer to the beginning of the array of pointers on address <code>4192</code>.</p>\n\n<pre><code>addr.  value\n     +--------+\n1000 |   't'  |&lt;------------+\n     +--------+             |\n1001 |   'e'  |             |\n     +--------+             |\n1002 |   'x'  |             |\n     +--------+             |\n1003 |   't'  |             |\n     +--------+             |\n1004 |   '3'  |             |\n     +--------+             |\n1005 |    0   |             |\n     +--------+             |\n          .                 |\n          .                 |\n          .                 |\n     +--------+\n1100 |   't'  |&lt;--------+   |\n     +--------+         |   |\n1101 |   'e'  |         |   |\n     +--------+         |   |\n1102 |   'x'  |         |   |\n     +--------+         |   |\n1103 |   't'  |         |   |\n     +--------+         |   |\n1104 |   '2'  |         |   |\n     +--------+         |   |\n1105 |    0   |         |   |\n     +--------+         |   |\n          .             |   |\n          .             |   |\n          .             |   |\n     +--------+         |   |\n1300 |   't'  |&lt;----+   |   |\n     +--------+     |   |   |\n1301 |   'e'  |     |   |   |\n     +--------+     |   |   |\n1302 |   'x'  |     |   |   |\n     +--------+     |   |   |\n1303 |   't'  |     |   |   |\n     +--------+     |   |   |\n1304 |   '1'  |     |   |   |\n     +--------+     |   |   |\n1305 |    0   |     |   |   |\n     +--------+     |   |   |\n          .         |   |   |\n          .         |   |   |\n          .         |   |   |\n     +--------+     |   |   |\n3000 |  1300  |-----+   |   | &lt;------+\n     +--------+         |   |        |\n3004 |  1100  |---------+   |        |\n     +--------+             |        |\n3008 |  1000  |-------------+        |\n     +--------+                      |\n          .                          |\n          .                          |\n          .                          |\n     +--------+                      |\n4192 |  3000  |----------------------+\n     +--------+\n</code></pre>\n\n<p>So when your process is created by the operating system, it stores all arguments to your program in the ram and a list of pointers to these strings.  And the <code>argv</code> is a pointer to this list.</p>\n\n<h2>Declaring an Array of Pointers</h2>\n\n<p>To declare an array of pointers you have to use this syntax:</p>\n\n<pre><code>const char * arr[] = { \"HeLLo\", \"World!\" };\n</code></pre>\n\n<p>But why is your attempt <code>char ** arr = { \"HeLLo\", \"World\" };</code> not successfull?  You are declaring a variable named <code>arr</code>, which is a pointer to a pointer to a <code>char</code>.  So basically you request the compiler to allocate memory for a pointer.  To make things easier, we will talk about a machine that has 32 bit register width and 32 bit address room.  In this case, a pointer has a size of 4 bytes.</p>\n\n<p>This variable <code>arr</code> shall point to a list of pointers to chars, but you don't instruct the compiler to allocate this list.  That is the difference between <code>char ** x = ...;</code> and <code>char * x[] = ...;</code>.  In the latter case you instruct the compiler to also allocate the memory for the list, not only for the pointer to such a list.</p>\n\n<p>When you have the following (wrong) lines in your code</p>\n\n<pre><code>char ** x = { \"HeLLo\", \"World\" };\nprintf(\"%s\\n\", x);\n</code></pre>\n\n<p>a compiler could throw the following warning/error:</p>\n\n<pre><code>$ gcc -std=c99 --pedantic -Wall -Wextra file.c -o mybin\nfile.c: In function \u2018f\u2019:\nfile.c:21:16: warning: initialization of \u2018char **\u2019 from incompatible pointer type \u2018char *\u2019 [-Wincompatible-pointer-types]\n  char ** x = { \"HeLLo\", \"World\" };\n                ^~~~~~~\nfile.c:21:16: note: (near initialization for \u2018x\u2019)\nfile.c:21:25: warning: excess elements in scalar initializer\n  char ** x = { \"HeLLo\", \"World\" };\n                         ^~~~~~~\nfile.c:21:25: note: (near initialization for \u2018x\u2019)\n</code></pre>\n\n<p>I think the warnings/errors are speaking for themselves.</p>\n\n<p>As the first warning explains, your are initializing <code>x</code> with the value of <code>\"HeLLo\"</code>, which is a pointer to a string.  The second warning tells you, that you have some dead code, since <code>\"World\"</code> is not used.</p>\n\n<p>When you try to print <code>x</code> in the line</p>\n\n<pre><code>printf(\"%s\\n\", x);\n</code></pre>\n\n<p>you experience some lack of the C language, since it is not type safe here.  The format expression <code>%s</code> expects as a parameter the type <code>char *</code>.  <code>x</code> is of type <code>char **</code>.  What you don't see here, that a cast is done.  The value of <code>x</code> is not changed but interpreted with different semantics.  This works, since you had a wrong assignment in the first place.</p>\n\n<h2>argc and argv</h2>\n\n<p>By convention <code>argc</code> tells you the number of arguments, that can be found in <code>argv</code>.</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    for (i = 0; i &lt; argc; ++i) {\n        printf(\"argument %d is '%s'\\n\", i, argv[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>What you have to know is, that the first element (index <code>0</code>) is the name of the binary, which could include some path to the binary.  The first parameter in the command line has index <code>1</code>, the second command line parameter has index <code>2</code> and so on...</p>\n"}], "owner": {"reputation": 7, "user_id": 8660797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b44c370081c50a3e84e453a1801bb5?s=128&d=identicon&r=PG&f=1", "display_name": "maple", "link": "https://stackoverflow.com/users/8660797/maple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 52173157, "answer_count": 4, "score": -2, "last_activity_date": 1536171390, "creation_date": 1536083737, "last_edit_date": 1536087424, "question_id": 52171674, "link": "https://stackoverflow.com/questions/52171674/c-programming-command-line-argument-problem", "title": "C programming Command Line Argument problem", "body": "<p>I'm asked to check command line argument<br>\nWithout using <code>strcmp</code> and the entire <code>string.h</code> library<br>\nWithout using any <code>[</code> <code>]</code>, i.e. no array operations and only pointers.</p>\n\n<p>How do I check the equality between two strings?\nI tried <code>(\"String\" == *(argv + 1))</code>, but it doesn't work, <code>*(argv + 1)</code> gives me the exact string but the address is different. <br>\nOn the other hand, I can't check character by character since it's <code>char *</code> instead of <code>char []</code>\nThe type of <code>agrv</code> is <code>char **</code> instead of <code>char *[]</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(int argc, char ** argv) {\n   printf(\"%s\", *(argv + 1));\n   return 0;\n} // Works in the terminal\n\n#include &lt;stdio.h&gt;\nint main(int argc) {\n    char ** argv = {\"String1\", \"String2\"};\n    printf(\"%s\", *(argv + 1));\n    return 0;\n} // Does not work in IDE, not really understand how char ** works\n</code></pre>\n"}, {"tags": ["c", "exec", "posix", "system-calls", "ansi"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536083619, "post_id": 52171591, "comment_id": 91293912, "body": "1) Post the relevant code here and don&#39;t make us click links. 2) What don&#39;t you understand? The syntax? The logic?"}, {"owner": {"reputation": 551, "user_id": 10164572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0feedb1a60c7c66c7303a5ebd84555?s=128&d=identicon&r=PG&f=1", "display_name": "ss321c", "link": "https://stackoverflow.com/users/10164572/ss321c"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536084763, "post_id": 52171591, "comment_id": 91294460, "body": "The logic part."}], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": false, "score": 0, "last_activity_date": 1536089370, "creation_date": 1536089370, "answer_id": 52172845, "question_id": 52171591, "link": "https://stackoverflow.com/questions/52171591/understanding-command-execution-in-shell-implementation/52172845#52172845", "title": "understanding command execution in shell implementation", "body": "<p>The meaning of the variables isn't clear from the code you posted. However, if you can find any documentation for, or the definition of, the function <code>command()</code>, you may be able to learn their intended purpose.</p>\n\n<p>Having said that, it's pretty clear from the code that these parameters are just copies of the parameters that were initially passed to <code>split()</code> and passed on to <code>command()</code>, so it is likely that the integers are general purpose parameters whose meaning will depend on the eventual type of command executed.</p>\n"}], "owner": {"reputation": 551, "user_id": 10164572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0feedb1a60c7c66c7303a5ebd84555?s=128&d=identicon&r=PG&f=1", "display_name": "ss321c", "link": "https://stackoverflow.com/users/10164572/ss321c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536089370, "creation_date": 1536083329, "last_edit_date": 1536084831, "question_id": 52171591, "link": "https://stackoverflow.com/questions/52171591/understanding-command-execution-in-shell-implementation", "title": "understanding command execution in shell implementation", "body": "<p>I am trying to understand a program <a href=\"https://github.com/kalpishs/Unix-Shell-Implementation-in-C/blob/master/shell.c\" rel=\"nofollow noreferrer\">here</a> \nI have not been able to  understand the \n<code>static int split(char *cmd_exec, int input, int first, int last)</code> function  what is the purpose of int input,int first,int last here ,\nthis function returns <code>return command(input, first, last, new_cmd_exec1);</code> \nwhat does input,first,last and new_cmd_exec1 signify here?\nWhy do we need to spilt the commands passed on to a shell ?\nThe relevant code is following</p>\n\n<pre><code>static int split(char *cmd_exec, int input, int first, int last)\n{\n    char *new_cmd_exec1;  \n    new_cmd_exec1=strdup(cmd_exec);\n   //else\n      {\n        int m=1;\n        args[0]=strtok(cmd_exec,\" \");       \n        while((args[m]=strtok(NULL,\" \"))!=NULL)\n              m++;\n        args[m]=NULL;\n        if (args[0] != NULL) \n            {\n\n            if (strcmp(args[0], \"exit\") == 0) \n                    exit(0);\n            if (strcmp(args[0], \"echo\") != 0) \n                    {\n                      cmd_exec = skipcomma(new_cmd_exec1);\n                      int m=1;\n                      args[0]=strtok(cmd_exec,\" \");       \n                      while((args[m]=strtok(NULL,\" \"))!=NULL)\n                                m++;\n                      args[m]=NULL;\n\n                    }\n            if(strcmp(\"cd\",args[0])==0)\n                    {\n                    change_directory();\n                    return 1;\n                    }\n            else if(strcmp(\"pwd\",args[0])==0)\n                    {\n                    parent_directory();\n                    return 1;\n                    }\n\n            }\n        }\n    return command(input, first, last, new_cmd_exec1);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "input", "structure"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536083177, "post_id": 52171501, "comment_id": 91293730, "body": "&quot;after some inputs&quot; --&gt; What are those inputs?  Note code is using integers and not floating point."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1536083332, "post_id": 52171501, "comment_id": 91293789, "body": "Usual the first thing to do is to check the return value from <code>scanf()</code>.  E.g. <code>if (scanf(&quot;%d&quot;, &amp;s1[i].img) != 1) { puts(&quot;bad input&quot;); exit(1);</code>"}, {"owner": {"reputation": 31, "user_id": 9981737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0cb35fd181abe85dd9592725fec23e?s=128&d=identicon&r=PG&f=1", "display_name": "vicky", "link": "https://stackoverflow.com/users/9981737/vicky"}, "edited": false, "score": 1, "creation_date": 1536083490, "post_id": 52171501, "comment_id": 91293853, "body": "While entering 1st Complex number , it takes both real and imaginary part ,But when it comes to taking 2nd complex number it doesnt print the statement &quot;Enter complex number 2&quot; rather it takes another input without printing anything and assigns it to real part of complex number 2 .and then it printd the statement ,&quot;Enter complex number 2 &quot; .And when i enter the value it assign that value to &quot;img&quot; variable rather than real variable."}, {"owner": {"reputation": 31, "user_id": 9981737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0cb35fd181abe85dd9592725fec23e?s=128&d=identicon&r=PG&f=1", "display_name": "vicky", "link": "https://stackoverflow.com/users/9981737/vicky"}, "edited": false, "score": 0, "creation_date": 1536083521, "post_id": 52171501, "comment_id": 91293872, "body": "So basically its running one step backwards"}, {"owner": {"reputation": 31, "user_id": 9981737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0cb35fd181abe85dd9592725fec23e?s=128&d=identicon&r=PG&f=1", "display_name": "vicky", "link": "https://stackoverflow.com/users/9981737/vicky"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1536083658, "post_id": 52171501, "comment_id": 91293921, "body": "@user3121023 Thanks it worked. But can you tell the reason behind it?"}, {"owner": {"reputation": 31, "user_id": 9981737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0cb35fd181abe85dd9592725fec23e?s=128&d=identicon&r=PG&f=1", "display_name": "vicky", "link": "https://stackoverflow.com/users/9981737/vicky"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536083693, "post_id": 52171501, "comment_id": 91293940, "body": "@chux thanx mate . It worked"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1536083751, "last_edit_date": 1536083751, "creation_date": 1536083612, "answer_id": 52171647, "question_id": 52171501, "link": "https://stackoverflow.com/questions/52171501/the-problem-is-during-the-input-of-structure-variables-after-some-inputs-it-does/52171647#52171647", "title": "The problem is during the input of structure variables,after some inputs it doesnt print input statements and assigns input to variable randomly", "body": "<p>When you read the parts of the complex number:</p>\n\n<pre><code>      scanf(\"%d \", &amp;s1[i].real);\n      scanf(\"%d \", &amp;s1[i].img);\n</code></pre>\n\n<p>The <code>%d</code> format specifier expects a sequence of digits.  The problem is the space after it consumes any number of whitespace characters.  After a number is typed and you press ENTER, the <code>scanf</code> doesn't return until some non-whitespace character is entered, i.e. the next number you intend on typing.</p>\n\n<p>Get rid of the trailing space in the format string:</p>\n\n<pre><code>      scanf(\"%d\", &amp;s1[i].real);\n      scanf(\"%d\", &amp;s1[i].img);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9981737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0cb35fd181abe85dd9592725fec23e?s=128&d=identicon&r=PG&f=1", "display_name": "vicky", "link": "https://stackoverflow.com/users/9981737/vicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536083751, "creation_date": 1536082833, "last_edit_date": 1536083076, "question_id": 52171501, "link": "https://stackoverflow.com/questions/52171501/the-problem-is-during-the-input-of-structure-variables-after-some-inputs-it-does", "title": "The problem is during the input of structure variables,after some inputs it doesnt print input statements and assigns input to variable randomly", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct complex {\n  int real;\n  int img;\n} s1[2], s2;\n\nint main() {\n  int n;\n  printf(\"\\t******MAIN MENU*******\\n\");\n  printf(\n      \"1-Read Complex number\\n2-Display Complex number\\n3-Add\\n4-Subtract\\n5-EXIT\\n\");\n\n  while (1) {\n    printf(\"Enter your choice \\n\");\n    scanf(\"%d\", &amp;n);\n    switch (n) {\n      case 1:\n        for (int i = 0; i &lt; 2; i++) {\n          printf(\"Enter real and imaginary parts of complex number %d \\n\",\n              i + 1);\n          scanf(\"%d \", &amp;s1[i].real);\n          scanf(\"%d \", &amp;s1[i].img);\n        }\n        break;\n      case 2:\n        for (int j = 0; j &lt; 2; j++) {\n          printf(\"Complex number %d = \", j + 1);\n          printf(\"%d + %di\\n\", s1[j].real, s1[j].img);\n        }\n        break;\n      case 3:\n        printf(\"The sum of two Complex Numbers Are = \");\n        s2.real = s1[0].real + s1[1].real;\n        s2.img = s1[0].img + s1[1].img;\n        printf(\"%d + %di\\n\", s2.real, s2.img);\n        break;\n      case 4:\n        printf(\"The difference of two Complex Numbers Are = \");\n        s2.real = s1[0].real - s1[1].real;\n        s2.img = s1[0].img - s1[1].img;\n        printf(\"%d + %di\", s2.real, s2.img);\n        break;\n      case 5:\n        exit(0);\n      default:\n        printf(\"\\n Wrong choice \\n\");\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536082933, "post_id": 52171254, "comment_id": 91293638, "body": "<i>And the variable sv is declared only if that condition passes.</i> - No. It can be allocated just anywhere in the function. Most likely in the beginning with all of the rest of automatic variables."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1536082963, "post_id": 52171254, "comment_id": 91293652, "body": "Compilers are allowed to reorganise any of your code as long as it doesn&#39;t change the outcome of the program. In other words - space for the variable maybe allocated even if it&#39;s never needed."}], "answers": [{"comments": [{"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "edited": false, "score": 0, "creation_date": 1536084755, "post_id": 52171617, "comment_id": 91294456, "body": "Okay, i understood. So as you mentioned yourself the case;   If i had written C code like-  <code>void foo() {     if (something)     {         int sv;         ...     }     sv = whatever;  }</code>  And the compiler decides to generate an equivalent/optimized code like-  <code>void foo() {     int sv;     if (something)     {         ...     }    sv = whatever;  }</code>  then how does the compiler ensure the scoping? Because as per the developer the variable <code>sv</code> should not be accessible outside the <code>if</code> block."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "edited": false, "score": 0, "creation_date": 1536086112, "post_id": 52171617, "comment_id": 91295055, "body": "@DarshanL The compiler ensures the scoping at compile time. At run time it&#39;s a different story. If you make a variable <code>const</code> the compiler will make sure you don&#39;t change it in any of your code. However, at run time the variable isn&#39;t protected and (on most systems) you can write code to change it despite being &quot;const&quot;"}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "edited": false, "score": 0, "creation_date": 1536120283, "post_id": 52171617, "comment_id": 91304034, "body": "My doubt was different. Do you mean,  If i had written C code like-  <code>void foo() {     if (something)     {         int sv;         ...     }     sv = whatever;  }</code>  Then compiler won&#39;t generate an equivalent/optimized code like-  <code>void foo() {     int sv;     if (something)     {         ...     }    sv = whatever;  }</code> Right??"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "edited": false, "score": 0, "creation_date": 1536122817, "post_id": 52171617, "comment_id": 91304589, "body": "@DarshanL In the last no code would be generated at all. The compiler would just give you an error and there would be no executable."}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "edited": false, "score": 0, "creation_date": 1536126556, "post_id": 52171617, "comment_id": 91305808, "body": "Okay. Furthermore, referring to the code from my orginal post. Even though the storage allocation for the variable (<code>sv</code>) has happened at the beginning of the function as part of the compiler optimisation, assignment <code>sv = INTRPT_FORCE_DUMMY_STACK;</code> will happen only when the <code>if</code> condition is evaluated to <code>TRUE</code>. Right? If my understand is right, then from the call stack I see the value of var <code>sv</code> is having some garbage value (<code>32761</code>). So I can interpret that when the crash happened, the execution was at line - <i>.h:7</i> ? If <code>if</code> block was evaluated to TRUE then <code>sv should have been 3</code>"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 4, "last_activity_date": 1536086954, "last_edit_date": 1536086954, "creation_date": 1536083437, "answer_id": 52171617, "question_id": 52171254, "link": "https://stackoverflow.com/questions/52171254/variable-inside-if-block-is-shown-in-call-stack-even-though-the-if-statement-did/52171617#52171617", "title": "Variable inside if block is shown in call stack even though the if statement didn&#39;t get evaluated to true", "body": "<p>Compilers are allowed to reorganise your code in any way that doesn't change the outcome of the program. So if you write:</p>\n\n<pre><code>void foo()\n{\n    if (something)\n    {\n        int sv;\n        ...\n    }\n}\n</code></pre>\n\n<p>the compiler is allowed to change it into something equivalent to:</p>\n\n<pre><code>void foo()\n{\n    int sv;\n    if (something)\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>regardless of <code>something</code> being true or false.</p>\n\n<p>But the compiler must make sure that this will fail to compile:</p>\n\n<pre><code>void foo()\n{\n    if (something)\n    {\n        int sv;\n        ...\n    }\n    sv = whatever;  // Compiler error....\n}\n</code></pre>\n"}], "owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536234126, "creation_date": 1536081723, "last_edit_date": 1536234126, "question_id": 52171254, "link": "https://stackoverflow.com/questions/52171254/variable-inside-if-block-is-shown-in-call-stack-even-though-the-if-statement-did", "title": "Variable inside if block is shown in call stack even though the if statement didn&#39;t get evaluated to true", "body": "<p>I have a piece of code in C as shown below-</p>\n\n<p>In a .c file-</p>\n\n<pre><code>1    custom_data_type2 myFunction1(custom_data_type1 a, custom_data_type2 b)\n2    {\n3        int c=foo();\n4        custom_data_type3 t;\n5        check_for_ir_path();\n6        ...\n7        ...\n8    }\n9\n10    custom_data_type4 myFunction2(custom_data_type3 c, const void* d)\n11    {\n12        custom_data_type4 e;\n13        struct custom_data_type5 f;\n14        check_for_ir_path();\n15        ...\n16        temp = myFunction1(...);\n17        return temp;\n18    }\n</code></pre>\n\n<p>In a header file-</p>\n\n<pre><code>1    void CRASH_DUMP(int *i)\n2     __attribute__((noinline));\n3    \n4    #define INTRPT_FORCE_DUMMY_STACK    3\n5    \n6    #define check_for_ir_path() { \\\n7        if (checkfunc1() &amp;&amp; !checkfunc2()) { \\\n8            int temp = INTRPT_FORCE_DUMMY_STACK; \\\n9            ...\n10            CRASH_DUMP(&amp;sv);\\\n11        }\\\n12    }\\\n</code></pre>\n\n<p>In an unknown scenario, there is a crash.\nAfter processing the core dump using GDB, we get the call stack like -</p>\n\n<pre><code>#0  0x00007ffa589d9619 in myFunction1 [...] \n(custom_data_type1=0x8080808080808080, custom_data_type2=0x7ff9d77f76b8) at ../xxx/yyy/zzz.c:5\n\n        temp = 32761\n\n        t = &lt;optimized out&gt;\n\n\n\n#1  0x00007ffa589d8f91 in myFunction2 [...]\n\n(custom_data_type3=&lt;optimized out&gt;, d=0x7ff9d77f7748) at ../xxx/yyy/zzz.c:16\n\n        temp = 167937677\n\n        f = {\n\n          ...\n\n        }\n</code></pre>\n\n<p>If you see the code, <code>check_for_ir_path</code> is invoked from both <code>myFunction1()</code> and <code>myFunction2()</code>.</p>\n\n<p>And inside <code>check_for_ir_path</code>, there is a check inside if block like - <code>checkfunc1() &amp;&amp; !checkfunc2()</code>. If that check evaluates to TRUE then a SIGSEGV is fired and the process is crashed intentionally. And the variable <code>temp</code> is declared only if that condition passes.</p>\n\n<p>Now if you look at the call stack, you can see the local variable <code>temp</code> shown even in the <em>StackFrame_1</em>. However it didn't crash inside the function <code>myFunction2</code>. How could this be possible?</p>\n\n<p>If i declare another variable, say 'int temp' just after the statement <code>int temp = INTRPT_FORCE_DUMMY_STACK;</code>, that is not shown as part of <em>bt full</em></p>\n\n<p>How could this be even possible? </p>\n"}, {"tags": ["c", "keil"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536077542, "post_id": 52170229, "comment_id": 91291191, "body": "It is not highest priority, and it is not a vector. It is the architecture convention to have the initial SP there."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 4, "creation_date": 1536077643, "post_id": 52170229, "comment_id": 91291248, "body": "It is because the engineer  who has designed the core decided to have SP there. It could be anywhere, but it is there. Stack pointer does not have the priority. But probably it is because the first operation before jumping anywhere has to be stack pointer initialization."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1536080205, "post_id": 52170229, "comment_id": 91292407, "body": "Aside: some processors inhibit the non-maskable interrupt until the stack pointer has been initialised. The reset vector is hard coded into the processor for a power-on reset and it is often the programmer&#39;s responsibility to initialise a stack pointer. Without that exception to &quot;non-maskable&quot; it may not be possible to initialise the I/O systems."}], "owner": {"reputation": 31, "user_id": 9405854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1633451566747905/picture?type=large", "display_name": "Hazem Khaled", "link": "https://stackoverflow.com/users/9405854/hazem-khaled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536106992, "creation_date": 1536077106, "last_edit_date": 1536106992, "question_id": 52170229, "link": "https://stackoverflow.com/questions/52170229/why-is-the-top-of-stack-is-the-first-value-to-load-from-vector-table-after-reset", "title": "Why is the top of stack is the first value to load from vector table after reset?", "body": "<p>The following has a priority higher than <code>reset_handler</code>.</p>\n\n<p>Why do such a thing?</p>\n\n<p>I know that datasheet of any ARM-based MCU forces that order by hardware, but why it is the highest priority?</p>\n\n<pre><code>__Vectors       DCD     __initial_sp               ; Top of Stack\n            DCD     Reset_Handler              ; Reset Handler\n            DCD     NMI_Handler                ; NMI Handler\n            DCD     HardFault_Handler          ; Hard Fault Handler\n            DCD     MemManage_Handler          ; MPU Fault Handler\n            DCD     BusFault_Handler           ; Bus Fault Handler\n            DCD     UsageFault_Handler         ; Usage Fault Handler\n            DCD     0                          ; Reserved\n            DCD     0                          ; Reserved\n            DCD     0                          ; Reserved\n            DCD     0                          ; Reserved\n            DCD     SVC_Handler                ; SVCall Handler\n            DCD     DebugMon_Handler           ; Debug Monitor Handler\n            DCD     0                          ; Reserved\n            DCD     PendSV_Handler             ; PendSV Handler\n            DCD     SysTick_Handler            ; SysTick Handler\n</code></pre>\n"}, {"tags": ["c", "bubble-sort"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1536075242, "post_id": 52169744, "comment_id": 91289968, "body": "Please don&#39;t post pictures of text if ylou can post text.$"}, {"owner": {"reputation": 33, "user_id": 9732282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81168477499a0946e732a208fd6de602?s=128&d=identicon&r=PG&f=1", "display_name": "Tea_Cups", "link": "https://stackoverflow.com/users/9732282/tea-cups"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1536075320, "post_id": 52169744, "comment_id": 91290028, "body": "Apologies, will abstain in the future"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536075354, "post_id": 52169744, "comment_id": 91290049, "body": "Nothing prevents you from <a href=\"https://stackoverflow.com/posts/52169744/edit\">edit</a>ing your question."}, {"owner": {"reputation": 355, "user_id": 7727881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c152f477205ff3100d5ebcf7eb0f169?s=128&d=identicon&r=PG&f=1", "display_name": "AlexL", "link": "https://stackoverflow.com/users/7727881/alexl"}, "edited": false, "score": 0, "creation_date": 1536075359, "post_id": 52169744, "comment_id": 91290054, "body": "How does your code catch the last SortData[19] item? The variables <code>i</code> and <code>j</code> are never set to 19 and the same thing for even <code>i+1</code> or <code>j+1</code>"}, {"owner": {"reputation": 6601, "user_id": 233813, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a863451740595ac1511c5b43120fbaa5?s=128&d=identicon&r=PG", "display_name": "rocksportrocker", "link": "https://stackoverflow.com/users/233813/rocksportrocker"}, "edited": false, "score": 0, "creation_date": 1536075425, "post_id": 52169744, "comment_id": 91290092, "body": "what is wrong on your first screen shot ? The number of permutations must decrease for every scan through your numbers."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1536075630, "post_id": 52169744, "comment_id": 91290224, "body": "I think you may take a look to a lot of useful links on this site: <a href=\"https://stackoverflow.com/search?q=Bubble+sort+in+c\">stackoverflow.com/search?q=Bubble+sort+in+c</a>"}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1536077305, "post_id": 52169744, "comment_id": 91291072, "body": "I suggest as a debugging technique, that you sort an array that contains the numbers 1 to 20.  That way you can quickly visually check that the array is in order, no values are duplicated, and no values were dropped."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9732282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81168477499a0946e732a208fd6de602?s=128&d=identicon&r=PG&f=1", "display_name": "Tea_Cups", "link": "https://stackoverflow.com/users/9732282/tea-cups"}, "edited": false, "score": 1, "creation_date": 1536075629, "post_id": 52169854, "comment_id": 91290223, "body": "Oh I see, but what about printing every swap/iteration"}, {"owner": {"reputation": 925, "user_id": 9491208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGGz3NCqHUo/AAAAAAAAAAI/AAAAAAAABtU/QLcpa2IbJMw/photo.jpg?sz=128", "display_name": "Simo", "link": "https://stackoverflow.com/users/9491208/simo"}, "reply_to_user": {"reputation": 33, "user_id": 9732282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81168477499a0946e732a208fd6de602?s=128&d=identicon&r=PG&f=1", "display_name": "Tea_Cups", "link": "https://stackoverflow.com/users/9732282/tea-cups"}, "edited": false, "score": 0, "creation_date": 1536076594, "post_id": 52169854, "comment_id": 91290721, "body": "Edit the answer to include the print on every iteration. If my answer satisfies you, please mark it"}], "tags": [], "owner": {"reputation": 925, "user_id": 9491208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGGz3NCqHUo/AAAAAAAAAAI/AAAAAAAABtU/QLcpa2IbJMw/photo.jpg?sz=128", "display_name": "Simo", "link": "https://stackoverflow.com/users/9491208/simo"}, "is_accepted": true, "score": 1, "last_activity_date": 1536077272, "last_edit_date": 1536077272, "creation_date": 1536075477, "answer_id": 52169854, "question_id": 52169744, "link": "https://stackoverflow.com/questions/52169744/bubble-sort-in-c/52169854#52169854", "title": "Bubble-sort in C", "body": "<p>This works perfectly, you did a little error:</p>\n\n<pre><code>int i, j, temp;\nint SortData[20]= {20, 43, 90, 17, 2, 4, 67, 54, 0, 44, 78, 89, 21, 45, 72, 88, 65, 100, 97, 25};\nfor(i=0; i&lt;20; i++)\n{\n    printf(\"|%d\", SortData[i]);\n}\nprintf(\"|\");\nprintf(\"\\n\");\n//before for(i=0; i&lt;19; i++)\nfor (i=0; i&lt;20; i++)// i &lt; 20 or it will skip the last number\n{\n    //before for(j=0; j&lt;18; j++)\n    for(j=0;j&lt;19;j++){\n        if(SortData[j]&gt;SortData[j+1])\n        {\n        temp = SortData[j];\n        SortData[j]=SortData[j+1];\n        SortData[j+1]=temp;\n        }\n\n    }\n}\nfor (i=0; i&lt;20; i++){\n    printf(\"|%d\", SortData[i]);\n}\nprintf(\"|\");\nprintf(\"\\n\");\nreturn 0;\n</code></pre>\n\n<p>If you want to print every iteration of the bubble sorting, this is the code:</p>\n\n<pre><code>int i, j, temp, h;\nint SortData[20]= {20, 43, 90, 17, 2, 4, 67, 54, 0, 44, 78, 89, 21, 45, 72, 88, 65, 100, 97, 25};\nfor(i=0; i&lt;20; i++)\n{\n    printf(\"|%d\", SortData[i]);\n}\nprintf(\"|\");\nprintf(\"\\n\");\n\nfor (i=0; i&lt;20; i++)\n{\n    for(j=0;j&lt;19;j++){\n        if(SortData[j]&gt;SortData[j+1])\n        {\n            temp = SortData[j];\n            SortData[j]=SortData[j+1];\n            SortData[j+1]=temp;\n            for (h=0; h&lt;20; h++)\n            {\n                printf(\"|%d\", SortData[h]);\n            }\n            printf(\"|\");\n            printf(\"\\n\");\n        }\n    }\n}\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 925, "user_id": 9491208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGGz3NCqHUo/AAAAAAAAAAI/AAAAAAAABtU/QLcpa2IbJMw/photo.jpg?sz=128", "display_name": "Simo", "link": "https://stackoverflow.com/users/9491208/simo"}, "edited": false, "score": 0, "creation_date": 1536076756, "post_id": 52169889, "comment_id": 91290787, "body": "did you copy/paste the same code of the post without changing anything? I highly suggest you to fix the problem in the code you are posting or it&#39;s better to just leave a comment!"}, {"owner": {"reputation": 41, "user_id": 8172163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6L3uB.jpg?s=128&g=1", "display_name": "Lucas Eduardo Scrini", "link": "https://stackoverflow.com/users/8172163/lucas-eduardo-scrini"}, "reply_to_user": {"reputation": 925, "user_id": 9491208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGGz3NCqHUo/AAAAAAAAAAI/AAAAAAAABtU/QLcpa2IbJMw/photo.jpg?sz=128", "display_name": "Simo", "link": "https://stackoverflow.com/users/9491208/simo"}, "edited": false, "score": 1, "creation_date": 1536077187, "post_id": 52169889, "comment_id": 91291004, "body": "Thanks for comment, I&#39;m new on StackOverflow. I fixed my answer."}, {"owner": {"reputation": 925, "user_id": 9491208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGGz3NCqHUo/AAAAAAAAAAI/AAAAAAAABtU/QLcpa2IbJMw/photo.jpg?sz=128", "display_name": "Simo", "link": "https://stackoverflow.com/users/9491208/simo"}, "edited": false, "score": 0, "creation_date": 1536078328, "post_id": 52169889, "comment_id": 91291576, "body": "Welcome to StackOverflow then! I highly suggest you to read <a href=\"https://stackoverflow.com/help/how-to-answer\">how to answer</a> in order to contribute better next time ;)"}], "tags": [], "owner": {"reputation": 41, "user_id": 8172163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6L3uB.jpg?s=128&g=1", "display_name": "Lucas Eduardo Scrini", "link": "https://stackoverflow.com/users/8172163/lucas-eduardo-scrini"}, "is_accepted": false, "score": 1, "last_activity_date": 1536077086, "last_edit_date": 1536077086, "creation_date": 1536075655, "answer_id": 52169889, "question_id": 52169744, "link": "https://stackoverflow.com/questions/52169744/bubble-sort-in-c/52169889#52169889", "title": "Bubble-sort in C", "body": "<p>on line 11 of that code snippet you put in, you're only using the first 19 records for sorting. Set this code to 20 and solve.</p>\n\n<p>I comment the line where i fix.</p>\n\n<p>Tip: Possibly you are starting out in software development and for this type of case it would be interesting to learn how to use a debug.</p>\n\n<pre><code>int i, j, temp;\nint SortData[20]= {20, 43, 90, 17, 2, 4, 67, 54, 0, 44, 78, 89, 21, 45, 72, \n88, 65, 100, 97, 25};\nfor(i=0; i&lt;20; i++)\n{\n    printf(\"|%d\", SortData[i]);\n}\nprintf(\"|\");\nprintf(\"\\n\");\n\n// before &gt; for (i=0; i&lt;19; i++)\n for (i=0; i&lt;20; i++)\n    {\n// before &gt; for(j=0;j&lt;18;j++){\n    for(j=0;j&lt;19;j++){\n        if(SortData[j]&gt;SortData[j+1])\n        {\n            temp = SortData[j];\n            SortData[j]=SortData[j+1];\n            SortData[j+1]=temp;\n\n        }\n\n    }\n    }\n    for (i=0; i&lt;20; i++){\n        printf(\"|%d\", SortData[i]);//Error here as 25 isn't sorted\n    }\n    printf(\"|\");\n    printf(\"\\n\");\nsystem(\"pause\");\nreturn 0;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 925, "user_id": 9491208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGGz3NCqHUo/AAAAAAAAAAI/AAAAAAAABtU/QLcpa2IbJMw/photo.jpg?sz=128", "display_name": "Simo", "link": "https://stackoverflow.com/users/9491208/simo"}, "edited": false, "score": 0, "creation_date": 1536078187, "post_id": 52169986, "comment_id": 91291503, "body": "Hello and welcome to SO! Unfortunately this isn&#39;t an answer but a comment, please delete it and post it as a comment!"}, {"owner": {"reputation": 1, "user_id": 8482065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081e74cab99c10e47d37a02f4caf4364?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Sharma", "link": "https://stackoverflow.com/users/8482065/pradeep-sharma"}, "reply_to_user": {"reputation": 925, "user_id": 9491208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGGz3NCqHUo/AAAAAAAAAAI/AAAAAAAABtU/QLcpa2IbJMw/photo.jpg?sz=128", "display_name": "Simo", "link": "https://stackoverflow.com/users/9491208/simo"}, "edited": false, "score": 0, "creation_date": 1559473977, "post_id": 52169986, "comment_id": 99425200, "body": "You&#39;re just skipping the last number , when you are using for loop. Run your for loop for i&lt;20 instead of i&lt;19 because it is skipping the last number while sorting."}], "tags": [], "owner": {"reputation": 1, "user_id": 8482065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081e74cab99c10e47d37a02f4caf4364?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Sharma", "link": "https://stackoverflow.com/users/8482065/pradeep-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1536076057, "creation_date": 1536076057, "answer_id": 52169986, "question_id": 52169744, "link": "https://stackoverflow.com/questions/52169744/bubble-sort-in-c/52169986#52169986", "title": "Bubble-sort in C", "body": "<p>You're just skipping the last number , when you are using for loop. Run your for loop for i&lt;20 instead of i&lt;19 because it is skipping the last number while sorting.</p>\n"}], "owner": {"reputation": 33, "user_id": 9732282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81168477499a0946e732a208fd6de602?s=128&d=identicon&r=PG&f=1", "display_name": "Tea_Cups", "link": "https://stackoverflow.com/users/9732282/tea-cups"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 52169854, "answer_count": 3, "score": 0, "last_activity_date": 1536077272, "creation_date": 1536075092, "last_edit_date": 1536076247, "question_id": 52169744, "link": "https://stackoverflow.com/questions/52169744/bubble-sort-in-c", "title": "Bubble-sort in C", "body": "<p>I am trying to program the Bubble sort sorting algorithm in C for practice and revision, however, I have come across a few issues: I am trying to print every swap after every iteration in the array of 20 random numbers, however, the program seems to get rid of items which are bigger than the item before for some reason. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>int i, j, temp;\nint SortData[20]= {20, 43, 90, 17, 2, 4, 67, 54, 0, 44, 78, 89, 21, 45, 72, \n88, 65, 100, 97, 25};\nfor(i=0; i&lt;20; i++)\n{\n    printf(\"|%d\", SortData[i]);\n}\nprintf(\"|\");\nprintf(\"\\n\");\n\n for (i=0; i&lt;19; i++)\n    {\n        for(j=0;j&lt;18;j++){\n        if(SortData[j]&gt;SortData[j+1])\n        {\n            temp = SortData[j];\n            SortData[j]=SortData[j+1];\n            SortData[j+1]=temp;\n            printf(\"|%d\", SortData[j]);\n        }\n\n    }\n    printf(\"\\n\");\n    }\n    printf(\"\\n\");\nsystem(\"pause\");\nreturn 0;\n</code></pre>\n\n<p>And here is what happens when this code is ran:</p>\n\n<pre><code>|20|43|90|17|2|4|67|54|0|44|78|89|21|45|72|88|65|100|97|25|\n|17|2|4|67|54|0|44|78|89|21|45|72|88|65|97\n|17|2|4|54|0|44|21|45|72|88|65\n|17|2|4|0|44|21|45|72|65\n|2|4|0|21|45|65\n|0|21|45|65\n|0|21|65\n|0|21\n|0\n\nProcess returned 10 (0xA)   execution time : 3.072 s\nPress any key to continue.\n</code></pre>\n\n<p>Moreover, I ran a few tests to check whether there was a bug in the sorting of the array or in the printing of it, here are the results from that test:</p>\n\n<pre><code>int i, j, temp;\nint SortData[20]= {20, 43, 90, 17, 2, 4, 67, 54, 0, 44, 78, 89, 21, 45, 72, \n88, 65, 100, 97, 25};\nfor(i=0; i&lt;20; i++)\n{\n    printf(\"|%d\", SortData[i]);\n}\nprintf(\"|\");\nprintf(\"\\n\");\n\n for (i=0; i&lt;19; i++)\n    {\n        for(j=0;j&lt;18;j++){\n        if(SortData[j]&gt;SortData[j+1])\n        {\n            temp = SortData[j];\n            SortData[j]=SortData[j+1];\n            SortData[j+1]=temp;\n\n        }\n\n    }\n    }\n    for (i=0; i&lt;20; i++){\n        printf(\"|%d\", SortData[i]);//Error here as 25 isn't sorted\n    }\n    printf(\"|\");\n    printf(\"\\n\");\nsystem(\"pause\");\nreturn 0;\n</code></pre>\n\n<p>The only change in this snippet from the above one is that the printing statement comes out of the nested for loop and printed using a separate for loop, this kind of works, as the numbers are sorted, but fro some reason 25 isn't: </p>\n\n<pre><code>|20|43|90|17|2|4|67|54|0|44|78|89|21|45|72|88|65|100|97|25|\n|0|2|4|17|20|21|43|44|45|54|65|67|72|78|88|89|90|97|100|25|\nPress any key to continue . . .\n</code></pre>\n\n<p>So it turns out that there is an issue with the sorting and the printing. \nCould I please have some hints as to how print every iteration of the swap and get it to swap correctly?  </p>\n\n<p>UPDATE:</p>\n\n<p>So I have incremented the loop counters by in the nested for loop and now it sorts out the array and shows every iteration. Here is what the changed code looks like:</p>\n\n<pre><code>int i, j, temp;\nint SortData[20]= {20, 43, 90, 17, 2, 4, 67, 54, 0, 44, 78, 89, 21, 45, 72, 88, 65, 100, 97, 25};\nfor(i=0; i&lt;20; i++)\n{\n    printf(\"|%d\", SortData[i]);\n}\nprintf(\"|\");\nprintf(\"\\n\");\n\n for (i=0; i&lt;20; i++)\n    {\n        for(j=0;j&lt;19;j++){\n        if(SortData[j]&gt;SortData[j+1])\n        {\n            temp = SortData[j];\n            SortData[j]=SortData[j+1];\n            SortData[j+1]=temp;\n\n        }\n            printf(\"|%d\", SortData[j]);//Changed code\n    }\n        printf(\"\\n\");\n    }\n    //for (i=0; i&lt;20; i++){\n      //  printf(\"|%d\", SortData[i]);//Error here as 25 isn't sorted\n    //}\n    printf(\"|\");\n    printf(\"\\n\");\nsystem(\"pause\");\nreturn 0;\n</code></pre>\n\n<p>Now it does show every iteration, and sorts it, but for some reason the number 100 disappears from the array and thus it only sorts 19 items rather than 20:</p>\n\n<pre><code>|20|43|90|17|2|4|67|54|0|44|78|89|21|45|72|88|65|100|97|25|\n|20|43|17|2|4|67|54|0|44|78|89|21|45|72|88|65|90|97|25\n|20|17|2|4|43|54|0|44|67|78|21|45|72|88|65|89|90|25|97\n|17|2|4|20|43|0|44|54|67|21|45|72|78|65|88|89|25|90|97\n|2|4|17|20|0|43|44|54|21|45|67|72|65|78|88|25|89|90|97\n|2|4|17|0|20|43|44|21|45|54|67|65|72|78|25|88|89|90|97\n|2|4|0|17|20|43|21|44|45|54|65|67|72|25|78|88|89|90|97\n|2|0|4|17|20|21|43|44|45|54|65|67|25|72|78|88|89|90|97\n|0|2|4|17|20|21|43|44|45|54|65|25|67|72|78|88|89|90|97\n|0|2|4|17|20|21|43|44|45|54|25|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|43|44|45|25|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|43|44|25|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|43|25|44|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|25|43|44|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|25|43|44|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|25|43|44|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|25|43|44|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|25|43|44|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|25|43|44|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|25|43|44|45|54|65|67|72|78|88|89|90|97\n|0|2|4|17|20|21|25|43|44|45|54|65|67|72|78|88|89|90|97\n|\n\nPress any key to continue . . .\n</code></pre>\n\n<p>Why does 100 disappear?</p>\n"}, {"tags": ["php", "c"], "comments": [{"owner": {"reputation": 1177, "user_id": 4807899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZVdR.jpg?s=128&g=1", "display_name": "wordragon", "link": "https://stackoverflow.com/users/4807899/wordragon"}, "edited": false, "score": 0, "creation_date": 1536807270, "post_id": 52169465, "comment_id": 91559317, "body": "What version of PHP are you using?"}, {"owner": {"reputation": 45452, "user_id": 223992, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c69074600f4d1cdb9c6d78370ab3335?s=128&d=identicon&r=PG", "display_name": "symcbean", "link": "https://stackoverflow.com/users/223992/symcbean"}, "reply_to_user": {"reputation": 1177, "user_id": 4807899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZVdR.jpg?s=128&g=1", "display_name": "wordragon", "link": "https://stackoverflow.com/users/4807899/wordragon"}, "edited": false, "score": 0, "creation_date": 1536859417, "post_id": 52169465, "comment_id": 91584956, "body": "I will probably be implementing this on 7.2 - are you suggesting that the internal API has changed recently? This is not in the documentation I&#39;ve read - can you provide more info?"}], "answers": [{"comments": [{"owner": {"reputation": 45452, "user_id": 223992, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c69074600f4d1cdb9c6d78370ab3335?s=128&d=identicon&r=PG", "display_name": "symcbean", "link": "https://stackoverflow.com/users/223992/symcbean"}, "edited": false, "score": 0, "creation_date": 1537173482, "post_id": 52324314, "comment_id": 91671640, "body": "Up voted as this was really useful - but I&#39;m still looking for a way of logging events which cannot be overridden from the PHP source code."}, {"owner": {"reputation": 1177, "user_id": 4807899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZVdR.jpg?s=128&g=1", "display_name": "wordragon", "link": "https://stackoverflow.com/users/4807899/wordragon"}, "reply_to_user": {"reputation": 45452, "user_id": 223992, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c69074600f4d1cdb9c6d78370ab3335?s=128&d=identicon&r=PG", "display_name": "symcbean", "link": "https://stackoverflow.com/users/223992/symcbean"}, "edited": false, "score": 0, "creation_date": 1537212905, "post_id": 52324314, "comment_id": 91693943, "body": "Why you would want to avoid allowing the PHP app to do custom error handling on your error?"}, {"owner": {"reputation": 45452, "user_id": 223992, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c69074600f4d1cdb9c6d78370ab3335?s=128&d=identicon&r=PG", "display_name": "symcbean", "link": "https://stackoverflow.com/users/223992/symcbean"}, "edited": false, "score": 0, "creation_date": 1537260690, "post_id": 52324314, "comment_id": 91709453, "body": "Because I want to interfere with the code loading process and have a consistent audit trail - if the code replaces set_error_hander() then the behaviour of subsequent include/require will be different from earlier load operations."}, {"owner": {"reputation": 1177, "user_id": 4807899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZVdR.jpg?s=128&g=1", "display_name": "wordragon", "link": "https://stackoverflow.com/users/4807899/wordragon"}, "reply_to_user": {"reputation": 45452, "user_id": 223992, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c69074600f4d1cdb9c6d78370ab3335?s=128&d=identicon&r=PG", "display_name": "symcbean", "link": "https://stackoverflow.com/users/223992/symcbean"}, "edited": false, "score": 1, "creation_date": 1537279684, "post_id": 52324314, "comment_id": 91721610, "body": "Well, its your project, but I think it&#39;s better to use the well established and carefully maintained PHP logging/error structure, and just document (or deal with) the impact of another developer&#39;s interactions.  &quot;caveat coder&quot;  Anyway, best luck either way you go!"}], "tags": [], "owner": {"reputation": 1177, "user_id": 4807899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZVdR.jpg?s=128&g=1", "display_name": "wordragon", "link": "https://stackoverflow.com/users/4807899/wordragon"}, "is_accepted": false, "score": 5, "last_activity_date": 1537159685, "last_edit_date": 1537159685, "creation_date": 1536893247, "answer_id": 52324314, "question_id": 52169465, "link": "https://stackoverflow.com/questions/52169465/php-internals-what-error-logging-function-to-use/52324314#52324314", "title": "PHP internals - what error logging function to use?", "body": "<p>Well, I found this in the <a href=\"https://wiki.php.net/internals/review_comments\" rel=\"nofollow noreferrer\">PHP Wiki</a>.  I think this is old, but I imagine it still applies to Zend3:</p>\n\n<blockquote>\n  <p><strong>Don't use zend_error</strong></p>\n  \n  <p>zend_error() should only be used inside the engine. Inside PHP\n  extensions only PHP's error functions shoudl be used. Typically\n  php_error_docref() is the best choice. php_error_docref() will extend\n  the error message by extra information, like the current function name\n  and properly escape output where needed. zend_error() is used by the\n  Zend Engine due to PHP's modular architecture where the Zend Engine\n  and TSRM should be compilable without other parts of PHP. The engine\n  therefore can not use PHP level APIs. This limitation does not exist\n  in extensions.</p>\n</blockquote>\n\n<p>What this says to me is that zend_error was written for use in the engine and not designed as one of the tools for use in building extensions.  For that reason, you are unlikely to find documentation covering the details you are asking about, and, even if it DOES work reliably for you, it may not continue to do so.</p>\n"}], "owner": {"reputation": 45452, "user_id": 223992, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c69074600f4d1cdb9c6d78370ab3335?s=128&d=identicon&r=PG", "display_name": "symcbean", "link": "https://stackoverflow.com/users/223992/symcbean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 3, "answer_count": 1, "score": 15, "last_activity_date": 1537175481, "creation_date": 1536074200, "last_edit_date": 1536076459, "question_id": 52169465, "link": "https://stackoverflow.com/questions/52169465/php-internals-what-error-logging-function-to-use", "title": "PHP internals - what error logging function to use?", "body": "<p>I'm writing a PHP extension (although its starting to look a lot like a zend extension). There are instances where it needs to write to a logging interface.</p>\n\n<p>I see that zend_error() is being used elsewhere however:</p>\n\n<ul>\n<li><p>reading the source code on github I found zend_error declared in zend/zend.h but I couldn't find the corresponding definition of the function</p></li>\n<li><p>looking at the contexts in which zend_error is used, I suspect that calls will be rerouted/diverted by set_error_handler</p></li>\n</ul>\n\n<p>Normally, the logging will happen in MINIT and MSHUTDOWN (where presumably an error handler defined by a script cannot have any influence) but there may be times in between as well - and I'm looking for some consistency. Hence trying to understand how the mechanism works.</p>\n\n<p>Is it safe to use zend_error() in MINIT/MSHUTDOWN?</p>\n\n<p>How do I ensure that I am always calling the the default error handler?</p>\n"}, {"tags": ["c", "variable-assignment", "multiple-assignment"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 2, "creation_date": 1536073191, "post_id": 52169116, "comment_id": 91288627, "body": "No. The closest it comes is <a href=\"https://stackoverflow.com/questions/19353686/multiple-assignment-in-one-line\">this</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536075107, "post_id": 52169116, "comment_id": 91289880, "body": "Often when a language does not support a feature of interest, it means that the language has other ways to approach the higher level problem. What is the need to  do multiple assignments?"}, {"owner": {"reputation": 23, "user_id": 9963797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b506Q.jpg?s=128&g=1", "display_name": "chtnnh", "link": "https://stackoverflow.com/users/9963797/chtnnh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536075384, "post_id": 52169116, "comment_id": 91290071, "body": "@chux I needed to interchange the values of 3 variables inside the body of my for loop"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536086132, "post_id": 52169116, "comment_id": 91295062, "body": "You can do something like this: <code>void AssignValues(int values[], ... );</code> which would let you implement the first line like this: <code>int vals[]={0,1};AssignValues(vals, a, b);</code> but implementing it would be.... nasty."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1536074252, "last_edit_date": 1536074252, "creation_date": 1536073269, "answer_id": 52169160, "question_id": 52169116, "link": "https://stackoverflow.com/questions/52169116/does-c-support-multiple-assignment-of-the-type-a-b-0-1-like-python-does/52169160#52169160", "title": "Does C support multiple assignment of the type a , b = 0, 1 like python does?", "body": "<p>No C does not support multiple assignments like this.</p>\n\n<p>Compilation passes since <code>a , b = 0 , 1</code> is grouped as <code>a, (b = 0), 1</code>. <code>a</code> and <code>1</code> are no-ops but still valid expressions; the expression is equivalent to</p>\n\n<pre><code>b = 0\n</code></pre>\n\n<p>with <code>a</code> not changed.</p>\n\n<p>Interestingly, you can achieve your desired notation in C++ with some contrivance and a minor change in the syntax.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1536073273, "creation_date": 1536073273, "answer_id": 52169162, "question_id": 52169116, "link": "https://stackoverflow.com/questions/52169116/does-c-support-multiple-assignment-of-the-type-a-b-0-1-like-python-does/52169162#52169162", "title": "Does C support multiple assignment of the type a , b = 0, 1 like python does?", "body": "<p>C does not support list assignments as Python does.  You need to assign to each variable separately:</p>\n\n<pre><code>a = 0; b = 1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 1, "last_activity_date": 1536074021, "creation_date": 1536074021, "answer_id": 52169408, "question_id": 52169116, "link": "https://stackoverflow.com/questions/52169116/does-c-support-multiple-assignment-of-the-type-a-b-0-1-like-python-does/52169408#52169408", "title": "Does C support multiple assignment of the type a , b = 0, 1 like python does?", "body": "<p>No, C does not support multiple-assignment, nor has it language-level support for tuples.</p>\n\n<pre><code>a, b = 0, 1;\n</code></pre>\n\n<p>The above is, considering to <a href=\"https://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a>, equivalent to:</p>\n\n<pre><code>a, (b = 0), 1;\n</code></pre>\n\n<p>Which is equivalent to:</p>\n\n<pre><code>b = 0;\n</code></pre>\n\n<p>See <a href=\"http://coliru.stacked-crooked.com/a/8c7d118f969f4e54\" rel=\"nofollow noreferrer\">live on coliru</a>.</p>\n\n<hr>\n\n<p>The closest C-equivalent to your Python code would be:</p>\n\n<pre><code>a = 0, b = 1;\n</code></pre>\n\n<p>In this case, using the value of an assignment-expression isn't useful.</p>\n"}], "owner": {"reputation": 23, "user_id": 9963797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b506Q.jpg?s=128&g=1", "display_name": "chtnnh", "link": "https://stackoverflow.com/users/9963797/chtnnh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 52169408, "answer_count": 3, "score": 2, "last_activity_date": 1536074252, "creation_date": 1536073118, "question_id": 52169116, "link": "https://stackoverflow.com/questions/52169116/does-c-support-multiple-assignment-of-the-type-a-b-0-1-like-python-does", "title": "Does C support multiple assignment of the type a , b = 0, 1 like python does?", "body": "<pre><code>\"\"\" Sample python code representing multiple assignment \"\"\"\na , b = 0 , 1\nprint a , b\n</code></pre>\n\n<p>The following code gives output :\n0    1\nand obviously does not raise any error. Does C support the same?</p>\n"}, {"tags": ["c", "sorting"], "comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 6, "creation_date": 1536072597, "post_id": 52168801, "comment_id": 91288226, "body": "<code>prog.cc:6:12: warning: variable length arrays are a C99 feature [-Wvla-extension] prog.cc:6:13: warning: variable &#39;n&#39; is uninitialized when used here [-Wuninitialized]</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536072683, "post_id": 52168801, "comment_id": 91288289, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 3, "creation_date": 1536072738, "post_id": 52168801, "comment_id": 91288321, "body": "Welcome to Stackoverflow. The first thing you should do is, fix your program and always listen to your compiler warnings (and notes)! <a href=\"https://stackoverflow.com/questions/2574200/gcc-is-using-werror-and-pedantic-considered-good-practice\">Just enable them</a>. Next thing, <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">try to debug simple programs yourself</a>, it is not that hard and will save you hours of asking ;)"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1536075329, "last_edit_date": 1536075329, "creation_date": 1536073609, "answer_id": 52169271, "question_id": 52168801, "link": "https://stackoverflow.com/questions/52168801/sorting-program-stops-working-without-any-error/52169271#52169271", "title": "Sorting program stops working without any error", "body": "<p>The problem is here:</p>\n\n<pre><code>int n, a[n], i, j, temp;\n</code></pre>\n\n<p>Declarations are done sequentially. If you write this in a slighly more readably (but equivalent form) you'd have this:</p>\n\n<pre><code>int n;\nint a[n];    // here the variable n has not yet been initialized\n             // it contains an indeterminate value, and therefore the a array\n             // will have an indeterminate size and the program will have\n             // so called \"undefined behaviour \" (google that)\nint i;\n...\n</code></pre>\n\n<p>You should write the beginning of your program like this:</p>\n\n<pre><code>int main()\n{\n    int n,i,j,temp;\n    printf(\"Enter number of inputs.\\n\");\n    scanf(\"%d\",&amp;n);\n    int a[n];                  // now n has a determinate value\n    printf(\"Enter inputs\\n\");\n</code></pre>\n\n<p>Disclaimer: no error checking is done for brevity.</p>\n\n<p>Always compile with warnings enabled and listen to them. Many of them are actually errors. Especially the warning <em>variable 'somevar' is uninitialized when used here</em> is always an error.</p>\n"}], "owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 52169271, "answer_count": 1, "score": 0, "last_activity_date": 1536075329, "creation_date": 1536072111, "last_edit_date": 1536072301, "question_id": 52168801, "link": "https://stackoverflow.com/questions/52168801/sorting-program-stops-working-without-any-error", "title": "Sorting program stops working without any error", "body": "<p>I typed the following code to sort the components of an int array. It does not show any error but does stops working abruptly. The error is generally after entering 7-8 inputs which shows that program.exe has stopped working. Does it has anything related to the code ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int n,a[n],i,j,temp;\n    printf(\"Enter number of inputs.\\n\");\n    scanf(\"%d\",&amp;n);\n    printf(\"Enter inputs\\n\");\n    for(i=0;i&lt;n;i++)\n    {\n        scanf(\"%d\",&amp;a[i]);\n    }\n    for(i=0;i&lt;n;i++)\n    {\n        for(j=i+1;j&lt;n;j++)\n        {\n            if(a[i]&lt;a[j])\n            {\n                temp=a[i];\n                a[i]=a[j];\n                a[j]=temp;\n            }\n        }\n    }\n    printf(\"Numbers in descending order are:\\n\");\n    for(i=0;i&lt;n;i++)\n    {\n        printf(\"%d\\n\",a[i]);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "bash", "pipe"], "comments": [{"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1536071526, "post_id": 52168590, "comment_id": 91287422, "body": "Get rid of the <code>wc</code>. What is the output of <code>ls | grep d</code> in the two cases?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1536071534, "post_id": 52168590, "comment_id": 91287432, "body": "ls is often an alias in an interactive shell. What does <code>command ls |grep d | wc</code> do ?"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1536071595, "post_id": 52168590, "comment_id": 91287476, "body": "Is the current working directory the same for your program&#39;s subsystem shell and your terminal shel?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536071701, "post_id": 52168590, "comment_id": 91287583, "body": "What&#39;s the output from <code>\\ls | grep d | wc</code> when typed from the command line?  How about the output from <code>alias | grep ls</code> from the command line?"}, {"owner": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1536071704, "post_id": 52168590, "comment_id": 91287584, "body": "@Cornstalks yes same directory"}, {"owner": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536071761, "post_id": 52168590, "comment_id": 91287636, "body": "@AndrewHenle alias ls=&#39;ls -G&#39; is output of second command and first one gives 3 3 104"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1536073108, "post_id": 52168590, "comment_id": 91288567, "body": "@PSkocik, <code>system()</code> is starting a new copy of <code>sh</code>; it&#39;s not going to be interactive."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "edited": false, "score": 0, "creation_date": 1536072315, "post_id": 52168712, "comment_id": 91288030, "body": "It is 3       3      104. The character count is 53 only. Why 104 from /bin/ls ?"}, {"owner": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "edited": false, "score": 0, "creation_date": 1536072419, "post_id": 52168712, "comment_id": 91288096, "body": "ls is aliased to `ls -G&#39; is output of &quot;type ls&quot;"}], "tags": [], "owner": {"reputation": 16, "user_id": 10315540, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tfKuXL0DQ6U/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMJoywZbPodrtt_er-33xRqUKKivQ/mo/photo.jpg?sz=128", "display_name": "Andreas Kretzer", "link": "https://stackoverflow.com/users/10315540/andreas-kretzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1536071835, "creation_date": 1536071835, "answer_id": 52168712, "question_id": 52168590, "link": "https://stackoverflow.com/questions/52168590/system-command-in-c-giving-wrong-output-with-pipes-of-bash/52168712#52168712", "title": "&quot;System&quot; command in c giving wrong output with pipes of bash", "body": "<p>Check out what your 'ls' command at the bash is! Try:</p>\n\n<blockquote>\n  <p>type ls</p>\n</blockquote>\n\n<p>You probably will find that <code>ls</code> is an alias of some kind.</p>\n\n<p>Check your bash-test again with</p>\n\n<blockquote>\n  <p>/bin/ls | grep d | wc</p>\n</blockquote>\n\n<p>If you then get th esame result as in your C-Code you will know what went wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "edited": false, "score": 0, "creation_date": 1536072161, "post_id": 52168723, "comment_id": 91287923, "body": "The output of  sh -c &#39;ls | grep d | wc&#39;  is same as system(&quot;ls|grep d|wc&quot;) but when I check alias for &#39;ls&#39; in my .bashrc and .bash_profile it is aliased to &quot;ls -G&quot; where G is for colorized output only. I can&#39;t figure out from where exactly this  difference is coming"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "edited": false, "score": 0, "creation_date": 1536072334, "post_id": 52168723, "comment_id": 91288043, "body": "@MeghaAgarwal There&#39;s multiple shell config files. Better try to query your interactive shell directly, with either <code>alias ls</code> or <code>type ls</code> to see what it really is. The other commands may be aliases too. Play with it. Try modifying the pipeline (e.g., remove the |wc part) and see what&#39;s going on. Interaction is what interactive shells rock at."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 0, "last_activity_date": 1536071866, "creation_date": 1536071866, "answer_id": 52168723, "question_id": 52168590, "link": "https://stackoverflow.com/questions/52168590/system-command-in-c-giving-wrong-output-with-pipes-of-bash/52168723#52168723", "title": "&quot;System&quot; command in c giving wrong output with pipes of bash", "body": "<p>ls is often an alias in an interactive shell.\nFor example, in my bash session if I do <code>type ls</code> I get</p>\n\n<pre><code>ls is aliased to `ls -t --group-directories-first  -I .pyc -I __pycache__ -I .git  --color=auto -xF'\n</code></pre>\n\n<p>(The alias usually comes from $<code>HOME/.bashrc</code> or <code>/etc/bash.bashrc</code>).</p>\n\n<p>Now if you do:</p>\n\n<pre><code>sh -c 'ls | grep d | wc'\n</code></pre>\n\n<p>(or <code>command ls| command grep d | command wc</code> ) you should get absolutely the same result as with compiling </p>\n\n<pre><code>int main() { system(\"ls | grep d | wc\"); }\n</code></pre>\n\n<p>and running it in the same directory.</p>\n"}, {"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1536073137, "post_id": 52169032, "comment_id": 91288584, "body": "<code>system()</code> doesn&#39;t start bash, it starts a new noninteractive <code>sh</code> (without any aliases defined) -- or do you mean you were <i>comparing against</i> results from bash?"}, {"owner": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1536076659, "post_id": 52169032, "comment_id": 91290750, "body": "yeah I was comparing against bash result"}], "tags": [], "owner": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "is_accepted": true, "score": 1, "last_activity_date": 1536076522, "last_edit_date": 1536076522, "creation_date": 1536072840, "answer_id": 52169032, "question_id": 52168590, "link": "https://stackoverflow.com/questions/52168590/system-command-in-c-giving-wrong-output-with-pipes-of-bash/52169032#52169032", "title": "&quot;System&quot; command in c giving wrong output with pipes of bash", "body": "<p>Actually I figured out problem wasn't with ls but \"grep --color=always d\" which is alias of grep in my bash. The colored characters have extra length which increase the length of output. </p>\n"}], "owner": {"reputation": 21, "user_id": 10315534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c934fd116cc1a4995dcda81816c7493d?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Agarwal", "link": "https://stackoverflow.com/users/10315534/megha-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 52169032, "answer_count": 3, "score": -1, "last_activity_date": 1548257802, "creation_date": 1536071384, "last_edit_date": 1548257802, "question_id": 52168590, "link": "https://stackoverflow.com/questions/52168590/system-command-in-c-giving-wrong-output-with-pipes-of-bash", "title": "&quot;System&quot; command in c giving wrong output with pipes of bash", "body": "<p>I am trying to understand the internal working of pipes in C. I noticed if I run </p>\n\n<pre><code>int main() { \n    system(\"ls | grep d | wc\");                        \n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3       3      53\n</code></pre>\n\n<p>But on running the same command with bash I get </p>\n\n<pre><code>3       3      104\n</code></pre>\n\n<p>Output of ls | grep d </p>\n\n<p>question_1.pdf\nquestion_2.pdf\nquestion_2_dataset.txt </p>\n\n<p>Can someone explain the cause of this discrepancy?\nThe same thing occurs if I use pipe via <code>pipe()</code> call in C.</p>\n"}, {"tags": ["c", "gcc", "gdb", "elf", "gdbserver"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536071376, "post_id": 52168226, "comment_id": 91287329, "body": "are all the sources in the same directory, which <code>gdb</code> can &#39;see&#39;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1536071518, "post_id": 52168226, "comment_id": 91287413, "body": "There will be a setting in the debugger somewhere &quot;freeze/halt processor while single stepping&quot;. Freescale tools have a tendency to keep interrupts running while you are stepping with the debugger. Also, ensure that the watchdog isn&#39;t enabled."}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536071573, "post_id": 52168226, "comment_id": 91287462, "body": "@Lundin if any of those were the problem, it would affect debugging in all files?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536071646, "post_id": 52168226, "comment_id": 91287534, "body": "Yeah probably. Hmm... disable optimizations?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1536072292, "post_id": 52168226, "comment_id": 91288008, "body": "<code>-g3</code> - you probably do not generate the debug information"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536072808, "post_id": 52168226, "comment_id": 91288377, "body": "@P__J__ <code>g3</code> is the most debugging info. And I can single-step in other files as I stated in my post . . . and I can set breakpoints as I stated in my post."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536073908, "post_id": 52168226, "comment_id": 91289083, "body": "So maybe there is no generated code tberem"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536074607, "post_id": 52168226, "comment_id": 91289535, "body": "@P__J__ I can put a breakpoint and it works. How could there be no generated code?"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536074661, "post_id": 52168226, "comment_id": 91289571, "body": "@Lundin talked to PEMicro support and they don&#39;t have such a function available either GUI nor script. I have to manually toggle the bit that disables interrupts."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536077063, "post_id": 52168226, "comment_id": 91290932, "body": "You have strange symptoms so I  ask basic questions. I afraid only you can answer your question as it requires access to your computer"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536220530, "post_id": 52168226, "comment_id": 91347296, "body": "Show the <i>exact</i> compilation command in your question"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 6122122, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1OXZ3.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6122122/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1536220869, "last_edit_date": 1536220869, "creation_date": 1536220259, "answer_id": 52199091, "question_id": 52168226, "link": "https://stackoverflow.com/questions/52168226/cannot-single-step-source-but-assembly-single-step-and-breakpoints-work-ok/52199091#52199091", "title": "cannot single-step source but assembly single-step and breakpoints work ok", "body": "<p>You could provide some more information and what you tried so far. For example, what is the difference in those object files? Are it always the same? Do they have specific dependencies to non-user-code or are they non-user-code? What are you debugger-options? Based on that, I can just give basic advice:</p>\n\n<p>-Check the correctness of your symbol file configuration / that they are in sync with the binary and loaded correctly.</p>\n\n<p>-Be sure that there are no changes to the source code after compilation, so the IDE cannot falsely shows code that does not exist in you latest compilation (which is not debuggable).</p>\n\n<p>-Consider to deactivate options like JustMyCode - depending on your environment (<a href=\"https://docs.microsoft.com/de-de/visualstudio/debugger/just-my-code?view=vs-2017\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/de-de/visualstudio/debugger/just-my-code?view=vs-2017</a>)</p>\n\n<p>-Check your debugger options</p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536220869, "creation_date": 1536070153, "question_id": 52168226, "link": "https://stackoverflow.com/questions/52168226/cannot-single-step-source-but-assembly-single-step-and-breakpoints-work-ok", "title": "cannot single-step source but assembly single-step and breakpoints work ok", "body": "<p>I have a C application running on embedded ARM M4; it works correctly.</p>\n\n<p>I use Kinetis Design Studio, which uses <code>gdb</code>, as my debugger on Windows.</p>\n\n<p>For most of my <code>.obj</code>, I can single-step the C source. However, for a few files, although I can use breakpoints, single-stepping the C source doesn't work: pressing <code>Single-step</code> causes debugger to act as if I pressed <code>Run</code> but the app is definitely not running.</p>\n\n<p>But single-stepping the assembly, same <code>.obj</code> files, works correctly.</p>\n\n<p>I use the same compile options for all <code>.c</code></p>\n\n<p><code>-x c -Wall -Werror -std=c99 -nostdlib -mthumb  -mtune=cortex-m4 -mlittle-endian  -Wdouble-promotion -DNDEBUG -fdata-sections -ffunction-sections -c -save-temps=obj -g3 -gdwarf-2</code></p>\n\n<p><strong>QUESTION</strong></p>\n\n<p>For some <code>.obj</code>, why do the breakpoints and assembly single-step work but not the source single-step?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1536069631, "post_id": 52168025, "comment_id": 91286111, "body": "Read about format specifiers."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1536069783, "post_id": 52168025, "comment_id": 91286219, "body": "You can easily figure out whether it&#39;s ascii by running the program multiple times with different inputs"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1536070962, "post_id": 52168025, "comment_id": 91287035, "body": "Try `int b = &#39;a&#39; and see what you get."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1536072940, "post_id": 52168025, "comment_id": 91288476, "body": "Tip: Text as only a <a href=\"https://i.stack.imgur.com/QNaJ6.jpg\" rel=\"nofollow noreferrer\">picture</a> attracts down votes. Test posted as text is more useful."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536074016, "post_id": 52168025, "comment_id": 91289147, "body": "Tip 2: Better to post true output rather than <i>almost true</i> output.  It is little things like where is <code>&quot;--------------------------------&quot;</code> in code and <code>&quot;The 1st outpit&quot;</code> of code vs. <code>&quot;The 1st output&quot;</code> (<code>i</code> vs <code>u</code>) that hint to the unfaithfulness of a post and create unneeded confusion.  Best to cut and paste code,input, output, error messages, etc.."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1536070826, "post_id": 52168211, "comment_id": 91286921, "body": "C in no way promises to use an ASCII-compatible character encoding for the execution character set.  Nor does the page you linked say otherwise.  It is <i>common</i> for an ASCII-compatible encoding to be used, but it is not a default. And ASCII itself is never used <i>per se</i>, because ASCII is a 7-bit code and C <code>char</code>s are minimum 8 bits wide."}], "tags": [], "owner": {"reputation": 1, "user_id": 10315377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea73c239fd004ee3f78eee12abc2c9f6?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan T", "link": "https://stackoverflow.com/users/10315377/mohan-t"}, "is_accepted": false, "score": -2, "last_activity_date": 1536070113, "creation_date": 1536070113, "answer_id": 52168211, "question_id": 52168025, "link": "https://stackoverflow.com/questions/52168025/how-is-the-value-character-converted-into-integer/52168211#52168211", "title": "How is the value character converted into integer?", "body": "<p>As per your output ,you can find that when you print your integer value with %d format specifier,it prints as of your same integer value.But when you print it with %c format specifier your answer would be the ASCII character of the passed integer value.By default C compiler stores your character data in the form ASCII values.So it is the way you interpret your integer either as a character or an integer.For more details Visit <a href=\"https://www.eskimo.com/~scs/cclass/notes/sx6a.html\" rel=\"nofollow noreferrer\">https://www.eskimo.com/~scs/cclass/notes/sx6a.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": false, "score": 0, "last_activity_date": 1536072022, "creation_date": 1536072022, "answer_id": 52168774, "question_id": 52168025, "link": "https://stackoverflow.com/questions/52168025/how-is-the-value-character-converted-into-integer/52168774#52168774", "title": "How is the value character converted into integer?", "body": "<p>Where as in the char data type value in C is implicitly convertible to an int data type for the following example,</p>\n\n<pre><code>char a = 'd'; \nprintf(\"%d\", a) \n</code></pre>\n\n<p>prints the decimal ASCII value of d that is 100.</p>\n\n<hr>\n\n<p>When I ran your above code,</p>\n\n<p>I just entered 100 that is d</p>\n\n<pre><code>$./a.out\n\nPlease enter a number between 97 and 121:100\n\nThe 1st outpit is: d &lt;= a\nThe 2nd output is: d &lt;= a++ (post increment, d-&gt;e)\nThe 3rd output is e  &lt;= a-- (decrement e-&gt;d)\nThe 4th output is 100 &lt;= ASCII value of d.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1536072147, "creation_date": 1536072147, "answer_id": 52168811, "question_id": 52168025, "link": "https://stackoverflow.com/questions/52168025/how-is-the-value-character-converted-into-integer/52168811#52168811", "title": "How is the value character converted into integer?", "body": "<blockquote>\n  <p>What is the logic behind this output. How is an integer converted into character?</p>\n</blockquote>\n\n<p>Contextually, you are asking how an integer is converted into a character <em>by <code>printf</code></em>.  <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.21.6.1p8\" rel=\"nofollow noreferrer\">The specifications for <code>printf</code></a> have this to say about the <code>%c</code> conversion specifier:</p>\n\n<blockquote>\n  <p>If no l length modifier is present, the int argument is converted to\n  an unsigned char, and the resulting character is written.</p>\n</blockquote>\n\n<p>The term \"converted\" there is talking about a <em>numeric</em> conversion, and since the target type is unsigned, the result is the original value if it is representable by the target type (as it is in your example).  If it were not representable as an <code>unsigned char</code>, then the result would be reduced modulo one more than the maximum representable <code>unsigned char</code> value.</p>\n\n<p>But really, the thrust of the question seems to be how that number is mapped to a character.  In fact, C does not specify.  This is the question of the \"execution character set\", and C is fairly lax about that.  In practice, the execution character set is often a superset of ASCII, such as UTF-8-encoded Unicode or one of the ISO-8859 character sets, but it does not have to be.  It may even vary at runtime depending on the execution environment.</p>\n\n<p>In your particular run, the output is consistent with an ASCII-compatible execution character set being in use, and that is almost certainly the case, but you could only tell <em>for sure</em> by verifying that the output matches ASCII for all code points mapped by ASCII (0 - 127, inclusive).</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1536072486, "creation_date": 1536072486, "answer_id": 52168916, "question_id": 52168025, "link": "https://stackoverflow.com/questions/52168025/how-is-the-value-character-converted-into-integer/52168916#52168916", "title": "How is the value character converted into integer?", "body": "<blockquote>\n  <p>How is an integer converted into character?</p>\n</blockquote>\n\n<p>Let us look at <code>\"%d\"</code> first.</p>\n\n<pre><code>printf(\"\\nThe 4th output is %d\", a);\n</code></pre>\n\n<p><code>a</code> has the value of 97 at this point.  As <code>printf()</code> sees a <code>\"%d\"</code>, it expects to see an <code>int</code> as the next argument - which it is - good.  The <em>value</em> of 97 causes 2 characters to print: <code>'9'</code> and <code>'7'</code>.</p>\n\n<blockquote>\n  <p>fprintf c<br>\n   The <code>int</code> argument is converted to signed decimal in the style [\u2212]dddd..<br>\n  C11dr \u00a77.21.6.1 8</p>\n</blockquote>\n\n<hr>\n\n<p>Now <code>\"%c\"</code>.</p>\n\n<pre><code>printf(\"\\nThe 1st outpit is: %c\", a);\n</code></pre>\n\n<p><code>a</code> has the value of 97 at this point.  As <code>printf()</code> sees a <code>\"%c\"</code>, it expects to see an <code>int</code> as the next argument - which it is - good.  Then the <code>int</code> value is converted to <code>unsigned char</code>, which is still value 97. Then the character corresponding to 97 is \"printed\".  This correspondence is overwhelming though  <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">ASCII</a> for the values 0-127 and so a character 'a' is seen.</p>\n\n<blockquote>\n  <p>..., the <code>int</code> argument is converted to an <code>unsigned char</code>, and the resulting character is written.  </p>\n</blockquote>\n"}], "owner": {"reputation": 17, "user_id": 10049550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DIw0k.jpg?s=128&g=1", "display_name": "Mr. Punjab", "link": "https://stackoverflow.com/users/10049550/mr-punjab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 52168916, "answer_count": 4, "score": -7, "last_activity_date": 1536073215, "creation_date": 1536069488, "last_edit_date": 1536073215, "question_id": 52168025, "link": "https://stackoverflow.com/questions/52168025/how-is-the-value-character-converted-into-integer", "title": "How is the value character converted into integer?", "body": "<p>Below is a source code of the program, and if the input is 97, the output is </p>\n\n<pre><code>Please enter a number between 97 and 121:97\n\nThe 1st output is: a\nThe 2nd output is: a\nThe 3rd output is b\nThe 4th output is 97\n--------------------------------\n</code></pre>\n\n<p>What is the logic behind this output? How is an integer converted into character? is it <a href=\"https://en.cppreference.com/w/cpp/language/ascii\" rel=\"nofollow noreferrer\">ASCII Chart</a>? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\nint main () \n{\n    int a;\n    printf(\"\\n%s enter a number between 97 and 121:\" , \"Please\");\n    scanf(\"%d\", &amp;a);\n    printf(\"\\nThe 1st outpit is: %c\", a);\n    printf(\"\\nThe 2nd output is: %c\" ,a++);\n    printf(\"\\nThe 3rd output is %c\", a--);\n    printf(\"\\nThe 4th output is %d\", a);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "regex", "posix"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6406478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207784423141749/picture?type=large", "display_name": "Yonatan Amir", "link": "https://stackoverflow.com/users/6406478/yonatan-amir"}, "edited": false, "score": 0, "creation_date": 1536071754, "post_id": 52168157, "comment_id": 91287628, "body": "thanks dude, i have one more Q, i am reading this data from file but when i am trying to read i get no match.how can i check if there is any other invisible characters ?"}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 65, "user_id": 6406478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207784423141749/picture?type=large", "display_name": "Yonatan Amir", "link": "https://stackoverflow.com/users/6406478/yonatan-amir"}, "edited": false, "score": 0, "creation_date": 1536072096, "post_id": 52168157, "comment_id": 91287869, "body": "@YonatanAmir I am really certain this is not related to the regex. Please <a href=\"https://stackoverflow.com/questions/16372615/reading-unicode-file-in-c\">check how to read Unicode files in C</a>. It might be related to BOM. Make sure you do not  keep it when passing the contents to the regex engine."}, {"owner": {"reputation": 65, "user_id": 6406478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207784423141749/picture?type=large", "display_name": "Yonatan Amir", "link": "https://stackoverflow.com/users/6406478/yonatan-amir"}, "edited": false, "score": 0, "creation_date": 1536072316, "post_id": 52168157, "comment_id": 91288031, "body": "sorry for the spam it was &#39;\\n&#39;"}], "tags": [], "owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1536069929, "creation_date": 1536069929, "answer_id": 52168157, "question_id": 52168017, "link": "https://stackoverflow.com/questions/52168017/regular-expression-doesnt-work-while-execute-in-c/52168157#52168157", "title": "regular expression doesnt work while execute in c", "body": "<p>Your pattern contains a <code>$</code> anchor, capturing groups with <code>(...)</code> and the interval quantifier <code>{m,n}</code>, so you need to pass <code>REG_EXTENDED</code> to the regex compile method:</p>\n\n<pre><code>regex_t regex;\nint reti;\nreti = regcomp(&amp;regex, \"([0-9a-fA-F]{8}( |$))+$\", REG_EXTENDED); // &lt;-- See here\nif (reti) \n{\n    fprintf(stderr, \"Could not compile regex\\n\");\n    exit(1);\n}\n\nreti = regexec(&amp;regex, \"00001206 ffffff00 00200800 00001044\", 0, NULL, 0);\nif (!reti) \n{\n    printf(\"Match\");\n}\nelse if (reti == REG_NOMATCH) {\n    printf(\"No match bla bla\\n\");\n}  \n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/HQHzJy\" rel=\"nofollow noreferrer\">online C demo</a> printing <code>Match</code>.</p>\n\n<p>However, I believe you need to match the entire string, and disallow whitespace at the end, so probably</p>\n\n<pre><code>reti = regcomp(&amp;regex, \"^[0-9a-fA-F]{8}( [0-9a-fA-F]{8})*$\", REG_EXTENDED);\n</code></pre>\n\n<p>will be more precise as it will not allow any arbitrary text in front and won't allow a trailing space.</p>\n"}], "owner": {"reputation": 65, "user_id": 6406478, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207784423141749/picture?type=large", "display_name": "Yonatan Amir", "link": "https://stackoverflow.com/users/6406478/yonatan-amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 52168157, "answer_count": 1, "score": 2, "last_activity_date": 1536069929, "creation_date": 1536069469, "question_id": 52168017, "link": "https://stackoverflow.com/questions/52168017/regular-expression-doesnt-work-while-execute-in-c", "title": "regular expression doesnt work while execute in c", "body": "<p>i am trying to build regular expression with the regex.h  lib.</p>\n\n<p>i checked my expression in <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> with the the input\n\"00001206 ffffff00 00200800 00001044\" and  i checked it in python as well, both gave me the expected result.\nwhen i ran the code below in c (over unix) i got \"no match\" print.\nany one have any suggest? </p>\n\n<pre><code>regex_t regex;\nint reti;\nreti = regcomp(&amp;regex, \"([0-9a-fA-F]{8}( |$))+$\", 0);\nif (reti) \n{\n    fprintf(stderr, \"Could not compile regex\\n\");\n    exit(1);\n}\n\nreti = regexec(&amp;regex, \"00001206 ffffff00 00200800 00001044\", 0, NULL, 0);\nif (!reti) \n{\n     printf(\"Match\");\n }\n  else if (reti == REG_NOMATCH) {\n  printf(\"No match bla bla\\n\");\n   }  \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 3, "creation_date": 1536069296, "post_id": 52167904, "comment_id": 91285883, "body": "<code>i % 0xFF</code> will produce values from <code>0</code> to <code>254</code> inclusive.  <code>0xFF</code> is hexadecimal for <code>255</code>.  <code>%</code> is the modulus operator."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536069824, "post_id": 52167904, "comment_id": 91286244, "body": "Be carefull as the quality of the code taken from internet is very often low. Do not learn the language from the internet examples."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1536070454, "post_id": 52167904, "comment_id": 91286655, "body": "Probably it is just a bug and it should be <code>i % 0x100</code> instead. Though if you don&#39;t know what <code>%</code> does in C, it is time to read a book."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536070550, "post_id": 52167904, "comment_id": 91286723, "body": "I wonder if this is why my iPhone4 doesn&#39;t work in my wife&#39;s Porsche?"}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1536070654, "post_id": 52167904, "comment_id": 91286807, "body": "I know what % operator is! but I was confused because sometimes it is used like this: %.2f but it was not the case..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1536070712, "post_id": 52167904, "comment_id": 91286846, "body": "@MrKovalKoval: In the %.2f context, % is not acting as an operator, it&#39;s in a quoted string. It&#39;s little more than a convention used by the printf type functions."}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536070768, "post_id": 52167904, "comment_id": 91286879, "body": "@P__J__ yes I know we should be carefull, but in this case the code is right! there is no problem here!"}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536070822, "post_id": 52167904, "comment_id": 91286913, "body": "@Bathsheba Yes, but I was confused with that case"}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1536069563, "post_id": 52168006, "comment_id": 91286067, "body": "8 bytes -&gt; 8 bits."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536069626, "post_id": 52168006, "comment_id": 91286107, "body": "@Bathsheba :} phone spell checker"}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1536069824, "post_id": 52168006, "comment_id": 91286245, "body": "oh, nice! you answered my question! I didnt realise that it was % operator. +1 for you! (but someone downvoted so I cant +1)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 1, "creation_date": 1536070045, "post_id": 52168006, "comment_id": 91286381, "body": "@MrKovalKoval I&#39;ve just upvoted you; you&#39;re &gt;= 15 Get in quick!"}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1536071165, "post_id": 52168006, "comment_id": 91287188, "body": "@P__J__ Do you want to edit your answer so I accept it? because it is not wrong!"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 4, "last_activity_date": 1536072051, "last_edit_date": 1536072051, "creation_date": 1536069431, "answer_id": 52168006, "question_id": 52167904, "link": "https://stackoverflow.com/questions/52167904/what-is-the-result-of-i0xff/52168006#52168006", "title": "What is the result of &quot;i%0xff&quot;?", "body": "<p>This code is actually probably wrong. </p>\n\n<p>Probably the author meant <code>i &amp; 0xff</code> or <code>i % 0x100</code> as i % 0xff` does not make too much sense in this scope.</p>\n\n<p>He wanted to save only the lowest 8 bits of the data.</p>\n\n<p>The module <code>%</code> operation returns the remainder from the integer division.</p>\n\n<p>Assuming <code>x</code> and <code>y</code> are integers</p>\n\n<pre><code>x % y = x - y * (x / y) \n</code></pre>\n\n<h1>EDIT</h1>\n\n<pre><code>for (int i = 0; i &lt; sizeof(notify_data); ++i) {\n    notify_data[i] = i%0xff;\n}\n</code></pre>\n\n<p>This code has a very low quality. \nThe issues:</p>\n\n<ol>\n<li><p><code>i</code> has to be <code>size_t</code> not <code>int</code></p></li>\n<li><p><code>sizeof(notify_data)</code> it one of the most common beginner errors, as sizeof does not give the runtime size of the object. It is evaluated the compile time and as we see here on SO many beginners think that it works like <code>strlen</code> or returns the size of malloced memory block</p></li>\n</ol>\n\n<p>example:</p>\n\n<pre><code>char x[100];\nchar y[200];\n\nvoid printsizes(char x[])\n{\n     printf(\"sizeof(x) = %zu, sizeof(y) = %zu\\n\", sizeof(x), sizeof(y));\n}\n\n\nint main(void)\n{\n     printsizes(x);\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>wrong <code>%</code> use.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1536070091, "post_id": 52168168, "comment_id": 91286417, "body": "&quot;It keeps only the last byte of the i.&quot; That would be the case if it went to 255 instead of 254 (which, as the other answer already points out, was probably the <i>intent</i>, but not what the code actually does). As-is it&#39;ll turn 255 (whose last byte is 255) into 0, 256 (whose last byte is 0) into 1, etc."}], "tags": [], "owner": {"reputation": 1, "user_id": 10313549, "user_type": "registered", "profile_image": "https://graph.facebook.com/2083864018303987/picture?type=large", "display_name": "Andras Fancsali", "link": "https://stackoverflow.com/users/10313549/andras-fancsali"}, "is_accepted": false, "score": -2, "last_activity_date": 1536070336, "last_edit_date": 1536070336, "creation_date": 1536069957, "answer_id": 52168168, "question_id": 52167904, "link": "https://stackoverflow.com/questions/52167904/what-is-the-result-of-i0xff/52168168#52168168", "title": "What is the result of &quot;i%0xff&quot;?", "body": "<p>Fills up the array with values from 0 to 0xff. If the array is larger than 0xff elements, it starts over again from 0.\nWill be something like: {0, 1, ... , 254, 0, 1, .. 254, 0, 1,...} and so on.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1536070653, "post_id": 52168225, "comment_id": 91286806, "body": "Off by 1 &quot;i up to 255&quot; should be &quot;i up to 254&quot;.  Further, it is not so much a &quot;protections in order to not overflow the 16 bit value&quot;.  It might be a &quot;protections in order to not overflow the 8 bit value&quot;, but it does a questionable job at that."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536070826, "post_id": 52168225, "comment_id": 91286920, "body": "The result of <code>i%0xff</code> (<code>int % int</code>) is -254 to 254, depending on <code>i</code>.  Never 255."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1536070844, "post_id": 52168225, "comment_id": 91286934, "body": "Protection not to overflow a 16 bit value should be properly written as <code>value &amp; 0xFFFF</code>. Everything else is obfuscation."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1536070880, "post_id": 52168225, "comment_id": 91286964, "body": "An unsigned 8-bit integer can store values from 0 to 255 inclusive. So if you want to keep a value in the 8-bit range, you should wrap around after 255 (which you&#39;d accomplish with <code>% 0x100</code> or <code>&amp; 0xFF</code> as per P__J__&#39;s answer), not after 254 (which <code>% 0xFF</code> does)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1536070975, "post_id": 52168225, "comment_id": 91287049, "body": "&quot;0xff (254)&quot; is unclear.  0xff is 255.  0xfe is 254."}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1536071078, "post_id": 52168225, "comment_id": 91287126, "body": "ok, you are so smart guys! see every point! congratulations! you were right, I was wrong, answer edited! (was just distracted while writing)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 1, "creation_date": 1536071173, "post_id": 52168225, "comment_id": 91287197, "body": "@sepp2k Note: <code>some_int % 0x100</code> range is <code>[-255 ... 255]</code>.  The negative values not likely an issue with <code>int i = 0; i &lt; sizeof(notify_data); ++i</code>."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1536071556, "post_id": 52168225, "comment_id": 91287446, "body": "&#39;makes the array data equal to i up to &quot;8 bit max value&quot;&#39; No, it doesn&#39;t. That&#39;s what people keep trying to tell you. It makes it equal up to &quot;8 bit max value <i>minus one</i>&quot;. That&#39;s why people keep saying that the code is wrong because the &quot;minus one&quot; was almost certainly not intended."}], "tags": [], "owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "is_accepted": false, "score": -1, "last_activity_date": 1536071273, "last_edit_date": 1536071273, "creation_date": 1536070153, "answer_id": 52168225, "question_id": 52167904, "link": "https://stackoverflow.com/questions/52167904/what-is-the-result-of-i0xff/52168225#52168225", "title": "What is the result of &quot;i%0xff&quot;?", "body": "<p>Since % is the operator that returns the remainder from the integer division.\nIt means that this code is right! \nAnd makes the array data equal to i up to \"8 bit max value\" and then repeat the cycle.\nIt is just a protections in order to not overflow the 8 bit value!</p>\n\n<p>Thank you guys ;) </p>\n"}], "owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 52168006, "answer_count": 3, "score": -4, "last_activity_date": 1536072051, "creation_date": 1536069062, "question_id": 52167904, "link": "https://stackoverflow.com/questions/52167904/what-is-the-result-of-i0xff", "title": "What is the result of &quot;i%0xff&quot;?", "body": "<p>So I found this in some bluetooth code and I would like to know what it does.</p>\n\n<pre><code>for (int i = 0; i &lt; sizeof(notify_data); ++i) {\n    notify_data[i] = i%0xff;\n}\n</code></pre>\n\n<p>The result is 0x{00 01 02 03 04 ...} but how and why?</p>\n"}, {"tags": ["c", "usb", "uvc", "usb-descriptor"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1536067163, "post_id": 52167215, "comment_id": 91284359, "body": "This is a bit off-topic, but <a href=\"https://community.cypress.com/thread/11619?start=0&amp;tstart=0\" rel=\"nofollow noreferrer\">here&#39;s an example of a composite device that might help</a>."}, {"owner": {"reputation": 29, "user_id": 6532092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54473de9a918a799d876bc7db76f1189?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/6532092/ajay"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1536124319, "post_id": 52167215, "comment_id": 91305027, "body": "@unwind Thanks for the help. What i really need is an approach to write these descriptors. I have seen examples of the UVC + UART projects in CX3, but editing and merging to my custom projects is producing too many errors."}], "owner": {"reputation": 29, "user_id": 6532092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54473de9a918a799d876bc7db76f1189?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/6532092/ajay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536066878, "creation_date": 1536066878, "question_id": 52167215, "link": "https://stackoverflow.com/questions/52167215/writing-custom-usb-descriptors", "title": "Writing Custom USB descriptors", "body": "<p>I am working on a CX3 chip from cypress which has a USB 3.0 connectivity. I need to enumerate the USB to work as a UVC class(video class) and as a serial port simultaneously.</p>\n\n<p>I have seen the USB documents related to the same but those don't clearly explain about how to write one.</p>\n\n<p>The CX3 SDK provides help to generate the USB descriptors for a UVC class but that doesn't give info about how to add the COM port features into it.</p>\n\n<p>So my query is how do you write the descriptor for the same.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1536064951, "post_id": 52166615, "comment_id": 91282832, "body": "And what exactly is the problem?"}, {"owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1536065021, "post_id": 52166615, "comment_id": 91282878, "body": "It doesn&#39;t print to my CSV at all"}, {"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "edited": false, "score": 1, "creation_date": 1536065095, "post_id": 52166615, "comment_id": 91282933, "body": "So, you have a problem with the algorithem ? Or with writing to CSV file ?"}, {"owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "edited": false, "score": 0, "creation_date": 1536065224, "post_id": 52166615, "comment_id": 91283046, "body": "The algorithm, writing to the CSV file in other functions is fine."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 1, "creation_date": 1536065307, "post_id": 52166615, "comment_id": 91283091, "body": "You said &quot;it doesn&#39;t print to my CSV at all&quot;, then &quot;writing to the CSV file in other functions is fine&quot;. I assume then that your problem is <b>not</b> with the algorithm, but with writing to the CSV file within that specific function, which you call &quot;the algorithm&quot;. Am I correct?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1536065332, "post_id": 52166615, "comment_id": 91283101, "body": "I suggest you do some <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">rubber duck debugging</a> on your loop. How often do you assign to <code>head</code> in the loop? And what happens if <code>head</code> becomes a null pointer and you then calculate the value for <code>calc</code>?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 5, "creation_date": 1536065448, "post_id": 52166615, "comment_id": 91283163, "body": "You skip values. Remove this line from inside the <code>if</code> block:  <code>head = head-&gt; next;</code>"}, {"owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1536065575, "post_id": 52166615, "comment_id": 91283245, "body": "I&#39;m getting process terminated with status -1073741819. Alright I&#39;ll try that @KlasLindb&#228;ck"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536065714, "post_id": 52166615, "comment_id": 91283336, "body": "You have <code>head = head-&gt;next;</code> twice, this is plain  wrong."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536065809, "post_id": 52166615, "comment_id": 91283392, "body": "Maybe you should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with an example of input and expected output."}, {"owner": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "edited": false, "score": 0, "creation_date": 1536065861, "post_id": 52166615, "comment_id": 91283434, "body": "A simple <code>for()</code> loop instead of the <code>while()</code> loop could simplify the logic. (and make the error more visible)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1536065992, "post_id": 52166615, "comment_id": 91283535, "body": "That final <code>calc = fabs(head-&gt;data - x);</code> will give you UB when you&#39;ve reached the end of the list. It should be at the start of the loop&#39;s body."}, {"owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1536066146, "post_id": 52166615, "comment_id": 91283629, "body": "That was it @unwind"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "edited": false, "score": 0, "creation_date": 1536066214, "post_id": 52166923, "comment_id": 91283673, "body": "Just add calc = fabs(head-&gt;data - x); above the if loop and that&#39;s the answer."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1536066385, "last_edit_date": 1536066385, "creation_date": 1536065918, "answer_id": 52166923, "question_id": 52166615, "link": "https://stackoverflow.com/questions/52166615/searching-through-a-linked-list-for-value-closest-to-a-set-value/52166923#52166923", "title": "Searching through a linked list for value closest to a set value", "body": "<p>You must make sure the file is opened correctly and once the algorithm is done the file is closed. You also advance your list twice, once if the <code>if</code> is true, and again after the if-block.</p>\n\n<pre><code>void example(void)\n{\n    FILE *fp;\n    if (!(fp=fopen(myfile.csv\", \"w\")) return(0);\n    search(head, 123.0, fp);\n    fclose(fp);\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>    while (head != NULL)\n    {\n        double calc = fabs(head-&gt;data - x);\n        if (calc &lt;= temp) {\n            fprintf(fp, \"%.6f,\", head-&gt;data);\n            temp = calc;\n            //head = head-&gt; next;  // remove this line\n        }\n        head = head-&gt;next;\n    }\n</code></pre>\n\n<p>As molbdnilo points out in his answer, after advancing head it could have become null and the calculation should be moved to the top of the loop. (I have added that to make this answer correct.)</p>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 3, "last_activity_date": 1536066193, "creation_date": 1536066193, "answer_id": 52166998, "question_id": 52166615, "link": "https://stackoverflow.com/questions/52166615/searching-through-a-linked-list-for-value-closest-to-a-set-value/52166998#52166998", "title": "Searching through a linked list for value closest to a set value", "body": "<p>You're skipping over nodes and computing values without checking for null pointers.</p>\n\n<p>Here's your code with a comment in every place where <code>head</code> could be null and it would be a problem:</p>\n\n<pre><code>void search(struct Node* head, double x, FILE* fp) {\n\n    double temp = 99999; \n    // head could be null here...\n    double calc = fabs(head-&gt;data - x);\n\n    while (head != NULL)\n    {\n        if (calc &lt;= temp) {\n            fprintf(fp, \"%.6f,\", head-&gt;data);\n            temp = calc;\n            head = head-&gt; next;\n        }\n        // head could also be null here, because of the conditional above...\n        head = head-&gt;next;\n        // and head could also be null here, because of the line above.\n        calc = fabs(head-&gt;data - x);\n    }\n}\n</code></pre>\n\n<p>Instead, start at the beginning and as long as <code>head</code> isn't null:</p>\n\n<ul>\n<li>Compute the difference between <code>head</code>'s value and <code>x</code></li>\n<li>If it's smaller than your previous value, print it and save it for later</li>\n<li>Continue to the next node</li>\n</ul>\n\n<p>In C:</p>\n\n<pre><code>void search(struct Node* head, double x, FILE* fp) {\n    double temp = 99999; \n    while (head != NULL)\n    {\n        double calc = fabs(head-&gt;data - x);\n        if (calc &lt;= temp) {\n            fprintf(fp, \"%.6f,\", head-&gt;data);\n            temp = calc;\n        }\n        head = head-&gt;next;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9510604, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1ev7YlQVgZA/AAAAAAAAAAI/AAAAAAAAAE8/N7JogbCXRbY/photo.jpg?sz=128", "display_name": "tobytobias", "link": "https://stackoverflow.com/users/9510604/tobytobias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 52166998, "answer_count": 2, "score": 0, "last_activity_date": 1536066385, "creation_date": 1536064868, "last_edit_date": 1536065594, "question_id": 52166615, "link": "https://stackoverflow.com/questions/52166615/searching-through-a-linked-list-for-value-closest-to-a-set-value", "title": "Searching through a linked list for value closest to a set value", "body": "<p>So I have a function that searches a linked list, and finds the value closest to a number within the linked list. During this process it should print every value it finds that's the new closest value. </p>\n\n<pre><code>void search(struct Node* head, double x, FILE* fp) {\n\n    double temp = 99999; \n    double calc = fabs(head-&gt;data - x);\n\n    while (head != NULL)\n    {\n        if (calc &lt;= temp) {\n            fprintf(fp, \"%.6f,\", head-&gt;data);\n            temp = calc;\n            head = head-&gt; next;\n        }\n        head = head-&gt;next;\n        calc = fabs(head-&gt;data - x);\n    }\n}\n</code></pre>\n\n<p>Linked list node structure: </p>\n\n<pre><code>struct Node\n{\n  double data;\n  struct Node *next;\n};\n</code></pre>\n\n<p><code>double x</code> is just the value I'm looking for and <code>FILE * fp</code> is the CSV file I'm writing to.</p>\n\n<p>It won't print anything to the CSV file, not sure what the issue with the algorithm is. I'm getting process terminated with status -1073741819.</p>\n"}, {"tags": ["c", "sizeof"], "comments": [{"owner": {"reputation": 74, "user_id": 10121866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZSDf.png?s=128&g=1", "display_name": "Maarten Arits", "link": "https://stackoverflow.com/users/10121866/maarten-arits"}, "edited": false, "score": 1, "creation_date": 1536063990, "post_id": 52166303, "comment_id": 91282209, "body": "Please have a look at this question: <a href=\"https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c\">Size of character (&#39;a&#39;) in C/C++</a>  &#39;b&#39; is actually converted to an integer."}, {"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 1, "creation_date": 1536064089, "post_id": 52166303, "comment_id": 91282286, "body": "There is type promotion and alignment in C. The sizes are not so black and white. I believe all chars are promoted to ints"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 5, "creation_date": 1536064282, "post_id": 52166303, "comment_id": 91282404, "body": "There&#39;s no conversion or promotion when dealing with sizeof. <code>&#39;b&#39;</code> is a plain <code>int</code> in C. Not a <code>char</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1536064355, "post_id": 52166303, "comment_id": 91282450, "body": "Do study the duplicate. <code>&#39;b&#39;</code>  is an <code>int</code> in C, <b>not</b> a <code>char</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1536065985, "post_id": 52166303, "comment_id": 91283530, "body": "<code>printf(&quot;the size of b is %d&quot;,sizeof(&#39;b&#39;));</code> invokes undefined behavior.  <code>sizeof()</code> returns <code>size_t</code>, not <code>int</code>. <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.21.6.1p7\" rel=\"nofollow noreferrer\">The proper format length modifier for <code>size_t</code> is <code>z</code></a>."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536068686, "post_id": 52166303, "comment_id": 91285455, "body": "This is common misunderstanding of the integer constants. They can be entered decimal, hex, (not standard C) binary, octal and as a integer code of the character. And it is your case."}], "owner": {"reputation": 33, "user_id": 9026150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb91126717add461df12385bfe738f0b?s=128&d=identicon&r=PG&f=1", "display_name": "AKASH TOMAR", "link": "https://stackoverflow.com/users/9026150/akash-tomar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1536064000, "answer_count": 0, "score": 0, "last_activity_date": 1536065037, "creation_date": 1536063847, "last_edit_date": 1536065037, "question_id": 52166303, "link": "https://stackoverflow.com/questions/52166303/printing-the-size-of-a-char-constant-in-c", "closed_reason": "Duplicate", "title": "printing the size of a char constant in c", "body": "<p>When I am printing <code>sizeof('b')</code> in C it is printing 4, but it should print 1 because <code>'b'</code> is not a integer, it is a char.</p>\n\n<pre><code> #include&lt;stdio.h&gt;\n int main(){\n     printf(\"the size of b is %d\",sizeof('b')); \n }\n</code></pre>\n"}, {"tags": ["c", "linux", "bluetooth", "bluez"], "comments": [{"owner": {"reputation": 1812, "user_id": 2689839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pQkd.jpg?s=128&g=1", "display_name": "Parthiban", "link": "https://stackoverflow.com/users/2689839/parthiban"}, "edited": false, "score": 1, "creation_date": 1536065873, "post_id": 52166173, "comment_id": 91283444, "body": "Did you already checked this repo <a href=\"https://github.com/tonyespy/bluez5-spp-example\" rel=\"nofollow noreferrer\">github.com/tonyespy/bluez5-spp-example</a> ?"}, {"owner": {"reputation": 1, "user_id": 10314865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e13003eada547b28a31c8bb5db6086?s=128&d=identicon&r=PG&f=1", "display_name": "T. My", "link": "https://stackoverflow.com/users/10314865/t-my"}, "reply_to_user": {"reputation": 1812, "user_id": 2689839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pQkd.jpg?s=128&g=1", "display_name": "Parthiban", "link": "https://stackoverflow.com/users/2689839/parthiban"}, "edited": false, "score": 0, "creation_date": 1536068087, "post_id": 52166173, "comment_id": 91285026, "body": "Thank you very much for your information. It seems to be suitable for my use.  One thing I have to know is that in the example, whether the client Linux device should be prepared or not.  In my case, the client device is the general terminal (Android or iOS smartphone/tablet).  For example, if you prepared the mac book and iPhone, you can request pairing and connection from iPhone to mac book via Bluetooth (the Bluetooth menu in the setting application on iPhone). The embedded system will alternate the mac book in analogy."}, {"owner": {"reputation": 1812, "user_id": 2689839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pQkd.jpg?s=128&g=1", "display_name": "Parthiban", "link": "https://stackoverflow.com/users/2689839/parthiban"}, "edited": false, "score": 0, "creation_date": 1536137097, "post_id": 52166173, "comment_id": 91311591, "body": "This repo doesn&#39;t have any functionality implemented for pairing and connection. It specifically takes care of SPP only (still old code). You need to fix up many things in that repo. For pairing and connection, you can refer the examples in <a href=\"https://gist.github.com/parthitce\" rel=\"nofollow noreferrer\">gist.github.com/parthitce</a> and explanation for these examples in <a href=\"https://www.linumiz.com/category/blog/\" rel=\"nofollow noreferrer\">linumiz.com/category/blog</a>"}], "owner": {"reputation": 1, "user_id": 10314865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e13003eada547b28a31c8bb5db6086?s=128&d=identicon&r=PG&f=1", "display_name": "T. My", "link": "https://stackoverflow.com/users/10314865/t-my"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 566, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536063461, "creation_date": 1536063461, "question_id": 52166173, "link": "https://stackoverflow.com/questions/52166173/how-to-setup-embedded-linux-as-bluetooth-spp-server", "title": "How to setup embedded linux as Bluetooth SPP server?", "body": "<p>Now I'm trying to make embedded Linux system act as Bluetooth SPP server. \nIn the system, blueZ can be used and I've already checked <code>bluetoothctl</code> command is enabled to scan, pair and connect with some bluetooth devices (iPhone and mac book). </p>\n\n<p>However, in spite of searches, there is no information to make Linux as Bluetooth SPP server with automatically paring and connection. I'm trying to realize the use case below:</p>\n\n<p>(1) Some setups on the Linux system (enabling bluetooth daemon, hcitool, SPP server, and so on...)\n(2) The client device scans the Bluetooth (Linux). If found, it tries to pair.\n(3) When pairing request received, the Linux system will pair the client device.\n(4) The client device tries to connect the Linux system. \n(5) The Linux system allows to connection. </p>\n\n<p>I want to know whether or not this use case is realizable, and if possible, I'd like to know some tutorials or sample codes. \nThe best case is that I can realize the use case above with C (or C++) programming using BlueZ (dBus API). </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1536062189, "post_id": 52165690, "comment_id": 91281052, "body": "In that case, where is <code>_x</code> stored?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1536062276, "post_id": 52165690, "comment_id": 91281106, "body": "Not, not at all. What makes you think so?"}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1536062277, "post_id": 52165690, "comment_id": 91281108, "body": "@Broman hmm... nowhere? at execution they are replaced with the memory address"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 4, "creation_date": 1536062283, "post_id": 52165690, "comment_id": 91281112, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8385322/difference-between-static-memory-allocation-and-dynamic-memory-allocation\">Difference between static memory allocation and dynamic memory allocation</a>"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1536062507, "post_id": 52165690, "comment_id": 91281253, "body": "Well, in this case the compiler might optimize it, but that&#39;s a completely different story. <code>x</code> will be a <code>char</code> variable. <code>_x</code> will be a pointer variable."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1536062678, "post_id": 52165690, "comment_id": 91281356, "body": "By your explanation, the value of that pointer must also be stored somewhere in memory too, right? So wouldn&#39;t that <i>actually</i> be <code>char** __x = malloc(sizeof(char*)); ...</code> /s"}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1536067324, "post_id": 52165690, "comment_id": 91284466, "body": "@PatrickRoberts so what happens when I reference a variable that its value is stored in the stack? Do I get a memory location that&#39;s on the stack?"}], "answers": [{"comments": [{"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536062383, "post_id": 52165780, "comment_id": 91281178, "body": "so the primitive values are kept in the stack because they have small size, yes?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 3, "creation_date": 1536062414, "post_id": 52165780, "comment_id": 91281205, "body": "@marzelin no, the size is totally unrelated. All local variables are allocated on the stack (at least more or lless). You&#39;d best start reading a C text book."}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536062449, "post_id": 52165780, "comment_id": 91281226, "body": "@Jabberwocky I wish I had time for that ;)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536062501, "post_id": 52165780, "comment_id": 91281250, "body": "@marzelin the duplicate mentioned in your question&#39;s comment contains the info you need."}, {"owner": {"reputation": 483, "user_id": 7452238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5339f527b561933b4e1eceaf7e42d9?s=128&d=identicon&r=PG&f=1", "display_name": "bobra", "link": "https://stackoverflow.com/users/7452238/bobra"}, "edited": false, "score": 0, "creation_date": 1536064987, "post_id": 52165780, "comment_id": 91282854, "body": "variable will die, but allocated memory will stay"}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536072827, "post_id": 52165780, "comment_id": 91288388, "body": "oh cool, values on the stack are automatically cleared but I have to take care to clear values stored on the heap. That&#39;s one of the differences between a stack and heap. In high-level languages all values are garbage collected automatically (so there&#39;s not much difference between the two). That&#39;s what I&#39;ve been missing. Thanks."}, {"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "edited": false, "score": 0, "creation_date": 1536074333, "post_id": 52165780, "comment_id": 91289363, "body": "No problem.. Yes , high level languages have their benefits .. but that is because someone wrote you the code that does this automatically. Low level languages have their benefits as well ."}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536074960, "post_id": 52165780, "comment_id": 91289774, "body": "One of the benefits is that they don&#39;t hide tricky details behind abstractions. Those details are sometimes very important and quite interesting ;)"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1536076823, "post_id": 52165780, "comment_id": 91290811, "body": "Note that the C language definition says <i>nothing</i> about stacks or heaps - it only specifies <i>behavior</i> of different types of variables.  It turns out that the best way to implement the behavior of <code>auto</code> variables is to use a stack, but that&#39;s not <i>mandatory</i>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1536090266, "post_id": 52165780, "comment_id": 91296736, "body": "@JohnBode: The best way is <i>generally</i> to use a stack, but in some cases other approaches may work better.  Using a stack, for example, would require that a system pre-allocate enough contiguous address space to accommodate worst-case stack usage.  An implementation that kept a linked list of storage blocks allocated via some other mechanism could avoid having to assign the stack address space that would never actually get used."}], "tags": [], "owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "is_accepted": true, "score": 4, "last_activity_date": 1536065115, "last_edit_date": 1536065115, "creation_date": 1536062137, "answer_id": 52165780, "question_id": 52165690, "link": "https://stackoverflow.com/questions/52165690/how-primitive-type-declarations-work-in-c/52165780#52165780", "title": "how primitive type declarations work in C?", "body": "<p>No, you can't . </p>\n\n<pre><code>malloc(sizeof(char));\n</code></pre>\n\n<p>Will allocate memory in the heap, which you're in charge of deleting it . One of the benifits of this, is that the data in allocated memory won't \"die\" when his scope ends, it will only die when you destruct it .</p>\n\n<pre><code>char c = 'a'\n</code></pre>\n\n<p>Will be stored in the stack , and will automatically be released when its scope ends. </p>\n\n<p><strong>EDIT:</strong> Regarding your comment, in general , local variables will usually be stored in the stack(this is ofcourse , automatic) .  <code>malloc , calloc</code> allows you to \"ask\" for space in the heap, and use it as you wish . If you want more info, you can look <a href=\"https://stackoverflow.com/q/8385322/5353753\">here</a> , as mentioned by @Jabberwocky</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 1, "last_activity_date": 1536062767, "creation_date": 1536062767, "answer_id": 52165978, "question_id": 52165690, "link": "https://stackoverflow.com/questions/52165690/how-primitive-type-declarations-work-in-c/52165978#52165978", "title": "how primitive type declarations work in C?", "body": "<p>Here</p>\n\n<p><code>char x = 'a';</code></p>\n\n<p><em>There are no pointers there but the value must be stored somewhere in memory, right?</em> Yes there are no pointers but <code>x</code> is local variable and it's stored in <code>stack</code> section of primary memory i.e <code>x</code> does have valid memory.</p>\n\n<blockquote>\n  <p>Can I think of above statement as translated to:    char* _x =\n  malloc(sizeof(char)); </p>\n  \n  <p>char x = *_x;</p>\n</blockquote>\n\n<p>No you can't as <code>x</code> here is allocated in <code>heap</code> section. So you can't think both scenario as same. And what <code>*_x</code> holds ? Garbage. You need to add one more statement after allocating memory</p>\n\n<p><code>*_x = 'a';</code></p>\n"}, {"comments": [{"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536063265, "post_id": 52166063, "comment_id": 91281743, "body": "You&#39;re right that I don&#39;t need to know that to write code but I&#39;m more interested in knowing how the &#39;magic&#39; behind translating code into something that computer understands works."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 1, "creation_date": 1536063334, "post_id": 52166063, "comment_id": 91281781, "body": "@marzelin: But you&#39;re up a gum tree if you&#39;re expecting every variable to be compiled in. Do study the <i>As-if rule</i> for compilation."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1536063610, "last_edit_date": 1536063610, "creation_date": 1536063028, "answer_id": 52166063, "question_id": 52165690, "link": "https://stackoverflow.com/questions/52165690/how-primitive-type-declarations-work-in-c/52166063#52166063", "title": "how primitive type declarations work in C?", "body": "<p>You shouldn't care.</p>\n\n<p>What you need to know is that</p>\n\n<pre><code>char x = 'a';\n</code></pre>\n\n<p>declares <code>x</code> as a <code>char</code> type with <em>automatic storage duration</em> and sets the <code>int</code> constant <code>'a'</code> to it, the value of which depends on the <em>encoding</em> your platform uses, but must not overflow a <code>char</code>.</p>\n\n<p>Whether or not that survives compilation is another matter entirely. Perhaps your compiler substitutes the number <code>'a'</code> whenever you write <code>x</code> in your source code; particularly if <code>x</code> never changes?</p>\n"}, {"comments": [{"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536072339, "post_id": 52166075, "comment_id": 91288047, "body": "Thanks for the answer. Now I know that <code>_x</code> like any other identifier has its value stored in the stack. Pointers are for the heap (generally)."}, {"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "reply_to_user": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536074052, "post_id": 52166075, "comment_id": 91289165, "body": "Pointers are not necessarily in the heap, depends where you point them (the address of the pointer it self is too stored in the stack. Consider : \u2018int x = 1; int * y =  &amp;x;\u2019 y will be stored in the stack and as well will point to memory in the stack @marzelin"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536074670, "post_id": 52166075, "comment_id": 91289578, "body": "Indeed, but the OP used <code>malloc</code>"}, {"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536074823, "post_id": 52166075, "comment_id": 91289671, "body": "so there&#39;s an internal mapping mechanism that pairs identifiers with memory addresses. When compiler sees <code>x</code> it provides its value to be done something with in the instruction. But I can also get the memory address of that identifier with <code>&amp;x</code>. Those are automatic mappings, but I can have manual mappings that I control thanks to pointers. Wonderful!"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1536064797, "last_edit_date": 1536064797, "creation_date": 1536063092, "answer_id": 52166075, "question_id": 52165690, "link": "https://stackoverflow.com/questions/52165690/how-primitive-type-declarations-work-in-c/52166075#52166075", "title": "how primitive type declarations work in C?", "body": "<blockquote>\n  <p>There are no pointers there but the value must be stored somewhere in memory, right? </p>\n</blockquote>\n\n<p>In that particular case (<code>char x = 'a';</code>) it is likely that the value would practically be stored only inside a processor register. But the program behave <a href=\"https://en.wikipedia.org/wiki/As-if_rule\" rel=\"nofollow noreferrer\">\"as-if\"</a> <code>x</code> was in some memory location.</p>\n\n<p>In practice, read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\"><em>How To Debug Small Programs</em></a> and look into some <a href=\"https://en.cppreference.com/w/c\" rel=\"nofollow noreferrer\">C reference</a> site. If you want to understand more precisely the (tricky) <a href=\"https://en.wikipedia.org/wiki/Semantics_(computer_science)\" rel=\"nofollow noreferrer\">semantics</a> of C11, refer to its standard <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a>, and look into the <a href=\"http://compcert.inria.fr/\" rel=\"nofollow noreferrer\">Compcert</a> project and into static source code analyzers like <a href=\"http://frama-c.com/\" rel=\"nofollow noreferrer\">Frama-C</a>.\n<a href=\"https://en.wikipedia.org/wiki/Memory_semantics_(computing)\" rel=\"nofollow noreferrer\">Memory semantics</a> of C is tricky.</p>\n\n<p>Read also about <a href=\"https://en.wikipedia.org/wiki/Automatic_variable\" rel=\"nofollow noreferrer\">automatic variables</a>, their <a href=\"https://en.wikipedia.org/wiki/Scope_(computer_science)\" rel=\"nofollow noreferrer\">scope</a>, and the <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow noreferrer\">call stack</a>. Read also about <a href=\"https://en.cppreference.com/w/c/language/storage_duration\" rel=\"nofollow noreferrer\">storage class</a> specifiers (<code>auto</code> is the default storage duration). Take time to understand what is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> and be <a href=\"https://stackoverflow.com/a/25636788/841108\">scared</a> of it.</p>\n\n<p>PS. Your imaginary code lacks some <code>free(_x)</code> and that is really important and you should ask yourself where is that <code>_x</code> stored! But don't expect us to teach you C (an entire book is needed).</p>\n"}, {"comments": [{"owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536098566, "post_id": 52174264, "comment_id": 91299968, "body": "does it store information about the type of a variable in the compiled code or if the types are relevant only while compiling? And since I can dereference any variable like: <code>int a = 1; int* b = &amp;a;</code> it means that at that memory location for <code>a</code> (offset from some address) isn&#39;t the value of <code>a</code> directly but the address where <code>1</code> is. Right?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "edited": false, "score": 0, "creation_date": 1536099655, "post_id": 52174264, "comment_id": 91300260, "body": "@marzelin: Types are only relevant during compilation.  No metadata (size, type, name, etc.) is required to be stored with the variable in the machine code, although compilers may do so for debugging purposes."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1536096800, "creation_date": 1536096800, "answer_id": 52174264, "question_id": 52165690, "link": "https://stackoverflow.com/questions/52165690/how-primitive-type-declarations-work-in-c/52174264#52174264", "title": "how primitive type declarations work in C?", "body": "<p>This is a simple question with a very complicated answer. </p>\n\n<p>Actually, you're asking two different questions - how storage is allocated for a variable, and how the variable's name is associated with that storage.</p>\n\n<p>As for the first question, the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C language definition</a> doesn't specify the mechanics of <em>how</em> storage for variables is actually allocated - that depends on the compiler, <a href=\"https://en.wikipedia.org/wiki/Comparison_of_executable_file_formats\" rel=\"nofollow noreferrer\">executable file format</a>, and operating system. You'll hear people talk about \"stack\" and \"heap\", but there's nothing in the C language definition that <em>mandates</em> the use of a stack or a heap to manage variables and other objects.</p>\n\n<p>As to the second question, the answer (usually) is, \"it isn't.\"  Variable names are not preserved in the generated machine code.  Instead, the machine code will usually refer to that object via an offset from some address stored in a register.  </p>\n"}], "owner": {"reputation": 7617, "user_id": 5664434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-Ws_m-ConuqI/AAAAAAAAAAI/AAAAAAAAAAA/yJVKiI7N47Q/photo.jpg?sz=128", "display_name": "marzelin", "link": "https://stackoverflow.com/users/5664434/marzelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 52165780, "answer_count": 5, "score": -1, "last_activity_date": 1536096800, "creation_date": 1536061845, "question_id": 52165690, "link": "https://stackoverflow.com/questions/52165690/how-primitive-type-declarations-work-in-c", "title": "how primitive type declarations work in C?", "body": "<p>I'm not a C programmer so please be understanding ;)</p>\n\n<p>C language has pointers and all of its goodness. But how a primitive type declaration works?</p>\n\n<p>For example I can do:</p>\n\n<p><code>char x = 'a';</code></p>\n\n<p>There are no pointers there but the value must be stored somewhere in memory, right? Can I think of above statement as translated to:</p>\n\n<pre><code>char* _x = malloc(sizeof(char));\nchar x = *_x;\n</code></pre>\n"}, {"tags": ["c", "pipe", "fork", "deadlock", "execvp"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1536060779, "post_id": 52165312, "comment_id": 91280136, "body": "The normal way is to create <i>two</i> child processes, one for each command, and set up the pipe between them. Then the parent process waits for <i>both</i> children."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536061282, "post_id": 52165312, "comment_id": 91280458, "body": "Usually, you aren&#39;t closing enough file descriptors. <b>Rule of thumb</b>: If you <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup2.html\" rel=\"nofollow noreferrer\"><code>dup2()</code></a> one end of a pipe to standard input or standard output, close both of the original file descriptors from <code>pipe()</code> as soon as possible. In particular, that means before using any of the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/execvp.html\" rel=\"nofollow noreferrer\"><code>exec*()</code></a> family of functions. The rule also applies with either <code>dup()</code> or <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fcntl.html\" rel=\"nofollow noreferrer\"><code>fcntl()</code></a> with <code>F_DUPFD</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536061463, "post_id": 52165312, "comment_id": 91280563, "body": "You should always execute all the processes in a pipeline in parallel.  If you have process A piping data to process B, and A produces enough data to fill the pipe buffer (usually 64 KiB these days; it was less in times past), then it will block waiting for a process to read the pipe (B).  If the process that should read the pipe (B) isn&#39;t running but is waiting for A to finish, you have a deadlock.  Don&#39;t create that deadlock; do run A and B concurrently."}], "owner": {"reputation": 79, "user_id": 5227868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8f2ec662fa6a538222d07a5aa39bf2?s=128&d=identicon&r=PG&f=1", "display_name": "Robert GRZELKA", "link": "https://stackoverflow.com/users/5227868/robert-grzelka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536060608, "creation_date": 1536060608, "question_id": 52165312, "link": "https://stackoverflow.com/questions/52165312/c-piping-how-to-make-child-tell-im-waiting-for-stdin-to-parent-waiting-for-ch", "title": "C piping, how to make child tell &quot;im waiting for stdin&quot; to parent waiting for child to finish", "body": "<p>One time I have parent executing <code>grep</code> and child executing <code>ls -la</code> in pipe like <code>ls -la | grep something</code>, and its working as requested. Parent waits for child to finish. But now in opposite case parent is executing <code>ls -la</code> and child <code>grep</code>. Parent wait for child to finish and child wait for stdin. How to avoid deadlock? Should I execute them in parallel and save output to buffer. How to do it when execution is by execvp?</p>\n"}, {"tags": ["c", "algorithm", "data-structures", "permutation", "backtracking"], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1536073941, "post_id": 52165213, "comment_id": 91289102, "body": "What would be more natural in either language would be to fix the definition of <code>permutation</code> so that it uses half-open ranges. In the Python version, it would also be cool to avoid depending on a global."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 1, "last_activity_date": 1536060237, "creation_date": 1536060237, "answer_id": 52165213, "question_id": 52164939, "link": "https://stackoverflow.com/questions/52164939/trying-to-understand-permutation-generation/52165213#52165213", "title": "trying to understand permutation generation", "body": "<p>The author is familiar in Python, and uses the same (unfortunate) idiom in the pseudo code. In Python, the start of a range is <em>inclusive</em>, while the end is <em>exclusive</em>. Later on that page the Python code excerpt proves that that indeed is the case:</p>\n\n<pre><code>for i in range(start, end+1):\n</code></pre>\n\n<p>With this code <code>i</code> will be sequentially assigned all integers from <code>start</code> to <code>end</code> inclusive, but excluding the <code>end + 1</code>.</p>\n\n<p>In C one would often use <code>&lt;</code> in loops - then it would happen there too:</p>\n\n<pre><code>for (size_t i = start; start &lt; end + 1; start++)\n                               ^^^^^^^\n</code></pre>\n\n<p>though more natural would be to write</p>\n\n<pre><code>for (size_t i = start; start &lt;= end; start++)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 503, "user_id": 10245045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ef6199c23c195dfbfcb924fcf165abb?s=128&d=identicon&r=PG&f=1", "display_name": "ManishM", "link": "https://stackoverflow.com/users/10245045/manishm"}, "is_accepted": false, "score": 0, "last_activity_date": 1536141979, "creation_date": 1536141979, "answer_id": 52182471, "question_id": 52164939, "link": "https://stackoverflow.com/questions/52164939/trying-to-understand-permutation-generation/52182471#52182471", "title": "trying to understand permutation generation", "body": "<pre><code>for i -&gt; (start, end+1)\n</code></pre>\n\n<p>It means iterate for every value beginning from <strong>start</strong>, with auto-increment and condition satisfying <strong>end+1</strong></p>\n\n<pre><code>permutation(start+1,end)\n</code></pre>\n\n<p>It is just the same function call with parameters having values of start and end passed into it</p>\n\n<p>e.g </p>\n\n<pre><code>function permutation(start, end) \n</code></pre>\n\n<p>with start = 1 and end = 10</p>\n\n<p>Inside foreach will iterate starting from 1 with auto-increment till it reaches 10, means less that (10+1) = 11</p>\n\n<p>Then, permutation(start+1,end) is called\nLet's say for the first item start = 1. It will call with start as 2 and end as 10</p>\n"}], "owner": {"reputation": 551, "user_id": 10164572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0feedb1a60c7c66c7303a5ebd84555?s=128&d=identicon&r=PG&f=1", "display_name": "ss321c", "link": "https://stackoverflow.com/users/10164572/ss321c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 52165213, "answer_count": 2, "score": 0, "last_activity_date": 1536141979, "creation_date": 1536059312, "question_id": 52164939, "link": "https://stackoverflow.com/questions/52164939/trying-to-understand-permutation-generation", "title": "trying to understand permutation generation", "body": "<p>I am trying to understand a permutation algorithm given <a href=\"https://www.codesdope.com/blog/article/generating-permutations-of-all-elements-of-an-arra/\" rel=\"nofollow noreferrer\">here</a>\nwhat I am not clear is with first block of pseudo code where they mention</p>\n\n<pre><code>array = [1, 2, 3, 4]\nfunction permutation(start, end):\n#i will go from start to end\n    for i -&gt; (start, end+1):\n        permutation(start+1,end)\n</code></pre>\n\n<p>why has end+1 used in for i loop this is not clear to me as far as I understand end+1 should go out of index of array to which permutation has to be applied, but this is not the case here this is what I am not clear with.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1536057500, "post_id": 52164304, "comment_id": 91278089, "body": "You should probably reference the sources for <a href=\"https://git.savannah.gnu.org/cgit/coreutils.git/tree/src/cat.c\" rel=\"nofollow noreferrer\"><code>cat.c</code></a> from CoreUtils."}, {"owner": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "edited": false, "score": 1, "creation_date": 1536057640, "post_id": 52164304, "comment_id": 91278178, "body": "Increase numline but do not print the line number yet."}, {"owner": {"reputation": 29, "user_id": 10294286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UWTOhyul5iM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN4wcgyjDKeOvnS2EXs5wW5wK1Ojg/mo/photo.jpg?sz=128", "display_name": "Saifali Suleman Essa", "link": "https://stackoverflow.com/users/10294286/saifali-suleman-essa"}, "reply_to_user": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "edited": false, "score": 0, "creation_date": 1536058169, "post_id": 52164304, "comment_id": 91278496, "body": "@purpletentacle when do I print the line number?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536061084, "post_id": 52164304, "comment_id": 91280322, "body": "One way is to keep a count of the characters on the line.  When you print a newline, set the count to zero.  Before printing a regular (non-newline) character, if the count is zero, print the line number information (then print the character and increase the count)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536061765, "post_id": 52164304, "comment_id": 91280764, "body": "You don&#39;t show how <code>c</code> is defined.  Make sure it is <code>int c;</code> and not <code>char c;</code>.  The is no point in writing the first <code>i</code> in <code>for (i; i &lt; argc; i++)</code>; either defer the intialization so you write <code>for (i = 2; i &lt; argc; i++)</code> or omit the leading expression in the <code>for</code> loop control.  I&#39;d go with the former.  If you have C99 or C11 or C18 available, use <code>for (int i = 2; i &lt; argv; i++)</code> instead (and don&#39;t define <code>i</code> outside the loop).  It&#39;s a good idea to report errors on <code>stderr</code> (not <code>stdout</code>).  It&#39;s a good idea to include the file name in the error message when you fail to open a file."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1536067803, "post_id": 52164304, "comment_id": 91284816, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to Debug Small Programs</a>. Be aware that <i>stdio</i> is buffered, and <code>stdout</code> is often line-buffered. So prefer <code>\\n</code>at end of <code>printf</code> format strings (or use <code>fflush</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 7360830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfYUJ.jpg?s=128&g=1", "display_name": "Panki", "link": "https://stackoverflow.com/users/7360830/panki"}, "is_accepted": false, "score": 1, "last_activity_date": 1536057637, "creation_date": 1536057637, "answer_id": 52164402, "question_id": 52164304, "link": "https://stackoverflow.com/questions/52164304/how-can-i-correct-this-code-so-that-it-gives-the-expected-result/52164402#52164402", "title": "How can I correct this code so that it gives the expected result", "body": "<p>This happens because the last line terminates with <code>\\n</code>.\nYou need to restructure your program so that <code>numline</code> is only incremented if there is a char following <code>\\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1536061898, "post_id": 52165492, "comment_id": 91280862, "body": "<i>A much better method of detecting end of file is to use <code>feof()</code></i>  No.  <code>feof()</code> is misleading because it won&#39;t return non-zero until an attempt is made to read past the end of the file.  Your currently-posted code will emit <code>EOF</code>-improperly-truncated-down-to-a-<code>char</code> as the last character in the file."}, {"owner": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "edited": false, "score": 0, "creation_date": 1536061939, "post_id": 52165492, "comment_id": 91280884, "body": "The existing snippet does just this, anyway, Andrew!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536069723, "post_id": 52165492, "comment_id": 91286168, "body": "<code>char c = (char)( fgetc( fptr ) );</code> is also a problem.  Example: (<code>EOF</code> == -1, 8-bit unsigned <code>char</code> or signed <code>char</code> that converts out of range values in the usual fashion):  Should <code>fgetc()</code> return <code>EOF</code> (due to error or end-of file) or 255 (from say an ISO Latin-1 &#255;), <code>c</code> will obtain the same value.  A <code>printf(&quot;%c&quot;, c);</code> within the loop, in this case, would print <code>&quot;&#255;&quot;</code> even if end-of-file or error occurred."}, {"owner": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "edited": false, "score": 0, "creation_date": 1536070588, "post_id": 52165492, "comment_id": 91286758, "body": "OK... I&#39;m going to NOT stick to the same code structure, and try and address ALL the issues :-)"}], "tags": [], "owner": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "is_accepted": false, "score": -1, "last_activity_date": 1536070561, "last_edit_date": 1536070561, "creation_date": 1536061188, "answer_id": 52165492, "question_id": 52164304, "link": "https://stackoverflow.com/questions/52164304/how-can-i-correct-this-code-so-that-it-gives-the-expected-result/52165492#52165492", "title": "How can I correct this code so that it gives the expected result", "body": "<p>While you've used a very common design pattern, as an observation that some might say is pedantic (but isn't) can I respectfully point out that while you have defined <code>c</code> as <code>char</code>, the function <code>fgetc()</code> actually returns <code>int</code> and that <code>EOF</code> is actually -1 and not a character.</p>\n\n<p>As a more correct method, you should check for <code>EOF</code> before converting to <code>char</code></p>\n\n<pre><code>int inp = fgetc( fptr );\n\nwhile ( inp != EOF )\n{\n  char c = (char)( inp );\n  ...\n  inp = fgetc( fptr );\n}      \n</code></pre>\n\n<p>A much better method of detecting end of file is to use <code>feof()</code> and a <code>do</code>/<code>while</code> loop...</p>\n\n<pre><code>do\n{\n  int inp = fgetc( fptr );\n  if ( inp != EOF )\n  {\n    char c = (char)( inp )\n    ...\n  }\n}\nwhile( !feof( fptr ) )\n</code></pre>\n\n<p>Although, as has been pointed out, there are issues with <code>feof()</code> and the loop needs further restructuring anyway!</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536061571, "post_id": 52165541, "comment_id": 91280641, "body": "The problem is that EOF tests as &#39;true&#39;, so the line number will be printed as before."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536061977, "post_id": 52165541, "comment_id": 91280917, "body": "Yeah, EOF is negative (usually -1). Updated."}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1536061937, "last_edit_date": 1536061937, "creation_date": 1536061355, "answer_id": 52165541, "question_id": 52164304, "link": "https://stackoverflow.com/questions/52164304/how-can-i-correct-this-code-so-that-it-gives-the-expected-result/52165541#52165541", "title": "How can I correct this code so that it gives the expected result", "body": "<p>Move <code>printf(\"\\n\\t%d  \", numline);</code>  from the <code>if</code> loop and place it after checking if a character is available on the next line.</p>\n\n<pre><code>if((c = fgetc(fptr)) != EOF)\n    printf(\"\\n\\t%d  \", numline);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "edited": false, "score": 0, "creation_date": 1536062056, "post_id": 52165711, "comment_id": 91280973, "body": "This still checks <code>c</code> (a <code>char</code>) against <code>EOF</code> (an <code>int</code> constant) though!"}, {"owner": {"reputation": 1, "user_id": 10313549, "user_type": "registered", "profile_image": "https://graph.facebook.com/2083864018303987/picture?type=large", "display_name": "Andras Fancsali", "link": "https://stackoverflow.com/users/10313549/andras-fancsali"}, "reply_to_user": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "edited": false, "score": 0, "creation_date": 1536063297, "post_id": 52165711, "comment_id": 91281763, "body": "I reused the original code to create a working example, but yeah that can be improved too"}], "tags": [], "owner": {"reputation": 1, "user_id": 10313549, "user_type": "registered", "profile_image": "https://graph.facebook.com/2083864018303987/picture?type=large", "display_name": "Andras Fancsali", "link": "https://stackoverflow.com/users/10313549/andras-fancsali"}, "is_accepted": false, "score": 0, "last_activity_date": 1537034922, "last_edit_date": 1537034922, "creation_date": 1536061897, "answer_id": 52165711, "question_id": 52164304, "link": "https://stackoverflow.com/questions/52164304/how-can-i-correct-this-code-so-that-it-gives-the-expected-result/52165711#52165711", "title": "How can I correct this code so that it gives the expected result", "body": "<p>Here is a workaround for the while loop that fixes the issue. This works only if there is a maximum of one newline at the end of each line. If multiple newlines are expected a more general approach is necessary.</p>\n\n<pre><code>while( c != EOF )\n    {\n    if( c == '\\n' )\n        {\n        c = fgetc( fptr );\n        numline++;\n        if( c != EOF )\n            {\n            printf( \"\\n\\t%d  \", numline );\n            }\n        }\n    else\n        {\n        printf( \"%c\", c );\n        c = fgetc( fptr );\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1536068873, "last_edit_date": 1536068873, "creation_date": 1536067620, "answer_id": 52167450, "question_id": 52164304, "link": "https://stackoverflow.com/questions/52164304/how-can-i-correct-this-code-so-that-it-gives-the-expected-result/52167450#52167450", "title": "How can I correct this code so that it gives the expected result", "body": "<p>On reading, <code>'\\n'</code> indicates the end-of-line in text files, not the start of a new one even if C calls it a <em>new line</em>.</p>\n\n<p>Rather than test <code>if (c == '\\n')</code> to determine a new line,  check if the <em>previous c</em> was a <code>'\\n'</code>.  </p>\n\n<p>Be sure to use <code>int c</code>.</p>\n\n<pre><code>// Commented out, not needed\n// printf(\"\\t%d  \", numline);\n\nint c;\nint previous_c = '\\n';\nwhile((c = fgetc(fptr)) != EOF) {\n  if (previous_c == '\\n') {\n    numline++;\n    printf(\"%d  \", ++numline);    \n  }\n  printf(\"%c\", c);\n  previous_c = c;\n}\n</code></pre>\n\n<hr>\n\n<p>As the last character of input may differ from <code>'\\n'</code>, code could detect that after the loop and add one.</p>\n\n<pre><code>if (previous_c != '\\n') {\n  printf(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10294286, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UWTOhyul5iM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN4wcgyjDKeOvnS2EXs5wW5wK1Ojg/mo/photo.jpg?sz=128", "display_name": "Saifali Suleman Essa", "link": "https://stackoverflow.com/users/10294286/saifali-suleman-essa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1537034922, "creation_date": 1536057306, "last_edit_date": 1536057506, "question_id": 52164304, "link": "https://stackoverflow.com/questions/52164304/how-can-i-correct-this-code-so-that-it-gives-the-expected-result", "title": "How can I correct this code so that it gives the expected result", "body": "<p>I have created a program to mimmic the 'cat' command in linux.\nI want to make a program to cater the '-n' option of 'cat' that displays line number along with the file contents.\nHere is what I have done so far.</p>\n\n<pre><code>int numline = 1;\nint i = 2;\n\nprintf(\"\\t%d  \", numline);\n\nfor(i; i &lt; argc ; i++)\n{\n    fptr = fopen(argv[i], \"r\");\n    if(fptr == NULL)\n    {\n        printf(\"Can not open file\");\n        return -1;  \n    }\n\n    c = fgetc(fptr);\n    while(c != EOF)\n    {\n        if(c == '\\n')\n        {\n            numline++;\n            printf(\"\\n\\t%d  \", numline);    \n        }\n        else\n            printf(\"%c\", c);\n        c = fgetc(fptr);\n    }\n    fclose(fptr);\n}\n</code></pre>\n\n<p>Here is a sample output.</p>\n\n<pre><code>1  hi how are you\n2  \n3  \n4  i am fine\n5  \n6  thank you\n7  \n8  bye\n9  cya\n10  garbage text\n11  \n12  \n13  bye\n14 \n</code></pre>\n\n<p>The problem is with line 14. The file ends at line 13 but the program prints line 14 anyway. How do I correct this?\nThank you.</p>\n"}, {"tags": ["c", "arm", "embedded"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1536056985, "post_id": 52164135, "comment_id": 91277788, "body": "Will the string you pass as <code>output</code> be zero-initialized initially? Otherwise it won&#39;t be terminated when you call <a href=\"https://en.cppreference.com/w/c/string/byte/strncat\" rel=\"nofollow noreferrer\"><code>strncat</code></a> (which it needs to be)."}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536057042, "post_id": 52164135, "comment_id": 91277825, "body": "Yes, it is zero initialized (memset)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1536057156, "post_id": 52164135, "comment_id": 91277886, "body": "And the buffer pointed to by <code>output</code> is big enough? It would be easier to help you if you created a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536057273, "post_id": 52164135, "comment_id": 91277947, "body": "Please show at least the code where you call <code>get_gps60secString</code> including the declaration and initialisation of the relevant variables."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1536057973, "post_id": 52164135, "comment_id": 91278368, "body": "You are misusing <code>strncat()</code> with <code>strncat(output, temp, sizeof(temp));</code> \u2014 the size should be the amount of space left in the target less 1 for the null byte (so at most <code>sizeof(output) - 1</code> if <code>output</code> is an array of known size).  Given that your function doesn&#39;t know how big the <code>output</code> array is, you cannot protect against overflows in that array, and using <code>strncat()</code> is a bad idea.  Note that <code>char buffer[16] = &quot;&quot;; strncat(buffer, &quot;abcdefghijklmnop&quot;, sizeof(buffer));</code> leads to a buffer overflow!"}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536058538, "post_id": 52164135, "comment_id": 91278735, "body": "@Someprogrammerdude added a Minimal, Complete, and Verifiable Example"}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536058762, "post_id": 52164135, "comment_id": 91278850, "body": "@JonathanLeffler How should I append the string into the output buffer, if <code>strncat</code> is a <code>bad option</code>? Wait are you saying a buffer overflow in <code>output</code> buffer? I&#39;ve set it to be a big value (taking into account the size of a GPS string)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1536058787, "post_id": 52164135, "comment_id": 91278863, "body": "You&#39;re still missing a very important bit: The <code>Track_json_t</code> type, more specifically its <code>Gnss60</code> member. Is it an array or a pointer? And if it&#39;s a pointer, where does it point? From the code you show it would be equivalent to a null pointer (if it&#39;s a pointer) due to the <code>memset</code> call."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1536058916, "post_id": 52164135, "comment_id": 91278933, "body": "As a tiny note, since this is a bit of a pet peeve, <code>0x00</code> is in no way zeroer than <code>0</code>. It is, however, needlessly complex and implies that there is a difference, which there is not in this case. They&#39;re both integer literals with the value zero."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1536058978, "post_id": 52164135, "comment_id": 91278971, "body": "Given that you are crossing your fingers and hoping, use <code>strcat()</code>.  Using <code>strncat()</code> correctly is hard; most people get it wrong.  Using it in the hope that it will protect you when the necessary information is not available (you need the size of <code>output</code> as an argument to the function) could lull you into a false sense of security.  Personally, I don&#39;t use <code>strncat()</code> ever \u2014 if I know enough to use it safely, there are better options available, such as <code>memmove()</code> or <code>memcpy()</code>.  (Knowing enough means how long <code>output</code> is, how much is in use, and how much is about to be added.)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536059220, "post_id": 52164135, "comment_id": 91279134, "body": "Wouldn&#39;t it be a lot simpler for the <code>for</code> loop to do all 60 elements, then just <code>strcat( output, &quot;]&quot; );</code> to the end?  If your <code>temp</code> buffer is big enough, <code>strncat()</code> isn&#39;t needed.  And if <code>temp</code> isn&#39;t big enough, <code>strncat()</code> won&#39;t properly terminate your string..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536059571, "post_id": 52164135, "comment_id": 91279350, "body": "@AndrewHenle: Actually, whatever its other faults, <code>strncat()</code> always appends a null byte \u2014 C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.24.3.2\" rel=\"nofollow noreferrer\">&#167;7.24.3.2 The <code>strncat</code> function</a> says: <i>\u2026 A terminating null character is always appended to the result.</i>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536059807, "post_id": 52164135, "comment_id": 91279497, "body": "@JonathanLeffler Doh!  I&#39;m thinking of <code>strncpy()</code>.  I&#39;ll plead too early on a Tuesday morning after a long holiday weekend.  :-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536061361, "post_id": 52164135, "comment_id": 91280502, "body": "ClamentJohn, Is the stray &quot;[21.28211533,21.22&quot; additional unexpected text or is the following &quot;[21.28211517,84.13454000]&quot; unexpectedly overwriting the end of &quot;[21.28211533,21.22.......&quot;?"}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536061592, "post_id": 52164135, "comment_id": 91280652, "body": "@chux The valid GPS string must be &quot;[21.28211517,84.13454000]&quot;. So in the second one we could say a stray &quot;21.22&quot; + &quot;\\0&quot; came into the output string. Will work on creating a compilable code. It&#39;s just that it&#39;s embedded and I&#39;ll have to feed in values for the GPS input."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536061696, "post_id": 52164135, "comment_id": 91280714, "body": "I think you need to post a compilable code: .  Lingering issues like what is <code>GPS_PERIODIC_ARRAY_SIZE</code>, <code>getEvent_Track()</code>, <code>get_gps60secString()</code> called before definition, etc. come into play and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would save all time"}], "answers": [{"comments": [{"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536062488, "post_id": 52164946, "comment_id": 91281240, "body": "I had not included that. It does have a return. I&#39;ll make a compile-able code and share it. But please note that I&#39;ll have to work around things like GPS data (HW)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536071997, "post_id": 52164946, "comment_id": 91287808, "body": "Related: <a href=\"https://stackoverflow.com/a/46563868/584518\">What are the functions from the standard library that must/should be avoided?</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536073385, "post_id": 52164946, "comment_id": 91288737, "body": "@Lundin Interesting <a href=\"https://stackoverflow.com/a/46563868/584518\">list</a>.  Aside from <code>atoi()</code>, I concur with &quot;functions that should never be used&quot;.  Yet in my book  &quot;functions that should be used with caution:&quot; is the rest of the standard library.  It seems every function has a mis-use potential on SO."}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536217073, "post_id": 52164946, "comment_id": 91345494, "body": "@chux I used the &quot;get_gps60secString&quot; function you made. But still an error was raised. Is this because the data I/P to snprintf is corrupted? Please refer to the edit portion of the question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536219179, "post_id": 52164946, "comment_id": 91346569, "body": "@ClamentJohn I do not think so.  I suspect your buffer is too small. What is nneded is to see how <code>get_gps60secString()</code> was called and the value of its arguments."}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536219460, "post_id": 52164946, "comment_id": 91346708, "body": "I&#39;ve added a code to show how it&#39;s called. How should I give more data? And since this only fails once or twice a day the data that went into the fn is hard to be determined. Also, do you suspect the output buffer to be small? Hmm.. hard to get my head around that. Because it should have failed freq&#39;ly."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536219686, "post_id": 52164946, "comment_id": 91346815, "body": "@ClamentJohn This answer&#39;s version of <code>get_gps60secString()</code> has 3 parameters.  I do not see your code that calls it."}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536224605, "post_id": 52164946, "comment_id": 91349750, "body": "@chux I&#39;ve created a C program to reflect the operations  done on the embedded side."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1536062400, "last_edit_date": 1536062400, "creation_date": 1536059332, "answer_id": 52164946, "question_id": 52164135, "link": "https://stackoverflow.com/questions/52164135/stray-characters-seen-at-output-of-snprintf/52164946#52164946", "title": "Stray characters seen at output of snprintf", "body": "<p>Code is using functions that expect pointers to <em>string</em>, yet not always passing pointers to <em>strings</em> as arguments.</p>\n\n<blockquote>\n  <p>Stray characters seen at output of snprintf</p>\n</blockquote>\n\n<p>A <em>string</em> must have a terminating <em>null character</em>.</p>\n\n<p><code>strncat(char *, ....</code> expects the first parameter to be a pointer to a string.  <code>memcpy(output, \"[\",1);</code> does not insure that.  <a href=\"https://stackoverflow.com/a/52164399/2410359\">@Jeremy</a></p>\n\n<pre><code>memcpy(output, \"[\",1);\n...\nstrncat(output, temp,sizeof(temp));\n</code></pre>\n\n<p>This is a candidate source of <em>stray characters</em>.</p>\n\n<hr>\n\n<p><code>strncat(...., ..., size_t size).</code> itself is a problem as the <code>size</code> is the amount of space available for concatenating (minus the null character). The size available to <code>char * output</code> is not passed in. <a href=\"https://stackoverflow.com/questions/52164135/stray-characters-seen-at-output-of-snprintf#comment91278368_52164135\">@Jonathan Leffler</a>.  Might as well do <code>strcat()</code> here.</p>\n\n<p>Instead, pass in the size available to <code>output</code> to prevent buffer overflow.</p>\n\n<pre><code>#define N 60\n\nint get_gps60secString(GPS_periodic_t input[N], char *output, size_t sz) {\n  int cnt = snprintf(output, sz, \"[\");\n  if (cnt &lt; 0 || cnt &gt;= sz)\n    return 1;\n  output += cnt;\n  sz -= cnt;\n\n  int i = 0;\n  for (i = 0; i &lt; N; i++) {\n    cnt = snprintf(output, size, \"[%0.8f,%0.8f]%s\", input[i].point.latitude,\n        input[i].point.longitude, i + 1 == N ? \"\" : \",\");\n    if (cnt &lt; 0 || cnt &gt;= sz)\n      return 1;\n    output += cnt;\n    sz -= cnt;\n  }\n\n  cnt = snprintf(output, sz, \"]\");\n  if (cnt &lt; 0 || cnt &gt;= sz)\n    return 1;\n  return 0; // no error\n}\n</code></pre>\n\n<hr>\n\n<p>OP has posted more code - will review.</p>\n\n<p>Apparently  the buffer <code>char *output</code> is pre-filled with 0 before the <code>get_gps60secString()</code> so the missing <em>null character</em> from <code>memcpy(output, \"[\",1);</code> should not cause the issue - hmmmmmm</p>\n\n<p><code>unsigned short SendTrack()</code> does not return a value. 1) Using its result value is UB. 2) Enable all compiler warnings.</p>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1536083968, "post_id": 52171724, "comment_id": 91294091, "body": "I haven&#39;t proofread any of that code yet; I went for lunch. If you see an error, let me know and I&#39;ll cheerfully fix it when I get back."}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536309862, "post_id": 52171724, "comment_id": 91385866, "body": "I&#39;m passing <code>double</code> points, but in my sprintf I&#39;m expecting a <code>%f</code>  float. According to <a href=\"https://stackoverflow.com/questions/25860850/what-is-the-difference-between-f-and-lf-in-c\" title=\"what is the difference between f and lf in c\">stackoverflow.com/questions/25860850/&hellip;</a>  for <code>printf</code> family <code>%f</code> &amp; <code>%lf</code> are the same. My arm-gcc version is C99. Will it have an issue here?"}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536310143, "post_id": 52171724, "comment_id": 91386001, "body": "It looks like from C99 and later, <code>printf</code> family accepts double (<code>%f</code> and <code>%lf</code>) <a href=\"https://stackoverflow.com/a/25860890/5698740\">stackoverflow.com/a/25860890/5698740</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "edited": false, "score": 0, "creation_date": 1536350524, "post_id": 52171724, "comment_id": 91407495, "body": "@clmno: The <code>%f</code> printf format prints a <code>double</code>. It always has done and it will always do so. C99 graciously allowed the redundant <code>l</code> flag, but it changes nothing. It is impossible to print a <code>float</code> directly because varargs functions like <code>printf</code> cannot take <code>float</code> arguments. They also can&#39;t take <code>short</code> or <code>char</code> arguments. You can call the function with such values, of course, but <code>floats</code> will be converted to <code>double</code> and integer types narrower than an <code>int</code> will be converted to <code>int</code>."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 4, "last_activity_date": 1536239020, "last_edit_date": 1536239020, "creation_date": 1536083926, "answer_id": 52171724, "question_id": 52164135, "link": "https://stackoverflow.com/questions/52164135/stray-characters-seen-at-output-of-snprintf/52171724#52171724", "title": "Stray characters seen at output of snprintf", "body": "<p>Here's (part of) my unabashedly opinionated guide on safe string handling in C. Normally, I would promote dynamic memory allocation instead of fixed-length strings, but in this case I'm assuming that in the embedded environment that might be problematic. (Although assumptions like that should always be checked.)</p>\n\n<p>So, first things first:</p>\n\n<ol>\n<li><p><strong>Any function which creates a string in a buffer must be told explicitly how long the buffer is. This is non-negotiable.</strong></p>\n\n<p>As should be obvious, it's impossible for a function filling a buffer to check for buffer overflow unless it knows where the buffer ends. \"Hope that the buffer is long enough\" is not a viable strategy. \"Document the needed buffer length\" would be fine if everyone carefully read the documentation (they don't) and if the required length never changes (it will). The only thing that's left is an extra argument, which should be of type <code>size_t</code> (because that's the type of buffer lengths in the C library functions which require lengths).</p></li>\n<li><p><strong>Forget that <code>strncpy</code> and <code>strncat</code> exist. Also forget about <code>strcat</code>. They are not your friends.</strong></p>\n\n<p><code>strncpy</code> is designed for a specific use case: ensuring that an entire fixed-length buffer is initialised. It is not designed for normal strings, and since it doesn't guarantee that the output is NUL-terminated, it doesn't produce a string.</p>\n\n<p>If you're going to NUL-terminate yourself anyway, you might as well use <code>memmove</code>, or <code>memcpy</code> if you know that the source and destination don't overlap, which should almost always be the case. Since you'll want the <code>memmove</code> to stop at the end of the string for short strings (which <code>strncpy</code> does <em>not</em> do), measure the string length first with <code>strnlen</code>: <code>strnlen</code> takes a maximum length, which is precisely what you want in the case that you are going move a maximum number of characters.</p>\n\n<p>Sample code:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>/* Safely copy src to dst where dst has capacity dstlen. */\nif (dstlen) {\n  /* Adjust to_move will have maximum value dstlen - 1 */\n  size_t to_move = strnlen(src, dstlen - 1);\n  /* copy the characters */\n  memmove(dst, src, to_move);\n  /* NUL-terminate the string */\n  dst[to_move] = 0;\n}\n</code></pre>\n\n<p><code>strncat</code> has a slightly more sensible semantic, but it's practically never useful because in order to use it, you already have to know how many bytes you could copy. In order to know that, in practice, you need to know how much space is left in your output buffer, and to know that you need to know where in the output buffer the copy will start. [Note 1]. But if you already know where the copy will start, what's the point of searching through the buffer from the beginning to find the copy point? And if you do let <code>strncat</code> do the search, how sure are you that your previously computed start point is correct?</p>\n\n<p>In the above code snippet, we already computed the length of the copy. We can extend that to do an append without rescanning:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* Safely copy src1 and then src2 to dst where dst has capacity dstlen. */\n/* Assumes that src1 and src2 are not contained in dst. */\nif (dstlen) {\n  /* Adjust to_move will have maximum value dstlen - 1 */\n  size_t to_move = strnlen(src1, dstlen - 1);\n  /* Copy the characters from src1 */\n  memcpy(dst, src1, to_move);\n  /* Adjust the output pointer and length */\n  dst += to_move;\n  dstlen -= to_move;\n  /* Now safely copy src2 to just after src1. */\n  to_move = strnlen(src2, dstlen - 1);\n  memcpy(dst, src2, to_move);\n  /* NUL-terminate the string */\n  dst[to_move] = 0;\n}\n</code></pre>\n\n<p>It might be that we want the original values of <code>dst</code> and <code>dstlen</code> after creating the string, and it might also be that we want to know how many bytes we inserted into <code>dst</code> in all. In that case, we would probably want to make copies of those variables before doing the copies, and save the cumulative sum of moves.</p>\n\n<p>The above assumes that we're starting with an empty output buffer, but perhaps that isn't the case. Since we still need to know where the copy will start in order to know how many characters we can put at the end, we can still use <code>memcpy</code>; we just need to scan the output buffer first to find the copy point. (Only do this if there is no alternative. Doing it in a loop instead of recording the next copy point is <a href=\"https://www.joelonsoftware.com/2001/12/11/back-to-basics/\" rel=\"nofollow noreferrer\">Shlemiel the Painter's algorithm</a>.)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* Safely append src to dst where dst has capacity dstlen and starts\n * with a string of unknown length.\n */\nif (dstlen) {\n  /* The following code will \"work\" even if the existing string\n   * is not correctly NUL-terminated; the code will not copy anything\n   * from src, but it will put a NUL terminator at the end of the\n   * output buffer.\n   */\n  /* Figure out where the existing string ends. */\n  size_t prefixlen = strnlen(dst, dstlen - 1);\n  /* Update dst and dstlen */\n  dst += prefixlen;\n  dstlen -= prefixlen;\n  /* Proceed with the append, as above. */\n  size_t to_move = strnlen(src, dstlen - 1);\n  memmove(dst, src, to_move);\n  dst[to_move] = 0;\n}\n</code></pre></li>\n<li><p><strong>Embrace <code>snprintf</code>. It really is your friend. But always check its return value.</strong></p>\n\n<p>Using <code>memmove</code>, as above, is slightly awkward. It requires you to manually check that the buffer's length is not zero (otherwise subtracting one would be disastrous since the length is unsigned), and it requires you to manually NUL-terminate the output buffer, which is easy to forget and the source of many bugs. It is very efficient, but sometimes it's worth sacrificing a little efficiency so that your code is easier to write and easier to read and verify.</p>\n\n<p>And that leads us directly to <code>snprintf</code>. For example, you can replace:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>if (dstlen) {\n  size_t to_move = strnlen(src, dstlen - 1);\n  memcpy(dst, src, to_move);\n  dst[to_move] = 0;\n}\n</code></pre>\n\n<p>with the much simpler</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int copylen = snprintf(dst, dstlen, \"%s\", src);\n</code></pre>\n\n<p>That does everything: checks that <code>dstlen</code> is not 0; only copies the characters from <code>src</code> which can fit in <code>dst</code>, and correctly NUL-terminates <code>dst</code> (unless <code>dstlen</code> was 0). And the cost is minimal; it takes very little time to parse the format string <code>\"%s\"</code> and most implementations are pretty well optimised for this case. [Note 2]</p>\n\n<p>But <code>snprintf</code> is not a panacea. There are still a couple of really important warnings.</p>\n\n<p>First, the documentation for <code>snprintf</code> makes clear that it is not permitted for any input argument to overlap the output range. (So it replaces <code>memcpy</code> but not <code>memmove</code>.) Remember that overlap includes NUL-terminators, so the following code which attempts to double the string in <code>str</code> instead leads to <em>Undefined Behaviour</em>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char str[BUFLEN];\n/* Put something into str */\nget_some_data(str, BUFLEN);\n\n/* DO NOT DO THIS: input overlaps output */\nint result = snprintf(str, BUFLEN, \"%s%s\", str, str);\n\n/* DO NOT DO THIS EITHER; IT IS STILL UB */\nsize_t len = strnlen(str, cap - 1);\nint result = snprintf(str + len, cap - len, \"%s\", str);    \n</code></pre>\n\n<p>The problem with the second invocation of <code>snprintf</code> is that the NUL which terminates <code>str</code> is precisely at <code>str + len</code>, the first byte of the output buffer. That's an overlap, so it's illegal.</p>\n\n<p>The second important note about <code>snprintf</code> is that it returns a value, which must not be ignored. The value returned is not the length of the string created by <code>snprintf</code>. It's the length the string would have been had it not been truncated to fit in the output buffer.</p>\n\n<p>If no truncation occurred, then the result is the length of the result, which must be <em>strictly less than</em> the size of the output buffer (because there must be room for a NUL terminator, which is not considered part of the length of the result.) You can use this fact to check whether truncation occurred:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>if (result &gt;= dstlen) /* Output was truncated */\n</code></pre>\n\n<p>This can be used, for example, to redo the <code>snprintf</code> with a larger, dynamically-allocated buffer (of size <code>result + 1</code>; never forget the need to NUL-terminate).</p>\n\n<p>But remember that the result is an <code>int</code> -- that is, a signed value. That means that <code>snprintf</code> cannot cope with very long strings. That's not likely to be an issue in embedded code, but on systems where it's conceivable that strings exceed 2GB, you may not be able to safely use <code>%s</code> formats in <code>snprintf</code>. It also means that <code>snprintf</code> is allowed to return a negative value to indicate an error. Very old implementations of <code>snprintf</code> returned -1 to indicate truncation, or in response to being called with buffer length 0. That's not standard behaviour according to C99 (nor recent versions of Posix), but you should be prepared for it. </p>\n\n<p>Standard-compliant implementations of <code>snprintf</code> will return a negative value if the buffer length argument is too big to fit in a (signed) <code>int</code>; it's not clear to me what the expected return value is if the buffer length is OK but the untruncated length is too big for an <code>int</code>. A negative value will also be returned if you used a conversion which resulted in an encoding error; for example, a <code>%lc</code> conversion whose corresponding argument contains an integer which cannot be converted to a multibyte (typically UTF-8) sequence.</p>\n\n<p>In short, you should always check the return value of <code>snprintf</code> (recent gcc/glibc versions will produce a warning if you do not), and you should be prepared for it to be negative.</p></li>\n</ol>\n\n<hr>\n\n<p>So, with all that behind us, let's write a function which produces a string of co-ordinate pairs:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* Arguments:\n *    buf      the output buffer.\n *    buflen   the capacity of buf (including room for trailing NUL).\n *    points   a vector of struct Point pairs.\n *    npoints  the number of objects in points.\n * Description:\n *    buf is overwritten with a comma-separated list of points enclosed in\n *    square brackets. Each point is output as a comma-separated pair of\n *    decimal floating point numbers enclosed in square brackets. No more\n *    than buflen - 1 characters are written. Unless buflen is 0, a NUL is\n *    written following the (possibly-truncated) output.\n * Return value:\n *    If the output buffer contains the full output, the number of characters\n *    written to the output buffer, not including the NUL terminator.\n *    If the output was truncated, (size_t)(-1) is returned.\n */\n size_t sprint_points(char* buf, size_t buflen,\n                      struct Point const* points, size_t npoints)\n { \n   if (buflen == 0) return (size_t)(-1);\n   size_t avail = buflen;\n   char delim = '['\n   while (npoints) {\n     int res = snprintf(buf, avail, \"%c[%f,%f]\",\n                        delim, points-&gt;lat, points-&gt;lon);\n     if (res &lt; 0 || res &gt;= avail) return (size_t)(-1);\n     buf += res; avail -= res;\n     ++points; --npoints;\n     delim = ',';\n  }\n  if (avail &lt;= 1) return (size_t)(-1);\n  strcpy(buf, \"]\");\n  return buflen - (avail - 1);\n}\n</code></pre>\n\n<h3>Notes</h3>\n\n<ol>\n<li><p>You will often see code like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>strncat(dst, src, sizeof(src)); /* NEVER EVER DO THIS! */\n</code></pre>\n\n<p>Telling <code>strncat</code> not to append more characters from <code>src</code> than can fit in <code>src</code> is obviously pointless (unless <code>src</code> is not correctly NUL-terminated, in which case you have a bigger problem). More importantly, it does <em>absolutely nothing</em> to protect you from writing beyond the end of the output buffer, since you have not done anything to check that <code>dst</code> has room for all those characters. So about all it does is get rid of compiler warnings about the unsafety of <code>strcat</code>. Since this code is <em>exactly as unsafe</em> as <code>strcat</code> was, you probably would be better off with the warning.</p></li>\n<li><p>You might even find a compiler which understands <code>snprintf</code> will enough to parse the format string at compile time, so the convenience comes at no cost at all. (And if your current compiler doesn't do this, no doubt a future version will.) As with any use of the <code>*printf</code> family, you should <em>never</em> try to economize keystrokes by \nleaving out the format string (<code>snprintf(dst, dstlen, src)</code> instead of <code>snprintf(dst, dstlen, \"%s\", src)</code>.) That's <em>unsafe</em> (it has undefined behaviour if <code>src</code> contains an unduplicated <code>%</code>). And it's <em>much slower</em> because the library function has to parse the entire string to be copied looking for percent signs, instead of just copying it to the output.</p></li>\n</ol>\n"}], "owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 52171724, "answer_count": 2, "score": 0, "last_activity_date": 1537366245, "creation_date": 1536056762, "last_edit_date": 1537366245, "question_id": 52164135, "link": "https://stackoverflow.com/questions/52164135/stray-characters-seen-at-output-of-snprintf", "title": "Stray characters seen at output of snprintf", "body": "<p>I have a string creating function in C which accepts an <code>array of structs</code> as it's argument and outputs a string based on a predefined format (like a list of list in python).<br/>\nHere's the function</p>\n\n<pre><code>typedef struct\n{\n    PacketInfo_t PacketInfo;\n    char Gnss60[1900]; \n    //and other stuff...\n} Track_json_t;\n\ntypedef struct \n{\n    double latitude;\n    double longitude;\n} GPSPoint_t;\n\ntypedef struct\n{\n    UInt16          GPS_StatusCode;\n    UInt32          fixtime;\n    GPSPoint_t      point;\n    double          altitude;\n    unsigned char GPS_Satilite_Num;\n} GPS_periodic_t;\n\nunsigned short SendTrack()\n{\n    Track_json_t i_sTrack_S;\n    memset(&amp;i_sTrack_S, 0x00, sizeof(Track_json_t));\n    getEvent_Track(&amp;i_sTrack_S);\n    //Many other stuff added to the i_sTrack_S struct...\n    //Make a JSON format out of it\n    BuildTrackPacket_json(&amp;i_sTrack_S, XPORT_MODE_GPRS);\n}\n\nTrack_json_t *getEvent_Track(Track_json_t *trk)\n{\n    GPS_periodic_t l_gps_60Sec[60];\n    memset(&amp;l_gps_60Sec, 0x00,\n           sizeof(GPS_periodic_t) * GPS_PERIODIC_ARRAY_SIZE);\n    getLastMinGPSdata(l_gps_60Sec, o_gps_base);\n    get_gps60secString(l_gps_60Sec, trk-&gt;Gnss60);\n    return trk;\n}\n\nvoid get_gps60secString(GPS_periodic_t input[60], char *output)\n{\n    int i = 0;\n    memcpy(output, \"[\", 1); ///&lt; Copy the first char as [\n    char temp[31];\n    for (i = 0; i &lt; 59; i++) { //Run for n-1 elements\n        memset(temp, 0, sizeof(temp));\n        snprintf(temp, sizeof(temp), \"[%0.8f,%0.8f],\",\n            input[i].point.latitude, input[i].point.longitude);\n        strncat(output, temp, sizeof(temp));\n    }\n    memset(temp, 0, sizeof(temp)); //assign last element\n    snprintf(temp, sizeof(temp), \"[%0.8f,%0.8f]]\",\n             input[i].point.latitude, input[i].point.longitude);\n    strncat(output, temp, sizeof(temp));\n}\n</code></pre>\n\n<p>So the output of the function must be a string of format</p>\n\n<blockquote>\n  <p>[[12.12345678,12.12345678],[12.12345678,12.12345678],...]</p>\n</blockquote>\n\n<p>But at times I get a string which looks like</p>\n\n<blockquote>\n  <p>[[12.12345678,12.12345678],<strong>[55.01</strong>[12.12345678,12.12345678],...]<br/>\n  [[21.28211567,84.13454083],<strong>[21.28211533,21.22</strong>[21.28211517,84.13454000],..]</p>\n</blockquote>\n\n<p>Previously, I had a buffer overflow at the function <code>get_gps60secString</code>, I fixed that by using <code>snprintf</code> and <code>strncat</code>. </p>\n\n<p>Note: This is an embedded application and this error occur once or twice a day (out of 1440 packets)<br/></p>\n\n<p><strong>Question</strong><br/>\n1. Could this be caused by an interrupt during the snprintf/strncat process?<br/>\n2. Could this be caused by a memory leak, overwriting the stack or some other segmentation issue caused else where?<br/>\nBasically I would like to understand what might be causing a corrupt string.</p>\n\n<p>Having a hard time finding the cause and fixing this bug.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong><br/>\nI used <code>chux's</code> function. Below is the Minimal, Complete, and Verifiable Example</p>\n\n<pre><code>/*\n * Test code for SO question https://stackoverflow.com/questions/5216413\n * A Minimal, Complete, and Verifiable Example\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n\ntypedef unsigned short UInt16;\ntypedef unsigned long  UInt32;\n\n#define GPS_PERIODIC_ARRAY_SIZE  60\n#define GPS_STRING_SIZE          1900\n\n/* ---------------------- Data Structs --------------------------*/\ntypedef struct\n{\n    char Gnss60[GPS_STRING_SIZE];\n} Track_json_t;\n\ntypedef struct\n{\n    double          latitude;\n    double          longitude;\n} GPSPoint_t;\n\ntypedef struct\n{\n    UInt16          GPS_StatusCode;\n    UInt32          fixtime;\n    GPSPoint_t      point;\n    double          altitude;\n    unsigned char GPS_Satilite_Num;\n} GPS_periodic_t;\n\n/* ----------------------- Global --------------------------------*/\nFILE *fptr; //Global file pointer\nint res = 0;\nint g_last = 0;\nGPS_periodic_t l_gps_60Sec[GPS_PERIODIC_ARRAY_SIZE];\n\n/* ----------------------- Function defs --------------------------*/\n\n/* At signal interrupt this function is called.\n * Flush and close the file. And safly exit the program */\nvoid userSignalInterrupt()\n{\n    fflush(fptr);\n    fclose(fptr);\n    res = 1;\n    exit(0);\n}\n\n/* @brief From the array of GPS structs we create a string of the format\n * [[lat,long],[lat,long],..]\n * @param   input   The input array of GPS structs\n * @param   output  The output string which will contain lat, long\n * @param   sz      Size left in the output buffer\n * @return  0       Successfully completed operation\n *          1       Failed / Error\n */\nint get_gps60secString(GPS_periodic_t input[GPS_PERIODIC_ARRAY_SIZE], \n                       char *output, size_t sz) \n{\n    int cnt = snprintf(output, sz, \"[\");\n    if (cnt &lt; 0 || cnt &gt;= sz)\n        return 1;\n    output += cnt;\n    sz -= cnt;\n\n    int i = 0;\n    for (i = 0; i &lt; GPS_PERIODIC_ARRAY_SIZE; i++) {\n        cnt = snprintf(output, sz, \"[%0.8f,%0.8f]%s\", \n                input[i].point.latitude, input[i].point.longitude, \n                i + 1 == GPS_PERIODIC_ARRAY_SIZE ? \"\" : \",\");\n        if (cnt &lt; 0 || cnt &gt;= sz)\n            return 1;\n        output += cnt;\n        sz -= cnt;\n    }\n\n    cnt = snprintf(output, sz, \"]\");\n    if (cnt &lt; 0 || cnt &gt;= sz)\n        return 1;\n    return 0; // no error\n}\n\n/* @brief   Create a GPS struct with data for testing. It will populate the\n * point field of GPS_periodic_t. Lat starts from 0.0 and increases by 1*10^(-8)\n * and Long will dstart at 99.99999999 and dec by 1*10^(-8)\n *\n * @param   o_gps_60sec Output array of GPS structs\n */\nvoid getLastMinGPSdata(GPS_periodic_t *o_gps_60sec)\n{\n    //Fill in GPS related data here\n    int i = 0;\n    double latitude = o_gps_60sec[0].point.latitude;\n    double longitude = o_gps_60sec[0].point.longitude;\n    for (i = 0; i &lt; 60; i++)\n    {\n        o_gps_60sec[i].point.latitude = latitude +  (0.00000001 * (float)g_last + \n                                        0.00000001 * (float)i);\n        o_gps_60sec[i].point.longitude = longitude -  (0.00000001 * (float)g_last + \n                                        0.00000001 * (float)i);\n    }\n    g_last = 60;\n}\n\n/* @brief   Get the GPS data and convert it into a string\n * @param   trk Track structure with GPS string\n */\nint getEvent_Track(Track_json_t *trk)\n{\n    getLastMinGPSdata(l_gps_60Sec);\n    get_gps60secString(l_gps_60Sec, trk-&gt;Gnss60, GPS_STRING_SIZE);\n\n    return 0;\n}\n\nint main()\n{\n    fptr = fopen(\"gpsAno.txt\", \"a\");\n    if (fptr == NULL) {\n        printf(\"Error!!\\n\");\n        exit(1);\n    }\n\n    //Quit at signal interrupt\n    signal(SIGINT, userSignalInterrupt);\n\n    Track_json_t trk;\n    memset(&amp;l_gps_60Sec, 0x00, sizeof(GPS_periodic_t) * GPS_PERIODIC_ARRAY_SIZE);\n\n    //Init Points to be zero and 99.99999999\n    int i = 0;\n    for (i = 0; i &lt; 60; i++) {\n        l_gps_60Sec[i].point.latitude =  00.00000000;\n        l_gps_60Sec[i].point.longitude = 99.99999999;\n    }\n\n    do {\n        memset(&amp;trk, 0, sizeof(Track_json_t));\n        getEvent_Track(&amp;trk);\n\n        //Write to file\n        fprintf(fptr, \"%s\", trk.Gnss60);\n        fflush(fptr);\n        sleep(1);\n    } while (res == 0);\n\n    //close and exit\n    fclose(fptr);\n    return  0;\n}\n</code></pre>\n\n<p><strong>Note</strong>: Error was not recreated in the above code.<br/>\nBecause this doesn't have the <code>strcat</code> pitfalls.\nI tested this function in the embedded application.\nThrough this I was able to find that the <code>snprintf</code> returns an error and the string created ended up to be:<br/></p>\n\n<blockquote>\n  <p>[17.42401750,78.46098717],[17.42402083,<strong>53.62</strong></p>\n</blockquote>\n\n<p>It ended there (because of the <code>return 1</code>). </p>\n\n<p>Does this mean that the data which was passed to <code>snprints</code> corrupted? It's a float value. How can it get corrupted?</p>\n\n<p><strong>Solution</strong><br/>\nThe error have not been seen since I changed the <code>sprintf</code> function with one that doesn't directly deal with 64 bits of data.</p>\n\n<p>Here's the function <code>modp_dtoa2</code></p>\n\n<pre><code>/** \\brief convert a floating point number to char buffer with a\n *         variable-precision format, and no trailing zeros\n *\n * This is similar to \"%.[0-9]f\" in the printf style, except it will\n * NOT include trailing zeros after the decimal point.  This type\n * of format oddly does not exists with printf.\n *\n * If the input value is greater than 1&lt;&lt;31, then the output format\n * will be switched exponential format.\n *\n * \\param[in] value\n * \\param[out] buf  The allocated output buffer.  Should be 32 chars or more.\n * \\param[in] precision  Number of digits to the right of the decimal point.\n *    Can only be 0-9.\n */\nvoid modp_dtoa2(double value, char* str, int prec)\n{\n    /* if input is larger than thres_max, revert to exponential */\n    const double thres_max = (double)(0x7FFFFFFF);\n    int count;\n    double diff = 0.0;\n    char* wstr = str;\n    int neg= 0;\n    int whole;\n    double tmp;\n    uint32_t frac;\n\n    /* Hacky test for NaN\n     * under -fast-math this won't work, but then you also won't\n     * have correct nan values anyways.  The alternative is\n     * to link with libmath (bad) or hack IEEE double bits (bad)\n     */\n    if (! (value == value)) {\n        str[0] = 'n'; str[1] = 'a'; str[2] = 'n'; str[3] = '\\0';\n        return;\n    }\n\n    if (prec &lt; 0) {\n        prec = 0;\n    } else if (prec &gt; 9) {\n        /* precision of &gt;= 10 can lead to overflow errors */\n        prec = 9;\n    }\n\n    /* we'll work in positive values and deal with the\n       negative sign issue later */\n    if (value &lt; 0) {\n        neg = 1;\n        value = -value;\n    }\n\n\n    whole = (int) value;\n    tmp = (value - whole) * pow10[prec];\n    frac = (uint32_t)(tmp);\n    diff = tmp - frac;\n\n    if (diff &gt; 0.5) {\n        ++frac;\n        /* handle rollover, e.g.  case 0.99 with prec 1 is 1.0  */\n        if (frac &gt;= pow10[prec]) {\n            frac = 0;\n            ++whole;\n        }\n    } else if (diff == 0.5 &amp;&amp; ((frac == 0) || (frac &amp; 1))) {\n        /* if halfway, round up if odd, OR\n           if last digit is 0.  That last part is strange */\n        ++frac;\n    }\n\n    /* for very large numbers switch back to native sprintf for exponentials.\n       anyone want to write code to replace this? */\n    /*\n      normal printf behavior is to print EVERY whole number digit\n      which can be 100s of characters overflowing your buffers == bad\n    */\n    if (value &gt; thres_max) {\n        sprintf(str, \"%e\", neg ? -value : value);\n        return;\n    }\n\n    if (prec == 0) {\n        diff = value - whole;\n        if (diff &gt; 0.5) {\n            /* greater than 0.5, round up, e.g. 1.6 -&gt; 2 */\n            ++whole;\n        } else if (diff == 0.5 &amp;&amp; (whole &amp; 1)) {\n            /* exactly 0.5 and ODD, then round up */\n            /* 1.5 -&gt; 2, but 2.5 -&gt; 2 */\n            ++whole;\n        }\n\n        //vvvvvvvvvvvvvvvvvvv  Diff from modp_dto2\n    } else if (frac) {\n        count = prec;\n        // now do fractional part, as an unsigned number\n        // we know it is not 0 but we can have leading zeros, these\n        // should be removed\n        while (!(frac % 10)) {\n            --count;\n            frac /= 10;\n        }\n        //^^^^^^^^^^^^^^^^^^^  Diff from modp_dto2\n\n        // now do fractional part, as an unsigned number\n        do {\n            --count;\n            *wstr++ = (char)(48 + (frac % 10));\n        } while (frac /= 10);\n        // add extra 0s\n        while (count-- &gt; 0) *wstr++ = '0';\n        // add decimal\n        *wstr++ = '.';\n    }\n\n    // do whole part\n    // Take care of sign\n    // Conversion. Number is reversed.\n    do *wstr++ = (char)(48 + (whole % 10)); while (whole /= 10);\n    if (neg) {\n        *wstr++ = '-';\n    }\n    *wstr='\\0';\n    strreverse(str, wstr-1);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "parameters", "mingw"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1536056957, "post_id": 52164078, "comment_id": 91277773, "body": "<code>arr[]</code> is a point.  <code>sizeof(arr)&#47;sizeof(arr[0]);</code> is size of a pointer/size of of an <code>int</code>.  No arrays involved."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 3, "creation_date": 1536057006, "post_id": 52164078, "comment_id": 91277801, "body": "In practice in C, every function taking an array should be given the size of that array, often thru some other argument"}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 1, "creation_date": 1536058054, "post_id": 52164078, "comment_id": 91278421, "body": "size of <code>int</code> depends on the compiler, but compiler may theoretically change it based on target platform, CPU or compiler switches."}], "answers": [{"comments": [{"owner": {"reputation": 866, "user_id": 4648976, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GGoxE.png?s=128&g=1", "display_name": "mustangDC", "link": "https://stackoverflow.com/users/4648976/mustangdc"}, "edited": false, "score": 0, "creation_date": 1536058669, "post_id": 52164274, "comment_id": 91278798, "body": "The question mentioned above was on a code competition platform which follows GCC 6.3. So, i think it would be better to preassume that similar platform will follow th 2:1 ration?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 866, "user_id": 4648976, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GGoxE.png?s=128&g=1", "display_name": "mustangDC", "link": "https://stackoverflow.com/users/4648976/mustangdc"}, "edited": false, "score": 1, "creation_date": 1536059875, "post_id": 52164274, "comment_id": 91279544, "body": "@mustangDC A reasonable <a href=\"https://stackoverflow.com/questions/52164078/is-variable-size-in-c-compiler-dependent/52164274?noredirect=1#comment91278798_52164274\">assumption</a>, although robust code does not rely on that 2:1 ratio."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1536057774, "last_edit_date": 1536057774, "creation_date": 1536057241, "answer_id": 52164274, "question_id": 52164078, "link": "https://stackoverflow.com/questions/52164078/is-variable-size-in-c-compiler-dependent/52164274#52164274", "title": "Is Variable size in C compiler dependent?", "body": "<p><code>arr[]</code>, as a function parameter, is a pointer.  <code>sizeof(arr)/sizeof(arr[0]);</code> is the size of a pointer/size of of an <code>int</code>.  No arrays involved.  </p>\n\n<blockquote>\n  <p>Is Variable size in C compiler dependent?</p>\n</blockquote>\n\n<p>Yes, an <code>int</code> could be 32-bit, 16-bit, etc.<sup>1</sup> (Must be at least 16)</p>\n\n<p>An object pointer could be 16-bit, 32-bit, 64-bit, or etc.<sup>1</sup> (Must be at least 16)</p>\n\n<p>A pointer is often wider than an <code>int</code>, yet could be the same or (rarely) less.  The ratio could be 2/1 or 1/1 or others.</p>\n\n<hr>\n\n<p><sup>1</sup> Other sizes are possible and have been employed such as 36-bit <code>int</code> or 48-bit object pointer.  This is C's ability to adopt to just about any processor ever built and likely to all new ones.  The flexibility comes at the expense that <em>portable</em> code must account for these variations.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 4, "creation_date": 1536059149, "post_id": 52164310, "comment_id": 91279087, "body": "The sizes of types are ultimately determined by the C implementation (notably the compiler), not the architecture or the operating system. While C implementations are usually heavily influenced by the architecture, computers are effectively Universal Turing Machines, so that any desired choices for sizes can be implemented. C implementations sometimes choose sizes based on considerations of what source code is to be supported rather than what is most efficient for the architecture. They may even support a choice of sizes via command-line switches."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536061784, "post_id": 52164310, "comment_id": 91280778, "body": "Agree Eric. Thanks for sharing that."}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1536062177, "last_edit_date": 1536062177, "creation_date": 1536057325, "answer_id": 52164310, "question_id": 52164078, "link": "https://stackoverflow.com/questions/52164078/is-variable-size-in-c-compiler-dependent/52164310#52164310", "title": "Is Variable size in C compiler dependent?", "body": "<p><code>Are the variable sizes compiler dependent ?</code> Yes it depends on the compiler but that doesn't mean architecture point of view is irrelevant  . Also it depends on architecture whether it's <code>16/32/64</code> bit system for e.g, in <code>16-bit</code> machines, <code>sizeof (int)</code> is <code>2</code> bytes, in <code>32-bit</code> machines it's of  <code>4</code> bytes.</p>\n\n<p>It has been considered <code>int</code> was the native size of a processor, i.e., the size of register. </p>\n\n<p>Here in function argument <code>arr[]</code>\u00a0is a pointer not an array.</p>\n\n<p>So if system is <code>32</code> bit system then </p>\n\n<p><code>sizeof(arr)/sizeof(arr[0]);</code></p>\n\n<p>Will result in <code>1</code> as <code>4/4 = 1</code>.</p>\n\n<p>I find @Eric comments very true &amp; interesting about compiler and architecture role in defining variable size.</p>\n\n<blockquote>\n  <p>The sizes of types are ultimately determined by the C implementation\n  (notably the compiler), not the architecture or the operating system.\n  While C implementations are usually heavily influenced by the\n  architecture, computers are effectively Universal Turing Machines, so\n  that any desired choices for sizes can be implemented. C\n  implementations sometimes choose sizes based on considerations of what\n  source code is to be supported rather than what is most efficient for\n  the architecture. They may even support a choice of sizes via\n  command-line switches.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1536060464, "creation_date": 1536060464, "answer_id": 52165275, "question_id": 52164078, "link": "https://stackoverflow.com/questions/52164078/is-variable-size-in-c-compiler-dependent/52165275#52165275", "title": "Is Variable size in C compiler dependent?", "body": "<p>Yes, the sizes of types are implementation-dependent. In particular, the size of a pointer to <code>int</code> and the size of an <code>int</code> are dependent on the C implementation (primarily a compiler) and may be different from each other.</p>\n\n<p>The assertion in the question contained in \u201cthe base address of the array(<em>which is 4 bytes for an implicit pointer variable and integer variable both</em>)\u201d is false, in general. It is true in some C implementations but is false in others.</p>\n\n<p>The code <code>sizeof(arr)/sizeof(arr[0])</code> inside a function declared with <code>void print(int arr[])</code> prints the size of a pointer to <code>int</code> divided by the size of an <code>int</code>.</p>\n\n<p>While C implementations are heavily influenced by the architectures and the operating systems they target, they may choose the sizes of their types for reasons other than execution speed, such as goals of supporting smaller memory use, supporting code that was not written to be fully portable to any type sizes, or supporting easier use of big integers.</p>\n"}], "owner": {"reputation": 866, "user_id": 4648976, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GGoxE.png?s=128&g=1", "display_name": "mustangDC", "link": "https://stackoverflow.com/users/4648976/mustangdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 52164274, "answer_count": 3, "score": 2, "last_activity_date": 1536062177, "creation_date": 1536056570, "question_id": 52164078, "link": "https://stackoverflow.com/questions/52164078/is-variable-size-in-c-compiler-dependent", "title": "Is Variable size in C compiler dependent?", "body": "<p>Considering the following code:</p>\n\n<pre><code>void print(int arr[])\n{\n  int n = sizeof(arr)/sizeof(arr[0]);\n  printf(\"\\nSize is  %d\",n);\n}\n\nint main()\n{\n    int arr[]={1,2,3,4,5,6};\n    print(arr);\n    return 0;\n}\n</code></pre>\n\n<ul>\n<li>When the above code is compiled in GCC 6.3 or a lesser version, The output is :\n<code>size is 2</code>.</li>\n<li>When the code is compiled in MinGW compiler, the output is <code>Size is 1</code></li>\n</ul>\n\n<p>Now to the contrary, we used to study that when an array is passed as an argument, it only passes the base address of the array(<em>which is 4 bytes for an implicit pointer variable and integer variable both</em>). </p>\n\n<p>Are the variable sizes compiler dependent, or I am missing something here? Please correct me </p>\n"}, {"tags": ["c", "visual-studio", "code-coverage"], "comments": [{"owner": {"reputation": 1633, "user_id": 7639034, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x3qat.jpg?s=128&g=1", "display_name": "Code_Ninja", "link": "https://stackoverflow.com/users/7639034/code-ninja"}, "edited": false, "score": 0, "creation_date": 1536057421, "post_id": 52164022, "comment_id": 91278040, "body": "I think this question is better asked from Google, research and understanding are your own. You have to try first on your own then put up a question if necessary. Welcome to SO community."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8561770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cab71748a04c024ceba161dbd28a3c?s=128&d=identicon&r=PG&f=1", "display_name": "B N K", "link": "https://stackoverflow.com/users/8561770/b-n-k"}, "edited": false, "score": 0, "creation_date": 1551695139, "post_id": 53367071, "comment_id": 96720412, "body": "<a href=\"http://www.cs.ubbcluj.ro/~rusu/oop/demo/Code_coverage.pdf\" rel=\"nofollow noreferrer\">cs.ubbcluj.ro/~rusu/oop/demo/Code_coverage.pdf</a> URL not found"}], "tags": [], "owner": {"reputation": 141, "user_id": 2320492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38658a96ae3e866ef70a44cba6201d53?s=128&d=identicon&r=PG", "display_name": "user2320492", "link": "https://stackoverflow.com/users/2320492/user2320492"}, "is_accepted": false, "score": 0, "last_activity_date": 1542589394, "creation_date": 1542589394, "answer_id": 53367071, "question_id": 52164022, "link": "https://stackoverflow.com/questions/52164022/how-to-use-opencppcoverage-for-existing-source-code-of-c-language/53367071#53367071", "title": "How to use &#39;OpenCppCoverage&#39; for existing source code of C language?", "body": "<p>Here is a very good documentation on how to use OPENCPPCOVERAGE on already exists code:</p>\n\n<p><a href=\"http://www.cs.ubbcluj.ro/~rusu/oop/demo/Code_coverage.pdf\" rel=\"nofollow noreferrer\">SETTING UP OPENCPPCOVERAGE WITH VISUAL STUDIO </a></p>\n"}], "owner": {"reputation": 1, "user_id": 8561770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cab71748a04c024ceba161dbd28a3c?s=128&d=identicon&r=PG&f=1", "display_name": "B N K", "link": "https://stackoverflow.com/users/8561770/b-n-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 493, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542589394, "creation_date": 1536056353, "question_id": 52164022, "link": "https://stackoverflow.com/questions/52164022/how-to-use-opencppcoverage-for-existing-source-code-of-c-language", "title": "How to use &#39;OpenCppCoverage&#39; for existing source code of C language?", "body": "<p>how to open the existing C source code project of multiple folders and how to test the code coverage for selective C files by using the OpenCppCoverage plugin in Visual studio 2017?</p>\n\n<p>What are the steps? Can anyone help me on this?</p>\n"}, {"tags": ["c", "boolean", "language-lawyer", "c11", "strict-aliasing"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536056398, "post_id": 52163870, "comment_id": 91277473, "body": "6.7.2.1 has interesting footnote that may be relevant: <i>&quot;124) While the number of bits in a _Bool object is at least CHAR_BIT, the width (number of sign and value bits) of a _Bool may be just 1 bit.&quot;</i>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536058195, "post_id": 52163870, "comment_id": 91278512, "body": "@user694733 That&#39;s a non-normative foot note regarding the use of <i>bit-fields</i>. I don&#39;t see how it is relevant here."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1536058419, "post_id": 52163870, "comment_id": 91278659, "body": "How can the output be <code>42 42</code>? The second printf can only print 1 or 0."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536058543, "post_id": 52163870, "comment_id": 91278739, "body": "@StoryTeller Indeed. But that&#39;s what I get with gcc/mingw, hence the question. Maybe a bug in the standard lib?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1536058692, "post_id": 52163870, "comment_id": 91278810, "body": "<a href=\"http://coliru.stacked-crooked.com/a/fa18f68fdfc0b6a6\" rel=\"nofollow noreferrer\">O_O I tried it</a>. My mind is seriously blown right now. This joins my collection of UB examples."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536058870, "post_id": 52163870, "comment_id": 91278906, "body": "@StoryTeller <i>Why</i> is it UB though?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1536058975, "post_id": 52163870, "comment_id": 91278964, "body": "I don&#39;t know. Though I was initially shocked by the second 42, it kinda makes sense in retrospect. Because <code>b != 0</code> for a <code>_Bool</code> can be optimized to simply <code>b</code>. I&#39;m scratching my head still though."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1536059075, "post_id": 52163870, "comment_id": 91279046, "body": "@RbMm Character types are an exception in strict aliasing rules. Optimizer cannot cause UB based on that here."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1536060345, "post_id": 52163870, "comment_id": 91279874, "body": "In a similar example, the <code>_Bool</code> optimization combines with optimizations for transforming branches to arithmetic operations, producing strange-looking results for very natural code. The optimization of <code>if (b) x++;</code> into <code>x+=(the representation of )b;</code> confirms that Clang treats <code>_Bool</code> representations other than <code>0</code> and <code>1</code> as trap values triggering UB. <a href=\"https://gcc.godbolt.org/z/wPq4zq\" rel=\"nofollow noreferrer\">gcc.godbolt.org/z/wPq4zq</a>"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536089159, "post_id": 52163870, "comment_id": 91296234, "body": "@user694733 The aliasing rules are asymmetric with respect to character types.  When the effective type of a datum is a non-character type, you can access that datum via a character type. But when the effective type of a datum is a character type, you can <i>not</i> access that datum via a non-character type."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1536112869, "post_id": 52163870, "comment_id": 91302642, "body": "Please post the assembly code for the posted question.  Then we can easily determine what the compiler was thinking"}], "answers": [{"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1536059158, "post_id": 52164804, "comment_id": 91279095, "body": "So <code>_Bool a; *(unsigned char*)&amp;a = 42; printf(&quot;%d&quot;, *(unsigned char*)&amp;a);</code> is valid?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1536059243, "post_id": 52164804, "comment_id": 91279150, "body": "@KamilCuk As far as I know, yes, that is perfectly valid."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536059342, "post_id": 52164804, "comment_id": 91279218, "body": "Isn&#39;t the existence trap representation implementation defined? In that case it wouldn&#39;t be UB always."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1536059416, "post_id": 52164804, "comment_id": 91279252, "body": "@user694733 - It doesn&#39;t need to be a trap representation to have UB. The quote above doesn&#39;t at all require the access to trap. Simply yielding 42 for a <code>_Bool</code> is enough UB."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536059473, "post_id": 52164804, "comment_id": 91279282, "body": "@StoryTeller Quotation is missing lower half of the paragraph which says: <i>&quot;Such a representation is called a trap representation.&quot;</i>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536059591, "post_id": 52164804, "comment_id": 91279360, "body": "@user694733 You&#39;re right that this is a trap representation regardless of what behaviour the implementation gives it. As for implementation-defined, I don&#39;t think so. There are types for which certain implementation-defined aspects allow us to deduce that there are no trap representations (such as <code>sizeof(int) * CHAR_BIT == 32 &amp;&amp; INT_MIN+1 == -2147483647 &amp;&amp; INT_MAX == 2147483647</code>), but no blanket requirement to document all trap representations."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536059664, "post_id": 52164804, "comment_id": 91279406, "body": "@user694733 - Fair enough. Though I think the definition in <a href=\"https://port70.net/~nsz/c/c11/n1570.html#3.19.4\" rel=\"nofollow noreferrer\">3.19.4</a> is more satisfactory in this case. It&#39;s simply not a valid representation of a bool. Ergo, UB."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536060558, "post_id": 52164804, "comment_id": 91280001, "body": "I agree with the previous comments, this is merely the formal definition of a trap representation. I&#39;ve never heard of booleans with trap representation. How do you explain this? <a href=\"http://coliru.stacked-crooked.com/a/8b5ede2a92714caf\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/8b5ede2a92714caf</a> The output is <code>42 42</code>. Yet C17 6.2.6.1 &#167;6 says &quot;The value of a structure or union object is never a trap representation&quot;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1536060689, "post_id": 52164804, "comment_id": 91280093, "body": "Actually the linked snippet is even stranger since there&#39;s an assignment from _Bool to _Bool and the compiler had a chance to assume 0 or 1."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1536060735, "post_id": 52164804, "comment_id": 91280114, "body": "@Lundin <code>no_trap_t no_trap = {b};</code> is still invalid because it reads a trap representation. What p6 means is that if that were valid (or if you get a trap representation in a structure member some other way), then performing <code>no_trap = no_trap;</code> is also valid: even though it copies a member which has a trap representation, the structure as a whole does not."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536061164, "post_id": 52164804, "comment_id": 91280374, "body": "6.2.6.2 p1 and it&#39;s footnote 53 (non-normative I know, but displays intent of standard) seem to suggest that unsigned integer types (incl. <code>_Bool</code> according 6.2.5 p6) can have combinations of padding bytes that are not trap reps. In that case it would be possible have conforming program which would give output <code>0 0</code> (assuming LSB is value bit and rest are padding)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536061523, "post_id": 52164804, "comment_id": 91280601, "body": "@user694733 Yes, an implementation is allowed to decide that. There is a requirement that all bits zero is a valid representation of zero for all integer types (6.2.6.2p5), but it need not be the only valid representation of zero."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1536079716, "post_id": 52164804, "comment_id": 91292187, "body": "@Lundin: The purpose of guaranteeing that a struct or union is never a trap representation is essentially to say that a compiler may only replace struct assignment with member-by-member assignment if there are no possible bit patternss the structure might hold that would cause such operations to have side-effects.  If a struct member holds a bit pattern which is a trap representation or shares its meaning with any other, I think the Standard allows the corresponding member of the destination structure to hold any equivalent bit pattern (or any pattern at all if source is a trap rep)."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 8, "last_activity_date": 1536058881, "last_edit_date": 1592644375, "creation_date": 1536058881, "answer_id": 52164804, "question_id": 52163870, "link": "https://stackoverflow.com/questions/52163870/bool-type-and-strict-aliasing/52164804#52164804", "title": "_Bool type and strict aliasing", "body": "<blockquote>\n<p>Q1: Why is this? Does the above code contain undefined behavior?</p>\n</blockquote>\n<p>Yes, it does. The store is valid, but subsequently reading that as a <code>_Bool</code> is not.</p>\n<blockquote>\n<p><strong>6.2.6 Representations of types</strong></p>\n<p><strong>6.2.6.1 General</strong></p>\n<p>5 Certain object representations need not represent a value of the object type.  If the stored value of an object has such a representation and is read by an lvalue expression that does not  have  character  type,  the  behavior  is  undefined. [...]</p>\n</blockquote>\n\n<blockquote>\n<p>Q2: How reliable is <code>sizeof(_Bool)</code>? C17 6.5.3.4 does not mention <code>_Bool</code> at all.</p>\n</blockquote>\n<p>It will reliably tell you the number of bytes that are needed to store one <code>_Bool</code>. 6.5.3.4 also doesn't mention <code>int</code>, but you're not asking whether <code>sizeof(int)</code> is reliable, are you?</p>\n"}], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 52164804, "answer_count": 1, "score": 7, "last_activity_date": 1582193357, "creation_date": 1536055759, "last_edit_date": 1582193357, "question_id": 52163870, "link": "https://stackoverflow.com/questions/52163870/bool-type-and-strict-aliasing", "title": "_Bool type and strict aliasing", "body": "<p>I was trying to write some macros for type safe use of <code>_Bool</code> and then stress test my code. For evil testing purposes, I came up with this dirty hack:</p>\n\n<pre><code>_Bool b=0;\n*(unsigned char*)&amp;b = 42;\n</code></pre>\n\n<p>Given that <code>_Bool</code> is 1 byte on the implementation <code>sizeof(_Bool)==1</code>), I don't see how this hack violates the C standard. It shouldn't be a strict aliasing violation.</p>\n\n<p>Yet when running this program through various compilers, I get problems:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  _Static_assert(sizeof(_Bool)==1, \"_Bool is not 1 byte\");\n\n  _Bool b=0;\n  *(unsigned char*)&amp;b = 42;\n  printf(\"%d \", b);\n  printf(\"%d\", b!=0 );\n\n  return 0;\n}\n</code></pre>\n\n<p>(The code relies on <code>printf</code> implicit default argument promotion to <code>int</code>)</p>\n\n<p>Some versions of gcc and clang give output <code>42 42</code>, others give <code>0 0</code>. Even with optimizations disabled. I would have expected <code>42 1</code>. </p>\n\n<p>It would seem that the compilers assume that <code>_Bool</code> can only be <code>1</code> or <code>0</code>, yet at the same time it happily prints <code>42</code> in the first case.</p>\n\n<p>Q1: Why is this? Does the above code contain undefined behavior? </p>\n\n<p>Q2: How reliable is <code>sizeof(_Bool)</code>? C17 6.5.3.4 does not mention <code>_Bool</code> at all.</p>\n"}]