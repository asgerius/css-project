[{"tags": ["c", "windows", "assembly", "x86-64", "delimited-continuations"], "comments": [{"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 3, "creation_date": 1530146519, "post_id": 51072857, "comment_id": 89135966, "body": "Absolutely it&#39;s possible.  The article references some tools/libraries. See <a href=\"https://www.openmp.org/resources/openmp-compilers-tools/\" rel=\"nofollow noreferrer\">openmp.org/resources/openmp-compilers-tools</a>"}, {"owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "reply_to_user": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1530475266, "post_id": 51072857, "comment_id": 89238124, "body": "@jwdonahue Any whitepapers I should be looking at? I&#39;d like to see what others have done already. I haven&#39;t found much. Putting a bounty on this for an authoritative answer/reference."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530475937, "post_id": 51072857, "comment_id": 89238275, "body": "what is sense of all this ? what you really want/need implement ?"}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1530530459, "post_id": 51128305, "comment_id": 89254077, "body": "If you can make <code>spawn</code> look to your compiler like a non-inline function call, you can skip saving all the call-clobbered registers.  (Like you&#39;d do for a context-switch function in a kernel or user-space threads). That includes all the x87 regs, but on x64 Windows xmm6..15 are call-preserved along with many of the integer regs.  (Only the xmm part, though, not the YMM/ZMM upper lanes.  You can save/restore with non-VEX <code>movaps xmm</code>.)  Or if you really need to save/restore the full FPU state, there&#39;s <code>xsaveopt</code> that can get MXCSR and the x87 status reg."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1530535489, "post_id": 51128305, "comment_id": 89257103, "body": "Good point.  So there are two issues: knowing at the spawn site which registers don&#39;t need to be saved (or as I have suggested, conning your compiler into making that set as small as possible by forcing it to spill) and knowing which registers to <i>restore</i> when the spawned function/child function.  If that set is function-call-site specific then your thread switcher gets more complicated; otherise how does it know?  Or you can setlle on a scheme which defines a constant set of registers to save/restore, and implement with that."}], "tags": [], "owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "is_accepted": true, "score": 3, "last_activity_date": 1530889420, "last_edit_date": 1530889420, "creation_date": 1530496464, "answer_id": 51128305, "question_id": 51072857, "link": "https://stackoverflow.com/questions/51072857/practical-delimited-continuations-in-c-x64-asm/51128305#51128305", "title": "Practical Delimited Continuations in C / x64 ASM", "body": "<p>I've implemented <a href=\"http://www.semdesigns.com/Products/Parlanse/index.html?site=StackOverflow\" rel=\"nofollow noreferrer\">work stealing for a HLL called PARLANSE</a> rather than C on an x86.  PARLANSE is used daily to build production symbolic parallel programs at the million line scale.</p>\n\n<p>In general, you have preserve the registers of both the continuation or the \"child\".\nConsider that your compiler may see a computation in f() and see the same computation in g(), and might lift that computation to the point just before the spawn, and place that computation result in a register that both f() and g() use as in implied parameter.\nYes, this assumes a sophisticated compiler, but if you are using a stupid compiler that doesn't optimize, why are you trying to go parallel for speed?</p>\n\n<p>In specific, however, your compiler could arrange for the registers to be empty before the call to spawn if it understood what spawn means.    Then neither the continuation or the child has to preserve registers. (The PARLANSE compiler in fact does this). </p>\n\n<p>So how much has to be saved depends on how much your compiler is willing to help, and that depends on whether it knows what spawn really does.</p>\n\n<p>Your local friendly C compiler likely doesn't know about <em>your</em> implementation of spawn.  So either you do something to force a register flush (don't ask me, its your compiler) or you put up with the fact that you personally don't know what's in the registers, and your implementation preserves them all to be safe.</p>\n\n<p>If the amount of work spawned is significant, arguably it wouldn't matter if  you saved all the registers.    However, the x86 (and other modern architectures) seems have an enormous amount of state, mostly in the vector registers, that might be in use; last time I looked it was well in excess of 500 bytes ~~ 100 writes to memory to save these and IMHO that's an excessive price.   If you don't believe these registers are going to be passed from the parent thread to the spawned thread, then you can work on enforcing spawn with no registers.</p>\n\n<p>If you spawn routine wakes up using a standard continuation mechanism you have invented, then you have worry about whether your continuations pass large register state or not, also.   Same problem, same solutions as for spawn; the compiler has to help or you personally have to intervene.</p>\n\n<p>You'll find this a lot of fun.</p>\n\n<p>[If you want to make it really interesting, try timeslicing the threads in case they go into deep computation without an occasional yeild causing thread starvation.  Now you surely have save the entire state.   I managed to get PARLANSE to realize spawning with no registers saved, yet have the time slicing save/restore full register state, by saving full state on a time slice, and continuing at a special place that refilled all the registers before it passed control to the time-sliced PC location].</p>\n"}], "owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 51128305, "answer_count": 1, "score": 4, "last_activity_date": 1530889420, "creation_date": 1530143198, "last_edit_date": 1530385654, "question_id": 51072857, "link": "https://stackoverflow.com/questions/51072857/practical-delimited-continuations-in-c-x64-asm", "title": "Practical Delimited Continuations in C / x64 ASM", "body": "<p>I've look at a paper called <a href=\"http://open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3872.pdf\" rel=\"nofollow noreferrer\">A Primer on Scheduling Fork-Join Parallelism with Work Stealing</a>. I want to implement continuation stealing, where the rest of the code after calling <code>spawn</code> is eligible to be stolen. Here's the code from the paper.</p>\n\n<pre><code>1 e();\n2 spawn f(); \n3 g();\n4 sync;\n5 h();\n</code></pre>\n\n<blockquote>\n  <p>An import design choice is which branch to offer to thief threads.\n  Using Figure 1, the choices are:</p>\n  \n  <p>Child Stealing:</p>\n  \n  <ul>\n  <li>f() is made available to thief threads.</li>\n  <li>The thread that executed e() executes g(). </li>\n  </ul>\n  \n  <p>Continuation Stealing: </p>\n  \n  <ul>\n  <li>Also called \u201cparent stealing\u201d. </li>\n  <li>The thread that executed e() executes f().</li>\n  <li>The continuation (which will next call g()) becomes available to thief threads.</li>\n  </ul>\n</blockquote>\n\n<p>I hear that saving a continuation requires saving both sets of registers (volatile/non-volatile/FPU). In the fiber implementation I did, I ended up implementing child stealing. I read about the (theoretical) negatives of child stealing (unbounded number of runnable tasks, see the paper for more info), so I want to use continuations instead.</p>\n\n<p>I'm thinking of two functions, <code>shift</code> and <code>reset</code>, where <code>reset</code> delimits the current continuation, and <code>shift</code> reifies the current continuation. Is what I'm asking even plausible in a C environment?</p>\n\n<p>EDIT: I'm thinking of making <code>reset</code> save return address / NV GPRs for the current function call (= line 3), and making <code>shift</code> transfer control to the next continuation after returning a value to the caller of <code>reset</code>.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 6, "creation_date": 1530139925, "post_id": 51072407, "comment_id": 89134619, "body": "Do this in two steps: <code>char *m = malloc(1); *m = &#39;a&#39;; const char *c = m;</code> Then, pass around <code>c</code> to all your other functions [and never use <code>m</code> again except for an eventual <code>free(m)</code>]. You could also do <code>*(char *) c = &#39;a&#39;;</code> as an alternative. Caveat emptor as in each case you have to <i>know</i> that <code>c</code> actually <i>does</i> pointer to memory that you can change."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1530150014, "post_id": 51072407, "comment_id": 89136610, "body": "I don&#39;t think this is really what you&#39;re asking, but: some OSes do allow you to specify pages of memory as read-only. On POSIX or Linux, for example, you might call <code>mmap( NULL, BIG_SIZE, PROT_READ, MAP_PRIVATE, filedes, 0 );</code> to allocate read-only pages of memory initialized to the contents of some file."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530149033, "post_id": 51072502, "comment_id": 89136441, "body": "Might as well show how to free the memory as <code>free(p);</code> will complain."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1530149478, "post_id": 51072502, "comment_id": 89136515, "body": "The second example with the encapsulation is inadvisable, as the <code>const char*</code> cannot be passed to <code>free()</code> (without a cast, which in this case happens to be safe). Would also suggest the pointers have type <code>char * const</code> and <code>const char * const</code>, to prevent accidental reassignment of them, and a check for <code>NULL</code>, just on principle."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1530149699, "post_id": 51072502, "comment_id": 89136550, "body": "Well, I cannot assume that the user does not want to point the pointer to something else, but I can write something about it. I&#39;ll add a NULL check too."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1530150024, "last_edit_date": 1530150024, "creation_date": 1530140155, "answer_id": 51072502, "question_id": 51072407, "link": "https://stackoverflow.com/questions/51072407/how-to-initialize-read-only-memory-locations-in-heap-in-c/51072502#51072502", "title": "How to initialize read only memory locations in heap in C?", "body": "<p>There is no such thing as a read only location in the heap. See Steve Summits answer for a good explanation.</p>\n\n<p>Whatever you do to achieve this, it will still be up to you to make sure that you don't write in those locations. You can protect yourself pretty well, but not 100%.</p>\n\n<p>You could do something like this:</p>\n\n<pre><code>char * x = malloc(1);\n*x = 'a';\nconst char * c = x;\n// Promise to not use the pointer x again\nprintf(\"%c\\n\",*c);\n</code></pre>\n\n<p>Or if you prefer to encapsulate it a little bit:</p>\n\n<pre><code>const char * init()\n{\n    char* c = malloc(1);\n    if(c == NULL) { // Always check if allocation is successful\n        // Code for error handling\n    }\n    *c = 'a';\n    return c;\n}\n\nint main()\n{\n    const char * p = init();\n    printf(\"%c\\n\",*p);\n}\n</code></pre>\n\n<p>Note that it is still allowed to write <code>char * p = init()</code> without <code>const</code> and this will indeed make it possible to write <code>*p = 'a'</code>, but you will at least trigger this warning:</p>\n\n<pre><code>warning: initialization discards \u2018const\u2019 qualifier from pointer target \ntype [-Wdiscarded-qualifiers]\n     char * p = init();\n</code></pre>\n\n<p>Another thing to be aware of here is that you will get a warning if you call <code>free(p)</code>, because <code>p</code> is a <code>const</code> pointer. If you declare <code>p</code> as just a <code>char *</code> you will get rid of this warning, but you will instead get the warning I mentioned in the previous paragraph. (And, of course you will also lose all write protection you were trying to get by declaring it as a const)</p>\n\n<p>To get around this, you can free the memory with <code>free((char*)p)</code></p>\n\n<p>As a side note, if you want to make sure that you never change where <code>p</code> is pointing, then you can declare it like this <code>const char * const p = init()</code>. That will make it impossible to make <code>p</code> point to something else later in the code.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 5, "last_activity_date": 1530142541, "creation_date": 1530142541, "answer_id": 51072787, "question_id": 51072407, "link": "https://stackoverflow.com/questions/51072407/how-to-initialize-read-only-memory-locations-in-heap-in-c/51072787#51072787", "title": "How to initialize read only memory locations in heap in C?", "body": "<p>First of all, understand that there is no such thing as \"read only locations in the heap\".  The heap is 100% writable.  <code>malloc()</code> is defined as returning <code>void *</code>.  You are allowed to write to the data pointed to by the pointers which <code>malloc</code> returns.</p>\n\n<p>But then the second thing to understand is that <code>const</code> doesn't necessarily mean \"read only\", either.</p>\n\n<p>There <em>is</em> such a thing as read-only memory, and it will often be pointed to by <code>const</code> pointers, and if (despite any <code>const</code> pointer) you do manage to try to write to read-only memory, you will typically get an exception of some kind.</p>\n\n<p>But you can have read-only memory that's pointed to by a non-<code>const</code> pointer, and you can have a <code>const</code> pointer that points to writable memory.</p>\n\n<p>So what <code>const</code> really means is \"I promise not to write to this memory\" or \"I declare my intent not to write to this memory\", with the added stipulation that \"I would like the compiler to give me compile-time errors if I accidentally try to write to this memory.\"</p>\n\n<p>If you have an ordinary <code>const</code> pointer, you can initialize it, once.  You can say things like</p>\n\n<pre><code>const str1[] = \"hello\";\n</code></pre>\n\n<p>and</p>\n\n<pre><code>const *str2 = \"world\";\n</code></pre>\n\n<p>even though later attempts to update the strings like</p>\n\n<pre><code>*str1 = 'x';    /* WRONG */\n</code></pre>\n\n<p>or</p>\n\n<pre><code>*str2 = 'y';    /* WRONG */\n</code></pre>\n\n<p>would fail.  (You can think of this as the \"initialization exception\" for <code>const</code>-qualified data.</p>\n\n<p>But as you've discovered, there's no such exception for a <code>const</code> pointer which you initialize by calling <code>malloc</code>.  If you want to get some memory from <code>malloc</code>, and initialize it once, and then promise not to modify it later, and if you want to get the compiler to enforce this promise for you, you can't do it directly, unless you use the two-pointer workaround described in the comments and in <a href=\"https://stackoverflow.com/questions/51072407/how-to-initialize-read-only-memory-locations-in-heap-in-c/51072502#51072502\">klutt's answer</a>.</p>\n"}], "owner": {"reputation": 47, "user_id": 9970984, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-O1vwp6mAhyE/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2uqkFhSfu_WRccV3lnuiEZUa1Xig/mo/photo.jpg?sz=128", "display_name": "TARS", "link": "https://stackoverflow.com/users/9970984/tars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1530150024, "creation_date": 1530139424, "last_edit_date": 1530149602, "question_id": 51072407, "link": "https://stackoverflow.com/questions/51072407/how-to-initialize-read-only-memory-locations-in-heap-in-c", "title": "How to initialize read only memory locations in heap in C?", "body": "<p>Consider the following code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    const char* c = malloc(1);\n    *c = 'a';\n    printf(\"%c\\n\",*c);\n}\n</code></pre>\n\n<p>This code obviously throws the following compile error:</p>\n\n<pre><code>file1.c:7:3: error: assignment of read-only location \u2018*c\u2019\n*c = 'a';\n^\n</code></pre>\n\n<p>How do I initialize a const variable in heap memory?</p>\n"}, {"tags": ["objective-c", "c", "swift", "overloading"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 2, "creation_date": 1530168969, "post_id": 51072126, "comment_id": 89141834, "body": "C has no function overloading. <i>&quot;... which was supported in Objective-C&quot;</i> \u2013 no, the same C declarations would fail to compile in an Objective-C source file."}, {"owner": {"reputation": 61, "user_id": 5517503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67013da6c0291515889e9d6d358a5e63?s=128&d=identicon&r=PG", "display_name": "Hsilgos", "link": "https://stackoverflow.com/users/5517503/hsilgos"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1530177074, "post_id": 51072126, "comment_id": 89146519, "body": "Well, yes. I rechecked this. May be you are right about Objective-C, but Objective-C++ should support this. At least my example with &#39;foo&#39; functions is compiled in *.mm files."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1530177136, "post_id": 51072126, "comment_id": 89146549, "body": "Swift <i>cannot</i> import (Objective-)C++ code, see for example <a href=\"https://stackoverflow.com/questions/35229149/interacting-with-c-classes-from-swift\" title=\"interacting with c classes from swift\">stackoverflow.com/questions/35229149/&hellip;</a>."}, {"owner": {"reputation": 61, "user_id": 5517503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67013da6c0291515889e9d6d358a5e63?s=128&d=identicon&r=PG", "display_name": "Hsilgos", "link": "https://stackoverflow.com/users/5517503/hsilgos"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1530177213, "post_id": 51072126, "comment_id": 89146607, "body": "I see. That&#39;s what i wanted to know. Thanks."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1530208014, "post_id": 51072126, "comment_id": 89165981, "body": "@MartinR in fact, it isn&#39;t supported in Objective-C officially, but clang has an extension to allow that following C++ rules. I&#39;m not sure about bridging this with Swift though. Hsilgos, have you tried with <code>__attribute__((overloadable))</code>? <a href=\"https://clang.llvm.org/docs/AttributeReference.html#overloadable-clang-overloadable-clang-overloadable\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/&hellip;</a>"}, {"owner": {"reputation": 61, "user_id": 5517503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67013da6c0291515889e9d6d358a5e63?s=128&d=identicon&r=PG", "display_name": "Hsilgos", "link": "https://stackoverflow.com/users/5517503/hsilgos"}, "edited": false, "score": 0, "creation_date": 1530299654, "post_id": 51072126, "comment_id": 89203192, "body": "Seems it works... But my case is a bit more complicated: i don&#39;t have access to original &#39;foo&#39; method and i can&#39;t add this attribute to it (i only can add this attribute to my overloading function). But thanks, may be it will help me."}], "owner": {"reputation": 61, "user_id": 5517503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67013da6c0291515889e9d6d358a5e63?s=128&d=identicon&r=PG", "display_name": "Hsilgos", "link": "https://stackoverflow.com/users/5517503/hsilgos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530176951, "creation_date": 1530137418, "last_edit_date": 1530176951, "question_id": 51072126, "link": "https://stackoverflow.com/questions/51072126/swift-doesnt-allow-function-overloading-in-objective-c-or-c-headers", "title": "Swift doesn&#39;t allow function overloading in objective-c or c headers", "body": "<p>I have some swift code, which is not really important in context of question.\nAlso i have Objective-C bridging header ObjC-Swift-Bridging.h:</p>\n\n<pre><code>#import \"my_objective_cpp_header.h\"\n</code></pre>\n\n<p>And i have free C/C++ - style functions in that header:</p>\n\n<pre><code>inline void foo() {\n}\n\ninline void foo(int i) {\n}\n</code></pre>\n\n<p>When i try to compile it in xcode 9.2 with enabled swift 4.0 i get error:</p>\n\n<pre><code>my_objective_cpp_header.h:29:13: error: redefinition of 'foo'\ninline void foo(int i){\n            ^\nmy_objective_cpp_header.h:26:13: note: previous definition is here\ninline void foo() {\n            ^\nObjC-Swift-Bridging.h:22:9: note: in file included from ObjC-Swift-Bridging.h:22:\n#import \"my_objective_cpp_header.h\"\n</code></pre>\n\n<p>The same happens if i put these functions to C/C++ header and write</p>\n\n<pre><code>#include \"my_cpp_header.h\"\n</code></pre>\n\n<p>into ObjC-Swift-Bridging.h</p>\n\n<p>So... Swift doesn't support code which was supported in Objective-C++? Did i miss something?</p>\n"}, {"tags": ["c", "pointers", "data-structures", "malloc", "trie"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1530137615, "post_id": 51072118, "comment_id": 89134050, "body": "If you have e.g. <code>int a; if (some_condition) { a = 5; } else { a = 10; } a = 15;</code> what would the value of <code>a</code> be after that code? Think of that in context of your &quot;optimized&quot; code."}, {"owner": {"reputation": 131, "user_id": 9919423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c0d1faf0d69ab6d78f8968a123620c?s=128&d=identicon&r=PG&f=1", "display_name": "David H. J.", "link": "https://stackoverflow.com/users/9919423/david-h-j"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530138516, "post_id": 51072118, "comment_id": 89134298, "body": "Thank you. It seems that by assigning <code>mover</code> to its element, I&#39;m assigning a copy of that address from <code>root</code> to <code>mover</code>, not changing the address in <code>root</code> directly. Is that right?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530138895, "post_id": 51072118, "comment_id": 89134395, "body": "That seems correct."}, {"owner": {"reputation": 131, "user_id": 9919423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c0d1faf0d69ab6d78f8968a123620c?s=128&d=identicon&r=PG&f=1", "display_name": "David H. J.", "link": "https://stackoverflow.com/users/9919423/david-h-j"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530138959, "post_id": 51072118, "comment_id": 89134410, "body": "I tried to make a diagram from the perspective of a linked list. It seems that I make the <code>mover</code> point to nothing when assigning its child element value to it. That way, I break the link between <code>mover</code> and the <code>root</code> TRIE. Is that understanding correct?"}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1546909820, "post_id": 51072118, "comment_id": 95001237, "body": "Is this the actual code? You allocate size(struct note) but the struct is actually named &#39;node&#39;"}, {"owner": {"reputation": 131, "user_id": 9919423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c0d1faf0d69ab6d78f8968a123620c?s=128&d=identicon&r=PG&f=1", "display_name": "David H. J.", "link": "https://stackoverflow.com/users/9919423/david-h-j"}, "edited": false, "score": 0, "creation_date": 1546910086, "post_id": 51072118, "comment_id": 95001299, "body": "sorry it&#39;s a typo, it should be &quot;node&quot;, and I&#39;ll fix it."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 9919423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c0d1faf0d69ab6d78f8968a123620c?s=128&d=identicon&r=PG&f=1", "display_name": "David H. J.", "link": "https://stackoverflow.com/users/9919423/david-h-j"}, "edited": false, "score": 0, "creation_date": 1547028873, "post_id": 54084241, "comment_id": 95047523, "body": "Oh, I see. That&#39;s brilliant. It seems I was confused about the concept <code>pointer</code>, thus making this simple mistake. Thank you so much for helping me get through it."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 1, "last_activity_date": 1546912071, "creation_date": 1546912071, "answer_id": 54084241, "question_id": 51072118, "link": "https://stackoverflow.com/questions/51072118/malloc-after-moving-the-pointer-doesnt-work-in-c/54084241#54084241", "title": "Malloc after moving the pointer doesn&#39;t work in C?", "body": "<p>By doing what you did you \"detached\" the target of assignment from the recipient lvalue in <code>mover-&gt;next[...]</code>, thus destroying the original functionality of the code. In your version <code>mover-&gt;next[...]</code> remains unchanged.</p>\n\n<p>If one literally wanted to eliminate the code duplication here, one could've done something as follows</p>\n\n<pre><code>    struct node **pmover;\n\n    if (c == '\\'')\n      pmover = &amp;mover-&gt;next[ALPHABET_SIZE - 1];\n    else\n      pmover = &amp;mover-&gt;next[c - 97];\n\n    mover = *pmover = malloc(sizeof(struct node));\n</code></pre>\n\n<p>This would be a literal implementation of your intent, which can also be rewritten as</p>\n\n<pre><code>    struct node **pmover = &amp;mover-&gt;next[c == '\\'' ? ALPHABET_SIZE - 1 : c - 97];\n    mover = *pmover = malloc(sizeof(struct node));\n</code></pre>\n\n<p>Although a better idea, in my opinion, would be</p>\n\n<pre><code>    struct node *new_node = malloc(sizeof(struct node));\n\n    if (c == '\\'')\n      mover-&gt;next[ALPHABET_SIZE - 1] = new_node;\n    else\n      mover-&gt;next[c - 97] = new_node;\n\n    mover = new_node;\n</code></pre>\n\n<p>(or an equivalent <code>?:</code>-based version).</p>\n"}], "owner": {"reputation": 131, "user_id": 9919423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6c0d1faf0d69ab6d78f8968a123620c?s=128&d=identicon&r=PG&f=1", "display_name": "David H. J.", "link": "https://stackoverflow.com/users/9919423/david-h-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 54084241, "answer_count": 1, "score": 0, "last_activity_date": 1547027907, "creation_date": 1530137382, "last_edit_date": 1547027907, "question_id": 51072118, "link": "https://stackoverflow.com/questions/51072118/malloc-after-moving-the-pointer-doesnt-work-in-c", "title": "Malloc after moving the pointer doesn&#39;t work in C?", "body": "<p>I want to load a dictionary using <code>TRIE</code>. The first three parts of code worked as expected. But I tried to shorten the third part of the code, then it didn't work, not adding <code>nodes</code> to the <code>TRIE</code>. </p>\n\n<p>Here is the declaration part:</p>\n\n<pre><code>#define ALPHABET_SIZE 27\n\n// define a node for a TRIE.\nstruct node\n{\n    _Bool end_of_word;\n    struct node *next[ALPHABET_SIZE];\n};\n\n// create a TRIE\nstruct node *root = malloc(sizeof(struct node));\n\n// create a mover.\nstruct node *mover = root;\n\n// read dictionary file\nFILE *dictptr = fopen(dictionary, \"r\");\n</code></pre>\n\n<p>The main thing starts from here: </p>\n\n<pre><code>//load dictionary word by word;\nchar c;\nwhile ((c = fgetc(dictptr)) != EOF)\n{\n    if (c == '\\n')\n    {\n        mover-&gt;end_of_word = 1;\n        mover = root;\n    }\n</code></pre>\n\n<p>Here's where I want to optimize: </p>\n\n<pre><code>    else\n    {\n        if (c == '\\'')\n        {\n            mover-&gt;next[ALPHABET_SIZE - 1] = malloc(sizeof(struct node));\n            mover = &amp;mover-&gt;next[ALPHABET_SIZE - 1];\n        }\n        else\n        {\n            mover-&gt;next[c - 97] = malloc(sizeof(struct node));\n            mover = &amp;mover-&gt;next[c - 97];\n        }\n\n\n        // check if memory allocation is successful.\n        if (mover == NULL)\n        {\n            unload();\n            fprintf(stderr, \"unable to allocate memory to new node.\\n\");\n            return false;\n        }\n    }\n</code></pre>\n\n<p>And here's what I optimized: </p>\n\n<pre><code>    else\n    {\n        if (c == '\\'')\n        {\n            mover = &amp;mover-&gt;next[ALPHABET_SIZE - 1];\n        }\n        else\n        {\n            mover = &amp;mover-&gt;next[c - 97];\n        }\n        mover = malloc(sizeof(struct node));\n</code></pre>\n"}, {"tags": ["c", "arrays", "max"], "comments": [{"owner": {"reputation": 4230, "user_id": 945873, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d561be4c73996732e6639b5421abfb97?s=128&d=identicon&r=PG&f=1", "display_name": "itdoesntwork", "link": "https://stackoverflow.com/users/945873/itdoesntwork"}, "edited": false, "score": 2, "creation_date": 1530136410, "post_id": 51071931, "comment_id": 89133660, "body": "read up on how to pass arrays to C functions."}, {"owner": {"reputation": 95, "user_id": 9975126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf720ffc2eed660a091acdeb7adfb22?s=128&d=identicon&r=PG&f=1", "display_name": "Coincoin14", "link": "https://stackoverflow.com/users/9975126/coincoin14"}, "edited": false, "score": 0, "creation_date": 1530136562, "post_id": 51071931, "comment_id": 89133719, "body": "Check this link, I think it&#39;s about how you call your arrays : <a href=\"https://www.tutorialspoint.com/cprogramming/c_passing_arrays_to_functions.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/&hellip;</a>"}, {"owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 0, "creation_date": 1530136578, "post_id": 51071931, "comment_id": 89133727, "body": "int v[n]; doesn&#39;t compile for me. Maybe it&#39;s my compiler, but it wants &quot;n&quot; to be constant. I think you need to malloc/alloc."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 1, "creation_date": 1530137155, "post_id": 51071931, "comment_id": 89133922, "body": "@ffhighwind <code>int v[n]</code> is a Variable Length Array, previously required by the C standard but now optional. MSVC never did implement the VLA."}, {"owner": {"reputation": 421, "user_id": 1924261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2f856227c3dc145ddc85f5edbab56?s=128&d=identicon&r=PG", "display_name": "kingW3", "link": "https://stackoverflow.com/users/1924261/kingw3"}, "edited": false, "score": 0, "creation_date": 1530137526, "post_id": 51071931, "comment_id": 89134026, "body": "You&#39;re passing <code>n+1</code>th element of an <code>n</code> element array instead of passing the whole array."}, {"owner": {"reputation": 4150, "user_id": 7412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOv4e.png?s=128&g=1", "display_name": "AlexP", "link": "https://stackoverflow.com/users/7412986/alexp"}, "edited": false, "score": 0, "creation_date": 1530138226, "post_id": 51071931, "comment_id": 89134219, "body": "The function <code>recursion()</code> is declared as <code>recursion (int *, int, int)</code> but you are calling it with 3 <code>int</code>s instead of one <code>int *</code> and 2 <code>int</code>s. Also, <code>index</code> is a terrible name for what is actually the current maximum; maybe <code>current_maximum</code>? Also, you initialize the current maximum with <code>n</code>, which is not necessarily even a value in the array. You may want to replace the call with <code>int z = recursion (v, n - 2, v [n - 1])</code>."}], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 8581218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58df074d95c658bd54fabef46f4e3f1d?s=128&d=identicon&r=PG&f=1", "display_name": "rect0x51", "link": "https://stackoverflow.com/users/8581218/rect0x51"}, "is_accepted": false, "score": 0, "last_activity_date": 1530183909, "last_edit_date": 1530183909, "creation_date": 1530147646, "answer_id": 51073319, "question_id": 51071931, "link": "https://stackoverflow.com/questions/51071931/finding-the-maximum-of-an-array-recursively/51073319#51073319", "title": "Finding the maximum of an array recursively", "body": "<p>In C <em>usually</em> you can't declare an array whose size is unknown at compile-time, hence <code>int v[n]</code> is dangerous code.<br>\nDepending on your compiler and the compiler's settings this could be a compile error or it could be a bug.</p>\n\n<p>For such problems you need to learn about pointers and <a href=\"https://www.geeksforgeeks.org/what-is-dynamic-memory-allocation/\" rel=\"nofollow noreferrer\">dynamic memory allocation</a>.</p>\n\n<p>Side-note: After C99 there are stuff like <a href=\"https://www.tutorialspoint.com/cprogramming/c_passing_arrays_to_functions.htm\" rel=\"nofollow noreferrer\"><em>Variable Length Arrays</em></a> but the rules are a little advanced.</p>\n\n<p>Also to <a href=\"https://www.tutorialspoint.com/cprogramming/c_passing_arrays_to_functions.htm\" rel=\"nofollow noreferrer\">pass an array to a function</a> you give the array a pointer as an argument:</p>\n\n<pre><code>int z = recursion(v, n, v[0]);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>int z = recursion(v[n], n, v[0]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 421, "user_id": 1924261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2f856227c3dc145ddc85f5edbab56?s=128&d=identicon&r=PG", "display_name": "kingW3", "link": "https://stackoverflow.com/users/1924261/kingw3"}, "is_accepted": false, "score": 0, "last_activity_date": 1530183157, "creation_date": 1530183157, "answer_id": 51081051, "question_id": 51071931, "link": "https://stackoverflow.com/questions/51071931/finding-the-maximum-of-an-array-recursively/51081051#51081051", "title": "Finding the maximum of an array recursively", "body": "<p>First thing pay attention to compiler warnings, your recursive function doesn't return value when you enter the else part.</p>\n\n<p>Now the second thing is please don't use things like *(arr+n) which is hard to read instead use arr[n], also while just a preference when using arrays as function arguments use int arr[] to call the function instead of int *arr (in the first version it's clear you should pass an array).</p>\n\n<p>Third thing is to name your things instead of <code>int recursive</code> describe what the function is doing for example <code>int maxElemRecursive</code></p>\n\n<p>So your recursive function should be something like</p>\n\n<pre><code>int maxElemRecursive(int arr[],int n,int largest)\n{\n    if(n==0) return largest;\n    if(arr[n] &gt; largest) // No need for else because return largest; would've returned value;\n    {\n        largest = arr[n]; \n    }\n    return maxElemRecursive(arr,n-1,largest); // You have to return the value of the function.\n                                             // You still pass the array with just arr.\n}\n</code></pre>\n"}], "owner": {"reputation": 461, "user_id": 8357883, "user_type": "registered", "profile_image": "https://graph.facebook.com/879779078835853/picture?type=large", "display_name": "Shpend Palushi", "link": "https://stackoverflow.com/users/8357883/shpend-palushi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530184846, "creation_date": 1530136298, "last_edit_date": 1530184846, "question_id": 51071931, "link": "https://stackoverflow.com/questions/51071931/finding-the-maximum-of-an-array-recursively", "title": "Finding the maximum of an array recursively", "body": "<p>I am learning recursion. As an exercise I am trying to find the maximum of an array  recursively. </p>\n\n<pre><code>int recursive (int *arr, int n, int largest) {\n  if(n==0)\n    return largest;\n  else {\n    if (*(arr+n)&gt;largest) {\n      largest = *(arr+n);\n      recursive(arr, n-1, largest);\n    }\n  }\n}\n\nint main() {\n  int length = n-1;\n  int largest = v[0];\n  int z = recursive(arr, length, largest);\n\n  printf(\"\\n%d\", z);\n}\n</code></pre>\n\n<p>I followed your suggestions, using pointers instead of arrays, and probably the program looks way better. But still it is not doing it's not showing the maximum correctly. I think the logic is correct. </p>\n"}, {"tags": ["c", "strtok"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1530136356, "post_id": 51071807, "comment_id": 89133638, "body": "Aside: the input is from <code>fgets</code>, which retains any final newline, so the delimiter string in <code>strtok(line, &quot; &quot;);</code> would be better as <code>strtok(line, &quot; \\n&quot;);</code> which will remove the newline."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1530136598, "post_id": 51071807, "comment_id": 89133734, "body": "Probably <code>MAX_LENGTH_LINE</code> is too small. Use <code>fgets(line, MAX_BUFFER, f)</code> where <code>MAX_BUFFER</code> is at least 500."}, {"owner": {"reputation": 550, "user_id": 9459321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427432d9d02a8eb9861905dabfce27e4?s=128&d=identicon&r=PG&f=1", "display_name": "Software_t", "link": "https://stackoverflow.com/users/9459321/software-t"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1530136640, "post_id": 51071807, "comment_id": 89133747, "body": "@BarmakShemirani What? You read my question? Everything is ok in my code , but, I ask about what that happens with <code>strtok</code>"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1530137320, "post_id": 51071807, "comment_id": 89133969, "body": "I guess you mean <i>&quot;There is no space printed after word4&quot;</i> The last token is read as <code>&quot;word4\\n&quot;</code>, so the space appears after the next line. Do what Weather Vane suggested, to remove &#39;\\n&#39;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530137416, "post_id": 51071807, "comment_id": 89134000, "body": "@Software_t the space delimiter given to <code>strtok</code> is not <i>required</i>. It is a filter. Please read the <code>strtok</code> man page."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1530142791, "post_id": 51071807, "comment_id": 89135223, "body": "<code>strtok()</code> scans strings; it stops when it reaches the null that marks the end of the string."}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 2, "last_activity_date": 1530141264, "creation_date": 1530141264, "answer_id": 51072637, "question_id": 51071807, "link": "https://stackoverflow.com/questions/51071807/taking-of-the-last-word-in-the-line-with-strtok/51072637#51072637", "title": "Taking of the last word in the line with strtok", "body": "<p>I'm not quite sure what you're asking.  Are you asking how the program was able to correctly read <code>word4</code> from the file even though it wasn't followed by a space?  Or are you asking why, when the program printed <code>word4</code> back out, it didn't seem to print a space after it?</p>\n\n<p>The answer to the first question is that <code>strtok</code> is designed to give you tokens <em>separated by</em> delimiters, not <em>terminated by</em> delimiters.  There is no requirement that the last token be followed by a delimiter.</p>\n\n<p>To see the answer to the second question, it may be more clear if we adjust the program and its printout slightly:</p>\n\n<pre><code>char* word = strtok(line, \" \");\nfor (int i = 0; word != NULL; i++) {\n    printf(\"%d: \\\"%s\\\"\\n\", i, word);\n    word = strtok(NULL, \" \");\n}\n</code></pre>\n\n<p>I have made two changes here:</p>\n\n<ol>\n<li>The loop runs until <code>word</code> is NULL, that is, as long as <code>strtok</code> finds another word on the line.  (This is to make sure we see <em>all</em> the words, and to make sure we're not trying to treat the fourth word specially in any way.  If you <em>were</em> trying to treat the fourth word specially in some way, please say so.)</li>\n<li>The words are printed back out surrounded by quotes, so that we can see exactly what they contain.</li>\n</ol>\n\n<p>When I run the modified program, I see:</p>\n\n<pre><code>0: \"word1\"\n1: \"word2\"\n2: \"word3\"\n3: \"word4\n\"\n</code></pre>\n\n<p>That last line looks very strange at first, but the explanation is straightforward.  You originally read the line using <code>fgets</code>, which does copy the terminating <code>\\n</code> character into the <code>line</code> buffer.  So it ends up staying tacked onto <code>word4</code>; that is, the fourth \"word\" is <code>\"word4\\n\"</code>.</p>\n\n<p>For this reason, it's often a good idea to include <code>\\n</code> in the set of whitespace delimiter characters you hand to <code>strtok</code> -- that is, you can call <code>strtok(line, \" \\n\")</code> instead.  If I do that (in both of the <code>strtok</code> calls), the output changes to</p>\n\n<pre><code>0: \"word1\"\n1: \"word2\"\n2: \"word3\"\n3: \"word4\"\n</code></pre>\n\n<p>which may be closer to what you expected.</p>\n"}, {"tags": [], "owner": {"reputation": 427, "user_id": 8834967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xrf_YCVb2Vw/AAAAAAAAAAI/AAAAAAAAAAc/K52j8i_sYWw/photo.jpg?sz=128", "display_name": "Joy Allen", "link": "https://stackoverflow.com/users/8834967/joy-allen"}, "is_accepted": false, "score": 0, "last_activity_date": 1530152483, "creation_date": 1530152483, "answer_id": 51073803, "question_id": 51071807, "link": "https://stackoverflow.com/questions/51071807/taking-of-the-last-word-in-the-line-with-strtok/51073803#51073803", "title": "Taking of the last word in the line with strtok", "body": "<p>Your code doesn't check the return value of <code>strtok()</code>, it may be unsafe in some cases.</p>\n\n<pre><code>/*  Split string\n    @content origin string content\n    @delim   delimiter for splitting\n    @psize   pointer pointing at the variable to store token size\n    @return  tokens after splitting\n */\nconst char **split(char *content, const char *delim, int *psize)\n{\n    char *token;\n    const char **tokens;\n    int capacity;\n    int size = 0;\n\n    token = strtok(content, delim);\n    if (!token)\n    {\n        return NULL;\n    }\n\n    // Initialize tokens\n    tokens = malloc(sizeof(char *) * 64);\n    if (!tokens)\n    {\n        exit(-1);\n    }\n    capacity = 64;\n\n    tokens[size++] = token;\n\n    while ((token = strtok(NULL, delim)))\n    {\n        if (size &gt;= capacity)\n        {\n            tokens = realloc(tokens, sizeof(char *) * capacity * 2);\n            if (!tokens)\n            {\n                exit(-1);\n            }\n            capacity *= 2;\n        }\n        tokens[size++] = token;\n    }\n\n    // if (size &lt; capacity)\n    // {\n    //  tokens = realloc(tokens, sizeof(char *) * size);\n    //  if (!tokens)\n    //  {\n    //      exit(-1);\n    //  }\n    // }\n    *psize = size;\n\n    return tokens;\n}\n</code></pre>\n"}], "owner": {"reputation": 550, "user_id": 9459321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/427432d9d02a8eb9861905dabfce27e4?s=128&d=identicon&r=PG&f=1", "display_name": "Software_t", "link": "https://stackoverflow.com/users/9459321/software-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 1, "accepted_answer_id": 51072637, "answer_count": 2, "score": 1, "last_activity_date": 1530152483, "creation_date": 1530135649, "question_id": 51071807, "link": "https://stackoverflow.com/questions/51071807/taking-of-the-last-word-in-the-line-with-strtok", "title": "Taking of the last word in the line with strtok", "body": "<p>Given a file with the following line:  </p>\n\n<blockquote>\n  <p>word1 word2 word3 word4</p>\n</blockquote>\n\n<p>I tried to write the following code:  </p>\n\n<pre><code>FILE* f = fopen(\"my_file.txt\", \"r\");\nchar line[MAX_BUFFER + 1];\nif (fgets(line, MAX_LENGTH_LINE, f) == NULL) {\n    return NULL;\n}\nchar* word = strtok(line, \" \");\nfor (int i = 0; i &lt; 4; i++) {\n    printf(\"%s \", word);\n    word = strtok(NULL, \" \");\n}\n</code></pre>\n\n<p>For prints the \"words\".  </p>\n\n<p>It's working. But, I don't understand something.  </p>\n\n<p>How it's acheive the last word <code>word4</code>? (I don't understand it because that after \"word4\" not exists a space)..</p>\n"}, {"tags": ["c", "arrays", "character", "alpha", "alphabetic"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1530133957, "post_id": 51071469, "comment_id": 89132736, "body": "Read characters. Take only the &quot;correct&quot; ones. Convert to lowercase if needed."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1530134023, "post_id": 51071469, "comment_id": 89132758, "body": "Say hello to the <code>switch</code> statement."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1530134067, "post_id": 51071469, "comment_id": 89132773, "body": "@tadman Why <code>switch</code>? <code>isalpha</code> + <code>tolower</code>. Done."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530134097, "post_id": 51071469, "comment_id": 89132783, "body": "@EugeneSh. Periods and spaces? Wasn&#39;t sure if those would have special meaning or not."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1530134131, "post_id": 51071469, "comment_id": 89132794, "body": "Your program will feature these elements: <code>getchar()</code>, <code>if()</code>, <code>isalpha()</code>, <code>tolower()</code>, and <code>array[i++]</code>.  I leave it to you to combine these elements appropriately. :-)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530134464, "post_id": 51071469, "comment_id": 89132920, "body": "Please show what you have tried. There are hundreds of SO questions along these lines, for you to find."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1530134157, "creation_date": 1530134157, "answer_id": 51071528, "question_id": 51071469, "link": "https://stackoverflow.com/questions/51071469/how-do-i-scan-only-alphabetic-characters-into-an-array-in-c/51071528#51071528", "title": "How do I scan only alphabetic characters into an array in C?", "body": "<p>There are multiple solutions. Two of the more \"common\" would be</p>\n\n<ol>\n<li><p>Read <em>everything</em> into memory, then copy only the wanted characters to the main array while converting to lower-case.</p></li>\n<li><p>Read character by character, saving only the characters you want to save while converting to lower-case.</p></li>\n</ol>\n\n<p>Both of these solutions are basically the same, they only differ in the actual file-reading part.</p>\n"}], "owner": {"reputation": 1244, "user_id": 10002294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARNs5.jpg?s=128&g=1", "display_name": "Uclydde", "link": "https://stackoverflow.com/users/10002294/uclydde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 51071528, "answer_count": 1, "score": 0, "last_activity_date": 1530134157, "creation_date": 1530133877, "question_id": 51071469, "link": "https://stackoverflow.com/questions/51071469/how-do-i-scan-only-alphabetic-characters-into-an-array-in-c", "title": "How do I scan only alphabetic characters into an array in C?", "body": "<p>I have a text file, and it is a paragraph with quotation marks, commas, periods, and spaces. I want my C program to scan only the letters into an array, while also making all of them lower case in the process. So if a text file said \"Hello.\", then the array would have: hello</p>\n"}, {"tags": ["c", "arguments", "parameter-passing", "memory-address", "memcpy"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 5, "creation_date": 1530133541, "post_id": 51071367, "comment_id": 89132583, "body": "I think that is too much of a code puzzle, could you try for a more coherent <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1530133545, "post_id": 51071367, "comment_id": 89132584, "body": "<code>response</code> is passed by value to <code>func2</code>.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1530133616, "post_id": 51071367, "comment_id": 89132611, "body": "Note: Do not expect <code>union {              uint8_t attr;              struct {                  unsigned int reserved : 6;                  unsigned int sequence : 2;              };          };</code> to overlay the <code>uint8_t</code> and the bit-fields in a portable manner."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1530133648, "post_id": 51071367, "comment_id": 89132621, "body": "&quot;After returning to func1....&quot; - That itself is telling and there is no way to know for sure without seeing code.  Given how you&#39;re using <code>response</code> the only way this code stand a hope&#39;s chance of working is if it is a global. And that isn&#39;t the case in your code. You&#39;re using <code>func2(response);</code>, which means you&#39;re providing it by-value to <code>func2</code>. The caller&#39;s argument will remain unchanged. Pass it by address to <code>func2</code> changign it to accept a pointer as its formal parameter. Finally, change the <code>&amp;response</code> usage in <code>func2</code> to simply <code>response</code>, as it will already a proper pointer."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1530134211, "post_id": 51071367, "comment_id": 89132825, "body": "To simplify what @WhozCraig said, the variable <code>response</code> inside <code>func2()</code> is a <i>copy</i> of the variable from <code>func1()</code>. Changes you make to the copy don&#39;t affect the original. You need to pass a pointer to get the effect of passing by reference."}, {"owner": {"reputation": 255, "user_id": 5071304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48fcec5627ec098ae422e6272e507a1b?s=128&d=identicon&r=PG&f=1", "display_name": "cDreamer", "link": "https://stackoverflow.com/users/5071304/cdreamer"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1530134376, "post_id": 51071367, "comment_id": 89132884, "body": "@WhozCraig Wow, I cannot believe I didn&#39;t realize that. Sometimes it just takes a separate set of eyes to make you see the obvious after staring at it for so long. Thanks for this! Changed it to accept a pointer and it works now. How do I mark a comment as an answer?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530291756, "post_id": 51071367, "comment_id": 89199896, "body": "OT: your &#39;struct&#39; typedef is missing key elements, like <code>tag</code> names and <code>field</code> names"}], "answers": [{"tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 2, "last_activity_date": 1530134551, "creation_date": 1530134551, "answer_id": 51071608, "question_id": 51071367, "link": "https://stackoverflow.com/questions/51071367/passing-variable-to-function-changes-address-location-in-c/51071608#51071608", "title": "Passing Variable To Function Changes Address Location in C", "body": "<p>You're propagating pass-by-value between <code>func1</code> and <code>func2</code>. Your code has a function,</p>\n\n<pre><code>void func2(message_t response) // &lt;&lt;==== response gets value from caller\n{\n    memcpy(&amp;response, ....) // &lt;&lt;==== modify local response; caller is unaffected.\n}\n\nvoid func1()\n{\n    message_t respnose;\n    func2(response); // &lt;&lt;==== PASSED BY VALUE\n}\n</code></pre>\n\n<p>C being pass-by-value, you need to craft the value to allow the modification you want:</p>\n\n<pre><code>void func2(message_t *response) // &lt;&lt;==== receiving address of caller's response\n{\n    memcpy(response, ...); // &lt;&lt;=== using address of caller's response.\n}\n\nvoid func1()\n{\n    message_t response;\n    func2(&amp;response); // &lt;&lt;==== passing address of our response\n}\n</code></pre>\n\n<p>That should fix your issue.</p>\n"}], "owner": {"reputation": 255, "user_id": 5071304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48fcec5627ec098ae422e6272e507a1b?s=128&d=identicon&r=PG&f=1", "display_name": "cDreamer", "link": "https://stackoverflow.com/users/5071304/cdreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 51071608, "answer_count": 1, "score": 1, "last_activity_date": 1530134551, "creation_date": 1530133410, "question_id": 51071367, "link": "https://stackoverflow.com/questions/51071367/passing-variable-to-function-changes-address-location-in-c", "title": "Passing Variable To Function Changes Address Location in C", "body": "<p>Having an odd issue here with passing an argument to a function. </p>\n\n<p>The argument is a struct, defined as:</p>\n\n<pre><code>#pragma pack(push,1)\n typedef struct {\n     struct {\n         uint8_t opcode;\n         uint8_t type;\n         union {\n             uint8_t attr;\n             struct {\n                 unsigned int reserved : 6;\n                 unsigned int sequence : 2;\n             };\n         };\n         uint8_t bytes;\n     } header;\n     uint8_t payload[15];\n } message_t;\n #pragma pack(pop)\n</code></pre>\n\n<p>I have a function that declares this struct as:</p>\n\n<pre><code>void func1(void) {\n    message_t response;\n</code></pre>\n\n<p>Within this function I pass it as an argument to another function:</p>\n\n<pre><code>    func2(response);\n</code></pre>\n\n<p>Within <code>func2</code> I have another struct declared and it is defined as:</p>\n\n<pre><code> #pragma pack(push,1)\n typedef struct {\n     struct {\n         uint8_t op_code;\n         avneraIDs_t IDs;\n         uint8_t length;\n     } header;\n     uint8_t payload[30];\n } frame_t;\n #pragma pack(pop)\n</code></pre>\n\n<p>This struct is declared within <code>func2</code> as:</p>\n\n<pre><code>frame_t frame;\n</code></pre>\n\n<p><code>frame</code> will have some data copied into it, and the data within its <code>payload</code> element is what I want copied into the <code>response</code> struct.</p>\n\n<p>So now in <code>func2</code> i have a call to <code>memcpy</code>.</p>\n\n<pre><code>memcpy((uint8_t *)&amp;response, frame.payload, (frame.header.length - 1));\n</code></pre>\n\n<p>I have verified that <code>frame.header.length</code> is equal to 20, and now minus 1 would copy over 19 bytes of data. <code>response</code> has a width of 19 bytes so it should be fine.</p>\n\n<p>After performing the <code>memcpy</code>, I print out the contents of <code>response</code> and the contents look correct.</p>\n\n<p>After returning to <code>func1</code> I print the contents of <code>response</code> again. And now the contents are gone, it's empty again.</p>\n\n<p>So what I did to debug this was I printed the address location of <code>response</code> within the context of <code>func1</code> and I get the address <code>0x2000a470</code>.</p>\n\n<p>If I print the address location of <code>response</code> within the context of <code>func2</code> I get the address <code>0x2000a484</code>.</p>\n\n<p>If I print the memory starting at address <code>0x2000a484</code>, I see the data that should be in <code>response</code>.</p>\n\n<p>Why did the address for <code>response</code> change as soon as I passed it to another function?</p>\n\n<p>Also as some extra information, I am writing in C, using GCC, and an ST Arm Core MCU.</p>\n"}, {"tags": ["c", "oracle"], "comments": [{"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 1, "creation_date": 1530133907, "post_id": 51071319, "comment_id": 89132718, "body": "You fetch only one time I think. Should it not be fetching in a loop until a fetch returns empty for cursor ?"}, {"owner": {"reputation": 3, "user_id": 8691447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207f19178b5b33dc70b59ff59b151766?s=128&d=identicon&r=PG", "display_name": "Umesh Narayanan Srinivasan", "link": "https://stackoverflow.com/users/8691447/umesh-narayanan-srinivasan"}, "reply_to_user": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1530134083, "post_id": 51071319, "comment_id": 89132780, "body": "I have the oracle based query in my Pro*C code and have the loop that you are mentioning about (While loop that i have given above), in the C/C++ module."}, {"owner": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "edited": false, "score": 0, "creation_date": 1530138610, "post_id": 51071319, "comment_id": 89134318, "body": "@UmeshNarayananSrinivasan - you need to show a more complete view of your code. It kind of sounds like you are doing both the declare and fetch inside the loop; are both <code>EXEC</code> calls inside the function you are calling in the loop?"}, {"owner": {"reputation": 3, "user_id": 8691447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207f19178b5b33dc70b59ff59b151766?s=128&d=identicon&r=PG", "display_name": "Umesh Narayanan Srinivasan", "link": "https://stackoverflow.com/users/8691447/umesh-narayanan-srinivasan"}, "edited": false, "score": 0, "creation_date": 1530142431, "post_id": 51071319, "comment_id": 89135154, "body": "No, I have two functions in Pro*C. GetSCCtrlTLOGFileName() has the Declare and the Select statement. I also open the cursor here. GetSCCtrlNextTLOGFileName() is the function where i do the fetch of the column. Then I call these functions in my C module and have the GetSCCtrlNextTLOGFileName() in while loop which i have shown in my first comment. Hope this explains you how i have implemented my logic."}, {"owner": {"reputation": 3, "user_id": 8691447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207f19178b5b33dc70b59ff59b151766?s=128&d=identicon&r=PG", "display_name": "Umesh Narayanan Srinivasan", "link": "https://stackoverflow.com/users/8691447/umesh-narayanan-srinivasan"}, "edited": false, "score": 0, "creation_date": 1530142616, "post_id": 51071319, "comment_id": 89135188, "body": "I am allowed few characters to print here in StackOverflow, so I am not able to show my two functions from Pro*C."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1530144964, "post_id": 51071319, "comment_id": 89135693, "body": "@UmeshNarayananSrinivasan - please <b>edit your question</b> (there&#39;s an <code>edit</code> button just beneath the question tags, above) and add the additional code. Do not put code, data, or further explanations into a comment as it will very likely be overlooked. Thanks."}, {"owner": {"reputation": 3, "user_id": 8691447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207f19178b5b33dc70b59ff59b151766?s=128&d=identicon&r=PG", "display_name": "Umesh Narayanan Srinivasan", "link": "https://stackoverflow.com/users/8691447/umesh-narayanan-srinivasan"}, "edited": false, "score": 0, "creation_date": 1530148006, "post_id": 51071319, "comment_id": 89136250, "body": "Updated the Question. Added the Pro*C functions as asked."}], "owner": {"reputation": 3, "user_id": 8691447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207f19178b5b33dc70b59ff59b151766?s=128&d=identicon&r=PG", "display_name": "Umesh Narayanan Srinivasan", "link": "https://stackoverflow.com/users/8691447/umesh-narayanan-srinivasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530215335, "creation_date": 1530133188, "last_edit_date": 1530215335, "question_id": 51071319, "link": "https://stackoverflow.com/questions/51071319/why-is-cursor-fetch-always-returning-top-row-when-there-are-multiple-rows", "title": "Why is cursor fetch always returning top row when there are multiple rows?", "body": "<p>I am trying to get unique file names stored in a table which has the oldest modified date stored.</p>\n\n<pre><code> EXEC SQL AT  DECLARE CtrlIndexTLOGNames_cursor CURSOR FOR \n    SELECT cDataSrcFileName\n    FROM SC_CTRL_XMLBUFFER\n    GROUP BY cDataSrcFileName\n    ORDER BY MAX(modifieddatetime) asc;\n\nEXEC SQL FETCH CtrlIndexTLOGNames_cursor INTO :s_cDataSrcFileName;\n</code></pre>\n\n<p>Pro*C Code:</p>\n\n<pre><code>BOOLEAN CXYZ::GetSCCtrlTLOGFileName()\n{\n    EXEC SQL BEGIN DECLARE SECTION;\n\n        char cDataSrcFileName[SZ_FILENAME+30];\n        char cSetSortorder[5];\n        char s_cAtTable[80];\n\n    EXEC SQL END DECLARE SECTION;\n\n    BOOLEAN bOpenFail=false;\n    BOOLEAN bRet=false;\n\n    //char  s_append[500];\n    sqlca.sqlcode = null;\n\n    // Always start with a clean error structure\n    ClearLastError();\n\n    // Make sure that we close the cursor if it is opened\n    CloseCursor();\n\n    ClearLastError();\n\n    // Make sure it is OK to proceed\n    if (m_bDBConn)\n    {\n        // Next check to see that DB is available\n        memset(s_cAtTable, 0, sizeof(s_cAtTable));\n        if (m_pSup-&gt;DBActive(m_lDBType))\n            m_pSup-&gt;DBAtString(m_lDBType, s_cAtTable, sizeof(s_cAtTable));\n        else\n            m_lDBType=DAI_PRIMARY;\n\n        // Here we access the appropriate table\n        if (m_lDBType == DAI_PRIMARY)\n        {\n            // Get the row count from the table\n\n             EXEC SQL DECLARE CtrlIndexTLOGNames_cursor CURSOR FOR \n                SELECT cDataSrcFileName\n                FROM SC_CTRL_XMLBUFFER\n                GROUP BY cDataSrcFileName\n                ORDER BY MAX(modifieddatetime) asc;\n\n            // Check to see if the cursor declare succeeded\n            if (sqlca.sqlcode == 0)\n            {\n                EXEC SQL OPEN CtrlIndexTLOGNames_cursor;\n                m_lCursorCode=SCCURCTRLXMLBUFFER;\n                m_bCursorOpen=true;\n                bRet = true;\n            }\n            else\n                bOpenFail=true;\n        }\n        else\n        {\n            EXEC SQL AT :s_cAtTable DECLARE CtrlIndexTLOGNames_cursor_B CURSOR FOR \n                SELECT cDataSrcFileName\n                FROM SC_CTRL_XMLBUFFER\n                GROUP BY cDataSrcFileName\n                ORDER BY MAX(modifieddatetime) asc;\n\n                // Check to see if the cursor declare succeeded\n            if (sqlca.sqlcode == 0)\n            {\n                EXEC SQL OPEN CtrlIndexTLOGNames_cursor_B;\n                m_lCursorCode=SCCURCTRLXMLBUFFER_B;\n                m_bCursorOpen=true;\n                bRet = true;\n            }\n            else\n                bOpenFail=true;\n        }\n\n        // Check to make sure the open succeeded\n        if(!bOpenFail)\n        {\n            if (sqlca.sqlcode == 0)\n                bRet=true;\n            else\n            {\n                // Report the failure information\n                sprintf(m_cLastError, (char *)\"RTPSC  CtrlIndexTLOGNames CURSOR open failed[%d]:\", sqlca.sqlcode);\n\n                // Here we append the RDBMS string\n                strncat(m_cLastError, sqlca.sqlerrm.sqlerrmc, sizeof(m_cLastError)-(strlen(m_cLastError)+2));\n\n                // Here we set the appropriate control information\n                m_lLastError = sqlca.sqlcode;\n                m_bDBConn=false;\n                m_pSup-&gt;Show(VBL_MINIMAL,m_cLastError);\n            }\n        }\n        else\n        {\n            // Report the failure information\n            sprintf(m_cLastError, (char *)\"RTP5003E:CtrlIndexTLOGNames CURSOR declaration failed[%d]:\", sqlca.sqlcode);\n\n            // Here we append the RDBMS string\n            strncat(m_cLastError, sqlca.sqlerrm.sqlerrmc, sizeof(m_cLastError)-(strlen(m_cLastError)+2));\n\n            // Here we set the appropriate control information\n            m_lLastError = sqlca.sqlcode;\n            m_bDBConn=false;\n            m_pSup-&gt;Show(VBL_MINIMAL,m_cLastError);\n        }\n    }\n    else\n    {\n        strcpy(m_cLastError, (char *)\"RTP9101E:Transaction class was not properly initialized.\");\n        m_lLastError=EFAULT;\n    }\n\n    // Close out an ERROR'd cursor\n    if (!bRet) CloseCursor();\n\n    // Return the results of this action\n    return(bRet);\n}\n\n\nBOOLEAN CZYZ::GetSCCtrlNextTLOGFileName( char *&amp;pFileName)\n{\n    EXEC SQL BEGIN DECLARE SECTION; \n\n        char s_cDataSrcFileName[SZ_FILENAME+35];\n        char s_cAtTable[80];\n\n    EXEC SQL END DECLARE SECTION;\n\n    BOOLEAN bRet=false;\n    long lDataSize;\n\n    // Clear out the last error before diving in to the process\n    ClearLastError();\n\n    // Make sure that the caller's storage starts out clean\n    pFileName=(char *)null;\n\n    // Next make sure we have access to the database\n    if (m_bDBConn &amp;&amp; (m_lCursorCode == SCCURCTRLXMLBUFFER || m_lCursorCode == SCCURCTRLXMLBUFFER_B))\n    {\n        // Next check to see that DB is available\n        memset(s_cAtTable, 0, sizeof(s_cAtTable));\n        if (m_pSup-&gt;DBActive(m_lDBType))\n            m_pSup-&gt;DBAtString(m_lDBType, s_cAtTable, sizeof(s_cAtTable));\n        else\n            m_lDBType=DAI_PRIMARY;\n\n        if (m_lCursorCode == SCCURCTRLXMLBUFFER)\n        {\n            //printf(\"Inside m_lCursorCode == SCCURCTRLXMLBUFFER condition\\n\");\n            // Pull the information back from the database\n            EXEC SQL FETCH CtrlIndexTLOGNames_cursor INTO :s_cDataSrcFileName;\n        }\n        else\n        {\n            //printf(\"Inside m_lCursorCode == SCCURCTRLXMLBUFFER_B condition\\n\");\n            // Pull the information back from the database\n            EXEC SQL FETCH CtrlIndexTLOGNames_cursor_B INTO :s_cDataSrcFileName;\n        }\n        // Check to see if the cursor declare succeeded\n        if (sqlca.sqlcode == 0)\n        {\n            lDataSize=strlen((char *)s_cDataSrcFileName)+2L;\n            // Here we allocate the storage as needed\n                if ((pFileName=new char[lDataSize]) != (char *)null)\n                {\n                    // Here we move the data into this storage\n                    memset(pFileName, 0, lDataSize);\n                    strncpy(pFileName, s_cDataSrcFileName, lDataSize-1L);\n                    bRet=true;\n                    CleanWhiteSpace(pFileName);\n                }\n                else\n                {\n                    // Here we mark this failure for the caller\n                    sprintf(m_cLastError, (char *)\"RTP1000E:Memory Allocation Failed requesting %lu bytes (rc=%ld).\", lDataSize, errno);\n                    m_lLastError=ENOMEM;\n                    bRet=false;\n                }\n        }\n        else if (sqlca.sqlcode != DBERR_NOTFOUND &amp;&amp; sqlca.sqlcode != DBERR_NODATAFOUND)\n        {\n            // Report the failure information\n            sprintf(m_cLastError, (char *)\"RTP8323E:GLOAD CtrlIndexTLOGNames CURSOR fetch failed[%d]:\", sqlca.sqlcode);\n\n            // Here we append the RDBMS string\n            strncat(m_cLastError, sqlca.sqlerrm.sqlerrmc, sizeof(m_cLastError)-(strlen(m_cLastError)+2));\n\n            // Here we set the appropriate control information\n            m_lLastError = sqlca.sqlcode;\n            m_bDBConn=false;\n            m_pSup-&gt;Show(VBL_MINIMAL,m_cLastError);\n            bRet=false;\n        }\n        if (!bRet)\n        {\n            // Here is the cursor close\n            CloseCursor();\n        }\n    }\n    else\n    {\n        strcpy(m_cLastError, (char *)\"RTP9101E:RTPSC class was not properly initialized.\");\n        m_lLastError=EFAULT;\n    }\n\n    // Here we return the results of this action\n    return(bRet);   \n}\n</code></pre>\n\n<p>When I run this query, i get multiple rows with unique filenames. But when I use the function in my C code using while loop, this always returns top row and not other filenames.</p>\n\n<p>Can you please let me what is wrong with this?</p>\n\n<p>In C Module I call the Pro*C functions</p>\n\n<pre><code>// Get list of file names\n    if(!CXYZ.GetSCCtrlTLOGFileName())\n    {\n      printf(\"\\n\\nERROR creating cursor in SC_CTRL_XMLBUFFER Database Class: \n      \\n%s\\n\\n\", cErrorMsg);\n      return iRet=EIO;\n    }\n\n    while (CXYZ.GetSCCtrlNextTLOGFileName(pFile))\n    {\n     printf(\"UpdateWorkFlowListFromDB pFile - %s\\n\",pFile);\n     .\n     .\n     .\n    }   \n</code></pre>\n\n<p>Also,</p>\n\n<p>Is there a limit to number of open cursors?</p>\n\n<p>from my environment:</p>\n\n<pre><code>               select name,value from v$parameter where name like '%cursor%';\n\n               cursor_space_for_time    FALSE\n               session_cached_cursors   50\n               cursor_sharing   EXACT\n               open_cursors 1000\n               cursor_bind_capture_destination  memory+disk\n\n              select count(*) from V$OPEN_CURSOR;\n\n             1430\n</code></pre>\n\n<p>Could this be the reason for the issue?</p>\n"}, {"tags": ["c", "openmp"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1530132743, "post_id": 51071166, "comment_id": 89132265, "body": "Please explain why you explicitly make the for loop counter variable <code>i</code> private. And describe what happens if you don&#39;t, especially what happens which you do not want."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530133548, "post_id": 51071166, "comment_id": 89132585, "body": "Note: <code>malloc</code> + <code>memset</code> to zero is wasteful.  Use <code>calloc</code> if you want to allocate memory all initially set to zero.  Also, do not cast the return value of <code>malloc()</code> (or <code>calloc()</code>)."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1530133655, "post_id": 51071166, "comment_id": 89132624, "body": "What is the output with OpenMP?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1530133667, "post_id": 51071166, "comment_id": 89132628, "body": "Anyway, why in the world are you trying to parallelize this loop?  Every iteration depends (or should) on the result of the previous one; as written, it is inescapably serial."}, {"owner": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530134639, "post_id": 51071166, "comment_id": 89132983, "body": "@JohnBollinger what do you mean by &quot;do not cast the return value of malloc()&quot;, I&#39;m a little bit confused..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1530135558, "post_id": 51071166, "comment_id": 89133336, "body": "@Tom, C does not require the cast in your <code>ix_recv = (int *) malloc(ng)</code>, and I am among the many who consider it poor form and recommend against it.  Including it can hide flaws in your program, such as omitting the header in which <code>malloc</code> is declared.  Just leave it out: <code>ix_recv = malloc(ng)</code>.  (In C.  C++ has different rules.)"}, {"owner": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530136953, "post_id": 51071166, "comment_id": 89133859, "body": "@JohnBollinger Thanks a lot. You said the for loop is serial because every iteration depends on the result of previous one. So could you explain what kind of loop can be parallized?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530137946, "post_id": 51071166, "comment_id": 89134146, "body": "The fewer the dependencies between iterations, the better for parallelization a loop is.  Ideally, there would be no dependencies at all.  Your loop could be restructured like that by making each new value of <code>ix_recv</code> depend on <code>ng</code>, <code>dgx</code>, and <code>igx1</code>, but not on other elements of <code>ix_recv</code>.  There are other alternatives."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1530139724, "creation_date": 1530139724, "answer_id": 51072446, "question_id": 51071166, "link": "https://stackoverflow.com/questions/51071166/wrong-output-after-using-openmp-in-c-code/51072446#51072446", "title": "Wrong output after using OpenMP in C code", "body": "<p>In your loop, each iteration carries a dependency on the previous one:</p>\n\n<blockquote>\n<pre><code>for (i = 0; i &lt; ng - 1; i++) { \n    ix_recv[i + 1] = ix_recv[i] + dgx;\n}\n</code></pre>\n</blockquote>\n\n<p>Note how the value assigned to <code>ix_recv[i + 1]</code> depends on the value of <code>ix_recv[i]</code>.  The desired value is assigned to the former only if the expected value is read from the latter, which, in a serial execution, happens in the previous iteration.  And that iteration depends on the one before it, and so on, except that you have correctly arranged for the <code>i == 0</code> iteration to depend instead on a prior initialization outside the scope of the loop.</p>\n\n<p>Now suppose you break up the loop iterations into chunks that you can assign to separate threads, running in parallel.  Only one thread can get the chunk starting at <code>i == 0</code>.  Other threads' first chunks start elsewhere, and if they indeed are executed concurrently then those other threads start off with the wrong value in the preceding member of <code>ix_recv</code>.  It is then a case of garbage in / garbage out.</p>\n\n<p>This particular dependency is pretty easy to spot, but general dependency analysis is a hard problem, and OpenMP leaves it to the programmer to handle.  You might find this discussion of the topic illuminating: <a href=\"http://pages.tacc.utexas.edu/~eijkhout/pcse/html/openmp.html#Dependencyanalysis\" rel=\"nofollow noreferrer\">http://pages.tacc.utexas.edu/~eijkhout/pcse/html/openmp.html#Dependencyanalysis</a>.  If you do not remove or satisfy all your dependencies, then your parallel program is likely to produce incorrect results.</p>\n\n<p>In your particular case, there are multiple ways to solve the dependency problem.  Here's one:</p>\n\n<pre><code>#ifdef _OPENMP\n    #pragma omp parallel for\n#endif        \n    for (int i = 0; i &lt; ng; i++) { \n        ix_recv[i] = igx1 - 1 + dgx * i;\n    }\n</code></pre>\n\n<p>Note that the value of each element of <code>ix_recv</code> depends only on <code>i</code> and on loop invariants.</p>\n"}], "owner": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530139724, "creation_date": 1530132464, "last_edit_date": 1530133076, "question_id": 51071166, "link": "https://stackoverflow.com/questions/51071166/wrong-output-after-using-openmp-in-c-code", "title": "Wrong output after using OpenMP in C code", "body": "<p>Consider this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#ifdef _OPENMP\n#include &lt;omp.h&gt;\n#endif\n\nint main(int argc, char *argv[]) {\n    int i, ng, igx1 = 6, dgx = 1, igx2 = 599;\n    int *ix_recv;\n\n    ng = (igx2 - igx1) / dgx + 1;\n    ix_recv = (int *) malloc(ng); \n    memset(ix_recv, 0, ng * sizeof(int));\n\n    ix_recv[0] = igx1 - 1;\n\n#ifdef _OPENMP\n    #pragma omp parallel for default(none) private(i) shared(ix_recv,dgx,ng)\n#endif        \n    for (i = 0; i &lt; ng - 1; i++) { \n        ix_recv[i + 1] = ix_recv[i] + dgx;\n    }\n}\n</code></pre>\n\n<p>Without use of OpenMP, <code>ix_recv</code> ends up with values <code>5,6,7,8,...,597,598</code>, which is what I expect. When OpenMP is used, howver, the results become totally wrong.</p>\n\n<p>What's the problem?</p>\n"}, {"tags": ["c", "string", "function"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530132411, "post_id": 51071107, "comment_id": 89132122, "body": "You probably wanted to <code>scanf</code> instead of <code>printf(&quot;%s&quot;, s);</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1530132435, "post_id": 51071107, "comment_id": 89132131, "body": "Typo in the code: <code>printf(&quot;%s&quot;, s);</code> to <code>scanf(&quot;%s&quot;, s);</code> regardless of other deficiencies."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530132467, "post_id": 51071107, "comment_id": 89132143, "body": "<code>mytoupper(s[32])</code> -&gt; <code>mytoupper(s)</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530132567, "post_id": 51071107, "comment_id": 89132186, "body": "<code>void mytoupper(char * s[])</code> needs to be either <code>void mytoupper(char *s)</code> or <code>void mytoupper(char s[])</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530132617, "post_id": 51071107, "comment_id": 89132207, "body": "... and it should not return anything. Breaking the <code>printf(&quot;%s&quot;, mytoupper(s[32]));</code> line second time."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530133357, "post_id": 51071107, "comment_id": 89132516, "body": "<code>scanf(&quot;%s&quot;, s)</code> is akin to <code>gets(s)</code> - neither should ever be used.  <code>scanf(&quot;%31s&quot;, s)</code> with its width prevents buffer overrun."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1530133490, "post_id": 51071205, "comment_id": 89132563, "body": "<code>scanf(&quot;%s&quot;,&amp;s);</code> passes the wrong type.  Drop the <code>&amp;</code> and recommend to employ a width limit. <code>scanf(&quot;%31s&quot;,s);</code> - or even better, use <code>fgets()</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1530133512, "post_id": 51071205, "comment_id": 89132573, "body": "<code>scanf(&quot;%s&quot;,&amp;s);</code> is wrong. It might &quot;work&quot; if <code>s</code> is defined locally, but if <code>s</code> is a function argument, there is a big difference between <code>s</code> and <code>&amp;s</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1530135151, "post_id": 51071205, "comment_id": 89133185, "body": "<code>char *s[]</code> is not a pointer to an array, it&#39;s an array of pointers."}], "tags": [], "owner": {"reputation": 896, "user_id": 9996322, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKb7ymEsXic/AAAAAAAAAAI/AAAAAAAAAUE/PhlIctjmhPI/photo.jpg?sz=128", "display_name": "Jacob Boertjes", "link": "https://stackoverflow.com/users/9996322/jacob-boertjes"}, "is_accepted": false, "score": 0, "last_activity_date": 1530630621, "last_edit_date": 1530630621, "creation_date": 1530132621, "answer_id": 51071205, "question_id": 51071107, "link": "https://stackoverflow.com/questions/51071107/making-a-function-of-turning-lowercase-string-into-uppercase-string-in-c/51071205#51071205", "title": "making a function of turning lowercase string into uppercase string in c", "body": "<p>There are a few spots that will not work as expected in your code.</p>\n\n<ol>\n<li><p>You are not properly getting user input, instead you are trying to print an 'empty' string.</p>\n\n<pre><code>printf(\"%s\",s);\n</code></pre>\n\n<p>You could change this to:</p>\n\n<pre><code>scanf(\"%31s\",s);\n</code></pre></li>\n<li><p>You are accepting an array of char pointers in your function <code>mytoupper</code>, but this is not needed. You can instead simply pass it an array of chars.</p>\n\n<pre><code>void mytoupper(char s[]) \n</code></pre></li>\n<li><p>You are attempting to use a return value of a <code>void</code> function. You can either call the function then print the string, or have the function return the string.</p>\n\n<p>If you want to change the string then print it seperately you will need to change <code>mytoupper</code> to no longer return anything and keep it as a <code>void</code> return type.</p>\n\n<pre><code>mytoupper(s);\nprintf(\"%s\", s);\n</code></pre>\n\n<p>Or change the function to:</p>\n\n<pre><code>char* mytoupper(char s[]) {\n</code></pre>\n\n<p>Then print the string:</p>\n\n<pre><code>printf(\"%s\", mytoupper(s));\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9970112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3b4flg4uncI/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Jv1GwRAFR_whTfOorrJMtogfNlg/mo/photo.jpg?sz=128", "display_name": "Alexander Aubert", "link": "https://stackoverflow.com/users/9970112/alexander-aubert"}, "edited": false, "score": 0, "creation_date": 1530135765, "post_id": 51071594, "comment_id": 89133411, "body": "Thank you for your answer. When i space it, it only uppercase the first word. To prevent it, should i use fgets?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 23, "user_id": 9970112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3b4flg4uncI/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Jv1GwRAFR_whTfOorrJMtogfNlg/mo/photo.jpg?sz=128", "display_name": "Alexander Aubert", "link": "https://stackoverflow.com/users/9970112/alexander-aubert"}, "edited": false, "score": 0, "creation_date": 1530270640, "post_id": 51071594, "comment_id": 89187961, "body": "<code>scanf</code> with <code>%s</code> reads just one word. If you wish to process a whole line, use <code>fgets</code> with a larger buffer. If you wish to process the whole standard input stream contents, use a while loop, testing the return value of <code>fgets()</code>: <code>while (fgets(s, sizeof s, stdin)) { fputs(mytoupper(s), stdout); }</code>"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1530134461, "creation_date": 1530134461, "answer_id": 51071594, "question_id": 51071107, "link": "https://stackoverflow.com/questions/51071107/making-a-function-of-turning-lowercase-string-into-uppercase-string-in-c/51071594#51071594", "title": "making a function of turning lowercase string into uppercase string in c", "body": "<p>There are multiple problems in your code:</p>\n\n<ul>\n<li>the definition for <code>mytoupper</code> is incorrect: it should take a <code>char *s</code> argument instead of <code>char *s[]</code>, and return <code>char *</code>.</li>\n<li>Changing the character from lower to upper case should not use a hard coded value of <code>32</code> that only works for ASCII, use a more generic approach with <code>s[i] = s[i] - 'a' + 'A';</code></li>\n<li>To read the string, use <code>scanf(\"%31s\", s);</code> instead of <code>printf(\"%s\", s);</code> and it is highly recommended to test the return value of <code>scanf()</code></li>\n<li>The argument in <code>printf(\"%s\", mytoupper(s[32]));</code> is incorrect: you should just write <code>printf(\"%s\", mytoupper(s));</code></li>\n</ul>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar *mytoupper(char *s) {\n    int i = 0;\n    while (s[i] != '\\0') {\n        if (s[i] &gt;= 'a' &amp;&amp; s[i] &lt;= 'z') {\n            s[i] = s[i] - 'a' + 'A';\n        }\n        i++;\n    }\n    return s;\n}\n\nint main(void) {\n    char s[32];\n    printf(\"Insert string:\");\n    if (scanf(\"%31s\", s) == 1) {\n        printf(\"%s\\n\", mytoupper(s));\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9970112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3b4flg4uncI/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Jv1GwRAFR_whTfOorrJMtogfNlg/mo/photo.jpg?sz=128", "display_name": "Alexander Aubert", "link": "https://stackoverflow.com/users/9970112/alexander-aubert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 51071594, "answer_count": 2, "score": 1, "last_activity_date": 1530630621, "creation_date": 1530132163, "last_edit_date": 1530133927, "question_id": 51071107, "link": "https://stackoverflow.com/questions/51071107/making-a-function-of-turning-lowercase-string-into-uppercase-string-in-c", "title": "making a function of turning lowercase string into uppercase string in c", "body": "<p>I'm still a beginner at making function and C programming.\nI'm trying to make a function for turning it into uppercase, but it seems I messed it up at the pointer(?)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid mytoupper(char *s[]) {\n    int i = 0;\n    while (s[i] != '\\0') {\n        if (s[i] &gt;= 'a' &amp;&amp; s[i] &lt;= 'z') {\n            s[i] = s[i] - 32;\n        }\n        i++;\n    }\n    return s;\n}\n\nint main(void) {\n    char s[32];\n    printf(\"Insert string:\");\n    printf(\"%s\", s);\n    printf(\"%s\", mytoupper(s[32]));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "makefile", "compilation", "gnu-make"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1530131720, "post_id": 51070909, "comment_id": 89131759, "body": "Aside: you forgot to put <code>#define LAGRANGE_H</code> in <code>lagrange.h</code>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 5, "creation_date": 1530132006, "post_id": 51070909, "comment_id": 89131906, "body": "Remove the <code>static</code> keyword from <code>lagrange.h</code>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1530132230, "post_id": 51070909, "comment_id": 89132018, "body": "And it&#39;s good practice to include the header file in the corresponding .c file. So there should be a <code>#include &quot;lagrange.h&quot;</code> in lagrange.c."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1530132707, "post_id": 51070909, "comment_id": 89132243, "body": "<code>static</code> when defining a function means &quot;in this source file only.&quot; If you put it in a header it is either meaningless, or it creates a new copy of the function in every file that includes it. Not something that you want."}], "answers": [{"comments": [{"owner": {"reputation": 3296, "user_id": 1456887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01743e24e94a4bfe007c57079b21e7?s=128&d=identicon&r=PG", "display_name": "Jesse Chisholm", "link": "https://stackoverflow.com/users/1456887/jesse-chisholm"}, "edited": false, "score": 4, "creation_date": 1563838851, "post_id": 51103246, "comment_id": 100825074, "body": "Don&#39;t forget that putting things in the anonymous namespace also makes it file static. e.g., <code>namespace { ... }</code> is only visible to that code translation unit."}], "tags": [], "owner": {"reputation": 5314, "user_id": 5270581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leDO2.jpg?s=128&g=1", "display_name": "Laurent H.", "link": "https://stackoverflow.com/users/5270581/laurent-h"}, "is_accepted": true, "score": 19, "last_activity_date": 1530280387, "last_edit_date": 1530280387, "creation_date": 1530280012, "answer_id": 51103246, "question_id": 51070909, "link": "https://stackoverflow.com/questions/51070909/c-function-has-internal-linkage-but-is-not-defined/51103246#51103246", "title": "C - Function has internal linkage but is not defined", "body": "<h2><strong>Explanation of the error:</strong></h2>\n\n<p>The compilation error occurs because:  </p>\n\n<ol>\n<li>You have declared a function with <code>static</code> keyword (i.e. with internal linkage) inside <code>lagrange.h</code></li>\n<li>And you have included this file <code>lagrange.h</code> in <code>main.c</code> file different from <code>lagrange.c</code>, where the function is not defined.</li>\n</ol>\n\n<p>So when the compiler compiles <code>main.c</code> file, it encounters the <code>static</code> declaration without any associated definition, and raises logically the error. The error message is explicit.  </p>\n\n<h2>Solution:</h2>\n\n<p>In your case the solution is to remove the <code>static</code> keyword, because <code>static</code> means that the function can be called only in the .c file where it is defined, which is not your case.<br>\nMoreover, a good practice may be to declare any <code>static</code> function in the same .c file where it is defined, and not in .h file.</p>\n"}], "owner": {"reputation": 1134, "user_id": 6608222, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rO2Iu.png?s=128&g=1", "display_name": "th3g3ntl3man", "link": "https://stackoverflow.com/users/6608222/th3g3ntl3man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11957, "favorite_count": 2, "accepted_answer_id": 51103246, "answer_count": 1, "score": 11, "last_activity_date": 1530280387, "creation_date": 1530131198, "last_edit_date": 1530132508, "question_id": 51070909, "link": "https://stackoverflow.com/questions/51070909/c-function-has-internal-linkage-but-is-not-defined", "title": "C - Function has internal linkage but is not defined", "body": "<p>I have this folder structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZbEbt.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZbEbt.png\" alt=\"structure\"></a></p>\n\n<p>I wrote a simple function to test the folder structure, for seen if all header file but when I compile with the make command, I have this error:</p>\n\n<blockquote>\n  <p>warning: function 'stampa' has internal linkage but is not defined</p>\n</blockquote>\n\n<p>I the <code>lagrange.h</code> file I have this:</p>\n\n<pre><code>#ifndef LAGRANGE_H\n\nstatic void stampa(int i);\n\n#endif /* LAGRANGE_H */\n</code></pre>\n\n<p>and in the <code>lagrange.c</code> file I have this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n#include &lt;stdio.h&gt;\n\nvoid stampa(int i){\n    printf(\"%d\", i);\n}\n</code></pre>\n\n<p>in the end, int <code>main.c</code> I simply call the function <code>stampa</code> passing them a number. </p>\n"}, {"tags": ["c", "sorting", "split"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1530123938, "post_id": 51069239, "comment_id": 89128316, "body": "I have trouble understanding what your code is even attempting to do."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530124096, "post_id": 51069239, "comment_id": 89128393, "body": "Pretty sure at a glance that you are reading off the end of the <code>str</code> array.  Making a dynamic array for <code>leftover</code> is also done in a not completely portable way.  Honestly, also really not sure what you are trying to accomplish.  So I fall back to &quot;walk through it in a debugger and see if it does what you want.&quot;"}, {"owner": {"reputation": 21, "user_id": 8659172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sYNbvuARzmA/AAAAAAAAAAI/AAAAAAAAAB4/AFxvxYyi0lM/photo.jpg?sz=128", "display_name": "John O&#39;Meara", "link": "https://stackoverflow.com/users/8659172/john-omeara"}, "edited": false, "score": 0, "creation_date": 1530124189, "post_id": 51069239, "comment_id": 89128461, "body": "sorry. I realize my post isn&#39;t making so much since I will try to make it easier to understand what I am trying to accomplish."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530124208, "post_id": 51069239, "comment_id": 89128470, "body": "Need to NUL terminate your strings too.  If array is 12 length, last value must be 0."}, {"owner": {"reputation": 21, "user_id": 8659172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sYNbvuARzmA/AAAAAAAAAAI/AAAAAAAAAB4/AFxvxYyi0lM/photo.jpg?sz=128", "display_name": "John O&#39;Meara", "link": "https://stackoverflow.com/users/8659172/john-omeara"}, "edited": false, "score": 0, "creation_date": 1530124298, "post_id": 51069239, "comment_id": 89128514, "body": "What is NUL? Sorry if i sound stupid but I just started C about 3 weeks ago."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1530124309, "post_id": 51069239, "comment_id": 89128521, "body": "If you want to copy the first 12 characters of the string into <code>cursort</code>, firstly, <code>cursort</code> needs to be big enough to hold all those characters plus the null terminator.  Secondly, you&#39;ll want to use the <code>strncpy</code> to do the copy rather than rolling your own copy loop."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1530124416, "post_id": 51069239, "comment_id": 89128574, "body": "And finally, rather than copying the entire rest of the string into another string, you can just pass in a pointer to the point in the string you wish to start printing from."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1530124725, "post_id": 51069239, "comment_id": 89128725, "body": "@JohnO&#39;Meara The NUL terminator is a zero byte that marks the end of a string. All of the C string functions (including <code>printf</code>) expect a NUL terminator at the end of the string. For example, <code>cursort[11] = &#39;\\0&#39;;</code> would put a NUL terminator in the last byte of the <code>cursort</code> array."}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530126963, "post_id": 51069239, "comment_id": 89129781, "body": "char buf[size]={0}; strncpy(buf, str, 12); strcat(buf, &quot;\\n&quot;); strcat(buf, str+12); printf(&quot;%s\\n&quot;, buf);"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8659172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sYNbvuARzmA/AAAAAAAAAAI/AAAAAAAAAB4/AFxvxYyi0lM/photo.jpg?sz=128", "display_name": "John O&#39;Meara", "link": "https://stackoverflow.com/users/8659172/john-omeara"}, "edited": false, "score": 0, "creation_date": 1530124408, "post_id": 51069343, "comment_id": 89128569, "body": "Nope still, same result"}], "tags": [], "owner": {"reputation": 306, "user_id": 7823285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMSuA.png?s=128&g=1", "display_name": "Alex Ehlert", "link": "https://stackoverflow.com/users/7823285/alex-ehlert"}, "is_accepted": false, "score": 0, "last_activity_date": 1530124251, "creation_date": 1530124251, "answer_id": 51069343, "question_id": 51069239, "link": "https://stackoverflow.com/questions/51069239/how-to-split-a-string-based-on-element-in-c/51069343#51069343", "title": "How to split a string based on element in C", "body": "<p>Something is up with your second loop. Try this.</p>\n\n<pre><code>        int u = 999 - 12;\n        char leftover[u];\n        for (int i = 0; i &lt; u; i++)\n        {\n            leftover[i] = str[i + 12];\n        }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5757376, "user_type": "registered", "profile_image": "https://graph.facebook.com/806588656131046/picture?type=large", "display_name": "Alexander Cruz", "link": "https://stackoverflow.com/users/5757376/alexander-cruz"}, "edited": false, "score": 0, "creation_date": 1530124532, "post_id": 51069399, "comment_id": 89128624, "body": "could validate for null on the first for loop too"}, {"owner": {"reputation": 21, "user_id": 8659172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sYNbvuARzmA/AAAAAAAAAAI/AAAAAAAAAB4/AFxvxYyi0lM/photo.jpg?sz=128", "display_name": "John O&#39;Meara", "link": "https://stackoverflow.com/users/8659172/john-omeara"}, "edited": false, "score": 0, "creation_date": 1530124650, "post_id": 51069399, "comment_id": 89128683, "body": "Still, same result"}], "tags": [], "owner": {"reputation": 1, "user_id": 5757376, "user_type": "registered", "profile_image": "https://graph.facebook.com/806588656131046/picture?type=large", "display_name": "Alexander Cruz", "link": "https://stackoverflow.com/users/5757376/alexander-cruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1530124494, "creation_date": 1530124494, "answer_id": 51069399, "question_id": 51069239, "link": "https://stackoverflow.com/questions/51069239/how-to-split-a-string-based-on-element-in-c/51069399#51069399", "title": "How to split a string based on element in C", "body": "<p>well the second loop you could start from 0 and avoid subtracting 1. start the iterator from 12 and you might want to do it</p>\n\n<p>for (int i = 0; str[i + 12] != 0x00 ; i++)</p>\n\n<p>That way you avoid doing X number of iterations just copying nulls.</p>\n"}, {"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1530124860, "post_id": 51069434, "comment_id": 89128782, "body": "What built in routines would you suggest for this particular problem?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530124970, "post_id": 51069434, "comment_id": 89128843, "body": "<code>strcpy()</code>, <code>strncpy()</code> come to mind, though they only replace the for loops.  You&#39;d still need to do some pointer work.  If the split were for printing only, then you could get away with not having any secondary strings."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530125112, "post_id": 51069434, "comment_id": 89128916, "body": "BTW, style-wise, if I were to check this in, I would be laughed out of the office.  Take a look at &quot;Magic Numbers&quot; when you get a chance.  Right now, if I wanted to change where the &quot;break&quot; in the string was, I would need to change every number.  If I had made constants, it would only require a single change.  This is much easier to maintain and less error-prone in general."}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": true, "score": 1, "last_activity_date": 1530124708, "creation_date": 1530124708, "answer_id": 51069434, "question_id": 51069239, "link": "https://stackoverflow.com/questions/51069239/how-to-split-a-string-based-on-element-in-c/51069434#51069434", "title": "How to split a string based on element in C", "body": "<p>Ok, first of all, I've removed your dynamic array.  Next, I've tried to keep as much of your code as possible for clarity while showing what is going on with comments.</p>\n\n<pre><code>int main(void)\n{\n    char str[999] = \"Hello World&gt; This is a test\";\n\n    // Make a string for the first 12 elements.\n    char cursort[13];\n    for(int i = 0; i &lt; 12; i++)\n    {\n        cursort[i] = str[i];\n    }\n\n    // Terminate it.\n    cursort[12] = '\\0';\n\n    // Make an array for the remaining data on the stack\n    // Size is 12 less than original plus one for terminator.  This should be a constant or a #define\n    char leftover[999 - 12 + 1];\n\n    // Copy str into leftover offset by 12.\n    for(int i = 12; i&lt;999; i++)\n    {\n        leftover[i - 12] = str[i];\n    }\n\n    // Make sure it is terminated.\n    leftover[999] = '\\0';\n\n    // Print it\n    printf(\"%s\\n\", cursort);\n    printf(\"%s\\n\", leftover);\n    getchar();\n\n    return 0;\n}\n</code></pre>\n\n<p>The biggest change is how I've setup your second loop.  I would also add that doing string manipulations like this is very error prone.  You'd be better off using built in routines to handle this.</p>\n"}], "owner": {"reputation": 21, "user_id": 8659172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sYNbvuARzmA/AAAAAAAAAAI/AAAAAAAAAB4/AFxvxYyi0lM/photo.jpg?sz=128", "display_name": "John O&#39;Meara", "link": "https://stackoverflow.com/users/8659172/john-omeara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 51069434, "answer_count": 3, "score": -3, "last_activity_date": 1530124708, "creation_date": 1530123861, "last_edit_date": 1530124155, "question_id": 51069239, "link": "https://stackoverflow.com/questions/51069239/how-to-split-a-string-based-on-element-in-c", "title": "How to split a string based on element in C", "body": "<p>I was working on my C project and trying to figure out something simple. How to split a string based on it's char element. I know this sounds really easy and I know it is. But I'm getting this really odd occurrence and I don't know what to do about it.</p>\n\n<p>Code:</p>\n\n<pre><code>char str[999] = \"Hello World&gt; This is a test\";\n\n    char cursort[12];\n    for(int i = 0; i &lt; 12; i++)\n    {\n        cursort[i] = str[i];\n    }\n\n    int u = 999 - 12;\n    char leftover[u];\n    for(int i = 1; i &lt; u + 1; i++)\n    {\n        leftover[i - 1] = str[i + 11];\n    }\n\n    printf(\"%s\\n\", cursort);\n    printf(\"%s\\n\", leftover);\n    getchar();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Hello World&gt;Hello World&gt; This is a test\n This is a test\n</code></pre>\n\n<p>All i want is the first 12 characters to be on one line and the rest to be on a separate line.</p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "answers": [{"tags": [], "owner": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "is_accepted": true, "score": 3, "last_activity_date": 1530123591, "creation_date": 1530123591, "answer_id": 51069154, "question_id": 51068994, "link": "https://stackoverflow.com/questions/51068994/in-ref-linking-c-compiled-static-library-to-c-program/51069154#51069154", "title": "In ref : Linking C compiled static library to C++ Program", "body": "<p>You don't have to modify any headers. What is necessary is to wrap all C declarations with <code>extern C {}</code>. You can do this just as well in you <code>cpp</code> file:</p>\n\n<pre><code>extern \"C\" {\n#include \"some_c_header.h\"\n}\n\nint main() {\n    std::cout &lt;&lt; \"This is C++ code\\n\";\n}\n</code></pre>\n\n<p>It might be useful to create a header file which simply includes C headers with C linkage:</p>\n\n<pre><code>// c_header.hpp\n#pragma once\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif \n\n#include \"c_header_1.h\"\n#include \"c_header_2.h\"\n\n#ifdef __cplusplus\n}\n#endif\n\n// main.cpp\n#include \"c_header.hpp\" // extern \"C\" {} already handled for you\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1530123635, "creation_date": 1530123635, "answer_id": 51069166, "question_id": 51068994, "link": "https://stackoverflow.com/questions/51068994/in-ref-linking-c-compiled-static-library-to-c-program/51069166#51069166", "title": "In ref : Linking C compiled static library to C++ Program", "body": "<p>Only those declarations of C functions and objects that are accessed by C++ components need to declared with C linkage, and only <em>to</em> the C++ components.  Presumably, your new C++ library accesses very little, if anything, from the existing C code, so the primary concern would be whatever is accessed (directly) by <code>main()</code>.  Those functions must be declared (to <code>main</code>) with C linkage.  If that turns out to be a significant number of things then you could consider refactoring to make it fewer.</p>\n\n<p>Moreover, no, you do not need to modify existing header files.  The C++ files that reference your C library, and that therefore include some of its headers, can wrap the relevant <code>#include</code> statements an an <code>extern \"C\"</code> block to take care of the issue.</p>\n"}], "owner": {"reputation": 232, "user_id": 9867311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8987fb82181f0e60e832600d8076123?s=128&d=identicon&r=PG&f=1", "display_name": "Rudra", "link": "https://stackoverflow.com/users/9867311/rudra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 51069154, "answer_count": 2, "score": 1, "last_activity_date": 1533142664, "creation_date": 1530122964, "last_edit_date": 1533142664, "question_id": 51068994, "link": "https://stackoverflow.com/questions/51068994/in-ref-linking-c-compiled-static-library-to-c-program", "title": "In ref : Linking C compiled static library to C++ Program", "body": "<p>Stackoverflow won't let me comment because I am a newbie.</p>\n\n<p>Borrowing the title from the question posted <a href=\"https://stackoverflow.com/questions/19063975/linking-c-compiled-static-library-to-c-program\">here</a>, the accepted solution says that you have to modify the C header file using <code>#ifdef __cplusplus</code> and <code>extern \"C\"</code>.\nI have the exact same question but I have been provided a C library containing over 100 <code>.h</code> C header files and <code>.c</code> C program files and now I have to use a C++ library so my <code>main()</code> will be in C++. </p>\n\n<p>So do I now have to add those modifications to each one of those C header files or is there some other approach? My <code>main()</code> is in a <code>.cpp</code> file which will use functions from this C library.</p>\n\n<p><strong>EDIT</strong>\nThis question has been resolved. I wish for this question to be closed or removed.</p>\n"}, {"tags": ["c", "string", "file-processing", "word-processor"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1530122636, "post_id": 51068916, "comment_id": 89127714, "body": "Read line by line and compare."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1530123017, "post_id": 51068916, "comment_id": 89127888, "body": "You can use functions like <code>getline</code> and <code>strcmp</code>, etc."}, {"owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1530123092, "post_id": 51068916, "comment_id": 89127931, "body": "@lurker Okay, I&#39;ll read their manpages."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530123265, "post_id": 51068916, "comment_id": 89128014, "body": "<code>while(fgets( ....) != NULL)</code> and remember to <a href=\"https://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input/28462221#28462221\">remove any trailing newline</a>."}, {"owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530124827, "post_id": 51068916, "comment_id": 89128769, "body": "@WeatherVane I just now saw your comment, that&#39;s indeed the code I came up with just now. I know this is somewhat off-topic, but what&#39;s the difference between <code>while(fgets( ....) != NULL)</code> and <code>while(!fgets( ....))</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530125368, "post_id": 51068916, "comment_id": 89129028, "body": "There is no functional difference, but there are questions which ask if <code>NULL</code> is guaranteed to be <code>0</code>. Using <code>NULL</code> makes the code more readable as it is clear that comparison is for a pointer. Suppose your pointers are 64-bit but <code>int</code> is 32-bit. Does <code>!fgets</code> create more work at runtime, or will a good compiler do the work for you?"}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530127276, "post_id": 51068916, "comment_id": 89129941, "body": "system(&quot;file fname&quot;);"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530132047, "post_id": 51068916, "comment_id": 89131920, "body": "@WeatherVane Of course <code>while(fgets( ....) != NULL)</code> and <code>while(!fgets( ....))</code> are different.  Certainly OP meant to compare <code>while(fgets( ....) != NULL)</code> and <code>while(fgets( ....))</code>  - no <code>!</code>.  In this 2nd code comparison, if <code>NULL</code> is 0 or not is immaterial as they both function the same.  The <i>null pointer constant</i> <code>NULL</code>, if not already a <i>null pointer</i>, is converted to one before the compare."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530132207, "post_id": 51068916, "comment_id": 89132005, "body": "@chux brain fart. OP&#39;s <code>while(!fgets( ....))</code> was wrong."}, {"owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530149805, "post_id": 51068916, "comment_id": 89136572, "body": "@WeatherVane, yeah you&#39;re right I meant <code>while(fgets( ....))</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1530126643, "post_id": 51069789, "comment_id": 89129639, "body": "If you&#39;re looking to improve performance, you might want to hash the target line and compare the hash to each line in the file first. You&#39;ll still need to do the <code>strcmp()</code> in case of hash collisions, but collisions should be rare, unless you expect adversarial input."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1530127115, "post_id": 51069789, "comment_id": 89129869, "body": "@EOF I wouldn&#39;t expect that&#39;d be worth the trouble."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1530127508, "post_id": 51069789, "comment_id": 89130023, "body": "@SteveSummit I&#39;d expect it depends. An even simpler test would be to use the return value of <code>getline()</code>, which must either be <code>strlen(argv[1])</code> or <code>strlen(argv[1])+1</code> for the strings to possibly be equal."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1530128166, "post_id": 51069789, "comment_id": 89130293, "body": "A reasonable solution, but has no report about whether the string from <code>argv[1]</code> was found in the file. And it has a flaw that you failed to check <code>argc</code> to ensure there is an <code>argv[1]</code> supplied. Moreover, the <code>main</code> argument is incorrect; <code>char **argv[]</code> should be either <code>char *argv[]</code> or <code>char **argv</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1530132404, "post_id": 51069789, "comment_id": 89132116, "body": "@EOF <a href=\"https://stackoverflow.com/questions/51068916/determine-if-a-file-contains-a-string-in-c#comment89130023_51069789\">2nd idea</a> is a good one."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530132471, "post_id": 51069789, "comment_id": 89132145, "body": "Minor point: <code>free(NULL)</code> is OK so <code>if (line)         free(line);</code> can be <code>free(line);</code>.  No functional problem leaving it as is either.  Close to a style issue."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530132876, "post_id": 51069789, "comment_id": 89132315, "body": "Using <code>line[strcspn(line, &quot;\\n&quot;)] = 0;</code> is a nice one-liner to remove the <code>&#39;\\n&#39;</code>which can spend time checking each element of the string.   Yet code does have the line length <code>read</code> for an even faster test."}, {"owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1532740112, "post_id": 51069789, "comment_id": 90100951, "body": "@EOF I ended up using strcasecmp() in my program, so that wouldn&#39;t work."}, {"owner": {"reputation": 22423, "user_id": 196507, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ctXYp.png?s=128&g=1", "display_name": "lepe", "link": "https://stackoverflow.com/users/196507/lepe"}, "edited": false, "score": 0, "creation_date": 1562560143, "post_id": 51069789, "comment_id": 100397883, "body": "<code>strcmp</code> for some reason doesn&#39;t work for me. I used: <code>strstr(line, argv[1]) != NULL</code> instead."}], "tags": [], "owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "is_accepted": true, "score": 0, "last_activity_date": 1530126275, "creation_date": 1530126275, "answer_id": 51069789, "question_id": 51068916, "link": "https://stackoverflow.com/questions/51068916/determine-if-a-file-contains-a-string-in-c/51069789#51069789", "title": "Determine if a file contains a string in C", "body": "<p>This reads a file line by line and checks if the line matches the string supplied in argument 1 (<code>argv[1]</code>) after every read. If so, it sets the bool <code>infile</code> (bools defined in <code>&lt;stdbool.h&gt;</code>) to true.</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char **argv[]) {\n    char    *filepath = \"/path/to/file\";\n    bool    infile = false;\n    char    *line = NULL;\n    size_t  len = 0;\n    ssize_t read;\n\n    FILE    *fp = fopen(filepath, \"r\");\n\n    if (!fp) {\n        fprintf(stderr, \"Failed to open %s\\n\", filepath);\n        return 1;\n    }\n\n    while ((read = getline(&amp;line, &amp;len, fp)) != -1) {\n        line[strcspn(line, \"\\n\")] = 0;\n        if (!strcmp(line, argv[1])) {\n            infile = true;\n            break;\n        }\n    }\n    fclose(uuidfp);\n\n    if (line)\n        free(line);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2947, "favorite_count": 0, "accepted_answer_id": 51069789, "answer_count": 1, "score": 0, "last_activity_date": 1530126275, "creation_date": 1530122527, "question_id": 51068916, "link": "https://stackoverflow.com/questions/51068916/determine-if-a-file-contains-a-string-in-c", "title": "Determine if a file contains a string in C", "body": "<p>How can I check if a given <code>FILE*</code> contains a string in C running on Linux (if it matters)?</p>\n\n<p>The string must consist of the whole line it's on. For example, this:</p>\n\n<pre><code>jfjfkjj\nstring\njfjkfjk\n</code></pre>\n\n<p>would be true; but this:</p>\n\n<pre><code>jffjknf\nfklm...string...lflj\njfjkfnj\n</code></pre>\n\n<p>wouldn't. I'm essentially looking for an internal alternative to <code>system(\"grep -x file\")</code></p>\n"}, {"tags": ["c++", "c", "sdl"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1530119941, "post_id": 51068270, "comment_id": 89126374, "body": "That&#39;s a namespace, <code>::</code> being the scope operator."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 9, "creation_date": 1530119956, "post_id": 51068270, "comment_id": 89126382, "body": "C and C++ are different programming languages (and much more different than their apparent similarity). If you don&#39;t want to learn C++ (which is a reasonable decision) don&#39;t try to read or use C++ code. There is no equivalent in C or C++ scope operator."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1530120006, "post_id": 51068270, "comment_id": 89126413, "body": ":: is scope resolution.  NameSpaces or Classes use these to remove ambiguity and to help hide names.  Honestly, a 1 second google of this would explain it.  the .c_str() call is converting a standard c++ string into a C string of which you are familiar.  Again, a quick google explains.  In todays world, not learning C++ at all is going to be a serious handicap - even in embedded land.  You should do yourself a favor and at least become familiar with it."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1530120030, "post_id": 51068270, "comment_id": 89126426, "body": "Scope resolution operator. Consider learning C++ from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> instead of a random tutorial."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530120099, "post_id": 51068270, "comment_id": 89126452, "body": "@MichaelDorgan A 1 second google wouldn&#39;t explain namespaces, classes and member functions to someone who has never used a language providing those features."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530120147, "post_id": 51068270, "comment_id": 89126481, "body": "First google: <a href=\"https://www.geeksforgeeks.org/scope-resolution-operator-in-c/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/scope-resolution-operator-in-c</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530120187, "post_id": 51068270, "comment_id": 89126505, "body": "@MichaelDorgan Now put yourself in the position of someone who has never used C++. That link is not useful."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1530120326, "post_id": 51068270, "comment_id": 89126573, "body": "I appreciate where you are coming from.  I was forced to learn C++ kicking and screaming from C as well.  I would say even before I knew anything about C++, I could read the first sentence in that link and see what <code>::</code> does.  <code>.c_str()</code>  would require some more knowledge though.  I do remember wondering why the hell people were putting functions inside of structures. :)"}, {"owner": {"reputation": 31, "user_id": 7739810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dwQLvwmDHUs/AAAAAAAAAAI/AAAAAAAAAGg/quhGpzW8GtU/photo.jpg?sz=128", "display_name": "Richard Robertson", "link": "https://stackoverflow.com/users/7739810/richard-robertson"}, "edited": false, "score": 0, "creation_date": 1530120616, "post_id": 51068270, "comment_id": 89126729, "body": "I will be studying C++ next year but for my first year at university, C is where I&#39;m at. I don&#39;t need a direct equivalent, but if any of you know SDL as well, just a different way of doing this would be helpful. My lecturer told me I don&#39;t need to know C++ to follow this tutorial so there should be some uncomplicated way around it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 0, "creation_date": 1530120762, "post_id": 51068270, "comment_id": 89126802, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9338217/why-does-c-need-the-scope-resolution-operator\">Why does C++ need the scope resolution operator?</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1530120918, "post_id": 51068270, "comment_id": 89126880, "body": "In C, to achieve similar (but by very different means, and many nuanced differences), I&#39;ve seen developers use a &quot;prefix-with-underscore&quot; approach.  For example, if I came out with the Next Big Thing library, I may have a <code>NBT_string</code> where the &quot;NBT_&quot; prefix would help to prevent collisions with your <code>RR_string</code>.  SDL itself used &quot;SDL_&quot; prefix."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1530121760, "post_id": 51068270, "comment_id": 89127277, "body": "Your lecturer says you don&#39;t need to know C++ to learn C, and Kate Gregory says you don&#39;t need to know C to learn C++ in her <a href=\"https://www.youtube.com/watch?v=YnWhqhNdYyk\" rel=\"nofollow noreferrer\">lecture</a>."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1530165479, "post_id": 51068270, "comment_id": 89140207, "body": "@RichardRobertson your question is already answered, but if you&#39;ll try to directly use said tutorials in C, things will explode in most unexpected ways, so don&#39;t be surprised. Quesion about <code>close</code> function in lazyfoo tutorials pops every now and then - it just not written with possible C collisions in mind, and beginners rarely have a grasp to see potential quirks."}, {"owner": {"reputation": 31, "user_id": 7739810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dwQLvwmDHUs/AAAAAAAAAAI/AAAAAAAAAGg/quhGpzW8GtU/photo.jpg?sz=128", "display_name": "Richard Robertson", "link": "https://stackoverflow.com/users/7739810/richard-robertson"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1530816213, "post_id": 51068270, "comment_id": 89377706, "body": "@Keltar You&#39;re completely right. I encountered the &#39;close&#39; issue as well. Simple enough just to change the name though. However from what I can tell, the lazyfoo tutorials are still the best free online SDL resource for C students. I&#39;d kill for something this good writted in pure C."}], "answers": [{"tags": [], "owner": {"reputation": 616, "user_id": 8578679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CeZ5Z.png?s=128&g=1", "display_name": "Ruifeng Xie", "link": "https://stackoverflow.com/users/8578679/ruifeng-xie"}, "is_accepted": false, "score": 1, "last_activity_date": 1530120303, "creation_date": 1530120303, "answer_id": 51068379, "question_id": 51068270, "link": "https://stackoverflow.com/questions/51068270/c-equivalent-of-cs-double-colons/51068379#51068379", "title": "C equivalent of C++&#39;s double colons?", "body": "<p>Nothing to do with the <code>::</code> here. The <code>std::string</code> as a whole simply refers to a string, which might be expressed in C as a <code>const char *</code>(or <code>char *</code> maybe, for I guess C programmers do not care about the constness of variables). <code>path.c_str()</code> just means to get a <code>const char *</code> from the <code>std::string</code> variable <code>path</code>, so you can safely ignore it. </p>\n"}, {"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1530120433, "post_id": 51068389, "comment_id": 89126622, "body": "And I give you credit as this exactly answers the question while avoiding the C++.  Nice answer."}, {"owner": {"reputation": 31, "user_id": 7739810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dwQLvwmDHUs/AAAAAAAAAAI/AAAAAAAAAGg/quhGpzW8GtU/photo.jpg?sz=128", "display_name": "Richard Robertson", "link": "https://stackoverflow.com/users/7739810/richard-robertson"}, "edited": false, "score": 0, "creation_date": 1530818460, "post_id": 51068389, "comment_id": 89378756, "body": "@hvd That&#39;s perfect. Thank you so much."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 9, "last_activity_date": 1530120322, "creation_date": 1530120322, "answer_id": 51068389, "question_id": 51068270, "link": "https://stackoverflow.com/questions/51068270/c-equivalent-of-cs-double-colons/51068389#51068389", "title": "C equivalent of C++&#39;s double colons?", "body": "<p>In C, <code>loadSurface</code> would be declared as simply</p>\n\n<pre><code>SDL_Surface *loadSurface(const char *path)\n</code></pre>\n\n<p>which means the call to <code>SDL_LoadBMP</code> can be written as</p>\n\n<pre><code>SDL_Surface *loadedSurface = SDL_LoadBMP(path);\n</code></pre>\n\n<p>The details of what <code>std::string</code> does and why <code>.c_str()</code> is needed are not relevant if you are not interested in learning C++, and in this case are not relevant to the tutorial either.</p>\n"}], "owner": {"reputation": 31, "user_id": 7739810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dwQLvwmDHUs/AAAAAAAAAAI/AAAAAAAAAGg/quhGpzW8GtU/photo.jpg?sz=128", "display_name": "Richard Robertson", "link": "https://stackoverflow.com/users/7739810/richard-robertson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 51068389, "answer_count": 2, "score": -8, "last_activity_date": 1530131026, "creation_date": 1530119839, "last_edit_date": 1530131026, "question_id": 51068270, "link": "https://stackoverflow.com/questions/51068270/c-equivalent-of-cs-double-colons", "title": "C equivalent of C++&#39;s double colons?", "body": "<p>I'm studying C and know nothing about C++. LazyFoo's SDL2 tutorial that uses C++ does a thing with double colons that I don't understand and thus cannot follow in C. </p>\n\n<p>If it helps, here's the link to the tutorial:</p>\n\n<p><a href=\"http://lazyfoo.net/tutorials/SDL/04_key_presses/index.php\" rel=\"nofollow noreferrer\">http://lazyfoo.net/tutorials/SDL/04_key_presses/index.php</a></p>\n\n<pre><code>SDL_Surface *loadSurface( std::string path )\n{\n    //Load image at specified path\n    SDL_Surface *loadedSurface = SDL_LoadBMP( path.c_str());\n    if( loadedSurface == NULL )\n    {\n        printf(\"Unable to load image %s! SDL Error: %s\\n\", path.c_str(), SDL_GetError());\n    }\n\n    return loadedSurface:\n}\n</code></pre>\n\n<p>Everything here makes sense to me except the function parameters and LoadBMP parameters. I don't know what the <code>::</code> means, and I don't know what <code>path.c_str()</code> is referring to.</p>\n\n<p>Please, could someone explain it in a way that makes sense in C, or suggest a C-only workaround?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 3, "creation_date": 1530116593, "post_id": 51067405, "comment_id": 89124728, "body": "You&#39;re not using pointers here, so in both cases ui32 will contain the value <code>2</code> (<code>00000000000000000000000000000010</code>)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1530116640, "post_id": 51067405, "comment_id": 89124747, "body": "And if you <i>were</i> using pointers, the result would be undefined."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1530116667, "post_id": 51067405, "comment_id": 89124772, "body": "And this comment is unclear: <code>assume  &amp;arr[0] == 0x0</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530116685, "post_id": 51067405, "comment_id": 89124783, "body": "In both cases your definition and initialization is the same as <code>uint32_t ui32 = arr[1];</code>. The casting does nothing the compiler would not do anyway."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1530116723, "post_id": 51067405, "comment_id": 89124805, "body": "What you&#39;re trying to do is <code>ui32 = *(uint32_t *)arr</code> and while that will probably &quot;work&quot; for you, it will have various endianness, alignment, and undefinedness issues."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1530117176, "post_id": 51067405, "comment_id": 89125053, "body": "I noticed that I am not using pointers, so I changed the post"}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1530117236, "post_id": 51067405, "comment_id": 89125084, "body": "@Hairi Now, instead of a useable value, you have the address of the first item in the array."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1530117251, "post_id": 51067405, "comment_id": 89125091, "body": "Now you have Undefined Behavior on your hands (you&#39;re creating a potentially misaligned pointer). If you want to know more details, you&#39;d have to look at your compiler documentation."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1530117326, "post_id": 51067405, "comment_id": 89125127, "body": "Does it make sense now?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1530117340, "post_id": 51067405, "comment_id": 89125135, "body": "@Hairi With your second edit, yes, <code>*ui32</code> will likely end up containing <code>0x05040302</code> on a little-endian machine.  But the code might also crash, because this is not guaranteed to work."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1530117455, "post_id": 51067405, "comment_id": 89125191, "body": "Does it matter 8bit or 32 bits platform?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1530117536, "post_id": 51067405, "comment_id": 89125233, "body": "@Hairi I expect it will &quot;work&quot; just as well, and have just as many potential problems, on either kind of platform."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530119572, "post_id": 51067405, "comment_id": 89126196, "body": "From a strict C standard view point, your code has undefined behavior. So there is no way to answer this question in general."}], "answers": [{"comments": [{"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530120104, "post_id": 51067947, "comment_id": 89126459, "body": "@4386427: Feel free to detail how so :-)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530120613, "post_id": 51067947, "comment_id": 89126727, "body": "NMDV, but even if it does not inherit it from some underlying ABI, every conforming C implementation will have specific representations for its integer types wider than <code>char</code>.  We tend to refer to this as &quot;endianness&quot;, though there are, in fact, many more options than just little- and big-endian.  It makes perfect sense to talk about this, including in the context of machines having an 8-bit native word size."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530120658, "post_id": 51067947, "comment_id": 89126758, "body": "Endianness is about how data is stored in memory. LSB or MSB first. It has nothing to do with the width of the processor architecture. A 32 bit system still stores 64 bit integers with a specific endianness."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530120803, "post_id": 51067947, "comment_id": 89126820, "body": "Quote: &quot; ... then yes, a good guess would be 0x02030405&quot; No, that a bad guess. If the access is at all valid, a more likely it&#39;s 0x05040302. After all it&#39;s a little endian system."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530121547, "post_id": 51067947, "comment_id": 89127169, "body": "@JohnBollinger: Yeah, that is why I said it would be a software implementation, rather than native support by the uC. Since the question says &quot;8-bit MCU/MPU/Platform&quot;, I was assuming the OP is talking about the arch, not the compiler. But I see your point -- it is probably there (assuming this is an exercise) so that the answer to the &quot;what the value is?&quot; can be answered. Thanks!"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1530122305, "post_id": 51067947, "comment_id": 89127548, "body": "@4386427: Regarding your 2nd comment: If everything in a uC is 8-bit (as I understood by &quot;8 bit MCU/MPU/Platform&quot;), it will typically not support 16-bit integers, which means there is no point talking about its endianness -- this is what I was trying to convey. Of course, the compiler may support longer integers (as John explained and as I was saying in another paragraph in the answer). Regarding your 3rd comment: The answer explicitly says it is taking &quot;big-endian&quot; as the guess; but I will change it, so that you are less grumpy ;-)"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530123124, "post_id": 51067947, "comment_id": 89127952, "body": "Removed DV... Grumpy... well, you may call me what you want but I would prefer a less patronicing word"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530124189, "post_id": 51067947, "comment_id": 89128460, "body": "@Acorn, every conforming C implementation supports integers at least 64 bits wide.  This is the size required for the minimum range of type <code>long long</code>.  Implementations conforming only to earlier standards that did not require <code>long long</code> will still provide integers at least 32 bits wide (required for the minimum range of type <code>long</code>)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1530127581, "post_id": 51067947, "comment_id": 89130043, "body": "&quot;Endianness is about how data is stored in memory. LSB or MSB first. It has nothing to do with the width of the processor architecture&quot; is an interesting comment - yet I do not agree with it.  If the processor&#39;s native working data width is P-bits (e.g. 8, 16, 32, 64) and addressing resolution is A-bits (e.g. overwhelmingly 8 but others exist), then anytime P &gt; A, then endian issues come up in C.  It is because of P &gt; A that the processor will have a machine defined endian."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530129578, "post_id": 51067947, "comment_id": 89130876, "body": "@JohnBollinger: The C standard is not really relevant here (i.e. very small uCs). Even if a compiler chooses to support 16- or 32-bit integers (in software), they may be useless in practice (due to the speed and specially the program size hit). While in many cases, for such limited uCs, it is true you may want to be programming directly in assembler; it is still useful to have a C compiler around (even if it is not conforming -- it may not even come with a stdlib at all)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1530129869, "post_id": 51067947, "comment_id": 89131000, "body": "@Acorn, if the question is not about conforming C implementations, or at least about implementations that conform to an obsolete version of the C standard, then on what basis are we supposed to answer?  There is a reason that SO has no [unspecified-C-like-language] tag."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530129957, "post_id": 51067947, "comment_id": 89131035, "body": "@4386427: No offense intended -- I felt you were a bit too emotive/annoyed on your initial comments; if you weren&#39;t, I withdraw the &quot;grumpy&quot; part :-)"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530130453, "post_id": 51067947, "comment_id": 89131237, "body": "@JohnBollinger: There are many non-conforming C compilers (specially a few years ago; also for C++). The fact that they are not conforming does not mean we cannot answer questions about them. I feel there is a strong trend in StackOverflow to always try to frame questions around strictly standard C; even when the question is clearly not referring to it or the intended reader is not knowledgeable enough. The reality is that there are many questions that can be discussed about non-standard C (or C++). For instance, I doubt this one (which looks like a u-arch exercise to me) is about C."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530130950, "post_id": 51067947, "comment_id": 89131434, "body": "@JohnBollinger: Actually, I don&#39;t agree with the &quot;[unspecified-C-like-language] tag&quot; either. But I don&#39;t agree with the [c] tag being &quot;strictly C99/C11, nothing else&quot; either. I would prefer the [c] simply meaning &quot;C, in any of its variants&quot; (including old ANSI C; and including C-like questions like this one, which are not really C but it is good enough to understand what OP is asking). Whoever wants to really talk about standard C can tag it as &quot;language-lawyer&quot; and as a specific version if needed. Rationale: I think the majority of readers of SO do not come here to talk about the standard :-)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530130951, "post_id": 51067947, "comment_id": 89131435, "body": "@Acorn, agreed: the fact that a compiler does not conform does not mean that we cannot answer questions about it.  But a question tagged [c] and <i>not</i> specifying any particular implementation or otherwise explaining what aspects of C we are asked about can only reasonably be interpreted as a question about conforming implementations, because <i>anything else is not C</i>."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530131225, "post_id": 51067947, "comment_id": 89131550, "body": "@JohnBollinger: See my comment above (I was writing it and we crossed comments). As for &quot;because <i>anything else is not C.</i>&quot;, I don&#39;t agree. See, if we are going to be strict and pedantic, there is no &quot;C&quot; either. Do we mean ANSI C, K&amp;R C, ISO C? Therefore, let that tag be &quot;c11&quot; or &quot;iso-c&quot; or &quot;std-c&quot;. Whoever decided that &quot;c&quot; means &quot;ISO/IEC 9899:2011&quot; was in the wrong, in my opinion. I, for sure, say &quot;Linux is written in C&quot;. However, according to you, that sentence is wrong. (and not just because of the version; think about the extensions applied, too :-)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530132358, "post_id": 51067947, "comment_id": 89132084, "body": "Yes, @Acorn, in a strict sense, the Linux kernel is written in a language very similar to, but not exactly C.  And when we get questions about the kernel here, that provides the context to establish what language we&#39;re actually talking about.  We need to know what language(s) we&#39;re discussing to hold the discussion at all.  Whether you like it or not, the prevailing view among high-rep members frequenting the [c] tag, including myself, seems to be that absent specification to the contrary, &quot;C&quot; means the language of that name defined by the current international standard."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530134201, "post_id": 51067947, "comment_id": 89132821, "body": "@JohnBollinger: Just consider for a moment that the &quot;kernel C&quot; is less like ISO/IEC 9899:2011 (the &quot;C&quot; tag) than the C in this version. :-) As for &quot;We need to know what language(s) we&#39;re discussing&quot;, that is not completely true. As a counterexample, see this question. There is no need to know it is C11 (actually, it isn&#39;t; and it is clear from the context -- and still we got several comments and an answer talking about type-punning etc.). As for the argument of authority, sorry, that is invalid (<i>specially</i> considering how reputation works and how skewed it is towards old and active users)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1530136556, "post_id": 51067947, "comment_id": 89133715, "body": "On the contrary, it is not at all clear from context that the question is not about C11.  And that absolutely matters, because it deeply impacts what answers are correct.  It is not so much about whether people can write answers, but about how anyone can <i>evaluate</i> them.  In any case, you are of course free to disagree with the prevailing view. Over time, you might even manage to shift it.  Until then, however, disregarding it is likely to get you into debates about what &quot;C&quot; means here."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530174057, "post_id": 51067947, "comment_id": 89144683, "body": "@JohnBollinger: Sorry, but the question makes no mention <i>at all</i> about C11, much less about language standards. The <i>only</i> place where a given standard is mentioned is in the description of the tag (which are misused almost all the time by beginners). Moreover, under ISO/IEC 9899:2011, the answers are undefined. So, should we ignore all the context and details of the question (note that many would be superfluous in this case), assume OP is talking about ISO/IEC 9899:2011 (even if the answers are undefined) and that a legalese answer is expected just because the &quot;c&quot; was used? (...)"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1530174349, "post_id": 51067947, "comment_id": 89144830, "body": "(...) Or maybe we shall be reasonable, try to understand his/her knowledge level, acknowledge that the question seems to be about computer architecture (endianness, alignment requirements, etc.) and selected the &quot;c&quot; tag because his/her code was simply written in &quot;C&quot;? You might even manage to shift your view, over time, as well! :) As for getting into debates, that is fine with me -- really, I am trying to improve the site, help people and discuss technical questions. If that costs me &quot;SO&#39;s reputation&quot;, so be it... :("}], "tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1530122507, "last_edit_date": 1530122507, "creation_date": 1530118531, "answer_id": 51067947, "question_id": 51067405, "link": "https://stackoverflow.com/questions/51067405/casting-element-of-uint8-t-to-32-bit-variable-on-8-bit-platform-or-32-bit-platfo/51067947#51067947", "title": "Casting element of uint8_t to 32-bit variable on 8-bit platform or 32-bit platform", "body": "<blockquote>\n  <p><strong>8 bit MCU/MPU/Platform - Little endian</strong></p>\n</blockquote>\n\n<p>The answer will assume the platform, somehow, support longer integers even if the CPU might not, and that they are little-endian.</p>\n\n<p>Note that, if a uC is truly 8-bit and has no notion of longer integers, then it does not make much sense to talk about its (byte) endianness. We could say, for instance, that it is both little-endian and big-endian (or that it is not any of those).</p>\n\n<blockquote>\n<pre><code>//assume &amp;arr[0] == 0x0\n</code></pre>\n</blockquote>\n\n<p>This may be hinting that this is coming from some exercise about misaligned accesses.</p>\n\n<blockquote>\n  <p>What is the value of <code>*ui32</code>? <code>0x2030405</code>? Is it necessary <code>uint32_t</code> variable to be placed to an address multiple of 4 at this platform?</p>\n</blockquote>\n\n<p>It depends on the platform and on the options of the compiler (e.g. if the compiler is assuming strict aliasing, then this is undefined behaviour to begin with).</p>\n\n<p>However, since this is a 8-bit platform (and assuming you tell the compiler to do what you seem to want to do), a fair guess is that <code>uint32_t</code> has to be supported in software and that unaligned accesses are not a problem. Assuming the integer is kept in memory as little-endian (as explained above) by that software implementation, then yes, a good guess would be <code>0x05040302</code>.</p>\n\n<blockquote>\n  <p><strong>32 bit MCU/MPU/Platform - Little endian</strong>\n  What is the value of <code>*ui32</code>?</p>\n</blockquote>\n\n<p>Again, in this case, it would depend on the platform/compiler. In some of them, there wouldn't be any value even, since the CPU would trap when you try to read such an address (since <code>&amp;arr[0] == 0</code>, <code>ui32 == 1</code> which is unaligned to e.g. 4).</p>\n\n<blockquote>\n  <p>I know that 32bit variables should reside in address multiple of 4.</p>\n</blockquote>\n\n<p>Typically, but depends on the platform. Also, even if a platform supports unaligned accesses, it may be the case that it is slower than aligned accesses (so you want them aligned anyhow).</p>\n\n<blockquote>\n  <p>Where I can find specification on this?</p>\n</blockquote>\n\n<p>On top of the C specification, you would need to check your compiler's documentation and your architecture's manuals.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1530130698, "post_id": 51068805, "comment_id": 89131327, "body": "As long as we&#39;re language lawyering, I agree that copying arbitrary bits into the representation of a <code>uint32_t</code> and then reading out the value of that object as a <code>uint32_t</code> does not produce UB. As far as I can tell, however, the result is not implementation-defined either, but rather unspecified.  Yet that is not what the example code does.  Nothing is copied, and indeed no <code>uint32_t</code> object is declared at all.  Reading (part of) the value of <code>arr</code> via an lvalue of type <code>uint32_t</code> violates the strict aliasing rule (C2011 6.5/7) and therefore produces UB."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 3, "last_activity_date": 1530131539, "last_edit_date": 1530131539, "creation_date": 1530122071, "answer_id": 51068805, "question_id": 51067405, "link": "https://stackoverflow.com/questions/51067405/casting-element-of-uint8-t-to-32-bit-variable-on-8-bit-platform-or-32-bit-platfo/51068805#51068805", "title": "Casting element of uint8_t to 32-bit variable on 8-bit platform or 32-bit platform", "body": "<h2>Language Lawyering</h2>\n\n<p>Your code contains undefined behavior and is non-portable.  For example, on some UNIX workstations I\u2019ve programmed on, memory accesses must be aligned to the size of the operand, so most but not all of the time, attempting to dereference <code>(uint32_t*)&amp;arr[1]</code> would crash the program with <code>SIGBUS</code>, a hardware error caused by the memory bus.  The compiler allows you to shoot yourself in the foot like that.  Casting a pointer like you did violates the strict aliasing rules of C, which causes <strong>undefined behavior</strong>.</p>\n\n<p>You can get around this issue by writing <code>uint32_t x; memcpy( &amp;x, &amp;array[1], sizeof(x) )</code>, which the standard explicitly allows.  From this point on, I\u2019ll be assuming you\u2019re doing the equivalent of this.  If you were not using an offset into the array, you could also type=pun with fields of a union in C (although the rules are different in C++).</p>\n\n<p>By the standard, the elements of an array must be stored contiguously, with no padding between them.  A <code>memcpy()</code> between some object <code>x</code> and an array of <code>unsigned char[sizeof(x)]</code> is legal, and the result is called its <strong>object representation</strong>.</p>\n\n<p>Copying arbitrary bits to the object representation of any of the exact-width types in <code>&lt;stdint.h&gt;</code> with <code>memcpy()</code> is <strong>unspecified behavior</strong>, not <strong>undefined behavior</strong>.  It is a well-formed program, and you will get some valid <code>uint32_t</code> out of it, even though the language standard does not say what that has to be.  You aren\u2019t giving the compiler permission to do whatever it wants, such as Kill All Humans.  This is only because the standard does not permit the exact-width integral types to have any bits other than value bits, and therefore, they cannot have <strong>trap representations</strong>, invalid bit patterns that cause undefined behavior if copied into a value of that type.  (The example in the standard is an implementation that stores a parity bit in every word.)</p>\n\n<p>However, the other side of that guarantee is that the types <code>uint8_t</code> and <code>uint32_t</code> are not guaranteed to exist, and there have been a few architectures in the real world for which conforming versions of them could never exist.  (However, <code>unsigned char array[sizeof(uint_least32_t) + 1]</code> is guaranteed to work.)</p>\n\n<h2>Tl;dr</h2>\n\n<p>A real-world little-endian implementation on which that code runs correctly would probably tell you that <code>*u32</code> is <code>0x05040302</code>.  Otherwise, we would call it something other than little-endian.  However, some compilers put the onus on the programmer to follow the strict-aliasing rules carefully.  They are known to produce optimized code that doesn\u2019t do what you expect if you write through either pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1530122852, "creation_date": 1530122852, "answer_id": 51068976, "question_id": 51067405, "link": "https://stackoverflow.com/questions/51067405/casting-element-of-uint8-t-to-32-bit-variable-on-8-bit-platform-or-32-bit-platfo/51068976#51068976", "title": "Casting element of uint8_t to 32-bit variable on 8-bit platform or 32-bit platform", "body": "<blockquote>\n  <p><strong><em>1: 8 bit MCU/MPU/Platform - Little endian</em></strong></p>\n\n<pre><code>uint8_t arr[5] = {0x1,0x2,0x3,0x4,0x5};//assume &amp;arr[0] == 0x0\nuint32_t *ui32 = (uint32_t*)&amp;arr[1];\n</code></pre>\n  \n  <p>What is the value of <code>*ui32</code>?</p>\n</blockquote>\n\n<p>C explicitly declares the effect of reading the value of <code>*ui32</code> to be undefined in that case, on account of reading the value of an object (part of <code>arr</code>) via an lvalue of a different type.</p>\n\n<blockquote>\n  <p><code>0x2030405</code>?</p>\n</blockquote>\n\n<p>It is by no means guaranteed, yet not so uncommon in practice, that the value obtained by reading <code>*ui32</code> would be that of interpreting the bit pattern comprising elements 1 - 4 of <code>arr</code> as that of a <code>uint32_t</code>, but what number that represents is unspecified.  It is left to implementations to determine how to map physical bytes to logical ones.</p>\n\n<p>However, if by \"little-endian\" you mean that the C implementation's <code>uint32_t</code> is represented by a four-8-bit-byte sequence in least-significant to most-significant order, and if you suppose that dereferencing the pointer indeed does successfully interpret the pointed-to bit pattern as that of a <code>uint32_t</code>, then the resulting value would be the same as that represented by the integer constant <code>0x05040302u</code>.</p>\n\n<blockquote>\n  <p>Is it necessary <code>uint32_t</code>\n  variable to be placed to an address multiple of 4 at this platform?</p>\n</blockquote>\n\n<p>You have not specified a platform, nor even a particularly narrow <em>class</em> of platforms.  I would generally expect an 8-bit platform not to require 4-byte alignment for objects of type <code>uint32_t</code>, but C does not specify, and platforms and implementations may vary.</p>\n\n<blockquote>\n  <p><strong><em>1: 32 bit MCU/MPU/Platform - Little endian</em></strong></p>\n  \n  <p>Pretty much the same example:</p>\n</blockquote>\n\n<p>Exactly the same answer, except that it is more likely -- but by no means certain -- that 4-byte alignment would be required for objects of type <code>uint32_t</code>.</p>\n\n<blockquote>\n  <p>I know that 32bit variables should reside in address multiple of 4.</p>\n</blockquote>\n\n<p>Not necessarily.  Some 32-bit platforms indeed do require it; some do not require it, but offer faster access for aligned objects; and some don't care at all.</p>\n\n<blockquote>\n  <p>Where I can find specification on this?</p>\n</blockquote>\n\n<p>Such details of your C implementation of interest as are available at all would be found in that implementation's documentation.  The underlying system's ABI and / or hardware documentation might serve as a secondary source.</p>\n\n<p>Overall, however, the best recommendation is usually to avoid such questions altogether.  Avoiding unspecified, implentation-defined, and especially undefined behaviors would allow you to rely wholly on the C standard to predict the behavior of your program.</p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 51068805, "answer_count": 3, "score": 1, "last_activity_date": 1530131539, "creation_date": 1530116463, "last_edit_date": 1530117244, "question_id": 51067405, "link": "https://stackoverflow.com/questions/51067405/casting-element-of-uint8-t-to-32-bit-variable-on-8-bit-platform-or-32-bit-platfo", "title": "Casting element of uint8_t to 32-bit variable on 8-bit platform or 32-bit platform", "body": "<p>Lets consider two examples</p>\n\n<p><strong><em>1: 8 bit MCU/MPU/Platform - Little endian</em></strong></p>\n\n<pre><code>uint8_t arr[5] = {0x1,0x2,0x3,0x4,0x5};//assume &amp;arr[0] == 0x0\nuint32_t *ui32 = (uint32_t*)&amp;arr[1];\n</code></pre>\n\n<p>What is the value of <code>*ui32</code>? <code>0x2030405</code>?\nIs it necessary <code>uint32_t</code> variable to be placed to an address multiple of 4 at this platform?</p>\n\n<p><strong><em>1: 32 bit MCU/MPU/Platform - Little endian</em></strong> </p>\n\n<p>Pretty much the same example:</p>\n\n<pre><code>uint8_t arr[] = {0x1,0x2,0x3,0x4,0x5, 0x6, 0x7, 0x8}; //again assume &amp;arr[0] == 0x0\nuint32_t *ui32 = (uint32_t*)&amp;arr[1];\n</code></pre>\n\n<p>What is the value of <code>*ui32</code>?</p>\n\n<p>I know that 32bit variables should reside in address multiple of 4.</p>\n\n<p>Where I can find specification on this?</p>\n"}, {"tags": ["java", "c", "eclipse", "ubuntu", "java-native-interface"], "comments": [{"owner": {"reputation": 102407, "user_id": 2670892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4iPV5.png?s=128&g=1", "display_name": "greg-449", "link": "https://stackoverflow.com/users/2670892/greg-449"}, "edited": false, "score": 0, "creation_date": 1530116416, "post_id": 51067166, "comment_id": 89124624, "body": "That code in the handler will only run in an Eclipse plugin in a properly set up Eclipse. It will <b>not</b> run in a empty JVM such as you show here."}, {"owner": {"reputation": 11, "user_id": 10000790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kRzRy.jpg?s=128&g=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/10000790/elena"}, "reply_to_user": {"reputation": 102407, "user_id": 2670892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4iPV5.png?s=128&g=1", "display_name": "greg-449", "link": "https://stackoverflow.com/users/2670892/greg-449"}, "edited": false, "score": 0, "creation_date": 1530167800, "post_id": 51067166, "comment_id": 89141219, "body": "So, to make the JNI possible what should I do?"}, {"owner": {"reputation": 102407, "user_id": 2670892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4iPV5.png?s=128&g=1", "display_name": "greg-449", "link": "https://stackoverflow.com/users/2670892/greg-449"}, "edited": false, "score": 0, "creation_date": 1530168648, "post_id": 51067166, "comment_id": 89141645, "body": "You can&#39;t run Eclipse plugin code like this. The closest is to create a &#39;headless&#39; Eclipse RCP and run the executable."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10000790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kRzRy.jpg?s=128&g=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/10000790/elena"}, "edited": false, "score": 0, "creation_date": 1530167639, "post_id": 51067796, "comment_id": 89141152, "body": "I tried and it doesn&#39;t work. cls is still NULL. The only problem is in the path, because the rest of the code is the same of the other programs I made and all of them work."}, {"owner": {"reputation": 1908, "user_id": 2543253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a87e0065d4c5036eb7adabe2edfd187?s=128&d=identicon&r=PG", "display_name": "user2543253", "link": "https://stackoverflow.com/users/2543253/user2543253"}, "edited": false, "score": 1, "creation_date": 1530193817, "post_id": 51067796, "comment_id": 89157639, "body": "use slashes (not periods) in qualified class name <code>org&#47;eclipse&#47;...</code>"}], "tags": [], "owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "is_accepted": false, "score": 1, "last_activity_date": 1530117945, "creation_date": 1530117945, "answer_id": 51067796, "question_id": 51067166, "link": "https://stackoverflow.com/questions/51067166/findclass-returns-null-when-class-is-not-in-a-default-package/51067796#51067796", "title": "FindClass returns null when .class is not in a default package", "body": "<p>First problem you setup classpath wrong</p>\n\n<p>Instead of </p>\n\n<pre><code>options[0].optionString = \"-Djava.class.path=/home/ezambon/Desktop/modeling/org/eclipse/gemoc/testAppliLauncher/bin/org/eclipse/gemoc/testapplilauncher/handlers\";\n</code></pre>\n\n<p>you should have </p>\n\n<pre><code>options[0].optionString = \"-Djava.class.path=/home/ezambon/Desktop/modeling/org/eclipse/gemoc/testAppliLauncher\";\n</code></pre>\n\n<p>and you should use full class name </p>\n\n<pre><code>cls = (*env)-&gt;FindClass(env, \"org.eclipse.gemoc.testapplilauncher.handlers.HelloWorldHandler\");\n</code></pre>\n\n<p>But I suppose this is not all your problems.</p>\n"}], "owner": {"reputation": 11, "user_id": 10000790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kRzRy.jpg?s=128&g=1", "display_name": "Elena", "link": "https://stackoverflow.com/users/10000790/elena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530117945, "creation_date": 1530115546, "question_id": 51067166, "link": "https://stackoverflow.com/questions/51067166/findclass-returns-null-when-class-is-not-in-a-default-package", "title": "FindClass returns null when .class is not in a default package", "body": "<p>I've just looked at anyone else questions but it seems that nobody has the same problem of mine. I have a Java class HelloWorldHandler.java (in <code>org.eclipse.gemoc.testapplilauncher.handlers</code> package in <code>org.eclipse.gemoc.testapplilauncher</code> project) that launches another java application. Then I have a c file launcherC.c (in the same project but different directory) that is supposed to call the execute method in the java file, through JNI. Now, all my previous JNI applications worked, this one doesn't. The only difference is that HelloWorldHandler.java is not in the default package (so the .class is not directy in /bin) and there are multiple package imports (maybe something changes with the FindClass call (?)). \nI launch the c file with<br>\n<code>gcc  -fPIC -I\"/usr/lib/jvm/java-8-oracle/include\" -I\"/usr/lib/jvm/java-8-oracle/include/linux\" -L/usr/lib/jvm/java-8-oracle/lib/amd64/jli/ -L/usr/lib/va-8-oracle/jre/lib/amd64/server/ -o launcherC launcherC.c -ljli -ljvm</code></p>\n\n<p>and </p>\n\n<p><code>export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/lib/jvm/java-8-oracle/jre/lib/amd64/server/</code></p>\n\n<p>and there is no problem. But when I execute it, it doesn't do anything, without any Expections and errors. I checked and the FindClass returns NULL.</p>\n\n<p>HelloWorldHandler.java</p>\n\n<pre><code>package org.eclipse.gemoc.testapplilauncher.handlers;\n\n\npublic class HelloWorldHandler {\n    @Execute\n    public static void execute() {\n\n        ILaunchManager manager = DebugPlugin.getDefault().getLaunchManager();\n\n        IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();\n        IFile ff = root.getFile(new Path(\"d/Test.launch\"));\n\n\n        ILaunchConfiguration res = manager.getLaunchConfiguration(ff);\n        DebugUITools.launch(res, ILaunchManager.DEBUG_MODE);\n\n    }\n}\n</code></pre>\n\n<p>launcherC.c</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    JavaVMOption options[1];\n    JNIEnv *env;\n    JavaVM *jvm;\n    JavaVMInitArgs vm_args;\n    long status;\n    jclass cls;\n    jmethodID mid;\n\n    options[0].optionString = \"-Djava.class.path=/home/ezambon/Desktop/modeling/org/eclipse/gemoc/testAppliLauncher/bin/org/eclipse/gemoc/testapplilauncher/handlers\";\n    memset(&amp;vm_args, 0, sizeof(vm_args));\n    vm_args.version = JNI_VERSION_1_2;\n    vm_args.nOptions = 1;\n    vm_args.options = options;\n    status = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n\n    if (status != JNI_ERR)\n    {\n        cls = (*env)-&gt;FindClass(env, \"HelloWorldHandler\");\n\n        if(cls != 0) {\n        //printf(\"asdfgh\\n\");\n        mid = (*env)-&gt;GetStaticMethodID(env, cls, \"execute\", \"()V\");\n\n        if(mid !=0) {\n             (*env)-&gt;CallStaticVoidMethod(env, cls, mid);\n        }\n    }\n    //printf(\"qwerty\");\n    (*jvm)-&gt;DestroyJavaVM(jvm);\n    return 0;\n  }\n  else\n    return -1;\n}\n</code></pre>\n\n<p>All the suggestions are really welcome, I'm getting crazy. Thank you :)</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "edited": false, "score": 0, "creation_date": 1530114648, "post_id": 51066863, "comment_id": 89123632, "body": "Why do you want to use an array of pointers (<code>int *ptr[10]</code>)?"}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1530114893, "post_id": 51066863, "comment_id": 89123795, "body": "Your question is unclear. What is the overall goal of this code?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1530114932, "post_id": 51066863, "comment_id": 89123814, "body": "Line 3 (the assigment) is mixing an <code>int</code> with a pointer.  Line 4 (the <code>printf()</code> call) has problems with operator precedence \u2014 and you need another 3 in the expression."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530115182, "post_id": 51066863, "comment_id": 89123952, "body": "It&#39;s hard to tell, but are you maybe trying to set up <code>ptr</code> to be an alias for <code>a</code>?  Of maybe for <code>*ptr</code> to be an alias for <code>a</code>?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1530115256, "post_id": 51066863, "comment_id": 89123988, "body": "<i>&quot;it throws an error&quot;</i>, could you share the verbatim error message with us?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1530117142, "post_id": 51066863, "comment_id": 89125037, "body": "<b>Always</b> include the full, <i>exact</i>, error message when asking about code that emits them. In this case the code. For example in this case ms cl v19 emits the error: <i>&quot;error C2440: &#39;=&#39;: cannot convert from &#39;int [10]&#39; to &#39;int&#39;&quot;</i>, which is all but self-explanatory. You&#39;re trying to assign the base of an integer array to <code>int</code>."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1530117385, "post_id": 51066863, "comment_id": 89125158, "body": "<code>ptr[3]</code> is uninitialized, so dereferencing it is Undefined Behavior."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1530119430, "post_id": 51066863, "comment_id": 89126148, "body": "You probably intended <code>ptr[3] = a</code> not <code>*ptr[3] = a</code>. <code>ptr[3]</code> is an <code>int *</code>. <code>ptr[3] = a</code> says you are assigning the pointer in the array <code>ptr</code> at index 3 to the address given by <code>a</code>. Your statement <code>*ptr[3] = a</code> is attempting to dereference (access the location given by) a pointer in <code>ptr[3]</code> that doesn&#39;t (yet) exist and so will result in an error."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1530115248, "post_id": 51067036, "comment_id": 89123981, "body": "Probably <code>ptr[3][3]</code> to print the 3 from array <code>a</code>."}], "tags": [], "owner": {"reputation": 15105, "user_id": 3768871, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Wxgi0.jpg?s=128&g=1", "display_name": "OmG", "link": "https://stackoverflow.com/users/3768871/omg"}, "is_accepted": false, "score": 0, "last_activity_date": 1530115062, "creation_date": 1530115062, "answer_id": 51067036, "question_id": 51066863, "link": "https://stackoverflow.com/questions/51066863/pointers-in-a-c-program/51067036#51067036", "title": "Pointers in a C program", "body": "<p>If you want put the start of the array <code>a</code> in position <code>3</code> of array of array <code>ptr</code>, you should remove the <code>*</code> in the line 3:</p>\n\n<pre><code>ptr[3] = a;\n</code></pre>\n\n<p>Also, the printing has some problem and you can write likes the following to be more clear:</p>\n\n<pre><code>printf(\"%d\", ptr[3][0]); // will print the first value of array \"a\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1530116499, "creation_date": 1530116499, "answer_id": 51067417, "question_id": 51066863, "link": "https://stackoverflow.com/questions/51066863/pointers-in-a-c-program/51067417#51067417", "title": "Pointers in a C program", "body": "<p>Based on the fact that you say you are trying to print \"3\" via</p>\n\n<blockquote>\n<pre><code>printf(\"%d\",*ptr[3]);\n</code></pre>\n</blockquote>\n\n<p>and on the definition of array <code>a</code>, I think you're trying to set up <code>*ptr</code> to be an alias for <code>a</code>.</p>\n\n<p>In that case, however, you have an operator precedence problem: the indexing operator <code>[]</code> has higher precedence than the dereferencing operator (<code>*</code>), so <code>*ptr[3]</code> means \"the object pointed to by element 3 of <code>ptr</code>\", whereas what you want is actually \"element 3 of the array pointed to by <code>ptr</code>.\"  Re-read those until you recognize and understand the important difference between them.</p>\n\n<p>But the problem is not limited to that expression; related precedence problems extend throughout:</p>\n\n<ul>\n<li><p>a pointer to an array of ten <code>int</code>s would be declared like so:</p>\n\n<pre><code>int (*ptr)[10];\n</code></pre></li>\n<li><p>with that declaration, you would assign <code>ptr</code> to point to <code>a</code> via a simple:</p>\n\n<pre><code>ptr = &amp;a;\n</code></pre></li>\n<li><p>having done that, you would print element 3 of the pointed-to array like so:</p>\n\n<pre><code>printf(\"%d\", (*ptr)[3]);\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p><strong>Alternatively</strong>, perhaps you mean to make <code>ptr</code> itself (not <code>*ptr</code>) an alias of <code>a</code>.  In that case, you want a pointer to a single <code>int</code>, not a pointer to an array, and certainly not an array of pointers:</p>\n\n<pre><code>int *ptr;\n</code></pre>\n\n<p>You could then assign the pointer value simply via</p>\n\n<pre><code>ptr = a;\n</code></pre>\n\n<p>. Having established <code>ptr</code> as an alias for <code>a</code>, you could then use it as such in your <code>printf</code> call:</p>\n\n<pre><code>printf(\"%d\", ptr[3]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": false, "score": 0, "last_activity_date": 1530119081, "creation_date": 1530119081, "answer_id": 51068083, "question_id": 51066863, "link": "https://stackoverflow.com/questions/51066863/pointers-in-a-c-program/51068083#51068083", "title": "Pointers in a C program", "body": "<p>You don't need an array of pointers to point to an array.  One pointer is fine.  All of these print '3'</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int *ptr;\n    int a[10] = {0,1,2,3,4,5,6,7,8,9};\n    ptr = &amp;a[3];            /* point to specific element */\n    printf(\"%d\\n\", *ptr);\n    ptr = a;                /* point to whole array */\n    printf(\"%d\\n\", ptr[3]);\n    printf(\"%d\\n\", 3[ptr]); /* pointer arithmetic is weird */\n    return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8539084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8871935ddc9171384f84cda5b7218aba?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/8539084/hari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1530119081, "creation_date": 1530114452, "last_edit_date": 1530114827, "question_id": 51066863, "link": "https://stackoverflow.com/questions/51066863/pointers-in-a-c-program", "title": "Pointers in a C program", "body": "<pre><code>int *ptr[10];\nint a[10]={0,1,2,3,4,5,6,7,8,9};\n*ptr[3]=a;\nprintf(\"%d\",*ptr[3]);\nreturn 0;\n</code></pre>\n\n<p>My question is about I want to print 3 in <code>a</code> array because <code>int *ptr[10]</code> means ten pointers, but it throws an error.</p>\n"}, {"tags": ["c", "struct", "fifo"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1530113412, "post_id": 51066526, "comment_id": 89122960, "body": "Is the shown code the LIFO you are not interested in or your attempt to do FIFO which does not work?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530113425, "post_id": 51066526, "comment_id": 89122963, "body": "First thing you should do, is to keep pointers to both the head <i>and</i> the tail of the list. After that, think about where you insert new nodes, and where you remove them. I suggest you try to do it using pen-and-paper first."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1530113425, "post_id": 51066526, "comment_id": 89122965, "body": "In which way does your FIFO not work? What is wrong?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1530113463, "post_id": 51066526, "comment_id": 89122983, "body": "Can you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to desmonstrate how your FIFO fails?"}], "answers": [{"tags": [], "owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1530114473, "creation_date": 1530114473, "answer_id": 51066870, "question_id": 51066526, "link": "https://stackoverflow.com/questions/51066526/converting-struct-linked-list-to-fifo-in-c/51066870#51066870", "title": "Converting struct linked list to FIFO in C", "body": "<p>Your existing LIFO <code>pop_stack</code> routine needs to be rewritten for FIFO:</p>\n\n<pre><code>void* pop_stack(struct stack_control** stack)\n{\n    void* data = NULL;\n    struct stack_control *prev = NULL;\n    struct stack_control *last = *stack;\n\n    while(last-&gt;next != NULL)\n      {\n      prev = last;\n      last = last-&gt;next;\n      }\n\n    if (last)\n    {\n        data = last-&gt;data;\n        free(last);\n\n        if(prev)\n          prev-&gt;next = NULL;\n    }\n\n    return data;\n}\n</code></pre>\n"}], "owner": {"reputation": 945, "user_id": 3010546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/86c9f3c281b11e9d33e425927f37401a?s=128&d=identicon&r=PG&f=1", "display_name": "Kagemand Andersen", "link": "https://stackoverflow.com/users/3010546/kagemand-andersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "accepted_answer_id": 51066870, "answer_count": 1, "score": 0, "last_activity_date": 1530114473, "creation_date": 1530113304, "question_id": 51066526, "link": "https://stackoverflow.com/questions/51066526/converting-struct-linked-list-to-fifo-in-c", "title": "Converting struct linked list to FIFO in C", "body": "<p>I'm using an example provided by Havenard as an answer to this question: <a href=\"https://stackoverflow.com/questions/20157199/writing-a-push-and-pop-in-c\">Writing a push and pop in c</a></p>\n\n<pre><code>struct stack_control {\n    struct stack_control* next;\n    void* data;\n};\n\nvoid push_stack(struct stack_control** stack, void* data)\n{\n    struct stack_control* temp = malloc(sizeof(struct stack_control));\n    temp-&gt;data = data;\n    temp-&gt;next = *stack;\n    *stack = temp;\n}\n\nvoid* pop_stack(struct stack_control** stack)\n{\n    void* data = NULL;\n    struct stack_control* temp = *stack;\n    if (temp)\n    {\n        data = temp-&gt;data;\n        *stack = temp-&gt;next;\n        free(temp);\n    }\n    return data;\n}\n\nstruct stack_control* stack = NULL; // empty stack\n</code></pre>\n\n<p>It worked well for my purpose, but now things have changed and I would now prefer it to use FIFO rather than LIFO and I can't seem to get it to work.</p>\n"}, {"tags": ["c", "linear-interpolation"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530112888, "post_id": 51066330, "comment_id": 89122657, "body": "The ratio between the distances is the same as ratio between horizontal distances and the ratio between the vertical distances. Pretty much sufficient to find everything. Simple geometry, not C or ptogramming."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1530114839, "post_id": 51066330, "comment_id": 89123761, "body": "<code>xmid = (x0*xmid_x0_distance + x1*xmid_x1_distance)&#47;(xmid_x0_distance + xmid_x1_distance)</code> should do it.  Same for <code>y</code>."}, {"owner": {"reputation": 4665, "user_id": 6383857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPDaW.jpg?s=128&g=1", "display_name": "StaticBeagle", "link": "https://stackoverflow.com/users/6383857/staticbeagle"}, "edited": false, "score": 0, "creation_date": 1530115344, "post_id": 51066330, "comment_id": 89124031, "body": "You might find <a href=\"https://en.wikipedia.org/wiki/Bilinear_interpolation\" rel=\"nofollow noreferrer\">Bilinear interpolation</a> in Wikipedia useful."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1530115552, "post_id": 51066330, "comment_id": 89124140, "body": "Are all three points on the same line?"}], "answers": [{"tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 2, "last_activity_date": 1530119007, "last_edit_date": 1530119007, "creation_date": 1530118636, "answer_id": 51067982, "question_id": 51066330, "link": "https://stackoverflow.com/questions/51066330/how-to-interpolate-the-position-of-a-point-on-a-line-given-the-distances-to-the/51067982#51067982", "title": "How to interpolate the position of a point on a line given the distances to the interpolated point", "body": "<p>Assuming the following:</p>\n\n<ul>\n<li>p1 is the first point and has coordinates (p1.x, p1.y);</li>\n<li>p2 is the second point and has coordinates (p2.x, p2.y);</li>\n<li>pi is the interpolated point on the line connecting p1 and p2;</li>\n<li>d1i is the given distance from p1 to pi;</li>\n<li>di2 is the given distance from pi to p2.</li>\n</ul>\n\n<p>Let d12 be the distance from p1 to p2. Then: d12 = d1i + di2.</p>\n\n<p>(Alternatively, d12 = sqrt((p2.x-p1.x)*(p2.x-p1.x) + (p2.y-p1.y)*(p2.y-p1.y)) via the theorem of Pythagorus.)</p>\n\n<p>Let ratio = d1i / d12.</p>\n\n<p>Then:</p>\n\n<ul>\n<li>pi.x = p1.x + ratio * (p2.x - p1.x)</li>\n<li>pi.y = p1.y + ratio * (p2.y - p1.y)</li>\n</ul>\n\n<p>This also works if d1i and di2 are given as signed distances, where a positive distance is interpreted as \"in the direction from p1 to p2\" and a negative distance is in the opposite direction.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9914667"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "closed_date": 1564555677, "accepted_answer_id": 51067982, "answer_count": 1, "score": 0, "last_activity_date": 1564555674, "creation_date": 1530112628, "last_edit_date": 1564555674, "question_id": 51066330, "link": "https://stackoverflow.com/questions/51066330/how-to-interpolate-the-position-of-a-point-on-a-line-given-the-distances-to-the", "closed_reason": "Needs more focus", "title": "How to interpolate the position of a point on a line given the distances to the interpolated point", "body": "<p>I wish to write a C code where I can find the position of a point on a line between two points in a 2D coordinate grid. The two points positions I know, as well as each of the points' distances to the new desired point. However, I do not wish to use trig functions as that proves to be more expensive than I would like. I have heard of a simple solution using 1D interpolation, but I am unfamiliar with this solution. Could someone shed light on this? Thanks!</p>\n"}, {"tags": ["c", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1530111318, "post_id": 51065617, "comment_id": 89121649, "body": "related: <a href=\"https://stackoverflow.com/q/51048787/8513665\">stackoverflow.com/q/51048787/8513665</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1530112187, "post_id": 51066080, "comment_id": 89122222, "body": "I believe the C standard states that when the unary operators are combined such as <code>*&amp;a[1]</code>, they are both dropped rather than evaluated."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1530112366, "post_id": 51066080, "comment_id": 89122337, "body": "@ChristianGibbons: C 2011 (draft N1570] 6.5.3.2 3 says that <code>&amp;*something</code> is treated as <code>something</code> except that the constraints still apply and the result is not an lvalue. But I do not see a similar statement for <code>*&amp;something</code>. And <code>*&amp;a[1]</code> does not appear in the code; it is just a way of talking about the expression evaluation."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1530112631, "post_id": 51066080, "comment_id": 89122507, "body": "Ah, yes, I see now.  I ran across it yesterday (footnote 102) and it did mention something similar for <code>*&amp;something</code>, but it was specifically for function designators.  My mistake."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1530112664, "post_id": 51066080, "comment_id": 89122525, "body": "But note that <code>*&amp;something</code> always evaluates to the same value as <code>something</code> by the specifications of the operators&#39; behavior.  On the other hand, making a special case for the reverse operator ordering saves <code>&amp;*something</code> from producing undefined behavior in the event that <code>something</code> has pointer type, but its value is not a valid pointer."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 5, "last_activity_date": 1530112207, "last_edit_date": 1530112207, "creation_date": 1530111846, "answer_id": 51066080, "question_id": 51065617, "link": "https://stackoverflow.com/questions/51065617/in-multidimensional-arrays-why-does-dereferencing-address-of-a-row-again-result/51066080#51066080", "title": "In multidimensional arrays, why does dereferencing address of a row again result in address instead of value", "body": "<p>As you note <code>&amp;a[0]+1</code> is <code>&amp;a[1]</code>. <code>a[1]</code> is an array of 3 <code>int</code>, so <code>&amp;a[1]</code> is the address of an array of 3 <code>int</code>.</p>\n\n<p>That means <code>*&amp;a[1]</code> is an array of 3 <code>int</code>. In C, an array is automatically converted to the address of its first element (except when it is the operand of <code>sizeof</code>, unary <code>&amp;</code>, or <code>_Alignof</code> or is a string literal used to initialize an array). So <code>*&amp;a[1]</code> automatically becomes <code>&amp;a[1][0]</code>.</p>\n\n<p>Since this is a pointer, it should not be printed with <code>%u</code>. A proper way to print it would be:</p>\n\n<pre><code>printf(\"%p\\n\", (void *) *(&amp;a[0]+1));\n</code></pre>\n\n<p>However, given that you did use <code>%u</code>, it seems what happened is the program printed the value of the pointer reinterpreted as an <code>unsigned int</code>. This is not behavior you should rely on.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1530112925, "last_edit_date": 1530112925, "creation_date": 1530112281, "answer_id": 51066220, "question_id": 51065617, "link": "https://stackoverflow.com/questions/51065617/in-multidimensional-arrays-why-does-dereferencing-address-of-a-row-again-result/51066220#51066220", "title": "In multidimensional arrays, why does dereferencing address of a row again result in address instead of value", "body": "<blockquote>\n  <p>The expression <code>(&amp;a[0]+1)</code> gives <code>&amp;a[1]</code></p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>and the output should be 2</p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p>but the output of above code is <code>&amp;a[1]</code> why?</p>\n</blockquote>\n\n<p>You're asking about the effect of</p>\n\n<blockquote>\n<pre><code>printf(\"%u \",*(&amp;a[0]+1));\n</code></pre>\n</blockquote>\n\n<p>.  We've established that <code>(&amp;a[0]+1)</code> is equivalent to <code>&amp;a[1]</code>.  It follows that <code>*(&amp;a[0]+1)</code> is equivalent to <code>*(&amp;a[1])</code>, which in turn is equivalent to just <code>a[1]</code>.  The value of <code>a[1]</code> is an <em>array</em>, not <code>2</code>, notwithstanding the fact that <code>2</code> is the value of the first array element.</p>\n\n<p>Your context is not among the very few in which array values fail to decay to pointers, so the overall function call is in fact equivalent to</p>\n\n<pre><code>printf(\"%u \", &amp;a[1][0]);\n</code></pre>\n\n<p>At this point we hit a snag, however.  The <code>%u</code> directive must correspond to an argument of (promoted) type <code>unsigned int</code>, and the actual argument instead has pointer type.  This mismatch results in undefined behavior.  It is plausible, but by no means guaranteed, that that manifests for you as printing a decimal integer corresponding to part or all of the pointer's bit pattern.</p>\n\n<p>If you want to print the zeroth element of <code>a[1]</code>, then it's easiest to write that simply as <code>a[1][0]</code>, but you may also write it as <code>*a[1]</code> or <code>**&amp;a[1]</code> or <code>**(&amp;a[0] + 1)</code> or in many other forms.</p>\n"}], "owner": {"reputation": 29, "user_id": 7599112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432ab2e4e39597f80239a97613cb2dff?s=128&d=identicon&r=PG&f=1", "display_name": "losara ambika", "link": "https://stackoverflow.com/users/7599112/losara-ambika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1530113839, "creation_date": 1530110416, "last_edit_date": 1530113839, "question_id": 51065617, "link": "https://stackoverflow.com/questions/51065617/in-multidimensional-arrays-why-does-dereferencing-address-of-a-row-again-result", "title": "In multidimensional arrays, why does dereferencing address of a row again result in address instead of value", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nvoid main() {\n    int a[4][3] = {\n        { 3, 5, 7 },\n        { 2, 4, 67 },\n        { 21, 8, 9 },\n        { 2, 45, 6 }\n    };\n    printf(\"%u \", *(&amp;a[0]+1));\n}\n</code></pre>\n\n<p>The expression (<code>&amp;a[0]+1</code>) gives <code>&amp;a[1]</code> and the output should be <code>2</code> but the output of above code is <code>&amp;a[1]</code> why? This may seem silly, but please help me.</p>\n"}, {"tags": ["c", "arrays", "initialization", "constant-expression"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1530110483, "post_id": 51065612, "comment_id": 89121103, "body": "<code>const</code> in C is not truly constant, unlike C++."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530141110, "post_id": 51065612, "comment_id": 89134869, "body": "Consider <code>void foo(int i) {   const int array[] = {1,i,3};   static int x = array[1];   printf(&quot;%d\\n&quot;, x); }</code> would have <code>x</code> with a different initial value on each <code>foo()</code> call."}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1530115347, "post_id": 51065688, "comment_id": 89124033, "body": "I think this compiles in C++ because C++ doesn&#39;t require static initializers to be constant expressions, not because <code>array[1]</code> can be deduced at compile time. In a context which really required a constant expression, <code>array[1]</code> wouldn&#39;t be feasible. (<a href=\"https://godbolt.org/g/HhqySp\" rel=\"nofollow noreferrer\">godbolt.org/g/HhqySp</a>). (Of course, C++ gives you the option to make <code>array</code> a <code>constexpr</code>.)"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1530115488, "post_id": 51065688, "comment_id": 89124110, "body": "@rici C++ has <code>constexpr</code> expressions that must be initialized to compile-time constants, which would seem to be fairly analogous. You can declare an array <code>constexpr</code> in C++ and use its elements as compile-time constants."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1530118179, "post_id": 51065688, "comment_id": 89125534, "body": "@davislor: Yes, I said that at the end of my comment. But <i>in this particular case</i>, the array is neither static nor constexpr, so I don&#39;t see how indexing into it can produce a constant expression, even with C++&#39;s generous definition of constant expressions. The last line of the answer says &quot;C++ on the other had does treat const variables as true constants&quot;, which is what I was reacting to."}, {"owner": {"reputation": 8555, "user_id": 1402846, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/z5AzI.png?s=128&g=1", "display_name": "Pang", "link": "https://stackoverflow.com/users/1402846/pang"}, "edited": false, "score": 0, "creation_date": 1532656190, "post_id": 51065688, "comment_id": 90066876, "body": "Does <i>&quot;on the other had&quot;</i> mean <i>&quot;on the other <b>hand</b>&quot;</i>?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 6, "last_activity_date": 1530111202, "last_edit_date": 1530111202, "creation_date": 1530110630, "answer_id": 51065688, "question_id": 51065612, "link": "https://stackoverflow.com/questions/51065612/why-cant-a-static-initialization-expression-in-c-use-an-element-of-a-constant-a/51065688#51065688", "title": "Why can&#39;t a static initialization expression in C use an element of a constant array?", "body": "<p>Objects with static storage duration (read: variables declared at file scope or with the <code>static</code> keyword) must be initialized by compile time constants.</p>\n\n<p>Section 6.7.9 of the C standard regarding Initialization states:</p>\n\n<blockquote>\n  <p><em>4</em> All the expressions in an initializer for an object that has static or thread storage duration shall be constant expressions or\n  string literals.</p>\n</blockquote>\n\n<p>Section 6.6 regarding Constant Expressions states:</p>\n\n<blockquote>\n  <p><em>7</em> More latitude is permitted for constant expressions in initializers. Such a constant\n  expression shall be, or evaluate to, one of the following:</p>\n  \n  <ul>\n  <li>an arithmetic constant expression,</li>\n  <li>a null pointer constant,</li>\n  <li>an address constant, or</li>\n  <li>an address constant for a complete object type plus or minus an integer constant expression.</li>\n  </ul>\n  \n  <p><em>8</em> An arithmetic constant expression shall have arithmetic type and shall only have operands that are integer constants, floating\n  constants, enumeration constants, character constants, sizeof\n  expressions whose results are integer constants, and _Alignof\n  expressions. Cast operators in an arithmetic constant expression shall\n  only convert arithmetic types to arithmetic types, except as part of\n  an operand to a sizeof or\n  _Alignof operator.</p>\n  \n  <p><em>9</em> An address constant is a null pointer, a pointer to an lvalue designating an object of static storage duration, or a pointer to a\n  function designator; it shall be created explicitly using the unary &amp;\n  operator or an integer constant cast to pointer type, or implicitly by\n  the use of an expression of array or function type. The\n  array-subscript [] and member-access . and -> operators, the address &amp;\n  and indirection * unary operators, and pointer casts may be used in\n  the creation of an address constant, but the value of an object shall\n  not be accessed by use of these operators.</p>\n</blockquote>\n\n<p>By the above definition, a <code>const</code> variable does not qualify as a constant expression, so it can't be used to initialize a <code>static</code> object.  C++ on the other had <em>does</em> treat <code>const</code> variables as true constants and thus allows them to initialize static objects.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1530114938, "post_id": 51066385, "comment_id": 89123818, "body": "That&#39;s not really much of a problem. See Pascal, Modula or even Oberon (the latter supports OOP, too). Those are similar complex languages (actually the compilers are much less complex than C compilers) which don&#39;t have a problem with this. And Pascal is of a similar age like K&amp;R C, Modula older than C89."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1530116547, "post_id": 51066385, "comment_id": 89124701, "body": "@Olaf: \u201cMuch of a problem\u201d is a judgement call.  I am not saying the C committee\u2019s judgement was or was not good; my answer explains how requiring support for the feature imposes some cost. As to your assertion about compiler sizes, are you comparing them on the <b>smallest</b> platforms there are C compilers for? Comparing sizes on average platforms is not informative in this regard. What does a Pascal compiler do when the user initializes a compile-time constant with an arbitrary element of a large array? Does it have it in memory? Rely on external storage?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1530118615, "post_id": 51066385, "comment_id": 89125775, "body": "My point is, this is not necessarily the reason. If it was, other features like atomics, threads, etc would have not been implemented either, because they add even more complexity to the compiler. The question is all about specualtion about the motivation of the commitee and/or Ritchie. Unless we have 1st place information here, it&#39;s all POB."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1530119032, "post_id": 51066385, "comment_id": 89125962, "body": "@Olaf: Again, you are making judgements. You have judged that the benefit of atomics relative to their costs must be less than the benefit of initialization from arrays relative to its cost, therefore taking the former implies taking the latter. Additionally, the atomic and threads headers are optional. Can you suggest any other reason?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1530119230, "post_id": 51066385, "comment_id": 89126055, "body": "Who is making judegements? I just listed some examples. Apparently C has been used fine for any kind of software successfully without them before. Similar to threads. All I said is you are pointlessly speculating (judgement? - who?)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1530120010, "post_id": 51066385, "comment_id": 89126416, "body": "@Olaf: You did not just list examples, You wrote an if-then statement that requires ranking whether things should be added to the language. It is an assertion about the relative values of those things."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1530112786, "creation_date": 1530112786, "answer_id": 51066385, "question_id": 51065612, "link": "https://stackoverflow.com/questions/51065612/why-cant-a-static-initialization-expression-in-c-use-an-element-of-a-constant-a/51066385#51066385", "title": "Why can&#39;t a static initialization expression in C use an element of a constant array?", "body": "<p>If the C standard allowed this, then compilers would have to know what is in arrays. That is, the compiler would have to have a compile-time model of the array contents. Without this, the compiler has a small amount of work to do for each array: It needs to know its name and type (including its size), and a few other details such as its linkage and storage duration. But, where the initialization of the array is specified in the code, the compiler can just write the relevant information to the object file it is growing and then forget about it.</p>\n\n<p>If the compiler had to be able to fetch values out of the array at compile time, it would have to remember that data. As arrays can be very large, that imposes a burden on the C compiler that the committee likely did not desire, as C is intended to operate in a wide variety of environments, including those with constrained resources.</p>\n\n<p>The C++ committee made a different decision, and C++ is much more burdensome to translate.</p>\n"}], "owner": {"reputation": 492, "user_id": 2292492, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CD9c7.jpg?s=128&g=1", "display_name": "deltamind106", "link": "https://stackoverflow.com/users/2292492/deltamind106"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1530150045, "creation_date": 1530110400, "last_edit_date": 1530126427, "question_id": 51065612, "link": "https://stackoverflow.com/questions/51065612/why-cant-a-static-initialization-expression-in-c-use-an-element-of-a-constant-a", "title": "Why can&#39;t a static initialization expression in C use an element of a constant array?", "body": "<p>The following (admittedly contrived) C program fails to compile:</p>\n\n<pre><code>int main() {\nconst int array[] = {1,2,3};\nstatic int x = array[1];\n}\n</code></pre>\n\n<p>When compiling the above C source file with gcc (or Microsoft's CL.EXE), I get the following error:</p>\n\n<pre><code>error: initializer element is not constant\nstatic int x = array[1];\n               ^\n</code></pre>\n\n<p>Such simple and intuitive syntax is certainly useful, so this seems like it should be legal, but clearly it is not.  Surely I am not the only person frustrated with this apparently silly limitation.  I don't understand why this is disallowed-- what problem is the C language trying to avoid by making this useful syntax illegal?</p>\n\n<p>It seems like it may have something to do with the way a compiler generates the assembly code for the initialization, because if you remove the \"static\" keyword (such that the variable \"x\" is on the stack), then it compiles fine.</p>\n\n<p>However, another strange thing is that it compiles fine in C++ (even with the static keyword), but not in C.  So, the C++ compiler seems capable of generating the necessary assembly code to perform such an initialization.</p>\n\n<p>Edit:\nCredit to Davislor-- in an attempt to appease the SO powers-that-be, I would seek following types of factual information to answer the question:</p>\n\n<ol>\n<li><p>Is there any legacy code that supporting these semantics would break?</p></li>\n<li><p>Have these semantics ever been formally proposed to the standards committee?</p></li>\n<li><p>Has anyone ever given a reason for rejecting the allowance of these semantics?</p></li>\n</ol>\n"}, {"tags": ["c", "sdk", "macros", "xilinx"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1530110563, "post_id": 51065408, "comment_id": 89121151, "body": "<code>XSK_EFUSEPS_PPK0_HASH</code> can be used to set all bytes of a hash buffer to <code>&#39;0&#39;</code> with <code>char hash_buffer[] = XSK_EFUSEPS_PPK0_HASH;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 545, "user_id": 9266860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef5206d6fd79c294c934bf07fd5e2ed4?s=128&d=identicon&r=PG&f=1", "display_name": "Gunther Schulz", "link": "https://stackoverflow.com/users/9266860/gunther-schulz"}, "is_accepted": false, "score": 0, "last_activity_date": 1530528149, "creation_date": 1530528149, "answer_id": 51134312, "question_id": 51065408, "link": "https://stackoverflow.com/questions/51065408/syntax-of-macro-definition-0000/51134312#51134312", "title": "Syntax of macro definition &quot;0000&quot;", "body": "<p><a href=\"https://www.xilinx.com/support/documentation/sw_manuals/xilinx2015_4/oslib_rm.pdf\" rel=\"nofollow noreferrer\">Presumably this link is the user guide you refer to?</a></p>\n\n<p>In which case <a href=\"https://github.com/Xilinx/embeddedsw/blob/master/lib/sw_services/xilskey/examples/xilskey_efuseps_zynqmp_input.h\" rel=\"nofollow noreferrer\">this is the associated header file.</a></p>\n\n<p>where they say as a comment </p>\n\n<pre><code>/*\n* ...\n*   The value mentioned in this will be converted to hex buffer and written\n*   into the ZynqMP Ps eFUSE array when write API used. This value should\n*   be given in string format. It should be 96 or 64 characters long, valid\n*   characters are 0-9,a-f,A-F. Any other character is considered as invalid\n*   string and will not burn PPK0 hash.\n*...\n*/\n</code></pre>\n\n<p>The comment in the linked user guide is identical. </p>\n\n<p>They explicitly say this is supposed to be a 96 or 64 character string (96 in your example). This has nothing to do with a bit count.</p>\n\n<p>Further, <a href=\"https://github.com/Xilinx/embeddedsw/blob/master/lib/sw_services/xilskey/examples/xilskey_efuseps_zynqmp_example.c\" rel=\"nofollow noreferrer\">if this is the associated c file</a>, then usage is as follows:</p>\n\n<pre><code>PsStatus = XilSKey_Efuse_ValidateKey(\n                (char *)XSK_EFUSEPS_PPK0_HASH,\n                XSK_EFUSEPS_PPK_SHA3_HASH_STRING_LEN_96);\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>XilSKey_Efuse_ConvertStringToHexBE(\n                (char *)XSK_EFUSEPS_PPK0_HASH,\n                &amp;PsInstancePtr-&gt;Ppk0Hash[0],\n                XSK_EFUSEPS_PPK_SHA3HASH_LEN_IN_BITS_384);\n</code></pre>\n\n<p>where it is made clear in the calls  (perhaps unneccesarily) the the two functions expect a pointer to a sequence of <code>char</code>, (which every literal string does decay to in C)</p>\n"}], "owner": {"reputation": 41, "user_id": 10000553, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1ROqwFzrgAM/AAAAAAAAAAI/AAAAAAAAA7g/ZS5GY6fhiWU/photo.jpg?sz=128", "display_name": "timhuang77", "link": "https://stackoverflow.com/users/10000553/timhuang77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530528149, "creation_date": 1530109754, "last_edit_date": 1530110241, "question_id": 51065408, "link": "https://stackoverflow.com/questions/51065408/syntax-of-macro-definition-0000", "title": "Syntax of macro definition &quot;0000&quot;", "body": "<p>I am working with a Xilinx chip when I came across this syntax in the Xilinx SDK (which is in C):</p>\n\n<pre><code>#define XSK_EFUSEPS_PPK0_HASH   \"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\"\n</code></pre>\n\n<p>From the user guide it seems to specify that the value \"0000 ... 0000\" seems to denote the number of bits (which in this case, should be 384-bits) for AES. What exactly in this syntax and how does a macro specify the number of bits as opposed to a constant?</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 2127, "user_id": 3233365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QmZpG.jpg?s=128&g=1", "display_name": "Gerard H. Pille", "link": "https://stackoverflow.com/users/3233365/gerard-h-pille"}, "edited": false, "score": 0, "creation_date": 1530110200, "post_id": 51065151, "comment_id": 89120899, "body": "Getaddrinfo may return more than one result, you should scan each of them and try to create a socket and then connect.  Of course, if things are as in dbush&#39;s answer ..."}, {"owner": {"reputation": 95, "user_id": 7807893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4742eb1f53a1cff6b14d7f28611f045e?s=128&d=identicon&r=PG&f=1", "display_name": "Me.", "link": "https://stackoverflow.com/users/7807893/me"}, "reply_to_user": {"reputation": 2127, "user_id": 3233365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QmZpG.jpg?s=128&g=1", "display_name": "Gerard H. Pille", "link": "https://stackoverflow.com/users/3233365/gerard-h-pille"}, "edited": false, "score": 0, "creation_date": 1530111703, "post_id": 51065151, "comment_id": 89121899, "body": "yea but getaddrinfo even don&#39;t work to loop over it."}, {"owner": {"reputation": 95, "user_id": 7807893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4742eb1f53a1cff6b14d7f28611f045e?s=128&d=identicon&r=PG&f=1", "display_name": "Me.", "link": "https://stackoverflow.com/users/7807893/me"}, "reply_to_user": {"reputation": 2127, "user_id": 3233365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QmZpG.jpg?s=128&g=1", "display_name": "Gerard H. Pille", "link": "https://stackoverflow.com/users/3233365/gerard-h-pille"}, "edited": false, "score": 0, "creation_date": 1530115669, "post_id": 51065151, "comment_id": 89124217, "body": "you guys were right, changing server to messenger.hotmail.geo.msnmessenger.msn.com.akadns.net and loop over solve the problem, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7807893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4742eb1f53a1cff6b14d7f28611f045e?s=128&d=identicon&r=PG&f=1", "display_name": "Me.", "link": "https://stackoverflow.com/users/7807893/me"}, "edited": false, "score": 0, "creation_date": 1530111478, "post_id": 51065245, "comment_id": 89121762, "body": "at first it was letting me to connect but now get connection refused in connect() function, anyway by the part there is no IP address associated with it you mean may I get error in other parts? cause it was giving signal error."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 95, "user_id": 7807893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4742eb1f53a1cff6b14d7f28611f045e?s=128&d=identicon&r=PG&f=1", "display_name": "Me.", "link": "https://stackoverflow.com/users/7807893/me"}, "edited": false, "score": 0, "creation_date": 1530111615, "post_id": 51065245, "comment_id": 89121842, "body": "@Me. If <code>getaddrinfo</code> returns an error (which you aren&#39;t currently checking for) you can&#39;t expect do anything useful with the result object.  The rest of the program is undefined from that point on."}, {"owner": {"reputation": 95, "user_id": 7807893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4742eb1f53a1cff6b14d7f28611f045e?s=128&d=identicon&r=PG&f=1", "display_name": "Me.", "link": "https://stackoverflow.com/users/7807893/me"}, "edited": false, "score": 0, "creation_date": 1530114448, "post_id": 51065245, "comment_id": 89123525, "body": "you mean i have to loop over linked list after getaddrinfo() and delete those return? cause i think if getarrinfo() returns error program will terminate automatically. @dbush"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1530109277, "creation_date": 1530109277, "answer_id": 51065245, "question_id": 51065151, "link": "https://stackoverflow.com/questions/51065151/socket-programming-gethostbyname-returns-null-maybe-cause-of-host-deletion/51065245#51065245", "title": "socket programming gethostbyname() returns null (maybe cause of host deletion)", "body": "<p>The hostname messenger.hotmail.com is no longer valid.  </p>\n\n<p>It does have a CNAME record for messenger.hotmail.geo.msnmessenger.msn.com.akadns.net, however there is no IP address associated with it.  So you won't get any valid addresses back.</p>\n"}], "owner": {"reputation": 95, "user_id": 7807893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4742eb1f53a1cff6b14d7f28611f045e?s=128&d=identicon&r=PG&f=1", "display_name": "Me.", "link": "https://stackoverflow.com/users/7807893/me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 51065245, "answer_count": 1, "score": -1, "last_activity_date": 1530173520, "creation_date": 1530109022, "last_edit_date": 1530173520, "question_id": 51065151, "link": "https://stackoverflow.com/questions/51065151/socket-programming-gethostbyname-returns-null-maybe-cause-of-host-deletion", "title": "socket programming gethostbyname() returns null (maybe cause of host deletion)", "body": "<p>I'm checking an open source code of a messenger which is not supported anymore.(gtmess .97)(it uses sys/socket.h for it's socket programming).</p>\n\n<p>Unfortunately encountered gethostbyname() function and it returns null for the address which is given as hostname(messenger.hotmail.com), i tried to change code using getaddrinfo() but even getaddrinfo() says there isn't such server.</p>\n\n<p>the question is, is there a way to fix it?(also please consider I'm beginner in socket programming)</p>\n\n<p>here is the code:(commented part is what was written in the source code and uncommented part is mine part which tried to simulate using another method):</p>\n\n<pre><code>/* connect a client socket to a server and return a socket descriptor */\nint ConnectToServer(char *addr, int defport)\n{  \n    /*\n    int sfd;\n    struct sockaddr_in servaddr;\n    struct hostent *host;\n    char hostname[256];\n    int port;\n    int err;\n\n    ParseAddr(hostname, &amp;port, defport, addr);\n\n\n    if ((sfd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n        return -1;\n\n    memset(&amp;servaddr, 0, sizeof(servaddr));\n    servaddr.sin_family = AF_INET;\n    servaddr.sin_port = htons(port);\n    host = gethostbyname(hostname);\n    if (host == NULL) {\n        err = errno;\n        close(sfd);\n        errno = err;\n        return -2;\n    }\n\n    servaddr.sin_addr.s_addr =  *((int *) host-&gt;h_addr_list[0]);\n\n    if (connect(sfd, (struct sockaddr *) &amp;servaddr, sizeof(servaddr))) {\n        err = errno;\n        close(sfd);\n        errno =err;\n        return -3;\n    }\n\n    return sfd;\n    */\n\n\n\n\n    struct addrinfo hints, *res , *p;\n    int sockfd;\n    int err;\n\n    memset(&amp;hints,0,sizeof hints);\n    hints.ai_family=AF_UNSPEC;\n    hints.ai_socktype=SOCK_STREAM;\n\n    getaddrinfo(\"messenger.hotmail.com\",\"1863\",&amp;hints,&amp;res);\n\n    if((sockfd=socket(res-&gt;ai_family,res-&gt;ai_socktype,res-&gt;ai_protocol))&lt;0)\n        return -1;\n\n    if(connect(sockfd,res-&gt;ai_addr,res-&gt;ai_addrlen)){\n        err = errno;\n        close(sockfd);\n        errno =err;\n        return -3;\n    }\n\n    return sockfd;\n}\n</code></pre>\n\n<p>edit:\nI changed server and loop over to connect but it seems new server has problem too which give connection reset by peer in send() part</p>\n\n<pre><code>/* connect a client socket to a server and return a socket descriptor */\nint ConnectToServer(char *addr, int defport)\n{   \n    struct addrinfo hints, *res , *p;\n    int sockfd;\n    int err;\n    int rv;\n\n    memset(&amp;hints,0,sizeof hints);\n    hints.ai_family=AF_UNSPEC;\n    hints.ai_socktype=SOCK_STREAM;\n\n    if(rv=getaddrinfo(\"messenger.hotmail.geo.msnmessenger.msn.com.akadns.net\",\"1863\",&amp;hints,&amp;res)!=0){\n        fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n    return 1;\n    };\n    for(p=res;p!=NULL;p=p-&gt;ai_next){\n        if((sockfd=socket(p-&gt;ai_family,p-&gt;ai_socktype,p-&gt;ai_protocol))&lt;0){\n            continue;\n        }\n\n        if(connect(sockfd,p-&gt;ai_addr,p-&gt;ai_addrlen)){\n            err = errno;\n            close(sockfd);\n            errno =err;\n            continue;\n        }\n        break;\n    }\n\n    if(p==NULL)\n        return -3;\n\n    return sockfd;\n\n}\n</code></pre>\n"}, {"tags": ["c", "sorting", "pointers", "void"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1530108222, "post_id": 51064781, "comment_id": 89119557, "body": "Why is argument a problem?"}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1530108241, "post_id": 51064781, "comment_id": 89119572, "body": "usually array of pointers are terminated by <code>NULL</code> or the size is given"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1530108582, "post_id": 51064781, "comment_id": 89119792, "body": "Salvaging this question would be a new question."}, {"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1530109748, "post_id": 51064781, "comment_id": 89120598, "body": "You are attempting something similar to <code>sort()</code>, why not see how that handles this problem."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1530113886, "post_id": 51064781, "comment_id": 89123213, "body": "Unrelated: C does not support <i>methods</i>. And what do you mean with &quot;loop through a <code>void **</code>&quot;? You cannot loop through a pointer."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 1, "creation_date": 1530114866, "post_id": 51064781, "comment_id": 89123778, "body": "@Neil Or rather, <code>qsort()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1530113095, "last_edit_date": 1530113095, "creation_date": 1530110584, "answer_id": 51065671, "question_id": 51064781, "link": "https://stackoverflow.com/questions/51064781/loop-through-a-void/51065671#51065671", "title": "Loop through a void**", "body": "<blockquote>\n  <p>I would like to make an update to my Insertion by calculating the size into the method and not by passing it as parameter. How do I can loop into a <code>void**</code>? Or are there specific methods to calculate the dimension of the array?</p>\n</blockquote>\n\n<p>Your function is not <em>receiving</em> an array.  It is receiving a pointer (to a <code>void *</code>).  Supposing that the received pointer is valid, the object to which it points can be considered to be the first element of an array (even if it's declared by the caller as a scalar), but the pointer does not convey the length of that array.  You must communicate that separately.  The most common techniques for that are:</p>\n\n<ol>\n<li>Passing the length as a separate parameter, as you demonstrate, or</li>\n<li>Including an end-of-data sentinel value as the last in the array, as the standard library's string functions expect you to do.</li>\n</ol>\n\n<p>Unless the length is somehow encoded into the pointed-to array elements themselves (e.g. via a sentinel), the called function cannot determine the array size from a pointer alone.  Think about that for a moment, as it stands to logic entirely on its own.</p>\n"}], "owner": {"reputation": 275, "user_id": 9681974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mv5Yu.png?s=128&g=1", "display_name": "JimBelushi2", "link": "https://stackoverflow.com/users/9681974/jimbelushi2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 51065671, "answer_count": 1, "score": -2, "last_activity_date": 1530113095, "creation_date": 1530108011, "question_id": 51064781, "link": "https://stackoverflow.com/questions/51064781/loop-through-a-void", "title": "Loop through a void**", "body": "<p>I would like to make an update to my Insertion by calculating the size into the method and not by passing it as parameter. How do I can loop into a void**? Or are there specific methods to calculate the dimension of the array?</p>\n\n<pre><code>void insertion_sort(int size, void** array, CompFunction compare){\n    int i,j;\n    void* key;\n    for(i = 1; i&lt;size;i++){\n        key = array[i];\n        for(j = i-1; j&gt;=0 &amp;&amp; compare(array[j],key)&gt;=0;j--){\n            swap(&amp;array[j+1],&amp;array[j]);\n        }\n        array[j+1] = key;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530106445, "post_id": 51064169, "comment_id": 89118269, "body": "Use a pointer to <code>union</code> incorporating all of these types. Or <code>void*</code>..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1530106510, "post_id": 51064169, "comment_id": 89118322, "body": "Please tell us  ore about this array. What should be contained in index 1,2,3 etc.? The image you&#39;re linking to is very unclear."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530106577, "post_id": 51064169, "comment_id": 89118382, "body": "It really sounds like you want a structure, not an &quot;array&quot;. What is the <i>real</i> problem you need to solve? Why do you want an &quot;array&quot;? What are you supposed to do with it?"}], "answers": [{"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 139, "user_id": 7704753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b74ddd9ab1a9c707fb630b67b190b68b?s=128&d=identicon&r=PG&f=1", "display_name": "sigsegv", "link": "https://stackoverflow.com/users/7704753/sigsegv"}, "edited": false, "score": 1, "creation_date": 1530120557, "post_id": 51064255, "comment_id": 89126698, "body": "No it&#39;s the wrong direction @Ayatana. Please use a <i>struct</i>."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1530106670, "creation_date": 1530106670, "answer_id": 51064255, "question_id": 51064169, "link": "https://stackoverflow.com/questions/51064169/c-how-create-an-array-that-points-to-different-datatypes/51064255#51064255", "title": "C - How create an array that points to different datatypes?", "body": "<p>It is possible to do that, with a void pointer for example.</p>\n\n<p>BUT, don't go for this approach, since what you need (based on what you said), is a <strong>struct</strong>, with fields a double, a pointer to a double array, and a pointer to an integer array, like this:</p>\n\n<pre><code>struct myStruct {\n   double  v;\n   double* d_ptr;\n   int*    i_ptr;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": -1, "last_activity_date": 1530106699, "creation_date": 1530106699, "answer_id": 51064266, "question_id": 51064169, "link": "https://stackoverflow.com/questions/51064169/c-how-create-an-array-that-points-to-different-datatypes/51064266#51064266", "title": "C - How create an array that points to different datatypes?", "body": "<p>Arrays are for storing a list of values of the same type, while a structs are for storing a list of values of differing types.</p>\n\n<p>So what you want is a <code>struct</code>:</p>\n\n<pre><code>struct data {\n    double val0;\n    double *dbl_list;\n    int *int_list;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 7704753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b74ddd9ab1a9c707fb630b67b190b68b?s=128&d=identicon&r=PG&f=1", "display_name": "sigsegv", "link": "https://stackoverflow.com/users/7704753/sigsegv"}, "edited": false, "score": 0, "creation_date": 1530111515, "post_id": 51064463, "comment_id": 89121786, "body": "But this has become a list. I want random access."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 139, "user_id": 7704753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b74ddd9ab1a9c707fb630b67b190b68b?s=128&d=identicon&r=PG&f=1", "display_name": "sigsegv", "link": "https://stackoverflow.com/users/7704753/sigsegv"}, "edited": false, "score": 0, "creation_date": 1530111867, "post_id": 51064463, "comment_id": 89122007, "body": "Your image doesn&#39;t show that. It shows pointers. However, then you can declare an array of these structs (without the <code>next</code> element). I have given you some ideas; maybe it is time to use it to make what you want yourself."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": -1, "last_activity_date": 1530107191, "creation_date": 1530107191, "answer_id": 51064463, "question_id": 51064169, "link": "https://stackoverflow.com/questions/51064169/c-how-create-an-array-that-points-to-different-datatypes/51064463#51064463", "title": "C - How create an array that points to different datatypes?", "body": "<p>You can use a <code>struct</code> to make the list data structure and that struct contains a <code>union</code> to hold the different type of elements, for example:</p>\n\n<pre><code>typedef struct MY_LIST {\n    int utype;\n    union {\n        int intval;\n        double dblval;\n    } u;\n    struct MY_LIST *next;\n} t_myList;\n</code></pre>\n\n<p>Integer <code>utype</code> will hold an indicator of what is stored in the union (e.g. value <code>1</code> means the integer and value <code>2</code> means the double).</p>\n\n<p>You can address an element now as:</p>\n\n<pre><code>t_myList *p;\n...\nif (p-&gt;utype==1)\n    printf(\"integer value %d\\n\", p-&gt;u.intval);\n...\np= p-&gt;next;\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 7704753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b74ddd9ab1a9c707fb630b67b190b68b?s=128&d=identicon&r=PG&f=1", "display_name": "sigsegv", "link": "https://stackoverflow.com/users/7704753/sigsegv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1530107191, "creation_date": 1530106403, "question_id": 51064169, "link": "https://stackoverflow.com/questions/51064169/c-how-create-an-array-that-points-to-different-datatypes", "title": "C - How create an array that points to different datatypes?", "body": "<p>I want to create an array that has a double value at it's zeroth index, a pointer that points to a double array, and a pointer that points to an integer array. Is this possible? Or should I use a structure?</p>\n\n<p>Something like this:\n<a href=\"https://i.stack.imgur.com/UgV9d.png\" rel=\"nofollow noreferrer\">pointer description</a></p>\n"}, {"tags": ["c", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 6, "last_activity_date": 1530106398, "creation_date": 1530106398, "answer_id": 51064168, "question_id": 51064076, "link": "https://stackoverflow.com/questions/51064076/2d-array-program-shows-garbage-value-in-output/51064168#51064168", "title": "2D array program shows garbage value in output", "body": "<p>Maybe there are other issues as well; but one thing is for sure - you are allocating the wrong size for the pointer elements:</p>\n\n<pre><code>ptr = (int **) malloc(limit * (sizeof(int)));\n</code></pre>\n\n<p>though there should be <code>limit</code> objects of pointers to int, you are allocating ints. So it needs to be... </p>\n\n<pre><code>ptr = malloc(limit * (sizeof(int*)));\n</code></pre>\n\n<p>BTW: In C, avoid casting the result of <code>malloc</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 8852888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JmFdv.jpg?s=128&g=1", "display_name": "Al Freaken", "link": "https://stackoverflow.com/users/8852888/al-freaken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 51064168, "answer_count": 1, "score": 1, "last_activity_date": 1530106398, "creation_date": 1530106131, "last_edit_date": 1530106337, "question_id": 51064076, "link": "https://stackoverflow.com/questions/51064076/2d-array-program-shows-garbage-value-in-output", "title": "2D array program shows garbage value in output", "body": "<p>I am writing this simple code for dynamically allocated 2D array and displaying it. When I execute this program, it gives garbage value in the first row. How is that? Any errors in my program?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int **ptr, limit, i, j;\n\n    printf(\"Enter the limit: \");\n    scanf(\"%d\", &amp;limit);\n\n    ptr = (int **) malloc(limit * (sizeof(int)));\n    for(i=0; i&lt;limit; i++)\n    {\n        *(ptr+i) = (int *) malloc((i+1) * sizeof(int));\n\n        for(j=0; j&lt;=i; j++)\n        {\n            ptr[i][j] = i;\n        }\n    }\n\n    for(i=0; i&lt;limit; i++)\n    {\n        for(j=0; j&lt;=i; j++)\n        {\n            printf(\"%d \", ptr[i][j]);\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Enter the limit: 4\n0 \n1 1 \n2 2 2 \n3 3 3 3 \n\nEnter the limit: 5\n9478320 \n1 1 \n2 2 2 \n3 3 3 3 \n4 4 4 4 4\n</code></pre>\n\n<p>If I try to print the 2D array with the limit is less than or equal to 4, it works fine. What am I missing here..</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "keil"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1530106056, "post_id": 51064012, "comment_id": 89117969, "body": "Isn&#39;t Keil using <code>armcc</code>? Take a look how to do it with <code>armcc</code>: <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491h/CHDCEBEE.html\" rel=\"nofollow noreferrer\">infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491&zwnj;&#8203;h/&hellip;</a>"}, {"owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530111017, "post_id": 51064012, "comment_id": 89121458, "body": "I&#39;ll try and get back to you as soon as possibile... thank you!"}, {"owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530184062, "post_id": 51064012, "comment_id": 89150970, "body": "That worked! Post it as an answer please, I&#39;ll mark it as solution"}], "owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530105971, "creation_date": 1530105971, "question_id": 51064012, "link": "https://stackoverflow.com/questions/51064012/adding-code-to-each-function-call-in-c", "title": "Adding code to each function call in C", "body": "<p>I'm working on a medium-sized <code>ARM</code> project with <code>Keil</code>. </p>\n\n<p>I need to execute some code when calling a function (every function) for debugging purposes.</p>\n\n<p>Now, I've found online ways to do this with compilers like <code>gcc</code> (<a href=\"https://stackoverflow.com/questions/5292149/how-to-add-print-statements-in-every-function-in-c-files-right-programmatically\">here</a>) but nothing for <code>Keil</code>.</p>\n\n<p>How can I do this with <code>Keil</code>?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "include", "extern"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1530105215, "post_id": 51063691, "comment_id": 89117328, "body": "Don&#39;t include <code>.c</code> files, or if you do, do it only once and don&#39;t compile it independently."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1530105273, "post_id": 51063691, "comment_id": 89117373, "body": "And <code>n1</code> and <code>n2</code> are local to main, you can&#39;t access them from anywhere else. Pass them as parameters."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1530105585, "post_id": 51063691, "comment_id": 89117589, "body": "<code>p1=(float*)calloc(n1,sizeof(float)); p1=(float*)calloc(n2,sizeof(float));</code> copy paste typo: you&#39;re not allocating <code>p2</code> at all."}, {"owner": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1530106174, "post_id": 51063691, "comment_id": 89118065, "body": "@Mat So you mean if I keep <code>include &quot;CPML_profile.c&quot;</code> in code 1, I should only compile <code>passivertm_formal.c</code> in my <code>Makefile</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "edited": false, "score": 0, "creation_date": 1530105856, "post_id": 51063775, "comment_id": 89117806, "body": "Thank you. I correct my code as your suggestions. But still have an error: <code>CPML_profile.o: In function </code>CPML_profile&#39;: CPML_profile.c:(.text+0x0): multiple definition of <code>CPML_profile&#39; passivertm_formal.o:passivertm_formal.c:(.text+0x0): first defined here collect2: error: ld returned 1 exit status make: *** [passivertm] Error 1</code>. Is it the &quot;include&quot; problem?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "edited": false, "score": 0, "creation_date": 1530106272, "post_id": 51063775, "comment_id": 89118147, "body": "aah see my edit. Don&#39;t include the .c file, but a header file."}, {"owner": {"reputation": 592, "user_id": 9953712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zXEAZ.jpg?s=128&g=1", "display_name": "ImmortaleVBR", "link": "https://stackoverflow.com/users/9953712/immortalevbr"}, "edited": false, "score": 0, "creation_date": 1530106380, "post_id": 51063775, "comment_id": 89118217, "body": "<a href=\"https://stackoverflow.com/questions/232693/including-one-c-source-file-in-another\" title=\"including one c source file in another\">stackoverflow.com/questions/232693/&hellip;</a>"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1530106255, "last_edit_date": 1530106255, "creation_date": 1530105311, "answer_id": 51063775, "question_id": 51063691, "link": "https://stackoverflow.com/questions/51063691/mistakenly-use-extern-in-c-among-two-codes/51063775#51063775", "title": "Mistakenly use extern in C among two codes", "body": "<p>First, don't include the <code>.c</code> file, just create a <code>.h</code> file with the function prototype:</p>\n\n<pre><code>#include \"CPML_profile.h\"\n</code></pre>\n\n<p>the .h contains:</p>\n\n<pre><code>#pragma once\nvoid CPML_profile(&lt;... function parameters ...&gt;);\n</code></pre>\n\n<p>Now, <code>n1</code> and <code>n2</code> aren't global variables. They're local variables from the <code>main</code> procedure (which is no different from another procedure besides the fact that this is your program entrypoint), you cannot access them from another procedure or file.</p>\n\n<p>Move the declaration of <code>n1</code> and <code>n2</code> to the global scope (but I wouldn't recommend that solution)</p>\n\n<pre><code>int n1,n2;\n\nint main(int argc, char* argv[])\n{\n</code></pre>\n\n<p>in your case, why not passing them as parameters, since you're already passing the array of floats:</p>\n\n<pre><code>p1=calloc(n1,sizeof(float));\np2=calloc(n2,sizeof(float));  # BTW: another issue: you're not allocating p2 but p1 twice: ouch!!\nCPML_profile(p1,p2,n1,n2);\n</code></pre>\n\n<p>now:</p>\n\n<pre><code>void CPML_profile(float *p1, float *p2, int n1, int n2)\n{\n</code></pre>\n\n<p>This solution is way cleaner, and allows to use the function in a multithreaded environment/without needing global symbols for <code>n1</code> and <code>n2</code></p>\n\n<p>Misc advice: compiling with warnings on would probably have revealed that you were using <code>p2</code> uninitialized.</p>\n"}], "owner": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530106255, "creation_date": 1530105057, "last_edit_date": 1530105914, "question_id": 51063691, "link": "https://stackoverflow.com/questions/51063691/mistakenly-use-extern-in-c-among-two-codes", "title": "Mistakenly use extern in C among two codes", "body": "<p>The structure of my codes is like:</p>\n\n<p>passivertm_formal.c:</p>\n\n<pre><code>#include \"CPML_profile.c\"\nint main(int argc, char* argv[])\n{\n    int n1,n2;\n    float *p1,*p2;\n    n1=1;\n    n2=2;\n    p1=(float*)calloc(n1,sizeof(float));\n    p2=(float*)calloc(n2,sizeof(float));\n    CPML_profile(p1,p2);\n    ...\n}\n</code></pre>\n\n<p>CPML_profile.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nvoid CPML_profile(float *p1, float *p2)\n{\n  extern int n1,n2;\n  ...\n}\n</code></pre>\n\n<p>But when I compile the two codes, error shows:</p>\n\n<pre><code>CPML_profile.o: In function `CPML_profile':\nCPML_profile.c:(.text+0x0): multiple definition of `CPML_profile'\npassivertm_formal.o:passivertm_formal.c:(.text+0x0): first defined here\npassivertm_formal.o: In function `CPML_profile':\npassivertm_formal.c:(.text+0x13): undefined reference to `n1'\npassivertm_formal.c:(.text+0x1b): undefined reference to `n2'\nCPML_profile.o: In function `CPML_profile':\nCPML_profile.c:(.text+0x13): undefined reference to `n1'\nCPML_profile.c:(.text+0x1b): undefined reference to `n2'\n</code></pre>\n\n<p>Can anybody figure out why it happens?</p>\n"}, {"tags": ["c"], "owner": {"reputation": 165, "user_id": 6644397, "user_type": "registered", "profile_image": "https://graph.facebook.com/339836286349003/picture?type=large", "display_name": "Anwar Hussain", "link": "https://stackoverflow.com/users/6644397/anwar-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "closed_date": 1530105368, "answer_count": 0, "score": 2, "locked_date": 1530154630, "last_activity_date": 1530106059, "creation_date": 1530104739, "last_edit_date": 1530104893, "question_id": 51063566, "link": "https://stackoverflow.com/questions/51063566/why-we-cant-return-anything-in-the-ternary-operator", "closed_reason": "Duplicate", "title": "Why we can&#39;t return anything in the ternary operator", "body": "<p>Why this statement is showing error missing primary-expression before return for the following code. </p>\n\n<pre><code>(1==1) ? return 1 : return 0;\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "bootloader"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530104449, "post_id": 51063300, "comment_id": 89116742, "body": "what have you tried?  We are not a &#39;free&#39; coding service.  We will help you with problems you have with YOUR code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1530104654, "post_id": 51063300, "comment_id": 89116899, "body": "is your app linked for the final location?  Did you use a linker command file, etc?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1530104665, "post_id": 51063300, "comment_id": 89116910, "body": "By &quot;hexadecimal format&quot;, do you mean Intel hex file, or what? What checksum are you on about? Intel hex use quick &amp; dirty checksum, not proper CRC. Do you mean some sort of checksum in your application? How are we supposed to know how that checksum is calculated?"}, {"owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "edited": false, "score": 0, "creation_date": 1530104945, "post_id": 51063300, "comment_id": 89117112, "body": "I am doing some sort of checksum in my application"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530104951, "post_id": 51063300, "comment_id": 89117118, "body": "the &#39;intel hex&#39; format (&#39;S&#39; records) is not executable. how does your code handle the extraction of the data portion of each record?  If it were me, I would not change the variable that contains the start address of where the code is to be saved."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530104997, "post_id": 51063300, "comment_id": 89117152, "body": "please post the linker command file as part of the question, not as a (mostly unreadable) comment"}, {"owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "edited": false, "score": 0, "creation_date": 1530105152, "post_id": 51063300, "comment_id": 89117279, "body": "Can I use memcpy?"}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1530105502, "post_id": 51063300, "comment_id": 89117528, "body": "yes / not / maybe. What CPU platform? Some procesors have idependent memory spaces for flash/ram, so simple memcpy dont work."}, {"owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "edited": false, "score": 0, "creation_date": 1530105563, "post_id": 51063300, "comment_id": 89117572, "body": "ARM cortex m0 controller"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530105622, "post_id": 51063300, "comment_id": 89117611, "body": "Your question states that the data is in flash, in intel hex format (very wasteful) and that it fits into a 512 byte of flash/ram.   Given the criteria, your app must be very small.  Extracting the &#39;meat&#39; from a Intel Hex file, before placing into flash, would be much better"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530106018, "post_id": 51063300, "comment_id": 89117945, "body": "OT:  a checksum is just the some of all the bytes.  a CRC is cyclic redundancy checksum which uses exclusive OR operations, bit shifting, etc.  Which are you actually using?"}, {"owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "edited": false, "score": 0, "creation_date": 1530106065, "post_id": 51063300, "comment_id": 89117974, "body": "checksum i.e., sum of all the bytes"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530106204, "post_id": 51063300, "comment_id": 89118094, "body": "what is the declaration of the variable: <code>APPstartAddress</code>?"}, {"owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "edited": false, "score": 0, "creation_date": 1530106241, "post_id": 51063300, "comment_id": 89118127, "body": "Start address of my application in the flash.. 0x2000"}, {"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1530110902, "post_id": 51063300, "comment_id": 89121372, "body": "Depending on the system design, the flash might not be mapped into memory at all.  There is a type of flash that is accessed via a serial bus, that you have to read block by block into RAM to be able to &#39;see&#39; it."}], "owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530105122, "creation_date": 1530103958, "last_edit_date": 1530105122, "question_id": 51063300, "link": "https://stackoverflow.com/questions/51063300/what-is-the-best-way-to-read-from-flash-and-store-in-a-buffer-using-c", "title": "What is the best way to read from flash and store in a buffer using C?", "body": "<p>I have my APP image in hexadecimal format which will be downloaded to flash by my bootloader. Before that i have to compare the checksum and this checksum function or CRC function used on the other end was to add all bytes. So I want to read the 512 bytes starting at the address 0x2000 of flash block and store them into a buffer so that I can use this while calculating the checksum by adding all the bytes and also during writing the updated image to the flash. I meant to say a C program reading the bytes(512 Bytes) from a location in flash and storing them in a buffer. What is the best way? Using memcpy? or pointers? or arrays? Thanks in advance. Can I do in the following way?</p>\n\n<pre><code>void readBytes(uint8_t * buffer, uint32_t byteCount)\n{\n    uint32_t currentBytesRead = 0;\n\n    for(currentBytesRead=0;currentBytesRead&lt;byteCount;currentBytesRead++)\n    {\n        buffer[currentBytesRead] = (char*)APPstartAddress;\n\n        APPstartAddress++;\n    }\n}\n</code></pre>\n\n<p>I used linker description file and it has my </p>\n\n<pre><code>m_interrupts    (rx) : ORIGIN = 0x00002000, LENGTH = 0xC0   /*192 Bytes*/\n  m_cfmprotrom  (rx) : ORIGIN = 0x00002400, LENGTH = 0x10   /*16 Bytes*/\n/* m_flash (rw) : ORIGIN = 0x00002411, LENGTH = 0x400 1024 Bytes reserve space for reading and writing into flash*/\n  m_text        (rx) : ORIGIN = 0x00002800, LENGTH = 128K - 0x800\n  /*reserving the last 2KB of flash by subtracting those bytes (0x800) from m_text segment*/\n  m_data         (rwx) : ORIGIN = 0x1FFFF000, LENGTH = 16K\n</code></pre>\n"}, {"tags": ["c", "sockets", "networking"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530103357, "post_id": 51063025, "comment_id": 89115956, "body": "Regarding using blocked ports, no the system will not do that. And will you really have several <i>thousands</i> of outgoing connections from your program? That&#39;s the only case you need to worry about running out of ports."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1530103456, "creation_date": 1530103456, "answer_id": 51063127, "question_id": 51063025, "link": "https://stackoverflow.com/questions/51063025/set-client-source-port-to-listening-port-with-c-sockets/51063127#51063127", "title": "Set client source port to listening port with C sockets", "body": "<p>It's possible to set the source port for a client socket by calling <code>bind</code> on the socket in question.   This is a problem however if you already have a server socket bound to that port.</p>\n\n<p>The exact port number used for a TCP client socket is typically unimportant.  Unless you have a very specific requirement, it is better to let the OS choose an available port.</p>\n"}], "owner": {"reputation": 79, "user_id": 1101207, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/613c7ac1e049b0797365e74e7218f3cb?s=128&d=identicon&r=PG", "display_name": "Min", "link": "https://stackoverflow.com/users/1101207/min"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530103456, "creation_date": 1530103120, "last_edit_date": 1592644375, "question_id": 51063025, "link": "https://stackoverflow.com/questions/51063025/set-client-source-port-to-listening-port-with-c-sockets", "title": "Set client source port to listening port with C sockets", "body": "<p>Currently, I'm following <a href=\"http://beej.us/net2/bgnet.html\" rel=\"nofollow noreferrer\">Beej's Guide to Network Programming</a> to create a stream server and client, both in the same application. Basically, it's a server that also makes connection requests (client). I'm using the codes from client.c and server.c from these <a href=\"http://beej.us/guide/bgnet/examples/\" rel=\"nofollow noreferrer\">examples</a>.</p>\n<p>What I'm looking to do is to set the client source port to be same as the server listening port if that is even possible. In other words, listen on port 8888, and make outbound connections with connect() using the same 8888 port. Currently, the default is that connections use different random ports each time.</p>\n<ol>\n<li>Is is possible to listen and make connections using the same port and how could it be done.</li>\n<li>I read that using random ports each time is the common practice but it can run out of ports or use a blocked port. How true is this?</li>\n</ol>\n<p>How do I go around this if I would like to set a fixed port for all connections?</p>\n"}, {"tags": ["c", "windows", "timer", "arduino"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1530100061, "post_id": 51061992, "comment_id": 89113716, "body": "The C language doesn&#39;t know about timers. You forgot to mention your platform."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530100076, "post_id": 51061992, "comment_id": 89113721, "body": "In C? None, no timers at all. There are no &quot;timers&quot; in the C language or standard library. You have to tell us the environment you&#39;re in, the operating system, and how you create the &quot;timers&quot;."}, {"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "edited": false, "score": 0, "creation_date": 1530100362, "post_id": 51061992, "comment_id": 89113891, "body": "Someprogrammerdude &amp; Jabberwocky, thanks for reminding me! I am working on windows os. I have updated the question too."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530100631, "post_id": 51061992, "comment_id": 89114079, "body": "You still haven&#39;t told us what &quot;timers&quot; you are using. Are you using the Windows API <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644906(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SetTimer</code></a> and related functions? Some <i>other</i> time functions? And <i>why</i> do you need so many timers? Are you sure you need timers at all, and not only a timestamp that you compare to the current time when you need it (which is the usual way to keep track of how long ago something happened)."}, {"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1530101367, "post_id": 51061992, "comment_id": 89114593, "body": "Some other time functions I believe since I am not using <code>SetTimer</code>. Where I can find which one is the one I am using?  The timestamp is the field that I will have to include in the table, which already has a member for expiration date for entry expiration. This other timestamp would be for an external operation. @Someprogrammerdude"}, {"owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1530101484, "post_id": 51061992, "comment_id": 89114679, "body": "@ryyker I meant for a board like Arduino for example, but the development is happening on windows. If this is also platform dependent then I guess I will have to fix my question further."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1530102986, "post_id": 51061992, "comment_id": 89115710, "body": "Ok this is just complete nonsense... you cannot develop a threaded Windows application and port it to a bloody hobbyist Arduino. Because... the Arduino is not a PC! It is some 100 times lower level than a Windows program."}, {"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 1, "creation_date": 1530108895, "post_id": 51061992, "comment_id": 89120012, "body": "1000+ timers? An Arduino Uno has only 2kiB of memory. The only thing you will get 1000+ of, are single bytes. There is no way to store 1000+ messages. And Arduino is C++ not C."}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1530113570, "post_id": 51062727, "comment_id": 89123039, "body": "If it&#39;s sorted on expiration time, you don&#39;t need a recurring timer.  Set the timer interval to that remaining before the expiration of the first item in the queue.  Any other timeouts before that are redundant."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1530102264, "creation_date": 1530102264, "answer_id": 51062727, "question_id": 51061992, "link": "https://stackoverflow.com/questions/51061992/how-many-timers-can-i-create-in-c-on-windows/51062727#51062727", "title": "How many timers can I create in C on Windows?", "body": "<p>If the entries in the table should be \"expired\" (and removed) at certain times, then here is a possible solution, using only a <em>single</em> timer:</p>\n\n<p>First of all use a <em>priority queue</em> where the \"priority\" is the expiration time. You can of course use any other table-like structure, but keep it sorted on the expiration time (it simplify things later).</p>\n\n<p>Then have your single recurring timer, which is triggered ten, twenty or maybe more times per second.</p>\n\n<p>When the timer is triggered, you get the current time, and simply remove all elements in the table whose expiration time have passed (comparing its expiration time with the current time). If the table is sorted on expiration date, it's a very simple loop where you compare the time from the \"top\" element, and if expired then \"pop\" the top element.</p>\n\n<p>You can use the same or similar techniques for just about <em>any</em> timing-related issue.</p>\n"}], "owner": {"reputation": 695, "user_id": 4845068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TFn8B.jpg?s=128&g=1", "display_name": "Ahmed Al-haddad", "link": "https://stackoverflow.com/users/4845068/ahmed-al-haddad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "closed_date": 1531204021, "accepted_answer_id": 51062727, "answer_count": 1, "score": -2, "last_activity_date": 1530103988, "creation_date": 1530099936, "last_edit_date": 1530101922, "question_id": 51061992, "link": "https://stackoverflow.com/questions/51061992/how-many-timers-can-i-create-in-c-on-windows", "closed_reason": "Needs details or clarity", "title": "How many timers can I create in C on Windows?", "body": "<p>I am working with a table (struct) that stores entries of received messages. I need to monitor a specific operation for each entry periodically, which is why I thought of creating a timer for each created entry to monitor how long this entry has been in the table, and based on the duration, I need to execute some commands and restart the timer. </p>\n\n<p>I am new to timers and callbacks in C, but I know that each timer leads to a new thread. My questions is, how many timers can I create on a standard board? </p>\n\n<p>I know a different method would be to add a new member for the timer operation and iterate over the table for this to work in non-critical events with one timer, but I am trying to avoid this as the table entries can affect the whole program. If it is not possible to create many timers (+1000), what would be the other ideal way of doing this? </p>\n"}, {"tags": ["c", "scanf", "tr24731"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1530099634, "post_id": 51061704, "comment_id": 89113465, "body": "It is not you who defines the buffer that takes the input; that is the OS. You define the buffer that receives the result of the scanning."}, {"owner": {"reputation": 97, "user_id": 9952716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad79e1db0bdb469c7ddea18746cbdd0f?s=128&d=identicon&r=PG&f=1", "display_name": "sharkbites", "link": "https://stackoverflow.com/users/9952716/sharkbites"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1530099726, "post_id": 51061704, "comment_id": 89113516, "body": "Sorry, thats what I mean."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1530099791, "post_id": 51061704, "comment_id": 89113548, "body": "No need to be sorry; hope this explanation answers your question."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 2, "creation_date": 1530099916, "post_id": 51061704, "comment_id": 89113630, "body": "The important part is called a variable argument list indicated by <code>...</code> after the last specified parameter."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1530100093, "post_id": 51061704, "comment_id": 89113735, "body": "if you &quot;didn&#39;t have access to the internet&quot;, you&#39;d have bigger problems than trying to remember function prototypes :-)"}, {"owner": {"reputation": 97, "user_id": 9952716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad79e1db0bdb469c7ddea18746cbdd0f?s=128&d=identicon&r=PG&f=1", "display_name": "sharkbites", "link": "https://stackoverflow.com/users/9952716/sharkbites"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1530101343, "post_id": 51061704, "comment_id": 89114578, "body": "@Gerhardh , I understand that, but it seems awfully vague to have that in your arguments, right? If scanf was declared <code>scanf(char const * const _Format , char   * buffer)</code> , I think that would be a better indicator that scanf() accepted a buffer than leaving it out altogether"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1530105200, "post_id": 51061704, "comment_id": 89117313, "body": "If <code>scanf</code> was declared that way it would not be able to scan more values or different values than exactly one single string. It would be a completely different function than what it is now."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530108796, "post_id": 51061704, "comment_id": 89119945, "body": "@sharkbites <code>scanf(char const * const _Format , char * buffer)</code> would make usages like <code>int x; scanf(&quot;%d&quot;, &amp;x)</code> a type mis-match."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530108210, "post_id": 51061832, "comment_id": 89119547, "body": "&quot;if the format string contains %s ...&quot; --&gt; may want to add <code>&quot;%c&quot;</code> and <code>&quot;%[&quot;</code> to the list."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530108431, "post_id": 51061832, "comment_id": 89119695, "body": "Note: <a href=\"https://msdn.microsoft.com/en-us/library/w40768et.aspx\" rel=\"nofollow noreferrer\">MS</a> <code>*scanf_s()</code> uses a size of type <code>unsigned</code> and not <code>size_t</code> like the C spec&#39;s annex K."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530113472, "post_id": 51061832, "comment_id": 89122988, "body": "@chux: really? This is the final blow on this ill fated extension."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530114056, "post_id": 51061832, "comment_id": 89123300, "body": "Suggest  <a href=\"https://stackoverflow.com/a/50724865/2410359\">Why didn&#39;t gcc implement _s functions?</a>"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1530114756, "last_edit_date": 1530114756, "creation_date": 1530099450, "answer_id": 51061832, "question_id": 51061704, "link": "https://stackoverflow.com/questions/51061704/where-is-the-scanf-s-buffer-defined/51061832#51061832", "title": "Where is the scanf_s() buffer defined?", "body": "<p><code>scanf_s</code> takes a variable list of arguments. The first argument is mandatory, a string with the conversion specifications, the following arguments depend on what conversion specifications are present in the format string.</p>\n\n<p>For each conversion specification <code>%s</code>, <code>%c</code> and <code>%[</code>, <code>scanf_s</code> expects 2 arguments for the conversion: a pointer to <code>char</code> (<code>char *</code>) and a number passed with type <code>rsize_t</code> that specifies the size of the array pointed to by the <code>char *</code> argument.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>#define __STDC_WANT_LIB_EXT1__ 1 \n#include &lt;stdio.h&gt;\n\nint main() {\n    char buf[32];\n    int res;\n\n    printf(\"Type a word: \");\n    res = scanf_s(\"%s\", buf, sizeof(buf));\n    switch (res) {\n    case EOF:\n        printf(\"Input failure\\n\");\n        break;\n    case 0:\n        printf(\"Matching failure\\n\");\n        break;\n    case 1:\n        printf(\"Success: you typed '%s'\\n\", buf);\n        break;\n    default:\n        printf(\"Unexpected return value %d\\n\", res);\n        break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Note however that support for <code>scanf_s</code> is far from universal. Microsoft platforms usually support it, but with varying semantics, while linux and Mac C libraries usually don't. Read this question to understand  <a href=\"https://stackoverflow.com/questions/50724726/why-didnt-gcc-implement-s-functions/50724865#50724865\">Why didn&#39;t gcc implement _s functions?</a></p>\n"}], "owner": {"reputation": 97, "user_id": 9952716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad79e1db0bdb469c7ddea18746cbdd0f?s=128&d=identicon&r=PG&f=1", "display_name": "sharkbites", "link": "https://stackoverflow.com/users/9952716/sharkbites"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530114756, "creation_date": 1530099033, "last_edit_date": 1530114379, "question_id": 51061704, "link": "https://stackoverflow.com/questions/51061704/where-is-the-scanf-s-buffer-defined", "title": "Where is the scanf_s() buffer defined?", "body": "<p>If I didn't have access to the internet, but knew that I wanted to use the <code>scanf_s()</code> function to take input from the keyboard (<code>stdin</code>), how would I know where to declare the buffer?</p>\n\n<p>At the moment, when I step into the <code>scanf_s()</code> function in Visual Studio, I see this:</p>\n\n<pre><code>#if __STDC_WANT_SECURE_LIB__\n\n    _Check_return_opt_\n    _CRT_STDIO_INLINE int __CRTDECL scanf_s(\n        _In_z_ _Scanf_s_format_string_ char const* const _Format,\n        ...)\n#if defined _NO_CRT_STDIO_INLINE // SCANF\n    ;\n</code></pre>\n\n<p>So, I can see that <code>scanf_s()</code> takes 1 defined argument (<code>char const * _Format</code>) which, in this case, could be some placeholder such as be <code>\"%s\"</code>, but nothing for the second argument - the memory address of the buffer to store the result of the scanning.</p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 25, "creation_date": 1530097674, "post_id": 51061148, "comment_id": 89112314, "body": "C and C++ are two very different languages, with very different rules and semantics. There are many things that are valid C but invalid C++. If you have a header that includes valid C but invalid C++, and you can&#39;t really edit the header file to &quot;fix&quot; it, then there&#39;s not really much you can do about it yourself. And <code>extern &quot;C&quot;</code> isn&#39;t really a &quot;C backward compatibility mode&quot;, its main usage is to inhibit name mangling and not much else."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 13, "creation_date": 1530097759, "post_id": 51061148, "comment_id": 89112379, "body": "File a bug report to your library supplier."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 4, "creation_date": 1530106024, "post_id": 51061148, "comment_id": 89117951, "body": "Is the library claimed to be usable with C++ code? Or is it only claimed to be C code?"}, {"owner": {"reputation": 600, "user_id": 5725780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FKaUq.png?s=128&g=1", "display_name": "pipe", "link": "https://stackoverflow.com/users/5725780/pipe"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 11, "creation_date": 1530106061, "post_id": 51061148, "comment_id": 89117972, "body": "@Someprogrammerdude Answers and Comments are two very different concepts, with very different rules. There are many things that are valid comments, but an answer to the question is not one of them."}], "answers": [{"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1530166904, "post_id": 51061476, "comment_id": 89140797, "body": "Wait, so C doesn&#39;t have the scope resolution operator? Wow, but it makes sense in hindsight :)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1530167318, "post_id": 51061476, "comment_id": 89141002, "body": "@Rakete1111 - Are you one of the rare people who only ever did C++ and not C?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1530169481, "post_id": 51061476, "comment_id": 89142099, "body": "Exactly. I always think I know C (because of C++) but I&#39;m always proven wrong :)"}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 4, "creation_date": 1530173992, "post_id": 51061476, "comment_id": 89144651, "body": "@Rakete1111: Just a note, C programming requires a <b>very</b> different approach (and I would even say an entirely different <i>mindset</i>) than C++. To the extent that I would readily admit I&#39;m pretty darn good at C++ but pretty darn bad at C, even though I can write both. This is not obvious when you&#39;re first learning, so that&#39;s why I&#39;m mentioning this -- if you assume two pieces of code in these languages should resemble each other, you&#39;ll only bang your head against the wall sometime afterward (maybe sooner, maybe later). I forget the idea that you ever knew C and just start it from scratch."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1530175002, "post_id": 51061476, "comment_id": 89145215, "body": "@Mehrdad Thanks for the advice! :)"}, {"owner": {"reputation": 653, "user_id": 658762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0833cea067fac2f5f71a00193c06ebfb?s=128&d=identicon&r=PG", "display_name": "Tonny", "link": "https://stackoverflow.com/users/658762/tonny"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 1, "creation_date": 1530183739, "post_id": 51061476, "comment_id": 89150772, "body": "@Mehrdad That goes the other way around as well. My C is up there with the best, but I never fully managed to wrap my head around C++. I can do C++ if needed, but it doesn&#39;t come natural and I really don&#39;t like it."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 48, "last_activity_date": 1530098409, "creation_date": 1530098409, "answer_id": 51061476, "question_id": 51061148, "link": "https://stackoverflow.com/questions/51061148/c-vs-c-compilation-incompatibility-does-not-name-a-type/51061476#51061476", "title": "C vs C++ compilation incompatibility - does not name a type", "body": "<p><code>teststruct</code> defines a scope in C++. You can form the qualified id <code>teststruct::u64</code>. So the language rules for name lookup account for that, allowing members of classes and unions to hide identifiers in outer scope. Once <code>u64 u64;</code> is introduced, the unqualified <code>u64</code> cannot refer to the global <code>::u64</code>, only the member. And the member is not a type.</p>\n\n<p>In C <code>union teststruct</code> does not define a scope. The field can only be used in member access, so there can never arise a conflict. As such the field need not hide the file scope type identifier.</p>\n\n<p>There is nothing, as far as I can tell, that you may do in order to easily work around it. This library (which is a perfectly valid C library), is not a valid C++ library. No different than if it used <code>new</code> or <code>try</code> as variable names. It needs to be adapted.</p>\n"}, {"comments": [{"owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "edited": false, "score": 4, "creation_date": 1530123824, "post_id": 51061529, "comment_id": 89128261, "body": "The downside of this approach is that unless you are doing link-time optimisation it adds an extra layer of procedure call overhead to each library call."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 39, "last_activity_date": 1530098563, "creation_date": 1530098563, "answer_id": 51061529, "question_id": 51061148, "link": "https://stackoverflow.com/questions/51061148/c-vs-c-compilation-incompatibility-does-not-name-a-type/51061529#51061529", "title": "C vs C++ compilation incompatibility - does not name a type", "body": "<p>It seems that you have a header file that is illegal in C++, so you cannot <code>#include</code> it in code compiled as C++. If you cannot effect a change in the library header file (e.g. by complaining to your library supplier) then the most straightforward option is to write a thin C++-compatible wrapper around the library:</p>\n\n<p>To isolate your C++ code against the C header, create a <code>Wrapper.h</code> and <code>Wrapper.c</code>, where the <code>.h</code> is valid for inclusion in C++, does <strong>not</strong> include <code>header.h</code>, and provides all types and functions that you need for library interaction. Then, in the <code>.c</code>, you can <code>#include \"header.h\"</code> and implement all the calls (and whatever you need to do to safely convert between the types). This would obviously have to be compiled as C, not C++.</p>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 9058464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851f865aed95456302e9b9ad1dcb1d09?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Svietlichnyy", "link": "https://stackoverflow.com/users/9058464/andrew-svietlichnyy"}, "is_accepted": false, "score": 3, "last_activity_date": 1530178785, "creation_date": 1530178785, "answer_id": 51079546, "question_id": 51061148, "link": "https://stackoverflow.com/questions/51061148/c-vs-c-compilation-incompatibility-does-not-name-a-type/51079546#51079546", "title": "C vs C++ compilation incompatibility - does not name a type", "body": "<p>If your mentioned incompatibility between C and C++ is the only one, you should be able to convert <code>header.h</code> to C++ compatible header file programmatically, name it something like <code>header.hpp</code>. And then you can convert newer versions the same way.</p>\n\n<p>Compiler errors tell you everything about what and where should be changed:</p>\n\n<pre><code>header.h:11:9: error: \u2018u64\u2019 does not name a type\n</code></pre>\n\n<ol>\n<li>Open <code>header.h</code>;</li>\n<li>Seek position 11:9;</li>\n<li>Insert <code>::</code> there;</li>\n<li>Repeat for all <code>does not name a type</code> error.</li>\n</ol>\n\n<p>Some string processing and it's done.</p>\n\n<p>PS: C to C++ converters may able to do that too.</p>\n"}], "owner": {"reputation": 755, "user_id": 5295802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b667253d9b84a8154a93254e7050c72?s=128&d=identicon&r=PG&f=1", "display_name": "Sander", "link": "https://stackoverflow.com/users/5295802/sander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4612, "favorite_count": 5, "accepted_answer_id": 51061476, "answer_count": 3, "score": 53, "last_activity_date": 1530178785, "creation_date": 1530097419, "question_id": 51061148, "link": "https://stackoverflow.com/questions/51061148/c-vs-c-compilation-incompatibility-does-not-name-a-type", "title": "C vs C++ compilation incompatibility - does not name a type", "body": "<p>I am trying to use a supplier's library in combination with my C++ application. The library is largely based on C, which is normally not a problem with the <code>extern \"C\"</code> option, but I ran into an issue that the C++ compiler does not accept. </p>\n\n<p>I simplified my code into the following example files. header.h represents a header from the suppier library, main.c/cpp are my own files. My real application is a C++ application, so I want to get it to work with main.cpp. </p>\n\n<p>header.h (note the line <code>u64 u64;</code>):</p>\n\n<pre><code>#ifndef HEADER_H\n#define HEADER_H\n\n#include &lt;stdint.h&gt;\n\ntypedef uint64_t u64;\n\nunion teststruct {\n    u64 u64;\n    struct {\n        u64 x:32;\n        u64 y:32;\n    } s;\n};\n\n#endif\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"header.h\"\n\nint main() {\n    union teststruct a;\n    a.u64=5;\n    printf(\"%x\\n\", a.u64);\n\n    return 0;\n}\n</code></pre>\n\n<p>main.cpp (same as main.c but with an extra <code>extern \"C\"</code> statement): </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nextern \"C\" {\n#include \"header.h\"\n}\n\nint main() {\n    union teststruct a;\n    a.u64=5;\n    printf(\"%x\\n\", a.u64);\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiling main.c using the line</p>\n\n<pre><code>gcc -o test main.c\n</code></pre>\n\n<p>compiles without problems. However, compiling the C++ version using the g++ compiler with the command </p>\n\n<pre><code>g++ -o test main.cpp\n</code></pre>\n\n<p>gives the following compiler errors:</p>\n\n<pre><code>In file included from main.cpp:12:0:\nheader.h:11:9: error: \u2018u64\u2019 does not name a type\n         u64 x:32;\n         ^\nheader.h:12:9: error: \u2018u64\u2019 does not name a type\n         u64 y:32;\n         ^\n</code></pre>\n\n<p>The issue is that the supplier used the same name (u64) for both the type and the variable name, which seems like a bad idea to begin with, but gcc apparently accepts it. I do not want to change the library (i.e. header.h) as it is very large,this occurs a lot in the code, and I occasionally get updates for it. Is there a way to make g++ accept this combination, or a way to modify main.cpp to make it compile <em>without</em> changing header.h?</p>\n"}, {"tags": ["c", "stm32", "i2c"], "comments": [{"owner": {"reputation": 4841, "user_id": 2556407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JRorJ.gif?s=128&g=1", "display_name": "nio", "link": "https://stackoverflow.com/users/2556407/nio"}, "edited": false, "score": 0, "creation_date": 1530095013, "post_id": 51060295, "comment_id": 89110573, "body": "with what type are ax,ay,az variables declared?"}, {"owner": {"reputation": 1, "user_id": 9999291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01a1d0f7144b2a34a345ba3673bbf62?s=128&d=identicon&r=PG&f=1", "display_name": "Marco V", "link": "https://stackoverflow.com/users/9999291/marco-v"}, "reply_to_user": {"reputation": 4841, "user_id": 2556407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JRorJ.gif?s=128&g=1", "display_name": "nio", "link": "https://stackoverflow.com/users/2556407/nio"}, "edited": false, "score": 0, "creation_date": 1530095420, "post_id": 51060295, "comment_id": 89110852, "body": "I declared them as a float"}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 2, "creation_date": 1530095441, "post_id": 51060295, "comment_id": 89110865, "body": "@MarcoV are you sure it works as expected? It seems that sensor value is signed 10-bit (and here you always have a negative value, regardless the sign read from sensor). Also note that <code>&amp;i2cbuf[1]</code> in C is implementation defined (check your compiler doc)"}, {"owner": {"reputation": 4841, "user_id": 2556407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JRorJ.gif?s=128&g=1", "display_name": "nio", "link": "https://stackoverflow.com/users/2556407/nio"}, "edited": false, "score": 0, "creation_date": 1530095603, "post_id": 51060295, "comment_id": 89110970, "body": "is the minus really necessary? what do you get as an output?"}, {"owner": {"reputation": 1, "user_id": 9999291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01a1d0f7144b2a34a345ba3673bbf62?s=128&d=identicon&r=PG&f=1", "display_name": "Marco V", "link": "https://stackoverflow.com/users/9999291/marco-v"}, "edited": false, "score": 0, "creation_date": 1530095653, "post_id": 51060295, "comment_id": 89111001, "body": "I am getting data back yeah, but I was not sure if it was the right data. What do I have to do to get the right data back then?"}, {"owner": {"reputation": 1, "user_id": 9999291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01a1d0f7144b2a34a345ba3673bbf62?s=128&d=identicon&r=PG&f=1", "display_name": "Marco V", "link": "https://stackoverflow.com/users/9999291/marco-v"}, "edited": false, "score": 0, "creation_date": 1530096020, "post_id": 51060295, "comment_id": 89111243, "body": "I removed the minus and it seems like I get more realistic values. However I do not get the Z values."}, {"owner": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "edited": false, "score": 2, "creation_date": 1530097269, "post_id": 51060295, "comment_id": 89112079, "body": "I think ax, ay, az should be int16_t and not float."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 1, "creation_date": 1530099080, "post_id": 51060295, "comment_id": 89113141, "body": "@MarcoV check the 10th bit, if it&#39;s set then value is negative (reset that bit and flip the sign but Google for details about this specific sensor...I&#39;m going blindly here). About data type: you can certainly store it as <code>float</code> but unless you need some further processing then you&#39;re just wasting memory and CPU cycles because it&#39;s a signed 16 integer <code>int16_t</code> (and not even &quot;full&quot;). Unless you&#39;re abstracting these things (in case in future you&#39;ll use a different sensor) it&#39;s probably useless."}], "answers": [{"tags": [], "owner": {"reputation": 624, "user_id": 575511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cbb8e45b8c7b627cf31370d7bde1a901?s=128&d=identicon&r=PG", "display_name": "sergeantKK", "link": "https://stackoverflow.com/users/575511/sergeantkk"}, "is_accepted": false, "score": 0, "last_activity_date": 1530185731, "creation_date": 1530185731, "answer_id": 51081914, "question_id": 51060295, "link": "https://stackoverflow.com/questions/51060295/getting-data-from-mma7455l-sensor-i2c/51081914#51081914", "title": "Getting data from MMA7455L sensor i2c", "body": "<p>My guess is that the values returned are 16 bit signed integers (<code>int16_t</code>) so you will have readings of -32767 through 0 to +32767.\nWhoever designed the board with the accelerometer example code you're using, wanted the values to read correctly in the boards normal orientation, so they have negated the results</p>\n\n<p>eg: <code>-(i2cbuf[1]&lt;&lt;8 | i2cbuf[2]);</code>\nIf both i2c values are 0xFF you get 0xFFFF, which is -1 (if type is int16)</p>\n\n<p>Negate that and you get +1 which should indicate a positive acceleration to the application</p>\n"}], "owner": {"reputation": 1, "user_id": 9999291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01a1d0f7144b2a34a345ba3673bbf62?s=128&d=identicon&r=PG&f=1", "display_name": "Marco V", "link": "https://stackoverflow.com/users/9999291/marco-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530185731, "creation_date": 1530094793, "question_id": 51060295, "link": "https://stackoverflow.com/questions/51060295/getting-data-from-mma7455l-sensor-i2c", "title": "Getting data from MMA7455L sensor i2c", "body": "<p>I succesfully connected the MMA-7455L sensor and I am getting data from it.\nAlthough I have one question if someone can help me.</p>\n\n<p>Can someone help me understand this piece of code? That I am using to get the data from.</p>\n\n<pre><code>i2cbuf[1] = 0x00;\nHAL_I2C_Master_Receive(&amp;hi2c1, 0x1D&lt;&lt;1, &amp;i2cbuf[1], 6, 10);\n\nax = -(i2cbuf[1]&lt;&lt;8 | i2cbuf[2]);\nay = -(i2cbuf[3]&lt;&lt;8 | i2cbuf[4]);\naz = -(i2cbuf[5]&lt;&lt;8 | i2cbuf[6]);\n</code></pre>\n\n<p>I am getting data and the outpit is in 8 bit. I understand that I am combining two 8 bit responses to make it a 16 bit response. But what I do not understand is the minus part.</p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["c", "arrays", "volatile"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1530092859, "post_id": 51059531, "comment_id": 89109155, "body": "First of all, arrays are <i>not</i> pointers. Arrays can <i>decay</i> to a pointer to its first element, but it&#39;s not a pointer in itself. Secondly, the declaration <code>volatile uint8_t x[10];</code> declares <code>x</code> to be an array of 10 <code>volatile uint8_t</code> elements."}, {"owner": {"reputation": 1812, "user_id": 3416648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qsynr.png?s=128&g=1", "display_name": "DDS", "link": "https://stackoverflow.com/users/3416648/dds"}, "edited": false, "score": 0, "creation_date": 1530092919, "post_id": 51059531, "comment_id": 89109197, "body": "I suggest you to &quot;clarify&quot; your ideas by a <code>typedef</code> where you define your data type &#39;volatile uint8_t *&#39;"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1530096915, "post_id": 51059531, "comment_id": 89111842, "body": "If you have problems with passing function parameters, you might update your question to include the function prototypes and the error messages."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1530099917, "post_id": 51059531, "comment_id": 89113631, "body": "If you cannot change the prototype, it is impossible to tell <code>functionName</code> that the objects are volatile. You could make a copy of the data you want to pass to <code>functionName</code> and pass that. E.g., allocate some memory or declare a local array, copy the data from <code>x</code> into that memory, and pass that memory to <code>functionName</code>. Of course, then <code>functionName</code> will not see any changes to <code>x</code> that occur during execution of <code>functionName</code>. You will essentially have a non-volatile snapshot of <code>x</code>. If <code>functionName</code> changes the data, then, when it is done, copy the temporary data back into <code>x</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1530103561, "post_id": 51059531, "comment_id": 89116101, "body": "Either you need a volatile array or you don&#39;t. You can&#39;t have an array which is &quot;sometimes volatile&quot; or &quot;slightly volatile&quot;. If you need a volatile array, it is a bug to pass it to a function which isn&#39;t volatile-qualified, because doing so doesn&#39;t make any sense."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1594211714, "post_id": 51059531, "comment_id": 111046339, "body": "Arrays cannot be stored in registers (because of their size) and for that reason <code>volatile</code> is not necessary. Is this compiler message warning or error?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7253377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c085e110d44d55dd2b000b7c4508a06?s=128&d=identicon&r=PG&f=1", "display_name": "igol", "link": "https://stackoverflow.com/users/7253377/igol"}, "edited": false, "score": 0, "creation_date": 1530095167, "post_id": 51059718, "comment_id": 89110677, "body": "Actually, when I use: <code>volatile uint8_t x[10]</code> the compiler reports <b>passing argument 1 of &#39;functionName&#39; discards &#39;volatile&#39; qualifier from pointer target type</b>, where argument 1 is x. So, it seems that it is the pointer [to the first element] to be declared as volatile."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 57, "user_id": 7253377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c085e110d44d55dd2b000b7c4508a06?s=128&d=identicon&r=PG&f=1", "display_name": "igol", "link": "https://stackoverflow.com/users/7253377/igol"}, "edited": false, "score": 2, "creation_date": 1530096696, "post_id": 51059718, "comment_id": 89111684, "body": "@igol You must also add <code>volatile</code> to your parameter list of the function. Otherwise the function cannot know that it mustn&#39;t optimize accesses to that memory location."}, {"owner": {"reputation": 5314, "user_id": 5270581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leDO2.jpg?s=128&g=1", "display_name": "Laurent H.", "link": "https://stackoverflow.com/users/5270581/laurent-h"}, "reply_to_user": {"reputation": 57, "user_id": 7253377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c085e110d44d55dd2b000b7c4508a06?s=128&d=identicon&r=PG&f=1", "display_name": "igol", "link": "https://stackoverflow.com/users/7253377/igol"}, "edited": false, "score": 0, "creation_date": 1530101281, "post_id": 51059718, "comment_id": 89114541, "body": "@igol I agree with Gerhardh. If you call a function <code>functionName(x)</code>, then the prototype of the function must be like <code>void functionName(volatile uint8_t* ptr)</code>, in order that the data pointed by <code>x</code> is considered as volatile in the function code."}], "tags": [], "owner": {"reputation": 5314, "user_id": 5270581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leDO2.jpg?s=128&g=1", "display_name": "Laurent H.", "link": "https://stackoverflow.com/users/5270581/laurent-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1530101042, "last_edit_date": 1530101042, "creation_date": 1530093258, "answer_id": 51059718, "question_id": 51059531, "link": "https://stackoverflow.com/questions/51059531/how-do-i-declare-a-static-array-with-volatile-elements/51059718#51059718", "title": "How do I declare a static array with volatile elements?", "body": "<p>What you have to do to declare a static array of 10 volatile elements of type <code>uint8_t</code>is just:  </p>\n\n<pre><code>volatile uint8_t x[10];\n</code></pre>\n\n<p>Be aware that this is a declaration of an array, which has nothing to see with pointers at this step.  </p>\n\n<p><em>Note: Later in your code, if you use <code>x</code>, it may decay to a pointer to the first volatile element, but in this case this pointer will have a constant value, given at the linking step. The pointed value is obviously volatile.</em></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 12854031, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/43b2be53c9d0e2cb92ba10cf357efcdf?s=128&d=identicon&r=PG", "display_name": "Peter Painter", "link": "https://stackoverflow.com/users/12854031/peter-painter"}, "is_accepted": false, "score": 0, "last_activity_date": 1594211412, "creation_date": 1594211412, "answer_id": 62794861, "question_id": 51059531, "link": "https://stackoverflow.com/questions/51059531/how-do-i-declare-a-static-array-with-volatile-elements/62794861#62794861", "title": "How do I declare a static array with volatile elements?", "body": "<p>Stumbled across the problem myself today.\nA variable CAN be 'sometimes' volatile.\nBeing volatile means, that its value can changed outside the program flow. By a parallel thread or an ISR.\nNow if the ISR is what changes the value 'unexpectedly', it won't change unexpectedly inside the ISR itself. So for the ISR, the variable is not volatile and disabling compiler optimizations for it is counterproductive.\nIf I call a function from inside the ISR (and only from there), then the variable is not volatile and I don't want to pass a pointer to volatile, as it would produce inefficient code.</p>\n<p>For this case, the solution I found was to have two declarations:</p>\n<pre><code>int a[x] = {};\nvolatile int * b = a;\n</code></pre>\n<p>Now the outside world uses b (globally declared in the header file) and treats the values pointed to by b as volatile, while the ISR (locally) defines both and uses a, treating the values as being not volatile.</p>\n<p>Well, this is a very special case. In general, a function only sees the function parameter declaration. Which is either volatile or not, so the funciton will treat a parameter either always as being volatile or always as being not. It cannot automatically switch between two maybe completely differently compiled code blocks depending on the original volatile qualifier state of the passed parameter. Hence the warning.</p>\n"}], "owner": {"reputation": 57, "user_id": 7253377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c085e110d44d55dd2b000b7c4508a06?s=128&d=identicon&r=PG&f=1", "display_name": "igol", "link": "https://stackoverflow.com/users/7253377/igol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1594211412, "creation_date": 1530092700, "last_edit_date": 1530110778, "question_id": 51059531, "link": "https://stackoverflow.com/questions/51059531/how-do-i-declare-a-static-array-with-volatile-elements", "title": "How do I declare a static array with volatile elements?", "body": "<h2>Clarification about terminology used:</h2>\n\n<p>For static array I mean array statically memory allocated like: int x[10].</p>\n\n<h2><strong>The problem</strong></h2>\n\n<p>I need to declare a static array with volatile elements. \nIf I well understood how volatile qualifier works, it should be:</p>\n\n<pre><code>volatile uint8_t *x; // x is a pointer to volatile uint8_t\nuint8_t *volatile x; // x is a volatile pointer to uint8_t\nvolatile uint8_t *volatile x; // x is a volatile pointer to volatile uint8_t \n</code></pre>\n\n<p>Ok, but now I need to do the same thing with a <strong>static array</strong>.\nI tried with:</p>\n\n<pre><code>volatile uint8_t x[10];  // Only the pointer is decleared as volatile\nuint8_t volatile x[10];  // Same as above\nvolatile uint8_t *x3[10]; // Casting problems and errors when I do ...  \n*x3[0] = 1; // ... something like this. Moreover, I do not know if this...\n            // ... statement declares the uint8_t element as volatile\n</code></pre>\n\n<p>Thanks!</p>\n\n<h2>UPDATE</h2>\n\n<p>Ok, as highlighted in the comments I should use:</p>\n\n<pre><code>volatile uint8_t x[10]\n</code></pre>\n\n<p>As I could understand, the problem is not in the declaration but in the usage of this variable in my code. I pass this element to a function whose prototype is:</p>\n\n<pre><code>static void functionName(uint8_t *buffer, uint32_t size);\n</code></pre>\n\n<p>I call the function in this way:</p>\n\n<pre><code>functionName(x, 10);\n</code></pre>\n\n<p>The compiler reports: <strong>passing argument 1 of 'functionName' discards 'volatile' qualifier from pointer target type</strong></p>\n\n<p>I can't change the function prototype, how can I solve the problem?</p>\n"}, {"tags": ["c", "buffer", "stdin", "fgets"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 4, "creation_date": 1530092836, "post_id": 51059508, "comment_id": 89109141, "body": "You might take a look at the standard <a href=\"https://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\"><code>getline</code></a> function."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 9, "creation_date": 1530092972, "post_id": 51059508, "comment_id": 89109228, "body": "Given <code>char *str</code>, just what do you think <code>sizeof( str )</code> returns?"}, {"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530094296, "post_id": 51059508, "comment_id": 89110122, "body": "I think sizeof(str) gives the current size of str. But is this increasing for every character?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1530095163, "post_id": 51059508, "comment_id": 89110675, "body": "<code>sizeof(str)</code> -&gt; <code>sizeof(char) * cur_max</code>. <code>sizeof(str)</code> is the size of a <i>pointer</i> on your platform (most likely 4 or 8), not the size of the buffer where it points to. Remember: pointers are not arrays."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1530096858, "post_id": 51059508, "comment_id": 89111799, "body": "@FranzFerdinand In your code, <code>sizeof(str)</code> is the same as <code>sizeof(char *)</code> which is probably either 4 or 8.  You want something more like <code>fgets(str, cur_max, stdin)</code>.  See also <a href=\"https://stackoverflow.com/questions/44689288/why-does-sizeof-not-work-for-pointer-arrays\" title=\"why does sizeof not work for pointer arrays\">stackoverflow.com/questions/44689288/&hellip;</a> ."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530106797, "post_id": 51059508, "comment_id": 89118526, "body": "OT:  the expression: <code>sizeof(char)</code> is defined in the C standard as 1.   Multiplying any value by 1 has no effect.  Suggest removing that expression from the parameter to <code>malloc()</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530251674, "post_id": 51059508, "comment_id": 89178081, "body": "Note: robust code does not give unlimited allocation possibilities to external forces as the  <a href=\"https://stackoverflow.com/questions/2532425/read-line-from-file-without-knowing-the-line-length\">link</a> suggests. Defensive code have an upper bound of reasonable <i>line</i> length.  Lines exceeding some threshold are best to be considered hostile and should be rejected. Do not write code to be the next hacker exploit."}], "answers": [{"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1530101945, "creation_date": 1530101945, "answer_id": 51062609, "question_id": 51059508, "link": "https://stackoverflow.com/questions/51059508/using-fgets-without-predefined-buffer/51062609#51062609", "title": "Using fgets() without predefined buffer", "body": "<p>POSIX.1 <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a> (<a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\"><code>man 3 getline</code></a>) is available in almost all operating systems' C libraries (the only exception I know of is Windows). A loop to read lines of any length is</p>\n\n<pre><code>char    *line_ptr = NULL;\nsize_t   line_max = 0;\nssize_t  line_len;\n\nwhile (1) {\n\n    line_len = getline(&amp;line_ptr, &amp;line_max, stdin);\n    if (line_len == -1)\n        break;\n\n    /* You now have 'line_len' chars at 'line_ptr',\n       but it may contain embedded nul chars ('\\0').\n       Also, line_ptr[line_len] == '\\0'.\n    */\n}\n\n/* Discard dynamically allocated buffer; allow reuse later. */\nfree(line_ptr);\nline_ptr = NULL;\nline_max = 0;\n</code></pre>\n\n<p>There is also a related function <code>getdelim()</code>, that takes an extra parameter (specified before the stream), used as an end-of-record marker. It is particularly useful in Unixy/POSIXy environments when reading file names from e.g. standard input, as you can use nul itself (<code>'\\0'</code>) as the separator (see e.g. <a href=\"http://man7.org/linux/man-pages/man1/find.1.html\" rel=\"nofollow noreferrer\"><code>find -print0</code></a> or <a href=\"http://man7.org/linux/man-pages/man1/xargs.1.html\" rel=\"nofollow noreferrer\"><code>xargs -0</code></a>), allowing correct handling for all possible file names.</p>\n\n<p>If you use Windows, or if you have text files with varying newline conventions (not just <code>'\\n'</code>, but any of <code>'\\n'</code>, <code>'\\r'</code>, <code>\"\\r\\n\"</code>, or <code>\"\\n\\r\"</code>), you can use my <a href=\"https://stackoverflow.com/a/50252414/1475978\"><code>getline_universal()</code></a> function implementation from another of my answers.  It differs from standard <code>getline()</code> and <code>fgets()</code> in that the newline is not included in the line it returns; it is also left in the stream and consumed/ignored by the <em>next</em> call to <code>getline_universal()</code>. If you use <code>getline_universal()</code> to read each line in a file or stream, it will work as expected.</p>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530251082, "post_id": 51065393, "comment_id": 89177871, "body": "Thanks for your answer, I got it"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1530110012, "last_edit_date": 1530110012, "creation_date": 1530109701, "answer_id": 51065393, "question_id": 51059508, "link": "https://stackoverflow.com/questions/51059508/using-fgets-without-predefined-buffer/51065393#51065393", "title": "Using fgets() without predefined buffer", "body": "<h2>Incorrect code</h2>\n\n<p><code>sizeof(str)</code> is the size of a pointer, like 2, 4  or 8 bytes.  Pass to <code>fgets()</code> the size of the memory pointed to by <code>str</code>. <a href=\"https://stackoverflow.com/users/4756299/andrew-henle\">@Andrew Henle</a> <a href=\"https://stackoverflow.com/users/3923896/steve-summit\">@Steve Summit</a></p>\n\n<pre><code>char *str = malloc(sizeof(char) * cur_max);\n...\n// while(fgets(str, sizeof(str), stdin) != NULL\nwhile(fgets(str, cur_max, stdin) != NULL\n</code></pre>\n\n<h2>Environmental limits</h2>\n\n<p><em>Text files</em> and <code>fgets()</code> are not the portable solution for reading excessively long lines.</p>\n\n<blockquote>\n  <p>An implementation shall support text files with lines containing at least 254 characters, including the terminating new-line character. The value of the macro <code>BUFSIZ</code> shall be at least 256  C11 \u00a77.21.2 9</p>\n</blockquote>\n\n<p>So once the line length exceeds <code>BUFSIZ - 2</code>, code is on its own as to if the C standard library functions can handle a <em>text file</em>.</p>\n\n<p>So either read the data as binary, use other libraries that insure the desired functionality, or rely on hope.</p>\n\n<p>Note: <code>BUFSIZ</code> defined in <code>&lt;stdio.h&gt;</code></p>\n"}], "owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "accepted_answer_id": 51065393, "answer_count": 2, "score": 1, "last_activity_date": 1530110012, "creation_date": 1530092639, "question_id": 51059508, "link": "https://stackoverflow.com/questions/51059508/using-fgets-without-predefined-buffer", "title": "Using fgets() without predefined buffer", "body": "<p>I need to ask one more question about reading from the stdin.\nI am reading a huge trunk of lines from the stdin, but it is definitely unknown which is the size of every line. So I don't want to have a buffer like 50Mio just for a file having lines of three char and than a file using these 50 Mio per line.\nSo at the moment I am having this code:</p>\n\n<pre><code>int cur_max = 2047;\nchar *str = malloc(sizeof(char) * cur_max);\nint length = 0;\n\nwhile(fgets(str, sizeof(str), stdin) != NULL) {\n    //do something with str\n    //for example printing\n    printf(\"%s\",str);\n}\n\nfree(str);\n</code></pre>\n\n<p>So I am using fgets for every line and I do have a first size of 2047 char per line.\nMy plan is to increase the size of the buffer (str) when a line hits the limit. So my idea is to count the size with length and if the current length is bigger than cur_max then I am doubling the cur_max.\nThe idea comes from here <a href=\"https://stackoverflow.com/questions/2532425/read-line-from-file-without-knowing-the-line-length\">Read line from file without knowing the line length</a>\nI am currently not sure how to do this with fgets because I think fgets is not doing this char by char so I don't know the moment when to increase the size.</p>\n"}, {"tags": ["c", "algorithm", "performance", "sorting", "insertion-sort"], "comments": [{"owner": {"reputation": 1087, "user_id": 5437487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LvDp.png?s=128&g=1", "display_name": "Kepotx", "link": "https://stackoverflow.com/users/5437487/kepotx"}, "edited": false, "score": 2, "creation_date": 1530092825, "post_id": 51059478, "comment_id": 89109130, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24853/what-is-the-difference-between-i-and-i\">What is the difference between ++i and i++?</a>"}, {"owner": {"reputation": 4749, "user_id": 512225, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b01d1b190b75cd4a4c828052fd3bedbb?s=128&d=identicon&r=PG", "display_name": "jimifiki", "link": "https://stackoverflow.com/users/512225/jimifiki"}, "edited": false, "score": 1, "creation_date": 1530093316, "post_id": 51059478, "comment_id": 89109443, "body": "swap not taking data is suspicious!"}], "answers": [{"tags": [], "owner": {"reputation": 4749, "user_id": 512225, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b01d1b190b75cd4a4c828052fd3bedbb?s=128&d=identicon&r=PG", "display_name": "jimifiki", "link": "https://stackoverflow.com/users/512225/jimifiki"}, "is_accepted": false, "score": 2, "last_activity_date": 1530093184, "creation_date": 1530093184, "answer_id": 51059700, "question_id": 51059478, "link": "https://stackoverflow.com/questions/51059478/insertion-sortss-problamatic-area/51059700#51059700", "title": "Insertion sorts&#39;s problamatic area", "body": "<p>In this context both work. </p>\n\n<p>In C++ there are good reasons to use ++i. \nSince you're coding in C choose one and stick with it. </p>\n"}, {"tags": [], "owner": {"reputation": 605, "user_id": 7413747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CPWIY.jpg?s=128&g=1", "display_name": "oybek", "link": "https://stackoverflow.com/users/7413747/oybek"}, "is_accepted": true, "score": 1, "last_activity_date": 1530105210, "last_edit_date": 1530105210, "creation_date": 1530100912, "answer_id": 51062309, "question_id": 51059478, "link": "https://stackoverflow.com/questions/51059478/insertion-sortss-problamatic-area/51062309#51062309", "title": "Insertion sorts&#39;s problamatic area", "body": "<p>For primite types there is no performance difference between postfix and prefix increment/decrement.</p>\n\n<p>By the way there is more efficient insertion sort algo implementation, only 1 assignment in inner loop (swap performs 3).</p>\n\n<pre><code>int i, key, j;\nfor (i = 1; i &lt; n; i++)\n{\n   key = arr[i];\n   j = i-1;\n   for (j = i-1; j &gt;= 0 &amp;&amp; arr[j] &gt; key; --j) {\n       arr[j+1] = arr[j];\n   }\n   arr[j+1] = key;\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9611310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nipuna chandimal", "link": "https://stackoverflow.com/users/9611310/nipuna-chandimal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 51062309, "answer_count": 2, "score": 1, "last_activity_date": 1530105210, "creation_date": 1530092573, "last_edit_date": 1530093768, "question_id": 51059478, "link": "https://stackoverflow.com/questions/51059478/insertion-sortss-problamatic-area", "title": "Insertion sorts&#39;s problamatic area", "body": "<pre><code>for(i = 1; i &lt; len; i++){\n    for(j = i - 1; j &gt;= 0; --j){\n        if(data[j] &gt; data[1 + j]){\n            swap(j, j + 1);\n        } else {\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>swap method does swapping elements. Why it should be --j instead of j-- ? what is the difference ? what is the advantage of putting j-- ?</p>\n"}, {"tags": ["c", "rsa", "public-key-encryption"], "comments": [{"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1530096390, "post_id": 51058946, "comment_id": 89111497, "body": "What do you mean by &quot;how can I modify the algorithm&quot;? Do you mean how do you perform the mathematical operations?"}, {"owner": {"reputation": 1160, "user_id": 6949178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yW1nZs8m-_4/AAAAAAAAAAI/AAAAAAAAAIk/Je9U6NaDvuY/photo.jpg?sz=128", "display_name": "Stoogy", "link": "https://stackoverflow.com/users/6949178/stoogy"}, "edited": false, "score": 1, "creation_date": 1530106581, "post_id": 51058946, "comment_id": 89118385, "body": "What do you mean by &quot;a RSA key length is 128 bytes?&quot;. Do you mean that for RSA2048? Because RSA1024 has a key length of 64bytes"}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 1, "creation_date": 1530108891, "post_id": 51058946, "comment_id": 89120010, "body": "The security of such algorithm requires to manipulate integers which are way longer than the ones you can find in regular programming languages. You need to use specific module to manipulate arbitrary long integers... except if it is just a school exercise."}, {"owner": {"reputation": 23, "user_id": 9459066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb46555ed22450dc668671489a0797a?s=128&d=identicon&r=PG&f=1", "display_name": "Radu", "link": "https://stackoverflow.com/users/9459066/radu"}, "edited": false, "score": 0, "creation_date": 1530179888, "post_id": 51058946, "comment_id": 89148384, "body": "mnistic yes, how can i perfome the mathematical operations when e, p and q are vectors ?"}], "owner": {"reputation": 23, "user_id": 9459066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb46555ed22450dc668671489a0797a?s=128&d=identicon&r=PG&f=1", "display_name": "Radu", "link": "https://stackoverflow.com/users/9459066/radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539611386, "creation_date": 1530091129, "last_edit_date": 1539611386, "question_id": 51058946, "link": "https://stackoverflow.com/questions/51058946/how-can-i-generate-rsa-key-for-bigint", "title": "How can i generate RSA key for bigint?", "body": "<p>I'm using the following program to generate an RSA key of 4 bytes length (unsigned long). So my question is how can i modify my program to work with big integers ? </p>\n\n<pre><code>void keygen(unsigned long int e, unsigned long int p, unsigned long int q)\n{\n    unsigned long int phi,d,n,s;\n\n    n = p*q;\n    phi=(p-1)*(q-1);\n\n    d = phi / e ;\n\n    do\n    {\n        d++;\n    }\n    while( ((d*e) % phi) != 1 );\n\n    printf(\"\\n public key: { e=%u n=%u }\",e,n);\n    printf(\"\\n private key: { d=%u n=%u }\",d,n);\n    printf(\"\\n verify modulo = %d\\n\",((d*e) % phi)); /* this need to be 1 */\n}\n\nvoid main()\n{\n    keygen(3, 17, 19);\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "boot"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1530090735, "post_id": 51058741, "comment_id": 89107794, "body": "The <code>call</code> instruction is very different from the <code>C</code> call. What target have you set while compiling the C code? Depending on the ABI, the call to function pointer may add some unexpected instructions."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1530097085, "post_id": 51058741, "comment_id": 89111965, "body": "what architecture are you programming for?"}, {"owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "edited": false, "score": 1, "creation_date": 1530098067, "post_id": 51058741, "comment_id": 89112562, "body": "I am using harvard architecture and it is arm cortex m0"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530107858, "post_id": 51058741, "comment_id": 89119295, "body": "the boot loader should extract the actual application start address from the incoming data.  that is the address that should be jumped to. BTW: 0x2000 is nothing like your stated start address of 0x20000."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530108054, "post_id": 51058741, "comment_id": 89119438, "body": "a bootloader, normally, will use the interrupts, The target application will (most likely) use those same interrupts, so careful planning will allow the same interrupt hander code to be used, however, if the interrupt handler has to be different, that needs to be taken care of before calling the start (main) function of the downloaded code"}], "owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530090471, "creation_date": 1530090471, "question_id": 51058741, "link": "https://stackoverflow.com/questions/51058741/how-to-jump-to-my-application-address-in-bootloader", "title": "How to jump to my application address in bootloader", "body": "<p>I have my bootloader code, and I have to write a function to jump to user application and I have two ways to do that, one in assembly and other in C like follows:</p>\n\n<pre><code>void JumpToUserApplication( unsigned int userSP,  unsigned int userStartup)\n{\n  volatile  unsigned int avoid_optimization;\n  avoid_optimization = userSP;       //In order to avoid optimization issue when -Os\n  avoid_optimization = userStartup;  //In order to avoid optimization issue when -Os\n\n    // set up stack pointer\n  __asm(\"msr msp, r0\");\n  __asm(\"msr psp, r0\");\n\n  // Jump to PC (r1)\n  __asm(\"mov pc, r1\");\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>void jumpToApplication(void)\n{\n     void (*fptr)(void);\n     fptr = (void (*)(void))0x00002000;\n     fptr();\n     //__asm__(\"JUMP #0x00000800H\");\n}\n</code></pre>\n\n<p>and my user application will start at address 20000. What are the concepts in using the first one and second one? Which one has to be used and which is better?Thanks in advance. </p>\n"}, {"tags": ["c", "pointers", "malloc", "breadth-first-search"], "comments": [{"owner": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "edited": false, "score": 2, "creation_date": 1530090802, "post_id": 51058408, "comment_id": 89107828, "body": "Some tips: the size/types of <code>parent</code> and <code>sPoint</code> are not included. Don&#39;t cast the malloc.  I would use parenthesis in the <code>if</code>&#39;s (i.e. <code>...if ((cell[0] &gt;= 0) &amp;&amp; (cell[0] &lt; w)...</code>). What is the point of <code>sizeof(front)&#47;sizeof(int)</code> ? And why are you comparing ((<code>unsigned</code>)1-5) with <code>int</code>?.  <code>realloc</code> expects a <code>size_t</code>, not a decimal. Arrays as index of arrays are hard to manage, because it is too easy to request a value out of the array. I hardly recommend you to debug your code, step by step, to find out the error(s) in the code."}, {"owner": {"reputation": 3, "user_id": 7875639, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh3.googleusercontent.com/-pgVfIAQ-ugo/AAAAAAAAAAI/AAAAAAAAAAs/LA4qTdpMbVI/photo.jpg?sz=128", "display_name": "G&#246;kberk A&#231;\u0131kg&#246;z", "link": "https://stackoverflow.com/users/7875639/g%c3%b6kberk-a%c3%a7%c4%b1kg%c3%b6z"}, "reply_to_user": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "edited": false, "score": 0, "creation_date": 1530090946, "post_id": 51058408, "comment_id": 89107911, "body": "Thank you i&#39;ll try"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 1, "creation_date": 1530093410, "post_id": 51058408, "comment_id": 89109504, "body": "@G&#246;kberkA&#231;\u0131kg&#246;z ??? Why is there a realloc with &quot;1.75 * front&quot; as size ?"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "edited": false, "score": 0, "creation_date": 1530093569, "post_id": 51058408, "comment_id": 89109601, "body": "@JoseFelipe Using useless parenthesis in the if (because all of test are &amp;&amp;) will only add difficulty to reading. A part from the fact that the if is long, there&#39;s nothing wrong."}, {"owner": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1530094348, "post_id": 51058408, "comment_id": 89110166, "body": "@Tom&#39;s that is the reason why I said &quot;I would..&quot;. Both are correct and <code>&amp;&amp;</code> is primary-expression, but in terms of readability, I am agree with this answer: <a href=\"https://softwareengineering.stackexchange.com/questions/201175/should-i-use-parentheses-in-logical-statements-even-where-not-necessary\" title=\"should i use parentheses in logical statements even where not necessary\">softwareengineering.stackexchange.com/questions/201175/&hellip;</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530108727, "post_id": 51058408, "comment_id": 89119899, "body": "OT: for ease of readability and understanding: 1) insert an appropriate horizontal space inside parens, inside braces, after commas, after semicolons, around C operators  2) separate code blocks <code>for</code> <code>if</code> <code>else</code> <code>while</code> <code>do...while</code> <code>switch</code> <code>case</code> <code>default</code> via a single blank line.  3) variable (and parameter) names should indicate <code>content</code> or <code>usage</code> (or better, both) 4) honor the right page margin (usually column 72 or 80)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530108784, "post_id": 51058408, "comment_id": 89119935, "body": "when calling C library functions, for instance: <code>malloc()</code>, always check the returned value for errors"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530108967, "post_id": 51058408, "comment_id": 89120068, "body": "when asking a question about a runtime problem, as this question is doing, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> otherwise the question is &#39;off topic&#39; and the &#39;close&#39; votes will quickly accumulate."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530109030, "post_id": 51058408, "comment_id": 89120114, "body": "the posted code fails to declare the variable <code>found</code> and is not even a complete function."}, {"owner": {"reputation": 3, "user_id": 7875639, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh3.googleusercontent.com/-pgVfIAQ-ugo/AAAAAAAAAAI/AAAAAAAAAAs/LA4qTdpMbVI/photo.jpg?sz=128", "display_name": "G&#246;kberk A&#231;\u0131kg&#246;z", "link": "https://stackoverflow.com/users/7875639/g%c3%b6kberk-a%c3%a7%c4%b1kg%c3%b6z"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530162008, "post_id": 51058408, "comment_id": 89139151, "body": "thank you @user3629249. found is a global variable, i didn&#39;t send it to here."}], "owner": {"reputation": 3, "user_id": 7875639, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh3.googleusercontent.com/-pgVfIAQ-ugo/AAAAAAAAAAI/AAAAAAAAAAs/LA4qTdpMbVI/photo.jpg?sz=128", "display_name": "G&#246;kberk A&#231;\u0131kg&#246;z", "link": "https://stackoverflow.com/users/7875639/g%c3%b6kberk-a%c3%a7%c4%b1kg%c3%b6z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1530099227, "creation_date": 1530089347, "last_edit_date": 1530090963, "question_id": 51058408, "link": "https://stackoverflow.com/questions/51058408/segmentation-fault-in-c-breadth-first-search", "title": "Segmentation Fault in C ,Breadth First Search", "body": "<p>I'm trying to access directly into memory in c. I need that because my array size needed to be dynamic. There's the code block that includes Breadth-First Search Algorithm, where am i wrong?</p>\n\n<pre><code>int visited[h][w];\nint parent[h][w][2]; // Width, Height, {x,y}\nint d[] = {0, -1, 0, 1, 1, 0, -1, 0};\nint p[2];\nint cell[2];\nint *q = (int*)malloc(10000*sizeof(int));\nint front = 0, rear = 0;\nq[front++]=sPoint[0];\nq[front++]=sPoint[1];\n\nvisited[sPoint[1]][sPoint[0]] = 1;\nwhile ((front - rear) &gt; 0) {\n    p[0] = q[rear++]; // [0,1,5,6,7,8]\n    p[1] = q[rear++];\n    for (int i = 0; i &lt; 4; i++) {\n        cell[0] = d[i * 2] + p[0];\n        cell[1] = d[i * 2 + 1] + p[1];\n        if (cell[0] &gt;= 0 &amp;&amp; cell[0] &lt; w &amp;&amp; cell[1] &gt;= 0 &amp;&amp; cell[1] &lt; h\n                &amp;&amp; visited[cell[1]][cell[0]] == 0 &amp;&amp; isBlack(cell[0], cell[1]) != 1) {\n            if(!(front &lt;= sizeof(front)/sizeof(int) - 5))\n            {\n                q = (int*)realloc(q,1.75*front);\n            }\n            q[front++] = cell[0];\n            q[front++] = cell[1];\n            visited[cell[1]][cell[0]] = visited[p[1]][p[0]] + 1;\n            parent[cell[1]][cell[0]][0] = p[0];\n            parent[cell[1]][cell[0]][1] = p[1];\n            if (cell[0] == ePoint[0] &amp;&amp; cell[1] == ePoint[1]) {\n                found = 1;\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "long-integer"], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530251009, "post_id": 51058635, "comment_id": 89177837, "body": "Thank you for your explanation. The comment about cmp  is useful as well."}], "tags": [], "owner": {"reputation": 5631, "user_id": 1198321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f792e733fbf4e4edd6d64842093b7691?s=128&d=identicon&r=PG", "display_name": "lxop", "link": "https://stackoverflow.com/users/1198321/lxop"}, "is_accepted": false, "score": 2, "last_activity_date": 1530090119, "creation_date": 1530090119, "answer_id": 51058635, "question_id": 51058385, "link": "https://stackoverflow.com/questions/51058385/see-if-number-is-smaller-than-232/51058635#51058635", "title": "See if number is smaller than 2^32", "body": "<p>It depends on the details of your situation. If your application is reading completely arbitary input, then you will want to do some preprocessing on the incoming text. At this point you can detect minus signs (and reject the input) and you can strip leading zeroes. </p>\n\n<p>After that, you can easily check the length of the number string, and if it is more than 10 digits (2^32 = 4294967296 which has 10 digits) then reject the input. If it is shorter than 10 digits, then you know it is in the [0..2^32-1] range. </p>\n\n<p>If it has exactly 10 digits, then you have at least a couple of options:</p>\n\n<ul>\n<li>parse it into an integer with more than 32 bits (e.g. a 64-bit type) and directly check if it is <code>&lt; 2^32</code></li>\n<li>read it character-by-character, comparing it to the digits of 2^32. This could be easily implemented by doing a string <code>cmp</code>.</li>\n</ul>\n\n<p>Which of these you use depends on what your limitations are.</p>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530104562, "post_id": 51058723, "comment_id": 89116825, "body": "Hello, I tried to use int64_t in one of my trials and I am wondering about the following message: &quot;format \u2018%lld\u2019 expects argument of type \u2018long long int\u2019, but argument 2 has type \u2018int64_t\u2019&quot;"}, {"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530104597, "post_id": 51058723, "comment_id": 89116855, "body": "What is the correct version of using printf(&quot;value: %lld&quot;,someNum); with int64_t?"}, {"owner": {"reputation": 1812, "user_id": 3416648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qsynr.png?s=128&g=1", "display_name": "DDS", "link": "https://stackoverflow.com/users/3416648/dds"}, "reply_to_user": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530104832, "post_id": 51058723, "comment_id": 89117026, "body": "Try this: <code>#include &lt;inttypes.h&gt; uint64_t t; printf(&quot;%&quot; PRI&lt;type&gt;64 &quot;\\n&quot;, t);</code> use type=<code>d</code> for signed and <code>u</code> for unsigned"}, {"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530117048, "post_id": 51058723, "comment_id": 89124993, "body": "you are right, thank you. that is working. I am just having one more question: my tester now wants me to proof if a number is bigger than 2^64. As of the fact, that int64_4 just goes to 2^63, how would that work to proof? And if I a was using an unsigned int, how would the overflow work than? This would just start to recount with 0, which is also a correct number for my problem. I am a little bit confused with it."}, {"owner": {"reputation": 1812, "user_id": 3416648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qsynr.png?s=128&g=1", "display_name": "DDS", "link": "https://stackoverflow.com/users/3416648/dds"}, "reply_to_user": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530131584, "post_id": 51058723, "comment_id": 89131690, "body": "int64_t goes from -(2^32) to (2^32) -1, <b>u</b>int64_t goes from 0 to (2^64) -1. if you use unsigned, you have to check the flags for the &#39;carry&#39; bit on the flag register (but, frankly, i did it only once at uni when we was playing with assembly and today I&#39;m not able to replicate that without consistent effort). Another way can be declaring an array of 2 uint64_t, then pushing its content to 0 passing to scanf a pointer to the first of two elements, if compiler is &#39;stupid enough&#39; you&#39;ll find &quot;overflow&quot; bits in adjacent memory cell ( if vec[2] != 0) bingo: your number was over-flowing"}, {"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530250895, "post_id": 51058723, "comment_id": 89177795, "body": "Thanks, I got it now!"}], "tags": [], "owner": {"reputation": 1812, "user_id": 3416648, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qsynr.png?s=128&g=1", "display_name": "DDS", "link": "https://stackoverflow.com/users/3416648/dds"}, "is_accepted": false, "score": 1, "last_activity_date": 1530091087, "last_edit_date": 1530091087, "creation_date": 1530090404, "answer_id": 51058723, "question_id": 51058385, "link": "https://stackoverflow.com/questions/51058385/see-if-number-is-smaller-than-232/51058723#51058723", "title": "See if number is smaller than 2^32", "body": "<p>I suggest to use <code>int64_t</code> to be sure that your number has same size on every architechture. you'll have 2^32 \"positive or null\" numbers and anything that is below zero is either a overflow or a negative (only really negative numbers will became positive again). But you can circumvent this by reading sign as character than number as int64_t so anything that is negative will be an overflow (because you catched the '-' sign before)</p>\n\n<p>This is '<strong>PSEUDO</strong>-code' to illustrate the process:</p>\n\n<pre><code>char sign = '\\0'\nuint64_t = 0\nread (%c,&amp;sign)\nif (c=='-' or c=='+' or isdigit(c))\n\n    if isdigit(c) \n                unget()\n    read(%ull, &amp;number) //read as unsigned as only negative are 2-complement\n    if number &lt; 0\n                // the number is too big\n\n    else\n               //number is &lt; 2^32       \n\n\nelse\n   // number is \"truly\" negative\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1530090661, "creation_date": 1530090661, "answer_id": 51058796, "question_id": 51058385, "link": "https://stackoverflow.com/questions/51058385/see-if-number-is-smaller-than-232/51058796#51058796", "title": "See if number is smaller than 2^32", "body": "<p>You cannot detect overflow of a 32 bit number by using a 32 bit number. If it is unsigned it will always be understood as a number between 0 and 2^32 -1. A overflowing input would still result is a valid out. A signed 32 bit value would be \"valid\" in the range 0 - 2^31-1. Negative values you would be considered invalid. An over/under flowing input between -2^31 and 0 or 2^31 and 2^32-1 would result in an invalid negative number. However, you may find that numbers above 2^32 would appear as valid again. I suggest you use a signed 64 bit number and treat negative or large numbers as invalid input. This gives you a much greater range of input values that would be filtered correctly. If for example, input was comma limited and the commas had been omitted, there could still be issues. I would suggest the input number as a string should not exceed a limiting length. The length filter should allow strings that represent numbers above 2^32 but should filter out numbers that would be greater than 2^63. Somewhere in the middle. To test the size of a type use \"sizeof()\". eg sizeof(long), sizeof(long long) etc. However there are usually explicitly sized integers for your platform. For portability use your own types and using a typedef and keep the platform dependent code localised to an include file dedicated to platform dependency only.  </p>\n"}, {"comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1530106727, "post_id": 51058884, "comment_id": 89118482, "body": "Am I being too paranoid in checking for <code>&quot;O&quot;</code> and <code>&quot;1O&quot;</code> type of inputs, where letters are mixed in with the numbers?  :) (That is basically the difference between our answers.)"}, {"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 1, "creation_date": 1530250981, "post_id": 51058884, "comment_id": 89177828, "body": "Thanks for your explanation."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 6, "last_activity_date": 1530092105, "last_edit_date": 1530092105, "creation_date": 1530090898, "answer_id": 51058884, "question_id": 51058385, "link": "https://stackoverflow.com/questions/51058385/see-if-number-is-smaller-than-232/51058884#51058884", "title": "See if number is smaller than 2^32", "body": "<p>It's a little bit more tricky than it appears at first sight. The reason is that when you allow arbitrarily long input sequences, you might even exceed the maximum data type available, e.g even 64 bit might be too less.</p>\n\n<p>Depending on which method you use for reading in numbers, an overflow in datatype is detected or not. For example, <code>scanf(\"%lu\",...)</code> may lead to undefined behaviour if the processed integral value does not fit into an unsigned long (cf., for example, this online c11 draft concerning <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.2p10\" rel=\"nofollow noreferrer\">scanf</a>):</p>\n\n<blockquote>\n  <p>10 ... If this object does not have an appropriate type, or if the\n  result of the conversion cannot be represented in the object, the\n  behavior is undefined.</p>\n</blockquote>\n\n<p>So don't use <code>scanf</code> for arbitrary input.</p>\n\n<p>Function <code>strtoul</code>, in contrast, has a defined overflow behaviour (again from the online c11 draft, concerning <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.1.4p8\" rel=\"nofollow noreferrer\">strtol</a>):</p>\n\n<blockquote>\n  <p>8) The strtol, strtoll, strtoul, and strtoull functions return the\n  converted value, if any. If no conversion could be performed, zero is\n  returned. If the correct value is outside the range of representable\n  values, LONG_MIN, LONG_MAX, LLONG_MIN, LLONG_MAX, ULONG_MAX, or\n  ULLONG_MAX is returned (according to the return type and sign of the\n  value, if any), and the value of the macro ERANGE is stored in errno.</p>\n</blockquote>\n\n<p>You can use <code>strtol</code> since it will give you a number with at least 32 bits, and it tells you overflows. If <code>long</code> is 64 bits, you can/need to distinguish general overflow or 32 bit overflow. See the following code illustrating this:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid convert(const char* numStr) {\n\n    errno=0;\n    long num = strtol(numStr,NULL,10);\n\n    if (errno == ERANGE){\n        printf(\"numstr %s is out of long's range, which is %ld..%ld\\n\", numStr, LONG_MIN,LONG_MAX);\n    } else if (num &lt; 0) {\n        printf(\"numstr %s is negative.\\n\", numStr);\n    } else if (num &gt; UINT32_MAX) {\n        printf(\"numstr %s is out of 32 bit range, which is 0..%u\\n\", numStr, UINT32_MAX);\n    } else {\n        printf(\"OK; numstr %s is in 32 bit range, which is 0..%u\\n\", numStr, UINT32_MAX);\n    }\n\n}\n\n\nint main() {\n\n    convert(\"123456789012345678901234567890\");\n    convert(\"-123\");\n    convert(\"1234567890123567\");\n    convert(\"32452345\");\n    convert(\"0000000000000000000000032452345\");\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>numstr 123456789012345678901234567890 is out of long's range, which is -9223372036854775808..9223372036854775807\nnumstr -123 is negative.\nnumstr 1234567890123567 is out of 32 bit range, which is 0..4294967295\nOK; numstr 32452345 is in 32 bit range, which is 0..4294967295\nOK; numstr 0000000000000000000000032452345 is in 32 bit range, which is 0..4294967295\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "edited": false, "score": 0, "creation_date": 1530250946, "post_id": 51063742, "comment_id": 89177810, "body": "Thank you for your answer!"}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 2, "last_activity_date": 1530106623, "last_edit_date": 1530106623, "creation_date": 1530105200, "answer_id": 51063742, "question_id": 51058385, "link": "https://stackoverflow.com/questions/51058385/see-if-number-is-smaller-than-232/51063742#51063742", "title": "See if number is smaller than 2^32", "body": "<p>You can use the standard <a href=\"http://man7.org/linux/man-pages/man3/strtoul.3.html\" rel=\"nofollow noreferrer\"><code>strtoul()</code></a> function for the [0, 2<sup>32</sup>-1] range (inclusive).</p>\n\n<p>I recommend checking the pointer <code>strtoul()</code> assigns (<code>ends</code>, below) to detect cases like <code>\"O\"</code> (letter O, not zero) and <code>\"1O\"</code> (one and letter O, not ten); i.e., that the input really did have a decimal number, and ended with a suitable separator character or end-of-string mark.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;errno.h&gt;\n\nconst char *next_u32(const char *from, uint32_t *to)\n{\n    const char    *ends = from;\n    unsigned long  value;\n\n    if (!from) {\n        errno = EINVAL; /* NULL from pointer */\n        return NULL;\n    }\n\n    /* Parse the number to 'value' */\n    errno = 0;\n    value = strtoul(from, (char **)ends, 10); /* 10 = decimal input */\n    if (errno)\n        return NULL;\n    if (ends == from) {\n        errno = EDOM; /* Not a valid number */\n        return NULL;\n    }\n\n    /* Is it too large? */\n    if (value &gt; 4294967295uL) {\n        errno = ERANGE; /* Out of valid range */\n        return NULL;\n    }\n\n    /* Verify the separator is a space or end-of-string. */\n    if (*ends != '\\0' &amp;&amp; *ends != '\\t' &amp;&amp; *ends != '\\n' &amp;&amp;\n        *ends != '\\v' &amp;&amp; *ends != '\\f' &amp;&amp; *ends != '\\r' &amp;&amp;\n        *ends != ' ') {\n        errno = EDOM; /* The number was immediately followed by garbage. */\n        return NULL;\n    }\n\n    /* Accepted. Save value, and return the pointer to the\n       first unparsed character. */\n    if (to)\n        *to = (uint32_t)value;\n\n    return ends;\n}\n</code></pre>\n\n<p>To parse all 32-bit unsigned integers on a line, you can use a loop:</p>\n\n<pre><code>const char *line;  /* Contains the line with decimal integers to parse */\nuint32_t    value;\n\nwhile ((line = next_u32(line, &amp;value))) {\n    /* Use 'value' */\n}\n</code></pre>\n\n<hr>\n\n<p>Standard libraries' <code>strtoul()</code> is not the fastest option, if you are parsing a huge amount of unsigned integers in decimal.</p>\n\n<p>Also, sometimes it is easier to just memory-map the input file, and let the OS handle the paging. In that case, however, there is no end-of-string NUL byte (<code>\\0</code>) at the end, so a different interface needs to be used.</p>\n\n<p>For those cases, you can use the following function.  It takes and updates the pointer to current position in the contents, but never exceeds the end pointer.  It returns zero if the next item in the input is a decimal 32-bit unsigned integer, a nonzero error code otherwise.</p>\n\n<pre><code>#define  NEXT_OK    0\n#define  NEXT_END   1\n#define  NEXT_BAD  -1\n#define  NEXT_OVER -2\n\nstatic int next_u32(const char **fromptr, const char *end,\n                    uint32_t *to)\n{\n    const char *from;\n    uint32_t    val = 0;\n\n    if (!fromptr)\n        return NEXT_END;\n\n    from = *fromptr;\n\n    /* Skip whitespace characters, including NUL bytes. */\n    while (from &lt; end &amp;&amp; (*from == '\\0' || *from == '\\t' ||\n                          *from == '\\n' || *from == '\\v' ||\n                          *from == '\\f' || *from == '\\r' ||\n                          *from == ' '))\n        from++;\n\n    /* At end? */\n    if (from &gt;= end)\n        return NEXT_END;\n\n    /* Skip a leading + sign. */\n    if (*from == '+' &amp;&amp; end - from &gt; 1)\n        from++;\n\n    /* Must be a decimal digit now. */\n    if (!(*from &gt;= '0' &amp;&amp; *from &lt;= '9'))\n        return NEXT_BAD;\n\n    /* Skip leading zeroes. */\n    while (from &lt; end &amp;&amp; *from == '0')\n        from++;\n\n    /* Parse the rest of the decimal number, if any. */\n    while (from &lt; end &amp;&amp; *from &gt;= '0' &amp;&amp; *from &lt;= '9') {\n        if ((value &gt; 429496729) || (value == 429496729 &amp;&amp; *from &gt;= '6'))\n            return NEXT_OVER;\n        value = (10 * value) + (*(from++) - '0');\n    }\n\n    /* If not at end, check the character. */\n    if (from &lt; end &amp;&amp; *from != '\\0' &amp;&amp; *from != '\\t' &amp;&amp;\n                      *from != '\\n' &amp;&amp; *from != '\\v' &amp;&amp;\n                      *from != '\\f' &amp;&amp; *from != '\\r' &amp;&amp;\n                      *from != ' ')\n        return NEXT_BAD;\n\n    /* Parsed correctly. */\n    *fromptr = from;\n    if (*to)\n        *to = value;\n\n    return NEXT_OK;\n}\n</code></pre>\n"}], "owner": {"reputation": 475, "user_id": 6346482, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-pejxz6NLUb0/AAAAAAAAAAI/AAAAAAAAAHI/N2mNSw_SLzs/photo.jpg?sz=128", "display_name": "DORpapst", "link": "https://stackoverflow.com/users/6346482/dorpapst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 1, "accepted_answer_id": 51058884, "answer_count": 5, "score": 2, "last_activity_date": 1530106623, "creation_date": 1530089252, "question_id": 51058385, "link": "https://stackoverflow.com/questions/51058385/see-if-number-is-smaller-than-232", "title": "See if number is smaller than 2^32", "body": "<p>I am reading a huge chunk of numbers via the stdin and I need to find it, if numbers are in the range of [0,2^32] (probably 2^32-1, I am not sure with that), so it\u2019s also not accepting negative numbers. There are also situations where there is a number beginning with hundreds of nulls, which I need to ignore.\nI am sure if I am doing something wrong with the data type, at the moment I am using \u201elong\u201c as data type, because I thought this is always with a maximum of 2^32. so if there is an overflow, I am getting a negative number and I can prove if the long is smaller than 0.\nBut now I realised the size of long is also depending on the system of the computer.</p>\n\n<p>Is there anyone who can tell me which data type and operation I should choose to proof this?\nThe beginning datatype is just a char pointer.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530104715, "post_id": 51061674, "comment_id": 89116940, "body": "what is the difference between promoted and casted? each system implements its own &lt;stdarg.h&gt; that fits its calling conventions?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530113404, "post_id": 51061674, "comment_id": 89122957, "body": "casting refers to the syntax one can use to force explicit conversion of a value to another type, such as <code>(double)1</code>. The C Standard defines a set of rules for small integral types to be promoted to <code>int</code> or <code>unsigned int</code> in expressions, and another set of rules for values to be converted to a common type in binary expressions such as <code>1.1 + 1</code>. These promotions and conversions are implicit. Some coding style guides insist on avoiding such implicit conversion and require explicit casts everywhere at the cost of decreased readability and potential portability issues."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 4, "last_activity_date": 1530102002, "last_edit_date": 1530102002, "creation_date": 1530098959, "answer_id": 51061674, "question_id": 51058371, "link": "https://stackoverflow.com/questions/51058371/printf-with-unmatched-format-and-parameters/51061674#51061674", "title": "printf with unmatched format and parameters", "body": "<p>Your logic would have explained the behavior of early C compilers in the 70s and 80s. Newer ABIs use a variety of methods to pass arguments to functions, including variable argument functions. You have to study your system ABI to understand how parameters are passed in your case, inferring from constructions that have explicit undefined behavior does not help.</p>\n\n<p>By the way, types shorter than <code>int</code> are not cast or casted, they are <strong>promoted</strong> to <code>int</code>. Note that <code>float</code> values are converted to <code>double</code> when passed to variable argument functions. Non integer types and integer types larger than <code>int</code> are passed according to the ABI, which means they may be passed in regular registers or even special registers, not necessarily <em>on the stack</em>.</p>\n\n<p><code>printf</code> relies on macros defined in <code>&lt;stdarg.h&gt;</code> to hide these implementation details, and thus can be written in a portable manner for architectures with different ABIs and different standard type sizes.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530104618, "post_id": 51062503, "comment_id": 89116869, "body": "so the &quot;problem&quot; is that the compiler may decide to pass the parameters in a different way than the stack, and to fully understand what will happen on extreme cases i have to understand my system ABI which specifies the function calling conventions? if C would use a single, byte-addressed stack for everything, and ints were 4 bytes and long long ints were 8 bytes, than my assumption would be correct?  - a lot of ifs i know"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530105361, "post_id": 51062503, "comment_id": 89117426, "body": "@\u05dc\u05d9\u05d0\u05d1\u05dc\u05d5\u05d9 If your example had been <code>long long int a = 0x0000004400000043LL; </code> I might agree with you.  (I might.  But yes, that is a lot of ifs!)"}, {"owner": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530105951, "post_id": 51062503, "comment_id": 89117882, "body": "why would it need to be like that? char a = 0x00000044 is exactly like char b = 0x44444444."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530106195, "post_id": 51062503, "comment_id": 89118086, "body": "@\u05dc\u05d9\u05d0\u05d1\u05dc\u05d5\u05d9 Why do you think those are exactly alike?  Who says that when you print an <code>int</code> as a <code>char</code>, you take the low 8 bits and throw away the rest?  There are ways of manipulating greater-than-8-bit characters, you know."}, {"owner": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530106430, "post_id": 51062503, "comment_id": 89118250, "body": "but we are talking about ascii chars whose size is 1 byte, also little endian machine that the least significant byte will be stored first, then the casting to a char will take the first byte, in your case and also in mine 0x44 and 0x43, please explain your self, i might talk nonsense"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530106818, "post_id": 51062503, "comment_id": 89118544, "body": "@\u05dc\u05d9\u05d0\u05d1\u05dc\u05d5\u05d9 But I am <i>not</i> talking about ASCII characters.  I am talking about C characters, which might be more than 8 bits, and might use character sets other than ASCII -- like maybe Unicode.  I can imagine <code>printf(&quot;%c&quot;, 0x01B5)</code> printing \u01b5.  (And then there&#39;s the matter of <code>char c = &#39;ab&#39;;</code>, but that&#39;s a mindbender.)"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530106840, "post_id": 51062503, "comment_id": 89118568, "body": "@\u05dc\u05d9\u05d0\u05d1\u05dc\u05d5\u05d9 : are there systems where it works the way you describe ? Sure. Should you rely on that ? No. There are no guarantees it&#39;ll still work that way tomorrow, or under otherwise slightly different circumstances."}, {"owner": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530107212, "post_id": 51062503, "comment_id": 89118829, "body": "@SteveSummit if we are talking about characters whose size is bigger than 1 byte (unicode for example) then i agree, 0x44444444 doesn&#39;t equal 0x00000044. what do you mean here &quot;char c = &#39;ab&#39;;&quot; btw"}, {"owner": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1530107447, "post_id": 51062503, "comment_id": 89118991, "body": "@SanderDeDycker after the comments here i understood that every system is different, and every compiler may implement things the way he wants - so i cant rely on this of course. i just wanted to know that if all the environment would be set as i took for granted - int is 4 bytes, long long ints are 8 bytes and the way the compiler will pass the parameters is the stack only - will my assumption be correct (also ascii characters apparently)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530107460, "post_id": 51062503, "comment_id": 89119000, "body": "@\u05dc\u05d9\u05d0\u05d1\u05dc\u05d5\u05d9 If it will put your mind at ease I will say this: &quot;Yes, you are right.  It will work exactly the way you suggest, assuming you&#39;re using a machine like the one you&#39;re thinking of, that works exactly the way you suggest.&quot;  (But as you&#39;ve now discovered, there are real machines which work rather differently.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1530107652, "post_id": 51062503, "comment_id": 89119139, "body": "As for <code>char c = &#39;ab&#39;</code>, see <a href=\"https://stackoverflow.com/questions/11737320/how-to-determine-the-result-of-assigning-multi-character-char-constant-to-a-char\">this question</a>."}, {"owner": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "edited": false, "score": 0, "creation_date": 1530107744, "post_id": 51062503, "comment_id": 89119211, "body": "@SteveSummit i could write complete nonsense and your answer will still be valid lol.. thanks for your answer btw"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1530103313, "last_edit_date": 1530103313, "creation_date": 1530101500, "answer_id": 51062503, "question_id": 51058371, "link": "https://stackoverflow.com/questions/51058371/printf-with-unmatched-format-and-parameters/51062503#51062503", "title": "printf with unmatched format and parameters", "body": "<p>There is a fundamental misunderstanding here, as revealed by the comment</p>\n\n<blockquote>\n  <p>according to the format string here the compiler should know that 4 bytes were pushed, convert 4 bytes to char and print it...</p>\n</blockquote>\n\n<p>But the problem is that <em>there is no rule saying that C uses a single, byte-addressed stack for everything</em>.</p>\n\n<p>Different processor architectures can -- and do -- use a variety of techniques for passing arguments to functions.  Some arguments may be passed on a conventional stack, but others may be passed in registers, or via other techniques.  Arguments of different types may be passed in different types of registers (32 vs. 64 bit, integer vs. floating point, etc.).</p>\n\n<p>Obviously a C compiler has to know how to properly pass arguments for the platform it's compiling for.  Obviously a variadic function like <code>printf</code> has to be carefully written to fetch its variable arguments correctly, based on the platform it's being used on.  But a format specifier like <code>%d</code> does not, repeat not, simply mean \"pop 4 bytes from the stack and treat them as an <code>int</code>\".  Similarly, <code>%c</code> does <em>not</em> mean \"pop 4 bytes and print the resulting integer as a character\".  When <code>printf</code> encounters the format specifier <code>%c</code> or <code>%d</code>, it needs to arrange to <em>fetch the next argument of type <code>int</code>, whatever it takes to do that</em>.  And if, in fact, the next argument actually passed by the calling code was <em>not</em> of type <code>int</code> -- for example if, as here, the next argument was actually of type <code>long long int</code> -- there's just no way of knowing in general what might happen.</p>\n\n<p>Specifically, when <code>printf</code> has just seen a <code>%d</code> or <code>%c</code> specifier, what it does internally is the equivalent of calling</p>\n\n<pre><code>va_arg(argp, int)\n</code></pre>\n\n<p>And this literally says, \"fetch the next argument of type <code>int</code>\".  And then it's actually up to the author of <code>va_arg</code> (and the rest of the functions and macros declared in <code>&lt;stdarg.h&gt;</code>) to know exactly what it takes to fetch the next argument of type <code>int</code> on this particular platform.</p>\n\n<p>Clearly it is possible to know what will actually happen on a particular platform.  (Obviously the author of <code>va_arg</code> had to know!)  But you won't figure it out based on the C language itself, or by making guesses about what you think ought to happen.  You're going to have to read about the ABI -- the Application Binary Interface -- that specifies the details of function calling conventions on your platform.  These details can be hard to find, because very few programmers actually care about them.</p>\n\n<p>I said that \"<code>printf</code> has to be carefully written to fetch its variable arguments correctly\", but actually I misspoke slightly, because as I said later, \"it's actually up to the author of <code>va_arg</code> to know exactly what it takes\".  You're right, it is possible to write a reasonably portable implementation of <code>printf</code>.  There's an example in the <a href=\"http://c-faq.com/varargs/varargs1.html\" rel=\"nofollow noreferrer\">C FAQ list</a>.</p>\n\n<p>If you want to know more about function calling conventions, another interesting topic to read about is <em>Foreign Function Interfaces</em> or FFI.  (For example, there's another library <code>libffi</code> that helps you to -- portably! -- perform some more exotic tasks involved in manipulating function arguments.)</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1530113925, "creation_date": 1530113925, "answer_id": 51066695, "question_id": 51058371, "link": "https://stackoverflow.com/questions/51058371/printf-with-unmatched-format-and-parameters/51066695#51066695", "title": "printf with unmatched format and parameters", "body": "<p><a href=\"https://www.youtube.com/watch?v=dCud8H7z7vU\" rel=\"nofollow noreferrer\">There are simply too many <strike>notes</strike> types</a></p>\n\n<p>C specifies 11 integer types <code>signed char</code>, <code>char</code>, \u2026 <code>unsigned long long</code> as distinct types.  Aside from <code>char</code> must match <code>signed char</code> or <code>unsigned char</code>, these could be implemented as 10 different encodings or just 2 (Use 64-bit signed or unsigned for all).\nThe standard library has a <code>printf()</code> specifiers for each of those 11.  (Due to sub-<code>int</code> promotions, there are additional concerns).</p>\n\n<p>So far no real issues.</p>\n\n<p>Yet C has lots of <em>other types</em> with <code>printf()</code> specifiers:</p>\n\n<pre><code>ju           uintmax_t\njd           intmax_t\nzu           size_t\ntd           ptrdiff_t\nPRIdLEASTN   int_leastN_t  where N is 8, 16, 32, 64\nPRIuLEASTN   uint_leastN_t\nPRIdN        intN_\nPRIuN        uintN_t\nMany others\n</code></pre>\n\n<p>In <em>general</em><sup>1</sup> these additional types, could be <strong>distinct</strong> from <strong>or compatible</strong> with the 11 above.</p>\n\n<p>Any time code uses these <em>other types</em> in a <code>printf()</code>, the distinct/compatible issue will arise and prevent many compilers from detecting/providing the best suggested matching print specifier.</p>\n\n<p><sup>1</sup> Various conditions/limitations exist.</p>\n"}], "owner": {"reputation": 85, "user_id": 8697229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f02d3516369e87b08baba34b5124431?s=128&d=identicon&r=PG&f=1", "display_name": "\u05dc\u05d9\u05d0\u05d1 \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/8697229/%d7%9c%d7%99%d7%90%d7%91-%d7%9c%d7%95%d7%99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1530113925, "creation_date": 1530089184, "last_edit_date": 1530090093, "question_id": 51058371, "link": "https://stackoverflow.com/questions/51058371/printf-with-unmatched-format-and-parameters", "title": "printf with unmatched format and parameters", "body": "<p>i'm trying to understand the printf function.</p>\n\n<p>I know after i read about this function that the c compiler automatically casts all the parameters which are smaller than int like chars and shorts to int.\nI also know that long long int (8 bytes) is not casted and pushed to the stack as it is.</p>\n\n<p>so i wrote this simple c code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    long long int a = 0x4444444443434343LL; \n    // note that 0x44444444 is 4 times 0x44 which is D in ascii.\n    // and 0x43434343 is 4 times 0x43 which is C in ascii.\n\n    printf(\"%c %c\\n\", a);\n\n    return 0;\n}\n</code></pre>\n\n<p>that creates the a variable whose size is 8 bytes and pushes it to the stack.\ni also know that the printf loops through the format string and when it sees %c it will increment the pointer by 4 (because it knows that a char was converted to int - example below)</p>\n\n<p>something like: \nchar c = (char) va_arg(list, int) --> </p>\n\n<p>(*(int *)((pointer += sizeof(int)) - sizeof(int)))</p>\n\n<p>as you can see it gets the 4 bytes when the pointer points, and increment it by 4</p>\n\n<p><strong>My question is:</strong></p>\n\n<p>in my logic, it should print on little endian machines C D\nthis is not what happens and i ask why? im sure some of you know more than me about the implementation and thats why i ask his question.</p>\n\n<p>EDIT: the actual result is C with some garbage character follows it.</p>\n\n<p>i know some might say that its undefined behavior - it really depends on the implementation and i just want to know the logic of the implementation..</p>\n"}, {"tags": ["c", "regex", "stm32"], "comments": [{"owner": {"reputation": 1, "user_id": 9998705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9a0a934f307c71423f85746ed47517?s=128&d=identicon&r=PG&f=1", "display_name": "Lin", "link": "https://stackoverflow.com/users/9998705/lin"}, "edited": false, "score": 0, "creation_date": 1530150039, "post_id": 51058330, "comment_id": 89136616, "body": "It seems that there is no lib file. So even though I include regex.h and try to use regcomp(), but there is no lib, the reference of regcomp is still undefined."}, {"owner": {"reputation": 1, "user_id": 9998705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9a0a934f307c71423f85746ed47517?s=128&d=identicon&r=PG&f=1", "display_name": "Lin", "link": "https://stackoverflow.com/users/9998705/lin"}, "edited": false, "score": 0, "creation_date": 1530171795, "post_id": 51058330, "comment_id": 89143447, "body": "I find that regcomp() and so on is the function in libc.a, which is automatically linked while compiling...So why it shows undefined?"}, {"owner": {"reputation": 698, "user_id": 1981374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afd547bb1f448490439e0093eba3a70?s=128&d=identicon&r=PG", "display_name": "pan-mroku", "link": "https://stackoverflow.com/users/1981374/pan-mroku"}, "edited": false, "score": 0, "creation_date": 1530789016, "post_id": 51058330, "comment_id": 89361135, "body": "In regex.h there is only declaration of regcomp. You are probably missing regex.c."}], "owner": {"reputation": 1, "user_id": 9998705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9a0a934f307c71423f85746ed47517?s=128&d=identicon&r=PG&f=1", "display_name": "Lin", "link": "https://stackoverflow.com/users/9998705/lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 860, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1530089064, "creation_date": 1530089064, "question_id": 51058330, "link": "https://stackoverflow.com/questions/51058330/undefined-reference-to-regcomp", "title": "undefined reference to regcomp", "body": "<p>I'm developing stm32 with SW4STM32.\nWhen I tried to use arm-none-eabi\\include\\regex.h, I included  and compiled.\nAnd then I got a strange things.\nregex.h defined various canstant, for example</p>\n\n<pre><code>#define REG_NOMATCH  1\n#define REG_BADPAT   2\n#define REG_ECOLLATE 3\n#define REG_ECTYPE   4\n</code></pre>\n\n<p>and voarious struct,</p>\n\n<pre><code>typedef struct {\n    int re_magic;\n    size_t re_nsub;     /* number of parenthesized subexpressions */\n    __const char *re_endp;  /* end pointer for REG_PEND */\n    struct re_guts *re_g;   /* none of your business :-) */\n} regex_t;\n</code></pre>\n\n<p>and some function, including</p>\n\n<pre><code>int regcomp(regex_t *__restrict, const char *__restrict, int);\nsize_t  regerror(int, const regex_t *__restrict, char *__restrict, size_t);\nint regexec(const regex_t *__restrict, const char *__restrict,\n            size_t, regmatch_t [__restrict], int);\nvoid    regfree(regex_t *);\n</code></pre>\n\n<p>The following is my code </p>\n\n<pre><code>u8 Is_REG_Match(char* reg,char* s){\n\nu8 z=0;\nu8 z1=0;\nregex_t reg_temp;\n\nz=regcomp(&amp;reg_temp,reg,0);\nregcomp(&amp;reg_temp, reg , 0);\nif(z==0){\nz1=regexec(&amp;reg_temp,s,0,NULL,0);\nregfree(&amp;reg_temp);\nreturn z1;\n}\nelse\nreturn 200;\n</code></pre>\n\n<p>}</p>\n\n<p>and when I compiled, reg_temp is good, but function regcomp, regexec and regfree was error--undefined reference to 'regcomp',etc.</p>\n\n<p>The regex.h is definitely compiled, as I try to delete the define of struct regex_t in regex.h and </p>\n\n<pre><code>regex_t reg_temp;\n</code></pre>\n\n<p>become error.</p>\n\n<p>It seems like the regex.h is compiled not completely, just missing the function part.\nHow can I fix it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530088783, "post_id": 51058108, "comment_id": 89106653, "body": "From where did you learn about <code>new</code> to allocate memory?"}], "answers": [{"tags": [], "owner": {"reputation": 2605, "user_id": 4846598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56c681dc497676a33de782f84bc7a87f?s=128&d=identicon&r=PG&f=1", "display_name": "Hearner", "link": "https://stackoverflow.com/users/4846598/hearner"}, "is_accepted": false, "score": 5, "last_activity_date": 1530088467, "creation_date": 1530088467, "answer_id": 51058154, "question_id": 51058108, "link": "https://stackoverflow.com/questions/51058108/new-undeclared-first-use-in-this-function/51058154#51058154", "title": "\u2018new\u2019 undeclared (first use in this function)", "body": "<p>C and C++ are not the same languages. There is no <code>new</code> keyword in c because <a href=\"https://stackoverflow.com/questions/3241932/is-the-c-programming-language-object-oriented\">it's not an object oriented language</a>.</p>\n\n<p><code>int *path = new int [V];</code> doesn't exist in c.</p>\n\n<p>You can do 2 things if you want to allocate an array of ints of size V</p>\n\n<pre><code>int *path = malloc(V*sizeof(int));\n</code></pre>\n\n<p>or </p>\n\n<pre><code>int path[V];\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9985683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed598008ed474a817a5ac617026d7b5f?s=128&d=identicon&r=PG&f=1", "display_name": "nana.kl", "link": "https://stackoverflow.com/users/9985683/nana-kl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8643, "favorite_count": 0, "closed_date": 1530088985, "answer_count": 1, "score": 0, "last_activity_date": 1530088485, "creation_date": 1530088276, "last_edit_date": 1530088485, "question_id": 51058108, "link": "https://stackoverflow.com/questions/51058108/new-undeclared-first-use-in-this-function", "closed_reason": "Duplicate", "title": "\u2018new\u2019 undeclared (first use in this function)", "body": "<p>This code is for Hamiltonian Cycle\nI can't solve this error:</p>\n\n<pre><code>    In function \u2018hamCycle\u2019:\n   error: \u2018new\u2019 undeclared (first use in this function)\n         int *path = new int [V];\n                     ^\n note: each undeclared identifier is reported only once for each function it appears in\n error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018int\u2019\n         int *path = new int [V];\n                         ^\n</code></pre>\n\n<p>the Hamiltonian Cycle code is:</p>\n\n<pre><code>/*\n * C Program to Find Hamiltonian Cycle\n */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#define V 5\n\nvoid printSolution(int path[]);\n\n/* \n * check if the vertex v can be added at index 'pos' in the Hamiltonian Cycle \n */\nbool isSafe(int v, bool graph[V][V], int path[], int pos)\n{\n    if (graph [path[pos-1]][v] == 0)\n        return false;\n   for (int i = 0; i &lt; pos; i++)\n        if (path[i] == v)\n            return false;\n    return true;\n}\n\n/* solve hamiltonian cycle problem */\nbool hamCycleUtil(bool graph[V][V], int path[], int pos)\n{\n    if (pos == V)\n    {\n        if (graph[ path[pos-1] ][ path[0] ] == 1)\n            return true;\n        else\n            return false;\n    }\n\n    for (int v = 1; v &lt; V; v++)\n    {\n        if (isSafe(v, graph, path, pos))\n        {\n            path[pos] = v;\n            if (hamCycleUtil (graph, path, pos+1) == true)\n                return true;\n            path[pos] = -1;\n        }\n    }\n    return false;\n}\n\n/* solves the Hamiltonian Cycle problem using Backtracking.*/\nbool hamCycle(bool graph[V][V])\n{\n    int *path = new int [V];\n    for (int i = 0; i &lt; V; i++)\n        path[i] = -1;\n    path[0] = 0;\n    if (hamCycleUtil(graph, path, 1) == false)\n    {\n      printf(\"\\nSolution does not exist\");\n        return false;\n    }\n    printSolution(path);\n    return true;\n}\n\n/* Main */\nvoid printSolution(int path[])\n{\n    printf(\"Solution Exists:\");\n    printf(\" Following is one Hamiltonian Cycle \\n\");\n    for (int i = 0; i &lt; V; i++)\n        printf(\" %d\",path[i]);\n    printf(\" %d\",path[0]);\n}\n\nint main()\n{\n   /* Let us create the following graph\n      (0)--(1)--(2)\n       |   / \\   |\n       |  /   \\  |\n       | /     \\ |\n      (3)-------(4)    */\n   bool graph1[V][V] = {{0, 1, 0, 1, 0},\n                      {1, 0, 1, 1, 1},\n                      {0, 1, 0, 0, 1},\n                      {1, 1, 0, 0, 1},\n                      {0, 1, 1, 1, 0},\n                     };\n   hamCycle(graph1);\n\n   /* Let us create the following graph\n      (0)--(1)--(2)\n       |   / \\   |\n       |  /   \\  |\n       | /     \\ |\n      (3)       (4)    */\n    bool graph2[V][V] = {{0, 1, 0, 1, 0},\n                      {1, 0, 1, 1, 1},\n                      {0, 1, 0, 0, 1},\n                      {1, 1, 0, 0, 0},\n                      {0, 1, 1, 0, 0},\n                     };\n    hamCycle(graph2);\n    return 0;\n}\n</code></pre>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["c++", "c", "winapi"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530088218, "post_id": 51058037, "comment_id": 89106325, "body": "Pas the <code>HANDLE</code> for your own process?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 4, "creation_date": 1530088362, "post_id": 51058037, "comment_id": 89106427, "body": "<code>GetCurrentProcess()</code>.    Note:  this is not C or C++.   It is the windows API."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1530090710, "post_id": 51058037, "comment_id": 89107774, "body": "As Peter says, hProcess is not a process ID, it&#39;s a handle to your process, which <code>GetCurrentProcess()</code> will provide."}], "owner": {"reputation": 141, "user_id": 2173645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/651dde32d034f6ae1e33f6d80007e164?s=128&d=identicon&r=PG", "display_name": "user2173645", "link": "https://stackoverflow.com/users/2173645/user2173645"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530116536, "creation_date": 1530088024, "last_edit_date": 1530089159, "question_id": 51058037, "link": "https://stackoverflow.com/questions/51058037/getting-moduleinfo-internally", "title": "Getting MODULEINFO internally", "body": "<p>How to get MODULEINFO of module that's inside my own exe?</p>\n\n<pre><code>  BOOL GetModuleInformation(\n  HANDLE       hProcess,\n  HMODULE      hModule,\n  LPMODULEINFO lpmodinfo,\n  DWORD        cb\n);\n</code></pre>\n\n<p>needs PID so looks like it works only external way</p>\n"}, {"tags": ["c", "function", "variables", "for-loop", "runtime-error"], "comments": [{"owner": {"reputation": 197, "user_id": 9502074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20dac1f1b7756c2ae77f563f3724270?s=128&d=identicon&r=PG", "display_name": "Korrat", "link": "https://stackoverflow.com/users/9502074/korrat"}, "edited": false, "score": 1, "creation_date": 1530087793, "post_id": 51057888, "comment_id": 89106109, "body": "Where are you declaring your variables? In the main-function? And what is the error you are getting?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1530093254, "post_id": 51057888, "comment_id": 89109409, "body": "Yes, it is.  If whatver code was in the loop modified data and so prevented a different error from occurring, then removing the loop body may stop one error and surface another:("}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1530110620, "post_id": 51057888, "comment_id": 89121203, "body": "posting code fragments, such as this question is doing, will quickly result in the question being &#39;closed&#39; as &#39;off topic&#39;.  Your question states the code cleanly compiles. so post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can help you."}], "owner": {"reputation": 1, "user_id": 9976289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77114bd22e1faa50013f42d041052f57?s=128&d=identicon&r=PG&f=1", "display_name": "M.Li", "link": "https://stackoverflow.com/users/9976289/m-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530087518, "creation_date": 1530087518, "question_id": 51057888, "link": "https://stackoverflow.com/questions/51057888/is-it-possible-for-a-for-loop-to-crash-a-code-despite-it-having-no-contents", "title": "Is it possible for a for loop to crash a code despite it having no contents", "body": "<p>In my code I had an error that I was able to pinpoint down to a certain for loop, but now I'm uncertain as to how exactly the problem is being caused</p>\n\n<pre><code>int linregm(int n, float x[], float y[]){\nfloat denom=1;\nsumx = 0.0;                  \nsumx2 = 0.0;                    \nsumxy = 0.0;                     \nsumy = 0.0;                      \n    /*\nfor (i=0;i&lt;n;i++)\n    { \n    //sumx  = sumx + x[i];       \n    //sumx2 = sumx2 + x[i]*x[i];  \n    //sumxy = sumxy + x[i] * y[i];\n    //sumy  = sumy + y[i];         \n} \n    */\ndenom = (n * sumx2 - sqr(sumx));\nif (denom == 0) {\n    // singular matrix. can't solve the problem.\n    pass=1;\n            return 0;\n}\n\nm = (n * sumxy  -  sumx * sumy) / denom;\n\npass=0; \n    return m;\n}\n</code></pre>\n\n<p>This is the function that has a problem at the spot where there is a for-loop, even if I just run the loop itself without the internal contents it still gives me an error.</p>\n\n<pre><code>m = linregm(sizeof(x)/sizeof(x[0]), x, y);\n\n__IO float Send_float_Data[256];\nfloat x[8] = {1,2,3,4,5,6,7,8};\nfloat y[8];\nfloat m,b;\nunsigned int pass;\nfloat   sumx,sumx2,sumxy,sumy=0.0; \n\nunsigned int i=0,j;\n</code></pre>\n\n<p>And these are the variable declarations.</p>\n\n<p>I'm new to C so I don't know if there are special interactions between variables or something that could have screwed up my code, there was no compiler warning so syntax shouldn't be a problem.Do you guys have any idea on what exactly I'm doing wrong? Thanks.</p>\n"}, {"tags": ["c", "pointers", "types", "compiler-warnings", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1530087689, "post_id": 51057861, "comment_id": 89106028, "body": "Seems like a QoI issue. A compiler should be able to detect it&#39;s two pointers being subtracted, and print <code>ptrdiff_t</code> instead of what it aliases."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1530087978, "post_id": 51057861, "comment_id": 89106203, "body": "Both g++ (if it makes sense to compile with it too) and gcc provided the same warning @StoryTeller, if it helps."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1530088247, "post_id": 51057861, "comment_id": 89106343, "body": "Live and learn. I have yet to see a compiler warning that mentions <code>%ju</code> or <code>%zu</code> or <code>%tu</code>. The warnings always mention the basic types that the implementation uses. So you just have to know..."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 2, "creation_date": 1530088588, "post_id": 51057861, "comment_id": 89106555, "body": "<a href=\"https://wandbox.org/permlink/u8QLyLtEXHyhayU1\" rel=\"nofollow noreferrer\">Clang</a> suggests <code>%ld</code> too..."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1530089294, "post_id": 51057861, "comment_id": 89106908, "body": "user3386109 experience sure. Wisdom and experience walk together..Good to know @Bob__ , thank you!"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1530092725, "post_id": 51057861, "comment_id": 89109068, "body": "@StoryTeller <i>A compiler should be able to detect it&#39;s two pointers being subtracted</i>  It&#39;s probably not  that easy - by the time the compiler reaches the point it&#39;s actually generating code, the parser has replaced <code>ptrdiff_t</code> with the underlying base type.  Given how <code>ptrdiff_t</code> was bolted onto C long after initial language development, any long-extant compiler would probably need a rewrite or some hideous hackery to detect that."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1530154250, "post_id": 51057861, "comment_id": 89137483, "body": "@Bob__ not quite so. It just happens to be <code>%ld</code> because <code>ptrdiff_t</code> was <code>typedef</code>ed to <code>long</code> in 64-bit mode. <a href=\"https://godbolt.org/g/dcBv2r\" rel=\"nofollow noreferrer\">Compile with <code>-m32</code> or <code>-mx32</code> to see the difference</a>. Wandbox somehow always convert <code>-m32</code> to <code>&quot;-m32&quot;</code> or probably don&#39;t support those options so I have to use godbolt for that"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530175002, "post_id": 51057861, "comment_id": 89145214, "body": "@phuclv Yes, but OP&#39;s concern still holds, the compiler is accepting <code>%d</code> instead of  <code>%td</code>."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1530175528, "post_id": 51057861, "comment_id": 89145512, "body": "@Bob__ no, the format string is not handled in anyway by the compiler. It&#39;s passed directly to the <code>printf</code> although a smart compiler may understand some parts of the format string to give useful warnings. The compiler cannot flag those as errors, but it doesn&#39;t mean that the behavior is defined"}], "answers": [{"tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": true, "score": 2, "last_activity_date": 1530088995, "last_edit_date": 1530088995, "creation_date": 1530088852, "answer_id": 51058254, "question_id": 51057861, "link": "https://stackoverflow.com/questions/51057861/how-to-wisely-interpret-this-compiler-warning/51058254#51058254", "title": "How to wisely interpret this compiler warning?", "body": "<p>I don't think you can tell. It depends on the intent/caution/smartness of the compiler writer.</p>\n\n<p>Maybe he decided he would always support <code>%ld</code> where <code>%td</code> is expected, or maybe he was just unaware/unable/unwilling to give a more detailed/proper message. In case of doubt, your last resort is the standard.</p>\n\n<p>This doesn't seem to be a portable construct and for \"orthodoxy\" you should support both format specifiers.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1530093171, "creation_date": 1530093171, "answer_id": 51059697, "question_id": 51057861, "link": "https://stackoverflow.com/questions/51057861/how-to-wisely-interpret-this-compiler-warning/51059697#51059697", "title": "How to wisely interpret this compiler warning?", "body": "<p>The key here is: don't do any form of arithmetic inside <code>printf</code> in the first place. Separate algorithm from GUI. </p>\n\n<p>Code such as <code>printf(\"%d\", p - q)</code> is very dangerous, not just because you might get the types wrong logically, but also since C might \"do you a favour\" and silently change the types through implicit type promotion. <a href=\"https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules\">Examples</a>.</p>\n\n<p>In addition, most compilers don't warn for wrong format specifiers. This is a relatively new thing in the history of C, since compilers aren't required to show a diagnostic message here. It is just a bonus feature of gcc.</p>\n\n<p>How to avoid bugs? These functions are inherently dangerous - that's just how it is and everyone knows it. Probably printf &amp; scanf family of functions are the most harmful functions ever written in the history of programming, in terms of total bug cost caused to mankind. So what you should do to:</p>\n\n<ul>\n<li>Avoid <code>stdio.h</code> if possible and keep it away from production-quality code. Portability is not always more important than robust code - sometimes it is preferable to use the raw console API. Avoid variable argument list functions in general.</li>\n<li>If not possible to avoid, wrap the \"GUI\" part of <code>stdio.h</code> inside a separate file, which you should be doing anyway. Don't mix printing/input with algorithms. Make an interface which is using pointers.</li>\n<li>It is 2018, not 1970: don't write console interfaces in the first place. Ye ye I know... there's lots of old crap still floating around which needs to be maintained. But nowadays, console functions should be used mostly for debugging purposes and for newbies learning C, in which case type safety might not be such a big issue.</li>\n</ul>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 51058254, "answer_count": 2, "score": 6, "last_activity_date": 1530284445, "creation_date": 1530087469, "last_edit_date": 1530284445, "question_id": 51057861, "link": "https://stackoverflow.com/questions/51057861/how-to-wisely-interpret-this-compiler-warning", "title": "How to wisely interpret this compiler warning?", "body": "<p>When I executed the code of this <a href=\"https://stackoverflow.com/a/51056490/2411320\">question</a>, I got this warning:</p>\n\n<pre><code>warning: format '%d' expects argument of type 'int', but argument 2 has type 'long int' [-Wformat=]\nprintf(\"P-Q: %d, P: %d, Q: %d\", (p - q), p, q);\n             ~^                 ~~~~~~~\n             %ld\n</code></pre>\n\n<p>As a reflex fix, I used <code>%ld</code> to print the subtraction of two pointers. And the compiler agreed.</p>\n\n<p>Fortunately, I saw a comment from another user mentioning that <code>%td</code> should be used, since the result type of the subtraction is <code>ptrdiff_t</code>. This <a href=\"https://stackoverflow.com/a/27885928/2411320\">answer</a> confirms this claim.</p>\n\n<p>Now from GCC's header file of <a href=\"https://github.com/gcc-mirror/gcc/blob/master/gcc/ginclude/stddef.h\" rel=\"nofollow noreferrer\">stddef.h</a>, I can see that these types are equivalent in this case:</p>\n\n<pre><code>typedef __PTRDIFF_TYPE__ ptrdiff_t;\n#define __PTRDIFF_TYPE__ long int\n</code></pre>\n\n<p>However, I was just going to suggest a wrong (more or less) fix to the OP, with <code>%ld</code>, instead of <code>%td</code>.</p>\n\n<p>Is there a way I could have understood that the compiler warning alone was not enough? Or maybe to wisely have interpreted the warning itself, and not just react.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 427, "user_id": 8834967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xrf_YCVb2Vw/AAAAAAAAAAI/AAAAAAAAAAc/K52j8i_sYWw/photo.jpg?sz=128", "display_name": "Joy Allen", "link": "https://stackoverflow.com/users/8834967/joy-allen"}, "edited": false, "score": 2, "creation_date": 1530087296, "post_id": 51057597, "comment_id": 89105804, "body": "Maybe you need to learn C grammar before writing code."}, {"owner": {"reputation": 1, "user_id": 9940879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67043fec6585156f793b2a449876f5fd?s=128&d=identicon&r=PG&f=1", "display_name": "nickel", "link": "https://stackoverflow.com/users/9940879/nickel"}, "reply_to_user": {"reputation": 427, "user_id": 8834967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xrf_YCVb2Vw/AAAAAAAAAAI/AAAAAAAAAAc/K52j8i_sYWw/photo.jpg?sz=128", "display_name": "Joy Allen", "link": "https://stackoverflow.com/users/8834967/joy-allen"}, "edited": false, "score": 0, "creation_date": 1530087625, "post_id": 51057597, "comment_id": 89105989, "body": "thank you, on to it now!"}, {"owner": {"reputation": 182, "user_id": 8020062, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/v7iXC.png?s=128&g=1", "display_name": "enigma6174", "link": "https://stackoverflow.com/users/8020062/enigma6174"}, "edited": false, "score": 0, "creation_date": 1530091046, "post_id": 51057597, "comment_id": 89107971, "body": "Go through the C syntax first and be clear about it. The reason your code isn&#39;t getting you the desired output is because you have declared the function twice once at the head of your file and second at the end of main() block. Next you went ahead to define the function. So you see what is missing here? You have declared the function, you have defined the function but nowhere have you called that function. To call a function simply write it&#39;s name followed by parentheses and semi-colon but not preceded by any data type/access modifier etc. Hope this helps!"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1530086726, "creation_date": 1530086726, "answer_id": 51057633, "question_id": 51057597, "link": "https://stackoverflow.com/questions/51057597/my-terminal-is-only-printing-the-first-output-from-main/51057633#51057633", "title": "my terminal is only printing the first output from main", "body": "<p>You don't <em>call</em> the functions, you <em>declare</em> the functions (again).</p>\n\n<p>To call e.g. <code>one_three</code> then you do</p>\n\n<pre><code>one_three();\n</code></pre>\n\n<hr>\n\n<p>And speaking about function declarations, in C you must explicitly use <code>void</code> as argument if a function doesn't take any arguments. A declaration such as</p>\n\n<pre><code>int two();\n</code></pre>\n\n<p>tells the compiler that the function <code>two</code> returns an <code>int</code>, and takes an unknown number of unspecified arguments. The proper declaration would be</p>\n\n<pre><code>int two(void);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 9460589, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StudyNPractice", "link": "https://stackoverflow.com/users/9460589/studynpractice"}, "is_accepted": false, "score": 1, "last_activity_date": 1530086919, "creation_date": 1530086919, "answer_id": 51057692, "question_id": 51057597, "link": "https://stackoverflow.com/questions/51057597/my-terminal-is-only-printing-the-first-output-from-main/51057692#51057692", "title": "my terminal is only printing the first output from main", "body": "<p>You should change the code like this.</p>\n\n<pre><code>...\nint main(void)\n{\n    // Countdown begins\n    printf(\"starting now: \");\n    printf(\"\\n\");\n    one_three();\n    two();\n\n    return 0;\n}\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 1, "last_activity_date": 1530086926, "creation_date": 1530086926, "answer_id": 51057696, "question_id": 51057597, "link": "https://stackoverflow.com/questions/51057597/my-terminal-is-only-printing-the-first-output-from-main/51057696#51057696", "title": "my terminal is only printing the first output from main", "body": "<p>You have declared functions again inside <code>main()</code>. That's why printing only <strong>\"starting now\"</strong>. You need to call that function from <code>main()</code> like this:</p>\n\n<pre><code>int main(void)\n{\n    // Countdown begins\n    printf(\"starting now: \");\n    printf(\"\\n\");\n    one_three();\n    two();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 82, "user_id": 9810916, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VRmyY-ZI9_w/AAAAAAAAAAI/AAAAAAAAAVc/gNEZP9OlJWE/photo.jpg?sz=128", "display_name": "ramprasath .n", "link": "https://stackoverflow.com/users/9810916/ramprasath-n"}, "is_accepted": false, "score": 2, "last_activity_date": 1530090799, "last_edit_date": 1530090799, "creation_date": 1530087084, "answer_id": 51057754, "question_id": 51057597, "link": "https://stackoverflow.com/questions/51057597/my-terminal-is-only-printing-the-first-output-from-main/51057754#51057754", "title": "my terminal is only printing the first output from main", "body": "<pre><code>int one_three();\nint two();\n\nint main(void)\n{\n    // Countdown begins\n    printf(\"starting now: \");\n    printf(\"\\n\");\n    one_three();\n    two();\n\n    return 0;\n}\n\nint one_three()\n{\n    printf(\"one\");\n    two();\n\n    return 0;\n}\n\nint two()\n{\n    printf(\"two\");\n\n    return 0;\n}\n</code></pre>\n\n<p>While calling the function you should not declare the type(ie. char, int or float).</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 7697143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3cf7fc8db04d04c8517afa41bbaef5?s=128&d=identicon&r=PG&f=1", "display_name": "Prawin", "link": "https://stackoverflow.com/users/7697143/prawin"}, "is_accepted": false, "score": 0, "last_activity_date": 1530092332, "creation_date": 1530092332, "answer_id": 51059387, "question_id": 51057597, "link": "https://stackoverflow.com/questions/51057597/my-terminal-is-only-printing-the-first-output-from-main/51059387#51059387", "title": "my terminal is only printing the first output from main", "body": "<p>Let me explain you some basics.\nThe first two lines in your code</p>\n\n<pre><code>int one_three();\nint two();    \n</code></pre>\n\n<p>- are function declarations or function prototypes which tells the compiler that there is a function definition after the main function.</p>\n\n<p>If you don't want it, you can keep the function definitions before main function.</p>\n\n<pre><code>int one_three()\n{\n    printf(\"one\");\n    int two();\n\n    return 0;\n}\n\nint two()\n{\n    printf(\"two\");\n\n    return 0;\n}\nint main(void)\n{\n    // Countdown begins\n    printf(\"starting now: \");\n    printf(\"\\n\");\n    one_three(void);\n    two(void);\n\n    return 0;\n}\n</code></pre>\n\n<p>You're re-declaring the functions again in main(), where you need to call them.\nPass a actual argument as <strong>void</strong> if you're not passing any value or reference.\nSince you're returning 0 from those functions the return type is int, which will be fine.</p>\n\n<pre><code>int main(void)\n{\n    // Countdown begins\n    printf(\"starting now: \");\n    printf(\"\\n\");\n    one_three(void);\n    two(void);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9940879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67043fec6585156f793b2a449876f5fd?s=128&d=identicon&r=PG&f=1", "display_name": "nickel", "link": "https://stackoverflow.com/users/9940879/nickel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 5, "score": -5, "last_activity_date": 1530092332, "creation_date": 1530086646, "question_id": 51057597, "link": "https://stackoverflow.com/questions/51057597/my-terminal-is-only-printing-the-first-output-from-main", "title": "my terminal is only printing the first output from main", "body": "<p>beginner to C here, and I am having trouble printing the words \"one\" in int one_three() and \"two\" in in the function(). </p>\n\n<p>the only words printing in my terminal is \"starting now\" - is anyone anyone aware as to why this is happening?</p>\n\n<p>Any help would be very much appreciated.</p>\n\n<pre><code>int one_three();\nint two();\n\nint main(void)\n{\n    // Countdown begins\n    printf(\"starting now: \");\n    printf(\"\\n\");\n    int one_three();\n    int two();\n\n    return 0;\n}\n\nint one_three()\n{\n    printf(\"one\");\n    int two();\n\n    return 0;\n}\n\nint two()\n{\n    printf(\"two\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "linker", "embedded", "gnu"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1530110968, "post_id": 51057464, "comment_id": 89121412, "body": "@Someprogrammerdude: <code>__vector_table</code> is defined in the linker control file, hence it is part of the implementation, not the application code with regard to the C standard. Long story short: it&#39;s fine (and common)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1530175301, "post_id": 51057464, "comment_id": 89145372, "body": "Vector table of <i>what</i> MCU, more specifically? It would be helpful to know the exact part used. And why are you trying to relocate the vector table? Writing some manner of bootloader?"}], "answers": [{"tags": [], "owner": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "is_accepted": true, "score": 1, "last_activity_date": 1530111393, "last_edit_date": 1530111393, "creation_date": 1530087126, "answer_id": 51057767, "question_id": 51057464, "link": "https://stackoverflow.com/questions/51057464/c-code-to-relocate-the-vector-table/51057767#51057767", "title": "C code to relocate the vector table", "body": "<p><code>__vector_table</code> contains the address when it was included in the linker script (<code>__vector_table = .;</code> means to get the value of the current address, that is, if the previous sections occupy 8kB, <code>__vector_table</code> will contain the next address).</p>\n\n<p>Yes, <code>SCB_VTOR</code> contains the address <code>0x00002000</code>, given that the section <code>interrupts</code> stars in <code>0x00002000</code>, and according to the linker script, the first thing to do is get the address.</p>\n\n<p>Bear in mind that some CPUs/MCUs have a fixed vector table, and it starts in a specific register.</p>\n"}], "owner": {"reputation": 143, "user_id": 8540390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d8fc1dec42ea6332e7ab53e73102b4?s=128&d=identicon&r=PG", "display_name": "user8540390", "link": "https://stackoverflow.com/users/8540390/user8540390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 51057767, "answer_count": 1, "score": -1, "last_activity_date": 1530111393, "creation_date": 1530086207, "last_edit_date": 1530086520, "question_id": 51057464, "link": "https://stackoverflow.com/questions/51057464/c-code-to-relocate-the-vector-table", "title": "C code to relocate the vector table", "body": "<p>I have following lines of code  </p>\n\n<pre><code>#define SCB_VTOR            SCB_VTOR_REG(SystemControl_BASE_PTR)\n#define SCB_VTOR_REG(base)                       ((base)-&gt;VTOR)\n/* VTOR Bit Fields */\n#define SCB_VTOR_TBLOFF_MASK                     0xFFFFFF80u\n#define SCB_VTOR_TBLOFF_SHIFT                    7\n#define SCB_VTOR_TBLOFF(x)                       (((uint32_t)(((uint32_t)(x))&lt;&lt;SCB_VTOR_TBLOFF_SHIFT))&amp;SCB_VTOR_TBLOFF_MASK)\n\n\n\nextern uint32_t __vector_table[];\nSCB_VTOR = (uint32_t)__vector_table;  \n</code></pre>\n\n<p>in my main.c file.</p>\n\n<p>and I have my __vector_table in the interrupt section of linker description file as follows:</p>\n\n<pre><code>MEMORY\n{\n  m_interrupts  (rx) : ORIGIN = 0x00002000, LENGTH = 0xC0   /*192 Bytes*/\n  ....\n  ....\n  ....\n  ....\n\n .interrupts :\n  {\n    __vector_table = .;             \n    . = ALIGN(4);\n    KEEP(*(.vectortable)) /* Startup code */\n    . = ALIGN(4);\n  } &gt; m_interrupts\n</code></pre>\n\n<p>When an interrupt comes, since I loaded the register SCB_VTOR to the address of __vector_table, it will point to current location of vector table right?? What is the meaning of <code>SCB_VTOR = (uint32_t)__vector_table;</code> Is my <code>SCB_VTOR</code> pointing to the address <code>0x00002000</code> line of code? Thanks in advance</p>\n"}, {"tags": ["c", "malloc", "microcontroller", "free", "stm32"], "comments": [{"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1530104923, "post_id": 51057418, "comment_id": 89117098, "body": "<a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0552a/Cihcfefj.html\" rel=\"nofollow noreferrer\">This page</a> includes a description of all the CFSR register bit values.  You have <code>BFARVALID</code> and <code>PRECISERR</code> set.  Read the descriptions and then examine the <code>BFAR</code> register value."}], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 2158876, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cfedc606432336e7d4e930d8264a67fe?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/2158876/larry"}, "edited": false, "score": 0, "creation_date": 1598316758, "post_id": 51059448, "comment_id": 112412907, "body": "I had a hardfault at malloc. It seemed the driver was likely writing a byte or 2 extra into the allocated region. Simply requesting a few extra bytes at allocation time has stopped my hardfault error."}], "tags": [], "owner": {"reputation": 2597, "user_id": 4755321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e93c2832d8928731e8e5d2f6d665c4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek \u015alimok", "link": "https://stackoverflow.com/users/4755321/jacek-%c5%9alimok"}, "is_accepted": true, "score": 3, "last_activity_date": 1530092848, "last_edit_date": 1530092848, "creation_date": 1530092486, "answer_id": 51059448, "question_id": 51057418, "link": "https://stackoverflow.com/questions/51057418/stm32-hardfault-at-free/51059448#51059448", "title": "STM32 hardfault at free", "body": "<p>HardFaults like this - in <code>free</code> or even <code>malloc</code> - usually indicate a problem with your memory being corrupted in some way. The most common cause is either double <code>free</code> on the same memory address or overwriting data in memory, e.g. writing past the end of some kind of buffer.</p>\n\n<p>Regarding the second point - although this is implementation dependent - the general approach for <code>malloc</code> is to store some additional information that it uses internally for future calls to <code>malloc</code> or <code>free</code>. These are things like size of the chunk that actually got allocated, information about next chunk in memory etc. This information in the implementation I've checked was stored right before the memory address you're given as a return value from <code>malloc</code>. If you then overwrite this data - for example by writing past a buffer that got allocated before this address - the next call to <code>free</code> that frees this memory is going to fail in unexpected ways, often resulting in a HardFault.</p>\n\n<p>Having said that and given the limited information you've provided, all I can suggest is to go through the code that writes data to memory - mostly code writing to arrays allocated with <code>malloc</code>. Limit the code to a minimal case that still causes HardFault and debug it. Possibly set some data breakpoints (write). <code>free</code> failing when freeing memory may not (and in this case, it likely doesn't) necessarily indicate a problem with that particular portion of memory, but rather an adjacent one.</p>\n"}], "owner": {"reputation": 51, "user_id": 6615041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S4KHtSjmr6Q/AAAAAAAAAAI/AAAAAAAAELM/BVx1gvB1__c/photo.jpg?sz=128", "display_name": "Nithin Kurian", "link": "https://stackoverflow.com/users/6615041/nithin-kurian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 0, "accepted_answer_id": 51059448, "answer_count": 1, "score": 1, "last_activity_date": 1530106492, "creation_date": 1530086027, "last_edit_date": 1530106492, "question_id": 51057418, "link": "https://stackoverflow.com/questions/51057418/stm32-hardfault-at-free", "title": "STM32 hardfault at free", "body": "<p>I am developing an application with STM32L476 (without FreeRTOS). I am using SW4STM32 and STM32CubeMx. I am using SDMMC with Fatfs in my application. Currently I am seeing a hardfault when I free memory.</p>\n\n<p>These are my stack and heap details as per linker file</p>\n\n<pre><code>/* Highest address of the user mode stack */\n_estack = 0x20018000;    /* end of RAM */\n/* Generate a link error if heap and stack don't fit into RAM */\n_Min_Heap_Size = 0x7E20;      /* required amount of heap  */\n_Min_Stack_Size = 0x1FA0; /* required amount of stack */\n</code></pre>\n\n<p><code>0x20003248</code> is the address at which crash occurs (is the address which I am freeing)</p>\n\n<p>I tried to debug the issue by following this link <a href=\"http://blog.feabhas.com/2013/02/developing-a-generic-hard-fault-handler-for-arm-cortex-m3cortex-m4/\" rel=\"nofollow noreferrer\">Cortex-M3 Hard Fault - find cause</a> </p>\n\n<p>This is what I get at hardfault:</p>\n\n<pre><code>SCB-&gt;HFSR = 0x40000000\nForced Hard Fault\nSCB-&gt;CFSR = 0x00008200\n</code></pre>\n\n<p>but I couldnt conclude anything</p>\n"}, {"tags": ["c", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1530082076, "post_id": 51056210, "comment_id": 89102909, "body": "What output did you expect?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1530082151, "post_id": 51056210, "comment_id": 89102951, "body": "<code>p = arr[1];</code> and so are implementation defined behaviour."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 5, "creation_date": 1530082202, "post_id": 51056210, "comment_id": 89102982, "body": "Do you intentionally define <code>int *p, *q;</code> instead of <code>int p, q;</code>? Then you should explain more about your thoughts."}, {"owner": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1530082482, "post_id": 51056210, "comment_id": 89103133, "body": "@Jabberwocky I expect -2, maybe I am wrong, that&#39;s why I am asking to know that what is actually happening under the hood"}, {"owner": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1530082510, "post_id": 51056210, "comment_id": 89103147, "body": "@Yunnosch yes intentionally, just having fun with C"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1530082878, "post_id": 51056210, "comment_id": 89103331, "body": "Complement to the <a href=\"https://stackoverflow.com/questions/11713929/c-c-pointer-arithmetic\">duplicate</a>: in your case <code>q</code> contains 2 and <code>p</code> contains 4. As mentioned in the duplicate: <i>pointer subtraction yields the number of array elements between two pointers of the same type</i>. Assuming <code>sizeof int</code> is 4 on your platform the difference between the pointer 4 and 2 is less then <code>sizeof int</code>, therefore the substraction doesn&#39;t really make sense."}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1530083169, "post_id": 51056210, "comment_id": 89103473, "body": "p and q are two different pointers so any operations between them cannot be clearly defined"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1530083326, "post_id": 51056210, "comment_id": 89103566, "body": "<a href=\"https://stackoverflow.com/q/9053658/995714\">pointers must be printed using <code>%p</code></a> and <a href=\"https://stackoverflow.com/q/586928/995714\">their differences like <code>p - q</code> must be printed with <code>%td</code></a>. You&#39;re having a lot of UB there"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530083732, "post_id": 51056210, "comment_id": 89103777, "body": "@phuclv why <code>%td</code> for pointer difference? I thought <code>%ld</code> would suffice, since the warning suggests so (check my answer, and let&#39;s improve it, if it has to)."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1530083976, "post_id": 51056210, "comment_id": 89103897, "body": "@gsamaras technically <a href=\"https://stackoverflow.com/q/16864552/995714\">using the wrong format specifier is UB</a>. In this case if the pointer is 64 bits then printing them with %d is not OK. Same with their difference which is also a 64-bit type (<a href=\"https://stackoverflow.com/q/7954439/995714\"><code>ptrdiff_t</code></a>)"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530084109, "post_id": 51056210, "comment_id": 89103974, "body": "I agree that <code>%d</code> is wrong. But as a fix I proposed <code>%ld</code>, for <code>long int</code>. I wonder whether your fix is better than mine @phuclv."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1530084196, "post_id": 51056210, "comment_id": 89104009, "body": "@gsamaras no, using the wrong format specifier is always UB. A long int may have the same size as int, like on 64-bit Windows. Or you&#39;ll need to cast to long int before using %ld. <code>ptrdiff_t</code> is not necessarily <code>long int</code>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1530087642, "post_id": 51056210, "comment_id": 89106005, "body": "@phuclv you are right, thank you very much! I improved my answer, and asked a <a href=\"https://stackoverflow.com/questions/51057861/how-to-wisely-interpret-this-compiler-warning\">new related question</a>, check it out if you like."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1530449555, "post_id": 51056210, "comment_id": 89231970, "body": "C11 J.2: &quot;<b><i><a href=\"http://port70.net/~nsz/c/c11/n1570.html#J.2\" rel=\"nofollow noreferrer\">Undefined Behaviour</a></b> [if] Pointers that do not point into, or just beyond, the same array object are subtracted</i>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 6, "last_activity_date": 1530087910, "last_edit_date": 1530087910, "creation_date": 1530083054, "answer_id": 51056490, "question_id": 51056210, "link": "https://stackoverflow.com/questions/51056210/2-4-1-when-int-value-assigned-to-pointer-in-c/51056490#51056490", "title": "(2 - 4 = -1) when int value assigned to pointer in C?", "body": "<p>The <a href=\"https://stackoverflow.com/questions/11713929/c-c-pointer-arithmetic\">duplicate question</a> mentions that:</p>\n\n<blockquote>\n  <p>pointer subtraction yields the number of array elements between two pointers of the same type</p>\n</blockquote>\n\n<p>Read more about it in <a href=\"https://stackoverflow.com/questions/3238482/pointer-subtraction-confusion\">Pointer subtraction confusion</a>.</p>\n\n<p>However, your code is wrong and ill-formed, since it invokes <em>Undefined Behavior</em>. Please compile with warnings enabled, and you will get:</p>\n\n<pre><code>main.c: In function \u2018main\u2019:\nmain.c:12:7: warning: assignment makes pointer from integer without a cast [-Wint-conversion]\n     p = arr[1];\n       ^\nmain.c:13:7: warning: assignment makes pointer from integer without a cast [-Wint-conversion]\n     q = arr[3];\n       ^\nmain.c:15:12: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018long int\u2019 [-Wformat=]\n     printf(\"P-Q: %d, P: %d, Q: %d\", (p - q), p, q);\n            ^\nmain.c:15:12: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 3 has type \u2018int *\u2019 [-Wformat=]\nmain.c:15:12: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 4 has type \u2018int *\u2019 [-Wformat=]\n</code></pre>\n\n<p>The errors will occur nevertheless. For the warnings, I just used the <code>-Wall</code> flag.</p>\n\n<hr>\n\n<p>In order for your code to make sense, you could just declare <code>p</code> and <code>q</code> as simple <code>int</code>s and and not as pointers.</p>\n\n<p>Or, you could do this:</p>\n\n<pre><code>p = &amp;arr[1];\nq = &amp;arr[3];\n\nprintf(\"P-Q: %td, P: %p, Q: %p\", (p - q), (void *)p, (void *)q);\n</code></pre>\n\n<p>and get something like this:</p>\n\n<pre><code>P-Q: -2, P: 0x7ffdd37594d4, Q: 0x7ffdd37594dc\n</code></pre>\n\n<p>Note that I used <a href=\"https://stackoverflow.com/a/27885928/2411320\"><code>%td</code> for printing the result of the subtraction of pointers</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1530084961, "post_id": 51056858, "comment_id": 89104432, "body": "Nice answer, I hope  Jabberwocky  is OK with me for removing the duplicate, since our answers really added up."}, {"owner": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "edited": false, "score": 0, "creation_date": 1530085471, "post_id": 51056858, "comment_id": 89104739, "body": "@mateen-ulhaq this answer really cleared the concept, none of the experts/pro really tried to understand that what I want to discuss here rather than finding flaws in code, I knew that that code is ill-formated and it was intentional to clear out basic concepts of how things are works at backstage"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "edited": false, "score": 1, "creation_date": 1530085640, "post_id": 51056858, "comment_id": 89104834, "body": "We all try to help @Mr.Anonymous. I am glad Mateen provided what you were looking for. However, you could have commented on my answer, asking for specific guidance ( tip for the future =) ). However, I am still wondering how you were able to compile and run the code you posted."}, {"owner": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1530086082, "post_id": 51056858, "comment_id": 89105096, "body": "@gsamaras I know that eveybody tries to help here, I just wanted to appreciate answer which helped me and never meant to devalue other&#39;s contribution, If you feel offended, I am sorry. that wasn&#39;t my intention."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "edited": false, "score": 0, "creation_date": 1530086147, "post_id": 51056858, "comment_id": 89105141, "body": "Of course I am not offended @Mr.Anonymous. I just want to advice, cheers!"}, {"owner": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1530086418, "post_id": 51056858, "comment_id": 89105298, "body": "@gsamaras yes it compiled successfully with warnings <a href=\"https://i.gyazo.com/a1bb8344aa18db1f77db3749b457773b.png\" rel=\"nofollow noreferrer\">i.gyazo.com/a1bb8344aa18db1f77db3749b457773b.png</a>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1530092377, "post_id": 51056858, "comment_id": 89108862, "body": "Is there really rounding applied before subtracting the address? Why would the compiler do this? Is this limited to architectures where access to random unaligned addresses is not allowed?"}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1530093605, "post_id": 51056858, "comment_id": 89109622, "body": "@Gerhardh I was thinking of an architecture restricted to 32-bit aligned access... However, I tried <code>4 - 2</code> on my system which gave <code>0</code>. This suggests that <code>2</code> is not being rounded down to <code>0</code>. I&#39;ll edit my answer."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1530095916, "post_id": 51056858, "comment_id": 89111169, "body": "Even for an architecture with restricted access an invalid address would invoke UB and why should a compiler add extra code for UB? I would assume that the rounding is part of integer division. But then it should just chop off the fractional part."}, {"owner": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "edited": false, "score": 0, "creation_date": 1530100257, "post_id": 51056858, "comment_id": 89113833, "body": "@MateenUlhaq output again causing confusion, can you explain when it gets rounded down and when rounded up?"}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1530100820, "post_id": 51056858, "comment_id": 89114204, "body": "With <code>gcc</code>, integer <i>division</i> seems to always round down: <code>-1 &#47; 4 = -1</code>. Same with <code>-2, -3, -4</code>."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1530162048, "post_id": 51056858, "comment_id": 89139168, "body": "@MateenUlhaq it&#39;s not the division but a right shift by 2, which <a href=\"https://stackoverflow.com/q/1857928/995714\">always rounded down</a> <code>-1 &gt;&gt; 2 = -1</code> no one uses <code>div</code> to divide by a power of 2. And you still get UB with those <code>%d</code>"}], "tags": [], "owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "is_accepted": true, "score": 6, "last_activity_date": 1530093639, "last_edit_date": 1530093639, "creation_date": 1530084371, "answer_id": 51056858, "question_id": 51056210, "link": "https://stackoverflow.com/questions/51056210/2-4-1-when-int-value-assigned-to-pointer-in-c/51056858#51056858", "title": "(2 - 4 = -1) when int value assigned to pointer in C?", "body": "<p>Strictly speaking, what happens depends entirely on your compiler and platform... but let's assume we're using a typical compiler and ignoring the warnings.</p>\n\n<p>Let's simplify your question further:</p>\n\n<pre><code>p = 2;\nq = 4;\n\nprintf(\"P-Q: %d, P: %d, Q: %d\", (p - q), p, q);\n</code></pre>\n\n<p>which produces the same wacky result:</p>\n\n<pre><code>P-Q: -1, P: 2, Q: 4\n</code></pre>\n\n<p>As @gsamaras pointed out, we're trying to subtract two pointers. Let's try and see how this might result in <code>-1</code>:</p>\n\n<pre><code>p - q = (2 - 4) / sizeof(int)\n      = (-2)    / 4\n      = -1\n</code></pre>\n\n<p>I suggest trying a couple of your own <code>p</code> and <code>q</code> values to see what happens.</p>\n\n<hr>\n\n<p>Examples with different <code>p</code> and <code>q</code>:</p>\n\n<pre><code>p - q = ??\n==========\n0 - 0 =  0\n0 - 1 = -1\n0 - 2 = -1\n0 - 3 = -1\n0 - 4 = -1\n1 - 0 =  0\n1 - 1 =  0\n1 - 2 = -1\n1 - 3 = -1\n1 - 4 = -1\n2 - 0 =  0\n2 - 1 =  0\n2 - 2 =  0\n2 - 3 = -1\n2 - 4 = -1\n3 - 0 =  0\n3 - 1 =  0\n3 - 2 =  0\n3 - 3 =  0\n3 - 4 = -1\n4 - 0 =  1\n4 - 1 =  0\n4 - 2 =  0\n4 - 3 =  0\n4 - 4 =  0\n</code></pre>\n\n<p>Generated using <code>gcc -fpermissive</code> on:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    printf(\"p - q = ??\\n\");\n    printf(\"==========\\n\");\n\n    for (int i = 0; i &lt; 5; ++i) {\n        for (int j = 0; j &lt; 5; ++j) {\n            int* p = i;\n            int* q = j;\n\n            printf(\"%d - %d = %2d\\n\", p, q, (p - q));\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 448, "user_id": 1323462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4f70ca78423e54cf56b6c967c00594?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1323462/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 51056858, "answer_count": 2, "score": 2, "last_activity_date": 1530449971, "creation_date": 1530082006, "last_edit_date": 1530449971, "question_id": 51056210, "link": "https://stackoverflow.com/questions/51056210/2-4-1-when-int-value-assigned-to-pointer-in-c", "title": "(2 - 4 = -1) when int value assigned to pointer in C?", "body": "<p>I am unable to get that why in this program 2 - 4 gives -1, it has assigned int values to pointers rather than addresses, I know but while I compiled it compiler gave some warnings but compiled the program and it executed but...</p>\n\n<p><strong>Program</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void) {\n\n    int *p, *q;\n\n    int arr[] = {1,2,3,4};\n\n    // I know p and q are pointers and address should be assigned to them\n    // but look at output, why it evaluates (p-q) to -1 while p as 2 and q as 4\n\n    p = arr[1];\n    q = arr[3];\n\n    printf(\"P-Q: %d, P: %d, Q: %d\", (p - q), p, q);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>It gives</strong></p>\n\n<pre><code>P-Q: -1, P: 2, Q: 4\n</code></pre>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1530082092, "post_id": 51056173, "comment_id": 89102919, "body": "<code>int n=*(&amp;arr+1)-arr;</code>..are you sure?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1530083089, "post_id": 51056173, "comment_id": 89103431, "body": "@SouravGhosh No that&#39;s correct (in that it will most likely work even though it&#39;s technically invalid). <code>&amp;arr + 1</code> is a pointer to an array, dereference it (i.e. <code>*(&amp;arr + 1)</code>) and you get an array, which then decays to a pointer to its first element (which will be pointing to one element beyond the end of <code>arr</code>, i.e. effectively a pointer to <code>arr[10]</code>)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1530098512, "post_id": 51056173, "comment_id": 89112819, "body": "@JensGustedt: this question is not an exact duplicate, it uses a different expression to compute the array size."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1530082135, "creation_date": 1530082135, "answer_id": 51056245, "question_id": 51056173, "link": "https://stackoverflow.com/questions/51056173/why-the-pointer-hack-for-finding-the-size-of-an-array-in-c-giving-different-valu/51056245#51056245", "title": "Why the pointer hack for finding the size of an array in C giving different value when used in a called function", "body": "<p>When declaring an array argument in a function, it's not an array at all, instead it's a <em>pointer</em>.</p>\n\n<p>The declaration</p>\n\n<pre><code>void funct(int arr[]);\n</code></pre>\n\n<p>is actually equal to</p>\n\n<pre><code>void funct(int *arr);\n</code></pre>\n\n<p>And that's the difference between the results you see. In the <code>main</code> function <code>&amp;arr</code> is a pointer to the array, but in <code>func</code> the expression <code>&amp;arr</code> is a pointer to the <em>pointer variable</em>. Those two pointers are very different.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 7, "last_activity_date": 1549133891, "last_edit_date": 1549133891, "creation_date": 1530082202, "answer_id": 51056271, "question_id": 51056173, "link": "https://stackoverflow.com/questions/51056173/why-the-pointer-hack-for-finding-the-size-of-an-array-in-c-giving-different-valu/51056271#51056271", "title": "Why the pointer hack for finding the size of an array in C giving different value when used in a called function", "body": "<p>Despite the syntax used for its definition <code>void func(int arr[])</code>, function <code>func</code> receives a pointer to the first element of the array. The definition is clearer as <code>void func(int *arr)</code>. </p>\n\n<p>The expression <code>*(&amp;arr+1)-arr</code> evaluates at compile time to the number of elements of an array <strong>only</strong> if <code>arr</code> is defined as an array. If <code>arr</code> is a pointer, it dereferences memory after the pointer and subtracts the pointer value, which is meaningless and in most circumstances has undefined behavior.</p>\n\n<p>A more common (and more readable) expression to get the number of element of an array is</p>\n\n<pre><code>n = sizeof(arr) / sizeof(*arr);\n</code></pre>\n\n<p>If <code>arr</code> is an array, dividing its size in bytes by the size of an element in bytes produces the number of elements. The expression is evaluated at compile time, no runtime overhead. If <code>arr</code> is a pointer, dividing its size by the size of the type it points to is defined, but useless, just like your expression.</p>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 3, "last_activity_date": 1530082938, "last_edit_date": 1530082938, "creation_date": 1530082623, "answer_id": 51056375, "question_id": 51056173, "link": "https://stackoverflow.com/questions/51056173/why-the-pointer-hack-for-finding-the-size-of-an-array-in-c-giving-different-valu/51056375#51056375", "title": "Why the pointer hack for finding the size of an array in C giving different value when used in a called function", "body": "<p>Whenever arrays are passed as the arguments to functions, they will decay into pointers in the function parameters.</p>\n\n<p><a href=\"http://c-faq.com/aryptr/aryptrparam.html\" rel=\"nofollow noreferrer\">C FAQ</a> :</p>\n\n<blockquote>\n  <p>Since <strong>arrays decay immediately into pointers</strong>, an array is never\n  actually passed to a function. You can pretend that a function\n  receives an array as a parameter, and illustrate it by declaring the\n  corresponding parameter as an array:</p>\n  \n  <p>void f(char a[]) { ... }</p>\n</blockquote>\n\n<p>The name of the array <code>arr</code> is decayed into the pointer to the first element of the array by the compiler. As a result, dereferencing the pointer yields the value stored at the first location of an array.</p>\n"}], "owner": {"reputation": 307, "user_id": 7571421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfafeb482de8ad323577ed5a9e3a264e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Ghosh", "link": "https://stackoverflow.com/users/7571421/abhishek-ghosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "closed_date": 1530085664, "accepted_answer_id": 51056271, "answer_count": 3, "score": 4, "last_activity_date": 1549133891, "creation_date": 1530081908, "last_edit_date": 1530083062, "question_id": 51056173, "link": "https://stackoverflow.com/questions/51056173/why-the-pointer-hack-for-finding-the-size-of-an-array-in-c-giving-different-valu", "closed_reason": "Duplicate", "title": "Why the pointer hack for finding the size of an array in C giving different value when used in a called function", "body": "<p>This is the code below to illustrate the issue:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid func(int arr[]);\n\nint main() {\n    int arr[10];\n    int n = *(&amp;arr + 1) - arr;\n    printf(\"%d\\n\", n);\n    func(arr);\n    return 0;\n}\n\nvoid func(int arr[]) {\n    int n = *(&amp;arr + 1) - arr;\n    printf(\"%d\\n\", n);\n}\n</code></pre>\n\n<p>Output of the above code is:</p>\n\n<pre><code>10\n268435906\n</code></pre>\n"}, {"tags": ["c", "system-calls"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1530080166, "post_id": 51055715, "comment_id": 89102020, "body": "You can&#39;t read without opening first."}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1530081514, "post_id": 51055779, "comment_id": 89102623, "body": "Can you back that up with a quote from standard or e.g. cppreference.com? Just to make a decent answer even better."}], "tags": [], "owner": {"reputation": 1463, "user_id": 2299087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWtlB.jpg?s=128&g=1", "display_name": "James McPherson", "link": "https://stackoverflow.com/users/2299087/james-mcpherson"}, "is_accepted": false, "score": 2, "last_activity_date": 1530081782, "last_edit_date": 1530081782, "creation_date": 1530080358, "answer_id": 51055779, "question_id": 51055715, "link": "https://stackoverflow.com/questions/51055715/c-reading-file-without-system-call-open-only-read/51055779#51055779", "title": "C: reading file without system call open (only read!)", "body": "<p><code>read</code> requires an open file descriptor, which you cannot get without calling either <code>open</code> or <code>openat</code> with the only exception being if you read from <code>stdin</code> (fd 0).</p>\n\n<p>Updated to add:</p>\n\n<p>Thankyou @Yunnosch for the suggestion. How about this:</p>\n\n<p><a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/read.html\" rel=\"nofollow noreferrer\">http://pubs.opengroup.org/onlinepubs/009695399/functions/read.html</a></p>\n\n<p>NAME</p>\n\n<pre><code>pread, read - read from a file\n</code></pre>\n\n<p>SYNOPSIS</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\n[XSI] [Option Start] ssize_t pread(int fildes, void *buf, size_t nbyte, off_t offset); [Option End]\n\nssize_t read(int fildes, void *buf, size_t nbyte);\n</code></pre>\n\n<p>DESCRIPTION</p>\n\n<pre><code>The read() function shall attempt to read nbyte bytes from the file associated with the open file descriptor, fildes, into the buffer pointed to by buf.\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9998087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf5ee00df1495937e1eeb36381e03c6?s=128&d=identicon&r=PG&f=1", "display_name": "Lena l", "link": "https://stackoverflow.com/users/9998087/lena-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530081782, "creation_date": 1530080071, "question_id": 51055715, "link": "https://stackoverflow.com/questions/51055715/c-reading-file-without-system-call-open-only-read", "title": "C: reading file without system call open (only read!)", "body": "<p>I am just trying to read the data of a file into memory, but I want that my programme uses as less system calls as possible. That means that I am trying to avoid open or openat. I only want to use read. But I cannot find out how I can do that. Can someone help me?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "ubuntu-14.04", "gstreamer", "gst-launch-1.0"], "comments": [{"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 0, "creation_date": 1530086345, "post_id": 51055647, "comment_id": 89105258, "body": "Could be a permission issue with your current user and accessing video hardware?"}, {"owner": {"reputation": 157, "user_id": 4286987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58de5b70dd3eedc8bccf172a4b1d4c7c?s=128&d=identicon&r=PG&f=1", "display_name": "Dhananjay Jadhav", "link": "https://stackoverflow.com/users/4286987/dhananjay-jadhav"}, "reply_to_user": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 0, "creation_date": 1530104978, "post_id": 51055647, "comment_id": 89117135, "body": "i am not a super user,i tried sudo gst-launch-1.0 videotestsrc ! videoconvert ! autovideosink,even then same issue.Do i need to Login as superuser?"}, {"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 0, "creation_date": 1530131767, "post_id": 51055647, "comment_id": 89131777, "body": "Could also be that the system has no hardware acceleration support activated. maybe missing or wrong gpu driver?"}, {"owner": {"reputation": 4265, "user_id": 1472474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fe184097bbf00ca0b37a90730454fdc?s=128&d=identicon&r=PG", "display_name": "Jan Spurny", "link": "https://stackoverflow.com/users/1472474/jan-spurny"}, "edited": false, "score": 0, "creation_date": 1530578039, "post_id": 51055647, "comment_id": 89274685, "body": "Are you running this on that ubuntu computer directly (i.e. are you sitting in front of it) or are you trying this over ssh connection?"}, {"owner": {"reputation": 157, "user_id": 4286987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58de5b70dd3eedc8bccf172a4b1d4c7c?s=128&d=identicon&r=PG&f=1", "display_name": "Dhananjay Jadhav", "link": "https://stackoverflow.com/users/4286987/dhananjay-jadhav"}, "edited": false, "score": 0, "creation_date": 1530607628, "post_id": 51055647, "comment_id": 89284054, "body": "I am trying it over ssh connection using Putty."}], "owner": {"reputation": 157, "user_id": 4286987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58de5b70dd3eedc8bccf172a4b1d4c7c?s=128&d=identicon&r=PG&f=1", "display_name": "Dhananjay Jadhav", "link": "https://stackoverflow.com/users/4286987/dhananjay-jadhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1021, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530099616, "creation_date": 1530079780, "last_edit_date": 1530099616, "question_id": 51055647, "link": "https://stackoverflow.com/questions/51055647/gstreamer-1-0-autovideosink-could-not-initialise-xv-output", "title": "GStreamer 1.0 autovideosink Could not initialise Xv output", "body": "<p>I have my C code which uses GStreamer.I have just installed gst-launch-1.0 on my  Ubuntu 14.04.5 LTS,after that i verified that i have a working installation by command </p>\n\n<blockquote>\n  <p>gst-inspect-1.0 fakesrc</p>\n</blockquote>\n\n<p>which print out a bunch of information about this.Also checked with </p>\n\n<blockquote>\n  <p>gst-launch-1.0 -v fakesrc silent=false num-buffers=3 ! fakesink\n  silent=false</p>\n</blockquote>\n\n<p>command it produces output.But when i try to test video displayed by running </p>\n\n<blockquote>\n  <p>gst-launch-1.0 videotestsrc ! videoconvert ! autovideosink</p>\n</blockquote>\n\n<p>it is giving me below logs</p>\n\n<pre><code>Setting pipeline to PAUSED ...\nlibEGL warning: DRI2: xcb_connect failed\nlibEGL warning: DRI2: xcb_connect failed\nlibEGL warning: GLX: failed to load GLX\nERROR: Pipeline doesn't want to pause.\nERROR: from element /GstXvImageSink:autovideosink0-actual-sink-xvimage: Could not initialise Xv output\nAdditional debug info:\nxvimagesink.c(1765): gst_xvimagesink_open (): /GstXvImageSink:autovideosink0-actual-sink-xvimage:\nCould not open display (null)\nSetting pipeline to NULL ...\nFreeing pipeline ...\n</code></pre>\n\n<p>please HELP. </p>\n"}, {"tags": ["c", "gcc", "makefile", "cmake"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1530083296, "post_id": 51055560, "comment_id": 89103555, "body": "Did something like <code>cmake -G [...] 2&gt; error.cmake.txt</code> do the job?"}, {"owner": {"reputation": 454, "user_id": 7319413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D7q2P.jpg?s=128&g=1", "display_name": "goodman", "link": "https://stackoverflow.com/users/7319413/goodman"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1530084265, "post_id": 51055560, "comment_id": 89104048, "body": "Thank you for ur reply. It&#39;s redirecting the messages present in CMakeLists.txt, but after generating the makefile it will go compilation of the code using make command I need to redirect that Compile time errors/warnings."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 1, "creation_date": 1530087266, "post_id": 51055560, "comment_id": 89105781, "body": "Then redirect the <code>make</code> command instead: e.g  <code>make 2&gt;errors.log</code>"}, {"owner": {"reputation": 454, "user_id": 7319413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D7q2P.jpg?s=128&g=1", "display_name": "goodman", "link": "https://stackoverflow.com/users/7319413/goodman"}, "edited": false, "score": 0, "creation_date": 1530089592, "post_id": 51055560, "comment_id": 89107094, "body": "Thank you @MikeKinghan.Previously I tried to make &gt;errors.log.Now it&#39;s working"}], "owner": {"reputation": 454, "user_id": 7319413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D7q2P.jpg?s=128&g=1", "display_name": "goodman", "link": "https://stackoverflow.com/users/7319413/goodman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530082155, "creation_date": 1530079409, "last_edit_date": 1530082155, "question_id": 51055560, "link": "https://stackoverflow.com/questions/51055560/redirecting-the-source-code-errors-in-cmake", "title": "Redirecting the Source Code errors in CMake", "body": "<p>I am building the C Project using CMAKE. My build is working fine, but the problem is if any errors and warnings are there in the source code it's displaying on the command prompt. How can I redirect warnings and compilation errors to a file, So it's easy for me to resolve one by one? I am running my CMake using the following commands in the batch file.</p>\n\n<pre><code>cmake -G \"MinGW Makefiles\" ..\nmake \npause\n</code></pre>\n"}, {"tags": ["c", "arrays", "null-terminated"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 2, "creation_date": 1530078632, "post_id": 51055323, "comment_id": 89101330, "body": "By &quot;accessing&quot; you mean reading?  Why would the null character be any different to any other character in the string?  If you tried to write, went <i>beyond</i> the bounds of the string, then the effect is undefined."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1530078849, "last_edit_date": 1530078849, "creation_date": 1530078538, "answer_id": 51055356, "question_id": 51055323, "link": "https://stackoverflow.com/questions/51055323/accessing-null-terminated-character/51055356#51055356", "title": "Accessing null-terminated character", "body": "<p>Essentially, you're passing an empty <em>string</em> as the argument, so it should be treated as such.</p>\n\n<p>For <code>%s</code> conversion specifier, with <code>printf()</code> family</p>\n\n<blockquote>\n  <p>[...]Characters from the array are\n  written up to (but not including) the terminating null character.[...]</p>\n</blockquote>\n\n<p>In your case, the null terminator happens to appear at the first element in the <em>array</em>, that's it.</p>\n\n<p>Just for clarification, accessing a null-terminator is OK, accessing a <code>NULL</code> pointer is not OK, and they both are different things!!</p>\n"}, {"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 1, "last_activity_date": 1530078570, "creation_date": 1530078570, "answer_id": 51055360, "question_id": 51055323, "link": "https://stackoverflow.com/questions/51055323/accessing-null-terminated-character/51055360#51055360", "title": "Accessing null-terminated character", "body": "<p>Nothing particular. A pointer to the null character is interpreted as a zero-length string by functions that expect a string. </p>\n"}, {"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 4, "last_activity_date": 1530078645, "creation_date": 1530078645, "answer_id": 51055373, "question_id": 51055323, "link": "https://stackoverflow.com/questions/51055323/accessing-null-terminated-character/51055373#51055373", "title": "Accessing null-terminated character", "body": "<p>You are basically still accessing a null-terminated string.<br>\nIt is just zero characters long, i.e. it does not contain anything to print.</p>\n\n<p>Your code is basically the same as</p>\n\n<pre><code> printf(\"\");\n</code></pre>\n\n<p>Compare this, not duplicate but similar question:  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/50729625/effect-of-1-after-the-format-string-parameter-to-printf/50729679#50729679\">Effect of &quot;+1&quot; after the format string parameter to printf()</a></p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 1, "accepted_answer_id": 51055356, "answer_count": 3, "score": 1, "last_activity_date": 1530092597, "creation_date": 1530078400, "last_edit_date": 1530092597, "question_id": 51055323, "link": "https://stackoverflow.com/questions/51055323/accessing-null-terminated-character", "title": "Accessing null-terminated character", "body": "<p>Inspired by this <a href=\"https://stackoverflow.com/questions/6793262/why-dereferencing-a-null-pointer-is-undefined-behaviour\">question</a>.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   char arr[] = \"Hello\";\n   char *ptr = arr + 5;\n   printf(\"%s\\n\",ptr);\n}\n</code></pre>\n\n<p>In the above code, I have accessed null-terminated character.</p>\n\n<p>So, What actually happens when accessing null terminated character in literal string? Is it Undefined behaviour?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 2, "creation_date": 1530079885, "post_id": 51055250, "comment_id": 89101860, "body": "<code>char name = printf(&quot;%s.rle&quot;, argv[1]);</code> is not the way to make a string with a file name. Look up <code>sprintf</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1530080088, "post_id": 51055250, "comment_id": 89101979, "body": "<code>char str[BUF_SIZE]; fwrite(str, sizeof(str), 1, destination);</code> This just write an uninitialized variable (i.e. <code>str</code>) to the file. You need to put something into <code>str</code> first"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530080559, "post_id": 51055250, "comment_id": 89102214, "body": "@4386427 solved the problem with the name thank you!!  What should I put in str though? I don&#39;t want anything else but my output in the file. Is it the only problem?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530081184, "post_id": 51055250, "comment_id": 89102471, "body": "Inside the while loop, you need to put the encoded values into <code>str</code>"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1530081416, "post_id": 51055250, "comment_id": 89102580, "body": "@4386427 I am trying to get it from the file.txt. That&#39;s what I tried to do with fgetc, isn&#39;t it the right way? I am a newbie :)"}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 1, "creation_date": 1530083481, "post_id": 51055250, "comment_id": 89103634, "body": "Look at repeat_count. You initialize it, you count it, but you never use it..."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530084674, "post_id": 51055250, "comment_id": 89104274, "body": "turn on all warnings and solve those first"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "reply_to_user": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1530086060, "post_id": 51055250, "comment_id": 89105083, "body": "@Holger that&#39;s absolutely right! instead fwrite can I just use <code>putc(repeat_count, destination); putc(previous_character, destination);</code> ?  @phuclv Sorry, I didn&#39;t get what you mean"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530086555, "post_id": 51057382, "comment_id": 89105392, "body": "I used sprintf for the name and it solved my problem :)  This code gives me a weird output something like: &lt;0x01&gt;2&lt;0x01&gt;0&lt;0x01&gt;...  I just got the same output using putc, I don&#39;t even know why I got this"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530089298, "post_id": 51057382, "comment_id": 89106913, "body": "@C.J Are you sure that your txt file doesn&#39;t contain &#39;2&#39; &#39;0&#39; instead of the hex value 20 ?"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530089498, "post_id": 51057382, "comment_id": 89107044, "body": "The txt file example is shown in hexadecimal but then why the expected is  01 20 01 21 02 20 02 8F 02 21 01 64 01 60 01 70 01 20 01 21 02 90 ? :/  it does the right thing then?"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530090068, "post_id": 51057382, "comment_id": 89107408, "body": "I mean they are bytes"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 1, "creation_date": 1530090240, "post_id": 51057382, "comment_id": 89107502, "body": "I&#39;ll suggest that you start with a more simple txt file. Try a file containing: ABBCCC  In bytes (decimal) that is 65 66 66 67 67 67 That should give the result  01 65 02 66 03 67"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530090409, "post_id": 51057382, "comment_id": 89107610, "body": "When I decompress the output of my file though I get 20 21 20 20 8F 8F 21 21 64 60 70 20 21 90 90  so that&#39;s why I am confused. It seems like doesn&#39;t give me what I want when I compress it but when I decompress it, it does give the right result"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530090526, "post_id": 51057382, "comment_id": 89107673, "body": "I got <code>0x01&gt;6&lt;0x01&gt;5&lt;0x01&gt;...</code> with your example. it eliminated one of the 66 but didn&#39;t do anything to 67 but in the format I typed"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 1, "creation_date": 1530091472, "post_id": 51057382, "comment_id": 89108259, "body": "@C.J I think there is something wrong with either your input file or the way you look at the result file. With the txt file containing <code>ABBCCC</code> which as hexadecimal bytes are <code>41 42 42 43 43 43</code> I get the result <code>01 41 02 42 03 43</code> just as expected. I think your input file is &quot;65 ...&quot; <b>as text</b>"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530091776, "post_id": 51057382, "comment_id": 89108453, "body": "are you putting in the txt the numbers or the characters ?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530091804, "post_id": 51057382, "comment_id": 89108470, "body": "@C.J The characters... simply type from keyboard: ABBCCC"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530091887, "post_id": 51057382, "comment_id": 89108526, "body": "I was putting the numbers but I can\u2019t see bytes then like in either case I can\u2019t get the numbers you get, can you tell me what I should exactly put in the file.txt and when I run the code as ./test file.txt what file.txt.rle has to have"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 1, "creation_date": 1530092298, "post_id": 51057382, "comment_id": 89108804, "body": "@C.J You need a program that can show files in hexadecimal view. Some editors (e.g. emacs) can which between &quot;character view&quot; and &quot;hexadecimal view&quot;. On linux there are programs like <code>hexdump</code> - it can be used like <code>hexdump -C file.txt.rle</code>"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530092624, "post_id": 51057382, "comment_id": 89109013, "body": "got this when I put ABBCCC  01 41 02 42 03 43                                 |.A.B.C| thanks a lot!"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530092796, "post_id": 51057382, "comment_id": 89109117, "body": "getting that exactly, thank you! I was completely blacked out about using hexdump"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530092968, "post_id": 51057382, "comment_id": 89109224, "body": "can you use my example like the one in the question?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530095342, "post_id": 51057382, "comment_id": 89110801, "body": "@C.J Updated with one more example and changed the code a bit"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530125544, "post_id": 51057382, "comment_id": 89129127, "body": "<code>00000000  32 30 20 32 31 20 32 30  20 32 30 20 38 66 20 38  |20 21 20 20 8f 8|  00000010  66 20 32 31 20 32 31 20  36 34 20 36 30 20 37 30  |f 21 21 64 60 70|  00000020  20 32 30 20 32 31 20 39  30 20 39 30              | 20 21 90 90|  0000002c</code>  problem is here: <code>#hexdump -C file.txt</code>"}, {"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530125791, "post_id": 51057382, "comment_id": 89129246, "body": "<code>00000000  01 32 01 30 01 20 01 32  01 31 01 20 01 32 01 30  |.2.0. .2.1. .2.0| 00000010  01 20 01 32 01 30 01 20  01 38 01 66 01 20 01 38  |. .2.0. .8.f. .8| 00000020  01 66 01 20 01 32 01 31  01 20 01 32 01 31 01 20  |.f. .2.1. .2.1. | 00000030  01 36 01 34 01 20 01 36  01 30 01 20 01 37 01 30  |.6.4. .6.0. .7.0| 00000040  01 20 01 32 01 30 01 20  01 32 01 31 01 20 01 39  |. .2.0. .2.1. .9| 00000050  01 30 01 20 01 39 01 30                           |.0. .9.0| 00000058</code>  and this is the result of <code>#hexdump -C file.txt.rle</code>"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 2, "last_activity_date": 1530100259, "last_edit_date": 1530100259, "creation_date": 1530085937, "answer_id": 51057382, "question_id": 51055250, "link": "https://stackoverflow.com/questions/51055250/rle-algorithm-should-compress-bytes-in-c/51057382#51057382", "title": "RLE algorithm should compress bytes in c", "body": "<blockquote>\n  <p>Also I want my file to be named as file.txt.rle but it has no name.</p>\n</blockquote>\n\n<p>Well, this code</p>\n\n<pre><code>char name = printf(\"%s.rle\", argv[1]);\nwhile((destination = fopen(&amp;name, \"wb\")) == NULL){\n</code></pre>\n\n<p>doesn't give you a string like \"file.txt.rle\". Instead try something like:</p>\n\n<pre><code>size_t len = strlen(argv[1]) + 4 + 1;\nchar name[len];\nsprintf(name, \"%s.rle\", argv[1]);\nwhile((destination = fopen(name, \"wb\")) == NULL){\n</code></pre>\n\n<blockquote>\n  <p>instead what I want. What do I miss?</p>\n</blockquote>\n\n<p>Well, you miss that you need to put data into <code>str</code></p>\n\n<p>This code</p>\n\n<pre><code>char str[BUF_SIZE];\nfwrite(str, sizeof(str), 1, destination);\n</code></pre>\n\n<p>just writes an uninitialized variable to the file.</p>\n\n<p>I'll not give you a complete solution but here is something that you can start with and then figure the rest out yourself.</p>\n\n<pre><code>void compress_file(FILE *source, FILE *destination){\n\n    char str[BUF_SIZE];\n    int index = 0;\n\n    int repeat_count = 0;\n    int previous_character = EOF;\n    int current_character;\n\n    while((current_character = fgetc(source)) != EOF){\n        if(current_character != previous_character) {\n\n            if (previous_character != EOF) {\n                // Save the values to str\n                str[index++] = repeat_count;\n                str[index++] = previous_character;\n            }\n\n            previous_character = current_character;\n            repeat_count = 1;\n        }\n        else{\n            repeat_count++;\n        }\n    }\n    if (repeat_count != 0)\n    {\n        str[index++] = repeat_count;\n        str[index++] = previous_character;\n    }\n\n    fwrite(str, index, 1, destination);\n}\n</code></pre>\n\n<p>EXAMPLE 1:</p>\n\n<p>Let's say a file.txt is:</p>\n\n<pre><code>ABBCCC\n</code></pre>\n\n<p>On linux it can be displayed hexadecimal like this:</p>\n\n<pre><code># hexdump -C file.txt\n00000000  41 42 42 43 43 43                                 |ABBCCC|\n</code></pre>\n\n<p>After running the program, you have:</p>\n\n<pre><code>hexdump -C file.txt.rle\n00000000  01 41 02 42 03 43                                 |.A.B.C|\n</code></pre>\n\n<p>EXAMPLE 2:</p>\n\n<p>Let's say that file.txt is like</p>\n\n<pre><code># hexdump -C file.txt\n00000000  20 21 20 20 8f 8f 21 21  64 60 70 20 21 90 90     | !  ..!!d`p !..|\n</code></pre>\n\n<p>the result will be</p>\n\n<pre><code># hexdump -C file.txt.rle\n00000000  01 20 01 21 02 20 02 8f  02 21 01 64 01 60 01 70  |. .!. ...!.d.`.p|\n00000010  01 20 01 21 02 90                                 |. .!..|\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530087523, "post_id": 51057493, "comment_id": 89105941, "body": "Thank you for the explanation I understood a lot more! There is only one problem I still can&#39;t get the result I want, I am getting something like: <code>0x01&gt;2&lt;0x01&gt;0&lt;0x01&gt; &lt;0x01&gt;2&lt;0x01&gt;1&lt;0x01&gt; ... &lt;0x01&gt;9&lt;0x01&gt;0&lt;0x02&gt;</code> and when I drag this output file to atom or sublime it gives me my input file is it what it is supposed to do? Because I am trying to get something like: 01 20 01 21 02 20 02 8F 02 21 01 64 01 60 01 70 01 20 01 21 02 90  Sorry if this is a stupid question"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "reply_to_user": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "edited": false, "score": 0, "creation_date": 1530092454, "post_id": 51057493, "comment_id": 89108906, "body": "@C.J Well, Can you update your question to precise exactly what is the input format (I though that the <code>20 20 21</code>... was the hexudecimal code of characters) and What output you expect (text/binary numbers, characters or characters code...)"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1530086293, "last_edit_date": 1592644375, "creation_date": 1530086293, "answer_id": 51057493, "question_id": 51055250, "link": "https://stackoverflow.com/questions/51055250/rle-algorithm-should-compress-bytes-in-c/51057493#51057493", "title": "RLE algorithm should compress bytes in c", "body": "<p>As pointed in comments, you have two problems:</p>\n<ul>\n<li>Usage of <code>printf</code> instead of <code>sprintf</code>,</li>\n<li>Writting to file what you've counted.</li>\n</ul>\n<h1>Name Creation</h1>\n<pre><code>char name = printf(&quot;%s.rle&quot;, argv[1]);\ndestination = fopen(&amp;name, &quot;wb&quot;);\n</code></pre>\n<p>The first line will store the number of characters in <code>argv[1]</code> plus 4 into <code>name</code>. Since, from <a href=\"https://linux.die.net/man/3/printf\" rel=\"nofollow noreferrer\"><code>man printf</code></a>:</p>\n<blockquote>\n<p>Upon successful return, these functions return the number of characters printed (excluding the null byte used to end output to strings).</p>\n</blockquote>\n<p>The second line is more problematic : you ask <code>fopen</code> to open a file giving it a pointer to char instead of a read string.</p>\n<p>One correct way to do what you want is:</p>\n<pre><code>/* reserve memory to store file name\n   NOTE: 256 here might not large enough*/\nchar name[256];\n/* fill name array with original name + '.rle' \n   The return of sprintf is tested to assert that its size was enough */    \nif (snprintf(name, sizeof name, &quot;%s.rle&quot;, argv[1]) &gt;= sizeof name)\n{\n    fprintf(stderr, &quot;name variable is not big enough to store destination filename&quot;);\n}\n       \n</code></pre>\n<h1>Writting to file</h1>\n<p>The code</p>\n<pre><code>char str[BUF_SIZE];\nfwrite(str, sizeof(str), 1, destination);\n     \n</code></pre>\n<p>reserve a big array, and writes it to file, without initializing it. To do what you want, you can have this approach:</p>\n<ul>\n<li>make a function that will only write two characters in file: the number of character found and the character itself</li>\n<li>call this function each time needed (at character changing, but not when one of character is EOF...)</li>\n</ul>\n<p>Let's look at :</p>\n<pre><code>void write_char_to_file(FILE *f, int count, char car)\n{\n    /* char array to be stored in file */\n    char str[2];   \n    /* number of repeating characters */\n    str[0] = count;\n    /* the character */\n    str[1] = car;\n    /* write it to file */\n    fwrite(str, sizeof str, 1, f);    \n}\n</code></pre>\n<p>This function has two potential problems:</p>\n<ul>\n<li>It doesn't handle <code>char</code> overflow (what if <code>count</code> is over 256?),</li>\n<li>It doesn't test the return of <code>fwrite</code>.</li>\n</ul>\n<p>Then, when this function should be called, when the current character changes:</p>\n<pre><code>EOF\u00a0A A B C C EOF\n</code></pre>\n<p>In this example, we have 4 characters changes, but we want only 3 writting in the file, so:</p>\n<ul>\n<li>Character changing when previous is EOF must be ignored (else we would write something like <code>0 (char)EOF</code> at file starting),</li>\n<li>One writting must be added after <code>while</code> loop since, when the last reading gives <code>EOF</code>, we still have <code>2 C</code> to write to file.</li>\n</ul>\n<p>Let's look at the code:</p>\n<pre><code>while((current_character = fgetc(source)) != EOF) {\n    if(current_character != previous_character) { \n        /* ignore initial change */            \n        if (previous_character != EOF) {  \n            write_char_to_file(destination, repeat_count, previous_character);\n        }\n        previous_character = current_character;\n        repeat_count = 1;\n    } else {\n        repeat_count++;\n    }\n}\n/* write last change */\nwrite_char_to_file(destination, repeat_count, previous_character);\n</code></pre>\n<p>This code have a problem too: what if the input file is empty? (first read gives <code>EOF</code>)</p>\n<hr />\n<p>The complete code:</p>\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#define BUF_SIZE 5096\n\nvoid write_char_to_file(FILE *f, int count, char car)\n{\n    /* char array to be stored in file */\n    char str[2];   \n    /* number of repeating characters */\n    str[0] = count;\n    /* the character */\n    str[1] = car;\n    /* write it to file */\n    fwrite(str, sizeof str, 1, f);    \n}\n\nvoid compress_file(FILE *source, FILE *destination)\n{\n    int repeat_count = 0;\n    int previous_character = EOF;\n    int current_character;\n\n    while((current_character = fgetc(source)) != EOF) {\n        if(current_character != previous_character) {            \n            if (previous_character != EOF) {  \n                write_char_to_file(destination, repeat_count, previous_character);\n            }\n            previous_character = current_character;\n            repeat_count = 1;\n        } else {\n            repeat_count++;\n        }\n    }\n    write_char_to_file(destination, repeat_count, previous_character);\n}\n\nint main(int argc, char **argv) {\n    if(argc != 2) {\n        fprintf(stderr, &quot;Wrong argument number\\n&quot;);\n        exit(1);\n    } \n\n    FILE *source = fopen(argv[1], &quot;rb&quot;);\n    if(source == NULL) {\n        fprintf(stderr, &quot;Cannot open the file to be read\\n&quot;);\n        exit(1);\n    }\n\n    FILE *destination;\n    /* reserve memory to store file name\n       NOTE: 256 here might not large enough*/\n    char name[256];\n    /* fill name array with original name + '.rle' \n       The return of sprintf is tested to assert that its size was enough */    \n    if (snprintf(name, sizeof name, &quot;%s.rle&quot;, argv[1]) &gt;= sizeof name)\n    {\n        fprintf(stderr, &quot;name variable is not big enough to store destination filename&quot;);\n    }\n    \n    /* while is not needed here, if do the job */\n    if((destination = fopen(name, &quot;wb&quot;)) == NULL) {\n        fprintf(stderr, &quot;Can't create the file to be written\\n&quot;);\n        exit(1);\n    }\n    \n    compress_file(source, destination);\n    \n    int error;\n    error = fclose(source);\n    if(error != 0) {\n        fprintf(stderr, &quot;Error: fclose failed for source file\\n&quot;);\n    }\n    error = fclose(destination);\n    if(error != 0) {\n        fprintf(stderr, &quot;Error: fclose failed for destination file\\n&quot;);\n    }\n    \n    /* main must return a integer */\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 9997902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3111678624a82b5d8235639627fa6ae?s=128&d=identicon&r=PG&f=1", "display_name": "C.J", "link": "https://stackoverflow.com/users/9997902/c-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 51057382, "answer_count": 2, "score": 1, "last_activity_date": 1530100259, "creation_date": 1530078085, "last_edit_date": 1530093371, "question_id": 51055250, "link": "https://stackoverflow.com/questions/51055250/rle-algorithm-should-compress-bytes-in-c", "title": "RLE algorithm should compress bytes in c", "body": "<p>I know there are too many questions about this algorithm but I couldn't really find a good answer for compressing the bytes. I am kind of a newbie in C. I have the following code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n//compress function here...\n\nint main(int argc, char **argv) {\n\n    if(argc != 2){\n        fprintf(stderr, \"Wrong argument number\\n\");\n        exit(1);\n    } \n\n    FILE *source = fopen(argv[1], \"rb\");\n    if(source == NULL){\n        fprintf(stderr, \"Cannot open the file to be read\\n\");\n        exit(1);\n    }\n\n    FILE *destination;\n    char name = printf(\"%s.rle\", argv[1]);\n    while((destination = fopen(&amp;name, \"wb\")) == NULL){\n        fprintf(stderr, \"Can't create the file to be written\\n\");\n        exit(1);\n    }\n\n    compress_file(source, destination);\n\n    int error;\n    error = fclose(source);\n    if(error != 0){\n        fprintf(stderr, \"Error: fclose failed for source file\\n\");\n    }\n    error = fclose(destination);\n    if(error != 0){\n        fprintf(stderr, \"Error: fclose failed for destination file\\n\");\n    }\n}\n</code></pre>\n\n<p>If this is test.c and the executable is test. I need to make this work on terminal/command prompt as \"./test file.txt\". My file.txt includes something like (bytes):</p>\n\n<p>20 21 20 20 8F 8F 21 21 64 60 70 20 21 90 90</p>\n\n<p>and the desired output is:</p>\n\n<p>01 20 01 21 02 20 02 8F 02 21 01 64 01 60 01 70 01 20 01 21 02 90</p>\n\n<p>My code create a file and that file includes:</p>\n\n<p>0b00 0000 0106 0000 0000 0000 0000 0000\n0000 0000 0a </p>\n\n<p>instead what I want. What do I miss? </p>\n\n<p>Also I want my file to be named as file.txt.rle but it has no name.</p>\n\n<p>EDIT:</p>\n\n<pre><code>char name[30];\nsprintf(name, \"%s.rle\", argv[1]);\n</code></pre>\n\n<p>solved the problem for naming.</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1530077771, "post_id": 51055147, "comment_id": 89101002, "body": ".o file means gcc create object file"}, {"owner": {"reputation": 467, "user_id": 8106002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e477ad83a0db8ad842418b2a4ee15fa?s=128&d=identicon&r=PG&f=1", "display_name": "pat", "link": "https://stackoverflow.com/users/8106002/pat"}, "edited": false, "score": 0, "creation_date": 1530078018, "post_id": 51055147, "comment_id": 89101088, "body": "When you compile a source file (.c), it generats an object file (.o). In this scenario, it links 3 object files file1.o, file2.o, file3.o to create an executable file <code>file1</code>."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 467, "user_id": 8106002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e477ad83a0db8ad842418b2a4ee15fa?s=128&d=identicon&r=PG&f=1", "display_name": "pat", "link": "https://stackoverflow.com/users/8106002/pat"}, "edited": false, "score": 0, "creation_date": 1530078464, "post_id": 51055147, "comment_id": 89101261, "body": "@Ph\u1ea1mAnhTu\u1ea5n is <code>file1.o</code> the object file that has just been created?"}, {"owner": {"reputation": 243, "user_id": 9979778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PTKOxRxkt3w/AAAAAAAAAAI/AAAAAAAAAGI/6IRWleK36hU/photo.jpg?sz=128", "display_name": "Abhishek Jaiswal", "link": "https://stackoverflow.com/users/9979778/abhishek-jaiswal"}, "edited": false, "score": 0, "creation_date": 1530078501, "post_id": 51055147, "comment_id": 89101283, "body": "Your Question and Description of the question does not match. Change .o to -o in question."}, {"owner": {"reputation": 467, "user_id": 8106002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e477ad83a0db8ad842418b2a4ee15fa?s=128&d=identicon&r=PG&f=1", "display_name": "pat", "link": "https://stackoverflow.com/users/8106002/pat"}, "edited": false, "score": 0, "creation_date": 1530078652, "post_id": 51055147, "comment_id": 89101339, "body": "There are 2 phases: 1) compile souce files to create object files and 2) link object files and lib to create executable file. <code>file1.o</code> is generated when compile file1.c"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 467, "user_id": 8106002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e477ad83a0db8ad842418b2a4ee15fa?s=128&d=identicon&r=PG&f=1", "display_name": "pat", "link": "https://stackoverflow.com/users/8106002/pat"}, "edited": false, "score": 0, "creation_date": 1530078953, "post_id": 51055147, "comment_id": 89101451, "body": "@Ph\u1ea1mAnhTu\u1ea5n Why isn&#39;t the first step in the Makefile?  Is it just assumed to compile <code>file1.c</code>?"}, {"owner": {"reputation": 467, "user_id": 8106002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e477ad83a0db8ad842418b2a4ee15fa?s=128&d=identicon&r=PG&f=1", "display_name": "pat", "link": "https://stackoverflow.com/users/8106002/pat"}, "edited": false, "score": 0, "creation_date": 1530080332, "post_id": 51055147, "comment_id": 89102102, "body": "I don&#39;t know why it isn&#39;t in the first step in the Makefile. But it has to compile the source files somewhere else. You can specify the output object name, but the default is same as source file name."}], "answers": [{"tags": [], "owner": {"reputation": 243, "user_id": 9979778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PTKOxRxkt3w/AAAAAAAAAAI/AAAAAAAAAGI/6IRWleK36hU/photo.jpg?sz=128", "display_name": "Abhishek Jaiswal", "link": "https://stackoverflow.com/users/9979778/abhishek-jaiswal"}, "is_accepted": false, "score": 1, "last_activity_date": 1530078601, "last_edit_date": 1530078601, "creation_date": 1530077885, "answer_id": 51055196, "question_id": 51055147, "link": "https://stackoverflow.com/questions/51055147/what-are-o-files-for-in-gcc-command/51055196#51055196", "title": "What are .o files for in gcc command?", "body": "<p><strong>-o file</strong></p>\n\n<p>Place output in file <code>file</code>. This applies regardless to whatever sort of output is being produced, whether it be an executable file, an object file, an assembler file or preprocessed C code. </p>\n\n<p>Since only one output file can be specified, it does not make sense to use '-o' when compiling more than one input file, unless you are producing an executable file as output. </p>\n\n<p>Here executable file produced is <code>file1</code></p>\n\n<p>If '-o' is not specified, the default is to put an executable file in a.out, the object file for source.suffix in source.o, its assembler file in source.s, and all preprocessed C source on standard output. </p>\n\n<p>.o files are compiled object file of your c code file.</p>\n\n<p>Qouted here -> <a href=\"http://tigcc.ticalc.org/doc/comopts.html\" rel=\"nofollow noreferrer\">GCC Command-Line Options</a></p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1530078004, "creation_date": 1530078004, "answer_id": 51055229, "question_id": 51055147, "link": "https://stackoverflow.com/questions/51055147/what-are-o-files-for-in-gcc-command/51055229#51055229", "title": "What are .o files for in gcc command?", "body": "<p>They are <a href=\"https://en.wikipedia.org/wiki/Object_file\" rel=\"nofollow noreferrer\">object files</a>.</p>\n\n<p>Quoting from the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Overall-Options.html#Overall-Options\" rel=\"nofollow noreferrer\">gcc online manual</a></p>\n\n<blockquote>\n  <p>By default, the object file name for a source file is made by replacing the suffix \u2018.c\u2019, \u2018.i\u2019, \u2018.s\u2019, etc., with \u2018.o\u2019.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1065, "user_id": 9321816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aebb9617437fe8e714437ddc889a6ea?s=128&d=identicon&r=PG&f=1", "display_name": "wookiekim", "link": "https://stackoverflow.com/users/9321816/wookiekim"}, "is_accepted": false, "score": 0, "last_activity_date": 1530078046, "creation_date": 1530078046, "answer_id": 51055239, "question_id": 51055147, "link": "https://stackoverflow.com/questions/51055147/what-are-o-files-for-in-gcc-command/51055239#51055239", "title": "What are .o files for in gcc command?", "body": "<blockquote>\n  <p>A file ending in .o is an object file. The compiler creates an object file for each source file, before linking them together, into the final executable.</p>\n</blockquote>\n\n<p>from <a href=\"https://stackoverflow.com/questions/2186246/what-is-o-file\">this question</a>.</p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6599, "favorite_count": 1, "closed_date": 1530085811, "answer_count": 3, "score": 1, "last_activity_date": 1530078601, "creation_date": 1530077650, "question_id": 51055147, "link": "https://stackoverflow.com/questions/51055147/what-are-o-files-for-in-gcc-command", "closed_reason": "Duplicate", "title": "What are .o files for in gcc command?", "body": "<pre><code>gcc -o file1 file1.o file2.o file3.o\n</code></pre>\n\n<p>I don't have much experience with C and have found the above in a <code>Makefile</code> on our systems.  </p>\n\n<p>What are <code>.o</code> files and what is file1.o in this scenario?  Is it related to <code>file1</code>?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1530074854, "post_id": 51054548, "comment_id": 89100090, "body": "You should also post an input file for which the program doesn&#39;t work as expected"}, {"owner": {"reputation": 125, "user_id": 5116574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-niD0XfxEn1I/AAAAAAAAAAI/AAAAAAAAALg/J54bT67C9h0/photo.jpg?sz=128", "display_name": "mohamed tarek", "link": "https://stackoverflow.com/users/5116574/mohamed-tarek"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1530074931, "post_id": 51054548, "comment_id": 89100111, "body": "I design it to read from stream"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1530074983, "post_id": 51054548, "comment_id": 89100129, "body": "Not the problem, but you&#39;re missing <code>#include &lt;stdio.h&gt;</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1530075064, "post_id": 51054548, "comment_id": 89100154, "body": "<code>f(arr[pos] == &#39;&#47;&#39; &amp;&amp;  arr[pos+1] == &#39;&#47;&#39;)</code> you access invalid locations beyond the array when <code>pos</code> is <code>MAXSIZE - 1</code> and <code>MAXSIZE</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 4, "creation_date": 1530075308, "post_id": 51054548, "comment_id": 89100213, "body": "Here&#39;s the issue: <code>uncomentedBuffer[pos] = arr[pos];</code>. Use another variable for indexing <code>uncomentedBuffer</code>"}, {"owner": {"reputation": 2287, "user_id": 9121368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c30c89b82743b893ea17c67a7626f8?s=128&d=identicon&r=PG&f=1", "display_name": "I. Ahmed", "link": "https://stackoverflow.com/users/9121368/i-ahmed"}, "edited": false, "score": 0, "creation_date": 1530075444, "post_id": 51054548, "comment_id": 89100255, "body": "What output you get for sample input <b>abcd//ade</b>? I received correct output <b>abcd</b>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530076271, "post_id": 51054548, "comment_id": 89100480, "body": "Perhaps reading the file with <code>fgets</code> (or POSIX <code>getline</code>) for a <i>line-oriented</i> approach to the read would simplify things...."}, {"owner": {"reputation": 1723, "user_id": 6549598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/m92gQ.jpg?s=128&g=1", "display_name": "nimi0112", "link": "https://stackoverflow.com/users/6549598/nimi0112"}, "edited": false, "score": 0, "creation_date": 1530077114, "post_id": 51054548, "comment_id": 89100743, "body": "what is the error you are getting?"}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1530077510, "post_id": 51054548, "comment_id": 89100917, "body": "The main error has been found, but here is another error: Your input may be smaller than MAXSIZE, but you always go through the whole of <code>Buffer</code>, which will give you random output after the correctly processed text. You should also stop reading input when <code>Buffer</code> is filled."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8680478"}, "edited": false, "score": 0, "creation_date": 1530080416, "post_id": 51054548, "comment_id": 89102145, "body": "What do you mean by <i>&quot;single comment line&quot;</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1530078907, "post_id": 51055291, "comment_id": 89101436, "body": "Agree... But also notice that a) <code>(pos &lt;= MAXSIZE )</code> is wrong. Should be <code>(pos &lt; MAXSIZE-1 )</code> and b) <code>scomment</code> isn&#39;t needed at all and c) the inner loop may cause an infinite loop if last line is a comment with no newline. It should be more like <code>while(pos &lt; MAXSIZE &amp;&amp; arr[pos] != &#39;\\n&#39;)</code> and d) there are a number of unused variables"}], "tags": [], "owner": {"reputation": 434, "user_id": 6088168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338514626174658/picture?type=large", "display_name": "Hugo Sartori", "link": "https://stackoverflow.com/users/6088168/hugo-sartori"}, "is_accepted": true, "score": 1, "last_activity_date": 1530085213, "last_edit_date": 1530085213, "creation_date": 1530078264, "answer_id": 51055291, "question_id": 51054548, "link": "https://stackoverflow.com/questions/51054548/why-this-program-to-remove-all-comments-doesnt-worked/51055291#51055291", "title": "why this program to remove all comments doesn&#39;t worked?", "body": "<p>Your uncomented string is initialized with a bunch of <code>'\\0'</code> (<em>nul-characters</em>), which signals the end of the string. Your are ignoring a commented position of the input string, and leaving a bunch of <code>'\\0'</code> behind.</p>\n\n<p>A solution would be to create a specific counter to avoid leaving trash in the uncomented string:</p>\n\n<pre><code>void uncommen(char *arr) \n{\n    int pos = 0, auxPos = 0 ,nBS = 0, nAS = 0 ,scomment = OFF, bcomment = OFF;\n    while(pos &lt;= MAXSIZE )\n    {\n        if(arr[pos] == '/' &amp;&amp;  arr[pos+1] == '/')\n        {\n            scomment = ON;\n            while(scomment == ON &amp;&amp; arr[pos] != '\\n')\n            {\n                pos++;\n            }\n            scomment = OFF;\n        }\n        uncomentedBuffer[auxPos] = arr[pos];\n        pos++;\n        auxPos++;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 5116574, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-niD0XfxEn1I/AAAAAAAAAAI/AAAAAAAAALg/J54bT67C9h0/photo.jpg?sz=128", "display_name": "mohamed tarek", "link": "https://stackoverflow.com/users/5116574/mohamed-tarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 51055291, "answer_count": 1, "score": 1, "last_activity_date": 1530085213, "creation_date": 1530073719, "question_id": 51054548, "link": "https://stackoverflow.com/questions/51054548/why-this-program-to-remove-all-comments-doesnt-worked", "title": "why this program to remove all comments doesn&#39;t worked?", "body": "<p><strong>this is my 21 trial really i can't find where should i search , the following code is to remove single comment line</strong> \ni'm using buffer to collect all data then i tried to filer them but i suspect on line inside if statement </p>\n\n<pre><code> if(arr[pos] == '/' &amp;&amp;  arr[pos+1] == '/')\n</code></pre>\n\n<p>but i can't find difference till now\nthis is the whole code</p>\n\n<pre><code>#define         MAXSIZE         200\n#define         ON              1\n#define         OFF             0\n\nchar uncomentedBuffer[MAXSIZE];\nchar Buffer[MAXSIZE];\nchar comment[MAXSIZE];\nvoid uncommen(char *arr);\n//int getLine(char *arr, int lim);\nint main(void)\n{\n    int c, pos = 0;\n    while((c = getchar()) != EOF)\n    {\n        Buffer[pos] = c;\n        pos++;\n    }\n    uncommen(Buffer);\n    printf(\"%s\",uncomentedBuffer);\n    return 0;\n}\n\nvoid uncommen(char *arr)\n{\n    int pos = 0 ,nBS = 0, nAS = 0 ,scomment = OFF, bcomment = OFF;\n    while(pos &lt;= MAXSIZE )\n    {\n        if(arr[pos] == '/' &amp;&amp;  arr[pos+1] == '/')\n        {\n            scomment = ON;\n            while(scomment == ON &amp;&amp; arr[pos] != '\\n')\n            {\n                pos++;\n            }\n            scomment = OFF;\n        }\n        uncomentedBuffer[pos] = arr[pos];\n        pos++;\n    }\n}\n</code></pre>\n\n<p>i need help</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1530072298, "post_id": 51054366, "comment_id": 89099508, "body": "<i>but i assign the array to a pointer and return that pointer, is it ok?</i> -- no."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530072453, "post_id": 51054366, "comment_id": 89099544, "body": "The problem is <code>struct Student *p, *p1;</code> declare two <b>uninitialized pointers</b> that do not point to any valid storage. You need to allocate storage with <code>malloc</code> or <code>calloc</code> or <code>realloc</code>. (you also need to validate the <b>return</b> of <code>scanf</code> every time -- or you are just asking for trouble."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1530072847, "post_id": 51054366, "comment_id": 89099633, "body": "Playing with pointers does not change the fact that the array is a local variable of the <code>input</code> function and will therefore be destroyed when that function returns"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530073583, "post_id": 51054366, "comment_id": 89099800, "body": "<code>struct Student s[n]; ... p = s; return p;</code> attempts to returns the address of local  <code>struct Student s[n];</code>.  That <a href=\"https://www.idiomsandslang.com/train-left-station/\" rel=\"nofollow noreferrer\">train have left the station</a>.  <a href=\"http://www.azquotes.com/quote/646063\" rel=\"nofollow noreferrer\">It is gone</a>. It is <i>undefined behavior</i> (UB).  Don&#39;t do that."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1530075702, "post_id": 51054366, "comment_id": 89100326, "body": "Related or even a duplicate to <a href=\"https://stackoverflow.com/q/47028165/694576\">stackoverflow.com/q/47028165/694576</a>"}], "answers": [{"tags": [], "owner": {"reputation": 434, "user_id": 6088168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338514626174658/picture?type=large", "display_name": "Hugo Sartori", "link": "https://stackoverflow.com/users/6088168/hugo-sartori"}, "is_accepted": true, "score": 1, "last_activity_date": 1530075794, "creation_date": 1530075794, "answer_id": 51054843, "question_id": 51054366, "link": "https://stackoverflow.com/questions/51054366/c-passing-a-pointer-to-an-array-to-a-function-to-print-the-array/51054843#51054843", "title": "C - Passing a pointer to an array to a function to print the array", "body": "<p>You are defining your array as a <strong>local variable</strong>. It means that it will no longer exist after the function ends. To avoid this, declare your array as a pointer and use <strong>malloc</strong> to initialize it:</p>\n\n<pre><code>struct Student *s = malloc(sizeof(Student) * n);\n</code></pre>\n\n<p>It will behave as a regular array and you will be able to use itself as the function return.</p>\n"}], "owner": {"reputation": 317, "user_id": 9965330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98aa2785e28665f32e5e04a0c8a274c4?s=128&d=identicon&r=PG&f=1", "display_name": "Thuan Nguyen", "link": "https://stackoverflow.com/users/9965330/thuan-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 51054843, "answer_count": 1, "score": 1, "last_activity_date": 1530075794, "creation_date": 1530072098, "question_id": 51054366, "link": "https://stackoverflow.com/questions/51054366/c-passing-a-pointer-to-an-array-to-a-function-to-print-the-array", "title": "C - Passing a pointer to an array to a function to print the array", "body": "<p>I have a code like this for a student management system. The input function works fine but I haven't figured out why  my output function stop immediately when i call it.( I know that i can not return a local array from a function in C, but i assign the array to a pointer and return that pointer, is it ok?)</p>\n\n<p>Here is my code:</p>\n\n<pre><code> struct Student\n{\n\n    char name[50];\n    char birth[25];\n    char gender[10];\n    float math, physics;\n\n};\n\nstruct Student* input(int n, struct Student *p)\n{\n    int i, id = 1;\n\n    struct Student s[n];\n\n    getchar();\n\n    for(i = 0; i &lt; n; i++)\n    {\n\n\n        printf(\"Name: \");\n        fgets(s[i].name, 50, stdin);\n        s[i].name[strlen(s[i].name)-1] = '\\0';\n\n        printf(\"Date of birth: \");\n        fgets(s[i].birth,25,stdin);\n        s[i].birth[strlen(s[i].birth)-1] = '\\0';\n\n        printf(\"Gender: \");\n        fgets(s[i].gender,10,stdin);\n        s[i].gender[strlen(s[i].gender)-1] = '\\0';\n\n        printf(\"Math = \");\n        scanf(\"%f\", &amp;s[i].math);\n\n        printf(\"Physics = \");\n        scanf(\"%f\", &amp;s[i].physics);\n\n        getchar();\n    }\n    p = s;\nreturn p;\n}\n\n\nvoid outPut(int n, struct Student *p)\n{   \n    int i;\n    for(i = 0; i &lt; n; i++)\n    {\n        printf(\"%s %s %s %f %f\\n\",  p[i].name, p[i].birth, p[i].gender, p[i].math, p[i].physics);\n    }\n}\n\n\nint main()\n{\n    int n;\n\n    struct Student *p, *p1;\n    int choice;\n\n    printf(\"-----------Student Management-----------\");\n    printf(\"\\n1. Add new students.\\n2. Print student list.\\n\");\n\n    do\n    {\n        printf(\"Your choice = \");\n        scanf(\"%d\", &amp;choice);\n        switch(choice)\n        {\n            case 1:\n                printf(\"Number of students = \");\n                scanf(\"%d\", &amp;n);\n                input(n,p);\n                break;\n\n            case 2:\n                outPut(n,p);\n                break;\n\n        }\n    }\n    while(choice!=0);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "global-variables"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1530072167, "post_id": 51054308, "comment_id": 89099478, "body": "If you have multiple definition for a global and none of them are marked as weak, the linker will fail. You cannot have two definitions with the same name in <code>C</code>."}, {"owner": {"reputation": 119, "user_id": 7232719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086b91dd41edc94c4ef5f7c205db6522?s=128&d=identicon&r=PG&f=1", "display_name": "Lusha Li", "link": "https://stackoverflow.com/users/7232719/lusha-li"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1530072686, "post_id": 51054308, "comment_id": 89099596, "body": "@Ajay Brahmakshatriya, I mean the case when we have one weak and one strong or both weak.  If we don&#39;t have extern keyword, &quot;int x;&quot; is a defintion but it&#39;s weak since it doesn&#39;t have an initialization."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1530073154, "post_id": 51054308, "comment_id": 89099700, "body": "No, <code>int x;</code> without extern and without initialization is not a weak definition. It is actually the same just initialized to zero in this case."}, {"owner": {"reputation": 56, "user_id": 4568461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c51cdb33e8e29a770b80eb0ebbf484?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Yin", "link": "https://stackoverflow.com/users/4568461/xavier-yin"}, "edited": false, "score": 0, "creation_date": 1530073349, "post_id": 51054308, "comment_id": 89099742, "body": "&quot;weak&quot; is not mentioned in C standard and should be toolchain-defined. for example ARMCC and IAR uses keyword &quot;__weak&quot; and GCC uses &quot;__attribute__((weak))&quot;."}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530084439, "post_id": 51054308, "comment_id": 89104145, "body": "It is extern by default."}, {"owner": {"reputation": 119, "user_id": 7232719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086b91dd41edc94c4ef5f7c205db6522?s=128&d=identicon&r=PG&f=1", "display_name": "Lusha Li", "link": "https://stackoverflow.com/users/7232719/lusha-li"}, "reply_to_user": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530092624, "post_id": 51054308, "comment_id": 89109014, "body": "@purec, doesn&#39;t variable extern explicitly and function extern implicitly? Therefore, if we have &quot;int x;&quot;, it&#39;s a defintion.  We allocate the memory for x and give a garbage value to it.  If we have &quot;extern int x;&quot;, we only have a declaration of x and no memory is assigned to it."}, {"owner": {"reputation": 119, "user_id": 7232719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086b91dd41edc94c4ef5f7c205db6522?s=128&d=identicon&r=PG&f=1", "display_name": "Lusha Li", "link": "https://stackoverflow.com/users/7232719/lusha-li"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1530092991, "post_id": 51054308, "comment_id": 89109238, "body": "@Ajay Brahmakshatriya, I don&#39;t know if this source is reliable.  Uninitialized global variables get weak symbols from (<a href=\"https://www.geeksforgeeks.org/how-linkers-resolve-multiply-defined-global-symbols/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a>) The code I posted above actually compiled and ran without any warnings.  Does it mean they are not both strong defintions?"}, {"owner": {"reputation": 119, "user_id": 7232719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086b91dd41edc94c4ef5f7c205db6522?s=128&d=identicon&r=PG&f=1", "display_name": "Lusha Li", "link": "https://stackoverflow.com/users/7232719/lusha-li"}, "reply_to_user": {"reputation": 56, "user_id": 4568461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c51cdb33e8e29a770b80eb0ebbf484?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Yin", "link": "https://stackoverflow.com/users/4568461/xavier-yin"}, "edited": false, "score": 0, "creation_date": 1530093048, "post_id": 51054308, "comment_id": 89109269, "body": "@Xavier Yin, thanks for your reply.  Do you know where we can check the definition of weak and strong linkage?"}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530093174, "post_id": 51054308, "comment_id": 89109359, "body": "Compiler regards &quot;int x;&quot; as declaration in this case. I personally always use extern keyword."}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530093847, "post_id": 51054308, "comment_id": 89109800, "body": "You can print address if you want."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1530094172, "post_id": 51054308, "comment_id": 89110047, "body": "@LushaLi this is a non standard behavior from <code>gcc</code>. Actually C doesn&#39;t even have the notion of weak symbols. According to the standard, you are not allowed to define the same global variable twice. Even if it is across modules. Multiple declarations are okay. I think <code>gcc</code> is providing this extension in case programmer forget to write <code>extern</code>. This also means you shouldn&#39;t rely on this behavior. Because other compilers won&#39;t."}, {"owner": {"reputation": 119, "user_id": 7232719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086b91dd41edc94c4ef5f7c205db6522?s=128&d=identicon&r=PG&f=1", "display_name": "Lusha Li", "link": "https://stackoverflow.com/users/7232719/lusha-li"}, "reply_to_user": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530096545, "post_id": 51054308, "comment_id": 89111596, "body": "@purec, I double checked another book (which should be reliable). &quot;int x;&quot; declares and defines but &quot;extern int x;&quot; only declares.  Here, two x share the same address because of linkage."}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530097735, "post_id": 51054308, "comment_id": 89112364, "body": "We should continue in the chat if you want. <a href=\"https://chat.stackoverflow.com/rooms/173873/memory-allocation-for-global-symbols-defined-at-multiple-places-in-c\">chat.stackoverflow.com/rooms/173873/&hellip;</a>"}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1530098281, "post_id": 51054308, "comment_id": 89112695, "body": "It is called tentative definition. <a href=\"http://docwiki.embarcadero.com/RADStudio/Tokyo/en/Tentative_Definitions\" rel=\"nofollow noreferrer\">docwiki.embarcadero.com/RADStudio/Tokyo/en/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 4568461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c51cdb33e8e29a770b80eb0ebbf484?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Yin", "link": "https://stackoverflow.com/users/4568461/xavier-yin"}, "is_accepted": false, "score": 0, "last_activity_date": 1530073063, "creation_date": 1530073063, "answer_id": 51054469, "question_id": 51054308, "link": "https://stackoverflow.com/questions/51054308/memory-allocation-for-global-symbols-defined-at-multiple-places-in-c/51054469#51054469", "title": "memory allocation for global symbols defined at multiple places in C", "body": "<p>If each of the two .c files declares its own global int x as your example, two different variables in memory are allocated.</p>\n\n<p>Note that they live in different scope so the symbols are not accessed from the other file. That is, each file always access its own int x by the global variable name \"x\". </p>\n\n<p>Your compiler should complain if you attempt to <strong>extern</strong> a global variable to any source file where a global variable with the same name exists.</p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 7232719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086b91dd41edc94c4ef5f7c205db6522?s=128&d=identicon&r=PG&f=1", "display_name": "Lusha Li", "link": "https://stackoverflow.com/users/7232719/lusha-li"}, "edited": false, "score": 0, "creation_date": 1530093695, "post_id": 51054685, "comment_id": 89109682, "body": "Thanks for your answer, but I am asking a different question."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 119, "user_id": 7232719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086b91dd41edc94c4ef5f7c205db6522?s=128&d=identicon&r=PG&f=1", "display_name": "Lusha Li", "link": "https://stackoverflow.com/users/7232719/lusha-li"}, "edited": false, "score": 0, "creation_date": 1530107855, "post_id": 51054685, "comment_id": 89119294, "body": "@LushaLi Is that more what you wanted to know?"}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1530107826, "last_edit_date": 1530107826, "creation_date": 1530074708, "answer_id": 51054685, "question_id": 51054308, "link": "https://stackoverflow.com/questions/51054308/memory-allocation-for-global-symbols-defined-at-multiple-places-in-c/51054685#51054685", "title": "memory allocation for global symbols defined at multiple places in C", "body": "<p>Since one of the C files is directly <code>#include</code>-d in the other, they are in the same translation unit.  (This, by the way, is not recommended\u2014programmers are used to header files being named <code>*.h</code>, not <code>*.c</code>, and to <code>*.c</code> files being compiled on their own.)  As far as the compiler is concerned, the programmer just copied-and-pasted the contents of one file into the other.  There is a forward declaration of <code>x</code>, but only a single definition.</p>\n\n<p>If you put the <code>extern</code> declaration into a separate translation unit and compiled them into separate object files, only the one containing the definition <code>int x = 15213;</code> would allocate memory, not the one containing the declaration <code>int x;</code>.  Writing <code>extern int x;</code> might make it easier to remember that <code>x</code> is defined elsewhere.  If you write two definitions of <code>x</code> and attempt to link them, the linker will give you an error.</p>\n"}], "owner": {"reputation": 119, "user_id": 7232719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086b91dd41edc94c4ef5f7c205db6522?s=128&d=identicon&r=PG&f=1", "display_name": "Lusha Li", "link": "https://stackoverflow.com/users/7232719/lusha-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530107826, "creation_date": 1530071566, "last_edit_date": 1530093298, "question_id": 51054308, "link": "https://stackoverflow.com/questions/51054308/memory-allocation-for-global-symbols-defined-at-multiple-places-in-c", "title": "memory allocation for global symbols defined at multiple places in C", "body": "<p>For global defintions that share the same name, do we allocate the memory for each of them?\nWill linkers affect how we allocate memory for these global symbols?</p>\n\n<p>The following is what I thought the possible ways of resolving this:</p>\n\n<p>1.We first allocate the memory for global variables as we encounter them in the program.  (Every definition will have the memory.)  Then linkers resolve the global symbols.</p>\n\n<p>2.After linkers resolve global symbols with same name defined at multiple places, we only allocate the memory for one definition.</p>\n\n<p>Does one of them correct?</p>\n\n<p>Example:</p>\n\n<p>b.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"a.c\"\nvoid f(void);\nint x = 15213;\nint main()\n{\n  f();\n  printf(\"x = %d\\n\", x);\n  return 0;\n}\n</code></pre>\n\n<p>a.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint x;\nvoid f()\n{\n  printf(\"x in f = %d\\n\", x);\n  x = 15212;\n}\n</code></pre>\n\n<p>The above code compiled and ran without any errors or warnings.\nThis is what I get:</p>\n\n<pre><code>x in f = 0\nx = 15212\n</code></pre>\n\n<p>Do we have one x defintion in the memory or two?</p>\n\n<p>One quick question related to this:</p>\n\n<p>Global and static variables are stored in the Data segment(DS) when initialized and block start by symbol (BSS) when uninitialized.  Even though data in BSS are unintialized, they will always be set to the default value instead of garbage value.  Is this right?</p>\n"}, {"tags": ["c", "debugging", "gcc"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1530071134, "post_id": 51054131, "comment_id": 89099289, "body": "When you <i>compile</i>, otherwise the option would be a <i>linker</i> option described in <code>man ld</code>... and <code>man ld</code> describes it this way <i>&quot; <code>-g</code>  Ignored.  Provided for compatibility with other tools.&quot;</i>"}, {"owner": {"reputation": 55, "user_id": 9460589, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StudyNPractice", "link": "https://stackoverflow.com/users/9460589/studynpractice"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530073996, "post_id": 51054131, "comment_id": 89099896, "body": "Thanks for the comment. So it putting -g on all 3 position will do."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530074624, "post_id": 51054131, "comment_id": 89100031, "body": "No need with <code>(3)</code> you are simply linking object files there. You want <code>-g</code> with <code>(1)</code> and <code>(2)</code> because you are <i>compiling</i> (the <code>-c</code>) to object files there. You want the additional debug symbols included in the object file. They will be included in the final executable where they are readable by <code>gdb</code> for debugging purposes. (they are only usable by <code>gdb</code>)  When you use <code>(3)</code>  and only provide <code>.o</code> (object) files -- they are simply passed along to <code>ld</code> for linking. You can do it all at once with <code>gcc -g a.c b.c -o ab.out</code> (you should also always include <code>-Wall -Wextra</code> for warnings)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1530075186, "post_id": 51054131, "comment_id": 89100189, "body": "So if I wanted to create a file for debugging with warnings enabled, I would use <code>gcc -Wall -Wextra -pedantic -g -o ab.out a.c b.c</code>. If I wanted to compile with optimizations I would add <code>-Ofast</code> (that&#39;s &#39;Oh&#39; not zero) or choose the optimization level <code>0-3</code> and use <code>-O#</code> where <code>#</code> is 0-3 (most optimizations are NOT enabled unless you specify a <code>-O#</code> option). A normal non-debug compile with full optimization would be <code>gcc -Wall -Wextra -pedantic -Ofast -o ab.out a.c b.c</code>. You may want to add <code>-Wshadow</code> to catch any shadowed variables (e.g. <code>i</code> declare in two different scopes). Good luck."}], "owner": {"reputation": 55, "user_id": 9460589, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StudyNPractice", "link": "https://stackoverflow.com/users/9460589/studynpractice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530070083, "creation_date": 1530070083, "question_id": 51054131, "link": "https://stackoverflow.com/questions/51054131/gcc-g-option-on-compile-or-build", "title": "gcc g option on compile or build?", "body": "<p>I know -g option is used for debugging by putting debug symbols on execute file.</p>\n\n<p>I wonder where to put -g option either compile or build may be both.</p>\n\n<hr>\n\n<p>If I have 2 .c files to build ab.out, <strong>where is the correct place to put -g option and why?</strong></p>\n\n<pre><code>gcc (1) -c -o a.o a.c\ngcc (2) -c -o b.o b.c\ngcc (3) -o ab.out a.o b.o\n</code></pre>\n"}, {"tags": ["c", "pass-by-reference", "call-by-value"], "comments": [{"owner": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "edited": false, "score": 1, "creation_date": 1530069709, "post_id": 51054056, "comment_id": 89098995, "body": "There is no concept in C to pass by reference like C++ has."}, {"owner": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "edited": false, "score": 0, "creation_date": 1530069766, "post_id": 51054056, "comment_id": 89099006, "body": "In C++ you can pass by reference -- which indirectly is passing a pointer to the field you are passing"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1530069777, "post_id": 51054056, "comment_id": 89099010, "body": "All parameters are locals to the function, C only give parameter by copy, aka value. Here <code>strcpy</code> take two pointer value"}, {"owner": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "edited": false, "score": 0, "creation_date": 1530069913, "post_id": 51054056, "comment_id": 89099029, "body": "Both are correct.   You are simulating passing by reference."}, {"owner": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "edited": false, "score": 0, "creation_date": 1530069938, "post_id": 51054056, "comment_id": 89099037, "body": "oh....I think that&#39;s why author says: &quot;simulate&quot; call-by-reference. The way C adopts is: 1. pass address by value to function 2. change value by using * operator"}, {"owner": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "edited": false, "score": 0, "creation_date": 1530069961, "post_id": 51054056, "comment_id": 89099042, "body": "right. It isn&#39;t actually passing by reference"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1530070083, "post_id": 51054056, "comment_id": 89099068, "body": "It is passing by value, and the value you are passing is the address of an object.  The callee can use that address to reference the object."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530071450, "post_id": 51054056, "comment_id": 89099351, "body": "&quot;In latter point of view, it&#39;s definitely call-by-reference.&quot; No. That is passing the pointer by value.  When an array is passed, the true argument  passed is the array converted to the address of the first element.  This is like  &quot;pass by reference&quot;.  Yet the parameter received, is a pointer, or pass by value."}, {"owner": {"reputation": 325, "user_id": 9900875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rhxM-SVSbsQ/AAAAAAAAAAI/AAAAAAAAAFo/n1-jj0Xou34/photo.jpg?sz=128", "display_name": "OregonJim", "link": "https://stackoverflow.com/users/9900875/oregonjim"}, "edited": false, "score": 0, "creation_date": 1530073156, "post_id": 51054056, "comment_id": 89099701, "body": "&quot;btw, after assignment *s = *t is held, which one is compared with &#39;\\0&#39;? *s or *t?&quot;  Neither.  The result of the expression (*s = *t) is compared with &#39;\\0&#39;.  In C, the result of an &#39;=&#39; expression is the value being assigned."}, {"owner": {"reputation": 325, "user_id": 9900875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rhxM-SVSbsQ/AAAAAAAAAAI/AAAAAAAAAFo/n1-jj0Xou34/photo.jpg?sz=128", "display_name": "OregonJim", "link": "https://stackoverflow.com/users/9900875/oregonjim"}, "reply_to_user": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "edited": false, "score": 0, "creation_date": 1530073889, "post_id": 51054056, "comment_id": 89099872, "body": "@IlanKeshet, yes, there <i>is</i> the concept of pass-by-reference in C, and this question is an example of it.  The term &quot;pass-by-reference&quot; was redefined by newer languages, but it existed and was called exactly that in C, long before C++ was invented.  See this discussion: <a href=\"https://stackoverflow.com/questions/33622787/are-pointers-considered-a-method-of-calling-by-reference-in-c?rq=1\" title=\"are pointers considered a method of calling by reference in c\">stackoverflow.com/questions/33622787/&hellip;</a>"}, {"owner": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "reply_to_user": {"reputation": 325, "user_id": 9900875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rhxM-SVSbsQ/AAAAAAAAAAI/AAAAAAAAAFo/n1-jj0Xou34/photo.jpg?sz=128", "display_name": "OregonJim", "link": "https://stackoverflow.com/users/9900875/oregonjim"}, "edited": false, "score": 0, "creation_date": 1530083154, "post_id": 51054056, "comment_id": 89103466, "body": "You are completely incorrectly. C has no concept of pass-by-reference. @OregonJim.   Even in that link you provided me the person who has the correct answer even states there is no concept of it"}, {"owner": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "reply_to_user": {"reputation": 325, "user_id": 9900875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rhxM-SVSbsQ/AAAAAAAAAAI/AAAAAAAAAFo/n1-jj0Xou34/photo.jpg?sz=128", "display_name": "OregonJim", "link": "https://stackoverflow.com/users/9900875/oregonjim"}, "edited": false, "score": 0, "creation_date": 1530083198, "post_id": 51054056, "comment_id": 89103490, "body": "@OregonJim  this is literally copy + paste from the marked answer: &quot;you cannot pass by reference in C but can use pointers as an alternative&quot;"}, {"owner": {"reputation": 325, "user_id": 9900875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rhxM-SVSbsQ/AAAAAAAAAAI/AAAAAAAAAFo/n1-jj0Xou34/photo.jpg?sz=128", "display_name": "OregonJim", "link": "https://stackoverflow.com/users/9900875/oregonjim"}, "reply_to_user": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "edited": false, "score": 0, "creation_date": 1530125090, "post_id": 51054056, "comment_id": 89128902, "body": "@IlanKeshet, I beg to differ.  We called it pass by reference in the 1970s.  The problem is, there are now multiple definitions of the term pass-by-reference.  It&#39;s merely a question of defining the term.  In C, when you pass a pointer to a function, you are passing by reference (a pointer is a REFERENCE to an object).  Whether that reference is a copy or an alias is a matter of semantics - the result is identical."}, {"owner": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "reply_to_user": {"reputation": 325, "user_id": 9900875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rhxM-SVSbsQ/AAAAAAAAAAI/AAAAAAAAAFo/n1-jj0Xou34/photo.jpg?sz=128", "display_name": "OregonJim", "link": "https://stackoverflow.com/users/9900875/oregonjim"}, "edited": false, "score": 0, "creation_date": 1530143628, "post_id": 51054056, "comment_id": 89135394, "body": "@OregonJim I do agree, you &quot;simulating&quot; passing the &quot;object&quot; by reference by passing the pointer. -- This however, in the function is still passing the pointer by value. In C, none of the arguments of the function parameters are passed by reference. They are always passed by value."}, {"owner": {"reputation": 325, "user_id": 9900875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rhxM-SVSbsQ/AAAAAAAAAAI/AAAAAAAAAFo/n1-jj0Xou34/photo.jpg?sz=128", "display_name": "OregonJim", "link": "https://stackoverflow.com/users/9900875/oregonjim"}, "reply_to_user": {"reputation": 478, "user_id": 9906369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r_zu7LSk4bY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1tWAu5bmCC_qF7xvQSMJaDeY2cBQ/mo/photo.jpg?sz=128", "display_name": "Ilan Keshet", "link": "https://stackoverflow.com/users/9906369/ilan-keshet"}, "edited": false, "score": 0, "creation_date": 1530239121, "post_id": 51054056, "comment_id": 89175036, "body": "@IlanKeshet, as I said, you are arguing semantics.  &quot;Pass-by-reference&quot; had a different meaning in the past than the one you understand.  Yes, the pointer itself is being passed by value, but by dereferencing the pointer in the function, you have access to the REFERENCE that was passed.  In other words, you can still modify the ORIGINAL object&#39;s value, even though only a COPY of the pointer was passed."}], "answers": [{"tags": [], "owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1530074203, "creation_date": 1530074203, "answer_id": 51054611, "question_id": 51054056, "link": "https://stackoverflow.com/questions/51054056/is-this-call-by-reference-or-by-value-c/51054611#51054611", "title": "Is this call by reference or by value? C", "body": "<p>C passes arguments by value, always, meaning that the called function receives a local copy of whatever the caller refers to.</p>\n\n<p>The called function can modify the received value, because it is a local copy, without affecting the original value. For example:</p>\n\n<pre><code>char *test(char *s) {\n  s++;\n  return s;\n}\n\nt = test(\"A\");\n</code></pre>\n\n<p>it's legal and shows that the parameter s can be modified without affecting the caller (which passes a literal...).</p>\n\n<p>But the strcpy() of you example does something different: it takes a pointer s, and <strong>modifies what s points to</strong>. Pointers are powerful, and they can be used to simulate \"pass by reference\" (a pointer <strong>is</strong> a reference).</p>\n\n<blockquote>\n  <p>after assignment *s = *t is held, which one is compared with '\\0'? *s or *t?</p>\n</blockquote>\n\n<p>The *s: in C, an assignment returns a value - and the value is the value of the assigned variable after the assignment is done. Writing:</p>\n\n<pre><code>if (i=3) ...\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>i=3;\nif (i) ...\n</code></pre>\n\n<p>If i was a pointer the syntax would be different but the mechanism is the same, the assignment would \"use\" the pointer and the value of the whole assignment is used as expression to be evaluated in the test.</p>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 2, "last_activity_date": 1552498221, "last_edit_date": 1552498221, "creation_date": 1530075782, "answer_id": 51054840, "question_id": 51054056, "link": "https://stackoverflow.com/questions/51054056/is-this-call-by-reference-or-by-value-c/51054840#51054840", "title": "Is this call by reference or by value? C", "body": "<p>Many people consider that idiom to be something that\u2019s neither call-by-value or call-by-reference.  For what it\u2019s worth, Kernighan and Ritchie\u2019s <em>The C Programming Language</em> does call arrays and pointers in C \u201creferences,\u201d although it uses only the term call-by-value and not call-by-reference.  That usage seems to have gone out of fashion once C++ added a different language feature called references.</p>\n\n<p>A function that accepts a pointer and dereferences it will generally compile to the same machine code as a function in a language with call-by-reference.  One difference that is not merely the absence of syntactic sugar: if the pointer argument itself is not <code>const</code>, it is possible to reassign a new value to it and make it reference something else, which \u201ccall-by-reference\u201d semantics do not allow.  In a language with call-by-reference, you could not write <code>s++</code> or <code>t++</code> to make the function arguments reference different objects!  (C strings are stored in such a way that you can add an offset to the pointer to obtain a substring, whereas most langauges store the length of the string in the first few bytes of its memory.)  However, you can mostly think of a reference <code>T&amp;</code> in C++ as equivalent to passing a <code>T *const</code> that is guaranteed not to be <code>NULL</code>, and that has an invisible asterisk in front of its name.</p>\n"}], "owner": {"reputation": 359, "user_id": 7839690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/277446997e35bd19b67a21bd7e10d641?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Lin", "link": "https://stackoverflow.com/users/7839690/andy-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 51054611, "answer_count": 2, "score": 2, "last_activity_date": 1552498221, "creation_date": 1530069611, "last_edit_date": 1552476234, "question_id": 51054056, "link": "https://stackoverflow.com/questions/51054056/is-this-call-by-reference-or-by-value-c", "title": "Is this call by reference or by value? C", "body": "<p>I'm reading a book called the c programming language authored by Brian W. Kernighan and Dennis M. Ritchie.</p>\n\n<p>The book lists code below:</p>\n\n<pre><code>void strcpy(char *s, char *t){\n    while((*s = *t) != '\\0'){\n        s++;\n        t++;\n    }\n}\n</code></pre>\n\n<p>and says:</p>\n\n<blockquote>\n  <p>Because arguments are passed by value, strcpy can use the parameters\n  <strong><em>s</em></strong> and <strong><em>t</em></strong> in any way it pleases</p>\n</blockquote>\n\n<p>which I'm not agreed with. Why arguments are passed by value?</p>\n\n<p>According to another book C how to program:</p>\n\n<blockquote>\n  <p>In C, you use pointers and the indirection operator to simulate\n  call-by reference. When calling a function with arguments that should\n  be modified, the addresses of the arguments are passed.</p>\n</blockquote>\n\n<p>In latter point of view, it's definitely call-by-reference.</p>\n\n<p>Please tell me which way is correct and why, thanks!</p>\n\n<p>btw, after assignment *s = *t is held, which one is compared with '\\0'? *s or *t?</p>\n"}, {"tags": ["c", "memset"], "comments": [{"owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "edited": false, "score": 1, "creation_date": 1530066769, "post_id": 51053705, "comment_id": 89098393, "body": "That argument is the value to set each byte to, not each 32-bit word. <code>0x0</code> is float zero, but <code>0x01010101</code> isn&#39;t 1, it&#39;s ~2.3*10**-38"}, {"owner": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "reply_to_user": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "edited": false, "score": 0, "creation_date": 1530069060, "post_id": 51053705, "comment_id": 89098884, "body": "So initialize with 0 values is okay, while 1 is dangerous?"}, {"owner": {"reputation": 1478, "user_id": 5557309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1621133335/picture?type=large", "display_name": "James Picone", "link": "https://stackoverflow.com/users/5557309/james-picone"}, "edited": false, "score": 1, "creation_date": 1530069440, "post_id": 51053705, "comment_id": 89098947, "body": "no they&#39;re both safe and defined; it&#39;s just that you can&#39;t see an array of floats to 1 with memset; the interface doesn&#39;t support it."}], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 1, "last_activity_date": 1530066975, "creation_date": 1530066975, "answer_id": 51053766, "question_id": 51053705, "link": "https://stackoverflow.com/questions/51053705/initialize-float-type-array-using-memset/51053766#51053766", "title": "initialize float-type array using memset", "body": "<p>Initializing floats to all-bytes-zero is OK (it will produce float 0.0).  But all-bytes-1 is not reasonable, because it will produce a \"garbage\" value (but the same value every time).</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1530072642, "post_id": 51054337, "comment_id": 89099587, "body": "All bits zero is <code>0.0f</code> in IEEE754, however the standard doesn&#39;t mandate such a representation"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1530072681, "last_edit_date": 1530072681, "creation_date": 1530071881, "answer_id": 51054337, "question_id": 51053705, "link": "https://stackoverflow.com/questions/51053705/initialize-float-type-array-using-memset/51054337#51054337", "title": "initialize float-type array using memset", "body": "<blockquote>\n  <p>memset(ptr,1,n*sizeof(float)). Is this legal?</p>\n</blockquote>\n\n<p>No, not to set the value of the <code>float</code> to <code>1.0f</code> as the encoding of a <code>float</code> in not the bytes <code>1,1,1,1</code> <a href=\"https://stackoverflow.com/questions/51053705/initialize-float-type-array-using-memset/51054337#comment89098393_51053705\">@James Picone</a></p>\n\n<hr>\n\n<p><code>memset(ptr,0,n*sizeof(float))</code> or better <code>memset(ptr, 0, sizeof *ptr * n)</code> will set every byte to 0. This is certainly the encoding for a <code>float</code> <code>0.0f</code>.</p>\n\n<p>To set every element of a  <code>float</code> array to <code>1.0f</code> or any value, simply  use a loop.</p>\n\n<pre><code>float init_value = 1.0f;\nfor (size_t i = 0; i &lt; n; n++) {\n   ptr[i] = init_value;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9883923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a353cf3511aa9c621c59bdaa71b44e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/9883923/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530072681, "creation_date": 1530066435, "question_id": 51053705, "link": "https://stackoverflow.com/questions/51053705/initialize-float-type-array-using-memset", "title": "initialize float-type array using memset", "body": "<p>I have a pointer <code>float *ptr</code>, after dynamic allocation with length <code>n</code>, I want to initialize this array with zero or one, so I use <code>memset(ptr,0,n*sizeof(float))</code> or <code>memset(ptr,1,n*sizeof(float))</code>. Is this legal? Because the second argument of <code>memset</code> is int-type, I'm afraid it cannot be applied to float-type.</p>\n"}, {"tags": ["c", "uuid"], "comments": [{"owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "edited": false, "score": 2, "creation_date": 1530065900, "post_id": 51053568, "comment_id": 89098207, "body": "Your OS might have libuuid available.  On mine <code>man 3 uuid</code> tells me about it.  <code>man -k uuid</code> might show you other options."}, {"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 2, "creation_date": 1530066263, "post_id": 51053568, "comment_id": 89098272, "body": "You need to link your program with libuuid, of course."}, {"owner": {"reputation": 1935, "user_id": 2034048, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/aDv88.jpg?s=128&g=1", "display_name": "7 Reeds", "link": "https://stackoverflow.com/users/2034048/7-reeds"}, "edited": false, "score": 0, "creation_date": 1530066693, "post_id": 51053568, "comment_id": 89098371, "body": "Look at the other <code>uuid_*</code> man pages.  My guess is that you have a uuid but that it is in binary format.  You prolly need to convert it to text in some way.  On my machine there is a library function <code>uuid_unparse()</code> and others. EDITED."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530067533, "post_id": 51053568, "comment_id": 89098572, "body": "Use, <code>getrandom</code> from <code>&lt;sys&#47;random.h&gt;</code> for an entropy based 16-byte value. Then simply use <code>sprintf</code> (with <code>%02x</code>) in a loop to fill your <code>uuid</code> buf inserting a <code>&#39;-&#39;</code> after the 8th, 13th, 18th and 23rd characters."}, {"owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530068625, "post_id": 51053568, "comment_id": 89098803, "body": "@DavidC.Rankin I&#39;m going to play around with <code>uuid_generate</code> a little more, but I&#39;ll do that if I can&#39;t get it to work."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530069658, "post_id": 51053568, "comment_id": 89098989, "body": "@Billy - drop a comment if you can&#39;t get your solution working. Getting a completely portable solution can be tricky as different compilers support various entropy based random byte generation. <code>getrandom</code> has been present for Linux since the 3.17 kernel, but some Linux distributions incorrectly package header files necessary for its use in userspace. A direct syscall can be used in its absence. If you are on windoze, then you will have to find whatever it uses for random bytes."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530070850, "post_id": 51053568, "comment_id": 89099234, "body": "But <code>libuuid</code> is nice too, you can do the same thing (portably) with 4-lines of code, two of which are <code>uuid_generate_random (uuid);</code>, and <code>uuid_unparse (uuid, buf);</code> (the other two lines declare <code>uuid</code> and <code>buf</code>)"}, {"owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530072321, "post_id": 51053568, "comment_id": 89099513, "body": "@DavidC.Rankin Yeah, I feel like I might as well use specialized functions for stuff like that if I have them available, instead of doing it manually."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530072611, "post_id": 51053568, "comment_id": 89099582, "body": "That is usually good policy. Widely used libraries are generally much more well tested than anything you could come up with on the fly (and better optimized). However, in this case, they basically do the same thing (just with a lot more checks for system portability than would be included in a raw example. <code>:)</code>"}, {"owner": {"reputation": 961, "user_id": 1139715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YgQlx.png?s=128&g=1", "display_name": "StephenS", "link": "https://stackoverflow.com/users/1139715/stephens"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1541289497, "post_id": 51053568, "comment_id": 93166264, "body": "@DavidC: that does not guarantee a valid UUID, and even if valid, it may collide with a non-random UUID that was supposed to be non-collideable. There is a reason for libraries."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 961, "user_id": 1139715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YgQlx.png?s=128&g=1", "display_name": "StephenS", "link": "https://stackoverflow.com/users/1139715/stephens"}, "edited": false, "score": 0, "creation_date": 1541302390, "post_id": 51053568, "comment_id": 93167934, "body": "@StephenSprunk I thought that was clear from the <i>&quot;Widely used libraries are generally much more well tested than anything you could come up with on the fly (and better optimized).</i>&quot; comment above. That&#39;s why a well tested library is always a first choice."}], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "edited": false, "score": 1, "creation_date": 1601306623, "post_id": 51068240, "comment_id": 113359645, "body": "You can use <code>UUID_STR_LEN</code> from the same uuid library instead of hardcoding <code>37</code>."}], "tags": [], "owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "is_accepted": true, "score": 13, "last_activity_date": 1532238616, "last_edit_date": 1532238616, "creation_date": 1530119732, "answer_id": 51068240, "question_id": 51053568, "link": "https://stackoverflow.com/questions/51053568/generating-a-random-uuid-in-c/51068240#51068240", "title": "Generating a random UUID in C", "body": "<p>This functionality is provided by <code>libuuid</code>. (Packages <code>libuuid1</code> and <code>uuid-dev</code> on Debian.)</p>\n\n<p>This is a simple program that generates an entropy-based (random) UUID and writes it to <code>stdout</code>, then exits with status <code>0</code>.</p>\n\n<pre><code>/* For malloc() */\n#include &lt;stdlib.h&gt;\n/* For puts()/printf() */\n#include &lt;stdio.h&gt;\n/* For uuid_generate() and uuid_unparse() */\n#include &lt;uuid/uuid.h&gt;\n\n\n/* Uncomment to always generate capital UUIDs. */\n//#define capitaluuid true\n\n/* Uncomment to always generate lower-case UUIDs. */\n//#define lowercaseuuid true\n\n/*\n * Don't uncomment either if you don't care (the case of the letters\n * in the 'unparsed' UUID will depend on your system's locale).\n */\n\n\nint main(void) {\n    uuid_t binuuid;\n    /*\n     * Generate a UUID. We're not done yet, though,\n     * for the UUID generated is in binary format \n     * (hence the variable name). We must 'unparse' \n     * binuuid to get a usable 36-character string.\n     */\n    uuid_generate_random(binuuid);\n\n    /*\n     * uuid_unparse() doesn't allocate memory for itself, so do that with\n     * malloc(). 37 is the length of a UUID (36 characters), plus '\\0'.\n     */\n    char *uuid = malloc(37);\n\n#ifdef capitaluuid\n    /* Produces a UUID string at uuid consisting of capital letters. */\n    uuid_unparse_upper(binuuid, uuid);\n#elif lowercaseuuid\n    /* Produces a UUID string at uuid consisting of lower-case letters. */\n    uuid_unparse_lower(binuuid, uuid);\n#else\n    /*\n     * Produces a UUID string at uuid consisting of letters\n     * whose case depends on the system's locale.\n     */\n    uuid_unparse(binuuid, uuid);\n#endif\n\n    // Equivalent of printf(\"%s\\n\", uuid); - just my personal preference\n    puts(uuid);\n\n    return 0;\n}\n</code></pre>\n\n<p><code>uuid_unparse()</code> doesn't allocate it's own memory; to avoid a segmentation fault upon execution you must do that with manually with <code>uuid = malloc(37);</code> (you can also store the UUID in a char array of that length: <code>char uuid[37];</code>). Make sure to compile with <code>-luuid</code> so that the linker knows that <code>uuid_generate_random()</code> and <code>uuid_unparse()</code> are defined in <code>libuuid</code>.</p>\n"}], "owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12416, "favorite_count": 3, "accepted_answer_id": 51068240, "answer_count": 1, "score": 10, "last_activity_date": 1532238963, "creation_date": 1530065306, "last_edit_date": 1532238963, "question_id": 51053568, "link": "https://stackoverflow.com/questions/51053568/generating-a-random-uuid-in-c", "title": "Generating a random UUID in C", "body": "<p>How would I go about generating an entropy-based UUID in C and storing it as a string (char pointer)?</p>\n\n<p>I'm hoping that there is an easy way to do this internally, but <code>system(\"uuidgen -r\")</code> will work if not.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "edited": false, "score": 0, "creation_date": 1530062901, "post_id": 51053291, "comment_id": 89097670, "body": "You have three format specifiers but only two values, are you missing one maybe?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1530063388, "post_id": 51053291, "comment_id": 89097760, "body": "If your compiler doesn&#39;t give you a warning about this, you should enable more warnings. You might try, on GCC or Clang, <code>std=c11 -Wall -Wextra -Wpedantic -Wconversion</code>. That will tell you if your <code>print()</code> format string does not match the types of the arguments."}, {"owner": {"reputation": 2477, "user_id": 2378429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3208c57486859807197c6d3125ba137?s=128&d=identicon&r=PG", "display_name": "O.O.Balance", "link": "https://stackoverflow.com/users/2378429/o-o-balance"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1530064350, "post_id": 51053291, "comment_id": 89097962, "body": "@Davislor Excellent suggestion. I have added this to my answer and credited you. I also like <code>-Werror</code>, so you can&#39;t be tempted to ignore any warnings."}], "answers": [{"tags": [], "owner": {"reputation": 2477, "user_id": 2378429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3208c57486859807197c6d3125ba137?s=128&d=identicon&r=PG", "display_name": "O.O.Balance", "link": "https://stackoverflow.com/users/2378429/o-o-balance"}, "is_accepted": false, "score": 1, "last_activity_date": 1530066328, "last_edit_date": 1530066328, "creation_date": 1530062989, "answer_id": 51053349, "question_id": 51053291, "link": "https://stackoverflow.com/questions/51053291/c-programming-explanation-of-why-the-pointer-is-not-giving-the-expected-value/51053349#51053349", "title": "C Programming: Explanation of why the pointer is not giving the expected value", "body": "<p>You have left off an argument to <code>printf()</code>. Consider the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n   int a;\n   int* pA= &amp;a;\n\n   a = 9;\n\n   *pA = 4;\n\n   int* pA2 = &amp;a;\n\n   printf(\"pA=%p, *pA=%d, *pA2=%d\\n\", (void*) pA, *pA, *pA2);\n}\n</code></pre>\n\n<p>It outputs a memory address, <code>4</code>, and <code>4</code>  again. <a href=\"https://tio.run/##TY7BCoMwEETv@YrFYlHRgtJLsRb8il56CUm0gTQJMZVC6a833aiHXnbnzQzLsmpkLISd1Ew9uYDz5Lk0h/uFEKk9PKjUWQ5vAgCRabupwvYd7CNGg0IHp01jgnTcaK028Fe2Ds0hS/BCasvY71K@7AbFTSclZLORvMjB9ou/hnlLPiF82aDoOIUKH@1YXYfqSpXCKV7eUdxWcKq9ZCiZ0bNwkzQ65s4Z9wM\" rel=\"nofollow noreferrer\">Try it online.</a></p>\n\n<p>For each <code>%</code> to be substituted, you must pass an extra argument to <code>printf()</code>.\nWhen you leave out an argument, the function will try to grab an argument anyway \u2013 this leads to <strong>undefined behaviour</strong>. In your case it managed to take a number (presumably from the stack). It could also crash the program \u2013 since the behaviour is undefined, there is no way to consistently predict it.</p>\n\n<p>Also note that I have <strong>cast</strong> your pointer to a <code>void*</code> for the output \u2013 the <code>%p</code> format specifier requires it. Other pointers will work most of the time, but are not guaranteed to. Read more about <code>printf()</code> <a href=\"http://pubs.opengroup.org/onlinepubs/000095399/functions/printf.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>To help you detect similar and other problems in the future, turn on compiler warnings. In the beginning, these may seem overwhelming, but they are really helpful. See your code compiled with the compiler flags suggested by <a href=\"https://stackoverflow.com/users/4474419/davislor\">@Davislor</a>'s comment <a href=\"https://tio.run/##TY7BCsIwDIbvfYoymWyyCRMvMif4FF68lLSbhdqWtoogvro126qYQ/L/X/5AoB4AYlxIDerGBd37wKVZXw6ESB3olUldlPRJKNYIWPuTK3ukHV0imRBDs0t6Xm2TS@HNf9o6pH2RTcHcVukk59U3mvOzziY3o7Ilrxjf0Cs2@Fjjnx00TaxPTCns4hEcw2kFZzpIQAlG34Xz0uhx75xxHw\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I have added <code>-Werror</code> to these. It forces you to actually deal with the warnings since the compiler won't generate an executable as long as your code generates warnings.</p>\n\n<p>I have also added the same flags to the first link in my answer so you can see it does not generate any warnings.</p>\n"}], "owner": {"reputation": 25, "user_id": 8582250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4293d7f029e52aa16ac2f6aa51b74391?s=128&d=identicon&r=PG&f=1", "display_name": "Willishere", "link": "https://stackoverflow.com/users/8582250/willishere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1530066328, "creation_date": 1530062548, "last_edit_date": 1530062762, "question_id": 51053291, "link": "https://stackoverflow.com/questions/51053291/c-programming-explanation-of-why-the-pointer-is-not-giving-the-expected-value", "title": "C Programming: Explanation of why the pointer is not giving the expected value", "body": "<p>I am very new to pointers in C and I am having trouble making sense of this error or a pointer not accessing the memory to store an actual value.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int a;\n    int *pA = &amp;a;\n\n    a = 9;\n\n    *pA = 4;\n\n    int *pA2 = &amp;a;\n\n    printf(\"pA = %p, *pA = %d, *pA2 = %d\\n\", *pA, *pA2);\n}\n</code></pre>\n\n<p>In (virtual) reality, shouldn't `<em>pA2</em> spit out <em>4</em> as well? Instead it is giving what looks like a number associated with memory address.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c", "pointers", "bit-manipulation", "glib"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1530061509, "post_id": 51053116, "comment_id": 89097438, "body": "<i>and I really don&#39;t want extra allocations</i> Based on what actual <b>evidence</b>?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1530063197, "post_id": 51053116, "comment_id": 89097723, "body": "If it&#39;s local to one function then just use a variable on the stack. No allocation and surely more efficient than packing and unpacking pointers."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530063234, "post_id": 51053116, "comment_id": 89097726, "body": "of course you can&#39;t do arithmetics like that because the only operation on pointers is adding with an integer. <a href=\"https://stackoverflow.com/a/18426582/995714\">You must cast to <code>(u)intptr_t</code> like this</a>. And make sure that the pointers are at least 2-byte aligned so that you have the free lsb"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 3, "creation_date": 1530064585, "post_id": 51053116, "comment_id": 89098001, "body": "What problem are you trying to solve by avoiding <i>&quot;extra allocations&quot;</i>? See: <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\"><b>What is the XY problem?</b></a> Allocation within glib is notoriously generous, worrying about the allocation of a couple of pointers where the underlying library may have allocated 500 extra seems like an effort in futility."}, {"owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 1, "creation_date": 1530095449, "post_id": 51053116, "comment_id": 89110870, "body": "To be clear, GLib does not make 500 extra allocations for each <code>GSList</code> element. Each <code>GSList</code> element is one heap allocation. Citation needed for \u201callocation within glib is notoriously generous\u201d."}], "answers": [{"comments": [{"owner": {"reputation": 1434, "user_id": 3691554, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2479edc9e2237ac67d4df87105fbc656?s=128&d=identicon&r=PG&f=1", "display_name": "SoniEx2", "link": "https://stackoverflow.com/users/3691554/soniex2"}, "edited": false, "score": 0, "creation_date": 1530185495, "post_id": 51053154, "comment_id": 89151910, "body": "could I have two chars at the start of my struct (or rather a <code>char[2]</code>), always set them to specific values (say, 0 and 1), and take their pointers, to get portable tagged pointers? (then it&#39;s just a matter of, if it&#39;s 1, we offset by ptr-1, if it&#39;s 0 we don&#39;t do anything, either way we then convert/cast to a pointer to my struct?)"}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 2, "last_activity_date": 1530061086, "creation_date": 1530061086, "answer_id": 51053154, "question_id": 51053116, "link": "https://stackoverflow.com/questions/51053116/how-to-properly-store-extra-data-in-lsb-pointer-bits/51053154#51053154", "title": "How to properly store extra data in LSB pointer bits?", "body": "<p>To perform arithmetic on the numeric value of pointers (as opposed to <em>pointer arithmetic</em>, which is different and highly constrained), you need to cast back and forth to an appropriate integer type. If <code>stdint.h</code> defines <code>UINTPTR_MAX</code>, the appropriate type to use is <code>uintptr_t</code>. If not, there is no appropriate type, and your (nonportable) hack can't work on that particular implementation.</p>\n\n<p>Note that you also have the problem that you're assuming pointers have low unused bits. If <code>_Alignof(max_align_t)</code> is greater than 1, this is probably a reasonable assumption, assuming the implementation follows the <em>intent</em> of the standard that the transformation to <code>uintptr_t</code> reflect the address model of the implementation (rather than being some arbitrary injection). But if not, you're out of luck.</p>\n"}], "owner": {"reputation": 1434, "user_id": 3691554, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2479edc9e2237ac67d4df87105fbc656?s=128&d=identicon&r=PG&f=1", "display_name": "SoniEx2", "link": "https://stackoverflow.com/users/3691554/soniex2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530061086, "creation_date": 1530060663, "question_id": 51053116, "link": "https://stackoverflow.com/questions/51053116/how-to-properly-store-extra-data-in-lsb-pointer-bits", "title": "How to properly store extra data in LSB pointer bits?", "body": "<p>I have a <code>GSList</code> from GTK/glib 2, and those only store full pointers, and I <em>really</em> don't want extra allocations. How do I do bit twiddling hacks to store extra data in those pointers?</p>\n\n<p>I figure I can't just take a pointer and do <code>tagged_ptr = ptr | 1</code> (indeed, the compiler complains very loudly when I try). I'm not sure how to do this.</p>\n\n<p>This would definitely be local to a single function, however, and the <code>GSList</code> (or the pointers) would not leak onto the rest of the code.</p>\n"}, {"tags": ["c", "calloc", "strncpy", "nul"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1530060402, "post_id": 51053061, "comment_id": 89097218, "body": "From <a href=\"http://www.cplusplus.com/reference/cstdlib/calloc/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/calloc</a>: &quot;Allocate and zero-initialize array&quot;.  <code>\\0</code> just means &quot;the character represented by the integer 0&quot;."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1530062096, "post_id": 51053061, "comment_id": 89097537, "body": "in this case <code>calloc</code> is useless as you change the value of your string completely just use <code>malloc</code>."}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1530063387, "post_id": 51053061, "comment_id": 89097759, "body": "I believe I&#39;m only changing the first <code>BUFSIZE</code> elements of the string. The point of <code>calloc</code> (with BUFSIZE+1) was to ensure the last element is <code>0</code>, from which I gather in the solution is equal to <code>\\0</code>. This means the string will always have a nul terminating character. <code>malloc</code> does not initialize the array with zeros, hence why I didn&#39;t use it."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1530065382, "post_id": 51053061, "comment_id": 89098129, "body": "Or you could use <code>malloc</code> and assign the only <code>\\0</code> that matters."}, {"owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "edited": false, "score": 0, "creation_date": 1530065514, "post_id": 51053061, "comment_id": 89098143, "body": "Yeah, I suppose I could do that."}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 5261501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d0f6084e3c7c5af216fe1633042b088?s=128&d=identicon&r=PG&f=1", "display_name": "chf2117", "link": "https://stackoverflow.com/users/5261501/chf2117"}, "is_accepted": true, "score": 2, "last_activity_date": 1530060544, "creation_date": 1530060544, "answer_id": 51053102, "question_id": 51053061, "link": "https://stackoverflow.com/questions/51053061/relation-between-calloc-char-array-and-null-terminating-character/51053102#51053102", "title": "Relation between calloc char array and null terminating character", "body": "<p>Clearing the array to <code>0</code> will fill all characters to <code>\\0</code>. </p>\n\n<blockquote>\n  <p>So '\\0' is completely equivalent to an unadorned 0 integer constant - the only difference is in the intent that it conveys to a human reader (\"I'm using this as a null character.\").</p>\n</blockquote>\n\n<p>See <a href=\"https://stackoverflow.com/questions/1296843/what-is-the-difference-between-null-0-and-0\">What is the difference between NULL, &#39;\\0&#39; and 0</a></p>\n"}], "owner": {"reputation": 579, "user_id": 2202180, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13c996da5606a91364c2778b44a071db?s=128&d=identicon&r=PG", "display_name": "ThatsRightJack", "link": "https://stackoverflow.com/users/2202180/thatsrightjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 0, "accepted_answer_id": 51053102, "answer_count": 1, "score": 2, "last_activity_date": 1530060544, "creation_date": 1530060142, "question_id": 51053061, "link": "https://stackoverflow.com/questions/51053061/relation-between-calloc-char-array-and-null-terminating-character", "title": "Relation between calloc char array and null terminating character", "body": "<p>This whole \"debate\" on the web about <code>strncpy</code> being safe vs unsafe is driving me crazy. I find some people saying <code>strncpy</code> is the \"devil\", which to me sounds like they lack the programming discipline. I get that there is no <code>\\0</code> character added to the end of <code>dest</code> when the <code>src</code> is greater than the <code>dest</code> (which ultimately causes problems). I've heard of <code>strlcpy</code>, but from what I gather it's not standard. I want my code to be as portable as possible, so I don't consider this a viable solution. </p>\n\n<p>Here is my current solution...</p>\n\n<p>First define the buffer size</p>\n\n<pre><code>#define BUFSIZE 1024\n</code></pre>\n\n<p>Within the program, allocate the buffer using <code>calloc</code></p>\n\n<pre><code>char *buffer;\n\nbuffer = calloc(BUFSIZE+1, sizeof(char));\n</code></pre>\n\n<p>Then later in the code, lets say I want to copy <code>msg</code> to <code>buffer</code> and I use</p>\n\n<pre><code>strncpy(buffer,msg,BUFSIZE);\n</code></pre>\n\n<p>Since I preallocated <code>buffer</code> with <code>BUFSIZE + 1</code> then this ensures that the last byte of <code>buffer</code> is <code>\\0</code> regardless if <code>msg</code> is greater than <code>BUFSIZE</code>.</p>\n\n<p>Now the question is, does <code>calloc</code> initialize the character array with <code>\\0</code>? Is it wrong to interpret the zero allocation of <code>calloc</code> to be the same as <code>\\0</code>?</p>\n"}, {"tags": ["c++", "c", "visual-studio", "double"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1530058590, "post_id": 51052895, "comment_id": 89096865, "body": "You say the comparison isn&#39;t working but don&#39;t explain how you determined that it isn&#39;t working. You say it &quot;should be obviously true, but it isn&#39;t&quot; but don&#39;t say why you think it isn&#39;t."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1530058594, "post_id": 51052895, "comment_id": 89096868, "body": "The compiler optimized <code>fve == (int) OUTSIDE;</code> away since it doesn&#39;t do anything."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1530058668, "post_id": 51052895, "comment_id": 89096884, "body": "Does your program work, regardless of what you see in your debugger?  If so, then you are more than likely debugging an optimized build, where code has been moved around, eliminated, etc."}, {"owner": {"reputation": 1993, "user_id": 4582207, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-pUpm2F8xmOo/AAAAAAAAAAI/AAAAAAAAAdE/yOA_NUhpHYo/photo.jpg?sz=128", "display_name": "Joon. P", "link": "https://stackoverflow.com/users/4582207/joon-p"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1530058734, "post_id": 51052895, "comment_id": 89096897, "body": "@DavidSchwartz isn&#39;t 0.109981 always greater than 0.002? how&#39;s it not?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1530059173, "post_id": 51052895, "comment_id": 89096987, "body": "look at <code>mag &gt; radius : 1</code>, you can clearly see that <code>mag</code> is greater (it would show 0 otherwise)"}], "answers": [{"comments": [{"owner": {"reputation": 1993, "user_id": 4582207, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-pUpm2F8xmOo/AAAAAAAAAAI/AAAAAAAAAdE/yOA_NUhpHYo/photo.jpg?sz=128", "display_name": "Joon. P", "link": "https://stackoverflow.com/users/4582207/joon-p"}, "edited": false, "score": 0, "creation_date": 1530059068, "post_id": 51052948, "comment_id": 89096958, "body": "Thanks! &#39;==&#39; was my typo, and that had been causing the code be optimized to skip that &#39;if&#39; statement. Thanks alot!"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530072466, "post_id": 51052948, "comment_id": 89099547, "body": "always enable all warnings. The compiler will notify you on those cases"}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 0, "last_activity_date": 1530058917, "creation_date": 1530058917, "answer_id": 51052948, "question_id": 51052895, "link": "https://stackoverflow.com/questions/51052895/c-very-weird-behavior-of-double-comparison/51052948#51052948", "title": "C++ very weird behavior of double comparison", "body": "<p>If you're assuming the line:</p>\n\n<pre><code>fve == (int) OUTSIDE;\n</code></pre>\n\n<p>does nothing because <code>fve</code> is not being set to <code>OUTSIDE</code>, it's because you're not <em>setting</em> <code>fve</code> to <code>OUTSIDE</code>.</p>\n\n<p>You're comparing <code>fve</code> and <code>OUTSIDE</code> for equality then throwing away the result.</p>\n\n<p>I suspect you <em>should</em> have written (with <em>one</em> <code>=</code>):</p>\n\n<pre><code>fve = (int) OUTSIDE;\n</code></pre>\n"}], "owner": {"reputation": 1993, "user_id": 4582207, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-pUpm2F8xmOo/AAAAAAAAAAI/AAAAAAAAAdE/yOA_NUhpHYo/photo.jpg?sz=128", "display_name": "Joon. P", "link": "https://stackoverflow.com/users/4582207/joon-p"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "closed_date": 1530059130, "accepted_answer_id": 51052948, "answer_count": 1, "score": -3, "last_activity_date": 1530058917, "creation_date": 1530058292, "last_edit_date": 1530058878, "question_id": 51052895, "link": "https://stackoverflow.com/questions/51052895/c-very-weird-behavior-of-double-comparison", "closed_reason": "Not suitable for this site", "title": "C++ very weird behavior of double comparison", "body": "<p>Simple double value comparison isn't working..\n<a href=\"https://i.stack.imgur.com/w4FQf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w4FQf.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/zBXMQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zBXMQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>as seen in the screenshot, </p>\n\n<pre><code>double mag = 0.109981\ndouble radius = 0.002\n</code></pre>\n\n<p>thus, </p>\n\n<pre><code>if(mag &gt; radius) {\n    // it's always false?\n}\n</code></pre>\n\n<p>should be obviously true, but it isn't. How is 0.109981 not greater than 0.002?</p>\n\n<p>What am I doing wrong here? It gives architecture warning, but I still don't understand what's going on here..</p>\n\n<pre><code>double mag = dVec.magnitude();\ndouble radius = TOOL_TIP_RADIUS;\ndouble diff = mag - radius;\ncout &lt;&lt; \"mag: \" &lt;&lt; mag &lt;&lt; endl &lt;&lt; \"radius: \" &lt;&lt; radius &lt;&lt; endl &lt;&lt; \"diff: \" &lt;&lt; diff &lt;&lt; endl &lt;&lt; \"mag &gt; radius : \" &lt;&lt; (mag &gt; radius) &lt;&lt; endl;\nif (mag &gt; radius) {\n    // no collision\n    fve == (int) OUTSIDE;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "floating-point", "printf"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 4, "creation_date": 1530054165, "post_id": 51052417, "comment_id": 89095942, "body": "a <code>double</code> (64-bit IEEE-754 floating point number) only has about 15 digits of precision anyway"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1530055607, "post_id": 51052417, "comment_id": 89096264, "body": "@vu1p3n0x: An IEEE-754 floating-point number represents one number exactly. It is, by specification in the IEEE-754 standard, infinitely precise. Various applications sometimes desire to convert such numbers to decimal exactly."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1530057293, "post_id": 51052417, "comment_id": 89096618, "body": "@EricPostpischil: What you write is technically correct but what vu1pn3n0x is talking about is the precision of the data type, which is ~15-16 digits across most of its range."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1530057842, "post_id": 51052417, "comment_id": 89096721, "body": "@DietrichEpp: The data type is exact across its entire range. The IEEE-754 standard is clear on this: Every floating-point number represents one number exactly. The <b>operations</b> perform rounding. There is no approximation in the numbers. What  vu1p3n0x is talking about is a crude notion about using binary floating-point for decimal. But not only is it a poor notion for working with floating-point, it is not relevant to this question. The OP does not ask about anything involving floating-point having been used to attempt decimal arithmetic. They ask about correctly printing floating-point."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1530058295, "post_id": 51052417, "comment_id": 89096818, "body": "@EricPostpischil: Your usage of the word &quot;precision&quot; is not in agreement with the IEEE 754 standard. <i>precision: <b>The maximum number p of significant digits that can be represented in a format,</b> or the number of digits to that a result is rounded.</i> Please do not pretend only the second meaning exists just so you can correct someone who uses the first meaning."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1530059008, "post_id": 51052417, "comment_id": 89096945, "body": "Citation: p.5 IEEE Std 754-2008."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1530098008, "post_id": 51052417, "comment_id": 89112516, "body": "@DietrichEpp: My comments do not contain the word \u201cprecision.\u201d I used the term \u201cinfinitely precise,\u201d which IEEE-754 does when referring to an exact mathematical number. In other words, the bits used to represent a number in a floating-point number mean the format has some limited precision, but the number represented is infinitely precise\u2014it is exact."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1530116906, "post_id": 51052417, "comment_id": 89124914, "body": "@EricPostpischil: The term \u201cinfinitely precise\u201d in the standard is only ever used to describe intermediate results before \u201crounding to a floating-point number\u201d. I would agree that you can describe a number as being exact or inexact, however, I would avoid using the word \u201cinfinitely precise\u201d when talking about a floating-point number because this usage is confusing, which explains why the standard carefully avoids this usage. For a similar reason you have a legitimate concern that talking about the \u201cprecision\u201d of a <code>double</code> could be ambiguous, but I think its meaning is clear."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1530117527, "post_id": 51052417, "comment_id": 89125229, "body": "@DietrichEpp: Your discussion about terminology is irrelevant to the point. (Notwithstanding the fact that I use \u201cinfinitely precise\u201d in the same <b>way</b> the standard does even if I apply it to a different object. Adjective phrases are not tied to a single object; they can be applied to other objects.) You may substitute \u201cexact\u201d for \u201cinfinitely precise\u201d in my comment, and it remains correct, and vu1p3n0x\u201ds comment remains both a bad conception of how floating-point works and irrelevant to this Stack Overflow question."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1530056747, "last_edit_date": 1530056747, "creation_date": 1530055967, "answer_id": 51052668, "question_id": 51052417, "link": "https://stackoverflow.com/questions/51052417/how-does-printf-extract-digits-from-a-floating-point-number/51052668#51052668", "title": "How does printf extract digits from a floating point number?", "body": "<p>There are various ways to convert floating-point numbers to decimal numerals without error (either exactly or with rounding to a desired precision).</p>\n\n<p>One method is to use arithmetic as taught in elementary school. C provides functions to work with floating-point numbers, such as <code>frexp</code>, which separates the fraction (also called the significand, often mistakenly called a mantissa) and the exponent. Given a floating-point number, you could create a large array to store decimal digits in and then compute the digits. Each bit in the fraction part of a floating-point number represents some power of two, as determined by the exponent in the floating-point number. So you can simply put a \u201c1\u201d in an array of digits and then use elementary school arithmetic to multiply or divide it the required number of times. You can do that for each bit and then add all the results, and the sum is the decimal numeral that equals the floating-point number.</p>\n\n<p>Commercial <code>printf</code> implementations will use more sophisticated algorithms. Discussing them is beyond the scope of a Stack Overflow question-and-answer. The seminal paper on this is <a href=\"http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.31.4049\" rel=\"nofollow noreferrer\"><em>Correctly Rounded Binary-Decimal and Decimal-Binary Conversions</em> by David M. Gay</a>. (A copy appears to be available <a href=\"https://ampl.com/REFS/rounding.pdf\" rel=\"nofollow noreferrer\">here</a>, but that seems to be hosted by a third party; I am not sure how official or durable it is. A web search may turn up other sources.) A more recent paper with an algorithm for converting a binary floating-point number to decimal with the shortest number of digits needed to uniquely distinguish the value is <a href=\"https://cseweb.ucsd.edu/~lerner/papers/fp-printing-popl16.pdf\" rel=\"nofollow noreferrer\"><em>Printing Floating-Point Numbers: An Always Correct Method</em> by Marc Andrysco, Ranjit Jhala, and Sorin Lerner</a>.</p>\n\n<p>One key to how it is done is that <code>printf</code> will not just use the floating-point format and its operations to do the work. It will use some form of extended-precision arithmetic, either by working with parts of the floating-point number in an integer format with more bits, by separating the floating-point number into pieces and using multiple floating-point numbers to work with it, or by using a floating-point format with more precision.</p>\n\n<p>Note that the first step in your question, multiple x by a power of ten, already has two rounding errors. First, not all powers of ten are exactly representable in binary floating-point, so just producing such a power of ten necessarily has some representation error. Then, multiplying <code>x</code> by another number often produces a mathematical result that is not exactly representable, so it must be rounded to the floating-point format.</p>\n"}, {"tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 6, "last_activity_date": 1530056679, "last_edit_date": 1530056679, "creation_date": 1530056351, "answer_id": 51052708, "question_id": 51052417, "link": "https://stackoverflow.com/questions/51052417/how-does-printf-extract-digits-from-a-floating-point-number/51052708#51052708", "title": "How does printf extract digits from a floating point number?", "body": "<p>The classic implementation is David Gay's <a href=\"http://www.netlib.org/fp/dtoa.c\" rel=\"noreferrer\"><code>dtoa</code></a>. The exact details are somewhat arcane (see <a href=\"https://stackoverflow.com/questions/3173056/why-does-dtoa-c-contain-so-much-code\">Why does &quot;dtoa.c&quot; contain so much code?</a>), but in general it works by doing the base conversion using more precision beyond what you can get from a 32-bit, 64-bit, or even 80-bit floating point number. To do this, it uses so-called \"bigints\" or arbitrary-precision numbers, which can hold as many digits as you can fit in memory. Gay's code has been copied, with modifications, into countless other libraries including common implementations for the C standard library (so it might power your <code>printf</code>), Java, Python, PHP, JavaScript, etc.</p>\n\n<p>(As a side note... not all of these copies of Gay's dtoa code were kept up to date, so because PHP used an <em>old</em> version of strtod it hung when parsing 2.2250738585072011e-308.)</p>\n\n<p>In general, if you do things the \"obvious\" and simple way like multiplying by a power of 10 and then converting the integer, you will lose a small amount of precision and some of the results will be inaccurate... but maybe you will get the first 14 or 15 digits correct. Gay's implementation of dtoa() claims to get all the digits correct... but as a result, the code is quite difficult to follow. Skip to the bottom to see strtod itself, you can see that it starts with a \"fast path\" which just uses ordinary floating-point arithmetic, but then it detects if that result is incorrect and uses a more reliable algorithm using bigints which works in all cases (but is slower).</p>\n\n<p>The implementation has the following citation, which you may find interesting:</p>\n\n<pre>\n * Inspired by \"How to Print Floating-Point Numbers Accurately\" by\n * Guy L. Steele, Jr. and Jon L. White [Proc. ACM SIGPLAN '90, pp. 112-126].\n</pre>\n\n<p>The algorithm works by calculating a range of decimal numbers which produce the given binary number, and by using more digits, the range gets smaller and smaller until you either have an exact result or you can correctly round to the requested number of digits.</p>\n\n<p>In particular, from sec 2.2 Algorithm,</p>\n\n<blockquote>\n  <p>The algorithm uses exact rational arithmetic to perform its computations so that there is no loss of accuracy. In order to generate digits, the algorithm scales the number so that it is of the form 0.d<sub>1</sub>d<sub>2</sub>..., where d<sub>1</sub>, d<sub>2</sub>, ..., are base-B digits. The first digit is computed by multiplying the scaled number by the output base, B, and taking the integer part. The remainder is used to compute the rest of the digits using the same approach.</p>\n</blockquote>\n\n<p>The algorithm can then continue until it has the exact result (which is always possible, since floating-point numbers are base 2, and 2 is a factor of 10) or until it has as many digits as requested. The paper goes on to prove the algorithm's correctness.</p>\n\n<hr>\n\n<p>Also note that not all implementations of <code>printf</code> are based on Gay's dtoa, this is just a particularly common implementation that's been copied a lot.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1530057120, "post_id": 51052759, "comment_id": 89096586, "body": "The mathematical properties of a floating-point number can be used to convert it to decimal without any knowledge of its representation, so one algorithm could be used for general floating-point formats."}, {"owner": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "edited": false, "score": 0, "creation_date": 1530057180, "post_id": 51052759, "comment_id": 89096597, "body": "Also, there are very few platforms which don&#39;t use IEEE754 nowadays."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1530057215, "last_edit_date": 1530057215, "creation_date": 1530056867, "answer_id": 51052759, "question_id": 51052417, "link": "https://stackoverflow.com/questions/51052417/how-does-printf-extract-digits-from-a-floating-point-number/51052759#51052759", "title": "How does printf extract digits from a floating point number?", "body": "<p>Neither the C or C++ standard does not dictate a certain algorithm for such things.  Therefore is impossible to answer how <code>printf</code> does this. </p>\n\n<p>If you want to know <em>an example</em> of a <code>printf</code> implementation, you can have a look here: <a href=\"http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/vfprintf.c\" rel=\"nofollow noreferrer\">http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/vfprintf.c</a> and here: <a href=\"http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/printf_fp.c\" rel=\"nofollow noreferrer\">http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/printf_fp.c</a></p>\n"}], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 1, "accepted_answer_id": 51052708, "answer_count": 3, "score": 7, "last_activity_date": 1530057215, "creation_date": 1530053940, "last_edit_date": 1530055537, "question_id": 51052417, "link": "https://stackoverflow.com/questions/51052417/how-does-printf-extract-digits-from-a-floating-point-number", "title": "How does printf extract digits from a floating point number?", "body": "<p>How do functions such as <code>printf</code> extract digits from a floating point number? I understand how this could be done in principle. Given a number <code>x</code>, of which you want the first <code>n</code> digits, scale <code>x</code> by a power of 10 so that <code>x</code> is between <code>pow(10, n)</code> and <code>pow(10, n-1)</code>. Then convert <code>x</code> into an integer, and take the digits of the integer. </p>\n\n<p>I tried this, and it worked. Sort of. My answer was identical to the answer given by <code>printf</code> for the first 16 decimal digits, but tended to differ on the ones after that. How does <code>printf</code> do it?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1530053446, "post_id": 51052295, "comment_id": 89095794, "body": "<a href=\"https://stackoverflow.com/questions/1716013/why-is-scanf-causing-infinite-loop-in-this-code\" title=\"why is scanf causing infinite loop in this code\">stackoverflow.com/questions/1716013/&hellip;</a>"}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 1, "creation_date": 1530054130, "post_id": 51052295, "comment_id": 89095937, "body": "break your problem down. you should write a bunch of programs which do only one thing each. this will help you get a foundation which you can use for combining tasks alter."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1530054595, "post_id": 51052295, "comment_id": 89096029, "body": "Ok, your code appears to have all of the pieces that you described. So what&#39;s the question?"}, {"owner": {"reputation": 7, "user_id": 9996944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd40fa127dc03fd537ed9462bbd23333?s=128&d=identicon&r=PG&f=1", "display_name": "CECE", "link": "https://stackoverflow.com/users/9996944/cece"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1530054747, "post_id": 51052295, "comment_id": 89096060, "body": "@user3386109 The question has been updated"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1530055441, "post_id": 51052295, "comment_id": 89096221, "body": "The <code>while</code> loop should be <code>while( (c=scanf(&quot;%i&quot;, &amp;temp)) != EOF)</code> and the <code>count&lt;max</code> should be before <code>arr[count]=temp</code> inside the <code>else</code>."}, {"owner": {"reputation": 7, "user_id": 9996944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd40fa127dc03fd537ed9462bbd23333?s=128&d=identicon&r=PG&f=1", "display_name": "CECE", "link": "https://stackoverflow.com/users/9996944/cece"}, "edited": false, "score": 0, "creation_date": 1530055639, "post_id": 51052295, "comment_id": 89096273, "body": "Like so? else{             count&lt;max;             arr[count]=temp;             count++;         }"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1530055908, "post_id": 51052295, "comment_id": 89096335, "body": "The code should check whether <code>count</code> is less than <code>max</code> before putting the value into the array."}, {"owner": {"reputation": 7, "user_id": 9996944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd40fa127dc03fd537ed9462bbd23333?s=128&d=identicon&r=PG&f=1", "display_name": "CECE", "link": "https://stackoverflow.com/users/9996944/cece"}, "edited": false, "score": 0, "creation_date": 1530058336, "post_id": 51052295, "comment_id": 89096827, "body": "I still get the same issues"}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1530126139, "post_id": 51052295, "comment_id": 89129394, "body": "@CECE What does your program look like now?"}, {"owner": {"reputation": 7, "user_id": 9996944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd40fa127dc03fd537ed9462bbd23333?s=128&d=identicon&r=PG&f=1", "display_name": "CECE", "link": "https://stackoverflow.com/users/9996944/cece"}, "reply_to_user": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1530127915, "post_id": 51052295, "comment_id": 89130188, "body": "@ArndtJonasson I explained up above in my original post what it looks like. When i enter in numbers it returns &#39;Too many values&#39; and then lists the first or second number in the array. I only want it to say &#39;Too many values&#39; if there are over 10 elements, and then I want it to sort the first 10 elements anyway."}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1530128100, "post_id": 51052295, "comment_id": 89130267, "body": "You wrote &quot;I still get the same issues&quot;, so I thought you had made some changes and tried them."}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1530114249, "creation_date": 1530114249, "answer_id": 51066795, "question_id": 51052295, "link": "https://stackoverflow.com/questions/51052295/sorting-an-array-using-functions/51066795#51066795", "title": "Sorting an array using functions", "body": "<p>This sounds like an assignment you want to do yourself, but the problem you\u2019re asking about is in your <code>getArray()</code> function.  It\u2019s checking the wrong value, unrelated to the number of elements read in, when it prints the error message about too many elements.  You also tell it to keep trying to read while <em>either</em> you haven\u2019t encountered <code>EOF</code> <em>or</em> you haven\u2019t read in the maximum number of elements, and you should look up what <code>scanf()</code> actually returns; you probably meant to check <code>feof(stdin)</code>.  Among other bugs, the function also throws away the first value it reads by overwriting it.</p>\n\n<p>What you seem to want to do: is keep a count of the number of elements read, read in an element while this count is less than the maximum and there is valid input remaining; store the input in the array; increment the count.  Your check for too much input should be that the count is at maximum and <code>feof(stdin)</code> is false, and it should be after the while loop, not inside the body.</p>\n"}], "owner": {"reputation": 7, "user_id": 9996944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd40fa127dc03fd537ed9462bbd23333?s=128&d=identicon&r=PG&f=1", "display_name": "CECE", "link": "https://stackoverflow.com/users/9996944/cece"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 825, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530114249, "creation_date": 1530052964, "last_edit_date": 1530112269, "question_id": 51052295, "link": "https://stackoverflow.com/questions/51052295/sorting-an-array-using-functions", "title": "Sorting an array using functions", "body": "<p>I'm having extreme trouble figuring this code out. I need four functions besides <code>main()</code> that: reads the array elements, prints the array elements, sorts the array, and swaps two elements of an array.</p>\n\n<p>I cannot use any structured code (e.g., no <code>goto</code>, <code>break</code>, <code>continue</code>, etc. statements. </p>\n\n<p>I also need to be able to run the program by entering more values than the declared array size which is 10, display an error message and then sort the first 10 values entered anyway. I need to be able to run the program and enter a character and display an error message and flush the bad data and continue reading until end of file or the array is full.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAXSIZE 10 //max number of elements is 10\n\nint main()\n{   \n    void print(const int arr[],int size);\n    void sort(int arr[],int size);\n    int getArray(int arr[],int max);\n    int arr[MAXSIZE]; //array\n    int size=getArray(arr,MAXSIZE); //size of array\n\n    printf(\"The array is:\\n\");\n    print(arr,size);\n    sort(arr,size);\n    printf(\"The sorted array is:\\n\");\n    print(arr,size);\n}\n\nvoid swap(int arr[],int i,int j) //swap function\n{\n    int temp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = temp;\n}\n\nvoid print(const int arr[],int size) //print function\n{\n    int i;\n    for (i = 0; i &lt; size; i++)\n        printf (\"%d \",arr[i]);\n    printf(\"\\n\");\n}\n\nvoid sort(int arr[],int size) //sort funtion\n{\n    void swap(int arr[], int i, int j);\n    int min, min_index, i, j;\n\n    for( i = 0; i &lt;= size - 2; i++)\n    {\n        min = arr[i];\n        min_index = i;\n        for(j = i + 1; j &lt; size; j++)\n        {\n            if (arr[j] &lt; min)\n            {\n                min = arr[j];\n                min_index = j;\n            }\n        }\n        swap(arr, i, min_index);\n    }\n}\n\nint getArray(int arr[],int max)\n{   \n    int temp = 0;\n    int count = 0;\n    char c;\n\n    printf (\"Enter numbers with spaces between them\\n\");\n    scanf (\"%i\", &amp;temp);\n    while ((c = scanf (\"%i\", &amp;temp)) != EOF || count &lt; max)\n    {\n        if(c == 0){\n            printf (\"Invalid character. Please enter the numbers again.\\n\");\n            while (getchar() != '\\n');\n        } else {\n            arr[count] = temp;\n            count++;\n        }\n        if (c == 1)\n        {\n            printf (\"Too many values\\n\");\n            return count;\n        }\n    }\n    return count;\n}\n</code></pre>\n\n<p>The output is not what I want. This is what I get when I run it.</p>\n\n<pre><code>Enter numbers with spaces between them\n5 4 3 2 1\nToo many values\nThe array is:\n4 \nThe sorted array is:\n4\n</code></pre>\n\n<p>I need the program to properly take in all the elements and not have the 'Too many values' thrown if the user only inputs 5 elements.</p>\n\n<p>It should only print the 'Too many values' when the array is over 10 (<code>MAXSIZE</code>) elements. As of right now it only takes the first or second element of the array.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "edited": false, "score": 0, "creation_date": 1530052347, "post_id": 51052174, "comment_id": 89095506, "body": "please provide complete code, including the call to exists() as well as sample input and expected output"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1530052542, "post_id": 51052174, "comment_id": 89095553, "body": "You haven&#39;t posted any loop.  You aren&#39;t going to get any actual answers until you do."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1530052625, "post_id": 51052174, "comment_id": 89095577, "body": "@AndrewHenle It&#39;s a recursive implementation of a binary search (sigh!) (i.e.) it doesn&#39;t need a loop."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1530052718, "post_id": 51052174, "comment_id": 89095608, "body": "If <code>l</code> is 6 and <code>r</code> is 10, what is <code>(r-l)&#47;2</code> ?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1530052721, "post_id": 51052174, "comment_id": 89095611, "body": "@CraigEstey <i>It&#39;s a recursive implementation of a binbary search (sigh!) (i.e.) it doesn&#39;t need a loop.</i> You didn&#39;t look at the edit history, did you?"}, {"owner": {"reputation": 85, "user_id": 6841086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb7791834a08f663274824194d780e3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Eser", "link": "https://stackoverflow.com/users/6841086/a-eser"}, "edited": false, "score": 0, "creation_date": 1530053200, "post_id": 51052174, "comment_id": 89095721, "body": "I think I should&#39;ve used arr[((r-l)/2)+l] the whole time"}, {"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "edited": false, "score": 0, "creation_date": 1530053233, "post_id": 51052174, "comment_id": 89095732, "body": "or simply (l + r) / 2....see my answer below"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6841086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb7791834a08f663274824194d780e3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Eser", "link": "https://stackoverflow.com/users/6841086/a-eser"}, "edited": false, "score": 0, "creation_date": 1530053531, "post_id": 51052214, "comment_id": 89095814, "body": "I think this is what happens when you try to implement binary search without actually learning it... Thank you I&#39;ll change my code and come back"}, {"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "reply_to_user": {"reputation": 85, "user_id": 6841086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb7791834a08f663274824194d780e3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Eser", "link": "https://stackoverflow.com/users/6841086/a-eser"}, "edited": false, "score": 0, "creation_date": 1530053691, "post_id": 51052214, "comment_id": 89095850, "body": "No problem, look at the code, try to understand what it does, and feel free to ask about it...a great way to learn these types of algorithms.  The only thing tricky about it might be the first condition <code>if (l &lt;= r)</code> which is really just checking for our ending condition, in which we have moved left and right so much, they have crossed each other."}, {"owner": {"reputation": 85, "user_id": 6841086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb7791834a08f663274824194d780e3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Eser", "link": "https://stackoverflow.com/users/6841086/a-eser"}, "edited": false, "score": 0, "creation_date": 1530055684, "post_id": 51052214, "comment_id": 89096284, "body": "It works!! I completely understood the algorithm and tested the code! I love you and thanks for the help!"}, {"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "reply_to_user": {"reputation": 85, "user_id": 6841086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb7791834a08f663274824194d780e3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Eser", "link": "https://stackoverflow.com/users/6841086/a-eser"}, "edited": false, "score": 0, "creation_date": 1530055791, "post_id": 51052214, "comment_id": 89096311, "body": "Awesome, glad to have helped....now figure out how to do it non-recursively.  It&#39;s very similar, just use a loop instead of recursive calls, and manipulate <code>l</code> and <code>r</code> depending on the value of the <code>mid</code> element you are examining."}], "tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": false, "score": 0, "last_activity_date": 1530053201, "last_edit_date": 1530053201, "creation_date": 1530052425, "answer_id": 51052214, "question_id": 51052174, "link": "https://stackoverflow.com/questions/51052174/checking-if-an-element-is-in-the-array-or-not-infinite-loop/51052214#51052214", "title": "Checking if an element is in the array or not infinite loop", "body": "<p>well, if</p>\n\n<pre><code>else if (arr[(r-l)/2] == n) {\n</code></pre>\n\n<p>is being executed, then it is because</p>\n\n<pre><code>if (l == r) {\n</code></pre>\n\n<p>is false</p>\n\n<p>It looks like you are trying to do a binary search, if so, your index computations are all wrong.</p>\n\n<pre><code>int exists(int n, int *arr, int l, int r) {\n    if (l &lt;= r) {\n        int mid = (l + r) / 2;\n        if (arr[mid] == n) {\n            return 1;\n        } else if (arr[mid] &gt; n) {\n            return exists(n, arr, l, mid - 1);\n        } else {\n            return exists(n, arr, mid + 1, r);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6841086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb7791834a08f663274824194d780e3?s=128&d=identicon&r=PG&f=1", "display_name": "A. Eser", "link": "https://stackoverflow.com/users/6841086/a-eser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530053201, "creation_date": 1530052175, "last_edit_date": 1530052669, "question_id": 51052174, "link": "https://stackoverflow.com/questions/51052174/checking-if-an-element-is-in-the-array-or-not-infinite-loop", "title": "Checking if an element is in the array or not infinite loop", "body": "<p>I'm trying to see if a number is in the array or not in logn time but this function executes </p>\n\n<pre><code>else if(arr[(r-l)/2] &lt; n) \n</code></pre>\n\n<p>all the time and it becomes an infinite loop. Why is that? </p>\n\n<pre><code>int exists(int n, int *arr, int l, int r){\n    if(l == r){\n\n        if(arr[l] == n){\n            return 1;\n        }\n        else{\n            return 0;\n        }\n    }\n    else if(arr[(r-l)/2] == n){\n        return 1;\n    }\n    else if(arr[(r-l)/2] &gt; n){\n        return exists(n, arr, l, (r-l)/2);\n    }\n    else if(arr[(r-l)/2] &lt; n){\n        return exists(n, arr, (r-l)/2, r);\n    }\n}\n\nint main(){\n    node *root = NULL;\n\n    int arr[5] = {1,2,3,4,5};\n    printf(\"%d\", exists(5, arr, 0, 4));\n\n}\n</code></pre>\n"}, {"tags": ["c", "compiler-errors", "compilation", "static-analysis", "clang-static-analyzer"], "answers": [{"tags": [], "owner": {"reputation": 690, "user_id": 6661026, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/36f9bbecbbd034e86d0058d4f66140b2?s=128&d=identicon&r=PG&f=1", "display_name": "TheAhmad", "link": "https://stackoverflow.com/users/6661026/theahmad"}, "is_accepted": true, "score": 2, "last_activity_date": 1532651373, "creation_date": 1532651373, "answer_id": 51549187, "question_id": 51052128, "link": "https://stackoverflow.com/questions/51052128/running-clang-tidy-on-a-large-project/51549187#51549187", "title": "Running Clang-Tidy on a Large Project", "body": "<p>In fact, it was a bug in <code>Clang Tidy</code>. It only happens in the case of exports. This happens in cases such as when the <code>run-clang-tidy</code> script is called with <code>-fix</code> switch. The main problem is that the fixes stored in the export file should use absolute paths. This usually happens with projects using <code>CMAKE</code> to generate the compile commands database. But <code>MPlayer</code> uses <code>Makefile</code> as the build system and I used <code>Bear</code> to generate the database. There are also problems with merging the fixes to the same location.</p>\n\n<p>To fix the problem, mainly, I constructed absolute paths and made some other changes similar to those for the code without export. Finally, the <code>YAML</code> export file is revised and generated. The patch is <a href=\"http://lists.llvm.org/pipermail/cfe-commits/Week-of-Mon-20180723/236426.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 690, "user_id": 6661026, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/36f9bbecbbd034e86d0058d4f66140b2?s=128&d=identicon&r=PG&f=1", "display_name": "TheAhmad", "link": "https://stackoverflow.com/users/6661026/theahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2322, "favorite_count": 0, "accepted_answer_id": 51549187, "answer_count": 1, "score": 2, "last_activity_date": 1532735883, "creation_date": 1530051777, "last_edit_date": 1532735883, "question_id": 51052128, "link": "https://stackoverflow.com/questions/51052128/running-clang-tidy-on-a-large-project", "title": "Running Clang-Tidy on a Large Project", "body": "<p>I ran <code>clang-tidy</code> (Clang-Extra-Tools 6.0.0) in the root directory of the source code of an application (<code>MPlayer-1.3.0</code>). Precisely, I use <code>run-clang-tidy.py</code> python script, as follows:</p>\n\n<pre><code>run-clang-tidy.py -header-filter='.*' -checks='-*,readability-braces-around-statements' -fix\n</code></pre>\n\n<p>The commands database is also stored in the root directory in a file named <code>compile_commands.json</code>. After gathering all fixes, it tries to apply them but no fix is applied on any of the source files compiled from the <strong>inner</strong> directories. Here is the first part of the error report: </p>\n\n<pre><code>Applying fixes ...\nDescribed file './libavutil/internal.h' doesn't exist. \nIgnoring...\nDescribed file './libavutil/x86/intmath.h' doesn't exist. \nIgnoring...\nDescribed file 'libavformat/internal.h' doesn't exist. \nIgnoring...\nDescribed file './libavcodec/bytestream.h' doesn't exist. \nIgnoring...\nDescribed file './libavcodec/flac.h' doesn't exist. \nIgnoring...\nDescribed file './libavcodec/get_bits.h' doesn't exist. \nIgnoring...\nDescribed file './libavcodec/internal.h' doesn't exist. \nIgnoring...\nDescribed file './libavcodec/mathops.h' doesn't exist. \nIgnoring...\nDescribed file './libavcodec/put_bits.h' doesn't exist. \nIgnoring...\nDescribed file 'libavformat/matroskaenc.c' doesn't exist. \nIgnoring...\nDescribed file 'libavformat/subtitles.h' doesn't exist. \nIgnoring...\nDescribed file 'libavformat/apngdec.c' doesn't exist. \nIgnoring...\n...\n</code></pre>\n\n<p>These files are compiled using the Makefile located in the folder <code>ffmpeg</code>. For example, <code>libavformat/apngdec.c</code> is located at <code>./ffmpeg/libavformat/apngdec.c</code> where <code>.</code> is the root directory of <code>MPlayer-1.3.0</code>. How can I fix the problem?</p>\n"}, {"tags": ["c", "bash", "ubuntu", "unix"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1530048536, "post_id": 51051569, "comment_id": 89094258, "body": "No, you have to type the text in the same console you launched the program from, or, redirect the input from a file when you run the program. <code>echo</code> just send the test back to the console, not to the the program."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530048577, "post_id": 51051569, "comment_id": 89094276, "body": "<a href=\"https://unix.stackexchange.com/questions/385771/writing-to-stdin-of-a-process\" title=\"writing to stdin of a process\">unix.stackexchange.com/questions/385771/&hellip;</a>"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1530048923, "post_id": 51051569, "comment_id": 89094398, "body": "Why not just use a pipe or a heredoc?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1530048937, "post_id": 51051569, "comment_id": 89094400, "body": "Is there a reason you&#39;re trying to do this, vs. connecting your program&#39;s stdin to a FIFO and writing to that?"}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1530051281, "creation_date": 1530051281, "answer_id": 51052061, "question_id": 51051569, "link": "https://stackoverflow.com/questions/51051569/i-cannot-write-to-stdin-with-proc-pid-fd-0/51052061#51052061", "title": "I cannot write to stdin with /proc/{pid}/fd/0", "body": "<p>If <code>stdin</code> is a terminal, then writing something to <code>stdin</code> will write to the terminal. Reading from the terminal will read whatever is typed into the terminal, not what's written to the terminal. This is just how terminals work.</p>\n\n<p>If you want a program to read from something other than a terminal, you have to direct that to happen. Or, if you want to use a virtual terminal that you can put information into it and have it be read out, you have to direct that to happen.</p>\n\n<p>Probably the simplest solution is to create a pipe with <code>mkpipe</code> and have the program read from the pipe rather than a terminal.</p>\n"}], "owner": {"reputation": 11, "user_id": 4698771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b156d93c43d2ab06e1594bea9856019?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/4698771/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530051281, "creation_date": 1530048348, "question_id": 51051569, "link": "https://stackoverflow.com/questions/51051569/i-cannot-write-to-stdin-with-proc-pid-fd-0", "title": "I cannot write to stdin with /proc/{pid}/fd/0", "body": "<p>I have this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n  char buf[10];\n  puts(\"gimme input:\");\n  fread(buf, 1, 10, stdin);\n  printf(\"got %s\", buf);\n}\n</code></pre>\n\n<p>When I run this and open another terminal I try to write to stdin:</p>\n\n<pre><code>echo \"ASDFASDFASDF\" &gt; /proc/{pid}/0\n</code></pre>\n\n<p>ASDFSADFSADF gets printed on the terminal that is running my C program, but fread still doesn't return until I type in the actual terminal. It also does not print any of the text that I wrote to /proc/{pid}/0</p>\n\n<p>Is there something else I have to do to programatically input text to stdin?</p>\n"}, {"tags": ["c", "gcc", "struct", "bit-fields", "initializer"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1530049553, "post_id": 51051505, "comment_id": 89094610, "body": "You are using compiler flags that generate errors for valid code. By default this message is a warning, meant to alert you if you initialized some but not all of the members of an aggregate"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1530049602, "post_id": 51051505, "comment_id": 89094629, "body": "It would improve the question to post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>, and select a language tag (either C or C++ according to which sort of compiler you are using)"}, {"owner": {"reputation": 255, "user_id": 5071304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48fcec5627ec098ae422e6272e507a1b?s=128&d=identicon&r=PG&f=1", "display_name": "cDreamer", "link": "https://stackoverflow.com/users/5071304/cdreamer"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1530063293, "post_id": 51051505, "comment_id": 89097735, "body": "@M.M I have updated my question to reflect that I am using C language."}, {"owner": {"reputation": 255, "user_id": 5071304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48fcec5627ec098ae422e6272e507a1b?s=128&d=identicon&r=PG&f=1", "display_name": "cDreamer", "link": "https://stackoverflow.com/users/5071304/cdreamer"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1530063333, "post_id": 51051505, "comment_id": 89097750, "body": "@M.M Why are the errors even being generated, or why would there be a warning in the first place?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1530063379, "post_id": 51051505, "comment_id": 89097756, "body": "The missing-initializer warning doesn&#39;t work very well when used with designated initializers"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530064172, "post_id": 51051505, "comment_id": 89097917, "body": "You need to pay close attention to <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9\" rel=\"nofollow noreferrer\">C11 Standard - 6.7.9 Initialization</a> and particularly <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p20\" rel=\"nofollow noreferrer\">C11 Standard - 6.7.9 Initialization (p20)</a>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1530064687, "post_id": 51051505, "comment_id": 89098014, "body": "@DavidC.Rankin I don&#39;t see how that comment is helpful, perhaps you could elaborate"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1530065361, "post_id": 51051505, "comment_id": 89098123, "body": "p20 Loosely discusses how the compiler must address subaggregate unions, specifically <i>&quot;only enough initializers from the list are taken to account for the elements or members of the subaggregate or the first member of the contained union&quot;</i>, while there is nothing wrong with the initialization, depending on how the compiler interprets the un-brace separate subaggregate initialization the compiler may not discriminate between the named bitfield initializers and the first member of the contained union. Which supports your point of the compiler warning may not work very well in this case."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1530074776, "post_id": 51051505, "comment_id": 89100074, "body": "Yeah, the trouble is that often it is intentional to not initialize some members (especially when using designated initializers), and the compiler doesn&#39;t really have any reliable way of knowing if you intentionally omitted a member or not.  In this exact case it seems bogus that changing the order of initializers changes the presence of the warning despite the fact that that doesn&#39;t change the program semantics; it&#39;s probably a symptom of some ad hoc logic for guessing intention.   If enabling this warning then, in my experience, you do end up mangling your code to silence warnings."}], "owner": {"reputation": 255, "user_id": 5071304, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48fcec5627ec098ae422e6272e507a1b?s=128&d=identicon&r=PG&f=1", "display_name": "cDreamer", "link": "https://stackoverflow.com/users/5071304/cdreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530063248, "creation_date": 1530047958, "last_edit_date": 1530063248, "question_id": 51051505, "link": "https://stackoverflow.com/questions/51051505/missing-initializer-in-bitfield-declaration-in-c", "title": "Missing Initializer In Bitfield Declaration in C", "body": "<p>I have a struct defined as:</p>\n\n<pre><code> #pragma pack(push,1)\n typedef struct {\n     uint8_t source_ID;\n     uint8_t dest_ID;\n     union {\n         uint8_t node_ID;\n\n         struct {\n             unsigned int dest   : 4; \n             unsigned int source : 4;\n         };\n     };\n } IDs_t; \n #pragma pack(pop)\n</code></pre>\n\n<p>When I declare one of these structs I do the following:</p>\n\n<pre><code>IDs_t IDs = {         \n    .source_ID = TWI,\n    .dest_ID = APP,\n    .source = INTERNAL,\n    .dest = LISTENER,\n};\n</code></pre>\n\n<p>The values I'm setting them equal to are <code>#define</code> values.</p>\n\n<p>When I compile the code it works, no errors.</p>\n\n<p>If I declare one of the structs like this:</p>\n\n<pre><code>IDs_t IDs = {         \n    .source_ID = TWI,\n    .dest_ID = APP,\n    .dest = LISTENER,\n    .source = INTERNAL,\n};\n</code></pre>\n\n<p>Then I get the following errors:</p>\n\n<blockquote>\n  <p>501:9: error: missing initializer [-Werror=missing-field-initializers]\n  501:9: error: (near initialization for\n  'IDs...source')\n  [-Werror=missing-field-initializers]</p>\n</blockquote>\n\n<p>When all I did was reorder the element declarations. Is this not allowed? I can't seem to find the answer, but I have a suspicion. My suspicion is that since I am using an ARM core from ST, the memory is in little endian format. Which means that the <code>source</code> element is the LSB of the <code>node_ID</code> element. Therefore I must declare the LSB first and then the MSB, which would be the <code>dest</code> element.</p>\n\n<p>Is my suspicion correct? Or is there another reason for these errors?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1530046005, "post_id": 51051108, "comment_id": 89093213, "body": "&quot;It&#39;s not working&quot; is not a proper problem description. How to they differ?"}, {"owner": {"reputation": 590, "user_id": 9848932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a484cace64c76f71d3bb1fab9410761?s=128&d=identicon&r=PG&f=1", "display_name": "jdc", "link": "https://stackoverflow.com/users/9848932/jdc"}, "edited": false, "score": 0, "creation_date": 1530046095, "post_id": 51051108, "comment_id": 89093250, "body": "The <code>smallest[]</code> array is popped off the stack after the return statement.  Therefore, you have a dangling pointer after the function call.  Your function could just return an int that points to the &quot;smallest&quot; argument passed to the function.  For example, return 1 if a is the smallest, 2 if b is smallest, ..."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1530046099, "post_id": 51051108, "comment_id": 89093252, "body": "Long story short, the function <code>min()</code> is incorrect. It is incorrect in repl.it and it is also incorrect in CLion, it is incorrect everywhere. The part that is incorrect is <code>return smallest</code>, because <code>smallest</code> only exists for the duration of the function call."}, {"owner": {"reputation": 27, "user_id": 6484341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqO6dLh_E5w/AAAAAAAAAAI/AAAAAAAAAB4/sPsrAnNX_Gk/photo.jpg?sz=128", "display_name": "Mystic Developer", "link": "https://stackoverflow.com/users/6484341/mystic-developer"}, "edited": false, "score": 0, "creation_date": 1530046173, "post_id": 51051108, "comment_id": 89093286, "body": "Im sorry, In Clion I get the output The smallest string is an apple, on repl.it however all I get is an error. Here are screenshots of my different outputs. <a href=\"https://ibb.co/c6yL4o\" rel=\"nofollow noreferrer\">ibb.co/c6yL4o</a> <a href=\"https://ibb.co/eGNPVT\" rel=\"nofollow noreferrer\">ibb.co/eGNPVT</a>"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1530046360, "post_id": 51051108, "comment_id": 89093368, "body": "@MysticDeveloper: The fact that running the program in CLion gave you the right answer is unfortunate, because it makes your job more difficult. If the program crashed, it would be obvious that your program is wrong. However, your program gave the right answer... completely by accident... so even though the program is wrong, it&#39;s less obvious that it&#39;s wrong."}, {"owner": {"reputation": 27, "user_id": 6484341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqO6dLh_E5w/AAAAAAAAAAI/AAAAAAAAAB4/sPsrAnNX_Gk/photo.jpg?sz=128", "display_name": "Mystic Developer", "link": "https://stackoverflow.com/users/6484341/mystic-developer"}, "edited": false, "score": 0, "creation_date": 1530046378, "post_id": 51051108, "comment_id": 89093377, "body": "Thanks so much Dietrich, I was going crazy thinking it was the repl.it IDE lol"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1530046626, "post_id": 51051108, "comment_id": 89093477, "body": "I recommend enabling warnings, standard compiler warnings will identify this problem (you&#39;ll see a message like &quot;warning: function returns address of local variable [-Wreturn-local-addr]&quot;). The Address Sanitizer will also catch this error, I recommend enabling the Address Sanitizer, because it will make programs with errors in them more consistent (they will more consistently crash, which is good, instead of just doing the wrong thing, which is worse)."}], "owner": {"reputation": 27, "user_id": 6484341, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iqO6dLh_E5w/AAAAAAAAAAI/AAAAAAAAAB4/sPsrAnNX_Gk/photo.jpg?sz=128", "display_name": "Mystic Developer", "link": "https://stackoverflow.com/users/6484341/mystic-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1530045998, "answer_count": 0, "score": 0, "last_activity_date": 1530045966, "creation_date": 1530045874, "last_edit_date": 1530045966, "question_id": 51051108, "link": "https://stackoverflow.com/questions/51051108/error-when-i-try-to-return-a-char-array-from-a-function-in-c-program-works-in-c", "closed_reason": "Duplicate", "title": "Error when I try to return a char array from a function in C. Program works in CLion but not in repl.it", "body": "<p>I am new to C programming and was wondering if anyone could give me a hint on why my program is acting up on repl.it, but not on CLion. It seems to have something to do with my return statement where I return smallest in my min function. However, I don't understand why it is working correctly on one IDE and not the repl.it IDE. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar *min(char *a, char *b, char *c);\n\nint main(void) {\n    char apple[10] = \"apple\";\n    char boy[10] = \"boy\";\n    char zoo[10] = \"zoo\";\n    char smallest[10];\n\n    strcpy(smallest, min(apple, boy, zoo));\n\n    printf(\"The smallest string is %s\", smallest);\n\n    return 0;\n}\n\nchar *min(char *a, char *b, char *c) {\n    char smallest[10];\n\n    int firstResult = strcmp(a, b);\n\n    if (firstResult &lt; 0) {\n        strcpy(smallest, a);\n    } else {\n        strcpy(smallest, b);\n    }\n\n    int secondResult = strcmp(smallest, c);\n\n    if (secondResult &lt; 0) {\n        strcpy(smallest, smallest);\n    } else {\n        strcpy(smallest, c);\n    }\n\n    return smallest;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "compilation", "renesas-rx"], "answers": [{"tags": [], "owner": {"reputation": 561, "user_id": 3638827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/67u9P.png?s=128&g=1", "display_name": "ahogen", "link": "https://stackoverflow.com/users/3638827/ahogen"}, "is_accepted": true, "score": 0, "last_activity_date": 1530045392, "creation_date": 1530045392, "answer_id": 51051028, "question_id": 51051027, "link": "https://stackoverflow.com/questions/51051027/renesas-gcc-linker-error-with-shared-code/51051028#51051028", "title": "Renesas GCC linker error with shared code", "body": "<p>I eventually noticed that the build log didn't contain any C files from the <code>lib/</code> folder. </p>\n\n<p>The solution was simple. In E2 Studio, in the Project Explorer pane, I dragged the <code>lib/</code> folder in to (on top of) the <code>src/</code> folder.</p>\n\n<p>Now the structure in Project Explorer looks like this:</p>\n\n<pre><code>Archives/           (a virtual folder)\nIncludes/           (a virtual folder/list)\nsrc/\n    lib/            (the virtual lib folder I added)\n        my_lib_a/\n        my_lib_b/\ngenerate/\n</code></pre>\n\n<p>Evidently E2 Studio does not put source code that's outside of the <code>src/</code> directory in the autogenerated make file. Or maybe there's some setting I missed. Nonetheless, since the C code wasn't compiled, there was no object file to link against, hence the linker error.</p>\n"}], "owner": {"reputation": 561, "user_id": 3638827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/67u9P.png?s=128&g=1", "display_name": "ahogen", "link": "https://stackoverflow.com/users/3638827/ahogen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 51051028, "answer_count": 1, "score": 0, "last_activity_date": 1530045392, "creation_date": 1530045392, "question_id": 51051027, "link": "https://stackoverflow.com/questions/51051027/renesas-gcc-linker-error-with-shared-code", "title": "Renesas GCC linker error with shared code", "body": "<p>I'm using <a href=\"https://gcc-renesas.com/\" rel=\"nofollow noreferrer\">GCC for Renesas</a> with Renesas's E2 Studio IDE (v.6.2.0). Not that\nit should matter, but I've also used Applilet3 (v.3.08.01.05) to generate\nboard support files and peripheral drivers.</p>\n\n<p>When I attempt to build, I get the following errors...</p>\n\n<pre><code>'Invoking Linker'\nrl78-elf-gcc (......object files and flags.......)\n./src/r_main.o: In function `main':\n\n&lt;path_to_git_repo_dir&gt;\\src\\&lt;project_name&gt;\\HardwareDebug/../src/r_main.c:86: undefined reference to `_common_lib_a_init'\n&lt;path_to_git_repo_dir&gt;\\src\\&lt;project_name&gt;\\HardwareDebug/../src/r_main.c:89: undefined reference to `_common_lib_b_init'\n\ncollect2.exe: error: ld returned 1 exit status\nmakefile:67: recipe for target 'my_project.elf' failed\nmake: *** [my_project.elf] Error 1\n</code></pre>\n\n<h1>Project Setup</h1>\n\n<p>I have some source code shared between projects in a \"lib\" folder. In \n<code>main()</code> I call some initialize functions for these \"libraries\", as\nyou can see from the errors. I don't understand why the compile\nprocess works and yet this fails.</p>\n\n<p>My source tree layout looks like this...</p>\n\n<pre><code>git-repo-dir/\n    .git/\n    doc/\n    lib/\n        my_lib_a/\n            common_lib_a.h\n            common_lib_a.c\n        my_lib_b/\n            common_lib_b.h\n            common_lib_b.c\n    src/\n        my_project/\n            .cproj\n            .project\n            applilet3_config.cgp\n            src/\n            generate/\n</code></pre>\n\n<p>I added the library source code to my E2 Studio project by...</p>\n\n<ul>\n<li>Right-clicking on the project name in E2's \"Project Explorer\" pane</li>\n<li>Clicking <code>Import</code> and select <code>File System</code></li>\n<li>Browse to <code>get-repo-dir</code> and select (single-click) the <code>lib</code> folder</li>\n<li>Check the box on the left pane to include all files in <code>lib</code></li>\n<li>Ensure \"Create top-level folder\" is selected</li>\n<li>Click \"Advanced\"</li>\n<li>Check the box for \"Create links in workspace\" and \"Create virtual folders\" and \"Create link locations relative to:\"  is <code>PROJECT_LOC</code></li>\n<li>Finish</li>\n</ul>\n\n<p>Then I add the include paths for the libraries to the build settings...</p>\n\n<ul>\n<li>Right-clicking on the project name in E2's \"Project Explorer\" pane</li>\n<li>Select \"Properties\"</li>\n<li>Select <code>C/C++ General &gt; Paths and Symbols</code></li>\n<li>Ensure configuration is the current/active one</li>\n<li>Select the \"GNU C\" language</li>\n<li>Click \"Add\" to add the following\n\n<ul>\n<li><code>\"${ProjDirPath}/../../lib/my_lib_a\"</code></li>\n<li><code>\"${ProjDirPath}/../../lib/my_lib_b\"</code></li>\n</ul></li>\n<li>Apply</li>\n<li>Verify these paths are visible in <code>C/C++ Build &gt; Settings &gt; Compiler &gt; Includes</code></li>\n</ul>\n\n<p>So in E2 Studio, the Project Explorer shows..</p>\n\n<pre><code>Archives/           (a virtual folder)\nIncludes/           (a virtual folder/list)\nsrc/\ngenerate/\nlib/                (the virtual lib folder I added)\n    my_lib_a/\n    my_lib_b/\n</code></pre>\n\n<h3>Any ideas why I'm getting a linker error?</h3>\n"}, {"tags": ["c++", "c", "winapi", "networking"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530046621, "post_id": 51050673, "comment_id": 89093475, "body": "you need add <code>#define _WINSOCKAPI_</code> before <code>#include&lt;windows.h&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9759764, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ezio Blaze", "link": "https://stackoverflow.com/users/9759764/ezio-blaze"}, "edited": false, "score": 0, "creation_date": 1530046286, "post_id": 51051097, "comment_id": 89093331, "body": "Thanks the errors have gone but its displays &quot;wntdll.pdb not loaded&quot; when i run the programme..can you please help me with that.."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 31, "user_id": 9759764, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ezio Blaze", "link": "https://stackoverflow.com/users/9759764/ezio-blaze"}, "edited": false, "score": 0, "creation_date": 1530046349, "post_id": 51051097, "comment_id": 89093363, "body": "PDB files are not used at runtime, only by the debugger.  So either ignore the error, or configure your debugger to load the PDB properly."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530047890, "post_id": 51051097, "comment_id": 89094038, "body": "<code>windows.h</code> include <code>winsock.h</code> independent from  <code>_WIN32_WINNT</code> value. always (if not defined <code>_MAC</code>). but (2) or (3) is working solution"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530051737, "post_id": 51051097, "comment_id": 89095331, "body": "@RbMm Not according to the copy of <code>windows.h</code> that I have. The inclusion of <code>winsock(2).h</code> is wrapped inside of an <code>#if(_WIN32_WINNT &gt;= 0x0400)</code> block. Maybe my compiler vendor added it to their copy of the Win32 SDK, who knows, but it is there. And it is not a bad idea to make sure that <code>_WIN32_WINNT &gt;= 0x0400</code> since nobody should be targeting OS versions prior to NT4 anyway."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530052086, "post_id": 51051097, "comment_id": 89095437, "body": "may be you have old <code>windows.h</code>. i look in new, from win 10 sdk (op also use new version). also now <code>windows.h</code> include <code>&lt;sdkddkver.h&gt;</code> at very begin. if we not set <code>_WIN32_WINNT</code> it define it by default as <code>#define  _WIN32_WINNT   0x0A00</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530052538, "post_id": 51051097, "comment_id": 89095551, "body": "so i be say in op code _WIN32_WINNT is equal to 0x0A00"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1530087845, "post_id": 51051097, "comment_id": 89106136, "body": "<i>move #include&lt;winsock2.h&gt; above #include&lt;windows.h&gt;</i> That always  works for me."}, {"owner": {"reputation": 1537, "user_id": 749104, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a24f2b4fb5feb1eb661d9f717e5eafb3?s=128&d=identicon&r=PG", "display_name": "Jay Tomten", "link": "https://stackoverflow.com/users/749104/jay-tomten"}, "edited": false, "score": 0, "creation_date": 1536864274, "post_id": 51051097, "comment_id": 91587294, "body": "This fixed my related issue... some headers were included out of order. Thanks!"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 4, "last_activity_date": 1530046128, "last_edit_date": 1530046128, "creation_date": 1530045821, "answer_id": 51051097, "question_id": 51050673, "link": "https://stackoverflow.com/questions/51050673/error-in-retrieving-network-information-using-getnetworkparams/51051097#51051097", "title": "Error in retrieving network information using GetNetworkParams()", "body": "<p>If <code>_WIN32_WINNT</code> is <code>&lt; 0x0400</code>, <code>windows.h</code> includes <code>winsock.h</code> if it and <code>winsock2.h</code> have not already been included.</p>\n\n<p>If <code>_WIN32_WINNT</code> is <code>&gt;= 0x0400</code>, <code>windows.h</code> includes <code>winsock2.h</code> instead of <code>winsock.h</code>.</p>\n\n<p><code>winsock.h</code> is not compatible with <code>winsock2.h</code>, so if <code>winsock.h</code> gets included before <code>winsock2.h</code>, all kinds of errors happen, including the kinds that you are seeing.  But, if <code>winsock2.h</code> gets included before <code>winsock.h</code>, it disables <code>winsock.h</code> for you to avoid errors.</p>\n\n<p>So, to disable <code>winsock.h</code> so you can use <code>winsock2.h</code>, you need to either:</p>\n\n<ul>\n<li><p>make sure <code>_WIN32_WINNT</code> is <code>&gt;= 0x0400</code>.</p></li>\n<li><p>move <code>#include&lt;winsock2.h&gt;</code> above <code>#include&lt;windows.h&gt;</code></p></li>\n<li><p>add <code>#define _WINSOCKAPI_</code> above <code>#include&lt;windows.h&gt;</code></p></li>\n</ul>\n\n<hr>\n\n<p>Also, on a side note, <code>WIN_32_LEAN_AND_MEAN</code> needs to be <code>WIN32_LEAN_AND_MEAN</code> instead.</p>\n"}], "owner": {"reputation": 31, "user_id": 9759764, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ezio Blaze", "link": "https://stackoverflow.com/users/9759764/ezio-blaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1530052118, "creation_date": 1530043746, "last_edit_date": 1530052118, "question_id": 51050673, "link": "https://stackoverflow.com/questions/51050673/error-in-retrieving-network-information-using-getnetworkparams", "title": "Error in retrieving network information using GetNetworkParams()", "body": "<p>This is code I have written in C++ to retrieve network information:</p>\n\n<pre><code>#ifndef WIN_32_LEAN_AND_MEAN\n#define WIN_32_LEAN_AND_MEAN\n#endif\n\n#include&lt;windows.h&gt;\n#include&lt;winsock2.h&gt;\n#include&lt;iphlpapi.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;iostream&gt;\n\n#pragma comment(lib,\"iphlpapi.lib\")\nusing namespace std;\n\nint main()\n{\n    FIXED_INFO *pFixedInfo;\n    IP_ADDR_STRING *pIPAddr;\n\n    ULONG ulOutBuflen;\n    DWORD dwRetVal;\n\n    pFixedInfo = (FIXED_INFO *)malloc(sizeof(FIXED_INFO));\n    ulOutBuflen = sizeof(FIXED_INFO);\n\n    if (GetNetworkParams(pFixedInfo, &amp;ulOutBuflen) == ERROR_BUFFER_OVERFLOW) {\n        free(pFixedInfo);\n        pFixedInfo = (FIXED_INFO *)malloc(sizeof(ulOutBuflen));\n        if (pFixedInfo == NULL)\n            cout &lt;&lt; \"Error allocating memory needed to call GetNetworkParams \\n\";\n    }\n\n    if(dwRetVal=GetNetworkParams(pFixedInfo,&amp;ulOutBuflen)!=NO_ERROR){\n        cout &lt;&lt; \"GetNetwrokParams failed : \" &lt;&lt; dwRetVal &lt;&lt; endl;\n        if (pFixedInfo)\n            free(pFixedInfo);\n    }\n\n    cout &lt;&lt; \"Host Name : \" &lt;&lt; pFixedInfo-&gt;HostName;\n    cout &lt;&lt; \"Domain Name : \" &lt;&lt; pFixedInfo-&gt;DomainName;\n    cout &lt;&lt; \"DNS Server s : \" &lt;&lt; endl;\n    cout &lt;&lt; pFixedInfo-&gt;DnsServerList.IpAddress.String&lt;&lt;endl;\n    pIPAddr = pFixedInfo-&gt;DnsServerList.Next;\n    while (pIPAddr)\n    {\n        cout &lt;&lt; pIPAddr-&gt;IpAddress.String &lt;&lt; endl;\n        pIPAddr = pIPAddr-&gt;Next;\n    }\n    cout &lt;&lt; \"Node Type : \";\n    switch (pFixedInfo-&gt;NodeType)\n    {\n        case 1:\n            cout &lt;&lt; \"Broadcast \" &lt;&lt; endl;\n            break;\n        case 2:\n            cout &lt;&lt; \"Peer to Peer \" &lt;&lt; endl;\n            break;\n        case 4:\n            cout &lt;&lt; \"Mixed \" &lt;&lt; endl;\n            break;\n        case 8:\n            cout &lt;&lt; \"Hybrid \" &lt;&lt; endl;\n            break;\n        default :\n            cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; \"NetBios Scope ID : \" &lt;&lt; pFixedInfo-&gt;ScopeId&lt;&lt;endl;\n\n    if (pFixedInfo-&gt;EnableRouting)\n        cout &lt;&lt; \"Routing enabled on \" &lt;&lt; endl;\n    else\n        cout &lt;&lt; \"Routing enabled of\" &lt;&lt; endl;\n    if (pFixedInfo-&gt;EnableProxy)\n        cout &lt;&lt; \"Proxy enabled \" &lt;&lt; endl;\n    else\n        cout &lt;&lt; \"Proxy disabled \" &lt;&lt; endl;\n    if (pFixedInfo-&gt;EnableDns)\n        cout &lt;&lt; \"NETBIOS Resolution uses dns \" &lt;&lt; endl;\n    else\n        cout &lt;&lt; \"NETBIOS Resolution does not uses dns \" &lt;&lt; endl;\n\n    if (pFixedInfo) {\n        free(pFixedInfo);\n        pFixedInfo = NULL;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Every time I run the code, it shows a bunch of errors.  I have taken code from MSDN, but still it does not work.</p>\n\n<p>Can anyone suggest any improvement in the code?</p>\n\n<p>Here are the errors :</p>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State\nWarning C4005   'IN_CLASSB': macro redefinition Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 578 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 437 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 438 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 439 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 446 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 452 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 453 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 454 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 470 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 480 \nError (active)  E0040   expected an identifier  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\shared\\ws2def.h 482 \nError (active)  E0338   more than one instance of overloaded function \"__WSAFDIsSet\" has 'C' linkage    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   141 \nError (active)  E0338   more than one instance of overloaded function \"accept\" has 'C' linkage  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1624    \nError (active)  E0338   more than one instance of overloaded function \"bind\" has 'C' linkage    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1646    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"closesocket\" (declared at line 749 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1667    \nError (active)  E0338   more than one instance of overloaded function \"connect\" has 'C' linkage Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1684    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"ioctlsocket\" (declared at line 756 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1705    \nError (active)  E0338   more than one instance of overloaded function \"getpeername\" has 'C' linkage Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1728    \nError (active)  E0338   more than one instance of overloaded function \"getsockname\" has 'C' linkage Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1749    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"getsockopt\" (declared at line 771 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")   Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1770    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"htonl\" (declared at line 778 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1795    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"htons\" (declared at line 780 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1812    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"inet_addr\" (declared at line 782 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1830    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"inet_ntoa\" (declared at line 784 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1848    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"listen\" (declared at line 786 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")   Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1948    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"ntohl\" (declared at line 790 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1967    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"ntohs\" (declared at line 792 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   1984    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"recv\" (declared at line 794 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\") Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2001    \nError (active)  E0338   more than one instance of overloaded function \"recvfrom\" has 'C' linkage    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2024    \nError (active)  E0338   more than one instance of overloaded function \"select\" has 'C' linkage  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2051    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"send\" (declared at line 815 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\") Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2076    \nError (active)  E0338   more than one instance of overloaded function \"sendto\" has 'C' linkage  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2099    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"setsockopt\" (declared at line 829 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")   Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2126    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"shutdown\" (declared at line 836 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\") Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2151    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"socket\" (declared at line 840 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")   Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2171    \nError (active)  E0311   cannot overload functions distinguished by return type alone    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2196    \nError (active)  E0311   cannot overload functions distinguished by return type alone    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2218    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"gethostname\" (declared at line 854 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2235    \nError (active)  E0311   cannot overload functions distinguished by return type alone    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2275    \nError (active)  E0311   cannot overload functions distinguished by return type alone    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2294    \nError (active)  E0311   cannot overload functions distinguished by return type alone    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2313    \nError (active)  E0311   cannot overload functions distinguished by return type alone    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2330    \nError (active)  E0338   more than one instance of overloaded function \"WSAStartup\" has 'C' linkage  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2350    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSACleanup\" (declared at line 876 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")   Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2370    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSASetLastError\" (declared at line 878 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2387    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAGetLastError\" (declared at line 880 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")  Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2404    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAIsBlocking\" (declared at line 882 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2425    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAUnhookBlockingHook\" (declared at line 884 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2443    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSASetBlockingHook\" (declared at line 886 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")   Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2461    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSACancelBlockingCall\" (declared at line 888 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2479    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAAsyncGetServByName\" (declared at line 890 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2497    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAAsyncGetServByPort\" (declared at line 898 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2525    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAAsyncGetProtoByName\" (declared at line 906 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")   Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2553    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAAsyncGetProtoByNumber\" (declared at line 913 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\") Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2579    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAAsyncGetHostByName\" (declared at line 920 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2605    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAAsyncGetHostByAddr\" (declared at line 927 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2631    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSACancelAsyncRequest\" (declared at line 936 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")    Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2661    \nError (active)  E1389   redeclaration cannot add dllexport/dllimport to \"WSAAsyncSelect\" (declared at line 938 of \"c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\winsock.h\")   Project1    c:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.17134.0\\um\\WinSock2.h   2679    \nWarning C4005   'AF_IPX': macro redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 103 \nWarning C4005   'AF_MAX': macro redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 147 \nWarning C4005   'SO_DONTLINGER': macro redefinition Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 185 \nError   C2011   'sockaddr': 'struct' type redefinition  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 235 \nError   C2059   syntax error: 'constant'    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 437 \nError   C3805   'constant': unexpected token, expected either '}' or a ','  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 437 \nWarning C4005   'IN_CLASSA': macro redefinition Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 572 \nWarning C4005   'IN_CLASSC': macro redefinition Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 584 \nWarning C4005   'INADDR_ANY': macro redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 595 \nWarning C4005   'INADDR_BROADCAST': macro redefinition  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 597 \nError   C2011   'sockaddr_in': 'struct' type redefinition   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\shared\\ws2def.h 633 \nError   C2011   'fd_set': 'struct' type redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   136 \nWarning C4005   'FD_CLR': macro redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   156 \nWarning C4005   'FD_SET': macro redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   171 \nError   C2011   'timeval': 'struct' type redefinition   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   180 \nError   C2011   'hostent': 'struct' type redefinition   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   236 \nError   C2011   'netent': 'struct' type redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   249 \nError   C2011   'servent': 'struct' type redefinition   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   256 \nError   C2011   'protoent': 'struct' type redefinition  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   268 \nError   C2011   'WSAData': 'struct' type redefinition   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   364 \nError   C2011   'sockproto': 'struct' type redefinition Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   462 \nError   C2011   'linger': 'struct' type redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   504 \nWarning C4005   'SOMAXCONN': macro redefinition Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   517 \nWarning C4005   'FD_READ': macro redefinition   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   551 \nWarning C4005   'FD_WRITE': macro redefinition  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   554 \nWarning C4005   'FD_OOB': macro redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   557 \nWarning C4005   'FD_ACCEPT': macro redefinition Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   560 \nWarning C4005   'FD_CONNECT': macro redefinition    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   563 \nWarning C4005   'FD_CLOSE': macro redefinition  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   566 \nError   C2375   'accept': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1624    \nError   C2375   'bind': redefinition; different linkage Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1646    \nError   C2375   'closesocket': redefinition; different linkage  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1667    \nError   C2375   'connect': redefinition; different linkage  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1684    \nError   C2375   'ioctlsocket': redefinition; different linkage  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1705    \nError   C2375   'getpeername': redefinition; different linkage  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1728    \nError   C2375   'getsockname': redefinition; different linkage  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1749    \nError   C2375   'getsockopt': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1770    \nError   C2375   'htonl': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1795    \nError   C2375   'htons': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1812    \nError   C2375   'inet_addr': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1830    \nError   C2375   'inet_ntoa': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1848    \nError   C2375   'listen': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1948    \nError   C2375   'ntohl': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1967    \nError   C2375   'ntohs': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   1984    \nError   C2375   'recv': redefinition; different linkage Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2001    \nError   C2375   'recvfrom': redefinition; different linkage Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2024    \nError   C2375   'select': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2051    \nError   C2375   'send': redefinition; different linkage Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2076    \nError   C2375   'sendto': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2099    \nError   C2375   'setsockopt': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2126    \nError   C2375   'shutdown': redefinition; different linkage Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2151    \nError   C2375   'socket': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2171    \nError   C2375   'gethostbyaddr': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2196    \nError   C2375   'gethostbyname': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2218    \nError   C2375   'gethostname': redefinition; different linkage  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2235    \nError   C2375   'getservbyport': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2275    \nError   C2375   'getservbyname': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2294    \nError   C2375   'getprotobynumber': redefinition; different linkage Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2313    \nError   C2375   'getprotobyname': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2330    \nError   C2375   'WSAStartup': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2350    \nError   C2375   'WSACleanup': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2370    \nError   C2375   'WSASetLastError': redefinition; different linkage  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2387    \nError   C2375   'WSAGetLastError': redefinition; different linkage  Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2404    \nError   C2375   'WSAIsBlocking': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2425    \nError   C2375   'WSAUnhookBlockingHook': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2443    \nError   C2375   'WSASetBlockingHook': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2461    \nError   C2375   'WSACancelBlockingCall': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2479    \nError   C2375   'WSAAsyncGetServByName': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2497    \nError   C2375   'WSAAsyncGetServByPort': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2525    \nError   C2375   'WSAAsyncGetProtoByName': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2553    \nError   C2375   'WSAAsyncGetProtoByNumber': redefinition; different linkage Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2579    \nError   C2375   'WSAAsyncGetHostByName': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2605    \nError   C2375   'WSAAsyncGetHostByAddr': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2631    \nError   C2375   'WSACancelAsyncRequest': redefinition; different linkage    Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2661    \nError   C2375   'WSAAsyncSelect': redefinition; different linkage   Project1    c:\\program files (x86)\\windows kits\\10\\include\\10.0.17134.0\\um\\winsock2.h   2679    \n</code></pre>\n"}, {"tags": ["c", "openssl", "cryptography", "signature", "elliptic-curve"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9986495, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tTUJ8h43IfY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1Py7sdrr4_vR8Mk4LJqJY-bC18_A/mo/photo.jpg?sz=128", "display_name": "nope", "link": "https://stackoverflow.com/users/9986495/nope"}, "edited": false, "score": 0, "creation_date": 1530046131, "post_id": 51050696, "comment_id": 89093267, "body": "Thank you. The curve and key functions got linked but the handleErrors function calls were still undefined. Do you know what I need to include for those?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 47, "user_id": 9986495, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tTUJ8h43IfY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1Py7sdrr4_vR8Mk4LJqJY-bC18_A/mo/photo.jpg?sz=128", "display_name": "nope", "link": "https://stackoverflow.com/users/9986495/nope"}, "edited": false, "score": 0, "creation_date": 1530046367, "post_id": 51050696, "comment_id": 89093372, "body": "@NoahPerkovich That function is not part of the OpenSSL library.  You&#39;ll need to pull that from wherever you got this sample code from."}, {"owner": {"reputation": 47, "user_id": 9986495, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tTUJ8h43IfY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1Py7sdrr4_vR8Mk4LJqJY-bC18_A/mo/photo.jpg?sz=128", "display_name": "nope", "link": "https://stackoverflow.com/users/9986495/nope"}, "edited": false, "score": 0, "creation_date": 1530046907, "post_id": 51050696, "comment_id": 89093613, "body": "I got it from <a href=\"https://wiki.openssl.org/index.php/Elliptic_Curve_Cryptography\" rel=\"nofollow noreferrer\">wiki.openssl.org/index.php/Elliptic_Curve_Cryptography</a>. Is there a better way to call the key generation functions?"}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "edited": false, "score": 0, "creation_date": 1530054601, "post_id": 51050696, "comment_id": 89096032, "body": "The <code>handleErrors()</code> function is supposed to be a hint to &quot;fill your own code in here&quot;."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1530043893, "creation_date": 1530043893, "answer_id": 51050696, "question_id": 51050653, "link": "https://stackoverflow.com/questions/51050653/openssl-api-funtion-reference-issue/51050696#51050696", "title": "openssl api funtion reference issue", "body": "<p>You need to link in the OpenSSL crypto library when compiling:</p>\n\n<pre><code>gcc -g -Wall -Wextra -o key_gen key_gen.c -lcrypto\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9986495, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tTUJ8h43IfY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1Py7sdrr4_vR8Mk4LJqJY-bC18_A/mo/photo.jpg?sz=128", "display_name": "nope", "link": "https://stackoverflow.com/users/9986495/nope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 51050696, "answer_count": 1, "score": 1, "last_activity_date": 1530043893, "creation_date": 1530043656, "last_edit_date": 1530043828, "question_id": 51050653, "link": "https://stackoverflow.com/questions/51050653/openssl-api-funtion-reference-issue", "title": "openssl api funtion reference issue", "body": "<p>I am trying to generate and play around with openssl eliptic curves. running this: from the documentation</p>\n\n<pre><code>EC_GROUP *curve;\nif(NULL == (curve = EC_GROUP_new_by_curve_name(NID_secp224r1)))\n      handleErrors(); \nEC_KEY *key;\nif(NULL == (key = EC_KEY_new_by_curve_name(NID_secp224r1)))\n     handleErrors();\nif(1 != EC_KEY_generate_key(key)) handleErrors();\n</code></pre>\n\n<p>with theese includes: </p>\n\n<pre><code>#include &lt;openssl/obj_mac.h&gt;\n#include &lt;openssl/ec.h&gt;\n#include &lt;openssl/bn.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>I have looked through the ec.h file and it has the functions I am calling. My error is this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>key_gen.c:(.text+0x15): undefined reference to `EC_GROUP_new_by_curve_name'\nkey_gen.c:(.text+0x2a): undefined reference to `handleErrors'\nkey_gen.c:(.text+0x34): undefined reference to `EC_KEY_new_by_curve_name'\nkey_gen.c:(.text+0x49): undefined reference to `handleErrors'\nkey_gen.c:(.text+0x55): undefined reference to `EC_KEY_generate_key'\nkey_gen.c:(.text+0x64): undefined reference to `handleErrors'\n</code></pre>\n\n<p>do I need any more includes?</p>\n"}, {"tags": ["c", "dll", "code-injection", "createremotethread"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4758971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff947cf661dc8f9ad1ded9c0be4bb00?s=128&d=identicon&r=PG&f=1", "display_name": "lulle", "link": "https://stackoverflow.com/users/4758971/lulle"}, "edited": false, "score": 0, "creation_date": 1530044080, "post_id": 51050441, "comment_id": 89092446, "body": "Thanks a lot for the quick response, VirtualAllocEx is what i needed."}], "tags": [], "owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "is_accepted": true, "score": 1, "last_activity_date": 1530042674, "creation_date": 1530042674, "answer_id": 51050441, "question_id": 51050381, "link": "https://stackoverflow.com/questions/51050381/dll-code-injection-with-remote-thread-where-to-store-dll-filename-location-in-t/51050441#51050441", "title": "DLL code injection with remote Thread: Where to store DLL filename/location in target process address space?", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366890.aspx\" rel=\"nofollow noreferrer\"><code>VirtualAllocEx</code></a> allows you to specify the process in which memory is allocated. You would use this to allocate a block of memory. Note that you cannot write directly to the returned address--it is in a different process. You would write the DLL name via <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms681674.aspx\" rel=\"nofollow noreferrer\"><code>WriteProcessMemory</code></a>.</p>\n\n<p>If you were intending to place your code in <code>DllMain</code>, you should not. Windows holds an internal lock while executing <code>DllMain</code> and this adds a risk of a deadlock, depending on what you intend to do in your hook code. You could get the address of a function in your DLL and use <code>CreateRemoteThread</code> again to run this on a separate thread after the DLL has been loaded.</p>\n\n<p>Rather than implementing all this yourself, I would recommend that you use a library someone has already written, such as <a href=\"https://easyhook.github.io/\" rel=\"nofollow noreferrer\">EasyHook</a>, which supports both managed and unmanaged injection.</p>\n"}], "owner": {"reputation": 75, "user_id": 4758971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff947cf661dc8f9ad1ded9c0be4bb00?s=128&d=identicon&r=PG&f=1", "display_name": "lulle", "link": "https://stackoverflow.com/users/4758971/lulle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 51050441, "answer_count": 1, "score": 1, "last_activity_date": 1530044004, "creation_date": 1530042391, "last_edit_date": 1530044004, "question_id": 51050381, "link": "https://stackoverflow.com/questions/51050381/dll-code-injection-with-remote-thread-where-to-store-dll-filename-location-in-t", "title": "DLL code injection with remote Thread: Where to store DLL filename/location in target process address space?", "body": "<p>there might be no (useful) answere to this Questions, but whatever.\nI want to inject code into an application via DLL code injection.\nThe plan is:</p>\n\n<ol>\n<li><p>Find the address of the LoadLibrary function in the target process.</p></li>\n<li><p>Write a string with the name/filepath of the DLL i want to load using WriteProcessMemory() somewhere in the target process address space.</p></li>\n<li><p>Start a remote thread using CreateRemoteThread() with the address of LoadLibrary() as entry point and a pointer to the string containing the name/filepath of the DLL to be loaded as the Argument for the LoadLibrary() function.</p></li>\n</ol>\n\n<p>The problem is at no. 2.\nWhere in the target process address space do i store the string (without corrupting something)?</p>\n\n<p>If this question has been asked before, feel free to point me there. </p>\n\n<p>Thanks a lot for any help.</p>\n"}, {"tags": ["c", "matlab", "matlab-coder"], "comments": [{"owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "edited": false, "score": 0, "creation_date": 1530108512, "post_id": 51050216, "comment_id": 89119744, "body": "Try to add a <code>coder.cinclude</code> call to your MATLAB code to include the header declaring <code>bimi</code>. You should see a compile warning about not having a declaration. Also your <code>bimi</code> returns a pointer rather than the value pointed to. Should it return <code>*output</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 7885206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7563a5a98310d5eba7819c5aa7206055?s=128&d=identicon&r=PG&f=1", "display_name": "Leonel Hern&#225;ndez", "link": "https://stackoverflow.com/users/7885206/leonel-hern%c3%a1ndez"}, "is_accepted": true, "score": 0, "last_activity_date": 1530277300, "creation_date": 1530277300, "answer_id": 51102405, "question_id": 51050216, "link": "https://stackoverflow.com/questions/51050216/matlab-emebedded-c-function-issue/51102405#51102405", "title": "MATLAB Emebedded C function issue", "body": "<p>The best way to achieve this is by being very careful with the file names and functions name (That was the issue, simple, basic but takes time to spot). Take a look to the last test I performed which works perfectly fine:</p>\n\n<p>The files are:</p>\n\n<pre><code>//bimi.c\n#include \"bimi.h\"\n\nextern void bimi(int* poly, int* polysz, int* output){\n    int i;\n    int a=*(polysz);\n    for(i=0;i&lt;a;i++){\n        output[i]=2*poly[i];\n    }\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>//bimi.h\nextern void bimi(int* poly, int* polysz, int* output);\n</code></pre>\n\n<p>.</p>\n\n<pre><code>//bimifunc.m\nfunction y = bimifunc(poly2, polysz2)  %#codegen\n         %coder.updateBuildInfo('addSourceFiles','bm.c');\n         y = coder.nullcopy(zeros(1,5,'int32'));%coder.nullcopy(1);\n         coder.updateBuildInfo('addSourceFiles','bimi.c');\n         fprintf('Running Custom C Code...\\n\\n');\n         coder.ceval('bimi',coder.ref(poly2),coder.ref(polysz2), coder.ref(y));%this bimi should match with the function name!\nend\n</code></pre>\n\n<p>.</p>\n\n<pre><code>//build.m\nfunction build(target)\n    % Entry point function:\n    entryPoint = 'bimifunc';%\n\n    %Example input\n    poly=zeros(1,5, 'int32');\n    polysz=int32(length(poly));\n\n    % Configuration object:\n    cfg = coder.config(target);\n\n    % Custom source files:\n    cfg.CustomSource = 'bimi.c';\n    cfg.CustomSourceCode = [ '#include \"bimi.h\"' ];\n\n    % Generate and Launch Report:\n    cfg.GenerateReport = true;\n    cfg.LaunchReport = false;\n\n    % Generate Code:\n    codegen(entryPoint,'-args', {poly, polysz},'-config', cfg)\n\nend\n</code></pre>\n\n<p>.</p>\n\n<pre><code>//test.m\n%testing the c code embeded to matlab\npoly=ones(1,5, 'int32');\npolysz=int32(length(poly));\n\nchichi=bimifunc_mex(poly, polysz);\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 7885206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7563a5a98310d5eba7819c5aa7206055?s=128&d=identicon&r=PG&f=1", "display_name": "Leonel Hern&#225;ndez", "link": "https://stackoverflow.com/users/7885206/leonel-hern%c3%a1ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 51102405, "answer_count": 1, "score": 2, "last_activity_date": 1530277300, "creation_date": 1530041624, "last_edit_date": 1530044624, "question_id": 51050216, "link": "https://stackoverflow.com/questions/51050216/matlab-emebedded-c-function-issue", "title": "MATLAB Emebedded C function issue", "body": "<p>Hi I am trying to use C files in MATLAB through MEX-files but so far no luck. I followed the tutorial shown in this link: <a href=\"https://uk.mathworks.com/videos/integrating-matlab-into-your-cc-product-development-workflow-106742.html\" rel=\"nofollow noreferrer\">https://uk.mathworks.com/videos/integrating-matlab-into-your-cc-product-development-workflow-106742.html</a>\nI downloaded the files and works perfectly fine. Now I am trying to code a function of my own and it produces the MEX-file correctly but when I try to test the function MATLAB shuts down. The files looks as follows: <a href=\"https://i.stack.imgur.com/rgXCT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rgXCT.png\" alt=\"enter image description here\"></a>\nIn addition I have checked the following possible causes: </p>\n\n<ol>\n<li>Verified that the function in c is the correct type in this case <strong>int</strong>.</li>\n<li>Use a pointer in the c code instead of just a variable.</li>\n<li>Include return in the c function.</li>\n<li>Initialise the reference value of the function's output i.e. y=int32(15); </li>\n<li>Include all the headers in the c code i.e. </li>\n<li><p>The example from the link works perfectly, what I am missing?</p>\n\n<p>The c code</p>\n\n<pre><code>     #include &lt;stdio.h&gt;\n     int bimi(int* output);\n     int bimi(int* output){\n        int a = 0;\n        output=25;\n        return output;\n     }\n</code></pre></li>\n</ol>\n\n<p>The function in MATLAB</p>\n\n<pre><code>    function y = bimi()  %#codegen\n             %coder.updateBuildInfo('addSourceFiles','bm.c');\n             y = int32(15);%coder.nullcopy(1);\n             coder.updateBuildInfo('addSourceFiles','bimi.c');\n             fprintf('Running Custom C Code...\\n\\n');\n             coder.ceval('bimi',coder.ref(y));%this bimi should match with the function name!\n    end\n</code></pre>\n\n<p>script that is used to build MEX-file</p>\n\n<pre><code>    function build(target)\n    %   BUILD is a build function for the Gaussian filter\n    %\n    %   SYNTAX:     build mex\n    %               build lib\n    %           \n           %   Copyright 2014 The MathWorks, Inc.\n\n        % Entry point function:\n        entryPoint = 'bimi';%\n\n        % Configuration object:\n        cfg = coder.config(target);\n\n        % Custom source files:\n        cfg.CustomSource = 'bimi.c';\n\n        % Generate and Launch Report:\n        cfg.GenerateReport = true;\n        cfg.LaunchReport = false;\n\n        % Generate Code:\n            codegen(entryPoint,'-config', cfg)\n\n    end\n</code></pre>\n\n<p>test script</p>\n\n<pre><code>    %testing the c code embeded to matlab\n    chichi=bimi_mex();\n</code></pre>\n"}, {"tags": ["c", "openmp", "sparse-matrix", "matrix-multiplication"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8118265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e66c4e5e062cfab147e781433d1a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/8118265/rahul-mayuranath"}, "edited": false, "score": 0, "creation_date": 1530049153, "post_id": 51050740, "comment_id": 89094474, "body": "Thanks a lot! The change to the protected data update makes a lot of sense. So the problem I am facing is that this entire function is inside a while loop that is in a #omp pragma single due to checking an update condition in the while loop. Hence, I realized that I cannot use parallel for inside the function since only one thread is executing this function and went using the task-based approach. Since reductions don&#39;t seem to work with tasks, is there any way to do that without reinventing the wheel? Thanks!"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 1, "user_id": 8118265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e66c4e5e062cfab147e781433d1a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/8118265/rahul-mayuranath"}, "edited": false, "score": 0, "creation_date": 1530083670, "post_id": 51050740, "comment_id": 89103739, "body": "Just compute the update condition redundantly by all threads - or if that is not possible compute the condition in a <code>single</code>, but do the if-branch outside so that all threads reach the <code>#pragma omp for</code> loop."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 1, "last_activity_date": 1530044072, "creation_date": 1530044072, "answer_id": 51050740, "question_id": 51050186, "link": "https://stackoverflow.com/questions/51050186/openmp-parallel-vector-matrix-product/51050740#51050740", "title": "openmp - Parallel Vector Matrix Product", "body": "<p>You are right that you have basically two options: Protect the data update or use thread-specific copies. However, you can do much better for each option:</p>\n\n<p>When going with protected updates, you should protect only what and when absolutely necessary. You can use an initial atomic check to prevent critical regions most of the time similar to a double checked lock pattern.</p>\n\n<pre><code>double *matrixVectorHadamard(CSR *A, double *T, double *tB, double *tReq) {\n    initialize_T(tReq);\n    #pragma omp parallel for schedule(static, BLOCK_SIZE)\n    for(int i=0;i&lt;N;i++) {\n        int num_edges = A-&gt;row_ptr[i+1] - A-&gt;row_ptr[i];\n        if (num_edges) {\n            if(T[i] != INFINITY &amp;&amp; tB[i] != INFINITY) {\n                for(int j=0;j&lt;num_edges;j++) {\n                    // !WARNING! You MUST declare index within the parallel region\n                    // or explicitly declare it private to avoid data races!\n                    int index = A-&gt;col_ind[A-&gt;row_ptr[i] + j];\n                    double tmp = T[i] + A-&gt;val[A-&gt;row_ptr[i]+j];\n                    double old;\n                    #pragma omp atomic\n                    old = tReq[index];\n                    if (tmp &lt; old) {\n                        #pragma omp critical\n                        {\n                            tmp = min(tReq[index], tmp);\n                            // Another atomic ensures that the earlier read\n                            // outside of critical works correctly\n                            #pragma omp atomic\n                            tReq[index] = tmp;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return tReq;\n}\n</code></pre>\n\n<p>Note: Unfortunately no OpenMP/C does not support a direct atomic minimum.</p>\n\n<p>The alternative is a reduction, which is even supported by the standard itself. So there is no need to reinvent the work-sharing etc. You can simply do the following:</p>\n\n<pre><code>double *matrixVectorHadamard(CSR *A, double *T, double *tB, double *tReq) {\n    initialize_T(tReq);\n    #pragma omp parallel for schedule(static, BLOCK_SIZE) reduction(min:tReq)\n    for(int i=0;i&lt;N;i++) {\n        int num_edges = A-&gt;row_ptr[i+1] - A-&gt;row_ptr[i];\n        if (num_edges) {\n            if(T[i] != INFINITY &amp;&amp; tB[i] != INFINITY) {\n                for(int j=0;j&lt;num_edges;j++) {\n                    // !WARNING! You MUST declare index within the parallel region\n                    // or explicitly declare it private to avoid data races!\n                    int index = A-&gt;col_ind[A-&gt;row_ptr[i] + j];\n                    tReq[index] = min(tReq[index], T[i]+A-&gt;val[A-&gt;row_ptr[i]+j]);\n                }\n            }\n        }\n    }\n    return tReq;\n}\n</code></pre>\n\n<p>OpenMP will magically created thread-local copies of <code>tReq</code> and merge (reduce) them at the end.</p>\n\n<p>Which version is better for you depends on the size of the target array and the rate of writes. If you write often, the reduction will be beneficial because it is not slowed down by <code>critical</code> / <code>atomic</code> / bad caching. If you have a huge target array or not so many update-iterations, the first solution becomes more interesting because the relative overhead of creating and reducing the array.</p>\n"}], "owner": {"reputation": 1, "user_id": 8118265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e66c4e5e062cfab147e781433d1a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Mayuranath", "link": "https://stackoverflow.com/users/8118265/rahul-mayuranath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530044072, "creation_date": 1530041499, "question_id": 51050186, "link": "https://stackoverflow.com/questions/51050186/openmp-parallel-vector-matrix-product", "title": "openmp - Parallel Vector Matrix Product", "body": "<p>I am computing a vector matrix(The matrix is sparse and stored in CSR) product(Not exactly a product, a slight variation to compute shortest distance) using the outer product method. I am new to parallel programming and essentially trying to understand the difference between using a parallel for section with a critical section for the update VS using tasks and doing reduction. Which is the better approach and why?</p>\n\n<p>Note: This function call is enclosed with a omp parallel and an omp single. </p>\n\n<p>Using parallel for approach, I am doing this: </p>\n\n<pre><code>double *matrixVectorHadamard(CSR *A, double *T, double *tB, double *tReq) {\n    initialize_T(tReq);\n    int index;\n    #pragma omp parallel for schedule(static, BLOCK_SIZE)\n    for(int i=0;i&lt;N;i++) {\n        int num_edges = A-&gt;row_ptr[i+1] - A-&gt;row_ptr[i];\n        index = 0;\n        if(num_edges) {\n            if(T[i] != INFINITY &amp;&amp; tB[i] != INFINITY) {\n                for(int j=0;j&lt;num_edges;j++) {\n                    index = A-&gt;col_ind[A-&gt;row_ptr[i] + j];\n                    #pragma omp critical \n                    tReq[index] = min(tReq[index], T[i]+A-&gt;val[A-&gt;row_ptr[i]+j]);      \n                }\n            }\n        }\n    }\n    return tReq;\n}\n</code></pre>\n\n<p>Using the task based approach with reduction, this is essentially my idea: </p>\n\n<pre><code>int size = N/BLOCK_SIZE + 1;\ndouble C[size][N];\n\ndouble *matrixVectorHadamard(CSR *A, double *T, double *tB, double *tReq, int size, double C[][N]) {\n\n    int index;\n\n    for(int i=0;i&lt;size;i++) {\n        for(int j=0;j&lt;N;j++) {\n            C[i][j] = INFINITY;\n            tReq[j] = INFINITY;\n        }\n    }\n\n    int k;\n\n    for(k=0;k&lt;size-1; k++) {\n        #pragma omp task firstprivate(k) depend(inout: C[k]) \n        {\n            int index;\n            int delim;   \n            delim = (k==size-1) ? N : BLOCK_SIZE;\n            printf(\"kk is %d\\n\", k*BLOCK_SIZE);\n            // printf(\"k is %d Delim is %d for thread %d\\n\", k, delim, omp_get_thread_num());\n            for(int i=0;i&lt;delim; i++) {\n                int num_edges = A-&gt;row_ptr[k*BLOCK_SIZE + i+1] - A-&gt;row_ptr[k*BLOCK_SIZE + i];\n                index = 0;\n                if(num_edges) {\n                    if(T[k*BLOCK_SIZE + i] != INFINITY &amp;&amp; tB[k*BLOCK_SIZE + i] != INFINITY) {           \n                        for(int j=0;j&lt;num_edges;j++) {\n                            index = A-&gt;col_ind[A-&gt;row_ptr[k*BLOCK_SIZE + i] + j];\n                            {\n                            C[k][index] = min(C[k][index], T[k*BLOCK_SIZE + i]+A-&gt;val[A-&gt;row_ptr[k*BLOCK_SIZE + i]+j]);                 \n                            }\n                        }\n                    }       \n                }   \n            }\n        }\n    }    \n\n    #pragma omp taskwait\n\n    for(int i=0; i&lt;N; i++) {\n        {\n            double minimum = INFINITY;\n            for(int j=0;j&lt;size;j++) {\n                if(C[j][i] &lt; minimum) {\n                    minimum = C[j][i];\n                }\n            }\n            tReq[i] = minimum;\n        }\n    }\n\n    return tReq;\n}\n</code></pre>\n\n<p>Essentially, is there any downsides to using parallel for compared to the task based approach?</p>\n"}, {"tags": ["c", "scanf", "eof"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1530037643, "post_id": 51049325, "comment_id": 89089753, "body": "You realize <code>c</code> doesn&#39;t have a defined value, right? And not everyone uses <code>scanf</code>. It often isn&#39;t the best solution for reading input from the user."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 3, "creation_date": 1530037662, "post_id": 51049325, "comment_id": 89089763, "body": "In a linux terminal, <code>CTRL-d</code>, I believe, should send in an end of file."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 1, "creation_date": 1530037898, "post_id": 51049325, "comment_id": 89089847, "body": "An on certain Windows environments, a &lt;kbd&gt;CTRL-z&lt;/kbd&gt;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1530037928, "post_id": 51049325, "comment_id": 89089863, "body": "Why are you reading with <code>getchar</code> twice? You never set <code>c</code>. <code>while((c = getchar()) != EOF) {...}</code> or something like that, as you don&#39;t take any notice of what is read."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9896284"}, "edited": false, "score": 0, "creation_date": 1530038167, "post_id": 51049325, "comment_id": 89089950, "body": "help me by explaining stuff to me, instead of telling me i&#39;m wrong and i need to go check my code.."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1530038368, "post_id": 51049325, "comment_id": 89090031, "body": "Thus far, nobody has said &quot;you&#39;re wrong, go check your code&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9896284"}, "edited": false, "score": 0, "creation_date": 1530040398, "post_id": 51049325, "comment_id": 89090911, "body": "it really sounds like it would work, but still, my original question remains.. when does the EOF int get stored into the variable ch.. it doesn&#39;t. the text string is a bunch of consecutive letters and new line characters, the loop goes on and on, getchar() never stops &quot;getting chars&quot; and the EOF is never met.."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1530040934, "post_id": 51049325, "comment_id": 89091137, "body": "It will <i>never</i> get stored in a variable, because you never store it in one. If you want to save the result of getchar() (or any function) you need to assign it with c = getchar() or equivalent."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9896284"}, "edited": false, "score": 0, "creation_date": 1530040366, "post_id": 51049536, "comment_id": 89090892, "body": "it really sounds like it would work, but still, my original question remains..  when does the EOF int get stored into the variable ch..  it doesn&#39;t. the text string is a bunch of consecutive letters and new line characters, the loop goes on and on, getchar() never stops &quot;getting chars&quot; and the EOF is never met.."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 4, "last_activity_date": 1530042191, "last_edit_date": 1530042191, "creation_date": 1530038516, "answer_id": 51049536, "question_id": 51049325, "link": "https://stackoverflow.com/questions/51049325/getchar-stuck-in-a-loop-never-reaching-the-eof/51049536#51049536", "title": "getchar() stuck in a loop never reaching the EOF", "body": "<p>You need to put the result of <code>getchar()</code> into a variable:</p>\n\n<pre><code>int ch;\nwhile ((ch = getchar()) != EOF) \n</code></pre>\n\n<p>You shouldn't call <code>getchar()</code> a second time to check if it's a space, since that will read a second character so you'll be testing every other character, just compare the variable:</p>\n\n<pre><code>    if (ch == ' ')\n</code></pre>\n\n<p>And if you want to see the total number of spaces, put the <code>printf()</code> at the end of the loop, not inside it.</p>\n\n<p>So the whole thing should look like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int counter=0;\n    int ch;\n    while((ch = getchar()) != EOF) {\n        if (ch == ' ') {\n            counter++;\n        }\n    }\n    printf(\"%i\\n\", counter);\n}\n</code></pre>\n\n<p>To send <code>EOF</code> from the terminal, type <kbd>Control-d</kbd> on Unix, <kbd>Control-z</kbd> on Windows.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9896284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1530042769, "creation_date": 1530037474, "last_edit_date": 1530042769, "question_id": 51049325, "link": "https://stackoverflow.com/questions/51049325/getchar-stuck-in-a-loop-never-reaching-the-eof", "title": "getchar() stuck in a loop never reaching the EOF", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int c;\n    while(getchar() != EOF) {\n        if (getchar() == ' ') {\n            c++;\n        }\n        printf(\"%i\", c);\n    }\n}\n</code></pre>\n\n<p>I realized that typing in a sentence like the one you're reading right</p>\n\n<p>I\\nrealized\\nthat\\ntyping\\nin\\n\\a\\n ... </p>\n\n<p>i believe that's how it's being read, getchar() does not reach the EOF to make the condition in the while parentheses false..</p>\n\n<p>my goal here is to make a program that takes in input from me..\nreads it\nif there are any spaces \nit counts on a counter\nwhen EOF is reached\nthe condition to keep reading it becomes false\nthe counter value gets printed out on the screen\nto show me how many spaces i had in my entire input..</p>\n\n<p>is it impossible? is that why people just use scanf() ? </p>\n\n<p>this is the output i get when trying something</p>\n\n<pre><code>user@user:/c# ./a.out\nhello stackoverflow this does not do what i want it to\n001111111222223344445666677\n</code></pre>\n"}, {"tags": ["c", "pointers", "assembly", "keil", "8051"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1530035783, "post_id": 51048926, "comment_id": 89088937, "body": "Have you enabled optimization?"}, {"owner": {"reputation": 41, "user_id": 9501490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cc92ce8e320c8b7962e6a1e8cd378a?s=128&d=identicon&r=PG&f=1", "display_name": "Gamcheong", "link": "https://stackoverflow.com/users/9501490/gamcheong"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1530036265, "post_id": 51048926, "comment_id": 89089194, "body": "The optimization was set at level 8 by default."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 5, "creation_date": 1530038824, "post_id": 51048926, "comment_id": 89090234, "body": "Please show both a complete C function and a complete assembly dump of that function.  &quot;This assembly corresponds to this C source&quot; annotations in assembly dumps are frequently wrong."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9501490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cc92ce8e320c8b7962e6a1e8cd378a?s=128&d=identicon&r=PG&f=1", "display_name": "Gamcheong", "link": "https://stackoverflow.com/users/9501490/gamcheong"}, "edited": false, "score": 0, "creation_date": 1530065095, "post_id": 51050631, "comment_id": 89098083, "body": "I&#39;ve got it. And I tried the code like <code>p0 = p++;</code> and found Keil used a function in the library <code>?C?CLDPTR</code> to load R1/R2/R3 data to A and finally passed A to p0.&lt;br/&gt;Thank you."}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "reply_to_user": {"reputation": 41, "user_id": 9501490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cc92ce8e320c8b7962e6a1e8cd378a?s=128&d=identicon&r=PG&f=1", "display_name": "Gamcheong", "link": "https://stackoverflow.com/users/9501490/gamcheong"}, "edited": false, "score": 0, "creation_date": 1530205425, "post_id": 51050631, "comment_id": 89164795, "body": "@Gamcheong That&#39;s an example where the &quot;note the previous value&quot; is important. It&#39;s equivalent to <code>p0 = p1, p1 += 1;</code> and there&#39;s no reason for any compiler to generate better code with the longer explicit version.  If cycles or code bytes matter, avoid <code>p1++</code> for just incrementing without using the previous value of <code>p1</code>."}], "tags": [], "owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": true, "score": 9, "last_activity_date": 1530043537, "creation_date": 1530043537, "answer_id": 51050631, "question_id": 51048926, "link": "https://stackoverflow.com/questions/51048926/why-compiler-assembly-c-program-into-this/51050631#51050631", "title": "Why compiler assembly C program into this?", "body": "<p>Welcome to 1980s \"state of the art\" code generation for 8-bit target processors.  What the code is doing is \"noting the value\" of p before incrementing it.  That's necessary when the postincrement operator is used in a surrounding expression; and not optimized away by subsequent passes of the compiler.</p>\n\n<p>Try <code>p += 1;</code>, or even <code>++p;</code> instead.  Odds are that one or both of those will generate better code because there is no \"note the value before\" semantics to get in the code generator's way.</p>\n\n<p>[This is how I got into the minority, by the way, using <code>++i</code> in <code>for ()</code> loops rather than the more common <code>i++</code>.]</p>\n"}], "owner": {"reputation": 41, "user_id": 9501490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13cc92ce8e320c8b7962e6a1e8cd378a?s=128&d=identicon&r=PG&f=1", "display_name": "Gamcheong", "link": "https://stackoverflow.com/users/9501490/gamcheong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 51050631, "answer_count": 1, "score": 2, "last_activity_date": 1530048633, "creation_date": 1530035726, "last_edit_date": 1530048633, "question_id": 51048926, "link": "https://stackoverflow.com/questions/51048926/why-compiler-assembly-c-program-into-this", "title": "Why compiler assembly C program into this?", "body": "<p>I don't understand why the C51 compiler (in Keil) convert C source to this assembly language code: (As p is a pointer to unsigned char)</p>\n\n<pre><code>;   p++;\n            ; SOURCE LINE # 216\n    MOV     R3,pDisplay?253\n    INC     pDisplay?253+02H\n    MOV     A,pDisplay?253+02H\n    MOV     R2,pDisplay?253+01H\n    JNZ     ?C0090\n    INC     pDisplay?253+01H\n</code></pre>\n\n<p>As <code>R3</code> and <code>R2</code> wasn't used in the next lines of the program. <br/>\nWhy do compiler make these lines<br/><code>MOV  R3,pDisplay?253</code>,<br/> <code>MOV  R2,pDisplay?253+01H</code>? </p>\n"}, {"tags": ["c", "arrays", "pointers", "language-lawyer", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530035420, "post_id": 51048787, "comment_id": 89088747, "body": "The types don&#39;t seem to match"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530035573, "post_id": 51048787, "comment_id": 89088820, "body": "@EugeneSh. The types do not need to match, just align. (C11 &#167;6.3.2.3 7)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530035638, "post_id": 51048787, "comment_id": 89088852, "body": "Anyway, it is dereferencing an invalid pointer, isn&#39;t it?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1530035708, "post_id": 51048787, "comment_id": 89088899, "body": "@EugeneSh. It moves back 1 in the print statement bringing it back to the end of the array, which should be valid."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1530035769, "post_id": 51048787, "comment_id": 89088926, "body": "<code>( &amp;a ) + 1</code> - is pointing past the array. Then dereferenced and assigned to <code>ptr</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1530035850, "post_id": 51048787, "comment_id": 89088975, "body": "@EugeneSh. <code>&amp;a</code> has type <code>int (*a)[5]</code>, so <code>*((&amp;a) + 1)</code> has type <code>int *</code>, and points to the address one past the end of the array."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530035947, "post_id": 51048787, "comment_id": 89089029, "body": "@EugeneSh. Ahhh, I thought <code>int *ptr = *( ( &amp;a ) + 1 );</code> was <code>int *ptr = (int*)(&amp;a+1);</code> as <a href=\"https://stackoverflow.com/q/51043235/2410359\">here</a>.  Yes it is a problem or at least a concern, hmmmm."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1530035983, "post_id": 51048787, "comment_id": 89089044, "body": "@user3386109 <code>(&amp;a) + 1</code> has a type <code>(*a)[5]</code> and is pointing past the array. <code>*((&amp;a) + 1)</code> is dereferencing it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530036182, "post_id": 51048787, "comment_id": 89089161, "body": "@EugeneSh. It&#39;s dereferencing a pointer-to-a-pointer-to-int, yielding a pointer-to-int."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530036254, "post_id": 51048787, "comment_id": 89089188, "body": "@EugeneSh. So pointing past the array is <code>UB</code> even if you do not use it? in <code>printf</code> call we have <code>*(ptr-1)</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530036319, "post_id": 51048787, "comment_id": 89089214, "body": "But you do use it. At least that&#39;s my understanding. You assign the value pointed by it to <code>ptr</code>."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530036354, "post_id": 51048787, "comment_id": 89089238, "body": "@EugeneSh. So you are saying that the program is <code>UB</code> ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1530036420, "post_id": 51048787, "comment_id": 89089257, "body": "@Michi Making a pointer  &quot;1 past&quot; the address of an object is not a problem.   Pointer math is well defined. How that pointer might get used is an issue, especially if it is de-referenced, as here."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530036511, "post_id": 51048787, "comment_id": 89089293, "body": "@chux If pointer math is OK, than this Program is well-defined. in <code>printf()</code> I used <code>*(ptr-1)</code> which should be fine, I think."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1530036529, "post_id": 51048787, "comment_id": 89089300, "body": "What exactly are we getting when we dereference <code>((&amp;a) + 1)</code>, though?  Because it doesn&#39;t seem to be <code>a[5]</code> (which does not exist), but rather a pointer to <code>a[5]</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1530036669, "post_id": 51048787, "comment_id": 89089353, "body": "@EugeneSh. I guess I see your point. The question is whether &quot;yielding a pointer-to-int&quot;, is separate and distinct from &quot;dereferencing a pointer-to-a-pointer-to-int&quot;. I contend that all the code does is compute an address, and isn&#39;t dereferencing anything."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530036677, "post_id": 51048787, "comment_id": 89089356, "body": "@Michi <code>*(ptr-1)</code> is not the tricky bit. <code>*( ( &amp;a ) + 1 )</code> is the crux of the issue."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530036736, "post_id": 51048787, "comment_id": 89089380, "body": "@chux Well I need to know if this line <code>int *ptr = *( ( &amp;a ) + 1 );</code> is <code>UB</code> or not. More over the whole Program."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1530036940, "post_id": 51048787, "comment_id": 89089459, "body": "Can we agree that <code>int *ptr = *(&amp;a);</code> returns a pointer to the first element of <code>a</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1530036978, "post_id": 51048787, "comment_id": 89089472, "body": "IMO <code>*( ( &amp;a ) + 1 )</code> is UB because although &quot;1 past&quot; <code>&amp;a[6]</code> is well defined.  <code>( &amp;a ) + 1</code> is a pointer to a whole <a href=\"https://cdecl.org/?q=int+a%5B5%5D\" rel=\"nofollow noreferrer\">array 5</a> passed <code>a[]</code>.  Hmmmm - I just do not see de-referencing any pointer in that &quot;1 past&quot; zone as legit.  The general idea is to think of <code>a[]</code> existing near the end of memory - how much more pointer math is allowed?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1530037329, "post_id": 51048787, "comment_id": 89089626, "body": "@chux But that address is still one past the end of an array. The array just happens to only have one element. For example, given an array <code>int b[1][5]</code>, the code is equivalent to <code>int *ptr = b[1]</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1530037937, "post_id": 51048787, "comment_id": 89089866, "body": "@user3386109 Fair point."}], "answers": [{"comments": [{"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1530038699, "post_id": 51049521, "comment_id": 89090185, "body": "If <code>a</code> was <code>int a</code>, <code>ptr</code> would have to be <code>int</code>, which would make it clearly UB; so I don&#39;t think the second part of the answer is needed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1530038950, "post_id": 51049521, "comment_id": 89090287, "body": "@Acorn Assigning a pointer to an <code>int</code> has its own concerns 6.3.2.3 5.  Yet the UB here is present on <code>*( ( &amp;a ) + 1 )</code> alone."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1530038976, "post_id": 51049521, "comment_id": 89090296, "body": "I&#39;m not sure if this directly applies since it is not really a pointer to one past the end of the array.  Dereferencing it is what makes it a pointer to one past the end of the array."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1530039065, "post_id": 51049521, "comment_id": 89090331, "body": "@ChristianGibbons <code>&amp;a</code> is a pointer.  <code>( &amp;a ) + 1</code> is &quot;one past&quot; and is a pointer.  &#167;6.5.6 8 clearly addresses using <code>*</code> on that as with <code>*( ( &amp;a ) + 1 )</code>."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1530038446, "creation_date": 1530038446, "answer_id": 51049521, "question_id": 51048787, "link": "https://stackoverflow.com/questions/51048787/is-int-ptr-a-1-where-a-is-int5-well-defined-by-the-standar/51049521#51049521", "title": "Is &quot;int *ptr = *( ( &amp;a ) + 1 );&quot; where &quot;a&quot; is int[5] well-defined by the Standard?", "body": "<p><code>*( ( &amp;a ) + 1 )</code> is UB due to</p>\n\n<blockquote>\n  <p>... If the result points one past the last element of the array object, it\n  shall not be used as the operand of a unary <code>*</code> operator that is evaluated. C11 \u00a76.5.6 8 </p>\n</blockquote>\n\n<p><code>( &amp;a ) + 1</code> points to \"one past\".  Using <code>*</code> on that goes against \"shall not\".</p>\n\n<pre><code>int a[5] = {1,2,3,4,5};\nint *ptr = *( ( &amp;a ) + 1 );\n</code></pre>\n\n<hr>\n\n<p>Even if <code>a</code> was <code>int a</code> this applies due to </p>\n\n<blockquote>\n  <p>For the purposes of these operators, a pointer to an object that is not an element of an array behaves the same as a pointer to the first element of an array of length one with the type of the object as its element type. \u00a76.5.6 7</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1530040365, "post_id": 51049581, "comment_id": 89090891, "body": "The second quote ends with <i>&quot;that is evaluated&quot;</i>. To understand what that means, see section 6.5.3.2/3."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1530040635, "post_id": 51049581, "comment_id": 89091010, "body": "@user3386109 The <code>*</code> operator is evaluated in this case since it is not directly the operand of a <code>&amp;</code> operator."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530043054, "post_id": 51049581, "comment_id": 89092014, "body": "Concerning <code>int *ptr = (int*)(&amp;a+1)</code>  Disagree about &quot;only case where such a conversion is legal is when converting an object pointer to a pointer to a character type&quot;.  Instead &quot;A pointer to an object type may be converted to a pointer to a different object type. If the resulting pointer is not correctly aligned for the referenced type, the behavior is undefined.&quot;  C11 &#167;6.3.2.3 7. As alignment is not an issue, the conversion is well defined."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530043317, "post_id": 51049581, "comment_id": 89092121, "body": "@chux While the conversion itself is fine, it&#39;s using the converted value that&#39;s an issue, i.e. dereferencing the converted pointer.  So while the assignment to <code>ptr</code> is OK, subsequently reading <code>*(ptr-1)</code> is not.  Edited to clarify."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530044015, "post_id": 51049581, "comment_id": 89092427, "body": "@dbush As <code>int *ptr = (int*)(&amp;a+1);</code> is an acceptable conversion and <code>ptr-1</code> is also good, code does not attempt to dereference with <code>*(ptr-0)</code> but with <code>*(ptr-1)</code>.  I respectfully disagree and see this as well defined.  <code>*ptr</code> is UB.  Perhaps AA concerns are of concern, yet there is no changing of underlying data here."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1530048201, "post_id": 51049581, "comment_id": 89094141, "body": "Disagree with your assessment of <code>int *ptr = (int*)(&amp;a+1);</code>; your interpretation would make <code>int * x = malloc(sizeof(int)); x[0] = 0;</code> UB too. <a href=\"https://stackoverflow.com/a/29245267/1505939\">See here</a> for expanded discussion"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1530059017, "post_id": 51049581, "comment_id": 89096947, "body": "The <code>malloc</code> case is OK because the returned memory does not have an effective type until it is assigned to.  Actually, now that I think about it I agree with you and @chux.  The conversion is valid and <code>ptr</code> points to one element past the end of <code>a</code>, the subsequent pointer arithmetic is valid because the result points inside of <code>a</code>, and the dereference is valid because the effective type of the accessed object (i.e. <code>int</code>) matches the dereferenced pointer type."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 6, "last_activity_date": 1530059476, "last_edit_date": 1530059476, "creation_date": 1530038701, "answer_id": 51049581, "question_id": 51048787, "link": "https://stackoverflow.com/questions/51048787/is-int-ptr-a-1-where-a-is-int5-well-defined-by-the-standar/51049581#51049581", "title": "Is &quot;int *ptr = *( ( &amp;a ) + 1 );&quot; where &quot;a&quot; is int[5] well-defined by the Standard?", "body": "<p>This expression invokes undefined behavior as a result of the dereference operator <code>*</code>:</p>\n\n<pre><code>int *ptr = *( ( &amp;a ) + 1 );\n</code></pre>\n\n<p>First, let's start with <code>( &amp;a ) + 1</code>.  This part is valid.  <code>&amp;a</code> has type <code>int (*)[5]</code>, i.e. a pointer to an array of size 5.  Performing pointer arithmetic by adding 1 is valid, even though <code>a</code> is not an element of an array.</p>\n\n<p>In section 6.5.6 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> detailing Additive Operators, paragraph 7 states:</p>\n\n<blockquote>\n  <p>For the purposes of these operators, a pointer to an object that is\n  not an element of an array behaves the same as a pointer to the first\n  element of an array of length one with the type of the object as its\n  element type.</p>\n</blockquote>\n\n<p>It's also allowed to create a pointer that points to one element past the end of an array.  So <code>&amp;a + 1</code> is allowed.</p>\n\n<p>The problem is when we dereference this expression.  Paragraph 8 states:</p>\n\n<blockquote>\n  <p>When an expression that has integer type is added to or subtracted\n  from a pointer, the result has the type of the pointer operand. If the\n  pointer operand points to an element of an array object, and the array\n  is large enough, the result points to an element offset from the\n  original element such that the difference of the subscripts of the\n  resulting and original array elements equals the integer expression.\n  In other words, if the expression P points to the i-th element of an\n  array object, the expressions <strong>(P)+N</strong> (equivalently, <strong>N+(P)</strong>) and <strong>(P)-N</strong>\n  (where <strong>N</strong> has the value n) point to, respectively, the i+n-th and\n  i\u2212n-th elements of the array object, provided they exist. Moreover, if\n  the expression <strong>P</strong> points to the last element of an array object, the\n  expression <strong>(P)+1</strong> points one past the last element of the array object,\n  and if the expression <strong>q</strong> points one past the last element of an array\n  object, the expression <strong>(Q)-1</strong> points to the last element of the array\n  object. If both the pointer operand and the result point to elements\n  of the same array object, or one past the last element of the array\n  object, the evaluation shall not produce an overflow; otherwise, the\n  behavior is undefined. <strong>If the result points one past the last element\n  of the array object, it shall not be used as the operand of a unary <code>*</code>\n  operator that is evaluated.</strong></p>\n</blockquote>\n\n<p>Since dereferencing a pointer to one past the end of an array is not allowed, the beahvior is undefined.</p>\n\n<p>Going back to the expression in the referenced post:</p>\n\n<pre><code>int *ptr = (int*)(&amp;a+1);\nprintf(\"%d %d\", *(a+1), *(ptr-1));\n</code></pre>\n\n<p>This is also undefined behavior but for a different reason.  In this case, a <code>int (*)[5]</code> is converted to <code>int *</code> and the converted value is subsequently used.  The only case where using such a converted value is legal is when converting an object pointer to a pointer to a character type, e.g. <code>char *</code> or <code>unsigned char *</code> and subsequently dereferenced to read the bytes of the object's representation.</p>\n\n<p>EDIT:</p>\n\n<p>It seems the two lines above are actually well defined.  At the time the pointer dereference <code>*(ptr-1)</code> occurs, the object being accessed has effective type <code>int</code>, which matches the dereferenced type of <code>ptr-1</code>.  Casting the pointer value <code>&amp;a+1</code> from <code>int (*)[5]</code> to <code>int *</code> is valid, and performing pointer arithmetic on the casted pointer value is also valid because it points either inside of <code>a</code> or one element past it.</p>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 1, "last_activity_date": 1530077416, "creation_date": 1530077416, "answer_id": 51055110, "question_id": 51048787, "link": "https://stackoverflow.com/questions/51048787/is-int-ptr-a-1-where-a-is-int5-well-defined-by-the-standar/51055110#51055110", "title": "Is &quot;int *ptr = *( ( &amp;a ) + 1 );&quot; where &quot;a&quot; is int[5] well-defined by the Standard?", "body": "<p><code>int *ptr = *( ( &amp;a ) + 1 );</code> is invoked undefined behaviour.</p>\n\n<p><strong>C11 - \u00a76.5.6 \"Additive operators\" (P8) :</strong></p>\n\n<blockquote>\n  <p>When an expression that has integer type is added to or subtracted from a pointer, the\n  result has the type of the pointer operand. <strong>If the pointer operand points to an element of\n  an array object, and the array is large enough, the result points to an element offset from\n  the original element such that the difference of the subscripts of the resulting and original\n  array elements equals the integer expression.</strong> In other words, if the expression <code>P</code> points to\n  the <code>i</code>-th element of an array object, the expressions <code>(P)+N</code> (equivalently, <code>N+(P)</code>) and\n  <code>(P)-N</code> (where <code>N</code> has the value <code>n</code>) point to, respectively, the <code>i+n</code>-th and <code>i\u2212n</code>-th elements of\n  the array object, provided they exist. Moreover, if the expression <code>P</code> points to the last\n  element of an array object, the expression <code>(P)+1</code> points one past the last element of the\n  array object, and if the expression <code>Q</code> points one past the last element of an array object,\n  the expression <code>(Q)-1</code> points to the last element of the array object.[...]</p>\n</blockquote>\n"}], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 2, "accepted_answer_id": 51049581, "answer_count": 3, "score": 10, "last_activity_date": 1530077416, "creation_date": 1530035202, "last_edit_date": 1530046735, "question_id": 51048787, "link": "https://stackoverflow.com/questions/51048787/is-int-ptr-a-1-where-a-is-int5-well-defined-by-the-standar", "title": "Is &quot;int *ptr = *( ( &amp;a ) + 1 );&quot; where &quot;a&quot; is int[5] well-defined by the Standard?", "body": "<p>Based on this Question ( <a href=\"https://stackoverflow.com/questions/51043235/strange-output-issue-in-c/51043333#51043333\">strange output issue in c</a>) there was an Answer ( <a href=\"https://stackoverflow.com/questions/51043235/strange-output-issue-in-c/51043333#51043333\">provided by @Lundin</a> ) about this line:</p>\n\n<pre><code>int *ptr = (int*)(&amp;a+1);\n</code></pre>\n\n<p>where he said: </p>\n\n<p><code>the cast (int*) was hiding this bug</code>.</p>\n\n<p>So I came with the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void ){\n    int a[5] = {1,2,3,4,5};\n\n    int *ptr = *( ( &amp;a ) + 1 );\n    printf(\"%d\", *(ptr-1) );\n}\n</code></pre>\n\n<p>I would like to know if this:</p>\n\n<pre><code>int *ptr = *( ( &amp;a ) + 1 );\n</code></pre>\n\n<p>Is well-defined by the Standard?</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>At some point  @chux pointed to <code>\u00a76.3.2.3.7</code> which is:</p>\n\n<blockquote>\n<pre><code>A pointer to an object type may be converted to a pointer to a different object type. If the\nresulting pointer is not correctly aligned68) for the referenced type, the behavior is\nundefined. Otherwise, when converted back again, the result shall compare equal to the\noriginal pointer. When a pointer to an object is converted to a pointer to a character type,\nthe result points to the lowest addressed byte of the object. Successive increments of the\nresult, up to the size of the object, yield pointers to the remaining bytes of the object.\n</code></pre>\n</blockquote>\n\n<p>But I am not sure if I understand it right.</p>\n"}, {"tags": ["c", "security", "linux-kernel", "kernel-module"], "answers": [{"comments": [{"owner": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "edited": false, "score": 0, "creation_date": 1530037514, "post_id": 51048853, "comment_id": 89089706, "body": "Sorry for removing the acceptance, as LSM is requires a patch, and not LKM. Also, I&#39;ll study the paper then accept if applicable, but it seems that the vulnerabilities you mentioned only apply to users who already have root access."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "edited": false, "score": 0, "creation_date": 1530038608, "post_id": 51048853, "comment_id": 89090145, "body": "Problems described in the paper stem from the fact that wrappers around open and similar syscalls duplicate part of the work of the wrapped syscall in a racy manner - the target file can be validated as fine for use and in the time window between finished validation and the call to wrapped open  replaced with a file which would not pass the test. Effectively bypassing the check. This is most definitely not root-specific."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "edited": false, "score": 0, "creation_date": 1530040925, "post_id": 51048853, "comment_id": 89091133, "body": "Verify when? The entire point is that after the <i>wrapper</i> finishes the validation and let&#39;s the real open do the work, the target file can be something completely different. With LSM you get a call with the file already found by open. Then if you let it through, this is the file you which will be returned."}, {"owner": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "edited": false, "score": 0, "creation_date": 1530042438, "post_id": 51048853, "comment_id": 89091758, "body": "This applies to monitoring &#39;open&#39; only, but if disk access is monitored, how could one replace the file for &#39;open&#39;? the arguments have already been passed."}, {"owner": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "edited": false, "score": 0, "creation_date": 1530043300, "post_id": 51048853, "comment_id": 89092111, "body": "Also, i don&#39;t currently have a post stage, but theoretically I can lock the file in pre stage and release the lock in post."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "edited": false, "score": 0, "creation_date": 1530044428, "post_id": 51048853, "comment_id": 89092610, "body": "Have you read the paper? your wrapper performs the lookup. then someone replaces the file (e.g. if the passed path is /foo/bar/baz/, they mv /foo/bar /foo/crap; mv /foo/new /foo/bar. now /foo/bar/baz is not the same file.). why do you insist on using a wrapper?"}, {"owner": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "edited": false, "score": 0, "creation_date": 1530051432, "post_id": 51048853, "comment_id": 89095232, "body": "I haven&#39;t finished studying the paper. Tomorrow I&#39;ll try to implement a post stage to see if I can lock rename(2). LSM requires patching and recompiling the kernel as opposed to LKM which can be loaded via dpkg/apt, that&#39;s why. added +1 for the info but cannot accept as answer right now."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "edited": false, "score": 1, "creation_date": 1530072050, "post_id": 51048853, "comment_id": 89099452, "body": "I don&#39;t recommend it, but... you are already willing to effectively hack the kernel (overwrite system call table entries) to make it do what you want. I don&#39;t see a fundamental difference between this and overwriting pointers to lsm hooks. Both approaches are rather fishy, but the latter happens to not suffer from the races mentioned in the paper."}], "tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": 2, "last_activity_date": 1530035437, "creation_date": 1530035437, "answer_id": 51048853, "question_id": 51048438, "link": "https://stackoverflow.com/questions/51048438/is-there-a-way-to-modify-linux-syscall-table-in-a-proprietary-kernel-module/51048853#51048853", "title": "Is there a way to modify Linux syscall table in a proprietary kernel module?", "body": "<p>You did it wrong. Syscall wrapping is the standard TOCTOU bug class factory. See this paper <a href=\"http://www.watson.org/~robert/2007woot/2007usenixwoot-exploitingconcurrency.pdf\" rel=\"nofollow noreferrer\">http://www.watson.org/~robert/2007woot/2007usenixwoot-exploitingconcurrency.pdf</a></p>\n\n<p>In fact, LSM hooks (used to implement selinux) are precisely what you need to actually get this to work in a secure manner. But then there is no use of overwriting anything in the syscall table.</p>\n"}], "owner": {"reputation": 422, "user_id": 5728223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7wef.jpg?s=128&g=1", "display_name": "a_at_cyber_dot_training", "link": "https://stackoverflow.com/users/5728223/a-at-cyber-dot-training"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530038037, "creation_date": 1530033762, "last_edit_date": 1530038037, "question_id": 51048438, "link": "https://stackoverflow.com/questions/51048438/is-there-a-way-to-modify-linux-syscall-table-in-a-proprietary-kernel-module", "title": "Is there a way to modify Linux syscall table in a proprietary kernel module?", "body": "<p>I wrote an kind of SELinux clone that supervises system call execution such as open and execve.</p>\n\n<p>The result is proven by SELinux as a secure way to monitor all disk access made by users.</p>\n\n<p>The code modifies the syscall table in the following way:</p>\n\n<blockquote>\n  <ol>\n  <li>Change the name->address relationship of a syscall</li>\n  <li>After the change, the syscall name is my own function, which then calls the original syscall.</li>\n  <li>the original syscall address is protected by address space layout randomization which requires scanning 16 exabytes of data, and the\n  address changes with every reboot.</li>\n  </ol>\n</blockquote>\n\n<p>Old trick, but the only way I found to achieve this is via a service routine exported only to GPL modules with the following code:</p>\n\n<pre><code>MODULE_LICENSE(\"GPL\");\n</code></pre>\n\n<p>Is there a way to discover either the syscall table or the syscall address without a GPL kernel module?</p>\n"}, {"tags": ["c", "printf"], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 4884932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-riAXdFFLodI/AAAAAAAAAAI/AAAAAAAAAB0/Fz7t4hnZSsY/photo.jpg?sz=128", "display_name": "petacreepers23", "link": "https://stackoverflow.com/users/4884932/petacreepers23"}, "is_accepted": false, "score": 0, "last_activity_date": 1530038698, "last_edit_date": 1530038698, "creation_date": 1530034373, "answer_id": 51048603, "question_id": 51048390, "link": "https://stackoverflow.com/questions/51048390/about-printf-c-language/51048603#51048603", "title": "About printf (C language)", "body": "<p>Use <code>\\n</code> to go to the next line, in your text</p>\n\n<pre><code>printf(\"1. english\\n2. finish\\n3. japanese\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1688, "user_id": 1056460, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AuP3C.jpg?s=128&g=1", "display_name": "DanielM", "link": "https://stackoverflow.com/users/1056460/danielm"}, "is_accepted": false, "score": 0, "last_activity_date": 1530034993, "creation_date": 1530034993, "answer_id": 51048746, "question_id": 51048390, "link": "https://stackoverflow.com/questions/51048390/about-printf-c-language/51048746#51048746", "title": "About printf (C language)", "body": "<p>Either use <code>\\n</code> or use multiple <code>printf()</code></p>\n\n<p>Option 1 (shorter):</p>\n\n<pre><code>printf(\"1. english\\n2. finish\\n3. japanese\\n\");\n</code></pre>\n\n<p>Option 2 (more readable):</p>\n\n<pre><code>printf(\"1. english\\n\");\nprintf(\"2. finish\\n\");\nprintf(\"3. japanese\\n\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 9995861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9jcYPPI7N4w/AAAAAAAAAAI/AAAAAAAACsc/lVHGxERnQ40/photo.jpg?sz=128", "display_name": "\uc81c\uac00\uc815\uae00\uac00\ub3c4\ubc45\uae30\ubcf4\ub2e8\uc798\ud569\ub2c8\ub2e4", "link": "https://stackoverflow.com/users/9995861/%ec%a0%9c%ea%b0%80%ec%a0%95%ea%b8%80%ea%b0%80%eb%8f%84%eb%b1%85%ea%b8%b0%eb%b3%b4%eb%8b%a8%ec%9e%98%ed%95%a9%eb%8b%88%eb%8b%a4"}, "edited": false, "score": 0, "creation_date": 1530043638, "post_id": 51049729, "comment_id": 89092258, "body": "thank you very much, despite of my english sence is bad, but you comment my question, It help me to active in any forum where use englsih without scruple"}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1530039335, "creation_date": 1530039335, "answer_id": 51049729, "question_id": 51048390, "link": "https://stackoverflow.com/questions/51048390/about-printf-c-language/51049729#51049729", "title": "About printf (C language)", "body": "<p>String constants can be multilined, too:</p>\n\n<pre><code>printf(\"1. english\\n\"\n    \"2. finnish\\n\"\n    \"3. japanese\\n\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 9995861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9jcYPPI7N4w/AAAAAAAAAAI/AAAAAAAACsc/lVHGxERnQ40/photo.jpg?sz=128", "display_name": "\uc81c\uac00\uc815\uae00\uac00\ub3c4\ubc45\uae30\ubcf4\ub2e8\uc798\ud569\ub2c8\ub2e4", "link": "https://stackoverflow.com/users/9995861/%ec%a0%9c%ea%b0%80%ec%a0%95%ea%b8%80%ea%b0%80%eb%8f%84%eb%b1%85%ea%b8%b0%eb%b3%b4%eb%8b%a8%ec%9e%98%ed%95%a9%eb%8b%88%eb%8b%a4"}, "edited": false, "score": 0, "creation_date": 1530042286, "post_id": 51049788, "comment_id": 89091687, "body": "Thank you very much and I appreciate your modified"}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 0, "last_activity_date": 1530039571, "creation_date": 1530039571, "answer_id": 51049788, "question_id": 51048390, "link": "https://stackoverflow.com/questions/51048390/about-printf-c-language/51049788#51049788", "title": "About printf (C language)", "body": "<p>To have newline characters in string, use <code>\\n</code>:</p>\n\n<pre><code>    printf(\"1. englsih\\n2. finish\\n3. japanese\\n\");\n</code></pre>\n\n<p>If you want to split a string literal to several lines for readability, you can use <code>\\</code> as the last character on line (not even spaces after it):</p>\n\n<pre><code>    printf(\"1. englsih\\n\\\n2. finish\\n\\\n3. japanese\\n\");\n</code></pre>\n\n<p>Above has the aesthetic problem, that any indentation at start of line will actually become part of the string. Alternatively, you can just split the string into several <code>\"quoted\"</code> parts, with only whitespace in between, so compiler will combine them into a single string literal:</p>\n\n<pre><code>    printf(\"1. englsih\\n\"\n           \"2. finish\\n\"\n           \"3. japanese\\n\");\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9995861, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9jcYPPI7N4w/AAAAAAAAAAI/AAAAAAAACsc/lVHGxERnQ40/photo.jpg?sz=128", "display_name": "\uc81c\uac00\uc815\uae00\uac00\ub3c4\ubc45\uae30\ubcf4\ub2e8\uc798\ud569\ub2c8\ub2e4", "link": "https://stackoverflow.com/users/9995861/%ec%a0%9c%ea%b0%80%ec%a0%95%ea%b8%80%ea%b0%80%eb%8f%84%eb%b1%85%ea%b8%b0%eb%b3%b4%eb%8b%a8%ec%9e%98%ed%95%a9%eb%8b%88%eb%8b%a4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 51049788, "answer_count": 4, "score": -3, "last_activity_date": 1530039571, "creation_date": 1530033614, "last_edit_date": 1530039161, "question_id": 51048390, "link": "https://stackoverflow.com/questions/51048390/about-printf-c-language", "title": "About printf (C language)", "body": "<p>I want to print a string with multiple lines, I have tried:</p>\n\n<pre><code>printf(\"1. englsih\n2. finish\n3. japanese);\n</code></pre>\n\n<p>How should I do it?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530034137, "post_id": 51048382, "comment_id": 89088102, "body": "You will need to give more details on the errors or wrong behaviors you get. Have a look at <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 9, "user_id": 9995821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad32775e169686c6c5bad15429d0336?s=128&d=identicon&r=PG&f=1", "display_name": "M5623", "link": "https://stackoverflow.com/users/9995821/m5623"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1530034875, "post_id": 51048382, "comment_id": 89088477, "body": "@PatrickMevzek Thanks for your comment. I don&#39;t have any error, the thread just not start. The GetLastError function never return an error code."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530041187, "post_id": 51048382, "comment_id": 89091244, "body": "<code>CreateThread</code> always launch your function, why you decide that <code>mergeThread</code> not executed ?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1530042117, "post_id": 51048382, "comment_id": 89091614, "body": "puts(&quot;Thread start\\n&quot;);  maybe."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9995821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad32775e169686c6c5bad15429d0336?s=128&d=identicon&r=PG&f=1", "display_name": "M5623", "link": "https://stackoverflow.com/users/9995821/m5623"}, "edited": false, "score": 0, "creation_date": 1530041570, "post_id": 51048888, "comment_id": 89091392, "body": "Thanks for your answer. Same problem. The function is not always call. I think the problem come from GTK while I call the function on the main thread"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 9, "user_id": 9995821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad32775e169686c6c5bad15429d0336?s=128&d=identicon&r=PG&f=1", "display_name": "M5623", "link": "https://stackoverflow.com/users/9995821/m5623"}, "edited": false, "score": 0, "creation_date": 1530041692, "post_id": 51048888, "comment_id": 89091432, "body": "@M5623 - you mistake. at first your function is called. at second <code>puts</code> fail"}, {"owner": {"reputation": 9, "user_id": 9995821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad32775e169686c6c5bad15429d0336?s=128&d=identicon&r=PG&f=1", "display_name": "M5623", "link": "https://stackoverflow.com/users/9995821/m5623"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530043465, "post_id": 51048888, "comment_id": 89092189, "body": "@RbMm Thanks for your answer you mean that puts isn&#39;t thread safe ?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 9, "user_id": 9995821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad32775e169686c6c5bad15429d0336?s=128&d=identicon&r=PG&f=1", "display_name": "M5623", "link": "https://stackoverflow.com/users/9995821/m5623"}, "edited": false, "score": 0, "creation_date": 1530043697, "post_id": 51048888, "comment_id": 89092283, "body": "@M5623 no, but <code>puts</code> use some c/c++ runtime environment, which will be not initialized in thread created by <code>CreateThread</code>. or not use c/c++ runtime in this thread, or use <code>_beginthreadex</code> which internally call <code>CreateThread</code> + do required runtime initialization. so answer under which we comment is correct"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1530074240, "post_id": 51048888, "comment_id": 89099949, "body": "This answer was true a very long time ago, but not any more"}], "tags": [], "owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "is_accepted": false, "score": 1, "last_activity_date": 1530035561, "creation_date": 1530035561, "answer_id": 51048888, "question_id": 51048382, "link": "https://stackoverflow.com/questions/51048382/winapi-createthread-c-not-always-launch-function/51048888#51048888", "title": "WINAPI CreateThread C not always launch function", "body": "<p>The C run-time library needs some per-thread initialization. <code>CreateThread()</code>, which knows nothing about the C RTL, doesn't perform that.</p>\n\n<p>Instead of <code>CreateThread()</code>, use <code>_beginthreadex()</code>. It's declared in <code>&lt;process.h&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 9995821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad32775e169686c6c5bad15429d0336?s=128&d=identicon&r=PG&f=1", "display_name": "M5623", "link": "https://stackoverflow.com/users/9995821/m5623"}, "edited": false, "score": 0, "creation_date": 1530040833, "post_id": 51049040, "comment_id": 89091102, "body": "Thanks for your answer. Yes I already use this functions to interact with GTK object on other thread. The CreateThread function is call on the main thread. For the other thread I only display a text on the console"}], "tags": [], "owner": {"reputation": 677, "user_id": 3785680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e7953767467649c81b58fe9e5a9278?s=128&d=identicon&r=PG&f=1", "display_name": "Outshined", "link": "https://stackoverflow.com/users/3785680/outshined"}, "is_accepted": false, "score": 1, "last_activity_date": 1530036266, "creation_date": 1530036266, "answer_id": 51049040, "question_id": 51048382, "link": "https://stackoverflow.com/questions/51048382/winapi-createthread-c-not-always-launch-function/51049040#51049040", "title": "WINAPI CreateThread C not always launch function", "body": "<p>According to <a href=\"https://developer.gnome.org/gdk3/stable/gdk3-Threads.html\" rel=\"nofollow noreferrer\">this page</a>, GTK is not thread safe. Anything that interacts with the GUI inside your <em>mergeThread</em> function can have unexpected results.</p>\n\n<p>Please refer to the link I provided for more information about multithreaded GTK applications to see how to use GDK instead.</p>\n"}], "owner": {"reputation": 9, "user_id": 9995821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad32775e169686c6c5bad15429d0336?s=128&d=identicon&r=PG&f=1", "display_name": "M5623", "link": "https://stackoverflow.com/users/9995821/m5623"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530042913, "creation_date": 1530033588, "last_edit_date": 1530042913, "question_id": 51048382, "link": "https://stackoverflow.com/questions/51048382/winapi-createthread-c-not-always-launch-function", "title": "WINAPI CreateThread C not always launch function", "body": "<p>I'm writing a C program.</p>\n\n<p>For thread I use the WINAPI library.</p>\n\n<p>But sometimes the CreateThread function don't launch the function associate.</p>\n\n<p>I used the WaitForSingleObject function with INFINITE param to let my thread start but he never start</p>\n\n<p>The GetLastError functions return always 0,so I don't know where is my mistake</p>\n\n<p>The merge function is call when GTK button is press.</p>\n\n<p>Below you will find my code</p>\n\n<pre><code>void merge(GtkWidget *wiget, gpointer data){\n\n    HANDLE thread;\n    FtpLogin *login = (FtpLogin *) data;\n\n    thread = CreateThread(NULL, 0, mergeThread, login, 0, NULL);\n\n    printf(\"%ld\", GetLastError());\n\n    WaitForSingleObject(thread, INFINITE);\n\n    if(thread == NULL)\n     puts(\"error\");\n}\n\nDWORD WINAPI mergeThread( LPVOID lpParam )\n{\n   puts(\"Thread start\");\n\n   return 0;\n}\n</code></pre>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1530032914, "post_id": 51048161, "comment_id": 89087476, "body": "printf .......?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1530033563, "post_id": 51048161, "comment_id": 89087800, "body": "&#39;if(B = fopen(Archivo, &quot;wb&quot;)==NULL)&#39; ... &#39;B&#39; is assigned a boolean result."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1530033863, "post_id": 51048161, "comment_id": 89087956, "body": "Enable all compiler warnings."}, {"owner": {"reputation": 27, "user_id": 9226807, "user_type": "registered", "profile_image": "https://graph.facebook.com/1696038770418248/picture?type=large", "display_name": "Juan J. Mart", "link": "https://stackoverflow.com/users/9226807/juan-j-mart"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1530034227, "post_id": 51048161, "comment_id": 89088162, "body": "@MartinJames  Thank you!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1530035309, "post_id": 51048161, "comment_id": 89088683, "body": "@JuanJ.Mart you can thank me by not writing compound expressions/statements:)  So many times this goes wrong:(  Simple code with many intermediate results is safer and easier to debug."}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 8834967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xrf_YCVb2Vw/AAAAAAAAAAI/AAAAAAAAAAc/K52j8i_sYWw/photo.jpg?sz=128", "display_name": "Joy Allen", "link": "https://stackoverflow.com/users/8834967/joy-allen"}, "edited": false, "score": 0, "creation_date": 1530082906, "post_id": 51048358, "comment_id": 89103340, "body": "<code>size_t fwrite(void *ptr, size_t size, size_t nmemb, FILE *stream);</code>"}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": -1, "last_activity_date": 1530033524, "creation_date": 1530033524, "answer_id": 51048358, "question_id": 51048161, "link": "https://stackoverflow.com/questions/51048161/fread-and-fwrite-with-pointers-in-c/51048358#51048358", "title": "fread and fwrite with pointers in c", "body": "<p>The first argument for fwrite is a FILE*. You must have turned lots of warnings off or your compiler would have told you. </p>\n"}], "owner": {"reputation": 27, "user_id": 9226807, "user_type": "registered", "profile_image": "https://graph.facebook.com/1696038770418248/picture?type=large", "display_name": "Juan J. Mart", "link": "https://stackoverflow.com/users/9226807/juan-j-mart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530033524, "creation_date": 1530032716, "question_id": 51048161, "link": "https://stackoverflow.com/questions/51048161/fread-and-fwrite-with-pointers-in-c", "title": "fread and fwrite with pointers in c", "body": "<p>I am trying to write an array of structures to a binary file but when I call the function fwrite does not save anything in the file.</p>\n\n<p>In the structure they are saved correctly </p>\n\n<pre><code>void Escribir_swap(const char *PCB, const char *Archivo, Pagina **Paginas){\nFILE *A, *B;\nchar exeption[5] = \" \\n\\t,\";\nchar LINE[LONG_MAX_LINE];\nint TAM = 0;\nint i = 0, j = 0;\nfor(i = 0; i &lt; MARCOS; i++){\n    for(j = 0; j &lt; PAGINAS; j++){\n        if(Get_I(TAM, PCB, LINE, exeption, A) !=NULL ){\n            strcpy(Paginas[i][j].Instruccion,Get_I(TAM, PCB, LINE, exeption, A));\n            strcpy(Paginas[i][j].register1, Get_R(TAM, PCB, LINE, exeption, A, 1));\n            strcpy(Paginas[i][j].register2, Get_R(TAM, PCB, LINE, exeption, A, 2));\n            TAM++;\n            }\n        else{\n            break;\n        }\n      }\n    }\nprintf(\"I\\t R1,R2\\n\");\nfor(i = 0; i&lt;MARCOS; i++)\n{\n    for(j = 0; j&lt;PAGINAS; j++)\n    {\n        printf(\"%s\\t %s,%s\\n\", Paginas[i][j].Instruccion, Paginas[i][j].register1, Paginas[i][j].register2);\n    }\n}\nif(B = fopen(Archivo, \"wb\")==NULL)\n{\n\n    printf(\"Error al abrir archivo %s\", Archivo);\n    perror(Archivo);\n}else\n{\n    for(i = 0; i&lt;MARCOS; i++)\n    {\n        printf(\"%d\\n\",fwrite(Paginas[i], sizeof(Pagina), PAGINAS, B));//here shows segment violation!!!!\n    }\n}\nfflush(B);\nfclose(B);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "winapi", "visual-c++", "windows-10"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1530039592, "post_id": 51048090, "comment_id": 89090547, "body": "you can not set <code>TokenIntegrityLevel</code> higher than current in token. set lower - can."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530044395, "post_id": 51048090, "comment_id": 89092595, "body": "really if want be more exactly, you need have <code>SE_TCB_PRIVILEGE</code> (<i>SeTcbPrivilege</i>) for do this - up <code>TokenIntegrityLevel</code> in token. but you have not this privilege. but if you even have it - you will got another error in this code - <code>C000012B</code> - <i>An attempt was made to establish a token for use as a primary token but the token is already in use. A token can only be the primary token of one process at a time.</i>, for avoid it we can for example add line <code>DuplicateTokenEx(hToken, TOKEN_ADJUST_DEFAULT, 0, ::SecurityImpersonation, ::TokenPrimary, &amp;hNewToken);</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530044398, "post_id": 51048090, "comment_id": 89092597, "body": "with this set <code>TokenIntegrityLevel</code> will be work ok (side note you need only <code>TOKEN_ADJUST_DEFAULT</code> instead <code>TOKEN_ALL_ACCESS</code>. but one problem - <code>hNewToken</code> already not related to your process :)"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1530115565, "post_id": 51048090, "comment_id": 89124154, "body": "To avoid UAC prompt every time, you can let a service launch your process elevated, e. g. Windows task scheduler. Of course, to register your process with task scheduler, you need to elevate once."}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530057415, "post_id": 51049042, "comment_id": 89096640, "body": "this is (like <i>osk.exe</i>) auto-elevated processes. it names/locations hard-coded. even in early versions of win 10 was possibility abuse this and launch self process in place it. but in latest builds this is fixed, possible no more hole  here"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1530071883, "post_id": 51049042, "comment_id": 89099421, "body": "@RbMm Really?  That&#39;s horrible."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 2, "last_activity_date": 1530043019, "last_edit_date": 1530043019, "creation_date": 1530036270, "answer_id": 51049042, "question_id": 51048090, "link": "https://stackoverflow.com/questions/51048090/raising-process-integrity-without-uac-prompt/51049042#51049042", "title": "Raising process integrity without UAC prompt", "body": "<p>I think you will find this behaviour is by design.  If any process could silently run elevated at the drop of a hat, what security would there be?</p>\n\n<p>Addendum: Microsoft know how to do this, but it is reserved for things like the Settings app or Disk Management in MMC.  The on-screen keyboard (OSK) is another one.  This runs elevated without ever prompting the user.  One rule for them, one rule for us, eh?</p>\n"}], "owner": {"reputation": 19, "user_id": 8491649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6617d5cecc8cdbae35e474d1f8f4d270?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Paxtonn", "link": "https://stackoverflow.com/users/8491649/bill-paxtonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 51049042, "answer_count": 1, "score": -3, "last_activity_date": 1530062179, "creation_date": 1530032376, "question_id": 51048090, "link": "https://stackoverflow.com/questions/51048090/raising-process-integrity-without-uac-prompt", "title": "Raising process integrity without UAC prompt", "body": "<p>The objective is to prevent local user accounts from killing my process. AFAIK, that is achieved by either executing the process as an administrator or by raising the process's integrity.</p>\n\n<p>Currently, I'm using the .exe's manifest file to execute the process with administrator privileges. My user is of type administrator and simply has to click on \"yes\" to the UAC prompt. I would like to be free of that hassle and raise my process's integrity programmatically. But in the following excerpt, <code>SetTokenInformation()</code> has error \"A required privilege is not held by the client\". I enabled all privileges using <a href=\"https://gallery.technet.microsoft.com/scriptcenter/Grant-Revoke-Query-user-26e259b0\" rel=\"nofollow noreferrer\">UserRights.ps1</a> but it still shows the error.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;malloc.h&gt;\n\nvoid failure(const char *message, const int line)\n{\n    char buf[256] = { 0 };\n    FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS, NULL, GetLastError(), MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), (LPTSTR)&amp;buf, sizeof(buf), NULL);\n\n    puts(buf);\n\n    exit(1);\n}\n\nint main(void)\n{\n    HANDLE hToken;\n    if (OpenProcessToken(GetCurrentProcess(), TOKEN_ALL_ACCESS, &amp;hToken) == 0)\n        failure(\"OpenProcessToken()\", __LINE__);\n\n    ULONG cbSid = GetSidLengthRequired(1);\n    TOKEN_MANDATORY_LABEL tml = { { alloca(cbSid) } };\n\n    if (CreateWellKnownSid(WinHighLabelSid, NULL, tml.Label.Sid, &amp;cbSid) == 0)\n        failure(\"CreateWellKnownSid()\", __LINE__);\n\n    if (SetTokenInformation(hToken, TokenIntegrityLevel, &amp;tml, sizeof(tml)) == 0)\n        failure(\"SetTokenInformation()\", __LINE__);\n\n    CloseHandle(hToken);\n\n    getchar();\n\nreturn 0;\n}\n</code></pre>\n\n<pre>Grant-UserRight DESKTOP-xxxxxxx\\myusername SeTrustedCredManAccessPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeNetworkLogonRight\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeTcbPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeMachineAccountPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeIncreaseQuotaPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeInteractiveLogonRight\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeRemoteInteractiveLogonRight\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeBackupPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeChangeNotifyPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeSystemtimePrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeTimeZonePrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeCreatePagefilePrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeCreateTokenPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeCreateGlobalPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeCreatePermanentPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeCreateSymbolicLinkPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeDebugPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeEnableDelegationPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeRemoteShutdownPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeAuditPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeImpersonatePrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeIncreaseWorkingSetPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeIncreaseBasePriorityPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeLoadDriverPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeLockMemoryPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeBatchLogonRight\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeServiceLogonRight\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeSecurityPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeRelabelPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeSystemEnvironmentPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeManageVolumePrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeProfileSingleProcessPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeSystemProfilePrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeUndockPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeAssignPrimaryTokenPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeRestorePrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeShutdownPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeSyncAgentPrivilege\nGrant-UserRight DESKTOP-xxxxxxx\\myusername SeTakeOwnershipPrivilege</pre>\n"}, {"tags": ["c", "char", "signed"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1530032075, "post_id": 51047929, "comment_id": 89087024, "body": "Note that 4294967168 is 0xFFFFFF80.  And -128 is 0x80.  And on your platform, <code>char</code> is a signed type."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1530032193, "post_id": 51047929, "comment_id": 89087096, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15736497/how-to-print-an-unsigned-char-in-c\">How to print an unsigned char in C?</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530032310, "post_id": 51047929, "comment_id": 89087153, "body": "128 doesn&#39;t fit in a char if it&#39;s a signed 8-bit type. And an <code>int</code> should be printed by <code>%d</code>, not <code>%u</code>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1530032476, "post_id": 51047929, "comment_id": 89087238, "body": "It&#39;s not clear what you&#39;re asking. Are you asking why you happen to get the output you happen to get on your particular platform?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1530032515, "post_id": 51047929, "comment_id": 89087267, "body": "<code>char</code> can be either signed or unsigned depending on the system. If your system defines <code>char</code> as signed, and your <code>CHAR_BIT</code> is 8 bits, then the greatest positive number you can store in <code>char</code> is 127."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1530034125, "post_id": 51047929, "comment_id": 89088092, "body": "Printing a negative <code>int</code>(or value converted to an <code>int</code>) with <code>printf(&quot;%u\\n&quot;,a);</code> is <i>undefined behavior</i>."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1530037486, "post_id": 51047929, "comment_id": 89089697, "body": "@chux you are probably right but just for completeness - what part of the standard says that?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1530037773, "post_id": 51047929, "comment_id": 89089799, "body": "@4386427 See C11 &#167;6.5.2.2 6 and &#167;7.21.6.1 9"}], "answers": [{"comments": [{"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1530033870, "post_id": 51048273, "comment_id": 89087962, "body": "Just to add to this answer, in some architectures this <code>char a = 128</code> might produce 0, and not -128. There was an old old question on SO, I cannot find it."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 6, "last_activity_date": 1530033202, "last_edit_date": 1592644375, "creation_date": 1530033202, "answer_id": 51048273, "question_id": 51047929, "link": "https://stackoverflow.com/questions/51047929/assigning-128-to-char-variable-in-c/51048273#51048273", "title": "assigning 128 to char variable in c", "body": "<p>Compiling your code with warnings turned on gives:</p>\n<pre><code>warning: overflow in conversion from 'int' to 'char' changes value from '128' to '-128' [-Woverflow]\n</code></pre>\n<p>which tell you that the assignment <code>a=128;</code> isn't well defined on your plat form.</p>\n<p>The standard say:</p>\n<blockquote>\n<p>6.3.1.3 Signed and unsigned integers</p>\n<p>1 When a value with integer type is converted to another integer type other than _Bool, if the value can be represented by the new type, it is unchanged.</p>\n<p>2 Otherwise, if the new type is unsigned, the value is converted by repeatedly adding or subtracting one more than the maximum value that can be represented in the new type until the value is in the range of the new type.</p>\n<p>3 Otherwise, the new type is signed and the value cannot be represented in it; <strong>either the result is implementation-de\ufb01ned or an implementation-de\ufb01ned signal is raised</strong>.</p>\n</blockquote>\n<p>So we can't know what is going on as it depends on your system.</p>\n<p>However, if we do some guessing (and note <strong>this is just a guess</strong>):</p>\n<p>128 as 8 bit would be 0b1000.0000</p>\n<p>so when you call <code>printf</code> where you get a conversion to <code>int</code> there will be a sign extension like:</p>\n<pre><code> 0b1000.0000 ==&gt; 0b1111.1111.1111.1111.1111.1111.1000.0000\n</code></pre>\n<p>which - printed as unsigned represents the number 4294967168</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1530034372, "creation_date": 1530034372, "answer_id": 51048601, "question_id": 51047929, "link": "https://stackoverflow.com/questions/51047929/assigning-128-to-char-variable-in-c/51048601#51048601", "title": "assigning 128 to char variable in c", "body": "<p>First of all, as I hope you understand, the code you've posted is full of errors, and you would not want to depend on its output.  If you were trying to perform any of these manipulations in a real program, you would want to do so in some other, more well-defined, more portable way.</p>\n\n<p>So I assume you're asking only out of curiosity, and I answer in the same spirit.</p>\n\n<p>Type <code>char</code> on your machine is probably a signed 8-bit quantity.  So its range is from -128 to +127.  So +128 won't fit.</p>\n\n<p>When you try to jam the value +128 into a signed 8-bit quantity, you probably end up with the value -128 instead.  And that seems to be what's happening for you, based on the fact that your <code>if</code> statement is evidently succeeding.</p>\n\n<p>So next we try to take the value -128 and print it as if it was an <code>unsigned int</code>, which on your machine is evidently an 32-bit type.  It can hold numbers in the range 0 to 4294967295, which obviously does not include -128.  But unsigned integers typically behave pretty nicely modulo their range, so if we add 4294967296 to -128 we get 4294967168, which is precisely the number you saw.</p>\n\n<p>Now that we've worked through this, let's resolve in future not to jam numbers that won't fit into <code>char</code> variables, or to print signed quantities with the <code>%u</code> format specifier.</p>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 2, "last_activity_date": 1560983895, "last_edit_date": 1560983895, "creation_date": 1530041631, "answer_id": 51050219, "question_id": 51047929, "link": "https://stackoverflow.com/questions/51047929/assigning-128-to-char-variable-in-c/51050219#51050219", "title": "assigning 128 to char variable in c", "body": "<p>The sequence of steps that got you there is something like this:</p>\n\n<ol>\n<li>You assign 128 to a <code>char</code>.</li>\n<li>On your implementation, <code>char</code> is <code>signed char</code> and has a maximum value of 127, so 128 overflows.</li>\n<li>Your implementation interprets 128 as <code>0x80</code>. It uses two\u2019s-complement math, so <code>(int8_t)0x80</code> represents <code>(int8_t)-128</code>.</li>\n<li>For historical reasons (relating to the instruction sets of the DEC PDP minicomputers on which C was originally developed), C promotes signed types shorter than <code>int</code> to <code>int</code> in many contexts, including variadic arguments to functions such as <code>printf()</code>, which aren\u2019t bound to a prototype and still use the old argument-promotion rules of K&amp;R C instead.</li>\n<li>On your implementation, <code>int</code> is 32 bits wide and also two\u2019s-complement, so <code>(int)-128</code> sign-extends to <code>0xFFFFFF80</code>.</li>\n<li>When you make a call like <code>printf(\"%u\", x)</code>, the runtime interprets the <code>int</code> argument as an <code>unsigned int</code>.</li>\n<li>As an unsigned 32-bit integer, <code>0xFFFFFF80</code> represents 4,294,967,168.</li>\n<li>The <code>\"%u\\n\"</code> format specifier prints this out without commas (or other separators) followed by a newline.</li>\n</ol>\n\n<p>This is all legal, but so are many other possible results.  The code is buggy and not portable.</p>\n\n<p>Make sure you don\u2019t overflow the range of your type!  (Or if that\u2019s unavoidable, overflow for unsigned scalars is defined as modular arithmetic, so it\u2019s better-behaved.)  The workaround here is to use <code>unsigned char</code>, which has a range from 0 to (at least) 255, instead of <code>char</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 8284868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3004c4ec2aa0a8e173e14ad387530fa6?s=128&d=identicon&r=PG&f=1", "display_name": "Aayush Somani", "link": "https://stackoverflow.com/users/8284868/aayush-somani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1560983895, "creation_date": 1530031782, "last_edit_date": 1530032148, "question_id": 51047929, "link": "https://stackoverflow.com/questions/51047929/assigning-128-to-char-variable-in-c", "title": "assigning 128 to char variable in c", "body": "<p>The output comes to be the 32-bit 2's complement of 128 that is 4294967168. How?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    char a;\n    a=128;\n    if(a==-128)\n    {\n        printf(\"%u\\n\",a);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "inline-assembly", "cortex-m", "armcc"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1530030591, "post_id": 51047492, "comment_id": 89086285, "body": "Try adding an underscore to the beginning of <code>IRQHandler_real</code>: <code>_IRQHandler_real</code>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1530030667, "post_id": 51047492, "comment_id": 89086332, "body": "I think the code is also intended to pass SP to the called function rather than PC."}, {"owner": {"reputation": 154, "user_id": 2383265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ViuZA.png?s=128&g=1", "display_name": "MPStoering", "link": "https://stackoverflow.com/users/2383265/mpstoering"}, "edited": false, "score": 0, "creation_date": 1530031046, "post_id": 51047492, "comment_id": 89086520, "body": "Thomas, I tried both single and double underscores, both failed with the same compile."}, {"owner": {"reputation": 154, "user_id": 2383265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ViuZA.png?s=128&g=1", "display_name": "MPStoering", "link": "https://stackoverflow.com/users/2383265/mpstoering"}, "edited": false, "score": 0, "creation_date": 1530031073, "post_id": 51047492, "comment_id": 89086533, "body": "Supercat, I updated the question. Thanks for the catch."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1530031961, "post_id": 51047492, "comment_id": 89086957, "body": "I&#39;m not clear why you&#39;re adding 1 to R0, but I&#39;d suggest checking whether the assembler can handle the <code>=</code> syntax when used in this context by trying <code>ldr r0,=123456789</code>.  If you can use a RAM-based vector table, another possibility which would avoid the need for compiler-dependent code would be to define a structure <code>struct { uint64_t code; void (*func)(uint32_t *sp);} intBoing</code>, store 0xBF00470849014668 into <code>code</code>, and the address of the function into <code>func</code>.  Then store the address of <code>intBoing</code>, plus 1, into the desired interrupt vector.  If I figured it right, btw, the code is:"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1530032028, "post_id": 51047492, "comment_id": 89086996, "body": "<code>mov r0,sp &#47; ldr r1, [pc+4] &#47; bx r1 &#47; nop</code>."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1530035051, "post_id": 51047492, "comment_id": 89088557, "body": "I feed that code into gcc and I get errors, fundamental errors with the asm directive, much less how it is dealing with labels.  So maybe you are using C++ despite the C tag on the question, or maybe you are not using gcc at all?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1530035122, "post_id": 51047492, "comment_id": 89088590, "body": "if the bottom line is you need to call C from assembly why not just use real assembly rather than inline,   your loading of the address or a bl should both work and the bl should have the range on an cortex-m to reach most if not all of your flash so should just work."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1530035253, "post_id": 51047492, "comment_id": 89088652, "body": "the adding one to the stack pointer doesnt make sense but maybe that is something specific to your interrupt handling..."}, {"owner": {"reputation": 154, "user_id": 2383265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ViuZA.png?s=128&g=1", "display_name": "MPStoering", "link": "https://stackoverflow.com/users/2383265/mpstoering"}, "edited": false, "score": 1, "creation_date": 1530036405, "post_id": 51047492, "comment_id": 89089253, "body": "All of our code is written in C. I asked around the office, it looks like we are using ARMCC 5.06, not GCC ARM. I was trying to avoid creating a new file for such a small change, but I can move it into a new file if there&#39;s no inline solution. I&#39;ll try loading the struct into the interrupt vector and will check back with that"}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 2383265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ViuZA.png?s=128&g=1", "display_name": "MPStoering", "link": "https://stackoverflow.com/users/2383265/mpstoering"}, "edited": false, "score": 0, "creation_date": 1530049063, "post_id": 51047962, "comment_id": 89094448, "body": "I would expect that this would work for VS/C++. Unfortunately, it doesn&#39;t work for ARMCC."}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 154, "user_id": 2383265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ViuZA.png?s=128&g=1", "display_name": "MPStoering", "link": "https://stackoverflow.com/users/2383265/mpstoering"}, "edited": false, "score": 1, "creation_date": 1530049573, "post_id": 51047962, "comment_id": 89094618, "body": "@MPStoering you might need to surround it by <code>#ifdef __cplusplus</code> but it&#39;s documented <a href=\"https://developer.arm.com/products/software-development-tools/compilers/arm-compiler-5/docs/dui0471/f/mixing-c-c-and-assembly-language/including-your-own-c-header-files-from-c\" rel=\"nofollow noreferrer\">here</a> on the ARM website.  I didn&#39;t think anyone uses armcc anymore, but I&#39;m also sure this works with gcc."}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 2, "last_activity_date": 1530031907, "creation_date": 1530031907, "answer_id": 51047962, "question_id": 51047492, "link": "https://stackoverflow.com/questions/51047492/calling-a-c-function-from-arm-function-defined-with-asm/51047962#51047962", "title": "Calling a C function from ARM function defined with __asm", "body": "<p>If your compiler is a C++ compiler you will need to use extern \"C\" like this;</p>\n\n<pre><code>extern \"C\" {\n  void IRQHandler_real( uint32_t *sp )\n  {\n     // Do some work\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 2383265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ViuZA.png?s=128&g=1", "display_name": "MPStoering", "link": "https://stackoverflow.com/users/2383265/mpstoering"}, "is_accepted": true, "score": 1, "last_activity_date": 1530049926, "creation_date": 1530049926, "answer_id": 51051829, "question_id": 51047492, "link": "https://stackoverflow.com/questions/51047492/calling-a-c-function-from-arm-function-defined-with-asm/51051829#51051829", "title": "Calling a C function from ARM function defined with __asm", "body": "<p>It seems like the compiler is evaluating the ARM code separately from and after all C code is evaluated. I fixed it by importing the function\nwith the <code>IMPORT</code> command. My final code looks like this:</p>\n\n<pre><code>IMPORT IRQHandler_real\nPUSH { R4, lr }\nMOV R4, SP; The compiler does this from the C code, I'm assuming to avoid a hardware limitation.\nMOV R0, R4\nBL IRQHandler_real\nPOP { R4, PC }\nENDP\n</code></pre>\n\n<p>This works for ARMCC 5.6. I think that most of the documentation out there is for GCC ARM (<code>asm(\"statement\");</code>). I am still getting <code>Warning:  #667-D: \"asm\" function is nonstandard</code>, so I will gladly accept a \"more correct\" answer if one exists.</p>\n"}], "owner": {"reputation": 154, "user_id": 2383265, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ViuZA.png?s=128&g=1", "display_name": "MPStoering", "link": "https://stackoverflow.com/users/2383265/mpstoering"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1316, "favorite_count": 0, "accepted_answer_id": 51051829, "answer_count": 2, "score": 3, "last_activity_date": 1556209849, "creation_date": 1530030165, "last_edit_date": 1556209849, "question_id": 51047492, "link": "https://stackoverflow.com/questions/51047492/calling-a-c-function-from-arm-function-defined-with-asm", "title": "Calling a C function from ARM function defined with __asm", "body": "<p>I am having trouble understanding my compiler. We use the Scons utility to compile ARM code for an M0+ processor (on Windows, if it matters. It's an ARMCC compile) I am trying to capture the address of the stack pointer during an interrupt using the answer to <a href=\"https://stackoverflow.com/a/38619316/2383265\">this question</a>.</p>\n\n<p>For my compiler, I get the following: <code>Error: #20:  identifier \"asm\" is undefined</code>\nThe only way that I was able to get it to (mostly) compile was with the following:</p>\n\n<pre><code>  void IRQHandler_real( uint32_t *sp )\n  {\n     // Do some work\n  }\n\n  __asm void IRQHandler( void )\n  {\n     MOV R0,SP\n     ADDS R0, #1\n     LDR R1, =IRQHandler_real //&lt;&lt;-- This line fails\n     BX R1\n  }\n</code></pre>\n\n<p>The error code is</p>\n\n<pre><code>  Error: A1516E: Bad symbol 'IRQHandler_real', not defined or external\n</code></pre>\n\n<p>Replacing the last two assembly lines with <code>BL IRQHandler_real</code> results in the same error.</p>\n\n<p><a href=\"https://stackoverflow.com/a/35959859/2383265\">This answer</a> explains that inline assembly is extremely compiler dependent, so I haven't been able to find an example that matches my code.</p>\n\n<p>I read <a href=\"https://msdn.microsoft.com/en-us/library/bdd5392d.aspx\" rel=\"nofollow noreferrer\">here</a> that I need an \"extern C\" call, but I haven't yet found details on what that looks like.</p>\n\n<p>I double checked my syntax of the compiled processor code, and it looks identical to the commands that I am using. I think that the symbol is not defined at the time when the assembly is evaluated. I just haven't figured out how to define and link the symbols.</p>\n\n<p>TL:DR, I need to call a C function from ARM assembly, but I haven't gotten past the compiler.</p>\n"}, {"tags": ["c", "raspberry-pi3", "arduino-uno"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1530031678, "post_id": 51047481, "comment_id": 89086800, "body": "You forgot to ask a question."}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 9276160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88531f1fda13ce8e9eede1fa266387a3?s=128&d=identicon&r=PG&f=1", "display_name": "Padmanava", "link": "https://stackoverflow.com/users/9276160/padmanava"}, "is_accepted": false, "score": -1, "last_activity_date": 1530032000, "creation_date": 1530032000, "answer_id": 51047992, "question_id": 51047481, "link": "https://stackoverflow.com/questions/51047481/sending-commands-to-arduino-while-its-already-running/51047992#51047992", "title": "Sending commands to Arduino while it&#39;s already running", "body": "<p>Use the following programs to send and receive serial data from Arduino:</p>\n\n<p><a href=\"https://www.codeproject.com/Questions/718340/C-program-to-Linux-Serial-port-read-write\" rel=\"nofollow noreferrer\">Original Source</a></p>\n\n<p><strong>SEND.c</strong></p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n\n\n#define BAUDRATE B115200 //Baud Rate Here\n#define MODEMDEVICE \"/dev/ttyUSB0\" //Serial Port Here\n#define _POSIX_SOURCE 1 /* POSIX compliant source */\n#define FALSE 0\n#define TRUE 1\n\nFILE *file;\nint fileLen;\nchar *tmpbuffer;\nvoid openport(void);\nvoid readport(void);\nvoid sendport(void);\nint fd=0;\nstruct termios oldtp, newtp;\n//char sendcmd1[256]=\"\\0\";\nchar buffer[512];\n\nvoid main()\n{\n\n\n    openport();\n    sleep(1);\n//  readport();\n    sendport();\n\n\n\n\n}\n\nvoid sendport(void)\n{\n        printf(\"enter write\\n\");\n        int n;\n     //   sem_wait(&amp;len);\n                file = fopen(\"sample.txt\", \"r\");\n\n                //get file size\n\n                fseek(file, 0, SEEK_END);\n                fileLen = ftell(file);\n                fseek(file, 0, SEEK_SET);\n\n                tmpbuffer = (char *)malloc(fileLen + 1);\n\n                //read file contents\n                printf(\"Start send\\n\");\n                fread(tmpbuffer, fileLen, 1, file);\n                fclose(file);\n\n                n = write(fd, tmpbuffer, fileLen + 1);\n\n                if (n &lt; 0)\n                {\n                        fputs(\"write() of bytes failed!\\n\", stderr);\n                }\n                else\n                {\n                        printf(\"File sent successfully %d\\n\",n);\n                }\n                close(fd);\n\n}\n\nvoid openport(void)\n{\n         fd = open(MODEMDEVICE, O_RDWR | O_NOCTTY |O_NDELAY );\n    printf(\"Oviya %d\\n\",fd);\n         if (fd &lt;0)\n         {\n         perror(MODEMDEVICE);         }\n\n         fcntl(fd,F_SETFL,0);\n        tcgetattr(fd,&amp;oldtp); /* save current serial port settings */\n        // tcgetattr(fd,&amp;newtp); /* save current serial port settings */\n         bzero(&amp;newtp, sizeof(newtp));\n        // bzero(&amp;oldtp, sizeof(oldtp));\n\n         newtp.c_cflag = BAUDRATE | CRTSCTS | CS8 | CLOCAL | CREAD;\n\n         newtp.c_iflag = IGNPAR | ICRNL;\n\n         newtp.c_oflag = 0;\n\n         newtp.c_lflag = ICANON;\n\n         newtp.c_cc[VINTR]    = 0;     /* Ctrl-c */\n         newtp.c_cc[VQUIT]    = 0;     /* Ctrl-\\ */\n         newtp.c_cc[VERASE]   = 0;     /* del */\n         newtp.c_cc[VKILL]    = 0;     /* @ */\n         //newtp.c_cc[VEOF]     = 4;     /* Ctrl-d */\n         newtp.c_cc[VEOF]     = 0;     /* Ctrl-d */\n         newtp.c_cc[VTIME]    = 0;     /* inter-character timer unused */\n         newtp.c_cc[VMIN]     = 1;     /* blocking read until 1 character arrives */\n         newtp.c_cc[VSWTC]    = 0;     /* '\\0' */\n         newtp.c_cc[VSTART]   = 0;     /* Ctrl-q */\n         newtp.c_cc[VSTOP]    = 0;     /* Ctrl-s */\n         newtp.c_cc[VSUSP]    = 0;     /* Ctrl-z */\n         newtp.c_cc[VEOL]     = 0;     /* '\\0' */\n         newtp.c_cc[VREPRINT] = 0;     /* Ctrl-r */\n         newtp.c_cc[VDISCARD] = 0;     /* Ctrl-u */\n         newtp.c_cc[VWERASE]  = 0;     /* Ctrl-w */\n         newtp.c_cc[VLNEXT]   = 0;     /* Ctrl-v */\n         newtp.c_cc[VEOL2]    = 0;     /* '\\0' */\n\n\n   //     tcflush(fd, TCIFLUSH);\n//  tcsetattr(fd,TCSANOW,&amp;newtp);\n}\n</code></pre>\n\n<p>Go through the code and modify it according to your will.<br>\nThis code expects a .txt file as input.</p>\n\n<p>This answer is written from <a href=\"https://www.codeproject.com/Questions/718340/C-program-to-Linux-Serial-port-read-write\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Questions/718340/C-program-to-Linux-Serial-port-read-write</a> </p>\n\n<p>Visit the original site for additional information</p>\n"}], "owner": {"reputation": 11, "user_id": 8135038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07372b5f0d5a7281e6cf0a09b16f0f3b?s=128&d=identicon&r=PG", "display_name": "user8135038", "link": "https://stackoverflow.com/users/8135038/user8135038"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530032000, "creation_date": 1530030109, "question_id": 51047481, "link": "https://stackoverflow.com/questions/51047481/sending-commands-to-arduino-while-its-already-running", "title": "Sending commands to Arduino while it&#39;s already running", "body": "<p>I'm currently making a robot and I'm using Raspberry pi 3 and Arduino uno for it.</p>\n\n<p>What I want to do is send commands to Arduino via Pi by using  a command line app (written in C)which takes in user input to make certain parts of the robot to move.</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 1, "creation_date": 1530029140, "post_id": 51047125, "comment_id": 89085472, "body": "Yes, if the type is not specified it defaults to <code>int</code>."}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1530029273, "post_id": 51047125, "comment_id": 89085551, "body": "<a href=\"https://stackoverflow.com/questions/26189962/implicit-int-in-c-language\" title=\"implicit int in c language\">stackoverflow.com/questions/26189962/implicit-int-in-c-langu&zwnj;&#8203;age</a>"}, {"owner": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "edited": false, "score": 0, "creation_date": 1530029599, "post_id": 51047125, "comment_id": 89085723, "body": "This was allowed until C99, now not. Possibly helpful: <a href=\"https://stackoverflow.com/a/11064331/8359764\">stackoverflow.com/a/11064331/8359764</a>"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1530029680, "post_id": 51047125, "comment_id": 89085765, "body": "See also <a href=\"https://stackoverflow.com/questions/26488502/which-section-in-c89-standard-allows-the-implicit-int-rule\" title=\"which section in c89 standard allows the implicit int rule\">stackoverflow.com/questions/26488502/&hellip;</a>"}], "owner": {"reputation": 103, "user_id": 9995509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bf997a9bebc838623ce505cabb2eee9?s=128&d=identicon&r=PG&f=1", "display_name": "J.W", "link": "https://stackoverflow.com/users/9995509/j-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1530029557, "answer_count": 0, "score": 2, "last_activity_date": 1530028843, "creation_date": 1530028843, "question_id": 51047125, "link": "https://stackoverflow.com/questions/51047125/implicit-int-declaration-of-a-variable-when-type-qualifier-is-specified", "closed_reason": "Duplicate", "title": "Implicit int declaration of a variable when type qualifier is specified", "body": "<p>I was learning about <code>const</code> type qualifier and I accidentally wrote the following code which I compiled with <code>gcc -Wall -Wextra</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    const a = 5;\n    printf(\"%d\\n\", a);\n    return 0;\n}\n</code></pre>\n\n<p>The compiler throws this warning:</p>\n\n<pre><code>warning: type defaults to \u2018int\u2019 in declaration of \u2018a\u2019 [-Wimplicit-int]\n     const a = 5;\n           ^\n</code></pre>\n\n<p>The ouptut of the program is <code>5</code>. I tried to change <code>const</code> with other type qualifiers like <code>volatile</code> and <code>_Atomic</code> and I have got the same result. I tried to use <code>restrict</code> but I have got an error because I think this keyword is expecting a pointer.</p>\n\n<p>My question is, is there any syntactic rule in the C standard, that requires from compilers to implicitly set to int the the type of a variable specified by a type qualifier without a specific type, or is it gcc specific extension?</p>\n"}, {"tags": ["c", "turbo-c++"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 11, "creation_date": 1530027558, "post_id": 51046682, "comment_id": 89084524, "body": "It&#39;s 2018 now. Turbo C++ is from 1990s."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1530027560, "post_id": 51046682, "comment_id": 89084527, "body": "Don&#39;t bother. And don&#39;t use TurboC. This software is most likely older than you."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1530027583, "post_id": 51046682, "comment_id": 89084538, "body": "Tightly related: <a href=\"https://stackoverflow.com/questions/44863062/why-doesnt-a-simple-hello-world-style-program-compile-with-turbo-c\">Why doesn&#39;t a simple \u201cHello World\u201d-style program compile with Turbo C++?</a> . Basically you&#39;re using the computer equivalent of a Bronze Age tool. It does not work well on modern computers."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1530028011, "post_id": 51046682, "comment_id": 89084782, "body": "It probably thinks the file&#39;s timestamp is in the future. Try saving it again?"}, {"owner": {"reputation": 5, "user_id": 3975996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5iqz.jpg?s=128&g=1", "display_name": "Kailash Pathak", "link": "https://stackoverflow.com/users/3975996/kailash-pathak"}, "edited": false, "score": 0, "creation_date": 1530028779, "post_id": 51046682, "comment_id": 89085258, "body": "Which editor should i use for C/C++?"}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1530029269, "post_id": 51046682, "comment_id": 89085549, "body": "Basically anything you want. If you want to learn and not deal with compiling, something like Eclipse CDT will do well. A text editor and g++ will do just as well, and you have more control. I&#39;m curious where you got that you should use Turbo C++."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1530029444, "post_id": 51046682, "comment_id": 89085642, "body": "<code>gcc</code> and <code>clang</code> are good open-source compilers you can use."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1530029921, "post_id": 51046682, "comment_id": 89085925, "body": "C++ has come a long way since 1987."}, {"owner": {"reputation": 2267, "user_id": 8242447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M6884.gif?s=128&g=1", "display_name": "\u1e42\u0173\u1efb\u1ecbg\u01fb\u0148\u1ea1c\u1ec3\u01a1\u1eed\u1e69", "link": "https://stackoverflow.com/users/8242447/%e1%b9%82%c5%b3%e1%bb%bb%e1%bb%8bg%c7%bb%c5%88%e1%ba%a1c%e1%bb%83%c6%a1%e1%bb%ad%e1%b9%a9"}, "edited": false, "score": 0, "creation_date": 1530041440, "post_id": 51046682, "comment_id": 89091350, "body": "This question is liable to <b>downvotes</b> mainly because Turbo-C++ is considered obsolete and no longer relevant."}, {"owner": {"reputation": 1302, "user_id": 11146632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZcx7.png?s=128&g=1", "display_name": "Sujit", "link": "https://stackoverflow.com/users/11146632/sujit"}, "edited": false, "score": 0, "creation_date": 1554742032, "post_id": 51046682, "comment_id": 97854929, "body": "This warning comes after you finish running the file and didn&#39;t save it before you started compiling it."}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 9276160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88531f1fda13ce8e9eede1fa266387a3?s=128&d=identicon&r=PG&f=1", "display_name": "Padmanava", "link": "https://stackoverflow.com/users/9276160/padmanava"}, "is_accepted": false, "score": 1, "last_activity_date": 1530028819, "creation_date": 1530028819, "answer_id": 51047123, "question_id": 51046682, "link": "https://stackoverflow.com/questions/51046682/getting-error-while-run-the-program-in-c-language/51047123#51047123", "title": "Getting error while run the program in C language", "body": "<p>It seems like you are running this application in some sort of emulator. \nRestart the program and try running that.\nIt should work.\nTurbo C is terribly out of date and is probably even older than you.\nI suggest you to upgrade to a IDE like Code::Blocks.\nIf, you are a beginner I suggest you compile using GCC command line compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 2465, "user_id": 5462988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9i3ex.jpg?s=128&g=1", "display_name": "anoopknr", "link": "https://stackoverflow.com/users/5462988/anoopknr"}, "is_accepted": false, "score": 3, "last_activity_date": 1530031249, "last_edit_date": 1530031249, "creation_date": 1530030856, "answer_id": 51047674, "question_id": 51046682, "link": "https://stackoverflow.com/questions/51046682/getting-error-while-run-the-program-in-c-language/51047674#51047674", "title": "Getting error while run the program in C language", "body": "<p>This is not <strong>Error</strong> this is just a <strong>Warning</strong> .</p>\n\n<p><strong>Save</strong> the file every time before you <em>Build</em> and <em>Run</em>. This is the solution to your warning.This warning happens when you <em>edit</em> the program and tries to <em>run</em> it without <em>saving</em>.</p>\n\n<p>Also your <code>IDE Turbo C++</code> is very outdated Programming environment.I recommend <a href=\"http://www.codeblocks.org/\" rel=\"nofollow noreferrer\">CodeBlocks</a> . <em>Code::Blocks</em> is a free <code>C</code>, <code>C++</code> and <code>Fortran IDE</code> built to meet the most demanding needs of its users. It is designed to be very extensible and fully configurable.You can <a href=\"http://www.codeblocks.org/downloads\" rel=\"nofollow noreferrer\">download it from here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10177490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i2p0QI41_Ss/AAAAAAAAAAI/AAAAAAAAABo/502DwTUuLrU/photo.jpg?sz=128", "display_name": "raptor inc", "link": "https://stackoverflow.com/users/10177490/raptor-inc"}, "is_accepted": false, "score": 0, "last_activity_date": 1533836843, "creation_date": 1533836843, "answer_id": 51773109, "question_id": 51046682, "link": "https://stackoverflow.com/questions/51046682/getting-error-while-run-the-program-in-c-language/51773109#51773109", "title": "Getting error while run the program in C language", "body": "<p>Save the file before you run/compile your code.</p>\n"}], "owner": {"reputation": 5, "user_id": 3975996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5iqz.jpg?s=128&g=1", "display_name": "Kailash Pathak", "link": "https://stackoverflow.com/users/3975996/kailash-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1294, "favorite_count": 1, "answer_count": 3, "score": -15, "last_activity_date": 1533836843, "creation_date": 1530027393, "last_edit_date": 1530032222, "question_id": 51046682, "link": "https://stackoverflow.com/questions/51046682/getting-error-while-run-the-program-in-c-language", "title": "Getting error while run the program in C language", "body": "<p><a href=\"https://i.stack.imgur.com/9qxDR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9qxDR.png\" alt=\"enter image description here\"></a>Getting warning each time while run the program in C.</p>\n"}, {"tags": ["c", "algorithm", "insertion-sort"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1530029118, "post_id": 51046627, "comment_id": 89085453, "body": "Your &quot;custom&quot; approach is a bubble sort. Although it has the same order of complexity as an insertion sort, it is slower because it does more operations (a &quot;swap&quot; is three operations, whereas a &quot;move&quot; is only two operations)."}, {"owner": {"reputation": 87, "user_id": 8715359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-HLmLiwRG0Ow/AAAAAAAAAAI/AAAAAAAAAJs/aibgUnro67k/photo.jpg?sz=128", "display_name": "Saptarshi Sahoo", "link": "https://stackoverflow.com/users/8715359/saptarshi-sahoo"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1530029505, "post_id": 51046627, "comment_id": 89085670, "body": "@Ian Does&#39;nt bubble sort swaps adjacent elements until the whole array is sorted...But im not swapping the adjacent element im taking a portion of the larger array and soting it and again taking  another portion of array, which contains the previous array.. and again sorting it..hence can it be concluded an Insertion Sort? After all insertion sort works like that taking a fragment of whole array sorting it using that sorted fragment to next bigger fragment containing the former fragment.."}, {"owner": {"reputation": 87, "user_id": 8715359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-HLmLiwRG0Ow/AAAAAAAAAAI/AAAAAAAAAJs/aibgUnro67k/photo.jpg?sz=128", "display_name": "Saptarshi Sahoo", "link": "https://stackoverflow.com/users/8715359/saptarshi-sahoo"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1530031536, "post_id": 51046627, "comment_id": 89086739, "body": "May I know the reaosns why my question is given a negative vote?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1530031599, "post_id": 51046627, "comment_id": 89086765, "body": "It&#39;s still an insertion sort as mentioned in @JohnBollinger&#39;s answer, but you perform the same number of operations (on average) as a bubble sort."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8715359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-HLmLiwRG0Ow/AAAAAAAAAAI/AAAAAAAAAJs/aibgUnro67k/photo.jpg?sz=128", "display_name": "Saptarshi Sahoo", "link": "https://stackoverflow.com/users/8715359/saptarshi-sahoo"}, "edited": false, "score": 0, "creation_date": 1530031003, "post_id": 51047594, "comment_id": 89086503, "body": "If i reverse the ieration for my second for-loop will it be more efficient?"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 87, "user_id": 8715359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-HLmLiwRG0Ow/AAAAAAAAAAI/AAAAAAAAAJs/aibgUnro67k/photo.jpg?sz=128", "display_name": "Saptarshi Sahoo", "link": "https://stackoverflow.com/users/8715359/saptarshi-sahoo"}, "edited": false, "score": 0, "creation_date": 1530032061, "post_id": 51047594, "comment_id": 89087014, "body": "@UzumakiSaptarshi No. Reversing the iteration order of the inner loop will have no effect on efficiency."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 87, "user_id": 8715359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-HLmLiwRG0Ow/AAAAAAAAAAI/AAAAAAAAAJs/aibgUnro67k/photo.jpg?sz=128", "display_name": "Saptarshi Sahoo", "link": "https://stackoverflow.com/users/8715359/saptarshi-sahoo"}, "edited": false, "score": 0, "creation_date": 1530034479, "post_id": 51047594, "comment_id": 89088280, "body": "@UzumakiSaptarshi, if you reverse the iteration order of the inner loop, <i>and</i> make that loop stop when it reaches the insertion position (i.e. when it first discovers it does not need to swap), then <i>yes</i>, it will be more efficient, though still of the same asymptotic complexity.  But it will still do more work in most cases than the implementation you presented first."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1530030830, "last_edit_date": 1530030830, "creation_date": 1530030510, "answer_id": 51047594, "question_id": 51046627, "link": "https://stackoverflow.com/questions/51046627/processes-for-insertion-sort/51047594#51047594", "title": "Processes for Insertion sort", "body": "<p>At each iteration, the original code you present moves each element into place by moving elements in a cycle.  For an <em>n</em>-element cycle, that involves <em>n</em>+1 assignments.</p>\n\n<p>It is possible to implement Insertion Sort by moving elements with pairwise swaps instead of in larger cycles.  It is sometimes taught that way, in fact.  This is possible because any permutation (not just cycles) can be expressed as a series of swaps.  Implementing an <em>n</em>-element cycle via swaps requires <em>n</em>-1 swaps, and each swap, being a 2-element cycle, requires 2+1 = 3 assignments.  For cycles larger than two elements, then, the approach using pairwise swaps does more work, scaling as 3*(<em>n</em>-1) as opposed to <em>n</em>+1.  That does not change the asymptotic complexity, however, as you can see by the fact that the exponent of <em>n</em> does not change.</p>\n\n<p>But note another key difference between the original code and yours: the original code scans <em>backward</em> through the list to find the insertion position, whereas you scan <em>forward</em>.  Whether you use pairwise swaps or a larger cycle, scanning backward has the advantage that you can perform the needed reordering as you go, so that once you find the insertion position, you are done.  This is one of the things that makes Insertion Sort so good among comparison sorts, and why it is especially fast for inputs that are initially nearly sorted.</p>\n\n<p>Scanning forward means that once you find the insertion position, you've only started.  You <em>then</em> have to cycle the elements.  As a result, your approach examines every element of the sorted array head on every iteration.  Additionally, when it actually performs the reordering, it does a bunch of unneeded comparisons.  It could instead use the knowledge that the head of the list started sorted, and just perform a cycle (either way) without any more comparisons.  The extra comparisons disguise the fact that the code is just performing the appropriate element cycling at that point (did <em>you</em> realize that?) and it's probably why several people mistook your implementation for a Bubble Sort.</p>\n\n<p><em>Technically</em>, yours is still an Insertion Sort, but it is an implementation that takes no advantage of the characteristics of the abstract Insertion Sort algorithm that give well-written implementations an advantage over other sorts of the same asymptotic complexity.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1530039338, "post_id": 51047942, "comment_id": 89090449, "body": "The OP&#39;s custom sort is still an Insertion Sort.  It is just a poor implementation that indeed has the characteristics you describe.  It is thus instructive: it shows that some of the advantages we often attribute to the Insertion Sort <i>algorithm</i> do not come directly from the algorithm itself, but rather from some of the implementations it affords."}], "tags": [], "owner": {"reputation": 66, "user_id": 9854044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b05f0797d8624e10196a810e6639955?s=128&d=identicon&r=PG&f=1", "display_name": "Chaman Agrawal", "link": "https://stackoverflow.com/users/9854044/chaman-agrawal"}, "is_accepted": false, "score": 1, "last_activity_date": 1530032279, "last_edit_date": 1530032279, "creation_date": 1530031827, "answer_id": 51047942, "question_id": 51046627, "link": "https://stackoverflow.com/questions/51046627/processes-for-insertion-sort/51047942#51047942", "title": "Processes for Insertion sort", "body": "<p>The main difference between insertion sort algorithm and your custom algorithm is the direction of processing.The insertion sort algorithm is moving one by one the smaller elements in range to the left side while your algorithm is one by one moving the larger elements in range to the right side.</p>\n\n<p>Another key difference is in the best case time complexity of insertion sort and your algorithm.\nThe insertion sort stops if the value &lt; arr[j] is not satisfying so it have the best case complexity of O(n){when the array is already sorted} while your algorithm always searches from index 0 to j so it takes O(n^2) steps even when the array is already sorted.</p>\n"}], "owner": {"reputation": 87, "user_id": 8715359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-HLmLiwRG0Ow/AAAAAAAAAAI/AAAAAAAAAJs/aibgUnro67k/photo.jpg?sz=128", "display_name": "Saptarshi Sahoo", "link": "https://stackoverflow.com/users/8715359/saptarshi-sahoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1530033520, "creation_date": 1530027214, "question_id": 51046627, "link": "https://stackoverflow.com/questions/51046627/processes-for-insertion-sort", "title": "Processes for Insertion sort", "body": "<p>I've been leariing sorting algorithms for couple of days. Presently i'm doing Insertion Sort. So the general algorithm is:  </p>\n\n<pre><code>void insertionSort(int N, int arr[]) {\n    int i,j;\n    int value;\n    for(i=1;i&lt;N;i++)\n    {\n        value=arr[i];\n        j=i-1;\n        while(j&gt;=0 &amp;&amp; value&lt;arr[j])\n        {\n            arr[j+1]=arr[j];\n            j=j-1;\n        }\n        arr[j+1]=value;\n    }\n    for(j=0;j&lt;N;j++)\n    {\n        printf(\"%d \",arr[j]);\n    }\n\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Now i've done this:</p>\n\n<pre><code>void print_array(int arr_count, int* arr){\n        int i;\n        for (i=0;i&lt;arr_count;i++){\n                printf(\"%d \",arr[i]);\n        }\n        printf(\"\\n\");\n\n    }\n\n    void swap(int* m, int* n){\n        int t = 0;\n        t = *m;\n        *m = *n;\n        *n = t;\n    }\n\n    void insertionSort(int arr_count, int* arr) {\n        int i, j;\n\n        for(i = 0;i&lt;arr_count;i++){\n            for (j=0;j&lt;i;j++){\n                if (arr[i] &lt; arr[j]){\n                    swap(arr+i, arr+j); \n                  }\n            }\n            //if (i!=0)\n            //print_array(arr_count, arr);\n        }\n\n    print_array(arr_count, arr);\n    }\n</code></pre>\n\n<p>Now, my question is whats the diffrence between my custom approach and the traditional appraoch.Both have N<sup>2</sup> complexity....<br>\nPlease help..<br>\nThanks in advance</p>\n"}, {"tags": ["c", "linux", "filesystems", "inotify"], "answers": [{"tags": [], "owner": {"reputation": 4264, "user_id": 2111737, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cbb6d8cbe739789803ace7db751e3ef?s=128&d=identicon&r=PG", "display_name": "Lapsio", "link": "https://stackoverflow.com/users/2111737/lapsio"}, "is_accepted": false, "score": 0, "last_activity_date": 1530029559, "creation_date": 1530029559, "answer_id": 51047323, "question_id": 51046507, "link": "https://stackoverflow.com/questions/51046507/inotify-rm-watch-always-returns-einval/51047323#51047323", "title": "inotify_rm_watch always returns EINVAL", "body": "<p><code>inotify</code> removes watches from deleted directories on its own and throws <code>EINVAL</code> if one tries to explicitly remove watch from deleted directory. In conjunction with fact that inotify event does not contain <code>wd</code> of removed child and that <code>IN_IGNORED</code> flag is contained in <code>IN_DELETE</code> event of parent directory rather than <code>IN_DELETE_SELF</code> of actual directory it's insanely inconvenient.</p>\n"}], "owner": {"reputation": 4264, "user_id": 2111737, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cbb6d8cbe739789803ace7db751e3ef?s=128&d=identicon&r=PG", "display_name": "Lapsio", "link": "https://stackoverflow.com/users/2111737/lapsio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530029559, "creation_date": 1530026799, "question_id": 51046507, "link": "https://stackoverflow.com/questions/51046507/inotify-rm-watch-always-returns-einval", "title": "inotify_rm_watch always returns EINVAL", "body": "<p>I have following two functions:</p>\n\n<pre><code>static int MessAttrManager_inotifyUnregister(MessPropertyManager* base, int wd){\n  MessAttrManager* self = base-&gt;_derived;\n  int ret;\n\n  printf(\"INOTIFY REMOV %d\\n\",wd);\n  if ((ret = inotify_rm_watch(self-&gt;inotify.descriptor, wd)) &lt; 0)\n    return ret;\n  printf(\"INOTIFY REMOV END %d\\n\",wd);\n\n  return 0;\n}\n\nstatic int MessAttrManager_inotifyRegister(MessPropertyManager* base, char* dir, long flags){\n  MessAttrManager* self = base-&gt;_derived;\n  int wd, ret;\n\n  printf(\"INOTIFY ADD START %s\\n\",dir);\n  if ((wd = inotify_add_watch(self-&gt;inotify.descriptor, dir, flags)) &lt; 0)\n    return wd;\n  printf(\"INOTIFY ADD %d %s\\n\",wd,dir);\n\n  return 0;\n}\n</code></pre>\n\n<p>They're the only pieces of code that use <code>inotify_rm/add_watch</code> In logs I can clearly see that watch is created successfully by <code>MessAttrManager_inotifyRegister</code>. Also events are properly detected. I also see that exactly the same watch descriptor is being removed by <code>MessAttrManager_inotifyUnregister</code>. However second function almost always returns <code>EINVAL</code>. I have nested hierarchy of watched directories (recursive) and <code>inotify_rm_watch</code> only executes successfully on last directory (root) when I'm recursively removing all watches.</p>\n\n<p>Is it standard behavior for nested watches?</p>\n"}]