[{"tags": ["c", "lldb", "ioctl"], "answers": [{"tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 2, "last_activity_date": 1472689108, "creation_date": 1472689108, "answer_id": 39260916, "question_id": 39260719, "link": "https://stackoverflow.com/questions/39260719/lldb-ioctl-problems/39260916#39260916", "title": "LLDB ioctl problems", "body": "<p>lldb uses pty's to handle program input &amp; output, but it seems like a bug that they aren't set to track lldb's terminal size.  Please file that with the lldb.llvm.org bug tracker.  </p>\n\n<p>If you are on OS X, you can run your app in a separate Terminal window (which is probably what you want if you're doing anything fancy with the terminal anyway) by launching it like:</p>\n\n<p>(lldb) process launch -tty</p>\n\n<p>I don't know if this has been implemented on Linux yet or not.</p>\n"}], "owner": {"reputation": 1398, "user_id": 3743152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b86dfb1bb1df3238ef025a6a96d0fc?s=128&d=identicon&r=PG&f=1", "display_name": "Lux", "link": "https://stackoverflow.com/users/3743152/lux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "accepted_answer_id": 39260916, "answer_count": 1, "score": 1, "last_activity_date": 1472689108, "creation_date": 1472687513, "question_id": 39260719, "link": "https://stackoverflow.com/questions/39260719/lldb-ioctl-problems", "title": "LLDB ioctl problems", "body": "<p>I have a program in which I use <code>ioctl(0, TIOCGWINSZ, (struct winsize *))</code> to find the size of the terminal window the program is running in. When I run it in the terminal, it works fine, but when I use LLDB, <code>ioctl</code> gives a window size of 0 x 0.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\n    struct winsize tty_window_size;\n\n    ioctl(STDOUT_FILENO, TIOCGWINSZ, &amp;tty_window_size);\n\n    printf(\"Rows: %i, Cols: %i\\n\", tty_window_size.ws_row, tty_window_size.ws_col);\n\n    return 0;\n}\n</code></pre>\n\n<p>Terminal transcript:</p>\n\n<pre><code>$ clang test.c\n$ ./a.out\nRows: 24, Cols: 80\n$ lldb ./a.out\n(lldb) target create \"./a.out\"\nCurrent executable set to './a.out' (x86_64).\n(lldb) r\nProcess 32763 launched: './a.out' (x86_64)\nRows: 0, Cols: 0\nProcess 32763 exited with status = 0 (0x00000000)\n</code></pre>\n\n<p>Does anybody why this happens, or a way to fix this?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "math", "sse", "simd", "avx2"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1472687296, "post_id": 39260585, "comment_id": 65857212, "body": "That&#39;s just the classic &quot;permutation inversion&quot;, <code>dst[src[i]] = i</code>"}, {"owner": {"reputation": 85, "user_id": 2250147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3630bb204c635db95659cc8747a32117?s=128&d=identicon&r=PG", "display_name": "eyepatch", "link": "https://stackoverflow.com/users/2250147/eyepatch"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1472690569, "post_id": 39260585, "comment_id": 65858005, "body": "Right. But your code requires the ability to set in a destination-based manner. Since I&#39;m operating in AVX2 registers. I can&#39;t do that. I have working C code that does it almost exactly as you say, but I need to be able to transform the indices without being able to do a destination-based permutation, like you suggest."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1472695164, "post_id": 39260585, "comment_id": 65859006, "body": "Your <code>a[i] = a[idx[i]] for i in 0..7</code> didn&#39;t correctly describe VPERMD&#39;s operation, because it implied that changes to <code>a</code> would feed back into the <code>a[idx[i]]</code> for later elements.  e.g. The original <code>a[0]</code> would always be destroyed right away, unless <code>idx[0] = 0</code>.  I think your example is still sane after my edit to correct that bug (or was assuming that behaviour the whole time)."}, {"owner": {"reputation": 85, "user_id": 2250147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3630bb204c635db95659cc8747a32117?s=128&d=identicon&r=PG", "display_name": "eyepatch", "link": "https://stackoverflow.com/users/2250147/eyepatch"}, "edited": false, "score": 0, "creation_date": 1472748372, "post_id": 39260585, "comment_id": 65888434, "body": "Thanks for the edit. I did understand the behavior, but I didn&#39;t describe it correctly."}], "answers": [{"comments": [{"owner": {"reputation": 711, "user_id": 3852630, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/de9e1d83fb02c2fc24c488f3aa17b2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/3852630/ralf"}, "edited": false, "score": 0, "creation_date": 1608188103, "post_id": 39261949, "comment_id": 115507677, "body": "Thanks for the idea with the scatter operation. I added an example as answer."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 2, "last_activity_date": 1608219374, "last_edit_date": 1608219374, "creation_date": 1472698194, "answer_id": 39261949, "question_id": 39260585, "link": "https://stackoverflow.com/questions/39260585/converting-from-source-based-indices-to-destination-based-indices/39261949#39261949", "title": "Converting from Source-based Indices to Destination-based Indices", "body": "<p>I guess you're implicitly saying that you can't modify your code to calculate source-based indices in the first place?  I can't think of anything you can do with x86 SIMD, other than AVX512 scatter instructions that take dst-based indices.  (But those are not very fast on current CPUs, even compared to gather loads.  <a href=\"https://uops.info/\" rel=\"nofollow noreferrer\">https://uops.info/</a>)</p>\n<p>Storing to memory, inverting, and reloading a vector might actually be best.  (Or transferring to integer registers directly, not through memory, maybe after a vextracti128 / packusdw so you only need two 64-bit transfers from vector to integer regs: movq and pextrq).</p>\n<p>But anyway, then use them as indices to store a counter into an array in memory, and reload that as a vector.  This is still slow and ugly, and includes a store-forwarding failure delay.  So it's probably worth your while to change your index-generating code to generate source-based shuffle vectors if at all possible.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1608189497, "post_id": 65335899, "comment_id": 115508089, "body": "Have you benchmarked this against anything?  Scatter instructions are not very fast; IDK if that was a good suggestion I made 4 years ago.  But they&#39;re not terrible, and this might be better than any other option.  Certainly it&#39;s much worse than a shuffle if you <i>did</i> have the right kind of indices."}, {"owner": {"reputation": 711, "user_id": 3852630, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/de9e1d83fb02c2fc24c488f3aa17b2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/3852630/ralf"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1608195088, "post_id": 65335899, "comment_id": 115510201, "body": "@PeterCordes: I added another answer with a benchmark. Apparently there&#39;s no performance advantage of using the scatter."}], "tags": [], "owner": {"reputation": 711, "user_id": 3852630, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/de9e1d83fb02c2fc24c488f3aa17b2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/3852630/ralf"}, "is_accepted": false, "score": 0, "last_activity_date": 1608304310, "last_edit_date": 1608304310, "creation_date": 1608188027, "answer_id": 65335899, "question_id": 39260585, "link": "https://stackoverflow.com/questions/39260585/converting-from-source-based-indices-to-destination-based-indices/65335899#65335899", "title": "Converting from Source-based Indices to Destination-based Indices", "body": "<p>I had the same problem, but in the opposite direction: destination indices were easy to compute, but source indices were required for the application of SIMD permute instructions. Here's a solution for AVX-512 using a scatter instruction as suggested by Peter Cordes; it should also apply to the opposite direction:</p>\n<pre><code>__m512i ident = _mm512_set_epi32(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0);\n__m512i perm  = _mm512_set_epi32(7,9,3,0,5,8,13,11,4,2,15,1,12,6,10,14);  \nuint32_t id[16], in[16], out[16];\n_mm512_storeu_si512(id, ident);\nfor (int i = 0; i &lt; 16; i++) printf(&quot;%2d &quot;, id[i]); puts(&quot;&quot;);\n_mm512_storeu_si512(in, perm);\nfor (int i = 0; i &lt; 16; i++) printf(&quot;%2d &quot;, in[i]); puts(&quot;&quot;);\n_mm512_i32scatter_epi32(out, perm, ident, 4);\nfor (int i = 0; i &lt; 16; i++) printf(&quot;%2d &quot;, out[i]); puts(&quot;&quot;);\n</code></pre>\n<p>An identity mapping <code>ident</code> is distributed to the <code>out</code> array according to the index pattern <code>perm</code>. The idea is basically the same as the one described for <a href=\"https://en.wikipedia.org/wiki/Permutation_group#Neutral_element_and_inverses\" rel=\"nofollow noreferrer\">inverting a permutation</a>. Here's the output:</p>\n<pre><code> 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 \n14 10  6 12  1 15  2  4 11 13  8  5  0  3  9  7 \n12  4  6 13  7 11  2 15 10 14  1  8  3  9  0  5 \n</code></pre>\n<p>Note that I have permutations in the mathematical sense (no duplicates). With duplicates, the <code>out</code> store needs to be initialized since some elements could remain unwritten.</p>\n<p>I also see no easy way to accomplish this within registers. I thought about cycling through the given permutation by repeatedly applying a permute instruction. As soon as the identity pattern is reached, the one before is the inverse permutation (this goes back to the idea by EOF on <a href=\"https://stackoverflow.com/questions/45376193/sse-avx-equivalent-for-neon-vuzp\">unzip operations</a>). However, the cycles can be long. The maximum number of cycles that may be required is given by <a href=\"https://en.wikipedia.org/wiki/Landau%27s_function\" rel=\"nofollow noreferrer\">Landau's function</a> which for 16 elements is 140, see this <a href=\"https://oeis.org/A000793\" rel=\"nofollow noreferrer\">table</a>. I could show that it possible to shorten this to a maximum of 16 if the individual permutation subcycles are frozen as soon as they coincide with the identity elements. The shortens the average from 28 to 9 permute instructions for a test on random permutation patterns. However, it is still not an efficient solution (much slower than the scatter instruction in the throughput benchmark described in my other answer).</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1608219695, "post_id": 65337353, "comment_id": 115521615, "body": "With the reload of output as the permutation for the next iteration, you&#39;re measuring latency, not throughput.  Including the store-forwarding stall from doing the reload right away.  That might reflect some use-cases, but measuring throughput might be interesting, too."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1608219847, "post_id": 65337353, "comment_id": 115521710, "body": "That&#39;s 10.765u = user-space seconds, right? Not 10.765u = microseconds.  10 sec is plenty long to hide any warm-up effects and other overhead so that&#39;s fine."}, {"owner": {"reputation": 711, "user_id": 3852630, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/de9e1d83fb02c2fc24c488f3aa17b2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/3852630/ralf"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1608271725, "post_id": 65337353, "comment_id": 115537607, "body": "@PeterCordes: What would be a code modification to measure throughput? Apply this to an array of (randomly generated) permutation patterns? / The time measurements are from the <code>tcsh</code> builtin <code>time</code> command and the <code>u</code> time is user space time in seconds."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1608272852, "post_id": 65337353, "comment_id": 115537825, "body": "Easy in asm: run the instructions <i>without</i> feeding the result back as a dependency for the next iteration.  So out-of-order exec can work its magic and overlap multiple iterations.  Getting a C compiler to emit asm like that may require some careful use of <code>volatile</code> vars to force a load, or <code>asm(&quot;&quot; : &quot;+x&quot;(vector))</code> to forget anything it knows about the value of a vector variable.  e.g. like <code>Benchmark::DoNotOptimize</code> or various other tricks.  Then you check the generated asm to make sure it&#39;s looks realistic for what you want to measure."}, {"owner": {"reputation": 711, "user_id": 3852630, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/de9e1d83fb02c2fc24c488f3aa17b2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/3852630/ralf"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1608273869, "post_id": 65337353, "comment_id": 115538020, "body": "@PeterCordes: I included a modified benchmark in my answer. Do you think that is related to throughput?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1608274287, "post_id": 65337353, "comment_id": 115538145, "body": "Yeah, independent work on independent array elements is throughput-dependent, letting OoO exec hide latency.  Your array is small enough that it will fit in L2 cache, but 1000 * 64 bytes is larger than 32kiB L1d.  (Or even the 48kiB L1d on Ice Lake).   But it&#39;s small enough that page faults won&#39;t be a complicating factor.  You may <i>want</i> that to simulate the case where things aren&#39;t always hot in L1d, and updating pointers in a loop, so this is probably good."}], "tags": [], "owner": {"reputation": 711, "user_id": 3852630, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/de9e1d83fb02c2fc24c488f3aa17b2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ralf", "link": "https://stackoverflow.com/users/3852630/ralf"}, "is_accepted": false, "score": 1, "last_activity_date": 1608273819, "last_edit_date": 1608273819, "creation_date": 1608195028, "answer_id": 65337353, "question_id": 39260585, "link": "https://stackoverflow.com/questions/39260585/converting-from-source-based-indices-to-destination-based-indices/65337353#65337353", "title": "Converting from Source-based Indices to Destination-based Indices", "body": "<p>To benchmark the solution, I modified the code from my other answer to compare the performance of the scatter instruction (<code>USE_SCATTER</code> defined) with a store and sequential permute (<code>USE_SCATTER</code> undefined). I had to copy the result back to the permutation pattern <code>perm</code> in order to prevent the compiler from optimizing the loop body away:</p>\n<pre><code>#ifdef TEST_SCATTER\n  #define REPEATS 1000000001\n  #define USE_SCATTER\n  \n  __m512i ident = _mm512_set_epi32(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0);\n  __m512i perm  = _mm512_set_epi32(7,9,3,0,5,8,13,11,4,2,15,1,12,6,10,14);  \n  uint32_t outA[16] __attribute__ ((aligned(64)));\n  uint32_t id[16], in[16];\n  _mm512_storeu_si512(id, ident);\n  for (int i = 0; i &lt; 16; i++) printf(&quot;%2d &quot;, id[i]); puts(&quot;&quot;);\n  _mm512_storeu_si512(in, perm);\n  for (int i = 0; i &lt; 16; i++) printf(&quot;%2d &quot;, in[i]); puts(&quot;&quot;);\n#ifdef USE_SCATTER\n  puts(&quot;scatter&quot;);\n  for (long t = 0; t &lt; REPEATS; t++) {\n    _mm512_i32scatter_epi32(outA, perm, ident, 4);\n    perm = _mm512_load_si512(outA);\n  }\n#else\n  puts(&quot;store &amp; permute&quot;);\n  uint32_t permA[16] __attribute__ ((aligned(64)));\n  for (long t = 0; t &lt; REPEATS; t++) {\n    _mm512_store_si512(permA, perm);\n    for (int i = 0; i &lt; 16; i++) outA[permA[i]] = i;\n    perm = _mm512_load_si512(outA);    \n  }\n#endif\n  for (int i = 0; i &lt; 16; i++) printf(&quot;%2d &quot;, outA[i]); puts(&quot;&quot;);\n\n#endif\n</code></pre>\n<p>Here's the output for the two cases (using the builtin <code>time</code> command of <code>tcsh</code>, the <code>u</code> output is user-space time in seconds):</p>\n<pre><code> 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 \n14 10  6 12  1 15  2  4 11 13  8  5  0  3  9  7 \nstore &amp; permute\n12  4  6 13  7 11  2 15 10 14  1  8  3  9  0  5 \n10.765u 0.001s 0:11.22 95.9%    0+0k 0+0io 0pf+0w\n\n 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 \n14 10  6 12  1 15  2  4 11 13  8  5  0  3  9  7 \nscatter\n12  4  6 13  7 11  2 15 10 14  1  8  3  9  0  5 \n10.740u 0.000s 0:11.19 95.9%    0+0k 40+0io 0pf+0w\n</code></pre>\n<p>The runtime is about the same (Intel(R) Xeon(R) W-2125 CPU @ 4.00GHz, clang++-6.0, <code>-O3 -funroll-loops -march=native</code>). I checked the assembly code generated. With <code>USE_SCATTER</code> defined, the compiler generates <code>vpscatterdd</code> instructions, without it generates complex code using <code>vpextrd</code>, <code>vpextrq</code>, and <code>vpextracti32x4</code>.</p>\n<hr />\n<p>Edit: I was worried that the compiler may have found a specific solution for the fixed permutation pattern I used. So I replaced it with a randomly generated pattern from <code>std::random_shuffe()</code>, but the time measurements are about the same.</p>\n<hr />\n<p>Edit: Following the comment by Peter Cordes,  I wrote a modified benchmark that hopefully measures something like throughput:</p>\n<pre><code>  #define REPEATS 1000000\n  #define ARRAYSIZE 1000\n  #define USE_SCATTER\n  \n  std::srand(unsigned(std::time(0)));\n  // build array with random permutations\n  uint32_t permA[ARRAYSIZE][16] __attribute__ ((aligned(64)));\n  for (int i = 0; i &lt; ARRAYSIZE; i++)\n    _mm512_store_si512(permA[i], randPermZMM());\n  // vector register\n  __m512i perm;\n#ifdef USE_SCATTER\n  puts(&quot;scatter&quot;);\n  __m512i ident = _mm512_set_epi32(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0);\n  for (long t = 0; t &lt; REPEATS; t++)\n    for (long i = 0; i &lt; ARRAYSIZE; i++) {\n      perm = _mm512_load_si512(permA[i]);\n      _mm512_i32scatter_epi32(permA[i], perm, ident, 4);\n    }\n#else\n  uint32_t permAsingle[16] __attribute__ ((aligned(64)));\n  puts(&quot;store &amp; permute&quot;);\n  for (long t = 0; t &lt; REPEATS; t++)\n    for (long i = 0; i &lt; ARRAYSIZE; i++) {\n      perm = _mm512_load_si512(permA[i]);\n      _mm512_store_si512(permAsingle, perm);\n      uint32_t *permAVec = permA[i];\n      for (int e = 0; e &lt; 16; e++)\n    permAVec[permAsingle[e]] = e;\n    }\n#endif\n  FILE *f = fopen(&quot;testperm.dat&quot;, &quot;w&quot;);\n  fwrite(permA, ARRAYSIZE, 64, f);\n  fclose(f);\n</code></pre>\n<p>I use an array of permutation patterns which are modified sequentially without dependencies.</p>\n<p>These are the results:</p>\n<pre><code>scatter\n4.241u 0.002s 0:04.26 99.5% 0+0k 80+128io 0pf+0w\n\nstore &amp; permute\n5.956u 0.002s 0:05.97 99.6% 0+0k 80+128io 0pf+0w\n</code></pre>\n<p>So throughput is better when using the scatter command.</p>\n"}], "owner": {"reputation": 85, "user_id": 2250147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3630bb204c635db95659cc8747a32117?s=128&d=identicon&r=PG", "display_name": "eyepatch", "link": "https://stackoverflow.com/users/2250147/eyepatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1608304310, "creation_date": 1472686507, "last_edit_date": 1472694755, "question_id": 39260585, "link": "https://stackoverflow.com/questions/39260585/converting-from-source-based-indices-to-destination-based-indices", "title": "Converting from Source-based Indices to Destination-based Indices", "body": "<p>I'm using AVX2 instructions in some C code.</p>\n\n<p>The <a href=\"http://www.felixcloutier.com/x86/VPERMD.html\" rel=\"nofollow\">VPERMD</a> instruction takes two 8-integer vectors <code>a</code> and <code>idx</code> and generates a third one, <code>dst</code>, by permuting <code>a</code> based on <code>idx</code>. This seems equivalent to <code>dst[i] = a[idx[i]] for i in 0..7</code>. I'm calling this source based, because the move is indexed based on the source.</p>\n\n<p>However, I have my calculated indices in destination based form. This is natural for setting an array, and is equivalent to <code>dst[idx[i]] = a[i] for i in 0..7</code>.</p>\n\n<p>How can I convert from source-based form to destination-based form? An example test case is: </p>\n\n<pre><code>{2 1 0 5 3 4 6 7}    source-based form. \n{2 1 0 4 5 3 6 7}    destination-based equivalent\n</code></pre>\n\n<p>For this conversion, I'm staying in ymm registers, so that means that destination-based solutions don't work. Even if I were to insert each separately, since it only operates on constant indexes, you can't just set them.</p>\n"}, {"tags": ["c", "file", "io"], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 8, "last_activity_date": 1472685513, "creation_date": 1472685513, "answer_id": 39260454, "question_id": 39260437, "link": "https://stackoverflow.com/questions/39260437/c-code-for-deleting-a-line/39260454#39260454", "title": "C Code for Deleting a Line", "body": "<p>Assignment has lower priority than not-equal, so:</p>\n\n<pre><code>read_char = fgetc(fp) != '\\n'\n</code></pre>\n\n<p>results in <code>read_char</code> getting a <code>0</code> or <code>1</code>, the result of comparing the result of the <code>fgetc()</code> call against <code>'\\n'</code>.</p>\n\n<p>You need parentheses:</p>\n\n<pre><code> while((read_char = fgetc(fp)) != '\\n')\n</code></pre>\n\n<p>which will assign the <code>fgetc()</code> result to <code>read_char</code> before comparing with <code>'\\n'</code>.</p>\n"}], "owner": {"reputation": 334, "user_id": 2480429, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc29c53590f9b912523580873acfc40e?s=128&d=identicon&r=PG", "display_name": "C K", "link": "https://stackoverflow.com/users/2480429/c-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 39260454, "answer_count": 1, "score": 2, "last_activity_date": 1472685513, "creation_date": 1472685370, "question_id": 39260437, "link": "https://stackoverflow.com/questions/39260437/c-code-for-deleting-a-line", "title": "C Code for Deleting a Line", "body": "<p>I am a C noob, and I was trying to make a program to delete a specific line. For this, I chose to copy the contents of the source file, skipping the line intended for deletion. In my original code, I wrote:</p>\n\n<pre><code> while(read_char = fgetc(fp) != '\\n')   //code to move the cursor position to end of line\n{\n    printf(\"%c\",read_char);   //temporary code to see the skipped characters\n}\n</code></pre>\n\n<p>which gave me lots of smileys.</p>\n\n<p>In the end I found the code which gave the intended output:</p>\n\n<pre><code>read_char=fgetc(fp);\nwhile(read_char != '\\n')   //code to move the cursor position to end of line\n{\n    printf(\"%c\",read_char);   //temporary code to see the skipped characters\n    read_char=fgetc(fp);\n}\n</code></pre>\n\n<p>But what is the actual difference between these two codes?</p>\n"}, {"tags": ["python", "c", "arrays", "input"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1472685672, "post_id": 39260427, "comment_id": 65856823, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1450393/how-do-you-read-from-stdin-in-python\">How do you read from stdin in Python?</a>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1472685713, "post_id": 39260427, "comment_id": 65856836, "body": "If reading from stdin is not what you need to know then please be more specific in describing what it is that you don&#39;t understand how to do."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1472688927, "post_id": 39260427, "comment_id": 65857632, "body": "You could preallocate a 3d list and populate it, but its not very pythonic and difficult to get right. I think you should probably just build the lists as you iterate and it will be far easier to reason about."}], "answers": [{"comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1472764454, "post_id": 39261012, "comment_id": 65896289, "body": "btw, to avoid <code>IndexError</code> on the last line <code>arr[i][j][k]</code> should be <code>arr[k][i][j]</code> to match the order of the loops variables"}], "tags": [], "owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1472779804, "last_edit_date": 1472779804, "creation_date": 1472689889, "answer_id": 39261012, "question_id": 39260427, "link": "https://stackoverflow.com/questions/39260427/input-to-a-three-dimensional-array-in-python/39261012#39261012", "title": "Input to a three dimensional array in python", "body": "<p>you could use numpy. example assuming you want float64s. change types add needed </p>\n\n<pre><code>import numpy as np\n\narr = np.empty([2, 2, 6], np.float64)\nfor k in range(2):\n    for i in range(2):\n        for j in range(6):\n            print(\"Year: \" + str(k) + \" Province: \" + str(i) + \" Month: \" + str(j) + \": \")\n            arr[k][i][j] = np.float64(raw_input())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "is_accepted": false, "score": 0, "last_activity_date": 1472768308, "creation_date": 1472768308, "answer_id": 39281712, "question_id": 39260427, "link": "https://stackoverflow.com/questions/39260427/input-to-a-three-dimensional-array-in-python/39281712#39281712", "title": "Input to a three dimensional array in python", "body": "<p>If you want to do that in just standard, native python this should work:</p>\n\n<pre><code>import pprint # To display \"3d array\" in a recognizable format \nA = [[[0 for _ in range(2)] for _ in range(2)] for _ in range(6)]\n\nfor k in range(2):\n    for i in range(2):\n        for j in range(6):\n            print(\"Year: {0} Province: {1} Month: {2}\".format(k,i,j))\n            A[j][i][k] = raw_input()\n\npprint.pprint(A) # for an easy to read 2x2x6 format display\n</code></pre>\n\n<p>After inputting some numbers (eg. 1-24), gives output:   </p>\n\n<pre><code>[[['1', '13'], ['7', '19']],  \n[['2', '14'], ['8', '20']],  \n[['3', '15'], ['9', '21']],  \n[['4', '16'], ['10', '22']],  \n[['5', '17'], ['11', '23']],  \n[['6', '18'], ['12', '24']]]  \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6780877"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472779804, "creation_date": 1472685314, "last_edit_date": 1472686701, "question_id": 39260427, "link": "https://stackoverflow.com/questions/39260427/input-to-a-three-dimensional-array-in-python", "title": "Input to a three dimensional array in python", "body": "<p>I'm new at coding in python and I was wondering if there is some way I can transcript this code in C to python:</p>\n\n<pre><code>for (K=1; K&lt;3; K++)\n    for (I=0; I&lt;3; I++)\n        for (J=0; J&lt;7; J++){\n            printf(\"Year: %d\\tProvince: %d\\tMonth: %d: \", K, I, J);\n            scanf(\"%f\", &amp;A[I][J][K]);\n        }\n</code></pre>\n\n<p>This is all I have done so far, the only thing missing is how to input data in the three dimensional array</p>\n\n<pre><code>for k in range(1,3):\n    for i in range(1,3):\n        for j in range(1,7):\n            print(\"Year: \" + str(k) + \" Province: \" + str(i) + \" Month: \" + str(j) + \": \")\n</code></pre>\n"}, {"tags": ["c", "gcc", "x86"], "answers": [{"tags": [], "owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "is_accepted": false, "score": 0, "last_activity_date": 1472685132, "creation_date": 1472685132, "answer_id": 39260400, "question_id": 39260352, "link": "https://stackoverflow.com/questions/39260352/gcc-how-do-i-change-the-base-adress/39260400#39260400", "title": "GCC: How do i change the base adress", "body": "<p>You have to specify a <code>linker script</code> to a linker in order to make a custom sections layout. Check with <code>binutils</code> docs at <a href=\"https://sourceware.org/binutils/docs/ld/Scripts.html\" rel=\"nofollow\">SourceWare site</a> </p>\n"}], "owner": {"reputation": 351, "user_id": 6427897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccbf3b5709e92f8fa860f74a67b0b64a?s=128&d=identicon&r=PG&f=1", "display_name": "SeeSoftware", "link": "https://stackoverflow.com/users/6427897/seesoftware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "closed_date": 1472686355, "answer_count": 1, "score": 0, "last_activity_date": 1472685132, "creation_date": 1472684766, "question_id": 39260352, "link": "https://stackoverflow.com/questions/39260352/gcc-how-do-i-change-the-base-adress", "closed_reason": "Duplicate", "title": "GCC: How do i change the base adress", "body": "<p>How do i change the base adress on GCC like in assembly if you would do:  </p>\n\n<pre><code>org &lt;address&gt;\n</code></pre>\n\n<p>im compileing the source into an object and then use \"objcopy\" to get only the .text field out of it and put it into a binary file to execute (im creating a C kernel)  </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 2, "creation_date": 1472683732, "post_id": 39260168, "comment_id": 65856299, "body": "Please share your actual code. This has at least one syntax error. (And please fix your code indentation!)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472683808, "post_id": 39260168, "comment_id": 65856318, "body": "<code>i &lt;= size</code> --&gt; <code>i &lt; size</code>"}, {"owner": {"reputation": 25, "user_id": 6780601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52552d9da92da1c564fe8c69eabefc0?s=128&d=identicon&r=PG&f=1", "display_name": "Nack", "link": "https://stackoverflow.com/users/6780601/nack"}, "edited": false, "score": 0, "creation_date": 1472684149, "post_id": 39260168, "comment_id": 65856420, "body": "Sorry, I updated it now"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6780601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52552d9da92da1c564fe8c69eabefc0?s=128&d=identicon&r=PG&f=1", "display_name": "Nack", "link": "https://stackoverflow.com/users/6780601/nack"}, "edited": false, "score": 0, "creation_date": 1472684789, "post_id": 39260230, "comment_id": 65856594, "body": "Oh, I see. Thank you for your comment! I&#39;ll try it out"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 25, "user_id": 6780601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52552d9da92da1c564fe8c69eabefc0?s=128&d=identicon&r=PG&f=1", "display_name": "Nack", "link": "https://stackoverflow.com/users/6780601/nack"}, "edited": false, "score": 0, "creation_date": 1472686819, "post_id": 39260230, "comment_id": 65857113, "body": "@Nack Excellent! Go ahead and accept this answer then."}, {"owner": {"reputation": 25, "user_id": 6780601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52552d9da92da1c564fe8c69eabefc0?s=128&d=identicon&r=PG&f=1", "display_name": "Nack", "link": "https://stackoverflow.com/users/6780601/nack"}, "edited": false, "score": 0, "creation_date": 1472689306, "post_id": 39260230, "comment_id": 65857716, "body": "Absolutely! Thanks!"}], "tags": [], "owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "is_accepted": true, "score": 2, "last_activity_date": 1472684432, "last_edit_date": 1472684432, "creation_date": 1472683930, "answer_id": 39260230, "question_id": 39260168, "link": "https://stackoverflow.com/questions/39260168/writing-values-in-a-2-dimensional-array-in-c/39260230#39260230", "title": "Writing values in a 2 dimensional array in c", "body": "<p>Everywhere you have <code>&lt;= size</code>, you actually want <code>&lt; size</code>. This is because C uses 0-based indexes. That means if you have an array with 5 elements, the indexes are 0, 1, 2, 3, 4. In a loop like <code>for (int i = 0; i &lt;= 5; i++)</code>, <code>i</code> would get the values 0, 1, 2, 3, 4, 5. That last one is an invalid index into the array. Using <code>i &lt; 5</code> fixes the problem (ensures <code>i</code> stops before it reaches 5).</p>\n\n<p>Fixed and cleaned up version of your code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid printArray(int size, int array[][size]) {\n    for (int i = 0; i &lt; size; i++) {\n        printf(\"\\n\");\n        for (int j = 0; j &lt; size; j++) {\n            printf(\"%d \", array[i][j]);\n        }\n    } \n    printf(\"\\n\\n\");\n}\n\nint main() {\n    int size = 8;\n    int fullArray[size][size];\n\n    for (int i = 0; i &lt; size; i++) {\n        for (int j = 0; j &lt; size; j++) {\n            fullArray[i][j] = 0;\n        }\n    } \n\n    printf(\"Enter values in row 1 column 1, and we will work our way from there. Here's the playing board. \\n\\n\");\n\n    printArray(size, fullArray);\n\n    for (int i = 0; i &lt; size; i++) {\n        for (int j = 0; j &lt; size; j++) {\n            printf(\"Enter first value (press 0 and ENTER to skip a box, or -1 to cancel game): \");\n\n            int number;\n            scanf(\"%d\", &amp;number);\n            if(number == -1) {\n                return 0;\n            }\n\n            fullArray[i][j] = number;\n            printArray(size, fullArray);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>To clarify, this is fixed version of the original code in the question. The new code is a bit different, but I think the issue is the same.</p>\n"}], "owner": {"reputation": 25, "user_id": 6780601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52552d9da92da1c564fe8c69eabefc0?s=128&d=identicon&r=PG&f=1", "display_name": "Nack", "link": "https://stackoverflow.com/users/6780601/nack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 39260230, "answer_count": 1, "score": -1, "last_activity_date": 1472685153, "creation_date": 1472683571, "last_edit_date": 1472685153, "question_id": 39260168, "link": "https://stackoverflow.com/questions/39260168/writing-values-in-a-2-dimensional-array-in-c", "title": "Writing values in a 2 dimensional array in c", "body": "<p>Being new to C, and this website, I'm unfamiliar with this problem I'm having. I have a 2 dimensional array with [8][8] elements. I'm trying to get the user to enter numbers into the array until finished. The program is far from finished, but I'm stuck on this problem before I can move on. Basically I use a for loop to let the user enter into each element. However, when the first row is complete, it overwrites it's last value onto the first column second row element spot. How can I prevent this from happening: Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint Check_rules();\n\nvoid Print_Array(int array[][8], int size)\n{\n  int i, j;\n  for (i = 0; i &lt;= size; i++)\n  {\n    printf(\"\\n\");\n    for (j = 0; j &lt;= size; j++)\n    {\n      printf(\"%d \",array[i][j]);\n    }\n  } \n  printf(\"\\n\\n\");\n}\n\nint main()\n{\n  int size = 8;\n  int i, j;\n\n\n  int fullArray[size][size];\n  int grid1[3][3];\n  int grid2[3][3];\n  int grid3[3][3];\n  int grid4[3][3];\n  int grid5[3][3];\n  int grid6[3][3];\n  int grid7[3][3];\n  int grid8[3][3];\n  int grid9[3][3]; \n\n  for (i = 0; i &lt;= size; i++)\n  {\n    for (j = 0; j &lt;= size; j++)\n      fullArray[i][j] = 0;\n\n  } \n\n  printf(\"Want to play a game? Enter values 1-9 starting in row 1 column 1, \\nand we will work our way from there. Here's the playing board.\\nIt's Sudoku, so follow the rules of the game.\\n\\n\");\n\n  for (i = 0; i &lt;= size; i++)\n  {\n    printf(\"\\n\");\n    for (j = 0; j &lt;= size; j++)\n      printf(\"%d \",fullArray[i][j]);\n\n  } \n  printf(\"\\n\\n\");\n\n  int tmp;\n  char *keeper = (\" \");//space for marker\n\n  for (i = 0; i &lt;= size; i++)\n  {\n\n    for (j = 0; j &lt;= size; j++)\n    {\n      printf(\"Enter first value(press 0 and ENTER to skip a box, \\nand -1 to cancel    game): \");\n\n      scanf(\"%d\", &amp;tmp);\n      if(tmp == -1)\n        return 0;\n\n      fullArray[i][j] = tmp;\n      Print_Array(fullArray,size);\n    }\n\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>If you run this you'll see my problem when you enter the last value in row 1. It overwrites the second row first column element spot? </p>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1472683357, "post_id": 39260062, "comment_id": 65856183, "body": "The Standard says that <code>offsetof</code> does what it says it does. That&#39;s all you need to know."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1472683431, "post_id": 39260062, "comment_id": 65856203, "body": "The implementation can do whatever it wants as long as it works (that is, does what the standard says it should). UB applies to user code only."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1472683453, "post_id": 39260062, "comment_id": 65856211, "body": "@KerrekSB I understand that <code>offsetof</code> is specified in the standard, so it will just work if the implementation is supported by the compiler.  What I want to know is if it is valid for me to write similar code and expect it to work."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 3, "creation_date": 1472683466, "post_id": 39260062, "comment_id": 65856215, "body": "It&#39;s not dereferencing a null pointer. It&#39;s casting 0 to a pointer t s and taking then dereferencing the m memer of s, then casting it to <code>char const volatile&amp;</code> and then taking the address of that (&amp;) and casting it to size_t. In simpler terms, it asks &quot;If an object of type s, was at address 0, what would the address of member m be (because that would be the offset of m in s)&quot;. Due to some nuances, it&#39;s implementation defined if this&#39;ll work. Obviously it will for VS2015 since they&#39;re using it."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1472683528, "post_id": 39260062, "comment_id": 65856240, "body": "@Graznarak No, you can&#39;t."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472683961, "post_id": 39260062, "comment_id": 65856356, "body": "A simpler example: <code>char *cptr; printf(&quot;%zu\\n&quot;, sizeof(*cptr));</code> is not derefencing an undefined variable. It&#39;s not dereferencing anything."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1472684185, "post_id": 39260062, "comment_id": 65856428, "body": "@WeatherVane <code>sizeof</code> is an unevaluated context.  The content is never evaluated so there is no undefined behavior as far as dereferencing the null pointer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472684275, "post_id": 39260062, "comment_id": 65856450, "body": "@Graznarak <code>offsetof</code> is similar. It&#39;s a compiler evaluation, not at runtime."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1472684346, "post_id": 39260062, "comment_id": 65856473, "body": "@WeatherVane <code>offsetof</code> is not an unevaluated context.  It is a standard defined macro that returns a <code>size_t</code> that is the offset of the member relative to the beginning of the type."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472684395, "post_id": 39260062, "comment_id": 65856489, "body": "A macro is not a function. It is evaluated at compile time."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "edited": false, "score": 0, "creation_date": 1472684478, "post_id": 39260062, "comment_id": 65856509, "body": "A macro essentially does a text substitution.  So, I guess that you could say that a macro is not evaluated at runtime, but it just does a text substitution, so the substituted text is still evaluated."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472684529, "post_id": 39260062, "comment_id": 65856531, "body": "@Graznarak the offset is known at compile time. There is nothing to dereference."}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1472684983, "post_id": 39260062, "comment_id": 65856631, "body": "@WeatherVane: You&#39;re missing the point. <code>sizeof(*static_cast&lt;int*&gt;(nullptr))</code>  does not dereference a null pointer because the expression is not evaluated.  This is called an unevaluated context. Obviously, just <code>*static_cast&lt;int*&gt;(nullptr)</code> would be evaluated, and it would be undefined behavior for dereferencing a null pointer. The <code>offsetof</code> macro provided is <i>not</i> an unevaluated context; after macro text substitution, the compiler <i>will</i> evaluate the result; the fact that its result is always the same has nothing to do with whether or not it&#39;s evaluated."}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1472685196, "post_id": 39260062, "comment_id": 65856699, "body": "The question is fair: no, we are not allowed to dereference null because the behavior is undefined, full stop. The compiler writers, of course, can peek into what undefined <i>really</i> means and do whatever they want. As far as we are concerned, dereferencing a null pointer reformats the entire disk, unless it occurs in this exact expression. Obviously this is a strange implementation of undefined behavior, and in reality there <i>are</i> guarantees about dereferencing null as is done here, but we aren&#39;t privy to what these are. (1/2)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1472685196, "post_id": 39260062, "comment_id": 65856700, "body": "@GManNickG why the C tag?"}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1472685223, "post_id": 39260062, "comment_id": 65856707, "body": "It&#39;s free to fail on other compilers, for example, where <code>offsetof</code> is implemented differently because they don&#39;t give the same &#39;undefined behavior&#39; behavior. (2/2)"}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472685263, "post_id": 39260062, "comment_id": 65856717, "body": "@WeatherVane: I didn&#39;t add the tag."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472685370, "post_id": 39260062, "comment_id": 65856750, "body": "Before I first commented I tried to give a type cast of <code>*NULL</code> to <code>sizeof</code> in a C program: MSVC would not have it, which why I skewed my first comment."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472685528, "post_id": 39260062, "comment_id": 65856786, "body": "Is <code>*NULL</code> dereferencing a null <i><code>void *</code></i>? You can&#39;t dereference any <code>void *</code> (unless, perhaps, you&#39;re using GCC or a compiler compatible with it).  If you converted it to <code>*(int *)NULL</code>, say, it might have worked.  Or it might still object."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472685599, "post_id": 39260062, "comment_id": 65856806, "body": "I was trying it with a <code>struct</code> pointer before. I just tried again with this <code>printf(&quot;%zu\\n&quot;, sizeof(*(char*)NULL));</code> which works. But I still can&#39;t understand the differnce with finding the offset of a <code>struct</code> member which is known at compile time. However it was not my question!"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472686085, "post_id": 39260062, "comment_id": 65856926, "body": "Yes, the code in that particular definition of <code>offsetof</code> has undefined behavior if it&#39;s evaluated. That just means the behavior is not defined by the standard. The implementation is free to use it, as long as <i>the implementation</i> can guarantee that the actual behavior matches what the standard requires for <code>offsetof</code>. (If that particular definition of <code>offsetof</code> didn&#39;t work, the implementation would have to define it differently.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1472688575, "post_id": 39260062, "comment_id": 65857546, "body": "@PSkocik casting <code>0</code> to a pointer is defined as producing a null pointer. The <code>-&gt;</code> operator is defined as dereferencing its left-hand operand  . (You claim it dereferences the right-hand operand, which makes no sense)"}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472737867, "post_id": 39260062, "comment_id": 65881314, "body": "@WeatherVane The C tag is because offsetof is a macro defined in the C language.  It turns out that this implementation uses a C++ cast instead of a C cast."}], "owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "closed_date": 1472683325, "answer_count": 0, "score": 2, "last_activity_date": 1472683347, "creation_date": 1472682968, "last_edit_date": 1472683347, "question_id": 39260062, "link": "https://stackoverflow.com/questions/39260062/is-offsetof-dereferencing-a-null-pointer", "closed_reason": "Duplicate", "title": "Is offsetof dereferencing a null pointer", "body": "<p>In looking at how my compiler (VS2015) implements the <code>offsetof</code> macro, I see the following implementation:</p>\n\n<pre><code>#define offsetof(s,m) ((size_t)&amp;reinterpret_cast&lt;char const volatile&amp;&gt;((((s*)0)-&gt;m)))\n</code></pre>\n\n<p>It appears to me that this is dereferencing a null pointer at <code>((s*)0)-&gt;m</code>.  I understand this to be undefined behavior.  Is this undefined behavior that the compiler specifies more strongly than the language, or is there some nuance to the \"never dereference a null pointer\" rule that I don't understand?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472684736, "post_id": 39260058, "comment_id": 65856579, "body": "the C++ compiler &#39;mangles&#39; function names.  The library, created in C, does not have mangled function names.  What header files are you including in your C++ source code?  Do those headers from the C language have the needed `extern &quot;c&quot; { ... wrappers?  so they can be used in C++?"}, {"owner": {"reputation": 43, "user_id": 6358985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1ea82841abb0f6aeb8bcc7d60a88e8?s=128&d=identicon&r=PG&f=1", "display_name": "EJane", "link": "https://stackoverflow.com/users/6358985/ejane"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472685521, "post_id": 39260058, "comment_id": 65856784, "body": "Yes. All headers are wrapped with extern &quot;C&quot;"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1472691066, "post_id": 39260058, "comment_id": 65858108, "body": "It&#39;d help if you could make a minimal code example, and give the exact build commands for the library and  the c++ program"}, {"owner": {"reputation": 43, "user_id": 6358985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1ea82841abb0f6aeb8bcc7d60a88e8?s=128&d=identicon&r=PG&f=1", "display_name": "EJane", "link": "https://stackoverflow.com/users/6358985/ejane"}, "edited": false, "score": 0, "creation_date": 1472754688, "post_id": 39260058, "comment_id": 65891809, "body": "Good point. While trying to construct a minimal example, I was able to work out what was going on. (C++ code was linking to a nonstandard version of stdio.h that didn&#39;t support scanf). Thanks!"}, {"owner": {"reputation": 25756, "user_id": 39648, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0d9ffb2252f073517660f2d0bf71d0db?s=128&d=identicon&r=PG", "display_name": "Autodidact", "link": "https://stackoverflow.com/users/39648/autodidact"}, "edited": false, "score": 0, "creation_date": 1487580345, "post_id": 39260058, "comment_id": 71832025, "body": "Also see question: <a href=\"http://stackoverflow.com/q/3660826/39648\">stackoverflow.com/q/3660826/39648</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 6358985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1ea82841abb0f6aeb8bcc7d60a88e8?s=128&d=identicon&r=PG&f=1", "display_name": "EJane", "link": "https://stackoverflow.com/users/6358985/ejane"}, "is_accepted": false, "score": 0, "last_activity_date": 1472755086, "creation_date": 1472755086, "answer_id": 39278691, "question_id": 39260058, "link": "https://stackoverflow.com/questions/39260058/undefined-reference-to-isoc99-sscanf/39278691#39278691", "title": "undefined reference to __isoc99_sscanf", "body": "<p>In case anyone else runs into this problem: </p>\n\n<p>The Makefile for the C++ code disabled the standard libraries and start files using flags <code>-nostdlib -nodefaultlibs -nostartfiles</code>. It instead linked to the version of <code>stdio.h</code> included in the Intel SGX SDK for running inside enclaves. That version deprecates <code>sscanf</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 6358985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1ea82841abb0f6aeb8bcc7d60a88e8?s=128&d=identicon&r=PG&f=1", "display_name": "EJane", "link": "https://stackoverflow.com/users/6358985/ejane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3246, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1472755086, "creation_date": 1472682958, "last_edit_date": 1472690239, "question_id": 39260058, "link": "https://stackoverflow.com/questions/39260058/undefined-reference-to-isoc99-sscanf", "title": "undefined reference to __isoc99_sscanf", "body": "<p>I have a static C library <code>libex.a</code> that uses <code>sscanf</code>. Library was compiled using <code>-std=c99</code></p>\n\n<p>I want to use the library function in some C++ code that I am compiling using <code>-std=c++11</code>, but I get the following error:</p>\n\n<pre><code>lib/libex.a(srcfile.o): In function `my_function':\n/srcpath/srcfile.c:215: undefined reference to `__isoc99_sscanf'\n</code></pre>\n\n<p>After poking around a bit, I have discovered that <code>sscanf</code> has issues with versions due to a backwards compatibility hack, hence the redirect to <code>__isoc99_sscanf</code>, so I suspect that is somehow the source of the problem. However, I checked my version of <code>glibc</code> and it looks recent enough that the solution suggested elsewhere (update your copy of <code>glibc</code> to at least 2.7) isn't helpful.</p>\n\n<pre><code>$ ldd --version\nldd (Ubuntu EGLIBC 2.19-0ubuntu6.6) 2.19\n</code></pre>\n\n<p>Any suggestions?</p>\n\n<p>Of course, let me know if there's any additional information that would be relevant.</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE: If I compile <code>libex.a</code> with <code>-D_GNU_SOURCE</code> the error message is changed to <code>undefined reference to sscanf</code>. Not sure if that will help figure out what's going wrong.</p>\n"}, {"tags": ["c", "function", "interrupt", "msp430"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1472712971, "post_id": 39260026, "comment_id": 65864288, "body": "I guess you don&#39;t want to switch off the red LED, unless a certain time has elapsed since the last failure, or until the operator has acknowledged the fault."}, {"owner": {"reputation": 2632, "user_id": 3156046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5jWHS.jpg?s=128&g=1", "display_name": "HeadCode", "link": "https://stackoverflow.com/users/3156046/headcode"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1472793487, "post_id": 39260026, "comment_id": 65903686, "body": "I have never seen an interrupt routine placed inside an <code>if</code> statement. I&#39;m sure @CL. could answer this, but I doubt that would even work. I believe at compile time the address of the interrupt routine is placed into the interrupt vector. I don&#39;t think it&#39;s something you can conditionally set."}], "owner": {"reputation": 71, "user_id": 6780805, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/52618f546fdf3eadf4fdcb2a3cfbfca5?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle G", "link": "https://stackoverflow.com/users/6780805/kyle-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472682781, "creation_date": 1472682781, "question_id": 39260026, "link": "https://stackoverflow.com/questions/39260026/triggering-interrupts-with-outputs-c", "title": "Triggering Interrupts with Outputs, C", "body": "<p>I'm having a problem implementing and interrupt function in my already existing code.  Basically I want the interrupt to trigger either when a certain output is triggered or when the counter that triggers the output reaches the threshold.  </p>\n\n<p>Equipment:</p>\n\n<p>Micro:  MSP430F5522</p>\n\n<p>CCS:  5.5.0.00077</p>\n\n<p>Compiler: TI v4.1.9</p>\n\n<p>The device is supposed to scan for a light, and if the light is detected a certain amount of times in a row, an output is turned on that lights up a green LED.  If it fails a certain amount of times in a row, a red LED is supposed to turn on.  </p>\n\n<p>The problem with this code is that the red LED does not stay on long enough to show that there was a high amount of consecutive misses when scanning for the light.  The solution was to come up with an interrupt function that uses a different clock within the processor so the test cycle is not delayed and the red LED stays on long enough for the operator to know about the misses.  </p>\n\n<p>The RED/GREEN_LED_ON/OFF are bit wise output controllers defined earlier in the file.</p>\n\n<p>This is the original function before I put the interrupt function within it:</p>\n\n<pre><code>#define PASSCOUNTERTHRESHOLD  40//20\n\n   void display( char  event , char test )\n    {\n        int j,i;\n\n        static int maxConsecPassingCount=0;\n        static int consecPassingCount=0; \n        static int passingCount=0; \n        static int timeLimit=0;   // amount of time allowed for non detection before failure is asserted.\n        static int consecFails=0;\n\n        if ( event == DETECTED )\n        {\n\n\n            if ( stardata.outputOptions &amp; DUALED )\n            {\n\n                if( ++consecPassingCount &gt; 99  &amp;&amp; !(EXT_INPUT)) // if no detection for long period , assume no motion and just reset counter\n                {\n                    RED_LED_OFF;\n                    GREEN_LED_ON;\n                    return;\n                }\n\n                if( timeLimit &gt; 0  &amp;&amp; !(EXT_INPUT))\n                {\n                    // evaluate whether the time limit has been violated by stopping timer and reading counter, reset counter for next time. if limit exceeded turn on red led\n                    // else turn on green led\n                    TA0CCR0 = 0;\n                    i=TA0R;\n\n                    if ( i  &gt; timeLimit )\n                    {\n                        RED_LED_ON;\n                        GREEN_LED_OFF;\n                    }\n                    else\n                    {\n                        GREEN_LED_ON;\n                        RED_LED_OFF;\n                    }\n                }\n                else\n                {\n                    RED_LED_OFF;\n                    GREEN_LED_ON;\n                    timer_us(50);\n                    GREEN_LED_OFF;\n                }\n\n                consecFails=0;\n            }\n\n\n        }\n        else if ( event==NOT_DETECTED)\n        {\n            passingCount+=consecPassingCount;\n            if ( consecPassingCount &gt; maxConsecPassingCount )   // find maximum string of consecutive passing tests out of a group &lt;PASSCOUNTERTHRESHOLD&gt; of tests to estimate the speed.\n            {\n                maxConsecPassingCount = consecPassingCount;\n            }\n            consecPassingCount=0;\n\n\n            if ( passingCount &gt; PASSCOUNTERTHRESHOLD)  // we should have enough data to predict the speed, so now calculate the maximum failing time allowed before we set the fail led.\n            {\n                passingCount=0;\n                timeLimit= maxConsecPassingCount * stardata.starLimits[test].hiTestLimit2; //150;  // amount of time which is allowed between non detect intervals.\n                maxConsecPassingCount=0;\n            }\n            if ( timeLimit &gt; 0 &amp;&amp; consecFails == 0 )                // start timer\n            {\n                TA0R=0;\n                TA0CCR0 = 5000;\n            }\n\n            if ( consecFails &gt; 100)\n            {\n                GREEN_LED_OFF;\n                RED_LED_ON;\n                return;\n            }\n                //consecFails=0;\n            else ++consecFails;\n        }\n\n\n    }\n</code></pre>\n\n<p>I defined the timer used in the interrupt function in the main.c file as follows:</p>\n\n<pre><code> TA2CCTL0=CCIE;\n\n TA2CTL=TASSEL_2+MC_3+ID__8; \n\n TA2CCR0=125000;\n</code></pre>\n\n<p>This is the code with the interrupt function replacing RED_LED_ON output:</p>\n\n<pre><code>   void display( char  event , char test )\n\n {\n\n int j,i;\n\n static int maxConsecPassingCount=0;\n\n static int consecPassingCount=0; //kg 8/16\n\n static int passingCount=0; //kg 8/16\n\n static int timeLimit=0;   // amount of time allowed for non detection before failure is asserted.\n\n static int consecFails=0;\n\n if ( event == DETECTED )\n\n {\n\n if ( stardata.outputOptions &amp; DUALED )\n\n {\n\n if( ++consecPassingCount &gt; 99  &amp;&amp; !(EXT_INPUT)) // if no detection for long period , assume no motion and just reset counter\n\n {\n\n RED_LED_OFF;\n\n GREEN_LED_ON;\n\n return;\n\n }\n\n if( timeLimit &gt; 0  &amp;&amp; !(EXT_INPUT))\n\n {\n\n // evaluate whether the time limit has been violated by stopping timer and reading counter, reset counter for next time. if limit exceeded turn on red led\n\n // else turn on green led\n\n TA0CCR0 = 0;\n\n i=TA0R;\n\n if ( i  &gt; timeLimit )\n\n {\n\n #pragma vector=TIMER1_A1_VECTOR  //kg\n\n __interrupt void TIMER1_A1ISR (void)\n\n {\n\n RED_LED_ON;\n\n GREEN_LED_OFF;\n\n }\n\n }\n\n else\n\n {\n\n GREEN_LED_ON;\n\n RED_LED_OFF;\n\n }\n\n }\n\n else\n\n {\n\n RED_LED_OFF;\n\n GREEN_LED_ON;\n\n timer_us(50);\n\n GREEN_LED_OFF;\n\n }\n\n consecFails=0;\n\n }\n\n }\n\n else if ( event==NOT_DETECTED)\n\n {\n\n passingCount+=consecPassingCount;\n\n if ( consecPassingCount &gt; maxConsecPassingCount )   // find maximum string of consecutive passing tests out of a group &lt;PASSCOUNTERTHRESHOLD&gt; of tests to estimate the speed.\n\n {\n\n maxConsecPassingCount = consecPassingCount;\n\n }\n\n consecPassingCount=0;\n\n if ( passingCount &gt; PASSCOUNTERTHRESHOLD)  // we should have enough data to predict the speed, so now calculate the maximum failing time allowed before we set the fail led.\n\n {\n\n passingCount=0;\n\n timeLimit= maxConsecPassingCount * stardata.starLimits[test].hiTestLimit2; //150;  // amount of time which is allowed between non detect intervals.\n\n maxConsecPassingCount=0;\n\n }\n\n if ( timeLimit &gt; 0 &amp;&amp; consecFails == 0 ) // start timer\n\n {\n\n TA0R=0;\n\n TA0CCR0 = 5000;\n\n }\n\n if ( consecFails &gt; 100)\n\n {\n\n #pragma vector=TIMER1_A1_VECTOR  //kg\n\n __interrupt void TIMER1_A1ISR (void)\n\n {\n\n RED_LED_ON;\n\n GREEN_LED_OFF;\n\n }\n\n }\n\n //consecFails=0;\n\n else ++consecFails;\n\n }\n\n    }\n</code></pre>\n\n<p>I can't get the code to compile and I can't find a forum that discusses adding interrupts that are controlled in the same way I am using them.  Does anyone have any ideas as to what I am doing wrong?  Can I set a global flag when the red LED turns on to trigger the interrupt?</p>\n"}, {"tags": ["c", "ieee-754"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 1, "creation_date": 1472682317, "post_id": 39259874, "comment_id": 65855856, "body": "Wouldn&#39;t a simple postcheck for NaN suffice?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1472682552, "post_id": 39259874, "comment_id": 65855932, "body": "Likely I&#39;m missing something, but it&#39;s unclear why the above statement would be true. If either b or c is zero, then this expression becomes 1/infinity, which is not zero."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472682569, "post_id": 39259874, "comment_id": 65855934, "body": "You would need <i>three</i> checks of 0 for your expression if <code>b</code> or <code>c</code> can be negative. Because <code>1&#47;b + 1&#47;c</code> will be <code>0</code> if <code>b == -c</code>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472682752, "post_id": 39259874, "comment_id": 65855995, "body": "@OliverCharlesworth But that is zero."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1472682944, "post_id": 39259874, "comment_id": 65856058, "body": "@2501: is it? If so, then I&#39;ve just forgotten my 754 rules ;)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472683004, "post_id": 39259874, "comment_id": 65856082, "body": "@OliverCharlesworth Well it&#39;s just math logic, number/inf is zero, but inf-inf isn&#39;t defined. Although 1/0 isn&#39;t defined either but 754 gives inf."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1472683449, "post_id": 39259874, "comment_id": 65856209, "body": "@2501: I&#39;d argue it&#39;s not logic - 1/inf means no more or less than inf-inf - it means whatever you define it to mean."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1472683785, "post_id": 39259874, "comment_id": 65856309, "body": "@OliverCharlesworth Well in math, if you obtain an inf in a sensible way, like using limits, 1/inf is zero."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1472685781, "post_id": 39259874, "comment_id": 65856855, "body": "IMHO the question boils down to: &quot;what is the fastest way to divide by zero?&quot;"}, {"owner": {"reputation": 487, "user_id": 5529255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zIdnf.jpg?s=128&g=1", "display_name": "dune.rocks", "link": "https://stackoverflow.com/users/5529255/dune-rocks"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1472687538, "post_id": 39259874, "comment_id": 65857269, "body": "@wildplasser as you feel, but my intention was to shake out any potential misunderstands, I don&#39;t really care about division by zero, I care about understanding IEEE 754."}], "answers": [{"comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1472784022, "post_id": 39283515, "comment_id": 65901511, "body": "Adding +zero is indeed the canonical way of &quot;cleaning up&quot; undesired instances of -zero. It can also be combined with multiplication if necessary, e.g. <code>fma (a, b, +0.0)</code>. Of course this all assumes that one works with a compiler (and compiler switches) that respect proper IEEE-754 behavior in the first place (i.e. doesn&#39;t optimize out additions involving zero)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1472784292, "post_id": 39283515, "comment_id": 65901560, "body": "@njuffa True about &quot;respect proper IEEE-754&quot;.  Fortunately OP&#39;s post is tagged and titled IEEE 754.  BTW: You may enjoy <a href=\"http://stackoverflow.com/q/25332133/2410359\">+0.0 and -0.0 give different arithmetic results</a> which is somewhat the opposite of what OP is trying to do."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1472784461, "post_id": 39283515, "comment_id": 65901601, "body": "I am apparently aware of the question and your answer (now community wiki), because I see that I upvoted the answer. Since I didn&#39;t comment or edit the answer I assume that I was unable to think of an example not already mentioned."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1472819470, "last_edit_date": 1472819470, "creation_date": 1472783751, "answer_id": 39283515, "question_id": 39259874, "link": "https://stackoverflow.com/questions/39259874/skipping-test-for-zero-checks-in-ieee-754/39283515#39283515", "title": "Skipping &quot;test for zero&quot; checks in IEEE 754", "body": "<blockquote>\n  <p>But what about the case where <code>b=+0</code> and <code>c=-0</code>?</p>\n</blockquote>\n\n<p>Convert <code>-0.0</code> to <code>+0.0</code> without branching by adding <code>0.0</code>.</p>\n\n<pre><code>int main(void) {\n  double b = +0.0;\n  double c = -0.0;\n  printf(\"%e\\n\", b);\n  printf(\"%e\\n\", c);\n  printf(\"%e\\n\", 1.0/(1.0/b + 1.0/c));\n  b += 0.0;\n  c += 0.0;\n  printf(\"%e\\n\", 1.0/(1.0/b + 1.0/c));\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>0.000000e+00\n-0.000000e+00\nnan\n0.000000e+00\n</code></pre>\n\n<hr>\n\n<p>[Edit] On the other hand, any values near <code>0.0</code>, but not <code>0.0</code>, are likely numeric artifacts and not accurate <em>resistance</em> values.  The above still has trouble with <em>tiny</em> value pairs like <code>b = DBL_TRUE_MIN; c = -b;</code>  The issue is <code>1.0/tiny</code> --> <code>Infinity</code> and <code>+Infinity + -Infinity</code> --> <code>NAN</code>.  Could resort to either using wider floating point for the quotient calculation or narrow the operands.</p>\n\n<pre><code>  b += 0.0;\n  c += 0.0;\n  printf(\"%Le\\n\", 1.0/(1.0L/b + 1.0L/c));\n\n  // Lose some precision, but we are talking about real resistors/lenses here.\n  b = (float) b + 0.0f;\n  c = (float) c + 0.0f;\n  printf(\"%e\\n\", 1.0/(1.0/b + 1.0/c));\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 5529255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zIdnf.jpg?s=128&g=1", "display_name": "dune.rocks", "link": "https://stackoverflow.com/users/5529255/dune-rocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 39283515, "answer_count": 1, "score": 5, "last_activity_date": 1472819470, "creation_date": 1472682038, "last_edit_date": 1472684645, "question_id": 39259874, "link": "https://stackoverflow.com/questions/39259874/skipping-test-for-zero-checks-in-ieee-754", "title": "Skipping &quot;test for zero&quot; checks in IEEE 754", "body": "<p>I read this in a popular book about computer graphics,</p>\n\n<blockquote>\n  <p>There are many numeric computations that become much simpler if the programmer takes advantage of the IEEE rules. For example, consider the expression:</p>\n  \n  <p>a = 1  / (1/b + 1/c)</p>\n  \n  <p>Such expressions arise with resistors and lenses. If divide-by-zero resulted in a program crash (as was true in many systems before IEEE floating-point), then two if statements would be required to check for small or zero values of b or c. Instead, with IEEE floating-point, if b or c is zero, we will get a zero value for a as desired.</p>\n</blockquote>\n\n<p>But what about the case where <code>b=+0</code> and <code>c=-0</code>? Then <code>a=1/inf-inf=nan</code>. Is the book wrong about this optimizations, or have I misunderstood something? It seems like we'll still need at least one check for the signs of b &amp; c rather than no checks at all.</p>\n\n<p><strong>Edit</strong>\nOne suggestion in the comments was just to do a post-check for NaN. Is that the idiomatic way to \"take advantage\" of these number type?</p>\n\n<pre><code>bool is_nan(float x) { return x != x; }\n\nfloat optic_thing(float b, float c) {\n  float result = 1.0f / (1.0f/b + 1.0f/c);\n  if (is_nan(result)) result = 0;\n  return result;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "sorting"], "comments": [{"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 5, "creation_date": 1472679101, "post_id": 39259312, "comment_id": 65854660, "body": "why do you want to do it by writing partial output to a file? Just read all data, sort and write all data at once. Actually you don&#39;t even need to roll your own sorting function, you can use <code>&lt;stdlib.h&gt;</code> <code>qsort</code> function: <a href=\"http://en.cppreference.com/w/cpp/algorithm/qsort\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/qsort</a>"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 3, "creation_date": 1472679279, "post_id": 39259312, "comment_id": 65854727, "body": "That&#39;s a bit more than two megabyte (if you use pointers, perhaps 3MB). It can&#39;t be too hard to allocate (using malloc()) an array that can contain so many numbers."}, {"owner": {"reputation": 135, "user_id": 2622879, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd5e315c78e92aa6252d0deba05ff1a0?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio AN", "link": "https://stackoverflow.com/users/2622879/antonio-an"}, "edited": false, "score": 0, "creation_date": 1472679357, "post_id": 39259312, "comment_id": 65854759, "body": "Alright, I realized that my idea will not work to sort my numbers, so please just consider the problem of the prepending not working. Though, if you have ideas for how to sort them, that would be great. (:"}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 3, "creation_date": 1472679422, "post_id": 39259312, "comment_id": 65854790, "body": "As mentioned above: read everything into dynamically allocated array, then use qsort to sort it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1472679438, "post_id": 39259312, "comment_id": 65854802, "body": "Read all the numbers into an array, sort the array with <code>qsort</code>, write the array to the output file."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1472679459, "post_id": 39259312, "comment_id": 65854817, "body": "80370 30-digit numbers is not too big for an array on a modern general-purpose computer, even if the numbers are represented as strings of digits."}, {"owner": {"reputation": 135, "user_id": 2622879, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd5e315c78e92aa6252d0deba05ff1a0?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio AN", "link": "https://stackoverflow.com/users/2622879/antonio-an"}, "edited": false, "score": 0, "creation_date": 1472679530, "post_id": 39259312, "comment_id": 65854845, "body": "Thanks everyone! I didn&#39;t think that finding 2mb in the memory was such an easy task. It&#39;s great to hear"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1472679594, "post_id": 39259312, "comment_id": 65854873, "body": "File-based sorting used to be a thing, but its importance has greatly diminished with the increase in computers&#39; memory sizes.  It&#39;s still important in databases, though.  Efficient implementations are non-trivial."}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 1, "creation_date": 1472679703, "post_id": 39259312, "comment_id": 65854921, "body": "even if you are using 32 bit version of windows, you have at least 2 GB of virtual address space. Even if you don&#39;t have enough physical RAM let the OS solve this problem for you using swap space. But in you case 2MB is not a bottleneck nowadays"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1472679995, "post_id": 39259312, "comment_id": 65855024, "body": "The array can be a global variable, a static variable, or dynamically allocated with <code>malloc</code>. The only thing you <i>can&#39;t</i> do is declare the array as a local variable."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472680252, "post_id": 39259312, "comment_id": 65855113, "body": "I&#39;d strongly suggest: read the whole file in to an array in memory, then use an existing sorting algorithm like <code>qsort()</code>"}, {"owner": {"reputation": 135, "user_id": 2622879, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd5e315c78e92aa6252d0deba05ff1a0?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio AN", "link": "https://stackoverflow.com/users/2622879/antonio-an"}, "edited": false, "score": 0, "creation_date": 1472680381, "post_id": 39259312, "comment_id": 65855161, "body": "So I want a 2D array of size <code>[80370][30]</code>. How do I do that in <code>malloc</code>?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1472680633, "post_id": 39259312, "comment_id": 65855246, "body": "<a href=\"http://stackoverflow.com/questions/1970698/using-malloc-for-allocation-of-multi-dimensional-arrays-with-different-row-lengt\" title=\"using malloc for allocation of multi dimensional arrays with different row lengt\">stackoverflow.com/questions/1970698/&hellip;</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472680785, "post_id": 39259312, "comment_id": 65855300, "body": "struct tagMyArray { char line[30]; }; struct tagMyArray * myArray = malloc( sizeof( struct tagMyArray ) * 80370);  If( !myArray ) { // handle error }"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1472682987, "post_id": 39259312, "comment_id": 65856069, "body": "Or just <code>char (*myarr)[30] = malloc (80370 * sizeof *myarr);</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472685013, "post_id": 39259312, "comment_id": 65856640, "body": "The basic mechanics of an external sort where the data <i>is</i> too big to fit in memory are: (1) Read as much data into memory as will fit; (2) sort it; (3) write it out to disk; (4) Repeat steps 1-3 until there&#39;s no more data to read; (5) merge the sorted files into sorted output files (if necessary, you may have to make multiple merge passes).  The tricks are then optimizing this processing to minimize the amount of data written to disk, and the number of passes over the data in general."}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1472697607, "post_id": 39259312, "comment_id": 65859536, "body": "I had an assembly language assignment (in the mid 90s) that asked us to do this using no extra memory, only registers on a 486 and the file had to be sorted in place.  Needless to say it takes a long time to bubble sort a file 2 lines at a time while swapping 2 characters at a time, especially when the file is on a floppy disk, but it can be done.  Though ~half the class dropped after that assignment."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1472681920, "last_edit_date": 1472681920, "creation_date": 1472681590, "answer_id": 39259795, "question_id": 39259312, "link": "https://stackoverflow.com/questions/39259312/c-sort-long-list-that-cant-fit-into-arrays/39259795#39259795", "title": "C: Sort long list that can&#39;t fit into arrays", "body": "<p>While I agree with the comments that you should allocate memory for all your data using <code>malloc</code>, sort the data in memory, and then write the data to the file, I also think that your approach should also work.</p>\n\n<p>I'm guessing that the reason for your approach not working is that you have open file handles to the files at the time you are using</p>\n\n<pre><code>remove(filename); //delete old file\nrename(auxname, filename); //rename new file to old file's name\n</code></pre>\n\n<p>My suggestion:</p>\n\n<ol>\n<li>Open the files in the function.</li>\n<li>Do the read and append.</li>\n<li>Close the files.</li>\n<li>Then do the remove and rename.</li>\n</ol>\n\n<hr>\n\n<pre><code>void prepend(char line[], char filename[], char auxname[]) {\n\n   FILE* w = fopen(filename, \"r\");\n   if ( w == NULL )\n   {\n      fprintf(stderr, \"Unable to open %s for reading from.\\n\", filename);\n      return;\n   }\n\n   FILE* waux = fopen(auxname, \"w\");\n   if ( waux == NULL )\n   {\n      fprintf(stderr, \"Unable to open %s for writing to.\\n\", auxname);\n      fclose(w);\n      return;\n   }\n\n   fprintf(waux, \"%s\\n\", line); //print new number to new file (waux)\n   int ch;\n   while((ch = fgetc(w)) != EOF) {\n      fputc(ch, waux); //read old file (w) and add to new file (waux)\n   }\n\n   fclose(waux);\n   fclose(w);\n\n   remove(filename); //delete old file\n   rename(auxname, filename); //rename new file to old file's name\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 2622879, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd5e315c78e92aa6252d0deba05ff1a0?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio AN", "link": "https://stackoverflow.com/users/2622879/antonio-an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1472681920, "creation_date": 1472679030, "question_id": 39259312, "link": "https://stackoverflow.com/questions/39259312/c-sort-long-list-that-cant-fit-into-arrays", "title": "C: Sort long list that can&#39;t fit into arrays", "body": "<p>I have a 80370-long list of 30-digit numbers in a text file, each in a separate line.<br>\nI want to sort them in C.  </p>\n\n<p>My idea was creating a new file, then adding the first number to it.<br>\nThen, each time we compare it with another number. If it's smaller, the other number is appended. Easy. However, if it's larger, the new number must be prepended.<br>\nI tried prepending like so:</p>\n\n<pre><code>void prepend(char line[], FILE* w, FILE* waux, char filename[], char auxname[]) {\n    fprintf(waux, \"%s\\n\", line); //print new number to new file (waux)\n    char ch;\n    while((ch = fgetc(w)) != EOF) {\n        fputc(ch, waux); //read old file (w) and add to new file (waux)\n    }\n    remove(filename); //delete old file\n    rename(auxname, filename); //rename new file to old file's name\n}\n</code></pre>\n\n<p>But then I try to read the output and it's filled with NULL chars (in Notepad++).<br>\nAmong the million NULL chars we can find the numbers, but they're not sorted at all.</p>\n"}, {"tags": ["c", "xcode", "c-strings"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1472676995, "post_id": 39258759, "comment_id": 65853734, "body": "are you sure it&#39;s not on the <code>ofile = fopen(&quot;strcat(name,suffix)&quot;, &quot;w&quot;);</code> line? because it is buggy for sure there! And are you sure your <code>name</code> buffer is big enough? 30 seems meagre. can you show us the output of your program (since there are well-placed <code>puts</code> statements)"}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1472678455, "post_id": 39258759, "comment_id": 65854408, "body": "Ouch. You should probably read about buffer overflows. Ouch."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 0, "creation_date": 1472678531, "post_id": 39258759, "comment_id": 65854437, "body": "Also, you&#39;re supposed to provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> illustrating your issue. Yours is definitely not minimal."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472679149, "post_id": 39258759, "comment_id": 65854689, "body": "Note that your use of <code>feof()</code> is far too late; test the call to <code>fscanf()</code> directly.  See <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\"><code>while (!feof(file))</code> is always wrong</a> for discussion of a variant of what you&#39;re doing, but what you&#39;re doing is also incorrect for basically the same reasons."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472679353, "post_id": 39258759, "comment_id": 65854754, "body": "Note that the <code>ofile = fopen(&quot;strcat(name,suffix)&quot;, &quot;w&quot;);</code> line opens a file with a fixed name and parentheses as part of the name.  Not precisely an invalid name, but nothing like what you intended. \u2014\u2014 The code changed; it now has <code>ofile = fopen(&quot;datapars&quot;, &quot;w&quot;);</code>.  You need to open the file whose name is in the variable <code>datapars</code>, not the file named <code>&quot;datapars&quot;</code>.  No quotes around the variable name.  That was the problem before, too, with the longer version.  And test your file pointer after <code>fopen()</code> before using it; you will crash if you don&#39;t."}, {"owner": {"reputation": 3, "user_id": 6655020, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iLmy9mvWlAc/AAAAAAAAAAI/AAAAAAAAADw/2ojPDbw8PTQ/photo.jpg?sz=128", "display_name": "Michelle Gurevich", "link": "https://stackoverflow.com/users/6655020/michelle-gurevich"}, "edited": false, "score": 0, "creation_date": 1472679438, "post_id": 39258759, "comment_id": 65854801, "body": "so I should just remove the quotation marks around it? Ok, and it will use the concatenated name"}, {"owner": {"reputation": 3, "user_id": 6655020, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iLmy9mvWlAc/AAAAAAAAAAI/AAAAAAAAADw/2ojPDbw8PTQ/photo.jpg?sz=128", "display_name": "Michelle Gurevich", "link": "https://stackoverflow.com/users/6655020/michelle-gurevich"}, "edited": false, "score": 0, "creation_date": 1472679449, "post_id": 39258759, "comment_id": 65854810, "body": "Thank you for the link on feof(). I will look into this"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472679513, "post_id": 39258759, "comment_id": 65854838, "body": "Yes, just remove the quotes \u2014 it will use the value of the variable."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472679625, "post_id": 39258759, "comment_id": 65854888, "body": "Please read up on how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) \u2014 aka SSCCE (<a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">Short, Self-Contained, Correct Example</a>).  What you had before was better than what I see now.  I know it&#39;s hard at first to gauge what&#39;s appropriate."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472680135, "post_id": 39258759, "comment_id": 65855068, "body": "you have heavily edited your question, still a lot of problems remain. My answer is now obsolete. provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and a lot of people will help."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472680797, "post_id": 39258759, "comment_id": 65855304, "body": "<code>fprintf(dataparsFile,</code> --&gt; <code>fprintf(ofile,</code>"}, {"owner": {"reputation": 3, "user_id": 6655020, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iLmy9mvWlAc/AAAAAAAAAAI/AAAAAAAAADw/2ojPDbw8PTQ/photo.jpg?sz=128", "display_name": "Michelle Gurevich", "link": "https://stackoverflow.com/users/6655020/michelle-gurevich"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472680899, "post_id": 39258759, "comment_id": 65855327, "body": "@BLUEPIXY I have a different file in the program called ofile and can&#39;t name this one the same."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472681453, "post_id": 39258759, "comment_id": 65855536, "body": "The first argument of <code>fprintf</code> must be  <code>FILE*</code>.  <code>dataparsFile = strcat(name, ext);  dataparsFile = fopen(dataparsFile, &quot;w&quot;);</code> : They are inconsistent."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1472682724, "last_edit_date": 1472682724, "creation_date": 1472682404, "answer_id": 39259956, "question_id": 39258759, "link": "https://stackoverflow.com/questions/39258759/concatenating-two-strings-in-c-and-recieve-a-signal-sigabrt-error-in-xcode/39259956#39259956", "title": "Concatenating two strings in C and recieve a signal SIGABRT error in Xcode", "body": "<p>The problem is <code>name</code> is not initialized. You see, in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> strings use a convention, they are any sequence of ASCII (<em>probably some other printable characters, but in principle just ASCII</em>) that must be followed by a <code>'\\0'</code> byte that marks the end of the string.</p>\n\n<p>Your <code>name</code> array doesn't have this <code>'\\0'</code> so <code>strcat()</code> tries to find it but it fails and perhaps it reads beyond the end of the array, although anyway reading uninitialized data is undefined behavior.</p>\n\n<p>The way <code>strcat(dst, src)</code> works is pretty much like this</p>\n\n<pre><code>char *\nstrcat(char *const dst, char *src)\n{\n    // Make a pointer to keep dst's address\n    // unchanged and return it\n    char *ptr = dst;\n    // Compute search for the end of the destination\n    // string to start copying there\n    while (*ptr != '\\0')\n        ptr++;\n    // Copy all the characters from `src' until the '\\0'\n    // occurs\n    while (*src != '\\0')\n        *(ptr++) = *(src++);\n    *ptr = '\\0';\n    return dst;\n}\n</code></pre>\n\n<p>As you see, this is very inefficient if you call <code>strcat()</code> many times, and it will certainly not work if you pass either of the parameters before initializing it.</p>\n\n<p>In fact, it's terribly unsafe because there is no bound checking, the caller has to make sure that the destination array is large enough to hold both strings.</p>\n"}], "owner": {"reputation": 3, "user_id": 6655020, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iLmy9mvWlAc/AAAAAAAAAAI/AAAAAAAAADw/2ojPDbw8PTQ/photo.jpg?sz=128", "display_name": "Michelle Gurevich", "link": "https://stackoverflow.com/users/6655020/michelle-gurevich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1472682724, "creation_date": 1472676593, "last_edit_date": 1472680846, "question_id": 39258759, "link": "https://stackoverflow.com/questions/39258759/concatenating-two-strings-in-c-and-recieve-a-signal-sigabrt-error-in-xcode", "title": "Concatenating two strings in C and recieve a signal SIGABRT error in Xcode", "body": "<p>I am trying to concatenate two strings in C and receive a \"Thread 1: signal SIGABRT\" error.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    char name[50];\n    ifile = fopen(\"stats.list\", \"r\");\n\nfor(;;) {\n    fscanf(ifile, \"%s%f%f\", name, &amp;sky, &amp;stddev);\n    if (feof(ifile))\n    break;\n\n    char ext[5] = \".par\";\n    dataparsFile = strcat(name, ext);\n\n    dataparsFile = fopen(dataparsFile, \"w\");\n\n    fprintf(dataparsFile, \"%s\\n\",\n            \"stuff gets read in to file named after new string\";\n\n    fprintf(ofile, \"phot \");\n    fprintf(ofile, \"%s%s%s%s%s%s \\n\",\n            \", datapars=\", dataparsFile);\n}\n\nfclose(ifile);\nfclose(ofile);\n</code></pre>\n\n<p>The goal of the code is to take an image name that is read in and add on the .par extension. Then, I want to open a file with that name of image+.par and write into it. Since I will have a couple hundred such files, I need to loop through them with the name changing each time.</p>\n"}, {"tags": ["c", "arduino", "bit-manipulation"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1472676505, "post_id": 39258723, "comment_id": 65853486, "body": "No. <code>if (p == NULL || p-&gt;n &gt; 10)</code> is OK, but <code>if ((p == NULL) |  (p-&gt;n &gt; 10))</code> has undefined behaviour."}, {"owner": {"reputation": 2511, "user_id": 3015268, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/K2RwN.jpg?s=128&g=1", "display_name": "bakalolo", "link": "https://stackoverflow.com/users/3015268/bakalolo"}, "reply_to_user": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 1, "creation_date": 1472676672, "post_id": 39258723, "comment_id": 65853560, "body": "@AndrewL. That answer is for C# is that the same as C?"}, {"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 0, "creation_date": 1472676711, "post_id": 39258723, "comment_id": 65853579, "body": "They are the same exact operators and these operators are universal in their operation"}, {"owner": {"reputation": 2511, "user_id": 3015268, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/K2RwN.jpg?s=128&g=1", "display_name": "bakalolo", "link": "https://stackoverflow.com/users/3015268/bakalolo"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1472677180, "post_id": 39258723, "comment_id": 65853816, "body": "@KerrekSB Is there any particular reason to use | in this situation?  I am trying to read through a piece of arduino code and I have no idea why the author used bitwise OR."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1472679691, "post_id": 39258723, "comment_id": 65854916, "body": "@bakalolo: No. Never underestimate the likelihood of seeing bad code in the wild."}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1472693926, "post_id": 39258723, "comment_id": 65858700, "body": "You would use bitwise or for branchless code or in this case to minimize the number of branches... To help with branch prediction, help the compiler vectorize or prevent timing attacks ... Micro-optimizations basically."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472681944, "post_id": 39258751, "comment_id": 65855735, "body": "As in short-circuit evaluation of compound boolean expressions. So there is a diiference if the second part has a side-effect."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472682397, "post_id": 39258751, "comment_id": 65855882, "body": "and If you are reading from a hardware register that can be safely read, say, once every 100 milliseconds, it could trigger a bug."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1472676552, "creation_date": 1472676552, "answer_id": 39258751, "question_id": 39258723, "link": "https://stackoverflow.com/questions/39258723/logical-or-bitwise-or-interchangeable/39258751#39258751", "title": "logical OR bitwise OR interchangeable?", "body": "<p>In that case bitwise = logical since both tests return 0 or 1.</p>\n\n<p>The only difference with single <code>|</code> is that both parts of the test will be executed whatever the result of the first test => use <code>||</code> here.</p>\n"}], "owner": {"reputation": 2511, "user_id": 3015268, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/K2RwN.jpg?s=128&g=1", "display_name": "bakalolo", "link": "https://stackoverflow.com/users/3015268/bakalolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "closed_date": 1472679458, "answer_count": 1, "score": 0, "last_activity_date": 1472677069, "creation_date": 1472676411, "last_edit_date": 1472677069, "question_id": 39258723, "link": "https://stackoverflow.com/questions/39258723/logical-or-bitwise-or-interchangeable", "closed_reason": "Duplicate", "title": "logical OR bitwise OR interchangeable?", "body": "<p>Say I have 2 comparison</p>\n\n<pre><code>if ((length &gt;= 524288) | (length == 0))\n{\n      //do something...\n}\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>if ((length &gt;= 524288) || (length == 0))\n{\n      //do something...\n}\n</code></pre>\n\n<p>are these the same thing since when you bitwise OR 0001 0000 it turns into 1?\nAlso is there any particular reason to use bitwise OR in this situation?</p>\n"}, {"tags": ["c++", "c", "arduino", "spi", "raspberry-pi3"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 4847529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd1d868cc725c099ad63c2c1e5a6e6a?s=128&d=identicon&r=PG&f=1", "display_name": "giri", "link": "https://stackoverflow.com/users/4847529/giri"}, "edited": false, "score": 0, "creation_date": 1473353872, "post_id": 39258956, "comment_id": 66118937, "body": "thanks for your reply js441. I switched to using python with spiDev because it is much more straight forward. Let me ask you, do you think python over C is equally acceptable regarding industry standard?"}, {"owner": {"reputation": 1144, "user_id": 6726446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602d84fcaa2dbe153f57461755aae30d?s=128&d=identicon&r=PG&f=1", "display_name": "js441", "link": "https://stackoverflow.com/users/6726446/js441"}, "reply_to_user": {"reputation": 7, "user_id": 4847529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd1d868cc725c099ad63c2c1e5a6e6a?s=128&d=identicon&r=PG&f=1", "display_name": "giri", "link": "https://stackoverflow.com/users/4847529/giri"}, "edited": false, "score": 0, "creation_date": 1473354538, "post_id": 39258956, "comment_id": 66119266, "body": "@giri That&#39;s a difficult question to answer. Both are used in industry, it&#39;s more a case of what works for you. If you can make a valid working solution in one language easier than the other, then that&#39;s the language for you."}], "tags": [], "owner": {"reputation": 1144, "user_id": 6726446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602d84fcaa2dbe153f57461755aae30d?s=128&d=identicon&r=PG&f=1", "display_name": "js441", "link": "https://stackoverflow.com/users/6726446/js441"}, "is_accepted": true, "score": 0, "last_activity_date": 1472677368, "creation_date": 1472677368, "answer_id": 39258956, "question_id": 39258593, "link": "https://stackoverflow.com/questions/39258593/unreliable-spi-byte-array-transfer-from-arduino-to-raspberry-pi/39258956#39258956", "title": "Unreliable SPI byte array transfer from Arduino to Raspberry Pi", "body": "<p>At a guess I would say that this is a timing issue between the sender and receiver. Try looking at the bits of the data that you are receiving and see if they are shifted forward or backward. This will possibly indicate that the pi is waiting too long to begin receiving, or not waiting long enough for all of the data. I think the issues are probably around the delays:</p>\n\n<pre><code>delay(500); //for errors\n</code></pre>\n\n<p>on the Arduino, and </p>\n\n<pre><code>delay(1000); \n</code></pre>\n\n<p>on the receiver. Why are you using these? 500ms is a long time to keep the pi waiting for a response to the SPI data.</p>\n\n<p>Just a note, there is also now an SPI kernel driver (spidev) for the pi - this is a much more industry standard approach, and is potentially a more robust method.</p>\n\n<p>There's a good example of this on the raspberry pi github site: <a href=\"https://github.com/raspberrypi/linux/blob/rpi-4.4.y/Documentation/spi/spidev_test.c\" rel=\"nofollow\">https://github.com/raspberrypi/linux/blob/rpi-4.4.y/Documentation/spi/spidev_test.c</a></p>\n"}], "owner": {"reputation": 7, "user_id": 4847529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd1d868cc725c099ad63c2c1e5a6e6a?s=128&d=identicon&r=PG&f=1", "display_name": "giri", "link": "https://stackoverflow.com/users/4847529/giri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "accepted_answer_id": 39258956, "answer_count": 1, "score": 0, "last_activity_date": 1472677368, "creation_date": 1472675861, "question_id": 39258593, "link": "https://stackoverflow.com/questions/39258593/unreliable-spi-byte-array-transfer-from-arduino-to-raspberry-pi", "title": "Unreliable SPI byte array transfer from Arduino to Raspberry Pi", "body": "<p>I'm working on a project that collects data from an Arduino Pro Mini and sends it using SPI to a raspberry Pi for storage.</p>\n\n<p>The Pro Mini will be reading analog input and calculating voltage (once I finish), and passing values to the Pi when prompted using an ISR.</p>\n\n<p>I'm using C/C++ for both platforms to keep it uniform. The slave code is snipped together using Arduino IDE and the master code is based off a BCM2835 SPI library example for the Pi. </p>\n\n<p>Arduino code is meant to calculate a <strong>float</strong> value and pre-process the float value into an array of 4 bytes/chars (I'm shooting for binary because I think it is the best way to go).\nOnce prompted by the Pi, each byte is sent and will be recompiled into a float.</p>\n\n<p>Here is what I have now:</p>\n\n<p>Slave</p>\n\n<pre><code>/*************************************************************\nARDUINO BREAKER READ/SPI PRE-PROC/TRANSMIT CASES\n****************************************************************/\n\n/***************************************************************\n Global Variables\n***************************************************************/\n\nbyte command = 0; //command from PI\nbyte bytes[4];    //\n\nint sensorVoltage, sensorCurrent; //eventual live reading vars\nfloat Voltage, Current, RealCurrent, RealVoltage, Power;\n\n/***************************************************************\n Set Up\n  -designate arudino as slave\n  -turn on interrupts\n***************************************************************/\n\nvoid setup (void)\n{\n  //debugging with serial monitor\n  Serial.begin(9600);\n\n  // Set up arduino as slave\n  pinMode(MOSI, INPUT);\n  pinMode(SCK, INPUT);\n  pinMode(SS, INPUT);   \n  pinMode(MISO, OUTPUT);\n\n  // turn on SPI in slave mode\n  SPCR |= _BV(SPE);\n\n  // turn on interrupts\n  SPCR |= _BV(SPIE);\n\n}  // end of setup\n\n/*************************************************************\n Interrupt Service Routine \n ************************************************************/\n\n// SPI interrupt routine\nISR (SPI_STC_vect)\n{\n  delay(500); //for errors\n\n  // Create union of shared memory space\n  union \n  {\n    float f_var;\n    unsigned char bytes[4];\n  } u;\n\n  // Overwrite bytes of union with float variable\n  u.f_var = RealVoltage;\n\n  // Assign bytes to input array\n  memcpy(bytes, u.bytes, 4);\n\n  byte c = SPDR;\n  command = c; \n\n  switch (command)\n  {\n  // null command zeroes register\n  case 0:\n\n    SPDR = 0;\n    break;\n\n  // case a - d reserved for voltage\n  case 'a':\n    SPDR = bytes[3];  \n    break;\n\n  // incoming byte, return byte result\n  case 'b':\n\n    SPDR = bytes[2];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'c':\n\n    SPDR =  bytes[1];  \n    break;\n\n\n  // incoming byte, return byte result    \n  case 'd':\n\n    SPDR = bytes[0];  \n    break;\n\n /**  // case e -h reserved for current\n  case 'e':\n\n    SPDR = amps.b[0];  \n    break;\n\n  // incoming byte, return byte result\n  case 'f':\n\n    SPDR = amps.b[1];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'g':\n\n    SPDR = amps.b[2];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'h':\n\n    SPDR = amps.b[3];  \n    break;\n\n   // case i - l reserved for wattage\n  case 'i':\n\n    SPDR = watts.b[0];  \n    break;\n\n  // incoming byte, return byte result\n  case 'j':\n\n    SPDR = watts.b[1];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'k':\n\n    SPDR = watts.b[2];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'l':\n\n    SPDR = watts.b[3];  \n    break;**/\n\n  } // end of switch\n\n}  // end of interrupt service routine (ISR) SPI_STC_vect\n\n/***************************************************************  \n Loop until slave is enabled by Pi.\n****************************************************************/\nvoid loop (void)\n{\n/*************************************************************\nRead and Calculate\n****************************************************************/\n\n  /**\n  sensorVoltage = analogRead(A2);\n  sensorCurrent = analogRead(A3);\n  Voltage = sensorVoltage*(5.0/1023.0);\n  Current = sensorCurrent*(5.0/1023.0);\n  RealCurrent = Current/0.204545;\n  RealVoltage = (Voltage/0.022005);\n  Power = RealVoltage*RealCurrent;\n**/\n  RealVoltage = 1.234;\n/*************************************************************\nLoop Check for SS activation\n****************************************************************/\n\n  // if SPI not active, clear current command, else preproc floats and pass to SPI\n  if (digitalRead (SS) == HIGH){\n    command = 0;\n  }\n/*************************************************************\nDebug with serial monitor\n****************************************************************/\n/*\n  Serial.print(\"Byte 3: \");\n  Serial.println(bytes[3],BIN);\n  delay(500);\n  Serial.print(\"Byte 2: \");\n  Serial.println(bytes[2],BIN);\n  delay(500);\n  Serial.print(\"Byte 1: \");\n  Serial.println(bytes[1],BIN);\n  delay(500);\n  Serial.print(\"Byte 0: \");\n  Serial.println(bytes[0],BIN);\n  delay(1000);\n  Serial.println();*/\n}\n</code></pre>\n\n<p>Master</p>\n\n<pre><code>#include &lt;bcm2835.h&gt;\n#include &lt;stdio.h&gt;\n\n\nvoid setup()\n{\n    bcm2835_spi_begin();\n    bcm2835_spi_setBitOrder(BCM2835_SPI_BIT_ORDER_LSBFIRST);      // The default\n    bcm2835_spi_setDataMode(BCM2835_SPI_MODE0);                   // The default\n    bcm2835_spi_setClockDivider(BCM2835_SPI_CLOCK_DIVIDER_65536); // The default\n    bcm2835_spi_setChipSelectPolarity(BCM2835_SPI_CS0, LOW);      // the default\n}\n\nchar getByte(const char command){\n\n    char read_data = bcm2835_spi_transfer(command);\n    delay(100);\n    return read_data;\n}\n\nint main(int argc, char **argv)\n{\n//If you call this, it will not actually access the GPIO\n//Use for testing\n//bcm2835_set_debug(1);\n\n    if (!bcm2835_init())\n        return 1;\n    setup();\n\n//Start communication       \n    bcm2835_spi_chipSelect(BCM2835_SPI_CS0);// Enable 0\n\n    //voltage 1-4  \n    char read_data = getByte('a');\n    printf(\"byte is %02d\\n\", read_data);\n\n    read_data = getByte('b');\n    printf(\"byte is %02d\\n\", read_data);\n\n    read_data = getByte('c');\n    printf(\"byte is %02d\\n\", read_data);\n\n    read_data = getByte('d');\n    printf(\"byte is %02d\\n\", read_data);    \n\n   /** voltage = volts.f;   \n    printf(\"%.6f\", voltage);\n    printf(\"\\n\");\n    **/\n    delay(1000);   \n\n    bcm2835_spi_setChipSelectPolarity(BCM2835_SPI_CS0, HIGH);\n    bcm2835_spi_chipSelect(BCM2835_SPI_CS0);// Disable 0\n    bcm2835_spi_end();\n    bcm2835_close();\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm using a fixed value to debug the code. Sometimes the output from SPI on the Pi is accurate, but otherwise it changes and outputs partially accurate and/or random bytes.</p>\n\n<p>The issue I have been unable to work out is stability on the side of the Pi, so I am looking for help evaluating whether my code is causing inaccuracies or if it's my hardware. </p>\n"}, {"tags": ["c", "binary", "bits"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1472676213, "post_id": 39258583, "comment_id": 65853368, "body": "Please just Google twos  complement"}, {"owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 0, "creation_date": 1472676277, "post_id": 39258583, "comment_id": 65853398, "body": "Why it takes more bits to store a signed number? Because of the bit sign...."}, {"owner": {"reputation": 706, "user_id": 6761184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/89aba8d550e80edfe0c721440d4c5a98?s=128&d=identicon&r=PG&f=1", "display_name": "Davide Visentin", "link": "https://stackoverflow.com/users/6761184/davide-visentin"}, "reply_to_user": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 2, "creation_date": 1472676479, "post_id": 39258583, "comment_id": 65853481, "body": "@RyanB because the largest negative number is 1 followed by all 0 (-(2^(wordsize-1))), while the largest positive number is 0 followed by all 1 (2^(wordsize-1)-1)."}], "answers": [{"tags": [], "owner": {"reputation": 706, "user_id": 6761184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/89aba8d550e80edfe0c721440d4c5a98?s=128&d=identicon&r=PG&f=1", "display_name": "Davide Visentin", "link": "https://stackoverflow.com/users/6761184/davide-visentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472676306, "creation_date": 1472676306, "answer_id": 39258695, "question_id": 39258583, "link": "https://stackoverflow.com/questions/39258583/kr-exercise-3-4-negative-numbers-represented-in-binary/39258695#39258695", "title": "K&amp;R Exercise 3-4: Negative Numbers Represented In Binary", "body": "<p>The problem is that, if n is the largest negative number, when you do n=-n you obtain 0, bacause you cannot represent a positive number that big.</p>\n\n<p>A solution can be to hold the positive number in a long integer.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 0, "last_activity_date": 1472677190, "creation_date": 1472677190, "answer_id": 39258915, "question_id": 39258583, "link": "https://stackoverflow.com/questions/39258583/kr-exercise-3-4-negative-numbers-represented-in-binary/39258915#39258915", "title": "K&amp;R Exercise 3-4: Negative Numbers Represented In Binary", "body": "<p>In two's complement representation, the range of values you can represent is <code>-2<sup>n-1</sup></code> to <code>2<sup>n-1</sup>-1</code>. Thus, with 8 bits, you can represent values in the range -128 to 127.  That's what's meant by the phrase, \"the largest negative number a word can hold is greater than that of the largest positive number.\"</p>\n\n<p>Illustrating with just 3 bits to make it clearer:<pre><code>Value    Bits\n-----    ----\n    0    000\n    1    001\n    2    010\n    3    011\n   -4    100\n   -3    101\n   -2    110\n   -1    111\n</code></pre></p>\n\n<p>With 3 bits, there's no way we can represent a <em>positive</em> <code>4</code> in two's complement, so <code>n = -n;</code> won't give us the result we expect<sup>1</sup>.  That's why the original <code>atoi</code> implementation above can't deal with <code>INT_MIN</code>.</p>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li>Behavior on signed integer overflow is <em>undefined</em>, meaning that there's no fixed result.\n</ol>\n\n<p></sup>  </p>\n"}], "owner": {"reputation": 29, "user_id": 6739230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pT8hU.png?s=128&g=1", "display_name": "boy", "link": "https://stackoverflow.com/users/6739230/boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 39258915, "answer_count": 2, "score": 0, "last_activity_date": 1472677190, "creation_date": 1472675813, "question_id": 39258583, "link": "https://stackoverflow.com/questions/39258583/kr-exercise-3-4-negative-numbers-represented-in-binary", "title": "K&amp;R Exercise 3-4: Negative Numbers Represented In Binary", "body": "<p>I'm having a hard time understanding this exercise:</p>\n\n<blockquote>\n  <p>In a two's complement number representation, our version of itoa does not\n  handle the largest negative number, that is, the value of n equal to -(2^(wordsize-1)). Explain why not. Modify it to print that value correctly, regardless of the machine on which it runs.</p>\n</blockquote>\n\n<p>Here is what the itoa originally looks like:</p>\n\n<pre><code>void reverse(char s[], int n)\n{\n  int toSwap;\n  int end = n-1;\n  int begin = 0;\n\n  while(begin &lt;= end) // Swap the array in place starting from both ends.\n    {\n      toSwap = s[begin];\n      s[begin] = s[end];\n      s[end] = toSwap;\n\n      --end;\n      ++begin;\n    }\n}\n\n// Converts an integer to a character string.\nvoid itoa(int n, char s[])\n{\n  int i, sign;\n  if ((sign = n) &lt; 0)\n    n = -n;\n  i = 0;\n  do\n    {\n      s[i++] = n % 10 + '0';\n    } while ((n /= 10) &gt; 0);\n\n  if (sign &lt; 0)\n    s[i++] = '-';\n  s[i] = '\\0';\n  reverse(s, i);\n}\n</code></pre>\n\n<p>I found this answer, but I don't understand the explanation:\n<a href=\"http://www.stevenscs.com/programs/KR/\" rel=\"nofollow\">http://www.stevenscs.com/programs/KR/</a>$progs/KR-EX3-04.html</p>\n\n<blockquote>\n  <p>Because the absolute value of the largest negative number a word can hold is greater than that of the largest positive number, the statement early in iota that sets positive a negative number corrupts its value.</p>\n</blockquote>\n\n<p>Are they saying that negative numbers contain more bits because of the sign than a positive number which has no sign?  Why would multiplying by -1 affect how the large negative number is stored?</p>\n"}, {"tags": ["ios", "c", "xcode", "openssl", "fips"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472695710, "post_id": 39258490, "comment_id": 65859129, "body": "I&#39;m fairly certain Apple cannot transform the code like that. Otherwise, it invalidates the validation. The resulting object code is sequestered; it cannot be modified and/or tampered. I&#39;m guessing you cannot add switches like <code>-fembed-bitcode</code> without breaking the validation."}, {"owner": {"reputation": 11610, "user_id": 442695, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/37b501b3f484490a6a5127f83fa31f94?s=128&d=identicon&r=PG", "display_name": "Bot", "link": "https://stackoverflow.com/users/442695/bot"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472742342, "post_id": 39258490, "comment_id": 65884758, "body": "@jww Is there a way to make that specific file not have bitcode?"}, {"owner": {"reputation": 11610, "user_id": 442695, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/37b501b3f484490a6a5127f83fa31f94?s=128&d=identicon&r=PG", "display_name": "Bot", "link": "https://stackoverflow.com/users/442695/bot"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472742463, "post_id": 39258490, "comment_id": 65884831, "body": "@jww the odd part is just having fips_premain.c compiled and included in bitcode without any references in code is what causes the crash"}], "owner": {"reputation": 11610, "user_id": 442695, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/37b501b3f484490a6a5127f83fa31f94?s=128&d=identicon&r=PG", "display_name": "Bot", "link": "https://stackoverflow.com/users/442695/bot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1472675397, "creation_date": 1472675397, "question_id": 39258490, "link": "https://stackoverflow.com/questions/39258490/fips-premain-c-with-include-bitcode-causes-crash", "title": "fips_premain.c with Include bitcode causes crash", "body": "<p>I have added the FIPS compliant openssl module to our iOS app. After which we submitted to apple and it kept getting rejected for an instant crash that we were unable to duplicate with our enterprise build.</p>\n\n<p>After much trial and error we found that it came down to the <code>fips_premain.c</code> file and having <code>Include bitcode.</code> checked when creating ad-hoc builds or submitting to apple. When <code>Include bitcode</code> is checked, the app will crash with the <code>fips_premain.c</code> file added to the Compile Sources phase.</p>\n\n<p>I have tried adding the <code>-fembed-bitcode</code> flag into the fips_premain.c compiler flags but that doesn't seem to resolve the issue.</p>\n\n<p>Is there a way to Include bitcode for <code>fips_premain.c</code> and send it to apple or a way to bypass <code>fips_premain.c</code> from bitcode so the app stops crashing during apple review or ad-hoc usage?</p>\n"}, {"tags": ["c", "multithreading", "parallel-processing", "pthreads", "multitasking"], "comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1472675781, "post_id": 39258289, "comment_id": 65853137, "body": "Something like Many-to-Many thread design? There is Many to One, Many-to Many and Hybrid model or One-to-One."}, {"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "reply_to_user": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1472675921, "post_id": 39258289, "comment_id": 65853212, "body": "I could have 1 or more kernel-level threads executing user-level threads. So, yes it is N:M."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1472678744, "post_id": 39258289, "comment_id": 65854532, "body": "What do you think &quot;blocked&quot; means?"}, {"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1472679562, "post_id": 39258289, "comment_id": 65854859, "body": "@kfsone Am I missing something here? Do you mean, because it is block, there is no means to detect that?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1472679860, "post_id": 39258289, "comment_id": 65854980, "body": "@TuaimiAA That it&#39;s blocked - typically suspended by the kernel. pthread_mutex_lock, for instance, guarantees that it <i>will not</i> return EINTR. So if a thread is blocked on a mutex, it&#39;s blocked. If a thread is blocked on a read operation, your choices are to wait for the kernel to signal that data is ready or to <i>interrupt</i> the read, which means that the calling code will have to re-call <code>read</code>. But I&#39;m also questioning whether you are worrying about something that has been stopped for a long time vs something that has been suspended e.g for a linked operation in another thread."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1472680830, "post_id": 39258289, "comment_id": 65855313, "body": "@TuaimiAA Consider: how would it be possible to get this information accurately? Lets say you call <code>ret = pthread_imaginary_status(threadId)</code>. How will you know how accurate (decayed) the information is? If ret tells us the thread is blocked, the kernel could easily have unblocked the thread at literally the same instant as your thread queried the value, but didn&#39;t commit the update until the very next instruction. Or the kernel could have suspended your thread for some period of time on the <code>return</code> of this imaginary function."}, {"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1472683147, "post_id": 39258289, "comment_id": 65856123, "body": "@kfsone Got it. However, I am exploring the possibility to achieve this via any mechanism. Signals for example might be one i.e., receiving a signal when a blocking operation has occurred; similar to performing a timed context-switch upon receiving SIGPROF. So, regarding your valid point of getting the information accurately, it does not matter as long as I can detect the blocked operation/thread and execute a ready thread instead to achieve almost a full CPU quantum of the underlying kernel-thread. I hope this makes sense."}], "answers": [{"comments": [{"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "edited": false, "score": 0, "creation_date": 1472689933, "post_id": 39260273, "comment_id": 65857856, "body": "Thanks for your answer. When I first start looking into this I came across GNU pth. In addition to what you have pointed out, it also seems N:1 model where all user-level threads mapped and scheduled on one kernel-thread; without a facility to, for example, manually migrate a suspended thread to resume on another kernel-thread as per my requirment. However, pth can be configured to automatically map system calls (e.g., read) into pth library to generate non-blocking ones (or in other words, only block pth threads)."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "edited": false, "score": 0, "creation_date": 1472691813, "post_id": 39260273, "comment_id": 65858254, "body": "@TuaimiAA Yeah, you&#39;d have to write what you want. It doesn&#39;t exist because experimentation has shown that it sucks. What&#39;s your use case? Why can&#39;t you do what everyone else does with similar use cases?"}, {"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "edited": false, "score": 0, "creation_date": 1472694691, "post_id": 39260273, "comment_id": 65858893, "body": "I need to execute tasks in multithreaded environment (pthreads). The tasks are basically user functions that might use blocking operations within and can be synchronized. I need to hide latency in my implementation. So, I am exploring the idea of implementing the tasks as user-level threads for a better control of their execution context such that, if a task blocks or synchronizes with others, I context-switch to other ready tasks. Consequently, almost full CPU quantum of the underlying kernel-thread can be achieved. As far as I know, similar use cases adopt similar concepts as this."}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1472701634, "post_id": 39260273, "comment_id": 65860411, "body": "If you run each task in a separate pthread then the kernel will take care of context-switching to other ready tasks when one blocks."}, {"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "reply_to_user": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1472702036, "post_id": 39260273, "comment_id": 65860488, "body": "@caf pthreads are heavyweight compared to user-level, and context switching is much more expensive."}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1472702429, "post_id": 39260273, "comment_id": 65860587, "body": "Kernel context switching is actually very fast, particularly between two threads using the same mm (so they don&#39;t require a TLB flush).  You want to do this at the point where a thread is blocking, which requires a call into the kernel <i>anyway</i>, so you&#39;re already paying that overhead."}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 1, "creation_date": 1472731568, "post_id": 39260273, "comment_id": 65876504, "body": "To put this another way: you&#39;re asking that when a thread goes to wait in the kernel, the kernel instead sets up a signal frame or similar and returns to userspace to execute that handler, from where you can switch user threads.  But that isn&#39;t going to be any faster than just letting the kernel directly switch to another pending thread in the same process and return to userspace."}, {"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "reply_to_user": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1472759402, "post_id": 39260273, "comment_id": 65894052, "body": "@caf Thank for your valuable comments and the clarification. I have seen parallel execution models using similar approach (i.e., N:M) by letting waiting user-level threads context-switch instead of kernel switching. Considering situations in which million of tasks need to be executed, I do not think it is optimal to just launch kernel thread for each. However, if number of kernel threads (possibly equal to hardware threads/processors) are working on the tasks, I imagine this would prevent unnecessary kernel switching as kernel threads are scheduled preemptively."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1472761211, "post_id": 39260273, "comment_id": 65894836, "body": "If you have very large numbers of tasks that need to be executed, they should be sitting in some kind of passive structure (like a queue). They really shouldn&#39;t have things like stacks associated with them."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1472762026, "post_id": 39260273, "comment_id": 65895174, "body": "Look at how the Go language runtime does it. If I remember correctly it keeps a thread pool for doing system calls. That way it can keep its goroutine scheduler running goroutines even while waiting on something."}, {"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "edited": false, "score": 0, "creation_date": 1472763498, "post_id": 39260273, "comment_id": 65895870, "body": "@DavidSchwartz Yes, tasks are pushed into a queue for execution. A task will be tied to the kernel thread that started its execution it if there is no stack associated with it."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "edited": false, "score": 0, "creation_date": 1472767301, "post_id": 39260273, "comment_id": 65897467, "body": "@TuaimiAA In C++, you can do this nicely with Boost&#39;s coroutines."}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 1, "creation_date": 1472779247, "post_id": 39260273, "comment_id": 65900427, "body": "If you don&#39;t want your runnable kernel threads to preempt each other, you can schedule them as <code>SCHED_FIFO</code> at the same static priority level - in that case a running thread will get to run until it blocks."}, {"owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "reply_to_user": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1472849294, "post_id": 39260273, "comment_id": 65935006, "body": "@caf Thank you for pointing this out. I will definitely test it."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1472684621, "last_edit_date": 1472684621, "creation_date": 1472684150, "answer_id": 39260273, "question_id": 39258289, "link": "https://stackoverflow.com/questions/39258289/user-level-threads-context-switching-how-to-detect-when-a-thread-is-blocking-in/39260273#39260273", "title": "User-level threads context switching: How to detect when a thread is blocking in C?", "body": "<p>There used to be code that did this, for example <a href=\"https://www.gnu.org/software/pth/\" rel=\"nofollow\">GNU pth</a>. It's generally been abandoned because it just doesn't work very well and we have much better options now. You have two choices:</p>\n\n<p>1) If you have OS help, you can use the OS mechanisms. Windows provides OS help for this, IOCP dispatching uses it.</p>\n\n<p>2) If you have no OS help, then you have to convert all blocking operations into non-blocking ones that call your dispatcher rather than blocking. So, for example, if someone calls <code>socket</code>, you intercept that call and set the socket non-blocking. When they call <code>read</code>, you intercept that call and if they get a \"would block\" indication, you arrange to resume when the operation might succeed and schedule another thread.</p>\n\n<p>You can look at GNU pth to see how you might make option 2 work. But be warned, GNU pth is <a href=\"https://www.mail-archive.com/pth-users@gnu.org/msg00336.html\" rel=\"nofollow\">full of reported bugs</a> that have never been fixed since it was abandoned. It will give you an idea of how to implement things like mutexes and sleeps in a cooperative user-space threading environment. But don't actually use the code.</p>\n"}], "owner": {"reputation": 845, "user_id": 804376, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/085b7927e87b8721aaa4a8854ba7b104?s=128&d=identicon&r=PG", "display_name": "TuaimiAA", "link": "https://stackoverflow.com/users/804376/tuaimiaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1473211657, "creation_date": 1472674537, "last_edit_date": 1473211657, "question_id": 39258289, "link": "https://stackoverflow.com/questions/39258289/user-level-threads-context-switching-how-to-detect-when-a-thread-is-blocking-in", "title": "User-level threads context switching: How to detect when a thread is blocking in C?", "body": "<p>As the title suggests, is there a way in C to detect when a user-level thread running on top of a kernel-level thread e.g., pthread has blocked (or about to block) for I/O?</p>\n\n<p>My use case is as follows: I need to execute tasks in a multithreaded environment (on top of kernel threads e.g., pthreads). The tasks are basically user functions that can be synchronized and may use blocking operations within. I need to hide latency in my implementation. So, I am exploring the idea of implementing the tasks as user-level threads for better control of their execution context such that, when a task blocks or synchronizes, I context-switch to other ready tasks (i.e., implementing my own scheduler for the user-level threads). Consequently, almost the full use of the OS\u2019s time quantum per kernel thread can be achieved.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 8, "creation_date": 1472669942, "post_id": 39257049, "comment_id": 65850111, "body": "I&#39;m voting to close this question as off-topic because it is a homework question showing no effort to do the work. From the <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>: <i>Questions asking for homework help must include a summary of the work you&#39;ve done so far to solve the problem, and a description of the difficulty you are having solving it.</i> You&#39;ve done neither of those things."}, {"owner": {"reputation": 13, "user_id": 6761517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R7M7PLYLEus/AAAAAAAAAAI/AAAAAAAAAOY/ZyE7SBUH8P0/photo.jpg?sz=128", "display_name": "ron ramon", "link": "https://stackoverflow.com/users/6761517/ron-ramon"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1472990637, "post_id": 39257049, "comment_id": 65965468, "body": "ok, i did a mistake. i hope that this is a better qustion... and this point and for the future i will add my ways of solving the problem"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1472992297, "post_id": 39257049, "comment_id": 65965919, "body": "How do you define the number of differences? What&#39;s the number of differences between &quot;tralfamador&quot; and &quot;ralfamador&quot;?"}, {"owner": {"reputation": 13, "user_id": 6761517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R7M7PLYLEus/AAAAAAAAAAI/AAAAAAAAAOY/ZyE7SBUH8P0/photo.jpg?sz=128", "display_name": "ron ramon", "link": "https://stackoverflow.com/users/6761517/ron-ramon"}, "edited": false, "score": 0, "creation_date": 1472992795, "post_id": 39257049, "comment_id": 65966034, "body": "if word1[i]!=word2[i], this is a difference. in your example the are 11 differences"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6761517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R7M7PLYLEus/AAAAAAAAAAI/AAAAAAAAAOY/ZyE7SBUH8P0/photo.jpg?sz=128", "display_name": "ron ramon", "link": "https://stackoverflow.com/users/6761517/ron-ramon"}, "edited": false, "score": 0, "creation_date": 1472991959, "post_id": 39316821, "comment_id": 65965815, "body": "and if i need the exact number of errors, and not thet there are?"}, {"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "reply_to_user": {"reputation": 13, "user_id": 6761517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R7M7PLYLEus/AAAAAAAAAAI/AAAAAAAAAOY/ZyE7SBUH8P0/photo.jpg?sz=128", "display_name": "ron ramon", "link": "https://stackoverflow.com/users/6761517/ron-ramon"}, "edited": false, "score": 0, "creation_date": 1472993443, "post_id": 39316821, "comment_id": 65966186, "body": "the exact number is 1, you are check if they both are empty"}], "tags": [], "owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "is_accepted": false, "score": 0, "last_activity_date": 1472991410, "creation_date": 1472991410, "answer_id": 39316821, "question_id": 39257049, "link": "https://stackoverflow.com/questions/39257049/how-to-compare-between-two-strings-using-recursion-in-c/39316821#39316821", "title": "how to compare between two strings using recursion in C", "body": "<ul>\n<li>when both strings are empty (*str == 0) return true </li>\n<li>when just one string is empty, return false</li>\n<li>if first chars are not same return false </li>\n<li>otherwise return the result of comparing the rest of the strings</li>\n</ul>\n\n<p>I think you second if has some errors</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6761517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R7M7PLYLEus/AAAAAAAAAAI/AAAAAAAAAOY/ZyE7SBUH8P0/photo.jpg?sz=128", "display_name": "ron ramon", "link": "https://stackoverflow.com/users/6761517/ron-ramon"}, "edited": false, "score": 0, "creation_date": 1473001069, "post_id": 39317563, "comment_id": 65968499, "body": "thx for your explenations, they helped me alot, buti can&#39;t use static nor use err as a parameter... the function must be as it defined and without using static nor call another functions... i&#39;m trying another way. if it will work i will post it..."}], "tags": [], "owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "is_accepted": true, "score": 0, "last_activity_date": 1472996693, "last_edit_date": 1592644375, "creation_date": 1472996693, "answer_id": 39317563, "question_id": 39257049, "link": "https://stackoverflow.com/questions/39257049/how-to-compare-between-two-strings-using-recursion-in-c/39317563#39317563", "title": "how to compare between two strings using recursion in C", "body": "<p>Code contains several errors:</p>\n<ol>\n<li><p>do not use <code>strcmp()</code> as a function name unless you really know what you do!  This function and its semantic is defined by the C standard. The compiler can rely on it and can replace calls with a more efficient implementation</p>\n</li>\n<li><p><code>strlen(str1)-strlen(str2) &gt; 1</code> is prone to (defined) unsigned integer underflows and will hold in most cases (e.g. <code>strlen(&quot;a&quot;) - strlen(&quot;aaaaaaa&quot;) &gt; 1</code> is <strong>true</strong>).</p>\n<p>Use <code>strlen(str1) &gt; strlen(str2) + 1</code> (usually you should check the <code>+ 1</code> operation for overflows too)</p>\n</li>\n<li><p>The modifications of <code>err</code> will never be seen by the recursive calls.  Either declare it as <code>static</code> or pass it as a paramter to your function.</p>\n</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 6761517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R7M7PLYLEus/AAAAAAAAAAI/AAAAAAAAAOY/ZyE7SBUH8P0/photo.jpg?sz=128", "display_name": "ron ramon", "link": "https://stackoverflow.com/users/6761517/ron-ramon"}, "is_accepted": false, "score": 0, "last_activity_date": 1473003812, "creation_date": 1473003812, "answer_id": 39318675, "question_id": 39257049, "link": "https://stackoverflow.com/questions/39257049/how-to-compare-between-two-strings-using-recursion-in-c/39318675#39318675", "title": "how to compare between two strings using recursion in C", "body": "<p>this is the final code i'v written...   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint one(char* s1, char* s2){\n  int two;\n  if(*s1==' '){\n      two=one(s1+1,s2);\n      return two;\n  }\n  if(*s2==' '){\n      two=one(s1,s2+1);\n      return two;\n     }\n  if(*s1=='\\0' &amp;&amp; *s2=='\\0'){\n      return 0;\n  }\n    if(*s1=='\\0'){\n        return strlen(s2);\n    }\n  if(*s2=='\\0'){\n      return strlen(s1);\n  }\n  two=one(s1+1,s2+1);\n  if (*s1==*s2){\nreturn two;\n}\n    else{\n        return two+1;\n}\n} \nvoid main(){\n    int diff;\n    char str1[51],str2[51];\nprintf(\"enter the first string\\n\");\n    scanf(\"%s\", &amp;str1);\n    printf(\"enter the second string\\n\");\n    scanf(\"%s\", &amp;str2);\n    diff=one(str1,str2);\n    if(diff==1){\n    printf(\"1\\n\");\n}\n    else{\n        printf(\"0\\n\");\n}\n  }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6761517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R7M7PLYLEus/AAAAAAAAAAI/AAAAAAAAAOY/ZyE7SBUH8P0/photo.jpg?sz=128", "display_name": "ron ramon", "link": "https://stackoverflow.com/users/6761517/ron-ramon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3008, "favorite_count": 0, "closed_date": 1473162853, "accepted_answer_id": 39317563, "answer_count": 3, "score": -2, "last_activity_date": 1473003812, "creation_date": 1472669789, "last_edit_date": 1472990971, "question_id": 39257049, "link": "https://stackoverflow.com/questions/39257049/how-to-compare-between-two-strings-using-recursion-in-c", "closed_reason": "Not suitable for this site", "title": "how to compare between two strings using recursion in C", "body": "<p>i need to compre two strings and to compare them using recursion. in the process to count the number of the differences up to two.\ni tried this:</p>\n\n<pre><code>int strcmp1(char *str1, char *str2){\nint err=0;\nif(strlen(str1)-strlen(str2)&gt;1 ||strlen(str1)-strlen(str2)&lt;1)\n    return 0;\n\n if (*str1 =='\\0' &amp;&amp; *str2=='\\0'|| err==2)\n    return err;\n\nif (*str1!=*str2)\n    err++;\n\nreturn strcmp1(str1 + 1, str2 + 1);\n}\n</code></pre>\n\n<p>the code i wrote returns only 0 or 1, not the amount of differences...\ncan you please tell me what am i doing wrong?\nthx :)</p>\n"}, {"tags": ["c++", "c", "gcc", "attributes", "extern-c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1472668197, "post_id": 39256563, "comment_id": 65849058, "body": "@iharob: It could call into external Fortran code, which could throw."}, {"owner": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1472668198, "post_id": 39256563, "comment_id": 65849061, "body": "@iharob Exactly.  So the compiler should optimize just the same with or without the attribute?  I wasn&#39;t sure if there were some subtleties with libraries, or if C code could call back into C++, etc."}, {"owner": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1472668302, "post_id": 39256563, "comment_id": 65849114, "body": "@KerrekSB So &quot;extern C&quot; does not guarantee &quot;no throw&quot;.  A function can still throw if it is wrapped in &quot;extern C&quot;.  That makes sense."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1472669038, "post_id": 39256563, "comment_id": 65849538, "body": "<code>extern &quot;C&quot;</code> can call straight into C++ code marked as <code>extern &quot;C&quot;</code>.  So the questions becomes can exceptions propagate out of a C++ function marked as <code>extern &quot;C&quot;</code>?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1472671063, "post_id": 39256563, "comment_id": 65850744, "body": "I feel very stupid. I myself wrote a c++ plugin system which of course used c to construct classes. Contructors can throw and I used <code>new</code> of course, so it&#39;s not redundant at ll. In fact you can externalize any c++ function and use <i>stl</i>, the <code>new</code> operator (<i>which does throw exceptions</i>). The only thing <code>extern &quot;C&quot;</code> does is prevent name mangling."}], "answers": [{"tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": true, "score": 0, "last_activity_date": 1472669176, "creation_date": 1472669176, "answer_id": 39256888, "question_id": 39256563, "link": "https://stackoverflow.com/questions/39256563/does-it-make-sense-to-use-attribute-nothrow-inside-extern-c/39256888#39256888", "title": "Does it make sense to use _attribute__ ((nothrow)) inside extern C?", "body": "<p>Yes, it does. From gcc documentation:</p>\n\n<blockquote>\n  <p>For example, most functions in the standard C library can be\n  guaranteed not to throw an exception with the notable exceptions of\n  qsort and bsearch that take function pointer arguments.</p>\n</blockquote>\n"}], "owner": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 39256888, "answer_count": 1, "score": 4, "last_activity_date": 1472669176, "creation_date": 1472668013, "question_id": 39256563, "link": "https://stackoverflow.com/questions/39256563/does-it-make-sense-to-use-attribute-nothrow-inside-extern-c", "title": "Does it make sense to use _attribute__ ((nothrow)) inside extern C?", "body": "<p>I have some C code being called from C++.<br>\nThe header resembles the following:  </p>\n\n<pre><code>#ifndef CLibH\n#define CLibH\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n//C API\nvoid foo(void);\n// ...\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif\n</code></pre>\n\n<p>Since I'm already using <code>extern C</code>,<br>\nis there any benefit to adding the <code>nothrow</code> compiler attribute?</p>\n\n<pre><code>#ifndef CLibH\n#define CLibH\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n//C API\nvoid foo(void) __attribute__((nothrow));\n// ...\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif\n</code></pre>\n\n<p>Does <code>extern C</code> make this redundant?<br>\nAre there still advantages to applying it under these circumstances?</p>\n"}, {"tags": ["c", "swift", "macros", "swift2", "long-long"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1472668928, "post_id": 39256489, "comment_id": 65849458, "body": "Your wrapping solution works for me (tested with Xcode 8 beta 6). <code>print(getNSURLResponseUnknownLength())</code> compiles, runs, and prints <code>-1</code>."}, {"owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1472668967, "post_id": 39256489, "comment_id": 65849489, "body": "@MartinR interesting, does not work with Xcode 7.3.1 for me.  Maybe I was doing something wrong somewhere?"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1472669080, "post_id": 39256489, "comment_id": 65849563, "body": "Btw, here is a similar issue <a href=\"http://stackoverflow.com/questions/34042017/macro-is-working-in-objective-c-but-not-it-swift\" title=\"macro is working in objective c but not it swift\">stackoverflow.com/questions/34042017/&hellip;</a> with the same solution :)"}, {"owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1472669132, "post_id": 39256489, "comment_id": 65849600, "body": "@MartinR You have seen it all when it comes to Swift!"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1472669630, "post_id": 39256489, "comment_id": 65849901, "body": "Btw, you can make it work in Xcode 7.3.1 with <code>static long long getNSURLResponseUnknownLength() { ...}</code>. But of course defining a constant is nicer."}, {"owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1472669743, "post_id": 39256489, "comment_id": 65849985, "body": "Nice find, thanks @MartinR!"}], "answers": [{"tags": [], "owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "is_accepted": true, "score": 3, "last_activity_date": 1472669720, "last_edit_date": 1495540804, "creation_date": 1472667661, "answer_id": 39256490, "question_id": 39256489, "link": "https://stackoverflow.com/questions/39256489/how-to-bridge-a-long-long-c-macro-to-swift/39256490#39256490", "title": "How to bridge a long long C macro to Swift?", "body": "<p>The solution is to declare a new constant value from the macro:</p>\n\n<pre><code>const long long myNSURLResponseUnknownLength = NSURLResponseUnknownLength;\n</code></pre>\n\n<p>This bridges <code>NSURLResponseUnknownLength</code> as an <code>Int64</code> <code>let</code> constant.</p>\n\n<p>Usage:</p>\n\n<pre><code>if urlResponse.expectedContentLength == myNSURLResponseUnknownLength {\n    // ...\n}\n</code></pre>\n\n<p>Martin R mentions <a href=\"https://stackoverflow.com/questions/39256489/how-to-bridge-a-long-long-c-macro-to-swift?noredirect=1#comment65849901_39256489\">in the comments</a> that the attempt in the question works on Xcode 8.  In Xcode 7, you need to declare the function as <code>static</code>:</p>\n\n<pre><code>static long long getNSURLResponseUnknownLength() { /* */ }\n</code></pre>\n\n<p>This is a known issue with Swift and will hopefully be fixed in an upcoming release.</p>\n\n<ul>\n<li><p><a href=\"https://bugs.swift.org/browse/SR-485\" rel=\"nofollow noreferrer\">SR-485</a></p></li>\n<li><p><code>rdar://problem/20462344</code></p></li>\n</ul>\n"}], "owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "accepted_answer_id": 39256490, "answer_count": 1, "score": 2, "last_activity_date": 1482944726, "creation_date": 1472667661, "last_edit_date": 1482944726, "question_id": 39256489, "link": "https://stackoverflow.com/questions/39256489/how-to-bridge-a-long-long-c-macro-to-swift", "title": "How to bridge a long long C macro to Swift?", "body": "<p>In Foundation there is C macro <code>NSURLResponseUnknownLength</code> defined as a <code>long long</code>:</p>\n\n<pre><code>#define NSURLResponseUnknownLength ((long long)-1)\n</code></pre>\n\n<p>Due to the way macros are bridged to Swift, this constant is accessible in an Objective-C application, but not in a Swift application.  How can I make macros like these visible to Swift?</p>\n\n<p>I've tried wrapping the macro in a global C function in my bridging header:</p>\n\n<pre><code>long long getNSURLResponseUnknownLength() {\n    return NSURLResponseUnknownLength;\n}\n</code></pre>\n\n<p>But accessing <code>getNSURLResponseUnknownLength()</code> causes the <code>Undefined symbols for architecture</code> build error.</p>\n"}, {"tags": ["c", "function", "pointers", "parameters"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472665586, "post_id": 39255938, "comment_id": 65847597, "body": "Do you understand it is a pointer to a function?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1472665681, "post_id": 39255938, "comment_id": 65847661, "body": "@usr: Not even close."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1472665915, "post_id": 39255938, "comment_id": 65847826, "body": "@usr: If OP understood function pointers, we wouldn&#39;t be here."}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1472666303, "post_id": 39255938, "comment_id": 65848070, "body": "There is a cool little program in K&amp;R C book, around pg 137 <a href=\"http://www.ime.usp.br/~pf/Kernighan-Ritchie/C-Programming-Ebook.pdf\" rel=\"nofollow noreferrer\">here</a> that parses complicated pointer declarations to english descriptions and back.  Definitely worth a read"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1472666713, "post_id": 39255938, "comment_id": 65848286, "body": "<i>I don&#39;t understand the purpose of <code>(int*)</code> at the end of the first argument</i> : There is a difference between &quot;argument&quot; and &quot;parameter&quot;.  What you are referring as argument is actually a parameter."}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "reply_to_user": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1472671473, "post_id": 39255938, "comment_id": 65850964, "body": "@jenesaisquoi: There&#39;s also an online version (no idea if it&#39;s based off of the K&amp;R one or not, but it accomplishes the same thing): <a href=\"http://cdecl.ridiculousfish.com/\" rel=\"nofollow noreferrer\">cdecl.ridiculousfish.com</a>"}, {"owner": {"reputation": 234, "user_id": 6180573, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06c9b68ecb1a17f2b47231d3d700f020?s=128&d=identicon&r=PG&f=1", "display_name": "smrdo_prdo", "link": "https://stackoverflow.com/users/6180573/smrdo-prdo"}, "edited": false, "score": 0, "creation_date": 1472682778, "post_id": 39255938, "comment_id": 65856006, "body": "As others have mentioned you can use the program <code>cdecl</code> if you have it, or just use the website <a href=\"http://cdecl.ridiculousfish.com/?q=int+%28%2Aprogress_fn%29%28int%2A%29\" rel=\"nofollow noreferrer\">to parse complicated C declarations and more.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1472665807, "post_id": 39255957, "comment_id": 65847751, "body": "Maybe you should point out that <code>progress_fn</code> is the actual parameter, and the rest is how you specify what its type is."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1472665921, "post_id": 39255957, "comment_id": 65847830, "body": "@ScottHunter something like the edit I just made?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1472665946, "post_id": 39255957, "comment_id": 65847852, "body": "@gsamaras, The part under the bar is rather redundant."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 2, "last_activity_date": 1472665994, "last_edit_date": 1495540386, "creation_date": 1472665590, "answer_id": 39255957, "question_id": 39255938, "link": "https://stackoverflow.com/questions/39255938/c-pass-pointer-as-argument-in-function/39255957#39255957", "title": "C pass pointer as argument in function", "body": "<p><code>int (*progress_fn)(int*)</code> is <strong>function pointer</strong> decleration, and <code>(int *)</code> is the list of parameters the function accepts.</p>\n\n<p>So, this:</p>\n\n<pre><code>int (*progress_fn)(int*)\n</code></pre>\n\n<p>is a pointer to a function that will return an <code>int</code> and will receive one parameter, of type <code>int*</code>.</p>\n\n<p>So you have to understand that <code>progess_fn</code> is the <em>actual parameter</em>. All its relevant components define how the function's prototype is actually.</p>\n\n<hr>\n\n<p>For more, read <a href=\"https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work\">How do function pointers in C work?</a></p>\n"}, {"comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1472665922, "post_id": 39256027, "comment_id": 65847832, "body": "The question does not appear to be about <code>typedef</code>s."}, {"owner": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1472666045, "post_id": 39256027, "comment_id": 65847912, "body": "@ScottHunter I&#39;ve changed that, but the answer used <code>typedef</code> to avoid the confusion between an int pointer and a function pointer."}], "tags": [], "owner": {"reputation": 16685, "user_id": 2289509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F51FU.jpg?s=128&g=1", "display_name": "Elazar", "link": "https://stackoverflow.com/users/2289509/elazar"}, "is_accepted": false, "score": 2, "last_activity_date": 1472666014, "last_edit_date": 1472666014, "creation_date": 1472665821, "answer_id": 39256027, "question_id": 39255938, "link": "https://stackoverflow.com/questions/39255938/c-pass-pointer-as-argument-in-function/39256027#39256027", "title": "C pass pointer as argument in function", "body": "<p>Given this declarartion:</p>\n\n<pre><code>int progress_callback(int* a);\n//                    ^ this is the (int*) you asked about\n</code></pre>\n\n<p>You can call <code>H3I_hook</code> like this:</p>\n\n<pre><code>int id = something;\nint x = H3I_hook(progress_callback, &amp;id);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": true, "score": 10, "last_activity_date": 1472745716, "last_edit_date": 1472745716, "creation_date": 1472666001, "answer_id": 39256076, "question_id": 39255938, "link": "https://stackoverflow.com/questions/39255938/c-pass-pointer-as-argument-in-function/39256076#39256076", "title": "C pass pointer as argument in function", "body": "<p>Demystifying: </p>\n\n<pre><code>int (*progress_fn)(int*)\n</code></pre>\n\n<p>it can be interpreted like below:</p>\n\n<pre><code>int (*progress_fn)(int*)\n ^       ^          ^\n |       |          |___________ pointer to integer as argument\n |       |\n |     pointer to any function that has V and takes ^\n |\n |__________________________return type an integer\n</code></pre>\n"}], "owner": {"reputation": 909, "user_id": 4056023, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8b1c6f7f93c7bbe423eabdb69beea5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Zack", "link": "https://stackoverflow.com/users/4056023/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 834, "favorite_count": 0, "closed_date": 1472685714, "accepted_answer_id": 39256076, "answer_count": 3, "score": 3, "last_activity_date": 1472745716, "creation_date": 1472665519, "last_edit_date": 1472666763, "question_id": 39255938, "link": "https://stackoverflow.com/questions/39255938/c-pass-pointer-as-argument-in-function", "closed_reason": "Duplicate", "title": "C pass pointer as argument in function", "body": "<p>I came across the following code:</p>\n\n<pre><code>int H3I_hook(int (*progress_fn)(int*), int *id)\n{\n...\n}\n</code></pre>\n\n<p>I don't understand the purpose of <code>(int*)</code> at the end of the first argument? </p>\n"}, {"tags": ["c++", "c", "unit-testing", "cpputest"], "comments": [{"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472667273, "post_id": 39255726, "comment_id": 65848599, "body": "you need to show (at least excerpts of) the part where you define method1 and how you #include the various headers into the sources"}, {"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472667562, "post_id": 39255726, "comment_id": 65848726, "body": "@TemplateRex added includes. method1 is just any old method in the driver1.c file with a declaration in the driver1.h file."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472668190, "post_id": 39255726, "comment_id": 65849051, "body": "you can&#39;t add another <code>method1()</code> in driver2.cpp and link it together with driver2.cpp into the test driver. If you want to mock, you should tell CMake not to compile driver1.cpp as a dependency for test_driver2.cpp"}, {"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472668339, "post_id": 39255726, "comment_id": 65849135, "body": "And how would one go about doing that?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1472668433, "post_id": 39255726, "comment_id": 65849187, "body": "Why can&#39;t you have two different builds, one that includes the problematic header and one that doesn&#39;t? Inclusion of the header can be controlled by make."}, {"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1472668648, "post_id": 39255726, "comment_id": 65849301, "body": "@2501, the problem is that this is a much bigger network of drivers and tests that I&#39;m working with and it would be nice to have a general solution that can work for this example above because this is what I am having problems with. Also, including the header is not the problem, it&#39;s the double definition, although it seems as if we&#39;re on the right track so far."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "edited": false, "score": 0, "creation_date": 1472668895, "post_id": 39256697, "comment_id": 65849431, "body": "Thanks! I&#39;ll add the ability for my python build script to just run all executables in the directory instead of just tests.exe, so that I can have multiple builds, like 2501 mentioned. Will come back with +1&#39;s and accepted answers if I can get this change in."}, {"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "edited": false, "score": 0, "creation_date": 1472671119, "post_id": 39256697, "comment_id": 65850770, "body": "+1 Works great! The thing that I was missing was just having multiple compilation units for each test, which is much easier than trying to get them all into one."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "edited": false, "score": 0, "creation_date": 1472671446, "post_id": 39256697, "comment_id": 65850941, "body": "@Jeffrey great to have been of help"}], "tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": true, "score": 3, "last_activity_date": 1472668818, "last_edit_date": 1472668818, "creation_date": 1472668476, "answer_id": 39256697, "question_id": 39255726, "link": "https://stackoverflow.com/questions/39255726/cpputest-unit-testing-framework-multiple-definition-exception/39256697#39256697", "title": "CppUTest Unit Testing Framework Multiple Definition Exception", "body": "<p>If you want to mock <code>method1</code> from <code>driver1.h</code>, just add the mocked definition in a separate mock_driver1.cpp and then in your CMakeLists.txt:</p>\n\n<pre><code>add_executable(target1 test_driver1.cpp driver1.cpp)\nadd_executable(target2 test_driver2.cpp driver2.cpp mock_driver1.cpp)\n</code></pre>\n\n<p>Once you are done mocking, replace the <code>mock_driver1.cpp</code> dependency with <code>driver1.cpp</code>.</p>\n\n<p>This all assumes you have a separate executable for each test driver. </p>\n\n<p>However, if you want to have one big main program where all drivers are linked together, then you cannot have both the real <code>method1</code> and the mocked <code>method1</code> co-exist together. For that, I'd recommend wrapping the mocked <code>method1</code> in a namespace <code>mock</code> or something like that, and only call <code>mock::test1</code> in test_driver2.cpp.</p>\n"}], "owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 0, "accepted_answer_id": 39256697, "answer_count": 1, "score": 6, "last_activity_date": 1472668818, "creation_date": 1472664806, "last_edit_date": 1472667519, "question_id": 39255726, "link": "https://stackoverflow.com/questions/39255726/cpputest-unit-testing-framework-multiple-definition-exception", "title": "CppUTest Unit Testing Framework Multiple Definition Exception", "body": "<p>I will try to make this a purely minimal example to be as applicable to as many people as possible as well as protect any sort of code sharing that might violate an NDA. Hope this is okay!</p>\n\n<p>I am using CppUTest and CppUMock (compiling with gcc/g++ and makefiles created with CMake) in conjunction with Gitlab Continuous Integration software to create a unit testing environment for future commits and release of software. However, I have run into a bit of a problem. Let's say I have the following folder setup (that I have minimal ability to change, other than the contents of the /tests folder):</p>\n\n<pre><code>+-- src\n    +-- driver1.c\n    +-- driver2.c\n+-- inc\n    +-- driver1.h\n    +-- driver2.h\n+-- tests\n    +-- test_driver1.cpp\n    +-- test_driver2.cpp\n    +-- main.cpp\n    +-- cmakelists.txt\n</code></pre>\n\n<p>The CMakeLists file will contain including of the inc folder, compilation of the src folder, and compilation of the tests folder. However, let's say that driver2.c relies on methods defined by driver1.c. This is fine if there is no mocking setup because you can just test the results of calls to driver2's methods normally. However, say that I want to mock driver1's method1 function so that I can check that driver2 calls method1 correctly (using CppUMock). This would usually be fine, if driver1 wasn't being compiled, but adding something like so to the test_driver2.cpp file:</p>\n\n<pre><code>void method1(int n) {\n    mock().actualCall(\"method1\").withParameter(\"n\", n);\n}\n</code></pre>\n\n<p>Will cause a collision with the actual method1 in driver1.c with a linker error like so:</p>\n\n<pre><code>CMakeFiles/Tests.dir/.../src/driver1.c:(.text+0x11d): multiple definition of 'method1'\nCMakeFiles/Tests.dir/.../src/test_driver2.cpp:(.text+0x0): first defined here\n</code></pre>\n\n<p>As per request of the commenter, here is what the include structure is like:</p>\n\n<pre><code>driver1.c includes driver1.h (obviously)\ndriver2.c includes driver2.h (obviously)\ndriver2.h includes driver1.h (for calling method1)\ntest cpp files include their respective .h files\n(test_driver1.cpp -&gt; driver1.h and test_driver2.cpp -&gt; driver2.h)\n</code></pre>\n\n<p>method1 is declared in driver1.h and defined in driver1.c. I am not able to edit these files.</p>\n\n<p>I'm happy to add details as requested.</p>\n\n<p>What is the best way to get around this mocking issue?</p>\n"}, {"tags": ["c", "arrays", "file"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1472665738, "post_id": 39255681, "comment_id": 65847702, "body": "Please do not spam tags your questions"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1472667139, "post_id": 39255681, "comment_id": 65848522, "body": "See <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\"><code>while (!feof(file))</code> is always wrong</a> for a discussion of that idiom.  Your code will crash if you fail to open the file \u2014 you test, but continue as if nothing had gone wrong.  You should report errors on standard error, too, not standard output.  And, most of all, you should check that the I/O operations worked by checking the <code>fscanf()</code> calls directly."}, {"owner": {"reputation": 234, "user_id": 6180573, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06c9b68ecb1a17f2b47231d3d700f020?s=128&d=identicon&r=PG&f=1", "display_name": "smrdo_prdo", "link": "https://stackoverflow.com/users/6180573/smrdo-prdo"}, "edited": false, "score": 0, "creation_date": 1472682063, "post_id": 39255681, "comment_id": 65855772, "body": "Just a small bit, since you need <code>esin</code> to be all zeroes, you can skip typing the loops and just write <code>int esin[A][A] = {0};</code> and all the elements of the 2D array will be initialized to zero. <a href=\"http://en.cppreference.com/w/c/language/array\" rel=\"nofollow noreferrer\">You can read more about it here.</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6663837"}, "edited": false, "score": 0, "creation_date": 1472665372, "post_id": 39255860, "comment_id": 65847484, "body": "I just want to print when esin[i][j]=1. that means there is n activity between actor i and j @Alter Mann"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472665590, "post_id": 39255860, "comment_id": 65847602, "body": "You exit from loop in the first iteration <code>if(esin[i][j]=0)  continue;</code> because the condition is always true."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6663837"}, "edited": false, "score": 0, "creation_date": 1472665729, "post_id": 39255860, "comment_id": 65847692, "body": "That was a typing mistake. But still I am getting wrong output @Alter Mann"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1472665389, "last_edit_date": 1472665389, "creation_date": 1472665269, "answer_id": 39255860, "question_id": 39255681, "link": "https://stackoverflow.com/questions/39255681/reading-input-from-file-and-store-in-an-array-in-a-particular-format-in-c/39255860#39255860", "title": "Reading input from file and store in an array in a particular format in C", "body": "<p>In this line</p>\n\n<pre><code>if(esin[i][j]=0)\n</code></pre>\n\n<p>you are assigning, but you want to compare:</p>\n\n<pre><code>if(esin[i][j] == 0)\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6663837"}, "edited": false, "score": 0, "creation_date": 1472666220, "post_id": 39256045, "comment_id": 65848023, "body": "But I am getting output like this: day 0 0 and 3 have an edge 1 and 2 have an edge day 3 4 and 2 have an edge day 4 3 and 2 have an edge day 3 1 and 2 have an edge day 3 4 and 2 have an edge @Shahid"}], "tags": [], "owner": {"reputation": 2258, "user_id": 3399105, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-twhyJ9NJTFw/AAAAAAAAAAI/AAAAAAAAADA/Nwa0s-0HXvA/photo.jpg?sz=128", "display_name": "Shahid", "link": "https://stackoverflow.com/users/3399105/shahid"}, "is_accepted": false, "score": 1, "last_activity_date": 1472667599, "last_edit_date": 1472667599, "creation_date": 1472665905, "answer_id": 39256045, "question_id": 39255681, "link": "https://stackoverflow.com/questions/39255681/reading-input-from-file-and-store-in-an-array-in-a-particular-format-in-c/39256045#39256045", "title": "Reading input from file and store in an array in a particular format in C", "body": "<ol>\n<li><p>Change <code>if(esin[i][j]=0)</code> to <code>if(esin[i][j]==0)</code>.</p></li>\n<li><p>If you do:</p>\n\n<pre><code>    esin[k1][k2] = 1;\n    esin[k2][k1] = 1;\n</code></pre></li>\n</ol>\n\n<p>Output will be for day-0:</p>\n\n<pre><code>day: 0 \n0 and 3 have an edge \n1 and 2 have an edge \n2 and 1 have an edge\n3 and 0 have an edge\n</code></pre>\n\n<p>Just do <code>esin[k1][k2] = 1;</code> if you want output like:</p>\n\n<pre><code>day: 0 \n0 and 3 have an edge \n1 and 2 have an edge \n</code></pre>\n\n<ol start=\"3\">\n<li>And another issue is, <strong>day is being scanned twice when day is changing</strong> (One inside <code>while(day1 == day)</code> loop and another outside this loop). You can try this:</li>\n</ol>\n\n<blockquote>\n<pre><code>bool first = true; \n\nwhile(end==0)\n{\n    // Only first time we'll read 'day', \n    // later we won't need this fscanf since there is another fscanf for reading day\n    if(first)\n    {\n        fscanf(fp, \"%d\", &amp;day);    \n    }\n    day1 = day; //day1 for comparing\n    first = false;    \n\n    while(day1 == day)\n    {\n        if (feof(fp))\n        {\n            end=1;\n            break;\n        }\n\n        fscanf(fp, \"%d %d\", &amp;k1, &amp;k2);\n        esin[k1][k2] = 1;//edge creation\n        fscanf(fp, \"%d\", &amp;day);\n    }\n    ...\n}\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472667426, "post_id": 39256360, "comment_id": 65848668, "body": "Any suggestion with <code>while (!feof(fp))</code> or equivalent in it is sub-optimal at best and incorrect at worst.  See <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\"><code>while (!feof(file))</code> is always wrong</a> for a discussion of why."}, {"owner": {"reputation": 94, "user_id": 5306495, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zA_hch-dee4/AAAAAAAAAAI/AAAAAAAABc8/pQiKydilpxQ/photo.jpg?sz=128", "display_name": "Rajmani Arya", "link": "https://stackoverflow.com/users/5306495/rajmani-arya"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472668723, "post_id": 39256360, "comment_id": 65849338, "body": "Thanks for pointing this out. A nice approach would be run infinite loop and check return length of fscanf(fp, &quot;%d %d %d&quot;, &amp;day, &amp;a, &amp;b)  if it is less than or equal to zero that means buffer has ended and file i/o pointer is at EOF."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472668916, "post_id": 39256360, "comment_id": 65849445, "body": "That would be better, but the correct test is &quot;did I get the number of values I requested&quot;, so in this case, <code>while (fscanf(fp, &quot;%d %d %d&quot;, &amp;day, &amp;a, &amp;b) == 3) { \u2026process valid data\u2026 }</code>. You could get two integers read and then a letter in the input stops the third being read. You don&#39;t want to proceed as if everything was OK. Also, tangentially, note that <code>fscanf()</code> doesn&#39;t care about newlines in this.  All the numbers could be on a single line, or each number on a line of its own, or there could be blank lines; it will simply read three integers and leave anything else for reading next time."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472669175, "post_id": 39256360, "comment_id": 65849626, "body": "You really, really, really don&#39;t control loops on <code>while (!feof(fp))</code>; it is wrong unless you also put <code>if</code> checks on the I/O operations, and doing that makes the <code>!feof(fp)</code> test superfluous.  It is OK to check for <code>feof(fp)</code> after a loop has broken because the loop failed; then you can report an error if it was not at EOF.  But that&#39;s a different usage altogether."}], "tags": [], "owner": {"reputation": 94, "user_id": 5306495, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zA_hch-dee4/AAAAAAAAAAI/AAAAAAAABc8/pQiKydilpxQ/photo.jpg?sz=128", "display_name": "Rajmani Arya", "link": "https://stackoverflow.com/users/5306495/rajmani-arya"}, "is_accepted": false, "score": 1, "last_activity_date": 1472667887, "last_edit_date": 1472667887, "creation_date": 1472667169, "answer_id": 39256360, "question_id": 39255681, "link": "https://stackoverflow.com/questions/39255681/reading-input-from-file-and-store-in-an-array-in-a-particular-format-in-c/39256360#39256360", "title": "Reading input from file and store in an array in a particular format in C", "body": "<p>Here you are scanning one date from input and checking against first integer (which is date) for each next line, when day1 != day your inner loop won't execute but you already read that day value. now when you perform fscanf(fp, \"%d\", &amp;day) on input it will read person id (2nd column)\nand it totally get messed up.</p>\n\n<p>I would suggest to do one time file scanning and build graph</p>\n\n<pre><code>int a,b;\nfor (int i=0; i&lt;5; i++)\nfor (int j=0; j&lt;5; j++) \n     esin[i][j] = -1; // No edge\nwhile (!feof(fp)) {\n     fscanf(fp, \"%d %d %d\", &amp;day, &amp;a, &amp;b);\n     esin[a][b] = day;\n     esin[b][a] = day;\n}\n\n// for each day find person1,person2\nfor (int i=0; i&lt;5; i++) {\n    printf(\"Day %d:\\n\", i);\n    for (int p=0; p&lt;5; p++) {\n        for (int q=0; q&lt;5; q++) {\n            if(esin[p][q] == i) {\n                printf (\"%d and %d have an edge\\n\", p, q);\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 5860608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jam4D.png?s=128&g=1", "display_name": "pPanda_beta", "link": "https://stackoverflow.com/users/5860608/ppanda-beta"}, "is_accepted": false, "score": 1, "last_activity_date": 1472680338, "creation_date": 1472680338, "answer_id": 39259571, "question_id": 39255681, "link": "https://stackoverflow.com/questions/39255681/reading-input-from-file-and-store-in-an-array-in-a-particular-format-in-c/39259571#39259571", "title": "Reading input from file and store in an array in a particular format in C", "body": "<p><em><strong>You can down vote but my request to you to leave a comment so that I can improve the quality of this answer</strong></em></p>\n\n<p>If u are only interested in printing the input in pretty English <strong>[in the same order of the input file]</strong> </p>\n\n<p>This smallified code will do so :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define B 5 // number of days\n#define A 5 // number of total actors\n\nint main()\n{\n    int day1=-1, day, k1, k2;\n\n    FILE *fp= fopen(\"test.txt\", \"r\"); // the file contains the input\n    if (fp == NULL)\n    {\n        printf(\"\\nError - Cannot open the designated file\\n\");\n        return 0;\n    }\n\n    while(fscanf(fp,\"%d%d%d\",&amp;day,&amp;k1,&amp;k2)&gt;0)\n    {\n        if(day1!=day || day1==-1 )\n            printf(\"\\nday: %d\", day1=day); \n        printf(\"\\n%d and %d have an edge\", k1,k2);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Buttttt if u really want to store the input for each days and then print it in a lexicographical manner <strong>[ASCENDING ORDER OF ACTOR NO]</strong>  then here is ur modified code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define B 5 // number of days\n#define A 5 // number of total actors\n\nint main()\n{\n    int day1=-1, day, i, j, k1, k2;\n    int esin[A][A]={0};\n\n    FILE *fp= fopen(\"test.txt\", \"r\"); // the file contains the input\n    if (fp == NULL)\n    {\n        printf(\"\\nError - Cannot open the designated file\\n\");\n        return 0;\n    }\n\n    while(!feof(fp))\n    {\n        if( fscanf(fp,\"%d%d%d\",&amp;day,&amp;k1,&amp;k2)&lt;0  || (day1!=-1 &amp;&amp; day1!=day ))\n        {\n            printf(\"\\nday: %d\", day1&lt;0?day:day1); \n            for(i=0;i&lt;A;i++)\n                for(j=0;j&lt;A;esin[i][j]=0,j++)\n                    if(esin[i][j])\n                        printf(\"\\n%d and %d have an edge\", i, j);   \n            esin[k1][k2]=1;\n            day1=day;\n        }\n        if(day1==-1)\n            day1=day;\n        esin[k1][k2]=1;\n    }\n\n    return 0;   \n}\n</code></pre>\n\n<h2>Key Points to remember (also mentioned above in comments) :</h2>\n\n<ol>\n<li>scanf family (scanf,fscanf,...) returns -1 on reaching of EOF.</li>\n<li>scanf family returns the no of successfully scanned variables.</li>\n<li>No explicit <code>reset</code> or <code>initialize to zero</code> is required. Member initializer <code>{0}</code>  OR the printing nested for loop <code>for(j=0;j&lt;A;esin[i][j]=0,j++)</code>can do so.</li>\n<li>-1 is considered as an invalid day.</li>\n<li><code>if(esin[i][j])</code> means <code>if(esin[i][j]!=0)</code> i.e. actor <code>i</code> messages actor <code>j</code>.</li>\n</ol>\n\n<p><em>P.S. Writing short codes is a good practice but creepy code is not...</em></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6663837"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1472680338, "creation_date": 1472664666, "last_edit_date": 1472667808, "question_id": 39255681, "link": "https://stackoverflow.com/questions/39255681/reading-input-from-file-and-store-in-an-array-in-a-particular-format-in-c", "title": "Reading input from file and store in an array in a particular format in C", "body": "<p>I want to read from a text file and show some output </p>\n\n<p>Input file format:</p>\n\n<pre><code>0 0 3         \n0 1 2         \n1 3 4         \n2 1 4         \n3 2 3         \n3 1 2         \n4 3 4      \n</code></pre>\n\n<p>1st digit of each line indicates a particular day (day 0 to 4) and the second and the 3rd digit of each line indicates actors who sends message to each other on that day. \nI have written the following c code to display the participating actor on each day:</p>\n\n<p>My sample code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n#define B 5 // number of days\n#define A 5 // number of total actors\n\nmain()\n{\n    FILE *fp;\n    int end = 0;\n    int day1, day, i, j, k1, k2;\n    int esin[A][A];\n    for (i = 0; i &lt; A; i++)  // initializing array\n    {\n        for (j = 0; j &lt; A; j++)\n        {\n            esin[i][j] = 0;\n        }\n    }\n    fp = fopen(\"test.txt\", \"r\"); // the file contains the input\n    if (fp == NULL)\n    {\n        printf(\"\\nError - Cannot open the designated file\\n\");\n    }\n\n    while (end == 0)\n    {\n        fscanf(fp, \"%d\", &amp;day);\n        day1 = day; // day1 for comparing\n        while (day1 == day)\n        {\n            if (feof(fp))\n            {\n                end = 1;\n                break;\n            }\n            fscanf(fp, \"%d %d\", &amp;k1, &amp;k2);\n\n            esin[k1][k2] = 1;// edge creation\n            esin[k2][k1] = 1;// edge creation\n\n            fscanf(fp, \"%d\", &amp;day);\n        }\n\n        printf(\"\\nday: %d\", day1); // for printing output of a particular day\n        for (i = 0; i &lt; A; i++)\n        {\n            for (j = 0; j &lt; A; j++)\n            {\n                if (esin[i][j] == 0)\n                    continue;\n                else\n                    printf(\"\\n%d and %d have an edge\", i, j);\n            }\n        }\n        for (i = 0; i &lt; A; i++)\n        {\n            for (j = 0; j &lt; A; j++)\n            {\n                esin[i][j] = 0;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>But I am not getting the actual output. For example, I want to get an output like:</p>\n\n<pre><code>day 0\n0 and 3 have an edge\n1 and 2 have an edge\nday 1\n3 and 4 have an edge\nday 2\n1 and 4 have an edge\nday 3\n2 and 3 have an edge\n1 and 2 have an edge\nday 4\n3 and 4 have an edge\n</code></pre>\n\n<p>But I am not getting this. \nI am getting:</p>\n\n<pre><code>day 0\n0 and 3 have an edge\n1 and 2 have an edge\nday 3\n4 and 2 have an edge\nday 4\n3 and 2 have an edge\nday 3\n1 and 2 have an edge\nday 3\n4 and 2 have an edge\n</code></pre>\n\n<p>Is there anything wrong in the above code? Which correction will I need to make to get the above like output?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1472664626, "post_id": 39255617, "comment_id": 65847056, "body": "<code>fflush (stdin);</code> is UB"}, {"owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472664807, "post_id": 39255617, "comment_id": 65847167, "body": "What does &quot;UB&quot; means Eugene ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1472664835, "post_id": 39255617, "comment_id": 65847176, "body": "<a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1472664844, "post_id": 39255617, "comment_id": 65847181, "body": "@NIN does your computer really crashes? You see blue screen, and have to reboot it?"}, {"owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "edited": false, "score": 0, "creation_date": 1472665337, "post_id": 39255617, "comment_id": 65847461, "body": "no fukanchik. My computer just freeze"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1472665687, "post_id": 39255617, "comment_id": 65847667, "body": "Yeah, so you should flush <code>stdout</code>, not <code>stdin</code>"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1472665771, "post_id": 39255617, "comment_id": 65847725, "body": "Surprisingly your code worked fine for me on windows. Which windows version do you use?"}, {"owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "edited": false, "score": 0, "creation_date": 1472665838, "post_id": 39255617, "comment_id": 65847777, "body": "i use windows 8.1"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1472665957, "post_id": 39255617, "comment_id": 65847854, "body": "I also tried to compile it with MSVC and now it shows dialog saying &quot;Program stopped working&quot;. I am on windows 7"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1472666330, "post_id": 39255617, "comment_id": 65848082, "body": "@fukanchik Should we repeat here the &quot;nasal demons&quot; thing about UB?"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472666541, "post_id": 39255617, "comment_id": 65848181, "body": "@EugeneSh. I am more interested here in Windows behaviour than in program itself."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1472666600, "post_id": 39255617, "comment_id": 65848216, "body": "@fukanchik Well, it should not freeze or crash because of some bad user-space program, that&#39;s for sure.."}, {"owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "edited": false, "score": 0, "creation_date": 1472667223, "post_id": 39255617, "comment_id": 65848578, "body": "fukanchik. Why I need implement <code>stdout</code> rather than <code>stdin</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472668616, "post_id": 39255617, "comment_id": 65849285, "body": "See <a href=\"http://stackoverflow.com/questions/2979209/using-fflushstdin\">Using <code>fflush(stdin)</code></a> for more information about when it is OK to use it (Windows) and when it is not (anywhere else \u2014 to a first approximation)."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472664708, "post_id": 39255665, "comment_id": 65847109, "body": "<i>It&#39;s surprising your compiler didn&#39;t give you a warning</i> - who said it didn&#39;t? :)"}, {"owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "edited": false, "score": 0, "creation_date": 1472664747, "post_id": 39255665, "comment_id": 65847130, "body": "well, At least all warning are by default David."}, {"owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "edited": false, "score": 0, "creation_date": 1472664942, "post_id": 39255665, "comment_id": 65847246, "body": "WOW , I thought I didn&#39;t need the &amp; operator since It was a struct in C code"}, {"owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "edited": false, "score": 0, "creation_date": 1472667819, "post_id": 39255665, "comment_id": 65848846, "body": "David now avast says I&#39;ve created a virus"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1472668006, "post_id": 39255665, "comment_id": 65848937, "body": "It says you&#39;ve written code that has suspicious behavior. That&#39;s likely true, since you don&#39;t quite know what you&#39;re doing."}, {"owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "edited": false, "score": 0, "creation_date": 1472669191, "post_id": 39255665, "comment_id": 65849637, "body": "So What should I chance in my code  to eliminate that warning from my antivirus ?. I mean, How could I improving the code ?"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 6, "last_activity_date": 1472668084, "last_edit_date": 1472668084, "creation_date": 1472664617, "answer_id": 39255665, "question_id": 39255617, "link": "https://stackoverflow.com/questions/39255617/why-my-computer-crashes-when-i-execute-this-code-in-c/39255665#39255665", "title": "Why my computer crashes when I execute this code in c?", "body": "<pre><code>scanf(\"%i\",p1.age );\n</code></pre>\n\n<p>When you call <code>scanf</code>, <code>p1.age</code> is an integer with no particular value. So you are asking <code>scanf</code> to store the value you input in no particular place. It's not surprising this causes a crash. You want:</p>\n\n<pre><code>scanf(\"%i\", &amp;p1.age );\n</code></pre>\n\n<p>This tells <code>scanf</code> to read in an integer and store it at the <em>address</em> of <code>p1.age</code>.</p>\n\n<p>It's surprising your compiler didn't give you a warning. Are you sure you have all of its warnings enabled?</p>\n\n<p>When I try to compile this, I get appropriate warnings:</p>\n\n<pre><code>warning: format \u2018%i\u2019 expects argument of type \u2018int *\u2019, but argument 2 has type \u2018int\u2019 [-Wformat=]\n</code></pre>\n\n<p><strong>Update</strong>: Your anti-virus has heuristics that block software that has suspicious behavior. Your code has bugs, and your anti-virus doesn't know that they're just mistakes and not attempts to do something nefarious. It sounds like you don't have a very good environment set up for experimentation. Let me guess -- you're doing all this from a Windows administrator account.</p>\n"}], "owner": {"reputation": 173, "user_id": 6091910, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/78757c0e04170de816e8b7130da6bf14?s=128&d=identicon&r=PG&f=1", "display_name": "NIN", "link": "https://stackoverflow.com/users/6091910/nin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 39255665, "answer_count": 1, "score": -4, "last_activity_date": 1472668084, "creation_date": 1472664462, "last_edit_date": 1472667655, "question_id": 39255617, "link": "https://stackoverflow.com/questions/39255617/why-my-computer-crashes-when-i-execute-this-code-in-c", "title": "Why my computer crashes when I execute this code in c?", "body": "<p>I was practicing about structs in C, so I've tried to execute 2 times this code and twice the computer crashes. I've had turn off the computer twice since my computer crashes. </p>\n\n<p>Compiler is GCC (About MinGW on windows platform). The code is following :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nstruct person {\n    char name[50];\n    int age;\n    int document;   \n\n};\n\nint main(void){\n    struct person p1;\n    printf(\"Data of the  first person\\n\\n\");\n    printf(\"age:  \");\n    fflush (stdin);\n    scanf(\"%i\",p1.age );\n    printf(\"Document:  \");\n    fflush(stdin);\n    scanf(\"%i\",p1.document);\n\n    printf(\"Age is: %i and document is: %i \",p1.age,p1.document);\n    return 0;\n}\n</code></pre>\n\n<p>Sincerely,\nNIN.</p>\n\n<p>UPDATE....</p>\n\n<p>Bad news. Now Avast says I`ve created a virus. Therefore Avast delete my exe:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oKeGN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oKeGN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Should I report as false positive or not ?</p>\n"}, {"tags": ["c", "linux", "archlinux", "wifi-direct", "wpa-supplicant"], "owner": {"reputation": 413, "user_id": 474023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/df17cf3191ad39a181427d010985f2a9?s=128&d=identicon&r=PG", "display_name": "Liam", "link": "https://stackoverflow.com/users/474023/liam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1830, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472664535, "creation_date": 1472663347, "last_edit_date": 1472664535, "question_id": 39255322, "link": "https://stackoverflow.com/questions/39255322/enable-wifi-p2p-link-to-linux-via-wpa-supplicant", "title": "Enable WiFi P2P link to Linux via wpa_supplicant", "body": "<p>I enable WiFi P2P connections to a Linux host via wpa_supplicant and a simple C program [1] calling the wpa_ctrl API [2]. After connect by a Nexus 7 Android tablet and then disconnect, the Linux host disappears from the tablet's list of P2P peers, and only reappears after rebooting the host. I have tried reissuing a p2p_ext_listen, restarting wpa_supplicant, and un/reloading the mwifiex_sdio driver with modprobe. I believe this is a bug outside my code, but if so, where?</p>\n\n<p>[1] <a href=\"https://github.com/networkimprov/p2p-host/blob/master/main.c\" rel=\"nofollow\">https://github.com/networkimprov/p2p-host/blob/master/main.c</a>\n<br/><em>Feel free to build &amp; test on an x86 linux box :-)</em></p>\n\n<p>[2] <a href=\"https://w1.fi/wpa_supplicant/devel/ctrl_iface_page.html\" rel=\"nofollow\">https://w1.fi/wpa_supplicant/devel/ctrl_iface_page.html</a></p>\n\n<p>My Linux host:</p>\n\n<ul>\n<li>wpa_supplicant 2.5 with -i p2p0 -D nl80211 -c /etc/wpa_supplicant/p2p0.conf</li>\n<li>kernel 4.7.2 (mainline)</li>\n<li>distro Arch Linux ARM</li>\n<li>radio Marvell sd8787</li>\n<li>cpu OMAP3</li>\n</ul>\n\n<p>p2p0.conf:</p>\n\n<pre><code>ctrl_interface=/run/wpa_supplicant\nap_scan=1\ndevice_name=mwifiex-p2p-device\ndevice_type=1-0050F204-1\np2p_listen_reg_class=81\np2p_listen_channel=1\np2p_oper_reg_class=81\np2p_oper_channel=1\np2p_no_group_iface=1\np2p_go_intent=15\n</code></pre>\n\n<p>Program log (>>> flags msg to wpa_supplicant):</p>\n\n<pre><code>$ sudo p2p-host/p2phostd /run/wpa_supplicant/p2p0 75 1500 11111111\n&gt;&gt;&gt; P2P_EXT_LISTEN 75 1500\n    OK\n    &lt;3&gt;P2P-DEVICE-FOUND ae:22:0b:48:49:61 p2p_dev_addr=ae:22:0b:48:49:61 pri_dev_type=10-0050F204-5 name='Android_7326' config_methods=0x188 dev_capab=0x25 group_capab=0x0 new=1\n    &lt;3&gt;P2P-PROV-DISC-SHOW-PIN ae:22:0b:48:49:61 72764473 p2p_dev_addr=ae:22:0b:48:49:61 pri_dev_type=10-0050F204-5 name='Android_7326' config_methods=0x188 dev_capab=0x25 group_capab=0x0\n&gt;&gt;&gt; P2P_CONNECT ae:22:0b:48:49:61 11111111 display go_intent=0\n    OK\n    &lt;3&gt;P2P-GO-NEG-SUCCESS role=client freq=2417 ht40=0 peer_dev=ae:22:0b:48:49:61 peer_iface=ae:22:0b:48:c9:61 wps_method=Display\n    &lt;3&gt;CTRL-EVENT-SCAN-STARTED\n    &lt;3&gt;CTRL-EVENT-BSS-ADDED 0 20:4e:7f:92:63:d6\n    &lt;3&gt;CTRL-EVENT-SCAN-RESULTS\n    &lt;3&gt;WPS-AP-AVAILABLE\n    &lt;3&gt;CTRL-EVENT-SCAN-STARTED\n    &lt;3&gt;CTRL-EVENT-BSS-ADDED 1 ae:22:0b:48:c9:61\n    &lt;3&gt;CTRL-EVENT-SCAN-RESULTS\n    &lt;3&gt;WPS-AP-AVAILABLE-AUTH\n    &lt;3&gt;Trying to associate with ae:22:0b:48:c9:61 (SSID='DIRECT-Mw-Android_7326' freq=2417 MHz)\n    &lt;3&gt;Associated with ae:22:0b:48:c9:61\n    &lt;3&gt;CTRL-EVENT-EAP-STARTED EAP authentication started\n    &lt;3&gt;CTRL-EVENT-EAP-STATUS status='started' parameter=''\n    &lt;3&gt;CTRL-EVENT-EAP-PROPOSED-METHOD vendor=14122 method=1\n    &lt;3&gt;CTRL-EVENT-EAP-STATUS status='accept proposed method' parameter='WSC'\n    &lt;3&gt;CTRL-EVENT-EAP-METHOD EAP vendor 14122 method 1 (WSC) selected\n    &lt;3&gt;WPS-CRED-RECEIVED\n    &lt;3&gt;WPS-SUCCESS\n    &lt;3&gt;P2P-GROUP-FORMATION-SUCCESS\n    &lt;3&gt;CTRL-EVENT-EAP-STATUS status='completion' parameter='failure'\n    &lt;3&gt;CTRL-EVENT-EAP-FAILURE EAP authentication failed\n    &lt;3&gt;CTRL-EVENT-DISCONNECTED bssid=ae:22:0b:48:c9:61 reason=3 locally_generated=1\n    &lt;3&gt;Trying to associate with ae:22:0b:48:c9:61 (SSID='DIRECT-Mw-Android_7326' freq=2417 MHz)\n    &lt;3&gt;Associated with ae:22:0b:48:c9:61\n    &lt;3&gt;WPA: Key negotiation completed with ae:22:0b:48:c9:61 [PTK=CCMP GTK=CCMP]\n    &lt;3&gt;CTRL-EVENT-CONNECTED - Connection to ae:22:0b:48:c9:61 completed [id=0 id_str=]\n    &lt;3&gt;P2P-GROUP-STARTED p2p0 client ssid=\"DIRECT-Mw-Android_7326\" freq=2417 psk=... go_dev_addr=ae:22:0b:48:49:61 [PERSISTENT]\n...disconnect after a short while...\n    &lt;3&gt;CTRL-EVENT-BSS-REMOVED 0 20:4e:7f:92:63:d6\n    &lt;3&gt;CTRL-EVENT-DISCONNECTED bssid=ae:22:0b:48:c9:61 reason=3\n    &lt;3&gt;CTRL-EVENT-DISCONNECTED bssid=ae:22:0b:48:c9:61 reason=3 locally_generated=1\n    &lt;3&gt;P2P-GROUP-REMOVED p2p0 client reason=GO_ENDING_SESSION\n...Linux host disappears from P2P list...\n^C\n$ wget help\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 4, "last_activity_date": 1472663957, "creation_date": 1472663957, "answer_id": 39255476, "question_id": 39255198, "link": "https://stackoverflow.com/questions/39255198/escape-sequence-for-a-true-linefeed-lf/39255476#39255476", "title": "Escape sequence for a true LineFeed (LF)", "body": "<p>@Barmar is right: <code>\\n</code> and <code>\\012</code> are the exact same bits.  The difference between a plain LF and a CRLF on Windows machines is how you open whatever device you are writing to.  If you are doing <code>printf</code> to a terminal under cygwin, you could <code>stty</code> to change to raw mode, for example.  Otherwise, it will depend on the specifics of the C library you are using.</p>\n\n<p><strong>Edit</strong> For Win32 using msvcrt, using <code>fopen(..., \"b\")</code>, \"translations involving carriage-return and linefeed characters are suppressed\" (from <a href=\"https://msdn.microsoft.com/en-us/library/aa246392(v=vs.60).aspx\" rel=\"nofollow\">MSDN</a>).  By contrast, in text mode, \"linefeed characters are translated to carriage return\u2013linefeed combinations on output\" (same source).</p>\n\n<p>So to answer the original question, there is no single escape sequence that will always be <code>\\012</code> on output, on every platform, with every output routine.</p>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 4, "last_activity_date": 1472665495, "last_edit_date": 1472665495, "creation_date": 1472664573, "answer_id": 39255649, "question_id": 39255198, "link": "https://stackoverflow.com/questions/39255198/escape-sequence-for-a-true-linefeed-lf/39255649#39255649", "title": "Escape sequence for a true LineFeed (LF)", "body": "<p>There is <em>no</em> translation in the C compiler. A string of [and these are all equivalent]:</p>\n\n<pre><code>// (1) these are all equivalent to a string of newline of length 1:\n\"\\n\"\n\"\\x0a\"\n\"\\012\"\n\n// (2) these are all equivalent to a string of carriage return of length 1:\n\"\\r\"\n\"\\x0d\"\n\"\\015\"\n\n// (3) these are all equivalent to a string of CRLF of length 2:\n\"\\r\\n\"\n\"\\x0d\\0x0a\"\n\"\\015\\012\"\n</code></pre>\n\n<p>When outputting to a terminal under a POSIX system, the TTY driver will convert case (1) into CRLF in cooked mode. This can be changed via some TTY <code>ioctl</code> calls. IIRC, similar for windows(?). But, [again] IIRC, windows has some windows specific call that must be done because the translation is done at a very low layer.</p>\n\n<p>When writing to a file under a POSIX system, no translation is done.</p>\n\n<p>However, when writing to a file under Windows, case (1) is translated by the OS to CRLF for normal opens [because the default is \"text\" mode]:</p>\n\n<pre><code>open(file,O_WRONLY);\nfopen(file,\"w\");\n</code></pre>\n\n<p>To <em>suppress</em> the translation under windows for case (1), open the file in \"binary\" mode:</p>\n\n<pre><code>open(file,O_WRONLY | O_BINARY);\nfopen(file,\"wb\");\n</code></pre>\n\n<p>Binary mode is also applicable for opening in read mode. And, for POSIX, it is [effectively] a no-op and is ignored. With/without the binary option, under POSIX, is opening in binary mode because POSIX has <em>no</em> \"text mode\" for files.</p>\n\n<p>So, for portability between POSIX/windows, this is the mode to use to suppress translation.</p>\n"}, {"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1472667868, "post_id": 39256068, "comment_id": 65848874, "body": "You&#39;re a man after my own heart. And, I&#39;ll bet you&#39;re describing an IBM/370 (era) along with a 2741 terminal [essentially, an IBM selectric with sprocket feed fan-fold paper]. Also, for telex style TTYs (e.g. ASR-33), they were character oriented but would just blinding follow a CR or LF. Printing with just &lt;blah&gt;CR a few times (with different blah) did overstrike and was used to obscure a password that would be entered to login to a machine since there was no suppression of the echo of text entered"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 2, "last_activity_date": 1472665979, "creation_date": 1472665979, "answer_id": 39256068, "question_id": 39255198, "link": "https://stackoverflow.com/questions/39255198/escape-sequence-for-a-true-linefeed-lf/39256068#39256068", "title": "Escape sequence for a true LineFeed (LF)", "body": "<p>The history:</p>\n\n<p>Old mainframe computers had terminals connected over often slow connections. The terminals were typewriters. After the user had typed a line, they pressed return (as on old typewriters). This was the signal for the mainframe to process the line. Once the mainframe had received and processed the line, it sent a line feed. The paper of the typewriter now went up one line, informing the user the system was ready to receive another line.</p>\n\n<p>Unix, being based on timesharing, copied this behavior.</p>\n\n<p>(But I am still not sure whether the LF is stored under Unix, or the CR - from the above, it should be the CR and the system adds the LF.)</p>\n\n<p>Windows, not being timesharing, just put the CR and LF into the file.</p>\n"}], "owner": {"reputation": 14279, "user_id": 685, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a638176c7349e10fe82e6e65f2b069f?s=128&d=identicon&r=PG", "display_name": "BIBD", "link": "https://stackoverflow.com/users/685/bibd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2117, "favorite_count": 1, "accepted_answer_id": 39255649, "answer_count": 3, "score": 5, "last_activity_date": 1472665979, "creation_date": 1472662838, "last_edit_date": 1472663750, "question_id": 39255198, "link": "https://stackoverflow.com/questions/39255198/escape-sequence-for-a-true-linefeed-lf", "title": "Escape sequence for a true LineFeed (LF)", "body": "<p>In C we have a couple common escape sequences:</p>\n\n<p><code>\\r</code> for a Carriage Return (CR) - which would be the equivalent of doing <code>'\\015'</code></p>\n\n<p><code>\\n</code> is often described as LineFeed, but I understand that '\\n' will get translated in a string as required to CRLF  (dependant on the OS) - which would be the equivalent of doing <code>\"\\015\\012\"</code>. In particular if I'm dong a <code>printf</code> or an <code>fprintf</code>. </p>\n\n<p>Is there an escape code for a true line feed character that won't get translated or am I stuck using <code>'\\012'</code> when I don't want it translated?</p>\n"}, {"tags": ["c", "ubuntu"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1472662537, "post_id": 39255106, "comment_id": 65845945, "body": "You really need to add error checking to your code. Is the <code>open</code> of <code>&#47;dev&#47;console</code> succeeding? Are you running the program with permission to write to <code>&#47;dev&#47;console</code>? Does sound work at all on the machine?"}, {"owner": {"reputation": 1010, "user_id": 806065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/vsEuy.png?s=128&g=1", "display_name": "Rich Maes", "link": "https://stackoverflow.com/users/806065/rich-maes"}, "edited": false, "score": 0, "creation_date": 1472663426, "post_id": 39255106, "comment_id": 65846393, "body": "One thing to confirm is that echo -e &quot;\\a&quot; actually causes a beep on your platform. You might have some other, system issues affecting your results... like the BIOS has the beep turned off, or something to that effect."}, {"owner": {"reputation": 11, "user_id": 6010141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ff99d967f9a7d02d5f5bef051523f8?s=128&d=identicon&r=PG&f=1", "display_name": "mar77", "link": "https://stackoverflow.com/users/6010141/mar77"}, "edited": false, "score": 0, "creation_date": 1472663979, "post_id": 39255106, "comment_id": 65846681, "body": "<code>echo -e &quot;\\a&quot;</code> works on my machine"}, {"owner": {"reputation": 11, "user_id": 6010141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ff99d967f9a7d02d5f5bef051523f8?s=128&d=identicon&r=PG&f=1", "display_name": "mar77", "link": "https://stackoverflow.com/users/6010141/mar77"}, "edited": false, "score": 0, "creation_date": 1472664304, "post_id": 39255106, "comment_id": 65846869, "body": "I put in a check for <code>fd = open(&quot;&#47;dev&#47;console&quot;, O_WRONLY)) == -1</code> as per beep.c, and it IS getting the error that it cannot open the /dev/console. Would this also prevent <code>printf(&quot;\\a&quot;)</code> from working?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472673517, "post_id": 39255106, "comment_id": 65851983, "body": "the header file: <code>iostream</code> is a C++ header file , not a C header file!  please either correct to <code>stdio.h</code> or change the tags from &quot;c&quot; to &quot;c++&quot;"}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472680734, "post_id": 39255106, "comment_id": 65855274, "body": "does <code>sudo modprobe pcspkr; echo -e &quot;\\a&quot;</code> make a sound?"}], "owner": {"reputation": 11, "user_id": 6010141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ff99d967f9a7d02d5f5bef051523f8?s=128&d=identicon&r=PG&f=1", "display_name": "mar77", "link": "https://stackoverflow.com/users/6010141/mar77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1472662442, "creation_date": 1472662442, "last_edit_date": 1492086161, "question_id": 39255106, "link": "https://stackoverflow.com/questions/39255106/beep-from-a-c-application-on-ubuntu-15-10", "title": "Beep from a C application on Ubuntu 15.10?", "body": "<p>I have an existing application in C that needs to produce a beep. I tried using <code>printf(\"\\a\")</code> and <code>printf(\"\\7\")</code> but no sound is produced. Currently, I am using the following snippet:</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;sys/ioctl.h&gt; \n#include &lt;fcntl.h&gt; \n#include &lt;linux/kd.h&gt;\n\nint freq = 2000;\nint ms = 1000;\nint fd = open(\"/dev/console\", O_WRONLY);\nioctl(fd, KIOCSOUND, (int)(1193180/freq));\nusleep(1000*ms);\nioctl(fd, KIOCSOUND, 0);\nclose(fd);\n</code></pre>\n\n<p>Based on <a href=\"http://www.johnath.com/beep/beep.c\" rel=\"nofollow noreferrer\">beep.c</a> and several other forum answers. Still, it produces no sound.</p>\n\n<p>I've also done the following steps (as per <a href=\"https://askubuntu.com/questions/228096/terminal-bell-doesnt-ring\">this post</a>) to solve the problem to no avail:</p>\n\n<blockquote>\n  <p>Run gconf-editor and if the desktop | gnome | peripherals | keyboard |\n  bell_mode setting is present then change it from off to on</p>\n  \n  <p>Run dconf-editor and if the org | gnome | settings-daemon |\n  peripherals | keyboard | bell-mode setting is present then change it\n  from off to on</p>\n  \n  <p>Add pactl upload-sample\n  /usr/share/sounds/gnome/default/alerts/glass.ogg bell.ogg to the file\n  ~/.xprofile (you need gnome-control-center-data for glass.ogg)</p>\n  \n  <p>Add [ \"$DISPLAY\" ] &amp;&amp; xset b 100 to the file ~/.bashrc</p>\n</blockquote>\n\n<p>Also:</p>\n\n<blockquote>\n  <p>uncomment the following in /etc/pulse/default.pa:</p>\n  \n  <p>load-sample-lazy x11-bell /usr/share/sounds/ubuntu/stereo/bell.ogg</p>\n  \n  <p>load-module module-x11-bell sample=bell-windowing-system</p>\n</blockquote>\n\n<p>I saw a separate thread with the alsamixer solution but there doesn't seem to be a 'PC Beep' option that I can see.</p>\n\n<p>What else can I try to produce a beep from my C program?</p>\n"}, {"tags": ["php", "c", "gcc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1472662256, "post_id": 39255038, "comment_id": 65845801, "body": "Running an arbitrary code received from client on the server is a one big security issue."}, {"owner": {"reputation": 147, "user_id": 2495826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9933a04ef3cb3965cdd2d286de99211e?s=128&d=identicon&r=PG", "display_name": "iamabhishek", "link": "https://stackoverflow.com/users/2495826/iamabhishek"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472662495, "post_id": 39255038, "comment_id": 65845911, "body": "@EugeneSh. I have taken a few security measures like, the active user account doesnt have root access on server. Also, if a program runs for more than 5 seconds, I am forcefully killing the process."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1472662591, "post_id": 39255038, "comment_id": 65845975, "body": "Then think what can a user without a root access do in 5 seconds on your server."}, {"owner": {"reputation": 1139, "user_id": 6490589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e5ed65e39aa221ca56c378a724110c?s=128&d=identicon&r=PG&f=1", "display_name": "Forbs", "link": "https://stackoverflow.com/users/6490589/forbs"}, "edited": false, "score": 0, "creation_date": 1472663189, "post_id": 39255038, "comment_id": 65846281, "body": "With that code, I would inject a <code>rm *</code> command"}, {"owner": {"reputation": 147, "user_id": 2495826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9933a04ef3cb3965cdd2d286de99211e?s=128&d=identicon&r=PG", "display_name": "iamabhishek", "link": "https://stackoverflow.com/users/2495826/iamabhishek"}, "reply_to_user": {"reputation": 1139, "user_id": 6490589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e5ed65e39aa221ca56c378a724110c?s=128&d=identicon&r=PG&f=1", "display_name": "Forbs", "link": "https://stackoverflow.com/users/6490589/forbs"}, "edited": false, "score": 0, "creation_date": 1472663589, "post_id": 39255038, "comment_id": 65846466, "body": "@Forbs Can you share a simple C program with <code>rm *</code> command in it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 1139, "user_id": 6490589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e5ed65e39aa221ca56c378a724110c?s=128&d=identicon&r=PG&f=1", "display_name": "Forbs", "link": "https://stackoverflow.com/users/6490589/forbs"}, "edited": false, "score": 0, "creation_date": 1472663846, "post_id": 39255038, "comment_id": 65846602, "body": "@Forbs First I would try to find some passwords around.."}, {"owner": {"reputation": 8169, "user_id": 2602732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aFcDy.png?s=128&g=1", "display_name": "cmorrissey", "link": "https://stackoverflow.com/users/2602732/cmorrissey"}, "edited": false, "score": 0, "creation_date": 1472664358, "post_id": 39255038, "comment_id": 65846909, "body": "This is a really bad idea, in fact most hosts will turn off compiler access because this is such a huge security issue."}, {"owner": {"reputation": 1139, "user_id": 6490589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e5ed65e39aa221ca56c378a724110c?s=128&d=identicon&r=PG&f=1", "display_name": "Forbs", "link": "https://stackoverflow.com/users/6490589/forbs"}, "edited": false, "score": 0, "creation_date": 1472664664, "post_id": 39255038, "comment_id": 65847085, "body": "Sorry iamabhishek, I&#39;m not posting code that will directly help someone destroy machines.  I&#39;m just showing you an example of how to someone can put something into your program to do that."}, {"owner": {"reputation": 147, "user_id": 2495826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9933a04ef3cb3965cdd2d286de99211e?s=128&d=identicon&r=PG", "display_name": "iamabhishek", "link": "https://stackoverflow.com/users/2495826/iamabhishek"}, "reply_to_user": {"reputation": 1139, "user_id": 6490589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e5ed65e39aa221ca56c378a724110c?s=128&d=identicon&r=PG&f=1", "display_name": "Forbs", "link": "https://stackoverflow.com/users/6490589/forbs"}, "edited": false, "score": 0, "creation_date": 1472664667, "post_id": 39255038, "comment_id": 65847087, "body": "@Forbs I am trying to build a compiler for a website to help users practice coding using online Compiler. For Java I plan to use the policy file to allow user to perform only a set of commands. But in C there is no such way.  Does having a policy file using <code>java.security.manager</code> to execute Java program of any help in case of Java Compiler ?"}, {"owner": {"reputation": 1139, "user_id": 6490589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e5ed65e39aa221ca56c378a724110c?s=128&d=identicon&r=PG&f=1", "display_name": "Forbs", "link": "https://stackoverflow.com/users/6490589/forbs"}, "edited": false, "score": 0, "creation_date": 1472666269, "post_id": 39255038, "comment_id": 65848054, "body": "Instead of building this yourself I&#39;m sure there are other ways to train someone how to code other than giving them direct access to a program where &#39;children looking for fun&#39; erase your system.  I once gave a Person access to PHPMYADMIN to add users. (Because they claimed to be safe and knew how to use it)  I go to lunch, and come back to find out she has pushed DROP TABLE just to see what it did. /sigh"}], "owner": {"reputation": 147, "user_id": 2495826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9933a04ef3cb3965cdd2d286de99211e?s=128&d=identicon&r=PG", "display_name": "iamabhishek", "link": "https://stackoverflow.com/users/2495826/iamabhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472662224, "creation_date": 1472662166, "last_edit_date": 1472662224, "question_id": 39255038, "link": "https://stackoverflow.com/questions/39255038/running-a-c-language-program-in-php-using-proc-open", "title": "Running a C language program in PHP using proc_open", "body": "<p>I am using <code>proc_open</code> to run the command : <code>gcc filename.c -o filename1</code>\nto compile the C program.</p>\n\n<p>And then the command : <code>./filename1</code> to execute the program.</p>\n\n<p>Is it the right way to implement a simple C Compiler in PHP?</p>\n\n<p>Please inform me about the possible security issues and how to fix them.</p>\n"}, {"tags": ["c", "linux", "bash", "gcc", "cc"], "comments": [{"owner": {"reputation": 10281, "user_id": 51760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SI89u.jpg?s=128&g=1", "display_name": "Aif", "link": "https://stackoverflow.com/users/51760/aif"}, "edited": false, "score": 0, "creation_date": 1472662003, "post_id": 39254904, "comment_id": 65845658, "body": "try to run <code>env</code> on the shell you&#39;re invoking your C program with. Do you get that <code>cc</code> variable? CC is an automatic variable from gnu make: <a href=\"https://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html\" rel=\"nofollow noreferrer\">gnu.org/software/make/manual/html_node/Implicit-Variables.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 3, "creation_date": 1472662190, "post_id": 39254904, "comment_id": 65845758, "body": "No, it says CC is an environment variable. Not cc."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1472661909, "creation_date": 1472661909, "answer_id": 39254964, "question_id": 39254904, "link": "https://stackoverflow.com/questions/39254904/getenvcc-is-returning-null-why/39254964#39254964", "title": "getenv(&quot;cc&quot;) is returning NULL , why?", "body": "<p>Quoting <a href=\"/questions/tagged/cc\" class=\"post-tag\" title=\"show questions tagged &#39;cc&#39;\" rel=\"tag\">cc</a>:</p>\n\n<blockquote>\n  <p>cc is a common name for a C compiler executable or driver. It is the default for the $(CC) make variable. </p>\n</blockquote>\n\n<hr>\n\n<p>Because, as the <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/getenv.html\" rel=\"nofollow\">ref</a> states:</p>\n\n<blockquote>\n  <p>If the specified name cannot be found in the environment of the calling process, a null pointer shall be returned.</p>\n</blockquote>\n\n<hr>\n\n<p>Moreover, if you run <code>env</code> on a terminal, will you see <code>cc</code>? Not really! That's why you get a <code>NULL</code> pointer. Since it doesn't seem to be an <em>environment variable</em>..</p>\n\n<hr>\n\n<p>I believe that the <code>cc</code> you mention is something like this in your makefile:</p>\n\n<pre><code>CC=gcc\n</code></pre>\n\n<p>something <a href=\"http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/\" rel=\"nofollow\">usual in Makefiles</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 3, "last_activity_date": 1472662022, "creation_date": 1472662022, "answer_id": 39254999, "question_id": 39254904, "link": "https://stackoverflow.com/questions/39254904/getenvcc-is-returning-null-why/39254999#39254999", "title": "getenv(&quot;cc&quot;) is returning NULL , why?", "body": "<p><code>cc</code> is usually not an environment variable.  There is commonly a symbolic link <code>/usr/bin/cc</code> which points at <code>gcc</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 4869125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e2f6a39ad422b2307d13e0905e3f62?s=128&d=identicon&r=PG", "display_name": "john.jansen", "link": "https://stackoverflow.com/users/4869125/john-jansen"}, "is_accepted": false, "score": 2, "last_activity_date": 1472662126, "creation_date": 1472662126, "answer_id": 39255028, "question_id": 39254904, "link": "https://stackoverflow.com/questions/39254904/getenvcc-is-returning-null-why/39255028#39255028", "title": "getenv(&quot;cc&quot;) is returning NULL , why?", "body": "<p>\"cc\" is a c compiler (executable), its not exposed as an environment variable ... getenv will print env variables</p>\n"}], "owner": {"reputation": 309, "user_id": 6779547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/966cf3e621c4ec60eb2bd419bb6e9833?s=128&d=identicon&r=PG&f=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/6779547/naresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 39254999, "answer_count": 3, "score": 4, "last_activity_date": 1472662189, "creation_date": 1472661735, "last_edit_date": 1495539952, "question_id": 39254904, "link": "https://stackoverflow.com/questions/39254904/getenvcc-is-returning-null-why", "title": "getenv(&quot;cc&quot;) is returning NULL , why?", "body": "<p>I am learning C and came across <code>cc</code> in the bash shell i.e. whenever I <code>make</code> my source files I see this command. </p>\n\n<p>Hence started to understand it,started with <code>gcc --help</code>  but couldn't find <code>cc</code> option in the help. So started surfing the net, and came across this <a href=\"https://stackoverflow.com/questions/1516609/difference-between-cc-gcc-and-g\">post</a>. In the second answer it says <code>cc</code> is an environment variable and often points to <code>/usr/bin/gcc</code> on Linux systems. </p>\n\n<p>I am using Linux distro and when I print return value from <code>getenv(\"cc\")</code>, I am getting <code>NULL</code>. Why is this happening?</p>\n"}, {"tags": ["c", "cmake"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1472661555, "post_id": 39254801, "comment_id": 65845449, "body": "BTW: Only <code>int</code> is legal as a return type of <code>main</code>"}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1472676199, "post_id": 39254801, "comment_id": 65853357, "body": "@milleniumbug it depends on the compiler. Some require it to be <code>void</code> (I&#39;ve seen this on microcontrollers)."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6055539, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iyPXT1LB4Ck/AAAAAAAAAAI/AAAAAAAAAZQ/e74SnMgE2R0/photo.jpg?sz=128", "display_name": "Ana Gonzalez", "link": "https://stackoverflow.com/users/6055539/ana-gonzalez"}, "edited": false, "score": 0, "creation_date": 1472703591, "post_id": 39258265, "comment_id": 65860871, "body": "How do i put the output?"}, {"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "reply_to_user": {"reputation": 33, "user_id": 6055539, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iyPXT1LB4Ck/AAAAAAAAAAI/AAAAAAAAAZQ/e74SnMgE2R0/photo.jpg?sz=128", "display_name": "Ana Gonzalez", "link": "https://stackoverflow.com/users/6055539/ana-gonzalez"}, "edited": false, "score": 0, "creation_date": 1472725607, "post_id": 39258265, "comment_id": 65872465, "body": "@AnaGonzalez The <code>-V</code> verbose option of <code>ctest</code> does show the output of  your program. You can take those hex number outputs and paste it as the expected <code>PASS_REGULAR_EXPRESSION</code>."}], "tags": [], "owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "is_accepted": true, "score": 1, "last_activity_date": 1506147257, "last_edit_date": 1506147257, "creation_date": 1472674434, "answer_id": 39258265, "question_id": 39254801, "link": "https://stackoverflow.com/questions/39254801/how-can-i-add-test-cases-in-cmake/39258265#39258265", "title": "How can I add test cases in CMake?", "body": "<p>Here is some CMake code that should give you a start (using <a href=\"/questions/tagged/cmake\" class=\"post-tag\" title=\"show questions tagged &#39;cmake&#39;\" rel=\"tag\">cmake</a> plus <a href=\"/questions/tagged/ctest\" class=\"post-tag\" title=\"show questions tagged &#39;ctest&#39;\" rel=\"tag\">ctest</a>) when your rewrite your test program to accept the key and plain text values as command line parameters:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(RC4Test C)\n\nenable_testing()\n\nadd_executable(${PROJECT_NAME} main.c)\n\nadd_test(NAME Test1 COMMAND ${PROJECT_NAME} \"Key\" \"Plaintext\")\nset_tests_properties(Test1 PROPERTIES PASS_REGULAR_EXPRESSION \"...\")\n\nadd_test(NAME Test2 COMMAND ${PROJECT_NAME} \"Wiki\" \"pedia\")\nset_tests_properties(Test2 PROPERTIES PASS_REGULAR_EXPRESSION \"...\")\n\nadd_test(NAME Test3 COMMAND ${PROJECT_NAME} \"Secret\" \"Attack at dawn\")\nset_tests_properties(Test3 PROPERTIES PASS_REGULAR_EXPRESSION \"...\")\n</code></pre>\n\n<p>Then you add whatever output is the correct one in <a href=\"https://cmake.org/cmake/help/latest/prop_test/PASS_REGULAR_EXPRESSION.html\" rel=\"nofollow noreferrer\"><code>PASS_REGULAR_EXPRESSION</code></a> test property place holder <code>\"...\"</code> I put in the code. </p>\n\n<p>And you are ready to go with:</p>\n\n<pre><code>&gt; mkdir build\n&gt; cd build\n&gt; cmake ..\n&gt; cmake --build . --config Release\n&gt; ctest -V -C Release\n</code></pre>\n\n<p><strong>References</strong></p>\n\n<ul>\n<li><a href=\"https://cmake.org/Wiki/CMake/Testing_With_CTest\" rel=\"nofollow noreferrer\">CMake/Testing With CTest</a></li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 6055539, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iyPXT1LB4Ck/AAAAAAAAAAI/AAAAAAAAAZQ/e74SnMgE2R0/photo.jpg?sz=128", "display_name": "Ana Gonzalez", "link": "https://stackoverflow.com/users/6055539/ana-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 39258265, "answer_count": 1, "score": 1, "last_activity_date": 1506147257, "creation_date": 1472661344, "question_id": 39254801, "link": "https://stackoverflow.com/questions/39254801/how-can-i-add-test-cases-in-cmake", "title": "How can I add test cases in CMake?", "body": "<p>I have this code of a RC4 algorithm, how can I make a cmake document that include the 3 test cases of key and plain values?</p>\n\n<pre><code>void main(int argc, char *argv[]) {\n    int i = 0;\n    //unsigned char key[]={\"Key\"},plain[]={\"Plaintext\"};\n    unsigned char key[]={\"Wiki\"},plain[]={\"pedia\"};\n    //unsigned char key[]={\"Secret\"},plain[]={\"Attack at dawn\"};\n\n    ksa(key,sizeof(key)-1);\n    prga(sizeof(plain)-1);\n    for (i=0;i&lt;sizeof(plain)-1;i++){\n        printf(\"%02X \",result[i]);\n    }\n\n    //Get cypher text\n    for(i=0; i&lt;sizeof(plain)-1;i++){\n        cipher[i] = result[i] ^ plain[i];\n    }\n    printf(\"\\n\");\n    for (i=0;i&lt;sizeof(plain)-1;i++){\n        printf(\"%02X \",cipher[i]);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "dll", "disassembly"], "comments": [{"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 1, "creation_date": 1472661523, "post_id": 39254718, "comment_id": 65845432, "body": "<code>_com_error (HRESULT_FROM_WIN32 (GetLastError ())).ErrorMessage ()</code> will tell you everything you need to know. Get to know <code>GetLastError</code>, it&#39;s important."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1472661816, "post_id": 39254718, "comment_id": 65845563, "body": "Which DLL are you talking about? There is only an EXE file."}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 1, "creation_date": 1472661969, "post_id": 39254718, "comment_id": 65845647, "body": "With that said, it&#39;s likely one module here is 32-bit and the other is 64-bit. That scenario generates a useless error."}, {"owner": {"reputation": 113, "user_id": 6594588, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6kTPS.jpg?s=128&g=1", "display_name": "Segmentation fault", "link": "https://stackoverflow.com/users/6594588/segmentation-fault"}, "reply_to_user": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1472667115, "post_id": 39254718, "comment_id": 65848509, "body": "@AndonM.Coleman How do I use that? Also, I tried opening the program in DependencyWalker and I do get an error that sounds like what you are suggesting: <code>Error: At least one module has an unresolved import due to a missing export function in an implicitly dependent module. Error: Modules with different CPU types were found.</code>"}, {"owner": {"reputation": 113, "user_id": 6594588, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6kTPS.jpg?s=128&g=1", "display_name": "Segmentation fault", "link": "https://stackoverflow.com/users/6594588/segmentation-fault"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1472667161, "post_id": 39254718, "comment_id": 65848534, "body": "@SamiKuhmonen The DLL is the executable itself."}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1472674466, "post_id": 39254718, "comment_id": 65852499, "body": "As Andon M. Coleman speculated, your program is using a DLL for the wrong architecture (32-bit vs. 64-bit).  Note that if DependencyWalker is reporting errors, it has nothing to do with your usage of <code>LoadLibrary</code>; DependencyWalker lists dependency errors from DLLs linked (via their import libraries) at compilation time. (You get an error message other than &quot;Error loading DLL&quot; when you try to run your program, right?)"}], "owner": {"reputation": 113, "user_id": 6594588, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6kTPS.jpg?s=128&g=1", "display_name": "Segmentation fault", "link": "https://stackoverflow.com/users/6594588/segmentation-fault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1472663779, "creation_date": 1472661017, "question_id": 39254718, "link": "https://stackoverflow.com/questions/39254718/importing-dll-in-c-from-within-program", "title": "Importing DLL in C from within program", "body": "<p>I am trying to follow an example from the book Hacker Disassembling Uncovered by Kris Kaspersky. The example is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n__declspec(dllexport) void Demo()\n{\n#define PASSWORD_SIZE 100\n#define PASSWORD \"myGOODpassword\\n\"\n    int count=0;\n    char buff [PASSWORD_SIZE]=\"\";\n    for(;;)\n        {\n            printf(\"Enter password:\");\n            fgets(&amp;buff[0], PASSWORD_SIZE-1, stdin);\n            if (strcmp(&amp;buff[0], PASSWORD))\n                printf(\"Wrong password\\n\");\n            else break;\n            if (++count&gt;2) return -1;\n        }\n    printf(\"Password OK\\n\");\n}\n\nmain()\n    {\n        HMODULE hmod;\n        void (*zzz) ();\n        if ((hmod=LoadLibrary(\"crackme0x03.exe\"))\n            &amp;&amp; (zzz=(void (*) ())GetProcAddress (hmod, \"Demo\")))\n                zzz();\n        else\n            printf(\"Error loading DLL\\n\");      \n    }\n</code></pre>\n\n<p>This code should be stored in a file called crackme0x03.c and compiled. The problem is, the DLL won't load. I even tried putting the dll in another file and calling it but doesn't work. Why is this not working? Can anyone help me?</p>\n"}, {"tags": ["c", "fork", "ipc", "mmap"], "answers": [{"comments": [{"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1472720910, "post_id": 39254749, "comment_id": 65869155, "body": "Your answer surely deserves a test, let me try it on my code."}, {"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1472749821, "post_id": 39254749, "comment_id": 65889189, "body": "Turned out your answer is the best: your call to <code>mmap</code> had <code>invalid argument</code> because I passed it <code>0</code> as <code>size_t length</code>, so first time I passed it <code>getpagesize()</code>; I used <code>snprint</code> to write in a temporary buffer and then <code>write</code> in <code>data</code> the number of bytes  written in this buffer; now I can see if a string was already inserted in shared file. Still having difficulties in updating string: the real structure is <code>hostname time_t</code> and even if I can get <code>time_t</code> seconds, I need to write the new <code>time_t</code> seconds of the last visit, but that is another matter."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 1, "creation_date": 1472749990, "post_id": 39254749, "comment_id": 65889281, "body": "@elmazzun: Ah, yeah, forgot about length <code>0</code> being verboten on some OSes; you could just as easily use a length of <code>filestats.st_size ? filestats.st_size : 1</code> (which will map a whole page anyway, since that&#39;s how <code>mmap</code> operates, and avoids needing to check the real page size)."}, {"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1472751003, "post_id": 39254749, "comment_id": 65889831, "body": "Just one more thing: every row in my file is <code>string int</code>; if <code>string</code> is already inserted take <code>int</code>, compute the difference between <code>time_t now = time(NULL)</code> and <code>int</code> field, update the difference inserting <code>time_t now</code> in <code>int</code> field for future visits and differences; when I write the new <code>time_t</code> value in <code>int</code> field, do I need to <code>mremap</code> again just for updating the <code>int</code> field?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1472753719, "post_id": 39254749, "comment_id": 65891284, "body": "@elmazzun: Depends how it&#39;s stored. If it&#39;s a string timestamp padded to a fixed width, or a raw binary timestamp, then no remapping would be required; the size never changes. I&#39;d strongly recommend one of those, because the alternative (non-fixed width timestamps) would require annoying and error prone work any time the length of the timestamp changes, to move all of the data following it appropriately."}, {"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1472755150, "post_id": 39254749, "comment_id": 65892057, "body": "My fields are <code>string ; long unsigned int</code>, because of the cast I made <code>(unsigned long)time(NULL)</code>. For example, a row may be <code>www.google.com 1472755105</code>: is this one of the two alternatives you are talking about?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 1, "creation_date": 1472773887, "post_id": 39254749, "comment_id": 65899304, "body": "@elmazzun: You&#39;d need to make sure it was printed with a format code like <code>%010ld</code> if times might fall into spans before early Sept. 2001, but not after mid-November 2286 (and yes, times before Sept. 2001 should be handled properly; sometimes computer clocks go awry, and you don&#39;t want to corrupt the file if that happens). If you want to handle beyond 2286, use <code>%011ld</code>."}, {"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1472823838, "post_id": 39254749, "comment_id": 65921530, "body": "I&#39;d like to share my code, if anyone in future will have my problem. I just hope it is correct, but it seems to work!"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 1, "last_activity_date": 1472750583, "last_edit_date": 1495535351, "creation_date": 1472661145, "answer_id": 39254749, "question_id": 39254654, "link": "https://stackoverflow.com/questions/39254654/sharing-text-file-between-processes-with-open-and-mmap/39254749#39254749", "title": "Sharing text file between processes with open() and mmap()", "body": "<p>This line is problematic:</p>\n\n<pre><code>if (ftruncate(fd, sizeof(textsize)) == -1) {\n</code></pre>\n\n<p><code>textsize</code> is a <code>size_t</code>, and taking its <code>sizeof</code> is just going to get 4 or 8 (on 32 and 64 bit systems). Looks like you're on a 64 bit system, so you're unconditionally truncating the file to 8 bytes in this case before every write. The \"strange symbols\" are just how your editor displays <code>NUL</code>/zero bytes. Even if you used <code>ftruncate(fd, textsize)</code>, you'd still truncate down to just the string you're about to write, overwriting any data other children may have written; I doubt you want to <code>ftruncate</code> at all here.</p>\n\n<p>For continual appends from separate processes (where they can't share information about the size or offset of the data they're adding), memory mapping just doesn't make sense; why aren't you just having each of them take the lock, <code>lseek</code> to end of file, then call <code>write</code>? You could still use memory mappings for the duplicate checking (some of it without locking), it would just be a bit different. Something like this:</p>\n\n<pre><code>int main(void) {\n    struct stat filestats;\n    int index;\n    int children = 3;\n    const char *filepath = \"mapped.txt\";\n    sem_t *sem;\n    char *data;\n\n    sem = sem_open(\"semaphore\", O_CREAT | O_EXCL, 0644, 1);\n    sem_unlink(\"semaphore\");\n    int fd;\n    fd = open(filepath, O_RDWR | O_CREAT, 0644);\n    if (fd &lt; 0) {\n        perror(\"open:\");\n        return EXIT_FAILURE;\n    }\n\n    // Mostly just to ensure it's mappable, we map the current size of the file\n    // If the file might already have values, and many child workers won't add\n    // to it, this might save some mapping work in the children; you could\n    // just map in the children when needed though\n    if (fstat(fd, &amp;filestats) != 0) {\n        close(fd);\n        perror(\"fstat:\");\n        return EXIT_FAILURE;\n    }\n    data = mmap(NULL, filestats.st_size, PROT_READ, MAP_SHARED, fd, 0);\n    if (data == MAP_FAILED) {\n        close(fd);\n        perror(\"mmap:\");\n        return EXIT_FAILURE;\n    }\n\n    for (index=0; index&lt;children; index++) {\n        if (fork() == 0) {\n            const size_t origsize = filestats.st_size;\n            sem_wait(sem);\n\n            // remap to current file size if it changed\n            // If you're not on Linux, you'd just have to mmap from scratch\n            // since mremap isn't standard\n            fstat(fd, &amp;filestats);\n            if (origsize != filestats.st_size) {\n                data = mremap(data, origsize, filestats.st_size, MREMAP_MAYMOVE);\n                if (data == MAP_FAILED) {\n                    close(fd);\n                    sem_post(sem);\n                    perror(\"mmap:\");\n                    _exit(EXIT_FAILURE);\n                }\n            }\n\n            // Not safe to use strstr since mapping might not end with NUL byte\n            // You'd need to workaround this, or implement a your own memstr-like function\n            if (!memstr(data, arrayString[index])) {\n                // Move fd to end of file, so we append new data\n                lseek(fd, 0, SEEK_END);\n                write(fd, arrayString[index], strlen(arrayString[index]));\n                write(fd, \"\\n\", 1);\n                fsync(fd);\n            }\n            munmap(data, filestats.st_size);\n            close(fd);\n            sem_post(sem);\n            _exit(EXIT_SUCCESS);\n        }\n    }\n    munmap(data, filestats.st_size);\n    close(fd);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>That <code>memstr</code> I referenced would need to be hand-implemented (or you'd need to do terrible things like ensure the file always had a <code>NUL</code> byte at the end so you could use <code>strstr</code> on it); you can get some tips on that <a href=\"https://stackoverflow.com/q/8584644/364696\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1472662711, "post_id": 39254843, "comment_id": 65846036, "body": "This loop will write <code>first^@second^@third^@</code> in shared file; if I add <code>\\n</code> at each string in <code>arrayString</code>, and calculate <code>size_t textsize</code> without <code>+1</code>, the file will be perfectly formatted, one string each row; string formatting is important to me, since I&#39;ll need to parse strings in this file."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1472663344, "post_id": 39254843, "comment_id": 65846349, "body": "@elmazzun: As implemented, the mapping won&#39;t be large enough if your file ever exceeds the page size (the amount you <code>mmap</code>ed). See <a href=\"http://stackoverflow.com/a/39254749/364696\">my answer</a> for handling this (it means using <code>mremap</code> if on Linux, or just deferring the <code>mmap</code> step until the child holds the semaphore on other OSes)."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1472661511, "creation_date": 1472661511, "answer_id": 39254843, "question_id": 39254654, "link": "https://stackoverflow.com/questions/39254654/sharing-text-file-between-processes-with-open-and-mmap/39254843#39254843", "title": "Sharing text file between processes with open() and mmap()", "body": "<p>You're writing all the strings at offset 0 of the file, each over the top of the previous.  The core of your loop should be something like</p>\n\n<pre><code>struct stat status;\nfstat(fd, &amp;status);\nsize_t cursize = status.st_size;\nftruncate(fd, cursize + textsize);\nfor (size_t i = 0; i &lt; textsize; i++) {\n    data[cursize + i] = arrayString[index][i];\n}\n</code></pre>\n"}], "owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1462, "favorite_count": 0, "accepted_answer_id": 39254749, "answer_count": 2, "score": 0, "last_activity_date": 1472824512, "creation_date": 1472660828, "last_edit_date": 1472824512, "question_id": 39254654, "link": "https://stackoverflow.com/questions/39254654/sharing-text-file-between-processes-with-open-and-mmap", "title": "Sharing text file between processes with open() and mmap()", "body": "<p>I'm trying to share a text file between forked processes on my Ubuntu x86_64: the file will not be absurdly large, since strings will be wrote only if there is not already another identical string in the file; strings will be hostnames of visited websites, so I'll assume no more than 255 bytes for each hostname.</p>\n\n<p>When it is a process turn to write in shared object, it is OK; once all the processes wrote in shared object, <code>msync</code> should make the writing effective on the disk, but the <code>mapped.txt</code> file created only contain one string from <code>arrayString</code>, i.e. the string the last process wrote in shared object.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;string.h&gt;\n\n// first forked process will write \"first\" in file, and so on\nconst char *arrayString[] = {\n    \"first\", \n    \"second\",\n    \"third\"\n};\n\nint main(void) {\n\n    int index;\n    int children = 3;\n    const char *filepath = \"mapped.txt\";\n    sem_t *sem;\n\n    sem = sem_open(\"semaphore\", O_CREAT | O_EXCL, 0644, 1);\n    sem_unlink(\"semaphore\");\n    int fd;\n    fd = open(filepath, O_RDWR | O_CREAT, 0644);\n    if (fd &lt; 0) {\n        perror(\"open:\");\n        return EXIT_FAILURE;\n    }\n\n    char *data;\n    data = (char *)mmap(NULL, getpagesize(), PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);\n    if (data == MAP_FAILED) {\n        close(fd);\n        perror(\"mmap:\");\n        return EXIT_FAILURE;\n    }\n\n    for (index=0; index&lt;children; index++) {\n        if (fork() == 0) {\n            sem_wait(sem);\n\n            size_t textsize = strlen(arrayString[index])+1;\n\n            if (ftruncate(fd, sizeof(textsize)) == -1) {\n                perror(\"ftruncate:\");\n                return EXIT_FAILURE;\n            }\n\n            for (size_t i = 0; i &lt; textsize; i++) {\n                printf(\"%d Writing character %c at %zu\\n\", getpid(), arrayString[index][i], i);\n                data[i] = arrayString[index][i];\n            }\n\n            printf(\"%d wrote \", getpid());\n            for (size_t i = 0; i &lt; textsize; i++) {\n                printf(\"%c\", data[i]);\n            }\n            printf(\"\\n\");\n\n            if (msync(data, textsize, MS_SYNC) == -1) {\n                perror(\"Could not sync the file to disk\");\n            }\n\n            sem_post(sem);\n            _exit(EXIT_SUCCESS);\n        }\n    }\n    close(fd);\n\n    return EXIT_SUCCESS;\n}     \n</code></pre>\n\n<p>This is one possible output of the code above for three child processes (this is fine):</p>\n\n<pre><code>20373 Writing character s at 0\n20373 Writing character e at 1\n20373 Writing character c at 2\n20373 Writing character o at 3\n20373 Writing character n at 4\n20373 Writing character d at 5\n20373 Writing character  at 6\n20373 wrote second\n20374 Writing character t at 0\n20374 Writing character h at 1\n20374 Writing character i at 2\n20374 Writing character r at 3\n20374 Writing character d at 4\n20374 Writing character  at 5\n20374 wrote third\n20372 Writing character f at 0\n20372 Writing character i at 1\n20372 Writing character r at 2\n20372 Writing character s at 3\n20372 Writing character t at 4\n20372 Writing character  at 5\n20372 wrote first\n</code></pre>\n\n<p>And here's the content of <code>mapped.txt</code> (this is bad):</p>\n\n<pre><code>first^@^@^@\n</code></pre>\n\n<p>I expected:</p>\n\n<pre><code>second\nthird\nfirst\n</code></pre>\n\n<p>but all I get is only the string of the last process, with those strange symbols. I'd like to keep this file persistent in memory, but because of the I/O slowness, I'm trying to use memory mapping.\nAny idea why my file only contains the string written by the last process accessing the shared file?</p>\n\n<p><strong>Edit</strong>: I think I get it, it seems to work now: I hope it will be of help to someone. Compiled with <code>g++ -g -o mapthis mapthis.cpp -lrt -pthread</code>. Beware that some error checking are missing, like for <code>fsync</code>, <code>snprintf</code> and <code>lseek</code>. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nconst char *arrayString[] = {\n    \"www.facebook.com\",\n    \"www.google.com\",\n    \"www.cnn.com\",\n    \"www.speechrepository.com\",\n    \"www.youtube.com\",\n    \"www.facebook.com\",\n    \"www.google.com\",\n    \"www.cnn.com\",\n    \"www.speechrepository.com\",\n    \"www.youtube.com\",\n    \"www.facebook.com\",\n    \"www.google.com\",\n    \"www.cnn.com\",\n    \"www.speechrepository.com\",\n    \"www.youtube.com\"\n};\n\nint main(void) {\n\n    int index;\n    int children = sizeof(arrayString) / sizeof(char*);;\n    const char *filepath = \"mapped.txt\";\n    sem_t *sem;\n    char *data;\n    struct stat filestats;\n\n    sem = sem_open(\"semaphore\", O_CREAT | O_EXCL, 0644, 1);\n    sem_unlink(\"semaphore\");\n    int fd;\n    fd = open(filepath, O_RDWR | O_CREAT, 0644);\n    if (fd &lt; 0) {\n        perror(\"open:\");\n        return EXIT_FAILURE;\n    }\n\n    if (fstat(fd, &amp;filestats) &lt; 0) {\n        close(fd);\n        perror(\"fstat:\");\n        return EXIT_FAILURE;\n    }\n\n    data = (char *)mmap(NULL, filestats.st_size ? filestats.st_size : 1, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);\n    if (data == MAP_FAILED) {\n        close(fd);\n        perror(\"first map:\");\n        return EXIT_FAILURE;\n    }\n\n    for (index=0; index&lt;children; index++) {\n        sleep(1);\n        pid_t pid = fork();\n        if (pid == 0) {\n            int nw = 0;\n            int hostnameSize = 0;\n            const size_t origsize = filestats.st_size;\n            char *hostPos = NULL;\n            char *numPos = NULL;\n            char *backslashPos = NULL;\n            char tempBuff[64];\n            memset((char *)tempBuff, 0, sizeof(tempBuff));\n            sem_wait(sem);\n            // remap to current file size if it changed\n            fstat(fd, &amp;filestats);\n            // file empty, just insert\n            if (filestats.st_size == 0) {\n                nw = snprintf(tempBuff, sizeof(tempBuff), \"%s %010lu\\n\", arrayString[index], (unsigned long)time(NULL));\n                write(fd, tempBuff, nw);\n                fsync(fd);\n            }\n            else {\n                // file not empty, let's look for string\n                hostPos = strstr(data, arrayString[index]);\n                if (hostPos) {\n                    // string is already inserted, search for offset of number of seconds\n                    lseek(fd, hostPos-data, SEEK_SET);\n                    numPos = strchr(hostPos, ' ')+1;\n                    backslashPos = strchr(numPos, '\\n');\n                    long unsigned before = atoi(numPos);\n                    long unsigned now = (unsigned long)time(NULL);\n                    long unsigned difference = now - before;\n                    printf(\"%s visited %ld seconds ago (%ld - %ld)\\n\", \n                        arrayString[index], difference, now, before);\n                    nw = snprintf(tempBuff, backslashPos-hostPos+1, \"%s %010lu\", arrayString[index], now);\n                    write(fd, tempBuff, nw);\n                    write(fd, \"\\n\", 1);\n                    fsync(fd);\n                }\n                else {\n                    data = (char *)mremap(data, origsize, filestats.st_size, MREMAP_MAYMOVE);\n                    if (data == MAP_FAILED) {\n                        close(fd);\n                        sem_post(sem);\n                        perror(\"mmap:\");\n                        _exit(EXIT_FAILURE);\n                    }\n                    lseek(fd, 0, SEEK_END);\n                    nw = snprintf(tempBuff, sizeof(tempBuff), \"%s %010lu\\n\", arrayString[index], (unsigned long)time(NULL));\n                    write(fd, tempBuff, nw);\n                    fsync(fd);\n                }\n            }\n            munmap(data, filestats.st_size);\n            close(fd);\n            sem_post(sem);\n            _exit(EXIT_SUCCESS);\n        }\n        else if (pid &gt; 0) {\n            wait(NULL);\n        }\n    }\n    munmap(data, filestats.st_size);\n    close(fd);\n\n    return EXIT_SUCCESS;\n}     \n</code></pre>\n"}, {"tags": ["c", "linux", "user-interface", "gtk", "gtk3"], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1, "user_id": 5211897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906900c5efc5de25ec7a197aa74233c8?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Aguirre", "link": "https://stackoverflow.com/users/5211897/carlos-aguirre"}, "edited": false, "score": 0, "creation_date": 1472670917, "post_id": 39254507, "comment_id": 65850663, "body": "Try <code>GtkWidget *ventana = gtk_window_new(GTK_WINDOW_TOPLEVEL);</code> instead of the gtkbuilder, does it work?"}, {"owner": {"reputation": 1, "user_id": 5211897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906900c5efc5de25ec7a197aa74233c8?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Aguirre", "link": "https://stackoverflow.com/users/5211897/carlos-aguirre"}, "edited": false, "score": 0, "creation_date": 1472673782, "post_id": 39254507, "comment_id": 65852134, "body": "Don&#39;t work neighter. I want know how to show the errors with GLib GErrors. Thanks for help me, Sorry my bad Engish"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1, "user_id": 5211897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906900c5efc5de25ec7a197aa74233c8?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Aguirre", "link": "https://stackoverflow.com/users/5211897/carlos-aguirre"}, "edited": false, "score": 0, "creation_date": 1472682179, "post_id": 39254507, "comment_id": 65855811, "body": "@CarlosAguirre Yo s&#233; espa&#241;ol mejor que ingl&#233;s, pero aqu&#237; no se permite. Hay funciones para imprimir los errors de glib, busca en google."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1472662958, "last_edit_date": 1472662958, "creation_date": 1472660303, "answer_id": 39254507, "question_id": 39254440, "link": "https://stackoverflow.com/questions/39254440/how-to-get-parse-errors-from-gtk3-builder/39254507#39254507", "title": "How to get parse errors from gtk+3 builder?", "body": "<p>You never call <code>gtk_widget_show_all()</code> add this before <code>gtk_main()</code></p>\n\n<pre><code>gtk_widget_show_all(GTK_WIDGET(ventana));\n</code></pre>\n\n<p>Actually, you call <code>gtk_builder_get_object()</code> but you do nothing with that variable, so that line of code is completely unecessary, unless you add what y suggest.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5211897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906900c5efc5de25ec7a197aa74233c8?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Aguirre", "link": "https://stackoverflow.com/users/5211897/carlos-aguirre"}, "edited": false, "score": 0, "creation_date": 1472670679, "post_id": 39255035, "comment_id": 65850537, "body": "Hi, i read the documentation and I don&#39;t know how to use the GErrror I don&#39;t understant. You should give me a example"}], "tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": false, "score": 1, "last_activity_date": 1472662159, "creation_date": 1472662159, "answer_id": 39255035, "question_id": 39254440, "link": "https://stackoverflow.com/questions/39254440/how-to-get-parse-errors-from-gtk3-builder/39255035#39255035", "title": "How to get parse errors from gtk+3 builder?", "body": "<p>The last parameter of <code>gtk_builder_add_from_file()</code> is a GError object that will receive error information if there is an error; the return value of <code>gtk_builder_add_from_file()</code> indicates whether an error occurred. Check the GLib documentation for more details. (iharob's answer is probably correct, but knowing how to deal with errors is useful as well.)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5211897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906900c5efc5de25ec7a197aa74233c8?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Aguirre", "link": "https://stackoverflow.com/users/5211897/carlos-aguirre"}, "is_accepted": false, "score": 0, "last_activity_date": 1472679998, "creation_date": 1472679998, "answer_id": 39259513, "question_id": 39254440, "link": "https://stackoverflow.com/questions/39254440/how-to-get-parse-errors-from-gtk3-builder/39259513#39259513", "title": "How to get parse errors from gtk+3 builder?", "body": "<p>Declare a</p>\n\n<pre><code>GError *error=NULL;\n</code></pre>\n\n<p>in the line</p>\n\n<pre><code>gtk_builder_add_from_file(programa, \"interfaz.ui\", NULL);\n</code></pre>\n\n<p>change for</p>\n\n<pre><code>gtk_builder_add_from_file(programa, \"interfaz.ui\", &amp;error);\n</code></pre>\n\n<p>and show errors with</p>\n\n<pre><code>fprintf (stderr, \"%s\\n\", error-&gt;message);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5211897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906900c5efc5de25ec7a197aa74233c8?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Aguirre", "link": "https://stackoverflow.com/users/5211897/carlos-aguirre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1472679998, "creation_date": 1472660061, "last_edit_date": 1472660348, "question_id": 39254440, "link": "https://stackoverflow.com/questions/39254440/how-to-get-parse-errors-from-gtk3-builder", "title": "How to get parse errors from gtk+3 builder?", "body": "<p>I'm learning C language with GTK to build GUIs.\nI have a problem, I start to pogramming a sofware very simple, I compile without errors but don't show a window and don't show errors and don't show warnings neigther.\nI think that problem is on the interfaz file but i don't know how to get parse errors from that file in gtk with c language. \nThis is my code </p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nint main(int argc, char **argv){\n    GtkBuilder *programa;\n    GObject *ventana;\n\n\n    gtk_init (&amp;argc, &amp;argv);\n\n    programa = gtk_builder_new();\n    gtk_builder_add_from_file(programa, \"interfaz.ui\", NULL);\n\n    ventana = gtk_builder_get_object(programa, \"ventana\");\n\n    gtk_main();\n    return 0;    \n}\n</code></pre>\n\n<p>and this is the content the gui file\n</p>\n\n<pre><code>&lt;interface&gt;\n    &lt;object id=\"ventana\" class=\"GtkWindow\"&gt;\n        &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n        &lt;property name=\"title\"&gt;BackLight's Keyboard&lt;/property&gt;\n        &lt;property name=\"border-width\"&gt;10&lt;/property&gt;\n        &lt;property name=\"width\"&gt;100&lt;/property&gt;\n        &lt;property name=\"height\"&gt;100&lt;/property&gt;\n        &lt;signal name=\"destroy\" handler=\"on_window_destroy\" swapped=\"no\"/&gt;\n\n        &lt;child&gt;\n            &lt;object id=\"cajaVentana\" class=\"GtkGrid\" &gt;\n                &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n\n                &lt;child&gt;\n                    &lt;object id=\"Imagen\" class=\"GtkImage\" &gt;\n                        &lt;property name=\"file\"&gt;backlighticon.jpg&lt;/property&gt;\n                        &lt;packing&gt;\n                            &lt;property name=\"left-attach\"&gt;0&lt;/property&gt;\n                            &lt;property name=\"top-attach\"&gt;1&lt;/property&gt;\n                            &lt;property name=\"width\"&gt;2&lt;/property&gt;\n                        &lt;/packing&gt;                       \n\n                    &lt;/object&gt;    \n                &lt;/child&gt;\n\n                &lt;packing&gt;\n                &lt;/packing&gt;\n            &lt;/object&gt;\n        &lt;/child&gt;\n    &lt;/object&gt;\n&lt;/interface&gt;\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1472660142, "post_id": 39254408, "comment_id": 65844691, "body": "Why would you think that an error would occur? The <i>point</i> of <code>#ifndef</code> is to guard against the error that you are worried about."}, {"owner": {"reputation": 1692, "user_id": 6588224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fa171624f6e8b69a48e9f0b71a5dcd1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jin", "link": "https://stackoverflow.com/users/6588224/jin"}, "reply_to_user": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1472660241, "post_id": 39254408, "comment_id": 65844732, "body": "Sorry my mistake!"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1472660057, "creation_date": 1472660057, "answer_id": 39254439, "question_id": 39254408, "link": "https://stackoverflow.com/questions/39254408/confusion-about-redefining-constant-using-define-directivedefine-in-c/39254439#39254439", "title": "Confusion about redefining constant using define directive(#define) in C", "body": "<p>Of course it doesn't, because <code>#define X 100</code> is never reached.</p>\n\n<p>Think about this, what does <code>#ifndef</code> do?</p>\n\n<p>Put the <code>#define X 10</code> below the <code>#include</code>, what happens now?</p>\n"}], "owner": {"reputation": 1692, "user_id": 6588224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fa171624f6e8b69a48e9f0b71a5dcd1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jin", "link": "https://stackoverflow.com/users/6588224/jin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 39254439, "answer_count": 1, "score": 1, "last_activity_date": 1472660057, "creation_date": 1472659929, "question_id": 39254408, "link": "https://stackoverflow.com/questions/39254408/confusion-about-redefining-constant-using-define-directivedefine-in-c", "title": "Confusion about redefining constant using define directive(#define) in C", "body": "<p>As far as I know, standard allows redefinition only if the new definition duplicates the old one. So for example, </p>\n\n<p>If,</p>\n\n<pre><code>#define X 100\n</code></pre>\n\n<p>Then, </p>\n\n<pre><code>#define X 200 // Not allowed\n#define X 100 // Allowed\n</code></pre>\n\n<p>But what confuses me is when the header file includes redefintion which doesn't duplicate the old defintion. For example, </p>\n\n<p>There is a header file, <code>header.h</code> such that</p>\n\n<pre><code>#ifndef X\n#define X 100\n#endif\n</code></pre>\n\n<p>and source code <code>main.c</code> such that </p>\n\n<pre><code>#define X 10\n#include \"header.h\" \n</code></pre>\n\n<p>Since <code>#define X 100</code> is below <code>#define X 10</code> in the <code>main</code> file, I thought this would occur error. But surprisingly, the compiler does not complain! Why is such behaviour allowed in C?</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1472659460, "post_id": 39254233, "comment_id": 65844363, "body": "Can you show something that looks like a code of what you are talking about? It is very unclear now."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1472659562, "post_id": 39254233, "comment_id": 65844414, "body": "Macros are a pure compile-time feature, they are replaced by the preprocessor with the macro expansion. Once the code has passed the preprocessor there are no traces left of the macros that the compiler &quot;proper&quot; sees."}, {"owner": {"reputation": 2295, "user_id": 792779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99528e625676b23a593f5a3daa005793?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/792779/john"}, "edited": false, "score": 0, "creation_date": 1472659583, "post_id": 39254233, "comment_id": 65844429, "body": "So you&#39;re trying to pass a macro into <code>set_field</code> so that <code>set_field</code> can call your macro with <code>x</code>? This is not possible, macros are expanded before compilation so you can&#39;t pass a reference to a macro like you can a function."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1472659648, "post_id": 39254233, "comment_id": 65844461, "body": "Don&#39;t write macros like that, be very careful with them, write <code>cos((k)*(x) + (phi))</code> instead, google why."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1472659890, "post_id": 39254233, "comment_id": 65844588, "body": "What do you mean with: &quot;<i>has to be one macro with unknown <code>x</code></i>&quot;, if you mean that <code>x</code> is a variable you can pass <code>x</code> as a macro parameter too. If <code>x</code> is always <code>x</code>, then simply use the <code>mode_one</code> style. But I think that is terribly bad, because it makes the definition of the macro have no sense. An also you can always use functions."}, {"owner": {"reputation": 1, "user_id": 2561161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7f8be4e9112aa92f7c7392d30bcf33?s=128&d=identicon&r=PG", "display_name": "user2561161", "link": "https://stackoverflow.com/users/2561161/user2561161"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472660853, "post_id": 39254233, "comment_id": 65845072, "body": "@Eugene Sh. Questions is updated"}, {"owner": {"reputation": 1, "user_id": 2561161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7f8be4e9112aa92f7c7392d30bcf33?s=128&d=identicon&r=PG", "display_name": "user2561161", "link": "https://stackoverflow.com/users/2561161/user2561161"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1472661238, "post_id": 39254233, "comment_id": 65845264, "body": "@iharob set_field is still a macro in the library. It requires mode_n to be a macro. I have no choice to pass mode_n as function. And mode_n can have hundreds of terms. If we don&#39;t use a loop, mode_n will be very long."}, {"owner": {"reputation": 1, "user_id": 2561161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7f8be4e9112aa92f7c7392d30bcf33?s=128&d=identicon&r=PG", "display_name": "user2561161", "link": "https://stackoverflow.com/users/2561161/user2561161"}, "reply_to_user": {"reputation": 2295, "user_id": 792779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99528e625676b23a593f5a3daa005793?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/792779/john"}, "edited": false, "score": 0, "creation_date": 1472661337, "post_id": 39254233, "comment_id": 65845326, "body": "@Trey set_field is still a macro"}, {"owner": {"reputation": 1, "user_id": 2561161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7f8be4e9112aa92f7c7392d30bcf33?s=128&d=identicon&r=PG", "display_name": "user2561161", "link": "https://stackoverflow.com/users/2561161/user2561161"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472661497, "post_id": 39254233, "comment_id": 65845409, "body": "@JoachimPileborg set_field is a still macro"}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 640259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae61300b46b5377d5f08acf60927785?s=128&d=identicon&r=PG", "display_name": "sam msft", "link": "https://stackoverflow.com/users/640259/sam-msft"}, "is_accepted": false, "score": -1, "last_activity_date": 1472659715, "creation_date": 1472659715, "answer_id": 39254353, "question_id": 39254233, "link": "https://stackoverflow.com/questions/39254233/macro-defined-using-loops/39254353#39254353", "title": "macro defined using loops", "body": "<p>Yes you can put a loop in a macro. Put it in one line or multiple lines. If it is multiple lines, you need to put an escape character at the end of the line. </p>\n"}], "owner": {"reputation": 1, "user_id": 2561161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7f8be4e9112aa92f7c7392d30bcf33?s=128&d=identicon&r=PG", "display_name": "user2561161", "link": "https://stackoverflow.com/users/2561161/user2561161"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472706237, "creation_date": 1472659302, "last_edit_date": 1472663419, "question_id": 39254233, "link": "https://stackoverflow.com/questions/39254233/macro-defined-using-loops", "title": "macro defined using loops", "body": "<p>I have to pass a macro <code>mode_n</code> to a macro <code>set_field</code> in a library. <code>mode_n</code> is defined using <code>mode_one</code></p>\n\n<pre><code>#define mode_one(k, phi) cos(k*x + phi)\n</code></pre>\n\n<p><code>x</code> is defined in <code>set_field</code>. <code>phi</code> is a random number. <code>mode_n</code> is the sum of a series of <code>mode_one</code> which have different <code>k</code> and <code>phi</code>. One simple example of <code>mode_n</code> is</p>\n\n<pre><code>#define mode_n (mode_one(1, 0.5) + mode_one(2, 0.4) + mode_one(3, 0.9))\n</code></pre>\n\n<p>There are 3 terms. It will be tedious if there are hundreds of terms like this. That's why I hope to define <code>mode_n</code> using a loop.\nI expect <code>n</code> to be one argument of <code>mode_n</code>. <code>set_field</code> is macro like this</p>\n\n<pre><code>#define set_field(mode_n) { \\\ndouble x, f; \\\nfor (int i = 0; i &lt; 10; i++) { \\\n    x = i * 10; \\\n    f = mode_n; \\\n}\n</code></pre>\n\n<p>Is it possible to define <code>mode_n</code> using C macros?</p>\n"}, {"tags": ["c", "return-type"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472656615, "post_id": 39252933, "comment_id": 65842512, "body": "Something in the build is likely to be defining DESC_API on the compiler command line."}, {"owner": {"reputation": 76, "user_id": 5728855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2851f3d48bde6370813c240e59598b?s=128&d=identicon&r=PG&f=1", "display_name": "user5728855", "link": "https://stackoverflow.com/users/5728855/user5728855"}, "edited": false, "score": 0, "creation_date": 1472659506, "post_id": 39252933, "comment_id": 65844386, "body": "It probably does nothing. I think it might be a hook for something (as described in the answers below) that was either never implemented or that is injected at compile time. Have you tried telling your compiler to do only the pre-proceessing part (&#39;gcc -E&#39;, for example) to see what that resolves into? Maybe that&#39;ll give you more clues as to what is happening."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1472655500, "post_id": 39253001, "comment_id": 65841736, "body": "Careful.  The code presented defines <code>DESC_API</code> as nothing only if it is not already defined."}], "tags": [], "owner": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "is_accepted": false, "score": 0, "last_activity_date": 1472655451, "creation_date": 1472655451, "answer_id": 39253001, "question_id": 39252933, "link": "https://stackoverflow.com/questions/39252933/understanding-the-return-type-of-the-function/39253001#39253001", "title": "Understanding the return type of the function", "body": "<p>Well, probably does nothing, as you can see by the macro the DESC_API is replaced by blank, hence this is probably a macro used for readability convenience that's it though  </p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1472656212, "post_id": 39253013, "comment_id": 65842236, "body": "Maybe, but the OP notes that the function doesn&#39;t return anything.  He might have failed to mention conditional compilation directives affecting that, but I think it&#39;s more likely that the macro&#39;s intended use is a bit different."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1472655482, "creation_date": 1472655482, "answer_id": 39253013, "question_id": 39252933, "link": "https://stackoverflow.com/questions/39252933/understanding-the-return-type-of-the-function/39253013#39253013", "title": "Understanding the return type of the function", "body": "<p>It looks like <code>DESC_API</code> could be used to switch between a function returning nothing and a function returning a <code>void*</code>.</p>\n\n<p>If you define</p>\n\n<pre><code>#define DESC_API *\n</code></pre>\n\n<p>the function would be returning a void pointer; otherwise, the function would return nothing.</p>\n\n<p>Of course the rest of the function must follow through with a conditional return based on the value of <code>DESC_API</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1472656000, "creation_date": 1472656000, "answer_id": 39253167, "question_id": 39252933, "link": "https://stackoverflow.com/questions/39252933/understanding-the-return-type-of-the-function/39253167#39253167", "title": "Understanding the return type of the function", "body": "<p>The macro appears to be a hook by which additional qualifiers can be injected into function signatures.  I'm inclined to think that its intended usage is to leverage compiler-specific extensions under certain circumstances, such as to mark functions as using some particular calling convention.</p>\n\n<p>Note that the macro definition you present is conditional.  It provides for the macro to be defined (with empty replacement text) in the event that it is not already defined, where a previous definition might come from another header or from a command-line option.</p>\n"}, {"tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": true, "score": 3, "last_activity_date": 1472658677, "last_edit_date": 1472658677, "creation_date": 1472658180, "answer_id": 39253865, "question_id": 39252933, "link": "https://stackoverflow.com/questions/39252933/understanding-the-return-type-of-the-function/39253865#39253865", "title": "Understanding the return type of the function", "body": "<p>Looks like <code>DESC_API</code> a is visibility macro. It might be defined to <code>__declspec(dllexport)</code> or to <code>__declspec(dllimport)</code> for MSVC or to <code>__attribute__ ((visibility (\"default\")))</code> for gcc or clang. </p>\n\n<p>Of course, it might be defined to something else (as said bellow), but the most popular use case is just symbols visibility attributes.</p>\n\n<p>Since gcc and clang export all symbols by default, no attributes is needed and <code>DESC_API</code> is blank. As for MSVC, your build system might set it via <code>/DDESC_API=__declspec(dllimport)</code> externally.</p>\n"}], "owner": {"reputation": 186, "user_id": 3023617, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/7480661bd29bacd7d4fbc7880f10043b?s=128&d=identicon&r=PG&f=1", "display_name": "NanoNi", "link": "https://stackoverflow.com/users/3023617/nanoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 39253865, "answer_count": 4, "score": 0, "last_activity_date": 1472658677, "creation_date": 1472655271, "question_id": 39252933, "link": "https://stackoverflow.com/questions/39252933/understanding-the-return-type-of-the-function", "title": "Understanding the return type of the function", "body": "<p>I am looking at this code passed onto me to resolve an issue but I have trouble understanding one of the function's definition. </p>\n\n<p><code>void DESC_API ApplDesc(DescMsg* pMsg)</code></p>\n\n<p>I can see that the function isnt returning anything so the <code>void</code> holds good. But what is the <code>DESC_API</code> doing in here? This is how it is defined in the header file</p>\n\n<pre><code>#if defined(DESC_API)\n#else\n /* No paging used. */\n#define DESC_API\n#endif\n</code></pre>\n"}, {"tags": ["c++", "c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 2, "creation_date": 1472654577, "post_id": 39252605, "comment_id": 65841055, "body": "Yes if you read about <code>pthread_cond_broadcast</code> it is implied that multiple threads can wait on one condition. The mutex will be unlocked while the threads are in <code>pthread_cond_wait</code> so while they wait there there is no issue. Afterwards and before that they will have to wait for each other to release the mutex"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1472656590, "last_edit_date": 1472656590, "creation_date": 1472656133, "answer_id": 39253218, "question_id": 39252605, "link": "https://stackoverflow.com/questions/39252605/about-the-pthread-cond-wait/39253218#39253218", "title": "about the pthread_cond_wait?", "body": "<blockquote>\n  <p>The question is: Is it valid that several threads call the q265_frame_cond_wait synchronously</p>\n</blockquote>\n\n<p>Multiple threads can call <code>q265_frame_cond_wait</code>, there is no race condition.</p>\n\n<blockquote>\n  <p><code>q265_frame_cond_broadcast</code>, will all the waiting thread get the mutex synchronously? </p>\n</blockquote>\n\n<p><code>pthread_cond_broadcast</code> wakes up all threads currently waiting on the condition variable. Only one thread can lock a mutex at a time, so that these woken up threads queue up on locking the mutex.</p>\n\n<blockquote>\n  <p>Or they must compete to get the mutex?</p>\n</blockquote>\n\n<p>Conceptually yes, <code>pthread_cond_wait</code> has to lock the mutex on return. And this is known as <a href=\"https://en.wikipedia.org/wiki/Thundering_herd_problem\" rel=\"nofollow\">thundering herd problem</a>. </p>\n\n<p>Linux solves this problem by moving the queue of waiters on the condition variable to the queue of waiters on the mutex to avoid waking up threads that would then immediately be blocked on the mutex. This is known as <em>wait morphing</em>.</p>\n"}], "owner": {"reputation": 41, "user_id": 6779227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b9036de34e66fde44a69034c944741?s=128&d=identicon&r=PG&f=1", "display_name": "zhuhb", "link": "https://stackoverflow.com/users/6779227/zhuhb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1472778918, "creation_date": 1472654383, "last_edit_date": 1472778918, "question_id": 39252605, "link": "https://stackoverflow.com/questions/39252605/about-the-pthread-cond-wait", "title": "about the pthread_cond_wait?", "body": "<p>I have the following code:</p>\n\n<pre><code>typedef struct {\n...\n    volatile int i_lines_completed;\n    pthread_mutex_t mutex;\n    q265_pthread_cond_t cv;\n...\n}q265_picture_t;\nvoid q265_frame_cond_broadcast( q265_picture_t *frame, int i_lines_completed )\n{\n    pthread_mutex_lock( &amp;frame-&gt;mutex );\n    frame-&gt;i_lines_completed = i_lines_completed;\n    pthread_cond_broadcast( &amp;frame-&gt;cv );\n    pthread_mutex_unlock( &amp;frame-&gt;mutex );\n}\nvoid q265_frame_cond_wait( q265_picture_t *frame, int i_lines_completed )\n{\n    pthread_mutex_lock( &amp;frame-&gt;mutex );\n    while( frame-&gt;i_lines_completed &lt; i_lines_completed )\n        pthread_cond_wait( &amp;frame-&gt;cv, &amp;frame-&gt;mutex );\n    pthread_mutex_unlock( &amp;frame-&gt;mutex );\n}\n</code></pre>\n\n<p>The use case is:</p>\n\n<p>More than one thread could call <code>q265_frame_cond_wait</code>  to request that the frame have the required <code>i_lines_completed</code> while there is only one thread call the <code>q265_frame_cond_broadcast</code> to broadcast the <code>i_lines_completed</code>.</p>\n\n<p>The question is:</p>\n\n<p>Is it valid that several threads call the <code>q265_frame_cond_wait</code> synchronously\uff1f</p>\n\n<p>When the certain thread call the <code>q265_frame_cond_broadcast</code>, </p>\n\n<ul>\n<li>Will all the waiting threads get the mutex synchronously? </li>\n<li>Or they must compete to get the mutex?</li>\n</ul>\n\n<p>Another problem:\nBut is it right that two pthread_cond_t share only one mutex? For example, the following code, the two pthread_cond_t is_fill and is_empty share the only one mutex, and threads will possibly call q265_framelist_cond_wait0 and q265_framelist_cond_wait1 synchronously.</p>\n\n<pre><code>typedef struct {\n...\n    volatile int i_size;\n    pthread_mutex_t mutex;\n    q265_pthread_cond_t is_fill, is_empty;\n...\n}q265_picture_list_t;\nvoid q265_framelist_cond_wait0( q265_picture_list_t *framelist)\n{\n    pthread_mutex_lock( &amp;framelist-&gt;mutex );\n    while( framelist-&gt;i_size &lt;= 0)\n        pthread_cond_wait( &amp;framelist-&gt;is_fill, &amp;framelist-&gt;mutex );\n    pthread_mutex_unlock( &amp;framelist-&gt;mutex );\n}\nvoid q265_framelist_cond_wait1( q265_picture_list_t *framelist)\n{\n    pthread_mutex_lock( &amp;framelist-&gt;mutex );\n    while( framelist-&gt;i_size == max_size)\n        pthread_cond_wait( &amp;framelist-&gt;is_empty, &amp;framelist-&gt;mutex );\n    pthread_mutex_unlock( &amp;framelist-&gt;mutex );\n}\n</code></pre>\n"}, {"tags": ["c", "numerical-methods"], "comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 2, "creation_date": 1472654470, "post_id": 39252556, "comment_id": 65840968, "body": "Please note that /2*delta should be /(2*delta)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1472654592, "post_id": 39252556, "comment_id": 65841068, "body": "What @Bob__ said. I won&#39;t be surprised if this is why you keep getting <code>0.0</code>"}, {"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "edited": false, "score": 0, "creation_date": 1472655017, "post_id": 39252556, "comment_id": 65841388, "body": "Thanks it worked , but is there any better way of calculating nth derivative? Thats the main reason i asked this question"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1472655712, "post_id": 39252556, "comment_id": 65841883, "body": "You could eliminate <code>double h</code>..."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1472655737, "post_id": 39252556, "comment_id": 65841900, "body": "Well, in order to calculate the derivative, you need the <i>code</i> of the function and the basic differentiation rules. Then you could use some sophisticated parsing to calculate the derivative,  but this&#39;s probably gonna be hard. It&#39;s much easier to approximate the derivative, which is what your code is doing."}, {"owner": {"reputation": 4369, "user_id": 248349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c118aaeb5bb7162db613a37e595be8?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/248349/mick"}, "edited": false, "score": 0, "creation_date": 1472657017, "post_id": 39252556, "comment_id": 65842795, "body": "Numerical differentiation is tricky stuff. You are not going to achieve it with the &#39;C&#39; equivalent of a recursive one-liner. You would be better off talking to the maths people and they will probably want to know what type of functions you want to differentiate."}, {"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "edited": false, "score": 0, "creation_date": 1472657615, "post_id": 39252556, "comment_id": 65843186, "body": "I get your point but I am only allowed to code in C for my course,please tell me is this the best i can do in C without using any other library ?"}, {"owner": {"reputation": 4369, "user_id": 248349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c118aaeb5bb7162db613a37e595be8?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/248349/mick"}, "edited": false, "score": 0, "creation_date": 1472658063, "post_id": 39252556, "comment_id": 65843495, "body": "Have you tried to calculate a second-order derivative using your code? What do you get?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1472659249, "post_id": 39252556, "comment_id": 65844231, "body": "Consider what happens when <code>|x0|</code> is large like <code>1e12</code> and <code>x0 + &#47;* or - *&#47; 1.0e-8</code> results in <code>x0</code>.  <code>nthderive()</code> returns 0.0."}, {"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "edited": false, "score": 0, "creation_date": 1472659305, "post_id": 39252556, "comment_id": 65844265, "body": "Yes, it gives correct answer if i change delta value to 1.0e-4.I guess the the delta value needs to be updated after every function call"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472659320, "post_id": 39252556, "comment_id": 65844276, "body": "&quot;the best i can do in C without using any other library ?&quot;  --&gt; how does code display the result?  What libraries can code use?"}, {"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472660317, "post_id": 39252556, "comment_id": 65844782, "body": "@chux What function did you use and up to which order you are calculating the derivative?"}, {"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472660493, "post_id": 39252556, "comment_id": 65844872, "body": "@chux its just a function and its obvious that i can call it anywhere in my main function and store the value in a variable or display it"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472660735, "post_id": 39252556, "comment_id": 65845007, "body": "See <a href=\"https://en.wikipedia.org/wiki/Second_derivative#Limit\" rel=\"nofollow noreferrer\">2nd derivative</a> equation.  A third and forth, etc equation can be generated.  The point is that the quality of the result is <b>very dependent on the <code>delta</code></b> used.  <code>delta</code> typically should be <i>proportional</i> to <code>x0</code>, not a constant offset.  Unless <code>x0</code> is near 0.0, then a constant offset should be used."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472662310, "post_id": 39252556, "comment_id": 65845818, "body": "I used the above code to calculate the 2nd derivative of x^3 at x=1.0 and got the answer 5.551115, which is not all that accurate - the correct, exact answer is 6.0."}, {"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472662769, "post_id": 39252556, "comment_id": 65846062, "body": "@IanAbbott you can try with some other delta value maybe <code>1.0e-4</code>"}, {"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "edited": false, "score": 0, "creation_date": 1472663230, "post_id": 39252556, "comment_id": 65846303, "body": "I know the code does give accurate results every time but please comment only if you have a solution to make it more efficient instead of just poiting out where the result blows up or has a great relative error"}, {"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "edited": false, "score": 0, "creation_date": 1472664752, "post_id": 39252556, "comment_id": 65847134, "body": "I meant the code doesn&#39;t give the best result always"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "edited": false, "score": 0, "creation_date": 1472748067, "post_id": 39272976, "comment_id": 65888264, "body": "thanks but my code gives wrong or slightly off solutions some of the times, apparently this may be due to the fact delta becomes smaller in each step ,can i make it a function of f,x and n to make sure it does not blow up or give wrong results"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "edited": false, "score": 0, "creation_date": 1472748404, "post_id": 39272976, "comment_id": 65888446, "body": "@AlokRanjan: where did you see that your Delta decreases ??? Read all the comments, believe them and drop that evil recursive version."}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 0, "last_activity_date": 1472741901, "last_edit_date": 1472741901, "creation_date": 1472736754, "answer_id": 39272976, "question_id": 39252556, "link": "https://stackoverflow.com/questions/39252556/is-there-any-better-way-to-find-nth-derivative-of-a-function-in-c/39272976#39272976", "title": "Is there any better way to find nth derivative of a function in C?", "body": "<p>Not counting the numerical instability issue, that makes adjustment of <code>Delta</code> difficult and precludes the use for high order derivatives (say <code>n &gt; 3</code> !), the recursive solution is pretty inefficient, as it takes <code>2^n</code> function evaluations, where <code>n+1</code> are enough.</p>\n\n<p>Indeed, you compute</p>\n\n<pre><code>f' = f(+1) - f(-1)\nf'' = f'(+1) - f'(-1) = f(+2) - f(0) - f(0) + f(-2)\nf''' = f''(+1) - f''(-1) = f(+3) - f(+1) - f(+1) + f(-1) - f(+1) + f(-1) + f(-1) - f(-3)\n...\n</code></pre>\n\n<p>when the Binomial formula tells you</p>\n\n<pre><code>f' = f(+1) - f(-1)\nf'' = f(+2) - 2f(0) + f(-2)\nf''' = f(+3) - 3f(+1) + 3f(-1) - f(-3)\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1473498695, "post_id": 39387111, "comment_id": 66173063, "body": "Works only for holomorphic functions."}, {"owner": {"reputation": 789, "user_id": 6751649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f856bbcacb3a4e331c2557459046320e?s=128&d=identicon&r=PG&f=1", "display_name": "StefanM", "link": "https://stackoverflow.com/users/6751649/stefanm"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1473534055, "post_id": 39387111, "comment_id": 66182545, "body": "That is true. However most functions in &quot;daily&quot; use are holomorphic. (For op: Being holomorphic is equivalent to being differentiable and fullfilling the Cauchy-Rieman equations. Examples of holomorphic functions are: polynomials, exponential function, sin, cos)"}], "tags": [], "owner": {"reputation": 789, "user_id": 6751649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f856bbcacb3a4e331c2557459046320e?s=128&d=identicon&r=PG&f=1", "display_name": "StefanM", "link": "https://stackoverflow.com/users/6751649/stefanm"}, "is_accepted": true, "score": 1, "last_activity_date": 1473326426, "creation_date": 1473326426, "answer_id": 39387111, "question_id": 39252556, "link": "https://stackoverflow.com/questions/39252556/is-there-any-better-way-to-find-nth-derivative-of-a-function-in-c/39387111#39387111", "title": "Is there any better way to find nth derivative of a function in C?", "body": "<p>The nth derivative can be computed using <a href=\"https://en.wikipedia.org/wiki/Cauchy%27s_integral_formula\" rel=\"nofollow\">Cauchy's integral lemma</a>.</p>\n\n<p>Transform the integral over the path into a \"standard integral\" (see <a href=\"https://en.wikipedia.org/wiki/Line_integral\" rel=\"nofollow\">Line integral</a>). </p>\n\n<p>Then you can integrate that expression (e.g. with <a href=\"https://en.wikipedia.org/wiki/Trapezoidal_rule\" rel=\"nofollow\">trapezoidal rule</a>).</p>\n\n<p>If you want to calculate high order derivatives this method will most likely be stable. </p>\n"}], "owner": {"reputation": 21, "user_id": 6509094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eee779eaa3beb28250637627523eaca?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Ranjan", "link": "https://stackoverflow.com/users/6509094/alok-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 39387111, "answer_count": 2, "score": -1, "last_activity_date": 1473326426, "creation_date": 1472654267, "last_edit_date": 1472657329, "question_id": 39252556, "link": "https://stackoverflow.com/questions/39252556/is-there-any-better-way-to-find-nth-derivative-of-a-function-in-c", "title": "Is there any better way to find nth derivative of a function in C?", "body": "<p>I want to write a subroutine that calculates the nth derivative of a function given by the subroutine of the form:</p>\n\n<pre><code>double func(double x)\n{\n    // a mathematical expression representing a smooth curve \n    //returns the value of the function at x      \n}\n</code></pre>\n\n<p>i wrote the following subroutine:</p>\n\n<pre><code>double nthderive(double (*f)(double),double x0,int n)\n{   \n   const double delta=1.0e-8;\n   double x1=x0 - delta;\n   double x2=x0 + delta;\n   if(n==0) {\n       return f(x0);\n   }\n   else {\n       return (nthderive(f,x2,n-1)-nthderive(f,x1,n-1))/(2*delta);\n   }\n}\n</code></pre>\n\n<p>Can someone suggest a better algorithm for finding the nth derivative?</p>\n"}, {"tags": ["c++", "c", "pointers", "struct"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 2, "creation_date": 1472654300, "post_id": 39252543, "comment_id": 65840832, "body": "your problem is you only have a pointer to <code>out</code>. You need to allocate the memory first."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472654336, "post_id": 39252543, "comment_id": 65840864, "body": "this would still fail because <code>in</code> has no memory"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472654349, "post_id": 39252543, "comment_id": 65840882, "body": "Sorry, why do you have those typedefs again?"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472654406, "post_id": 39252543, "comment_id": 65840922, "body": "You should familiarize yourself with c++ and pointers first. Maybe look here for a bit <a href=\"http://www.cplusplus.com/doc/tutorial/dynamic/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/dynamic</a> To explain everything in this Stackoverflow question would be a bit too much"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654338, "creation_date": 1472654338, "answer_id": 39252587, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru/39252587#39252587", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>In your <code>test()</code> function, <code>out</code> does not point to any <em>valid</em> memory location. Attempt to dereference that pointer will invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>So, you need to allocate memory to <code>out</code> in <code>main()</code> and pass that to <code>test()</code>.</p>\n\n<p><strong>After that</strong>, <code>out-&gt;in</code> also being a pointer, you need to allocate memory to that pointer also so that it points to a valid memory location. After you have ensured that <strong>all</strong> pointers point to valid memory location, you can go ahead dereferencing them.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6115473, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2cb1d890932bd8357a131847cb5210a2?s=128&d=identicon&r=PG&f=1", "display_name": "daemoner119", "link": "https://stackoverflow.com/users/6115473/daemoner119"}, "edited": false, "score": 0, "creation_date": 1472655201, "post_id": 39252641, "comment_id": 65841521, "body": "My main has that outer out and can pass out into the function. Accessing any elements outer struct works. But now how do I allocate memory for in?  I tried  inner in; inner* q = &amp;in;"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 113, "user_id": 6115473, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2cb1d890932bd8357a131847cb5210a2?s=128&d=identicon&r=PG&f=1", "display_name": "daemoner119", "link": "https://stackoverflow.com/users/6115473/daemoner119"}, "edited": false, "score": 0, "creation_date": 1472655285, "post_id": 39252641, "comment_id": 65841571, "body": "<code>out-&gt;in = new inner()</code> in your <code>test()</code> function. Do this before other code"}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654478, "creation_date": 1472654478, "answer_id": 39252641, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru/39252641#39252641", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>Well, for starters, you only have a pointer to out, which currently has no allocated memory: As @IgorTandetnik said, do this:</p>\n\n<blockquote>\n  <p><code>outer out; outer* p = &amp;out; test(p);</code> You have an uninitialized pointer that isn't pointing to anything valid.</p>\n</blockquote>\n\n<p>When test uses <code>out</code>, by dereferencing it, you basically Undefined behavior, as expected with dereferencing pointers not pointing to anything.</p>\n\n<p>Next, you have the same problem for <code>in</code>, which also has no allocated memory. Fix that by allocating memory for <code>in</code>, which currently also causes Undefined Behavior, like before.</p>\n\n<p>Also, I am confused why you have those <code>typedefs</code>, and yet tagged your question <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a>. If you are compiling with a c compiler, it makes sense, but otherwise, you don't need to prefix with <code>struct</code> in A c++ compiler, which already does it for you.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6115473, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2cb1d890932bd8357a131847cb5210a2?s=128&d=identicon&r=PG&f=1", "display_name": "daemoner119", "link": "https://stackoverflow.com/users/6115473/daemoner119"}, "edited": false, "score": 0, "creation_date": 1472656130, "post_id": 39252770, "comment_id": 65842182, "body": "This works just like mine, however I get the following warning: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11         inner * in = new inner();"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654826, "creation_date": 1472654826, "answer_id": 39252770, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru/39252770#39252770", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>derefencing pointers should come <strong>after</strong> some form of allocation.</p>\n\n<p>inside your function <code>out-&gt;in-&gt;a = 5;</code> gets a declared_but_not_initilized pointer. you should have done before that something like <code>out = new outer();</code> but then only the <code>out</code> pointer could be defreferenced [actually it could be defreferenced  before but that would cause UB - bad], so now you shuold also allocate for the <code>in</code> pointer like so <code>out-&gt;in = new inner();</code> and that's it:</p>\n\n<pre><code>/* Function to use struct */\nvoid test(outer * out)\n{\n  //Update the value of out-&gt;in-&gt;a.\n  out-&gt;in = new inner();       // addition\n  out-&gt;in-&gt;a = 5;\n}\n\nint main() {\n  outer * out;\n  out = new outer();   // addition\n\n  test(out);\n\n  std::cout &lt;&lt; \"My updated value: \" &lt;&lt; out-&gt;in-&gt;a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><em>Note: I used <code>new</code> because you used <code>#include &lt;iostream&gt;</code> meaning c++. If using C, please use <code>malloc</code> instead</em></p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1472655614, "last_edit_date": 1472655614, "creation_date": 1472654900, "answer_id": 39252788, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru/39252788#39252788", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>For starters C and C++ are different languages.</p>\n\n<p>In any case you have to allocate the structures before accessing their elements throw pointers. Otherwise using uninitialized pointers or pointers that do not point to valid structures' objects results in undefined behavior of the program.</p>\n\n<p>Here is a demonstrative C program that shows how to access elements of a structure using pointers</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n  unsigned int            a;\n  unsigned int            b;\n  unsigned int            c;\n} inner;\n\ntypedef struct\n{\n  unsigned int            d;\n  unsigned int            e;\n  inner * in;\n} outer;\n\n\nint main( void ) \n{\n    outer *out = malloc( sizeof( outer ) );\n\n    if ( ( out != NULL ) &amp;&amp; ( out-&gt;in = malloc( sizeof( inner ) ) ) )\n    {\n        out-&gt;in-&gt;a = 1;\n        out-&gt;in-&gt;b = 2;\n        out-&gt;in-&gt;c = 3;\n\n        printf( \"out-&gt;in = { a = %d, b = %d, c = %d }\\n\", out-&gt;in-&gt;a, out-&gt;in-&gt;b, out-&gt;in-&gt;c );\n\n        free( out-&gt;in );\n        free( out );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>out-&gt;in = { a = 1, b = 2, c = 3 }\n</code></pre>\n\n<p>In C++ the program can look like</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef struct\n{\n  unsigned int            a;\n  unsigned int            b;\n  unsigned int            c;\n} inner;\n\ntypedef struct\n{\n  unsigned int            d;\n  unsigned int            e;\n  inner * in;\n} outer;\n\nint main() \n{\n    outer *out = new outer;\n\n    out-&gt;in = new inner;\n\n    out-&gt;in-&gt;a = 1;\n    out-&gt;in-&gt;b = 2;\n    out-&gt;in-&gt;c = 3;\n\n    std::cout &lt;&lt; \"out-&gt;in = { a = \" &lt;&lt; out-&gt;in-&gt;a\n              &lt;&lt; \", b = \" &lt;&lt; out-&gt;in-&gt;b\n              &lt;&lt; \", c = \" &lt;&lt; out-&gt;in-&gt;c\n              &lt;&lt; \" }\" &lt;&lt; std::endl;\n\n    delete out-&gt;in;\n    delete out;\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output will be the same as shown above.</p>\n\n<p>As for this function</p>\n\n<pre><code>void test(outer *out)\n{\n  //Update the value of out-&gt;in-&gt;a.\n  out-&gt;in-&gt;a = 5;\n}\n</code></pre>\n\n<p>then the both pointers <code>out</code> and <code>in</code> must point to valid objects of types <code>outer</code> and <code>inner</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 6115473, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2cb1d890932bd8357a131847cb5210a2?s=128&d=identicon&r=PG&f=1", "display_name": "daemoner119", "link": "https://stackoverflow.com/users/6115473/daemoner119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 1, "accepted_answer_id": 39252788, "answer_count": 4, "score": 4, "last_activity_date": 1472655836, "creation_date": 1472654239, "last_edit_date": 1472655836, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>Just trying to learn how nested pointers to structs work. How would I access an element within a pointer of a struct within another pointer to a struct? Thanks.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef struct\n{\n  unsigned int            a;\n  unsigned int            b;\n  unsigned int            c;\n} inner;\n\ntypedef struct\n{\n  unsigned int            d;\n  unsigned int            e;\n  inner * in;\n} outer;\n\n/* Function to use struct */\nvoid test(outer * out)\n{\n  //Update the value of out-&gt;in-&gt;a.\n  out-&gt;in-&gt;a = 5;\n}\n\nint main() {\n  outer * out;\n  test(out);\n\n  std::cout &lt;&lt; \"My updated value: \" &lt;&lt; out-&gt;in-&gt;a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I get a \"Segmentation fault (core dumped)\".</p>\n\n<p>Edit: Made changes based on suggestions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef struct\n{\n    unsigned int            a;\n    unsigned int            b;\n    unsigned int            c;\n} inner;\n\ntypedef struct\n{\n    unsigned int            d;\n    unsigned int            e;\n    inner * in = new inner();\n} outer;\n\n/* Function to use struct */\nvoid test(outer * out)\n{\n    //Update the value of out-&gt;d.\n    out-&gt;d = 3; \n    //Update the value of out-&gt;in-&gt;a.\n    out-&gt;in-&gt;a = 5;\n}\n\nint main() {\n\n    outer out; \n    outer* p = &amp;out; \n\n    test(p);\n\n    std::cout &lt;&lt; \"My updated value for d: \" &lt;&lt; p-&gt;d &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"My updated value for a: \" &lt;&lt; p-&gt;in-&gt;a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I now get the correct values updated. However I have a warning now </p>\n\n<p>\"warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11\"</p>\n\n<pre><code>inner * in = new inner();\n</code></pre>\n\n<p>How do I fix this warning?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1472654046, "post_id": 39252410, "comment_id": 65840624, "body": "I don&#39;t know where have got your understanding, but it is wrong. BSS is a part of DATA section(R/W), containing statically allocated data to be initialized as zeros. That&#39;s all."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1472654079, "post_id": 39252410, "comment_id": 65840655, "body": "Read-only memory may also be used to store <code>const</code> qualified variables."}, {"owner": {"reputation": 1702, "user_id": 3747770, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cbc0310d87016a34afa034e5e0661fba?s=128&d=identicon&r=PG&f=1", "display_name": "NJMR", "link": "https://stackoverflow.com/users/3747770/njmr"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472654332, "post_id": 39252410, "comment_id": 65840859, "body": "@IanAbbott: const qualified local variables sit on stack I guess. Also, the const qualified local variable will go out of the memory once the stack fram deleted (once the function returns)."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1472654647, "post_id": 39252410, "comment_id": 65841107, "body": "The read-only segment never stores <code>const</code> qualified <i>variables</i>, it only stores actual constants."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472654653, "post_id": 39252410, "comment_id": 65841121, "body": "@NJMR sorry, I meant const qualified variables of static storage duration."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472654731, "post_id": 39252410, "comment_id": 65841172, "body": "@CodyGray That&#39;s a C/C++ thing. C calls them variables, even though they are constant."}, {"owner": {"reputation": 1702, "user_id": 3747770, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cbc0310d87016a34afa034e5e0661fba?s=128&d=identicon&r=PG&f=1", "display_name": "NJMR", "link": "https://stackoverflow.com/users/3747770/njmr"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472654739, "post_id": 39252410, "comment_id": 65841177, "body": "@CodyGray: in the example const int i = 5; , the value 5 can be hard coded into code as it is never going to change. Why to store the value in memory?"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472654916, "post_id": 39252410, "comment_id": 65841314, "body": "Constant folding happens before the linker ever sees the code, so that example is not relevant. Sorry, @Ian, you&#39;re right. The question doesn&#39;t make clear which one he&#39;s asking about. The C standard is even more strict here about <code>const</code> values than C++, if I remember correctly."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472654962, "post_id": 39252410, "comment_id": 65841349, "body": "@NJMR The compiler is free to do what it likes if the variables have no external linkage, but if your <code>const int i = 5;</code> is declared outside a function, it has external linkage, so needs storage."}, {"owner": {"reputation": 1702, "user_id": 3747770, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cbc0310d87016a34afa034e5e0661fba?s=128&d=identicon&r=PG&f=1", "display_name": "NJMR", "link": "https://stackoverflow.com/users/3747770/njmr"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472654977, "post_id": 39252410, "comment_id": 65841364, "body": "@CodyGray: I was referring to C. Will remove the C++ tag"}, {"owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1472655305, "post_id": 39252410, "comment_id": 65841593, "body": "@DevSolar, the entire data segment doesn&#39;t have to be read-only just because the program is running from ROM.  The initialization code would start by copying the read-write portion into RAM, just like it gets loaded from disk to RAM on a normal PC."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1472655471, "post_id": 39252410, "comment_id": 65841715, "body": "@DevSolar When the program is in the ROM, the data segment is usually  relocated to RAM, by specifying the &quot;load address&quot; parameter in the linker script."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1472655567, "post_id": 39252410, "comment_id": 65841779, "body": "Deleted my comment. Obviously my error, sorry."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1472669364, "post_id": 39252410, "comment_id": 65849736, "body": "@EugeneSh. No, BSS is <i>not</i> part of DATA. They are distinct. DATA is for <code>int x = 5</code> and BSS is for <code>int y</code>. BSS has no static initializer to zero. Try creating a program with <code>int x[10000000000]</code> and do <code>ls -l</code> on the executable. The simplified layout of a program is <code>CODE|DATA|BSS|sbrk|stack</code>. On old systems, BSS was inited by the OS to 0 via <code>memset(bss,0,sizeof(bss)</code>, but now it uses copy-on-write from a &quot;zero page&quot;. See my answer: <a href=\"http://stackoverflow.com/questions/37047977/which-segments-are-affected-by-a-copy-on-write/37060802#37060802\" title=\"which segments are affected by a copy on write\">stackoverflow.com/questions/37047977/&hellip;</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1472669792, "post_id": 39252410, "comment_id": 65850021, "body": "@CraigEstey You are talking about one specific architecture, I am talking in general. BSS is still initialized in the startup code for most embedded architectures. BSS and DATA sections are usually physically distinct (but often adjacent) regions, but the only difference is the initialization scheme."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1472670238, "post_id": 39252410, "comment_id": 65850276, "body": "@EugeneSh. Yes, and I mentioned the <code>memset</code> option [which could be done by <code>crt0.o</code> or some such--left out of my 1st cmt for space reasons]. So, I think we&#39;re agreeing, but your original cmt <i>did</i> say: <i>&quot;BSS is a part of DATA section(R/W)&quot;</i>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1472670281, "post_id": 39252410, "comment_id": 65850302, "body": "@CraigEstey Yes, it was a bit misleading."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1472766070, "post_id": 39252410, "comment_id": 65896994, "body": "<code>gcc</code> will put it into <code>.rodata</code>. You can verify that with <code>elfcat --section-name .rodata the_ELF</code> for example."}], "answers": [{"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": true, "score": 5, "last_activity_date": 1472764168, "creation_date": 1472764168, "answer_id": 39280898, "question_id": 39252410, "link": "https://stackoverflow.com/questions/39252410/use-of-readonly-memory-in-data-segment/39280898#39280898", "title": "Use of Readonly Memory in Data Segment", "body": "<p>You are right, almost... there are three kinds of global static data in a program:</p>\n\n<ul>\n<li><em>Initialized data</em>, read only.  Not only reserved for constant string, but for all types of <code>const</code> global data.  <strong>It is not necessarily in the data section</strong>, it can be in the text section of the program (normally the <code>.rodata</code> segment), as it is normally not modifiable by a program.</li>\n<li><em>Initialized data</em>, read write.  Normally in the data section of the program (<code>.data</code> segment).</li>\n<li><em>Uninitialized data</em>, read write.  Normally in the data section of the program.  The difference with the previous is that the executable doesn't include its contents, only the size, as they are initialized to a fixed known value (zero) and there is not a table of initializers in the executable file. Normally, the compiler/linker constructs a segment for this purpose in which it accumulates only the size required by the component modules (the <code>.bss</code> segment).</li>\n</ul>\n"}], "owner": {"reputation": 1702, "user_id": 3747770, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cbc0310d87016a34afa034e5e0661fba?s=128&d=identicon&r=PG&f=1", "display_name": "NJMR", "link": "https://stackoverflow.com/users/3747770/njmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2619, "favorite_count": 1, "accepted_answer_id": 39280898, "answer_count": 1, "score": 4, "last_activity_date": 1472764168, "creation_date": 1472653830, "last_edit_date": 1472654984, "question_id": 39252410, "link": "https://stackoverflow.com/questions/39252410/use-of-readonly-memory-in-data-segment", "title": "Use of Readonly Memory in Data Segment", "body": "<p>As per my understanding, Data Segment consists of 2 parts. </p>\n\n<pre><code> 1. Initialized segment.\n    a. Read Only.\n    b. Read/Write.\n 2. Uninitialized segment.\n</code></pre>\n\n<ul>\n<li>The Read/Write memory is for variables declared at file scope as well as static local variables.</li>\n<li>The Read only memory is for constants such as strings.</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>int main(void)\n{\n   char* cptr = \"Hello\"; // The string \"Hello\" will sit in 'Read only' memory.\n   //cptr[2] = 'Z'; // Gives seg fault. \n   ...\n   return 0;\n}\n</code></pre>\n\n<p>My question is, Is 'Read-only' memory only used to store string constants?</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1472653611, "post_id": 39252307, "comment_id": 65840289, "body": "<code>if (d == NULL)</code>...why do you continue?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1472653642, "post_id": 39252307, "comment_id": 65840306, "body": "<i>Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example.</i>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472653779, "post_id": 39252307, "comment_id": 65840418, "body": "You should check k value against Area bounds. There is an unused malloc/free too"}, {"owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472654006, "post_id": 39252307, "comment_id": 65840591, "body": "@SouravGhosh The code is too big and , i think would doesn&#39;t really help. The problem not always appaers whereas all variable values used are set statically; never change and sometimes code works well"}, {"owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472654376, "post_id": 39252307, "comment_id": 65840901, "body": "@Jean-Fran&#231;oisFabre i&#39;ve updated my post, replace Map variable with d, in test, now the memory violation always appaers at the second or 4th turn..."}, {"owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472654431, "post_id": 39252307, "comment_id": 65840946, "body": "@SouravGhosh just use it for debug, with breakpoints on the puts, just to see if malloc fail"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1472655613, "post_id": 39252307, "comment_id": 65841823, "body": "Are you aware that your enums values are not binary but octal or decimal? This may corrupt memory if you use them as an array index. My bet is that the crash is an indirect consequence of some other code."}, {"owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472655940, "post_id": 39252307, "comment_id": 65842049, "body": "@Jean-Fran&#231;oisFabre regarding your other comment, i now use a variable initialised in the main() function, and program crash less often. You maybe right that my char union isn&#39;t a good solution, I&#39;ll try something more standard"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1472657994, "post_id": 39252307, "comment_id": 65843442, "body": "I meant that bonusType and landType fixed enum values are not interpreted as binary but as decimal if start by 1 and octal if start by 0."}, {"owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472659174, "post_id": 39252307, "comment_id": 65844179, "body": "@Jean-Fran&#231;oisFabre It&#39;s work now perfectly with global declaration. I will change my enum value too for safety, thanks for all !"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472665700, "post_id": 39252307, "comment_id": 65847674, "body": "Great, but the root cause of the crash is still unknown."}, {"owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472757100, "post_id": 39252307, "comment_id": 65892979, "body": "@Jean-Fran&#231;oisFabre yes unfortunately I still don&#39;t understand this issue.. But thanks again for your alternative"}], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "edited": false, "score": 0, "creation_date": 1472654788, "post_id": 39252517, "comment_id": 65841209, "body": "I&#39;ve updated my post, use now the d variable and verify malloc return"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "edited": false, "score": 0, "creation_date": 1472654942, "post_id": 39252517, "comment_id": 65841336, "body": "does map_size big enough to hold k?"}, {"owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "edited": false, "score": 0, "creation_date": 1472655362, "post_id": 39252517, "comment_id": 65841633, "body": "d has 100 values, violation appaers when k is ~ between 2 and 6. I&#39;ve added my defintions in post"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1472655419, "post_id": 39252517, "comment_id": 65841675, "body": "What is the point of performing a malloc/free at each update? Very bad performance-wise. Should be allocated on startup or on the stack."}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654132, "creation_date": 1472654132, "answer_id": 39252517, "question_id": 39252307, "link": "https://stackoverflow.com/questions/39252307/random-memory-acces-violation/39252517#39252517", "title": "Random memory acces violation", "body": "<p>you first declare a pointer <code>map *d;</code> and allocate memory for it <code>d = malloc(MAP_SIZE);</code> but you ignore the return value... </p>\n\n<p><code>if (d == NULL)</code> means the <code>malloc</code> didn't work and this <code>(Area-&gt;landType == DESTRUCTIBLE_BRICK)</code> would cause UB [because <code>Area = Map[k];</code>] but your code does not protect against that and that could crash</p>\n"}], "owner": {"reputation": 453, "user_id": 5223883, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3893ce5dee9a28b6246c3b742fcd97d7?s=128&d=identicon&r=PG&f=1", "display_name": "Khorwin", "link": "https://stackoverflow.com/users/5223883/khorwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472659387, "creation_date": 1472653524, "last_edit_date": 1472655233, "question_id": 39252307, "link": "https://stackoverflow.com/questions/39252307/random-memory-acces-violation", "title": "Random memory acces violation", "body": "<p>I've this sample code :</p>\n\n<pre><code>map *d;\n\ni = MAP_SIZE;\nj = sizeof(map);\nd = malloc(MAP_SIZE);\n\nif (d == NULL) {\n    exit(EXIT_FAILURE);\n}\n\ndest.x = dest.y = 0;\n\nfor (i = 0; i &lt; WINDOW_HEIGHT / AREA_RESOLUTION; i++)\n{\n    for (j = 0; j &lt; WINDOW_WIDTH / AREA_RESOLUTION; j++)\n    {\n        k = GetAreaPos(j, i);\n        Area = d[k];\n        dest.x = j*AREA_RESOLUTION;\n        dest.y = i*AREA_RESOLUTION;\n        if (Area-&gt;landType == DESTRUCTIBLE_BRICK) {      //GOT ERROR HERE\n            SDL_QueryTexture(Game_Texture-&gt;Explodable, NULL, NULL, &amp;dest.w, &amp;dest.h);\n            SDL_RenderCopy(Renderer, Game_Texture-&gt;Explodable, NULL, &amp;dest);\n        }\n        if (Area-&gt;landType == INDESTRUCTIBLE_BRICK) {\n            SDL_QueryTexture(Game_Texture-&gt;Solidblock, NULL, NULL, &amp;dest.w, &amp;dest.h);\n            SDL_RenderCopy(Renderer, Game_Texture-&gt;Solidblock, NULL, &amp;dest);\n        }\n    }\n}\nfree(d);\n</code></pre>\n\n<blockquote>\n  <p>MAP_SIZE = sizeof(map)</p>\n</blockquote>\n\n<p>I use Visual Studio, when i run debug without breakpoints, I've always got a memory access violation in the first loop turns.</p>\n\n<p>with breakpoints and slowly/constant F5 push, no errors, the loop finnish as well...</p>\n\n<p>I don't understand why this error appears, the 2 loops havent 100 turns in this example, the violation is totally random, sometimes in the 5th turn, sometimes in the 90th...</p>\n\n<p>This sample of code is running in another external loop, and when the first execution works fine, the others never has any violation error.</p>\n\n<h2>UPDATE 1</h2>\n\n<p>Now, i use as well my <code>d</code> variable and exit <code>if malloc() return NULL</code>. The <code>GetAreaPos()</code> return correct value, but the memory violation always appaers on the first if condition at randomly between 2nd and 6th turn of second FOR loop in tests</p>\n\n<p>Header definitions : </p>\n\n<pre><code>#define MAP_SIZE sizeof(map)\n#define AREA_SIZE sizeof(union area)\n#define AREA_RESOLUTION 64\n#define MAP_WIDTH 10//28\n#define MAP_HEIGHT 10//14\n\n//#pragma pack(1)\ntypedef enum {\n    EMPTY = 00,\n    INDESTRUCTIBLE_BRICK = 10,\n    DESTRUCTIBLE_BRICK = 11\n} landType;\n\ntypedef enum {\n    BONUS_BOMB_SCOPE = 000,\n    MALUS_BOMB_SCOPE = 001,\n    BONUS_BOMB_AMOUNT = 010,\n    MALUS_BOMB_AMOUNT = 011,\n    BONUS_PLAYER_SPEED = 100,\n    MALUS_PLAYER_SPEED = 101,\n    NO_BONUS_MALUS = 110,\n    NO_MALUS_BONUS = 111,\n} bonusType;\n\nunion area {\n    struct {\n        bool inFire :4;\n        landType landType :8;\n        bool presenceBomb :4;\n        bool presenceBonus :4;\n        bonusType typeBonus :12;\n    };\n    char c;\n};\n//#pragma pack(0)\n\ntypedef union area map[MAP_WIDTH * MAP_HEIGHT];\n</code></pre>\n"}, {"tags": ["c", "sizeof", "unions"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 8, "creation_date": 1472652822, "post_id": 39251945, "comment_id": 65839680, "body": "The size of a union does not vary with the member that currently holds a value.  It is always large enough to hold the largest member, and it can be larger.  What are you actually trying to accomplish?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1472653741, "post_id": 39251945, "comment_id": 65840389, "body": "I&#39;m not sure your opening statement is necessarily true. Perhaps an expert can confirm?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1472653817, "post_id": 39251945, "comment_id": 65840440, "body": "@Bathsheba; That&#39;s how memory is allocated for unions."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1472655911, "post_id": 39251945, "comment_id": 65842028, "body": "@haccks Re &quot;The size of a C union(sizeof()) is the size of its largest element&quot;: Strictly speaking, the size will be <i>larger</i> for odd max element sizes without pack instructions to the compiler. Oh, John said that already, I see now..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1472655912, "post_id": 39251945, "comment_id": 65842030, "body": "@Bathsheba Memory size for a union is/can be determined before any value is assigned to it.  The size of a variable does not change during its lifetime.  Even VLAs do not change size <i>during</i> its lifetime."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1472656027, "post_id": 39251945, "comment_id": 65842099, "body": "<i>&quot;The size of a C union(sizeof()) is <b>at least</b> the size of its largest element, <b>and frequently larger.</b>&quot;</i>  (fixed it for you)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472657749, "post_id": 39251945, "comment_id": 65843275, "body": "A <i>compound literal</i> approach could use the well defined C99 <code>sizeof (some_type){0}.element1</code> for an element&#39;s size.  Not certain putting this in a macro adds clarity."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 3, "last_activity_date": 1472652823, "creation_date": 1472652823, "answer_id": 39252043, "question_id": 39251945, "link": "https://stackoverflow.com/questions/39251945/is-it-possible-to-find-out-the-smallest-size-of-a-c-union/39252043#39252043", "title": "Is it possible to find out the smallest size of a C union", "body": "<p>I see 2 ways to answer this question:</p>\n\n<ol>\n<li>Each union has only one size, so that would be the smallest size of it as well.</li>\n<li>If what you <em>really</em> wanted was the smallest size of the elements that make up the union, then compute the size of each element in isolation and take the minimum of those.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472654877, "post_id": 39252315, "comment_id": 65841281, "body": "I don&#39; t get this, if you already know the type why not simply use <code>sizeof(type)</code>?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1472655005, "post_id": 39252315, "comment_id": 65841381, "body": "No it is not a good trick. <code>MYSTERIOUS_MACRO(struct_type, member_name)</code> is much worse than <code>sizeof( ((struct_type*)0)-&gt;member_name)</code>. Please don&#39;t try to re-invent the C language and replace it with some mysterious macro language."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1472655123, "post_id": 39252315, "comment_id": 65841465, "body": "@Lundin, but in this way you get the <code>sizeof</code> a pointer not the size of the type, isn&#39;t it?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472655173, "post_id": 39252315, "comment_id": 65841503, "body": "@AlterMann Edited the comment. Either method is mostly nonsense anyway. Maybe a compound literal would be slightly less ugly."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1472655526, "post_id": 39252315, "comment_id": 65841757, "body": "@Lundin, OP wanted something &quot;something along the line of how offsetof MACRO is implemented&quot;, so I used a macro."}, {"owner": {"reputation": 33, "user_id": 6779125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49827ae2d27d1670378962adf197651c?s=128&d=identicon&r=PG&f=1", "display_name": "penfield.s", "link": "https://stackoverflow.com/users/6779125/penfield-s"}, "edited": false, "score": 0, "creation_date": 1472655610, "post_id": 39252315, "comment_id": 65841818, "body": "@Ian. Is the &quot;type&quot; referring to the union type? If so, this is very similar to the trick to find out the size of a struct member."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472655821, "post_id": 39252315, "comment_id": 65841957, "body": "The intermediate cast to <code>(void *)</code> is redundant, so I edited my answer to remove it."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1472655959, "post_id": 39252315, "comment_id": 65842061, "body": "I also changed the name of the macro from <code>elemsize</code> to <code>membersize</code>, as that is more appropriate."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472656917, "post_id": 39252315, "comment_id": 65842728, "body": "Hmmm A <code>void*</code> can be cast to an arbitrary pointer type.  Code now casts an integer to an arbitrary pointer type - not sure that would pass a language-lawyer review.  Will have to research that sometime."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472657063, "post_id": 39252315, "comment_id": 65842819, "body": "I am not sure this is useful. In order to know the member name you usually must know the union&#39;s declaration, meaning you have the member type -- and hence its size -- anyway, without any ado."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472744883, "post_id": 39252315, "comment_id": 65886505, "body": "@chux I did check first before removing the intermediate <code>void*</code> cast, just to make sure it was okay. <b>6.3.2.2 Pointers</b> 3 An integer constant expression with the value <code>0</code>, or such an expression cast to type <code>void *</code>, is called a <i>null pointer constant</i>. If a null pointer constant is converted to a pointer type, the resulting pointer, called a <i>null pointer</i>, is guaranteed to compare unequal to a pointer to any object or function."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472745633, "post_id": 39252315, "comment_id": 65886938, "body": "@Ian Yes, that looks good enough for me too.  (Found it with a different number in the current C spec: C11dr 6.3.2.3 Pointers 3)"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472745671, "post_id": 39252315, "comment_id": 65886963, "body": "@chux Yes, that was a typo, sorry!"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 2, "last_activity_date": 1472655850, "last_edit_date": 1472655850, "creation_date": 1472653554, "answer_id": 39252315, "question_id": 39251945, "link": "https://stackoverflow.com/questions/39251945/is-it-possible-to-find-out-the-smallest-size-of-a-c-union/39252315#39252315", "title": "Is it possible to find out the smallest size of a C union", "body": "<p>If I understand correctly, you want to find the size of the smallest member of a union type without declaring a variable of that type, and without referring to the type of the member. The following trick to get the size of a member will probably work, but is a little on the dodgy side:</p>\n\n<pre><code>#define membersize(type, member) sizeof(((type *)0)-&gt;member)\n</code></pre>\n\n<p>You'll have to compute the size of each member individually to determine which is the smallest, so if someone adds a new member to the union, you'll have to alter the code that determines the smallest member size to account for it.</p>\n"}, {"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472656677, "post_id": 39253024, "comment_id": 65842559, "body": "You are killing flies with a bazooka :) ... a waste of space if those structs are used in arrays"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1472656875, "post_id": 39253024, "comment_id": 65842695, "body": "@AlterMann :D. As I wrote: I did it as exercise."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472657500, "post_id": 39253024, "comment_id": 65843105, "body": "I know, it&#39;s a joke :D"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472658934, "post_id": 39253024, "comment_id": 65844018, "body": "@chux is offsetof return value size_t?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472660124, "post_id": 39253024, "comment_id": 65844684, "body": "@chux Thx. Edited."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 2, "last_activity_date": 1472660087, "last_edit_date": 1472660087, "creation_date": 1472655552, "answer_id": 39253024, "question_id": 39251945, "link": "https://stackoverflow.com/questions/39251945/is-it-possible-to-find-out-the-smallest-size-of-a-c-union/39253024#39253024", "title": "Is it possible to find out the smallest size of a C union", "body": "<p>Only as an exercise:</p>\n\n<ol>\n<li>using a specific pattern for your union members</li>\n<li>taking care of update the code each time you update the union\nmembers</li>\n<li>Using a variable to trace the end of each member</li>\n</ol>\n\n<p>you can do something like below</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;inttypes.h&gt;\n\nstruct s1\n{\n    uint8_t member;\n    uint8_t len;\n};\n\nstruct s2\n{\n    uint16_t member;\n    uint8_t len;\n};\n\nstruct s3\n{\n    uint32_t member;\n    uint8_t len;\n};\n\ntypedef union u1\n{\n    struct s1 m1;\n    struct s2 m2;\n    struct s3 m3;\n}UNION_TEST;\n\n#define RETRIEVE_MEMBER(memberNum) m##memberNum\n#define test(unionName, memberName) offsetof(unionName, memberName.len)+sizeof(uint8_t)\n\nint main(void)\n{\n   printf(\"sizeof = %zu\\n\", test(UNION_TEST, RETRIEVE_MEMBER(1)));\n   printf(\"sizeof = %zu\\n\", test(UNION_TEST, RETRIEVE_MEMBER(2)));\n   printf(\"sizeof = %zu\\n\", test(UNION_TEST, RETRIEVE_MEMBER(3)));\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6779125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49827ae2d27d1670378962adf197651c?s=128&d=identicon&r=PG&f=1", "display_name": "penfield.s", "link": "https://stackoverflow.com/users/6779125/penfield-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 39252315, "answer_count": 3, "score": 3, "last_activity_date": 1490544053, "creation_date": 1472652556, "last_edit_date": 1490544053, "question_id": 39251945, "link": "https://stackoverflow.com/questions/39251945/is-it-possible-to-find-out-the-smallest-size-of-a-c-union", "title": "Is it possible to find out the smallest size of a C union", "body": "<p>The size of a C union(sizeof()) is the size of its largest element.</p>\n\n<p>However, is there any trick to find out what might be the smallest size of the union programmably?</p>\n\n<p>I meant something along the line of how offsetof MACRO is implemented...</p>\n"}, {"tags": ["c++", "c", "segmentation-fault", "printf", "fopen"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472652634, "post_id": 39251944, "comment_id": 65839547, "body": "TL;DR; Mismatching format specifiers and variable types somewhere perhaps?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1472652651, "post_id": 39251944, "comment_id": 65839564, "body": "My guess would be, <code>fopen</code> failed and <code>fp</code> is <code>NULL</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1472652653, "post_id": 39251944, "comment_id": 65839567, "body": "Check the return value of <code>fopen()</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1472652727, "post_id": 39251944, "comment_id": 65839622, "body": "@IgorTandetnik <i>&quot;The directories are working and the txt file gets created.&quot;</i>"}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1472652857, "post_id": 39251944, "comment_id": 65839708, "body": "maybe change the first fprintf to printf without fp and tell us which line is going to crash then?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1472652932, "post_id": 39251944, "comment_id": 65839762, "body": "Which language - C or C++?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1472652982, "post_id": 39251944, "comment_id": 65839800, "body": "<i>@Gerard</i> In general you should inspect your progam with the debugger line by line first to identify the exact source of the exception."}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472653122, "post_id": 39251944, "comment_id": 65839898, "body": "any chance to rise ulimit on core file creation and inspecting core file with gdb?"}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 1, "creation_date": 1472653329, "post_id": 39251944, "comment_id": 65840048, "body": "Are you sure you aren&#39;t receiving a <code>dateiname3</code> longer than <code>dateiname2</code> (=100 chars) can handle? (... <code>strcpy&#47;strcat</code> ... shudders )"}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "edited": false, "score": 0, "creation_date": 1472654297, "post_id": 39251944, "comment_id": 65840827, "body": "hey, thx for your comments! the file gets created empty, the segfault must be thrown after my printf. the language is c++ (for some random generators), but as you can see I&#39;m programing mostly in c"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1472654444, "post_id": 39251944, "comment_id": 65840955, "body": "@GerardJ&#250;lio As mentioned step through with the debugger to identify the exact source of the segfault."}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472654775, "post_id": 39251944, "comment_id": 65841199, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 oh dear, I&#39;m compiling my code with gcc, I&#39;m not into into the deep stuff of debugging, but I know, that the first fopen throws the fault and that the pointer isn&#39;t null"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472654975, "post_id": 39251944, "comment_id": 65841363, "body": "@GerardJ&#250;lio <i>&quot;that the first fopen throws the fault and that the pointer isn&#39;t null&quot;</i>  That is contradictorily.. Learn how to use the debugger, this is an essential skill for every serious programmer."}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472655124, "post_id": 39251944, "comment_id": 65841466, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 sorry, I meant the first fprintf(), fopen() doesn&#39;t makes any sense here"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472655320, "post_id": 39251944, "comment_id": 65841603, "body": "@GerardJ&#250;lio Though that doesn&#39;t mean the segfault occurs at your 1st <code>fprintf()</code>, that the file is empty isn&#39;t a proof. Files are written buffered, unless you apply a <code>flush()</code> after each <code>fprintf()</code>. Again: Use the debugger, with any modern IDE it&#39;s fairly easy to use it."}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472655716, "post_id": 39251944, "comment_id": 65841887, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 you&#39;re right, I tried to change the first fprintf in printf though, printf is working, the next fprintf throws the fault. The pointer has to be broken!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472656206, "post_id": 39251944, "comment_id": 65842232, "body": "@GerardJ&#250;lio What&#39;s the value of the pointer? Is it <code>NULL</code>?"}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472656513, "post_id": 39251944, "comment_id": 65842451, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 nope, 938e008 for example"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472657843, "post_id": 39251944, "comment_id": 65843337, "body": "@GerardJ&#250;lio Sounds much like you have some undefined behavior/stack corruption then."}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1472658769, "post_id": 39251944, "comment_id": 65843914, "body": "Consider pasting your code into an online c++ compiler such as ideone.com or cpp.sh and getting it to compile without errors while still reproducing the crash. If you really think it is this particular function, it should be easy to make it compile online (although for online I would replace all fprintf by printf)."}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1472667055, "post_id": 39251944, "comment_id": 65848476, "body": "@V-R printf is no problem, it is this function indeed"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472690234, "post_id": 39251944, "comment_id": 65857924, "body": "for ease of readability and understanding: 1) indent after every opening brace &#39;{&#39;.  un-indent before every closing brace &#39;}&#39;. (suggest using 4 spaces for each indent level, NEVER use tabs for indenting as every word processor/editor has the tab stops/tab width set to individual preferences.  2) follow the axiom: *only one statement per line and (at most) one variable declaration per statement.  3) separate code blocks (for, if, else, while, do...while, switch, default, case) via a blank line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472690378, "post_id": 39251944, "comment_id": 65857955, "body": "When asking a question about a run time problem, post code that cleanly compiles, is reasonably short, and still shows the problem.  the posted code is not even a complete function, so it does not compile.  Please repost a complete program, short, that exhibits the problem."}], "owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472652554, "creation_date": 1472652554, "question_id": 39251944, "link": "https://stackoverflow.com/questions/39251944/segfault-on-fprintf", "title": "SegFault on fprintf", "body": "<p>I do not know why the program runs into a segfault after my printf on the first fprintf. Do anybody has an idea? The directories are working and the txt file gets created.</p>\n\n<pre><code>    void visualisierung(int M,int L, float p,float q,float r,int n,\nint step,int stepm, char dateiname3[]){\n            FILE *fp,*fp2;\n            zelle **liste,*listehilf;\n            int i,j,anz,teilchenmax,teilchenneu,nt,me;\n            time_t zeit;\n            double multiplier,dichte;\n            double fluss[101];\n            char dateiname[100],dateiname2[100];\n            zeit=time(NULL);\n            //erstellen eines neuen Ordners\n            mkdir(\"currentvids\",0755);\n            chdir(\"currentvids\");\n            strcpy(dateiname,dateiname3);\n            strcpy(dateiname2,dateiname3);\n            strcat(dateiname2,\".txt\");\n            mkdir(dateiname,0755);\n            chdir(dateiname);\n            fp=fopen(dateiname2,\"w\");\n                printf(\"No SegFault yet\\n\");\n\n                fprintf(fp, \"#Matrix %ix%i\\n\", M,L);\n                fprintf(fp, \"#Particle Size: %ix%i\\n\", n,n);\n                fprintf(fp, \"#p: %f\\n\", p);\n                fprintf(fp, \"#q: %f\\n\", q);\n                fprintf(fp, \"#v: %f\\n\", 1-(p+q+r));\n                fprintf(fp, \"#steps before measurement: %i\\n\", step);\n                fprintf(fp, \"#number of measured steps: %i\\n\", stepm);\n</code></pre>\n"}, {"tags": ["c", "load", "trie", "cs50"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1472651944, "post_id": 39251685, "comment_id": 65839054, "body": "Congratulations, you&#39;ve pasted an assignment into the internet. What was your question?"}, {"owner": {"reputation": 195, "user_id": 5323296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782dcb5f6bd00bc63873cd63ae7e8d00?s=128&d=identicon&r=PG&f=1", "display_name": "menan", "link": "https://stackoverflow.com/users/5323296/menan"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1472652015, "post_id": 39251685, "comment_id": 65839112, "body": "Sorry, I was having trouble loading my trie, kept getting a segmentation error."}, {"owner": {"reputation": 2073, "user_id": 357403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RpSGe.jpg?s=128&g=1", "display_name": "Koshinae", "link": "https://stackoverflow.com/users/357403/koshinae"}, "edited": false, "score": 0, "creation_date": 1472652143, "post_id": 39251685, "comment_id": 65839199, "body": "What is a &quot;trie&quot;? (Ssh, don&#39;t help the OP!)"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1472652311, "post_id": 39251685, "comment_id": 65839330, "body": "A <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">trie</a> is an interesting type of search tree. And, menan - if you have a segmentation error, you should either have a core dump you can load in a debugger, or you can just run the program in your debugger and see it stop at the point when the error occurs. Typically segv means you have a NULL pointer, or an uninitialized pointer, or some other horrible thing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1472653278, "post_id": 39251685, "comment_id": 65840012, "body": "The semicolon in <code>#define ASCII_OFFSET 97;</code> is not wanted.  But if the code compiles with it present, are you actually using <code>ASCII_OFFSET</code> at all? (Answer: yes, it is used, at least twice, but at the end of an expression so the extra semi-colon is just an empty statement.)  Would it be clearer to use <code>#define ASCII_OFFSET &#39;a&#39;</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1472653446, "post_id": 39251685, "comment_id": 65840155, "body": "You don&#39;t properly initialize the allocated trie structure element.  You need to make sure all those pointers are nulled."}, {"owner": {"reputation": 195, "user_id": 5323296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782dcb5f6bd00bc63873cd63ae7e8d00?s=128&d=identicon&r=PG&f=1", "display_name": "menan", "link": "https://stackoverflow.com/users/5323296/menan"}, "edited": false, "score": 0, "creation_date": 1472653802, "post_id": 39251685, "comment_id": 65840430, "body": "How do I NULL these pointers, I have used malloc, and callo?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1472738011, "post_id": 39251685, "comment_id": 65881454, "body": "@menan Use a <code>for</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 625, "user_id": 3900723, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8b383cec5d8b20db7c4faaaee53c5b06?s=128&d=identicon&r=PG&f=1", "display_name": "maxbit89", "link": "https://stackoverflow.com/users/3900723/maxbit89"}, "edited": false, "score": 0, "creation_date": 1472735665, "post_id": 39252053, "comment_id": 65879587, "body": "You should also use calloc instead of malloc because you check for NULL but malloc doesn&#39;t give you a defined memory value."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 625, "user_id": 3900723, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8b383cec5d8b20db7c4faaaee53c5b06?s=128&d=identicon&r=PG&f=1", "display_name": "maxbit89", "link": "https://stackoverflow.com/users/3900723/maxbit89"}, "edited": false, "score": 2, "creation_date": 1472737982, "post_id": 39252053, "comment_id": 65881427, "body": "@maxbit89 You raise a valid point. I don&#39;t think  <code>NULL</code> is required to be <code>0</code> by the standard (even though &quot;all&quot; implementations seem to have it as <code>0</code>), so I&#39;ve chosen to recommend explicitly setting the pointers to <code>NULL</code> instead."}, {"owner": {"reputation": 625, "user_id": 3900723, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8b383cec5d8b20db7c4faaaee53c5b06?s=128&d=identicon&r=PG&f=1", "display_name": "maxbit89", "link": "https://stackoverflow.com/users/3900723/maxbit89"}, "edited": false, "score": 0, "creation_date": 1473000333, "post_id": 39252053, "comment_id": 65968255, "body": "Yes perse it is not defined in Standard but it is well used ^^. See also: <a href=\"http://stackoverflow.com/questions/9894013/is-null-always-zero-in-c\" title=\"is null always zero in c\">stackoverflow.com/questions/9894013/is-null-always-zero-in-c</a>"}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1472737609, "last_edit_date": 1472737609, "creation_date": 1472652846, "answer_id": 39252053, "question_id": 39251685, "link": "https://stackoverflow.com/questions/39251685/loading-a-trie-data-structure-in-c-pset5-cs50/39252053#39252053", "title": "Loading a trie data structure in C- pset5 cs50", "body": "<ol>\n<li><p>You don't check that a char is in range before using it as index in the array. Any character outside the range a-z will cause buffer overflow. </p></li>\n<li><p>You compare the character to known character constants <em>after</em> you have subtracted 97 from it.</p></li>\n<li><p>You need to initialize the memory returned from malloc by assigning <code>NULL</code> to all array elements and set <code>is_word</code> to false.</p></li>\n</ol>\n\n<p>Just took a short glance at the code, so I may have missed additional bugs.</p>\n"}], "owner": {"reputation": 195, "user_id": 5323296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782dcb5f6bd00bc63873cd63ae7e8d00?s=128&d=identicon&r=PG&f=1", "display_name": "menan", "link": "https://stackoverflow.com/users/5323296/menan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1580, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1472737609, "creation_date": 1472651854, "last_edit_date": 1472653217, "question_id": 39251685, "link": "https://stackoverflow.com/questions/39251685/loading-a-trie-data-structure-in-c-pset5-cs50", "title": "Loading a trie data structure in C- pset5 cs50", "body": "<p>I am having trouble loading data into my trie structure. I keep getting a sgemenation fault. Does this have to do with my malloc? Anyone see any issues?</p>\n\n<p>Thanks</p>\n\n<pre><code>/**\n * dictionary.c\n *\n * Computer Science 50\n * Problem Set 5\n *\n * Implements a dictionary's functionality.\n */\n\n#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include \"dictionary.h\"\n\n\n#define ASCII_OFFSET 97;\n\n/** Node of the data structure used to store the dictionary key words\n * Data Structures Type is Tries\n * Includes a bool to indicate if the current node is the end of a word\n * A pointer to the nodes child node\n */\ntypedef struct node\n{\n    bool is_word;\n    struct node* children[27];\n}\nnode;\nnode* rootNode;\nnode* nextNode;\n\n//Variable to track the size of the dictinoary\nint wordCount = 0;\n\n/**\n * Returns true if word is in dictionary else false.\n */\n\nbool check(const char* word)\n{\n    //Get words length\n    int wordLength = strlen(word);\n\n    for(int i = 0; i &lt; wordLength; i++)\n    {\n        //taking the character we need to check\n        int charToCheck = tolower(word[i]) - ASCII_OFFSET;\n\n        //Checking to see if the char exists in the data strucutre, Trie;\n        if(nextNode-&gt;children[charToCheck] == NULL)\n        {\n            return false;\n        }\n\n        //Advance the next node down the trie\n        nextNode = nextNode-&gt;children[charToCheck];\n    }\n\n    nextNode = rootNode;\n    //Return what is_word return\n    return nextNode-&gt;is_word;\n}\n\n/**\n * Loads dictionary into memory.  Returns true if successful else false.\n */\n\nbool load(const char* dictionary)\n{\n    //Open dict.. file to read \n    FILE* file = fopen(dictionary,\"r\");\n\n    //Check if the dict.. exsists!\n    if(file == NULL)\n    {\n        return false;\n    }\n\n    //Creating the first node in our data strucutre\n    rootNode = malloc(sizeof(node));\n    nextNode = rootNode;\n\n    //Get character to store\n    int character = fgetc(file) - ASCII_OFFSET;\n\n    //Go through the dict... file \n    while(character != EOF)\n    {\n        //Go through each word in the file\n        while(character != '\\n')\n        {\n            //Add into our data structure\n            if(nextNode-&gt;children[character] == NULL)\n            {\n                //Create memory inorder to insert the next node\n                nextNode-&gt;children[character] = malloc(sizeof(node));\n                nextNode = nextNode-&gt;children[character];\n            }else {\n                nextNode = nextNode-&gt;children[character];\n            }\n\n            //advance character to next\n            character = fgetc(file) - ASCII_OFFSET;\n        }\n\n        //advance character to next word\n        character = fgetc(file) - ASCII_OFFSET;\n\n        //Set the last node loaded to is_word to track the end of each word\n        nextNode-&gt;is_word = true;\n        wordCount++;\n        nextNode = rootNode;\n    }\n\n\n    fclose(file);\n    return true;\n}\n\n/**\n * Returns number of words in dictionary if loaded else 0 if not yet loaded.\n */\n\nunsigned int size(void)\n{\n    return wordCount;\n}\n\n/**\n * Unloads dictionary from memory.  Returns true if successful else false.\n */\n\nbool unload(void)\n{\n    for(int i = 0; i &lt; 26; i++)\n    {\n        if(nextNode-&gt;children[i] != NULL)\n        {\n            nextNode = nextNode-&gt;children[i];\n            unload();\n        }\n    }\n\n    free(nextNode);\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "arm", "keil", "compiler-bug"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1472651878, "post_id": 39251479, "comment_id": 65839002, "body": "<code>previosTemperature</code> isn&#39;t the same variable name as the constant: note the typo: (previos vs. previous).  I assume that&#39;s just an error in copying your code into the question, though.  If you aren&#39;t using any inline asm, then it sounds like a compiler bug unless you&#39;re somehow lying to the compiler."}, {"owner": {"reputation": 486, "user_id": 2677670, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9e4be09701a10c2335f590abd4116d9d?s=128&d=identicon&r=PG&f=1", "display_name": "mactro", "link": "https://stackoverflow.com/users/2677670/mactro"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1472652008, "post_id": 39251479, "comment_id": 65839107, "body": "@PeterCordes yes, that was a typo. I don&#39;t use inline asm anywhere."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1472652670, "post_id": 39251479, "comment_id": 65839584, "body": "If it needs to survive a function call, the compiler should be putting it in a register that the ABI says is call-preserved.  I haven&#39;t used Keil tools, but it&#39;s not normal to have to do anything special to get plain C semantics (like variables keeping their values!) to work properly."}, {"owner": {"user_type": "does_not_exist", "display_name": "user948581"}, "edited": false, "score": 0, "creation_date": 1472653108, "post_id": 39251479, "comment_id": 65839888, "body": "Are you sure the variable is kept in a register? Couldn&#39;t it be saved on the stack? In this case you might have a bug that corrupts the stack in <code>someNestedFunction</code>. Try commenting bits of it until you narrow the problem down to the culprit (this of course assumes that commenting out the call to <code>someNestedFunction</code> &quot;solves&quot; the problem in the first place)"}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472653439, "post_id": 39251479, "comment_id": 65840150, "body": "does replace of <code>const</code> with <code>volatile</code> changes the situation?"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 2, "creation_date": 1472653957, "post_id": 39251479, "comment_id": 65840543, "body": "Per <a href=\"http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042f/IHI0042F_aapcs.pdf\" rel=\"nofollow noreferrer\">the ABI</a>, s16-s31 are callee-saved, so one of the intervening functions (or possibly an interrupt handler) is either corrupting the stack or touching FP registers behind the compiler&#39;s back. You want to debug and fix <i>that</i>, not bodge around it in this function. Besides, the automatic stacking of caller-saved registers on exception entry, which is what you&#39;ve referred to, really doesn&#39;t have anything to do with anything here."}, {"owner": {"reputation": 486, "user_id": 2677670, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9e4be09701a10c2335f590abd4116d9d?s=128&d=identicon&r=PG&f=1", "display_name": "mactro", "link": "https://stackoverflow.com/users/2677670/mactro"}, "reply_to_user": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472661471, "post_id": 39251479, "comment_id": 65845398, "body": "@Serge Even if that helps, that wouldn&#39;t cure the cause of the problem."}, {"owner": {"reputation": 486, "user_id": 2677670, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9e4be09701a10c2335f590abd4116d9d?s=128&d=identicon&r=PG&f=1", "display_name": "mactro", "link": "https://stackoverflow.com/users/2677670/mactro"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1472661563, "post_id": 39251479, "comment_id": 65845450, "body": "@Notlikethat What do you mean by <i>touching FP registers behind the compiler&#39;s back</i>?"}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472669303, "post_id": 39251479, "comment_id": 65849710, "body": "@mactro yes, but it may help to identify the source of the problem"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1472669396, "post_id": 39251479, "comment_id": 65849761, "body": "If the compiler generates code which touches a callee-saved register, it will also generate the necessary prologue/epilogue to preserve and restore the previous value. If any improper inline (or out of line) assembly or other trickery results in the compiler not emitting that prologue/epilogue code (because it&#39;s not aware of the registers being touched), or control flow somehow bypassing it, then all bets are off."}], "answers": [{"comments": [{"owner": {"reputation": 486, "user_id": 2677670, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9e4be09701a10c2335f590abd4116d9d?s=128&d=identicon&r=PG&f=1", "display_name": "mactro", "link": "https://stackoverflow.com/users/2677670/mactro"}, "edited": false, "score": 0, "creation_date": 1472824279, "post_id": 39293391, "comment_id": 65921836, "body": "The call looks like:      <code>char msg[10];     snprintf(msg, 10, &quot;%4.2f&quot;, value&#47;100.0f);</code>, where value was a float which wasn&#39;t initialized."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 486, "user_id": 2677670, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9e4be09701a10c2335f590abd4116d9d?s=128&d=identicon&r=PG&f=1", "display_name": "mactro", "link": "https://stackoverflow.com/users/2677670/mactro"}, "edited": false, "score": 0, "creation_date": 1472874194, "post_id": 39293391, "comment_id": 65939948, "body": "@mactro: Hmm, reading an uninitialized  float doesn&#39;t explain it. :/  snprintf should still just print NaN or some decimal digits into <code>msg</code>, and does always null-terminate the string.  (Unlike strncpy)."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": -1, "last_activity_date": 1472874384, "last_edit_date": 1472874384, "creation_date": 1472822152, "answer_id": 39293391, "question_id": 39251479, "link": "https://stackoverflow.com/questions/39251479/stm32f4-not-pushing-popping-floating-point-registers/39293391#39293391", "title": "STM32F4 not pushing/popping floating point registers", "body": "<p>Nice detective work to find that the reg is getting saved as D9.</p>\n\n<p>What kind of uninitialized garbage in snprintf are you talking about?  Did you pass a bogus pointer?  If so, then <code>snprintf</code> probably overwrote the location on the stack where your variable was being saved/restored to/from, because the buf pointer it received told it to do that.</p>\n\n<p>Corrupting data on the stack typically leads to bad return addresses (causing segfaults) or bad data in variables that are supposed to survive function calls.</p>\n\n<hr>\n\n<p>update: if it was just the float that was uninitialized, that doesn't explain anything.</p>\n\n<p><strong>Suggestion</strong>: set breakpoints at the outer-most place where D9 is saved and restored.  Set a watchpoint on the stack address where it's saved, so you can detect when the memory is overwritten while it still holds the saved value of your variable.</p>\n"}], "owner": {"reputation": 486, "user_id": 2677670, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9e4be09701a10c2335f590abd4116d9d?s=128&d=identicon&r=PG&f=1", "display_name": "mactro", "link": "https://stackoverflow.com/users/2677670/mactro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1472874384, "creation_date": 1472651278, "last_edit_date": 1472808607, "question_id": 39251479, "link": "https://stackoverflow.com/questions/39251479/stm32f4-not-pushing-popping-floating-point-registers", "title": "STM32F4 not pushing/popping floating point registers", "body": "<p>I have a code</p>\n\n<pre><code>const float previousTemperature = getTemperature();\nsomeNestedFunction();\nsomeOtherActions();\nsetTemperature(previousTemperature);\n</code></pre>\n\n<p>My problem is that in <code>someNestedFunction();</code> <code>previousTemperature</code> gets modified. I have looked at the disassembly and I can't find any instructions that would push or pop the register in which <code>previousTemperature</code> is stored, before calling.</p>\n\n<p>I have checked ARM <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dai0298a/DAFGGBJD.html\" rel=\"nofollow\">documentation</a> and it states:</p>\n\n<blockquote>\n  <p>The other registers in the FPU, that is, S0-S15 and FPSCR, are always\n  saved automatically.</p>\n</blockquote>\n\n<p>My variable is stored in S18, so how can I make sure it will be saved and restored correctly? I would like to find a solution that would avoid messing with Asm.</p>\n\n<p>My processor is STM32F437ZGT and I use Keil uVision 5 compiler.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>So far I have tried to comment the contents of <code>someNestedFunction()</code> to find out what exactly is modifying the register in which my variable is. It turns out, that it is touched by a call to </p>\n\n<pre><code>snprintf(msg, 10, \"%4.2f\", value/100.0f);\n</code></pre>\n\n<p>Tomorrow I will check if anything is corrupting the stack.</p>\n\n<p><strong>Edit2:</strong></p>\n\n<p>The register in which <code>previousTemperature</code> resided, was pushed/popped after all. I haven't noticed that, because in dissasebly D9 register was used, which shadows S18 and S19. Also, it seems that <code>value</code> in <code>snprintf(msg, 10, \"%4.2f\", value/100.0f);</code> was some uninitialized garbage. After it was corrected, <code>previousTemperature</code> stays the same all the time. However, why this is happening is a mystery for me, and I'm afraid that the true problem is still out there, I just can't observe any symptoms.</p>\n"}, {"tags": ["c", "pointers", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1472651536, "post_id": 39251455, "comment_id": 65838752, "body": "And don&#39;t use a C++ compiler to compile C."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "edited": false, "score": 0, "creation_date": 1472651921, "post_id": 39251455, "comment_id": 65839037, "body": "@nobar: the line  <code>void append(node *linkedlist, int data){</code> would fail to compile in C, since <code>node</code> is not a type (there is no typedef). This is just one of the differences between C and (a subset of) C++"}, {"owner": {"reputation": 1301, "user_id": 5871514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/637xu.png?s=128&g=1", "display_name": "BOTJr.", "link": "https://stackoverflow.com/users/5871514/botjr"}, "reply_to_user": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1472651926, "post_id": 39251455, "comment_id": 65839040, "body": "@KostasRim i upvoted it for the time being, i have done this method before, i didn&#39;t know about the value being passed as copy , hence the upvote.Plus, i will hang on to a little bit more to see some more answers :)"}, {"owner": {"reputation": 1301, "user_id": 5871514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/637xu.png?s=128&g=1", "display_name": "BOTJr.", "link": "https://stackoverflow.com/users/5871514/botjr"}, "edited": false, "score": 0, "creation_date": 1472652040, "post_id": 39251455, "comment_id": 65839130, "body": "@Downvoter, care to answer?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1472652391, "post_id": 39251455, "comment_id": 65839378, "body": "Because the program in your question is not C. Did you try to compile it? Why not?"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 1, "creation_date": 1472652437, "post_id": 39251455, "comment_id": 65839416, "body": "@BOTJr. do not worry, its a very common error !"}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "edited": false, "score": 0, "creation_date": 1472653807, "post_id": 39251455, "comment_id": 65840434, "body": "Funny.  The OP originally tagged this as C++, but someone else decided (incorrectly) that it wasn&#39;t and changed the tag."}, {"owner": {"reputation": 1301, "user_id": 5871514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/637xu.png?s=128&g=1", "display_name": "BOTJr.", "link": "https://stackoverflow.com/users/5871514/botjr"}, "reply_to_user": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "edited": false, "score": 0, "creation_date": 1472654186, "post_id": 39251455, "comment_id": 65840743, "body": "@nobar, it was cpp but just to avoid the further explanation, i let him edit my post to c."}], "answers": [{"comments": [{"owner": {"reputation": 778, "user_id": 6618289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1149829745350f27012281268c37c618?s=128&d=identicon&r=PG&f=1", "display_name": "meetaig", "link": "https://stackoverflow.com/users/6618289/meetaig"}, "edited": false, "score": 2, "creation_date": 1472651632, "post_id": 39251565, "comment_id": 65838828, "body": "or if OP does not want to your <code>pointer **</code> they can just return the new linked list: <code>node* append(node *linkedlist,int data){...</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472651894, "post_id": 39251565, "comment_id": 65839015, "body": "Or pass by reference <code>void append(node*&amp; linkedlist,int data)</code>"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472652163, "post_id": 39251565, "comment_id": 65839216, "body": "@NathanOliver He used <code>malloc()</code> and I made an assumption that he misplaced the c++ tag. Anyway, I made an edit, thanks for pointing out!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472652334, "post_id": 39251565, "comment_id": 65839342, "body": "@KostasRim No you were right.  I did not see the C tag was removed and still thought this was a C++ question."}], "tags": [], "owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "is_accepted": true, "score": 3, "last_activity_date": 1472652456, "last_edit_date": 1472652456, "creation_date": 1472651507, "answer_id": 39251565, "question_id": 39251455, "link": "https://stackoverflow.com/questions/39251455/node-insertion-linked-lists/39251565#39251565", "title": "Node Insertion,Linked Lists", "body": "<p>Your problem is here <code>linkedlist = new_element;</code> When passing arguments to a function they are passed by value. Even when you pass a <code>pointer</code> you are actually passing a copy of that pointer(you can verify by printing the address of <code>linkedlist</code> inside the function and outside the function). The statement <code>linkedlist = new_element;</code> assigns the <code>new_element</code> to a copy. Once the function return you end up with nothing (and a memory leak). Remember when you need to change a pointer itself you must use a double <code>pointer **</code> </p>\n"}, {"tags": [], "owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "is_accepted": false, "score": 2, "last_activity_date": 1472651579, "creation_date": 1472651579, "answer_id": 39251589, "question_id": 39251455, "link": "https://stackoverflow.com/questions/39251455/node-insertion-linked-lists/39251589#39251589", "title": "Node Insertion,Linked Lists", "body": "<p>You put in the value of <code>start</code> which points to null. Then you copy it to another pointer <code>linkedlist</code> and set it to a new value. After the function <code>start</code> is still pointing to null though because you never changed the value of <code>start</code>.</p>\n\n<p>You could try to change your declaration to </p>\n\n<pre><code>void append(node *&amp;linkedlist,int data)\n</code></pre>\n\n<p>If you are using a c++ compiler. </p>\n\n<p>else </p>\n\n<pre><code>void append(node **linkedlist,int data)\n...\nappend(&amp;start,4);\n</code></pre>\n\n<p>if you are using C</p>\n"}, {"comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472651912, "post_id": 39251620, "comment_id": 65839031, "body": "This has the same issue as the OP"}, {"owner": {"reputation": 86, "user_id": 5105769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0672a09d65c2466523110727c26b52d?s=128&d=identicon&r=PG&f=1", "display_name": "rishabh", "link": "https://stackoverflow.com/users/5105769/rishabh"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472652773, "post_id": 39251620, "comment_id": 65839648, "body": "Sorry about that, Handled it now"}], "tags": [], "owner": {"reputation": 86, "user_id": 5105769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0672a09d65c2466523110727c26b52d?s=128&d=identicon&r=PG&f=1", "display_name": "rishabh", "link": "https://stackoverflow.com/users/5105769/rishabh"}, "is_accepted": false, "score": 0, "last_activity_date": 1472652371, "last_edit_date": 1472652371, "creation_date": 1472651673, "answer_id": 39251620, "question_id": 39251455, "link": "https://stackoverflow.com/questions/39251455/node-insertion-linked-lists/39251620#39251620", "title": "Node Insertion,Linked Lists", "body": "<p>In the append function you should</p>\n\n<ol>\n<li>First initialise next of newnode to  be null</li>\n<li>Check before inserting for empty list, if empty then then make this as head.</li>\n<li>If it is not empty then make the new node point to the head of your list and make it the new head.</li>\n<li>To reflect back the insertion done in append you should return the modified head from the function(Also modify main accordingly).</li>\n</ol>\n\n<p>Look at this code:-</p>\n\n<pre><code>    node *append(node *linkedlist,int data){\n        node *new_element=NULL;\n        new_element=(node *)malloc(sizeof(struct node));\n        new_element-&gt;data=data;\n        new_element-&gt;next=NULL;// initialise next of newnode to  be null here\n        // In case of empty list make this as first node\n        if(linkedlist==NULL)\n        {\n              linkedlist=new_element;\n        }\n       else\n        {\n            new_element-&gt;next=(linkedlist);//point the new node to head of list\n            (linkedlist)=new_element;// make new node as head\n        }\n        return linkedlist;\n    }\n\n\n    int main()\n    {\n        start = append(start, 4);\n        start = append(start, 5);\n        printList(start);\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2337, "user_id": 3827850, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/rCU6z.jpg?s=128&g=1", "display_name": "Ezio", "link": "https://stackoverflow.com/users/3827850/ezio"}, "is_accepted": false, "score": 0, "last_activity_date": 1472652027, "creation_date": 1472652027, "answer_id": 39251746, "question_id": 39251455, "link": "https://stackoverflow.com/questions/39251455/node-insertion-linked-lists/39251746#39251746", "title": "Node Insertion,Linked Lists", "body": "<p>I dont think your if statement is correct. I would do it like this</p>\n\n<pre><code>if(linkedlist == null)\n{\n    //head node is null i.e, linked list is empty hence make the new node as head node\n    linkedlist = new_element;  \n}else{\n    //make the new node point to the head\n    new_element-&gt;next = linkedlist;\n    //make the new node as head node\n    linkedlist = new_element;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1472653728, "last_edit_date": 1472653728, "creation_date": 1472652743, "answer_id": 39252018, "question_id": 39251455, "link": "https://stackoverflow.com/questions/39251455/node-insertion-linked-lists/39252018#39252018", "title": "Node Insertion,Linked Lists", "body": "<p>For starters the code you showed is not valid C code. You are using C++ elements. So the program will not even compile as a C program.</p>\n\n<p>As the node <code>start</code> that is initially set to <code>NULL</code> can be changed by the function you have to pass it by reference. Otherwise the function parameter <code>linkedlist</code> is a local variable of the function that will be changed in the function and at last will be destroyed after exiting the function. So the original pointer <code>start</code> itself will not be changed. </p>\n\n<p>Also this else code block</p>\n\n<pre><code>    else {\n        new_element-&gt;next = (linkedlist)-&gt;next;\n        (linkedlist)-&gt;next = new_element;\n    }\n</code></pre>\n\n<p>is wrong. This code block does not insert a new node in the beginning of the list. It inserts a new node after the first already existent node.</p>\n\n<p>Take into account that the function name <code>append</code> is not suitable for inserting a node in the beginning of the list. It would be better to name it like <code>insert</code>.\nThe function can look the following way</p>\n\n<pre><code>int insert( struct node **linkedlist, int data )\n{\n    struct node *new_element = malloc( sizeof( struct node ) );\n    int success = new_element != NULL;\n\n    if ( success )\n    {\n        new_element-&gt;data = data;\n        new_element-&gt;next = *linkedlist;\n        *linkedlist = new_element;\n    }\n\n    return success;\n}\n</code></pre>\n\n<p>If you indeed need a function that appends nodes to the list then it can look the following way</p>\n\n<pre><code>int append( struct node **linkedlist, int data )\n{\n    struct node *new_element = malloc( sizeof( struct node ) );\n    int success = new_element != NULL;\n\n    if ( success )\n    {\n        new_element-&gt;data = data;\n        new_element-&gt;next = NULL;\n\n        while ( *linkedlist != NULL ) linkedlist = &amp;( *linkedlist )-&gt;next; \n        *linkedlist = new_element;\n    }\n\n    return success;\n}\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct node \n{\n    int data;\n    struct node* next;\n} *start = NULL;\n\nint insert( struct node **linkedlist, int data )\n{\n    struct node *new_element = malloc( sizeof( struct node ) );\n    int success = new_element != NULL;\n\n    if ( success )\n    {\n        new_element-&gt;data = data;\n        new_element-&gt;next = *linkedlist;\n        *linkedlist = new_element;\n    }\n\n    return success;\n}\n\nint append( struct node **linkedlist, int data )\n{\n    struct node *new_element = malloc( sizeof( struct node ) );\n    int success = new_element != NULL;\n\n    if ( success )\n    {\n        new_element-&gt;data = data;\n        new_element-&gt;next = NULL;\n\n        while ( *linkedlist != NULL ) linkedlist = &amp;( *linkedlist )-&gt;next; \n        *linkedlist = new_element;\n    }\n\n    return success;\n}\n\nvoid printList( struct node* linkedlist )\n{\n    if ( linkedlist == NULL ) \n    {\n        puts( \"Linked list is empty\" );\n    }\n    else \n    {\n        for ( struct node *current = linkedlist; current != NULL; current = current-&gt;next ) \n        {\n            printf( \"%d \", current-&gt;data );\n        }\n        printf( \"\\n\" );\n    }\n}\n\nint main( void ) \n{\n    const int N = 10;\n\n    for ( int i = 1; i &lt;= N; i++ )\n    {\n        if ( i % 2 == 0 ) append( &amp;start, i );\n        else insert( &amp;start, i );\n    }\n\n    printList( start );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>9 7 5 3 1 2 4 6 8 10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "edited": false, "score": 0, "creation_date": 1472654514, "post_id": 39252356, "comment_id": 65841007, "body": "Both approaches work in C++, which is more or less a superset of C."}], "tags": [], "owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "is_accepted": false, "score": 0, "last_activity_date": 1472653690, "creation_date": 1472653690, "answer_id": 39252356, "question_id": 39251455, "link": "https://stackoverflow.com/questions/39251455/node-insertion-linked-lists/39252356#39252356", "title": "Node Insertion,Linked Lists", "body": "<p>When you pass a parameter in C, it creates a local copy for the function to use.  When you modify the parameter inside the function, it only changes the local copy.</p>\n\n<pre><code>void f1( int a )\n{\n    a = 1; // modification does not affect the calling function\n}\n\nint b=0;\nf1( b );\nassert( b == 0 ); // b was not changed by f\n</code></pre>\n\n<p>In C (or C-style C++), if you want a function to modify a parameter, you need to pass it as a pointer:</p>\n\n<pre><code>void f2( int * a )\n{\n    (*a) = 1;\n}\n\nint b=0;\nf2( &amp;b );\nassert( b == 1 ); // b was changed by f\n</code></pre>\n\n<p>If that parameter was already a pointer type, then you need to pass it as a pointer to a pointer:</p>\n\n<pre><code>void f3( int * * a )\n{\n    (*a) = (int*) malloc(sizeof(int));\n    (**a) = 1;\n}\n\nint * b = NULL;\nf3( &amp;b );\nassert( b != NULL ); // the pointer was initialized\nassert( *b == 1 ); // the pointed-to value was initialized\n</code></pre>\n\n<p>The assignment process can be a bit simpler in C++ because you can use <a href=\"https://en.wikipedia.org/wiki/Reference_(C%2B%2B)\" rel=\"nofollow\">reference parameters</a> instead of explicitly specifying the pointer.</p>\n"}], "owner": {"reputation": 1301, "user_id": 5871514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/637xu.png?s=128&g=1", "display_name": "BOTJr.", "link": "https://stackoverflow.com/users/5871514/botjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 39251565, "answer_count": 6, "score": 1, "last_activity_date": 1472653842, "creation_date": 1472651222, "last_edit_date": 1472653842, "question_id": 39251455, "link": "https://stackoverflow.com/questions/39251455/node-insertion-linked-lists", "title": "Node Insertion,Linked Lists", "body": "<p>I have this code through which it inserts node at the starting.This code also contains a function which prints linked list and if empty it prints <em>linked list is empty</em> .</p>\n\n<p>when i run this code , i have my ouput as <em>Linked list is empty</em> .</p>\n\n<pre><code>struct node {\n    int data;\n    node* next;\n}* start = NULL;\n\nvoid append(node* linkedlist, int data)\n{\n    node* new_element = NULL;\n    new_element = (node*)malloc(sizeof(struct node));\n    new_element-&gt;data = data;\n    if (linkedlist == NULL) {\n        linkedlist = new_element;\n        new_element-&gt;next = NULL;\n    }\n\n    else {\n        new_element-&gt;next = (linkedlist)-&gt;next;\n        (linkedlist)-&gt;next = new_element;\n    }\n}\n\nint main()\n{\n    append(start, 4);\n    append(start, 5);\n    printList(start);\n}\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>void printList(node* linkedlist)\n{\n    node* ptr = linkedlist;\n    if (linkedlist == NULL) {\n        printf(\"Linked list is empty\");\n        exit(0);\n    }\n    else {\n\n        while (ptr != NULL) {\n            cout &lt;&lt; ptr-&gt;data;\n            ptr = ptr-&gt;next;\n        }\n    }\n}\n</code></pre>\n\n<p>What could i be possibly doing wrong? What should i change in order to make it work?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 8, "creation_date": 1472651149, "post_id": 39251371, "comment_id": 65838411, "body": "You&#39;re printing an address (incorrectly). Stop doing that. Turn on your compiler&#39;s warnings to the max."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 4, "creation_date": 1472651154, "post_id": 39251371, "comment_id": 65838414, "body": "<code>printf( &quot;You entered %d.\\n&quot;, &amp;x );</code> --&gt; <code>printf( &quot;You entered %d.\\n&quot;, x );</code>"}], "answers": [{"comments": [{"owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "edited": false, "score": 1, "creation_date": 1472651612, "post_id": 39251426, "comment_id": 65838810, "body": "Actually, putting <code>&amp;</code> before a variable takes its <i>address</i>. A <i>pointer</i> is a type of variable. You could for example take the address of a pointer."}], "tags": [], "owner": {"reputation": 392, "user_id": 2346823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GB7Hs.png?s=128&g=1", "display_name": "Yoshiya", "link": "https://stackoverflow.com/users/2346823/yoshiya"}, "is_accepted": false, "score": 5, "last_activity_date": 1472651279, "last_edit_date": 1472651279, "creation_date": 1472651140, "answer_id": 39251426, "question_id": 39251371, "link": "https://stackoverflow.com/questions/39251371/scanf-generates-a-random-number/39251426#39251426", "title": "scanf generates a random number?", "body": "<p>You are printing out the address of x. Remove the '&amp;' before it in the printf and you should see the right thing.\nPutting an &amp; before a variable gets a pointer to it - this is necessary in the scanf because it must change the value, but since printf only uses the value, no pointer is needed (except for strings, which are always pointers).</p>\n"}, {"tags": [], "owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "is_accepted": true, "score": 6, "last_activity_date": 1472651151, "creation_date": 1472651151, "answer_id": 39251429, "question_id": 39251371, "link": "https://stackoverflow.com/questions/39251371/scanf-generates-a-random-number/39251429#39251429", "title": "scanf generates a random number?", "body": "<p>You <code>printf</code> <code>x</code>'s address instead of value. Fix like this:</p>\n\n<pre><code>printf(\"You entered %d.\\n\", x);\n</code></pre>\n\n<p><code>scanf</code> wants the address where to store the result, <code>printf</code> can take the value itself.</p>\n"}], "owner": {"reputation": 29, "user_id": 6779032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef7c09377fcfa258fad2636c92e2fdc9?s=128&d=identicon&r=PG&f=1", "display_name": "Albis", "link": "https://stackoverflow.com/users/6779032/albis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "accepted_answer_id": 39251429, "answer_count": 2, "score": 0, "last_activity_date": 1472651460, "creation_date": 1472651036, "question_id": 39251371, "link": "https://stackoverflow.com/questions/39251371/scanf-generates-a-random-number", "title": "scanf generates a random number?", "body": "<p>Hi I just started C as my first programming language.</p>\n\n<p>I was playing around a bit with <code>scanf()</code> and found something strange.</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n#include &lt;Windows.h&gt;\nint main()\n{\n    int x;\n\n    printf( \" Type any number : \" );\n    scanf( \"%d\", &amp;x );\n    printf( \"You entered %d.\\n\", &amp;x );\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>It always shows me a result of 7 or 8 digit number.</p>\n\n<p>How is it possible?</p>\n"}, {"tags": ["c", "frama-c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1472651288, "post_id": 39251321, "comment_id": 65838543, "body": "Why would it mention <code>sum</code>, which is <i>local</i> to the function?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1472651654, "post_id": 39251321, "comment_id": 65838847, "body": "@DaviD. What is  From-plugin ?"}, {"owner": {"reputation": 293, "user_id": 3491462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69d4293a72a508ca51a8ff87b40d7bc1?s=128&d=identicon&r=PG&f=1", "display_name": "DaviD.", "link": "https://stackoverflow.com/users/3491462/david"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1472651896, "post_id": 39251321, "comment_id": 65839016, "body": "@JohnBollinger I am implementing a code-transformation that needs to do stuff with all function outputs before the function returns. I know <code>sum</code> is local and is not modified, but it points to a value outside the function and that value is modified and thus an output of the function. So it would be really nice if <code>*sum</code> would be reported as an output."}, {"owner": {"reputation": 293, "user_id": 3491462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69d4293a72a508ca51a8ff87b40d7bc1?s=128&d=identicon&r=PG&f=1", "display_name": "DaviD.", "link": "https://stackoverflow.com/users/3491462/david"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1472652569, "post_id": 39251321, "comment_id": 65839508, "body": "@VladfromMoscow It tells you on which other variables a specific variable depends on. When using the command-line you can use <code>-deps</code> to display these dependencies."}], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 3491462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69d4293a72a508ca51a8ff87b40d7bc1?s=128&d=identicon&r=PG&f=1", "display_name": "DaviD.", "link": "https://stackoverflow.com/users/3491462/david"}, "edited": false, "score": 0, "creation_date": 1472716951, "post_id": 39255058, "comment_id": 65866659, "body": "By &quot;wrapper function&quot;, do you mean I should write a wrapper around <code>add</code> where I use known names for the arguments, like <code>add(&amp;arg1, arg2, arg3)</code>, so that I can translate <code>arg1 FROM sum; a; b</code> to <code>*sum FROM sum; a; b</code>? And: Do the same restrictions apply when using the OCaml bindings? Anyway, thanks for the answer!"}, {"owner": {"reputation": 8560, "user_id": 1633665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b603faf464ae55fcdd7dc2fb3b7ac063?s=128&d=identicon&r=PG", "display_name": "Virgile", "link": "https://stackoverflow.com/users/1633665/virgile"}, "reply_to_user": {"reputation": 293, "user_id": 3491462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69d4293a72a508ca51a8ff87b40d7bc1?s=128&d=identicon&r=PG&f=1", "display_name": "DaviD.", "link": "https://stackoverflow.com/users/3491462/david"}, "edited": false, "score": 0, "creation_date": 1472747521, "post_id": 39255058, "comment_id": 65887955, "body": "@DaviD. yes, a wrapper function in this context is a function that set up an appropriate initial state and calls the real entry point of the analysis. I&#39;m unsure what you mean by &quot;using OCaml bindings&quot; though. Do you want to use <code>Db.Value</code> and <code>Db.From</code> functions instead of grepping the output? This is indeed a good idea, but yes, the same restrictions apply: you won&#39;t see <code>*sum</code> there."}], "tags": [], "owner": {"reputation": 8560, "user_id": 1633665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b603faf464ae55fcdd7dc2fb3b7ac063?s=128&d=identicon&r=PG", "display_name": "Virgile", "link": "https://stackoverflow.com/users/1633665/virgile"}, "is_accepted": true, "score": 2, "last_activity_date": 1472662239, "creation_date": 1472662239, "answer_id": 39255058, "question_id": 39251321, "link": "https://stackoverflow.com/questions/39251321/frama-c-getting-function-outputs-when-using-pointers/39255058#39255058", "title": "Frama-C: Getting function outputs when using pointers", "body": "<p>If you set <code>add</code> as your main entry point, you might be able to retrieve the information you want:</p>\n\n<pre><code>$ frama-c -main add -deps file.c\n[...]\n[from] ====== DEPENDENCIES COMPUTED ======\n   These dependencies hold at termination for the executions that terminate:\n[from] Function add:\n  S_sum[0] FROM sum; a; b\n</code></pre>\n\n<p>Basically, <code>S_sum[0]</code> is <code>*sum</code>: <code>Value</code> (on which <code>From</code> relies) generates an initial state in which pointers are either <code>NULL</code> or pointing to a block with a name similar to the one of the pointer and having, by default, two elements. There are command line options to tweak the default behavior (see <a href=\"http://frama-c.com/download/frama-c-value-analysis.pdf\" rel=\"nofollow\">Value Analysis manual</a> for more information on that), but you might find out that for more complex examples you need to write (or generate) a wrapper function that will set up a more complex initial state before calling the function. In that case, you'll have to keep track of which pointer points to where in order to reconstruct the information.</p>\n\n<p>The bulk of the issue is that in the abstract state of <code>Value</code>, <code>sum</code> is mapped to a set <code>L</code> of possible locations (here reduced to a singleton), but <code>*sum</code> is not an object in itself. A write access will simply update all values mapped to elements of <code>L</code>. Thus from the point of view of <code>From</code> everything looks like a modification of <code>result</code> (or <code>S_sum[0]</code> if you change the entry point).</p>\n"}], "owner": {"reputation": 293, "user_id": 3491462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69d4293a72a508ca51a8ff87b40d7bc1?s=128&d=identicon&r=PG&f=1", "display_name": "DaviD.", "link": "https://stackoverflow.com/users/3491462/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 39255058, "answer_count": 1, "score": 1, "last_activity_date": 1472662239, "creation_date": 1472650916, "question_id": 39251321, "link": "https://stackoverflow.com/questions/39251321/frama-c-getting-function-outputs-when-using-pointers", "title": "Frama-C: Getting function outputs when using pointers", "body": "<p>I need to get a list of all the outputs of a function. When I use the <code>From</code>-plugin on the following code</p>\n\n<pre><code>void add(int *sum, int a, int b)\n{\n    *sum = a + b;\n}\n\nint main()\n{\n    int result;\n    add(&amp;result, 1, 2);\n}\n</code></pre>\n\n<p>it tells me that <code>result</code> is the output of the <code>add</code> function. This is of course correct, but I would like the plugin to mention <code>sum</code> somewhere. I know <code>sum</code> is a pointer and is not modified in the function, so it is not an output, but <code>*sum</code> <em>is</em> modified and I would like to know that. Is there an easy (or any) way to achieve this?</p>\n"}, {"tags": ["c", "matlab", "for-loop"], "comments": [{"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 0, "creation_date": 1472650963, "post_id": 39251272, "comment_id": 65838267, "body": "In the first loop the condition has to be <code>i &lt;= l</code> (since in Matlab the vector 1:l takes both 1 and l). In the second the condition has to be <code>j&gt;=2</code> since you are decreasing from d to 2 in steps of -1."}], "answers": [{"comments": [{"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 0, "creation_date": 1472651244, "post_id": 39251411, "comment_id": 65838503, "body": "only that the first loop works while i &lt; l (variable L, not 1). In my comment there was already the correct answer."}, {"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 0, "creation_date": 1472651433, "post_id": 39251411, "comment_id": 65838659, "body": "Also the second loop has to work until j==2 including the value 2, so the operator should be <code>&gt;=</code> instead of <code>&gt;</code>."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 4, "creation_date": 1472651494, "post_id": 39251411, "comment_id": 65838709, "body": "Apparently we were writing at the same time. If you have the answer, why not submit an answer instead of commenting?"}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 2, "last_activity_date": 1472651872, "last_edit_date": 1472651872, "creation_date": 1472651102, "answer_id": 39251411, "question_id": 39251272, "link": "https://stackoverflow.com/questions/39251272/matlab-for-decreasing-in-c/39251411#39251411", "title": "matlab for (decreasing) in C", "body": "<blockquote>\n  <p>Is my conversion correct?</p>\n</blockquote>\n\n<p>No, see below.</p>\n\n<p><code>for</code> loops always have a form like</p>\n\n<pre><code>for (FROM; WHILE; NEXT) BODY\n</code></pre>\n\n<p>and are executed like:</p>\n\n<ol>\n<li>evaluate the <em>FROM</em> expression (usually initialization)</li>\n<li>evaluate the <em>WHEN</em> expression\n\n<ul>\n<li>if it is true, goto 3</li>\n<li>else, exit the loop</li>\n</ul></li>\n<li>then evaluate the <em>BODY</em></li>\n<li>evaluate <em>NEXT</em> (usually advancing the iteration)</li>\n<li>goto 2</li>\n</ol>\n\n<p>Note that the conditional is always a <em>while</em>, and never an <em>until</em>. They're logically opposites.</p>\n\n<p>Now, look at your two loops:</p>\n\n<pre><code>for (i = 0; i &lt; l; i++) {\n</code></pre>\n\n<p>runs <em>while</em> <code>i &lt; 1</code>. As soon as that condition is false, the loop exits.</p>\n\n<pre><code>for (j=d; j==2; j--)\n</code></pre>\n\n<p>You <em>want</em> this to loop <em>until</em> <code>j==2</code>, but that's not how <code>for</code> loops work. It actually loops <em>while</em> <code>j==2</code>, which is to say, never. It should be</p>\n\n<pre><code>for (j=d; j &gt;= 2; j--)\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 5410082, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ba8ef2626c3cff0df7bac43504f38a10?s=128&d=identicon&r=PG&f=1", "display_name": "IAGO SESTREM Ochoa", "link": "https://stackoverflow.com/users/5410082/iago-sestrem-ochoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 39251411, "answer_count": 1, "score": 2, "last_activity_date": 1472686027, "creation_date": 1472650801, "last_edit_date": 1472686027, "question_id": 39251272, "link": "https://stackoverflow.com/questions/39251272/matlab-for-decreasing-in-c", "title": "matlab for (decreasing) in C", "body": "<p>How can I convert a matlab for to C language?</p>\n\n<p>Matlab:</p>\n\n<pre><code>for i = 1:l,\n    for a = d:-1:2,\n        mem(a) = mem(a-1);\n    end;\n    mem(1) = s(i);\n    y(i) = a0*mem(1) + a1*mem(d0) + a2*mem(d);\nend;\n</code></pre>\n\n<p>C (that's what I did, but it seems not working):</p>\n\n<pre><code>for (i = 0; i &lt; l; i++) {\n        for (j=d; j==2; j--) {\n                mem[j]=mem[j-1];\n        }\n        mem[0]=x[i];\n        y[i]= a0*mem[0]+a1*mem[d0]+ a2*mem[d];\n    }\n</code></pre>\n\n<p>Is my conversion correct?</p>\n"}, {"tags": ["c", "go", "shared-libraries", "cgo"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1472650308, "post_id": 39251045, "comment_id": 65837798, "body": "Yes you can link to C libraries (that what cgo is mainly for). What problem are you having?"}, {"owner": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1472650441, "post_id": 39251045, "comment_id": 65837905, "body": "I want to call a client library but am unsure where to place the library so that I can reference it in go? And then how to tell go where the library is?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1472651249, "post_id": 39251045, "comment_id": 65838510, "body": "There&#39;s a cgo directive specifically for pkg-config, <code>#cgo pkg-config</code>, and there&#39;s also <code>#cgo LDFLAGS</code>: <a href=\"https://golang.org/cmd/cgo/\" rel=\"nofollow noreferrer\">golang.org/cmd/cgo</a>. You can use either of those to tell the linker how to find the libraries."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6169399"}, "edited": false, "score": 0, "creation_date": 1472653347, "post_id": 39251045, "comment_id": 65840064, "body": "see this: <a href=\"http://stackoverflow.com/questions/37987643/how-to-link-golang-package-to-an-existing-c-project-using-go-from-c-on-windows\" title=\"how to link golang package to an existing c project using go from c on windows\">stackoverflow.com/questions/37987643/&hellip;</a>"}, {"owner": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "edited": false, "score": 0, "creation_date": 1472655332, "post_id": 39251045, "comment_id": 65841611, "body": "Thanks. Do you have an example? So if I have a library hello.a and put it in my go src in a folder called lib how do i set this up?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1472656435, "post_id": 39251045, "comment_id": 65842391, "body": "@Westy10101: if you want to package the C library with your source, look for <code>{SRCDIR}</code> in the cgo documentation I linked."}], "answers": [{"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1472657142, "post_id": 39253330, "comment_id": 65842861, "body": "you can&#39;t use relative paths in LDFLAGS, because the build happens in a different directory than the source. That&#39;s why I mentioned <code>{SRCDIR}</code> above`"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6169399"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1472657974, "post_id": 39253330, "comment_id": 65843428, "body": "@JimB both  <code>-L${SRCDIR}&#47;libs</code>  and <code>-L.&#47;libs</code>  works here for me, so edited to general case: <code>-L${SRCDIR}&#47;libs</code>.  Thanks."}, {"owner": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "edited": false, "score": 1, "creation_date": 1472657979, "post_id": 39253330, "comment_id": 65843431, "body": "Thanks, literally you have just made my day! Sorry for being dim its been a fair few years since I have done any C."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1472658189, "post_id": 39253330, "comment_id": 65843565, "body": "@Amd: it&#39;s probably because you&#39;re using <code>go build</code> with an assumed package of the current directory. You can&#39;t <code>go get</code> or <code>go install</code> with a relative path."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6169399"}, "is_accepted": true, "score": 2, "last_activity_date": 1472658156, "last_edit_date": 1472658156, "creation_date": 1472656519, "answer_id": 39253330, "question_id": 39251045, "link": "https://stackoverflow.com/questions/39251045/cannot-use-already-compiled-c-library-using-cgo-in-golang-application/39253330#39253330", "title": "Cannot use already compiled C library using cgo in Golang application?", "body": "<p>I'll explain it with this sample:</p>\n\n<p>First build <code>libhello.a</code> using <code>./libs/m.c</code>:</p>\n\n<pre><code>#include &lt;stdint.h&gt; \n\nextern uint64_t Add(uint64_t a, uint64_t b) {\n    return a + b;\n}\n</code></pre>\n\n<p>For this test sample <code>libhello.a</code> is inside <code>./libs/</code> :</p>\n\n<pre><code>m.go\n\u2514\u2500\u2500\u2500libs\n    m.c\n    libhello.a\n</code></pre>\n\n<hr>\n\n<p>Then <code>go build</code> this <code>m.go</code> working sample:</p>\n\n<pre><code>package main\n\n//#cgo LDFLAGS: -L${SRCDIR}/libs -lhello\n//#include &lt;stdint.h&gt;\n//extern uint64_t Add(uint64_t a, uint64_t b);\nimport \"C\"\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    fmt.Println(C.Add(C.uint64_t(10), C.uint64_t(20))) // 30\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>30\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>When the cgo directives are parsed, any occurrence of the string\n  ${SRCDIR} will be replaced by the absolute path to the directory\n  containing the source file. This allows pre-compiled static libraries\n  to be included in the package directory and linked properly. For\n  example if package foo is in the directory /go/src/foo:</p>\n\n<pre><code>// #cgo LDFLAGS: -L${SRCDIR}/libs -lfoo\n</code></pre>\n  \n  <p>Will be expanded to:</p>\n\n<pre><code>// #cgo LDFLAGS: -L/go/src/foo/libs -lfoo\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1483, "favorite_count": 0, "accepted_answer_id": 39253330, "answer_count": 1, "score": 0, "last_activity_date": 1472658156, "creation_date": 1472650240, "last_edit_date": 1472658056, "question_id": 39251045, "link": "https://stackoverflow.com/questions/39251045/cannot-use-already-compiled-c-library-using-cgo-in-golang-application", "title": "Cannot use already compiled C library using cgo in Golang application?", "body": "<p>I am trying to wrap a C library in Golang. I am trying to call a C function in an already compiled library. I have both a <code>.a</code> file and a <code>.so</code> library file. </p>\n\n<p>Where do I need to place the library files and how do i tell <code>cgo</code> that I am using these libraries?</p>\n\n<p>I am rather a novice when it comes to C. Any help would be greatly appreciated.</p>\n"}, {"tags": ["c", "dev-c++"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1472649787, "post_id": 39250803, "comment_id": 65837420, "body": "<a href=\"http://www.tutorialspoint.com/cprogramming/c_loops.htm\" rel=\"nofollow noreferrer\">Loops</a> are your friends ;)"}, {"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "edited": false, "score": 1, "creation_date": 1472649865, "post_id": 39250803, "comment_id": 65837469, "body": "Are you using <code>c</code> or <code>c++</code>? These are different languages"}, {"owner": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472649889, "post_id": 39250803, "comment_id": 65837490, "body": "thanx i got an idea now i will modify that question according to my need.. in future"}, {"owner": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472649904, "post_id": 39250803, "comment_id": 65837500, "body": "<code>c</code>  i am using c"}, {"owner": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472649922, "post_id": 39250803, "comment_id": 65837514, "body": "<a href=\"http://www.tutorialspoint.com/data_structures_algorithms/queue_program_in_c.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/data_structures_algorithms/&hellip;</a> is its a better idea"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1472650337, "post_id": 39250803, "comment_id": 65837815, "body": "Please provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example. As it stands now, it is unclear at which scope your array is defined (that matters)."}, {"owner": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472650613, "post_id": 39250803, "comment_id": 65838033, "body": "global defined array near name space and using this array in my function"}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1472649831, "creation_date": 1472649831, "answer_id": 39250880, "question_id": 39250803, "link": "https://stackoverflow.com/questions/39250803/check-how-many-items-added-in-c-array/39250880#39250880", "title": "Check how many items added in c array?", "body": "<p>You can initialize the array with a default value, e.g. <code>0</code>:</p>\n\n<pre><code>char northl2[100] = { 0 };\n</code></pre>\n\n<p>then after you <em>added</em> your <code>'1'</code> chars go through in a loop and increment a counter variable for each <code>'1'</code> you find.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472650184, "post_id": 39250893, "comment_id": 65837694, "body": "but wel done array in my prog is at global"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472650212, "post_id": 39250893, "comment_id": 65837711, "body": "You could use a loop, I will edit my answer"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472650360, "post_id": 39250893, "comment_id": 65837839, "body": "@MurshadGill Answer is edited"}, {"owner": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472650507, "post_id": 39250893, "comment_id": 65837957, "body": "good work this is done thankyou know at end can any body share me a link how to execute a function with thread in <code>c</code>"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472650641, "post_id": 39250893, "comment_id": 65838044, "body": "Er, if you found it correct, could you mark one of the answers correct by clicking the green checkmark icon on the left of the answer, so others can be helped with this answer? Also, your question is unclear @MurshadGill"}, {"owner": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472650725, "post_id": 39250893, "comment_id": 65838089, "body": "yes i marked it correct . but can you please help me with link that i demanded calling function using thread in <code>c</code>"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "edited": false, "score": 0, "creation_date": 1472651143, "post_id": 39250893, "comment_id": 65838408, "body": "See <a href=\"http://stackoverflow.com/a/29874111/6525260\">stackoverflow.com/a/29874111/6525260</a> @MurshadGill"}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 0, "last_activity_date": 1472650352, "last_edit_date": 1472650352, "creation_date": 1472649852, "answer_id": 39250893, "question_id": 39250803, "link": "https://stackoverflow.com/questions/39250803/check-how-many-items-added-in-c-array/39250893#39250893", "title": "Check how many items added in c array?", "body": "<p>You could use a loop like this:</p>\n\n<pre><code>char northl2[100] = {0};\n\nnorthl2[0]='1';\nnorthl2[1]='1';\nint count_one = 0;\nfor (int i = 0;i&lt;100;++i)\n{\n    if (northl2[i] == '1')\n    {\n        ++count_one;\n    }\n}\nstd::cout &lt;&lt; count_one;\n</code></pre>\n\n<p>This prints 2 in this case, because there are 2 <code>1</code>'s. The code iterates through each element of the arrays, checks it for a value, and increments its count. The <code>char northl2[100] = {0};</code> sets by-default each element to 0. If you need a different value, use a loop:</p>\n\n<pre><code>char northl2[100];\nint main()\n{\n    int count_one = 0;\n    for (int i = 0; i&lt; 100;++i)\n    {\n         northl2[i] = 'C'; //Or whatever char other than '1'\n    }\n    northl2[0]='1';\n    northl2[1]='1';\n    for (int i = 0;i&lt;100;++i)\n    {\n        if (northl2[i] == '1')\n        {\n            ++count_one;\n        }\n    }\n}\n</code></pre>\n\n<p>Also, don't forget to assign the 1's after the loop assigns values to all of the elements, or else, <strong>they will be overwritten</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1472650423, "last_edit_date": 1472650423, "creation_date": 1472650066, "answer_id": 39250976, "question_id": 39250803, "link": "https://stackoverflow.com/questions/39250803/check-how-many-items-added-in-c-array/39250976#39250976", "title": "Check how many items added in c array?", "body": "<p>The only way to keep the number of actual elements in an array that does not have a sentinel value is to define a variable that will store the number of actual values in the array.</p>\n\n<p>Take into account that if this declaration</p>\n\n<pre><code>char northl2[100];\n</code></pre>\n\n<p>is a block scope declaration then the array is not initialized and has indeterminate values.</p>\n\n<p>If you are storing values in a character array as a string (that is the array has sentinel value <code>'\\0'</code>)then you can just apply standard C function <code>std::strlen</code>.</p>\n\n<p>You could define the array the following way</p>\n\n<pre><code>char northl2[100] = {};\n</code></pre>\n\n<p>initially initializing all elements of the array to zeroes.</p>\n\n<p>In this case you could write</p>\n\n<pre><code>char northl2[100] = {};\n\nnorthl2[0] = '1';\nnorthl2[1] = '1';\n\n//...\n\nstd::cout &lt;&lt; \"The number of added values to the array is \" \n          &lt;&lt; std::strlen( northl2 )\n          &lt;&lt; std::endl;\n</code></pre>\n\n<p>provided that values are added sequentially without gaps in the array.  </p>\n"}], "owner": {"reputation": 39, "user_id": 6778963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f08abbffbdaa643d7c5a1b407d1e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Murshad Gill", "link": "https://stackoverflow.com/users/6778963/murshad-gill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 2, "closed_date": 1472799349, "accepted_answer_id": 39250893, "answer_count": 3, "score": 0, "last_activity_date": 1472650423, "creation_date": 1472649623, "last_edit_date": 1472650376, "question_id": 39250803, "link": "https://stackoverflow.com/questions/39250803/check-how-many-items-added-in-c-array", "closed_reason": "Needs details or clarity", "title": "Check how many items added in c array?", "body": "<p>I have declared a c array of length 100.  Now, I place char's into it like this:</p>\n\n<pre><code>char northl2[100];\n\nnorthl2[0]='1';\nnorthl2[1]='1';\n</code></pre>\n\n<p>How can I count the number of 1's my program placed into the array?</p>\n"}, {"tags": ["c", "goto"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1472649660, "post_id": 39250587, "comment_id": 65837326, "body": "How can it find the closing bracket of the open one? The compiler is multi-pass, even though it&#39;s &quot;top-down&quot;."}, {"owner": {"reputation": 28011, "user_id": 417292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3520ad50fa42c9319830bd9f0900c5d?s=128&d=identicon&r=PG", "display_name": "jcoder", "link": "https://stackoverflow.com/users/417292/jcoder"}, "edited": false, "score": 1, "creation_date": 1472650235, "post_id": 39250587, "comment_id": 65837727, "body": "It can just store zero and  make a note that it needs to fill in the proper address later, and when it later on sees the label go back and fill in the address."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1472650305, "post_id": 39250587, "comment_id": 65837790, "body": "You seem to be trying to fit C semantics to a pre-conceived model (&quot;top-down&quot;, whatever that means to you) instead of adapting your model to C&#39;s actual semantics.  To the extent that C being top-down would prevent <code>goto</code> branching to a label that appears later in the source, C is not top-down."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1472766197, "post_id": 39250587, "comment_id": 65897046, "body": "Because compilers do two passes through the source code."}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 6778919, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1285904631444230/picture?type=large", "display_name": "Harikrishnan V Nair", "link": "https://stackoverflow.com/users/6778919/harikrishnan-v-nair"}, "edited": false, "score": 0, "creation_date": 1472650106, "post_id": 39250832, "comment_id": 65837641, "body": "is it that the older compilers don&#39;t do, but the newer compiler do..?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 159, "user_id": 6778919, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1285904631444230/picture?type=large", "display_name": "Harikrishnan V Nair", "link": "https://stackoverflow.com/users/6778919/harikrishnan-v-nair"}, "edited": false, "score": 0, "creation_date": 1472650446, "post_id": 39250832, "comment_id": 65837910, "body": "@HarikrishnanVNair No, C has worked like that for a long time. It is not generally using single-pass compilers as far as I know."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 159, "user_id": 6778919, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1285904631444230/picture?type=large", "display_name": "Harikrishnan V Nair", "link": "https://stackoverflow.com/users/6778919/harikrishnan-v-nair"}, "edited": false, "score": 0, "creation_date": 1472650479, "post_id": 39250832, "comment_id": 65837936, "body": "@HarikrishnanVNair, <code>goto</code> has been in C from the beginning.  It has always worked as it now does.  Even the very first C compilers handled forward branches, as indeed BASIC and Fortran compilers, among others, also do."}, {"owner": {"reputation": 159, "user_id": 6778919, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1285904631444230/picture?type=large", "display_name": "Harikrishnan V Nair", "link": "https://stackoverflow.com/users/6778919/harikrishnan-v-nair"}, "edited": false, "score": 0, "creation_date": 1472654696, "post_id": 39250832, "comment_id": 65841154, "body": "I just confused it with the transfer of control to function definition from a function call. A function definition should be defined above the function call, because then only the compiler knows the address of the function defintion to jump to. Isn&#39;t that right? Why won&#39;t the same apply to goto-label also ?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 159, "user_id": 6778919, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1285904631444230/picture?type=large", "display_name": "Harikrishnan V Nair", "link": "https://stackoverflow.com/users/6778919/harikrishnan-v-nair"}, "edited": false, "score": 0, "creation_date": 1472655110, "post_id": 39250832, "comment_id": 65841454, "body": "@HarikrishnanVNair No, that is not right. It should be <i>declared</i>, so the compiler can check that the call has the proper types for all arguments (and the return value), but that does <i>not</i> mean that the address of the target function has to be known. Read up on &quot;linking&quot;."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1472649699, "creation_date": 1472649699, "answer_id": 39250832, "question_id": 39250587, "link": "https://stackoverflow.com/questions/39250587/how-can-a-goto-find-the-address-of-label-if-it-appears-below-the-goto-statement/39250832#39250832", "title": "How can a goto find the address of label if it appears below the goto statement?", "body": "<p>No, there's no requirement that C programs be compiled in a single pass, or just get to look at the source once.</p>\n\n<p>You can even call functions without knowing where they are, trusting the linker to resolve the symbol (much) later than when you run the compiler.</p>\n"}], "owner": {"reputation": 159, "user_id": 6778919, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1285904631444230/picture?type=large", "display_name": "Harikrishnan V Nair", "link": "https://stackoverflow.com/users/6778919/harikrishnan-v-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472649699, "creation_date": 1472649042, "question_id": 39250587, "link": "https://stackoverflow.com/questions/39250587/how-can-a-goto-find-the-address-of-label-if-it-appears-below-the-goto-statement", "title": "How can a goto find the address of label if it appears below the goto statement?", "body": "<p>When a label is placed below the goto statement, how does the compiler find the address of label to jump? C programming is a top-down approach right ?\nIf the label is above the goto statement, it is understandable that the address of label is known while it has reached the goto statement. Anyone please explain..</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "serial-port", "linux-device-driver"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1472656253, "post_id": 39250372, "comment_id": 65842262, "body": "You didn&#39;t give a clue what the board is (some technical specifications, URL to them). It might be easier way to update Device Tree (ARM), or ACPI (x86) to support them. Also would be nice to see the commits you made on top of existing kernel sources (1. Cloned linux-3.2.y from linux-stable. 2. Pushed non-modified driver. 3. Apply patch to enable it in this kernel.)."}, {"owner": {"reputation": 823, "user_id": 3407841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb5d2d69fa2669def7490ac607e0515?s=128&d=identicon&r=PG&f=1", "display_name": "leetibbett", "link": "https://stackoverflow.com/users/3407841/leetibbett"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1472657225, "post_id": 39250372, "comment_id": 65842916, "body": "Hi @AndyShevchenko thanks for reading. The duarts are mounted on a custom board that I can&#39;t share. I would love to build a kernel, but I have no experience with that yet so for now I&#39;ve just built sccnxp as a module and loaded it with <code>insmod</code>. That part is working but only for the first duart. My question is more about how to set up the resources and platform_device to make the driver load two copies of the devices at two different IO ports."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1472661510, "post_id": 39250372, "comment_id": 65845419, "body": "You <b>have to</b> share any modification to GPL code you did. But let&#39;s speak engineer&#39;s language. You don&#39;t need to share <b>everything</b>, just parts related to UART driver."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1472661567, "post_id": 39250372, "comment_id": 65845455, "body": "Maybe first is good to get familiar with Git and kernel development work flow..."}], "answers": [{"tags": [], "owner": {"reputation": 823, "user_id": 3407841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb5d2d69fa2669def7490ac607e0515?s=128&d=identicon&r=PG&f=1", "display_name": "leetibbett", "link": "https://stackoverflow.com/users/3407841/leetibbett"}, "is_accepted": true, "score": 0, "last_activity_date": 1478198801, "creation_date": 1478198801, "answer_id": 40409088, "question_id": 39250372, "link": "https://stackoverflow.com/questions/39250372/configure-kernel-driver-for-two-sc2681-duarts/40409088#40409088", "title": "Configure kernel driver for Two SC2681 DUARTs", "body": "<p>I am going to answer my own question just in case the next reader needs the information.  The answer is that it's only possible if the driver already supports it.</p>\n\n<p>I built a customized kernel off of 4.8 but that cost a lot of time and disk space, and was not the answer.  I still worked in a loadable module because a kernel build and install cycle is long in comparison.  I couldn't find any recent, helpful resources related to x86 device trees and my legacy board doesn't support ACPI.  In short there was no way to \"configure\" the driver into loading twice for two separate chips.</p>\n\n<p>Having all of the kernel source code, I thought the answer must be somewhere.  I found another serial driver that had similar functionality to what I needed (sb1250-duart.c) and used it as an example.  I changed the probe function to expect and configure multiple chips off of configuration data.  The fault in my original thinking was trying to register two separate platform devices during init, but the solution was to register a single platform device during init and register multiple UART drivers (and ports) in the probe function.</p>\n\n<p>I'd also like to address the GPL comments.  <a href=\"https://www.gnu.org/licenses/gpl-faq.html#GPLRequireSourcePostedPublic\" rel=\"nofollow noreferrer\">GNU's GPL FAQ</a> specifically states that you do not have to release your modified version unless you are releasing any of it to the public, which I am not.  This is purely an in-house project.  However after this experience I do want to share my changes, so after I clean out the company- and platform-specific bits I will push a patch to make this driver support multiple DUARTs.</p>\n"}], "owner": {"reputation": 823, "user_id": 3407841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb5d2d69fa2669def7490ac607e0515?s=128&d=identicon&r=PG&f=1", "display_name": "leetibbett", "link": "https://stackoverflow.com/users/3407841/leetibbett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 40409088, "answer_count": 1, "score": 0, "last_activity_date": 1478198801, "creation_date": 1472648395, "question_id": 39250372, "link": "https://stackoverflow.com/questions/39250372/configure-kernel-driver-for-two-sc2681-duarts", "title": "Configure kernel driver for Two SC2681 DUARTs", "body": "<p>I'm new at kernel development.  I have Lubuntu 12.04 (uname -r == 3.2.0-107-generic) running on a Geode-based PC/104 board.  The CPU does not support PAE, so 12.04 is where I'm at.  There is an I/O board that has two SC2681 DUARTs on it.  They are at ports 0x100 and 0x110 respectvely and both use IRQ 15.</p>\n\n<p>I copied the <a href=\"http://lxr.free-electrons.com/source/drivers/tty/serial/sccnxp.c?v=3.10\" rel=\"nofollow\">sccnxp driver from a newer kernel (3.10)</a> and modified it to work under this kernel.  Here is my initialization data:</p>\n\n<pre><code>static struct resource sc2681_0_resources[] = {\n        DEFINE_RES_IO(0x100, 0x10),\n        DEFINE_RES_IRQ(15),\n  };\n\nstatic struct sccnxp_pdata sc2681_0_info = {\n        .frequency      = 3686400,\n  };\n\nstatic struct platform_device sc2681_0 = {\n    .name       = \"sc2681\",\n    .id     = -1,\n    .resource   = sc2681_0_resources,\n    .num_resources  = ARRAY_SIZE(sc2681_0_resources),\n    .dev = {\n        .platform_data  = &amp;sc2681_0_info,\n    },\n};\n</code></pre>\n\n<p>I also added an __init that contains:</p>\n\n<pre><code>platform_device_register(&amp;sc2681_0);\nif ((ret = platform_driver_register(&amp;sccnxp_uart_driver)))\n{\nplatform_device_unregister(&amp;sc2681_0);\nreturn -EINVAL;\n}\nreturn 0;\n</code></pre>\n\n<p>and an __exit that contains:</p>\n\n<pre><code>platform_driver_unregister(&amp;sccnxp_uart_driver);\nplatform_device_unregister(&amp;sc2681_0);\n</code></pre>\n\n<p>The driver is set up to handle 2 uarts.  This loads and creates /dev/ttySC0 and /dev/ttySC1.  How do I make this load the second DUART at port 0x110?</p>\n"}, {"tags": ["c", "memory-management", "rust", "allocation"], "comments": [{"owner": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "edited": false, "score": 0, "creation_date": 1472649673, "post_id": 39250335, "comment_id": 65837339, "body": "<a href=\"https://www.reddit.com/r/rust/comments/2eqdg2/allocate_a_vec_on_cs_heap/\" rel=\"nofollow noreferrer\">reddit.com/r/rust/comments/2eqdg2/allocate_a_vec_on_cs_heap</a>  There are some thoughts on a similar topic, although the allocations lifetime management may be tricky."}, {"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 1, "creation_date": 1472651607, "post_id": 39250335, "comment_id": 65838804, "body": "As you point out, that topic is about making Rust use the same allocator as C. That&#39;s possible with <a href=\"https://doc.rust-lang.org/stable/book/custom-allocators.html\" rel=\"nofollow noreferrer\">custom allocators</a>."}], "answers": [{"comments": [{"owner": {"reputation": 10655, "user_id": 4529124, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4P3eZ.png?s=128&g=1", "display_name": "Chris Emerson", "link": "https://stackoverflow.com/users/4529124/chris-emerson"}, "edited": false, "score": 2, "creation_date": 1472650859, "post_id": 39250805, "comment_id": 65838200, "body": "You could in principle also store the allocation sizes in a <code>HashMap</code> or similar. I&#39;m not sure you&#39;d gain anything over overallocating and storing in the allocation, though (except for a better chance of detecting a bad <code>free</code> from the C side)."}, {"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "reply_to_user": {"reputation": 10655, "user_id": 4529124, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4P3eZ.png?s=128&g=1", "display_name": "Chris Emerson", "link": "https://stackoverflow.com/users/4529124/chris-emerson"}, "edited": false, "score": 2, "creation_date": 1472651493, "post_id": 39250805, "comment_id": 65838707, "body": "@ChrisEmerson good point! However, when I&#39;ve tried similar things in the past, I&#39;ve experienced abnormally poor performance. Without knowing exactly why, I think it has to do with poor cache locality. Multiple threads is also more painful with a shared collection."}, {"owner": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "edited": false, "score": 0, "creation_date": 1472998941, "post_id": 39250805, "comment_id": 65967807, "body": "UPD: Here is where I faced the C&#39;s unsafety. The called library code was using my <b>free_ext</b> implementation with a null pointer, so I had to add its check explicitly:      <code>if old.is_null() {      \tprintln!(&quot;no dealloc for empty pointer&quot;);     \treturn;     }     </code>"}, {"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "reply_to_user": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "edited": false, "score": 0, "creation_date": 1473014808, "post_id": 39250805, "comment_id": 65972712, "body": "@snuk182 I actually edited that in a few days ago ;-)"}, {"owner": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "edited": false, "score": 1, "creation_date": 1473015639, "post_id": 39250805, "comment_id": 65972938, "body": "Btw, <a href=\"http://github.com/rust-lang/rust/issues/27700#issuecomment-16901471%E2%80%8C%E2%80%8B3\" rel=\"nofollow noreferrer\">Vec as allocator</a> approach also works. May be useful to the ones who don&#39;t want or cannot use unstable API."}, {"owner": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "edited": false, "score": 1, "creation_date": 1506611906, "post_id": 39250805, "comment_id": 79900495, "body": "Also, as <a href=\"https://github.com/rust-lang/rust/issues/32838\" rel=\"nofollow noreferrer\">new allocator API</a> has been introduced, the answer is also <a href=\"https://github.com/snuk182/nuklear-rust/commit/ca24f6ab463650f092ad98e5c8d7ae142d5dd8fd\" rel=\"nofollow noreferrer\">modified a bit</a>."}], "tags": [], "owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "is_accepted": true, "score": 6, "last_activity_date": 1472662683, "last_edit_date": 1472662683, "creation_date": 1472649626, "answer_id": 39250805, "question_id": 39250335, "link": "https://stackoverflow.com/questions/39250335/how-do-i-use-the-rust-memory-allocator-for-a-c-library-that-can-be-provided-an-a/39250805#39250805", "title": "How do I use the Rust memory allocator for a C library that can be provided an allocator?", "body": "<p>It's not as easy as you might like.</p>\n\n<p>The allocation methods are exposed in the <a href=\"https://doc.rust-lang.org/alloc/heap/index.html\" rel=\"nofollow\"><code>heap</code> module of the <code>alloc</code> crate</a>.</p>\n\n<p>Creating some wrapper methods and populating the struct is straight-forward, but we quickly run into an issue:</p>\n\n<pre><code>#![feature(heap_api)]\n\nextern crate libc;\nextern crate alloc;\n\nuse libc::{c_void, c_uint};\nuse alloc::heap;\n\n#[repr(C)]\n#[derive(Copy, Clone, Debug, PartialEq)]\npub struct Allocator {\n    alloc: Option&lt;extern \"C\" fn(*mut c_void, c_uint) -&gt; *mut c_void&gt;,\n    free: Option&lt;extern \"C\" fn(*mut c_void)&gt;,\n}\n\n\nextern \"C\" fn alloc_ext(old: *mut c_void, size: c_uint) -&gt; *mut c_void {\n    if old.is_null() {\n        heap::allocate(size as usize, align) as *mut c_void\n    } else {\n        heap::reallocate(old as *mut u8, old_size, size as usize, align) as *mut c_void\n    }\n}\n\nextern \"C\" fn free_ext(old: *mut c_void) {\n    heap::deallocate(old as *mut u8, old_size, align);\n}\n\nfn main() {\n    Allocator {\n        alloc: Some(alloc_ext),\n        free: Some(free_ext),\n    };\n}\n</code></pre>\n\n<p>The Rust allocator expects to be told the size of any previous allocation as well as the desired alignment. The API you are matching doesn't have any way of passing that along.</p>\n\n<p>Alignment <em>should</em> (I'm not an expert) be OK to hardcode at some value, say 16 bytes. The size is trickier. You will likely need to steal some old C tricks and allocate a little bit extra space to store the size in. You can then store the size and return a pointer just past that.</p>\n\n<p>A <strong>completely untested</strong> example:</p>\n\n<pre><code>#![feature(alloc, heap_api)]\n\nextern crate libc;\nextern crate alloc;\n\nuse libc::{c_void, c_uint};\nuse alloc::heap;\nuse std::{mem, ptr};\n\n#[repr(C)]\n#[derive(Copy, Clone, Debug, PartialEq)]\npub struct Allocator {\n    alloc: Option&lt;extern \"C\" fn(*mut c_void, c_uint) -&gt; *mut c_void&gt;,\n    free: Option&lt;extern \"C\" fn(*mut c_void)&gt;,\n}\n\nconst ALIGNMENT: usize = 16;\n\nextern \"C\" fn alloc_ext(old: *mut c_void, size: c_uint) -&gt; *mut c_void {\n    unsafe {\n        // Should check for integer overflow\n        let size_size = mem::size_of::&lt;usize&gt;();\n        let size = size as usize + size_size;\n\n        let memory = if old.is_null() {\n            heap::allocate(size, ALIGNMENT)\n        } else {\n            let old = old as *mut u8;\n            let old = old.offset(-(size_size as isize));\n            let old_size = *(old as *const usize);\n            heap::reallocate(old, old_size, size, ALIGNMENT)\n        };\n\n        *(memory as *mut usize) = size;\n        memory.offset(size_size as isize) as *mut c_void\n    }\n}\n\nextern \"C\" fn free_ext(old: *mut c_void) {\n    if old.is_null() { return }\n\n    unsafe {\n        let size_size = mem::size_of::&lt;usize&gt;();\n\n        let old = old as *mut u8;\n        let old = old.offset(-(size_size as isize));\n        let old_size = *(old as *const usize);\n\n        heap::deallocate(old as *mut u8, old_size, ALIGNMENT);\n    }\n}\n\nfn main() {\n    Allocator {\n        alloc: Some(alloc_ext),\n        free: Some(free_ext),\n    };\n\n    let pointer = alloc_ext(ptr::null_mut(), 54);\n    let pointer = alloc_ext(pointer, 105);\n    free_ext(pointer);\n}\n</code></pre>\n\n<blockquote>\n  <p>Isn't [... <a href=\"http://github.com/rust-lang/rust/issues/27700#issuecomment-16901471%E2%80%8C%E2%80%8B3\" rel=\"nofollow\">using <code>Vec</code> as an allocator</a> ...] the more high-level solution? </p>\n</blockquote>\n\n<p>That's certainly possible, but I'm not completely sure how it would work with reallocation. You'd also have to keep track of the size and capacity of the <code>Vec</code> in order to reconstitute it to reallocate / drop it.</p>\n"}], "owner": {"reputation": 944, "user_id": 817019, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xhltk.jpg?s=128&g=1", "display_name": "snuk182", "link": "https://stackoverflow.com/users/817019/snuk182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "accepted_answer_id": 39250805, "answer_count": 1, "score": 6, "last_activity_date": 1472662683, "creation_date": 1472648293, "last_edit_date": 1472648813, "question_id": 39250335, "link": "https://stackoverflow.com/questions/39250335/how-do-i-use-the-rust-memory-allocator-for-a-c-library-that-can-be-provided-an-a", "title": "How do I use the Rust memory allocator for a C library that can be provided an allocator?", "body": "<p>I'm writing Rust bindings to a C library which has the option to use a third-party memory allocator. Its interface looks like this:</p>\n\n<pre><code>struct allocator {\n    void*(*alloc)(void *old, uint);\n    void(*free)(void*);\n};\n</code></pre>\n\n<p>The corresponding Rust struct is, I guess, the following:</p>\n\n<pre><code>#[repr(C)]\n#[derive(Copy, Clone, Debug, PartialEq)]\npub struct Allocator {\n    alloc: Option&lt;extern \"C\" fn(*mut c_void, c_uint) -&gt; *mut c_void&gt;,\n    free: Option&lt;extern \"C\" fn(*mut c_void)&gt;,\n}\n</code></pre>\n\n<p>How can I implement these two extern functions that should mimic the allocator? I did not find anything really looking like the allocator API in Rust (I understand why however), so I'm curious if it is possible.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1472649401, "post_id": 39250263, "comment_id": 65837140, "body": "Simple solution: you can use an array where index is the key pressed and the item value is an enum of notes used into the switch. Best using array of struct."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1472650095, "post_id": 39250263, "comment_id": 65837635, "body": "Sidetone: Hmm... &quot;A&quot; normally represents the C note and (&quot;W&quot; == C#, &quot;S&quot; == D)... an octave switch would be far more effective (octave up normally maps to X and octave down normally maps to Z)."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1472649933, "creation_date": 1472649933, "answer_id": 39250923, "question_id": 39250263, "link": "https://stackoverflow.com/questions/39250263/c-swapping-musical-keyboard-notes-using-call-by-reference/39250923#39250923", "title": "C: Swapping musical keyboard notes using call by reference", "body": "<blockquote>\n  <p>I still need to demonstrate knowledge pointer use and function call by reference.</p>\n</blockquote>\n\n<p>C does not have call by reference.  Presumably your teacher wants you to demonstrate providing data to a function by passing a pointer to that data, but if he really called that \"pass by reference\" then he was sloppy.  C provides for passing pointers by value -- that has a similar effect, but it's not quite the same thing.</p>\n\n<blockquote>\n  <p>My plan is to create a function that can swap the musical notes in Option 2 (i.e Digital keyboard).</p>\n</blockquote>\n\n<p>That seems both a little weird and potentially tricky.  Allow me to suggest an alternative: create a function that plays songs, and that receives the notes to play via a pointer to an array (or two) of them.  Add a second song to your program's repertoire (e.g. \"Mary Had a Little Lamb\"), so that you can use the same function to play your choice of those songs depending on that function's arguments.</p>\n\n<p>The prototype for such a function might look like this:</p>\n\n<pre><code>void play_song(float *pitch, int *duration, int num_notes);\n</code></pre>\n\n<p>You would combine that with arrays of pitches and notes, such as:</p>\n\n<pre><code>float twinkle_pitch[TWINKLE_NUM_NOTES] =\n        { 261.63, 261.63, 392.00, 392.00, /* etc */ };\nint twinkle_duration[TWINKLE_NUM_NOTES] =\n        {    600,    600,    600,    600, /* etc */ };\n/* and similar for one or more other songs */\n</code></pre>\n\n<p>Your main program would play a selected song by calling the function, for example,</p>\n\n<pre><code>play_song(twinkle_pitch, twinkle_duration, TWINKLE_NUM_NOTES);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 441, "user_id": 6776860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6e7ab81e61389cca67d10c5c779777?s=128&d=identicon&r=PG&f=1", "display_name": "barcelona_delpy", "link": "https://stackoverflow.com/users/6776860/barcelona-delpy"}, "is_accepted": false, "score": 0, "last_activity_date": 1472651337, "creation_date": 1472651337, "answer_id": 39251504, "question_id": 39250263, "link": "https://stackoverflow.com/questions/39250263/c-swapping-musical-keyboard-notes-using-call-by-reference/39251504#39251504", "title": "C: Swapping musical keyboard notes using call by reference", "body": "<p>In C, all function arguments are passed ``by value.'' This means that the called function is given the values of its arguments in temporary variables rather than the originals.</p>\n\n<p>The only way to achieve call by reference is use pointers as argument of function.</p>\n\n<p>example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid call_by_value_inc(int formal_argument)\n{\n    ++formal_argument;\n    return;\n}\n\n\n\nvoid call_by_reference_inc(int *formal_argument)\n{\n    ++(*formal_argument);\n    return;\n}\n\nint main()\n{\n    int actual_argument = 1;\n    call_by_value_inc(actual_argument);\n    /*after invoke call_by_value_inc,the actual_argument's value still be 1*/\n    printf(\"actual_argument %d\\n\", actual_argument);\n\n    call_by_reference_inc(&amp;actual_argument);\n    /*after invoke call_by_value_inc,the actual_argument's value will be 2*/\n    printf(\"actual_argument %d\\n\", actual_argument);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6772868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530a0c4a0879bb12dbf2451648d60f59?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Pradana Putra", "link": "https://stackoverflow.com/users/6772868/eric-pradana-putra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1472651337, "creation_date": 1472648109, "last_edit_date": 1472648980, "question_id": 39250263, "link": "https://stackoverflow.com/questions/39250263/c-swapping-musical-keyboard-notes-using-call-by-reference", "title": "C: Swapping musical keyboard notes using call by reference", "body": "<p>I need to make a C program which provides for users to play a song and create a song via PC keyboard.  My teacher was satisfied enough with my code below and the output produced from it, but he said that I still need to demonstrate knowledge <strong>pointer</strong> use and <strong>function call by reference</strong> in order to pass the subject.</p>\n\n<p>My plan is to create a function that can swap the musical notes in Option 2 (i.e Digital keyboard). For example, Q ordinarily represents a C note and W represents a C sharp (C#) note, but I want the user to have the ability to swap between the two letters, making Q represents C# note and W represents C note.</p>\n\n<p>So the question is, starting from the code below, how can I provide for the user to swap the musical notes in Option 2, and how can I make use of call by reference for that purpose?  I think the selection structure I used in this coding (i.e switch..break) is not suitable if I want to continue to use call by reference but I literally do not know how to start.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;         /* The windows.h library define the beep() and sleep() functions. */\n\nint main()                   /* The function main */\n{\nchar ch;\ndo                       /* The loop do..while is used so that the program continuously prompt the user to make a choice. */\n{\n    printf(\"\\nMain Menu\\n\");\n    printf(\"_________\\n\\n\");\n    printf(\"1- Play 'Twinkle Twinkle Little Star'.\\n\");\n    printf(\"2- Digital keyboard.\\n\");\n    printf(\"3- Exit this program.\\n\\n\");\n    printf(\"Your choice &gt;&gt;&gt; \");\n    scanf(\" %c\", &amp;ch);\n    if (ch =='1') {       /* The user is given an arithmetic choice from 1 until 3. */\n        printf(\"\\nNow playing 'Twinkle Twinkle Little Star'\");\n        fflush(stdout);\n        Beep (261.63,600);Beep (261.63,600);Beep (392.00,600);Beep (392.00,600);Beep (440.00,600);Beep (440.00,600);Beep (392.00,600);\n        Sleep(800);\n        Beep (349.23,600);Beep (349.23,600);Beep (329.63,600);Beep (329.63,600);Beep (293.66,600);Beep (293.66,600);Beep (261.63,600);\n        Sleep(800);\n        Beep (392.00,600);Beep (392.00,600);Beep (349.23,600);Beep (349.23,600);Beep (329.63,600);Beep (329.63,600);Beep (293.66,600);\n        Sleep(800);\n        Beep (392.00,600);Beep (392.00,600);Beep (349.23,600);Beep (349.23,600);Beep (329.63,600);Beep (329.63,600);Beep (293.66,600);\n        Sleep(800);\n        Beep (261.63,600);Beep (261.63,600);Beep (392.00,600);Beep (392.00,600);Beep (440.00,600);Beep (440.00,600);Beep (392.00,600);\n        Sleep(800);\n        Beep (349.23,600);Beep (349.23,600);Beep (329.63,600);Beep (329.63,600);Beep (293.66,600);Beep (293.66,600);Beep (261.63,600);\n        printf(\"\\nChoose 1 to play again.\");\n        }\n    else if (ch =='2') {\n        char m, filename[100];      /* The array declaration of variable that holds the name of the user's file. */\n        printf(\"\\nThis is a digital keyboard.\\n\\n\");\n        printf(\"Please enter any UPPERCASE letters and press 'Enter' to play some notes.\\n\");\n        printf(\"Please don't enter any other characters besides the representations.\\n\");\n        printf(\"Using other characters would make no sound.\\n\\n\");\n\n        printf(\"Use number '1' to delay the notes for 0.5 seconds.\\n\");\n        printf(\"To return to main menu, please enter number '0'\\n\");\n        printf(\"Using numbers other than '0' and '1' would make no sound.\\n\\n\");\n\n        printf(\"The notes you have played also will be saved in a file.\\n\");\n        printf(\"Please enter your file name:\\n\\n\");\n        fflush(stdin);\n        gets(filename);\n        FILE *thefile;\n        thefile = fopen(filename,\"w\");\n        if (thefile == NULL)\n        {\n            printf(\"File fail to open\\n\");\n        }\n\n        printf(\"\\nRepresentation:\\n\\n\");\n        printf(\"Q -&gt; C    |  W -&gt; C#   |  E -&gt; D    |  R -&gt; D#   |  T -&gt; E    |  Y -&gt; F \\n\\n\");\n        printf(\"U -&gt; F#   |  I -&gt; G    |  O -&gt; G#   |  P -&gt; A    |  A -&gt; A#   |  S -&gt; B \\n\\n\");\n        printf(\"D -&gt; C1   |  F -&gt; C1#  |  G -&gt; D1   |  H -&gt; D1#  |  J -&gt; E1   |  K -&gt; F1 \\n\\n\");\n        printf(\"L -&gt; F1#  |  Z -&gt; G1   |  X -&gt; G1#  |  C -&gt; A1   |  V -&gt; A1#  |  B -&gt; B1 \\n\\n\");\n        printf(\"\\t\\t\\t  N -&gt; C2   |  M -&gt; C2# \\n\\n\");\n\n/* I plan to make the swapping at here */\n\n        do\n        {\n            scanf(\"%c\",&amp;m);\n            switch(m)\n            {\n            case 'Q' : Beep (261.63,600);break;\n            case 'W' : Beep (277.18,600);break;\n            case 'E' : Beep (293.66,600);break;\n            case 'R' : Beep (311.13,600);break;\n            case 'T' : Beep (329.63,600);break;\n            case 'Y' : Beep (349.23,600);break;\n            case 'U' : Beep (369.99,600);break;\n            case 'I' : Beep (392.00,600);break;\n            case 'O' : Beep (415.30,600);break;\n            case 'P' : Beep (440.00,600);break;\n            case 'A' : Beep (466.16,600);break;\n            case 'S' : Beep (493.88,600);break;\n            case 'D' : Beep (523.25,600);break;\n            case 'F' : Beep (554.37,600);break;\n            case 'G' : Beep (587.33,600);break;\n            case 'H' : Beep (622.25,600);break;\n            case 'J' : Beep (659.25,600);break;\n            case 'K' : Beep (698.46,600);break;\n            case 'L' : Beep (739.99,600);break;\n            case 'Z' : Beep (783.99,600);break;\n            case 'X' : Beep (830.61,600);break;\n            case 'C' : Beep (880.00,600);break;\n            case 'V' : Beep (932.33,600);break;\n            case 'B' : Beep (987.77,600);break;\n            case 'N' : Beep (1046.50,600);break;\n            case 'M' : Beep (1108.73,600);break;\n            case '1' : Sleep(500);break;\n            }\n            fputc(m, thefile); /* This will put all the character values that entered by the user into a file. */\n        }\n        while(m!='0');         /* Users can continue inserting characters until they insert zero.  */\n        fclose(thefile);\n    }\n    else if (ch =='3')\n        break;\n    else\n        printf(\"Invalid character.\\n\"); /* This will prevent the user from entering irregular input. */\n\n    }\n    while(ch != '3');        /* A sentinel value of 3 allow the user to quit the program. */\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-device-driver", "ioctl"], "comments": [{"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 1, "creation_date": 1472647690, "post_id": 39249962, "comment_id": 65835918, "body": "Can you show us the app space code from where <code>ioctl</code> is invoked and also the kernel space code on how you register you ioctl, the module init function?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1472721946, "post_id": 39249962, "comment_id": 65869958, "body": "Can you tell us what arguments you got?"}, {"owner": {"reputation": 13, "user_id": 6778648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2e99099b416df2c79c069f4d133076?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik KP", "link": "https://stackoverflow.com/users/6778648/karthik-kp"}, "edited": false, "score": 0, "creation_date": 1472722298, "post_id": 39249962, "comment_id": 65870234, "body": "I have solved the issue .It was a stupid error I did while calling  ioctl function from my program"}], "owner": {"reputation": 13, "user_id": 6778648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2e99099b416df2c79c069f4d133076?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik KP", "link": "https://stackoverflow.com/users/6778648/karthik-kp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 482, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472725952, "creation_date": 1472647242, "last_edit_date": 1472725952, "question_id": 39249962, "link": "https://stackoverflow.com/questions/39249962/how-to-write-linux-driver-ioctl-routine", "title": "How to write Linux driver IOCTL routine?", "body": "<p>I have a Input output card which I am connecting to My PC through PCIe\nInterface.</p>\n\n<p>I have written a driver for linux to access the device this is IOCTL\nroutine.</p>\n\n<pre><code>static int _ioctl(struct inode *inode, struct file *file,\n                              unsigned int cmd, unsigned long arg)\n{\n  U32 temp;\n  U32 Add = 0;\n  U32 Data = 0;\n  U32 nCmd = 0;\n\n       // __get_user(nCmd,(int *)cmd)); \n    switch ( cmd )\n    {\n        case NOOFCARDS:\n            __put_user(NumberOfCards,(U32 *)arg);\n            break;\n\n        case IOMEMORY:\n            temp = pci1553[0].Mem1;\n            __put_user(temp,(U32 *)arg);\n                     printk(\"IOMEMORY :%x\\n\",temp);\n            break;\n\n        case IOPORTS:\n            temp = pci1553[CardCount].Mem4;\n//          temp = PCI_BASE_ADDRESS[3];\n            __put_user(temp,(U32 *)arg);\n            break;\n\n        case DEVICEID:\n            printk(\"DEVICE_ID :%x\\n\",DEVICE_ID);\n\n            temp = DEVICE_ID;\n            __put_user(temp,(U32 *)arg);\n            break;\n\n        case VENDORID:\n            printk(\"VENDOR_ID :%x\\n\",VENDOR_ID);\n            temp = VENDOR_ID;\n            __put_user(temp,(U32 *)arg);\n            break;\n\n        case BUSNO:\n            temp = pci1553[CardCount].BusNum;\n            __put_user(temp,(U32 *)arg);\n            break;\n        case READ16IO:\n             __get_user(Add,(U32 *)arg);\n                 temp =  inw(pci1553[CardCount].Mem4 + Add);\n             __put_user(temp,(U32 *)arg);\n                break;\n        case READ8IO:\n              __get_user(Add,(U32 *)arg);\n              temp =  inb(pci1553[CardCount].Mem4 + Add);\n              __put_user(temp,(U8 *)arg);\n              break;\n\n        case WRITE16IO:\n             __get_user(Add,(U32 *)(arg + 0));\n                 __get_user(Data,(U32 *)(arg + 4));\n                 outw(Data,pci1553[CardCount].Mem4 + Add);\n//          printk(\"W16IO Add:%x\\n\",Add);\n//          printk(\"W16IO MemAdd:%x\\n\",pci1553[CardCount].Mem4 + Add);\n//          printk(\"W16IO Data:%x\\n\",Data);\n//              temp =  inw(pci1553[CardCount].Mem4 + Add);\n//          printk(\"R16IO Data:%x\\n\",temp);\n                 break;\n\n            case WRITE8IO:\n                   printk(\"WRITE8IO\\n\");\n             __get_user(Add,(U32 *)(arg + 0));\n                 __get_user(Data,(U32 *)(arg + 4));\n                 outb(Data,pci1553[0].Mem1 + Add);\n                 break;\n}\n</code></pre>\n\n<p>I am trying use this function through <code>ioctl</code> call from my application\nprogram</p>\n\n<p>This one of my <code>ioctl</code> call\n<code>ioctl(fd,WRITEIO16,Data1);</code>\nHere <code>fd</code> is the File Descriptor I get on\nopening the Device file <code>WRITIO16</code> this is the <code>cmd</code>, Data1 is <code>arg</code></p>\n\n<p>But whatever arguments I am passing I am not getting that in driver.\nDriver enters the <code>ioctl</code> routine but it's not getting\narguments passed from application program.\nDriver is working when I give my arguments directly in the driver\nIOCTL routine.</p>\n\n<p>This is first time I am writing Linux Driver so any help would be good.</p>\n"}, {"tags": ["c", "http", "libcurl"], "comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1472765813, "post_id": 39248806, "comment_id": 65896879, "body": "<code>Content-length</code> is a mandatory header field in <code>HTTP&#47;1.1</code> when the length is known.  If you don&#39;t receive one, is because <code>HEAD</code> request ask for a response with no payload (no content) or because it is not known, and in that case you have to accept <code>Content-disposition: chunked</code> (don&#39;t know if this is exactly as shown, check rfc) So in the case of HEAD response <code>Content-length</code> should be zero (and is not included)."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 6333782, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40c5ea133d108d5fa7a09c625bae04d6?s=128&d=identicon&r=PG&f=1", "display_name": "Karashevich B.", "link": "https://stackoverflow.com/users/6333782/karashevich-b"}, "edited": false, "score": 0, "creation_date": 1472644362, "post_id": 39248894, "comment_id": 65833516, "body": "then why won&#39;t server generate content-length header after content is generated by php?"}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "reply_to_user": {"reputation": 95, "user_id": 6333782, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40c5ea133d108d5fa7a09c625bae04d6?s=128&d=identicon&r=PG&f=1", "display_name": "Karashevich B.", "link": "https://stackoverflow.com/users/6333782/karashevich-b"}, "edited": false, "score": 0, "creation_date": 1472645719, "post_id": 39248894, "comment_id": 65834447, "body": "@KarashevichB. Because the content isn&#39;t buffered (again, due to its unknown size). Instead, it is immediately sent over the line, making it impossible to add an additional header."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1472765880, "post_id": 39248894, "comment_id": 65896909, "body": "<code>Content-length:</code> is mandatory when known, and chunked disposition when unknown, in <code>HTTP&#47;1.1</code>.  If you don&#39;t know, you have to use <code>content-disposition: chunked</code> or switch to <code>HTTP&#47;1.0</code>"}], "tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": true, "score": 3, "last_activity_date": 1472644259, "creation_date": 1472644259, "answer_id": 39248894, "question_id": 39248806, "link": "https://stackoverflow.com/questions/39248806/is-there-a-way-to-force-http-server-to-send-me-a-specific-header-via-libcurl/39248894#39248894", "title": "Is there a way to force HTTP server to send me a specific header via libcurl?", "body": "<p>No, you can't. Either the size is available \u2013 or it is not.</p>\n\n<p>Especially, in the case of php scripts, the content is generated dynamically, and the size is not known beforehand.</p>\n\n<p>Essentially, <code>HEAD</code> does the same as <code>GET</code>, but omits the payload.</p>\n"}], "owner": {"reputation": 95, "user_id": 6333782, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40c5ea133d108d5fa7a09c625bae04d6?s=128&d=identicon&r=PG&f=1", "display_name": "Karashevich B.", "link": "https://stackoverflow.com/users/6333782/karashevich-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 39248894, "answer_count": 1, "score": 2, "last_activity_date": 1472644259, "creation_date": 1472644035, "question_id": 39248806, "link": "https://stackoverflow.com/questions/39248806/is-there-a-way-to-force-http-server-to-send-me-a-specific-header-via-libcurl", "title": "Is there a way to force HTTP server to send me a specific header via libcurl?", "body": "<p>Specifically <code>Content-Length</code>. When i send the HEAD request to my local server, i don't always receive the size of the requested file.<br>\nFor example, when it's 159 bytes index.php:</p>\n\n<pre><code>HTTP/1.1 200 OK\nDate: Wed, 31 Aug 2016 11:34:16 GMT\nServer: Apache/2.4.17 (Win32) OpenSSL/1.0.2d PHP/5.6.20\nX-Powered-By: PHP/5.6.20\nContent-Type: text/html; charset=UTF-8\n</code></pre>\n\n<p>And 40-something MB random .pdf file:</p>\n\n<pre><code>HTTP/1.1 200 OK\nDate: Wed, 31 Aug 2016 11:34:23 GMT\nServer: Apache/2.4.17 (Win32) OpenSSL/1.0.2d PHP/5.6.20\nLast-Modified: Thu, 25 Aug 2016 11:19:59 GMT\nETag: \"2807fb2-53ae39413d130\"\nAccept-Ranges: bytes\nContent-Length: 41975730\nContent-Type: application/pdf\n</code></pre>\n\n<p>Can i force it or not?</p>\n"}, {"tags": ["c", "linux", "system-calls"], "comments": [{"owner": {"reputation": 495, "user_id": 5954280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9cde8c47b90fa328f21aae546cad3d?s=128&d=identicon&r=PG&f=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/5954280/koga"}, "edited": false, "score": 0, "creation_date": 1472643757, "post_id": 39248699, "comment_id": 65833108, "body": "Just a heads up, the int main() isn&#39;t formatted to be part of the code block."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1472643768, "post_id": 39248699, "comment_id": 65833112, "body": "Erm... you want to read data, <i>not store it anywhere</i>, and then write it again? Besides, what makes you think the buffer makes you lose data? Also, code does not compile. Post real code, not pseudocode."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 5, "creation_date": 1472643919, "post_id": 39248699, "comment_id": 65833209, "body": "Note: <code>250 != 256</code> ..."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472643975, "post_id": 39248699, "comment_id": 65833258, "body": "The buffer should not make you lose data. To directly write you can do this in c++ but not c (which will also internally use a buffer though)"}, {"owner": {"reputation": 1660, "user_id": 1246115, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MNiCF.jpg?s=128&g=1", "display_name": "potrzebie", "link": "https://stackoverflow.com/users/1246115/potrzebie"}, "edited": false, "score": 2, "creation_date": 1472644019, "post_id": 39248699, "comment_id": 65833287, "body": "You&#39;re reading 256 bytes into a 250 char buffer. Use <code>sizeof buffer</code> to avoid magic numbers, or use a <code>#define</code>."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 495, "user_id": 5954280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9cde8c47b90fa328f21aae546cad3d?s=128&d=identicon&r=PG&f=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/5954280/koga"}, "edited": false, "score": 0, "creation_date": 1472644145, "post_id": 39248699, "comment_id": 65833368, "body": "@Koga: Edited. Feel free to delete your comment."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1472644460, "post_id": 39248699, "comment_id": 65833594, "body": "Note2: <code>ret_fd != ret</code>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1472645996, "post_id": 39248699, "comment_id": 65834615, "body": "Also, <code>&amp;buffer[0]</code> is just a verbose way of saying <code>buffer</code>. Don&#39;t waste tokens, you might run out."}], "answers": [{"tags": [], "owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "is_accepted": false, "score": 1, "last_activity_date": 1472643918, "creation_date": 1472643918, "answer_id": 39248767, "question_id": 39248699, "link": "https://stackoverflow.com/questions/39248699/read-and-write-system-calls-w-o-buffer/39248767#39248767", "title": "Read and write system calls w/o buffer", "body": "<p>You write out <code>(ssize_t) ret_fd</code> bytes, while you read <code>ret</code> bytes. </p>\n\n<p>Rewrite like this:</p>\n\n<pre><code>write(outpud, &amp;buffer[0], ret);\n</code></pre>\n\n<p>(Not to mention this isn't a complete example you have given, many variables are undefined, and the file is never opened. Please post real code.)</p>\n"}, {"comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1472644666, "post_id": 39248973, "comment_id": 65833723, "body": "for first point, in more general case, it&#39;s <i>undefined behavior</i>, so it may cause segmentation fault, or not, have side visible effect or not, or anything unpredictable behavior"}], "tags": [], "owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "is_accepted": false, "score": 1, "last_activity_date": 1472644815, "last_edit_date": 1472644815, "creation_date": 1472644458, "answer_id": 39248973, "question_id": 39248699, "link": "https://stackoverflow.com/questions/39248699/read-and-write-system-calls-w-o-buffer/39248973#39248973", "title": "Read and write system calls w/o buffer", "body": "<p>There are 2 logical mistakes I found in your code (there are compilation errors too). </p>\n\n<ol>\n<li><p>Declared buffer with size 250 and you are trying to read/write up to 256.\nIt may cause segmentation fault.</p></li>\n<li><p>For write, you are using size as <code>ret_fd</code> . It should be <code>ret</code>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 0, "last_activity_date": 1472650989, "creation_date": 1472650989, "answer_id": 39251359, "question_id": 39248699, "link": "https://stackoverflow.com/questions/39248699/read-and-write-system-calls-w-o-buffer/39251359#39251359", "title": "Read and write system calls w/o buffer", "body": "<p>Your code does not work (as many have commented to the question, and some answered), and even if fixed, is likely to lose data, but not because of using a buffer.</p>\n\n<p>Consider the following (untested, so report any errors you might find in a comment, so I can fix it) example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n#ifndef  COPY_BUFFER_SIZE\n#define  COPY_BUFFER_SIZE  262144\n#endif\n\nstruct copystatus {\n    off_t  bytes;\n    int    error;\n};\n\nstruct timeout;\nextern int timeout_elapsed(struct timeout *);\n\nint copyfd(const int tofd, const int fromfd,\n           struct copystatus *toinfoptr,\n           struct copystatus *frominfoptr,\n           struct timeout *limit)\n{\n    const size_t  size = COPY_BUFFER_SIZE;\n    char         *data, *p, *q;\n    ssize_t       n;\n    struct copystatus toinfo, frominfo;\n    int           retval = 0;\n\n    toinfo.bytes = 0;\n    toinfo.error = 0;\n    frominfo.bytes = 0;\n    frominfo.bytes = 0;\n\n    if (toinfoptr) *toinfoptr = toinfo;\n    if (frominfoptr) *frominfoptr = frominfo;\n\n    if (tofd == -1 || fromfd == -1)\n        return errno = EINVAL;\n\n    data = malloc(size);\n    if (!data)\n        return errno = ENOMEM;\n\n    while (1) {\n\n        if (timeout_elapsed(limit)) {\n            retval = frominfo.error = ETIMEDOUT;\n            break;\n        }\n\n        n = read(fromfd, data, size);\n        if (n == -1) {\n            /* Interrupted by a signal? Timeout? */\n            if (errno == EINTR)\n                continue;\n            /* No, an error occurred. */\n            retval = frominfo.error = errno;\n            break;\n\n        } else\n        if (n == 0)\n            break; /* No more input. */\n        else\n        if (n &lt; -1) {\n            /* Library/kernel error. Might occur if size &gt; 2GB. */\n            retval = frominfo.error = EIO;\n            break;\n        }\n\n        frominfo.bytes += (off_t)n;\n\n        p = data;\n        q = data + n;\n        while (p &lt; q) {\n\n            if (timeout_elapsed(limit)) {\n                retval = toinfo.error = ETIMEDOUT;\n                break;\n            }\n\n            n = write(tofd, p, (size_t)(q - p));\n            if (n == -1) {\n                if (errno == EINTR)\n                    continue;\n                retval = toinfo.error = errno;\n                break;\n            } else\n            if (n &lt; 1) {\n                /* Should not occur. */\n                retval = toinfo.error = EIO;\n                break;                 \n            }\n\n            p += n;\n            toinfo.bytes += (off_t)n;\n        }\n        if (retval)\n            break;\n    }\n\n    free(buffer);\n\n    if (toinfoptr) *toinfoptr = toinfo;\n    if (frominfoptr) *frominfoptr = frominfo;\n\n    return errno = retval;\n}\n</code></pre>\n\n<p>The above code reads data from one descriptor, writing it to another, with full error checking. It returns 0 if successful, or an <code>errno</code> error code otherwise. (Note that it is not common to assign the return value to <code>errno</code>; this is just my own style, and only used then the return value is always a valid <code>errno</code> value.)</p>\n\n<p>If non-NULL, the two copy status structures are filled with the number of bytes copied, and error code particular to that descriptor. In particular, if a timeout occurs, only one of their <code>error</code> fields will be set to <code>ETIMEDOUT</code>. (It is a POSIX.1 error code, \"Connection timed out\", not defined in C89/C99/C11.) </p>\n\n<p>The function is designed to work with timeout mechanisms that use signal delivery (to an empty signal handler) to interrupt a blocking I/O call. (In such cases, the call will return <code>-1</code> with <code>errno == EINTR</code>.) It does not work with nonblocking sockets; in that case, a <code>select()</code> loop would be better, and using either <code>gettimeofday()</code> or POSIX.1 <code>clock_gettime()</code> to obtain the real-world time, to internally compute the elapsed time for the copy operation, without the need for an external timeout checker function. A mixed blocking/nonblocking operation in a single function is possible, but awfully messy, hard to maintain and understand, and therefore strongly recommended against. (One can use <code>fcntl(descriptor,F_GETFL) &amp; O_NONBLOCK</code> to find out whether a descriptor is set to nonblocking or not.)</p>\n\n<p>When <code>fromfd</code> refers to a file on a local filesystem, all reads will return either the requested size, -1 for errors, or a short count or zero at the end of the file. When <code>tofd</code> refers to a file on a local filesystem, all writes will write and return the amount requested, unless an error occurs, in which case they will return -1. This does <em>not</em> mean one should feel free to assume this is commonly the case; in fact, <strong>local file behaviour is the exception</strong>.</p>\n\n<p>In Linux, and all POSIXy systems, character devices and pseudoterminals can be treated as files without any special handling from the application. However, it is <em>common</em> for those to return short reads, and occasionally even short writes.</p>\n\n<p>Furthermore, although <code>recv*()</code> and <code>send*()</code> families of functions are normally used with socket descriptors, one can just as easily use <code>read()</code> and <code>write()</code>. It is very common for reads from and writes to sockets to return short counts, and occasionally even errors (for example, network outages), although really long blocking is more common (due to e.g. long default TCP timeout).</p>\n\n<p>This is why the above example code does not assume reads and writes behave in any specific way. It is not optimal in that it always interleaves reads and writes, and assumes blocking descriptors. If you need such a function in real life, you might be copying several files -- either in parallel, or sequentially --, and using a <code>select()</code>-based nonblocking approach that copies multiple files at the same time, would probably be preferable <em>to the users of the application</em>, especially when the target files reside on different mount points. (Parallel approach tends to be faster if each target file resides on a different mount point, or is a char device or socket; sequential approach is faster if the targets are files and on the same mount point.)</p>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 6014330, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7f27c4a50c7542d54a8092f8b361938d?s=128&d=identicon&r=PG&f=1", "display_name": "testfile", "link": "https://stackoverflow.com/users/6014330/testfile"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654071, "creation_date": 1472654071, "answer_id": 39252497, "question_id": 39248699, "link": "https://stackoverflow.com/questions/39248699/read-and-write-system-calls-w-o-buffer/39252497#39252497", "title": "Read and write system calls w/o buffer", "body": "<p>High school question but here:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void)\n{\n    char buf[2] = {'\\0'};\n    int readfd;\n    int writefd;\n\n    readfd = open(\"myfile\", O_RDONLY);\n    writefd = open(\"myfile1\", O_WRONLY | O_CREAT);\n\n    while (read(readfd, &amp;buf, 1) != 0)\n    {\n            write(writefd, buf, 1);\n    }\n\n    close(writefd);\n    close(readfd);\n    return (0);\n}\n</code></pre>\n\n<p>readfd is the file you want to read from.\nwritefd is the file you want to write to.</p>\n\n<p>no error testing or cleanup.</p>\n"}], "owner": {"reputation": 1, "user_id": 6778515, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210741653962098/picture?type=large", "display_name": "Andreas B", "link": "https://stackoverflow.com/users/6778515/andreas-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "closed_date": 1472799343, "answer_count": 4, "score": -2, "last_activity_date": 1472654071, "creation_date": 1472643701, "last_edit_date": 1472644311, "question_id": 39248699, "link": "https://stackoverflow.com/questions/39248699/read-and-write-system-calls-w-o-buffer", "closed_reason": "Needs details or clarity", "title": "Read and write system calls w/o buffer", "body": "<p>I need to read data from a file and write it to another file in C.\nI am using the system calls <code>open</code>, <code>read</code> and <code>write</code>.</p>\n\n<p><strong>I fear the buffer i am using is causing me to lose some data.\nCan i somehow bypass the buffer?</strong></p>\n\n<p>Here is the loop responsible for writing the data to the file: </p>\n\n<pre><code>int main()\n{\n    unsigned char buffer[250]; \n    ssize_t ret;\n    while(!timeIsUp)    \n    {\n        ret = read(file, &amp;buffer[0], 256);\n        if (ret &gt; 0 &amp;&amp; ret &lt;= 256)\n        {\n           write(outpud, &amp;buffer[0], (ssize_t) ret_fd);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "network-programming", "udp", "udpclient"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1472642382, "post_id": 39248110, "comment_id": 65832192, "body": "So your network and the IP stack of your computers doesn&#39;t drop or corrupt any packets - and you receive all the packets just fine. Being unreliable doesn&#39;t mean errors happen without reason. You could try to send a (much) larger file, in which case the chance for filling up buffers at the receiver increases (and packets get dropped)."}, {"owner": {"reputation": 299, "user_id": 4804917, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uJ1oe.jpg?s=128&g=1", "display_name": "Danny_Kim", "link": "https://stackoverflow.com/users/4804917/danny-kim"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1472642496, "post_id": 39248110, "comment_id": 65832271, "body": "@nos How can I see packet dropping phenomenon? I am doing this program with two terminals. One is client and the other is server. So, I am using local IP address 127.0.0.1 and port number 9999."}, {"owner": {"reputation": 77122, "user_id": 106671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a910ad61c5827193f003a11be5dacb14?s=128&d=identicon&r=PG", "display_name": "Nikolai Fetissov", "link": "https://stackoverflow.com/users/106671/nikolai-fetissov"}, "edited": false, "score": 1, "creation_date": 1472642744, "post_id": 39248110, "comment_id": 65832437, "body": "Communications on loopback interface happen through local memory with no network involved. Try on two separate machines."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1472642963, "post_id": 39248110, "comment_id": 65832590, "body": "@Danny_Kim As I mentioned, try with a bigger file. UDP does not have flow control, so if you send faster than you receive, packets will be dropped. Or you could try sending through an ethernet switch whilst also transferring files using other means, so you max out the capacity of the ports on the ethernet switch, in which case it will drop packets."}, {"owner": {"reputation": 299, "user_id": 4804917, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uJ1oe.jpg?s=128&g=1", "display_name": "Danny_Kim", "link": "https://stackoverflow.com/users/4804917/danny-kim"}, "edited": false, "score": 0, "creation_date": 1472644171, "post_id": 39248110, "comment_id": 65833388, "body": "Thank you. I will try with bigger file and separate machine!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1472648223, "post_id": 39248110, "comment_id": 65836324, "body": "Packet loss <i>does</i> sometimes occur on real networks, and packets sometimes do arrive at their destination in a different order then the one in which they were sent.  UDP is &quot;unreliable&quot; because it provides no built-in means to detect or recover from these events.  Whether you are likely actually to encounter such errors is an entirely different question, depending mostly on the network and network conditions."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1472663344, "post_id": 39248110, "comment_id": 65846348, "body": "&quot;<i>send an image file (around 1Mb) from client to server using UDP</i>&quot; - that is too much data for a single UDP packet to physically hold, so you have to break up the data into multiple packets. And that introduces the possibility of lost data due to dropped packets, data getting out of order, etc. UDP is not good for data transfers when reliability is needed. However, there are protocols that add an element of reliability to UDP, like <a href=\"https://en.m.wikipedia.org/wiki/Trivial_File_Transfer_Protocol\" rel=\"nofollow noreferrer\">Trivial FTP</a>, <a href=\"https://en.m.wikipedia.org/wiki/Reliable_User_Datagram_Protocol\" rel=\"nofollow noreferrer\">Reliable UDP</a>, etc"}], "answers": [{"tags": [], "owner": {"reputation": 2203, "user_id": 6137423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1Rfu.jpg?s=128&g=1", "display_name": "AhmadWabbi", "link": "https://stackoverflow.com/users/6137423/ahmadwabbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1472642594, "creation_date": 1472642594, "answer_id": 39248306, "question_id": 39248110, "link": "https://stackoverflow.com/questions/39248110/why-doesnt-error-occur-in-udp-socket-communication/39248306#39248306", "title": "Why doesn&#39;t error occur in UDP socket communication?", "body": "<p>There is no error correction in UDP. It is still unreliable, even though you succeeded many time to transfer a file using it. </p>\n\n<p>The probability of error is very small in today's networks, especially in a LAN or on the same machine. That is, you may need to try sending a file millions of times before you get an error.</p>\n"}, {"comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1472643043, "post_id": 39248369, "comment_id": 65832644, "body": "Note that UDP doesn&#39;t have flow control, even on loopback devices. So if you send faster than you receive, you see packet drops there too, after the socket buffers overflow"}, {"owner": {"reputation": 299, "user_id": 4804917, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uJ1oe.jpg?s=128&g=1", "display_name": "Danny_Kim", "link": "https://stackoverflow.com/users/4804917/danny-kim"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1472644386, "post_id": 39248369, "comment_id": 65833532, "body": "@nos Very detail explanation!!! I am impressed! Thank you very much. After completely making this socket communication program, I will make transport layer program too. Is there any library connecting transport layer and ip layer, like socket which connects app layer and transport layer?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "reply_to_user": {"reputation": 299, "user_id": 4804917, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uJ1oe.jpg?s=128&g=1", "display_name": "Danny_Kim", "link": "https://stackoverflow.com/users/4804917/danny-kim"}, "edited": false, "score": 0, "creation_date": 1472649046, "post_id": 39248369, "comment_id": 65836900, "body": "@Danny_Kim: I think you&#39;re trying to reinvent userspace IP stacks here. If this is a pure learning experience, then go for it. But if this is for a practical application then you probably should not approach this without some significant networking experience under your belt. Anyway if you want a reliable datagram connection then you should look at SCTP instead of UDP."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 4, "last_activity_date": 1472642780, "creation_date": 1472642780, "answer_id": 39248369, "question_id": 39248110, "link": "https://stackoverflow.com/questions/39248110/why-doesnt-error-occur-in-udp-socket-communication/39248369#39248369", "title": "Why doesn&#39;t error occur in UDP socket communication?", "body": "<blockquote>\n  <p>Anyhow, I tried many times to send an image file (around 1Mb) from client to server using UDP socket. However, the image file was transmitted successfully without any one failure.</p>\n</blockquote>\n\n<p>If done on a single host via loopback no packet will be lost (except if you enable some packet loss testing function). That is because modern OSs' network layer only passes around pointers to packet descriptors. So when you do a <code>send()</code> or <code>write()</code> on a socket a packet descriptor struct is constructed around your data; that struct kind of \"lives\" in the writing process and only a pointer to it is passed to whoever is going to receive it. If it's another process this results effectively in IPC (and if you use the right socket operations this goes even as far as a zero-copy data transfer). Only if that packet descriptor ends up within a network interface driver, more than just that pointer will be passed around.</p>\n\n<p>On a local network it's also next to impossible to loose a packet, because collision detection happens on the link layer and modern switches are store and forward architectures. It takes a <em>huge</em> amount of network load for noticing any form of packet loss back pressure.</p>\n\n<p>For packet loss to become noticeable you must either use a highly contended shared medium network (say, W-LAN with a lot of clients contending for it) or go through at least one router close to its bandwidth capacity.</p>\n\n<blockquote>\n  <p>Does socket library have error correction scheme although UDP setting?</p>\n</blockquote>\n\n<p>No.</p>\n"}], "owner": {"reputation": 299, "user_id": 4804917, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uJ1oe.jpg?s=128&g=1", "display_name": "Danny_Kim", "link": "https://stackoverflow.com/users/4804917/danny-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 39248369, "answer_count": 2, "score": 0, "last_activity_date": 1472642780, "creation_date": 1472642045, "last_edit_date": 1472642427, "question_id": 39248110, "link": "https://stackoverflow.com/questions/39248110/why-doesnt-error-occur-in-udp-socket-communication", "title": "Why doesn&#39;t error occur in UDP socket communication?", "body": "<p>I am a student studying computer networking.\nI made very simple server-client socket communication program in C on Ubuntu, using UDP protocol.\nI read in the book that UDP is unreliable data transferring protocol while TCP is reliable data transferring protocol. The reason is that UDP is just sending packets while TCP is sending and waiting for receiving corresponding ack message.</p>\n\n<p>Anyhow, I tried many times to send an image file (around 1Mb) from client to server using UDP socket. However, the image file was transmitted successfully without any one failure.</p>\n\n<p>Does socket library have error correction scheme although UDP setting?</p>\n\n<p>ps) My program is almost the same as the common echo socket code in C. Just different thing is not echoing but copying. That is, client transfers data and server receives and copies it.</p>\n\n<p>For reference) I used sys/socket header for socket functions. I used fopen, fread and fwrite for copying file.</p>\n"}, {"tags": ["c", "char", "printf", "scanf", "uint8t"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472680781, "post_id": 39247906, "comment_id": 65855298, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6778347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813705ff2d58ded84d7e773b8ed80ffd?s=128&d=identicon&r=PG&f=1", "display_name": "gamalanwer", "link": "https://stackoverflow.com/users/6778347/gamalanwer"}, "edited": false, "score": 0, "creation_date": 1472642766, "post_id": 39247996, "comment_id": 65832459, "body": "im relatively new, so.. Im using Code::Blocks v16.01 and from what i can see its using GNU GCC. also %hhu gave error so i assume it that. can i change something to make it use C99 or C11. also If you will can you give me a reference on how to use SCNu8 and PRIu8"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 31, "user_id": 6778347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813705ff2d58ded84d7e773b8ed80ffd?s=128&d=identicon&r=PG&f=1", "display_name": "gamalanwer", "link": "https://stackoverflow.com/users/6778347/gamalanwer"}, "edited": false, "score": 0, "creation_date": 1472643221, "post_id": 39247996, "comment_id": 65832751, "body": "Are you running CodeBlocks on a Unix-based system (Linux, Mac, BSD, etc) or on Windows?  If, as I suspect, you&#39;re on Windows, then the issue is whether the runtime library supports the <code>hh</code> notation.  You may have better luck than me (Google&#39;s just decided to serve me Russian pages), but <a href=\"https://msdn.microsoft.com/ru-ru/subscriptions/xdb9w69d(v=vs.90).aspx\" rel=\"nofollow noreferrer\"><code>scanf()</code> width specification</a> may help  \u2014 the text is mostly English; it doesn&#39;t list <code>hh</code> which isn&#39;t a big surprise as the MS runtime is not completely C99 compliant."}, {"owner": {"reputation": 31, "user_id": 6778347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813705ff2d58ded84d7e773b8ed80ffd?s=128&d=identicon&r=PG&f=1", "display_name": "gamalanwer", "link": "https://stackoverflow.com/users/6778347/gamalanwer"}, "edited": false, "score": 0, "creation_date": 1472644120, "post_id": 39247996, "comment_id": 65833351, "body": "MS, Unfortunately. can I use SCNu8 and PRIu8? and if so, how? thanks in advance."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 31, "user_id": 6778347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813705ff2d58ded84d7e773b8ed80ffd?s=128&d=identicon&r=PG&f=1", "display_name": "gamalanwer", "link": "https://stackoverflow.com/users/6778347/gamalanwer"}, "edited": false, "score": 0, "creation_date": 1472681415, "post_id": 39247996, "comment_id": 65855521, "body": "The test for <code>g_temp &lt; 0</code> is pointless because <code>g_temp</code> is an unsigned type and can never be negative. GCC will point that out if asked. You should normally put the increment in the for-control line: <code>for (gr_c = 0; gr_c &lt; 3; gr_c++)</code> rather than have the empty increment at the top and putting the increment at the tail of the loop. Note that the suffix <code>_t</code> is usually denotes a type (e.g. <code>uint8_t</code> in <code>&lt;stdint.h&gt;</code>), not a variable, and the suffix should be treated as reserved. (See <a href=\"http://stackoverflow.com/questions/231760/\">What does a type followed by <code>_t</code> (underscore-t) represent?</a>)."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 4, "last_activity_date": 1472644984, "last_edit_date": 1472644984, "creation_date": 1472641767, "answer_id": 39247996, "question_id": 39247906, "link": "https://stackoverflow.com/questions/39247906/uint8-with-scanf-and-printf-in-c/39247996#39247996", "title": "uint8 with scanf and printf in C", "body": "<p>You want to treat the <code>unsigned char</code> as a small integer, not as a character.  Assuming C99 or later, you'll use:</p>\n\n<pre><code>unsigned char u1;  // Or, given typedef unsigned char uint8; uint8 u1;\n\nif (scanf(\"%hhu\", &amp;u1) != 1)\n    \u2026oops\u2026\n\nprintf(\"Value: %d\\n\", u1);\n</code></pre>\n\n<p>The <code>hh</code> in the <code>scanf()</code> conversion specifies that the pointer provided is to a (unsigned) <code>char</code>.  There's no need for the corresponding change in the <code>printf()</code> because <code>u1</code> will be promoted to <code>int</code> automatically.  However, if you wish, you can use:</p>\n\n<pre><code>printf(\"Value: %hhu\\n\", u1);\n</code></pre>\n\n<p>This preserves the symmetry in <code>printf()</code> and <code>scanf()</code>.  I observe that the macros in <code>&lt;inttypes.h&gt;</code> aren't directly applicable.  The macros such as <code>SCNu8</code> and <code>PRIu8</code> apply to <code>uint8_t</code>, not to <code>uint8</code>.  That said, they could probably be used and they'd probably work OK \u2014 assuming they are provided in <code>&lt;inttypes.h&gt;</code> at all:</p>\n\n<pre><code>if (scanf(\"%\" SCNu8, &amp;u1) != 1)\n    \u2026oops\u2026\n\nprintf(\"Value: %\" PRIu8 \"\\n\", u1);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6778347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813705ff2d58ded84d7e773b8ed80ffd?s=128&d=identicon&r=PG&f=1", "display_name": "gamalanwer", "link": "https://stackoverflow.com/users/6778347/gamalanwer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1725, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1472644984, "creation_date": 1472641492, "last_edit_date": 1472641963, "question_id": 39247906, "link": "https://stackoverflow.com/questions/39247906/uint8-with-scanf-and-printf-in-c", "title": "uint8 with scanf and printf in C", "body": "<p>This code unite is a part of a bigger code of a database in C. This part takes grades of students. requirements are to use <strong>typedef unsigned char uint8</strong> instead of a simple <strong>int</strong>.\nFor the life of me I can't make it work. When I use %c in scanf it skips. In print if it prints the first digit sometimes. So this is the code with int and it's working fine, how do I make it work with uint8 or unsigned char???</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;string.h&gt;\n//typedef unsigned char uint8;\ntypedef unsigned int uint8;\nint main(void)\n{\n    uint8 grades_t[3], gr_c, g_temp;\n    for (gr_c = 0; gr_c &lt; 3;)\n        {\n            printf(\"please enter the grade (0-100) of subject no%d: \", gr_c+1);\n            scanf(\"%d\", &amp;g_temp);\n            if (g_temp &lt; 0 || g_temp &gt; 100) //only accept values between 0-100\n                {\n                    printf(\"please enter valid grade from 0 - 100!\\n\");\n                    gr_c --; //if value is out of range, decrement  \n                }\n\n            else //store value \n                {\n                    grades_t[gr_c] = g_temp; \n\n                }\n            gr_c++;\n        }\n        printf(\"grade = %d\\n\", grades_t[0]); //unite test\n        printf(\"grade = %d\\n\", grades_t[1]);\n        printf(\"grade = %d\", grades_t[2]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "data-structures", "struct", "linked-list", "alphabetical"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1472646516, "post_id": 39247627, "comment_id": 65834985, "body": "Your comparison function has problems. Suppose the code is comparing Zaphod with Albert; the first comparison finds that Z is not smaller than A, so it goes on to compare <code>a</code> with <code>l</code> \u2014 which gives the wrong result.  You need to test <code>if (student1-&gt;name[i] &gt; student2-&gt;name[i]) return false;</code>, and only continue the loop when the names are equal so far. The subsequent <code>if (student1-&gt;name == student2-&gt;name)</code> test is bogus too; comparing the pointers for equality is not what you want \u2014 and again you have to test both less than and greater than, and then decide what to return if the ages are equal."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6778346, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210664697642100/picture?type=large", "display_name": "Brook Renzi", "link": "https://stackoverflow.com/users/6778346/brook-renzi"}, "edited": false, "score": 0, "creation_date": 1472643027, "post_id": 39247716, "comment_id": 65832630, "body": "I did originally have that actually thanks for the help on that front."}], "tags": [], "owner": {"reputation": 483, "user_id": 6736846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wod-_IEsStU/AAAAAAAAAAI/AAAAAAAAAGw/y1053EASDWI/photo.jpg?sz=128", "display_name": "Peter Skarpetis", "link": "https://stackoverflow.com/users/6736846/peter-skarpetis"}, "is_accepted": false, "score": 0, "last_activity_date": 1472716442, "last_edit_date": 1472716442, "creation_date": 1472641067, "answer_id": 39247716, "question_id": 39247627, "link": "https://stackoverflow.com/questions/39247627/alphabetically-sorting-linked-list/39247716#39247716", "title": "Alphabetically sorting linked list", "body": "<p>Change</p>\n\n<pre><code> while (list-&gt;next!=NULL){\n</code></pre>\n\n<p>to</p>\n\n<pre><code> while ( list != NULL ){\n</code></pre>\n\n<p>There may be other problems, but this is the first thing I noticed. </p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1472646227, "post_id": 39249302, "comment_id": 65834786, "body": "Empty braces aren&#39;t valid in C; you need at least one <code>0</code> in them: <code>\u2026 = { 0 };</code>."}, {"owner": {"reputation": 13, "user_id": 6778346, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210664697642100/picture?type=large", "display_name": "Brook Renzi", "link": "https://stackoverflow.com/users/6778346/brook-renzi"}, "edited": false, "score": 0, "creation_date": 1472653714, "post_id": 39249302, "comment_id": 65840368, "body": "Thanks for the help!"}, {"owner": {"reputation": 3268, "user_id": 182634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5b602ab0bc363e3e990f2e904b671d?s=128&d=identicon&r=PG", "display_name": "eyalm", "link": "https://stackoverflow.com/users/182634/eyalm"}, "reply_to_user": {"reputation": 13, "user_id": 6778346, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210664697642100/picture?type=large", "display_name": "Brook Renzi", "link": "https://stackoverflow.com/users/6778346/brook-renzi"}, "edited": false, "score": 0, "creation_date": 1472657596, "post_id": 39249302, "comment_id": 65843172, "body": "@Brook Renzi: You can use a debugger to find issues like this very fast."}, {"owner": {"reputation": 13, "user_id": 6778346, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210664697642100/picture?type=large", "display_name": "Brook Renzi", "link": "https://stackoverflow.com/users/6778346/brook-renzi"}, "edited": false, "score": 0, "creation_date": 1472751321, "post_id": 39249302, "comment_id": 65890011, "body": "Any recommendations on a debugger and how to access it?"}], "tags": [], "owner": {"reputation": 3268, "user_id": 182634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5b602ab0bc363e3e990f2e904b671d?s=128&d=identicon&r=PG", "display_name": "eyalm", "link": "https://stackoverflow.com/users/182634/eyalm"}, "is_accepted": true, "score": 0, "last_activity_date": 1472657511, "last_edit_date": 1472657511, "creation_date": 1472645488, "answer_id": 39249302, "question_id": 39247627, "link": "https://stackoverflow.com/questions/39247627/alphabetically-sorting-linked-list/39249302#39249302", "title": "Alphabetically sorting linked list", "body": "<p>The problem is that the \"next\" pointers are not initialized. You need to nullify them.</p>\n\n<pre><code>Name a = {0};\nName b = {0};\nName c = {0};\nName d = {0};\n</code></pre>\n\n<p>Another thing, is that your sorting function is not handling well the string comparison.\nYou should change it to:</p>\n\n<pre><code>bool comesBefore(const Name* student1, const Name* student2)\n{\n    int i  = 0;\n    if (student2 == NULL)\n    {\n        return true;\n    }\n    while (student1-&gt;name[i]!= '\\0' &amp;&amp; student2-&gt;name[i] != '\\0')\n    {\n        if (student1-&gt;name[i] &lt; student2-&gt;name[i]){\n            return true;\n        }\n        else if (student1-&gt;name[i] &gt; student2-&gt;name[i]){\n            return false;\n        }\n\n    i++;\n}\n...\n</code></pre>\n\n<p>or even better, use <code>strcmp()</code></p>\n\n<p>also note that the whole \"k\" and \"last\" part in your code is not required at all</p>\n"}], "owner": {"reputation": 13, "user_id": 6778346, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210664697642100/picture?type=large", "display_name": "Brook Renzi", "link": "https://stackoverflow.com/users/6778346/brook-renzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 39249302, "answer_count": 2, "score": 0, "last_activity_date": 1472716442, "creation_date": 1472640720, "last_edit_date": 1472643350, "question_id": 39247627, "link": "https://stackoverflow.com/questions/39247627/alphabetically-sorting-linked-list", "title": "Alphabetically sorting linked list", "body": "<p>I am trying to make an alphabetically sorted linked list. For the code if any two names are the same their ages are compared. It is assumed their ages will not be the same. </p>\n\n<p>I have made a function which compares two students for their name and age as shown by comesBefore. This works fine.</p>\n\n<p>The problem I'm having is when linking the four names together I get a segmentation fault. If anyone can give me some pointers on where I am going wrong or on debugging in c that would be great.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\ntypedef struct name_s Name;\n\n//Struct name_s contains a character pointer to a name, an age, and a\n// pointer to the next name in a linked list\n\nstruct name_s{\n    char* name;\n    int age;\n    Name* next;\n};\n\n//comesBefore takes a pointer to student1 and student2.\n//The two students are compared to see which one comes first in\n//alphabetical order.\n//If both names are the same then their ages are compared.\n//The function returns true if student1 should come first else false\n\nbool comesBefore(const Name* student1, const Name* student2)\n{\n    int i  = 0;\n    if (student2 == NULL){\n        return true;\n    }\n    while (student1-&gt;name[i]!= '\\0' &amp;&amp; student2-&gt;name[i] != '\\0'){\n        if (student1-&gt;name[i] &lt; student2-&gt;name[i]){\n            return true;\n        }\n        i++;\n    }\n\n    if (student1-&gt;name == student2-&gt;name){\n        if (student1-&gt;age &lt; student2-&gt;age){\n            return true;\n        }\n    }\n\n    return false;\n}\n\n//creates a linked list in alphabetical order of the names\n//if any two names are the same the one with the lowest age comes first\n\nName* linkedList(Name names[], int n)\n{\n    Name* head = NULL;\n    Name* previous = NULL;\n    Name* last = NULL;\n    Name* current = &amp;names[0];\n    int i = 0;\n    while (i &lt; n) {\n        if (head == NULL){\n            head = current;\n        } else {\n            if (comesBefore(current, head)){\n                current-&gt;next = head;\n                head = current;\n            } else {\n                previous = head;\n                while(comesBefore(current, previous-&gt;next) == false \n                    &amp;&amp; previous-&gt;next != NULL){\n                    previous = previous-&gt;next;\n                }\n\n                current-&gt;next = previous-&gt;next;\n                previous-&gt;next = current;\n            }\n\n        }\n        last = head;\n        int k = 0;\n        while (k &lt;= i){\n            last = last-&gt;next;\n            k++;\n        }\n\n        last-&gt;next = NULL;\n        i++;\n        current = &amp;names[i];\n    }\n\n\n    return head;\n}\n\n\nint main(void)\n{\n\n    Name a;\n    Name b;\n    Name c;\n    Name d;\n    Name* s1 = &amp;a;\n    Name* s2 = &amp;b;\n    Name* s3 = &amp;c;\n    Name* s4 = &amp;d;\n\n    s1-&gt;name = \"Zaphod Beeblebrox\";\n    s1-&gt;age = 250;\n    s2-&gt;name = \"Albert Einstein\";\n    s2-&gt;age = 133;\n    s3-&gt;name = \"Albert Einstein\";\n    s3-&gt;age = 7;\n    s4-&gt;name = \"Brook Fleming\";\n    s4-&gt;age = 20;\n\n    Name names[4];\n    names[0] = a;\n    names[1] = b;\n    names[2] = c;\n    names[3] = d;\n\n    Name* list = linkedList(names, 4);\n    while (list!=NULL){\n        printf(\"Name: %s\\nAge: %d\\n--------\\n\",\n        list-&gt;name,\n        list-&gt;age\n        );\n        list = list-&gt;next;\n    }\n\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio-code"], "owner": {"reputation": 126, "user_id": 1849697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5C5oc.png?s=128&g=1", "display_name": "Nikki Koole", "link": "https://stackoverflow.com/users/1849697/nikki-koole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1472639054, "creation_date": 1472639054, "question_id": 39247027, "link": "https://stackoverflow.com/questions/39247027/how-to-set-breakpoints-in-library-in-visual-studio-code", "title": "How to set breakpoints in library in Visual Studio Code", "body": "<p>I am using Visual Studio Code on osx, </p>\n\n<p>My program loads an external library and I would like to set breakpoints there  too, both the main app as the .so file are compiled with the -g flag, but when I try to set a breakpoint it's never hit.</p>\n\n<p>In the developer console I do see: ..../gamelibrary.so'. Symbols loaded.</p>\n\n<p>I have the feeling I ought to put something in launch.json for it to work, but I don't know what.</p>\n\n<p>thanks!</p>\n"}, {"tags": ["c", "bison", "flex-lexer"], "comments": [{"owner": {"reputation": 1956, "user_id": 4206439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jnwZd.png?s=128&g=1", "display_name": "kdhp", "link": "https://stackoverflow.com/users/4206439/kdhp"}, "edited": false, "score": 3, "creation_date": 1472638743, "post_id": 39246662, "comment_id": 65829593, "body": "The contents of <code>yytext</code> changes with each match, and should be copied with a function like <code>strdup</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1477, "user_id": 5134525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f673da25919bd95349b3645cfca5167?s=128&d=identicon&r=PG", "display_name": "Sharad", "link": "https://stackoverflow.com/users/5134525/sharad"}, "is_accepted": false, "score": 1, "last_activity_date": 1472646495, "last_edit_date": 1472646495, "creation_date": 1472640605, "answer_id": 39247588, "question_id": 39246662, "link": "https://stackoverflow.com/questions/39246662/how-to-return-function-name-with-bison/39247588#39247588", "title": "How to return function name with bison?", "body": "<p>Although OP has found the solution, I would try to provide a complete answer.</p>\n\n<p>This is the Grammar which defines the function as per your code.</p>\n\n<pre><code>function: TYPE VAR '(' param_prototype_ld ')' '{' instruction_l '}'\n    {printf(\"\\n\\nbison-\\n%s\\n\",$1);}\n    ;\n</code></pre>\n\n<p>Each symbol is a positional variable. Eg TYPE is $1, VAR is $2 (which is I believe the function name). $$ is the return value of any rule. In this case <code>function</code>. In order to return the function name you need to set $$=$2 in the action part. Setting $$ to $1 will return the function name. Alternatively you can create a data structure in the action such as an array or struct to hold more than one $ variable and then return it.</p>\n\n<p>The effect would be seen in the following rule</p>\n\n<pre><code>function_l: function\n    | function_l function\n    ;\n</code></pre>\n\n<p>Non-terminal symbol function will hold the name of the function. In this rule \"function_l\" is $1 and \"function\" is $2. If you print $2 it will give you the function name which was passed from the rule \"function\".</p>\n\n<p>Since the terminal \"VAR\" is a string you need to set <code>yylval.str=strdup(yytext)</code> either in the lex or in the grammar rule as <code>yylval.str=strdup($&lt;pos&gt;)</code></p>\n"}, {"tags": [], "owner": {"reputation": 1956, "user_id": 4206439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jnwZd.png?s=128&g=1", "display_name": "kdhp", "link": "https://stackoverflow.com/users/4206439/kdhp"}, "is_accepted": true, "score": 3, "last_activity_date": 1510977211, "last_edit_date": 1510977211, "creation_date": 1472642336, "answer_id": 39248207, "question_id": 39246662, "link": "https://stackoverflow.com/questions/39246662/how-to-return-function-name-with-bison/39248207#39248207", "title": "How to return function name with bison?", "body": "<p>The value of <a href=\"http://westes.github.io/flex/manual/A-Note-About-yytext-And-Memory.html\" rel=\"nofollow noreferrer\"><code>yytext</code> is not guaranteed to persist</a>, and to make <code>yytext</code> persist it must be copied to a separate buffer. This is often done using <code>strdup</code>:</p>\n\n<pre><code>...\n\"\\\"[a-zA-Z0-9]+\"\\\"  {ECHO; yylval.str=strdup(yytext); return STR;}\n[.,;=()\\[\\]\\{\\}]    { return yytext[0]; }\n\n\"char\"      {ECHO; printf(\"-\"); yylval.str=strdup(yytext); return TYPE;}\n\"int\"       {ECHO; printf(\"-\");yylval.str=strdup(yytext); return TYPE;}\n\"float\"     {ECHO; printf(\"-\");yylval.str=strdup(yytext); return TYPE;}\n\"double\"    {ECHO; printf(\"-\");yylval.str=strdup(yytext);return TYPE;}\n\n[a-zA-Z][a-zA-Z0-9]* {ECHO; printf(\"-\");yylval.str = strdup(yytext); return VAR;}\n...\n</code></pre>\n\n<p>Though <code>strdup</code> can return <code>NULL</code>, a wrapper function can be used to make that failure explicit</p>\n\n<pre><code>char *\nstrdup_checked(char *str)\n{\n        char *p;\n\n        if ((p = strdup(str)) == NULL) {\n                perror(\"strdup\");\n                exit(EXIT_FAILURE);\n        }\n        return (p);\n}\n</code></pre>\n"}], "owner": {"reputation": 4323, "user_id": 2057091, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7kWv6.png?s=128&g=1", "display_name": "Aserre", "link": "https://stackoverflow.com/users/2057091/aserre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 846, "favorite_count": 0, "accepted_answer_id": 39248207, "answer_count": 2, "score": 4, "last_activity_date": 1510977211, "creation_date": 1472638063, "last_edit_date": 1472638381, "question_id": 39246662, "link": "https://stackoverflow.com/questions/39246662/how-to-return-function-name-with-bison", "title": "How to return function name with bison?", "body": "<p>I'm building a simplified C parser using bison and flex. I've written a grammar rule to detect functions in my Bison file, and I want the parser to send the name of the function to my C monitoring program. Here is an extremely simplified sample of what I've implemented :</p>\n\n<p><em>my monitor program</em></p>\n\n<pre><code>/*monitor.h*/\n#ifndef MONITOR_H\n#define MONITOR_H\n\nextern int noLig;\nextern char* yytext;\n\n#endif\n\n/*monitor.c*/\n#include &lt;stdio.h&gt;\n#include &lt;monitor.h&gt;\n#include &lt;project.tab.h&gt;\n\nint noLig=0;\n\nint main (int argc, char * argv[]) {\n    printf(\"flex-\\n\");\n    int err_code=yyparse();\n    if (err_code == 0) {\n        printf(\"It went fine\\n\");\n    } else {printf(\"It didn't go well\\n\");}\n    return 0;\n}\n</code></pre>\n\n<p><em>project.l file</em></p>\n\n<pre><code>%{\n#include &lt;stdio.h&gt;\n#include &lt;monitor.h&gt;\n#include &lt;project.tab.h&gt;\n%}\n\n%%\n\"\\\"[a-zA-Z0-9]+\"\\\"  {ECHO; yylval.str=yytext; return STR;}\n[.,;=()\\[\\]\\{\\}]        { return yytext[0]; }\n\n\"char\"      {ECHO; printf(\"-\"); yylval.str=yytext; return TYPE;}\n\"int\"       {ECHO; printf(\"-\");yylval.str=yytext; return TYPE;}\n\"float\"     {ECHO; printf(\"-\");yylval.str=yytext; return TYPE;}\n\"double\"    {ECHO; printf(\"-\");yylval.str=yytext;return TYPE;}\n\n[a-zA-Z][a-zA-Z0-9]* {ECHO; printf(\"-\");yylval.str = yytext; return VAR;}\n\n[ \\t\\n\\b]+  {noLig++;}\n\"//\".*      {}\n.       {printf(\":%cwhat is this\",yytext[0]);}\n%%\n</code></pre>\n\n<p><em>project.y file</em></p>\n\n<pre><code>%{\n#include    &lt;stdio.h&gt;\n#include    &lt;monitor.h&gt;\nint yylex();\nint yyerror ();\n%}\n%union {\n    char *str;\n    int i;\n}\n%define parse.error verbose\n%type &lt;i&gt; INT\n%type &lt;str&gt; TYPE STR VAR\n\n%token TYPE INT STR VAR\n\n%start Program\n%%\nProgram: function_l\n    ;\n\nfunction_l: function\n    | function_l function\n    ;\n\nfunction: TYPE VAR '(' param_prototype_ld ')' '{' instruction_l '}'\n    {printf(\"\\n\\nbison-\\n%s\\n\",$1);}\n    ;\n\nparam_prototype_ld: /*empty*/\n    | param_prototype_l\n    ;\n\nparam_prototype_l: param_prototype\n    | param_prototype_l ',' param_prototype\n    ;\n\nparam_prototype: TYPE VAR\n    ;\n\ninstruction_l: /*empty*/\n    | VAR ';'\n    | VAR instruction_l\n    ;\n%%\nint yyerror (char* s) {\n    fprintf(stderr, \"Compilator3000:l.%d: %s\\n\", noLig, s);\n}\n</code></pre>\n\n<p><em>test.c file</em></p>\n\n<pre><code>int main (int arg) {\n    a;\n}\n</code></pre>\n\n<p>It compiles alright, with no warning. However, when I run <code>./monitor &lt; test.c</code>, I get the following output :</p>\n\n<pre><code>flex-\nint-main-int-arg-a-\n\nbison-\nint main (int arg) {\n    a;\n}\nIt went fine\n</code></pre>\n\n<p>Why does bison variable <code>$1</code> returns the whole function block ? How can I get only the return type ? (In the end, my goal is to print the return type, function name, and the type of the arguments)</p>\n"}, {"tags": ["c", "string", "loops", "cs50"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 6, "creation_date": 1472637004, "post_id": 39246161, "comment_id": 65828362, "body": "<code>printf(&quot;%*.*s\\n&quot;, height+1, counter,...</code>"}, {"owner": {"reputation": 563, "user_id": 5094589, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/859216187480969/picture?type=large", "display_name": "Daniel Yefimov", "link": "https://stackoverflow.com/users/5094589/daniel-yefimov"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472637295, "post_id": 39246161, "comment_id": 65828567, "body": "@BLUEPIXY thank you, it works. But, can you please explain what does this coude do. I mean each input(especially the first one)."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472637419, "post_id": 39246161, "comment_id": 65828656, "body": "see <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">printf</a>"}, {"owner": {"reputation": 563, "user_id": 5094589, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/859216187480969/picture?type=large", "display_name": "Daniel Yefimov", "link": "https://stackoverflow.com/users/5094589/daniel-yefimov"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472637982, "post_id": 39246161, "comment_id": 65829057, "body": "@BLUEPIXY Now i got it. Thanks"}, {"owner": {"reputation": 495, "user_id": 5954280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9cde8c47b90fa328f21aae546cad3d?s=128&d=identicon&r=PG&f=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/5954280/koga"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472641006, "post_id": 39246161, "comment_id": 65831256, "body": "@BLUEPIXY consider making an answer for OP to accept."}], "answers": [{"tags": [], "owner": {"reputation": 88, "user_id": 5261512, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2b0c817808cad9e390c2fa152c535ee0?s=128&d=identicon&r=PG&f=1", "display_name": "Tavij", "link": "https://stackoverflow.com/users/5261512/tavij"}, "is_accepted": false, "score": 0, "last_activity_date": 1472912169, "creation_date": 1472912169, "answer_id": 39307899, "question_id": 39246161, "link": "https://stackoverflow.com/questions/39246161/how-to-build-the-half-left-corner-pyramid-in-c/39307899#39307899", "title": "How to build the half-left corner pyramid in c", "body": "<p>Try this :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int n,i,j,k;\n    printf(\"How many lines long ?\\n\");\n    scanf(\"%d\",&amp;n);\n\n    for(i = 0; i&lt;=n; i++)\n    {\n        for(j = 0; j&lt;n-i; j++)\n        {\n            printf(\" \");\n        }\n        for(k = 0; k&lt;i; k++)\n        {\n            printf(\"#\");\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>How many lines long ?\n10\n\n         #\n        ##\n       ###\n      ####\n     #####\n    ######\n   #######\n  ########\n #########\n##########\n\n\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    int n,i,j,k;\n    printf(\"How many lines long ?\\n\");\n    scanf(\"%d\",&amp;n);\n    n++;\n    for(i = 0; i&lt;=n; i++)\n    {\n        for(j = 0; j&lt;n-i; j++)\n        {\n            printf(\" \");\n        }\n        for(k = 0; k&lt;i; k++)\n        {\n            if(i == 1)\n            {\n                continue;\n            }\n            printf(\"#\");\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n\nOutput:\nHow many lines long ?\n10\n\n\n         ##\n        ###\n       ####\n      #####\n     ######\n    #######\n   ########\n  #########\n ##########\n###########\n</code></pre>\n"}], "owner": {"reputation": 563, "user_id": 5094589, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/859216187480969/picture?type=large", "display_name": "Daniel Yefimov", "link": "https://stackoverflow.com/users/5094589/daniel-yefimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472935381, "creation_date": 1472636713, "last_edit_date": 1472935381, "question_id": 39246161, "link": "https://stackoverflow.com/questions/39246161/how-to-build-the-half-left-corner-pyramid-in-c", "title": "How to build the half-left corner pyramid in c", "body": "<p>I want to build left-half-pyramid</p>\n\n<pre><code>       ##\n      ###\n     ####\n    #####\n   ######\n  #######\n ########\n#########\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n\nint main(void)\n{\n    printf(\"Enter the height of the pyramid:\");\n    unsigned int height = GetInt();\n    int counter;\n\n    while(height &lt;1 || height &gt;23){\n        printf(\"Incorect number,try again:\");\n        height = GetInt();\n    }\n\n    for(counter = 2;counter &lt;=height+1;++counter) {\n        printf(\"%.*s\\n\", counter, \"##############################\");\n    }\n\n\n\n}\n</code></pre>\n\n<p>I built the pyramid but instead of left corner i got right corner pyramid.\nHow can i turn it to the left side?</p>\n\n<p>P.S I know, that usage of printf in this case is not the best idea, but it was told to me to create the code with this command.</p>\n"}, {"tags": ["c", "arrays", "function", "io", "frequency"], "comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1472635408, "post_id": 39245576, "comment_id": 65827155, "body": "Use only one loop (keep <code>i</code> loop) and remove <code>numArray[i] == numArray[j]</code> everywhere"}, {"owner": {"reputation": 1357, "user_id": 986816, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc682a4311984f4247d03dc5926bf9f4?s=128&d=identicon&r=PG", "display_name": "MartinHaTh", "link": "https://stackoverflow.com/users/986816/martinhath"}, "edited": false, "score": 2, "creation_date": 1472635465, "post_id": 39245576, "comment_id": 65827194, "body": "Consider using an array for holding the digit frequencies, such that <code>freqs[i]</code> is the frequency of the number <code>i</code>."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1472635872, "post_id": 39245576, "comment_id": 65827530, "body": "You seams to be at the begin of learning c. Personal advice: use a debugger, it&#39;s a really nice tool to learn! (and after to find bug). You can run step by step your program and see evolution of variables, it will help you to understand what code does"}], "answers": [{"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 0, "last_activity_date": 1472635913, "last_edit_date": 1472635913, "creation_date": 1472635450, "answer_id": 39245653, "question_id": 39245576, "link": "https://stackoverflow.com/questions/39245576/find-frequency-of-digits-in-an-int-array-in-c/39245653#39245653", "title": "Find frequency of digits in an int array in C", "body": "<p>What do you need the inner loop for? What you need is to look at each digit once in each iteration so as to count it. It is simpler than you think. Change your code to :</p>\n\n<pre><code>void freq(int size, int numArray[]) {\n    int one=0, two=0, thr=0, fou=0, fiv=0, six=0, sev=0, eit=0, nin=0;\n    int i, j;\n\n    for (i = 0; i &lt; size; i++) {\n        if (numArray[i] == 1) \n            one+=1;\n        else if (numArray[i] == 2)\n            two+=1;\n        else if (numArray[i] == 3) \n            thr+=1;      \n        else if (numArray[i] == 4) \n            fou+=1;\n        else if (numArray[i] == 5) \n            fiv+=1;\n        else if (numArray[i] == 6) \n            six+=1;\n        else if (numArray[i] == 7) {\n            sev+=1;\n        else if (numArray[i] == 8) \n            eit+=1; \n        else if (numArray[i] == 9) \n            nin+=1;\n}\n    printf(\"1 occurs %d times.\\n\", one);\n    printf(\"2 occurs %d times.\\n\", two);\n    printf(\"3 occurs %d times.\\n\", thr);\n    printf(\"4 occurs %d times.\\n\", fou);\n    printf(\"5 occurs %d times.\\n\", fiv);\n    printf(\"6 occurs %d times.\\n\", six);\n    printf(\"7 occurs %d times.\\n\", sev);\n    printf(\"8 occurs %d times.\\n\", eit);\n    printf(\"9 occurs %d times.\\n\", nin);\n}\n</code></pre>\n\n<hr>\n\n<p>Another approach instead of keeping ten <code>int</code> variables as counters would be to keep an array of ten <code>int</code>s, like this :</p>\n\n<pre><code>void freq(int size, int numArray[]) {\n\n    int i;\n    int counters[10];\n    //initialize the array's elements to zero\n    for (i = 0; i &lt; 10; i++)\n        counters[i] = 0;\n\n    for(i = 0; i &lt; size; i++)\n    {\n        if (numArray[i] = i)\n            counters[i]++;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "edited": false, "score": 0, "creation_date": 1472642627, "post_id": 39245697, "comment_id": 65832365, "body": "The last function does not check that numArray[i] is a valid index for freq_arr. With wrong input it will corrupt memory: <code>arr[2] = {1,-19};</code>"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "edited": false, "score": 0, "creation_date": 1472648786, "post_id": 39245697, "comment_id": 65836696, "body": "From what I understood the OP&#39;s input is bounded, so no input check required"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 1, "last_activity_date": 1472636046, "last_edit_date": 1472636046, "creation_date": 1472635542, "answer_id": 39245697, "question_id": 39245576, "link": "https://stackoverflow.com/questions/39245576/find-frequency-of-digits-in-an-int-array-in-c/39245697#39245697", "title": "Find frequency of digits in an int array in C", "body": "<p>your logic is flawed. what you want is to iterate <strong>once</strong> over the array and check each element. something like this:</p>\n\n<pre><code>for(int i = 0; i &lt; size; i++){\n    if (numArray[i] == NUMBER)\n       NUMBER_COUNTER ++;\n.\n.\n.\n</code></pre>\n\n<p>Or, using your original code:</p>\n\n<pre><code>void freq(int size, int numArray[]) {\n    int one=0, two=0, thr=0;\n    int i;\n\n    for (i = 0; i &lt; size; i++) {\n            if (numArray[i] == 1) {\n                one+=1;\n            }\n            else if (numArray[i] == 2) {\n                two+=1;\n            }\n            else if (numArray[i] == 3) {\n                thr+=1;\n            }\n    }\n    printf(\"1 occurs %d times.\\n\", one);\n    printf(\"2 occurs %d times.\\n\", two);\n    printf(\"3 occurs %d times.\\n\", thr);\n\n}\n</code></pre>\n\n<p>Another solution that I think is more elegant is this:\ncreate a new array with 9 elements (assuming you want to count frequencies of 9 digits...) and increment the slot of the found digit... something like this:</p>\n\n<pre><code>    void freq(int size, int numArray[]) {\n    int freq_arr[size];\n    int i;\n\n    for(i = 0; i &lt; size; i++)\n        freq_arr[ numArray[i] ] ++;\n    for(i = 0; i &lt; size; i++)\n        printf(\"i: %d = %d\\n\", i, freq_arr[i]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "edited": false, "score": 0, "creation_date": 1472638576, "post_id": 39245731, "comment_id": 65829477, "body": "Incorrect input will corrupt the stack or cause memory access error, sample:  <code>arr[4] = {1,1,4097,2}; freq(4, arr);</code> \u2013 Alexey Voytenko"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "edited": false, "score": 0, "creation_date": 1472638814, "post_id": 39245731, "comment_id": 65829642, "body": "@AlexeyVoytenko Sure, that&#39;s perhaps something to protect against, I added some code. Thanks."}, {"owner": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "edited": false, "score": 0, "creation_date": 1472642822, "post_id": 39245731, "comment_id": 65832505, "body": "The function should count digits? 0 should be included."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "edited": false, "score": 0, "creation_date": 1472642880, "post_id": 39245731, "comment_id": 65832534, "body": "@AlexeyVoytenko I know, but it&#39;s not in the original code. Don&#39;t ask me why. :)"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 5, "last_activity_date": 1472638795, "last_edit_date": 1472638795, "creation_date": 1472635627, "answer_id": 39245731, "question_id": 39245576, "link": "https://stackoverflow.com/questions/39245576/find-frequency-of-digits-in-an-int-array-in-c/39245731#39245731", "title": "Find frequency of digits in an int array in C", "body": "<p>The nested loop approach makes no sense, you only need to look at each digit once to count it. And of course an array makes more sense to keep the counters:</p>\n\n<pre><code>void freq(int size, const int *numbers)\n{\n  unsigned int counts[10] = { 0 };\n  for(int i = 0; i &lt; size; ++i)\n  {\n    const int here = numbers[i];\n    if(here &gt;= 1 &amp;&amp; here &lt;= 9)\n      counts[here]++;\n  }\n  for(int i = 1; i &lt; 10; ++i)\n    printf(\"%d occurs %u times\\n\", i, counts[i]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1472636772, "creation_date": 1472636772, "answer_id": 39246177, "question_id": 39245576, "link": "https://stackoverflow.com/questions/39245576/find-frequency-of-digits-in-an-int-array-in-c/39246177#39246177", "title": "Find frequency of digits in an int array in C", "body": "<pre><code>void freq(int size, const int numArray[]) {\n    int cnt[10] = {0};\n    for (int i=0; i&lt;size; i++) {\n         if (0 &lt;= numArray[i] &amp;&amp; numArray[i] &lt;= 9)\n           cnt[numArray[i]]++;\n    }\n    // cnt = {0, 3, 1, 0, 0, 0, 0, 0, 0, 0}\n}\n\n// test\nint main(int argc, char* argv[])\n{\n    int arr[4] = {1,1,1,2};\n    freq(4, arr);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 6005857, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/10940e23bda8cf7bbc35957025ef3348?s=128&d=identicon&r=PG&f=1", "display_name": "user6005857", "link": "https://stackoverflow.com/users/6005857/user6005857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "accepted_answer_id": 39245731, "answer_count": 4, "score": 1, "last_activity_date": 1472638795, "creation_date": 1472635253, "question_id": 39245576, "link": "https://stackoverflow.com/questions/39245576/find-frequency-of-digits-in-an-int-array-in-c", "title": "Find frequency of digits in an int array in C", "body": "<p>I am trying to write a function that takes the size of an array and an int array made up of digits as input and prints the frequency of each digit.</p>\n\n<p>Sample input and output:</p>\n\n<pre><code>Input: [1,2,2,3,3,3]\n\nOutput:\n1 occurs 1 times.\n2 occurs 2 times\n3 occurs 3 times.\n</code></pre>\n\n<p>Here is my attempt (not the most elegant):</p>\n\n<pre><code>void freq(int size, int numArray[]) {\n    int one=0, two=0, thr=0, fou=0, fiv=0, six=0, sev=0, eit=0, nin=0;\n    int i, j;\n\n    for (i = 0; i &lt; size; i++) {\n        for (j = 1; j &lt; size; j++) {\n            if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 1) {\n                one+=1;\n            }\n            else if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 2) {\n                two+=1;\n            }\n            else if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 3) {\n                thr+=1;\n            }\n            else if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 4) {\n                fou+=1;\n            }\n            else if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 5) {\n                fiv+=1;\n            }\n            else if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 6) {\n                six+=1;\n            }\n            else if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 7) {\n                sev+=1;\n            }\n            else if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 8) {\n                eit+=1;\n            }\n            else if (numArray[i] == numArray[j] &amp;&amp; numArray[i] == 9) {\n                nin+=1;\n            }\n        }\n    }\n    printf(\"1 occurs %d times.\\n\", one);\n    printf(\"2 occurs %d times.\\n\", two);\n    printf(\"3 occurs %d times.\\n\", thr);\n    printf(\"4 occurs %d times.\\n\", fou);\n    printf(\"5 occurs %d times.\\n\", fiv);\n    printf(\"6 occurs %d times.\\n\", six);\n    printf(\"7 occurs %d times.\\n\", sev);\n    printf(\"8 occurs %d times.\\n\", eit);\n    printf(\"9 occurs %d times.\\n\", nin);\n}\n</code></pre>\n\n<p>This has problems. If I use the same example as above, this is what I get:</p>\n\n<pre><code>Input: [1,2,2,3,3,3]\n\nOutput:\n1 occurs 0 times.\n2 occurs 4 times.\n3 occurs 9 times.\n</code></pre>\n"}, {"tags": ["c", "windows", "winapi", "gcc", "trackbar"], "answers": [{"tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 2, "last_activity_date": 1472636260, "last_edit_date": 1472636260, "creation_date": 1472635937, "answer_id": 39245842, "question_id": 39245423, "link": "https://stackoverflow.com/questions/39245423/winapi-commctrl-trackbar-identifier-undeclared/39245842#39245842", "title": "WinApi Commctrl trackbar identifier undeclared", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb760172.aspx\" rel=\"nofollow\"><code>TRBN_THUMBPOSCHANGING</code></a> is available in Windows Vista and above. To use it you have to set <code>_WIN32_WINNT</code> to the minimum supported version of your application prior to including any header files. This can be done in code</p>\n\n<pre><code>#define _WIN32_WINNT 0x0600  // Windows Vista\n</code></pre>\n\n<p>or on your compiler's command line (<code>-D_WIN32_WINNT=0x0600</code>). The latter is recommended to prevent introducing any mismatches. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383745.aspx\" rel=\"nofollow\">Using the Windows Headers</a> for details.</p>\n"}], "owner": {"reputation": 403, "user_id": 3881672, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47b10fd6274c1d6e83308fa1dd375007?s=128&d=identicon&r=PG&f=1", "display_name": "Doopy", "link": "https://stackoverflow.com/users/3881672/doopy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 39245842, "answer_count": 1, "score": 0, "last_activity_date": 1472652805, "creation_date": 1472634803, "last_edit_date": 1472652805, "question_id": 39245423, "link": "https://stackoverflow.com/questions/39245423/winapi-commctrl-trackbar-identifier-undeclared", "title": "WinApi Commctrl trackbar identifier undeclared", "body": "<p>I'm trying to handle a trackbar notification, but for some reason my GCC compiler complains that the <code>TRBN_THUMBPOSCHANGING</code> identifier is undeclared.</p>\n\n<p>I have included the header,</p>\n\n<pre><code>#include &lt;commctrl.h&gt;\n</code></pre>\n\n<p>and initialised the controls,</p>\n\n<pre><code>INITCOMMONCONTROLSEX icex;  \nicex.dwICC = ICC_LISTVIEW_CLASSES | ICC_WIN95_CLASSES;\nInitCommonControlsEx(&amp;icex);\n</code></pre>\n\n<p>I have also tried <code>ICC_BAR_CLASSES</code> and a few others instead of the win95 one.</p>\n\n<p>Also I'm compiling via bat file including this command</p>\n\n<pre><code>gcc foodplaner.o resources.o sqlite3.o -lgdi32 -lcomctl32 -o foodplaner.exe\n</code></pre>\n\n<p>Creating the trackbar was no problem, it shows up and can be controlled.\nWhat am I missing? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1472633044, "post_id": 39244757, "comment_id": 65825628, "body": "No it&#39;s not possible to do anything like that. Unless you dynamically allocate memory of course. Also, you can&#39;t dereference <code>void*</code> without casting."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 6, "creation_date": 1472633213, "post_id": 39244757, "comment_id": 65825753, "body": "No, this is not possible."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1472649003, "post_id": 39244757, "comment_id": 65836867, "body": "More importantly, it is not meaningful. Yes you could set the void pointers to point at compound literals, but the struct contains no type information so that achieves nothing. What is the actual problem you are trying to solve? Your two so-called &quot;advantages&quot; are nonsense and not true. You might want to look at <i>opaque types</i>."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1472639213, "last_edit_date": 1472639213, "creation_date": 1472633506, "answer_id": 39244965, "question_id": 39244757, "link": "https://stackoverflow.com/questions/39244757/implicit-declaration-in-instantiation-in-c/39244965#39244965", "title": "Implicit &quot;declaration-in-instantiation&quot; in C?", "body": "<p>No, that is not possible. The address-of operator requires an actual existing symbol as its argument.</p>\n\n<p>The C11 draft says:</p>\n\n<blockquote>\n  <p>The operand of the unary <code>&amp;</code> operator shall be either a function\n  designator, the result of a <code>[]</code> or unary <code>*</code> operator, or an lvalue that \n  designates an object that is not a bit-field and is not declared with the \n  <code>register</code> storage-class specifier.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1472638501, "post_id": 39246402, "comment_id": 65829414, "body": "With compound literals values cannot be modified. It seems that OP wants to change the value dereferenced during execution."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1472639771, "post_id": 39246402, "comment_id": 65830359, "body": "@LP: The standard gives an example (not normative, but indicative): <i>The following three expressions have different meanings:</i> <code>&quot;&#47;tmp&#47;fileXXXXXX&quot;</code> \u2014  <code>(char []){&quot;&#47;tmp&#47;fileXXXXXX&quot;}</code> \u2014  <code>(const char []){&quot;&#47;tmp&#47;fileXXXXXX&quot;}</code> \u2014 <i>The first always has static storage duration and has type array of <code>char</code>, but need not be modifiable; the last two have automatic storage duration when they occur within the body of a function, and the first of these two is modifiable.</i>  There is also discussion of <code>const</code>-qualified compound literals.  This clearly indicates that compound literals can be modified."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472644863, "post_id": 39246402, "comment_id": 65833844, "body": "@JonathanLeffler Thanks. Very interesting."}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472735283, "post_id": 39246402, "comment_id": 65879292, "body": "I have a followup question, and maybe I should post this separately, but it&#39;s pretty closely related. I often use <code>const</code> configuration structures that contain a pointer to modifiable status structures. Can this same method be applied there with named initialization in the status? i.e. <code>struct status { int count; }; struct config { struct status *stat; }; struct config cfg = { &amp;(struct status){.count = 256} };</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472762639, "post_id": 39246402, "comment_id": 65895486, "body": "@rjp You didn&#39;t include <code>const</code> anywhere in your example, but yes you <i>can</i> do that."}, {"owner": {"reputation": 1610, "user_id": 502189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cba4d424ecb01d45a923636bef46cc7?s=128&d=identicon&r=PG", "display_name": "rjp", "link": "https://stackoverflow.com/users/502189/rjp"}, "edited": false, "score": 0, "creation_date": 1472763756, "post_id": 39246402, "comment_id": 65895994, "body": "@M.M Ooops, I must have deleted it accidentally. It was supposed to be <code>const struct config cfg</code>. Comments probably weren&#39;t the right venue for a question with that much code in it. Thanks for the clarification, though."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1472868411, "post_id": 39246402, "comment_id": 65939177, "body": "A very quick example is using a compound literal in place of a <i>string literal</i>, e.g. <code>char *s = (char []){ &quot;I can be modified&quot; );</code>"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 5, "last_activity_date": 1472637376, "creation_date": 1472637376, "answer_id": 39246402, "question_id": 39244757, "link": "https://stackoverflow.com/questions/39244757/implicit-declaration-in-instantiation-in-c/39246402#39246402", "title": "Implicit &quot;declaration-in-instantiation&quot; in C?", "body": "<p>Yes it is possible, since C99. Your guess was very close; but it is required to provide a braced initializer even if you plan to assign another value later:</p>\n\n<pre><code>struct S test = { &amp;(int){0}, &amp;(float){0} };\n</code></pre>\n\n<p>This feature is called <a href=\"http://en.cppreference.com/w/c/language/compound_literal\" rel=\"noreferrer\">compound literal</a>. A compound literal is an lvalue.</p>\n\n<p>Note that your <code>testfunc</code> contains an error though; since <code>a</code> has type <code>void *</code>, you cannot write <code>*(test.a)</code>.  You could either change <code>S</code> to have <code>int *a; float *b;</code>, or you'll have to cast at the point of writing, e.g. <code>*(int *)test.a = 5;</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 6777603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/795bf405a248149bd42766e928874b51?s=128&d=identicon&r=PG&f=1", "display_name": "BoyOfJoy", "link": "https://stackoverflow.com/users/6777603/boyofjoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1517897103, "creation_date": 1472632916, "last_edit_date": 1517897103, "question_id": 39244757, "link": "https://stackoverflow.com/questions/39244757/implicit-declaration-in-instantiation-in-c", "title": "Implicit &quot;declaration-in-instantiation&quot; in C?", "body": "<p>Is it possible to declare a variable implicitly in an initialization? \nPerhaps like so:</p>\n\n<pre><code>struct S\n{\n  void *a;\n  void *b;\n};\n\nstruct S test = {&amp;(int), &amp;(float) };\n\nvoid testfunc (void)\n{ \n  *(test.a) = -2;\n  *(test.b) = 1.3;\n}\n</code></pre>\n\n<p>Advantages (in my eyes):</p>\n\n<ol>\n<li>No additional lines needed for explicit declaration</li>\n<li>Implicit variables are protected in the struct, no external access.</li>\n</ol>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1472628326, "post_id": 39243195, "comment_id": 65822850, "body": "Put this: <code>printf(&quot;command: \\&quot;%s\\&quot;&quot;, command);</code> directly behind the <code>gets()</code> call and think about the result."}, {"owner": {"reputation": 1, "user_id": 6687484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21bc45ad4c3ba412f64eaf76bd61ad6?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6687484/coder"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1472628611, "post_id": 39243195, "comment_id": 65823038, "body": "it is not taking input for second time"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1472633611, "post_id": 39243195, "comment_id": 65826024, "body": "@BLUEPIXY Thanks. I wonder why they placed the &quot;object identity&quot; argument last for regular file operations when most other C api:s has it first. I&#39;ve lost track of how many times the compiler has had to remind me. Replacing my comment with a corrected version."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1472633717, "post_id": 39243195, "comment_id": 65826087, "body": "Side note: gets() has been removed from the C language because it is unsafe. You should use fgets(command, sizeof command, stdin) instead."}], "owner": {"reputation": 1, "user_id": 6687484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21bc45ad4c3ba412f64eaf76bd61ad6?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6687484/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1472628529, "answer_count": 0, "score": 0, "last_activity_date": 1472628653, "creation_date": 1472628128, "last_edit_date": 1472628653, "question_id": 39243195, "link": "https://stackoverflow.com/questions/39243195/why-gets-not-taking-input-from-2nd-time-inside-for-loop-in-c-for-string-input", "closed_reason": "Duplicate", "title": "Why gets() not taking input from 2nd time inside for loop in C for string input", "body": "<p>I am trying to do a simple program where i will first give the operation name and 2nd will give two number. Based on the operation name it will show me result.\nIt will be done inside a infinite for loop.</p>\n\n<p>But Here my problem is that the code is working for first iteration, from 2nd it is not working properly. gets() not taking input.</p>\n\n<p>I have given the source here please where the mistake i have done.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\nint main()\n{\n    char command[80];\n    float i,j;\n\n    for( ; ; )\n    {\n        printf(\"what operation you want???\\n\");\n        gets(command);\n\n        if( !strcmp(command,\"quit\") )\n        {\n            break;\n        }\n\n        printf(\"enter first number :\\n\");\n        scanf(\"%f\",&amp;i);\n        printf(\"enter second number :\\n\");\n        scanf(\"%f\",&amp;j);\n\n        if(!strcmp(command,\"add\"))\n            printf(\"%f\\n\",i+j);\n        else if(!strcmp(command,\"divide\"))\n            printf(\"%f\\n\",i/j);\n        else if(!strcmp(command,\"multiply\"))\n            printf(\"%f\\n\",i*j);\n        else if(!strcmp(command,\"subtract\"))\n            printf(\"%f\\n\",i-j);\n        else printf(\"unknown command\\n\");\n    }\n    return 0;\n} \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 3, "creation_date": 1472628187, "post_id": 39243121, "comment_id": 65822766, "body": "Why do you that that it will be faster for the worst case? <code>switch&#47;case</code> is a single branch, and the amount of operations executed is the same for every case. Also, a hash-table takes more place is the data-section (or in the stack), but a <code>switch&#47;case</code> takes more place in the code-section, so ultimately they might be consuming roughly the same amount of memory."}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 1, "creation_date": 1472628237, "post_id": 39243121, "comment_id": 65822800, "body": "In your sample code, all hexadecimal values have 2 digits. Is that a given constraint? In other words, numbers to be recognized are guaranteed to be inside the range of 0x00 to 0xFF?"}, {"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "edited": false, "score": 0, "creation_date": 1472628340, "post_id": 39243121, "comment_id": 65822859, "body": "I don&#39;t think it makes sense. Some compilers, at least gcc, translate long switch/case to hash table when it&#39;s applicable."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1472628371, "post_id": 39243121, "comment_id": 65822878, "body": "Are all values below 0xff? You could consider just filling a static lookup table then. Also, consider that the switch/case might be implemented by the compiler by using a jump table, which might already be similar in effect to a hash table. In the end, there might be no way around benchmarking the possible solutions to find the fastest (or smallest)."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1472628512, "post_id": 39243121, "comment_id": 65822981, "body": "&quot;there is no particular pattern.&quot; Are you sure about that? Sometimes there is ... like if bit 0 is set, and not both of bit 3 and bit 4, then it&#39;s 1 (example). One could try to let an inference engine look for a pattern here."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1472629957, "post_id": 39243121, "comment_id": 65823751, "body": "The compiler often does amazing tricks with <code>switch</code> statements. You will almost never beat it. Just look at the produced assembly code."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472632763, "post_id": 39243121, "comment_id": 65825416, "body": "OT: You don&#39;t need a <code>break</code> after <code>return</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1472629493, "post_id": 39243355, "comment_id": 65823497, "body": "In C99, you can use designated initializers : <code>static uint8_t const table[256] = { [0x02] = 1, [0x63] = 4, ... };</code>. For packing, a bitfield would remove all the code for packing/unpacking."}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1472629541, "post_id": 39243355, "comment_id": 65823523, "body": "There are 5 different return values (0, 1, 2, 3, 4); you cannot pack that in 2 bits."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1472629672, "post_id": 39243355, "comment_id": 65823588, "body": "@ElderBug True. I chose not to use bitfields, as unpacking would require condition to select the member."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1472630012, "post_id": 39243355, "comment_id": 65823791, "body": "@Ruud If 0 is indeed necessary then 3 bits are of course needed. Then you would only pack 2 values per byte. Or, alternatively have another array of <code>uint8_t inUse[32]</code>, where one bit would tell if value exists in main table."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 3, "last_activity_date": 1472629019, "last_edit_date": 1472629019, "creation_date": 1472628641, "answer_id": 39243355, "question_id": 39243121, "link": "https://stackoverflow.com/questions/39243121/embedded-c-choice-between-switch-case-hashtable/39243355#39243355", "title": "Embedded C - Choice between switch/case &amp; hashtable", "body": "<p>You can put values in 256 byte array for fast access:</p>\n\n<pre><code>static uint8_t const table[256] = { 2, 3, 1, 4, ... };\nreturn table[i];\n</code></pre>\n\n<p>You are only using 100 of 256 values, so there are \"holes\" which are wasted space, but it can compete with <code>switch</code>.</p>\n\n<p>But since you only need 4 values, those can be reseprented in 2 bits. You can pack four values to one byte. Just use values 0-3 instead of 1-4:</p>\n\n<pre><code>#define PACK4(a, b, c, d) \\\n    (((a)-1 &lt;&lt; 0) | ((b)-1 &lt;&lt; 2) | ((c)-1 &lt;&lt; 4) | ((d)-1 &lt;&lt; 6))\nstatic uint8_t const table[64] = { PACK4(2, 3, 1, 4), PACK4(... };\nint byteOffset = i / 4;\nint bitOffset = i % 4 * 2;\nreturn (table[byteOffset] &gt;&gt; bitOffset &amp; 0x03) + 1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472635124, "post_id": 39245275, "comment_id": 65826966, "body": "Ops, same answer but yours is more elaborated :), just one question: why are you using <code>uint8_t</code>? <code>unsigned char</code> is guaranteed to be 1 byte"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472635317, "post_id": 39245275, "comment_id": 65827085, "body": "@AlterMann: OP&#39;s values seem to fit into 8 bits, so I used <code>uint8_t</code>. Type <code>char</code> can theoretically be 16 bits, if <code>CHAR_BIT</code> (in file <code>limits.h</code>) is defined as 16 on your platform . But I suppose that in such scenario, <code>uint8_t</code> (in file <code>stdint.h</code>) is not even defined on your platform. Long story short, I don&#39;t think it matters that much in this case."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1472635483, "post_id": 39245275, "comment_id": 65827209, "body": "@AlterMann: Oh, and of course, with regards to the index variable in my code - it is crucial to make sure that it&#39;s an 8-bit (unsigned) variable, because I do not check its boundaries before accessing the hash-table. On a &#39;16-bit-per-char&#39; platform, this would probably lead to a memory access violation at some point (and more generally, to undefined behavior)."}], "tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": false, "score": 1, "last_activity_date": 1472634413, "creation_date": 1472634413, "answer_id": 39245275, "question_id": 39243121, "link": "https://stackoverflow.com/questions/39243121/embedded-c-choice-between-switch-case-hashtable/39245275#39245275", "title": "Embedded C - Choice between switch/case &amp; hashtable", "body": "<p>As you've noted, there are two ways for implementing this.</p>\n\n<p>In order to decide which method is favorable, you need to analyze each method under two aspects:</p>\n\n<ul>\n<li>Space (memory consumption)</li>\n<li>Time (execution performance)</li>\n</ul>\n\n<p>However, the answer to your question is platform-dependent.</p>\n\n<p>In order to analyze the memory consumption, you need to compile both functions, check the disassembly and determine the amount of memory used for each one of them. Bare in mind that memory is used not only for variables, but also for code.</p>\n\n<p>In order to analyze the execution performance, you basically need to run both functions a large number of times, and measure the average duration of each one of them. Keep in mind that running time also depends on the caching heuristic deployed by the underlying HW architecture, so the results will not necessarily be consistent if, for example, you test the first function immediately after the second function, and then again test the second function immediately after the first function.</p>\n\n<hr>\n\n<p>Here is the memory consumption analysis on my platform (VS2013 compiler over x64):</p>\n\n<p><strong>Method 1:</strong></p>\n\n<pre><code>uint8_t func1(uint8_t i)\n{\n    switch (i)\n    {   \n        case 0x02:\n        case 0xF3:\n        case 0xF7:\n            return 1;\n        case 0x20:\n        case 0x40:\n        case 0xC0:\n        case 0xE0:\n            return 2;\n        case 0x21:\n        case 0x41:\n        case 0x61:\n        case 0x81:\n        case 0xA1:\n            return 3;\n        case 0x63:\n        case 0xBB:\n        case 0xCC:\n            return 4;\n        default:\n            return 0;\n    }\n}\n</code></pre>\n\n<p>Disassembled into 114 bytes of code:</p>\n\n<pre><code>00007FF778131050  mov         byte ptr [rsp+8],cl  \n00007FF778131054  push        rdi  \n00007FF778131055  sub         rsp,10h  \n00007FF778131059  mov         rdi,rsp  \n00007FF77813105C  mov         ecx,4  \n00007FF778131061  mov         eax,0CCCCCCCCh  \n00007FF778131066  rep stos    dword ptr [rdi]  \n00007FF778131068  movzx       ecx,byte ptr [i]  \n00007FF77813106D  movzx       eax,byte ptr [i]  \n00007FF778131072  mov         dword ptr [rsp],eax  \n00007FF778131075  mov         eax,dword ptr [rsp]  \n00007FF778131078  sub         eax,2  \n00007FF77813107B  mov         dword ptr [rsp],eax  \n00007FF77813107E  cmp         dword ptr [rsp],0F5h  \n00007FF778131085  ja          $LN5+10h (07FF7781310B6h)  \n00007FF778131087  movsxd      rax,dword ptr [rsp]  \n00007FF77813108B  lea         rcx,[__ImageBase (07FF778130000h)]  \n00007FF778131092  movzx       eax,byte ptr [rcx+rax+10D4h]  \n00007FF77813109A  mov         eax,dword ptr [rcx+rax*4+10C0h]  \n00007FF7781310A1  add         rax,rcx  \n00007FF7781310A4  jmp         rax  \n00007FF7781310A6  mov         al,1  \n00007FF7781310A8  jmp         $LN5+12h (07FF7781310B8h)  \n00007FF7781310AA  mov         al,2  \n00007FF7781310AC  jmp         $LN5+12h (07FF7781310B8h)  \n00007FF7781310AE  mov         al,3  \n00007FF7781310B0  jmp         $LN5+12h (07FF7781310B8h)  \n00007FF7781310B2  mov         al,4  \n00007FF7781310B4  jmp         $LN5+12h (07FF7781310B8h)  \n00007FF7781310B6  xor         al,al  \n00007FF7781310B8  add         rsp,10h  \n00007FF7781310BC  pop         rdi  \n00007FF7781310BD  ret  \n00007FF7781310BE  xchg        ax,ax  \n00007FF7781310C0  cmps        byte ptr [rsi],byte ptr [rdi]  \n00007FF7781310C1  adc         byte ptr [rax],al  \n</code></pre>\n\n<p><strong>Method 2:</strong></p>\n\n<pre><code>uint8_t func2(uint8_t i)\n{\n    static const uint8_t hash_table[] =\n    {\n    /*  0x0, 0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xA, 0xB, 0xC, 0xD, 0xE, 0xF, */\n          0,   0,   1,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x00 - 0x0F */\n          0,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x10 - 0x1F */\n          2,   3,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x20 - 0x2F */\n          0,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x30 - 0x3F */\n          2,   3,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x40 - 0x4F */\n          0,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x50 - 0x5F */\n          0,   3,   0,   4,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x60 - 0x6F */\n          0,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x70 - 0x7F */\n          0,   3,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x80 - 0x8F */\n          0,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0x90 - 0x9F */\n          0,   3,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0xA0 - 0xAF */\n          0,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   4,   0,   0,   0,  0, /* 0xB0 - 0xBF */\n          2,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   4,   0,   0,  0, /* 0xC0 - 0xCF */\n          0,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0xD0 - 0xDF */\n          2,   0,   0,   0,   0,   0,   0,   0,   0,   0,    0,   0,   0,   0,   0,  0, /* 0xE0 - 0xEF */\n          0,   0,   0,   1,   0,   0,   0,   1,   0,   0,    0,   0,   0,   0,   0,  0, /* 0xF0 - 0xFF */\n    };\n    return hash_table[i];\n}\n</code></pre>\n\n<p>Disassembled into 23 bytes of code:</p>\n\n<pre><code>00007FF778131030  mov         byte ptr [rsp+8],cl  \n00007FF778131034  push        rdi  \n00007FF778131035  movzx       eax,byte ptr [i]  \n00007FF77813103A  lea         rcx,[hash_table (07FF7781368C0h)]  \n00007FF778131041  movzx       eax,byte ptr [rcx+rax]  \n00007FF778131045  pop         rdi  \n00007FF778131046  ret  \n</code></pre>\n\n<p>And of course, 256 bytes of data.</p>\n\n<hr>\n\n<p>A couple of notes:</p>\n\n<ol>\n<li>You've mentioned in your question that using a hash-table will be faster than a <code>switch/case</code> statement in the worst case. Now, although this is not dictated by the C-language standard and every compiler may handle <code>switch/case</code> statements differently, a <code>switch/case</code> statements typically consists of a single branch, hence the amount of operations executed is the same for every case.</li>\n<li>Please note that I've declared the <code>hash_table</code> variable as <code>static</code>. As a result, this array resides in the data-section instead of in the stack and initialized as part of the executable image (i.e., hard-coded), instead of every time the function is called. Again, this is not something that is dictated by the C-language standard, but most C compilers handle it in the same way. I cannot argue that it will improve memory consumption, since it depends on the initial amount of memory allocated to each segment (data-section and stack). But it will definitely improve execution performance, since the hash-table will be initialized as the executable image is loaded into memory.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1472634576, "creation_date": 1472634576, "answer_id": 39245331, "question_id": 39243121, "link": "https://stackoverflow.com/questions/39243121/embedded-c-choice-between-switch-case-hashtable/39245331#39245331", "title": "Embedded C - Choice between switch/case &amp; hashtable", "body": "<p>You can do it in O(1) space using a lookup table:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic const unsigned char keymap[] = {\n    0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,3,0,4,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,\n    2,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\n    0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0\n};\n\nstatic int find(int id)\n{\n    if ((id &gt;= 0) &amp;&amp; (id &lt; 256)) {\n        return keymap[id];\n    }\n    return 0;\n}\n\nint main(void)\n{\n    int id = 0x20;\n\n    printf(\"%d\\n\", find(id));\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6777411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ed6b880b3615441e40f60ceee4dddd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine W", "link": "https://stackoverflow.com/users/6777411/antoine-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1472634576, "creation_date": 1472627907, "question_id": 39243121, "link": "https://stackoverflow.com/questions/39243121/embedded-c-choice-between-switch-case-hashtable", "title": "Embedded C - Choice between switch/case &amp; hashtable", "body": "<p>I work with a home-made board, with an ARM chip, in C. My code has to be fast to execute, and I also have space constraints.\nNow, I have to code a \"parser\" of hexadecimal values. Each hex number must be associate with a dec number (1; 2; 3 or 4). For now, and I don't think it will change much in the future, I have 100 hex values to parse. The hex values are \"random\", there is no particular pattern.</p>\n\n<p>I started with a switch / case, like that : </p>\n\n<pre><code>switch (i)\n{   \ncase 0xF3:\ncase 0xF7:\ncase 0x02:\n    return 1;\n    break;\n\ncase 0x20:\ncase 0x40:\ncase 0xE0:\ncase 0xC0:\n    return 2;\n    break;\n\ncase 0x21:\ncase 0x41:\ncase 0x81:\ncase 0x61:\ncase 0xA1:\n    return 3;\n    break;\n\n\ncase 0xBB:\ncase 0xCC:\ncase 0x63:\n    return 4;\n    break;\n\ndefault:\n    return 0;\n    break;\n}\n</code></pre>\n\n<p>But I was thinking about a hashtable instead. Of course, it will be faster for the worst case, but it will take more space and is the hashtable really worth it for 100 values ?</p>\n\n<p>Thanks for your answers, if you want precisions, just ask !</p>\n\n<p>Antoine</p>\n"}, {"tags": ["c++", "c", "hash"], "comments": [{"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 1, "creation_date": 1472627444, "post_id": 39242932, "comment_id": 65822321, "body": "Related link <a href=\"http://gedcom-parse.sourceforge.net/doc/encoding.html\" rel=\"nofollow noreferrer\">gedcom-parse.sourceforge.net/doc/encoding.html</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 6, "creation_date": 1472627454, "post_id": 39242932, "comment_id": 65822326, "body": "Bit shifting and masking should suffice."}, {"owner": {"reputation": 925, "user_id": 6478256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNq9q.jpg?s=128&g=1", "display_name": "ilotXXI", "link": "https://stackoverflow.com/users/6478256/ilotxxi"}, "edited": false, "score": 1, "creation_date": 1472627875, "post_id": 39242932, "comment_id": 65822586, "body": "What is a relation between bits and characters? Your quoted text just says that A,C,G,T are presented as 00, 01, 10, 11 correspondingly. Even more, C and C++ don&#39;t operate with &quot;characters&quot;, they operate with their integer representations."}, {"owner": {"reputation": 568, "user_id": 3827970, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e8eef4465c1b254d0892ca754478c858?s=128&d=identicon&r=PG&f=1", "display_name": "Zingo", "link": "https://stackoverflow.com/users/3827970/zingo"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472628143, "post_id": 39242932, "comment_id": 65822732, "body": "thanks a lot @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6, my real problem was finding the topic name."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 3117302, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/49ce0d4fe20344a7af3443d45da3b3b0?s=128&d=identicon&r=PG&f=1", "display_name": "Johned", "link": "https://stackoverflow.com/users/3117302/johned"}, "edited": false, "score": 0, "creation_date": 1600867262, "post_id": 39244387, "comment_id": 113223702, "body": "Optimized version if anyone needs to encode large sequences. <a href=\"https://github.com/linsalrob/EdwardsLab/blob/master/cpp/two-bit-optimized.c\" rel=\"nofollow noreferrer\">github.com/linsalrob/EdwardsLab/blob/master/cpp/&hellip;</a>. I tried to add notes to explain the optimizations but that was too long for this comment block so drop me a note if you would like more details. John"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1472631863, "creation_date": 1472631863, "answer_id": 39244387, "question_id": 39242932, "link": "https://stackoverflow.com/questions/39242932/how-to-encode-char-in-2-bits/39244387#39244387", "title": "how to encode char in 2-bits?", "body": "<p>Perhaps something like this:</p>\n\n<pre><code>typedef enum { NB_A = 0, NB_C, NB_G, NB_T } Nucleobase;\n\nNucleobase nucleobase_encode(char n)\n{\n  n = tolower((unsigned char) n);\n  switch(n)\n  {\n    case 'a': return NB_A;\n    case 'c': return NB_C;\n    case 'g': return NB_G;\n    case 't': return NB_T;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Then you can use the above to encode four bases into a single byte:</p>\n\n<pre><code>uint8_t encode_quad(char b0, char b1, char b2, char b3)\n{\n  return (nucleobase_encode(b3) &lt;&lt; 6) | (nucleobase_encode(b2) &lt;&lt; 4) |\n   (nucleobase_encode(b1) &lt;&lt; 2) | nucleobase_encode(b0);\n}\n</code></pre>\n\n<p>This will encode the four bases like so:</p>\n\n<pre><code>b3 | b2 | b1 | b0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 568, "user_id": 3827970, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e8eef4465c1b254d0892ca754478c858?s=128&d=identicon&r=PG&f=1", "display_name": "Zingo", "link": "https://stackoverflow.com/users/3827970/zingo"}, "edited": false, "score": 0, "creation_date": 1472640048, "post_id": 39244735, "comment_id": 65830552, "body": "thanks @cdlane, Im gonna take some time trying to understand bit shifting and masking and ur implementation, thanks again for ur time :))"}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 3, "last_activity_date": 1472632851, "creation_date": 1472632851, "answer_id": 39244735, "question_id": 39242932, "link": "https://stackoverflow.com/questions/39242932/how-to-encode-char-in-2-bits/39244735#39244735", "title": "how to encode char in 2-bits?", "body": "<p>Although A, C, G &amp; T can be mapped arbitrarily onto 00, 01, 10, 11 -- or any other arrangment -- there's at least one mapping that falls out for practically free from ASCII codes, A, C, G &amp; T -> 00, 01, 11, 10:</p>\n\n<pre><code>A 65 01000|00|1  0\nC 67 01000|01|1  1\nG 71 01000|11|1  3\nT 84 01010|10|0  2\n</code></pre>\n\n<p>Conveniently, the arrangement can also work for RNA as the U nucleotide doesn't disturb the bit pattern when it replaces the DNA T nucleotide:</p>\n\n<pre><code>U 85 01010|10|1  2\n</code></pre>\n\n<p>To get from ASCII letter to bits, simply shift and mask:  (N >> 1) &amp; 3</p>\n\n<p>Again, what mapping you use is arbitrary, this is just an easy one to implement.</p>\n\n<p>Given the above approach, let's write an encoder/decoder to pack a 32 base k-mer into a 64 bit number:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;assert.h&gt;\n\n#define TWO_BIT_MASK (3)\n#define BITS_PER_BYTE (8)\n#define BIG_ENOUGH (1024)\n\nuint64_t encode(char *original) {\n\n    size_t length = strlen(original);\n\n    assert(length * 2 == sizeof(uint64_t) * BITS_PER_BYTE);\n\n    uint64_t result = 0;\n\n    for (size_t i = 0; i &lt; length; i++) {\n        result = (result &lt;&lt; 2) | ((original[i] &gt;&gt; 1) &amp; TWO_BIT_MASK);\n    }\n\n    return result;\n}\n\nvoid decode(uint64_t encoded, char *decoded, bool rna_flag) {\n\n    int i = sizeof(uint64_t) * BITS_PER_BYTE / 2;\n\n    for (decoded[i--] = '\\0'; i &gt;= 0; i--, encoded &gt;&gt;= 2) {\n\n        unsigned char byte = encoded &amp; TWO_BIT_MASK;\n\n        if (byte == 2) {\n            byte = (rna_flag) ? 'U' : 'T';\n        } else {\n            byte = 'A' | (byte &lt;&lt; 1);\n        }\n\n        decoded[i] = byte;\n    }\n}\n\nint main() {\n    char *segment = \"GCCGTGCTAAGCGTAACAACTTCAAATCCGCG\";\n\n    printf(\"%s\\n\", segment);\n\n    uint64_t binary = encode(segment);\n\n    printf(\"%llu\\n\", binary);\n\n    char string[BIG_ENOUGH];\n\n    decode(binary, string, false);\n\n    printf(\"%s\\n\", string);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>&gt; ./a.out\nGCCGTGCTAAGCGTAACAACTTCAAATCCGCG\n15543626420740950391\nGCCGTGCTAAGCGTAACAACTTCAAATCCGCG\n&gt; \n</code></pre>\n"}], "owner": {"reputation": 568, "user_id": 3827970, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e8eef4465c1b254d0892ca754478c858?s=128&d=identicon&r=PG&f=1", "display_name": "Zingo", "link": "https://stackoverflow.com/users/3827970/zingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 5, "closed_date": 1472799337, "accepted_answer_id": 39244735, "answer_count": 2, "score": 0, "last_activity_date": 1472632851, "creation_date": 1472627330, "question_id": 39242932, "link": "https://stackoverflow.com/questions/39242932/how-to-encode-char-in-2-bits", "closed_reason": "Not suitable for this site", "title": "how to encode char in 2-bits?", "body": "<p>trying to implement a hash function for k-mers of DNA sequences, DNA sequence usually contains combination of four characters A,C,G,T. </p>\n\n<p>And I found this <a href=\"https://www.biostars.org/p/8219/#8232\" rel=\"nofollow\">thread</a> very interesting, </p>\n\n<blockquote>\n  <p>I have used the simple map from A,C,G,T onto {00, 01, 10, 11} (in bits), allowing four bases encoded in a byte. You could then use hash(word) + hash(rc(word)), or any other symmetric function. This approach has the advantage that you can use the current hash to find the next hash; as you shift bases in and out of your k-mer, you shift bits in and out of your hash or hash constituents. This is the approach taken in sylamer, and it's pretty fast.</p>\n</blockquote>\n\n<p>but I couldnt know how to encode a character in 2 bits, My question, is there any tutorial, library, function for mapping characters to bits?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1472626021, "post_id": 39242475, "comment_id": 65821462, "body": "Have you tried it?"}, {"owner": {"reputation": 7120, "user_id": 5085011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJ8Zi.jpg?s=128&g=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/5085011/avi"}, "edited": false, "score": 0, "creation_date": 1472626102, "post_id": 39242475, "comment_id": 65821505, "body": "Try it.  Check the C spec.  Depends on what you mean by <i>safe</i>.  Yes."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 7120, "user_id": 5085011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJ8Zi.jpg?s=128&g=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/5085011/avi"}, "edited": false, "score": 2, "creation_date": 1472626156, "post_id": 39242475, "comment_id": 65821539, "body": "@Avi I disagree with your edit: If question is about Objective-C, don&#39;t change it to C, even if the answer were the same. Please rollback."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472626761, "post_id": 39242475, "comment_id": 65821908, "body": "<code>int i = -INT32_MIN;</code> is likely to be undefined behaviour so the rest of the code is moot"}], "owner": {"reputation": 12496, "user_id": 1283776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/abb815001c365007d50d2bdb3226e70a?s=128&d=identicon&r=PG", "display_name": "user1283776", "link": "https://stackoverflow.com/users/1283776/user1283776"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "closed_date": 1472626160, "answer_count": 0, "score": 0, "last_activity_date": 1472625872, "creation_date": 1472625799, "last_edit_date": 1472625872, "question_id": 39242475, "link": "https://stackoverflow.com/questions/39242475/what-happens-when-when-casting-an-int-to-unsigned-int-in-c", "closed_reason": "Duplicate", "title": "What happens when when casting an int to unsigned int in C?", "body": "<p>I have:</p>\n\n<pre><code>int i = -INT32_MIN\nunsigned int ui = (unsigned int)i\n</code></pre>\n\n<p>What will happen when I cast the int to an unsigned int?</p>\n\n<ul>\n<li>What are the rules for casting?</li>\n<li>Is casting safe?</li>\n<li>Will casting always produce a predictable value?</li>\n</ul>\n"}, {"tags": ["c", "string", "variables", "pointers", "structure"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1472625648, "post_id": 39242222, "comment_id": 65821231, "body": "<code>==</code> can&#39;t compare string, only addresses. Use <code>strcmp</code>. Plenty of similar question on SO, search first."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1472625687, "post_id": 39242222, "comment_id": 65821250, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8004237/how-do-i-properly-compare-strings-in-c\">How do I properly compare strings in C?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1472624987, "creation_date": 1472624987, "answer_id": 39242247, "question_id": 39242222, "link": "https://stackoverflow.com/questions/39242222/array-of-structures-and-using-variables-of-pointer-to-functions/39242247#39242247", "title": "Array of structures and using variables of pointer to functions", "body": "<p>You can not compare <em>strings</em> using <code>==</code>, you have to use <a href=\"http://linux.die.net/man/3/strcmp\" rel=\"nofollow\"><code>strcmp()</code></a>.</p>\n\n<p>That said, <code>scanf(\"%s\",my_string);</code> should better be <code>scanf(\"%14s\",my_string);</code> to avoid buffer overlow by longer-than-expected input. Also, you should always check the return value of <code>scanf()</code> to ensure success.</p>\n"}], "owner": {"reputation": 6433, "user_id": 6591667, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6632be3bf9dfd9e4275569ebd3a2dacd?s=128&d=identicon&r=PG&f=1", "display_name": "tadm123", "link": "https://stackoverflow.com/users/6591667/tadm123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472625271, "creation_date": 1472624876, "last_edit_date": 1472625271, "question_id": 39242222, "link": "https://stackoverflow.com/questions/39242222/array-of-structures-and-using-variables-of-pointer-to-functions", "title": "Array of structures and using variables of pointer to functions", "body": "<p>Basically I want to input a string of text and if it matches with the string on the structure (*cmd_name), the program will then call and execute the function that corresponds to it. Here's my attempt:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid new_cmd()\n {\n     printf(\"You entered new_cmd function!\");\n }\nvoid close_cmd()\n {\n     printf(\"You entered close_cmd function!\");\n }\n void open_cmd()\n {\n     printf(\"You entered open_cmd function!\");\n }\n void close_all_cmd()\n {\n     printf(\"You entered the close_all_cmd function!\");\n }\n\nstruct{\n    char *cmd_name;\n    void (*cmd_pointer)(void);              //variable of a pointer to a function\n     }file_cmd[]= {  {\"new\",      new_cmd},\n                  {\"open\",    open_cmd},\n                  {\"close\",    close_cmd},\n                  {\"close all\",   close_all_cmd}};\n\n\nint main()\n{\n   int i;\n   char my_string[15];\n\n   scanf(\"%s\",my_string);\n   for(i=0; i&lt;4;i++)\n      if(file_cmd[i].cmd_name == my_string)       //matching the string\n       {\n           file_cmd[i].cmd_pointer();            //possible mistake here, trying to open the function\n           break;\n       }  \n\n    return 0; \n}\n</code></pre>\n\n<p>Whenever I test this and write on the command line \"new\" or any string, the program doesn't execute at all and exits.</p>\n"}, {"tags": ["c", "arrays", "io"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472624895, "post_id": 39242212, "comment_id": 65820873, "body": "How about using <a href=\"http://linux.die.net/man/3/isdigit\" rel=\"nofollow noreferrer\"><code>isdigit()</code></a>?"}, {"owner": {"reputation": 601, "user_id": 6005857, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/10940e23bda8cf7bbc35957025ef3348?s=128&d=identicon&r=PG&f=1", "display_name": "user6005857", "link": "https://stackoverflow.com/users/6005857/user6005857"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472625095, "post_id": 39242212, "comment_id": 65820961, "body": "I get the same problem."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472625174, "post_id": 39242212, "comment_id": 65820996, "body": "Wait.... <code>i &lt; i-2</code>...how is that supposed to work???"}, {"owner": {"reputation": 601, "user_id": 6005857, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/10940e23bda8cf7bbc35957025ef3348?s=128&d=identicon&r=PG&f=1", "display_name": "user6005857", "link": "https://stackoverflow.com/users/6005857/user6005857"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472625371, "post_id": 39242212, "comment_id": 65821083, "body": "Fixed, supposed to be c. Miss typed while typing Question."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 4, "creation_date": 1472625474, "post_id": 39242212, "comment_id": 65821137, "body": "<code>printf(&quot;%d,&quot;, numArray[c]);</code> ---&gt; <code>printf(&quot;%d,&quot;, numArray[i]);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1472625474, "post_id": 39242212, "comment_id": 65821138, "body": "<a href=\"http://ideone.com/59AuMT\" rel=\"nofollow noreferrer\">ideone.com/59AuMT</a>"}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 6005857, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/10940e23bda8cf7bbc35957025ef3348?s=128&d=identicon&r=PG&f=1", "display_name": "user6005857", "link": "https://stackoverflow.com/users/6005857/user6005857"}, "edited": false, "score": 1, "creation_date": 1472625617, "post_id": 39242392, "comment_id": 65821213, "body": "Yeah, that&#39;s it. So the array itself was correct, the printing was wrong."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 2, "last_activity_date": 1472625730, "last_edit_date": 1472625730, "creation_date": 1472625535, "answer_id": 39242392, "question_id": 39242212, "link": "https://stackoverflow.com/questions/39242212/read-digits-from-non-separated-characters-into-int-array-in-c/39242392#39242392", "title": "Read digits from non-separated characters into int array in C", "body": "<p>You have a typo in code</p>\n\n<pre><code>printf(\"%d,\", numArray[c]);\n</code></pre>\n\n<p>Must be </p>\n\n<pre><code>printf(\"%d,\", numArray[i]);\n</code></pre>\n\n<p>And the print loop can simply be</p>\n\n<pre><code>printf(\"[\");\nfor ( int i = 0; i &lt; c; i++ )\n{\n    printf(\"%d%c\", numArray[i], (i&lt;c-1)? ',' : ']');\n}\nprintf(\"\\n\");\n</code></pre>\n\n<p>Take note that your code is managing only one digit value. E.g. <code>45</code> is managed as <code>4</code> and <code>5</code>.</p>\n"}], "owner": {"reputation": 601, "user_id": 6005857, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/10940e23bda8cf7bbc35957025ef3348?s=128&d=identicon&r=PG&f=1", "display_name": "user6005857", "link": "https://stackoverflow.com/users/6005857/user6005857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 39242392, "answer_count": 1, "score": 0, "last_activity_date": 1472625730, "creation_date": 1472624834, "last_edit_date": 1472625568, "question_id": 39242212, "link": "https://stackoverflow.com/questions/39242212/read-digits-from-non-separated-characters-into-int-array-in-c", "title": "Read digits from non-separated characters into int array in C", "body": "<p>I am trying to read digits from non-separated input of characters into an int array. Sample input and output:</p>\n\n<pre><code>Input: 12a34b56 C7d8E9\nOutput: [1,2,3,4,5,6,7,8,9]\n</code></pre>\n\n<p>Here is my attempt:</p>\n\n<pre><code>int check_digit (char c) {\n    if ((c&gt;='0') &amp;&amp; (c&lt;='9')) return 1;\n    return 0;\n}\n\nint main(int argc, char const *argv[]) {\n    int numArray[1000], tempChar, c = 0;\n\n    tempChar = getchar();\n\n    while ( tempChar != EOF ) {\n        if ( check_digit(tempChar) ) {\n            numArray[c] = tempChar - '0';\n            c += 1;\n        }\n        tempChar = getchar();\n    }\n\n    printf(\"[\");\n    for ( int i = 0; i &lt; c-2; i++ ) {\n        printf(\"%d,\", numArray[c]);\n    }\n    printf(\"%d]\\n\", numArray[c-1]);\n\n    return 0;\n}\n</code></pre>\n\n<p>This doesn't work properly. It stops after reading one character.</p>\n\n<p>Sample input and output:</p>\n\n<pre><code>Input: 1a3b5c7d9\n\nOutput: [0,0,0,9]\n\nDesired output: [1,3,5,7,9]\n</code></pre>\n"}, {"tags": ["c++", "c", "clock"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1472625166, "post_id": 39242159, "comment_id": 65820991, "body": "These days I would just use <code>std::chrono</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1472625254, "post_id": 39242159, "comment_id": 65821023, "body": "<b><i>Is there any problem in my processor or the working of this program?</i></b> I say neither. <code>CLOCKS_PER_SEC</code> is not measuring cpu cycles. Although even if it was that is not so good today being that your cpu will dynamically adjust the multiplier anyways.."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472625371, "post_id": 39242159, "comment_id": 65821082, "body": "&#39;it shows: <code>1000</code>&#39; - it&#39;s all your fault. Stop running a non-POSIX compliant system and you&#39;ll see the performance <a href=\"http://en.cppreference.com/w/cpp/chrono/c/CLOCKS_PER_SEC\" rel=\"nofollow noreferrer\">boosted by 1000</a> :D"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1472625574, "post_id": 39242159, "comment_id": 65821191, "body": "<code>CLOCK_PER_SEC</code> is just a system clock, not an hardware one."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1472627431, "post_id": 39242366, "comment_id": 65822314, "body": "That doesn&#39;t mean it isn&#39;t dependable, you can depend on it to be <code>1000000</code>, just as POSIX defines it, every time you call it. The issue I think you are hinting at is there will be little correlation between what you are using <code>CLOCKS_PER_SEC</code> for and your processor ticks."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1472629459, "post_id": 39242366, "comment_id": 65823481, "body": "@DavidC.Rankin  \ud83d\ude02\ud83d\ude02\ud83d\ude02\ud83d\ude02 that&#39;s mostly true \ud83d\udc4d\ud83c\udffb however, not everyone implements the POSIX requirement. So I guess both are true, since on most systems (but not all) you can depend on the POSIX value."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1472633153, "post_id": 39242366, "comment_id": 65825710, "body": "There was a small wink and nod buried in the comment above <code>:)</code>"}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 1, "last_activity_date": 1472625438, "creation_date": 1472625438, "answer_id": 39242366, "question_id": 39242159, "link": "https://stackoverflow.com/questions/39242159/i-need-help-to-understand-clocks-per-sec/39242366#39242366", "title": "I need help to understand CLOCKS_PER_SEC", "body": "<p>Putting other issues aside, <code>CLOCKS_PER_SEC</code> isn't dependable.</p>\n\n<p>for example (<a href=\"http://linux.die.net/man/3/clock\" rel=\"nofollow\">see the linux <code>clock</code> man page</a>):</p>\n\n<blockquote>\n  <p>POSIX requires that CLOCKS_PER_SEC equals 1000000 independent of the actual resolution.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2353193"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472628223, "creation_date": 1472624683, "last_edit_date": 1472627710, "question_id": 39242159, "link": "https://stackoverflow.com/questions/39242159/i-need-help-to-understand-clocks-per-sec", "title": "I need help to understand CLOCKS_PER_SEC", "body": "<p>I use <code>AMD FX 4300</code> with <code>3.8GHz</code>, that means <code>3.8G</code> clocks per sec.\nBut when I run the command <code>CLOCKS_PER_SEC</code> it shows something else.</p>\n\n<pre><code>#include &lt;time.h&gt;    \n#include &lt;stdio.h&gt;\n\nint main()    \n{       \n   printf(\"%lu\\n\",CLOCKS_PER_SEC);\n\n   return 0;\n}\n</code></pre>\n\n<p>it shows: <code>1000</code></p>\n\n<p>Is it right? </p>\n\n<p>Is there any problem in my processor or the working of this program?</p>\n"}, {"tags": ["c", "linux", "multithreading", "macos", "solaris"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6777103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef350d691a9f5e70f65e94650fc97209?s=128&d=identicon&r=PG&f=1", "display_name": "kaotan", "link": "https://stackoverflow.com/users/6777103/kaotan"}, "edited": false, "score": 0, "creation_date": 1472643267, "post_id": 39242438, "comment_id": 65832782, "body": "Dear barcelona_delpy, thank you for your answer.  I read japanese version manual of Linux, and it says pthread_cond_timedwait returns EINTR when signaled. I&#39;d look for some manuals, only SUS3 manual tells returns error. Then I have to block signals while waiting condition on MacOS X and Solaris, SUS3. Regards,"}], "tags": [], "owner": {"reputation": 441, "user_id": 6776860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6e7ab81e61389cca67d10c5c779777?s=128&d=identicon&r=PG&f=1", "display_name": "barcelona_delpy", "link": "https://stackoverflow.com/users/6776860/barcelona-delpy"}, "is_accepted": false, "score": 1, "last_activity_date": 1472630191, "last_edit_date": 1472630191, "creation_date": 1472625666, "answer_id": 39242438, "question_id": 39242148, "link": "https://stackoverflow.com/questions/39242148/pthread-cond-wait-and-signal-the-result-depend-on-os/39242438#39242438", "title": "pthread_cond_wait() and signal, the result depend on OS", "body": "<p>I read the Linux <code>pthread_cond_wait</code>'s man manual, it says:</p>\n\n<blockquote>\n  <p>If a signal is delivered to a thread waiting for a condition variable, upon return from the signal handler the thread resumes  waiting  for  the condition variable as if it was not interrupted, or it shall return zero due to spurious wakeup.</p>\n</blockquote>\n\n<p>I  guess other OS's also have manuals to help you figure it out.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6777103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef350d691a9f5e70f65e94650fc97209?s=128&d=identicon&r=PG&f=1", "display_name": "kaotan", "link": "https://stackoverflow.com/users/6777103/kaotan"}, "edited": false, "score": 0, "creation_date": 1472635338, "post_id": 39242713, "comment_id": 65827107, "body": "Dear n.m. Thank you for your answer. Maybe you want to tell me like [    pthread_mutex_lock();         while(condition_is_false)             pthread_cond_wait();     pthread_mutex_unlock(); ]"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 21, "user_id": 6777103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef350d691a9f5e70f65e94650fc97209?s=128&d=identicon&r=PG&f=1", "display_name": "kaotan", "link": "https://stackoverflow.com/users/6777103/kaotan"}, "edited": false, "score": 0, "creation_date": 1472636020, "post_id": 39242713, "comment_id": 65827656, "body": "Yes this is the pattern."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1472626533, "creation_date": 1472626533, "answer_id": 39242713, "question_id": 39242148, "link": "https://stackoverflow.com/questions/39242148/pthread-cond-wait-and-signal-the-result-depend-on-os/39242713#39242713", "title": "pthread_cond_wait() and signal, the result depend on OS", "body": "<p>POSIX specifies that this function will never return EINTR. For portability to legacy OSes you can check for it anyway, it doesn't hurt </p>\n\n<p>More importantly, you should be prepared for spurious wakeups. The function can return zero at any time for any reason wiith the condition not being met. The mutex will be locked. You have to check the condition and, if not met, go back to pthread_cond_wait.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6777103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef350d691a9f5e70f65e94650fc97209?s=128&d=identicon&r=PG&f=1", "display_name": "kaotan", "link": "https://stackoverflow.com/users/6777103/kaotan"}, "is_accepted": false, "score": 0, "last_activity_date": 1472647961, "creation_date": 1472647961, "answer_id": 39250205, "question_id": 39242148, "link": "https://stackoverflow.com/questions/39242148/pthread-cond-wait-and-signal-the-result-depend-on-os/39250205#39250205", "title": "pthread_cond_wait() and signal, the result depend on OS", "body": "<p>Thank you very much for everyone.\nNow I know that with using signal to stop long waiting condition do not work.\npthread_cond_wait() resume waiting for the condition as if it was not interrupted, or it returns zero due to spurious wakeup.\nThen I want to do that, I will need a second lock like</p>\n\n<pre><code>pthread_mutex_lock(&amp;mut);\nwhile(condition_is_false) {\n  n = pthread_cond_timedwait();\n  if (n == ETIMEDOUT) {\n    pthread_mutex_lock(&amp;mut2);\n    if (condition2_is_true) {\n      pthread_mutex_unlock(&amp;mut2);\n      pthread_mutex_unlock(&amp;mut);\n      return STOPPED;\n    }\n    pthread_mutex_unlock(&amp;mut2);\n  }\n}\npthread_mutex_unlock(&amp;mut);\nreturn 0;\n</code></pre>\n\n<p>Regards,</p>\n"}], "owner": {"reputation": 21, "user_id": 6777103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef350d691a9f5e70f65e94650fc97209?s=128&d=identicon&r=PG&f=1", "display_name": "kaotan", "link": "https://stackoverflow.com/users/6777103/kaotan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1472647961, "creation_date": 1472624650, "last_edit_date": 1472637905, "question_id": 39242148, "link": "https://stackoverflow.com/questions/39242148/pthread-cond-wait-and-signal-the-result-depend-on-os", "title": "pthread_cond_wait() and signal, the result depend on OS", "body": "<p>I am a beginner of multi-threaded programming, and now I know that when a signal was sent while waiting with <code>pthead_cond_wait()</code>, the result depends on the OS.\nCan somebody tell me how to know how the call was interrupted, and how to write portable code?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;pthread.h&gt;\n\nvoid\nsigusr1_handler(int sig)\n{\n    printf(\"signal called\\n\");\n}\n\nint\nmain()\n{\n    int n;\n    pthread_mutex_t mut;\n    pthread_cond_t cond;\n    struct timespec ts;\n\n    signal(SIGUSR1, sigusr1_handler);\n    pthread_mutex_init(&amp;mut, NULL);\n    pthread_cond_init(&amp;cond, NULL);\n\n    pthread_mutex_lock(&amp;mut);\n    printf(\"before cond_wait\\n\");\n    n = pthread_cond_wait(&amp;cond, &amp;mut);\n    printf(\"after pthread_cond_wait : %d\\n\", n);\n    perror(\"error pthread_cond_wait:\");\n\n    pthread_mutex_unlock(&amp;mut);\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>MacOS X 10.11.4\ncc -o condwait condwait.c -lpthread\n\nLinux 2.6.32-642.3.1.el6.x86_64\ngcc -o condwait condwait.c -lpthread\n\nSolaris11 5.11 11.2\ncc -D_POSIX_C_SOURCE -D_REENTRANT -mt -o condwait condwait.c -lpthread\n\nMacOS X\n$ ./condwait &amp;\n[1] xxxxx\n$ kill -USR1 %1\nsignal called\nafter pthread_cond_wait : 0\nerror pthread_cond_wait:: Unknown error: 260\n\nSolaris\n$ ./condwait &amp;\n[1] xxxxx\n$ kill -USR1 %1\nsignal called\nafter pthread_cond_wait : 0\nerror pthread_cond_wait : Error 0\n\nLinux\n$ ./condwait &amp;\n[1] xxxxx\n$ kill -USR1 %1\nsignal called\n$ jobs\n[1]+  Running \n</code></pre>\n\n<p>When using Solaris native <code>cond_wait()</code>, it returns <code>EINTR</code> as documented.\nIs there any idea how to know that <code>pthread_cond_wait()</code> was interrupted?</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472623237, "post_id": 39241773, "comment_id": 65820096, "body": "Machine code? I don;t think so, it&#39;s about character set, IMHO."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1472623243, "post_id": 39241773, "comment_id": 65820104, "body": "<a href=\"http://en.cppreference.com/w/c/language/translation_phases\" rel=\"nofollow noreferrer\">This translation phase reference</a> might help."}, {"owner": {"reputation": 1692, "user_id": 6588224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fa171624f6e8b69a48e9f0b71a5dcd1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jin", "link": "https://stackoverflow.com/users/6588224/jin"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472623318, "post_id": 39241773, "comment_id": 65820146, "body": "@JoachimPileborg Thanks for the reference!"}], "owner": {"reputation": 1692, "user_id": 6588224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fa171624f6e8b69a48e9f0b71a5dcd1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jin", "link": "https://stackoverflow.com/users/6588224/jin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1472623104, "creation_date": 1472623104, "question_id": 39241773, "link": "https://stackoverflow.com/questions/39241773/confusion-about-translation-phases-before-preprocessing-in-c", "title": "Confusion about translation phases before preprocessing in C", "body": "<p>I'm reading a section about preprocessor in C Primer Plus and there is a paragraph which confuses me. It says that </p>\n\n<blockquote>\n  <p>The compiler has to put a program through some translation phases\n  before jumping into preprocessing. The compiler starts its work by\n  mapping characters appearing in the source code to the source\n  character set.</p>\n</blockquote>\n\n<p>Does this mean that the characters in the source code in mapped to some machine code which compiler can understand?</p>\n"}, {"tags": ["c", "gcc", "code-coverage", "gcov"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1472623497, "post_id": 39241757, "comment_id": 65820224, "body": "Have you <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.2.0/gcc/Instrumentation-Options.html#Instrumentation-Options\" rel=\"nofollow noreferrer\">read the documentation</a> about the options, to see what they actually do?"}, {"owner": {"reputation": 137, "user_id": 4346150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed52f6ba3084c5efb65ef6677f094678?s=128&d=identicon&r=PG&f=1", "display_name": "MSK", "link": "https://stackoverflow.com/users/4346150/msk"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472630051, "post_id": 39241757, "comment_id": 65823817, "body": "Yes, i had gone thru the docs.. But not clear  on why there are 2 flags, when one flag (-fprofile-arcs) serves the purpose"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1472630908, "creation_date": 1472630908, "answer_id": 39244066, "question_id": 39241757, "link": "https://stackoverflow.com/questions/39241757/why-two-compiler-flags-needs-to-be-passed-for-code-coverage-in-gcc/39244066#39244066", "title": "Why two compiler flags needs to be passed for code coverage in GCC", "body": "<p>If you check <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.2.0/gcc/Instrumentation-Options.html#Instrumentation-Options\" rel=\"nofollow\">the documentation</a> for <code>-fprofile-arcs</code> you will see that the data it generates can be used for two different things depending on other options: <code>-ftest-coverage</code> and <code>-fbranch-probabilities</code>.</p>\n\n<p>So the <code>-fprofile-arcs</code> is to generate code that does instrumentation and saves data. Then you use either <code>-ftest-coverage</code> or <code>-fbranch-probabilities</code> to specialize the data depending on what analysis you want to perform.</p>\n\n<p>It doesn't say anywhere, but from your experience it seems that GCC defaults to <code>-ftest-coverage</code> if none of the specialization flags are provided.</p>\n"}, {"tags": [], "owner": {"reputation": 5315, "user_id": 3527464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MRCc6.jpg?s=128&g=1", "display_name": "Pyves", "link": "https://stackoverflow.com/users/3527464/pyves"}, "is_accepted": false, "score": 3, "last_activity_date": 1472719787, "last_edit_date": 1472719787, "creation_date": 1472631167, "answer_id": 39244137, "question_id": 39241757, "link": "https://stackoverflow.com/questions/39241757/why-two-compiler-flags-needs-to-be-passed-for-code-coverage-in-gcc/39244137#39244137", "title": "Why two compiler flags needs to be passed for code coverage in GCC", "body": "<p>If you want to use the <strong>Gcov</strong> tool to get code coverage in GCC, refer to <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.2.0/gcc/Invoking-Gcov.html\" rel=\"nofollow\">this documentation</a> which explicitly states:</p>\n\n<blockquote>\n  <p>When using gcov, you must first compile your program with two special GCC options: \u2018-fprofile-arcs -ftest-coverage\u2019. This tells the compiler to generate additional information needed by gcov (basically a flow graph of the program) and also includes additional code in the object files for generating the extra profiling information needed by gcov. </p>\n</blockquote>\n\n<p>More precisely, by referring to the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.2.0/gcc/Instrumentation-Options.html\" rel=\"nofollow\">Instrumentation Options</a>, my understanding about the two flags is the following:</p>\n\n<ul>\n<li><code>-fprofile-arcs</code> generates the information indicating how many times each branch of your program is taken; in other words, this makes your program generate extra data relative to its execution. The information is stored into <em>.gcda</em> files.</li>\n<li><code>-ftest-coverage</code> uses the information produced by <code>-fprofile-arcs</code>, and generates <em>.gcno</em> files containing control flow information, which can be used by Gcov to produce human readable <em>.gcov</em> files. Without the test coverage data obtained with <code>-fprofile-arcs</code>, you will not get anything meaningful.</li>\n</ul>\n\n<p>The <code>-fprofile-arcs</code> can also be combined with other flags, such as <code>-fbranch-probabilities</code> (more information <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.2.0/gcc/Optimize-Options.html\" rel=\"nofollow\">here</a>). Typically when using this flag, the compiler performs optimisations to improve branch prediction based on the profiling information contained in the <em>.gcda</em> files. <code>-fprofile-arcs</code> and <code>-fbranch-probabilities</code> are automatically enabled when using <code>-fprofile-generate</code> and <code>-fprofile-use</code> (this is the standard way for performing <strong>Profile-Guided Optimisation</strong> with GCC).</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 137, "user_id": 4346150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed52f6ba3084c5efb65ef6677f094678?s=128&d=identicon&r=PG&f=1", "display_name": "MSK", "link": "https://stackoverflow.com/users/4346150/msk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6088, "favorite_count": 1, "accepted_answer_id": 39244066, "answer_count": 2, "score": 4, "last_activity_date": 1472719787, "creation_date": 1472623034, "question_id": 39241757, "link": "https://stackoverflow.com/questions/39241757/why-two-compiler-flags-needs-to-be-passed-for-code-coverage-in-gcc", "title": "Why two compiler flags needs to be passed for code coverage in GCC", "body": "<p>I understand two compiler flags: <strong>-ftest-coverage -fprofile-arcs</strong> needs to be passed for getting code coverage in GCC. \nMy question is, what is the reasoning for having 2 compiler flags for getting coverage. Also, what can we get if we use them independently?.</p>\n\n<p>I tried compiling a c program with only -fprofile-arcs flag. I didnt notice any differences. Was able to generate .gcno .gcda and gcov files</p>\n"}, {"tags": ["c", "file", "delete-row"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1472622868, "post_id": 39241679, "comment_id": 65819952, "body": "Why you want to delete in <i>that</i> file itself? Why can&#39;t you create a new file with the lines you need?"}, {"owner": {"reputation": 11, "user_id": 3970360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b5d031ba5cabf4ba41093cbc20f645?s=128&d=identicon&r=PG&f=1", "display_name": "Orcan Tiryakio\u011flu", "link": "https://stackoverflow.com/users/3970360/orcan-tiryakio%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1472623177, "post_id": 39241679, "comment_id": 65820066, "body": "<a href=\"http://stackoverflow.com/a/15759017/3970360\">This</a> might be useful for your situtation."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1472623456, "post_id": 39241679, "comment_id": 65820210, "body": "Your code looks almost fine as it is.  What&#39;s wrong with it?  Does it not do what you want?"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1472622992, "creation_date": 1472622992, "answer_id": 39241747, "question_id": 39241679, "link": "https://stackoverflow.com/questions/39241679/how-to-remove-specific-line-in-text-file-using-c-programming-language/39241747#39241747", "title": "How to remove specific line in text file using C programming language", "body": "<p>Depending on the size of the file there are basically two solutions:</p>\n\n<ol>\n<li><p>For a moderately small file you could read the whole file into memory. Recreate the file and write it out, except the line you want to remove.</p></li>\n<li><p>Read, line by line, from the original file. Write all lines except the one you want to remove to a new temporary file. Rename the temporary file as the original file. File-size doesn't matter here (other than for speed).</p></li>\n</ol>\n\n<p>Method 1 has a big drawback: If there is an error (bug in your code, system goes down, or other problem) the contents might not all be written and you could lose data. Method 1 is usually quicker though, and it allows you to make many kind of transformations of the data in a simple way.</p>\n"}], "owner": {"reputation": 9, "user_id": 6374771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfe389aa70e45a8fdfd31b5710aa2386?s=128&d=identicon&r=PG&f=1", "display_name": "javafreak", "link": "https://stackoverflow.com/users/6374771/javafreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3983, "favorite_count": 0, "closed_date": 1472799298, "answer_count": 1, "score": -1, "last_activity_date": 1472625625, "creation_date": 1472622622, "last_edit_date": 1472625625, "question_id": 39241679, "link": "https://stackoverflow.com/questions/39241679/how-to-remove-specific-line-in-text-file-using-c-programming-language", "closed_reason": "Needs details or clarity", "title": "How to remove specific line in text file using C programming language", "body": "<p>I want delete that line in text file after i search of it :</p>\n\n<p>eg:</p>\n\n<pre><code>char *id;   //id to search\nchar buf[1024];\n\nFILE *fp=fopen(\"abc.txt\",\"r\");\n\nwhile (fgets(buf,sizeof(buf),fp)!=NULL)\n{\n   if(strstr(buf,id)!=NULL)\n\n       {printf(\"%s\\n\",buf); }\n\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1472621810, "post_id": 39241489, "comment_id": 65819549, "body": "About the subtraction with <code>97</code>, you should check an <a href=\"http://en.cppreference.com/w/c/language/ascii\" rel=\"nofollow noreferrer\">ASCII table</a> it might become clearer. Look for the lower-case <code>&#39;a&#39;</code>, and think about what you would get if you did e.g. <code>&#39;c&#39; - &#39;a&#39;</code>. This is also the reason one should not use <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)\" rel=\"nofollow noreferrer\"><i>magic numbers</i></a> when coding."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472621901, "post_id": 39241489, "comment_id": 65819591, "body": "I think that 1 is used at random... it&#39;s only a filler, to check whether the content has been altered or not, later. Check the part <code>if (latin[w[j]-97] != 1)</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472621997, "post_id": 39241489, "comment_id": 65819623, "body": "As for the assignment, see that comparison <code>latin[w[j]-97] != 1</code> later in the code? If you really want to understand what the code does, then build it with debug information, and then step through the code in a debugger, line by line."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472622014, "post_id": 39241489, "comment_id": 65819632, "body": "@JoachimPileborg is it really related with ASCII code anyway? Any other value that 1, like 2 or 3 should also work, unless it&#39;s in the range of printable elements, right?"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1472622026, "post_id": 39241489, "comment_id": 65819639, "body": "What @JoachimPileborg said. Plus, it&#39;s a <i>terrible</i> introduction to <code>C</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472622278, "post_id": 39241489, "comment_id": 65819730, "body": "Am I misreading the question? Is is not like that the question targets to the assignment of <code>1</code>, rather subtraction of 97 from <code>s[i]</code>.... or am I missing something here?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472622289, "post_id": 39241489, "comment_id": 65819735, "body": "@SouravGhosh The subtraction is all about ASCII. It will also fail if the input contains anything but lower-case letters. The assignment could be any arbitrary <code>int</code> value that is non-zero, as long as it matches the comparison later in the code."}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1472622341, "post_id": 39241489, "comment_id": 65819752, "body": "@SouravGhosh The question can be read as <code>why -97</code> or <code>why 1</code>. I don&#39;t see one interpretation being blatantly more obvious than the other."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 1, "creation_date": 1472622398, "post_id": 39241489, "comment_id": 65819779, "body": "@dxiv Then, let&#39;s ask op for clarification. :) [Voted to close unless clarified]"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472622411, "post_id": 39241489, "comment_id": 65819781, "body": "<i>Please clarify your specific problem or add additional details to highlight exactly what you need. As it&#39;s currently written, it\u2019s hard to tell exactly what you&#39;re asking. See the How to Ask page for help clarifying this question.</i>"}, {"owner": {"reputation": 413, "user_id": 640259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae61300b46b5377d5f08acf60927785?s=128&d=identicon&r=PG", "display_name": "sam msft", "link": "https://stackoverflow.com/users/640259/sam-msft"}, "edited": false, "score": 0, "creation_date": 1472624948, "post_id": 39241489, "comment_id": 65820897, "body": "BTW, do not write code like this. :)  It does many unsafe things.  It is likely to have crashes, and have security problems."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1472644504, "post_id": 39241489, "comment_id": 65833618, "body": "When you encounter code that is difficult to understand like that, make sure you learn the following from it: That is a <i>bad example</i> of how to write code."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1472622062, "post_id": 39241535, "comment_id": 65819655, "body": "umm... i think the question was <code>why in line 10 the integer array latin with index of s[i]-97 is assigned to 1</code>.. not why subtract 97."}, {"owner": {"reputation": 1392, "user_id": 1692916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99337906197e33b2c5f9835584389f44?s=128&d=identicon&r=PG", "display_name": "Sylwit", "link": "https://stackoverflow.com/users/1692916/sylwit"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472622656, "post_id": 39241535, "comment_id": 65819865, "body": "... not sure but as it might be I edited my answer to complete it."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1472622790, "post_id": 39241535, "comment_id": 65819923, "body": "Still not very clear whether the <code>1</code> has a specific meaning or not, but fair enough. removing my DV."}], "tags": [], "owner": {"reputation": 1392, "user_id": 1692916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99337906197e33b2c5f9835584389f44?s=128&d=identicon&r=PG", "display_name": "Sylwit", "link": "https://stackoverflow.com/users/1692916/sylwit"}, "is_accepted": false, "score": 0, "last_activity_date": 1472622585, "last_edit_date": 1472622585, "creation_date": 1472622013, "answer_id": 39241535, "question_id": 39241489, "link": "https://stackoverflow.com/questions/39241489/i-am-solving-a-programming-quiz-and-i-am-not-able-to-understand-the-logic-behind/39241535#39241535", "title": "I am solving a programming quiz and I am not able to understand the logic behind line 10 of this code", "body": "<p>97 is the ASCII code for letter <code>a</code> so by removing 97 it converts a to 0, b to 1 etc...</p>\n\n<p>If you ask about assignment, it a value to compare with\n<code>latin[w[j]-97] != 1</code></p>\n"}, {"tags": [], "owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "is_accepted": false, "score": 0, "last_activity_date": 1472622593, "last_edit_date": 1472622593, "creation_date": 1472622277, "answer_id": 39241595, "question_id": 39241489, "link": "https://stackoverflow.com/questions/39241489/i-am-solving-a-programming-quiz-and-i-am-not-able-to-understand-the-logic-behind/39241595#39241595", "title": "I am solving a programming quiz and I am not able to understand the logic behind line 10 of this code", "body": "<p>Suppose you enter \"abcd\", that becomes 's'</p>\n\n<p>The letter 'a' in the ascii table is 97.\nSo 'a' - 97 = 0, 'b' - 97 = 1 etc.</p>\n\n<p>So latin[0], latin[1], latin[2], latin[3] all become 1, meaning you have typed an 'a', 'b', 'c', 'd'..</p>\n\n<p>Then a new string is entered into w and the next for loop checks if the newly entered characters were entered into 's' too.</p>\n\n<pre><code>for (j=0; j&lt;strlen(w); j++)\n  if (latin[w[j]-97] != 1) // here!\n</code></pre>\n\n<p>So if you enter bcda the second time it will print \"Yes\" but if you enter bbcd or abee it will print \"no\" as you typed at least one character differently</p>\n"}, {"tags": [], "owner": {"reputation": 369, "user_id": 4886823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a21f41f8707edb5b45af138a729520b8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/4886823/abhishek"}, "is_accepted": false, "score": 0, "last_activity_date": 1472622821, "creation_date": 1472622821, "answer_id": 39241719, "question_id": 39241489, "link": "https://stackoverflow.com/questions/39241489/i-am-solving-a-programming-quiz-and-i-am-not-able-to-understand-the-logic-behind/39241719#39241719", "title": "I am solving a programming quiz and I am not able to understand the logic behind line 10 of this code", "body": "<p>Acually array of length h stores elements at location 0 to n-1. there are 26 character from a to z. you declare array </p>\n\n<pre><code> int latin[26] = {0}; \n</code></pre>\n\n<p>it means size of latin is 26 and having 0 at location from 0 to 25.</p>\n\n<pre><code> for (i=0; i&lt;strlen(s); i++)\n latin[s[i]-97] = 1;\n</code></pre>\n\n<p>the moto of latin[s[i]-97]=1 we are going consider letter a represent  position 0 , letter b represent position 1 and so on ... letter z represent  position z;</p>\n\n<p>for all character in you your s latin contains 1;\nafter executing this loop.</p>\n\n<p>then you are reading another word and pick each character one by one and checking value of location represent by this character if value is not equal to zero it means no .it all character of words having value equal to yes then flag will be have value 1 it means we will get yes.</p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1472624540, "last_edit_date": 1472624540, "creation_date": 1472623017, "answer_id": 39241753, "question_id": 39241489, "link": "https://stackoverflow.com/questions/39241489/i-am-solving-a-programming-quiz-and-i-am-not-able-to-understand-the-logic-behind/39241753#39241753", "title": "I am solving a programming quiz and I am not able to understand the logic behind line 10 of this code", "body": "<p>The design idea seems to be to use the <code>latin</code> array as a flag-array. That is - each element in <code>latin</code> tells you whether a specific letter is part of the first input string.</p>\n\n<pre><code>int latin[26] = {0};   // Initialize all elements to zero\n\nscanf (\"%s\", s);       // Read a string (and pray that input is only letters)\n\nfor (i=0; i&lt;strlen(s); i++)\n     latin[s[i]-97] = 1;    // Set the flags to 1 for each input letter, i.e.\n                            // if input contains 'a' latin[0] becomes 1\n                            // if input contains 'b' latin[1] becomes 1\n                            // and so on\n</code></pre>\n\n<p>So the idea seem to be that after the loop, you can use <code>latin</code> to know which letters were present in the input. For instance - if <code>latin[3]</code> is still 0, you know there was no <code>c</code> in the input.</p>\n\n<p>The code is full of potential UB and needs a major rewrite.</p>\n\n<p>One example:</p>\n\n<pre><code>scanf (\"%s\", s);             // Potential overflow -&gt; may cause UB\nfor (i=0; i&lt;strlen(s); i++)\n    latin[s[i]-97] = 1;      // s[i] may be less than 97 -&gt; UB\n                             // s[i] may be greaterthan than 122 -&gt; UB\n</code></pre>\n\n<p>At least fix it like:</p>\n\n<pre><code>scanf (\"%25s\", s);           // Set upper limit for characters read\nfor (i=0; i&lt;strlen(s); i++)\n    if (s[i] &gt;= 97 &amp;&amp; s[i] &lt;= 122) // Check before use\n        latin[s[i]-97] = 1;\n    else\n        // Error handling (or just ignore)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2193, "user_id": 4427646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YKQMQ.png?s=128&g=1", "display_name": "Lincoln Cheng", "link": "https://stackoverflow.com/users/4427646/lincoln-cheng"}, "is_accepted": false, "score": 1, "last_activity_date": 1472623919, "last_edit_date": 1472623919, "creation_date": 1472623613, "answer_id": 39241897, "question_id": 39241489, "link": "https://stackoverflow.com/questions/39241489/i-am-solving-a-programming-quiz-and-i-am-not-able-to-understand-the-logic-behind/39241897#39241897", "title": "I am solving a programming quiz and I am not able to understand the logic behind line 10 of this code", "body": "<p><code>latin</code> is an array that tells me whether a letter is known. For example:</p>\n\n<pre><code>latin[0] == 1; //letter 'a' is known\nlatin[3] == 0; //letter 'd' is unknown\n</code></pre>\n\n<p>Initially, all letters are unknown. If letter 'd' is known:</p>\n\n<pre><code>latin['d'-97] = 1; //letter 'd' is set to be known\n//'d' has the ascii value of 100, thus 'd' - 97 equals 3.\n</code></pre>\n\n<p>To check whether a string <code>w</code> is valid, the program loops through each letter in the string, and if the there is a letter that is unknown, the string is invalid.</p>\n"}], "owner": {"reputation": 11, "user_id": 5875680, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101657916523675/picture?type=large", "display_name": "Kunal Pachauri", "link": "https://stackoverflow.com/users/5875680/kunal-pachauri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1472650330, "creation_date": 1472621744, "last_edit_date": 1472650330, "question_id": 39241489, "link": "https://stackoverflow.com/questions/39241489/i-am-solving-a-programming-quiz-and-i-am-not-able-to-understand-the-logic-behind", "title": "I am solving a programming quiz and I am not able to understand the logic behind line 10 of this code", "body": "<p>This is a codechef quiz. the first line takes input of letters that are known. The second input takes in the number of inputs and for each word given later we have to perform operation whether the string can be generated by known letters or not. I am not able to understand why in <code>line 10</code> the integer array latin with index of <code>s[i]-97</code> is assigned to 1. can anyone explain?</p>\n\n<pre><code>int main(void) \n{\n\n    int latin[26] = {0};\n    int n, i, j, flag;\n    char s[26], w[12];\n\n    scanf (\"%s\", s);\n    for (i=0; i&lt;strlen(s); i++)\n    latin[s[i]-97] = 1;\n\n    scanf (\"%d\", &amp;n);\n    for (i=0; i&lt;n; i++)\n    {\n        scanf (\"%s\", w);\n        flag = 0;\n        for (j=0; j&lt;strlen(w); j++)\n        {\n            if (latin[w[j]-97] != 1)\n            {\n                printf (\"No\\n\");\n                flag = 1;\n                break;\n            }\n        }\n\n        if (flag == 0)\n        printf (\"Yes\\n\");\n    }\n    return 0;\n} \n</code></pre>\n"}, {"tags": ["c", "linux-kernel", "operating-system", "kernel"], "comments": [{"owner": {"reputation": 5586, "user_id": 1420838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444e9a92b5a296792f40d2e6789f1851?s=128&d=identicon&r=PG", "display_name": "Dougvj", "link": "https://stackoverflow.com/users/1420838/dougvj"}, "edited": false, "score": 1, "creation_date": 1472623125, "post_id": 39241359, "comment_id": 65820051, "body": "I don&#39;t know what your definition of &quot;running&quot; in kernel mode is, but you might get what you want by just calling sleep()"}, {"owner": {"reputation": 3561, "user_id": 1149797, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/cVBtb.png?s=128&g=1", "display_name": "Alex Hoppus", "link": "https://stackoverflow.com/users/1149797/alex-hoppus"}, "edited": false, "score": 0, "creation_date": 1472626069, "post_id": 39241359, "comment_id": 65821492, "body": "Your idea with read will work. But it is unclear what are you trying to achieve by this..."}, {"owner": {"reputation": 30181, "user_id": 209629, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3784fe19d5c3d40d66ba91788f9bf007?s=128&d=identicon&r=PG", "display_name": "vz0", "link": "https://stackoverflow.com/users/209629/vz0"}, "edited": false, "score": 0, "creation_date": 1472626612, "post_id": 39241359, "comment_id": 65821816, "body": "You need a kernel module. A Hello World is very simple to do."}, {"owner": {"reputation": 617, "user_id": 1891584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99eeade16522a9f93e7c0a19bf476c60?s=128&d=identicon&r=PG", "display_name": "Martin Drab", "link": "https://stackoverflow.com/users/1891584/martin-drab"}, "edited": false, "score": 0, "creation_date": 1472754340, "post_id": 39241359, "comment_id": 65891622, "body": "Well, you SHOULD NOT do the following unless you are a bad guy but... by abusing a bug in the operating system (kernel), you can sometimes manage to execute a piece of code with kernel privileges. Example of such an error (on Windows platform, fixed in May 2015): <a href=\"https://github.com/hfiref0x/CVE-2015-1701\" rel=\"nofollow noreferrer\">github.com/hfiref0x/CVE-2015-1701</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1745, "user_id": 1583670, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/8N9DU.png?s=128&g=1", "display_name": "bohanl", "link": "https://stackoverflow.com/users/1583670/bohanl"}, "edited": false, "score": 0, "creation_date": 1472623548, "post_id": 39241856, "comment_id": 65820254, "body": "Not sure this is correct. What I ended up doing is -"}, {"owner": {"reputation": 1745, "user_id": 1583670, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/8N9DU.png?s=128&g=1", "display_name": "bohanl", "link": "https://stackoverflow.com/users/1583670/bohanl"}, "edited": false, "score": 0, "creation_date": 1472623564, "post_id": 39241856, "comment_id": 65820261, "body": "1. write a kernel module which does msleep; 2. write a C program to load this kernel module"}, {"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "reply_to_user": {"reputation": 1745, "user_id": 1583670, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/8N9DU.png?s=128&g=1", "display_name": "bohanl", "link": "https://stackoverflow.com/users/1583670/bohanl"}, "edited": false, "score": 0, "creation_date": 1472624486, "post_id": 39241856, "comment_id": 65820694, "body": "What system do you use? On my Linux box there is no msleep(in man pages)."}, {"owner": {"reputation": 1745, "user_id": 1583670, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/8N9DU.png?s=128&g=1", "display_name": "bohanl", "link": "https://stackoverflow.com/users/1583670/bohanl"}, "edited": false, "score": 0, "creation_date": 1472798291, "post_id": 39241856, "comment_id": 65905653, "body": "It&#39;s a kernel API available in linux/delay.h. You would need to install kernel-devel package and write it in kernel module."}, {"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "reply_to_user": {"reputation": 1745, "user_id": 1583670, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/8N9DU.png?s=128&g=1", "display_name": "bohanl", "link": "https://stackoverflow.com/users/1583670/bohanl"}, "edited": false, "score": 0, "creation_date": 1472815723, "post_id": 39241856, "comment_id": 65916135, "body": "What is the purpose of running program in kernel mode? Maybe there is alternatives needing only user-mode? I think it may be helpful/interesting to others too."}], "tags": [], "owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1472623453, "creation_date": 1472623453, "answer_id": 39241856, "question_id": 39241359, "link": "https://stackoverflow.com/questions/39241359/force-a-c-program-to-run-in-kernel-mode-for-a-while/39241856#39241856", "title": "Force a C program to run in kernel mode for a while", "body": "<p>There is no way to force running program to run in kernel mode.\nIn kernel mode there are more privileges available. It means that\nprogram could execute special instructions that it cannot execute in \nuser mode.\nObviously, there are no way, AFAIK, to force program in user mode to \nswitch to kernel mode, because it compromises security: imagine,\nthat every process on will could switch to user mode, malicious\ncode can cause disaster by altering page tables, changing CPU settings, turning off interrupts and so on.</p>\n\n<p>The only valid way of \"switching\" to kernel mode is executing system call.\nThat will cause trap to the kernel and after some kernel code is executed\ncontrol will return back to user code. However, I think that is not what you\nasked about.</p>\n"}], "owner": {"reputation": 1745, "user_id": 1583670, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/8N9DU.png?s=128&g=1", "display_name": "bohanl", "link": "https://stackoverflow.com/users/1583670/bohanl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1472623453, "creation_date": 1472621034, "question_id": 39241359, "link": "https://stackoverflow.com/questions/39241359/force-a-c-program-to-run-in-kernel-mode-for-a-while", "title": "Force a C program to run in kernel mode for a while", "body": "<p>I wanted to test out something when the process is in kernel mode. A period of 10-15 seconds completely in kernel mode should be enough.</p>\n\n<p>Is there any way to force a program written in C to run in kernel mode for a while? Would a single <code>read</code> system call on a huge buffer do?</p>\n"}, {"tags": ["c", "node.js", "embedded", "systems-programming"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1472624751, "post_id": 39240939, "comment_id": 65820806, "body": "<code>23</code> bits mens <code>0x7FFFFF</code>. You have one <code>F</code> too many."}], "answers": [{"tags": [], "owner": {"reputation": 6252, "user_id": 5508756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVDpp.png?s=128&g=1", "display_name": "qzb", "link": "https://stackoverflow.com/users/5508756/qzb"}, "is_accepted": true, "score": 2, "last_activity_date": 1474466833, "last_edit_date": 1474466833, "creation_date": 1472625561, "answer_id": 39242403, "question_id": 39240939, "link": "https://stackoverflow.com/questions/39240939/node-js-deserialize-floats-at-uneven-offset/39242403#39242403", "title": "Node.JS deserialize floats at uneven offset", "body": "<p>It's not a pretty solution, but you can use another buffer to make such conversion:</p>\n\n<pre><code>function intToFloat(integer) {\n    let buf = Buffer.alloc(4);\n    buf.writeUInt32LE(integer);\n    return buf.readFloatLE();\n}\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>There is another solution, which will work also on modern browser environments:</p>\n\n<pre><code>function intToFloat(integer) {\n    let intArray = new Uint32Array([ integer ]);\n    let floatArray = new Float32Array(intArray.buffer);\n    return floatArray[0];\n}\n</code></pre>\n"}], "owner": {"reputation": 3220, "user_id": 1617352, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f3fe06c7bccfeab0015286a92bb0a8e?s=128&d=identicon&r=PG", "display_name": "Dzung Nguyen", "link": "https://stackoverflow.com/users/1617352/dzung-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 39242403, "answer_count": 1, "score": 1, "last_activity_date": 1474466833, "creation_date": 1472618884, "last_edit_date": 1495541212, "question_id": 39240939, "link": "https://stackoverflow.com/questions/39240939/node-js-deserialize-floats-at-uneven-offset", "title": "Node.JS deserialize floats at uneven offset", "body": "<p>This question relates to my previous ones:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39238826/nodejs-buffer-bitwise-slicing/39238892?noredirect=1#comment65816073_39238892\">Nodejs buffer bitwise slicing</a></p>\n\n<p>I transmit data through bluetooth LE to a node.js server. Here is the format of serialized data:</p>\n\n<pre><code>top: 10 bit (unsigned integer)\nbottom: 10 bit (unsigned integer)\naccelerometerX: 23 bit (truncated 32-bit floating point)\naccelerometerY: 23 bit\n...\n</code></pre>\n\n<p>Data is received as a node.js buffer. I'm able to parse top and bottom as they are integers, and I can use shift operation on them.</p>\n\n<pre><code>top = data.readUInt16LE() &amp; 0x3FF;\nbottom = data.readUInt16LE(1);\nbottom = (bottom &gt;&gt; 2) &amp; 0x3FF;\n\naccX = data.readUInt32LE(2);\naccX = ((accX &gt;&gt; 4) &amp; 0x7FFFFFF) &lt;&lt; 9;\n</code></pre>\n\n<p>However, for accX are floats. I can't use ReadFloat32LE from node.js as it's not byte aligned. So now I'm reading as uint32, shift it back with 9 least significant digits. How do I get float from its bit representation in NodeJS?</p>\n"}, {"tags": ["c", "static"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1472618715, "post_id": 39240902, "comment_id": 65818458, "body": "Format your code please."}, {"owner": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1472618832, "post_id": 39240902, "comment_id": 65818496, "body": "@Blorgbeard can you please tell the output?"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1472618886, "post_id": 39240902, "comment_id": 65818513, "body": "What he means is: SO has nice <b>markdown</b> to properly format source code. You want to turn to the help center to learn such things <b>prior</b> posting code here. As an example, see how the two lines in my answer are formatted!"}, {"owner": {"reputation": 13817, "user_id": 1005215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33a92149e35c60382fa24bcc2b20722e?s=128&d=identicon&r=PG", "display_name": "Nehal J Wani", "link": "https://stackoverflow.com/users/1005215/nehal-j-wani"}, "edited": false, "score": 2, "creation_date": 1472619262, "post_id": 39240902, "comment_id": 65818611, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/572547/what-does-static-mean-in-a-c-program\">What does &quot;static&quot; mean in a C program?</a>"}, {"owner": {"reputation": 3813, "user_id": 6290553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvOsJ.jpg?s=128&g=1", "display_name": "Raktim Biswas", "link": "https://stackoverflow.com/users/6290553/raktim-biswas"}, "edited": false, "score": 0, "creation_date": 1472622290, "post_id": 39240902, "comment_id": 65819736, "body": "The <code>static</code> variables are initialized only once."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1472618951, "post_id": 39240929, "comment_id": 65818526, "body": "as x is static it should first print 15 and then accordingly as x is static it should print 20 or not?"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 1, "creation_date": 1472619066, "post_id": 39240929, "comment_id": 65818562, "body": "See my updated answer. The point is: you are not &quot;re-initializing&quot;. You are re-assigning. That is not the same thing. You know, you expect that <code>x = x + 5</code> gives x a new value; but then you expect that <code>x = 10</code> does not have an effect?"}], "tags": [], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "is_accepted": false, "score": 4, "last_activity_date": 1472618961, "last_edit_date": 1472618961, "creation_date": 1472618821, "answer_id": 39240929, "question_id": 39240902, "link": "https://stackoverflow.com/questions/39240902/why-the-output-is-15-15-instead-of-15-20/39240929#39240929", "title": "Why the Output is 15 15 instead of 15 20?", "body": "<p>You have code that says:</p>\n\n<pre><code> x = 10;\n x = 15;\n</code></pre>\n\n<p>and that then prints x.</p>\n\n<p>Then you call that function two times.</p>\n\n<p>Why again do you think that the second print should result in a different outcome; compared to the first one?!</p>\n\n<p>You see, you start by assigning: 10. Plus 5. Why should that ever result in 20?</p>\n\n<p>Hint - try changing your code to:</p>\n\n<pre><code>static int x = 10;\nx += 5;\n</code></pre>\n\n<p>Long story short: re-<strong>assigning</strong> is not the same thing as re-<strong>initializing</strong>!</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1472619057, "post_id": 39240948, "comment_id": 65818561, "body": "it is static so x won&#39;t be re initialized again and again"}, {"owner": {"reputation": 13817, "user_id": 1005215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33a92149e35c60382fa24bcc2b20722e?s=128&d=identicon&r=PG", "display_name": "Nehal J Wani", "link": "https://stackoverflow.com/users/1005215/nehal-j-wani"}, "reply_to_user": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 1, "creation_date": 1472619167, "post_id": 39240948, "comment_id": 65818585, "body": "@DhruvBhardwaj &#39;re-initialize&#39; and &#39;re-assign&#39; are different things."}, {"owner": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1472619249, "post_id": 39240948, "comment_id": 65818609, "body": "Can you explain in a simpler way?"}, {"owner": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1472619548, "post_id": 39240948, "comment_id": 65818697, "body": "@M.S Chaudhari but my compiler i.e Dev C++ gave as 15 15"}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "reply_to_user": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1472619814, "post_id": 39240948, "comment_id": 65818792, "body": "@DhruvBhardwaj same o/p 15 20"}, {"owner": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1472620543, "post_id": 39240948, "comment_id": 65819057, "body": "@M.S Chaudhari can you explain?"}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 0, "last_activity_date": 1472621715, "last_edit_date": 1495541309, "creation_date": 1472618923, "answer_id": 39240948, "question_id": 39240902, "link": "https://stackoverflow.com/questions/39240902/why-the-output-is-15-15-instead-of-15-20/39240948#39240948", "title": "Why the Output is 15 15 instead of 15 20?", "body": "<p>Here <code>static</code> variable declared(initialized) as <code>x</code>, then value assigned every time <code>10</code> not initialize.</p>\n\n<p>So, output of your program <code>15</code> and <code>15</code> displayed.</p>\n\n<p>initialization and assignment both are different. please read this <a href=\"https://stackoverflow.com/questions/16217839/is-there-a-difference-between-initializing-a-variable-and-assigning-it-a-value-i\">stack overflow question</a>.</p>\n\n<p>I hope this will help you and make your doubt clear.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1472621017, "post_id": 39241322, "comment_id": 65819237, "body": "Thanks I got it now"}, {"owner": {"reputation": 3419, "user_id": 2225030, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VMt47.jpg?s=128&g=1", "display_name": "Harshil Doshi", "link": "https://stackoverflow.com/users/2225030/harshil-doshi"}, "reply_to_user": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1472622216, "post_id": 39241322, "comment_id": 65819709, "body": "You&#39;re welcome. Voting helpful answer is always acceptable."}], "tags": [], "owner": {"reputation": 3419, "user_id": 2225030, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VMt47.jpg?s=128&g=1", "display_name": "Harshil Doshi", "link": "https://stackoverflow.com/users/2225030/harshil-doshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1472620831, "creation_date": 1472620831, "answer_id": 39241322, "question_id": 39240902, "link": "https://stackoverflow.com/questions/39240902/why-the-output-is-15-15-instead-of-15-20/39241322#39241322", "title": "Why the Output is 15 15 instead of 15 20?", "body": "<p>I think you are getting confused with Reassigning and Re-intializing of static variable. You must have learnt somewhere that static variable dosn't re-initialize itself whenever the function gets called. Hence you are expecting answer 15 &amp; 20.</p>\n\n<p>But the thing is that you are re-assigning the value of x with 10 each and every time. If you modify your code like following then you can achieve what you've expected.</p>\n\n<pre><code>static int x=10;\nx+=5;\n</code></pre>\n\n<p>Here, x gets initialized with 10 first time only. After that, for each and every function call, it will get incremented by 5 only.</p>\n\n<p>Hope this will help and make your doubt clear.</p>\n"}], "owner": {"reputation": 21, "user_id": 5392576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf824da140196122a08abf76319b0a27?s=128&d=identicon&r=PG&f=1", "display_name": "Dhruv Bhardwaj", "link": "https://stackoverflow.com/users/5392576/dhruv-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1472621715, "creation_date": 1472618651, "last_edit_date": 1472619224, "question_id": 39240902, "link": "https://stackoverflow.com/questions/39240902/why-the-output-is-15-15-instead-of-15-20", "title": "Why the Output is 15 15 instead of 15 20?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nvoid print();\n\nint main(){ \n\n    print();    \n    print();    \n    return 0;    \n}\n\nvoid print(){\n\n    static int x;    \n    x=10;    \n    x+=5;    \n    printf(\"%d\\t\",x);\n\n}\n</code></pre>\n\n<p>Output 15 15</p>\n"}, {"tags": ["c", "search", "binary-search"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1472617566, "post_id": 39240603, "comment_id": 65818163, "body": "Have you done <i>any</i> basic debugging? Namely use a debugger and/or debug print statements to trace the execution of your program?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1472617954, "post_id": 39240603, "comment_id": 65818260, "body": "In <code>binary</code> you need to break out of the loop when the search item is found. It took me all of 30 seconds to find that with a debugger."}, {"owner": {"reputation": 31, "user_id": 6547375, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4735af83559a5d5802ab89d2b988167c?s=128&d=identicon&r=PG&f=1", "display_name": "user6547375", "link": "https://stackoverflow.com/users/6547375/user6547375"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1472618069, "post_id": 39240603, "comment_id": 65818282, "body": "Yeah I have used while loop for that and in the end I am returning the final result"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1472618108, "post_id": 39240603, "comment_id": 65818294, "body": "I don&#39;t think you understand. You need a <code>break</code> statement inside the <code>if(x==a[mid])</code> block."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6547375, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4735af83559a5d5802ab89d2b988167c?s=128&d=identicon&r=PG&f=1", "display_name": "user6547375", "link": "https://stackoverflow.com/users/6547375/user6547375"}, "edited": false, "score": 0, "creation_date": 1472618178, "post_id": 39240802, "comment_id": 65818317, "body": "I am not getting the problem"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1472618214, "post_id": 39240802, "comment_id": 65818322, "body": "Correct analysis of the problem. Answer can be improved by explicitly stating how the problem can be fixed."}], "tags": [], "owner": {"reputation": 594, "user_id": 6040113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a03cab99436994f7bc68df23f674729?s=128&d=identicon&r=PG&f=1", "display_name": "monkeyStix", "link": "https://stackoverflow.com/users/6040113/monkeystix"}, "is_accepted": false, "score": 0, "last_activity_date": 1472619595, "last_edit_date": 1472619595, "creation_date": 1472618063, "answer_id": 39240802, "question_id": 39240603, "link": "https://stackoverflow.com/questions/39240603/index-is-not-priting-and-code-is-freezing-in-binary-search-program/39240802#39240802", "title": "Index is not priting and code is freezing in binary search program", "body": "<p>There is a problem with the logic, </p>\n\n<pre><code>mid=(high+low)/2;\nif(x==a[mid])\n{\n    result=mid;\n}\n</code></pre>\n\n<p>if this if statement evaluates to true, then you are stuck in an infinite loop, because you do not change 'low' or 'high' the while statement always evaluates to 'true', and this if also evaluates true, as 'mid' is a function of 'high' and 'low'.</p>\n\n<p>A possible fix would be to add a break statement, or raise a flag, that should be checked for.</p>\n"}, {"comments": [{"owner": {"reputation": 256, "user_id": 4878553, "user_type": "registered", "profile_image": "https://graph.facebook.com/765106806941154/picture?type=large", "display_name": "Gaurav Chauhan", "link": "https://stackoverflow.com/users/4878553/gaurav-chauhan"}, "edited": false, "score": 0, "creation_date": 1472618512, "post_id": 39240859, "comment_id": 65818403, "body": "@user6547375 please try to dry run for a small test case. you will get the problem in the code yourself."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1472625300, "post_id": 39240859, "comment_id": 65821045, "body": "<code>going into an infinite loop when low and high becomes equal</code> Please reconsider. The if-statement doesn&#39;t become true whenever <code>low == high</code>"}, {"owner": {"reputation": 256, "user_id": 4878553, "user_type": "registered", "profile_image": "https://graph.facebook.com/765106806941154/picture?type=large", "display_name": "Gaurav Chauhan", "link": "https://stackoverflow.com/users/4878553/gaurav-chauhan"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1472641194, "post_id": 39240859, "comment_id": 65831372, "body": "^ yes I was considering the case when the target is already present in the array."}], "tags": [], "owner": {"reputation": 256, "user_id": 4878553, "user_type": "registered", "profile_image": "https://graph.facebook.com/765106806941154/picture?type=large", "display_name": "Gaurav Chauhan", "link": "https://stackoverflow.com/users/4878553/gaurav-chauhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1472641270, "last_edit_date": 1472641270, "creation_date": 1472618410, "answer_id": 39240859, "question_id": 39240603, "link": "https://stackoverflow.com/questions/39240603/index-is-not-priting-and-code-is-freezing-in-binary-search-program/39240859#39240859", "title": "Index is not priting and code is freezing in binary search program", "body": "<p>The while loop in your binary function is going into an infinite loop when low and high becomes equal for the case when target is present in the array. You are not breaking the loop when you get the result here</p>\n\n<pre><code>if(x==a[mid])\n{\n        result=mid;\n}\n</code></pre>\n\n<p>Apply a break statement in this if statement after getting the result to exit from the loop.</p>\n\n<p>P.s. You are assuming the input to be sorted here. Try not to do so.</p>\n"}, {"tags": [], "owner": {"reputation": 3419, "user_id": 2225030, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VMt47.jpg?s=128&g=1", "display_name": "Harshil Doshi", "link": "https://stackoverflow.com/users/2225030/harshil-doshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1472621265, "creation_date": 1472621265, "answer_id": 39241414, "question_id": 39240603, "link": "https://stackoverflow.com/questions/39240603/index-is-not-priting-and-code-is-freezing-in-binary-search-program/39241414#39241414", "title": "Index is not priting and code is freezing in binary search program", "body": "<p>Change your code a little bit:</p>\n\n<pre><code>mid=(high+low)/2;\n    if(x==a[mid])\n    {\n        result=mid;\n         break;       // to break the infinite loop\n    }\n</code></pre>\n\n<p>Only break statement is needed in your code as above; everything else seems fine.\nHope it will help.</p>\n"}], "owner": {"reputation": 31, "user_id": 6547375, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4735af83559a5d5802ab89d2b988167c?s=128&d=identicon&r=PG&f=1", "display_name": "user6547375", "link": "https://stackoverflow.com/users/6547375/user6547375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1472641270, "creation_date": 1472616715, "last_edit_date": 1472617099, "question_id": 39240603, "link": "https://stackoverflow.com/questions/39240603/index-is-not-priting-and-code-is-freezing-in-binary-search-program", "title": "Index is not priting and code is freezing in binary search program", "body": "<p>I have made a program of binary search in which I encountered a problem that the program is freezing before printing the index value of the array.\nVariable <code>high</code> is for last index , <code>low</code> is for first index of the array.\nI am hereby attaching the code</p>\n\n<pre><code>// binary search\n#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nint binary(int a[],int n,int x);\nvoid main()\n{\n    int arr[10];\n    int i,x,n,r;\n    clrscr();\n    printf(\"Enter number of data elements\");\n    scanf(\"%d\",&amp;n);\n    for(i=0;i&lt;n;i++)\n    {\n        scanf(\"%d\",&amp;arr[i]);\n    }\n    printf(\"Enter the element to be search\");\n    scanf(\"%d\",&amp;x);\n    r=binary(arr,n,x);\n    if(r==-1)\n    {\n        printf(\"Not found\");\n    }\n    else\n    {\n        printf(\"Found : %d\",r);\n    }\n    getch();\n}\nint binary(int a[],int n,int x)\n{\n    int high=n-1;\n    int low=0;\n    int result=-1,mid;\n    while(low&lt;=high)\n    {\n        mid=(high+low)/2;\n        if(x==a[mid])\n        {\n            result=mid;\n        }\n        else if(x&lt;a[mid])\n        {\n            high=mid-1;\n        }\n        else if(x&gt;a[mid])\n        {\n            low=mid+1;\n        }\n    }\n    return (result);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1472616089, "post_id": 39240388, "comment_id": 65817811, "body": "The chances are that the specification of <code>abs()</code> was finalized before C had <code>unsigned</code> types at all."}, {"owner": {"reputation": 441, "user_id": 6776860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6e7ab81e61389cca67d10c5c779777?s=128&d=identicon&r=PG&f=1", "display_name": "barcelona_delpy", "link": "https://stackoverflow.com/users/6776860/barcelona-delpy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472617278, "post_id": 39240388, "comment_id": 65818096, "body": "I think it&#39;s the right answer,thanks a lot @Jonathan Leffler"}], "answers": [{"tags": [], "owner": {"reputation": 3447, "user_id": 5244653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9412ec207649931753eb77f7afca2599?s=128&d=identicon&r=PG&f=1", "display_name": "Brick", "link": "https://stackoverflow.com/users/5244653/brick"}, "is_accepted": false, "score": 4, "last_activity_date": 1472615574, "last_edit_date": 1495541697, "creation_date": 1472615574, "answer_id": 39240446, "question_id": 39240388, "link": "https://stackoverflow.com/questions/39240388/get-the-most-negative-numbers-absolute-value/39240446#39240446", "title": "get the most negative number&#39;s absolute value", "body": "<p>There are a variety of issues in mixing signed and unsigned values in calculations, so the question would be: What are most users going to do with the result of calling <code>abs(int)</code>?  I think the most likely answer - or at least a very common one - is that they'll do further arithmetic with the result.  In that case, you almost surely want to stay within <code>int</code> rather than getting back an <code>unsigned</code>.</p>\n\n<p>Here's another post on mixing signed with unsigned in calculations: <a href=\"https://stackoverflow.com/questions/25609091/what-happens-when-i-mix-signed-and-unsigned-types\">what happens when i mix signed and unsigned types ?</a></p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": -2, "last_activity_date": 1472617895, "creation_date": 1472617895, "answer_id": 39240778, "question_id": 39240388, "link": "https://stackoverflow.com/questions/39240388/get-the-most-negative-numbers-absolute-value/39240778#39240778", "title": "get the most negative number&#39;s absolute value", "body": "<p>A 16 bit signed integer has a range of <code>-32768</code> to <code>+32767</code></p>\n\n<p>So <code>INT_MIN</code> will be <code>-32768</code>. The absolute value of that is outside the range of an integer. Therefore it is not defined.</p>\n"}], "owner": {"reputation": 441, "user_id": 6776860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6e7ab81e61389cca67d10c5c779777?s=128&d=identicon&r=PG&f=1", "display_name": "barcelona_delpy", "link": "https://stackoverflow.com/users/6776860/barcelona-delpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "closed_date": 1472622053, "answer_count": 2, "score": 2, "last_activity_date": 1472617895, "creation_date": 1472615170, "last_edit_date": 1472615258, "question_id": 39240388, "link": "https://stackoverflow.com/questions/39240388/get-the-most-negative-numbers-absolute-value", "closed_reason": "Duplicate", "title": "get the most negative number&#39;s absolute value", "body": "<p>In the abs's man manual, there's a NOTES: Trying to take the absolute value of the most negative integer is not defined.</p>\n\n<p>And the prototype of abs is\uff1a<code>int abs(int j);</code>   </p>\n\n<p>Why does abs return <code>int</code>? As the return value will be positive, why not return <code>unsigned int</code>?</p>\n\n<p>If abs returned <code>unsigned int</code>, the solution of the most negative integer's absolute value is simple like this:</p>\n\n<pre><code>if(INT_MIN == j) \n  return (unsigned int)j; \n</code></pre>\n"}, {"tags": ["c", "ascii"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1472614955, "post_id": 39240331, "comment_id": 65817552, "body": "Don&#39;t use 49 and 57; use <code>&#39;1&#39;</code> and <code>&#39;9&#39;</code>.   (Is that a misspelling of &#39;Impute&#39; or &#39;Input&#39;?)  It&#39;s better to say something like &quot;Enter a single digit between 1 and 9&quot;, clearly indicating the range.  I might even be good to show the value you&#39;re rejecting."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 2, "creation_date": 1472615008, "post_id": 39240331, "comment_id": 65817564, "body": "Are you expecting the function to return the ASCII code, or the number itself? If it&#39;s the latter, you need return <code>numValue - &#39;0&#39;;</code>"}, {"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "edited": false, "score": 1, "creation_date": 1472616091, "post_id": 39240331, "comment_id": 65817812, "body": "<code>&lt;ctype.h&gt;</code> has <code>isdigit( ch )</code> and <code>&lt;string.h&gt;</code> has <code>strlen( str )</code>, you can use that to solve your problem."}], "answers": [{"tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 0, "last_activity_date": 1472614836, "creation_date": 1472614836, "answer_id": 39240362, "question_id": 39240331, "link": "https://stackoverflow.com/questions/39240331/boolean-expressions-on-c/39240362#39240362", "title": "Boolean expressions on C", "body": "<p>You only set <code>numValue</code> once - for the first <code>getchar()</code> - looks like you expect it to be set after every <code>getchar()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472615329, "post_id": 39240378, "comment_id": 65817633, "body": "Suppose the user types 567 and newline the first time around.  This code would read the 5 outside the loop; it would read the 6 in your loop and make a recursive call to the function, which would then read 7 and a newline and would be happy with life.  The user might be puzzled about why the number used was 7 when they typed 567, though."}], "tags": [], "owner": {"reputation": 1041, "user_id": 4233629, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-afuW4zm4V5Q/AAAAAAAAAAI/AAAAAAAAHR4/K4nGzVl8rsM/photo.jpg?sz=128", "display_name": "Sush", "link": "https://stackoverflow.com/users/4233629/sush"}, "is_accepted": false, "score": -1, "last_activity_date": 1472615073, "creation_date": 1472615073, "answer_id": 39240378, "question_id": 39240331, "link": "https://stackoverflow.com/questions/39240331/boolean-expressions-on-c/39240378#39240378", "title": "Boolean expressions on C", "body": "<pre><code> while((temp = getchar()) != '\\n'){\n        digitCounter++;\n    }\n</code></pre>\n\n<p>could be</p>\n\n<pre><code> while((temp = getchar()) != '\\n'){\n        if (temp &lt; 49 || temp &gt; 57 || ++digitCounter&gt;0)\n            return validateUserInput();\n    }\n</code></pre>\n\n<p>This way makes it simple I think</p>\n"}, {"comments": [{"owner": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "edited": false, "score": 0, "creation_date": 1472636979, "post_id": 39242496, "comment_id": 65828341, "body": "I guess it would be better to use <code>for(;;)</code> loop instead of  <code>getinput:</code> and replace <code>goto getinput</code> with <code>continue</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "edited": false, "score": 0, "creation_date": 1472680104, "post_id": 39242496, "comment_id": 65855059, "body": "Yes, that&#39;s possible, but I&#39;m not sure it necessarily improves anything. You basically move your <code>getchar()</code> above the existing <code>for</code>, turn the <code>for</code> into an <code>if</code> to which you wrap the bottom <code>extra</code> check in the <code>else</code> and wrap all of that in a <code>for(;;)</code> moving the <code>EOF</code> below the loop while also including an <code>EOF</code> check after the initial <code>getchar()</code>. You can reverse the <code>if</code> logic if you want your digit check first, but that kind of muddies the logic a bit. Either way will work."}, {"owner": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "edited": false, "score": 0, "creation_date": 1472681216, "post_id": 39242496, "comment_id": 65855445, "body": "<code>for(;;)</code> is an indication of infinite loop so reader will catch this from the beginning. So it will definitely improve readability. Other changes not needed."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 2320, "user_id": 2751535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vdtv.jpg?s=128&g=1", "display_name": "j2ko", "link": "https://stackoverflow.com/users/2751535/j2ko"}, "edited": false, "score": 0, "creation_date": 1472684752, "post_id": 39242496, "comment_id": 65856586, "body": "I guess I would just need to see an example of that. You still need to handle the <code>extra</code> loop above and empty the input buffer in the event of multiple digits inside the <i>infinite loop</i>. On each read you are going to need to check <code>EOF</code> or risk undefined behavior calling <code>getchar</code> again on a stream with an error condition set. What part am I over-thinking? Controlling when the prompt is displayed along with the desired error messages is another matter altogether."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1472625862, "creation_date": 1472625862, "answer_id": 39242496, "question_id": 39240331, "link": "https://stackoverflow.com/questions/39240331/boolean-expressions-on-c/39242496#39242496", "title": "Boolean expressions on C", "body": "<p>There are a couple of additional points to look at when taking input with your input routine. What if the user needs to <em>cancel</em> input? (e.g. presses <kbd>ctrl+d</kbd>, or <kbd>ctrl+z</kbd> on windows) As you have it written, there is no way to cancel the loop. (while that works for your purpose of forcing only a single input of <code>1-9</code>, it leaves no way to cancel) If you trap <code>EOF</code>, you provide both, a way to cancel, and a way to indicate cancellation back in the calling function (e.g. by checking the return against <code>EOF</code>)</p>\n\n<p>While recursion has its place, be aware that each recursion is itself a separate function call that requires a separate stack, and all the other trappings of a function call. There are many times when that can be avoided with a simple <code>goto</code> statement.  glibc makes regular use of <code>goto</code> (e.g., check the source of <code>qsort</code>, <code>getdelim</code>, etc..) In your case, a single <code>goto</code> label can completely eliminate the need for recursion. For example, you could do something similar to the following while meeting all of your criteria:</p>\n\n<pre><code>int validateuserinput()\n{\n    int c, extra, tmp;\n\n    getinput:;  /* a simple goto can avoid recursion completely */\n    extra = 0;\n    printf (\"Please enter a number from 1 to 9: \");\n    /* prompt/loop while chars not between 1 and 9 */\n    for (c = getchar(); (c &lt; '1' || '9' &lt; c ); c = getchar()) {\n        if (c == '\\n') {    /* no digits in input */\n            fprintf (stderr, \"error: invalid input.\\n\");\n            goto getinput;\n        }\n        else if (c == EOF) {  /* trap EOF */\n            fprintf (stderr, \"\\nerror: input canceled.\\n\");\n            return c;\n        }\n    }\n    /* empty input buffer -- increment extra count */\n    for (tmp = getchar(); tmp != '\\n' &amp;&amp; tmp != EOF; tmp = getchar())\n        extra++;\n\n    if (extra) { /* if extra chars -- input too long */\n        fprintf (stderr, \"error: input too long.\\n\");\n        goto getinput;\n    }\n\n    return c - '0';  /* return integer value instead of ASCII value */\n}\n</code></pre>\n\n<p>(just a style note, C generally avoids the use of <em>camelCase</em> variable names in favor of lower-case, that's just a generality, it's entirely up to you)</p>\n\n<p>You can check the function (and respond to a cancellation) with the following short bit of code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint validateuserinput();\n\nint main (void) {\n\n    int n;\n\n    if ((n = validateuserinput()) != EOF)\n        printf (\"\\n valid input : %d\\n\", n);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>Testing accepting input of only 1-9:</p>\n\n<pre><code>$ ./bin/inputhandler\nPlease enter a number from 1 to 9: Hello World!\nerror: invalid input.\nPlease enter a number from 1 to 9: ?\nerror: invalid input.\nPlease enter a number from 1 to 9: 0\nerror: invalid input.\nPlease enter a number from 1 to 9: 23\nerror: input too long.\nPlease enter a number from 1 to 9: 6\n\n valid input : 6\n</code></pre>\n\n<p>Testing input cancellation (e.g. <kbd>ctrl+d</kbd>, or <kbd>ctrl+z</kbd> on windows)</p>\n\n<pre><code>$ ./bin/inputhandler\nPlease enter a number from 1 to 9:\nerror: input canceled.\n</code></pre>\n\n<p>While there is nothing wrong with using recursion, it always helps to ask \"<em>Does this need to be a recursive function to begin with?</em>\" Sometimes the answer will be yes, but often there are simple ways to avoid the additional overhead. (<em>note:</em> the overhead with a few recursions is minimal so it isn't a big consideration in your case, but if you unwittingly call a recursive function that spins a million times, it rapidly becomes a concern)</p>\n\n<p>Look over all answers, and if you have any questions, just let us know.</p>\n"}], "owner": {"reputation": 173, "user_id": 2778243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eda7caeff7b86c69409272fa755c1b04?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Luis", "link": "https://stackoverflow.com/users/2778243/carlos-luis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 39242496, "answer_count": 3, "score": 2, "last_activity_date": 1472625862, "creation_date": 1472614644, "last_edit_date": 1472615136, "question_id": 39240331, "link": "https://stackoverflow.com/questions/39240331/boolean-expressions-on-c", "title": "Boolean expressions on C", "body": "<p>Creating a simple C function that prevents the user from entering anything other than a number between 1 and 9. Any other input including letters symbols and any number that is either less than 1 and greater than 9 should not be accepted.\nSo far its pretty straight forward; however, the part where the code is supposed to check that the entered character is not a symbol or letter is not working the way I wanted it to work.</p>\n\n<pre><code>int validateUserInput(){\n    printf(\"%s\\n\", \"Please enter a number from 1 to 9: \");\n\n    char value = getchar();\n    int numValue = value;\n    char temp;\n\n    int digitCounter = 0;\n\n    while((temp = getchar()) != '\\n'){\n        digitCounter++;\n    }\n    //if there is more than 1 digit.\n    if(digitCounter&gt;0){\n        printf(\"%s\\n\",\"Input too long!\");\n        return validateUserInput();\n    }\n    // if the char entered is not between 1 and 9\n    // this part is giving me a hard time.\n    else if(numValue &lt; 49 || numValue &gt; 57){\n        printf(\"%s\\n\", \"Imput is not within the valid parameters\");\n        return validateUserInput();\n    }\n    return numValue;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "malloc", "free", "realloc"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1472614097, "post_id": 39240029, "comment_id": 65817361, "body": "Just a note. Your allocation by repeatedly calling <code>realloc</code> for every character read from the file is about the most inefficient use of <code>realloc</code> you can dream up. Instead, allocate some reasonable number of bytes (e.g. <code>1024</code>, <code>4096</code>, or more) and then keep an index and read characters from the file until the index (<code>+1</code>) reaches your original limit, then call <code>realloc</code> and allocate another <code>4096</code>, etc. and repeat. How many calls to <code>realloc</code> will you make on a 1-Megabyte file?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472616673, "post_id": 39240029, "comment_id": 65817960, "body": "What David said, \u2026 Or double the amount of space allocated each time you call <code>realloc()</code> \u2014 optionally doing a final shrinking <code>realloc()</code> if there is too much extra space to spare (e.g. if there&#39;s more than 1 KiB of unused space)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1472616729, "post_id": 39240029, "comment_id": 65817976, "body": "@DavidC.Rankin the inner working of the <code>realloc</code> function will just be to do that same check and then invoke some other function if the current capacity is exceeded, so I would argue that it unnecessarily complicates OP&#39;s code to hoist those checks up. Probably the OS supplies blocks of several kilobytes at least."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472616844, "post_id": 39240029, "comment_id": 65817996, "body": "&quot;for some reason I am inclined to believe that the data is not actually &quot;deleted&quot; - this isn&#39;t very logical"}], "answers": [{"tags": [], "owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "is_accepted": true, "score": 4, "last_activity_date": 1472625444, "last_edit_date": 1472625444, "creation_date": 1472614494, "answer_id": 39240311, "question_id": 39240029, "link": "https://stackoverflow.com/questions/39240029/why-not-use-free-in-this-instance/39240311#39240311", "title": "Why not use free() in this instance", "body": "<p>When allocating memory (or resources in general), you must make sure that you have clear ownership semantics.  Who owns the allocated resource and is responsible for freeing it?</p>\n\n<p>For a function that allocate resources, sane semantics are that the function returns the allocated resource if successful, and unless otherwise specified, the caller owns that resource.  If the function fails, the caller should not have to perform any cleanup.</p>\n\n<p>Your <code>load()</code> function allocates a buffer.  Throughout most of its function body, <code>load()</code> owns that buffer.  Just before it returns success, it effectively <em>transfers</em> ownership of that buffer to the caller (via the <code>content</code> output argument).  If <code>load()</code> had a failure point after allocating the buffer, then it should call <code>free(buffer)</code> along that failure path.</p>\n\n<hr>\n\n<p>I also feel compelled to point out a few issues with your code:</p>\n\n<pre><code>BYTE* buffer = malloc(sizeof(BYTE));\n</code></pre>\n\n<p>You should test if <code>malloc</code> fails.  Additionally, <code>sizeof (BYTE)</code> is not useful since it is, by definition, 1.</p>\n\n<pre><code>buffer = realloc(buffer, size + 1);\n</code></pre>\n\n<p>This is poor practice.  If <code>realloc</code> fails, you will lose the old value of <code>buffer</code> and will leak memory.  It's better to do:</p>\n\n<pre><code>BYTE* tmp = realloc(buffer, size + 1);\nif (tmp == NULL)\n{\n    free(buffer);\n    return false;\n}\nbuffer = tmp;\n</code></pre>\n\n<p>Finally, growing your buffer by 1 byte every time is very inefficient.  More typical practices would be to double the buffer size or to grow it by a larger amounts.</p>\n"}], "owner": {"reputation": 65, "user_id": 6632730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb66018cd54e95b2041c8e925738561d?s=128&d=identicon&r=PG&f=1", "display_name": "SillyRab", "link": "https://stackoverflow.com/users/6632730/sillyrab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 39240311, "answer_count": 1, "score": 1, "last_activity_date": 1472625444, "creation_date": 1472612029, "question_id": 39240029, "link": "https://stackoverflow.com/questions/39240029/why-not-use-free-in-this-instance", "title": "Why not use free() in this instance", "body": "<p>so I have another newbie question for you. This function is meant to read all the bytes from a passed in file, store them in the heap and then store the address to those bytes in the passed in 'content' parameter and the length in the passed in 'length' parameter.</p>\n\n<pre><code>bool load(FILE* file, BYTE** content, size_t* length)\n{\nif (file == NULL)\n{\n    return false;\n}\n\n//array to hold the bytes??\nBYTE* buffer = malloc(sizeof(BYTE));\n\n//To hold the number of bytes currently loaded\nsize_t size = 0;\n\n\n//Pointer to keep track of where I am adding the data to in buffer\n\n//get all the bytes from the file and put them in the buffer\nfor(int i = fgetc(file); i != EOF; i = fgetc(file))\n{\n    buffer[size] = (char) i; \n    size++;\n    buffer = realloc(buffer, size + 1);\n}\n\n//dereference length\n*length = size;\n\n//derefernce content\n*content = buffer;\n\n//free(buffer);\nreturn true;\n}\n</code></pre>\n\n<p>So previously the larger program that this function was a part of did not work, yet when I commented out the </p>\n\n<pre><code>free(buffer);\n</code></pre>\n\n<p>call at the bottom my program started to work perfectly. I was motivated to comment this out when I came across a double free error. So my question is: why does calling free in this instance cause an error?</p>\n\n<p>My intuition tells me that it is because the data that </p>\n\n<pre><code>*content\n</code></pre>\n\n<p>points to is now \"deleted\" and so my program wasn't working. Furthermore somewhere later on in the code I free content* as well, which is where the double free error comes from. However for some reason I am inclined to believe that the data is not actually \"deleted\".</p>\n\n<p>Sorry if this is a lot, I have been confused by memory allocation, free, and pointers for a while and am trying to gain a deeper understanding.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1472606061, "post_id": 39239281, "comment_id": 65815667, "body": "Integer division != Floating point division."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472606064, "post_id": 39239281, "comment_id": 65815669, "body": "When you divide two integers, you get an integer (rounding towards zero). It doesn&#39;t magically change this if you then go on to assign this integer to a float."}], "answers": [{"tags": [], "owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": false, "score": 3, "last_activity_date": 1472606942, "last_edit_date": 1472606942, "creation_date": 1472606078, "answer_id": 39239305, "question_id": 39239281, "link": "https://stackoverflow.com/questions/39239281/why-is-my-code-outputting-0s/39239305#39239305", "title": "Why is my code outputting 0&#39;s?", "body": "<p>What you are seeing is integer truncation.  The decimal portion of the end calories amount is being cut off.  One way around this is to divide by a floating point number, i.e. divide by:</p>\n\n<pre><code>(CALS_PER_POUND * 1.0)\n</code></pre>\n\n<p>Or, if you don't mind changing your constants, you can use:</p>\n\n<pre><code>#define CALS_PER_POUND 3500.0f\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6776620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eaadd4aabeed72bac47d1a76c17cfb?s=128&d=identicon&r=PG&f=1", "display_name": "beginner", "link": "https://stackoverflow.com/users/6776620/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1472606114, "answer_count": 1, "score": 0, "last_activity_date": 1472606942, "creation_date": 1472605900, "question_id": 39239281, "link": "https://stackoverflow.com/questions/39239281/why-is-my-code-outputting-0s", "closed_reason": "Duplicate", "title": "Why is my code outputting 0&#39;s?", "body": "<p>The output is supposed to be small decimal value. I've gone through it and it seems right, but the output keeps coming out as zero. For example, if I entered 120, 230, 20 and 15 respectively, it should spit out 0.017 , but I still get zero.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define WALK_CAL 5\n#define STAND_CAL 2\n#define DRINK_CAL 20\n#define FOOD_CAL 40\n#define CALS_PER_POUND 3500\n\nint main(void) {\n\n    int walking_min, standing_min;\n    int drinking_min, eating_min;\n    float end_calories;\n\n    //Get User Input\n    printf(\"How long were you walking (in minutes) ?\\n\");\n    scanf(\"%d\", &amp;walking_min);\n\n    printf(\"How long were you standing (in minutes) ?\\n\");\n    scanf(\"%d\", &amp;standing_min);\n\n    printf(\"How long were you drinking (in minutes) ?\\n\");\n    scanf(\"%d\", &amp;drinking_min);\n\n    printf(\"How long were you eating (in minutes) ?\\n\");\n    scanf(\"%d\", &amp;eating_min);\n\n    //Evaluate User Input\n    end_calories = ( ( (WALK_CAL*walking_min) + (STAND_CAL*standing_min) - (DRINK_CAL*drinking_min) - (FOOD_CAL*eating_min) ) / CALS_PER_POUND );\n\n    //Output Final Value\n    printf(\"You lost %.3f pounds today!\\n\", end_calories);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "arrays", "pointers", "hash"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1472606204, "post_id": 39239278, "comment_id": 65815703, "body": "try <code>(*array_pointer)[*hash_pointer]</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1472606356, "post_id": 39239278, "comment_id": 65815732, "body": "I honestly see no sense in <code>array_pointer</code> in this code at all. Storing the address of an automatic variable seems rather pointless, especially since its usage later is the very thing that tripped you up. Likewise to <code>hash_pointer</code>. Why not just use <code>hash_array[hash]</code>. ??"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1472607223, "post_id": 39239278, "comment_id": 65815921, "body": "@Carlos: in <code>int* x, y;</code> what is the type of <code>y</code>?"}, {"owner": {"reputation": 69, "user_id": 6776568, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0KMVFFWM1UE/AAAAAAAAAAI/AAAAAAAABwY/WjyfxdSjn4E/photo.jpg?sz=128", "display_name": "Carlos", "link": "https://stackoverflow.com/users/6776568/carlos"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1473213050, "post_id": 39239278, "comment_id": 66049808, "body": "@WhozCraig. I want to be able to access the array outside the function it was created in. The pointers are there because I don&#39;t want to create a copy of the array when I pass it to to another function."}, {"owner": {"reputation": 69, "user_id": 6776568, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0KMVFFWM1UE/AAAAAAAAAAI/AAAAAAAABwY/WjyfxdSjn4E/photo.jpg?sz=128", "display_name": "Carlos", "link": "https://stackoverflow.com/users/6776568/carlos"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1473213180, "post_id": 39239278, "comment_id": 66049831, "body": "@iharob. Not sure what the relevancy of your question is. I don&#39;t have anything like that in my code."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1473222209, "post_id": 39239278, "comment_id": 66051598, "body": "@Carlos you don&#39;t need to load up otherwise-useless pointers to do that. Just send the array address to whatever function you&#39;re calling. The parameter list of the function, if properly declared will accept the pointer gleefully. In other words, if you have some function where you call <code>func(array_pointer)</code>, then you should be able to simply do <code>func(&amp;hash_array)</code>."}, {"owner": {"reputation": 69, "user_id": 6776568, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0KMVFFWM1UE/AAAAAAAAAAI/AAAAAAAABwY/WjyfxdSjn4E/photo.jpg?sz=128", "display_name": "Carlos", "link": "https://stackoverflow.com/users/6776568/carlos"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1473486647, "post_id": 39239278, "comment_id": 66170407, "body": "@WhozCraig Thanks for tip. I&#39;m still a noob and it&#39;s been painful these past few days. I redid my code without the use of arrays of pointers, instead using arrays of strings char str[# of strings][length of string]. Takes up a bunch of space, but less painful to work with."}], "answers": [{"tags": [], "owner": {"reputation": 2295, "user_id": 792779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99528e625676b23a593f5a3daa005793?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/792779/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1472607825, "last_edit_date": 1472607825, "creation_date": 1472607324, "answer_id": 39239427, "question_id": 39239278, "link": "https://stackoverflow.com/questions/39239278/properly-dereferencing-an-array-of-strings/39239427#39239427", "title": "Properly dereferencing an array of strings", "body": "<p>The issue you're seeing is because of the operator precedence of the dereference operator <code>*</code>. </p>\n\n<p>The following are all equivalent:</p>\n\n<p><code>*array_pointer[*hash_pointer]</code></p>\n\n<p><code>*array_pointer[hash]</code></p>\n\n<p><code>*(array_pointer[hash])</code></p>\n\n<p><code>*((&amp;hash_array)[hash])</code></p>\n\n<p><code>*(*(&amp;hash_array + hash))</code></p>\n\n<p>The problem is here: <code>*(&amp;hash_array + hash)</code>. You're attempting to dereference a pointer to some memory location offset from the location of where the pointer <code>hash_array</code> is stored, rather than where it points, which is causing undefined behavior.</p>\n"}], "owner": {"reputation": 69, "user_id": 6776568, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0KMVFFWM1UE/AAAAAAAAAAI/AAAAAAAABwY/WjyfxdSjn4E/photo.jpg?sz=128", "display_name": "Carlos", "link": "https://stackoverflow.com/users/6776568/carlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472607825, "creation_date": 1472605878, "question_id": 39239278, "link": "https://stackoverflow.com/questions/39239278/properly-dereferencing-an-array-of-strings", "title": "Properly dereferencing an array of strings", "body": "<p>I'm working on a spell checking program for a class and am running into trouble trying to make the hash array accessible to other functions by using pointers.</p>\n\n<p>Below is just a small part of the code since the program is too large to paste. Basic idea of this part of the code is:</p>\n\n<p>-Create array and pointer to array. \n-Hash each word and use the value as index in array. \n-Use pointer to store the hashed value. \n-Access the array using the pointer for the array and hashed value. </p>\n\n<p>As noted below, directly accessing the word stored in the array works, but I get a seg fault when trying to use the pointers to access the word stored in the array.</p>\n\n<pre><code>==1845== Invalid read of size 8\n==1845==    at 0x401367: load (dictionary.c:133)\n==1845==    by 0x40095D: main (speller.c:45)\n==1845==  Address 0xfffc3fab8 is not stack'd, malloc'd or (recently) free'd\n\n\nchar** hash_array = calloc(HASH_TABLE_SIZE, sizeof(*hash_array));\nchar*** array_pointer;\n\n// storing the address of the hash array in pointer\narray_pointer = &amp;hash_array;\n\nuint32_t* hash_pointer;\nhash_pointer = NULL;\n\nuint32_t hash = hashlittle(word_buffer, word_length, 1578459744);\nhash_pointer = &amp;hash;\n\n// this prints out the word successfully\nprintf(\"word in h-array: %s\\n\", hash_array[hash]);\n\n// this seg faults\nprintf(\"word in h-array: %s\\n\", *array_pointer[*hash_pointer]);\n</code></pre>\n"}, {"tags": ["c", "windows", "codeblocks"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1472604183, "post_id": 39239073, "comment_id": 65815292, "body": "Try <code>mingw32-make</code> instead. That is, without the <code>Makefile</code> arg as that tells make to build <code>Makefile</code> which is clearly not what you want."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1472604301, "post_id": 39239073, "comment_id": 65815320, "body": "If you downloaded the sourcecode you have to run <code>.&#47;configure</code> first"}, {"owner": {"reputation": 269, "user_id": 2645162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f657ca67235bad1e5e676308184ab134?s=128&d=identicon&r=PG&f=1", "display_name": "MathMajor", "link": "https://stackoverflow.com/users/2645162/mathmajor"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1472604415, "post_id": 39239073, "comment_id": 65815339, "body": "@deamentiaemundi I am on Windows 10. I don&#39;t think we have that command."}, {"owner": {"reputation": 269, "user_id": 2645162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f657ca67235bad1e5e676308184ab134?s=128&d=identicon&r=PG&f=1", "display_name": "MathMajor", "link": "https://stackoverflow.com/users/2645162/mathmajor"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1472604485, "post_id": 39239073, "comment_id": 65815353, "body": "@kaylum I get <code>mingw32-make: *** No targets specified and no makefile found.  Stop.</code>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1472604553, "post_id": 39239073, "comment_id": 65815363, "body": "As pointed out you need to run <code>configure</code>. That is a script that comes with the library. I suggest you read the <a href=\"https://github.com/kimwalisch/primesieve#build-requirements\" rel=\"nofollow noreferrer\">library&#39;s build instructions</a>"}, {"owner": {"reputation": 269, "user_id": 2645162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f657ca67235bad1e5e676308184ab134?s=128&d=identicon&r=PG&f=1", "display_name": "MathMajor", "link": "https://stackoverflow.com/users/2645162/mathmajor"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1472604651, "post_id": 39239073, "comment_id": 65815388, "body": "@kaylum Thanks but I did already read through that. The part containing configure is listed under (unix-like OS&#39;s) and I am on Windows 10. The only instructions for Windows is for Visual C++ which I am also not using :("}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1472604739, "post_id": 39239073, "comment_id": 65815407, "body": "But you are using a Unix-like OS/environment. That is what mingw provides for you. Whether it will actually work or not with mingw is another matter. But you need to at least try those instructions."}, {"owner": {"reputation": 269, "user_id": 2645162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f657ca67235bad1e5e676308184ab134?s=128&d=identicon&r=PG&f=1", "display_name": "MathMajor", "link": "https://stackoverflow.com/users/2645162/mathmajor"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1472604788, "post_id": 39239073, "comment_id": 65815422, "body": "@kaylum The <code>.&#47;configure</code> command does not work."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1472604908, "post_id": 39239073, "comment_id": 65815447, "body": "And did you run <code>autogen.sh</code>? If it doesn&#39;t work then we can&#39;t really help you here because you may be in an environment that the library author does not support. Making that work under such a circumstance would be too broad for an SO question."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1472605205, "post_id": 39239073, "comment_id": 65815507, "body": "Here&#39;s  somebody who succesfully tried to compile another lib with the same problem as you <a href=\"https://groups.google.com/forum/#!topic/ppp-public/CuTWEfUcPiw\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/ppp-public/CuTWEfUcPiw</a>"}, {"owner": {"reputation": 2295, "user_id": 792779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99528e625676b23a593f5a3daa005793?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/792779/john"}, "edited": false, "score": 0, "creation_date": 1472609169, "post_id": 39239073, "comment_id": 65816292, "body": "Do you also have MSYS installed? <code>configure</code> is a shell script, you need to run it within a POSIX compliant shell."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1472615338, "post_id": 39239073, "comment_id": 65817635, "body": "There are two options.  1) you could try to use the instructions for Visual C++ (you would have to make some changes possibly) or 2) you could install Cygwin or MSYS to get a unix like sub-system but you really don&#39;t need to - Windows 10 comes with a copy of Ubuntu&#39;s userspace (including bash) which you can install under Add and Remove Features (instructions: <a href=\"https://www.youtube.com/watch?v=XUjktkGzlMg\" rel=\"nofollow noreferrer\">youtube.com/watch?v=XUjktkGzlMg</a> )"}, {"owner": {"reputation": 269, "user_id": 2645162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f657ca67235bad1e5e676308184ab134?s=128&d=identicon&r=PG&f=1", "display_name": "MathMajor", "link": "https://stackoverflow.com/users/2645162/mathmajor"}, "edited": false, "score": 0, "creation_date": 1472621658, "post_id": 39239073, "comment_id": 65819490, "body": "I used MSYS and it seems to work but now I cannot link it!"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1472716072, "post_id": 39239073, "comment_id": 65866121, "body": "@MathMajor, should it be possible to post some code?  Are you making a normal static linking library? a shared library? What operating system are you trying to install it to?  Do you have source code? where is it?"}], "owner": {"reputation": 269, "user_id": 2645162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f657ca67235bad1e5e676308184ab134?s=128&d=identicon&r=PG&f=1", "display_name": "MathMajor", "link": "https://stackoverflow.com/users/2645162/mathmajor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472604383, "creation_date": 1472604069, "last_edit_date": 1472604383, "question_id": 39239073, "link": "https://stackoverflow.com/questions/39239073/how-to-install-a-c-library", "title": "How to &quot;install&quot; a C library", "body": "<p>I'm trying to use the Prime Sieve library (found <a href=\"http://primesieve.org/\" rel=\"nofollow\">here</a>) in one of my C programs. However, i'm having a hard time \"installing\" the library. </p>\n\n<p>I'm currently using the Code::block's IDE and following the guide <a href=\"http://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/\" rel=\"nofollow\">here</a>.</p>\n\n<p>However, when trying to link the <code>.lib</code> files, I found that the zip file I had downloaded did not contain any. So, I figured that I needed to \"make\" the library first. When running <code>mingw32-make</code> I get the message that \"nothing needs to be done\".</p>\n\n<p>Not sure what to do next ...</p>\n\n<p>Edit: I should probably mention that I am using Windows 10.</p>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1472602486, "post_id": 39238828, "comment_id": 65814919, "body": "Are you asking how to do it without <code>libevent</code>, or how to do it with <code>libevent</code>?"}, {"owner": {"reputation": 1416, "user_id": 952268, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dd34f9ca91ec053d18d9da255f529bd5?s=128&d=identicon&r=PG", "display_name": "barfatchen", "link": "https://stackoverflow.com/users/952268/barfatchen"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1472602957, "post_id": 39238828, "comment_id": 65815037, "body": "@jxh , libevent source is above , I like to know how to implement the function like libevent evbuffer_copyout do ,  to copy data out of buffer without drain it"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1472603471, "post_id": 39238828, "comment_id": 65815142, "body": "That&#39;s what the <code>MSG_PEEK</code> flag for <code>recv()</code> is for, but I don&#39;t see why you think you need it. You just need to loop until you have the four-byte length, then loop until you have data of that length. Peeking doesn&#39;t help with that."}, {"owner": {"reputation": 1416, "user_id": 952268, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dd34f9ca91ec053d18d9da255f529bd5?s=128&d=identicon&r=PG", "display_name": "barfatchen", "link": "https://stackoverflow.com/users/952268/barfatchen"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1472604000, "post_id": 39238828, "comment_id": 65815255, "body": "@EJP,  in epoll , I like to have all header(4 bytes) and body(the length described in header) available and then drain it at a time ,  doing a loop is also fine , but  if a client silly do &quot;0010123456789&quot; , header told me there are 10 bytes in body  , but only 9 bytes in body actually , then loop will kill me."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1472610537, "post_id": 39238828, "comment_id": 65816590, "body": "So you need to debug your client. You can&#39;t defend against that; peeking but not drainining the message or non-blocking mode will not help; and you can&#39;t use FIO_NREAD as a message length counter. Regardless of what the client does or sends, you may receive as little as a byte at a time. You have to loop."}, {"owner": {"reputation": 1416, "user_id": 952268, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dd34f9ca91ec053d18d9da255f529bd5?s=128&d=identicon&r=PG", "display_name": "barfatchen", "link": "https://stackoverflow.com/users/952268/barfatchen"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1472611345, "post_id": 39238828, "comment_id": 65816765, "body": "@EJP ,  if client A send a wrong data like &quot;0010123456789&quot;  or  I receive data one byte at a time ( like &#39;0&#39;,&#39;0&#39;,&#39;1&#39;,&#39;0&#39;,&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;0&#39;) , epoll will inform me data come in , I can peek if all  14 bytes avaliable , if not , just ignore this fd&#39;s event , and deal it until all 14 bytes avaliable in the buffer , I won&#39;t do the loop in  read_cb  because  I don&#39;t like loop in event&#39;s callback function."}], "owner": {"reputation": 1416, "user_id": 952268, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dd34f9ca91ec053d18d9da255f529bd5?s=128&d=identicon&r=PG", "display_name": "barfatchen", "link": "https://stackoverflow.com/users/952268/barfatchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472606178, "creation_date": 1472601893, "last_edit_date": 1495535352, "question_id": 39238828, "link": "https://stackoverflow.com/questions/39238828/checking-socket-buffer-without-drain-it", "title": "Checking socket buffer without drain it", "body": "<p>I have the following sample using libevent , the epoll library :</p>\n\n<pre><code>void read_cb(struct bufferevent *bev, void *arg)\n{\n    evutil_socket_t fd = bufferevent_getfd(bev);\n    struct evbuffer *input = bufferevent_get_input(bev);\n\n    while( 1 ) {\n        int datalen = 0 ;\n        char buflen[5]={0},record[1024]={0} ;\n\n        size_t len1 = evbuffer_get_length(input);\n        if(len1 &lt; 4)\n            return ;\n        evbuffer_copyout(input, buflen, 4) ;\n\n        try{\n            std::string s(buflen) ;\n            datalen = stoi(s) ;\n        }catch(std::exception const &amp;e){\n            std::cout &lt;&lt; \"error:\" &lt;&lt; e.what() &lt;&lt; std::endl ;\n            return ;\n        }\n\n        size_t len2 = evbuffer_get_length(input);\n        if(len2 &lt; (4+datalen) )\n            return ;\n        evbuffer_drain(input, 4);\n        evbuffer_remove(input,record,datalen) ;\n        record[datalen] = 0x00 ;\n        console-&gt;info(\"fd ({}) receive ({})\",fd,record) ;\n        DoOrder(fd,record) ;\n    } //while\n\n    return ;\n}\n</code></pre>\n\n<p>The client send stream like \"0010abcdefghij\" , first 4 bytes describe the data part has 10 bytes , so my source check if buffer has 4 bytes in it ?! if so ,\ncopy 4 bytes out(but not consume it) , check body's length and then check again \nif all header(4 bytes) and body(in my case,it's \"abcdefghij\") are all in buffer , if so , drain both header and body(in my case, 14 bytes) out of buffer .</p>\n\n<p>I like to do it myself(without using libevent) , I know </p>\n\n<pre><code>int bytesAv = 0;\nioctl(m_Socket,FIONREAD,&amp;bytesAv); //m_Socket is the socket client's fd \n</code></pre>\n\n<p>can check bytes count available in buffer(like bufferevent_get_input in my sample) , what I don't know how to implement evbuffer_copyout ,\nthat means , not only I like to check bytes count available in socket fd's \nbuffer , I also like to copy several bytes out of the buffer to check its contents , what function call would do the job ?!</p>\n\n<p>Edit :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/16140802/recv-with-flags-msg-dontwait-msg-peek-on-tcp-socket\">recv with flags MSG_DONTWAIT | MSG_PEEK on TCP socket</a></p>\n\n<p>describe MSG_PEEK and MSG_DONTWAIT still make socket blocking , that is not for me since in my case ,  I just like to check buffer contents nonblockingly , blocking won't do the right job to me .</p>\n\n<p>Edit2 :</p>\n\n<p>Using  ioctl(m_Socket,FIONREAD,&amp;bytesAv);  and recv( ...MSG_PEEK) together ,\nI should not worry about blocking , since I can always using   FIONREAD to check \nfirst , then recv with MSG_PEEK won't have blocking problem at all .</p>\n"}, {"tags": ["javascript", "c", "node.js"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1472601961, "post_id": 39238826, "comment_id": 65814829, "body": "Without doing bit manipulation (yourself or through some package), you can&#39;t. It\u2019s not built into <code>Buffer</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3220, "user_id": 1617352, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f3fe06c7bccfeab0015286a92bb0a8e?s=128&d=identicon&r=PG", "display_name": "Dzung Nguyen", "link": "https://stackoverflow.com/users/1617352/dzung-nguyen"}, "edited": false, "score": 0, "creation_date": 1472607485, "post_id": 39238892, "comment_id": 65815978, "body": "I was wondering if it&#39;s possible to do data.readUInt16LE(10) where 10 is the bit-wise position, not bytes."}, {"owner": {"reputation": 6096, "user_id": 281920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6THzN.jpg?s=128&g=1", "display_name": "Jason Livesay", "link": "https://stackoverflow.com/users/281920/jason-livesay"}, "reply_to_user": {"reputation": 3220, "user_id": 1617352, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f3fe06c7bccfeab0015286a92bb0a8e?s=128&d=identicon&r=PG", "display_name": "Dzung Nguyen", "link": "https://stackoverflow.com/users/1617352/dzung-nguyen"}, "edited": false, "score": 0, "creation_date": 1472607979, "post_id": 39238892, "comment_id": 65816073, "body": "No, see docs for buffer. But just do same as C code to mask ten bits using &amp; which is bitwise AND"}], "tags": [], "owner": {"reputation": 6096, "user_id": 281920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6THzN.jpg?s=128&g=1", "display_name": "Jason Livesay", "link": "https://stackoverflow.com/users/281920/jason-livesay"}, "is_accepted": false, "score": 1, "last_activity_date": 1472602435, "creation_date": 1472602435, "answer_id": 39238892, "question_id": 39238826, "link": "https://stackoverflow.com/questions/39238826/nodejs-buffer-bitwise-slicing/39238892#39238892", "title": "Nodejs buffer bitwise slicing", "body": "<p>Not sure why you don't want to do bit manipulation.  JavaScript can do bit manipulation fine.  The C bit manipulation stuff might not even need to be changed, or only a little.</p>\n\n<p>JavaScript typed arrays may speed things up a bit.  Double check your Node version and see the Buffer docs.  They have some methods like readUInt8 etc. that might help.</p>\n\n<p>Also you can manipulate bits as string if its easier (and if its not too slow), then use <code>parseInt('01010101',2)</code> to convert to a number.  Also <code>.toString(2)</code> to convert to binary.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7652736, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7mEp.jpg?s=128&g=1", "display_name": "authorized", "link": "https://stackoverflow.com/users/7652736/authorized"}, "is_accepted": false, "score": 1, "last_activity_date": 1497256340, "creation_date": 1497256340, "answer_id": 44494803, "question_id": 39238826, "link": "https://stackoverflow.com/questions/39238826/nodejs-buffer-bitwise-slicing/44494803#44494803", "title": "Nodejs buffer bitwise slicing", "body": "<p>Well you could use the new <a href=\"https://github.com/dosaygo-coder-0/Uint1Array\" rel=\"nofollow noreferrer\">Uint1Array</a> \"JavaScript's missing TypedArray\" which is basically a bit field, with the same API as every other Typed Array.</p>\n\n<p>So in your case:</p>\n\n<pre><code>const Uint1Array = require('uint1array');\nconst bits = new Uint1Array( new Uint8Array(txBuf).buffer );\nconst top = bits.slice(0,10);\nconst bottom = bits.slice(10,20);\n</code></pre>\n"}], "owner": {"reputation": 3220, "user_id": 1617352, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f3fe06c7bccfeab0015286a92bb0a8e?s=128&d=identicon&r=PG", "display_name": "Dzung Nguyen", "link": "https://stackoverflow.com/users/1617352/dzung-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2138, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1497256340, "creation_date": 1472601861, "question_id": 39238826, "link": "https://stackoverflow.com/questions/39238826/nodejs-buffer-bitwise-slicing", "title": "Nodejs buffer bitwise slicing", "body": "<p>I'm transmitting data through bluetooth LE from a chip to node.js server.</p>\n\n<p>Firmware code:</p>\n\n<pre><code>uint16_t txBuf[5]\ntop &amp;= 0x3FF;\nbottom &amp;= 0x3FF;\ntxBuf[0] = top + (bottom &lt;&lt; 10);\ntxBuf[1] = bottom &gt;&gt; 2;\n</code></pre>\n\n<p>Basically, the first 10 bit is top, and the next 10 bit is bottom. I could print\nthe buffer in node.js:</p>\n\n<pre><code>console.log(buffer)\nconsole.log(buffer.data)\n\n&lt;Buffer cd d3 8d 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00&gt;\n20\n</code></pre>\n\n<p>How can I parse this in javascript and node.js without doing bit manipulation?</p>\n"}, {"tags": ["c", "pointers", "casting"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472602620, "post_id": 39238784, "comment_id": 65814958, "body": "The second line should be <code>*(GPIO_LED) = (uint32_t)num;</code>  , the extra <code>*</code> is a mistake.  (Depending on details of the compiler and platform, the code might happen to behave the same way with or without the star, but the correct version is no star)."}, {"owner": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472691832, "post_id": 39238784, "comment_id": 65858256, "body": "That makes more sense. Thanks for the clarification."}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "edited": false, "score": 0, "creation_date": 1472787846, "post_id": 39238784, "comment_id": 65902292, "body": "Let me just point out, per comments below, that this is apparently from working code as is, with the cast being to <code>uint32_t*</code>.  This is in fact a rather subtle error on the part of the original programmer."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "edited": false, "score": 0, "creation_date": 1472692187, "post_id": 39238824, "comment_id": 65858331, "body": "Thanks for the response. So to be clear, is the asterisks in the typecast for num most likely a mistake?"}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "reply_to_user": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "edited": false, "score": 0, "creation_date": 1472743100, "post_id": 39238824, "comment_id": 65885261, "body": "Likely, but not necessarily. The type of <code>*(GPIO_LED )</code> is <code>uint32_t</code>so it&#39;s referring to the <code>uint32_t</code> value <i>at the location</i> <code>0x510000A0</code>. The usual thing (and what I think it means from the hint that the name is <code>num</code> and not something like <code>ptr</code>) would be that you&#39;re putting the number into that absolute location."}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "reply_to_user": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "edited": false, "score": 0, "creation_date": 1472743268, "post_id": 39238824, "comment_id": 65885370, "body": "It is, however, <i>possible</i> that the programmer <i>meant</i> <code>num</code> to be treated as an address. It wouldn&#39;t pass lint, I suspect you&#39;d get a compile-time warning, but at least in C I think it would compile. Bow, I think the programmer should be beaten if so. Of such mistakes are really hairy subtle bugs made."}, {"owner": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "edited": false, "score": 0, "creation_date": 1472766317, "post_id": 39238824, "comment_id": 65897094, "body": "In the code I grabbed this from, num is declared as a uint32_t and not a pointer (and will only range from 0 to 255). Since this is the case, will the C compiler most likely ignore the asterisk? I assume this is the case since the program successfully compiled and functioned as expected."}, {"owner": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "edited": false, "score": 0, "creation_date": 1472767019, "post_id": 39238824, "comment_id": 65897358, "body": "If num had been treated as an address, the program would not have functioned as expected"}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "reply_to_user": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "edited": false, "score": 0, "creation_date": 1472787373, "post_id": 39238824, "comment_id": 65902208, "body": "If it&#39;s been treated as an address by the compiler, you might be right. But what if the register at <code>0x510000A0</code> implements an API that asks for the <i>address</i> of an object in memory? Bits is bits, and a programmer might imagine that because it&#39;s an address it has to be a pointer type."}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "reply_to_user": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "edited": false, "score": 0, "creation_date": 1472787662, "post_id": 39238824, "comment_id": 65902253, "body": "@njduescher by golly, you have observed, in the wild, exactly the error for which I suggested the programmer should be beaten. Remember, at the machine level, bits is bits: a pointer that has the value <code>0x12345678</code> has exactly the same value as a <code>uint32_t</code> with the value <code>0x12345678</code>. The compiler will assign it, the machine won&#39;t know any better. Until some poor programmer comes along and asks &quot;Why are they casting that to a pointer?&quot;"}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "reply_to_user": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "edited": false, "score": 0, "creation_date": 1472788049, "post_id": 39238824, "comment_id": 65902340, "body": "So it&#39;s not that it ignores the <code>*</code>, it&#39;s that whether its <code>uint32_t</code> or <code>uint32_t*</code>, <code>0x000000FE == 0x000000FE</code>."}], "tags": [], "owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "is_accepted": false, "score": -1, "last_activity_date": 1472787872, "last_edit_date": 1472787872, "creation_date": 1472601827, "answer_id": 39238824, "question_id": 39238784, "link": "https://stackoverflow.com/questions/39238784/assigning-a-typcasted-int-pointer-to-a-typcasted-pointer-address-in-c/39238824#39238824", "title": "Assigning a typcasted int pointer to a typcasted pointer address in C?", "body": "<p>Okay. <code>((uint32_t *)0x510000A0)</code> is a constant of type pointer to <code>uint32_t</code> -- in other words, an explicitly declared absolute address.</p>\n\n<p><code>*(GPIO_LED ) = (uint32_t *)num;</code> typecasts the <em>value</em> in num into a pointer to <code>uint32_t</code>, and then assigns it <em>at the location</em> with the absolute addtress <code>0x510000A0</code>.</p>\n\n<p>The effect is it's putting the value <code>num</code> into the program's memory space at address <code>0x510000A0</code>.</p>\n\n<p>This sort of trick is often used in low-level programming to put settings into a memory address that's mapped to some physical device control.</p>\n\n<p><strong>update</strong></p>\n\n<p>Yeah, yeah, I got lost in the asterisks. <code>uint32_t</code> pointer.</p>\n"}], "owner": {"reputation": 9, "user_id": 6776503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13714ebbe7321ee10446621af090c47?s=128&d=identicon&r=PG&f=1", "display_name": "njduescher", "link": "https://stackoverflow.com/users/6776503/njduescher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1472787872, "creation_date": 1472601500, "question_id": 39238784, "link": "https://stackoverflow.com/questions/39238784/assigning-a-typcasted-int-pointer-to-a-typcasted-pointer-address-in-c", "title": "Assigning a typcasted int pointer to a typcasted pointer address in C?", "body": "<p>I don't know if I even asked the question correctly, but I've been struggling to wrap my head around the following lines of code and wasn't able to find an answer that I could understand.</p>\n\n<pre><code>#define GPIO_LED  ((uint32_t *)0x510000A0)\n\n*(GPIO_LED ) = (uint32_t *)num;\n</code></pre>\n\n<p>where num is an integer (between 0 and 255)</p>\n"}, {"tags": ["c", "arguments"], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 3982922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf5888e6a7329da8e098056842fa9f?s=128&d=identicon&r=PG&f=1", "display_name": "chouaib23", "link": "https://stackoverflow.com/users/3982922/chouaib23"}, "edited": false, "score": 0, "creation_date": 1472640354, "post_id": 39240835, "comment_id": 65830767, "body": "Hello i have got this error  undefined reference to `UNSAFE_SPRINTF_USE_SNPRINTF_INSTEAD&#39; collect2: ld returned 1 exit status"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 383, "user_id": 3982922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf5888e6a7329da8e098056842fa9f?s=128&d=identicon&r=PG&f=1", "display_name": "chouaib23", "link": "https://stackoverflow.com/users/3982922/chouaib23"}, "edited": false, "score": 0, "creation_date": 1472641768, "post_id": 39240835, "comment_id": 65831785, "body": "Have you googled snprintf? It is just a safer version of sprintf that takes the length of the buffer as an argument to prevent buffer overruns."}, {"owner": {"reputation": 383, "user_id": 3982922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf5888e6a7329da8e098056842fa9f?s=128&d=identicon&r=PG&f=1", "display_name": "chouaib23", "link": "https://stackoverflow.com/users/3982922/chouaib23"}, "edited": false, "score": 0, "creation_date": 1472641877, "post_id": 39240835, "comment_id": 65831864, "body": "yes is have googled snprintf   all time give me   error undefined reference to `UNSAFE_SPRINTF_USE_SNPRINTF_INSTEAD"}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 4, "last_activity_date": 1472642063, "last_edit_date": 1472642063, "creation_date": 1472618271, "answer_id": 39240835, "question_id": 39238513, "link": "https://stackoverflow.com/questions/39238513/too-many-arguments-in-system-call/39240835#39240835", "title": "Too many arguments in system() call", "body": "<p><code>system()</code> doesn't handle <code>printf</code> style arguments. You need to build the command string up first and then pass it to system.</p>\n\n<p>e.g.</p>\n\n<pre><code>char cmd[512];\nsprintf(cmd, \"wget -P /var/tuxbox/config http://xxxxxxx/xx/cxx_%s.bin\\n\", macaddr);\n// or snprintf(cmd, sizeof(cmd), \"wget...\nsystem(cmd);\n</code></pre>\n\n<p>(note, no error handling etc included.)</p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 11765384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79bb6c7e2ef4779a6a22e2b856b2917d?s=128&d=identicon&r=PG&f=1", "display_name": "ENodder", "link": "https://stackoverflow.com/users/11765384/enodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1562937783, "creation_date": 1562937783, "answer_id": 57007884, "question_id": 39238513, "link": "https://stackoverflow.com/questions/39238513/too-many-arguments-in-system-call/57007884#57007884", "title": "Too many arguments in system() call", "body": "<p>Just Don't write</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>if you write that in the first line or second or third lines</p>\n"}], "owner": {"reputation": 383, "user_id": 3982922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cf5888e6a7329da8e098056842fa9f?s=128&d=identicon&r=PG&f=1", "display_name": "chouaib23", "link": "https://stackoverflow.com/users/3982922/chouaib23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1910, "favorite_count": 0, "accepted_answer_id": 39240835, "answer_count": 2, "score": 1, "last_activity_date": 1562937783, "creation_date": 1472599308, "last_edit_date": 1472618229, "question_id": 39238513, "link": "https://stackoverflow.com/questions/39238513/too-many-arguments-in-system-call", "title": "Too many arguments in system() call", "body": "<p>I have a problem with arguments in the <code>system()</code> call in C.</p>\n\n<h3>Code:</h3>\n\n<pre><code>char macaddr[13];\nuint8_t mac[6];\nmemset(macaddr, '\\0', 13);\nmac_get_ascii_from_file(\"/sys/class/net/eth0/address\", macaddr);\n\nsystem(\"rm /var/tuxbox/config/cxx.bin\");\nsystem(\"wget -P /var/tuxbox/config http://xxxxxxx/xx/cxx_%s.bin\\n\", macaddr);\n</code></pre>\n\n<h3>Error message:</h3>\n\n<blockquote>\n  <p>too many arguments to function 'system'</p>\n</blockquote>\n"}, {"tags": ["c", "pthreads", "malloc"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1472599297, "post_id": 39238314, "comment_id": 65814191, "body": "each thread has its own stack. Excellent pthreads tutorial: <a href=\"https://computing.llnl.gov/tutorials/pthreads/\" rel=\"nofollow noreferrer\">computing.llnl.gov/tutorials/pthreads</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1472601608, "post_id": 39238314, "comment_id": 65814745, "body": "Local automatic variables in a function are inherently thread-safe; they are allocated anew for each call of the function, whether that&#39;s in a threaded context or a recursive context or a simple call to a the function.  Global variables in general are shared \u2014 unless created as thread-local storage (TLS) or thread-specific storage (TSS \u2014 the term used in C11).  The code I see should be OK except for a memory leakage when the threads return \u2014 but the thread cleanup code isn&#39;t shown so that may be unfair.  You need to capture the return value via <code>pthread_join()</code> and release it to avoid leaks."}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472598255, "post_id": 39238339, "comment_id": 65813887, "body": "Maybe I miscommunicated my question: Each call of <code>fct</code> allocates some memory and keeps a handle to it, the handle has a value. Do all versions of <code>fct</code> share the same value of the pointer?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472598400, "post_id": 39238339, "comment_id": 65813935, "body": "See my edit. Each call to malloc will yield a different result, thread or not thread by the way."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1472598629, "last_edit_date": 1472598629, "creation_date": 1472598041, "answer_id": 39238339, "question_id": 39238314, "link": "https://stackoverflow.com/questions/39238314/malloc-inside-threaded-routine/39238339#39238339", "title": "malloc inside threaded routine", "body": "<p>Global variables are shared between threads. So is the reference to input you are passing as parameter.</p>\n\n<p>The variables you are refering to, on the other hand, are locals, allocated on the stack and are different from each other. This is not related to threads, but to the current value of the stack pointer.\nThe result of the malloc will be different as well, since malloc is called several times.</p>\n\n<p>All this is very loosely related to threads, and several calls of your function in the same thread will behave the same memory-wise (not time-wise). There would be a slight difference concerning the local variables since stack is not shared between threads gut that is all.</p>\n\n<p>Ps your code does not compile.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1472601161, "post_id": 39238580, "comment_id": 65814643, "body": "<code>pthread_join()</code> is how you collect the return value from a thread.  So, your observation is correct, but not entirely on target.  The code will leak memory unless the return values from the thread function are captured and subsequently freed.  That may not matter."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472615606, "post_id": 39238580, "comment_id": 65817691, "body": "@JonathanLeffler Still, <code>pthread_join()</code> returns an error code (and <code>pthread_exit()</code> in the function can supply that code). As far as I know there simply isn&#39;t a way to do what he&#39;s trying to do..., which is, launch a bunch of threads, each thread <code>malloc</code>s some memory, then returns a pointer to that memory. He will need to pass in a <code>void**</code> or use a global to retain the result of <code>malloc</code> outside of the <code>fct</code> function. I assumed he expected <code>rc</code> to hold the result of the <code>malloc</code> call, perhaps that&#39;s a bad assumption."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472615779, "post_id": 39238580, "comment_id": 65817726, "body": "See POSIX on <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_join.html\" rel=\"nofollow noreferrer\"><code>pthread_join()</code></a>: \u2014\u2014 <code>int pthread_join(pthread_t thread, void **value_ptr);</code>  \u2026 On return from a successful <code>pthread_join()</code> call with a non-NULL <code>value_ptr</code> argument, the value passed to <code>pthread_exit()</code> by the terminating thread shall be made available in the location referenced by <code>value_ptr</code>. \u2026"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472616176, "post_id": 39238580, "comment_id": 65817833, "body": "@JonathanLeffler Touche. I was not aware that <code>pthread_join()</code> accepted any arguments. So you&#39;re saying a possible solution is he can <code>malloc</code> the memory, then call <code>pthread_exit</code> with the return value from <code>malloc</code>, then use <code>pthread_join</code>&#39;s second argument to gather that return value? Interesting,, I was unaware of that. I&#39;ve always just passed in what I needed at thread creation. Thanks for the input, I&#39;ll have to keep that in mind."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472616426, "post_id": 39238580, "comment_id": 65817895, "body": "From <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_exit.html\" rel=\"nofollow noreferrer\"><code>pthread_exit()</code></a>: <i>An implicit call to <code>pthread_exit()</code> is made when a thread other than the thread in which <code>main()</code> was first invoked returns from the start routine that was used to create it. The function&#39;s return value shall serve as the thread&#39;s exit status.</i>  In other words, the return value from <code>fct()</code> in the question becomes the exit status via <code>pthread_exit()</code> and thence <code>pthread_join()</code>.  You use <code>pthread_exit()</code> (in particular) when you want to terminate a thread without returning from the function."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472616744, "post_id": 39238580, "comment_id": 65817982, "body": "@JonathanLeffler Right on,, makes sense now. I still think from the posted code he&#39;s trying to save <code>malloc</code>&#39;s return value in <code>rc</code>. Should&#39;ve cleared that up before I posted an answer I suppose, but I was on my way out the door. And I learned things about <code>pthread_join</code> and <code>pthread_exit</code> that I didn&#39;t know before, so,, good night for me :)"}, {"owner": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472680941, "post_id": 39238580, "comment_id": 65855342, "body": "@yano &quot;So you&#39;re saying a possible solution is he can <code>malloc</code> the memory, then call <code>pthread_exit</code> with the return value from <code>malloc</code>, then use <code>pthread_join</code>&#39;s second argument to gather that return value? &quot;. That&#39;s exactly what I&#39;m doing. But I&#39;m getting the SIGSEGV almost at the beginning of the function called using <code>pthread_create</code>."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1472681694, "post_id": 39238580, "comment_id": 65855644, "body": "only thing I see in <code>fct</code> that could be seg faulting is if your <code>p</code> parameter is NULL, which will cause the <code>*input</code> dereference to seg fault. Some more code would be helpful (declaration and initialization of <code>input</code> for instance)."}], "tags": [], "owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "is_accepted": false, "score": 0, "last_activity_date": 1472599825, "creation_date": 1472599825, "answer_id": 39238580, "question_id": 39238314, "link": "https://stackoverflow.com/questions/39238314/malloc-inside-threaded-routine/39238580#39238580", "title": "malloc inside threaded routine", "body": "<p>What you're doing is causing a problem.  <code>pthread_create</code> returns an error code.  From the man page:</p>\n\n<blockquote>\n  <p>On success, <code>pthread_create()</code> returns 0; on error, it returns an error\n  number, and the contents of *thread are undefined.</p>\n</blockquote>\n\n<p>You're not going to be able to return the pointer to your <code>malloc</code> this way.  You'll have to either have a global array of pointers that your thread can save its <code>malloc</code> result in, or you'll have to pass a pointer in as an argument.  If you have more than 1 argument you want to pass to a thread, the only way I know how to do it is by using a <code>struct</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472680166, "post_id": 39242876, "comment_id": 65855080, "body": "Thank you for the detailed answer, and rather &quot;comforting&quot; answer if I may add. I&#39;m not even using a mutex in my code because all I&#39;m doing is dividing the iterations of a for loop over as many threads as I want, calculating a simple function of each element of the input array after dereferencing, putting it in the dynamically created array, and returning a pointer to the resulting array. At this point, I don&#39;t know what to do.   EDIT: I&#39;m using MinGW x64 GCC 6.1 with default win32 threads"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472680389, "post_id": 39242876, "comment_id": 65855165, "body": "I used the mutex because I wanted the outputs serialized \u2014 each thread gets to print its own outputs.  (Strictly, I should be using a mutex around the main thread <code>printf()</code> in the &#39;thread harvesting&#39; loop, but I get away with because I wait for the last thread to be started first, so the others are usually all done or almost done before that loop starts printing.)  I think, but I&#39;m not quite comfortable claiming, that there&#39;s a problem with the version of Valgrind that I&#39;m using on the Mac that I&#39;m using, at least in the multi-threaded program.  Run outside of Valgrind, my code appears clean."}, {"owner": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472680553, "post_id": 39242876, "comment_id": 65855215, "body": "I&#39;ll try to run this code on Mac OS X and Linux and should get to the bottom of this, and I&#39;ll get back in case I find something. Thanks for your time."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472680579, "post_id": 39242876, "comment_id": 65855222, "body": "You don&#39;t need the mutex \u2014 probably.  You should be able to adapt my code to suit your purposes.  The formulae with prime numbers etc are simply ways of making the output more interesting than <code>1 2 3 4</code>.  I am still reconfiguring my VM \u2014 my initial upgrade to Ubuntu 16.04 from 14.04 was not a success \u2014 and haven&#39;t had a chance to run the code there, yet."}, {"owner": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472683573, "post_id": 39242876, "comment_id": 65856250, "body": "Figured out the problem, it&#39;s this careless line of code in main: <code>input_s input[MAX_THREADS] = {deft_input};</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472683712, "post_id": 39242876, "comment_id": 65856289, "body": "Well done!  What was the cause of the trouble?  What&#39;s the type <code>input_s</code>?  What&#39;s the <code>deft_input</code>?  It looks like you may have been initializing the array \u2014 in part.  But I don&#39;t immediately see why that was a problem."}, {"owner": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472683973, "post_id": 39242876, "comment_id": 65856360, "body": "my input struct <code>deft_input</code> contains a bunch of pointers to allocated memory which shall be the same for all threads, as well as start and stop indices that denote the limits of the for loop executed inside the <code>fct</code> and shall be different for different threads. Unfortunately, I carelessly and horrendously initialized my input structure to <code>{deft_input}</code>, or equivalently <code>{deft_input}, 0, 0, 0</code>... Embarrassing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "edited": false, "score": 0, "creation_date": 1472684078, "post_id": 39242876, "comment_id": 65856388, "body": "OK; that sort of thing will do it.  It&#39;s amazing what a little time, or someone else looking at the code, will do."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1472627112, "creation_date": 1472627112, "answer_id": 39242876, "question_id": 39238314, "link": "https://stackoverflow.com/questions/39238314/malloc-inside-threaded-routine/39242876#39242876", "title": "malloc inside threaded routine", "body": "<p>The succinct answer to your question \"Does the \u2026 code excerpt cause any problems in general\" is \"No\".  As noted in various comments and answers: </p>\n\n<blockquote>\n  <p>Local automatic variables in a function are inherently thread-safe; they are allocated anew for each call of the function, whether that's in a threaded context or a recursive context or a simple call to a the function. Global variables in general are shared \u2014 unless created as thread-local storage (TLS) or thread-specific storage (TSS \u2014 the term used in C11). The code [in the question] should be OK except for a memory leakage when the threads return \u2014 but the thread cleanup code isn't shown so that may be unfair. You need to capture the return value via <code>pthread_join()</code> and release it to avoid leaks.</p>\n</blockquote>\n\n<p>Fleshing out the code excerpt into working code, using a mutex to show off and ensure that one thread at a time is printing its data, you could have code like this:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic pthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;\n\nstatic void *fct(void *p)\n{\n    int number = *(int *)p;\n    int *arr = malloc(number * sizeof(int));  // Error check missing!\n    for (int i = 0; i &lt; number; i++)\n        arr[i] =  number + (7 * i + 5) % 11;\n    pthread_mutex_lock(&amp;mtx);   // Error check missing!\n    printf(\"Integers %2d (%p):\", number, (void *)arr);\n    for (int i = 0; i &lt; number; i++)\n        printf(\" %3d\", arr[i]);\n    putchar('\\n');\n    pthread_mutex_unlock(&amp;mtx); // Error check missing!\n    return (void *)arr;\n}\n\nenum { MAX_THREADS = 10 };\n\nint main(void)\n{\n    pthread_t threads[MAX_THREADS];\n    int input[MAX_THREADS];\n    int *result[MAX_THREADS];\n\n    /* Initialization */\n    for (int i = 0; i &lt; MAX_THREADS; i++)\n        input[i] = (3 * i + 2) % 13 + 1;\n\n    /* Thread creation */\n    for (int i = 0; i &lt; MAX_THREADS; i++)\n    {\n        pthread_mutex_lock(&amp;mtx);   // Error check missing!\n        printf(\"Launch %d: %2d\\n\", i, input[i]);\n        pthread_mutex_unlock(&amp;mtx); // Error check missing!\n        int rc = pthread_create(&amp;threads[i], NULL, fct, (void *)&amp;input[i]);\n        if (rc != 0)\n        {\n            fprintf(stderr, \"Oops creating thread %d\\n\", i);\n            exit(EXIT_FAILURE);\n        }\n    }\n\n    /* Thread harvesting */\n    for (int i = MAX_THREADS; i-- &gt; 0; )\n    {\n        void *vp;\n        int rc = pthread_join(threads[i], &amp;vp);\n        if (rc != 0)\n        {\n            fprintf(stderr, \"Oops joining thread %d\\n\", i);\n            exit(EXIT_FAILURE);\n        }\n        printf(\"Thread %d: %2d (%p)\\n\", i, input[i], vp);\n        result[i] = vp;\n    }\n\n    /* Finalization */\n    for (int i = 0; i &lt; MAX_THREADS; i++)\n    {\n        printf(\"Master - %d:\", i);\n        for (int j = 0; j &lt; input[i]; j++)\n            printf(\" %3d\", result[i][j]);\n        putchar('\\n');\n        free(result[i]);\n    }\n\n    pthread_mutex_destroy(&amp;mtx);\n    return 0;\n}\n</code></pre>\n\n<h3>Example run</h3>\n\n<pre><code>Launch 0:  3\nLaunch 1:  6\nLaunch 2:  9\nLaunch 3: 12\nIntegers  6 (0x7faf9ae01890):  11   7  14  10   6  13\nIntegers  3 (0x7faf9af00000):   8   4  11\nIntegers  9 (0x7faf9b800000):  14  10  17  13   9  16  12  19  15\nLaunch 4:  2\nIntegers 12 (0x7faf9b800030):  17  13  20  16  12  19  15  22  18  14  21  17\nLaunch 5:  5\nIntegers  2 (0x7faf9af00010):   7   3\nIntegers  5 (0x7faf9b800060):  10   6  13   9   5\nLaunch 6:  8\nLaunch 7: 11\nIntegers  8 (0x7faf9ae018b0):  13   9  16  12   8  15  11  18\nLaunch 8:  1\nIntegers 11 (0x7faf9b800080):  16  12  19  15  11  18  14  21  17  13  20\nLaunch 9:  4\nIntegers  1 (0x7faf9af00020):   6\nIntegers  4 (0x7faf9b8000b0):   9   5  12   8\nThread 9:  4 (0x7faf9b8000b0)\nThread 8:  1 (0x7faf9af00020)\nThread 7: 11 (0x7faf9b800080)\nThread 6:  8 (0x7faf9ae018b0)\nThread 5:  5 (0x7faf9b800060)\nThread 4:  2 (0x7faf9af00010)\nThread 3: 12 (0x7faf9b800030)\nThread 2:  9 (0x7faf9b800000)\nThread 1:  6 (0x7faf9ae01890)\nThread 0:  3 (0x7faf9af00000)\nMaster - 0:   8   4  11\nMaster - 1:  11   7  14  10   6  13\nMaster - 2:  14  10  17  13   9  16  12  19  15\nMaster - 3:  17  13  20  16  12  19  15  22  18  14  21  17\nMaster - 4:   7   3\nMaster - 5:  10   6  13   9   5\nMaster - 6:  13   9  16  12   8  15  11  18\nMaster - 7:  16  12  19  15  11  18  14  21  17  13  20\nMaster - 8:   6\nMaster - 9:   9   5  12   8\n</code></pre>\n\n<hr>\n\n<p>Full disclosure:</p>\n\n<p>Tested on Mac OS X 10.11.6 with GCC 6.1.0 and Valgrind 3.12.0.SVN.  And, when run under Valgrind, it crashes.  It's not crashed when not running under Valgrind.</p>\n\n<pre><code>==3412== Memcheck, a memory error detector\n==3412== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==3412== Using Valgrind-3.12.0.SVN and LibVEX; rerun with -h for copyright info\n==3412== Command: ./pth37\n==3412== \nLaunch 0:  3\nLaunch 1:  6\nLaunch 2:  9\nLaunch 3: 12\nLaunch 4:  2\nIntegers  3 (0x100aaf5b0):   8   4  11\nLaunch 5:  5\nIntegers 12 (0x100aaf600):  17  13  20  16  12  19  15  22  18  14  21  17\nIntegers  6 (0x100aaf670):  11   7  14  10   6  13\nIntegers  9 (0x100aaf6d0):  14  10  17  13   9  16  12  19  15\nIntegers  2 (0x100aaf740):   7   3\nLaunch 6:  8\nIntegers  5 (0x100aaf790):  10   6  13   9   5\nLaunch 7: 11\nIntegers  8 (0x100aaf7f0):  13   9  16  12   8  15  11  18\nLaunch 8:  1\nIntegers 11 (0x100aaf850):  16  12  19  15  11  18  14  21  17  13  20\nLaunch 9:  4\n==3412== \n==3412== Process terminating with default action of signal 11 (SIGSEGV)\n==3412==  Access not within mapped region at address 0x700003062C1A\n==3412==    at 0x10046F374: _pthread_find_thread (in /usr/lib/system/libsystem_pthread.dylib)\n==3412==    by 0x10046F2CF: _pthread_lookup_thread (in /usr/lib/system/libsystem_pthread.dylib)\n==3412==    by 0x10047061A: pthread_join (in /usr/lib/system/libsystem_pthread.dylib)\n==3412==    by 0x100000C3C: main (pth37.c:52)\n==3412==  If you believe this happened as a result of a stack\n==3412==  overflow in your program's main thread (unlikely but\n==3412==  possible), you can try to increase the size of the\n==3412==  main thread stack using the --main-stacksize= flag.\n==3412==  The main thread stack size used in this run was 8388608.\n--3412:0:schedule VG_(sema_down): read returned -4\n==3412== \n==3412== HEAP SUMMARY:\n==3412==     in use at exit: 26,557 bytes in 196 blocks\n==3412==   total heap usage: 280 allocs, 84 frees, 32,789 bytes allocated\n==3412== \n\nMemcheck: mc_leakcheck.c:1106 (void lc_scan_memory(Addr, SizeT, Bool, Int, Int, Addr, SizeT)): Assertion 'bad_scanned_addr &gt;= VG_ROUNDUP(start, sizeof(Addr))' failed.\n\nhost stacktrace:\n==3412==    at 0x238050773: ???\n==3412==    by 0x238050B9C: ???\n==3412==    by 0x238050B7A: ???\n==3412==    by 0x238003B86: ???\n==3412==    by 0x2380033A6: ???\n==3412==    by 0x238002050: ???\n==3412==    by 0x238014F0D: ???\n==3412==    by 0x23805D562: ???\n==3412==    by 0x2380F2772: ???\n==3412==    by 0x2380F287A: ???\n\nsched status:\n  running_tid=2\n</code></pre>\n\n<p>And I am puzzled by this, to be polite about it.</p>\n"}], "owner": {"reputation": 379, "user_id": 1011320, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e11690da53b1fa123830ea70f96f4f64?s=128&d=identicon&r=PG", "display_name": "ToniAz", "link": "https://stackoverflow.com/users/1011320/toniaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 39242876, "answer_count": 3, "score": 2, "last_activity_date": 1472627112, "creation_date": 1472597829, "last_edit_date": 1472598403, "question_id": 39238314, "link": "https://stackoverflow.com/questions/39238314/malloc-inside-threaded-routine", "title": "malloc inside threaded routine", "body": "<p>Does the following code excerpt cause any problems in general:</p>\n\n<pre><code>void * fct(void * p)\n{\n  int i = 0;\n  int * input = (int *) p;\n  int * arr = malloc((*input)*sizeof(int));\n  /* put something in arr */\n  return (void *) arr\n}\n\nint main()\n{\n  /* prologue */\n  for (i = 0; i &lt; MAX_THREADS; i++)\n  {\n    rc = pthread_create(&amp;threads[i], NULL, fct, (void *) &amp;input[i]);\n  }\n  /* epilogue */\n}\n</code></pre>\n\n<p>What I do not actually understand and have not found an answer for is: are the the variables inside the threaded routine (<code>i</code>, <code>input</code>, <code>arr</code>) shared? The way I understand pthreads is that different copies of <code>fct</code> get called <code>MAX_THREADS</code> times, each with its own set of variables.</p>\n"}, {"tags": ["c", "windows", "strftime"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472595562, "post_id": 39237889, "comment_id": 65813031, "body": "&quot;Greenwich Mean Time&quot; <i>is</i> abbreviated, to &quot;GMT&quot;, but we never see &quot;GMTDT&quot;."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472595803, "post_id": 39237889, "comment_id": 65813103, "body": "Have you looked at what Microsoft says about its <a href=\"https://msdn.microsoft.com/en-us/library/aa272978(v=vs.60).aspx\" rel=\"nofollow noreferrer\"><code>strftime()</code></a>?  Is your compiler configured to build with the Microsoft C run-time libraries or some other C run-time libraries?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472595861, "post_id": 39237889, "comment_id": 65813124, "body": "@WeatherVane - LOL, good point.  I am seeing timestamps coming from a device I am using that is using a Linux like OS, that has an abbreviated timezone. Perhaps it is implementation specific?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472596063, "post_id": 39237889, "comment_id": 65813195, "body": "@JonathanLeffler - interesting.  That is the first time I have seen small z used as an option this way.  I do not know.  As a side note, I have seen the same behavior using the LabWindows/CVI runtime. which of course is not using MS runtime.  The GNU GCC may be. As soon as I find where this is shown in Code::Blocks, I will post another comment."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472596188, "post_id": 39237889, "comment_id": 65813234, "body": "The POSIX specification of <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strftime.html\" rel=\"nofollow noreferrer\"><code>strftime()</code></a> mentions both <code>%z</code> and <code>%Z</code>.  However, that&#39;s just a standard; implementations may do things differently (for a multitude of reasons, some good, some less good).  I&#39;m not sure whether that helps or not.  But it does look to me as if MS and POSIX differ on the meaning of <code>%z</code>.  Be wary!"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1472597386, "post_id": 39237889, "comment_id": 65813601, "body": "<a href=\"http://stackoverflow.com/q/5802753/315052\">stackoverflow.com/q/5802753/315052</a>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1472690341, "post_id": 39237889, "comment_id": 65857944, "body": "@WeatherVane As a matter of fact, in the summertime in Britain, Windows machines will display the string &quot;GMT Daylight Time&quot; (and that&#39;s the value <code>%Z</code> will expand to, too)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1472750145, "post_id": 39237889, "comment_id": 65889367, "body": "@SteveSummit sorry I don&#39;t understand your point. That is exactly why I made my first comment, by looking at what I get on a Windows machine."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1473019487, "post_id": 39237889, "comment_id": 65973907, "body": "@WeatherVane No worries.  I thought you thought you were making a joke (because &quot;GMT Daylight Time&quot; <i>is</i> ridiculous), but it turns out -- as I guess you already knew -- Microsoft has a, er, sense of humor when it comes to time zone names, too."}], "answers": [{"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1472623334, "post_id": 39238358, "comment_id": 65820154, "body": "&quot;AFAIK there is no standard C way to guarantee you&#39;ll get the time zone abbreviation&quot;. That&#39;s correct.  Under Windows you get the full name, under Unix and Linux and other systems which are based on the Arthur David Olson time zone code (including MacOS) you get the abbreviation, and there&#39;s no way to ask for one or the other."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1472672541, "post_id": 39238358, "comment_id": 65851483, "body": "@SteveSummit - I would have up-clicked this in an answer.  It adds to the conversation (and to my understanding) with clear unambiguous statements about strftime()&#39;s timezone behavior.  Thank you."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1472623776, "last_edit_date": 1472623776, "creation_date": 1472598179, "answer_id": 39238358, "question_id": 39237889, "link": "https://stackoverflow.com/questions/39237889/getting-abbreviated-timezone-using-strftime-using-c/39238358#39238358", "title": "Getting Abbreviated timezone using strftime() using C", "body": "<p><code>strftime</code> gives no guarantee whether you'll get the full name or the abbreviation. It is implementation dependent. The C99 spec (<a href=\"https://msdn.microsoft.com/en-us/library/aa272978(v=vs.60).aspx\" rel=\"nofollow\">and Microsoft's documentation</a>) says:</p>\n\n<blockquote>\n  <p>%Z is replaced by the locale\u2019s time zone name or abbreviation, or by no characters if no time zone is determinable.</p>\n</blockquote>\n\n<p>AFAIK there is no standard C way to guarantee you'll get the time zone abbreviation. That assumes you use the system time zone database. You could <a href=\"https://www.iana.org/time-zones\" rel=\"nofollow\">ship with your own copy of the time zone database</a>.</p>\n\n<p>In general, time zone abbreviations are a bad idea because they're ambiguous. Skimming <a href=\"https://en.wikipedia.org/wiki/List_of_time_zone_abbreviations\" rel=\"nofollow\">the list</a> we find ACT, AMT, BST, ECT, GST, IST, LHST, MST, PST, and SST are all ambiguous. You're better off using the full name, the numeric offset (ie. <code>%z</code>), or eschew time zones altogether and use UTC (particularly useful for logging).</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 3, "last_activity_date": 1472618474, "creation_date": 1472618474, "answer_id": 39240867, "question_id": 39237889, "link": "https://stackoverflow.com/questions/39237889/getting-abbreviated-timezone-using-strftime-using-c/39240867#39240867", "title": "Getting Abbreviated timezone using strftime() using C", "body": "<p>I recently needed the same thing, and determined that there is No Good Answer.  I wrote some brute-force code to map Windows timezone strings like \"Eastern Standard Time\" to \"EST\", but I knew that (a) this was a Bad Idea and (b) my list of translations would never be complete.</p>\n"}], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1658, "favorite_count": 0, "accepted_answer_id": 39238358, "answer_count": 2, "score": 4, "last_activity_date": 1493670175, "creation_date": 1472595216, "last_edit_date": 1495542360, "question_id": 39237889, "link": "https://stackoverflow.com/questions/39237889/getting-abbreviated-timezone-using-strftime-using-c", "title": "Getting Abbreviated timezone using strftime() using C", "body": "<p>I have viewed <em><a href=\"https://stackoverflow.com/questions/34408909/how-to-get-abbreviated-timezone\">this</a></em>, and <em><a href=\"https://stackoverflow.com/questions/37109945/how-to-use-abbreviated-timezone-namepst-ist-in-pytz\">this</a></em>, on SO, but they deal with non-C variations of the same problem.  </p>\n\n<p>Using GNU GCC compiler (Code::Blocks, in Windows) with the following code:</p>\n\n<pre><code>int main(void)\n{\n    time_t rawtime;\n    struct tm *info;\n    char timeStr[80];\n\n    time( &amp;rawtime );\n    info = localtime( &amp;rawtime );\n\n    strftime(timeStr,80,\"%a %b %d %H:%M:%S %Z %Y\", info);\n\n    printf(\"%s\", timeStr);\n    getchar();\n\n    return 0;\n} \n</code></pre>\n\n<p>I am getting this time string:</p>\n\n<blockquote>\n  <p>Tue Aug 30 14:55:08 Pacific Daylight Time 2016  </p>\n</blockquote>\n\n<p>Everything is fine except time zone.  I prefer it to be abbreviated, such as:   </p>\n\n<blockquote>\n  <p>Tue Aug 30 14:55:08 PDT 2016 </p>\n</blockquote>\n\n<p>In every man page, or windows documentation for <em>strftime()</em> I can find the description for the format specifier %Z goes something like: Timezone name <em>or abbreviation</em>. ( <em><a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_strftime.htm\" rel=\"nofollow noreferrer\">eg. here</a></em>. )</p>\n\n<p>What is the trick to formatting timezone to be abbreviated?</p>\n"}, {"tags": ["c", "doxygen", "doxygen-addtogroup"], "answers": [{"comments": [{"owner": {"reputation": 13318, "user_id": 784672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008f3938a435205bf2520946073bb58a?s=128&d=identicon&r=PG", "display_name": "doxygen", "link": "https://stackoverflow.com/users/784672/doxygen"}, "edited": false, "score": 0, "creation_date": 1472730319, "post_id": 39263870, "comment_id": 65875638, "body": "Sounds like something to file a bug report for. You can do so here: <a href=\"https://bugzilla.gnome.org/enter_bug.cgi?product=doxygen\" rel=\"nofollow noreferrer\">bugzilla.gnome.org/enter_bug.cgi?product=doxygen</a>"}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 1, "last_activity_date": 1472710307, "last_edit_date": 1495540850, "creation_date": 1472710307, "answer_id": 39263870, "question_id": 39237580, "link": "https://stackoverflow.com/questions/39237580/doxygen-warning-end-of-file-while-inside-a-group-from-array-creation/39263870#39263870", "title": "Doxygen: warning end of file while inside a group from array creation", "body": "<p>If  Comma_Delimited_Text_File.txt doesn't have trailing linebreak, then try adding one.</p>\n\n<p>Doxygen gets confused if include file doesn't end with linebreak. This can break the document generation for other files too, even when they don't seem related. Often this results in missing symbols and <a href=\"https://stackoverflow.com/q/28499422/694733\">broken callgraphs</a>.</p>\n"}], "owner": {"reputation": 33, "user_id": 6776259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0631ad4228a62cf08f64849af1f2a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Andysics", "link": "https://stackoverflow.com/users/6776259/andysics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 39263870, "answer_count": 1, "score": 3, "last_activity_date": 1472710307, "creation_date": 1472593516, "last_edit_date": 1495540300, "question_id": 39237580, "link": "https://stackoverflow.com/questions/39237580/doxygen-warning-end-of-file-while-inside-a-group-from-array-creation", "title": "Doxygen: warning end of file while inside a group from array creation", "body": "<p>This issue is due to doxygen parsing constraints. I am using doxygen 1.8.11 with Eclox (the eclipse plugin) in Kinetis Design Studio for embedded C development. </p>\n\n<p>Almost all of the doxygen compiling works, except I need to have a few very large static arrays. I didn't want to clutter up the main code, so I used a hack I found on these forums (<a href=\"https://stackoverflow.com/a/4645515/6776259\">https://stackoverflow.com/a/4645515/6776259</a>):</p>\n\n<pre><code>static const float Large_Array[2000] = {\n#include \"Comma_Delimited_Text_File.txt\"\n};\n</code></pre>\n\n<p>Unfortunately, that hack is causing the compile of my main.c <em>main_module</em> group to fail. With the following error:</p>\n\n<p><em>warning: end of file while inside a group</em></p>\n\n<p>I've tried excluding those constants from my <em>main_module</em> group with something like the following:</p>\n\n<pre><code>/*!\n**  @addtogroup main_module\n**  @{\n*/\n...\n... header code ...\n...\n/*!\n** @}\n*/\nstatic const float Large_Array[2000] = {\n#include \"Comma_Delimited_Text_File.txt\"\n};\n/*!\n**  @addtogroup main_module\n**  @{\n*/\n...\nMore code, definitions, etc.\nNone of this is generated in the doxygen compile...?\n/*!\n** @}\n*/\n</code></pre>\n\n<p>This gets rid of the doxygen compiling error, but the compiled doxygen documentation does not include anything after the Large_Array declaration. So it seems the second <em>@addtogroup</em> statement is not working. </p>\n\n<p>Am I missing something simple? Any help is appreciated. Thank you.</p>\n"}, {"tags": ["c", "hash", "hashmap", "hashtable"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1472593257, "post_id": 39237409, "comment_id": 65812197, "body": "This design simply doesn&#39;t work. There&#39;s no hash function that applies to all types, just like there&#39;s no equality predicate that applies to all types, even if you have a length parameter to work with."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1472593405, "post_id": 39237409, "comment_id": 65812258, "body": "Are you asking whether the code you present is valid?  Yes it is, provided only that <code>key_size</code> is no larger than the size of the object to which <code>key</code> points and also no larger than <code>INT_MAX + 1</code>."}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "edited": false, "score": 0, "creation_date": 1472593441, "post_id": 39237409, "comment_id": 65812267, "body": "Why? Couldn&#39;t I get given type convert it to binary representation, add each byte and calculate some number and then multiply by prime number and modulo the result by hash table size?"}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "edited": false, "score": 0, "creation_date": 1472593480, "post_id": 39237409, "comment_id": 65812281, "body": "Will be it a good hash function?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1472593500, "post_id": 39237409, "comment_id": 65812292, "body": "@Micha\u0142Ziobro, the question is not whether you can compute the function, but rather whether it is an appropriate hash function for any given data type.  That depends on the data type, but probably no, it&#39;s characteristics will not be very good."}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "edited": false, "score": 0, "creation_date": 1472593770, "post_id": 39237409, "comment_id": 65812417, "body": "What can be improved, and why it&#39;s characteristics wan&#39;t be very good? For char * (string) it will add ASCII codes, for struct name* or int * it will add bytes? I am right?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1472593789, "post_id": 39237409, "comment_id": 65812425, "body": "For one thing, if the objects you hash contain pointers then you will hash the pointer values, not the data they point to.  You will also hash any padding bytes in the objects, which is probably a deal-breaker for any type that <i>has</i> padding.  On the more technical side, your function is insentive to reordering of the bytes of the object, which is not a good characteristic for a hash function."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1472594099, "post_id": 39237409, "comment_id": 65812534, "body": "Your best bet for a generic hash table is for it to have a function pointer to the hash function it should call. There&#39;s a reason why hash tables in other languages use an external hash function."}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "edited": false, "score": 0, "creation_date": 1472594255, "post_id": 39237409, "comment_id": 65812588, "body": "ok so I should define in hash_map filed that will store hash function pointer, and initialize it with specific hash function for the type that will be placed in the hash_map keys, e.g. if I will be using string keys I should hash_map_init( str_hash_func ), if keys will be integers I should call hash_map_init( int_hash_func ), etc. ?"}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472594580, "post_id": 39237409, "comment_id": 65812687, "body": "also, don&#39;t use <code>&amp; HASH_MASK</code>, but use <code>% HASHTAB_SIZE</code> instead. If the HASHTAB_SIZE is power of 2 then the compiler would optimise &#39;%&#39; into bitwise-and automatically. Also, the hash-tables of odd (preferably prime) size show better results."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1472596376, "post_id": 39237876, "comment_id": 65813275, "body": "Still doesn&#39;t work, because you can&#39;t resolve collisions with just a hash function, especially if you&#39;re allowing mixed key types in the same table."}, {"owner": {"reputation": 1141, "user_id": 5802468, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yqeEu.gif?s=128&g=1", "display_name": "Majora320", "link": "https://stackoverflow.com/users/5802468/majora320"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472597018, "post_id": 39237876, "comment_id": 65813489, "body": "@user2357112 This is an oversimplified example, please excuse me for not adding a key parameter."}], "tags": [], "owner": {"reputation": 1141, "user_id": 5802468, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yqeEu.gif?s=128&g=1", "display_name": "Majora320", "link": "https://stackoverflow.com/users/5802468/majora320"}, "is_accepted": true, "score": 1, "last_activity_date": 1472596228, "last_edit_date": 1472596228, "creation_date": 1472595139, "answer_id": 39237876, "question_id": 39237409, "link": "https://stackoverflow.com/questions/39237409/c-representing-any-object-type-void-as-the-integer-number-calculated-identi/39237876#39237876", "title": "C representing any object (type void *) as the integer number (calculated identifier)", "body": "<p>The usual answer here is to have the caller of the <code>insert</code> function to provide their own hash function, like so:</p>\n\n<pre><code>void insert(struct hash_table* table, void* data, int (*hash_function)(void*)) {\n    int hash = hash_function(data);\n    // insert data...\n}\n</code></pre>\n\n<p>Then you can implement a hash function for each type you want to insert, and pass it to the <code>insert</code> function:</p>\n\n<pre><code>void hash_string(void* data) {\n    char* s = (char*)s;\n    // hash the string...\n}\n\n// somewhere else\ninsert(&amp;table, \"Hello, world!\", &amp;hash_string);\n</code></pre>\n"}], "owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 39237876, "answer_count": 1, "score": 0, "last_activity_date": 1472596228, "creation_date": 1472592759, "question_id": 39237409, "link": "https://stackoverflow.com/questions/39237409/c-representing-any-object-type-void-as-the-integer-number-calculated-identi", "title": "C representing any object (type void *) as the integer number (calculated identifier)", "body": "<p>I need to implement <strong>hash table</strong> (or hash map) that stores keys of any type. So I have used <code>void *key</code> and <code>size_t key_size</code>. I need to write <strong>hash_function(void *key, size_t key_size)</strong> for such keys. </p>\n\n<p>Hash function need to calculate index in the array. So I need in the first place to calculate integer representation of such object. If this will be the string I could get ascii number for each char in the string and sum them up. But I this can be any type (any pointer) i.e. pointer to string pointer to struct how can I calculate such integer representation? </p>\n\n<p>Maybe I could convert this <code>void *</code> into <code>char *</code> and then loop through key_size bytes? </p>\n\n<pre><code>static int hash_function(void *key, size_t key_size) {\n\n        unsigned int h = 0; \n        char *key_data = (char *) key; \n\n        for(int i=0; i &lt; key_size; i++) { \n             h += key_data[i];  \n        }\n\n        return (h * 1049) &amp; HASHTAB_MASK; // HASHTAB_MASK = HASHTAB_SIZE - 1 used instead of modulo operation as such approach is faster\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement", "post-increment"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1472592207, "post_id": 39237273, "comment_id": 65811778, "body": "C11 draft standard n1570: <i>6.5.2.4 Postfix increment and decrement operators 2 The result of the postfix ++ operator is the value of the operand.[...] The value computation of the result is sequenced before the side effect of updating the stored value of the operand.</i>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 6, "creation_date": 1472592240, "post_id": 39237273, "comment_id": 65811791, "body": "The <i>result</i> of <code>i++</code> is 0, so the <code>if()</code> is not taken."}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 2, "creation_date": 1472592256, "post_id": 39237273, "comment_id": 65811799, "body": "the postfix form increments the value stored in a variable after the expression is evaluated, thus you have 0 as a test expression in if()"}, {"owner": {"reputation": 182, "user_id": 2287321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104fc5e574366cd322fd53cbef10bc36?s=128&d=identicon&r=PG", "display_name": "shortwavedave", "link": "https://stackoverflow.com/users/2287321/shortwavedave"}, "edited": false, "score": 0, "creation_date": 1472592346, "post_id": 39237273, "comment_id": 65811843, "body": "Post increment means it increments after the condition is checked. Put something like cout &lt;&lt; &quot;blah&quot; in the condition block to help you understand how this works"}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472592369, "post_id": 39237273, "comment_id": 65811851, "body": "inside the if statement, the value of <code>i</code> is checked <i>before</i> it&#39;s incremented, that&#39;s what postfixed ++ means. Is the value is zero still, then goes to 1 then the statement after the if is not executed as the if condition was zero=false."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472592460, "post_id": 39237273, "comment_id": 65811886, "body": "you were talking about prefixed ++, in fact"}], "answers": [{"comments": [{"owner": {"reputation": 569, "user_id": 3045845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oo514.png?s=128&g=1", "display_name": "Lisek", "link": "https://stackoverflow.com/users/3045845/lisek"}, "edited": false, "score": 0, "creation_date": 1472592479, "post_id": 39237336, "comment_id": 65811893, "body": "But then again when I have <code>if(++i &amp;&amp; i++) i++;</code> the result is 3."}, {"owner": {"reputation": 984, "user_id": 6641516, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b__FzxzSmgU/AAAAAAAAAAI/AAAAAAAABqE/zRhjNLBdLQE/photo.jpg?sz=128", "display_name": "Derick Alangi", "link": "https://stackoverflow.com/users/6641516/derick-alangi"}, "reply_to_user": {"reputation": 569, "user_id": 3045845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oo514.png?s=128&g=1", "display_name": "Lisek", "link": "https://stackoverflow.com/users/3045845/lisek"}, "edited": false, "score": 0, "creation_date": 1472592645, "post_id": 39237336, "comment_id": 65811958, "body": "Yes that is correct since <code>++i</code> will be 1 and <code>i++</code> is also still 1 since <code>i</code> will be used first before incrementation. So 1 &amp;&amp; 1 is true and then before leaving the condition, <code>i</code> will be incremented to 2 and also the line below the <code>if</code> will be evaluated to 3 and the new value of <code>i</code> will be 3. Its very correct."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 569, "user_id": 3045845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oo514.png?s=128&g=1", "display_name": "Lisek", "link": "https://stackoverflow.com/users/3045845/lisek"}, "edited": false, "score": 0, "creation_date": 1472592646, "post_id": 39237336, "comment_id": 65811960, "body": "@Lisel that is because both expressions are evaluated - the first expression is <code>true</code>, so the second must be evalauted due to the <code>&amp;&amp;</code> - both expressions must be <code>true</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472592691, "post_id": 39237336, "comment_id": 65811973, "body": "The expression is not short-circuited in case of <code>&amp;&amp;</code>, as the left side is evaluated to <code>true</code>."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472592700, "post_id": 39237336, "comment_id": 65811977, "body": "take a look at the generated code, very educational."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 569, "user_id": 3045845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oo514.png?s=128&g=1", "display_name": "Lisek", "link": "https://stackoverflow.com/users/3045845/lisek"}, "edited": false, "score": 1, "creation_date": 1472592724, "post_id": 39237336, "comment_id": 65811985, "body": "@Lise\u0142: For more fun, what will <code>if(++i &amp;&amp; --i) i++;</code> result in?"}, {"owner": {"reputation": 569, "user_id": 3045845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oo514.png?s=128&g=1", "display_name": "Lisek", "link": "https://stackoverflow.com/users/3045845/lisek"}, "edited": false, "score": 0, "creation_date": 1472592757, "post_id": 39237336, "comment_id": 65812001, "body": "I thought that the compiler evaluates both of the expressions in the if statement no matter what if <code>||</code> (OR) is used. Well I could not be more wrong I guess."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472592779, "post_id": 39237336, "comment_id": 65812008, "body": "Short-circuited operations are fun."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 569, "user_id": 3045845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oo514.png?s=128&g=1", "display_name": "Lisek", "link": "https://stackoverflow.com/users/3045845/lisek"}, "edited": false, "score": 0, "creation_date": 1472592803, "post_id": 39237336, "comment_id": 65812015, "body": "@LIsel not if the truth can be established from the first evaluation: short-circuit. In the case of <code>&amp;&amp;</code> if the first expression is false the second is not evaluated. In the case of <code>||</code> if the first expression is true the second is not evaluated."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472592876, "post_id": 39237336, "comment_id": 65812043, "body": "in actual practice, if it happens not to violate the standard, then a good compiler may choose to evaluate both parts, if the code generated is faster. But it will have to check for legality in a particular case. Take a look at code generated by GCC with -O3 option."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472592944, "post_id": 39237336, "comment_id": 65812079, "body": "@CecilWard &quot;if it happens not to violate the standard&quot; or for more practical purpose &quot;if it happens not to change the program semantics&quot;."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472592970, "post_id": 39237336, "comment_id": 65812091, "body": "this is because good compilers desperately want to avoid branches for speed when the balance of cost is in favour."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472593002, "post_id": 39237336, "comment_id": 65812101, "body": "@eugene sh quite so"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 1, "creation_date": 1472593033, "post_id": 39237336, "comment_id": 65812115, "body": "@CecilWard you can rely on the second part not being evaulated, when it involves the firrst part. For example <code>if(n &gt;= 0 &amp;&amp; array[n] == 42)</code>. The second part <i>cannot</i> be evaluated unless the first part is <code>true</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472593107, "post_id": 39237336, "comment_id": 65812146, "body": "@WeatherVane It can if the second part has no side-effects. I remember discussing it somewhere with chux..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1472593166, "post_id": 39237336, "comment_id": 65812167, "body": "@EugeneSh. if in my example <code>n = -1</code> the second will not, and cannot be safely evaluated."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472593246, "post_id": 39237336, "comment_id": 65812193, "body": "I should have said that the condition is quite tight, it has to just produce code that \u2018does the right thing\u2019 as if it had used shortcut, which is quite a challenge, but I&#39;ve often seen code that does what I said, using a <code>cmov</code> instruction. Compilers are v intelligent nowadays"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 9, "creation_date": 1472593487, "post_id": 39237336, "comment_id": 65812284, "body": "@EOF: &quot;<i>For more fun, what will <code>if(++i &amp;&amp; --i) i++;</code> result in?</i>&quot; -- A failed code review."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 4, "creation_date": 1472593529, "post_id": 39237336, "comment_id": 65812301, "body": "please kids, don&#39;t write code like this though, don&#39;t require other maintainers to look up the fine details of the standard too often. You won&#39;t generated better or worse code by cramming lots of stuff into single complex if statements or putting side effects into tests."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472593627, "post_id": 39237336, "comment_id": 65812348, "body": "good compilers are so intelligent nowadays that it doesn&#39;t usually matter if you change the statement layout to make it a bit simpler for non-experts to read and work out exactly what you <i>intended</i>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472593689, "post_id": 39237336, "comment_id": 65812383, "body": "@KeithThompson: Are you sure <code>i += !!i;</code> will fare better?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1472594097, "post_id": 39237336, "comment_id": 65812533, "body": "@EOF Actually looks like a useful construct... Not sure for what, but feels useful :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1472594238, "post_id": 39237336, "comment_id": 65812576, "body": "@EOF Ah, OK, it is pretty useful with a modification: <code>i -= !!i;</code>. Good for decrementing down to zero."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472594456, "post_id": 39237336, "comment_id": 65812652, "body": "&quot;checks the value of i before incrementing.&quot; - not necessarily, it could increment and then check the value and then subtract 1 for purposes of the test.  It&#39;s better to say that the old value is used for the test, and the test may happen at some stage before or after the stored value is incremented.  The way you put it, leads to people wondering why <code>printf(&quot;%d %d\\n&quot;, i++, i++);</code> can output <code>1 1</code> or any other nonsense"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472594636, "post_id": 39237336, "comment_id": 65812711, "body": "@M.M That&#39;s undefined for multiple unsequenced modifications to a scalar object. It can output &quot;elephant&quot;."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472595251, "post_id": 39237336, "comment_id": 65812912, "body": "@M M -agreed, bad wording. It should always have an &#39;effectively&#39; or an \u2019as if\u2019 qualifier. Modern compilers are so intelligent that they can radically rearrange and rewrite your code completely as long as it preserves the meaning, <i>it&#39;s as if</i> the program generated were the one you actually wrote."}, {"owner": {"reputation": 500, "user_id": 6353611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-DQpUDPG9mwo/AAAAAAAAAAI/AAAAAAAAAC0/XqhcmR1-fAQ/photo.jpg?sz=128", "display_name": "Cecil Ward", "link": "https://stackoverflow.com/users/6353611/cecil-ward"}, "edited": false, "score": 0, "creation_date": 1472595495, "post_id": 39237336, "comment_id": 65812999, "body": "It&#39;s very instructive to take a look at generated code with high levels of optimisation set (eg -O2 and -O3 and -Os in GCC) as you might be surprised at how much transformation goes on, including deleting huge chunks of your code altogether on occasion. But advanced compilers don&#39;t seem to get things wrong in my experience."}], "tags": [], "owner": {"reputation": 984, "user_id": 6641516, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-b__FzxzSmgU/AAAAAAAAAAI/AAAAAAAABqE/zRhjNLBdLQE/photo.jpg?sz=128", "display_name": "Derick Alangi", "link": "https://stackoverflow.com/users/6641516/derick-alangi"}, "is_accepted": true, "score": 2, "last_activity_date": 1472593418, "last_edit_date": 1472593418, "creation_date": 1472592403, "answer_id": 39237336, "question_id": 39237273, "link": "https://stackoverflow.com/questions/39237273/result-of-double-postincrementation-in-if-statement-and-its-body/39237336#39237336", "title": "Result of double postincrementation - in if statement and its body", "body": "<ul>\n<li>The line of code <code>if(i++)</code> checks the value of <code>i</code> before incrementing. So the check fails since <code>i=0</code> and after the check, <code>i</code> will be incremented before leaving the <code>if</code> condition making it equal to 1. </li>\n<li>But <code>if(++i || i++)</code> passes since <code>++i</code> is evaluated before the condition is checked which evaluates to 1 and the condition will be true and then <code>i++</code> which will result to 2. </li>\n<li>Also, since ++i will be 1 and i++ is also still 1 since i will be used first before its incremented. So 1 &amp;&amp; 1 is true and then before leaving the condition, i will be incremented to 2 and also the line below the if will be evaluated to 3 and the new value of i will be 3.</li>\n</ul>\n"}], "owner": {"reputation": 569, "user_id": 3045845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oo514.png?s=128&g=1", "display_name": "Lisek", "link": "https://stackoverflow.com/users/3045845/lisek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 39237336, "answer_count": 1, "score": 3, "last_activity_date": 1472593418, "creation_date": 1472592082, "last_edit_date": 1472592613, "question_id": 39237273, "link": "https://stackoverflow.com/questions/39237273/result-of-double-postincrementation-in-if-statement-and-its-body", "title": "Result of double postincrementation - in if statement and its body", "body": "<p>Could someone explain me why this short line of code is returning 1?</p>\n\n<pre><code>int i = 0;\nif(i++) i++;\nprintf(\"%d\", i);\n</code></pre>\n\n<p>I mean when checking the if statement <code>i</code> has to be incremented otherwise the result would not be 1. But then as it is incremented is should be incremented once again resulting in 2.</p>\n\n<p>And even better, why this line of code is resulting 2?</p>\n\n<pre><code>int i = 0;\nif(++i || i++) i++;\n</code></pre>\n\n<p>Also this</p>\n\n<pre><code>int i = 0;\nif(++i &amp;&amp; i++) i++;\n</code></pre>\n\n<p>Returns 3.</p>\n"}, {"tags": ["c", "linux", "wifi", "pcap", "radiotap"], "comments": [{"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472592967, "post_id": 39237200, "comment_id": 65812090, "body": "is there a reason you must use C? and please mention the programming language. It is not specific to Kali Linux (it&#39;s just Linux + preinstalled tools) so I changed the Kali Linux tag to just Linux."}, {"owner": {"reputation": 1, "user_id": 6776183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d006d6376015c71280ab640faca3b6bd?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos Bot", "link": "https://stackoverflow.com/users/6776183/kokos-bot"}, "reply_to_user": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472593623, "post_id": 39237200, "comment_id": 65812345, "body": "Well i only learned c/c++ and my inspiration programm code ist c too. <a href=\"https://befinitiv.wordpress.com/wifibroadcast-analog-like-transmission-of-live-video-data/\" rel=\"nofollow noreferrer\">befinitiv.wordpress.com/&hellip;</a>"}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472593743, "post_id": 39237200, "comment_id": 65812403, "body": "One tip for you: please use proper spelling and grammar. Not doing so WILL attract downvotes. This is a common noob mistake. imagine this was GitHub or your r&#233;sum&#233;."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472593819, "post_id": 39237200, "comment_id": 65812436, "body": "Not enough information. Learn to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472593891, "post_id": 39237200, "comment_id": 65812458, "body": "Please use code formatting. Select the code and click <code>{}</code> in the toolbar."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472593972, "post_id": 39237200, "comment_id": 65812490, "body": "Normally, I would copyedit for you (with my no-approval-require privilege), but I want you to learn. So please copyedit it now. <a href=\"https://stackoverflow.com/posts/39237200/edit\">edit</a>"}, {"owner": {"reputation": 1, "user_id": 6776183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d006d6376015c71280ab640faca3b6bd?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos Bot", "link": "https://stackoverflow.com/users/6776183/kokos-bot"}, "reply_to_user": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472594898, "post_id": 39237200, "comment_id": 65812797, "body": "Yes, i try to improve my english. I read the info page. The {} tool expect the }; every time..."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472595561, "post_id": 39237200, "comment_id": 65813030, "body": "Select ALL the code. Including <code>}</code>. I&#39;ll copyedit you now."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472595579, "post_id": 39237200, "comment_id": 65813037, "body": "also, use the preview!"}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472595623, "post_id": 39237200, "comment_id": 65813044, "body": "tell what is &quot;monitor mode&quot;. We don&#39;t know enough."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472595772, "post_id": 39237200, "comment_id": 65813094, "body": "I&#39;m removing unnecessary info to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Read that guide."}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472595842, "post_id": 39237200, "comment_id": 65813116, "body": "Look over my changes to learn how to format questions in the future. Click &quot;edited ..... ago&quot;"}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472595941, "post_id": 39237200, "comment_id": 65813156, "body": "there&#39;s gotta be a preexisting library for this."}, {"owner": {"reputation": 1, "user_id": 6776183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d006d6376015c71280ab640faca3b6bd?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos Bot", "link": "https://stackoverflow.com/users/6776183/kokos-bot"}, "reply_to_user": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1472596803, "post_id": 39237200, "comment_id": 65813420, "body": "Ok, i read &quot;edited ... ago&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 666, "user_id": 1407571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97e3283a5023a271474a0a7168ace897?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1407571/dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1472622649, "creation_date": 1472622649, "answer_id": 39241685, "question_id": 39237200, "link": "https://stackoverflow.com/questions/39237200/send-packet-pcap-wlan-c-to-reciever-recieving-without-connection/39241685#39241685", "title": "Send packet (PCAP, WLAN, C) to reciever, recieving without connection", "body": "<p>The monitor mode allows to send and receive arbitrary packets without association.\nIf your sender and receiver are not connected you can send raw packets using this mode only.</p>\n"}], "owner": {"reputation": 1, "user_id": 6776183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d006d6376015c71280ab640faca3b6bd?s=128&d=identicon&r=PG&f=1", "display_name": "Kokos Bot", "link": "https://stackoverflow.com/users/6776183/kokos-bot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1605937551, "creation_date": 1472591697, "last_edit_date": 1605937551, "question_id": 39237200, "link": "https://stackoverflow.com/questions/39237200/send-packet-pcap-wlan-c-to-reciever-recieving-without-connection", "title": "Send packet (PCAP, WLAN, C) to reciever, recieving without connection", "body": "<p>I plan to use Wi-Fi by radio to navigate my drone.\nI want so send packets from laptop to the drone. Currently I can send packets out, but only when the Wi-Fi card is in monitor mode.</p>\n<pre><code>static const u8 u8aRadiotapHeader[] = {\n    0x00, 0x00, // &lt;-- radiotap version\n    0x0c, 0x00, // &lt;- radiotap header length\n    0x04, 0x0c, 0x00, 0x00, // &lt;-- bitmap\n    0x22, // &lt;-- rate\n    0x0, //&lt;-- tx power\n    0x18, 0x00  //&lt;-- antenna \n};\n\nstatic u8 u8aIeeeHeader[] = {\n    0x08, 0x01, 0x00, 0x00,\n    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,\n    0x13, 0x22, 0x33, 0x44, 0x55, 0x66,\n    0x13, 0x22, 0x33, 0x44, 0x55, 0x66,\n    0x10, 0x86,\n};\n</code></pre>\n<p>Is it possible to set up my headers so that the Wi-Fi card will receive the packet without being in monitor mode, and if so, how can I achieve it?\nOr am I forced to filter all packets in air?</p>\n<p>Regards,\nKokos Bot.</p>\n<p>My systems:</p>\n<p>Sender: Linux 64-bit with PCAP for my sending program in C</p>\n<p>Reciever: R-Pi2</p>\n<p>I use TL-WN722N on both the sending and receiving sides.</p>\n"}, {"tags": ["c", "gcc", "segmentation-fault", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1472591326, "post_id": 39237085, "comment_id": 65811379, "body": "Didn&#39;t you just answer your own question?"}, {"owner": {"reputation": 176, "user_id": 3142840, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d97751e27502579e978071425996d6a?s=128&d=identicon&r=PG&f=1", "display_name": "deltasata", "link": "https://stackoverflow.com/users/3142840/deltasata"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1472591514, "post_id": 39237085, "comment_id": 65811468, "body": "Earlier in 14.04, I did not have to use  -fno-stack-protector. But now I have to. Why? * stack smashing detected * is not something new that it comes with 16.04 upgrade."}, {"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 0, "creation_date": 1472592474, "post_id": 39237085, "comment_id": 65811891, "body": "I suggest you actually read what <code>-fno-stack-protector</code> <i>actually does</i>. I suggest you go learn how to open your program in a debugger."}, {"owner": {"reputation": 176, "user_id": 3142840, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d97751e27502579e978071425996d6a?s=128&d=identicon&r=PG&f=1", "display_name": "deltasata", "link": "https://stackoverflow.com/users/3142840/deltasata"}, "edited": false, "score": 0, "creation_date": 1472594496, "post_id": 39237085, "comment_id": 65812662, "body": "In gcc version: 4.4.6 20110731 (Red Hat 4.4.6-3), stack smashing detected does not come. But when I use gcc (Ubuntu 5.4.0-6ubuntu1~16.04.2) 5.4.0 20160609, this error comes. My question is, can I go back to a gcc version in ehich this does not come?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1472596385, "post_id": 39237085, "comment_id": 65813283, "body": "Why don&#39;t you fix your code instead of trying to find a compiler option to ignore the error? That error is serious and should not be ignored (unless you are deliberately corrupting memory for some purpose)."}, {"owner": {"reputation": 176, "user_id": 3142840, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d97751e27502579e978071425996d6a?s=128&d=identicon&r=PG&f=1", "display_name": "deltasata", "link": "https://stackoverflow.com/users/3142840/deltasata"}, "edited": false, "score": 0, "creation_date": 1472640941, "post_id": 39237085, "comment_id": 65831204, "body": "Actually, my code requires huge memory. So I need to use: ulimit -s unlimited. With this, the gcc did not give this stack smashing error earlier (14.04). But with the upgrade in gcc, this error comes. Can I avoid it now. I can not change the code, it is optimised professionally."}], "answers": [{"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 1, "last_activity_date": 1545307540, "creation_date": 1545307540, "answer_id": 53868376, "question_id": 39237085, "link": "https://stackoverflow.com/questions/39237085/stack-smashing-detected-comes-in-ubuntu-16-04/53868376#53868376", "title": "stack smashing detected comes in ubuntu 16.04", "body": "<p>Stack protector in Ubuntu 16's GCC 4.9 became <a href=\"https://wiki.debian.org/Hardening#DEB_BUILD_HARDENING_STACKPROTECTOR_.28gcc.2Fg.2B-.2B-_-fstack-protector-strong.29\" rel=\"nofollow noreferrer\">more aggressive</a> so it likely to detect hidden bug in your code.</p>\n"}], "owner": {"reputation": 176, "user_id": 3142840, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d97751e27502579e978071425996d6a?s=128&d=identicon&r=PG&f=1", "display_name": "deltasata", "link": "https://stackoverflow.com/users/3142840/deltasata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1585485340, "creation_date": 1472591149, "last_edit_date": 1545307563, "question_id": 39237085, "link": "https://stackoverflow.com/questions/39237085/stack-smashing-detected-comes-in-ubuntu-16-04", "title": "stack smashing detected comes in ubuntu 16.04", "body": "<p>Earlier in Ubuntu 14.04, I used compile a code (using gcc) and no such error used to come. But when I upgrade to 16.04, the same code is giving me this error:</p>\n\n<pre><code>*** stack smashing detected ***: ./main terminated\nAborted (core dumped).\n</code></pre>\n\n<p>Why is so? When I used  <code>-fno-stack-protector</code> while compiling the error vanished (no segmentation fault either).</p>\n"}]