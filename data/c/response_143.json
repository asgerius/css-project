[{"tags": ["c", "string", "null", "null-terminated"], "comments": [{"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 3, "creation_date": 1507161070, "post_id": 46575793, "comment_id": 80105003, "body": "What do you mean? That&#39;s how C works. String literals are null terminated."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1507161531, "post_id": 46575793, "comment_id": 80105134, "body": "C is very confusing. Note that <code>NULL</code> (capitals) is a macro that&#39;s used as a <i>pointer</i> constant. You however are after something entirely different, namely a <i>character</i> with numeric value zero. It&#39;s usually spelled <code>&#39;\\0&#39;</code>, though just <code>0</code> would also work, and sometimes the symbol &quot;NUL&quot; (one &#39;L&#39;) is used, too. That is, strings are &quot;zero-terminated&quot; or &quot;null-terminated&quot; (&quot;null&quot; being an alternative word for &quot;zero&quot;), or maybe NUL-terminated, but never the thing you said."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507162792, "post_id": 46575793, "comment_id": 80105446, "body": "OMG <code>&quot;POR&quot;</code> is type of <code>char *</code>, not <code>char</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2991, "user_id": 3877787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPxhf.jpg?s=128&g=1", "display_name": "Zalman Stern", "link": "https://stackoverflow.com/users/3877787/zalman-stern"}, "is_accepted": false, "score": 0, "last_activity_date": 1507161294, "creation_date": 1507161294, "answer_id": 46575868, "question_id": 46575793, "link": "https://stackoverflow.com/questions/46575793/how-is-null-terminated/46575868#46575868", "title": "How is NULL terminated?", "body": "<p>String literals are defined by the language to have a nul byte at the end. This is why <code>sizeof(\"POR\")</code> equals <code>4</code>, not <code>3</code>. When the compiler generates the string literal into the output binary, it arranges for the nul byte to be present.</p>\n"}, {"tags": [], "owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "is_accepted": false, "score": 0, "last_activity_date": 1507161359, "creation_date": 1507161359, "answer_id": 46575875, "question_id": 46575793, "link": "https://stackoverflow.com/questions/46575793/how-is-null-terminated/46575875#46575875", "title": "How is NULL terminated?", "body": "<p>If I had to guess why strings in C are null terminated, it could be because Dennis Ritchie thought it would be a good idea to be able to identify the end of a string. Many convenience functions work using this feature, such as strlen </p>\n"}, {"comments": [{"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 0, "creation_date": 1507161860, "post_id": 46575918, "comment_id": 80105216, "body": "My brain made me think there was a &#39;*&#39; after char lol. Good catch"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1507161893, "post_id": 46575918, "comment_id": 80105226, "body": "You cannot assign the string. There is no string assignment in the C language. You can only assign the pointer with the address of a char (in case of the string). There is only one exception from this rule - initialisation of the char table (or any other table or structure in general): <code>char str[]=&quot;asasas&quot;;</code> where actual string is being copied."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1507162150, "post_id": 46575918, "comment_id": 80105300, "body": "Not string literals - initialisation of the char arrays which makes a huge difference"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1507162230, "last_edit_date": 1507162230, "creation_date": 1507161652, "answer_id": 46575918, "question_id": 46575793, "link": "https://stackoverflow.com/questions/46575793/how-is-null-terminated/46575918#46575918", "title": "How is NULL terminated?", "body": "<p>This:</p>\n\n<pre><code>const char REASON_POR = \"POR\";\n</code></pre>\n\n<p>is <strong>wrong</strong>, since <code>REASON_POR</code> is a constant of type <code>char</code>, and you are assigning a string to it, while you should just assign a character, e.g. 'P'.</p>\n\n<p>Strictly speaking, there is no assigning of a string in C, but rather one can only assign the pointer with the address of a char (in case of the string).<Sup>*</sup> </p>\n\n<p>Assigning a pointer (of the string) to a <code>char</code> invokes <em>Undefined Behavior</em>.</p>\n\n<hr>\n\n<p>*<sub>There is only one exception from this rule - initialisation of the char table (or any other table or structure in general): <code>char str[]=\"foo\";</code> where actual string is being copied. </sub></p>\n"}], "owner": {"reputation": 185, "user_id": 1657666, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/265150b21cb471f3f4bb1e8d68c0e5bd?s=128&d=identicon&r=PG", "display_name": "user1657666", "link": "https://stackoverflow.com/users/1657666/user1657666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1507162230, "creation_date": 1507160815, "last_edit_date": 1507162181, "question_id": 46575793, "link": "https://stackoverflow.com/questions/46575793/how-is-null-terminated", "title": "How is NULL terminated?", "body": "<p>Looking to the declaration below</p>\n\n<pre><code>const char REASON_POR = \"POR\";\n</code></pre>\n\n<p>the question is, why will <code>REASON_POR</code> be <code>NULL</code> terminated ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1507161771, "post_id": 46575750, "comment_id": 80105192, "body": "You should find a book written in the last couple of decades."}, {"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 0, "creation_date": 1507163130, "post_id": 46575750, "comment_id": 80105512, "body": "Because the compiler expected declaration specifiers before &#39;main&#39;"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1507163247, "post_id": 46575750, "comment_id": 80105536, "body": "@rici:  You referenced <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1</a> in a comment to a now-deleted answer.  Please refer to <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.3.4p8\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.5.3.4p8</a> in the same document."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1507180364, "post_id": 46575750, "comment_id": 80109482, "body": "@johnathan: 1. examples are not normative (<a href=\"http://port70.net/~nsz/c/c11/n1570.html#Forewordp8\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#Forewordp8</a>). 2. empty parameter lists are deprecated (<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.11.6\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.11.6</a>). Gcc will warn if you use <code>-Wstrict-prototypes</code> (not included with either <code>-Wall</code> nor <code>-Wextra</code>, presumably because the construct is so common.)"}], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507162960, "post_id": 46575973, "comment_id": 80105480, "body": "<code>void main()</code> is not correct, by convention <code>main()</code> must return an integer"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507163123, "post_id": 46575973, "comment_id": 80105510, "body": "@YaatSuka: It&#39;s a bit more nuanced than that \u2014 MS Windows documents <code>void main()</code>, sadly, but it is only allowable there, as noted in the first cross-reference (which has answers that quote the standards, and pointers to where MS documents <code>void main()</code>, etc.)"}, {"owner": {"reputation": 98, "user_id": 7550794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ozlam.jpg?s=128&g=1", "display_name": "MLPJ", "link": "https://stackoverflow.com/users/7550794/mlpj"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507163140, "post_id": 46575973, "comment_id": 80105514, "body": "@YaatSuka yes it is clearly stated in the link given. But it does not give errors in most of compilers."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507163237, "post_id": 46575973, "comment_id": 80105535, "body": "I know, it&#39;s just conventionnal. If you want to code, you must do it well"}], "tags": [], "owner": {"reputation": 98, "user_id": 7550794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ozlam.jpg?s=128&g=1", "display_name": "MLPJ", "link": "https://stackoverflow.com/users/7550794/mlpj"}, "is_accepted": false, "score": -1, "last_activity_date": 1507163025, "last_edit_date": 1507163025, "creation_date": 1507162061, "answer_id": 46575973, "question_id": 46575750, "link": "https://stackoverflow.com/questions/46575750/why-does-it-say-expected-declaration-specifiers-before-main/46575973#46575973", "title": "Why does it say &#39;expected declaration specifiers before &#39;main&#39;&#39;", "body": "<p><code>int main</code>or \n<code>void main</code> \nwould do the work. <a href=\"https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c\">Here</a>, <code>int main</code> is shown to be the C standard. Refer to\n<a href=\"https://stackoverflow.com/a/10915776/7550794\">Return type of <code>main()</code></a> too.</p>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "is_accepted": false, "score": 0, "last_activity_date": 1507162630, "creation_date": 1507162630, "answer_id": 46576063, "question_id": 46575750, "link": "https://stackoverflow.com/questions/46575750/why-does-it-say-expected-declaration-specifiers-before-main/46576063#46576063", "title": "Why does it say &#39;expected declaration specifiers before &#39;main&#39;&#39;", "body": "<p>By convention <code>main()</code> must return an integer. You have to declare it like that:</p>\n\n<pre><code>int main()\n{\n  // Your method\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8723238"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1177, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507163025, "creation_date": 1507160489, "question_id": 46575750, "link": "https://stackoverflow.com/questions/46575750/why-does-it-say-expected-declaration-specifiers-before-main", "title": "Why does it say &#39;expected declaration specifiers before &#39;main&#39;&#39;", "body": "<p>first of all, I understand mostly everything in this program that I copied from this book.<br>\nsecond, i just wanted to see if it worked              ,<br>\nthe only problem is that it says 'expected declaration specifiers before 'main''\nand i don't know what it means<br>\nps this is a really long program (300+ lines)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define FALSE 0\n#define TRUE 1\n\nvoid printGreeting();\nint getBet();\nchar getSuit(int suit);\nchar getRank(int rank);\nvoid getFirstHand(int cardRank[], int cardSuit[]);\nvoid getFinalHand\n(int cardRank[], int cardSuit[], int finalRank[], int finalSuit[], int \nranksinHand[], int suitsinHand[])\nint analyzeHand(int ranksinHand[], int suitsinHand[]);\n\n\nmain()\n{\nint bet;\nint bank = 100;\nint i;\nint cardRank [5];\nint cardSuit [5];\nint finalRank[5];\nint finalSuit[5];\nint ranksinhand[13];\nint suitsinhand[4];\nint winnings;\ntime_t t;\nchar suit, rank, stillPlay;\n\n\nprintGreeting();\n\n\ndo{\n    bet = getBet();\n    srand(time(&amp;t));\n    getFirstHand(cardRank, cardSuit);\n    printf(\"Your five cards: \\n\\n\");\n    for (i = 0; i &lt; 5; i++)\n    {\n        suit = getSuit(cardsSuit[i]);\n        rank = getRank(cardRank[i]);\n        printf(\"Card #%d: %c%c\\n\\n\", i+1, rank, suit);\n    }\n\n    for (i=0; i &lt; 4; i++)\n    {\n        suitsinHand[i] = 0;\n    }\n    for (i=0; i &lt; 13; i++)\n    {\n        ranksinHand[i] = 0;\n    }\n\n    getFinalHand(cardRank, cardSuit, finalRank, finalSuit, ranksinHand, \n    suitsinHand);\n\n    printf(\"Your five final cards:\\n\\n\");\n    for (i = 0; i &lt; 5; i++)\n    {\n        suit = getSuit(finalSuit[i]);\n        rank = getRank(finalRank[i]);\n        printf(\"Card #%d: %c%c\\n\\n\", i+1, rank, suit);\n    }\n\n    winnings = analyzeHand(ranksinHand, suitsinHand);\n    printf(\"You won %d!\\n\\n\", bet*winnings);\n    bank = bank - bet + (bet*winnings)\n    printf(\"\\n\\nYour bank is now %d.\\n\\n\", bank);\n    printf(\"Want to play again? \");\n    scanf(\" %c\", &amp;stillPlay);\n}while (toupper(stillPlay) == 'Y');\n\n\n\nreturn;\n }\n\n /*************************************************************************/\n\n\nvoid printGreeting();\n{\n\nprintf(\"**********************************************************\\n\\n\");\nprintf(\"\\n\\n\\tWelcome to the Absolute Beginner's Casino\\n\\n\");\nprintf(\"\\tHome of the Video Draw Poker\");\nprintf(\"**********************************************************\\n\\n\");\n\nprintf(\"Here are the rules\\n\");\nprintf(\"You start with 100 credits, and you make a bet from\");\nprintf(\"1 to 5 credits.\\n\");\nprintf(\"You are dealt 5 cards, and then you choose which \");\nprintf(\"cards to keep\");\nprintf(\"or discard\\n\");\nprintf(\"You want to make the best possible hand.\\n\");\nprintf(\"\\nHere is the table for winnings (assuming a \");\nprintf(\"bet of 1 credit):\");\nprintf(\"\\nPair \\t\\t\\t\\t1 credit\");\nprintf(\"\\nTwo pairs\\t\\t\\t2 credits\");\nprintf(\"\\nThree of a kind\\t\\t\\t3 credits\");\nprintf(\"\\nStraight \\t\\t\\t4 credits\");\nprintf(\"Flush\\t\\t\\t\\t5 credits\");\nprintf(\"Full House\\t\\t\\t8 credits\");\nprintf(\"Four of a Kind\\t\\t\\t10 credits\");\nprintf(\"Straight Flush\\t\\t\\t20 credits\");\nprintf(\"\\n\\nHave fun!!\\n\\n\");\n}\n\n\nvoid getFirstHand(int cardRank[], int cardSuit[]);\n{\nint i,j;\nint carDup;\n\nfor(i=0; i &lt; 5; i++)\n{\n    carDup = 0;\n    do{\n        cardRank[i] = (rand() % 13);\n        cardSuit[i] = (rand() % 4);\n\n        for (j=0; j &lt; i; j++)\n        {\n            if ((cardRank[i] == cardRank[j] &amp;&amp;\n                 cardSuit[i] == cardSuit[j]))\n            {\n                carDup = 1;\n            }\n        }\n    }while (carDup == 1;);\n}\n}\n\nchar getSuit(int suit)\n{\nswitch\n{\n    case 0:\n        return('C');\n    case 1:\n        return('D');\n    case 2:\n        return('H');\n    case 3:\n        return('S');\n}\n}\n\nchar getRank(int rank)\n{\nswitch (rank)\n{\n    case 0:\n        return('A');\n    case 1:\n        return('2');\n    case 2:\n        return('3');\n    case 3:\n        return('4');\n    case 4:\n        return('5');\n    case 5:\n        return('6');\n    case 6:\n        return('7');\n    case 7;\n        return('8');\n    case 8:\n        return('9');\n    case 9:\n        return('T');\n    case 10:\n        return('J');\n    case 11:\n        return('Q');\n    case 12:\n        return('K');\n}\n}\nint getBet()\n{\nint bet;\ndo\n{\n    printf(\"How much do you want to bet?(Enter a number\");\n    printf(\"from 1 to 5, or 0 to quit the game): \");\n    scanf(\" %d\", &amp;bet);\n\n    if (bet &gt;= 1 &amp;&amp; bet &lt;= 5)\n    {\n        return(bet);\n    }\n    else if (bet == 0)\n    {\n        exit(1);\n    }\n    else\n    {\n        printf(\"\\n\\nPlease enter a bet from 1-5 or \");\n        printf(\"0 to quit the game\\n\\n\");\n    }\n}while ((bet &lt; 0) || (bet &gt; 5));\n}\n\nint analyzeHand(int ranksinHand[], int suitsinHand[])\n{\nint num_consec = 0;\nint i, rank, suit;\nint straight = FALSE;\nint flush = FALSE;\nint four = FALSE;\nint three = FALSE;\nint pairs = 0;\n\n\nfor (suit = 0; suit &lt; 4; suit++)\n    if (suitsinHand[suit] == 5)\n        flush = TRUE;\nrank = 0;\nwhile (ranksinHand[rank] == 0)\n    rank++;\nfor (; rank &lt; 13 &amp;&amp; ranksinHand[rank]; rank++)\n    num_consec++;\nif(num_consec == 5) {\n    straight = TRUE;\n}\nfor (rank = 0; rank &lt; 13; rank++){\n    if (ranksinHand[rank] == 4)\n        four == TRUE;\n    if (ranksinHand[rank] == 3)\n        three == TRUE;\n    if (ranksinHand[rank] == 2)\n        pairs++;\n}\nif (straight &amp;&amp; flush){\n    printf(\"Straight Flush\\n\\n\");\n    return(20);\n}\nelse if (four){\n    printf(\"Four of a kind\\n\\n\");\n    return (10);\n}\nelse if (three &amp;&amp; pairs == 1){\n    printf(\"Full House\\n\\n\");\n    return (8);\n}\nelse if (flush){\n    printf(\"Flush\\n\\n\");\n    return (5);\n}\nelse if (straight){\n    printf(\"Straight\\n\\n\");\n    return (4);\n}\nelse if (three){\n    printf(\"Three of a Kind\\n\\n\");\n    return (3);\n}\nelse if (pairs == 2){\n    printf(\"Two Pairs\\n\\n\");\n    return (2);\n}\nelse if (pairs == 1){\n    printf(\"Pair\\n\\n\");\n    return (1);\n}\nelse{\n    printf(\"High Card\\n\\n\");\n    return (0);\n}\n}\n\nvoid getFinalHand\n(int cardRank[], int cardSuit[], int finalRank[], int finalSuit[], int \nranksinHand[], int suitsinHand[])\n{\nint i, j, carDup;\nchar suit, rank, ans;\n\nfor (i=0; i &lt; 5; i++)\n{\n    suit = getSuit(cardSuit[i]);\n    rank = getRank(cardRank[i]);\n    printf(\"Do you want to keep card #%d: %c%c\", i+1, rank, suit);\n    printf(\"\\nPlease answer (Y/N):\");\n    scanf(\" %c\", &amp;ans);\n    if (toupper(ans) == 'Y')\n    {\n        finalRank[i] = cardRank[i];\n        finalSuit[i] = cardSuit[i];\n        ranksinHand[finalRank[i]]++;\n        suitsinHand[finalSuit[i]]++;\n        continue;\n    }\n    else if (toupper(ans) == 'N')\n    {\n        carDup = 0;\n        do{\n            carDup = 0;\n            finalRank[i] = (rand() % 13);\n            finalSuit[i] = (rand() % 4);\n\n            for (j=0; j &lt; 5; j++)\n            {\n                if((finalRank[i] == finalRank[j]) &amp;&amp; (finalSuit[i] == \n      finalSuit[j]))\n                {\n                    carDup = 1;\n                }\n            }\n\n            for (j=0; j &lt; i; j++)\n            {\n                if((finalRank[i] == finalRank[j]) &amp;&amp; (finalSuit[i] == \n    finalSuit[j]))\n                {\n                    carDup = 1;\n                }\n            }\n        }while (carDup == 1);\n        ranksinHand[finalRank[i]]++;\n        suitsinHand[finalSuit[i]]++;\n    }\n\n}\n}\n</code></pre>\n"}, {"tags": ["c", "pipe"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1507160775, "post_id": 46575684, "comment_id": 80104935, "body": "If the parent closes the write side of the pipe during the first iteration of the loop, then the second child will not be able to write to it.  Check the return value of <code>write</code> (well, really your debugging will be much easier if you put error checking on everything!).  Also, there&#39;s no need to call <code>wait</code> in the children."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507162333, "post_id": 46575684, "comment_id": 80105336, "body": "Note that <code>for(int j=i;j&lt;sizeof(array)-1;j+=2)</code> is counting the number of bytes, not the number of integers, in the array. This will not lead to happiness (undefined behaviour)."}, {"owner": {"reputation": 47, "user_id": 7249882, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2101cd02896dac21eef593be0fc9a176?s=128&d=identicon&r=PG&f=1", "display_name": "A curious one", "link": "https://stackoverflow.com/users/7249882/a-curious-one"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1507162954, "post_id": 46575684, "comment_id": 80105477, "body": "@WilliamPursell If I don&#39;t close for writing the program gets stuck after the first child writes to the pipe."}, {"owner": {"reputation": 47, "user_id": 7249882, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2101cd02896dac21eef593be0fc9a176?s=128&d=identicon&r=PG&f=1", "display_name": "A curious one", "link": "https://stackoverflow.com/users/7249882/a-curious-one"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507163770, "post_id": 46575684, "comment_id": 80105660, "body": "@JonathanLeffler Yes thank you for pointing that out. Been a while since I&#39;ve coded in C"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1507164434, "post_id": 46575684, "comment_id": 80105813, "body": "Did you mean <code>&amp;ans[j]</code> here <code>read(fd[0], &amp;ans , sizeof(*product));</code>? Otherwise, <code>ans[1]</code> never changes, and since it&#39;s not initialized you could very well end up with the number you&#39;re seeing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507164611, "post_id": 46575684, "comment_id": 80105852, "body": "Note that <code>product+= (array[j]*array[j+2]);</code> is a funny way of producing the product.  It also accesses out of bounds of the array.  You probably need to set <code>product</code> to <code>1</code> before the loop, then use <code>product *= array[j];</code> in the loop.  Your children are inheriting the array, which simplifies your life.  You will probably be OK with two children writing on the same pipe for the size of <code>write()</code> that you&#39;re doing (each write is small enough to be atomic). However, there&#39;s no guarantee which product will be returned first. It doesn&#39;t matter here where the result is commutative, but in general\u2026"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1507166212, "post_id": 46575684, "comment_id": 80106178, "body": "<code>product</code> is also a pointer, which doesn&#39;t make much sense to me. Maybe I&#39;m missing something."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1507221549, "post_id": 46575684, "comment_id": 80134504, "body": "@Acuriousone Yes, you need to close the pipe, but you are doing it too soon."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7249882, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2101cd02896dac21eef593be0fc9a176?s=128&d=identicon&r=PG&f=1", "display_name": "A curious one", "link": "https://stackoverflow.com/users/7249882/a-curious-one"}, "edited": false, "score": 0, "creation_date": 1507170922, "post_id": 46576832, "comment_id": 80107161, "body": "Thanks I&#39;d already figured out some of those mistakes, the problem I&#39;m having right now is that the second child never actually writes the product to the pipe and I think it&#39;s because I close it at the parent process. But if I don&#39;t close it my program just freezes at that point"}, {"owner": {"reputation": 98, "user_id": 7550794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ozlam.jpg?s=128&g=1", "display_name": "MLPJ", "link": "https://stackoverflow.com/users/7550794/mlpj"}, "reply_to_user": {"reputation": 47, "user_id": 7249882, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2101cd02896dac21eef593be0fc9a176?s=128&d=identicon&r=PG&f=1", "display_name": "A curious one", "link": "https://stackoverflow.com/users/7249882/a-curious-one"}, "edited": false, "score": 0, "creation_date": 1507175522, "post_id": 46576832, "comment_id": 80108143, "body": "yes it seems so, if you found the solution please post, i&#39;d give it a try too."}, {"owner": {"reputation": 47, "user_id": 7249882, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2101cd02896dac21eef593be0fc9a176?s=128&d=identicon&r=PG&f=1", "display_name": "A curious one", "link": "https://stackoverflow.com/users/7249882/a-curious-one"}, "edited": false, "score": 0, "creation_date": 1507175760, "post_id": 46576832, "comment_id": 80108189, "body": "I&#39;m still trying to work that out. Will update post when I figure it out."}], "tags": [], "owner": {"reputation": 98, "user_id": 7550794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ozlam.jpg?s=128&g=1", "display_name": "MLPJ", "link": "https://stackoverflow.com/users/7550794/mlpj"}, "is_accepted": false, "score": 0, "last_activity_date": 1507169408, "creation_date": 1507169408, "answer_id": 46576832, "question_id": 46575684, "link": "https://stackoverflow.com/questions/46575684/write-and-read-not-working-properly/46576832#46576832", "title": "`write()` and `read()` not working properly", "body": "<p>Hope this will help you. (This does not address the odd and even part. Hope you can figure it out)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n  int ans;\n  int total = 1;\n  int array[10];                                //main array\n  int i;\n  srand (time(NULL));                           //for not the same numbers\n\n  for(i=0;i&lt;10;i++)\n  {                                             //array filling\n    array[i]= ( rand() % 10 + 1);               //from 1 to 10 random numbers\n    printf(\"Array: %d \\n\",array[i]);\n  }\n\n  int children = 2;                             //number of child processes\n  int product=0;                                // var to store the product sums\n\n  int fd[2];\n  pipe(fd);\n\n  int arraymax[2];                              //the two products\n\n\n  for(i=0;i&lt;children;i++)\n  {                                             //for 10 children\n                                                //child processes\n    if(fork() == 0)\n    {\n      printf(\"checkpoint 1\\n\");\n        close(fd[0]);                                //close reading\n\n        for(int j=i;j&lt;sizeof(array)/sizeof(int)-2;j+=2)\n        {\n            product+= (array[j]*array[j+2]);\n        }\n\n    printf(\"the product: %d\\n\", product);\n        write(fd[1], &amp;product, sizeof(product));     //write the max number into the pipe\n        //printf(\"the product is: %d\\n\", product);\n        close(fd[1]);                                //close write\n        wait(NULL);\n        exit(0);\n    }                                               //parent process\n    else\n    {\n      printf(\"checkpoint 2\\n\");\n        wait(NULL);\n        close(fd[1]);                                //close write\n        /* read pipe */\n        for(int j=0; j&lt;2; j++)\n        {\n          read(fd[0], &amp;ans , sizeof(product));\n        }\n    total *= ans;\n        close(fd[0]);                                //close read\n    }\n  }\n  printf(\"Total answer is: %d \\n\", (total));\n  return 0;\n}\n</code></pre>\n\n<p>You had some errors with pointers I've corrected them. And to get the product of results from two children i've used a separate variable(total). </p>\n\n<p>And the loop here goes out of bound</p>\n\n<pre><code>for(int j=i;j&lt;sizeof(array)-1;j+=2)\n    {\n        product+= (array[j]*array[j+2]);\n    }\n</code></pre>\n\n<p>it should be like</p>\n\n<pre><code>for(int j=i;j&lt;sizeof(array)/sizeof(int)-2;j+=2)\n    {\n        product+= (array[j]*array[j+2]);\n    }\n</code></pre>\n\n<p>if you have any questions feel free to ask.</p>\n"}], "owner": {"reputation": 47, "user_id": 7249882, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2101cd02896dac21eef593be0fc9a176?s=128&d=identicon&r=PG&f=1", "display_name": "A curious one", "link": "https://stackoverflow.com/users/7249882/a-curious-one"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507169408, "creation_date": 1507159954, "question_id": 46575684, "link": "https://stackoverflow.com/questions/46575684/write-and-read-not-working-properly", "title": "`write()` and `read()` not working properly", "body": "<p>What I basically have to do: I have an array with 10 random integers and I need to have two child; one will compute the product of the even index and the other will handle the odds. Once that is done the parent process will multiply those two values together and print it out. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n  int ans[2];\n  int array[10];                                //main array\n  int i;\n  srand (time(NULL));                           //for not the same numbers\n\n  for(i=0;i&lt;10;i++)\n  {                                             //array filling\n    array[i]= ( rand() % 10 + 1);               //from 1 to 10 random numbers\n    printf(\"Array: %d \\n\",array[i]);\n  }\n  int children = 2;                             //number of child processes\n  int *product=0;                                // var to store the product sums\n\n  int fd[2];\n  pipe(fd);\n\n  int arraymax[2];                              //the two products\n\n  for(i=0;i&lt;children;i++)\n  {                                             //for 10 children\n                                                //child processes\n    if(fork() == 0)\n    {\n      printf(\"checkpoint 1\\n\");\n        close(fd[0]);                                //close reading\n\n        for(int j=i;j&lt;sizeof(array)-1;j+=2)\n        {\n            product+= (array[j]*array[j+2]);\n        }\n        write(fd[1], &amp;product, sizeof(*product));     //write the max number into the pipe\n        printf(\"the product is: %d\\n\", *product);\n        close(fd[1]);                                //close write\n        wait(NULL);\n        exit(0);\n    }                                               //parent process\n    else\n    {\n      printf(\"checkpoint 2\\n\");\n        wait(NULL);\n        close(fd[1]);                                //close write\n        /* read pipe */\n        for(int j=0; j&lt;2; j++)\n        {\n          read(fd[0], &amp;ans , sizeof(*product));\n        }\n        close(fd[0]);                                //close read\n    }\n  }\n  printf(\"Total answer is: %d \\n\", (ans[0]*ans[1]));\n  return 0;\n}\n</code></pre>\n\n<p>and here is what the output is:</p>\n\n<pre><code>Array: 10 \nArray: 7 \nArray: 9 \nArray: 5 \nArray: 4 \nArray: 4 \nArray: 8 \nArray: 5 \nArray: 7 \nArray: 1 \ncheckpoint 2\ncheckpoint 1\ncheckpoint 2\ncheckpoint 1\nTotal answer is: -432399864 \n</code></pre>\n\n<p>The answer should not be anywhere near that number it's giving me. Any help is appreciated :)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507160352, "post_id": 46575637, "comment_id": 80104843, "body": "Why don&#39;t you catch all the string in one time ? It will be easier to parse it and get each x characters"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1507160602, "post_id": 46575637, "comment_id": 80104898, "body": "Before you print a word, make sure there is enough space on the line :) (Of course, that is not compatible with writing one character at a time. Probably that&#39;s the point of the exercise.)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507162751, "post_id": 46575637, "comment_id": 80105438, "body": "Note that <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\"><code>while (!feof(file))</code> is always wrong</a>."}, {"owner": {"reputation": 186, "user_id": 8657938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7924493761f5c1e272185206b329bfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Krassi Em", "link": "https://stackoverflow.com/users/8657938/krassi-em"}, "edited": false, "score": 0, "creation_date": 1507179007, "post_id": 46575637, "comment_id": 80109043, "body": "This recursion example is terrible. In case the input is a flat text file of 50K text, the function will be called 50K times?!?"}], "answers": [{"tags": [], "owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1507161918, "creation_date": 1507161918, "answer_id": 46575958, "question_id": 46575637, "link": "https://stackoverflow.com/questions/46575637/how-to-print-output-line-length/46575958#46575958", "title": "How to print output line length?", "body": "<p>To keep using you're approach you're going to need to keep track of how many characters you printed in order to decide when you should print a new line, char count would be the input received from the user and the initial value of current count would be zero for the first call </p>\n\n<pre><code>void reverseSentence(int char_count, int current_count){\n\nwhile(!feof(stdin)){\nchar c;\nscanf(\"%c\", &amp;c);\n\nif( c != '\\n'){\n    current_count++;\n    if(char_count == current_count){\n        printf(\"\\n\");\n        current_count = 0;\n    }\n    reverseSentence(char_count, current_count);\n    printf(\"%c\", c);\n    }\n\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1507178506, "last_edit_date": 1507178506, "creation_date": 1507177998, "answer_id": 46577891, "question_id": 46575637, "link": "https://stackoverflow.com/questions/46575637/how-to-print-output-line-length/46577891#46577891", "title": "How to print output line length?", "body": "<p>While I'm convinced that you are attempting to reverse a <strong>line</strong> of text rather than a <strong>sentence</strong> given,</p>\n\n<pre><code>Enter the output line length: 10\nEnter your text (Enter to exit)\n</code></pre>\n\n<p>and your title \"<strong>How to print output line length?</strong>\", if you are looking solely for something that will check for the end of a <em>sentence</em> (e.g. a <code>'.'</code>), the following can be modified without much effort.</p>\n\n<p>Where you are having problems looks to be \"How do I know what the number of characters in the wrapped line is?\" Which is required to know how many spaces to prefix each line of output by.</p>\n\n<p>The key to any line <em>wrap</em> scenario is to basically use a <em>sliding window</em> to bracket the characters that fit in each <em>wrap length</em> of characters (accounting for spaces between words). Meaning, you have a wrap length, but that number of characters may end in the middle of a word, so you need to keep track of the last natural break (a space normally) that occurs before that number of characters is reached. (then output the words that fit).</p>\n\n<p>Your next set or characters begins not at your current counter, but at the next non-space character following the words just printed. Your count for the next group of words to output begins there. You are effectively sliding a window of <em>wrap length</em> chars down your string, outputting the words that fit within your sliding window, then sliding the window to capture the next group of words.</p>\n\n<p>Whether you reverse the words within the window is a relatively trivial matter. Either print from the beginning to the end of the window, or the end to the beginning.</p>\n\n<p>The other aspect of your problem is figuring out how many spaces to prefix each reversed group of words by. That is where the number of characters within the window is important.</p>\n\n<p>An easy way to handle both the window and the length is simply to use a pair of pointers. Setting your start pointer (say <code>sp</code>) to the beginning character in your windows, and your end pointer (say <code>ep</code>) to the last character in each word as you work your way down the string. When you reach your <em>wrap length</em> number of characters, you know you have <code>ep - sp</code> number of characters in the words to output. You then know you need <code>wrap_length - (ep - sp)</code> number of <code>spaces</code> to prefix your line.</p>\n\n<p>Putting those concepts together, you can both wrap and reverse your input with something similar to the following:</p>\n\n<pre><code> void str_word_wrap_rev (char *buf, int n)\n{\n    char *p = buf,   /* pointer to current char */\n         *sp = buf,  /* pointer to start of line to print */\n         *ep = buf;  /* pointer to end of line to print */\n    size_t l = 0,    /* length of segment (no. of chars */\n           pre = 0;  /* prefix - number of spaces */\n\n    for (; *p &amp;&amp; *p != '\\n'; p++) { /* loop over each char (omit '\\n')*/\n        if (*p == ' ')              /* if space, set ep */\n            ep = p;\n        if (p - sp &gt;= n) {          /* if limit from start reached */\n            l = ep - sp;            /* compute number of characters */\n            pre = n - l;            /* get leading spaces required */\n            while (pre--)           /* output spaces */\n                putchar (' ');\n            while (l--)             /* loop over chars ep -&gt; sp (reverse) */\n                putchar (sp[l]);\n            putchar ('\\n');         /* tidy up with '\\n' */\n            sp = ++ep;              /* set start to next after end */\n            ep = ++p;               /* set end to next after current */\n        }\n    }                       /* handle last line of chars */\n    l = p - sp;             /* number of chars */\n    pre = n - l;            /* number of spaces */\n    if (*p == '\\n')         /* if buf ends with '\\n', decrement */\n        p--;\n    while (pre--)           /* output spaces */\n        putchar (' ');\n    while (p &gt;= sp)         /* output chars */\n        putchar (*p--);\n\n    putchar ('\\n');\n}\n</code></pre>\n\n<p>(<strong>note:</strong> the function also checks for a string ending in <code>'\\n'</code> to allow <code>buf</code> to be passed directly from one of the <em>line oriented</em> input functions, such as <code>fgets</code> or POSIX <code>getline</code>)</p>\n\n<p>A short example similar to your example, could be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAXC 1000\n\nvoid str_word_wrap_rev (char *buf, int n)\n{\n    char *p = buf,   /* pointer to current char */\n         *sp = buf,  /* pointer to start of line to print */\n         *ep = buf;  /* pointer to end of line to print */\n    size_t l = 0,    /* length of segment (no. of chars */\n           pre = 0;  /* prefix - number of spaces */\n\n    for (; *p &amp;&amp; *p != '\\n'; p++) { /* loop over each char (omit '\\n')*/\n        if (*p == ' ')              /* if space, set ep */\n            ep = p;\n        if (p - sp &gt;= n) {          /* if limit from start reached */\n            l = ep - sp;            /* compute number of characters */\n            pre = n - l;            /* get leading spaces required */\n            while (pre--)           /* output spaces */\n                putchar (' ');\n            while (l--)             /* loop over chars ep -&gt; sp (reverse) */\n                putchar (sp[l]);\n            putchar ('\\n');         /* tidy up with '\\n' */\n            sp = ++ep;              /* set start to next after end */\n            ep = ++p;               /* set end to next after current */\n        }\n    }                       /* handle last line of chars */\n    l = p - sp;             /* number of chars */\n    pre = n - l;            /* number of spaces */\n    if (*p == '\\n')         /* if buf ends with '\\n', decrement */\n        p--;\n    while (pre--)           /* output spaces */\n        putchar (' ');\n    while (p &gt;= sp)         /* output chars */\n        putchar (*p--);\n\n    putchar ('\\n');\n}\n\nint main (void) {\n\n    char buf[MAXC] = \"\";\n    int n = 0;\n\n    /* read/validate n */\n    printf (\"Enter the output line length: \");\n    if (scanf (\"%d%*c\", &amp;n) != 1) {\n        fprintf (stderr, \"error: invalid conversion for 'n'\\n\");\n        return 1;\n    }\n\n    /* read/validate line using fgets for line-oriented input */\n    printf (\"Enter your text (Enter to exit)\\n\");\n    if (!fgets (buf, MAXC, stdin) || *buf == '\\n') {\n        fprintf (stderr, \"error: EOF or empty string\\n\");\n        return 1;\n    }\n    putchar ('\\n');\n\n    str_word_wrap_rev (buf, n); /* reverse and wrap */\n\n    for (int i = 1; i &lt;= n; i++)\n        putchar ('0' + i % 10);\n    putchar ('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/str_rev_wrap\nEnter the output line length: 10\nEnter your text (Enter to exit)\nThe quick brown fox jumps over the lazy old dog.\n\n kciuq ehT\n xof nworb\nrevo spmuj\n  yzal eht\n  .god dlo\n1234567890\n\n$ ./bin/str_rev_wrap\nEnter the output line length: 25\nEnter your text (Enter to exit)\nThe quick brown fox jumps over the lazy old dog.\n\nspmuj xof nworb kciuq ehT\n   .god dlo yzal eht revo\n1234567890123456789012345\n</code></pre>\n\n<p>Look things over and let me know if you have further questions. </p>\n\n<p>(<strong>note:</strong> It may help to simply write your input out on a piece of paper and draw the start, end and current character pointers below the string and move them manually to understand exactly what is taking place.)</p>\n"}], "owner": {"reputation": 27, "user_id": 8723169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ab0fb0edfd9d17d2e46bf000696839?s=128&d=identicon&r=PG&f=1", "display_name": "RollTide1234", "link": "https://stackoverflow.com/users/8723169/rolltide1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 1, "accepted_answer_id": 46577891, "answer_count": 2, "score": 0, "last_activity_date": 1507178506, "creation_date": 1507159507, "last_edit_date": 1507160051, "question_id": 46575637, "link": "https://stackoverflow.com/questions/46575637/how-to-print-output-line-length", "title": "How to print output line length?", "body": "<p>I have my code </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid reverseSentence();\n\nint main(void){\n\nint i = 0;\nint lineLength = 0;\nchar string[100];\n\nprintf(\"Enter the output line length : \\n\");\nscanf(\"%d\", &amp;lineLength);\n\nprintf(\"Enter your text (control-d to exit) : \");\nreverseSentence();\n\nreturn 0;\n\n}\n\nvoid reverseSentence(){\n\nwhile(!feof(stdin)){\nchar c;\nscanf(\"%c\", &amp;c);\n\nif( c != '\\n'){\n  reverseSentence();\n  printf(\"%c\", c);\n    }\n\n   }\n}\n</code></pre>\n\n<p>I need to have the string entered to be printed as such (see picture).</p>\n\n<p><a href=\"https://i.stack.imgur.com/KyT26.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KyT26.png\" alt=\"enter image description here\"></a></p>\n\n<p>I can get the string to be printed backwards but I can not get it to print only 10 (or otherwise stated) characters long. How do I have the string output with only a line length of 10 characters?</p>\n"}, {"tags": ["c", "arrays", "process", "parent-child", "child-process"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507154574, "post_id": 46574822, "comment_id": 80103280, "body": "So, right now you&#39;re only passing <code>argv[0]</code> with <code>ls</code>. If you want to pass more arguments, ...put them on the command line. That is: <code>execlp(&quot;&#47;path&#47;to&#47;your&#47;executable&quot;, &quot;argument-that-becomes-$0&quot;, &quot;argument-that-becomes-$1&quot;, &quot;argument-that-becomes-$2&quot;, &quot;etc&quot;, NULL)</code>."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507154710, "post_id": 46574822, "comment_id": 80103339, "body": "To communicate between 2 process, you can use signals (<code>kill()</code> and <code>signal()</code> or <code>sigaction()</code>)"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507154775, "post_id": 46574822, "comment_id": 80103358, "body": "@YaatSuka, eh? The OP doesn&#39;t just want to send a (non-information-carrying) signal, they want to pass explicit values. Signals don&#39;t have guarantees about delivery order, and several of them have meanings that can&#39;t be overridden (you can&#39;t pass <code>9</code> via a <code>SIGKILL</code> and have the program interpret in any way other than as a command to exit, so it&#39;s useless as a way to send an integer with an unknown value)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507154780, "post_id": 46574822, "comment_id": 80103360, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3446257/passing-integer-arguments-when-using-execve\">passing integer arguments when using execve</a>"}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507154865, "post_id": 46574822, "comment_id": 80103383, "body": "@CharlesDuffy you can pass explicite values by signals..."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507154904, "post_id": 46574822, "comment_id": 80103395, "body": "@YaatSuka, not in the general case. You can perhaps decide ahead-of-time that <code>SIGUSR1</code> means <code>2</code> and <code>SIGUSR2</code> means <code>3</code>, but there are very few signals to work with, and you can&#39;t usefully/meaningfully combine them due to the lack of guarantees about delivery ordering."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507154995, "post_id": 46574822, "comment_id": 80103428, "body": "@CharlesDuffy There are lots of way to send values with signals.. I created a battleship game with binary communication just with signals, so you can do what you want"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507155028, "post_id": 46574822, "comment_id": 80103436, "body": "@YaatSuka, note what I said about the lack of guaranteed ordering. If you try to build a protocol on top of an unreliable communication mechanism, then you&#39;re relying on chance for your software to work (especially when the system is under heavy load and may not be scheduling delivery as often as you expect). This might be feasible for a toy, but it&#39;s not something we should be teaching as a best practice."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507155254, "post_id": 46574822, "comment_id": 80103501, "body": "@CharlesDuffy If you encrypt the data and you know what you&#39;re doing, you can decrypt it and have relevant value (you just have to think about how you want to communicate with signals, as I said there are lots of way to do that)"}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507155405, "post_id": 46574822, "comment_id": 80103552, "body": "@asilvester635, there is another way: Use global variables. If the child process set a global variable, you can get its value after with the parent ;)"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507155447, "post_id": 46574822, "comment_id": 80103565, "body": "@YaatSuka, encryption makes things <i>worse</i>, not better: It increases the amount of data that needs to be passed in-order without any permutation to allow any useful content to be interpreted from same."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507155568, "post_id": 46574822, "comment_id": 80103605, "body": "@YaatSuka, and... err, what? If you <code>fork()</code>, a child gets a copy of any global variable, yes, but that&#39;s a distinct copy in a copy-on-write memory segment: As soon as the child changes its copy, it gets reallocated to a different physical page rather than shared with the parent, so the parent can&#39;t see it. And when you call any <code>exec</code>-family function, all your variables&#39; prior values are thrown away. I&#39;m starting to wonder if I&#39;m being trolled."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507155737, "post_id": 46574822, "comment_id": 80103668, "body": "Ahah ok @CharlesDuffy, I think you&#39;re good in C, but I know what I&#39;m saying, I created a game based on signals and processes and I know that global variables are shared by each process"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 2, "creation_date": 1507157148, "post_id": 46574822, "comment_id": 80104123, "body": "@YaatSuka, global variables are <i>absolutely not</i> shared between processes. They&#39;re copied from parent to child, but not back from child to parent. The claim is simply and entirely untrue. Maybe you&#39;re thinking about <i>threads</i> instead of <i>processes</i>?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 1, "creation_date": 1507157221, "post_id": 46574822, "comment_id": 80104136, "body": "@YaatSuka, see <a href=\"https://stackoverflow.com/questions/4298678/after-forking-are-global-variables-shared\">After forking, are global variables shared?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1507156677, "post_id": 46574973, "comment_id": 80103976, "body": "The exit status is a poor choice for the child process to deliver its computed result to its parent, because only 8 bits are available there for its use (on a POSIX-conformant system, but we seem to be assuming POSIX or similar by using <code>fork</code>, <code>wait</code>, and <code>unistd.h</code>).  The OP&#39;s result could easily be too large for that."}, {"owner": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507156986, "post_id": 46574973, "comment_id": 80104067, "body": "Thank you very much for useful comment for me."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1507157314, "post_id": 46574973, "comment_id": 80104160, "body": "The usual practice for reading results from a child process is to set up a FIFO pair so the child can write results to the FIFO and close it, and the parent can read and interpret them. This is what <code>variable=$(somecommand)</code> in shell does, for example."}, {"owner": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "edited": false, "score": 0, "creation_date": 1507157376, "post_id": 46574973, "comment_id": 80104188, "body": "Do you mean pipes?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507157525, "post_id": 46574973, "comment_id": 80104209, "body": "Yes. Pipes <i>are</i> FIFOs (&quot;first-in, first-out&quot;)."}, {"owner": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507157749, "post_id": 46574973, "comment_id": 80104275, "body": "@CharlesDuffy I have mentioned it in answer. What do you think about shared memory?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1507157866, "post_id": 46574973, "comment_id": 80104300, "body": "A bit of a pain to manage (it&#39;s easy to leak SHM segments if exiting uncleanly), and vast overkill for present purpose. As a sysadmin, if I have to run <code>ipcrm</code> one more time, it&#39;ll be once too many."}, {"owner": {"reputation": 83, "user_id": 7578876, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/69420278a22379e75288fbb05a3f664a?s=128&d=identicon&r=PG", "display_name": "asilvester635", "link": "https://stackoverflow.com/users/7578876/asilvester635"}, "edited": false, "score": 0, "creation_date": 1507159074, "post_id": 46574973, "comment_id": 80104581, "body": "@boriaz50 Hey, I&#39;ve updated my code. My intention is to pass the arr array that I&#39;ve created from my parent process to the child process, and invoke the calc method in my child process, which calculates the production of all elements with odd index inside the array. The sum is then returned by the calc method back to child process, and the child process will send the sum back to parent process. Is this possible?"}], "tags": [], "owner": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "is_accepted": false, "score": 1, "last_activity_date": 1507177997, "last_edit_date": 1507177997, "creation_date": 1507155155, "answer_id": 46574973, "question_id": 46574822, "link": "https://stackoverflow.com/questions/46574822/how-to-pass-arguments-from-parent-process-to-child-process-in-unix/46574973#46574973", "title": "How to pass arguments from parent process to child process in Unix?", "body": "<p>There are <a href=\"https://en.wikipedia.org/wiki/Inter-process_communication\" rel=\"nofollow noreferrer\">inter-process communication</a> (IPC) mechanisms allowing you to pass information between processes.</p>\n\n<p>As a rule, <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\"><strong>fork</strong></a> is the only way to create new processes in Unix-like systems. At that, child process inherits code and address space of parent. It means that child is a duplicate (in some degree, see link above) of parent at this point of time.</p>\n\n<p>In modern Unix variants and in Linux, <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\"><strong>fork</strong></a> is implemented using copy-on-write pages. It just means that when parent or child process tries to modify shared memory page, operating system creates a copy of this page. Now parent and child have own memory page.</p>\n\n<p>System call <a href=\"http://man7.org/linux/man-pages/man3/exec.3.html\" rel=\"nofollow noreferrer\"><strong>exec</strong></a> replaces the current process image with a new process image. It means that parent and child processes wouldn't share any memory pages or code now.</p>\n\n<p>In your program you shouldn't call <code>execlp()</code>. Use advantages of copy-on-write mechanism. So do <code>fork()</code> in the <code>main()</code> function in your <strong>CODE LOGIC</strong> program after defining the <code>arr</code>. Then access <code>arr</code> from the child process. Use <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow noreferrer\"><code>wait()</code></a> system call to make parent is blocked until child doesn't finish.</p>\n\n<p>You should use IPC to return result from the child process. In your case pipes are the best choice. But it's obvious you do lab assignment about Unix processes, and not about IPC. So you may return result via exit code of child process. Pass result to the <code>exit()</code> function. Note that you can pass only 8 bits (see comments under my answer).</p>\n\n<p>This is a working code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n\nint calc(int *arr, int n) {\n    int sum = 0;\n    for (i = 1; i &lt; n; i += 2) {\n        sum = sum + arr[i];\n    }\n    return sum;\n}\n\nint main(void) {\n    int arr[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n    int n = sizeof(arr) / sizeof(arr[0]);\n\n    pid_t pid = fork();\n    if (pid &lt; 0) {\n        perror(\"fork failed\");\n        return 1;\n    }\n    else if (pid == 0) {\n        printf(\"I am the child process\\n\");\n\n        int child_sum = calc(arr, n);\n        exit(child_sum);\n    }\n    else {\n        printf(\"I am the parent process\\n\");\n\n        int parent_sum = calc(arr, n);\n\n        int child_sum;\n        if (wait(&amp;child_sum) == -1) {\n            perror(\"wait failed\");\n        }\n        else {\n            printf(\"Sum by child: %d\\n\", child_sum);\n        }\n\n        printf(\"Sum by parent: %d\\n\", parent_sum);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 7550794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ozlam.jpg?s=128&g=1", "display_name": "MLPJ", "link": "https://stackoverflow.com/users/7550794/mlpj"}, "is_accepted": false, "score": 0, "last_activity_date": 1507160692, "creation_date": 1507160692, "answer_id": 46575783, "question_id": 46574822, "link": "https://stackoverflow.com/questions/46574822/how-to-pass-arguments-from-parent-process-to-child-process-in-unix/46575783#46575783", "title": "How to pass arguments from parent process to child process in Unix?", "body": "<p>Here <code>execlp</code> will give your child process a new address space. So you practically can't send an argument to the child process from parent process. But you can do as follows,</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n    pid_t pid;\n    /* fork a child process */\n    pid = fork();\n    int sum = 0;\n    int arr[] = { 10, 20, 25, 5, 6, 45, 87, 98, 23, 45};\n    if (pid &lt; 0) { /* error occurred */\n        fprintf(stderr, \"Fork Failed\");\n        return 1;\n    }\n    else if (pid == 0) { /* child process */\n        int i=0;\n\n        for (i=1; i&lt;10; i=i+2) {\n            sum = sum + arr[i];\n        }\n\n        return sum;\n\n\n    }\n    else { /* parent process */\n        /* parent will wait for the child to complete */\n        wait(NULL);\n\n    int i=0;\n\n        for (i=1; i&lt;10; i=i+2) {\n            sum = sum + arr[i];\n        }\n\n        printf(\"%d\\n\",sum);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>ps-\nHere the array is declared after the fork() so it is common to both parent and child processes.</p>\n"}], "owner": {"reputation": 83, "user_id": 7578876, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/69420278a22379e75288fbb05a3f664a?s=128&d=identicon&r=PG", "display_name": "asilvester635", "link": "https://stackoverflow.com/users/7578876/asilvester635"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3139, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1507177997, "creation_date": 1507154281, "last_edit_date": 1507158581, "question_id": 46574822, "link": "https://stackoverflow.com/questions/46574822/how-to-pass-arguments-from-parent-process-to-child-process-in-unix", "title": "How to pass arguments from parent process to child process in Unix?", "body": "<p><strong>Inside my code I want to...</strong></p>\n\n<p>1) the parent process will create an array with at least 10\nelement</p>\n\n<p>2) the child process will calculate the production of all elements\nwith odd index inside the array</p>\n\n<p>3) the child process will provide the result\nto the parent process when it finish calculation and then the child process\nwill terminate</p>\n\n<p>4) the parent will calculate the production after it get the\nresult from the child process</p>\n\n<p>5) the parent process will finally output\nthe results.</p>\n\n<p>Now the <strong>CODE LOGIC</strong> is easy to write which is down below</p>\n\n<pre><code>int cal(int arr[10]) {\n    int i=0;\n    int sum = 0;\n    for (i=1; i&lt;10; i=i+2) {\n        sum = sum + arr[i];\n    }\n\n    return sum;\n} // end of calc\n\nint main() {\n    int arr[] = { 10, 20, 25, 5, 6, 45, 87, 98, 23, 45};\n    int sum = cal(arr);\n\n    printf(\"Sum of all odd indexs element is : %d\", sum);\n\n    return 0;\n} // end of main\n</code></pre>\n\n<p>And here is the code for creating a child process using fork()</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n    pid t pid;\n    /* fork a child process */\n    pid = fork();\n    if (pid &lt; 0) { /* error occurred */\n        fprintf(stderr, \"Fork Failed\");\n        return 1;\n    }\n    else if (pid == 0) { /* child process */\n        execlp(\"/bin/ls\",\"ls\",NULL);\n\n    }\n    else { /* parent process */\n        /* parent will wait for the child to complete */\n        wait(NULL);\n        printf(\"Child Complete\");\n    }\n    return 0;\n} // end of main\n</code></pre>\n\n<p>My questions are...</p>\n\n<ul>\n<li><p>How would I use the <strong>CODE LOGIC</strong> and combine it with creation of the child process using fork()? If the pid == 0, then the creation of a child process was successful so I think that is where we insert the code for step 2... 2) the child process will calculate the production of all elements\nwith odd index inside the array.</p></li>\n<li><p>How would the parent send the array to the child process so that the child process could sum the elements with odd index?</p></li>\n</ul>\n\n<p><strong>UPDATED CODE: I combined both codes above into one</strong></p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\n/*\ncalculate the production of all elements with odd index inside the array\n*/\nint cal(int arr[10]) {\n    int i=0;\n    int sum = 0;\n    for (i=1; i&lt;10; i=i+2) {\n        sum = sum + arr[i];\n    }\n\n    return sum;\n} // end of calc\n\nint main() {\n    pid t pid;\n    /* fork a child process */\n    pid = fork();\n    if (pid &lt; 0) { /* error occurred */\n        fprintf(stderr, \"Fork Failed\");\n        return 1;\n    }\n    else if (pid == 0) { /* child process */\n        print(\"I am the child process\");\n        // the child process will calculate the production \n        // of all elements with odd index inside the array\n        calc();\n        // the child process will provide the result to the parent process \n        // when it finish calculation and then the child process will terminate\n        exit(0);\n\n    }\n    else { /* parent process */\n        /* parent will wait for the child to complete */\n        printf(\"I am the parent, waiting for the child to end\");\n        // the parent process will create an array with at least 10 element\n        int arr[] = { 1, 2, 5, 5, 6, 4, 8, 9, 23, 45 };\n        int sum = calc(arr);\n        wait(NULL);\n        printf(\"Child completed calculating the production of all elements with odd index inside the array\");\n        // the parent will calculate the production after it get the result from the child process\n        // the parent process will finally output the results.\n        printf(\"Sum of all odd indexs element is : %d\", sum);\n    }\n    return 0;\n} // end of main\n</code></pre>\n"}, {"tags": ["c", "linux", "memory", "fork"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1507154414, "post_id": 46574798, "comment_id": 80103226, "body": "I don&#39;t remember if <code>popen()</code> can call <code>malloc</code> down inside its implementation.  If so, the problem may be that you have previously corrupted the heap with improper <code>malloc</code> or <code>free</code> usage elsewhere in your code, and the corruption doesn&#39;t get detected until <code>popen</code> stumbles over it."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1507155161, "post_id": 46574798, "comment_id": 80103474, "body": "Is overcommit enabled on your system? (<code>cat &#47;proc&#47;sys&#47;vm&#47;overcommit_memory</code>)"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1507155344, "post_id": 46574798, "comment_id": 80103534, "body": "If it&#39;s disabled, you need the amount of your app&#39;s memory usage to make a <code>fork</code> (which is what <code>popen</code> does). If you don&#39;t want to have overcommit enabled, you could get away with much less memory if you create your pipe manually (with <code>pipe()</code>) and use <code>posix_spawn</code> to create the process with the pipe connected to it."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1507165394, "post_id": 46574798, "comment_id": 80106010, "body": "It would be worth pinging glibc with a bug report to that effect: popen should be implemented with posix_spawn, not fork. musl already does it that way."}, {"owner": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1507185883, "post_id": 46574798, "comment_id": 80111596, "body": "@PSkocik, yes, I do have the following:   sysctl -w vm.overcommit_memory=2; sysctl -w vm.overcommit_ratio=90; sysctl -w vm.dirty_ratio=40; sysctl -w vm.dirty_background_ratio=3; Please, can you explain more detailed the influence of the overcommit in this case? Please!"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1507198204, "post_id": 46574798, "comment_id": 80118857, "body": "@leonp I&#39;d try enabling it fully (<code>echo 1&gt;&#47;proc&#47;sys&#47;vm&#47;overcommit_memory</code>). The reason it might fail without it is that <code>fork()</code> will actually have to reserve every page that the parent process has reserved. That&#39;s a waste if you&#39;re going to <code>execve</code> soon."}, {"owner": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1507214068, "post_id": 46574798, "comment_id": 80129723, "body": "@PSkocik, The reason I use the above mentioned settings is that my application has extensive writing to the disk. And I don&#39;t want to collect much data in ram, as when the power is lost I need to push everything to the disk. But, please, explain more detailed what happens now - I don&#39;t understand your brief explanation. Sorry, excuses for my lack of knowledge/understanding..."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1507219275, "post_id": 46574798, "comment_id": 80133159, "body": "@leonp Please try <code>sudo sh -c &#39;echo 1&gt;&#47;proc&#47;sys&#47;vm&#47;overcommit_memory&#39;</code> or compiling with <a href=\"https://www.musl-libc.org/download.html\" rel=\"nofollow noreferrer\">musl-gcc</a> instead of just <code>gcc</code>. If any of the two strategies solved your problem, I may try and explain why."}, {"owner": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1507455109, "post_id": 46574798, "comment_id": 80208826, "body": "@PSkocik Yes, it worked! No more errors. Now, according to my measures some 3-4 years ago, the performance of writing to disk goes down if I close overcommit at all. 1. What happens? Why this helped? 2. What should I do with the disk performance, if I cancel overcommit? 3. Why this error exists when I run from NAND, but does not (works fine) when running from NFS?"}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "edited": false, "score": 0, "creation_date": 1507465384, "post_id": 46630468, "comment_id": 80211521, "body": "Please, I am lost. According to the, for example, <a href=\"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Performance_Tuning_Guide/s-memory-captun.html\" rel=\"nofollow noreferrer\">access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Lin&zwnj;&#8203;ux/&hellip;</a>, setting overcommit_memory to 1 or 2 is almost the same in my case, as I have no swap memory and overcommit_ratio=90 and &#39;free&#39; shows 400MB free. Where I am wrong?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "edited": false, "score": 0, "creation_date": 1507466736, "post_id": 46630468, "comment_id": 80211857, "body": "I&#39;d use <code>musl</code> or write my own <code>FILE *my_popen(char const *File, char const *Mode, pid_t *Pid);</code> It should be a bit more efficient too."}, {"owner": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "edited": false, "score": 0, "creation_date": 1507467859, "post_id": 46630468, "comment_id": 80212171, "body": "Yes, I understand the work around you suggested and try to implement it. But still I don&#39;t understand why it doesn&#39;t work with my setting overcommit_memory=2, overcommit_ratio=90? Manual says that my settings mean that Linux has 90% of memory to assign (reserving only 10%). If &#39;free&#39; report 400MB, what is the cause of the error? My process itself occupies about 30MB..."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "edited": false, "score": 0, "creation_date": 1507470215, "post_id": 46630468, "comment_id": 80212855, "body": "@leonp <code>free</code> only appears to be concerned with resident set sizes, which makes it useless for this. What matters is the virtual memory usage of your system. (If you <code>malloc</code> 1GiB but only touch the first page, your resident memory will go up by 4KiB (pagesize) but your virtual memory usage will go up by at least 1GiB. The 1GiB is what matter for <code>fork()</code> if overcommit is disabled)."}, {"owner": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "edited": false, "score": 0, "creation_date": 1507477964, "post_id": 46630468, "comment_id": 80215264, "body": "Please, can you explain also why running from NFS works and from NAND not? And please, also insert space in your answer between &quot;1 &gt;/proc...&quot;"}, {"owner": {"reputation": 9285, "user_id": 1218408, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YqwCY.png?s=128&g=1", "display_name": "ZachB", "link": "https://stackoverflow.com/users/1218408/zachb"}, "edited": false, "score": 1, "creation_date": 1546926087, "post_id": 46630468, "comment_id": 95004532, "body": "<i>rather than <code>posix_spawn()</code></i> -- On Linux <code>posix_spawn()</code> is implemented with <code>fork()</code> unless called with <code>POSIX_SPAWN_USEVFORK</code>. Solaris&#39;s <code>posix_spawn()</code> implementation uses <code>vfork()</code> though."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 4, "last_activity_date": 1507560789, "last_edit_date": 1507560789, "creation_date": 1507461266, "answer_id": 46630468, "question_id": 46574798, "link": "https://stackoverflow.com/questions/46574798/enomem-from-popen-for-system-while-there-is-enough-memory/46630468#46630468", "title": "ENOMEM from popen() for system(), while there is enough memory", "body": "<p>If popen is implemented with <code>fork()</code> (as it currently is in glibc) rather than <code>posix_spawn()</code> or <code>vfork()</code>, then you need as much memory as what the parent is using for the operation to succeed. This allocation might fail if overcommit on your system is disabled, so to solve your problem, you should do one of the following:</p>\n\n<ol>\n<li><p>fully enable overcommit on your system</p>\n\n<pre><code>sudo sh -c 'echo 1&gt;/proc/sys/vm/overcommit_memory'\n</code></pre></li>\n<li><p>use a libc library that doesn't implement <code>popen()</code> with <code>fork()</code> (<a href=\"https://www.musl-libc.org\" rel=\"nofollow noreferrer\">musl</a> is an <a href=\"https://git.musl-libc.org/cgit/musl/tree/src/stdio/popen.c\" rel=\"nofollow noreferrer\">example</a>)</p></li>\n<li><p>do what <code>popen</code> does yourself but express it in terms of <code>pipe()</code> and <code>posix_spawn()</code>, rather than the classical <code>pipe()</code>, <code>dup2()</code>,<code>fork()</code>,<code>execve()</code> combo.</p></li>\n</ol>\n\n<p>(<code>popen</code> 1) creates a pipe 2) wraps one end of the pipe in a <code>FILE</code> and 3) creates a process and wires up the other end of the pipe to the processe's <code>stdin</code> or <code>stdout</code>, saving the process's <code>pid</code> in the <code>FILE</code> structure)</p>\n\n<p>The problem with the classical <code>fork()</code> + <code>execve()</code> way of process creation is that if overcommit is disabled, <code>fork()</code> has to be pessimistic and assume the child might continue running the parent process, which would mean the child needs every page of the parent's memory. With overcommit enabled, the memory is borrowed and problems (the out-of-memory killer) only arise if the borrowed memory is accessed (which it won't be if the process will call <code>execve()</code> soon). With overcommit disabled, all of the memory has to be reserved, which is why it's likely to fail if the <code>fork</code> call is made from a larger process.</p>\n"}], "owner": {"reputation": 455, "user_id": 860151, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/67e464b9824febb47469ef06f941de6d?s=128&d=identicon&r=PG", "display_name": "leonp", "link": "https://stackoverflow.com/users/860151/leonp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 0, "accepted_answer_id": 46630468, "answer_count": 1, "score": 2, "last_activity_date": 1507560789, "creation_date": 1507154187, "question_id": 46574798, "link": "https://stackoverflow.com/questions/46574798/enomem-from-popen-for-system-while-there-is-enough-memory", "title": "ENOMEM from popen() for system(), while there is enough memory", "body": "<p>I have two relatively big applications(processes) running in embedded Linux on ARM with 3 RAM banks (in Linux cmdline: mem=128M mem=256M@0x90000000 mem=128M@0xA0000000).\nOne application processes user commands, between which there may be request to run ordinary Linux shell command. This is implemented as:  </p>\n\n<p><code>if((fp=popen(UserCommand, \"r\")) == NULL) return(errno));\nfgets(ReplyString, 128, fp);\nRes = pclose(fp);</code>  </p>\n\n<p>The first line returns errno=12 - ENOMEM even for the simplest command like \"pwd\", although there is plenty of memory:   </p>\n\n<p><code>root@dm814x-evm:~# free\n              total         used         free       shared      buffers \n  Mem:       461472        38576       422896            0          152\n Swap:            0            0            0\nTotal:       461472        38576       422896</code>  </p>\n\n<p>As far as I understand there is more than 400MB of free space!<br>\nFor the first test purpose I also cancelled the second process - ops!, the error has gone!!!<br>\nFor the second test I run telnet and executed the command via it (while both processes were running) - no problem, works fine.  </p>\n\n<p>So, where is the catch?</p>\n"}, {"tags": ["ios", "c", "binaryfiles"], "comments": [{"owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 0, "creation_date": 1507154152, "post_id": 46574726, "comment_id": 80103129, "body": "What does this question have to do with iOS?"}, {"owner": {"reputation": 37, "user_id": 4153060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e7acd84901de3a9986977ffd74bedb?s=128&d=identicon&r=PG&f=1", "display_name": "S.s.Sailesh Kumar", "link": "https://stackoverflow.com/users/4153060/s-s-sailesh-kumar"}, "reply_to_user": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 0, "creation_date": 1507155826, "post_id": 46574726, "comment_id": 80103706, "body": "it has nothing to with iOS. But i am trying to read .&quot;.bin&quot; this in an iOS app"}], "owner": {"reputation": 37, "user_id": 4153060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e7acd84901de3a9986977ffd74bedb?s=128&d=identicon&r=PG&f=1", "display_name": "S.s.Sailesh Kumar", "link": "https://stackoverflow.com/users/4153060/s-s-sailesh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507155913, "creation_date": 1507153730, "last_edit_date": 1507155913, "question_id": 46574726, "link": "https://stackoverflow.com/questions/46574726/how-do-we-directly-read-a-file-from-bin-by-avoiding-looping-as-below", "title": "How do we directly read a file from &quot;.bin&quot; by avoiding looping as below", "body": "<p>I am trying to fetch a file from binary data which has about 4700 files. How do i directly point a specific file avoiding loop(while) as below.</p>\n\n<p>It is taking good amount of time for me to read files which are at index 3000+ </p>\n\n<p>I am going through a while iteration where filename is being compared for each iteration. If File name is matching then i am trying to read the uncompressed data and saving to documents directory.</p>\n\n<p>Could any one suggest me a way to deal with this.</p>\n\n<pre><code>struct FILE_DATA buffer;\n\nFILE *myFile = fopen(binaryPath, \"rb\");\n\nf_name = f_name.lowercaseString;\n\nconst char * fileNameChar = f_name.UTF8String;\n\n\n\nif (myFile == NULL)\n{\n    fputs(\"File error\", stderr);\n    completionhandler(false,@\"\");\n}\n\n// Go to where the file count spec is: byte 12\nfseek(myFile, 12, SEEK_SET);\n\n// Should be a sizeof 40.\nint temp = sizeof(buffer);\n\n// Get the Table Offset.\nuint32_t loc;\nfread(&amp;loc, 4, 1, myFile);\nrewind(myFile);\n// Go to the beginning of the file tables.\nfseek(myFile, loc, SEEK_SET);\n\n// Variable to store where the chart archive will be.\nuint32_t loc2 = 0;\n\nint _fileFound = 0;\n// Copy the file into the buffer:\nwhile(fread(&amp;buffer,1, temp, myFile) != 0)\n{\n    // Reads the next 40 bytes into the struct.\n        DebugLog(\"Buffer Name : %s == \",buffer.name);\n\n        // If the names are a match, then mark the location.\n\n        if(strcmp(buffer.name, fileNameChar) == 0)\n        {\n            _fileFound = 1;\n            loc2 = buffer.offset;\n            break;\n        }\n}\n\nif(_fileFound == 0)\n{\n    // Alert if the file was not found.\n    fputs(\"File Not Found\", stderr);\n    completionhandler(false,@\"\");\n\n}\n\n// Navigate to the location of the file.\n\nfseek(myFile, loc2, SEEK_SET);\n\nuLongf unCompSize = buffer.size_d;\nuLongf compSize = buffer.size_c;\n\nchar  *rawDataBuff = malloc(buffer.size_c);\n//allocate buffer to hold the compressed TCL file\n\nchar  *  unCompDataBuff = malloc(buffer.size_d);\n\n//allocate buffer to hold the decompressed TCL file\nif (rawDataBuff == NULL){\n    fputs (\"Memory error\",stderr);\n    completionhandler(false,@\"\");\n\n}\n\n\nfread(rawDataBuff,buffer.size_c, 1,myFile);\n\n//read in compress TCL file into the buffer\nint z_result = uncompress((Bytef*)unCompDataBuff, &amp;unCompSize, (const Bytef*)rawDataBuff, compSize);\n\nDebugLog(\"status %d\",z_result);\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8549610"}, "edited": false, "score": 1, "creation_date": 1507152381, "post_id": 46574437, "comment_id": 80102434, "body": "Because <code>argv[i]</code> is of type <code>char *</code>, and <code>isdigit()</code> wants <code>int</code> (or <code>char</code> - just a single character)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8549610"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1507152555, "post_id": 46574437, "comment_id": 80102498, "body": "@Jens Too late. I had fixed my comment before you&#39;ve posted yours."}, {"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 1, "creation_date": 1507152557, "post_id": 46574437, "comment_id": 80102501, "body": "I don&#39;t get a segfault here"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1507152595, "post_id": 46574437, "comment_id": 80102511, "body": "As noted under one of the answers, it is indeed a problem. But I don&#39;t see why would it cause segfault. Show the other code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507153283, "post_id": 46574437, "comment_id": 80102782, "body": "To correct the above, the standard <i>does</i> demand the argument to be represantable as unsigned <code>char</code> or <code>EOF</code>: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.4p1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#7.4p1</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507152463, "post_id": 46574470, "comment_id": 80102471, "body": "Actually there is a wonder it is crashing. pointers are safely converted to <code>int</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507152934, "post_id": 46574470, "comment_id": 80102645, "body": "@eugenesh: but it is no longer safe if that int is used as an index into a small array. How do you expect that <code>isdigit</code> works?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1507153017, "post_id": 46574470, "comment_id": 80102677, "body": "@rici It can very well check the ranges. I haven&#39;t found any mentioning of UB in this function based on the value passed. So I would say the implementation which is segfaulting is non-conforming."}, {"owner": {"reputation": 1497, "user_id": 5504922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bc22b2096bef7bf39b68e241b81efb?s=128&d=identicon&r=PG&f=1", "display_name": "EdmCoff", "link": "https://stackoverflow.com/users/5504922/edmcoff"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1507153091, "post_id": 46574470, "comment_id": 80102708, "body": "@EugeneSh. From my man page: &quot;The value of the argument must be representable as an unsigned char or the value of EOF.&quot;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507153138, "post_id": 46574470, "comment_id": 80102725, "body": "The standard is not mentioning it. At least I haven&#39;t found it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507153238, "post_id": 46574470, "comment_id": 80102765, "body": "Actually I have found it. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.4p1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#7.4p1</a> . Sorry everyone :)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507153369, "post_id": 46574470, "comment_id": 80102818, "body": "@eugene: checking the ranges goes against the C philosophy. If you are unconfident about the validity of an argument you are about to pass, it is up to you to do the check, so that those of us who have ensured correctness don&#39;t have to pay the price of an unnecessary check. :-)"}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1507152419, "creation_date": 1507152419, "answer_id": 46574470, "question_id": 46574437, "link": "https://stackoverflow.com/questions/46574437/segmentation-fault-core-dumped-c/46574470#46574470", "title": "Segmentation fault (core dumped) - C", "body": "<p><code>argv[i]</code> is a ptr-to-char, but <code>isdigit()</code> takes an <code>int</code>. No wonder the program crashes. Did you mean to use <code>isdigit(argv[x][y])</code> somehow?</p>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "is_accepted": false, "score": 1, "last_activity_date": 1507152531, "creation_date": 1507152531, "answer_id": 46574498, "question_id": 46574437, "link": "https://stackoverflow.com/questions/46574437/segmentation-fault-core-dumped-c/46574498#46574498", "title": "Segmentation fault (core dumped) - C", "body": "<p><code>isdigit()</code> takes an <code>int</code> as argument, but here you pass a <code>char *</code>.<br>\nSo, you have to make a loop on each string:</p>\n\n<pre><code>int main(int argc,char* argv[])\n{\n    int i = 1;\n    int j;\n    while(i &lt; argc)\n    {\n        j = -1;\n        while (argv[i][++j] != 0)\n        {\n            if(isdigit(argv[i][j]))\n                printf(\"OK\\n\");\n            else\n                printf(\"NOT OK\\n\"); \n        }\n        i++;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507153011, "post_id": 46574552, "comment_id": 80102675, "body": "You don&#39;t need to convert the character. <code>isdigit()</code> can take an argument like: <code>&#39;5&#39;</code> and then, return <code>true</code>. <i>each character has integer ascii value</i>"}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1507153350, "post_id": 46574552, "comment_id": 80102807, "body": "If the value of your argument is <code>7</code>(exemple) print its value with this <code>printf(&quot;%d\\n&quot;, argv[1][0]) it will give you 55. Because </code> each character has integer ascii value` but this is not the <code>decimal</code> value of your argv[1][0]."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8715337"}, "edited": false, "score": 0, "creation_date": 1507153809, "post_id": 46574552, "comment_id": 80102994, "body": "and now I have a different problem. I have task make a simple calc. write number and signs like arguments and solve it. I want to check which argument is number and which is sign. with 2 loops I can check only separated character. does it exist some way to check whole argument?"}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1507153987, "post_id": 46574552, "comment_id": 80103071, "body": "Yes ! try <code>isdigit(atoi(argv[i]))</code> in only 1 while loop. Can you please validate now :D @CrapdoTwothausand"}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1507154060, "post_id": 46574552, "comment_id": 80103094, "body": "@CrapdoTwothausand atoi will convert the whole string <code>argv[i]</code> like <code>1234</code> into an int and <code>isdigit</code> will take the whole number"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8715337"}, "edited": false, "score": 0, "creation_date": 1507154940, "post_id": 46574552, "comment_id": 80103408, "body": "@NicolasGuerin I try isdigit(atoi(argv[i])) and for some reason it return false. I try to add also another check isalpha and I have segmentation error again."}], "tags": [], "owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "is_accepted": true, "score": 1, "last_activity_date": 1507152883, "last_edit_date": 1507152883, "creation_date": 1507152769, "answer_id": 46574552, "question_id": 46574437, "link": "https://stackoverflow.com/questions/46574437/segmentation-fault-core-dumped-c/46574552#46574552", "title": "Segmentation fault (core dumped) - C", "body": "<p>This is what you're looking for. </p>\n\n<pre><code> int main(int argc,char* argv[])\n    {\n        int i = 1;\n        int j;\n        while(i &lt; argc)\n        {\n            j = 0;\n            while (argv[i][j] != 0)\n            {\n                if(isdigit(argv[i][j]))\n                    printf(\"OK\\n\");\n                else\n                    printf(\"NOT OK\\n\"); \n                j++;  \n            }\n            i++;\n        }\n    }\n</code></pre>\n\n<p>argv[i] is pointer, not a data. You're passing a pointer where a <code>char</code> (i think) is expected. </p>\n\n<p>You should compile your file using the warnings flags with <code>gcc</code> : <code>-w -Wall -Wextra</code> it will tell you that you're passing the wrong type of argument. </p>\n\n<p>If is digit takes an <code>int</code> you've have to convert the <code>argv[i][j]</code> into an int with <code>atoi(argv[i][j])</code></p>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1507153562, "post_id": 46574659, "comment_id": 80102895, "body": "Print the char casted you&#39;ll see that this the ascii value that is passed in <code>isdigit</code> and not the decimal value."}, {"owner": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "reply_to_user": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1507153681, "post_id": 46574659, "comment_id": 80102949, "body": "I don&#39;t say that <code>&#39;0&#39;</code> is being casted to <code>0</code>. But <code>char</code> is being casted to <code>int</code> automatically while some calculations or passing as argument."}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1507153906, "post_id": 46574659, "comment_id": 80103042, "body": "Yeah but it could leave to mistakes. If he starts thinking that you can cast char to int without problemes. I didn&#39;t say you post is wrong just make sure that everything is said  <code>(char is being casted automatically).</code> if you could add with ascii value not decimal or something like that :)"}], "tags": [], "owner": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "is_accepted": false, "score": 0, "last_activity_date": 1507154046, "last_edit_date": 1507154046, "creation_date": 1507153275, "answer_id": 46574659, "question_id": 46574437, "link": "https://stackoverflow.com/questions/46574437/segmentation-fault-core-dumped-c/46574659#46574659", "title": "Segmentation fault (core dumped) - C", "body": "<p><code>argv[i]</code> has <code>char*</code> type, but <code>isdigit()</code> expects <code>int</code> (ASCII code of <code>char</code> is being casted to <code>int</code> automatically).</p>\n\n<p>Write separate function to check if string contains digits only.</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool is_string_number(const char* str)\n{\n    while (*str)\n    {\n        if (!isdigit(*str++))\n            return false;\n    }\n    return true;\n}\n\nint main(int argc, char* argv[])\n{\n    for (int i = 1; i &lt; argc; ++i)\n        printf(is_string_number(argv[i]) ? \"OK\\n\" : \"NOT OK\\n\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8715337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6574, "favorite_count": 0, "accepted_answer_id": 46574552, "answer_count": 4, "score": 0, "last_activity_date": 1528636586, "creation_date": 1507152261, "last_edit_date": 1528636586, "question_id": 46574437, "link": "https://stackoverflow.com/questions/46574437/segmentation-fault-core-dumped-c", "title": "Segmentation fault (core dumped) - C", "body": "<p>This is part of program, where I need to know if arguments  are int. I can't understand why I have this error 'Segmentation fault (core dumped)'.</p>\n\n<pre><code>int main(int argc,char* argv[])\n{\n    int i = 1;\n    while(i &lt; argc)\n    {\n        if(isdigit(argv[i]))\n            printf(\"OK\\n\");\n        else\n            printf(\"NOT OK\\n\"); \n        i++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "time", "process", "pipe", "parent-child"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1507154162, "post_id": 46574404, "comment_id": 80103132, "body": "To fetch time with better than 1s precision, you&#39;ll want either <code>gettimeofday()</code> or <code>clock_gettime()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1514180518, "post_id": 46574404, "comment_id": 82901658, "body": "You&#39;ve omitted too much necessary information.  You really need to learn about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  You also need to state whether you want the CPU time used by the child processes or the &#39;wall clock&#39; time.  You show the use of <code>read_buffer</code> and <code>write_buffer</code> but they&#39;re neither defined nor initialized.  You need to consider what format the start and end messages from a single PID should take."}], "owner": {"reputation": 1, "user_id": 6621966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5443f94f675494a2d4b337985c85588?s=128&d=identicon&r=PG&f=1", "display_name": "Teja S", "link": "https://stackoverflow.com/users/6621966/teja-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507152139, "creation_date": 1507152139, "question_id": 46574404, "link": "https://stackoverflow.com/questions/46574404/calculating-time-of-parent-and-child-processes", "title": "Calculating Time of Parent and Child Processes", "body": "<p>I am trying to find a way to calculate time for my parent and child processes. In particular:</p>\n\n<ol>\n<li>The time prior to and after generating a child process (start and end time of parent)</li>\n<li>The time at which child process begins execution (end time of child)</li>\n</ol>\n\n<p>This is within a program where I have created multiple child processes from a parent process. The child process would transfer its child time via pipe to the parent process. I've looked into using C functions and headers with time but I am unsure how to go about getting it down to microseconds within the processes themselves rather than in the form of seconds from 1970.</p>\n\n<p>This is my code so far, any help would be greatly appreciated:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt; // for reaching unix operations\n#include &lt;time.h&gt;\n\n\nint main(int argc, char *argv[]) {\npid_t main = getpid();\n\nint N = 30;\nint i;\nint fd[2*N];\npid_t* children = (pid_t*)malloc(sizeof(pid_t) * N);\nfor (i = 0; i &lt; N; i++) {\n    pipe(&amp;fd[2 * i]);\n    pid_t child = fork();\n    if (child == 0) {\n        pid_t me = getpid();\n        close(fd[2 * i]);\n        write(fd[2 * i + 1], write_buffer, SIZE);\n        printf(\"I'm a child and my pid is: %d\\n\", me);\n        sleep(1);\n        // exit(4);\n        return me * 2;\n    }\n    else if (child &lt; 0) {\n        // printf(\"Could not create child\\n\");\n    }\n    else {\n        close(fd[2 * i + 1]);\n        read(fd[2 * i], read_buffer, SIZE);\n        children[i] = child;\n        // printf(\"I have created a child and its pid %d\\n\", child);\n    }\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "visual-studio", "gcc"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1507152802, "post_id": 46574310, "comment_id": 80102581, "body": "I think that for GCC the name <code>cdecl</code> is used with out the leading underscores."}, {"owner": {"reputation": 107, "user_id": 4001997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lWKg3.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/4001997/ryan"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1507153046, "post_id": 46574310, "comment_id": 80102688, "body": "@MichaelBurr Do you know how I would go about suppressing it? Do I need to include some suppression line in the file itself, or is there an option inside of Visual Studio that I could switch/add to a list?"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1507153581, "post_id": 46574310, "comment_id": 80102904, "body": "Read gcc&#39;s doc? On the command line, option -Wxxx enables warning xxx, -Wno-xxx disables it."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 3, "creation_date": 1507153906, "post_id": 46574310, "comment_id": 80103041, "body": "You don&#39;t need to change command line options or suppress warnings, you need to fix  the line of code like so:  <code>using LoggerFuncPtr = void(__attribute__((cdecl)) *)(wchar_t*);</code>"}, {"owner": {"reputation": 107, "user_id": 4001997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lWKg3.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/4001997/ryan"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1507154174, "post_id": 46574310, "comment_id": 80103140, "body": "Thank you @MichaelBurr, that solved my issue."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1507182793, "post_id": 46574310, "comment_id": 80110317, "body": "@MichaelBurr Would you like to make an answer? It seems a decent question with a good answer, so there might be some upvotes for you. But actually, I mostly want this out of the list of unanswered questions."}], "answers": [{"tags": [], "owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "is_accepted": true, "score": 2, "last_activity_date": 1507306520, "creation_date": 1507306520, "answer_id": 46609919, "question_id": 46574310, "link": "https://stackoverflow.com/questions/46574310/visual-studio-vs-gcc-concerning-cdecl-attribute-directive-ignored-wattri/46609919#46609919", "title": "Visual Studio vs GCC, concerning &quot;&#39;__cdecl&#39; attribute directive ignored [-Wattributes]&quot;", "body": "<p>GCC's <code>cdecl</code> attribute doesn't have leading underscores, the declaration should look like:</p>\n\n<pre><code>#ifdef _MSC_VER\n    using LoggerFuncPtr = void(__cdecl *)(wchar_t*);\n#else\n    using LoggerFuncPtr = void(__attribute__((cdecl)) *)(wchar_t*); \n#endif\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4001997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lWKg3.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/4001997/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 46609919, "answer_count": 1, "score": 0, "last_activity_date": 1507306520, "creation_date": 1507151757, "last_edit_date": 1507183034, "question_id": 46574310, "link": "https://stackoverflow.com/questions/46574310/visual-studio-vs-gcc-concerning-cdecl-attribute-directive-ignored-wattri", "title": "Visual Studio vs GCC, concerning &quot;&#39;__cdecl&#39; attribute directive ignored [-Wattributes]&quot;", "body": "<p>I need to suppress a GCC (or what I believe is GCC) compiler warning in Visual Studio. Usually these Visual Studio compiler warnings come with a warning code, but this one is just null. </p>\n\n<p>The warning is <code>'__cdecl' attribute directive ignored [-Wattributes]</code>. I believe I need to suppress all <code>-Wattributes</code> warnings for my .h file, but I am not sure how to do that.</p>\n\n<p>The block that is giving me the troubles is inside <em>LoggerHelper.h</em>:</p>\n\n<pre><code>#ifdef _MSC_VER\n    using LoggerFuncPtr = void(__cdecl *)(wchar_t*);\n#else\n    using LoggerFuncPtr = void(__attribute__((__cdecl)) *)(wchar_t*); \n#endif\n</code></pre>\n"}, {"tags": ["c", "types", "function-pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1507151359, "post_id": 46574189, "comment_id": 80101990, "body": "C doesn&#39;t have this capability. Types are checked in compile time"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507151703, "post_id": 46574189, "comment_id": 80102141, "body": "BTW, <code>requester</code> is not type  <code>state_requester</code>.   <code>requester</code> is type  <code>state_requester *</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507151875, "post_id": 46574189, "comment_id": 80102222, "body": "... but on the other hand, types <i>are</i> checked at compile time.  Such checks can be willfully overridden or their results can be ignored, but it&#39;s not like someone calling your function can accidentally pass an argument of the wrong type without any opportunity to discover their error."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507152047, "post_id": 46574189, "comment_id": 80102307, "body": "@JohnBollinger I can imagine a scenario where this function is called with some dynamically calculated pointers. The question is whether the op is meaning to have such a scenario."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1507152132, "last_edit_date": 1507152132, "creation_date": 1507151837, "answer_id": 46574326, "question_id": 46574189, "link": "https://stackoverflow.com/questions/46574189/check-if-function-is-the-same-type-as-my-typedef-function-in-c/46574326#46574326", "title": "Check if function is the same type as my typedef function in C?", "body": "<p>You cannot do that in C.</p>\n\n<p>Types are checked in compile time, not runtime.</p>\n\n<p>Note: <code>requester</code> is type <code>state_requester*</code>, and not <code>state_requester</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2537, "user_id": 1720829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e2DBe.png?s=128&g=1", "display_name": "Nathan F.", "link": "https://stackoverflow.com/users/1720829/nathan-f"}, "is_accepted": true, "score": 0, "last_activity_date": 1507154569, "creation_date": 1507154569, "answer_id": 46574865, "question_id": 46574189, "link": "https://stackoverflow.com/questions/46574189/check-if-function-is-the-same-type-as-my-typedef-function-in-c/46574865#46574865", "title": "Check if function is the same type as my typedef function in C?", "body": "<p>While there's no real way to directly verify that the data is of a specific type, I've put together a way to 'presume' that the type matches.</p>\n\n<p><em>This does not 100% guarantee that it will be of the type specified.  However, it will presume that it is based on the type code.</em></p>\n\n<p>I've also added a few tests to it. I wrote this in a few minutes, so I'm sure that there is room for improvement in it, and I'm by no means a native developer. I just had a need and wrote it. If it helps someone, awesome!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n// Type Definitions\n\n// These are the type definitions that can be used to check for type\n// They need to be unique so that only types starting with these\n// prefixes will be presumed to be of the type specified.\ntypedef enum type {\n    TYPE_StateRequester = 0x10f3ccd3,\n    TYPE_OtherThing = 0x09331c8c\n} type;\n\n\n// State Requester Definitions &amp; Functions\n\ntypedef int state_requester_f(void* request_parameters);\n\n// Since we want to check the \"type\" of a function reference,\n// we need to wrap it in a struct along with it's type code.\nstruct state_requester_t {\n    int type;\n    state_requester_f* call;\n} typedef state_requester_t;\n\nstate_requester_t new_state_requester(state_requester_f* call) {\n    state_requester_t sr;\n    sr.type = TYPE_StateRequester;\n    sr.call = call;\n    return sr;\n}\n\n// This function will check if data is of type StateRequester\n// \n// If the data sent to this function is not of the length\n// nessecary for the state_requester type, - OR - \n// it's type property is not equal to the StateRequester type\n// then we will presume that this data is NOT of type StateRequester\nuint8_t is_state_requester(void* data, size_t len) {\n    return len == sizeof(state_requester_t) &amp;&amp; \n           ((state_requester_t*)data)-&gt;type == TYPE_StateRequester;\n}\n\n\n// Testing functions\n\nint test_caller(void* data) {\n    printf(\"Got to the test_caller function.\\n\");\n\n    return 0;\n}\n\nint main(int agc, char *argv[]) {\n\n    // Create an actual state_requester_t definitiion\n    state_requester_t sr = new_state_requester(&amp;test_caller);\n\n    // Test to see if it's validated as a state_requester_t\n    if (is_state_requester(&amp;sr, sizeof(state_requester_t))) {\n        printf(\"Yes, variable 'sr' is presumadely of type state_requester_t\\n\");\n        sr.call(NULL);\n    } else {\n        printf(\"No, variable 'sr' is not of type state_requester_t\\n\");\n    }\n\n    // Create a phony state_requester_t definition,\n    // but keep it the same length as a regular\n    // state_requester_t\n    void* a = malloc(sizeof(state_requester_t));\n\n    // Test to see if it's validated as a state_requester_t\n    if (is_state_requester(a, sizeof(state_requester_t))) {\n        printf(\"Yes, variable 'a' is presumadely of type state_requester_t\\n\");\n    } else {\n        printf(\"No, variable 'a' is not of type state_requester_t\\n\");\n    }\n\n    free(a);\n\n    // Create a phony state_requester_t with an improper length\n    void* b = malloc(5);\n\n    // Test to see if it's validated as a state_requester_t \n    if (is_state_requester(b, sizeof(state_requester_t))) {\n        printf(\"Yes, variable 'b' is presumadely of type state_requester_t\\n\");\n    } else {\n        printf(\"No, variable 'b' is not of type state_requester_t\\n\");\n    }    \n\n    free(b);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2537, "user_id": 1720829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e2DBe.png?s=128&g=1", "display_name": "Nathan F.", "link": "https://stackoverflow.com/users/1720829/nathan-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 46574865, "answer_count": 2, "score": 1, "last_activity_date": 1507154569, "creation_date": 1507151239, "last_edit_date": 1507151953, "question_id": 46574189, "link": "https://stackoverflow.com/questions/46574189/check-if-function-is-the-same-type-as-my-typedef-function-in-c", "title": "Check if function is the same type as my typedef function in C?", "body": "<p>I have the following code:</p>\n\n<pre><code>typedef int state_requester(void* request_paramaters);\n\nint doSomething(state_requester* requester) {\n\n    // This if statement is what I'm trying to\n    // figure out how to do.\n\n    if (requester isoftype state_requester) {\n        requester(NULL);\n        return 1;\n    } \n\n    return 0;\n}\n</code></pre>\n\n<p>I'm trying to find a way to verify that the \nargument passed is actually a valid <code>state_requester</code>\nfunction format before trying to execute it.</p>\n\n<p>This code above is only ment as an example, and clearly isn't how things would really work. I just need to know how to do <code>if ( x isoftype y )</code> in regards to function typedefs. </p>\n"}, {"tags": ["c", "imagemagick"], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 1010297, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d07be5154bd1452ac52b539d6bdde4a?s=128&d=identicon&r=PG", "display_name": "Atterratio", "link": "https://stackoverflow.com/users/1010297/atterratio"}, "edited": false, "score": 0, "creation_date": 1507228856, "post_id": 46586421, "comment_id": 80138346, "body": "What? No <a href=\"https://github.com/ImageMagick/ImageMagick/blob/master/MagickCore/image.h#L151\" rel=\"nofollow noreferrer\">github.com/ImageMagick/ImageMagick/blob/master/MagickCore/&hellip;</a>"}], "tags": [], "owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "is_accepted": false, "score": 0, "last_activity_date": 1507208828, "creation_date": 1507208828, "answer_id": 46586421, "question_id": 46574071, "link": "https://stackoverflow.com/questions/46574071/how-to-extract-image-info-from-image-in-imagemagick-core/46586421#46586421", "title": "How to extract Image Info from Image in ImageMagick Core", "body": "<p>The <code>Image</code> structure has a property <code>image_info</code> that points to the <code>ImageInfo</code> used during <code>ReadImage</code>.</p>\n\n<p>To extract the <code>ImageInfo</code>, use <code>CloneImageInfo</code>.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>ImageInfo * myInfo;\nmyInfo = CloneImageInfo(myImage-&gt;image_info);\nif (myInfo == (ImageInfo *)NULL) { // Error handle\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 1010297, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d07be5154bd1452ac52b539d6bdde4a?s=128&d=identicon&r=PG", "display_name": "Atterratio", "link": "https://stackoverflow.com/users/1010297/atterratio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530919495, "creation_date": 1507150711, "last_edit_date": 1530919495, "question_id": 46574071, "link": "https://stackoverflow.com/questions/46574071/how-to-extract-image-info-from-image-in-imagemagick-core", "title": "How to extract Image Info from Image in ImageMagick Core", "body": "<p>I think it's very easy, but can't find how in the documentation or by Googling it.</p>\n\n<p>I and interested in only low level MagicCore not MagicWand.</p>\n"}, {"tags": ["c++", "c", "interrupt", "atmel", "avr-gcc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507149116, "post_id": 46573550, "comment_id": 80100949, "body": "It looks like the handler <code>ISR(TIMER0_OVF_vect)</code> is defined in multiple places."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8716917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqW8-2bbBlU/AAAAAAAAAAI/AAAAAAAAABo/Q8XpNgQpGpc/photo.jpg?sz=128", "display_name": "bebenlebricolo", "link": "https://stackoverflow.com/users/8716917/bebenlebricolo"}, "edited": false, "score": 0, "creation_date": 1507151341, "post_id": 46574105, "comment_id": 80101972, "body": "This is true... So this is mainly due to the Arduino library? I didn&#39;t think i had to jump to avr-gcc and avr toolchain so early, but anyway it HAVE to try it! Thank you for your reply!"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1507150864, "creation_date": 1507150864, "answer_id": 46574105, "question_id": 46573550, "link": "https://stackoverflow.com/questions/46573550/atmel-arduino-isrtimer0-ovf-vect-wont-compile-first-defined-in-vector/46574105#46574105", "title": "Atmel / Arduino: ISR(TIMER0_OVF_vect) won&#39;t compile (&quot;first defined&quot; in __vector_16)", "body": "<p>You're using the Arduino library, which already defines a handler for the <code>TIMER0_OVF</code> interrupt.</p>\n\n<p>If you want to define your own handler for this interrupt, you will need to build your project standalone, without using the Arduino library or tools.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 8716917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqW8-2bbBlU/AAAAAAAAAAI/AAAAAAAAABo/Q8XpNgQpGpc/photo.jpg?sz=128", "display_name": "bebenlebricolo", "link": "https://stackoverflow.com/users/8716917/bebenlebricolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1518578025, "last_edit_date": 1518578025, "creation_date": 1507407488, "answer_id": 46624722, "question_id": 46573550, "link": "https://stackoverflow.com/questions/46573550/atmel-arduino-isrtimer0-ovf-vect-wont-compile-first-defined-in-vector/46624722#46624722", "title": "Atmel / Arduino: ISR(TIMER0_OVF_vect) won&#39;t compile (&quot;first defined&quot; in __vector_16)", "body": "<p>I simply used Timer2 instead of Timer0. Using Timer2, I can still set an overflow AND an output compare interruptions on the same timer, as expected.</p>\n\n<p>This is a rather simple way to workaround this problem, however it might not suit all cases. I may need to rework my code and adapt it to a direct avr-gcc / Atmel Studio compilation process.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 8716917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqW8-2bbBlU/AAAAAAAAAAI/AAAAAAAAABo/Q8XpNgQpGpc/photo.jpg?sz=128", "display_name": "bebenlebricolo", "link": "https://stackoverflow.com/users/8716917/bebenlebricolo"}, "edited": false, "score": 0, "creation_date": 1518717740, "post_id": 48779546, "comment_id": 84630700, "body": "Thanks a lot for the reply. Since the days I asked this, I dove into AtmelStudio and the magic of optimizations and simulations. Now it&#39;s all clearer to me. I will certainly use your trick for arduino-only programs, that could help alot and save a bunch of time / effort (redesigning a program to use Timer1 instead of Timer0 might be a pain)."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "reply_to_user": {"reputation": 43, "user_id": 8716917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqW8-2bbBlU/AAAAAAAAAAI/AAAAAAAAABo/Q8XpNgQpGpc/photo.jpg?sz=128", "display_name": "bebenlebricolo", "link": "https://stackoverflow.com/users/8716917/bebenlebricolo"}, "edited": false, "score": 0, "creation_date": 1518725525, "post_id": 48779546, "comment_id": 84634788, "body": "@bebenlebricolo: I found an unintrusive way to do this (so other Arduino projects are not affected by the change in file <code>wiring.c</code>). I have updated my answer. (I ran into the same problem as you when writing software for an accurate 8 MHz frequency counter (no external components required). I had to use Timer0 and Timer1, taking advantage to those two hardware counters, using Timer0 for the input signal. Timer2 was used for a test signal of 1.14285714286 MHz.)"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "reply_to_user": {"reputation": 43, "user_id": 8716917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqW8-2bbBlU/AAAAAAAAAAI/AAAAAAAAABo/Q8XpNgQpGpc/photo.jpg?sz=128", "display_name": "bebenlebricolo", "link": "https://stackoverflow.com/users/8716917/bebenlebricolo"}, "edited": false, "score": 0, "creation_date": 1518729649, "post_id": 48779546, "comment_id": 84636827, "body": "@bebenlebricolo: Whoa! I just discovered that <a href=\"https://learn.adafruit.com/arduino-tips-tricks-and-techniques/arduino-uno-faq\" rel=\"nofollow noreferrer\">the Arduino Uno uses a ceramic resonator</a> (+/-0.5%), not a crystal oscillator (there is a crystal oscillator on the PCB, but that is for the USB chip). I have had bad experiences with ceramic resonators at work (used by a third-party supplier). The final version of the frequency counter will be for a bare ATmega328 chip, with a crystal oscillator (and maybe later a DCF77 based frequency reference)."}], "tags": [], "owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "is_accepted": true, "score": 4, "last_activity_date": 1579009067, "last_edit_date": 1579009067, "creation_date": 1518581524, "answer_id": 48779546, "question_id": 46573550, "link": "https://stackoverflow.com/questions/46573550/atmel-arduino-isrtimer0-ovf-vect-wont-compile-first-defined-in-vector/48779546#48779546", "title": "Atmel / Arduino: ISR(TIMER0_OVF_vect) won&#39;t compile (&quot;first defined&quot; in __vector_16)", "body": "<p>It <em>is</em> possible to provide your own handler for Timer0 and still use the Arduino environment.</p>\n\n<p>This is done by (optionally) disabling the existing handler for Timer0 in file <code>wiring.c</code> (inside the Arduino installation). Put in conditional compilation, <code>#ifndef</code> / <code>#endif</code>, around the existing handler:</p>\n\n<pre><code>#ifndef _DISABLE_ARDUINO_TIMER0_INTERRUPT_HANDLER_\n\n    #if defined(__AVR_ATtiny24__) || defined(__AVR_ATtiny44__) || defined(__AVR_ATtiny84__)\n    ISR(TIM0_OVF_vect)\n    #else\n    ISR(TIMER0_OVF_vect)\n    #endif\n    {\n        // Copy these to local variables so they can be stored in registers\n        // (volatile variables must be read from memory on every access)\n        unsigned long m = timer0_millis;\n        unsigned char f = timer0_fract;\n\n        m += MILLIS_INC;\n        f += FRACT_INC;\n        if (f &gt;= FRACT_MAX) {\n            f -= FRACT_MAX;\n            m += 1;\n        }\n\n        timer0_fract = f;\n        timer0_millis = m;\n        timer0_overflow_count++;\n    }\n\n#endif\n</code></pre>\n\n<p>For example, on Windows, file <code>wiring.c</code> may be located in folder <code>C:\\Program Files (x86)\\Arduino\\hardware\\arduino\\avr\\cores\\arduino</code>.</p>\n\n<p>Note that it may be necessary to have administrative privileges to make changes to <code>wiring.c</code>. On Windows this is done by right clicking on the text editor (a text editor, like <a href=\"https://en.wikipedia.org/wiki/Notepad%2B%2B\" rel=\"nofollow noreferrer\">Notepad++</a> or <a href=\"https://en.wikipedia.org/wiki/UltraEdit\" rel=\"nofollow noreferrer\">UltraEdit</a><sup>[1]</sup>, that can handle the Unix end-of-line characters - Notepad can not really handle this) and selecting <em>\"Run as Adminstrator\"</em>.</p>\n\n<p>Then, in your source code put these two lines at the top of the file:</p>\n\n<pre><code>#define _DISABLE_ARDUINO_TIMER0_INTERRUPT_HANDLER_\n\n#include &lt;wiring.c&gt;\n</code></pre>\n\n<p>Note that for other Arduino projects it works exactly as before. The interrupt handler is only disabled if preprocessor symbol <code>_DISABLE_ARDUINO_TIMER0_INTERRUPT_HANDLER_</code> is defined.</p>\n\n<p>The same procedure may have to be applied to <code>TIMER0_COMPA_vect</code> as well (file <code>Tone.cpp</code> in the same folder).</p>\n\n<p>This was tested with an Arduino Uno equivalent, Arduino IDE 1.8.5, text editor <a href=\"http://en.wikipedia.org/wiki/UltraEdit\" rel=\"nofollow noreferrer\">UltraEdit</a>, and Windows&nbsp;10.</p>\n\n<p><sub>1. I would also expect <a href=\"https://en.wikipedia.org/wiki/Visual_Studio_Code\" rel=\"nofollow noreferrer\">Visual Studio Code</a> to work, but I haven't tested it.</sub></p>\n"}], "owner": {"reputation": 43, "user_id": 8716917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqW8-2bbBlU/AAAAAAAAAAI/AAAAAAAAABo/Q8XpNgQpGpc/photo.jpg?sz=128", "display_name": "bebenlebricolo", "link": "https://stackoverflow.com/users/8716917/bebenlebricolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4676, "favorite_count": 0, "accepted_answer_id": 48779546, "answer_count": 3, "score": 1, "last_activity_date": 1599213800, "creation_date": 1507148592, "last_edit_date": 1518577948, "question_id": 46573550, "link": "https://stackoverflow.com/questions/46573550/atmel-arduino-isrtimer0-ovf-vect-wont-compile-first-defined-in-vector", "title": "Atmel / Arduino: ISR(TIMER0_OVF_vect) won&#39;t compile (&quot;first defined&quot; in __vector_16)", "body": "<p>I'm currently working on a PWM modulator to \"simulate\" a car engine ignition commutation. Then, I will use it to drive another microcontroller which handles the conversion from a raw signal (engine's commutator) to a clean output voltage, going through the RPM-counter's galvanometer.</p>\n\n<p>This project is also a pretext for me to learn how to have a better control upon my microcontroller.</p>\n\n<p>Well, I wrote a small program, using timer0 (8 bits), and I need to trigger two interrupt service routines (ISRs):</p>\n\n<ul>\n<li>TIMER0_OVF_vect: overflow interruption</li>\n<li>TIMER0_COMPA_vect: fires on compare</li>\n</ul>\n\n<p>I have the following functions:</p>\n\n<pre><code>void configureTimer0(parameters)\n{\n    cli();\n\n    // Some maths\n    TCCR0A = (1&lt;&lt;WGM01) | (1&lt;&lt;WGM00); // I tried to use the \"Fast PWM\" waveform generation mode\n    TCCR0B &amp;= 0b00110000; // 5th and 4th bits are reserved. Every other bits is set to 0.\n    TCNT0 = 0; // Initialize counter value to 0\n\n    TCCR0B |= select_prescaler(prescaler); // Custom function to determine the right prescaler\n    OCR0A = ext_OnTicks; // Output compare register is set to a predetermined numbers of ticks\n\n    // Enabling overflows interrupt:\n    TIMSK0 |= (1 &lt;&lt; TOIE0);\n    sei(); // Enable interrupts\n}\n</code></pre>\n\n<p>Then, under certain conditions, I switch the OCIE0 bit in TIMSK0 on and off depending on the situation.\nHowever, the overflow interruption is always enabled.</p>\n\n<p>When I try to compile, I end up with these errors:</p>\n\n<pre><code>\"C:\\Users\\UTILIS~1\\AppData\\Local\\Temp\\arduino_build_8383\\sketch\\PWM_modulator.ino.cpp.o\" \"C:\\Users\\UTILIS~1\\AppData\\Local\\Temp\\arduino_build_8383/..\\arduino_cache_395570\\core\\core_arduino_avr_uno_a94ab6aaf61dfb93b4a8079c694a14c2.a\" \"-LC:\\Users\\UTILIS~1\\AppData\\Local\\Temp\\arduino_build_8383\" -lm\nwiring.c.o (symbol from plugin): In function `__vector_16':\n\n(.text+0x0): multiple definition of `__vector_16'\n\nC:\\Users\\UTILIS~1\\AppData\\Local\\Temp\\arduino_build_8383\\sketch\\PWM_modulator.ino.cpp.o (symbol from plugin):(.text+0x0): first defined here\n\ncollect2.exe: error: ld returned 1 exit status\n\nexit status 1\nErreur de compilation pour la carte Arduino/Genuino Uno // Compilation error for Uno board (French)\n</code></pre>\n\n<p>I tried to compile with ISR(TIMER0_COMPB_vect) instead of ISR(TIMER0_OVF_vect), and it works, but indeed it's not the point of my program.</p>\n\n<p>I also tried ISR(TIMER2_OVF_vect) which is an 8-bit timer as well. I could synchronize Timer0 and Timer2 to achieve the desired effect, however I don't think it is quite clean to do so (and it prevents me to use the Timer2 capabilities).</p>\n\n<p>There is something wrong in my code, but cannot understand where the mistake is hiding.\nThere is definitely something related to the wiring.c.o file.</p>\n\n<p>PS: I've looked for a solution quite a long time since the problem appears, but I could not find any way to ask Google correctly neither the Stack Overflow site.\nApologies if I missed the right search string!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1507147456, "post_id": 46573257, "comment_id": 80100162, "body": "Do not write such code! never! Your should be careful with operator precedence, andpleaseusewhitespacestoseparatelogicallywhatshouldnotbetog&zwnj;&#8203;ether."}, {"owner": {"reputation": 3, "user_id": 8722524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/902207b1104513ab3aa387753557b2bc?s=128&d=identicon&r=PG&f=1", "display_name": "mellow", "link": "https://stackoverflow.com/users/8722524/mellow"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1507147766, "post_id": 46573257, "comment_id": 80100333, "body": "what would you suggest then?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1507147842, "post_id": 46573257, "comment_id": 80100375, "body": "@mellow I can suggest to use Python instead of C.:)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1507147946, "post_id": 46573257, "comment_id": 80100427, "body": "@mellow The function has undefined behavior provided that the array indeed has 720 elements. And it is a bad idea to use magic numbers like 720."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1507147975, "post_id": 46573257, "comment_id": 80100433, "body": "Clearly define what the function is intended to do.  For example you say it should return an index, but you are returning <code>count</code> which is entirely different.  Comparing floating-point values for equality is problematic - the the values in the arrays are calculated in any way, nominally equal values may not be exactly equal in the binary representation."}, {"owner": {"reputation": 3, "user_id": 8722524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/902207b1104513ab3aa387753557b2bc?s=128&d=identicon&r=PG&f=1", "display_name": "mellow", "link": "https://stackoverflow.com/users/8722524/mellow"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1507147992, "post_id": 46573257, "comment_id": 80100444, "body": "@VladfromMoscow it has to be in C :("}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1507148058, "post_id": 46573257, "comment_id": 80100475, "body": "The value of an equality-test operation (operator <code>==</code>) is either 1 or 0, depending on whether the operands are, in fact, equal.  Thus, chaining <code>==</code> operations as you are doing does not have the effect you hoped it would."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507148060, "post_id": 46573257, "comment_id": 80100477, "body": "Floating point values are not comparing very well. What if they are different by 0.0000000001? Is it still considered equal?"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1507151240, "last_edit_date": 1507151240, "creation_date": 1507148063, "answer_id": 46573424, "question_id": 46573257, "link": "https://stackoverflow.com/questions/46573257/equality-operation-to-check-if-four-values-in-an-array-are-equal-the-values-hav/46573424#46573424", "title": "Equality operation to check if four values in an array are equal, the values have to be after one another", "body": "<blockquote>\n  <p>Equality operation to check if four values in an array are equal</p>\n</blockquote>\n\n<p>OP's code finds the equality of array[k] to the next one.  Then  finds the equality of array[k+2] and its next one.  Lastly these two equalities, both with a 0 or 1 value, are compared.  <a href=\"https://stackoverflow.com/questions/46573257/equality-operation-to-check-if-four-values-in-an-array-are-equal-the-values-hav/46573424#comment80100475_46573257\">@John Bollinger</a></p>\n\n<pre><code>1,1,1,1 is true\n1,1,2,2 is true\n1,2,3,4 is true\n</code></pre>\n\n<p>This is not \"check if four values in an array are equal\".</p>\n\n<hr>\n\n<p>Check if the 1st equals the 2nd, and if so, then if the 1st equals the 3rd, etc.  Avoid naked magic numbers.  <code>O(size + n)</code></p>\n\n<pre><code>#define ARRAY_N 720\n#define MATCH_N 4\n\nint function(double array1[]){\n  int k=0, count = 0;\n\n  for(k=0; k&lt;ARRAY_N-(MATCH_N-1); k++){\n    double base = array1[k];\n    int i;\n    for (i = 1; i &lt; MATCH_N; i++) {\n      if (base != array1[k+i])) {\n        break;\n      }\n    }\n    if (i == MATCH_N) count++;\n  }\n  return count;\n}\n</code></pre>\n\n<hr>\n\n<p>Better to pass in the array size and match length too.</p>\n\n<pre><code>unsigned consecutive_match(const double array1[], size_t size, size_t n){\n  unsigned count = 0;\n  if (size &gt;= n) {\n    ...\n</code></pre>\n\n<hr>\n\n<p>A more advanced version would take advantage of consecutive matches.  <code>O(size)</code> </p>\n\n<pre><code>size_t consecutive_match(const double array1[], size_t size, size_t n) {\n  // Pathological cases\n  if (n &lt;= 1 || size == 0) {\n    if (n &gt; 0) return size;\n    return 0;\n  }\n\n  size_t count = 0;\n  size_t match_length = 1;\n  for (size_t k = 1; k &lt; size; k++) {\n    if (array1[k - 1] == array1[k]) {\n      match_length++;\n      if (match_length == n) {\n        match_length--;\n        count++;\n      }\n    } else {\n      match_length = 1;\n    }\n  }\n  return count;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1507149426, "last_edit_date": 1507149426, "creation_date": 1507148268, "answer_id": 46573470, "question_id": 46573257, "link": "https://stackoverflow.com/questions/46573257/equality-operation-to-check-if-four-values-in-an-array-are-equal-the-values-hav/46573470#46573470", "title": "Equality operation to check if four values in an array are equal, the values have to be after one another", "body": "<p>First of all, you need to give your code some structure, this is an example</p>\n\n<pre><code>int compare(const int *const array, size_t k, size_t size)\n{\n    for (int j = k + 1; ((j &lt; k + 4) &amp;&amp; (j &lt; size)); ++j) {\n        // If a signle value is not equal to\n        // `array[k]' we immediately return\n        // false. \n        if (array[k] != array[j]) {\n            return 0;\n        }\n    }\n    return 1;    \n}\n\nint function(const int *const array, size_t size)\n{\n    int count = 0;\n    for (int k = 1; k &lt; size; k++) {\n        // If array[k - 1] == 0, then it doesn't matter if the following\n        // three values are equal to it, so we skip this one\n        if (array[k - 1] == 0) {\n            continue;\n        }\n\n        // Check that all the following three values are equal to\n        // `array[k - 1]'\n        if (compare(array, k - 1, size) != 0) {\n            count += 1;\n        }\n    }\n    // Now this could be the expected value\n    return count;\n}\n</code></pre>\n\n<p>Also, note some changes I've made</p>\n\n<ol>\n<li><p>I changed <code>double</code> to <code>int</code>, because if anything it doesn't make sense to compare <code>double</code> values for equality because of floating point precision.</p></li>\n<li><p>I now, check if all 3 values following the value of interest are equal in a different function, that makes the code clear and anyone who reads it understands what it's doing.</p></li>\n<li><p>I changed <code>int array[]</code> to <code>int *array</code> because if anything <code>int array[]</code> is simply confusing if you are not a <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> expert, and if you are you know that no matter the syntax, <code>array</code> is a pointer.</p></li>\n<li><p>Added 2 <code>const</code> qualifiers,</p>\n\n<ol>\n<li><p>The first one, because we can ensure that these functions wont modify the array and you should.</p></li>\n<li><p>The second one, because we don't want to accidentally reassing the pointer inside the function, nor accidentally increment it or alter it.</p></li>\n</ol></li>\n<li><p>Added the array size as a parameter so that the function is reusable, a very important feature of functions.</p></li>\n<li><p>Added comments to explain what the code does. Note that the purpose of these comments is not only to \"<em>eplxain what the code does</em>\" because that's clear from the code itself, it's precisely because this way you can see if there is consistency between what you thought the code would do and what it <em>actually</em> does.</p></li>\n</ol>\n\n<p>And if you want a slightly nicer version, this one would work too</p>\n\n<pre><code>int compare(const int *const array, size_t size, size_t width)\n{\n    for (const int *next = array + 1; next &lt; array + width; ++next) {\n        // If a signle value is not equal to\n        // `array[0]' we immediately return\n        // false. \n        if (array[0] != next[0]) {\n            return 0;\n        }\n    }\n    return 1;    \n}\n\nint function(const int *const array, size_t size, size_t width)\n{\n    int count = 0;\n    for (int k = 1; k &lt; size; k++) {\n        // If array[k - 1] == 0, then it doesn't matter if the \n        // following three values are equal to it, so we skip this\n        // one\n        if (array[k - 1] == 0) {\n            continue;\n        }    \n        // Check that all the following three values are equal to\n        // `array[k - 1]'\n        if (compare(&amp;array[k - 1], size, width) != 0) {\n            count += 1;\n        }\n    }\n    return count;\n}\n</code></pre>\n\n<p>It doesn't improve much over the previous one, but it makes one more parameter adjustable, so the function is more generic and hence, it's more \"<em>reusable</em>\".</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 0, "last_activity_date": 1507153344, "last_edit_date": 1507153344, "creation_date": 1507152521, "answer_id": 46574497, "question_id": 46573257, "link": "https://stackoverflow.com/questions/46573257/equality-operation-to-check-if-four-values-in-an-array-are-equal-the-values-hav/46574497#46574497", "title": "Equality operation to check if four values in an array are equal, the values have to be after one another", "body": "<p>You have flawed and over complicated logic.  To determine that four consecutive values are equal and not equal to zero:</p>\n\n<pre><code>    double a = array1[k] ;\n    double b = array1[k + 1] ;\n    double c = array1[k + 2] ;\n    double d = array1[k + 3] ;\n\n    if( a != 0 &amp;&amp;\n        a == b &amp;&amp;\n        a == c &amp;&amp;\n        a == d )\n    {\n        ...\n    }\n</code></pre>\n\n<p>However for testing consecutive equality the following is more efficient and allows easier extension of the consecutive count:</p>\n\n<pre><code>double previous = array1[0] ;\nfor( k = 1, count = 0; count &lt; MIN_CONSECUTIVE &amp;&amp; k &lt; ARRAY1_LEN; k++ )\n{    \n    next = array1[k] ;\n    if( next != 0 &amp;&amp; previous == next )\n    {\n        count++ ;\n    }\n}\n\nreturn count == MIN_CONSECUTIVE ? k : -1 ;\n</code></pre>\n\n<p>However comparing floating-point values for exact equality is problematic, better:</p>\n\n<pre><code>if( fabs(next) &lt; MIN_EQUALITY &amp;&amp; \n    fabs(previous - next) &lt; MIN_EQUALITY )\n</code></pre>\n\n<p>or in the first case:</p>\n\n<pre><code>    if( fabs(a) &lt; MIN_EQUALITY &amp;&amp;\n        fabs(a - b) &lt;  MIN_EQUALITY &amp;&amp;\n        fabs(a - c) &lt;  MIN_EQUALITY &amp;&amp;\n        fabs(a - d) &lt;  MIN_EQUALITY )\n    {\n        ...\n    }\n</code></pre>\n\n<p>Where <code>MIN_EQUALITY</code> is some small value of acceptable error or difference.  For example if say equal to 6 decimal places is sufficient then <code>MIN_EQUALITY == 0.000001</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 8722524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/902207b1104513ab3aa387753557b2bc?s=128&d=identicon&r=PG&f=1", "display_name": "mellow", "link": "https://stackoverflow.com/users/8722524/mellow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 46574497, "answer_count": 3, "score": -2, "last_activity_date": 1507153344, "creation_date": 1507147354, "last_edit_date": 1507148304, "question_id": 46573257, "link": "https://stackoverflow.com/questions/46573257/equality-operation-to-check-if-four-values-in-an-array-are-equal-the-values-hav", "title": "Equality operation to check if four values in an array are equal, the values have to be after one another", "body": "<p>This function should return the k at which the first value is equal to the next etc.\nThe function is currently giving me 0 as the output.</p>\n\n<pre><code>int function(double array1[])\n{\n    int k = 0, count = 0;\n\n    for( k = 0; k &lt; 720; k++ )\n    {\n        if( ( (array1[k]   != 0) &amp;&amp; \n              (array1[k+1] != 0)) &amp;&amp; \n            ( (array1[k+2] != 0) &amp;&amp; \n              (array1[k+3] != 0) ) )\n        {\n            if( ( (array1[k]) == \n                  (array1[k+1]) ) == \n                ( (array1[k+2]) ==\n                  (array1[k+3]) ) )\n            {\n                count++ ;\n            }\n        }\n    }\n\n    return count;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "llvm", "jit"], "comments": [{"owner": {"reputation": 923, "user_id": 1624527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822d8f4a0ba51b493d49188b59b97692?s=128&d=identicon&r=PG", "display_name": "rkapl", "link": "https://stackoverflow.com/users/1624527/rkapl"}, "edited": false, "score": 1, "creation_date": 1507147118, "post_id": 46573148, "comment_id": 80100002, "body": "What exactly are you trying to acomplish? From what you wrote, <code>dlopen</code> would be enough, but you probably mean something different."}, {"owner": {"reputation": 7698, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1507147317, "post_id": 46573148, "comment_id": 80100080, "body": "You can&#39;t load and link <code>.obj</code> files dynamically. That&#39;s what <i>shared libraries</i> (<code>.dll</code>&#39;s) are for."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1507148437, "post_id": 46573148, "comment_id": 80100627, "body": "Which language, C or C++?  They are different.  Some compilers use <i>name mangling</i> to support C++ overloading of functions.  The C compiler doesn&#39;t do this.  Your shared library interface needs to know whether or not to use name mangling."}, {"owner": {"reputation": 41, "user_id": 7520330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IZ7Id.png?s=128&g=1", "display_name": "Jaberwocky", "link": "https://stackoverflow.com/users/7520330/jaberwocky"}, "edited": false, "score": 0, "creation_date": 1507148991, "post_id": 46573148, "comment_id": 80100883, "body": "I don&#39;t want to use shared libraries.  I want to JIT an object file and resolve the references to the functions at runtime. With LLVM it&#39;s like this:  You compile (don&#39;t link) you .cpp file to the bytecode of LLVM. Then you load this object file at runtime. The JIT will extract all Segments and call a function for undefined references like when you use printf. Now you have the chance to give the JIT an address for the function and in the end you have a working function. With the LLVM it is working, but it&#39;s huge. So I&#39;m searching for alternatives"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1548190014, "post_id": 46573148, "comment_id": 95452268, "body": "Probably <a href=\"https://gcc.gnu.org/wiki/JIT\" rel=\"nofollow noreferrer\">GCC JIT</a>  doing something like this."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1548190136, "post_id": 46573148, "comment_id": 95452313, "body": "On Windows you will need MinGW64 from <a href=\"https://www.msys2.org/\" rel=\"nofollow noreferrer\">MSYS2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 9195343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebfd026a90f970bcd28725f932153e8d?s=128&d=identicon&r=PG&f=1", "display_name": "Hilton Fernandes", "link": "https://stackoverflow.com/users/9195343/hilton-fernandes"}, "is_accepted": false, "score": 0, "last_activity_date": 1548186950, "creation_date": 1548186950, "answer_id": 54315545, "question_id": 46573148, "link": "https://stackoverflow.com/questions/46573148/load-and-link-obj-files-at-runtime-in-c-c-jit/54315545#54315545", "title": "Load and link obj files at Runtime in C/C++ (JIT)", "body": "<p>I suppose that an analogy that can be taken as a 1st approach is that the <code>.bc</code> is similar to an <code>.o</code> (or <code>.obj</code>) file in that it is just the translation of C++ code to an intermediate language, and tht it can contain references to functions not defined in it, to be searched in libraries. </p>\n\n<p>And that the JIT-ted code is similar to a DLL, in the sense that it will be linked dynamically to the executable where it will run in. </p>\n\n<p>You need not to compile LLVM -- you can download the binaries for LLVM and assorted utilities (like <code>clang</code>) from <a href=\"http://releases.llvm.org/\" rel=\"nofollow noreferrer\">LLVM Download Page</a></p>\n"}], "owner": {"reputation": 41, "user_id": 7520330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IZ7Id.png?s=128&g=1", "display_name": "Jaberwocky", "link": "https://stackoverflow.com/users/7520330/jaberwocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 844, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548186950, "creation_date": 1507146968, "question_id": 46573148, "link": "https://stackoverflow.com/questions/46573148/load-and-link-obj-files-at-runtime-in-c-c-jit", "title": "Load and link obj files at Runtime in C/C++ (JIT)", "body": "<p>I'm searching for a C or C++ library which can load and link obj files (doesn't matter if ELF or obj) dynamicly at runtime. I spend some time searching for such library, but my results weren't successful.</p>\n\n<p>What I tried:</p>\n\n<p><strong>LLVM</strong>:\nCurrently my best solution! I used Clang to generate .obj files in the bytecode format of LLVM and used its JIT functions to dynamic load and execute the function. But, the LLVM is huge and my PC at home hasn't the power to compile the complete LLVM just for the JIT. Also I encountered some problems with relocation overflows or not implemented relocation types.</p>\n\n<p><strong>libjit</strong>:\nI read, that it can load .elf files and link them too. But sadly, I couldn't compile it for windows, so I couldn't try.</p>\n\n<p><strong>Nanojit and NativeJit</strong>:\nIt seems like they don't support JITting an object file.</p>\n\n<p>So... What can I do? Do I have to stick around with the LLVM? Are there any alternatives?</p>\n"}, {"tags": ["c", "linux", "sockets", "tcp", "linux-kernel"], "comments": [{"owner": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "edited": false, "score": 1, "creation_date": 1507146906, "post_id": 46573001, "comment_id": 80099904, "body": "The module will just send data ? -- The example you point out is an example of a server. If you need to send data, you must check the example of a client."}, {"owner": {"reputation": 446, "user_id": 5673058, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/0f2272ce2edb5a5387b7ac15bf3ee1c8?s=128&d=identicon&r=PG&f=1", "display_name": "djkah11", "link": "https://stackoverflow.com/users/5673058/djkah11"}, "reply_to_user": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "edited": false, "score": 0, "creation_date": 1507147132, "post_id": 46573001, "comment_id": 80100008, "body": "Yes, I need a module that only sends data.  Actual code for the client is difficult to find, I think that is possible to modify server&#39;s code."}, {"owner": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "edited": false, "score": 1, "creation_date": 1507147203, "post_id": 46573001, "comment_id": 80100035, "body": "Checking the <a href=\"https://github.com/abysamross/simple-linux-kernel-tcp-client-server/blob/master/network_client.c\" rel=\"nofollow noreferrer\">client example</a> in the same project, if you reuse some functions, you must understand and modify the <code>tcp_client_connect</code>  function (lines 124-198) only. You can reuse the <code>sock_create</code> function to create the connection socket, the <code>tcp_client_send</code> to send data and the <code>tcp_client_receive</code> to receive a response."}, {"owner": {"reputation": 446, "user_id": 5673058, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/0f2272ce2edb5a5387b7ac15bf3ee1c8?s=128&d=identicon&r=PG&f=1", "display_name": "djkah11", "link": "https://stackoverflow.com/users/5673058/djkah11"}, "reply_to_user": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "edited": false, "score": 0, "creation_date": 1507147463, "post_id": 46573001, "comment_id": 80100166, "body": "I tried to do some similar actions, but is but did not succeed. What I should to do? 1) call sock_create() 2)call tcp_client_send()?"}, {"owner": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "edited": false, "score": 0, "creation_date": 1507147616, "post_id": 46573001, "comment_id": 80100240, "body": "What problems did you have ? -- That example is for a kernel module. Try to modify the client module only to send the data you want. If it compiles, you can loaded into your running system. You may check the module messages and errors in the kernel log (checking dmesg). If you have problems, you may send another question showing part of the code and the error messages."}, {"owner": {"reputation": 446, "user_id": 5673058, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/0f2272ce2edb5a5387b7ac15bf3ee1c8?s=128&d=identicon&r=PG&f=1", "display_name": "djkah11", "link": "https://stackoverflow.com/users/5673058/djkah11"}, "reply_to_user": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "edited": false, "score": 0, "creation_date": 1507147792, "post_id": 46573001, "comment_id": 80100348, "body": "Okay, so I&#39;ll do it."}, {"owner": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "reply_to_user": {"reputation": 446, "user_id": 5673058, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/0f2272ce2edb5a5387b7ac15bf3ee1c8?s=128&d=identicon&r=PG&f=1", "display_name": "djkah11", "link": "https://stackoverflow.com/users/5673058/djkah11"}, "edited": false, "score": 0, "creation_date": 1507149024, "post_id": 46573001, "comment_id": 80100902, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/155968/discussion-between-jaime-and-djkah11\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2812, "user_id": 4433204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb3fbdb23ce46c68705323ecbb1d7f8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime", "link": "https://stackoverflow.com/users/4433204/jaime"}, "is_accepted": false, "score": 5, "last_activity_date": 1507148867, "last_edit_date": 1507148867, "creation_date": 1507148476, "answer_id": 46573524, "question_id": 46573001, "link": "https://stackoverflow.com/questions/46573001/send-data-from-linux-kernel-module/46573524#46573524", "title": "Send data from linux kernel module", "body": "<p>Check the <a href=\"https://github.com/abysamross/simple-linux-kernel-tcp-client-server/blob/master/network_client.c\" rel=\"noreferrer\">client example</a> in the same project. If you can reuse some functions, you must understand and modify the <code>tcp_client_connect</code> function (lines 124-198) only. In that module, the <code>tcp_client_connect</code> connection creates a connection when the module is loaded, and the <code>network_client_exit</code> closes the connection when the module is unloaded.</p>\n\n<p>In the <code>tcp_client_connect</code> function:</p>\n\n<ol>\n<li><p>(line 144) It creates a socket</p>\n\n<pre><code> struct socket *conn_socket = NULL;\n\n ret = sock_create(PF_INET, SOCK_STREAM, IPPROTO_TCP, &amp;conn_socket);\n</code></pre></li>\n<li><p>Then, (lines 153 to 155 ) it creates a destination address</p>\n\n<pre><code> struct sockaddr_in saddr;                               /* a socket address */\n\n saddr.sin_family = AF_INET;                             /* for internet */\n saddr.sin_port = htons(PORT);                           /* using the port PORT */\n saddr.sin_addr.s_addr = htonl(create_address(destip));  /* and address destip */\n</code></pre></li>\n<li><p>(line 157) It uses that address to open the socket (to create the connection)</p>\n\n<pre><code> int ret = -1;\n\n ret = conn_socket-&gt;ops-&gt;connect(conn_socket, (struct sockaddr *)&amp;saddr\\\n                , sizeof(saddr), O_RDWR);     \n\n /* if it gets a response and it is not \"in progress\" */\n if(ret &amp;&amp; (ret != -EINPROGRESS))\n {\n     /* error creating the socket*/\n }\n</code></pre></li>\n<li><p>(lines 166 to 168) It sends a message using the socket.</p>\n\n<pre><code>int len = 49;\nchar reply[len+1];\n\nmemset(&amp;reply, 0, len+1);   /* sets 0s into all the string space */\nstrcat(reply, \"HOLA\");      /* sets the message */\n\ntcp_client_send(conn_socket, reply, strlen(reply), MSG_DONTWAIT);\n</code></pre></li>\n<li><p>(line 170) It waits for a message (for while)</p>\n\n<pre><code>DECLARE_WAIT_QUEUE_HEAD(recv_wait);\n\n/* wait for a response or for a timetout */\nwait_event_timeout(recv_wait,\\\n                !skb_queue_empty(&amp;conn_socket-&gt;sk-&gt;sk_receive_queue),\\\n                                                                5*HZ);\n</code></pre></li>\n<li><p>(lines 180 to 190) It obtains the response.</p>\n\n<pre><code>int len = 49;\nchar response[len+1];\n\n/* if something has arrived */\nif(!skb_queue_empty(&amp;conn_socket-&gt;sk-&gt;sk_receive_queue))\n{\n    memset(&amp;response, 0, len+1);\n    tcp_client_receive(conn_socket, response, MSG_DONTWAIT);\n}\n</code></pre></li>\n</ol>\n\n<p>In the <code>network_client_exit</code> function, </p>\n\n<ol start=\"7\">\n<li><p>(lines 239 to 240) it closes the connection.</p>\n\n<pre><code>/* if the socket has been created */\nif(conn_socket != NULL)\n{\n        /* relase the socket */\n        sock_release(conn_socket);\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 446, "user_id": 5673058, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/0f2272ce2edb5a5387b7ac15bf3ee1c8?s=128&d=identicon&r=PG&f=1", "display_name": "djkah11", "link": "https://stackoverflow.com/users/5673058/djkah11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2201, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507148867, "creation_date": 1507146406, "last_edit_date": 1592644375, "question_id": 46573001, "link": "https://stackoverflow.com/questions/46573001/send-data-from-linux-kernel-module", "title": "Send data from linux kernel module", "body": "<p>I want to send some data via tcp from my linux kernel module.\nI have tried to use some code from  <a href=\"http://www.avrfreaks.net/sites/default/files/tcp-server-send-recv.\" rel=\"nofollow noreferrer\">http://www.avrfreaks.net/sites/default/files/tcp-server-send-recv.c</a> , but there are too old code(it used old linux kernel api).\nAlso, I have tried to understand <a href=\"https://github.com/abysamross/simple-linux-kernel-tcp-client-server/blob/master/network_server.c\" rel=\"nofollow noreferrer\">https://github.com/abysamross/simple-linux-kernel-tcp-client-server/blob/master/network_server.c</a> , but it is too sophisticated for me:)</p>\n<p>I want only send some small data to specified ip adress via tcp. How I can do it?</p>\n"}, {"tags": ["python", "c", "clang", "cpython"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507145420, "post_id": 46572701, "comment_id": 80099113, "body": "You&#39;re talking about compiling the CPython interpreter itself, not a program written in the Python language, right?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507145470, "post_id": 46572701, "comment_id": 80099148, "body": "fixed. Also there&#39;s no C++ in <b>C</b>Python"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507145524, "post_id": 46572701, "comment_id": 80099172, "body": "see the <code>configure.log</code> or similar file, it should list whatever commands it tried to run!"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 4, "creation_date": 1507145556, "post_id": 46572701, "comment_id": 80099187, "body": "The error message you got indicates that your installation of Clang/LLVM is not working correctly.  There may be useful information hiding somewhere in <code>config.log</code>.  Look for &quot;C compiler cannot create executables&quot; in that file and edit maybe 20 lines above and below that point into the question, please."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507145644, "post_id": 46572701, "comment_id": 80099234, "body": "Also, the clang compiler is pretty much used to build the CPython on <i>Mac</i> at least..."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 3, "creation_date": 1507145689, "post_id": 46572701, "comment_id": 80099262, "body": "(I&#39;m not aware of any reason why CPython <i>couldn&#39;t</i> be compiled with clang - it&#39;s not like the Linux kernel, which uses a bunch of GCC extensions to C that Clang refuses to adopt.)"}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1580124634, "post_id": 46572701, "comment_id": 105982422, "body": "@zwol the <a href=\"https://devguide.python.org/setup/#unix\" rel=\"nofollow noreferrer\">docs</a> specifically state that: <i>&quot;The core CPython interpreter only needs a C compiler to be built...&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 12509897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7777f7dd5d593f631a3d9110f06006c2?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora Lanes", "link": "https://stackoverflow.com/users/12509897/aurora-lanes"}, "edited": false, "score": 0, "creation_date": 1580371867, "post_id": 59930148, "comment_id": 106077464, "body": "This option was the only solution that has worked on my Debian system."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1595215121, "post_id": 59930148, "comment_id": 111386727, "body": "Aliases aren&#39;t inherited by subprocesses. <code>configure</code> has no way of knowing this alias even exists. This cannot possibly work."}], "tags": [], "owner": {"reputation": 37, "user_id": 12509897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7777f7dd5d593f631a3d9110f06006c2?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora Lanes", "link": "https://stackoverflow.com/users/12509897/aurora-lanes"}, "is_accepted": false, "score": -2, "last_activity_date": 1580371899, "last_edit_date": 1580371899, "creation_date": 1580124181, "answer_id": 59930148, "question_id": 46572701, "link": "https://stackoverflow.com/questions/46572701/can-cpython-be-compiled-with-clang/59930148#59930148", "title": "Can CPython be compiled with Clang?", "body": "<blockquote>\n  <p>tried setting env variable CC to my clang executable location</p>\n</blockquote>\n\n<p>On Linux, define an alias in Bash as follows:\n<code>alias cc=\"clang\"</code></p>\n\n<p>On my system I set it as <code>alias cc=\"clang-11\"</code></p>\n\n<p>Also, be sure to have installed all clang and llvm packages on the system.</p>\n"}, {"tags": [], "owner": {"reputation": 10607, "user_id": 5666087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0eeb62bd4c02b40a8751ab3368368d02?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/5666087/jakub"}, "is_accepted": true, "score": 1, "last_activity_date": 1595215334, "last_edit_date": 1595215334, "creation_date": 1595214851, "answer_id": 62988120, "question_id": 46572701, "link": "https://stackoverflow.com/questions/46572701/can-cpython-be-compiled-with-clang/62988120#62988120", "title": "Can CPython be compiled with Clang?", "body": "<p>As the commenters on OP's post pointed out, you can compile cpython with clang. Here are reproducible instructions, in the form of a Dockerfile.</p>\n<pre><code>FROM ubuntu:16.04\nWORKDIR /opt/cpython-2.7.14\nRUN apt-get update -qq \\\n    &amp;&amp; apt-get install --yes build-essential curl \\\n    # Install clang\n    &amp;&amp; curl -fsSL https://releases.llvm.org/5.0.0/clang+llvm-5.0.0-linux-x86_64-ubuntu16.04.tar.xz \\\n    | tar xJ -C /usr/local --strip-components 1 \\\n    &amp;&amp; curl -fsSL https://www.python.org/ftp/python/2.7.14/Python-2.7.14.tgz \\\n    | tar xz --strip-components 1 \\\n    &amp;&amp; CC=/usr/local/bin/clang ./configure --prefix /usr/local/cpython-2.7.14 \\\n    &amp;&amp; make \\\n    &amp;&amp; make install\nENTRYPOINT [&quot;/usr/local/cpython-2.7.14/bin/python&quot;]\n</code></pre>\n<pre><code>docker build --tag cpython:2.7 .\ndocker run --rm cpython:2.7 --version\n# Python 2.7.14\n</code></pre>\n<p>It is difficult to say what OP's original issue was, because it seemed like a problem with the clang installation. Looking at the configure logs would provide more information.</p>\n<p><strong>Disclaimer</strong>: Python 2 has reached its end of life, and ubuntu 16.04 reaches its end of life in April 2021.</p>\n"}], "owner": {"reputation": 313, "user_id": 4003194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8cd8caef3039f3f2c2e8899bb0debd?s=128&d=identicon&r=PG&f=1", "display_name": "juniel_katarn", "link": "https://stackoverflow.com/users/4003194/juniel-katarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 0, "accepted_answer_id": 62988120, "answer_count": 2, "score": 3, "last_activity_date": 1595215334, "creation_date": 1507145235, "last_edit_date": 1507145628, "question_id": 46572701, "link": "https://stackoverflow.com/questions/46572701/can-cpython-be-compiled-with-clang", "title": "Can CPython be compiled with Clang?", "body": "<p>I'm trying to build CPython using Clang, with very specific requirements:</p>\n\n<ul>\n<li><a href=\"https://www.python.org/ftp/python/2.7.14/Python-2.7.14.tgz\" rel=\"nofollow noreferrer\">Python 2.7.14</a></li>\n<li>CentOS 6.9 (but settling for Ubuntu 16.04), x64</li>\n<li><a href=\"http://releases.llvm.org/download.html#5.0.0\" rel=\"nofollow noreferrer\">LLVM 5.0.0</a></li>\n</ul>\n\n<p>I tried setting env variable <code>CC</code> to my clang executable location (i.e. <code>/opt/llvm/5/bin/clang</code>, but the <code>./configure</code> command fails with the following:\n<br/><code>configure: error: C compiler cannot create executables</code></p>\n\n<p>What flags should I set to make this build work?</p>\n"}, {"tags": ["c", "memory", "segmentation-fault"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1507143534, "post_id": 46572238, "comment_id": 80098107, "body": "Have you stepped through the code in a debugger?  That is the 1st thing to do."}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 1, "creation_date": 1507143546, "post_id": 46572238, "comment_id": 80098115, "body": "Could you expand your sample code into a <a href=\"https://stackoverflow.com/help/mcve\">complete program</a> that we can copy and paste, compile, and run?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1507143677, "post_id": 46572238, "comment_id": 80098204, "body": "It&#39;s confusing that you&#39;re using <code>i</code> as the iteration variable in the outer loop and the loop to print the first 5 elements."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507143729, "post_id": 46572238, "comment_id": 80098234, "body": "<a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">You need to use a debugger / some debugging techniques for this</a>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1507143861, "post_id": 46572238, "comment_id": 80098297, "body": "Why do you multiply <code>pow(10, -20)</code> by <code>1.0</code>? That has no effect."}, {"owner": {"reputation": 2374, "user_id": 8491726, "user_type": "registered", "profile_image": "https://graph.facebook.com/1550562035006492/picture?type=large", "display_name": "Artemy Vysotsky", "link": "https://stackoverflow.com/users/8491726/artemy-vysotsky"}, "edited": false, "score": 0, "creation_date": 1507143877, "post_id": 46572238, "comment_id": 80098302, "body": "What will this do <code>aux_arr = 0;</code>?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1507144065, "post_id": 46572238, "comment_id": 80098408, "body": "Of topic: <code>j1 -= -1;</code> seems a bit strange. Why not <code>j1 += 1;</code> or just <code>++j1;</code>"}, {"owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "edited": false, "score": 0, "creation_date": 1507144163, "post_id": 46572238, "comment_id": 80098456, "body": "Yeah, there are a few weird quirks about this code (some of which are my fault). I was adapting it from an old and poorly explained journal article, so I need to fix some stuff."}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1507143948, "post_id": 46572329, "comment_id": 80098346, "body": "Well spotted :-) Maybe <code>aux_arr[j] = 0</code> was intended"}, {"owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "edited": false, "score": 0, "creation_date": 1507144068, "post_id": 46572329, "comment_id": 80098410, "body": "Indeed it was supposed to be <code>aux_arr[j] = 0</code>. Very simple and yet I just couldn&#39;t see it."}], "tags": [], "owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "is_accepted": true, "score": 2, "last_activity_date": 1507143766, "creation_date": 1507143766, "answer_id": 46572329, "question_id": 46572238, "link": "https://stackoverflow.com/questions/46572238/unexpected-segmentation-fault-working-with-small-numbers-in-an-algorithm/46572329#46572329", "title": "Unexpected segmentation fault working with small numbers in an algorithm", "body": "<pre><code>aux_arr = 0;\n</code></pre>\n\n<p>That's your culprit. You are setting <code>aux_array</code> to be the null pointer, and the next access is hence invalid.</p>\n"}], "owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1507147813, "accepted_answer_id": 46572329, "answer_count": 1, "score": -1, "last_activity_date": 1507143766, "creation_date": 1507143387, "question_id": 46572238, "link": "https://stackoverflow.com/questions/46572238/unexpected-segmentation-fault-working-with-small-numbers-in-an-algorithm", "closed_reason": "Not suitable for this site", "title": "Unexpected segmentation fault working with small numbers in an algorithm", "body": "<p>I'm working with a statistical algorithm and keep getting a segmentation fault, and  I just can't see it. I'm pretty sure I've calloc'd the memory correctly. I'm wondering if maybe it has something to do with underflowing, as I only get the fault after a few iterations of the loop. Code is below, along with my <code>printf</code>'s for debugging. Sorry if the syntax is a bit confusing here, I'm following along from a journal publication.</p>\n\n<pre><code>// *** n and m defined previously\nfloat *aux_arr = calloc(n, sizeof(float));\nif (aux_arr == NULL) {\n    printf(\"calloc failed\");\n}\n\nint j;\nint j0 = 1;\nint j1 = 1;\naux_arr[1] = 1;\n\nfor (size_t i = 0; i &lt; n - 1; i++) {\n    printf(\"\\nOUTER\\n\");\n    j1 += 1;\n    printf(\"i: %zu\\n\", i);\n    printf(\"j1: %i\\n\", j1);\n\n    for (j = j1; j &gt;= j0; j--) {\n        printf(\"\\nINNER\\n\");\n        printf(\"j: %i\\n\", j);\n        printf(\"j1: %i\\n\", j1);\n        printf(\"j0: %i\\n\", j0);\n\n        // print first 5 elements of my aux_arr\n        for (int i = 0; i &lt; 5; i++) {\n            printf(\"%f\\n\", aux_arr[i]);\n        }\n\n        aux_arr[j] = (j/m) * (aux_arr[j]) + (1 + (1/m) - (j/m)) * (aux_arr[j - 1]);\n\n\n        if (aux_arr[j] &lt; (1.0 * pow(10, -20))) {\n            aux_arr = 0;\n            if (j == j1) {\n                j1 -= -1;\n            }\n            if (j == j0) {\n                j0 += 1;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Outputs the following: </p>\n\n<pre><code>OUTER\ni: 0\nj1: 2\n\nINNER\nj: 2\nj1: 2\nj0: 1\n0.000000\n1.000000\n0.000000\n0.000000\n0.000000\n\nINNER\nj: 1\nj1: 2\nj0: 1\n0.000000\n1.000000\n1.000000\n0.000000\n0.000000\n\nOUTER\ni: 1\nj1: 3\n\nINNER\nj: 3\nj1: 3\nj0: 2\nSegmentation fault: 11\n</code></pre>\n\n<p>You can see that the problem comes when I try to access my <code>aux_arr</code> for the third time. I'm not sure why it works fine the first two times though. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "linux", "architecture", "swig"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1507143888, "post_id": 46572142, "comment_id": 80098314, "body": "Your <code>gcc</code> is not <code>gcc</code>!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507144235, "post_id": 46572142, "comment_id": 80098496, "body": "It looks like you need to link in at least one external library -- probably libtcl.  Try adding the option <code>-ltcl</code> to the end of your compilation command."}], "owner": {"user_type": "does_not_exist", "display_name": "user8714269"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507143061, "creation_date": 1507143061, "question_id": 46572142, "link": "https://stackoverflow.com/questions/46572142/tcl-module-symbols-not-found-for-architecture-x86-64", "title": "Tcl module: symbol(s) not found for architecture x86_64", "body": "<p>I am running the test tcl module from the Swig tutorial site: <a href=\"http://www.swig.org/tutorial.html\" rel=\"nofollow noreferrer\">http://www.swig.org/tutorial.html</a>. </p>\n\n<p>However, when I enter: <code>gcc -shared example.o example_wrap.o -o example.so</code> into the command line, it returns: </p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_TclFreeObj\", referenced from:\n      __wrap_My_variable_get in example_wrap.o\n      __wrap_My_variable_set in example_wrap.o\n    .\n    . \n    .\n\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Any suggestions on what the issue may be? </p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1507141632, "post_id": 46571743, "comment_id": 80097052, "body": "Pretty expected, if you ask me.. There is space after <code>4</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507141715, "post_id": 46571743, "comment_id": 80097099, "body": "Input <code>123456789</code> instead of <code>1234 5678 9</code>. Since the space works as a delimiter"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8605708"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507141728, "post_id": 46571743, "comment_id": 80097111, "body": "@EugeneSh. Yes, but <code>%3d %3d %3d</code> is supposed to neglect whitespace characters, isn&#39;t it? That&#39;s what I read in my textbook. My question is why it doesn&#39;t neglect the spaces, even though it is supposed to."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1507141811, "post_id": 46571743, "comment_id": 80097173, "body": "It&#39;s called <i>maximum field width</i>, not <i>minimum</i> !!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507141829, "post_id": 46571743, "comment_id": 80097181, "body": "@Blue can you quote the book?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1507141979, "post_id": 46571743, "comment_id": 80097252, "body": "&quot;three <i>consecutive</i> non-whitespace characters&quot;, yes. <code>4 56</code> isn&#39;t consecutive."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8605708"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1507142088, "post_id": 46571743, "comment_id": 80097322, "body": "@SouravGhosh &quot;The consecutive nonwhitespace characters that define a data item collectively define a field. It is possible to limit the number of such characters by specifying a maximum filed width for that data item. To do so an unsigned integer indicating field width is placed within the control string, between the percent sign and convertion character.&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8605708"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1507142150, "post_id": 46571743, "comment_id": 80097358, "body": "@melpomene Oh, I think I get it now. Thanks!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507142493, "post_id": 46571743, "comment_id": 80097562, "body": "&quot;Yes, but %3d %3d %3d is supposed to neglect whitespace characters, isn&#39;t it?&quot; -- no, not exactly.  The spaces between field directives match any number of whitespace characters, including zero, <i>between fields</i>, and <code>%d</code> directives ignore <i>leading</i> whitespace.  Each field still ends at whitespace if it does not end earlier for some other reason."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507142835, "post_id": 46571743, "comment_id": 80097766, "body": "<code>3</code> means: &quot;consume <b>at most</b> 3 characters here&quot;, i.e. <b>maximum field width.</b>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8605708"}, "edited": false, "score": 0, "creation_date": 1507142863, "post_id": 46571743, "comment_id": 80097776, "body": "I don&#39;t understand the reason for the downvote..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8605708"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507142896, "post_id": 46571743, "comment_id": 80097792, "body": "@JohnBollinger Yes, gotcha!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8605708"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507142928, "post_id": 46571743, "comment_id": 80097813, "body": "@AnttiHaapala Right. Sourav pointed that out. Thanks anyway. :)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507142934, "post_id": 46571743, "comment_id": 80097816, "body": "Did you check the manual for <code>scanf</code> yet? You&#39;re asking us to read the manuals for you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8605708"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507142999, "post_id": 46571743, "comment_id": 80097848, "body": "@AnttiHaapala Yes, I did. The manual wasn&#39;t very clearly written (or, it was not clear enough for <i>me</i>). So I had to ask here. You can see that I can even quoted my textbook (Byron S Gottfried, 2nd edition)."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507143097, "post_id": 46571743, "comment_id": 80097890, "body": "Then you should quote the parts of that manual that you read, too. That way this would be useful to other people that are wondering about the same section in the manual."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507146531, "post_id": 46571967, "comment_id": 80099727, "body": "Detail, the width does not include leading whitespace characters.  <code>sscanf(&quot;\\t\\t\\t1234&quot;, &quot;%3d&quot;, &amp;a);</code> will  set <code>x == 123</code>"}], "tags": [], "owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "is_accepted": true, "score": 1, "last_activity_date": 1507142411, "creation_date": 1507142411, "answer_id": 46571967, "question_id": 46571743, "link": "https://stackoverflow.com/questions/46571743/unexpected-output-while-using-3d-maximum-field-width-specifier-in-scanf/46571967#46571967", "title": "Unexpected output while using %3d (maximum field width specifier in scanf())", "body": "<p>As @SouravGosh points out %<em>n</em>d where n is an number format specifies the maximum number of characters to be read as part of this field.</p>\n\n<p>So you enter \"1234\u2423567\u24238\", a consumes 123; b consumes 4 and stops because of the \u2423; and then c consumes 567.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8605708"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 46571967, "answer_count": 1, "score": 0, "last_activity_date": 1507142809, "creation_date": 1507141577, "last_edit_date": 1507142809, "question_id": 46571743, "link": "https://stackoverflow.com/questions/46571743/unexpected-output-while-using-3d-maximum-field-width-specifier-in-scanf", "title": "Unexpected output while using %3d (maximum field width specifier in scanf())", "body": "<p><strong>Source Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nmain()\n{\n    int a,b,c;\n    printf(\"Enter: \");\n    scanf(\"%3d %3d %3d\",&amp;a,&amp;b,&amp;c);\n    printf(\"%d\",b);\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Enter: 1234 5678 9\n4\n--------------------------------\nProcess exited after 7.322 seconds with return value 1\nPress any key to continue . . .\n</code></pre>\n\n<p>When I use <code>scanf(\"%3d %3d %3d\",&amp;a,&amp;b,&amp;c);</code> here why does b get the value 4 and not 456? </p>\n\n<p>Using <code>%3d %3d %3d</code> should extract (thrice) three consecutive non-whitespace characters and place them in the variables <code>a</code>, <code>b</code> and <code>c</code> respectively, isn't it ? </p>\n"}, {"tags": ["c", "ffmpeg"], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 5054122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a10a5d141e75421adec197350963be93?s=128&d=identicon&r=PG", "display_name": "Tasos Stamadianos", "link": "https://stackoverflow.com/users/5054122/tasos-stamadianos"}, "edited": false, "score": 0, "creation_date": 1507141462, "post_id": 46571628, "comment_id": 80096968, "body": "&quot;There may very well be a function in libav* to do this for you.&quot;  I believe this is what <code>av_packet_rescale_ts</code> does, since the <code>pts</code> and <code>dts</code> values differ before and after calling <code>av_packet_rescale_ts</code>. <code>ffprobe</code> still reports the video is 1000fps though."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 1, "last_activity_date": 1507141178, "creation_date": 1507141178, "answer_id": 46571628, "question_id": 46571544, "link": "https://stackoverflow.com/questions/46571544/incorrect-fps-when-muxing-vp9-encoded-data-into-webm/46571628#46571628", "title": "Incorrect FPS when muxing VP9-encoded data into .webm", "body": "<p>It's not entirely clear what you're asking but I'll try to provide some useful info.</p>\n\n<p>What time bases are supported is a property of the format and/or codec you're using. If the format only supports 1/1000, that's what you have to use.</p>\n\n<p>A time base of 1/1000 does not mean your video has to be 1000 fps. It means the timestamps you feed in need to be in units of 1/1000 of a second (i.e. milliseconds).</p>\n\n<p>Simply compute millisecond timestamps for your 15fps frames before feeding them in. This computation should be as simple as:</p>\n\n<pre><code>timestamp = frame_number * 1000 / 15;\n</code></pre>\n\n<p>There may very well be a function in libav* to do this for you.</p>\n"}, {"tags": [], "owner": {"reputation": 104, "user_id": 5054122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a10a5d141e75421adec197350963be93?s=128&d=identicon&r=PG", "display_name": "Tasos Stamadianos", "link": "https://stackoverflow.com/users/5054122/tasos-stamadianos"}, "is_accepted": true, "score": 1, "last_activity_date": 1507232014, "creation_date": 1507232014, "answer_id": 46593500, "question_id": 46571544, "link": "https://stackoverflow.com/questions/46571544/incorrect-fps-when-muxing-vp9-encoded-data-into-webm/46593500#46593500", "title": "Incorrect FPS when muxing VP9-encoded data into .webm", "body": "<p>So as it turns out, the outputted video file from my application was in fact valid. As per the answer by R.., the <code>1/1000</code> figure was required and enforced by the WebM muxer, and was not something I should be changing. Instead, I had to manually set the frame rate of my <code>AVCodecContext</code> and the average frame rate of my <code>AVStream</code>. This wrote the necessary information in the WebM header and allowed my video to be played back in the test player.</p>\n\n<pre><code>encoder-&gt;outputStream-&gt;time_base = encoder-&gt;encodingContext-&gt;time_base;\n\n// Manually set the frame rate on the codec context\nencoder-&gt;encodingContext-&gt;framerate = av_inv_q(encoder-&gt;encodingContext-&gt;time_base);\n\n//Manually set the frame rate of the stream\nencoder-&gt;outputStream-&gt;avg_frame_rate = encoder-&gt;encodingContext-&gt;framerate;\n</code></pre>\n"}], "owner": {"reputation": 104, "user_id": 5054122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a10a5d141e75421adec197350963be93?s=128&d=identicon&r=PG", "display_name": "Tasos Stamadianos", "link": "https://stackoverflow.com/users/5054122/tasos-stamadianos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 1, "accepted_answer_id": 46593500, "answer_count": 2, "score": 1, "last_activity_date": 1507232014, "creation_date": 1507140867, "last_edit_date": 1507141411, "question_id": 46571544, "link": "https://stackoverflow.com/questions/46571544/incorrect-fps-when-muxing-vp9-encoded-data-into-webm", "title": "Incorrect FPS when muxing VP9-encoded data into .webm", "body": "<p>I'm trying to mux some video data to a WebM file using FFmpeg. I specify a <code>time_base</code> through an <code>AVDictionary</code> (detailed below), but it appears that my specified <code>time_base</code> values are ignored by the muxer. Instead, it always uses a <code>time_base</code> of <code>1/1000</code>, and therefore an FPS of <code>1000</code>. My initialization code is below:</p>\n\n<pre><code>HRESULT WINAPI InitializeVideoEncoding(Encoder* encoder,\n    LPCSTR codec, LPCSTR outputContainer, LPCSTR* options, UINT optCount)\n{\n    // Fill the options\n    Log(\"Loading options.\");\n    for (UINT i = 0; i &lt; optCount; ++i)\n    {\n        int opt = i * 2;\n        const char* key = options[opt];\n        const char* value = options[opt + 1];\n        Log(\"Adding option %s: %s\", key, value);\n        if (av_dict_set(&amp;encoder-&gt;options, key, value, 0) &lt; 0)\n        {\n            Log(\"Failed to add item to dictionary: %s %s\", key, value);\n        }\n    }\n\n    // Make sure the encoder options aren't null when they should have\n    // been filled.\n    if (!encoder-&gt;options &amp;&amp; optCount &gt; 0)\n    {\n        Log(\"Failed to initialize encoder options.\");\n        return E_FAIL;\n    }\n\n    // Grab the buffer size early and remove it from the dict so we don't\n    // get complaints from FFmpeg\n    {\n        const char* frameBufKey = \"frame_buf_size\";\n        encoder-&gt;ioBufSize = 131072;\n        AVDictionaryEntry* e = av_dict_get(encoder-&gt;options,\n                                            frameBufKey,\n                                            NULL, 0);\n        if (e)\n        {\n            // Set the value and remove from the list.\n            encoder-&gt;ioBufSize = strtol(e-&gt;value, NULL, 10);\n            av_dict_set(&amp;encoder-&gt;options, frameBufKey, NULL, 0);\n        }\n    }\n\n    // Create the output context\n    avformat_alloc_output_context2(&amp;encoder-&gt;outputFormatContext, NULL, outputContainer, NULL);\n    if (!encoder-&gt;outputFormatContext)\n    {\n        Log(\"Couldn't create output format context.\");\n        return E_FAIL;\n    }\n    encoder-&gt;outputFormat = encoder-&gt;outputFormatContext-&gt;oformat;\n\n    // Create the output stream\n    encoder-&gt;outputStream = avformat_new_stream(encoder-&gt;outputFormatContext, NULL);\n    if (!encoder-&gt;outputStream)\n    {\n        Log(\"Couldn't create output stream.\");\n        return E_FAIL;\n    }\n    encoder-&gt;outputStream-&gt;id = encoder-&gt;outputFormatContext-&gt;nb_streams - 1;\n\n    // Find the codec\n    encoder-&gt;codec = avcodec_find_encoder_by_name(codec);\n    if (!encoder-&gt;codec)\n    {\n        Log(\"Couldn't find encoder.\");\n        return E_FAIL;\n    }\n\n    // Create the encoding context\n    encoder-&gt;encodingContext = avcodec_alloc_context3(encoder-&gt;codec);\n    if (!encoder-&gt;encodingContext)\n    {\n        Log(\"Couldn't create encoding context.\");\n        return E_FAIL;\n    }\n\n    // Set the basics\n    encoder-&gt;encodingContext-&gt;width = encoder-&gt;width;\n    encoder-&gt;encodingContext-&gt;height = encoder-&gt;height;\n\n    // Open the codec\n    int result = avcodec_open2(encoder-&gt;encodingContext, encoder-&gt;codec, &amp;encoder-&gt;options);\n    if (result &lt; 0)\n    {\n        LogFFmpegError(result, \"Couldn't open codec.\");\n        return E_FAIL;\n    }\n\n    if (av_dict_count(encoder-&gt;options) &gt; 0)\n    {\n        // Dump the fields we didn't fill\n        char* dictEntryBuf;\n        av_dict_get_string(encoder-&gt;options, &amp;dictEntryBuf, ':', ',');\n\n        Log(\"The following provided options were unused:\\n%s\", dictEntryBuf);\n\n        av_freep(&amp;dictEntryBuf);\n    }\n\n    // Set some params afterwards\n    encoder-&gt;outputStream-&gt;time_base = encoder-&gt;encodingContext-&gt;time_base;\n\n    if (encoder-&gt;outputFormat-&gt;flags &amp; AVFMT_GLOBALHEADER)\n        encoder-&gt;encodingContext-&gt;flags |= AV_CODEC_FLAG_GLOBAL_HEADER;\n\n    // Copy necessary information to the stream\n    result = avcodec_parameters_from_context(encoder-&gt;outputStream-&gt;codecpar,\n                                             encoder-&gt;encodingContext);\n\n    if (result &lt; 0)\n    {\n        LogFFmpegError(result, \"Couldn't copy stream parameters.\");\n        return E_FAIL;\n    }\n\n    av_dump_format(encoder-&gt;outputFormatContext, 0, NULL, 1);\n\n    // Initialize IO callbacks\n    encoder-&gt;ioBuf = (LPBYTE)av_malloc(encoder-&gt;ioBufSize);\n    Log(\"Encoder IO buffer size: %d\", encoder-&gt;ioBufSize);\n\n    AVIOContext* ioContext = avio_alloc_context(encoder-&gt;ioBuf,\n                                                (int)encoder-&gt;ioBufSize,\n                                                1,\n                                                encoder,\n                                                NULL,\n                                                WriteStreamCallback,\n                                                NULL);\n    encoder-&gt;outputFormatContext-&gt;pb = ioContext;\n\n    result = avformat_write_header(encoder-&gt;outputFormatContext, NULL);\n    if (result &lt; 0)\n    {\n        LogFFmpegError(result, \"Couldn't write header.\");\n        return E_FAIL;\n    }\n\n    return S_OK;\n}\n</code></pre>\n\n<p>You'll notice the <code>time_base</code> is not manually specified. Instead, I'm using the built-in dictionary functionality so I can control these parameters without having to recompile the program. The values I'm pass in are below:</p>\n\n<pre><code>const char* params[] =\n{\n    \"frame_buf_size\", \"131072\",\n    \"b\", \"2000000\",\n    \"time_base\", \"1:15\",\n    \"pixel_format\", \"yuv420p\",\n    \"speed\", \"6\",\n    \"tile-columns\", \"4\",\n    \"frame-parallel\", \"1\",\n    \"threads\", \"8\",\n    \"static-thresh\", \"0\",\n    \"deadline\", \"realtime\",\n    \"lag-in-frames\", \"0\",\n    \"error-resilient\", \"1\"\n};\n</code></pre>\n\n<p>I did some investigating, and the <code>time_base</code> of my output stream is <code>1/15</code> right up until <code>avformat_write_header</code> is called. It appears that something inside this function call is changing the time base.</p>\n\n<p>Now, I read in the FFmpeg mailing lists that WebM requires a <code>time_base</code> of <code>1/1000</code>, and I believe this is why the WebM avformat_write_header implementation rewrites the value of <code>time_base</code> for the stream. I may be mistaken, but the frame rate is tied to the time-base, and a frame rate of 1000 fps is simply too large for the video player I'm using to test this (specifically, a media extensions player in a web browser).</p>\n\n<p>I'm aware that the timestamp of a packet is important, so below is the code I'm using to give each packet a timestamp:</p>\n\n<pre><code>// somewhere I create a frame\nencoder-&gt;yuvFrame-&gt;pts = encoder-&gt;nextPts++;\n\n// somewhere I actually write to the muxer:\nav_packet_rescale_ts(packet, encoder-&gt;encodingContext-&gt;time_base,\n                    encoder-&gt;outputStream-&gt;time_base);\n</code></pre>\n\n<p>In short, no matter what <code>time_base</code> I specify, it appears the muxer will overwrite it with <code>1/1000</code>. Is this an issue with FFmpeg, or am I missing some initialization steps?</p>\n"}, {"tags": ["c", "assembly", "x86-64", "intel", "intel-pin"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507145140, "post_id": 46571389, "comment_id": 80098969, "body": "This is a re-ask of <a href=\"https://stackoverflow.com/questions/46568487/emulation-of-new-instruction-in-intel-pin\" title=\"emulation of new instruction in intel pin\">stackoverflow.com/questions/46568487/&hellip;</a>.  Either this is a duplicate of that, or vice versa."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507145790, "post_id": 46571389, "comment_id": 80099319, "body": "Does AND decode &quot;wrong&quot; even before the <code>0x17</code> is reached?  How is PIN supposed to know it&#39;s a single-byte instruction, rather than the start of a longer instruction it doesn&#39;t recognize?  Custom decoding also requires instruction-length decoding.  (I haven&#39;t used PIN, so IDK how to do that.)"}, {"owner": {"reputation": 923, "user_id": 1624527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822d8f4a0ba51b493d49188b59b97692?s=128&d=identicon&r=PG", "display_name": "rkapl", "link": "https://stackoverflow.com/users/1624527/rkapl"}, "edited": false, "score": 0, "creation_date": 1507147598, "post_id": 46571389, "comment_id": 80100231, "body": "The pin opcode is not assembly opcode. They are constants from this file: <a href=\"https://software.intel.com/sites/landingpage/xed/ref-manual/html/xed-iclass-enum_8h.html\" rel=\"nofollow noreferrer\">software.intel.com/sites/landingpage/xed/ref-manual/html/&hellip;</a>. There is also invalid opcode, it might work as a trigger for your custom decoding."}, {"owner": {"reputation": 99, "user_id": 8721032, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f1877254df476d5495785d3833a4fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Poduri", "link": "https://stackoverflow.com/users/8721032/rohit-poduri"}, "reply_to_user": {"reputation": 923, "user_id": 1624527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822d8f4a0ba51b493d49188b59b97692?s=128&d=identicon&r=PG", "display_name": "rkapl", "link": "https://stackoverflow.com/users/1624527/rkapl"}, "edited": false, "score": 0, "creation_date": 1507149939, "post_id": 46571389, "comment_id": 80101305, "body": "Thank you very much @rkapl. Now I understand why I was decoding the wrong instruction. Is there any way I can get the correct assembly opcode as I need to detect the 0x17 instruction and then perform some task based on it."}, {"owner": {"reputation": 99, "user_id": 8721032, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f1877254df476d5495785d3833a4fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Poduri", "link": "https://stackoverflow.com/users/8721032/rohit-poduri"}, "reply_to_user": {"reputation": 923, "user_id": 1624527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822d8f4a0ba51b493d49188b59b97692?s=128&d=identicon&r=PG", "display_name": "rkapl", "link": "https://stackoverflow.com/users/1624527/rkapl"}, "edited": false, "score": 0, "creation_date": 1507153408, "post_id": 46571389, "comment_id": 80102836, "body": "@rkapl I tried using using the XED_ICLASS_INVALID enumarator, but my programs fails to recognize this and crashes due to the illegal instruction."}, {"owner": {"reputation": 1701, "user_id": 1132699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f17e6c9aef8844da2d32fa1367ea5f5d?s=128&d=identicon&r=PG", "display_name": "nitzanms", "link": "https://stackoverflow.com/users/1132699/nitzanms"}, "edited": false, "score": 0, "creation_date": 1507227308, "post_id": 46571389, "comment_id": 80137598, "body": "Print all the instruction opcodes as they come, this will be be quicker then guessing."}, {"owner": {"reputation": 99, "user_id": 8721032, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f1877254df476d5495785d3833a4fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Poduri", "link": "https://stackoverflow.com/users/8721032/rohit-poduri"}, "reply_to_user": {"reputation": 1701, "user_id": 1132699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f17e6c9aef8844da2d32fa1367ea5f5d?s=128&d=identicon&r=PG", "display_name": "nitzanms", "link": "https://stackoverflow.com/users/1132699/nitzanms"}, "edited": false, "score": 0, "creation_date": 1507252220, "post_id": 46571389, "comment_id": 80146421, "body": "@nitzanms I can&#39;t do that as the instructions will be executed as they come. For the illegal instruction, I would be modifying it during run time so that the original illegal instruction is not executed and the program can proceed. I want to know of a method to detect the illegal instruction and send it to another anlysis routine, where I will be emulating something else."}, {"owner": {"reputation": 1701, "user_id": 1132699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f17e6c9aef8844da2d32fa1367ea5f5d?s=128&d=identicon&r=PG", "display_name": "nitzanms", "link": "https://stackoverflow.com/users/1132699/nitzanms"}, "edited": false, "score": 0, "creation_date": 1507451353, "post_id": 46571389, "comment_id": 80207857, "body": "What I&#39;m suggesting is that you print information about the instruction to know how the illegal instruction looks like, and then write your pintool to accommodate pin&#39;s behavior."}], "owner": {"reputation": 99, "user_id": 8721032, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f1877254df476d5495785d3833a4fdf2?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Poduri", "link": "https://stackoverflow.com/users/8721032/rohit-poduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1507145677, "creation_date": 1507140344, "last_edit_date": 1507145677, "question_id": 46571389, "link": "https://stackoverflow.com/questions/46571389/detecting-an-illegal-instruction-opcode-on-intel-pin", "title": "Detecting an illegal instruction opcode on Intel PIN", "body": "<p>I am writing a Pin tool where I want to detect an instruction with a particular opcode. I have an executable from a sample C program where I am printing hello world. The architecture used is x86_64 and I have the trace of assembly instructions in the program. I am giving this program's assembly instruction trace to the Intel PIN tool, on which I am running the instruction trace and performing operations.</p>\n\n<p>My goal here is to detect a particular opcode from my original program. For example I have added the following line in my C program-</p>\n\n<pre><code>asm(\".byte 0x17\");   // pop ss in 32-bit mode, but illegal in x86-64\n</code></pre>\n\n<p>Due to this 0x17 is an instruction in my C program trace. In my Intel PIN tool I have an instruction trace like this-</p>\n\n<pre><code>VOID Instruction(INS ins, VOID *v) \n{\n   if(INS_Opcode(ins)==0x17)\n   {\n        //Do something\n   }\n}\n</code></pre>\n\n<p>However when I run my instruction trace, my Pin tool fails due to the illegal instruction 0x17 I have placed.</p>\n\n<p>When I print the instruction opcodes as they come, I see that they have different opcodes from the x86_64 ones. For example the instruction AND has opcode 0x17 when I print. Do I have to do some kind of decoding or I am I detecting the opcodes in the wrong way?</p>\n"}, {"tags": ["c", "arrays", "matrix", "structure"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 4, "creation_date": 1507140117, "post_id": 46571310, "comment_id": 80096212, "body": "Please don&#39;t post links to images of code.  Edit the question , and put code in the question."}, {"owner": {"reputation": 9, "user_id": 3704223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e5078981d3d047fb1b8cbe2108ad8?s=128&d=identicon&r=PG&f=1", "display_name": "user3704223", "link": "https://stackoverflow.com/users/3704223/user3704223"}, "edited": false, "score": 1, "creation_date": 1507140294, "post_id": 46571310, "comment_id": 80096316, "body": "My bad, first time ever posting on StackOverflow"}, {"owner": {"reputation": 18939, "user_id": 2756409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UIrGI.jpg?s=128&g=1", "display_name": "TylerH", "link": "https://stackoverflow.com/users/2756409/tylerh"}, "edited": false, "score": 0, "creation_date": 1507140498, "post_id": 46571310, "comment_id": 80096430, "body": "@user3704223 No worries; what&#39;s most important here is the ability to fix stuff according to feedback! :-) Welcome to Stack Overflow. Check out the <a href=\"https://stackoverflow.com/tour\">Tour</a> if you haven&#39;t yet!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1507140516, "post_id": 46571310, "comment_id": 80096440, "body": "A pointer is not an array. Two pointers are even les an array. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1507140596, "post_id": 46571310, "comment_id": 80096492, "body": "<code>scanf</code> needs a pointer not a value. Is <code>TMatrix</code> a typo for <code>Matrix</code>?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1507140710, "post_id": 46571310, "comment_id": 80096551, "body": "What &quot;array&quot;?  Where is it created?  Since it&#39;s just a pointer to a pointer, there&#39;s no there there."}, {"owner": {"reputation": 9, "user_id": 3704223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e5078981d3d047fb1b8cbe2108ad8?s=128&d=identicon&r=PG&f=1", "display_name": "user3704223", "link": "https://stackoverflow.com/users/3704223/user3704223"}, "edited": false, "score": 0, "creation_date": 1507140712, "post_id": 46571310, "comment_id": 80096553, "body": "I know scanf takes a pointer, but isn&#39;t array an exception since it is already a pointer?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 4, "creation_date": 1507140800, "post_id": 46571310, "comment_id": 80096594, "body": "<i>but isn&#39;t array an exception since it is array a pointer?</i>  An array is <b><i>NOT</i></b> a pointer.  An array is a region of memory.  It <i>has</i> an address, and in some situations using the array in C code <i>decays</i> to that address.  A pointer is a variable that can <i>hold</i> an address.  Again:  an array is not a pointer."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1507141539, "post_id": 46571310, "comment_id": 80097004, "body": "Also, you should pass <code>m</code> as a pointer: <code>int readMatrix(TMatrix* m) ... for(int i=0; i&lt;m-&gt;row; i++) ... if( scanf(&quot;%lg&quot;, &amp;(m-&gt;mat[i][j])) != 1)</code>. I&#39;m a bit curious about how you have actually allocated the memory for that structure."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507141722, "post_id": 46571310, "comment_id": 80097105, "body": "This is not yet a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Yes you can do this, and no you can&#39;t, and this question is a Schr&#246;dinger&#39;s question until the superposition is resolved and you add code that allocates the matrix structure."}, {"owner": {"reputation": 9, "user_id": 3704223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e5078981d3d047fb1b8cbe2108ad8?s=128&d=identicon&r=PG&f=1", "display_name": "user3704223", "link": "https://stackoverflow.com/users/3704223/user3704223"}, "edited": false, "score": 0, "creation_date": 1507142318, "post_id": 46571310, "comment_id": 80097468, "body": "The structure is created outside any functions, which is static I believe, so I think that&#39;s why my instructor did this without passing m as a pointer. So is &amp;(m.mat[I][j]) or &amp;(m-&gt;mat[I][j]) a valid way of putting elements to the array?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1507143367, "post_id": 46571310, "comment_id": 80098030, "body": "Notice: <code>i&lt;m.col</code> -&gt; <code>j&lt;m.col</code>"}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 9, "user_id": 3704223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e5078981d3d047fb1b8cbe2108ad8?s=128&d=identicon&r=PG&f=1", "display_name": "user3704223", "link": "https://stackoverflow.com/users/3704223/user3704223"}, "edited": false, "score": 0, "creation_date": 1507144445, "post_id": 46572030, "comment_id": 80098606, "body": "@user3704223 - your <code>scanf</code>is wrong. You shouldn&#39;t do <code>if (!scanf(....)</code> but rather <code>if (scanf(....) != 1)</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 9, "user_id": 3704223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e5078981d3d047fb1b8cbe2108ad8?s=128&d=identicon&r=PG&f=1", "display_name": "user3704223", "link": "https://stackoverflow.com/users/3704223/user3704223"}, "edited": false, "score": 0, "creation_date": 1507144522, "post_id": 46572030, "comment_id": 80098645, "body": "@user3704223 and instead of <code>scanf(&quot;%lg </code> do <code>scanf(&quot; %lg </code> Notice the space before <code>%lg</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 9, "user_id": 3704223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e5078981d3d047fb1b8cbe2108ad8?s=128&d=identicon&r=PG&f=1", "display_name": "user3704223", "link": "https://stackoverflow.com/users/3704223/user3704223"}, "edited": false, "score": 0, "creation_date": 1507144814, "post_id": 46572030, "comment_id": 80098806, "body": "@user3704223 - I have updated the answer to read from stdin"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507147219, "post_id": 46572030, "comment_id": 80100039, "body": "Although I find <code>m-&gt;mat = malloc(sizeof *(m-&gt;mat) * m-&gt;row);</code> easier to code, review and maintain than this answer line, this is a good reply. Especially for demo-ing with a 2D that does <i>not</i> use the same dimnesions.  2,3 is nicely illustrative."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 1, "last_activity_date": 1507144781, "last_edit_date": 1507144781, "creation_date": 1507142641, "answer_id": 46572030, "question_id": 46571310, "link": "https://stackoverflow.com/questions/46571310/how-to-read-a-matrix-into-a-double-array-that-is-within-a-structure/46572030#46572030", "title": "How to read a matrix into a double** array that is within a structure?", "body": "<p>You can't do it with a 2D array. </p>\n\n<p>However, you can use a 1D array of pointers to 1D arrays of double. Even if it isn't a real 2D array, it can in many ways be used in the same way as a real 2D array.</p>\n\n<p>Something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\u00a0\nstruct Matrix {\n  size_t row;\n  size_t col;\n  double **mat;\n};\ntypedef struct Matrix TMatrix;\n\u00a0\nvoid initMatrix(TMatrix *m, int row, int col) {\n    m-&gt;row = row;\n    m-&gt;col = col;\n    int i;\n    m-&gt;mat = malloc(m-&gt;row * sizeof(double*));  // allocate array of double pointers\n    for (i=0; i&lt;m-&gt;row; ++i)\n    {\n        m-&gt;mat[i] = malloc(m-&gt;col * sizeof(double));  // allocate array of doubles\n    }\n}\n\u00a0\nvoid freeMatrix(TMatrix m) {\n    int i;\n    for (i=0; i&lt;m.row; ++i)\n    {\n        free(m.mat[i]);\n    }\n    free(m.mat);\n}\n\u00a0\nint readMatrix(TMatrix m) {\n    for(int i=0; i&lt;m.row; i++)\n    {\n      for(int j=0; j&lt;m.col; j++)\n      {\n        if(scanf(\" %lg\", &amp;m.mat[i][j]) != 1) return 0;\n      }\n    }\n    return 1;\n}\n\u00a0\n\u00a0\nvoid printMatrix(TMatrix m) {\n    for(int i=0; i&lt;m.row; i++)\n    {\n      for(int j=0; j&lt;m.col; j++)\n      {\n        printf(\"%f \", m.mat[i][j]);\n      }\n      printf(\"\\n\");\n    }\n}\n\u00a0\n\u00a0\n\u00a0\nint main(void) {\n    TMatrix a;\n    initMatrix(&amp;a, 2, 3);\n    if (!readMatrix(a))\n    {\n        printf(\"input error\\n\");\n        return -1;\n    }\n    printMatrix(a);\n    freeMatrix(a);\n\u00a0\n    return 0;\n}\n</code></pre>\n\n<p>stdin </p>\n\n<pre><code>1 2 3 4 5 6\n</code></pre>\n\n<p>stdout </p>\n\n<pre><code>1.000000 2.000000 3.000000 \n4.000000 5.000000 6.000000 \n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3704223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27e5078981d3d047fb1b8cbe2108ad8?s=128&d=identicon&r=PG&f=1", "display_name": "user3704223", "link": "https://stackoverflow.com/users/3704223/user3704223"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1507161494, "accepted_answer_id": 46572030, "answer_count": 1, "score": -3, "last_activity_date": 1507144781, "creation_date": 1507140057, "last_edit_date": 1507140771, "question_id": 46571310, "link": "https://stackoverflow.com/questions/46571310/how-to-read-a-matrix-into-a-double-array-that-is-within-a-structure", "closed_reason": "Not suitable for this site", "title": "How to read a matrix into a double** array that is within a structure?", "body": "<p>I have a structure that has double** mat array inside, which is a pointer to a pointer of double values. Suppose the matrix is called m, can I do m.mat[i][j] to put values into the array?</p>\n\n<pre><code>struct Matrix {\n  size_t row;\n  size_t col;\n  double** mat;\n};\ntypedef struct Matrix TMatrix;\n\nint readMatrix(TMatrix m) {\n    for(int i=0; i&lt;m.row; i++)\n    {\n      for(int j=0; i&lt;m.col; j++)\n      {\n        if(!scanf(\"%lg \", (m.mat[i][j])))\n           return 0;\n      }\n    }\n   return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "bash", "command-line", "arm", "gnu-toolchain"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507139539, "post_id": 46571104, "comment_id": 80095918, "body": "What error are you getting?"}, {"owner": {"reputation": 403, "user_id": 7059087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a2e6de1bd0a56b13c3e24d2329d82d76?s=128&d=identicon&r=PG&f=1", "display_name": "wjmccann", "link": "https://stackoverflow.com/users/7059087/wjmccann"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507139584, "post_id": 46571104, "comment_id": 80095940, "body": "For which command?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507139608, "post_id": 46571104, "comment_id": 80095954, "body": "for every command you are getting it."}, {"owner": {"reputation": 403, "user_id": 7059087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a2e6de1bd0a56b13c3e24d2329d82d76?s=128&d=identicon&r=PG&f=1", "display_name": "wjmccann", "link": "https://stackoverflow.com/users/7059087/wjmccann"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507139732, "post_id": 46571104, "comment_id": 80096010, "body": "<code>D:\\Joe\\College Stuff\\CS 252\\Homework&gt;arm-none-eabi-gcc -o main addDrive.c -T add21.s d:&#47;mentorgraphics&#47;sourcery_codebench_lite_for_arm_eabi&#47;bin&#47;.&zwnj;&#8203;.&#47;lib&#47;gcc&#47;arm-none-e&zwnj;&#8203;abi&#47;4.8.3&#47;..&#47;..&#47;..&#47;.&zwnj;&#8203;.&#47;arm-none-eabi&#47;bin&#47;&zwnj;&#8203;ld.exe:add21.s:1: syntax error collect2.exe: error: ld returned 1 exit status</code>  For the first command  <code>C:\\Users\\Joe\\AppData\\Local\\Temp\\ccw6rCCg.o: In function main&#39;: addDrive.c:(.text+0x2c): undefined reference to add2&#39;</code>   For the second one"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507139875, "post_id": 46571104, "comment_id": 80096071, "body": "<code>-T</code> is for linker script, not for assembly input."}, {"owner": {"reputation": 403, "user_id": 7059087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a2e6de1bd0a56b13c3e24d2329d82d76?s=128&d=identicon&r=PG&f=1", "display_name": "wjmccann", "link": "https://stackoverflow.com/users/7059087/wjmccann"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507140089, "post_id": 46571104, "comment_id": 80096201, "body": "What is the linker script used for? Is that to link the assembly to the C, or link the C to a compiler? Sorry if this is basic, I&#39;ve never ran non python code from a command line before, so its new to me"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1507144788, "post_id": 46571104, "comment_id": 80098790, "body": "if you comment out the add2 or replace it with something in the same file are you able to build a binary yes/no?  and run it?   then simply add the add2.s to your gcc command line along with helloworld.c"}], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 7059087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a2e6de1bd0a56b13c3e24d2329d82d76?s=128&d=identicon&r=PG&f=1", "display_name": "wjmccann", "link": "https://stackoverflow.com/users/7059087/wjmccann"}, "is_accepted": true, "score": 2, "last_activity_date": 1509295696, "creation_date": 1509295696, "answer_id": 47002749, "question_id": 46571104, "link": "https://stackoverflow.com/questions/46571104/using-the-gnu-toolchain-to-run-arm-c-on-windows-command-line/47002749#47002749", "title": "Using the GNU ToolChain to Run ARM/C on Windows Command Line", "body": "<p>In case anyone ever comes across this, the way I eventually got it working was to type these script lines into the Windows command-line:</p>\n\n<pre><code>Step 1: Compile your c-file\narm-none-eabi-gcc -o (object file name 1) -c (c file name)\n\nStep 2: Assemble your ARM file\narm-none-eabi-gcc -o (object file name 2) -c (ARM file name)\n\nStep 3: Link files and create executable\narm-none-eabi-gcc -o (executable file name) (object file name 1) (object \nfile name 2) -T armulator-ram-hosted.ld\n\nStep 4: Run the files\narm-none-eabi-run (executable file name)\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 7059087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a2e6de1bd0a56b13c3e24d2329d82d76?s=128&d=identicon&r=PG&f=1", "display_name": "wjmccann", "link": "https://stackoverflow.com/users/7059087/wjmccann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2525, "favorite_count": 0, "accepted_answer_id": 47002749, "answer_count": 1, "score": 1, "last_activity_date": 1509295746, "creation_date": 1507139339, "last_edit_date": 1509295746, "question_id": 46571104, "link": "https://stackoverflow.com/questions/46571104/using-the-gnu-toolchain-to-run-arm-c-on-windows-command-line", "title": "Using the GNU ToolChain to Run ARM/C on Windows Command Line", "body": "<p>so you might recognize me from the other day when I asked a similar question about running this code in an IDE. Eventually the advice I got was that I should learn to run them together from the command line. As such I took the advice and installed the GNU toolchain from Codesourcery Lite MentorGraphics (not sure if that makes sense). The commands I can do are things like</p>\n\n<pre><code>&gt; arm-none-eabi-gcc -o main main.c -T script\n</code></pre>\n\n<p>However I'm having trouble finding out exactly how I am supposed to use the commands. I tried</p>\n\n<pre><code>&gt; arm-none-eabi-gcc -o main (my c filename).c -T (my ARM filename).s\n</code></pre>\n\n<p>But I get a syntax error from that in the ARM file. I then tried to do</p>\n\n<pre><code>&gt; arm-none-eabi-gcc -o main (my c filename).c\n</code></pre>\n\n<p>But that doesn't work because of the external \"add2\"</p>\n\n<pre><code>&gt; arm-none-eabi-as add2.s\n</code></pre>\n\n<p>That gets me a file \"a.out\" but I don't know what that does.</p>\n\n<p>Here's my code:</p>\n\n<p>ARM</p>\n\n<pre><code>    .global add2\nadd2:\n    stmfd sp!, {v1-v6, lr}  @ 'standard' entry, save registers on the stack\n    add a1, a1, a2          @ do the addition requested\n    ldmfd sp!, {v1-v6, pc}\n</code></pre>\n\n<p>C</p>\n\n<pre><code>#include &lt;stdio.h&gt; /* standard input and output */\n#include &lt;stdlib.h&gt; /* standard library */\nextern int add2(int i, int j); /* tell the compiler that the routine is not defined here */\nint main(int argc, char * argv[]) /* entry point to the program */\n{\n    int i, j; /* declare the variable types */\n    int answer;\n    i = 5; /* give the variables values */\n    j = 20;\n    answer = add2(i, j); /* call the assembly language routine */\n    printf(\"result is : %d\\n\", answer); /* print out the answer */\n    exit(0); /* leave the driver program */\n}\n</code></pre>\n\n<p>Any help would be appreciated. I also installed this toolkit from apt-get from Bash on Ubuntu on Windows, so if you have a BASH solution that could also be possible (<a href=\"https://packages.ubuntu.com/trusty/devel/gcc-arm-none-eabi\" rel=\"nofollow noreferrer\">https://packages.ubuntu.com/trusty/devel/gcc-arm-none-eabi</a>)</p>\n"}, {"tags": ["c", "math", "binary", "twos-complement", "integer-arithmetic"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 3, "creation_date": 1507138876, "post_id": 46570941, "comment_id": 80095594, "body": "Integer arithmetic wraps around zero.  0 - 1 == -1, which is all 1&#39;s."}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 2, "creation_date": 1507139319, "post_id": 46570941, "comment_id": 80095792, "body": "its called two complement binary representation. -1 is all 1s and the largest negative value is a 1 in the most significant bit (the sign bit) and zeros everywhere else. <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Two%27s_complement</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507139443, "post_id": 46570941, "comment_id": 80095861, "body": "The 1 is borrowed from the first <code>1</code> in <code>0</code>... i.e. from infinity..."}, {"owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "edited": false, "score": 0, "creation_date": 1507139457, "post_id": 46570941, "comment_id": 80095871, "body": "do you mean -1 = 0b100000000?"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1507140922, "post_id": 46570941, "comment_id": 80096654, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1125304/why-prefer-twos-complement-over-sign-and-magnitude-for-signed-numbers\">Why prefer two&#39;s complement over sign-and-magnitude for signed numbers?</a>"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1507141847, "post_id": 46570941, "comment_id": 80097194, "body": "No, -1 = 0b11111111,. as you discovered."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1507142900, "post_id": 46570941, "comment_id": 80097793, "body": "carry/borrow flag."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1507376548, "post_id": 46570941, "comment_id": 80190542, "body": "The value of <code>s</code> misses a bit."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507139482, "post_id": 46571122, "comment_id": 80095884, "body": "Ever heard of 1&#39;s complement representation? Sign and magnitude?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507139528, "post_id": 46571122, "comment_id": 80095907, "body": "@AnttiHaapala I added an additional two paragraphs to explain why it makes no difference what form of representation you use. This is a question of the manipulation of <i>values</i> and is independent of how you represent those values."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1507139509, "last_edit_date": 1507139509, "creation_date": 1507139385, "answer_id": 46571122, "question_id": 46570941, "link": "https://stackoverflow.com/questions/46570941/subtracting-1-from-0-in-8-bit-binary/46571122#46571122", "title": "Subtracting 1 from 0 in 8 bit binary", "body": "<p>Zero minus one must give some number such that if you add one to it, you get zero. The only number you can add one to and get zero is the one represented in binary as all 1's. So that's what you get.</p>\n\n<p>So long as you use any valid form of arithmetic, you get the same results. If there are eight cars and someone takes away three cars, the value you get for how many case are left should be five, regardless of whether you do the math with binary, decimal, or any other kind of representation.</p>\n\n<p>So any valid system of representation that supports the operations you are using with their normal meanings must produce the same result. When you take the representation for zero and perform the subtraction operation using the representation for one, you must get the representation such that when you add one to it, you get the representation for zero. Otherwise, the result is just wrong based on the definitions of addition, subtraction, zero, one, and so on.</p>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 5, "last_activity_date": 1516645512, "last_edit_date": 1516645512, "creation_date": 1507139760, "answer_id": 46571220, "question_id": 46570941, "link": "https://stackoverflow.com/questions/46570941/subtracting-1-from-0-in-8-bit-binary/46571220#46571220", "title": "Subtracting 1 from 0 in 8 bit binary", "body": "<p>This is a great question and has to do with how computers represent integer values.</p>\n\n<p>If you\u2019re writing out a negative number in base ten, you just write out the regular number and then prefix it with a minus sign. But if you\u2019re working inside a computer where everything needs to either be a zero or a one, you don\u2019t have any minus signs. The question then comes up of how you then choose to represent negative values.</p>\n\n<p>One popular way of doing this is to use <em>signed two\u2019s complement form</em>. The way this works is that you write the number using ones and zeros, except that the meaning of those ones and zeros differs from \u201cstandard\u201d binary in how they\u2019re interpreted. Specifically, if you have a signed 8-bit number, the lower seven bits have their standard meaning as 2<sup>0</sup>, 2<sup>1</sup>, 2<sup>2</sup>, etc. However, the meaning of the most significant bit is changed: instead of representing 2<sup>7</sup>, it represents the value <strong>-2<sup>7</sup></strong>.</p>\n\n<p>So let\u2019s look at the number 0b11111111. This would be interpreted as</p>\n\n<blockquote>\n  <p>-2<sup>7</sup> + 2<sup>6</sup> + 2<sup>5</sup> + 2<sup>4</sup> + 2<sup>3</sup> + 2<sup>2</sup> + 2<sup>1</sup> + 2<sup>0</sup></p>\n  \n  <p>= -128 + 64 + 32 + 16 + 8 + 4 + 2 + 1</p>\n  \n  <p>= -1</p>\n</blockquote>\n\n<p>which is why this collection of bits represents -1.</p>\n\n<p>There\u2019s another way to interpret what\u2019s going on here. Given that our integer only has eight bits to work with, we know that there\u2019s no way to represent all possible integers. If you pick any 257 integer values, given that there are only 256 possible bit patterns, there\u2019s no way to uniquely represent all these numbers.</p>\n\n<p>To address this, we could alternatively say that we\u2019re going to have our integer values represent not the true value of the integer, but the value of that integer modulo 256. All of the values we\u2019ll store will be between 0 and 255, inclusive.</p>\n\n<p>In that case, what is 0 - 1? It\u2019s -1, but if we take that value mod 256 and force it to be nonnegative, then we get back that -1 = 255 (mod 256). And how would you write 255 in binary? It\u2019s 0b11111111.</p>\n\n<p>There\u2019s a ton of other cool stuff to learn here if you\u2019re interested, so I\u2019d recommend reading up on signed and unsigned two\u2019s-complement numbers.</p>\n\n<p>As some exercises: what would -4 look like in this format? How about -9?</p>\n\n<p>These aren't the only ways you can represent numbers in a computer, but they're probably the most popular. Some older computers used the <a href=\"https://en.wikipedia.org/wiki/Balanced_ternary\" rel=\"nofollow noreferrer\">balanced ternary number system</a> (notably the <a href=\"https://en.wikipedia.org/wiki/Setun\" rel=\"nofollow noreferrer\">Setun</a> machine). There's also the <a href=\"https://en.wikipedia.org/wiki/Ones%27_complement\" rel=\"nofollow noreferrer\">one's complement format</a>, which isn't super popular these days.</p>\n"}], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2771, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1516645512, "creation_date": 1507138722, "last_edit_date": 1507140800, "question_id": 46570941, "link": "https://stackoverflow.com/questions/46570941/subtracting-1-from-0-in-8-bit-binary", "title": "Subtracting 1 from 0 in 8 bit binary", "body": "<p>I have 8 bit <code>int zero = 0b00000000;</code> and 8 bit <code>int one = 0b00000001;</code>\naccording to binary arithmetic rule,</p>\n\n<blockquote>\n  <p>0 - 1 = 1 (borrow 1 from next significant bit).</p>\n</blockquote>\n\n<p>So if I have:</p>\n\n<pre><code>int s = zero - one; \ns = -1; \n-1 = 0b1111111;\n</code></pre>\n\n<p>where all those <code>1</code>s are coming from? There are nothing to borrow since all bits are <code>0</code> in <code>zero</code> variable.</p>\n"}, {"tags": ["c", "while-loop", "standards", "break"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1507138040, "post_id": 46570735, "comment_id": 80095123, "body": "It should complain about how inconsistent the code is."}, {"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 0, "creation_date": 1507138052, "post_id": 46570735, "comment_id": 80095127, "body": "Please give us a complete working example and indent properly your code"}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 2927392, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d13c6d1107c7409f9e2df6a16694036d?s=128&d=identicon&r=PG&f=1", "display_name": "user2927392", "link": "https://stackoverflow.com/users/2927392/user2927392"}, "edited": false, "score": 0, "creation_date": 1507197770, "post_id": 46570781, "comment_id": 80118538, "body": "do                     {                     if ((nvStruct[len] == BYTETYPE))                                                  {                         arr[len] = nvStruct[len];                          }                     else                         {                          arr[len]     = nvStruct[len + 1];                         arr[len + 1] = nvStruct[len];                         len          = len + 2;                         }                      }                 while ((len &lt; totalLen) &amp;&amp; !(nvStruct[len] == BYTETYPE));"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1507140221, "last_edit_date": 1507140221, "creation_date": 1507138090, "answer_id": 46570781, "question_id": 46570735, "link": "https://stackoverflow.com/questions/46570735/exiting-from-a-loop/46570781#46570781", "title": "Exiting from a loop", "body": "<p>Because your loop has a condition and a break if another condition is satisfied, the <em>inner</em> <code>while</code> loop.</p>\n\n<pre><code>while (len &lt; totalLen)\n{\n    if ((*(structAddr + len) == CASE0)) // It is complaining here\n    {\n        arr[len] = *(structAddr+len);\n        break;\n    }\n    arr[len] = *(structAddr + len + 1);\n    arr[len + 1] = *(structAddr + len);\n    len = len + 2;\n}\n</code></pre>\n\n<p>The code above exits the loop,</p>\n\n<ol>\n<li>If <code>len &lt; totalLen</code></li>\n<li>If <code>structAddr[len] == CASE0</code></li>\n</ol>\n\n<p>youd should write it in a way that there is only one stop condition, or evaluate both conditions in a single place, like</p>\n\n<pre><code>do {\n    if ((*(structAddr + len) == CASE0))\n    {\n        arr[len] = *(structAddr + len);\n        // I don't know if it will naturally stop here\n        // but certainly, the algorithm is too dark to see\n        // that's why this is discouraged.\n    } else {\n        arr[len] = *(structAddr + len + 1);\n    }\n    arr[len + 1] = *(structAddr + len);\n    len = len + 2;\n} while (len &lt; totalLen);\n</code></pre>\n\n<p>I still don't know if this is correct because your code looks bad, and don't use things like <code>*(structAddr + len)</code> in real code, use <code>structAddr[len]</code> instead which is simpler to interpret and read.</p>\n"}, {"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1507143540, "creation_date": 1507143540, "answer_id": 46572272, "question_id": 46570735, "link": "https://stackoverflow.com/questions/46570735/exiting-from-a-loop/46572272#46572272", "title": "Exiting from a loop", "body": "<p>This approach might solve your problem but not sure.</p>\n\n<pre><code>do {\n    if ((*(structAddr + len) == CASE0))\n        arr[len] = *(structAddr + len);\n    else \n        arr[len] = *(structAddr + len + 1);\n\n    arr[len + 1] = *(structAddr + len);\n    len = len + 2;\n} while (len &lt; totalLen &amp;&amp;  !(*(structAddr + len) == CASE0));\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 2927392, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d13c6d1107c7409f9e2df6a16694036d?s=128&d=identicon&r=PG&f=1", "display_name": "user2927392", "link": "https://stackoverflow.com/users/2927392/user2927392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507198470, "creation_date": 1507137910, "last_edit_date": 1507198470, "question_id": 46570735, "link": "https://stackoverflow.com/questions/46570735/exiting-from-a-loop", "title": "Exiting from a loop", "body": "<p>The tool I use to check coding standard complaints on the code below that \"there can only be a single exit from the loop\". It says the \"while (len &lt; totalLen)\" loop below has an extra way to exit. \nIt says \"need single entry and single exit for all constructs (functions, loops)\". I am puzzled by this since the while loop it is complaining has only single exit criteria.</p>\n\n<p>What is the meaning of single entry and single exit criteria and how is the below code violating it. \nThe if condition in the while loop is necessary. How do I keep it and be complaint to the coding standard</p>\n\n<pre><code>   while (len &lt; (totalLen))\n    {\n\n    switch (*(structAddr  + len - 1))\n        {\n\n        case CASEA:                     //8 byte data\n\n\n            while (len &lt; totalLen)\n                {\n                if ((*(structAddr  + len) == CASE0))                           //this means there is no 8 byte data left to swap\n                    {\n                    arr[len] = *(nvStruct + len);\n                    break;\n                    }\n\n                arr[len]     = *(structAddr  + len + 1);\n                arr[len + 1] = *(structAddr  + len);\n                len          = len + 2;\n\n                }\n\n            break;\n\n\n        case CASEB:                     //2 byte data\n\n\n            while ((*(structAddr + len + 1) != CASE0) &amp;&amp; (len &lt; totalLen))\n                {\n\n                arr[len] = ((*(structAddr + len) &lt;&lt; 16) &amp; (0xffff0000)) |\n                           ((*(structAddr + len) &gt;&gt; 16) &amp; (0x0000ffff));\n                len++;\n                }\n\n            break;\n\n\n        default:                      //4 byte data - no swap needed\n\n            arr[len] = *(structAddr + len);\n\n\n        }\n\n    len++;\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "x86", "x86-64", "intel"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1507137244, "post_id": 46570431, "comment_id": 80094696, "body": "Yes, that looks correct."}, {"owner": {"reputation": 23, "user_id": 3971770, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fd0b328c6bdca82029793d35c5e865d5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/3971770/peter"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1507137519, "post_id": 46570431, "comment_id": 80094835, "body": "@Jester alright, thanks. I was really in doubt &gt;.&lt;"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 3, "creation_date": 1507138661, "post_id": 46570431, "comment_id": 80095455, "body": "In general, it can be useful to remember that <code>test %rdx, %rdx</code> is equivalent to <code>cmp 0, %rdx</code> (in backwards AT&amp;T syntax), so if you see a &quot;g&quot; condition code you can easily realize that it means &quot;if <i>g</i>reater than <i>zero</i>&quot; (where &quot;greater&quot; means <code>&gt;</code> for signed values, as opposed to &quot;above&quot; which means <code>&gt;</code> for unsigned values)."}, {"owner": {"reputation": 23, "user_id": 3971770, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fd0b328c6bdca82029793d35c5e865d5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/3971770/peter"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1507138791, "post_id": 46570431, "comment_id": 80095539, "body": "@MatteoItalia Ah! thats a really great rule to remember. That&#39;ll help. Thanks :)"}, {"owner": {"reputation": 23, "user_id": 3971770, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fd0b328c6bdca82029793d35c5e865d5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/3971770/peter"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1507138914, "post_id": 46570431, "comment_id": 80095604, "body": "@MatteoItalia i added some additional code that is the whole translation of an assembly program to c. Im pretty sure i messed something up. Got any idea where i went wrong?"}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 1, "creation_date": 1507139500, "post_id": 46570431, "comment_id": 80095891, "body": "Brush up what the parenthesis mean in the AT&amp;T syntax and the solution will become clear ;)"}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1507142643, "post_id": 46570431, "comment_id": 80097650, "body": "@AnttiHaapala Apart for AF, every other flag is set the same AFAIK. OF and CF are clear since x-0 never overflows. SF is set to the MSB of x since x-0 = x, same for ZF, and PF is set to XORNOT8(x-0) = XORNOT8(x). Considering that x AND x = x, these are the same results of <code>test</code>. Unless I overlooked something, I&#39;m a bit burned-out right now :)"}, {"owner": {"reputation": 23, "user_id": 3971770, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fd0b328c6bdca82029793d35c5e865d5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/3971770/peter"}, "reply_to_user": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1507142791, "post_id": 46570431, "comment_id": 80097740, "body": "@MargaretBloom so something like this? (EDITED Solution)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 1, "creation_date": 1507143013, "post_id": 46570431, "comment_id": 80097851, "body": "@MargaretBloom: Yes, <code>test %rdx,%rdx</code> sets flags identically to <code>cmp $0, %rdx</code> (apart from AF).   See <a href=\"https://stackoverflow.com/questions/147173/testl-eax-against-eax/38032818#38032818\" title=\"testl eax against eax\">stackoverflow.com/questions/147173/testl-eax-against-eax/&hellip;</a> for reasoning / proof."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1507143118, "post_id": 46570431, "comment_id": 80097896, "body": "@Peter: So what is this question currently asking?  It seems to have morphed into a debug-my-code question without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  Single-step your code in gdb or whatever debugger you prefer, and watch registers change (including FLAGS).  See the bottom of <a href=\"https://stackoverflow.com/tags/x86/info\">stackoverflow.com/tags/x86/info</a> for gdb tips.  If you&#39;re stuck on something you don&#39;t understand in the debugger, then put that in the question."}, {"owner": {"reputation": 23, "user_id": 3971770, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fd0b328c6bdca82029793d35c5e865d5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/3971770/peter"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507143248, "post_id": 46570431, "comment_id": 80097959, "body": "@PeterCordes Just an exercise i was doing, i couldnt really make it work - so i asked for some help. On my solution based on the assembly."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 3, "creation_date": 1507143361, "post_id": 46570431, "comment_id": 80098028, "body": "Yeah, but now there are at least 2 separate questions in one post.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>; this is not how we like our questions here at SO.  If you have an answer for your own question, post it as an <i>answer</i>.  (Answering your own question is encouraged if you have a good answer.)"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1507149744, "post_id": 46570431, "comment_id": 80101205, "body": "I expanded a bit the comment in an answer, which could be the answer to the &quot;original&quot; question. The rest should probably be put in a separated question."}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 5, "last_activity_date": 1507161810, "last_edit_date": 1507161810, "creation_date": 1507148768, "answer_id": 46573588, "question_id": 46570431, "link": "https://stackoverflow.com/questions/46570431/assembly-testq-and-cmovg-instruction/46573588#46573588", "title": "Assembly testq and cmovg instruction", "body": "<p>(moving from the comment, replying to the original question)</p>\n\n<blockquote>\n<pre><code>if(d &gt; 0){\n    a = c;\n}\n</code></pre>\n</blockquote>\n\n<p>Yes, it's correct. Below I'll try to show how to \"decode\" this pattern quickly, without having to calculate all the times the flag register values.</p>\n\n<blockquote>\n  <p><strong>Notice</strong>: Intel syntax ahead, as it's way clearer for the operands order in comparisons; AT&amp;T is similar but <em>with the operands reversed</em> (and more strange characters spread around).</p>\n</blockquote>\n\n<p>The \"numeric comparison\" condition codes are best understood in the context of a \"classic\" sequence</p>\n\n<pre><code>cmp a, b\njCC label\n</code></pre>\n\n<p>The <code>CC</code> (condition code) part here refers to the \"operator\" (as in, <code>&gt;</code>,<code>&lt;</code>, <code>==</code>) that you are putting in the compare between <code>a</code> and <code>b</code>; so:</p>\n\n<ul>\n<li><code>jg</code> &rarr; \"<strong>j</strong>ump if <code>a</code> is <strong>g</strong>reater than <code>b</code>\";</li>\n<li><code>jl</code> &rarr; \"<strong>j</strong>ump if <code>a</code> is <strong>l</strong>ess than <code>b</code>\";</li>\n<li><code>je</code> &rarr; \"<strong>j</strong>ump if <code>a</code> is <strong>e</strong>qual to <code>b</code>\";</li>\n<li><code>jne</code> &rarr; \"<strong>j</strong>ump if <code>a</code> is <strong>n</strong>ot <strong>e</strong>qual to <code>b</code>\";</li>\n<li><code>ja</code> &rarr; \"<strong>j</strong>ump if <code>a</code> is <strong>a</strong>bove <code>b</code>\";</li>\n<li><code>jb</code> &rarr; \"<strong>j</strong>ump if <code>a</code> is <strong>b</strong>elow <code>b</code>\";</li>\n<li>... all the \"e\" variants (<code>jbe</code>, <code>jae</code>, ...)</li>\n</ul>\n\n<p>(the above/below couple differs from the greater/less couple in that <code>a</code>/<code>b</code> are for comparison between unsigned values, <code>g</code>/<code>l</code> for signed values; also, there are <a href=\"http://www.sandpile.org/x86/cc.htm\" rel=\"nofollow noreferrer\">a lot of synonyms</a>, in particular <code>je</code> is a synonymous for <code>jz</code> AKA \"jump if zero\", and <code>jne</code> for <code>jnz</code> AKA \"jump if not zero\"; disassemblers may produce <code>jz</code> or <code>je</code>, it's the same)</p>\n\n<p>Now, coming to your case:</p>\n\n<ul>\n<li><code>test reg,reg</code> is perfectly equivalent to <code>cmp reg,0</code> (<a href=\"https://stackoverflow.com/questions/147173/testl-eax-against-eax/38032818#38032818\">apart from the status of AF</a>, which is irrelevant); this is easily understood:\n\n<ul>\n<li><code>test</code> performs an <code>and</code> between the operands and sets the flags according to the result; so, <code>test reg,reg</code> just sets the flags according to <code>reg</code> (<code>and</code>ing a number with itself is a nop);</li>\n<li><code>cmp b,a</code> calculates <code>b-a</code> and sets the flags according to the result; given that <code>b-0 == b</code>, <code>cmp b,0</code> just sets the flags according to <code>b</code>, exactly as <code>test b,b</code>.</li>\n</ul></li>\n<li>the <code>cmovg</code> is an instance of the <code>cmovCC</code> instruction, with condition code <code>g</code>, i.e. \"move if <strong>g</strong>reater\".</li>\n</ul>\n\n<p>So, your</p>\n\n<pre><code>test rdx,rdx\ncmovg rax,rcx\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>cmp rdx,0\ncmovg rax,rcx\n</code></pre>\n\n<p>which plainly reads as \"compare rdx with zero, if it's greater move rcx in rax\".</p>\n"}], "owner": {"reputation": 23, "user_id": 3971770, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fd0b328c6bdca82029793d35c5e865d5?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/3971770/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6176, "favorite_count": 0, "accepted_answer_id": 46573588, "answer_count": 1, "score": 1, "last_activity_date": 1507161810, "creation_date": 1507136770, "last_edit_date": 1507142760, "question_id": 46570431, "link": "https://stackoverflow.com/questions/46570431/assembly-testq-and-cmovg-instruction", "title": "Assembly testq and cmovg instruction", "body": "<p>What does the following do?</p>\n\n<pre><code>testq   %rdx, %rdx\ncmovg   %rcx, %rax\n</code></pre>\n\n<p>I understand that testq is a bitwise and between two registers, but how does it works with the flags?\nWhat would this translate into in c?\ne.g. if <code>%rdx</code> would hold value <code>0x01</code>, then we'd have <code>0x01</code> &amp; <code>0x01</code> = <code>0x01</code>, which would set</p>\n\n<pre><code>ZF = 0, SF = 0, OF = 0.\n</code></pre>\n\n<p>And for what I could find cmovg is performed if </p>\n\n<pre><code>\u02dc(SF \u02c6 OF) &amp; \u02dcZF\n</code></pre>\n\n<p>which would resolve to </p>\n\n<pre><code>\u02dc(0 \u02c6 0) &amp; \u02dc0 = \u02dc(0) &amp; \u02dc0 = 1 &amp; 1 = 1.\n</code></pre>\n\n<p>Would this mean that cmovg would be performed and that the corresponding c code would behave for <code>d = %rdx</code>, <code>a = rax</code> and <code>c = rcx</code>:</p>\n\n<pre><code> if(d &gt; 0){\n   a = c;\n }\n</code></pre>\n\n<p>Or can someone maybe explain this in other words?</p>\n\n<p>Additionally, i've been trying to work this assembly turning it into a corresponding c code. Currently i get a result that ends up like an infinite while loop on the testq %rdx, %rdx with jne .L4. With the content above enclosed. Anyone know what the right solution is? My current solution is this:</p>\n\n<pre><code>p:\n        movq    (%rdi), %rdx\n        testq   %rdx, %rdx\n        je      .L5\n        movl    $0, %eax\n.L4:\n        leaq    (%rax,%rdx), %rcx\n        testq   %rdx, %rdx\n        cmovg   %rcx, %rax\n        addq    $8, %rdi\n        movq    (%rdi), %rdx\n        testq   %rdx, %rdx\n        jne     .L4\n        ret\n.L5:\n        movl    $0, %eax\n        ret\n</code></pre>\n\n<p>Solution (wrong):</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n\nint func(int *rdi){\n  int rdx = *rdi;\n  if(rdx == 0){\n    int rax = 0;\n    return rax;\n  }\n  int rax = 0;\n    do {\n    int rcx = rax + rdx;\n    if(rdx &gt; 0){\n      rax = rcx;\n    }\n    rdi += 8;\n    rdx = *rdi;\n  } while(rdx != 0);\n\n  return rax;\n\n}\n\n  int main(int argc, char const *argv[]) {\n    int var = 20;\n    int *ip;\n    ip = &amp;var;\n    func(ip);\n  }\n</code></pre>\n"}, {"tags": ["c", "linux", "ip-address"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507136828, "post_id": 46570393, "comment_id": 80094489, "body": "Unrelated to your problem, but why do you allocate the <code>in_addr</code> structure dynamically? Why not define it as e.g. <code>struct in_addr in_addr1;</code>? And then use the address-of operator <code>&amp;</code> when passing to <code>inet_ntop</code>?"}, {"owner": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507136946, "post_id": 46570393, "comment_id": 80094545, "body": "@Someprogrammerdude for no special reason... I&#39;m just used to do in this way. Would defining it as you say be an improvement in performance / something else?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507136946, "post_id": 46570393, "comment_id": 80094544, "body": "As for your problem, remember that the address is supposed to be in <i>network byte order</i>. See e.g. <a href=\"http://man7.org/linux/man-pages/man3/inet_ntop.3.html\" rel=\"nofollow noreferrer\">this <code>inet_ntop</code> manual page</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507136988, "post_id": 46570393, "comment_id": 80094570, "body": "Well not using pointer and dynamic allocation will mean less risk of dereferencing null or invalid pointers, or having memory leaks."}, {"owner": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 0, "creation_date": 1507137008, "post_id": 46570393, "comment_id": 80094575, "body": "Quite probably a dupe of <a href=\"https://stackoverflow.com/questions/212528/get-the-ip-address-of-the-machine\" title=\"get the ip address of the machine\">stackoverflow.com/questions/212528/&hellip;</a>"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 2, "creation_date": 1507137124, "post_id": 46570393, "comment_id": 80094633, "body": "Get unused to doing it that way. Allocating memory dynamically when a simple local variable will suffice is a terrible practice that would never survive a competent code review."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 1, "last_activity_date": 1507302676, "last_edit_date": 1507302676, "creation_date": 1507141505, "answer_id": 46571726, "question_id": 46570393, "link": "https://stackoverflow.com/questions/46570393/getting-the-ip-address-of-my-machine-in-dotted-decimal-with-c/46571726#46571726", "title": "Getting the ip address of my machine in dotted decimal with C?", "body": "<p><code>INADDR_LOOPBACK</code> is in <strong>host byte order</strong>, i.e. <code>0x7f000001</code>. It is, incidentally, the IPv4 address <code>127.0.0.1</code>.</p>\n\n<p><code>in_addr1-&gt;s_addr</code> must be in <strong>network byte order</strong>.</p>\n\n<p>Your computer is a little-endian computer where the host byte order doesn't match the network byte order. You must use <code>htonl</code> to convert the loopback address to network byte order.</p>\n"}], "owner": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 46571726, "answer_count": 1, "score": -1, "last_activity_date": 1507302676, "creation_date": 1507136617, "question_id": 46570393, "link": "https://stackoverflow.com/questions/46570393/getting-the-ip-address-of-my-machine-in-dotted-decimal-with-c", "title": "Getting the ip address of my machine in dotted decimal with C?", "body": "<p>I'm trying to get a string with the ip address in dotted decimal of my machine. What I do is trying to get the string from <code>INADDR_LOOPBACK</code> with the following code. </p>\n\n<pre><code>char addr[INET_ADDRSTRLEN];\nstruct in_addr *in_addr1 = malloc(sizeof(struct in_addr));\nin_addr1-&gt;s_addr = INADDR_LOOPBACK;\ninet_ntop(AF_INET, in_addr1, addr, INET_ADDRSTRLEN);\nprintf(\"addr: %s\\n\", addr);\n</code></pre>\n\n<p>Here's what I get from the <code>printf</code>:</p>\n\n<blockquote>\n  <p>1.0.0.127</p>\n</blockquote>\n\n<ol>\n<li>Why is it the localhost address reverse? Should it print\n<code>127.0.0.1</code>?</li>\n<li>Honestly I was expecting to get the ip I would get calling for\nexample <code>$ ifconfig</code>... not the localhost! Did I misunderstand what <code>INADDR_LOOBACK</code> does?</li>\n</ol>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10947, "user_id": 4094260, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/A5fz9.jpg?s=128&g=1", "display_name": "Nongthonbam Tonthoi", "link": "https://stackoverflow.com/users/4094260/nongthonbam-tonthoi"}, "edited": false, "score": 1, "creation_date": 1507136397, "post_id": 46570286, "comment_id": 80094281, "body": "while (1) is an infinite loop"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1507136441, "post_id": 46570286, "comment_id": 80094300, "body": "This is scanf again:("}, {"owner": {"reputation": 2496, "user_id": 3512524, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d86f158f96941fef8bb311262cf3ad0e?s=128&d=identicon&r=PG&f=1", "display_name": "Krzysztof Skowronek", "link": "https://stackoverflow.com/users/3512524/krzysztof-skowronek"}, "edited": false, "score": 0, "creation_date": 1507136466, "post_id": 46570286, "comment_id": 80094308, "body": "you mean that scanf does not wait for you to put another grade?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1507136953, "post_id": 46570286, "comment_id": 80094549, "body": "Don&#39;t use <code>scanf</code> for interactive input. Check the return value of I/O functions!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507141232, "post_id": 46570286, "comment_id": 80096841, "body": "Also you don&#39;t want to use <code>%i</code> in <code>scanf</code>. Use <code>%d</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2374, "user_id": 8491726, "user_type": "registered", "profile_image": "https://graph.facebook.com/1550562035006492/picture?type=large", "display_name": "Artemy Vysotsky", "link": "https://stackoverflow.com/users/8491726/artemy-vysotsky"}, "edited": false, "score": 1, "creation_date": 1507136517, "post_id": 46570344, "comment_id": 80094336, "body": "<a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\" title=\"why is the gets function so dangerous that it should not be used\">stackoverflow.com/questions/1694036/&hellip;</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1507136604, "post_id": 46570344, "comment_id": 80094380, "body": "A better alternative to <code>gets(wastebuf)</code> would be <code>scanf(&quot;%*[^\\n]%*c&quot;);</code>"}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 2, "last_activity_date": 1507166192, "last_edit_date": 1507166192, "creation_date": 1507136457, "answer_id": 46570344, "question_id": 46570286, "link": "https://stackoverflow.com/questions/46570286/how-do-i-stop-my-c-program-from-flooding-the-console-with-the-same-response/46570344#46570344", "title": "How do I stop my C program from flooding the console with the same response", "body": "<p>Check if <code>scanf</code> succeeded.</p>\n\n<pre><code>int nread = scanf(\"%i\", &amp;grade);\nif (nread != 1) // scanf failed, start cleanup \n{\n    scanf(\"%*[^\\n]%*c\");\n}\n</code></pre>\n\n<p>Look for any book and you'll know that <code>scanf</code> returns <strong>number of elements that were successfully read</strong>, so if you type a letter, it will fail to read an integer and return <code>0</code> (nothing read), then you can know there's something wrong and discard wrong stuffs.</p>\n\n<p>Since <code>scanf</code> don't read anything if it encounters an error, the wrong stuff will remain in the input buffer, and badly it'll break the next <code>scanf</code>, leading to an infinite output flushing.</p>\n\n<hr>\n\n<p>P.S. You don't need to repeat the statements after <code>case 5 4 3...</code>, just merge them into one:</p>\n\n<pre><code> case 5: // Remove these and leave the last one there\n case 4:\n case 3:\n case 2:\n case 1:\n case 0: printf(\"F \\n\"); break;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 74, "user_id": 8305252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1bf87b3da478ab2ddf99cd3c2515525?s=128&d=identicon&r=PG&f=1", "display_name": "Digglit", "link": "https://stackoverflow.com/users/8305252/digglit"}, "edited": false, "score": 0, "creation_date": 1507155618, "post_id": 46570705, "comment_id": 80103623, "body": "Thank you very much for the answer (thanks to everyone else too). This definitely helps me understand how to check for what it is I was confused about!"}], "tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": true, "score": 0, "last_activity_date": 1507137782, "creation_date": 1507137782, "answer_id": 46570705, "question_id": 46570286, "link": "https://stackoverflow.com/questions/46570286/how-do-i-stop-my-c-program-from-flooding-the-console-with-the-same-response/46570705#46570705", "title": "How do I stop my C program from flooding the console with the same response", "body": "<p>Check the return of scanf. 1 means an integer was successfully scanned. 0 means the input was not an integer. Clean the input stream and try again.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main ( void) {\n    int grade; //number 0-10 associated with the letter grade\n    int valid = 0;\n    while (1) {\n        do {\n            printf(\"Enter the student's grade: \");\n            if ( 1 != ( valid = scanf(\"%i\", &amp;grade))) {// 1 is success\n                if ( EOF == valid) {\n                    printf ( \"found EOF\\n\");\n                    return 0;\n                }\n                while ( '\\n' != getchar ( )) {//clear input stream\n                }\n            }\n        } while ( !valid);\n        switch (grade) {\n            case 10: printf(\"A \\n\"); break;\n            case 9: printf(\"A \\n\"); break;\n            case 8: printf(\"B \\n\"); break;\n            case 7: printf(\"C \\n\"); break;\n            case 6: printf(\"D \\n\"); break;\n            case 5: printf(\"F \\n\"); break;\n            case 4: printf(\"F \\n\"); break;\n            case 3: printf(\"F \\n\"); break;\n            case 2: printf(\"F \\n\"); break;\n            case 1: printf(\"F \\n\"); break;\n            case 0: printf(\"F \\n\"); break;\n            default: printf(\"Please enter a valid test score \\n\"); break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 74, "user_id": 8305252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1bf87b3da478ab2ddf99cd3c2515525?s=128&d=identicon&r=PG&f=1", "display_name": "Digglit", "link": "https://stackoverflow.com/users/8305252/digglit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 46570705, "answer_count": 2, "score": 0, "last_activity_date": 1507166192, "creation_date": 1507136268, "last_edit_date": 1507136389, "question_id": 46570286, "link": "https://stackoverflow.com/questions/46570286/how-do-i-stop-my-c-program-from-flooding-the-console-with-the-same-response", "title": "How do I stop my C program from flooding the console with the same response", "body": "<p>It was challenging to word the title for this question, but I hope you can forgive me as I will elaborate here.\nThe problem i'm having is my C program floods the console with \"Enter the student's grade: F\" if I enter anything other than an integer. I'm new to C, so I don't understand how to check if the input is of the valid type.</p>\n\n<pre><code>int main() {\n  int grade; //number 0-10 associated with the letter grade\n  while (1) {\n    printf(\"Enter the student's grade: \");\n    scanf(\"%i\", &amp;grade);\n    switch (grade) {\n      case 10: printf(\"A \\n\"); break;\n      case 9: printf(\"A \\n\"); break;\n      case 8: printf(\"B \\n\"); break;\n      case 7: printf(\"C \\n\"); break;\n      case 6: printf(\"D \\n\"); break;\n      case 5: printf(\"F \\n\"); break;\n      case 4: printf(\"F \\n\"); break;\n      case 3: printf(\"F \\n\"); break;\n      case 2: printf(\"F \\n\"); break;\n      case 1: printf(\"F \\n\"); break;\n      case 0: printf(\"F \\n\"); break;\n      default: printf(\"Please enter a valid test score \\n\"); break;\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["c", "malloc", "gsl"], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1507135873, "creation_date": 1507135873, "answer_id": 46570161, "question_id": 46570054, "link": "https://stackoverflow.com/questions/46570054/allocate-free-allocate-variable/46570161#46570161", "title": "Allocate, free, allocate variable", "body": "<p>Your compiler should give you a warning with a hint to the explanation - something to the effect that variable <code>W</code> re-declared inside the loop hides variable <code>W</code> declared outside the loop.</p>\n\n<p>The reason the second loop does not work is that you are re-declaring <code>W</code>, instead of re-assigning it. That is why only the first iteration frees matrix <code>W</code> correctly; subsequent iterations free a dangling pointer, causing undefined behavior.</p>\n\n<p>Removing <code>gsl_matrix *</code> from the second line makes this a re-assignment, as intended, so the code works again.</p>\n\n<p>Note that <code>W</code> points to the last allocated matrix, which needs to be freed in order to avoid memory leaks:</p>\n\n<pre><code>gsl_matrix * W = gsl_matrix_alloc(10,10);\nfor(i=1; i &lt; 101; i++){\n    gsl_matrix_free(W);\n    W = gsl_matrix_alloc(10,10); // re-assign\n}\ngsl_matrix_free(W); // Avoid memory leaks\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4461990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/199b4cf3852bbd7be197482a403b1e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/4461990/rich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 46570161, "answer_count": 1, "score": 1, "last_activity_date": 1507135873, "creation_date": 1507135479, "question_id": 46570054, "link": "https://stackoverflow.com/questions/46570054/allocate-free-allocate-variable", "title": "Allocate, free, allocate variable", "body": "<p>I am using the GSL library to write some C code.  I'm noticing some sort of inconsistency (at least from my limited knowledge of C) in allocating, freeing, and allocating a variable in my code using the GSL library.  When the first allocation is inside the loop, things work just fine, e.g. </p>\n\n<pre><code>int i;\nfor(i=1; i &lt; 101; i++){\n  gsl_matrix * W = gsl_matrix_alloc(10,10);\n  gsl_matrix_free(W);\n}\n</code></pre>\n\n<p>In another function, I have the initial allocation before the loop,</p>\n\n<pre><code>int i;\ngsl_matrix * W = gsl_matrix_alloc(10,10);\nfor(i=1; i &lt; 101; i++){\n  gsl_matrix_free(W);\n  gsl_matrix * W = gsl_matrix_alloc(10,10);\n}\n</code></pre>\n\n<p>and it DOES NOT work. Lastly, if I take out the <code>gsl_matrix *</code> in the loop, it works. E.g.</p>\n\n<pre><code>int i;\ngsl_matrix * W = gsl_matrix_alloc(10,10);\nfor(i=1; i &lt; 101; i++){\n  gsl_matrix_free(W);\n  W = gsl_matrix_alloc(10,10);\n}\n</code></pre>\n\n<p>Does anyone have an explanation?  Why does the placement of the first allocation inside or outside of the loop matter?</p>\n"}, {"tags": ["c", "gcc", "riscv"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 1, "creation_date": 1507135550, "post_id": 46570034, "comment_id": 80093877, "body": "Welcome to the site!  Check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers.  You can <a href=\"https://stackoverflow.com/posts/46570034/edit\">edit your question</a> to include more information.  Would you please tell us more about your use case?  Why do you want to switch from SP to FP?  There might be a solution to your underlying problem that does not actually require changing the calling convention."}, {"owner": {"reputation": 1722, "user_id": 1905491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e7e2cd68aa5392653859edad43b7340?s=128&d=identicon&r=PG", "display_name": "stefanct", "link": "https://stackoverflow.com/users/1905491/stefanct"}, "edited": false, "score": 0, "creation_date": 1543579027, "post_id": 46570034, "comment_id": 93979479, "body": "Just in case someone wonders why he wondered... ;) It was most probably related to his work on this paper on detecting memory corruption bugs in (RISC-V) hardware (cf. section V.B): <a href=\"https://scholar.google.at/scholar?cluster=14474006671409647695&amp;hl=en&amp;as_sdt=0,5&amp;sciodt=0,5\" rel=\"nofollow noreferrer\">scholar.google.at/&hellip;</a>"}], "owner": {"reputation": 11, "user_id": 7717613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kaSfTxWRTW8/AAAAAAAAAAI/AAAAAAAABnY/aGQbv7wBfk4/photo.jpg?sz=128", "display_name": "Christian Palmiero", "link": "https://stackoverflow.com/users/7717613/christian-palmiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1507135402, "creation_date": 1507135402, "question_id": 46570034, "link": "https://stackoverflow.com/questions/46570034/use-of-frame-pointer-instead-of-stack-pointer-when-returning-from-a-procedure", "title": "Use of frame pointer instead of stack pointer when returning from a procedure", "body": "<p>I have a question about the RISC-V returning from a procedure convention.\nBy analyzing the assembly code generated from several C programs, I observed that, when returning from a procedure call, the return address is stored in the return address register through a load instruction that uses the stack pointer register as source address.</p>\n\n<p>Here it is an example:</p>\n\n<p><code>&lt;main&gt;:\naddi sp,sp,-48\nsw ra,44(sp)\nsw s0,40(sp)\n...\n...\nlw ra,44(sp)\nlw s0,40(sp)\naddi sp,sp,48\nret</code></p>\n\n<p>Is there any option to force the GCC RISC-V compiler to use the \"frame pointer\" register instead of the \"stack pointer\" register when calculating the source address of the LOAD instruction that affects the return address?</p>\n"}, {"tags": ["c++", "c", "format", "printf", "cross-platform"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1507135142, "post_id": 46569942, "comment_id": 80093662, "body": "By using proper format specifiers for the types used? It is specifically easy with standard types which you are using."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1507135200, "post_id": 46569942, "comment_id": 80093691, "body": "Read the docs to find the correct format specifier for each standard type."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1507135787, "post_id": 46569942, "comment_id": 80094005, "body": "Post the code that causes the waring and the types of its parameters."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1507136201, "post_id": 46569942, "comment_id": 80094182, "body": "Don&#39;t use <code>*printf()</code> with C++ and avoid the whole issue."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1507137848, "post_id": 46569942, "comment_id": 80095018, "body": "Can you use <code>std::cout</code> and avoid the issue?"}, {"owner": {"reputation": 1201, "user_id": 651028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6d5887835c21dace586b98180544c74e?s=128&d=identicon&r=PG", "display_name": "Sergei G", "link": "https://stackoverflow.com/users/651028/sergei-g"}, "edited": false, "score": 0, "creation_date": 1507141039, "post_id": 46569942, "comment_id": 80096726, "body": "There is a lot of assumptions that people made here.  1st of all not everybody has access to all of C++.  2nd the reason for the question is that on cross-platform systems size_t structure is taken as an argument and thus I work with size_t data type.  3rd is I work with existing libraries that might be using sprintf.  I just imported C code into CPP project.  So, I really need a stanard sprintf support.  On one system it is of one size and on another system it is of another type.  There is no one specifier that fits them all.  Some comments show lack of knowledge."}, {"owner": {"reputation": 1201, "user_id": 651028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6d5887835c21dace586b98180544c74e?s=128&d=identicon&r=PG", "display_name": "Sergei G", "link": "https://stackoverflow.com/users/651028/sergei-g"}, "edited": false, "score": 0, "creation_date": 1507141410, "post_id": 46569942, "comment_id": 80096935, "body": "Daemons log, log messages use format strings.  If printf or its other forms where not used in production it would not be in use."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507146048, "post_id": 46569942, "comment_id": 80099455, "body": "&quot;not everybody has access to all of C++.&quot; + &quot;I really need a stanard sprintf support.&quot; --&gt; It would have been clearer to tag this question C and not C++.  Dual tagging confuses if a C <i>or</i> C++ solution is needed or if a C <i>and</i> C++ solution is needed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507146349, "post_id": 46569942, "comment_id": 80099634, "body": "<code>printf()</code> with <code>time_t</code> is <b>not</b> as simply as casting to a wide integer nor using a matching printf specifier (there is none).  <code>time_t</code> is not even necessarily an integer.  A good answer is too small for this comment space.  IAC, I suspect a dupe exist on printing <code>time_t</code>.."}], "answers": [{"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1507135666, "post_id": 46569986, "comment_id": 80093942, "body": "On Windows this cast is narrowing."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1507135949, "post_id": 46569986, "comment_id": 80094078, "body": "@BaummitAugen Right.  Discussion added."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 2, "last_activity_date": 1507136074, "last_edit_date": 1507136074, "creation_date": 1507135216, "answer_id": 46569986, "question_id": 46569942, "link": "https://stackoverflow.com/questions/46569942/c-printf-cross-platform-format-without-warnings/46569986#46569986", "title": "C printf cross-platform format without warnings", "body": "<p>For <code>size_t</code>, assuming you have a sufficiently modern C library, use <code>%zu</code>.</p>\n\n<p>If you can't use the <code>z</code> modifier (some older libraries unfortunately don't support it), cast to a wide-enough known type when printing, and then use a width specifier appropriate to that type:</p>\n\n<pre><code>size_t sz = sizeof(whatever);\n...\nprintf(\"%lu\", (unsigned long)sz);\n</code></pre>\n\n<p>This works <em>as long as</em> you're never working with a size larger than 4 billion or so, i.e. that can fit in 32 bits.  If you're on a system where <code>size_t</code> is 64 bits but <code>long</code> is 32, you've theoretically got the problem of a size which <code>size_t</code> can hold but <code>%lu</code> can't print.  Whether this is a problem for you, and what to do if it is, is up to you.  (The ideal solution, if your library supports it, is to go back to <code>%zu</code>, which is the preferred solution and doesn't have this problem in 32-bit, 64-bit, or any other sized environments.  Or I guess you could use <code>unsigned long long</code> and <code>%llu</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1507135703, "last_edit_date": 1507135703, "creation_date": 1507135512, "answer_id": 46570066, "question_id": 46569942, "link": "https://stackoverflow.com/questions/46569942/c-printf-cross-platform-format-without-warnings/46570066#46570066", "title": "C printf cross-platform format without warnings", "body": "<p>This particular warning can be avoided by using explicitly sized integers instead of the native data types.</p>\n\n<pre><code>#include &lt;cstdint&gt;\n\nint8_t a = 15; //usually an alias for char\nuint16_t b = 4980; //usually an alias for unsigned short\nuint32_t c = 1234567890; //usually an alias for unsigned int or unsigned long\nint64_t d = 908070605040302010ll; //usually an alias for long long\n</code></pre>\n\n<p>The trick with the sized integers is that if, for example, <code>long</code> were 32-bits on one platform, but 64 bits on another, any uses of <code>long</code> would be non-portable. But <code>int64_t</code> will <strong>always</strong> be 64-bits, or else it simply won't exist on the given platform.</p>\n\n<p>In your case specifically, your code seems to be presuming that <code>size_t</code> will always be 64-bits, but there's no guarantee of that. So you should be using <code>uint64_t</code> instead, which guarantees that whatever underlying data type it ends up using, it will be 64 bits (and unsigned, which is the only guarantee associated with <code>size_t</code>).</p>\n"}], "owner": {"reputation": 1201, "user_id": 651028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6d5887835c21dace586b98180544c74e?s=128&d=identicon&r=PG", "display_name": "Sergei G", "link": "https://stackoverflow.com/users/651028/sergei-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 0, "closed_date": 1507135668, "accepted_answer_id": 46569986, "answer_count": 2, "score": -2, "last_activity_date": 1507142149, "creation_date": 1507135064, "last_edit_date": 1507142149, "question_id": 46569942, "link": "https://stackoverflow.com/questions/46569942/c-printf-cross-platform-format-without-warnings", "closed_reason": "Duplicate", "title": "C printf cross-platform format without warnings", "body": "<p>How do you write code to compile cross-platform without warnings.  For example, I don't get warnings on x64 platform, but I do on ARM (raspberry PI):</p>\n\n<p>warning: format \u2018%lu\u2019 expects argument of type \u2018long unsigned int\u2019, but argument 5 has type \u2018size_t {aka unsigned int}</p>\n\n<p>Needless to say I don't want to disable warnings.</p>\n\n<p>More examples and scenarios:</p>\n\n<pre><code>warning: format \u2018%lu\u2019 expects argument of type \u2018long unsigned int\u2019, \nbut argument 5 has type \u2018uint64_t {aka long long unsigned int}\u2019  \n\nuint64_t Created;       // 8 bytes\ntime_t now = time(NULL);\n\"Current time: %li sec, %lu nanosecs\", now, msg.Created\n</code></pre>\n\n<p>size_t is probably the highest offender:</p>\n\n<p>Basic use of sizeof:</p>\n\n<pre><code>warning: format \u2018%lu\u2019 expects argument of type \u2018long unsigned int\u2019, \nbut argument 4 has type \u2018unsigned int\u2019\ntr_debug(\"pbJobs size: %lu\", sizeof(pbJobs));\n</code></pre>\n\n<p>tr_debug is equivalent of printf for Mbed OS platform.  Yes, I compile on Mbed OS and Linux.</p>\n"}, {"tags": ["c++", "c", "visual-studio-2015", "windows64"], "comments": [{"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 1, "creation_date": 1507135160, "post_id": 46569909, "comment_id": 80093676, "body": "<a href=\"http://en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch</a>"}, {"owner": {"reputation": 3080, "user_id": 7590993, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10154373026397157/picture?type=large", "display_name": "Hariom Singh", "link": "https://stackoverflow.com/users/7590993/hariom-singh"}, "edited": false, "score": 0, "creation_date": 1507135251, "post_id": 46569909, "comment_id": 80093726, "body": "Or even  time_point_cast std::chrono::time_point_cast"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1507137569, "post_id": 46569909, "comment_id": 80094863, "body": "If the epoch is 1970-01-01, just divide by 1000 and pass to <code>ctime</code> or <code>localtime</code>/<code>gmtime</code> (and then maybe <code>strftime</code>)."}], "owner": {"reputation": 7909, "user_id": 169774, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ef760e2a9a24b58476207635c21730f9?s=128&d=identicon&r=PG", "display_name": "Mick", "link": "https://stackoverflow.com/users/169774/mick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507135308, "creation_date": 1507134931, "last_edit_date": 1507135308, "question_id": 46569909, "link": "https://stackoverflow.com/questions/46569909/long-long-epoch-time-to-tm", "title": "long long epoch time to tm", "body": "<p>I have a value for milliseconds since epoch stored in a long long variable milliseconds_since_epoch. I wish to convert this to some more standard and easier to process time structure like perhaps tm. Is there some library function to do this?</p>\n\n<p>I have a 64bit PC and am compiling to produce 64 bit code.</p>\n\n<p><strong>EDIT:</strong> just to be clear, my milliseconds_since_epoch is not a measure of the time now. In fact I have a collection of different milliseconds_since_epoch's each referring to a different historical time.</p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1507133422, "post_id": 46569439, "comment_id": 80092706, "body": "What compiler do you use? What is your platform?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1507133475, "post_id": 46569439, "comment_id": 80092738, "body": "That should be at least a warning in any compiler. What flags are you using? What output do you get on program crash?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1507133486, "post_id": 46569439, "comment_id": 80092744, "body": "If you know the code is wrong don&#39;t bother worrying about what the compiler is doing, just fix the code! And turn on warnings"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507133521, "post_id": 46569439, "comment_id": 80092770, "body": "<code>char ch = *&quot;ABC&quot;; printf(&quot;%c\\n&quot;, ch);</code> or <code>char ch[] = &quot;ABC&quot;; printf(&quot;%s\\n&quot;, ch);</code> BTW What is the meaning of trying to assign a string to one character?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507133577, "post_id": 46569439, "comment_id": 80092796, "body": "Bad things happen. There is no real life scenario you would be interested to do so."}, {"owner": {"reputation": 186, "user_id": 8657938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7924493761f5c1e272185206b329bfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Krassi Em", "link": "https://stackoverflow.com/users/8657938/krassi-em"}, "edited": false, "score": 0, "creation_date": 1507133681, "post_id": 46569439, "comment_id": 80092853, "body": "char ch[] = &quot;ABC&quot;; This is a solution to correct the situation."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1507133961, "post_id": 46569439, "comment_id": 80093000, "body": "gcc will give an error like: &quot;error: invalid conversion from &#39;const char*&#39; to &#39;char&#39; [-fpermissive]&quot;"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1507134119, "post_id": 46569439, "comment_id": 80093105, "body": "clang gives &quot;error: cannot initialize a variable of type &#39;char&#39; with an lvalue of type &#39;const char [4]&#39;&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507134807, "post_id": 46569439, "comment_id": 80093459, "body": "&quot;when I compiled it, I&#39;m not getting any error.&quot; --&gt; Enable all warnings."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 3, "last_activity_date": 1507147354, "last_edit_date": 1507147354, "creation_date": 1507134884, "answer_id": 46569900, "question_id": 46569439, "link": "https://stackoverflow.com/questions/46569439/what-happens-when-i-assign-a-string-to-a-char/46569900#46569900", "title": "What happens when I assign a string to a char?", "body": "<p>What should normally happen (at least with a reasonably modern compiler) is that you get an error message, because the conversion involved shouldn't happen without an explicit cast.</p>\n\n<p>But, let's consider what happens when/if we do force the compiler to do the dirty deed, so to speak. Let's consider a program that includes a cast to force the conversion <em>and</em> does a couple of other things that will make what's really happening a lot more clear (I think).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char const *s = \"ABC\";\n\n    int i = (int)s;\n    unsigned char c = (unsigned char)s; \n\n    printf(\"%p\\n%8x\\n%8x\\n\", s, i, c);\n}\n</code></pre>\n\n<p>(I've used <code>unsigned char</code> instead of <code>char</code> simply to prevent the value from being sign-extended if bit-7 of the pointer happens to be set).</p>\n\n<p>The output I get from this looks like this:</p>\n\n<pre><code>0x4005f4\n  4005f4\n      f4\n</code></pre>\n\n<p>So what's happening here is that <code>\"ABC\"</code> is a string literal, which we can use to initialize (among other possibilities) a pointer to (const) char. If we convert that to a pointer to void, we can see the address at which that string literal is being stored (note: if you compile this, the address you get is likely to be different).</p>\n\n<p>If we convert that address to an unsigned int, we get the same value. This isn't guaranteed by the standard, but it's pretty much what you're likely to see in most typical cases.</p>\n\n<p>Finally, we convert the pointer to a <code>char</code>. Printing that out in hexadecimal, we can easily see that it's just retaining the 8 least significant bits of the address. Again, the fact that it's exactly 8 bits isn't guaranteed by the standard, but it's a pretty typical size for <code>char</code>.</p>\n\n<p>Disclaimer: although you can probably expect to see results similar to what I've shown, nearly none of this is guaranteed. Printing out a pointer to void is supported, but the exact format that will be used is up to the compiler/library. Likewise, the result of converting to an integer type isn't entirely guaranteed--but on most typical computers/compiler implementations, you can expect to see results similar to what I've shown above.</p>\n\n<p>Bottom line: the value assigned to the <code>char</code> is typically going to be the least significant 8 bits of the address assigned for storing the string literal (which is essentially useless).</p>\n"}], "owner": {"reputation": 1, "user_id": 8721370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98454a5c9f6d4dfcde9ec2c5d03f2fc?s=128&d=identicon&r=PG&f=1", "display_name": "Raghav Bhardwaj", "link": "https://stackoverflow.com/users/8721370/raghav-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1507147354, "creation_date": 1507133254, "last_edit_date": 1507133420, "question_id": 46569439, "link": "https://stackoverflow.com/questions/46569439/what-happens-when-i-assign-a-string-to-a-char", "title": "What happens when I assign a string to a char?", "body": "<p>I wrote:</p>\n\n<pre><code>char ch = \"ABC\";\n</code></pre>\n\n<p>Now, when I compiled it, I'm not getting any error. But, if I try to display these characters individually or the entire String all at once I can't do that because whenever I try to do so, my program crashes.</p>\n\n<p>What's happening in this program?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507133275, "post_id": 46569422, "comment_id": 80092604, "body": "If you are so sure about <code>append</code>, I am betting the problem is right there. And you never check <code>i</code> is out of bounds of <code>a</code>. Surely it has nothing to do with <code>EOF</code>."}, {"owner": {"reputation": 75, "user_id": 8721207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf6058e53c417df1c868cd1146cada5?s=128&d=identicon&r=PG&f=1", "display_name": "S_rockz", "link": "https://stackoverflow.com/users/8721207/s-rockz"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507133597, "post_id": 46569422, "comment_id": 80092804, "body": "But I did test it many times. The entire code seems to work perfectly until it encounters newline or EOF. Before that, no matter how many alphabets, I key in it never hangs."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507133654, "post_id": 46569422, "comment_id": 80092837, "body": "I am not going to argue about it. The code presented has to comply with the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> requirement."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 4, "creation_date": 1507134118, "post_id": 46569422, "comment_id": 80093104, "body": "You will never detect EOF.  getch() returns an int, and you are truncating it to a char before your EOF check.  Mega-dupe."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1507134224, "post_id": 46569422, "comment_id": 80093163, "body": "Why do you start <code>i</code> at 2? It would be easier and more logical to start it at 0 as then it represents the size of the string in <code>a</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507134982, "post_id": 46569422, "comment_id": 80093573, "body": "No reason for <code>i++</code> outside the <code>if(b!=EOF)</code>.  Move it inside."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507135054, "post_id": 46569422, "comment_id": 80093627, "body": "<code>char b=0;</code> --&gt; <code>int b=0;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1507135161, "post_id": 46569422, "comment_id": 80093677, "body": "@MartinJames With <i>signed</i> <code>char</code>, <code>b!=EOF</code> <i>may</i> work to detect EOF.  Still better to use <code>int b;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507135396, "post_id": 46569422, "comment_id": 80093798, "body": "Better to post the input used that just describe the input."}, {"owner": {"reputation": 75, "user_id": 8721207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf6058e53c417df1c868cd1146cada5?s=128&d=identicon&r=PG&f=1", "display_name": "S_rockz", "link": "https://stackoverflow.com/users/8721207/s-rockz"}, "edited": false, "score": 0, "creation_date": 1507139398, "post_id": 46569422, "comment_id": 80095838, "body": "Thx a lot for helping me people. I made 2 changes- 1st, I changed b to integer type. Then, I chaged b =getchar() to scanf(&quot;%d&quot;,&amp;b). It worked. This made it work."}], "owner": {"reputation": 75, "user_id": 8721207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf6058e53c417df1c868cd1146cada5?s=128&d=identicon&r=PG&f=1", "display_name": "S_rockz", "link": "https://stackoverflow.com/users/8721207/s-rockz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507133192, "creation_date": 1507133192, "question_id": 46569422, "link": "https://stackoverflow.com/questions/46569422/lack-of-robustness-to-eof-and-newline-character-in-my-program", "title": "lack of robustness to EOF and newline character in my program", "body": "<p>I have the following <strong>structures</strong>, to implement a <code>text editor</code> in <strong>terminal</strong> using <strong>C</strong>-</p>\n\n<pre><code>typedef struct word\n{\n    char w[15];\n    struct word *next, *prev;\n}WORD;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>typedef struct text\n{\n    WORD *r;\n    int no_of_words;\n}TEXT;\n</code></pre>\n\n<p>The following is a <strong>function,</strong> that helps me store all words typed - </p>\n\n<pre><code>void type()\n{\n    TEXT t;\n    init(&amp;t);\n    char a[10] =\"\\0\",b='\\0';\n    int i = 2;\n    while(b != EOF)\n    {   \n        while(b!=' '&amp;&amp; b != EOF)\n        {\n            b = getch();\n            if(b!=EOF)\n            {\n                a[i-2] = b;\n                a[i-1] = '\\0';\n            } \n            i++;\n        }\n        append(&amp;t,a);\n        i=2;\n    }\n}\n</code></pre>\n\n<p>The problem I face here is that, if I press the <code>Enter</code> key or if I invoke the <code>EOF</code> character using <code>ctrl+D,</code> the computer begins to hang.</p>\n\n<p>The append part was tested on <em>numbers</em> and seemed to work <em>perfectly well</em>. Even while storing <em>strings</em>, it <em>works very well</em> as long as <code>Enter</code> or <code>ctrl+D</code> is <strong>not</strong> pressed.</p>\n\n<p>Can anyone tell me how to rectify this problem?</p>\n"}, {"tags": ["c", "perl", "undefined-reference", "xs"], "comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1507133420, "post_id": 46569264, "comment_id": 80092704, "body": "If you want to call an XS function (as opposed to a C function earlier in the file), you&#39;ll need to call it as a Perl sub. Don&#39;t make it an XS function, make it a C function."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2074102"}, "edited": false, "score": 0, "creation_date": 1507134688, "post_id": 46569684, "comment_id": 80093396, "body": "I see.  Just got to compile and link.  And useful info too.  Thanks!"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1507134732, "post_id": 46569684, "comment_id": 80093415, "body": "<code>fromMatrix[...]</code> and <code>intoVector[...]</code> will compile and link, but won&#39;t work. You still need to fix that. And I&#39;ve just made an update."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2074102"}, "edited": false, "score": 0, "creation_date": 1507136569, "post_id": 46569684, "comment_id": 80094363, "body": "Yeah I have been looking on the web for documentation on converting from Perl array-&gt;C array and back the other direction.  Any good links on this process?  Even redirect to another stackoverflow Q&amp;A would help."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1507140411, "post_id": 46569684, "comment_id": 80096386, "body": "<code>SvRV</code> dereference a scalar containing a reference. <code>SvTYPE</code> can be used to check that the referenced var is actually an array. You can then cast the variable returned by <code>SvRV</code> from a <code>SV*</code> into an <code>AV*</code>. <code>newAV()</code> creates a array. <code>av_*</code> functions manipulate arrays."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1507135036, "last_edit_date": 1507135036, "creation_date": 1507134080, "answer_id": 46569684, "question_id": 46569264, "link": "https://stackoverflow.com/questions/46569264/perl-xs-module-writing-use-another-function-from-within-same-xs-file/46569684#46569684", "title": "perl xs module writing - Use another function from within same xs file", "body": "<p>XS code creates <em>Perl</em> subs. So calling an XS function is the same as <a href=\"https://perldoc.perl.org/perlcall.html\" rel=\"nofollow noreferrer\">calling</a> any other Perl sub.</p>\n\n<p>Instead of dealing with that complexity and inefficiency, create a C function instead of a Perl sub. (You can independently expose that C function using XS if you want to.)</p>\n\n<pre><code>#define PERL_NO_GET_CONTEXT\n#include \"EXTERN.h\"\n#include \"perl.h\"\n#include \"XSUB.h\"\n\nstatic UV matrixIndex(UV colIndex, UV rowIndex, UV nCols, UV nRows) {\n    return (rowIndex * nCols) + colIndex;\n}\n\nMODULE = Foo::Bar  PACKAGE = Foo::Bar\n\nint\nmatrixCopyColumnVector_dbl(colIndex, fromMatrix, nColsMatrix, nRowsMatrix, intoVector, nRowsVector)\n    UV colIndex\n    SV * fromMatrix\n    UV nColsMatrix\n    UV nRowsMatrix\n    SV * intoVector\n    UV nRowsVector\nPREINIT:\n    UV register x, n;\nCODE:\n    if (nRowsVector == nRowsMatrix) {\n        RETVAL = 0;\n    } else {\n        n = 0;\n        for (x=0; x&lt;=nRowsMatrix; x++) {\n            intoVector[n] = fromMatrix[matrixIndex(colIndex, x, nColsMatrix, nRowsMatrix)];\n            n++;\n        }\n        RETVAL = 1;\n    }\nOUTPUT:\n    RETVAL\n</code></pre>\n\n<p>Your use of <code>return</code> is incorrect. If you want to return prematurely, use one of the <code>XSRETURN*</code> macros.</p>\n\n<p><code>fromMatrix[...]</code> and <code>intoVector[...]</code> are completely wrong. <code>fromMatrix</code> and <code>intoVector</code> are C arrays. (They aren't even Perl arrays, not that that's relevant.)</p>\n\n<p>Perl integers are of size <code>IV</code> (or <code>UV</code> for unsigned), not necessarily <code>size_t</code>. Use those for best compatibility.</p>\n\n<p>If you want portability, you can't assume C99, so you can't mix declarations and code. You need to put declarations in <code>PREINIT</code> (or use curlies in <code>CODE</code> to create a new scope for variable declarations).</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2074102"}, "edited": false, "score": 1, "creation_date": 1507136713, "post_id": 46569810, "comment_id": 80094440, "body": "Yes, I had figured this out.  It&#39;s definitely better to declare the C functions I need ahead then use XS as the glue as you say.  Much cleaner that way too.  I&#39;m just having trouble marshalling the arrays back and forth now."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1507136925, "post_id": 46569810, "comment_id": 80094531, "body": "@annoying_squid That is another question entirely \u2013 ask it!"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 2, "last_activity_date": 1507134583, "creation_date": 1507134583, "answer_id": 46569810, "question_id": 46569264, "link": "https://stackoverflow.com/questions/46569264/perl-xs-module-writing-use-another-function-from-within-same-xs-file/46569810#46569810", "title": "perl xs module writing - Use another function from within same xs file", "body": "<p>An XSUB is not a C function. The XS preprocessor does create a C function from your declarations, but it has the signature <code>void (CV*)</code>. The XSUB then takes arguments from the Perl argument stack and translates them to C values using your typemaps. It is therefore not possible to call your XSUBs directly.</p>\n\n<p>Instead, you would have to call the XSUB as if it were any other Perl function, i.e. push the arguments as <code>SV*</code>s onto the stack. See <a href=\"http://perldoc.perl.org/perlcall.html\" rel=\"nofollow noreferrer\"><code>perldoc perlcall</code></a> for details. Clearly this is tedious and inefficient.</p>\n\n<p>A better solution is to declare all functions that you want to use from both Perl and XS as <code>static</code> C functions in your XS file, then write the XS glue code to expose it to Perl. Here:</p>\n\n<pre><code>static size_t matrixIndex(size_t colIndex, size_t rowIndex, size_t nCols, size_t nRows)\n{\n    size_t register i;  // unneeded\n    return (rowIndex * nCols) + colIndex;\n}\n</code></pre>\n\n<p>Note that if this function uses any part of the Perl API, then you should also use the <code>pTHX</code> and <code>aTHX</code> macros. The declaration changes to</p>\n\n<pre><code>static size_t matrixIndex(pTHX_ size_t colIndex, etc...) ...\n</code></pre>\n\n<p>and when calling it from C you'd write <code>matrixIndex(aTHX_ colIndex, etc...)</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2074102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 46569684, "answer_count": 2, "score": 3, "last_activity_date": 1507135036, "creation_date": 1507132697, "question_id": 46569264, "link": "https://stackoverflow.com/questions/46569264/perl-xs-module-writing-use-another-function-from-within-same-xs-file", "title": "perl xs module writing - Use another function from within same xs file", "body": "<p>I'm a beginner in XS and have spent some time looking for this answer on the web with no luck.  The problem is that XS changes the name of the function and when it goes to compile, I will get an undefined reference error.  For example consider the XS code below:</p>\n\n<pre><code>size_t \nmatrixIndex (colIndex, rowIndex,nCols,nRows)\n      size_t colIndex\n      size_t rowIndex\n      size_t nCols\n      size_t nRows\n    CODE:\n    size_t register i;\n    RETVAL = (rowIndex * nCols) + colIndex;\n    OUTPUT:\n        RETVAL\n</code></pre>\n\n<p>I then try to use this in the following function like this</p>\n\n<pre><code>int\nmatrixCopyColumnVector_dbl (colIndex,fromMatrix,nColsMatrix,nRowsMatrix,intoVector,nRowsVector)\n      size_t colIndex\n      SV * fromMatrix\n      size_t nColsMatrix\n      size_t nRowsMatrix\n      SV * intoVector\n      size_t nRowsVector\n    CODE:\n      size_t register x, n;\n      if( nRowsVector != nRowsMatrix) { RETVAL = 0; return RETVAL; }\n      n = 0;\n      for(x=0; x&lt;= nRowsMatrix; x++) {\n         intoVector[n] = fromMatrix[matrixIndex /*USE OF FUNCTION HERE!!*/(colIndex,x,nColsMatrix,nRowsMatrix)];\n         n++;\n      }\n      RETVAL = 1;\n      return RETVAL;\n    OUTPUT:\n       RETVAL\n</code></pre>\n\n<p>I then run <code>make</code> and it goes through the compile process and I get an error at what appears to be the linking stage of <code>undefined reference to 'matrixIndex'</code>.  </p>\n\n<p>So I am wondering what is the standard XS way to call a function from within the same XS file?</p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1507132202, "post_id": 46569091, "comment_id": 80091889, "body": "Define symmetrical 2D array."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507132237, "post_id": 46569091, "comment_id": 80091915, "body": "BTW, <code>result =0;     for(h=0;h&lt;rowSize &amp;&amp; result; h++)</code> will never run."}, {"owner": {"reputation": 89, "user_id": 8720051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc9af77fda8ebd7afbbb04f79cdaab1b?s=128&d=identicon&r=PG&f=1", "display_name": "Denise", "link": "https://stackoverflow.com/users/8720051/denise"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507132590, "post_id": 46569091, "comment_id": 80092165, "body": "still not working well @EugeneSh. i have added more code."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1507132840, "post_id": 46569091, "comment_id": 80092327, "body": "@EugeneSh. Very good point. x/y axis symmetric? Diagonal symmetric? Which dimension is x/y? Is the array square?"}, {"owner": {"reputation": 89, "user_id": 8720051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc9af77fda8ebd7afbbb04f79cdaab1b?s=128&d=identicon&r=PG&f=1", "display_name": "Denise", "link": "https://stackoverflow.com/users/8720051/denise"}, "reply_to_user": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1507133158, "post_id": 46569091, "comment_id": 80092535, "body": "they are symmetric iff it is equal to its transpose @DevNull"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507133225, "post_id": 46569091, "comment_id": 80092565, "body": "You seem to be saying that the program <i>always</i> returns the wrong answer, whether the input is symmetric or non-symmetric.  If that&#39;s true then it seems your code is working, but you are somewhere inverting the sense of the result.  Inverting it back should then solve the problem."}, {"owner": {"reputation": 89, "user_id": 8720051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc9af77fda8ebd7afbbb04f79cdaab1b?s=128&d=identicon&r=PG&f=1", "display_name": "Denise", "link": "https://stackoverflow.com/users/8720051/denise"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507133341, "post_id": 46569091, "comment_id": 80092655, "body": "like for eg i keyed in a symmetric input, the result will be yes. And if i keyed non symmetric input, the result will still be yes... @JohnBollinger"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1507133359, "post_id": 46569091, "comment_id": 80092666, "body": "I&#39;d recommend a slightly different signature: <code>bool isSymmetric2D(&#47;* as was.. *&#47;)</code> - need to <code>#include &lt;stdbool.h&gt;</code> for, though."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1507133711, "post_id": 46569091, "comment_id": 80092872, "body": "@DevNull Taking into account this assignment M[h][k] = M[k][h];  it looks like he means main diagonal symmetric for a square two-dimensional array.:)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1507133740, "post_id": 46569091, "comment_id": 80092888, "body": "A little off-topic, but get used to check user input right from the start: <code>rowSize</code> and <code>colSize</code> must not exceed <code>SIZE</code> (using <code>unsigned int</code> makes checking for negative numbers obsolete...), and you cannot have a symmetry if numbers of rows and cols are not equal. After every call to scanf, you should check for fail bits being set (invalid user input such as &quot;xyz&quot; leads to!): <a href=\"https://linux.die.net/man/3/ferror\" rel=\"nofollow noreferrer\"><code>ferror</code></a>-function."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1507134103, "post_id": 46569091, "comment_id": 80093091, "body": "@VladfromMoscow Very true. I like like to encourage SO posters (especially new ones) to be very explicit with their intent. :)"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1507134835, "last_edit_date": 1507134835, "creation_date": 1507134525, "answer_id": 46569799, "question_id": 46569091, "link": "https://stackoverflow.com/questions/46569091/find-symmetry-in-array/46569799#46569799", "title": "Find symmetry in Array", "body": "<p>Several issues:</p>\n\n<ol>\n<li><p>By your definition, a matrix is symmetric if and only if it is equal to its transpose.  That can be the case only for square matrices, yet you accommodate non-square matrices as well, for no apparent reason.</p></li>\n<li><p>Your <code>symmetry2D()</code> function contains serious logical flaws:</p>\n\n<ul>\n<li><p>It <em>makes</em> the input symmetric via the loop that performs <code>M[h][k] = M[k][h]</code></p></li>\n<li><p>Even if it did not do so, it would never find the input non-symmetric, because its test for that is <code>if (M[h][k] != M[h][k])</code>, which must always fail.</p></li>\n</ul></li>\n<li><p>It's unclear what you think the <code>if</code>/<code>else</code> and loop nest at the end of <code>symmetry2D()</code> are achieving for you, but provided that <code>rowSize</code> and <code>colSize</code> are both greater than zero, the <em>actual</em> effect of the whole construct is the same as a simple <code>return result;</code>.</p></li>\n</ol>\n\n<p>It looks like the idea might have been to create an array containing the transpose of the input, and then compare the input to that.  That would have worked, despite being rather grotesquely inefficient, but you never in fact create that separate array for the transpose.  If you're going to test without creating the transpose -- which you should -- then</p>\n\n<ol>\n<li><p>Do not modify the input array (so remove the first loop nest altogether).</p></li>\n<li><p>Get your indexing right for the symmetry comparisons: <code>M[h][k] != M[k][h]</code></p></li>\n<li><p>For best efficiency, avoid redundant and needless comparisons.  For example, if you have already tested the <code>M[1][2] == M[2][1]</code> then you do not need to test whether <code>M[2][1] == M[1][2]</code>.  And you never need to test elements on the main diagonal.  You could achieve this efficiency pretty easily with a better choice of loop bounds.</p></li>\n</ol>\n\n<p>Also, if indeed the <code>symmetry2D()</code> function is supposed to avoid modifying the input array, consider declaring the element type for its first argument to be <code>const int</code> instead of plain <code>int</code> (but do not modify the type of the corresponding variable in <code>main()</code>).  If you had written it that way in the first place then the compiler would have noticed the function's logically erroneous attempt to modify the array elements, and rejected the code.</p>\n"}], "owner": {"reputation": 89, "user_id": 8720051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc9af77fda8ebd7afbbb04f79cdaab1b?s=128&d=identicon&r=PG&f=1", "display_name": "Denise", "link": "https://stackoverflow.com/users/8720051/denise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507135451, "creation_date": 1507132128, "last_edit_date": 1507133238, "question_id": 46569091, "link": "https://stackoverflow.com/questions/46569091/find-symmetry-in-array", "title": "Find symmetry in Array", "body": "<p>Hi i need to check if the array is symmetry or not. i have a function that  takes in a two-dimensional array of integer numbers M and the array sizes for rows and columns as parameters, and returns 1 if M is symmetric or 0 otherwise. I tried many times but the output will be either yes to non-symmetric array or no to symmetric array</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define SIZE 10\n#define INIT_VALUE -1\nint symmetry2D(int M[][SIZE], int rowSize, int colSize);\nint main()\n{\n    int M[SIZE][SIZE], i, j, result = INIT_VALUE;\n    int rowSize, colSize;\n    printf(\"Enter the array size (rowSize, colSize): \\n\");\n    scanf(\"%d %d\", &amp;rowSize, &amp;colSize);\n    printf(\"Enter the matrix (%dx%d): \\n\", rowSize, colSize);\n    for (i = 0; i &lt; rowSize; i++)\n        for (j = 0; j &lt; colSize; j++)\n            scanf(\"%d\", &amp;M[i][j]);\n    result = symmetry2D(M, rowSize, colSize);\n    if (result == 1)\n        printf(\"symmetry2D(): No\\n\");\n    else if (result == 0)\n        printf(\"symmetry2D(): Yes\\n\");\n    else\n        printf(\"Error\\n\");\n    return 0;\n}\n\nint symmetry2D(int M[][SIZE], int rowSize, int colSize)\n{\n    int h, k, temp;\n    int result;\n\n    for (h = 0; h &lt; rowSize; h++)\n    {\n        for (k = 0; k &lt; colSize; k++)\n        {\n            M[h][k] = M[k][h];\n        }\n\n    }\n\n    result = 0;\n    for (h = 0; h &lt; rowSize &amp;&amp; result; h++)\n    {\n        for (k = 0; k &lt; colSize; k++)\n        {\n            //if it is not equal to its transpose\n            if (M[h][k] != M[h][k])\n            {\n                result = 1;\n                break;\n            }\n\n        }\n    }\n\n    if (result == 0)\n    {\n        for (h = 0; h &lt; rowSize; h++)\n        {\n            for (k = 0; k &lt; colSize; k++)\n            {\n                return result = 0;\n            }\n\n        }\n\n    }\n    else\n        return result = 1;\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "intrinsics", "neon"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507134670, "post_id": 46568992, "comment_id": 80093383, "body": "What type is <code>array[]</code>?  I&#39;m assuming it&#39;s an array of bytes, but which your C sort of implies.  You&#39;d want a vector of <code>1 2 4 8</code> which you mask with the compare result.  But then you&#39;d need a shuffle to pack that result into the low 4 bytes of a NEON register, I think.  I don&#39;t know NEON very well, but probably if you can do that, you&#39;d then want to do a 32-bit load of the array, do a packed OR, and store."}, {"owner": {"reputation": 71, "user_id": 7203839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aafb1fdb449acf802d05f8f0474b9e4?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshmi", "link": "https://stackoverflow.com/users/7203839/lakshmi"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507136234, "post_id": 46568992, "comment_id": 80094200, "body": "array[] is of type unsigned char. The compare result is of type int32x4_t hence I cannot use that mask. Is there any other way to help me with this"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507136610, "post_id": 46568992, "comment_id": 80094383, "body": "But doesn&#39;t NEON have any byte-shuffle instructions you could use to pack 1 byte from each element of the compare result?"}, {"owner": {"reputation": 71, "user_id": 7203839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aafb1fdb449acf802d05f8f0474b9e4?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshmi", "link": "https://stackoverflow.com/users/7203839/lakshmi"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507137213, "post_id": 46568992, "comment_id": 80094679, "body": "I don&#39;t know how I can do that; Each lane in that result vector is 4 bytes. Too many unpacking will not benefit the neon optimisation."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1507145313, "post_id": 46568992, "comment_id": 80099060, "body": "<code>neon_gt_result &amp;= (appropriate_vectype){1,2,4,8}; neon_gt_result2 = vpadd_appropriate_size(neon_gt_result); neon_gt_result3 = vpadd_twice_appropriate_size(neon_gt_result2); appropriate_read_modify_write_sequence(neon_gt_result3, array);</code> That&#39;s two extra <code>vpadd()</code> instructions and a bitwise AND in addition to your comparison. I&#39;d say that&#39;s pretty good, I&#39;d be more worried about the memory interaction."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507152994, "post_id": 46568992, "comment_id": 80102667, "body": "Oh, I missed that these are all going into the same byte, like x86 SSE <code>movmskps</code>.  I was thinking @Lakshmi wanted to update <code>array[0]</code>, <code>array[1]</code>, ... <code>array[3]</code>.  I updated the title to make it more specific."}, {"owner": {"reputation": 71, "user_id": 7203839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aafb1fdb449acf802d05f8f0474b9e4?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshmi", "link": "https://stackoverflow.com/users/7203839/lakshmi"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507198157, "post_id": 46568992, "comment_id": 80118819, "body": "Thanks @PeterCordes. Let me try it out."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522091771, "post_id": 46568992, "comment_id": 86001977, "body": "Related: <a href=\"https://stackoverflow.com/questions/11870910/sse-mm-movemask-epi8-equivalent-method-for-arm-neon\">SSE _mm_movemask_epi8 equivalent method for ARM NEON</a>: the 8-bit element equivalent of this, producing a bitmap of 16 single-byte elements."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522165755, "post_id": 46744768, "comment_id": 86039959, "body": "Related for packing <i>two</i> compare results into an 8-bit bitmap (if you mask them with <code>&amp;1</code> first): <a href=\"https://stackoverflow.com/questions/49506114/how-to-or-all-lane-of-a-neon-vector\" title=\"how to or all lane of a neon vector\">stackoverflow.com/questions/49506114/&hellip;</a>"}, {"owner": {"reputation": 129, "user_id": 5283216, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/257bf58ea2d86758983b5da93e046575?s=128&d=identicon&r=PG", "display_name": "daquexian", "link": "https://stackoverflow.com/users/5283216/daquexian"}, "edited": false, "score": 1, "creation_date": 1536552906, "post_id": 46744768, "comment_id": 91449620, "body": "What about aarch64? In aarch64 v registers don&#39;t have overlapped d registers"}, {"owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "reply_to_user": {"reputation": 129, "user_id": 5283216, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/257bf58ea2d86758983b5da93e046575?s=128&d=identicon&r=PG", "display_name": "daquexian", "link": "https://stackoverflow.com/users/5283216/daquexian"}, "edited": false, "score": 0, "creation_date": 1537108605, "post_id": 46744768, "comment_id": 91654893, "body": "@daquexian in that case, you just do <code>and</code> with {1, 2, 4, 8} followed by <code>addv</code>."}], "tags": [], "owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "is_accepted": false, "score": 3, "last_activity_date": 1508237763, "last_edit_date": 1508237763, "creation_date": 1507985385, "answer_id": 46744768, "question_id": 46568992, "link": "https://stackoverflow.com/questions/46568992/neon-pack-vector-compare-result-into-bitmap/46744768#46744768", "title": "NEON pack vector compare result into bitmap", "body": "<pre><code>vmov.i32 qmask, #1\nvand qres, qmask, qres\nvsra.u64 qres, qres, #30\nvsli.64 dres_bottom, dres_top, #2\n</code></pre>\n\n<p>And you have the bits you need at the four least significant bits of qres.</p>\n\n<p>//////////////////////// edit</p>\n\n<p>An improved version of above:</p>\n\n<pre><code>vshr.u64 qres, qres, #31\nvsli.64 dres_bot, dres_top, #2\n// the four LSBs already contain the bitmap, the rest is optional:\nvbic.i16 dres_bot, #0xf0\n// you can now use byte 0 of dres_bot as the result.\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7203839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aafb1fdb449acf802d05f8f0474b9e4?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshmi", "link": "https://stackoverflow.com/users/7203839/lakshmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1508237763, "creation_date": 1507131871, "last_edit_date": 1507152845, "question_id": 46568992, "link": "https://stackoverflow.com/questions/46568992/neon-pack-vector-compare-result-into-bitmap", "title": "NEON pack vector compare result into bitmap", "body": "<p>I have a comparison result of comparison of two floating point operands as follows; What I need to do is based on the result of comparison need to perform the following: i.e: </p>\n\n<pre><code>neon_gt_res = vcgtq_f32(temp1, temp2);\nif(neon_gt_res[0]) array[0] |= (unsigned char)0x01;\nif(neon_gt_res[1]) array[0] |= (unsigned char)0x02;\nif(neon_gt_res[2]) array[0] |= (unsigned char)0x04;\nif(neon_gt_res[3]) array[0] |= (unsigned char)0x08;\n</code></pre>\n\n<p>But writing like this is again equivalent to multiple comparison. How do I optimally write this in neon C intrinsics.</p>\n\n<p>On x86, this would be <code>array[0] |= _mm_movemask_ps(cmp_gt_res);</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1507131701, "post_id": 46568889, "comment_id": 80091541, "body": "Sounds like you are asking SO to debug it for you..."}, {"owner": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "edited": false, "score": 0, "creation_date": 1507131781, "post_id": 46568889, "comment_id": 80091614, "body": "Have you tried using gdb/lldb to see where the problem is?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1507135552, "post_id": 46568889, "comment_id": 80093879, "body": "This is not technically difficult to debug, it&#39;s just hard work with test cases, paper/pencil diagrams, stepping through with the debugger, inspecting variable values at each step and so finding out where the desired and actual behaviour diverge."}], "answers": [{"comments": [{"owner": {"reputation": 814, "user_id": 2352665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7eaa37741dcbba9e1e8afcec8ef49b2?s=128&d=identicon&r=PG", "display_name": "Alejandro Caro", "link": "https://stackoverflow.com/users/2352665/alejandro-caro"}, "edited": false, "score": 0, "creation_date": 1507154977, "post_id": 46573999, "comment_id": 80103422, "body": "Now when I give you to display the number I entered (for example a 4) LIST: 4-&gt; and then the program hangs. The last node should be badly pointed or something"}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "reply_to_user": {"reputation": 814, "user_id": 2352665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7eaa37741dcbba9e1e8afcec8ef49b2?s=128&d=identicon&r=PG", "display_name": "Alejandro Caro", "link": "https://stackoverflow.com/users/2352665/alejandro-caro"}, "edited": false, "score": 0, "creation_date": 1507156401, "post_id": 46573999, "comment_id": 80103899, "body": "Just debug the application and see where it breaks"}, {"owner": {"reputation": 814, "user_id": 2352665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7eaa37741dcbba9e1e8afcec8ef49b2?s=128&d=identicon&r=PG", "display_name": "Alejandro Caro", "link": "https://stackoverflow.com/users/2352665/alejandro-caro"}, "edited": false, "score": 0, "creation_date": 1507157311, "post_id": 46573999, "comment_id": 80104159, "body": "I will try to be more precise. The program is executed (pulse 1 to insert and enter a new element and pulse enter)."}, {"owner": {"reputation": 814, "user_id": 2352665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7eaa37741dcbba9e1e8afcec8ef49b2?s=128&d=identicon&r=PG", "display_name": "Alejandro Caro", "link": "https://stackoverflow.com/users/2352665/alejandro-caro"}, "edited": false, "score": 0, "creation_date": 1507157321, "post_id": 46573999, "comment_id": 80104166, "body": "Until then everything correct with the correction that you marked me. Thank you."}, {"owner": {"reputation": 814, "user_id": 2352665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7eaa37741dcbba9e1e8afcec8ef49b2?s=128&d=identicon&r=PG", "display_name": "Alejandro Caro", "link": "https://stackoverflow.com/users/2352665/alejandro-caro"}, "edited": false, "score": 0, "creation_date": 1507157326, "post_id": 46573999, "comment_id": 80104169, "body": "Then I want to display the number by pressing for example 2 and the item entered is shown with an arrow to the right but the program is hung. The same goes for the other options except the exit option."}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": true, "score": 0, "last_activity_date": 1507151358, "last_edit_date": 1507151358, "creation_date": 1507150434, "answer_id": 46573999, "question_id": 46568889, "link": "https://stackoverflow.com/questions/46568889/doubly-linked-circular-list/46573999#46573999", "title": "Doubly linked circular list", "body": "<p>In your first execution of method 'insertard' you are actually assigning P=CAB; i.e. P=NULL and in the blow line of code you are referring a null pointer to assign value.</p>\n\n<p>P->sig=AUX;</p>\n\n<p>I have modified your method which might fix it.</p>\n\n<pre><code>void insertard(void)\n{\n    P=CAB;/* very first execution of this method P=NULL */\n    AUX=(struct lista *)malloc(sizeof(struct lista));\n    system(\"cls\");\n    printf(\"INGRESE UN NUMERO ENTERO:\");\n    scanf(\"%d\",&amp;AUX-&gt;info);\n    AUX-&gt;sig=CAB;\n    AUX-&gt;ant=CAB;\n    F=AUX;\n    if(CAB==NULL){\n        CAB=AUX;\n        P = AUX;/*first execution of this method P is no longer NULL but P is pointing to AUX */\n    }else{ //ESTO SI\n        while (P-&gt;sig!=CAB){\n            P=P-&gt;sig;\n    }\n        P-&gt;sig=AUX;\n        AUX-&gt;ant=P;\n        AUX-&gt;sig=CAB;\n}\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 2352665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7eaa37741dcbba9e1e8afcec8ef49b2?s=128&d=identicon&r=PG", "display_name": "Alejandro Caro", "link": "https://stackoverflow.com/users/2352665/alejandro-caro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 46573999, "answer_count": 1, "score": -3, "last_activity_date": 1507151358, "creation_date": 1507131575, "question_id": 46568889, "link": "https://stackoverflow.com/questions/46568889/doubly-linked-circular-list", "title": "Doubly linked circular list", "body": "<p>This code tries to implement a doubly linked circular list</p>\n\n<p>The code compiles, does not throw error, but when entering a number is hung where is the fault? Pretend that the signs in Spanish are in English</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct lista\n{\n    int info;\n    struct lista *sig,*ant;\n}*CAB=NULL,*AUX=NULL,*Q=NULL,*P=NULL,*F=NULL,*QD=NULL,*FD=NULL;\n</code></pre>\n\n<p>main menu</p>\n\n<pre><code>int main() {\n    void insertard(void);\n    void extraerd(void);\n    void visualizard(void);\n    void visualizari(void);\n    void eliminardespues();\n    void eliminarantes();\n    char opc;\n    do{\n        system(\"cls\");\n        printf(\"___________________________________________________\\n\");\n        printf(\"_\u00a1\u00a1\u00a1MENU DE LISTA CIRCULAR DOBLEMENTE ENLAZADA!!!__\\n\");\n        printf(\"___________________________________________________\\n\");\n        printf(\"____________SELECCIONE UNA OPCION__________________\\n\");\n        printf(\"___________________________________________________\\n\");\n        printf(\"___________________________________________________\\n\");\n        printf(\"__________1) INSERTAR______________________________\\n\");\n        printf(\"__________2) VISUALIZAR ASCENDIENTE________________\\n\");\n        printf(\"__________3) VISUALIZAR DESCENDIENTE_______________\\n\");\n        printf(\"__________4) INGRESAR Y ELIMINAR SIGUIENTE_________\\n\");\n        printf(\"__________5) INGRESAR Y ELIMINAR ANTERIOR__________\\n\");\n        printf(\"__________6) SALIR_________________________________\\n\");\n        printf(\"___________________________________________________\\n\");\n        opc=getch();\n        switch(opc)\n        {\n        case '1':\n            insertard();\n            break;\n        case '2':\n            visualizard();\n            break;\n        case '3':\n            visualizari();\n            break;\n        case '4':\n            eliminarantes();\n            break;\n        }\n    } while(opc!='6');\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>Process insertard </p>\n\n<pre><code>void insertard(void)\n{\n    P=CAB;\n    AUX=(struct lista *)malloc(sizeof(struct lista));\n    system(\"cls\");\n    printf(\"INGRESE UN NUMERO ENTERO:\");\n    scanf(\"%d\",&amp;AUX-&gt;info);\n    AUX-&gt;sig=CAB;\n    AUX-&gt;ant=CAB;\n    F=AUX;\n    if(CAB==NULL)\n        CAB=AUX;\n    }else{ //ESTO SI\n        while (P-&gt;sig!=CAB){\n            P=P-&gt;sig;\n    }\n        P-&gt;sig=AUX;\n        AUX-&gt;ant=P;\n        AUX-&gt;sig=CAB;\n}\n</code></pre>\n\n<p>eliminardespues Process (Deletes an item after the list)</p>\n\n<pre><code>void eliminardespues(){\n    int x;\n    system(\"cls\");\n    printf(\"INGRESE UN NUMERO PARA ELIMINAR EL SIGUIENTE:\");\n    scanf(\"%d\",&amp;x);\n\n    FD=CAB;\n    QD=CAB;\n    while(FD-&gt;info!=x&amp;&amp;FD-&gt;sig!=CAB){\n    FD=FD-&gt;sig;\n    }QD=FD-&gt;sig;\n\n    if(FD-&gt;sig==CAB&amp;&amp;FD-&gt;info!=x){\n        printf(\"\\nEL NUMERO INGRESADO NO SE ENCUENTA EN LA LISTA\");\n    }else{\n        if(FD-&gt;info==x){\n            FD-&gt;sig=QD-&gt;sig;\n            (QD-&gt;sig)-&gt;ant=FD;\n            printf(\"\\nELIMINADO %d\",QD-&gt;info);\n            free(Q);\n        }\n    }\n    getch();\n}\n</code></pre>\n\n<p>Process eliminarantes  </p>\n\n<pre><code>void eliminarantes()\n{\n    int x;\n    system(\"cls\");\n    printf(\"INGRESE UN NUMERO PARA ELIMINAR EL ANTERIOR\");\n    scanf(\"%d\",&amp;x);\n\n    FD=CAB;\n    QD=CAB;\n    while (FD-&gt;info!=x&amp;&amp;FD-&gt;sig!=CAB){\n        FD=FD-&gt;sig;\n    }QD=FD-&gt;ant;\n    if(FD-&gt;sig==CAB&amp;&amp;FD-&gt;info!=x){\n        printf(\"\\nEL NUMERO INGRESADO NO SE ENCUENTA EN LA LISTA\");\n    }else{\n        if(FD-&gt;info==x){\n            FD-&gt;ant=QD-&gt;ant;\n            (QD-&gt;ant)-&gt;sig=FD;\n            printf(\"\\nELIMINADO %d\",QD-&gt;info);\n            free(Q);\n        }\n    }\n    getch();\n}\n\nvoid visualizard(void)\n{\n    system(\"cls\");\n    if(CAB==NULL){\n        printf(\"LISTA VACIA\");\n        getchar();\n        return;\n    }\n    AUX=CAB;\n    printf(\"LISTA:\\n\\n\");\n    while(AUX-&gt;sig!=CAB){\n        printf(\"-&gt; %d\\n\",AUX-&gt;info);\n        AUX=AUX-&gt;sig;\n    }\n    if(AUX-&gt;sig==CAB){\n        printf(\"-&gt; %d\\n\",AUX-&gt;info);\n    }\n    getch();\n}\n\nvoid visualizari(void){\n    system(\"cls\");\n    if(F==NULL){\n        printf(\"LISTA VACIA\");\n        getchar();\n        return;\n    }\n    AUX=F;\n    printf(\"LISTA:\\n\\n\");\n    do{\n        printf(\"-&gt; %d\\n\",AUX-&gt;info);\n        AUX=AUX-&gt;ant;\n    }while(AUX-&gt;sig!=CAB);\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "stdout"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1507130992, "post_id": 46568655, "comment_id": 80091065, "body": "This is completely implementation defined. Why are you asking?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1507131064, "post_id": 46568655, "comment_id": 80091121, "body": "You can check on your particular system, and if you use linux or OS X you can do it quickly and easily with valgrind."}, {"owner": {"reputation": 43, "user_id": 7821431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uiKCH.png?s=128&g=1", "display_name": "MKB 06", "link": "https://stackoverflow.com/users/7821431/mkb-06"}, "edited": false, "score": 1, "creation_date": 1507131127, "post_id": 46568655, "comment_id": 80091150, "body": "It&#39;s new for me, I&#39;m just curious about how it work."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1507131535, "post_id": 46568655, "comment_id": 80091423, "body": "Not only is it implementation-defined, but on any given implementation it may depend on how you run the program."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1507132099, "post_id": 46568655, "comment_id": 80091815, "body": "You don&#39;t need to care."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7821431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uiKCH.png?s=128&g=1", "display_name": "MKB 06", "link": "https://stackoverflow.com/users/7821431/mkb-06"}, "edited": false, "score": 0, "creation_date": 1507183676, "post_id": 46569911, "comment_id": 80110680, "body": "Thanks! This is what I wanted."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 3, "last_activity_date": 1507134933, "creation_date": 1507134933, "answer_id": 46569911, "question_id": 46568655, "link": "https://stackoverflow.com/questions/46568655/does-writing-to-standard-output-allocate-memory/46569911#46569911", "title": "Does writing to standard output allocate memory?", "body": "<p>Does this allocate memory? It depends on the OS. The OS may need to create some internal temporary buffers to hold the data, but then again, it might use some preallocated space for the data. There\u2019s no way to know without cracking open the OS and seeing how it works, and the answer might differ from system to system or even from run to run.</p>\n\n<p>Does this allocate memory <em>that you need to deallocate?</em> Nope! The OS cleans up its own messes, and so from your perspective you don\u2019t need to free anything. Generally, you only need to free memory that you explicitly allocate, and system calls like these don\u2019t assign that responsibility to you.</p>\n\n<p>Should this matter? Probably not. Typically, you\u2019d only worry about this if you were transferring colossal amounts of memory and seeing an associated performance hit that led you to investigate what aaa going on.</p>\n"}], "owner": {"reputation": 43, "user_id": 7821431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uiKCH.png?s=128&g=1", "display_name": "MKB 06", "link": "https://stackoverflow.com/users/7821431/mkb-06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 46569911, "answer_count": 1, "score": -2, "last_activity_date": 1507136197, "creation_date": 1507130944, "last_edit_date": 1507136197, "question_id": 46568655, "link": "https://stackoverflow.com/questions/46568655/does-writing-to-standard-output-allocate-memory", "title": "Does writing to standard output allocate memory?", "body": "<p>I'm new in C programming so I'm curious about the notion of memory allocation.</p>\n\n<p>Does writing to standard output allocate memory?</p>\n\n<p>For example:</p>\n\n<pre><code>    write(fd, 'X', 1); //where fd is a specific file descriptor (not 1, 2 or 0)\n</code></pre>\n\n<p>In this case this code add an 'X' character in the file correspondent to the fd, so memory is allocated in the specific file.\nBut here:</p>\n\n<pre><code>    write(1, 'X', 1);\n</code></pre>\n\n<p>Is memory allocated? If yes, where? If no, why and how is 'X' displayed in the standard output?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1507129985, "post_id": 46568310, "comment_id": 80090450, "body": "Please look up operator precedence and associativity"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507130023, "post_id": 46568310, "comment_id": 80090483, "body": "Think about when the increment happen in relation to the assignment to <code>x</code>. Also consider the difference between <code>*p++</code> and <code>*++p</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1507130144, "post_id": 46568310, "comment_id": 80090556, "body": "Also think about <i>where</i> <code>p</code> is pointing after it has been incremented, and learn about <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507130777, "post_id": 46568310, "comment_id": 80090922, "body": "@Someprogrammerdude: Judging from OP&#39;s comment about program001&#39;s result, it seems to me he has already thought about where <code>p</code> is pointing and about the consequences of undefined behavior."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1507133189, "post_id": 46568310, "comment_id": 80092555, "body": "What logic did take you to the conclusion that the results will be the same? Because it is an UB, there is no expected program output"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 4, "last_activity_date": 1507131539, "last_edit_date": 1507131539, "creation_date": 1507130666, "answer_id": 46568561, "question_id": 46568310, "link": "https://stackoverflow.com/questions/46568310/what-is-the-difference-between-x-p-and-p-x-p-in-c/46568561#46568561", "title": "what is the difference between x=*p++ and *p++\uff1b x=*p in c?", "body": "<p>From example 1:</p>\n\n<pre><code>*p++;\nx=*p;\n</code></pre>\n\n<p>can be rewritten as</p>\n\n<pre><code>*p;    // dereference p and ignore the value. Valid as p points to a\np++;   // increment p\nx=*p;  // dereference p and assign the value to x. Invalid as p no longer\n       // points to an int object\n</code></pre>\n\n<p>From example 2:</p>\n\n<pre><code>x = *p++;\n</code></pre>\n\n<p>can be rewritten as</p>\n\n<pre><code>x = *p;    // dereference p and assign the value to x.  Valid as p points to a\np++;       // increment p\n</code></pre>\n\n<p>So in example 1 you assign to x <strong>after</strong> p is incremented. In example 2 you assign to x <strong>before</strong> p is incremented.</p>\n\n<p>Both examples has undefined behaviour, e.g. due to <code>*p</code> in the print statement where <code>p</code> is dereferenced even though it doesn't point to a <code>int</code> object anymore as <code>p</code> was incremented. In example 1 the undefined behavior already happens at <code>x=*p;</code></p>\n"}, {"tags": [], "owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 0, "last_activity_date": 1507131347, "creation_date": 1507131347, "answer_id": 46568800, "question_id": 46568310, "link": "https://stackoverflow.com/questions/46568310/what-is-the-difference-between-x-p-and-p-x-p-in-c/46568800#46568800", "title": "what is the difference between x=*p++ and *p++\uff1b x=*p in c?", "body": "<p>From the point of the behavior of the two programs, there is no difference. Both programs have Undefined Behavior on all control paths. So both programs can crash, can halt, can run infinitely, can print anything or not print anything at all.</p>\n"}], "owner": {"reputation": 1, "user_id": 1519489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eea325a3939e79b673c060f041c3c50?s=128&d=identicon&r=PG", "display_name": "Zhen Zhou", "link": "https://stackoverflow.com/users/1519489/zhen-zhou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "closed_date": 1508105191, "answer_count": 2, "score": -1, "last_activity_date": 1507137530, "creation_date": 1507129858, "last_edit_date": 1507137530, "question_id": 46568310, "link": "https://stackoverflow.com/questions/46568310/what-is-the-difference-between-x-p-and-p-x-p-in-c", "closed_reason": "Duplicate", "title": "what is the difference between x=*p++ and *p++\uff1b x=*p in c?", "body": "<p>Why the below is difference?</p>\n\n<p>program001.c: </p>\n\n<pre><code>int main (void)  \n{ \n    int a=3,*p,x;\n    p=&amp;a;       \n    *p++;\n    x=*p\n    printf(\"a=%d, *p=%d, x=%d\\n\",a, *p, x);\n    return 0;\n}\n\nresult: a=3,*p=21974,x=21974\n</code></pre>\n\n<p>Program002.c:</p>\n\n<pre><code>int main (void)  \n{ \n    int a=3,*p,x;\n    p=&amp;a;       \n    x=*p++; \n    printf(\"a=%d,*p=%d,x=%d\\n\",a,*p,x);\n    return 0;\n}\n\nresult:a=3,*p=3,x=3\n</code></pre>\n\n<p>for program001's result, it can be understand: *p++ is point to undefined value, so it is unreasonable result.</p>\n\n<p>for program002's result, why it is not equal to program001?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1507132733, "post_id": 46568258, "comment_id": 80092251, "body": "Your code has a typo: <code>MAP_SHARE</code> should be <code>MAP_SHARED</code>.  But that&#39;s clearly not the problem. Please run <code>sudo strace -o &#47;tmp&#47;devmem.log.txt busybox devmem 0xc00b0a8c w 0xffffffff</code> and then put the file /tmp/devmem.log.txt somewhere we can see it.  (It will be too long to incorporate into the question, and unfortunately we need to see the entire thing, unedited.)  If you get &quot;strace: command not found&quot; then you will need to install the program first (most Linux distributions put it in a package also called &quot;strace&quot;)."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1507132845, "post_id": 46568258, "comment_id": 80092334, "body": "Skimming the code at <a href=\"http://elixir.free-electrons.com/linux/latest/source/drivers/char/mem.c\" rel=\"nofollow noreferrer\">elixir.free-electrons.com/linux/latest/source/drivers/char/&hellip;</a> gives me the impression that what you are trying to do <i>is</i> supposed to work - but I&#39;m not a kernel hacker and I may have misunderstood it."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1507132954, "post_id": 46568258, "comment_id": 80092407, "body": "Are you sure that <i>something is mapped</i> to the address you&#39;re writing to? A PCI device needs to ask the BIOS or the OS for a physical mapping address. If that is not done, the device&#39;s memory space will remain isolated from the bus."}, {"owner": {"reputation": 186, "user_id": 8657938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7924493761f5c1e272185206b329bfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Krassi Em", "link": "https://stackoverflow.com/users/8657938/krassi-em"}, "edited": false, "score": 2, "creation_date": 1507138408, "post_id": 46568258, "comment_id": 80095324, "body": "And the code does not fail. :) yes, you simply ignore the return code of open() function"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1507155358, "post_id": 46568258, "comment_id": 80103541, "body": "Also see <a href=\"https://stackoverflow.com/q/9662193/608639\">How to access kernel space from user space?</a>, <a href=\"https://stackoverflow.com/q/11891979/608639\">How to access mmaped /dev/mem without crashing the Linux kernel?</a>, <a href=\"https://stackoverflow.com/q/39134990/608639\">mmap of /dev/mem fails with invalid argument</a>, etc."}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 8492043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6eb12865ce93e8a2b747c5fc5cff3a0?s=128&d=identicon&r=PG&f=1", "display_name": "Dsrivast", "link": "https://stackoverflow.com/users/8492043/dsrivast"}, "is_accepted": false, "score": 0, "last_activity_date": 1574804146, "creation_date": 1574804146, "answer_id": 59059683, "question_id": 46568258, "link": "https://stackoverflow.com/questions/46568258/not-able-to-write-in-dev-mem/59059683#59059683", "title": "Not able to write in /dev/mem", "body": "<p>There is a CONFIG_STRICT_DEVMEM kernel config option. My understanding is that it must be set at compile-time as  CONFIG_STRICT_DEVMEM=n. This is a security reasons.</p>\n"}], "owner": {"reputation": 1056, "user_id": 2856041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fFDaa.jpg?s=128&g=1", "display_name": "horro", "link": "https://stackoverflow.com/users/2856041/horro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2254, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1574804146, "creation_date": 1507129724, "last_edit_date": 1507220344, "question_id": 46568258, "link": "https://stackoverflow.com/questions/46568258/not-able-to-write-in-dev-mem", "title": "Not able to write in /dev/mem", "body": "<p>The issue that I am experimenting is not related with <code>open()</code> or <code>mmap()</code> function, which are executed properly. I have disabled <code>CONFIG_STRICT_DEVMEM</code> in the kernel so I can read from <code>/dev/mem</code> without problems. Actually, I can do the following:</p>\n\n<pre><code>const char *path = \"/dev/mem\"\nint fd = open(path, O_RDWR); /* read and write flags*/\np  = mmap(0, SIZE, PROT_READ | PROT_WRITE, MAP_SHARED, fd, BASE_ADDR); /* read and write flags*/\n</code></pre>\n\n<p>And the code does not fail. Nonetheless, I am using this code to write in the PCI address space. So, basically the <code>BASE_ADDR</code> is <code>0xc000000</code>, and the size is 256 MiB (<code>0x10000000</code>, all the PCI address space).</p>\n\n<p>Said that, when I try to write on these positions (with a specific offset, BDF format), nothing is written; again the code does not fail, it just does not write anything. </p>\n\n<p>In case my code was wrong, I tried <a href=\"https://busybox.net/about.html\" rel=\"nofollow noreferrer\">BusyBox</a>, with the following parameters:</p>\n\n<pre><code>[horro@ ~]$ sudo busybox devmem 0xc00b0a8c w 0xffffffff\n[horro@ ~]$ sudo busybox devmem 0xc00b0a8c             \n0x00000000\n</code></pre>\n\n<p>So, basically it is not writing anything.</p>\n"}, {"tags": ["c", "multithreading", "embedded-linux", "deadlock"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1507131288, "post_id": 46568234, "comment_id": 80091257, "body": "When a thread is about to acquire a system resource, store a time stamp for the parent thread. When a thread gets the system resource, invalidate the time stamp. If the parent thread sees a time stamp that is out-of-date by more than some limit, it can declare that the system is deadlocked."}, {"owner": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1507131943, "post_id": 46568234, "comment_id": 80091720, "body": "What do you mean by store a time stamp for the parent thread? How parent thread will know that child thread is about to acquire a system resource. Could you please share a sample example to achieve my goal"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1507134465, "post_id": 46568234, "comment_id": 80093281, "body": "The OS cannot determine this in any effective way.  You need to build in such checking into your app design, should you desire it, can design it, and if you can implement it without introducing more problems than it solves."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507186006, "post_id": 46571933, "comment_id": 80111662, "body": "I think 2nd case will work for some of the cases. Lets assume , thread called select in loop and thread is in blocking state. It loop will continue only if select get signal and then only &#39;state variable&#39; is updated. Main thread which is monitoring  this thread at some interval will get old state variable value  since select is not triggered at that interval of time in which main thread is checking state variable, Since Main thread checked that it holds old value , it report a deadlock however thread is not in deadlock state."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507186900, "post_id": 46571933, "comment_id": 80112127, "body": "@VikashRanjan You have to set an appropriate timeout in <code>select</code>. Otherwise, add a pipe end to the <code>select</code> set and have the monitoring thread use it to trigger. Yes, this has to be built into the design -- it&#39;s no something you sprinkle on top randomly."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507188074, "post_id": 46571933, "comment_id": 80112779, "body": "@VikashRanjan Read my answer. That&#39;s precisely what I explain. Design the thread to increment a state variable every so often and if it&#39;s not changing, it&#39;s deadlocked."}, {"owner": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507188336, "post_id": 46571933, "comment_id": 80112920, "body": "I think above monitoring check will be work for specific design.                     Is it any way to get the thread status whether it is in deadlock or not? Is it any way  to know thread  state is in D (Uninterruptible sleep)?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507205532, "post_id": 46571933, "comment_id": 80123448, "body": "@VikashRanjan I don&#39;t understand what you&#39;re asking. My answer explains a way to do that. If the thread is stuck in uninterruptible sleep, it won&#39;t be able to change the shared variable, which the monitoring thread could detect."}, {"owner": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507212306, "post_id": 46571933, "comment_id": 80128451, "body": "1.Is it any way  to know what is the state( TASK_RUNNING, TASK_UNINTERUPTIBLE or TASK_INTERUPTIBLE) of that thread ?                                                                                             2. If a thread is in deadlock state does it mean thread state will be always in D (Uninterruptible sleep)?                                                                                                              If  We know answer of 1st and if 2nd case is true then without using any shared variable we can achieve  whether thread is in deadlock state or not and it will work forever"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507215363, "post_id": 46571933, "comment_id": 80130666, "body": "@VikashRanjan You seem to be asking how to detect that software has crashed. That question is way too broad for stack overflow. If you want software that works forever, then you need to design it correctly, implement it carefully, and debug it thoroughly."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507224087, "post_id": 46571933, "comment_id": 80135873, "body": "@VikashRanjan No, you really don&#39;t. If it&#39;s in uninterruptible sleep, it could just be waiting for disk I/O that will complete in a split second. My answer explains how to detect that a thread has deadlocked."}, {"owner": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "edited": false, "score": 0, "creation_date": 1507613674, "post_id": 46571933, "comment_id": 80267121, "body": "Thanks David your suggestion. I am able to check  deadlock state. Thanks for your valuable input."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1507142278, "creation_date": 1507142278, "answer_id": 46571933, "question_id": 46568234, "link": "https://stackoverflow.com/questions/46568234/how-to-know-if-a-thread-is-in-deadlock-state-or-not/46571933#46571933", "title": "How to know if a thread is in deadlock state or not?", "body": "<p>The easiest way to do it is to have each thread that you need to track update its own shared variable periodically. The monitoring consists of checking to see that the shared variable changes value often enough.</p>\n\n<p>Consider an analogy. You aren't home very often, but you want to make sure that your two children haven't disappeared. So you have a jar for each child. You tell them to add a penny to the jar every time they come home. Now, each time you come home, you count the pennies in each jar. If any child's jar has had the same number of pennies for too long, you know you have a problem.</p>\n\n<p>So, for example, you can modify each thread doing work from:</p>\n\n<ol>\n<li>Do some work.</li>\n<li>Go to 1.</li>\n</ol>\n\n<p>To:</p>\n\n<ol>\n<li>Do some work.</li>\n<li>Increment my progress variable.</li>\n<li>Go to step 1.</li>\n</ol>\n\n<p>Then the monitoring thread just has to track the last time it saw a different value for the state variable and the current value. It can then detect a deadlocked thread as follows:</p>\n\n<ol>\n<li>Loop over each thread we're monitoring.</li>\n<li>Is its state variable different than it was last time? If not, go to step 5.</li>\n<li>Store the value we see for its state variable and store the current time.</li>\n<li>Continue the loop we started in step 1.</li>\n<li>Is the time we stored for this thread's last update too far in the past? If so, report a deadlock.</li>\n<li>Continue the loop we started in step 1.</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 7434904, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211522087065313/picture?type=large", "display_name": "Vikash Ranjan", "link": "https://stackoverflow.com/users/7434904/vikash-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1507142278, "creation_date": 1507129655, "last_edit_date": 1507141803, "question_id": 46568234, "link": "https://stackoverflow.com/questions/46568234/how-to-know-if-a-thread-is-in-deadlock-state-or-not", "title": "How to know if a thread is in deadlock state or not?", "body": "<p>I have created two threads written in C code and it is running on Linux OS. Both of the threads are doing some job and it's running forever while its parent process is alive.</p>\n\n<p>The process which created those threads is sending a watchdog notification to <code>systemd</code> at some interval. However, before sending a watchdog notification, it wants to check whether all the threads are in a non-deadlock state or not. </p>\n\n<p>What system call can be used, or what mechanism can be used, in code to know that thread is not in deadlock state so that the process can check whether its created threads are in deadlock state or not, and only send the watchdog notification to <code>systemd</code> if all the thread are in a non-deadlock state.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507129942, "post_id": 46568227, "comment_id": 80090404, "body": "BTW you could compile with all warnings and debug info (<code>gcc -Wall -Wextra -g</code>) and <b>use the debugger</b> <code>gdb</code> to run your program step by step and query the program&#39;s state (notably value of pointer variable). You&#39;ll improve your understanding. Try hard to draw a picture of memory (with arrow for pointers) on paper."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507130114, "post_id": 46568227, "comment_id": 80090542, "body": "BTW, your question lacks some <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>. Without more code (definition of types : what <i>eactly</i> is <code>PacketStruct</code> etc...) we can only guess, not answer. And drawing on board the pointers is really my best advice. Please take time to try (and run <code>step</code> by step under <code>gdb</code>)"}, {"owner": {"reputation": 1699, "user_id": 4891815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niZw9.jpg?s=128&g=1", "display_name": "Gnqz", "link": "https://stackoverflow.com/users/4891815/gnqz"}, "edited": false, "score": 0, "creation_date": 1507130172, "post_id": 46568227, "comment_id": 80090572, "body": "You have 2 arrays of some structure type and a pointer to another, which are all defined in another source. Then you assign to SrcPkt a pointer, derivered from casting the address of the first element of some member of the i-th element of the RxPacket array. At least to my understanding."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1507130178, "post_id": 46568227, "comment_id": 80090573, "body": "@Josh, don&#39;t call anybody like this, here. Basile is correct, it does affect the rest of your C knowledge. For your question, it seems pretty obvious that this takes the <code>i</code>th element, there the field <code>packetdata</code> and of that one the element <code>0</code>. Then it takes the address of all that. What in that chain didn&#39;t you understand?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507130334, "post_id": 46568227, "comment_id": 80090676, "body": "We can&#39;t help you. We don&#39;t know (only vaguely guess) what <code>PacketStruct</code>is... Perhaps (but unlikely) you have <code>typedef char PacketStruct;</code> We need some <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 1699, "user_id": 4891815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niZw9.jpg?s=128&g=1", "display_name": "Gnqz", "link": "https://stackoverflow.com/users/4891815/gnqz"}, "edited": false, "score": 1, "creation_date": 1507130410, "post_id": 46568227, "comment_id": 80090716, "body": "@Josh you provide 2 lines of code, which contains some structure types and we have no description for them. In my comment I explained what the lines of code do, but this is all (at least I) can do."}, {"owner": {"reputation": 3, "user_id": 4312235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4266465eeaa41cd9cb6602203545f0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/4312235/josh"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1507130486, "post_id": 46568227, "comment_id": 80090764, "body": "@JensGustedt Thank you for the clarification, which is what was specified in the question. I will work on pointers to complete my understanding, for now I was simply asking a question to verify something for the time being."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507130656, "post_id": 46568227, "comment_id": 80090857, "body": "@Josh: <b>We cannot answer your question</b> because <i>essential information is missing:</i> what is<code>IPMBPacketRequestStruc</code>? what is <code>PacketStruct</code> ? We don&#39;t know, we could just guess, and our guess would be wrong. <code>packetdata</code> could be some complex macro, etc..."}, {"owner": {"reputation": 3, "user_id": 4312235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4266465eeaa41cd9cb6602203545f0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/4312235/josh"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507131013, "post_id": 46568227, "comment_id": 80091078, "body": "@BasileStarynkevitch Added the (actually likely) typedef."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507137417, "post_id": 46568227, "comment_id": 80094785, "body": "Too bad you did not send me any email...."}, {"owner": {"reputation": 3, "user_id": 4312235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4266465eeaa41cd9cb6602203545f0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/4312235/josh"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507143560, "post_id": 46568227, "comment_id": 80098124, "body": "@BasileStarynkevitch Explained it in previous comments. Why did you want me to email you so badly?"}], "answers": [{"tags": [], "owner": {"reputation": 2031, "user_id": 7619380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a65ac8b0d03d302e9527fcfd0e9acf0a?s=128&d=identicon&r=PG&f=1", "display_name": "joshwilsonvu", "link": "https://stackoverflow.com/users/7619380/joshwilsonvu"}, "is_accepted": true, "score": 1, "last_activity_date": 1507130330, "creation_date": 1507130330, "answer_id": 46568466, "question_id": 46568227, "link": "https://stackoverflow.com/questions/46568227/regarding-a-specific-c-variable/46568466#46568466", "title": "Regarding a Specific C Variable", "body": "<p>This sets <code>SrcPkt</code> to point to the <em>address</em> of RxPacket[i].packetdata[0]. The <code>&amp;</code> operator returns the address of (a pointer to) the packet data, which is cast to the same type as <code>SrcPkt</code> and assigned to the <code>SrcPkt</code> pointer variable.</p>\n\n<p><em>References</em>, as exist in C++, do not exist in C. In C++, they are usually implemented as syntactic sugar around pointers so that you can use the objects they point to without having to manually dereference them. In C, you must handle and dereference pointers yourself. </p>\n"}], "owner": {"reputation": 3, "user_id": 4312235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4266465eeaa41cd9cb6602203545f0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/4312235/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 46568466, "answer_count": 1, "score": -3, "last_activity_date": 1507130910, "creation_date": 1507129643, "last_edit_date": 1507130910, "question_id": 46568227, "link": "https://stackoverflow.com/questions/46568227/regarding-a-specific-c-variable", "title": "Regarding a Specific C Variable", "body": "<p>It is a simple question, what does this set SrcPkt to?</p>\n\n<pre><code>extern PacketStruct RxPacket[NUM_PACKETS], TxPacket[NUM_PACKETS];\nextern IPMBPacketRequestStruc *SrcPkt;\n\n\nSrcPkt = (IPMBPacketRequestStruc *)&amp;(RxPacket[i].packetdata[0]);\n</code></pre>\n\n<p>I have a solid understanding of C and C++ but pointers have always been my weak point.\nThis line of code seems to set the pointer SrcPkt to point to the reference of RxPacket[i].packetdata[0]</p>\n\n<p>I am only partly confident with what I believe is the correct answer, I just want some validation.\nEDIT:</p>\n\n<pre><code>typedef struct\n{\n  unsigned char status;   // Buffer status\n  unsigned char stat2;    // re-send status\n  unsigned char channel;    // Channel source/destination\n  unsigned char length; // Total # of bytes in packetdata\n  unsigned char index;  // Current byte being processed in packetdata\n  unsigned char packetdata[IPMB_MAXDATALENGTH];\n} PacketStruct;\n\ntypedef struct\n{\n    unsigned char rsSA;\n    unsigned char netFNrsLUN;\n    unsigned char cksm1;\n    unsigned char rqSA;\n    unsigned char rqSEQrqLUN;\n    unsigned char cmd;\n    unsigned char pktdta[37];   // rest of packet data\n} IPMBPacketRequestStruc;\n</code></pre>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1507127507, "post_id": 46567488, "comment_id": 80088686, "body": "How did you write out the data in the first place?  You should really consider using a serialization library that handles this stuff for you."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1507127544, "post_id": 46567488, "comment_id": 80088720, "body": "It seems to me you would get a better response with the c tag than with the c++ tag."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1507127584, "post_id": 46567488, "comment_id": 80088745, "body": "What is the type of <code>test</code>?"}, {"owner": {"reputation": 591, "user_id": 6149198, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7ef2632eb55cc8c5d0b8123ddd3ebb4d?s=128&d=identicon&r=PG&f=1", "display_name": "chedy najjar", "link": "https://stackoverflow.com/users/6149198/chedy-najjar"}, "edited": false, "score": 0, "creation_date": 1507127601, "post_id": 46567488, "comment_id": 80088761, "body": "what&#39;s the type of test"}], "answers": [{"tags": [], "owner": {"reputation": 2836, "user_id": 3529197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ceed214a6e603c456a8ebaacc036b407?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/3529197/neo"}, "is_accepted": false, "score": 0, "last_activity_date": 1507129356, "last_edit_date": 1507129356, "creation_date": 1507128343, "answer_id": 46567812, "question_id": 46567488, "link": "https://stackoverflow.com/questions/46567488/cast-void-to-char/46567812#46567812", "title": "Cast void* to char*", "body": "<p>Your problem is that when casting <code>lolo</code> you actually cast a pointer to the char array you defined. So the result of the cast would be a <code>char</code> pointer to the first cell of the array.</p>\n\n<p>Why don't you just use this as a struct and access the fields regularly?</p>\n\n<p>Anyway, you want to use <code>lolo</code> as a 64 bit type pointer and the access what's in it.</p>\n\n<pre><code>void* newData = *((uint64_t*)lolo)\n</code></pre>\n\n<p>Besides, don't loop until <code>size</code> in the last <code>for</code> loop, loop only 8 times, until <code>lolo</code> is full. The number of bytes in <code>newData</code> itself (<strong>not</strong> what it points to) is constant, and is 4 bytes on 32bit machines, 8 bytes on 64bit ones.</p>\n\n<p>Last thing -  <code>index++</code>, not <code>o++</code>. <code>o</code> isn't defined, as much as I can see.</p>\n"}], "owner": {"reputation": 1167, "user_id": 7992812, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/468f1fcd388d340a2cb917e6f1256800?s=128&d=identicon&r=PG&f=1", "display_name": "Oraekia", "link": "https://stackoverflow.com/users/7992812/oraekia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 678, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1507130999, "creation_date": 1507127404, "last_edit_date": 1507130999, "question_id": 46567488, "link": "https://stackoverflow.com/questions/46567488/cast-void-to-char", "title": "Cast void* to char*", "body": "<p>I have a <code>char *</code> who points to the structure. Here is my structure:</p>\n\n<pre><code>struct prot\n{\n    int size;\n    unsigned short codeAction;\n    void *data;\n};\n</code></pre>\n\n<p>I recovered <code>size</code> and <code>codeAction</code>, but now I want to recover <code>data</code>. \nAnd when I cast my last 8 bytes I have nothing in it.</p>\n\n<p>The following code is just a test, it's a bad code:</p>\n\n<pre><code>char lol[4];\nfor (int i = 0; i &lt; 4; i++)\n    lol[i] = test[i];\n\nint size = *(int*)lol;\n\nchar loli[2];\nint index = 0;   \nfor (int i = 4; i &lt; 6; i++)\n{\n    loli[index] = test[i];\n    index++;\n}\n\nint code = *(short*)loli;\n\nchar lolo[8];\nindex = 0;\nfor (int i = 6; i &lt; size; ++i)\n{\n    lolo[index] = test[i];\n    index++;\n}\n\nvoid *newData = (char *)lolo; // how can I cast it?\n</code></pre>\n\n<p>How I can display the content of <code>newData</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507127084, "post_id": 46567349, "comment_id": 80088341, "body": "<code>programs_x[i]</code> is a single character (i.e. its type is <code>char</code>). The result of <code>strdup(line_x)</code> is a <i>pointer</i> to a null-terminated string (i.e. its type is <code>char *</code>). Those are not the same thing."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507127196, "post_id": 46567349, "comment_id": 80088439, "body": "And there are much worse problems, like you not actually <i>calling</i> <code>data_read</code>, only <i>declaring</i> its function prototype. Or attempting to pass arrays of wrong type. Besides getting a more up-to-date environment with a more up-to-date compiler, you should <i>really</i> <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">get a few good beginners books</a> and start over."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1507127228, "post_id": 46567349, "comment_id": 80088472, "body": "@BasileStarynkevitch. Assume that OP is working with what they have. No need to be smug about having a nice compiler on hand."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1507127259, "post_id": 46567349, "comment_id": 80088491, "body": "But learning a standard language is practically important"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507127362, "post_id": 46567349, "comment_id": 80088574, "body": "@BasileStarynkevitch From what I remember, Borland C++ 5.5 was a fairly standard compliant compiler. Not sure if it supported C99, but at least it had full C90 and C++98 compliance, unlike earlier Borland compilers. This is the compiler which was used in the Borland C++ Builder RAD tool - it is still maintained under the name Embarcadero. Newer versions most definitely support C99."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507127596, "post_id": 46567349, "comment_id": 80088754, "body": "Btw the only thing that is C99 in this code is the <code>&#47;&#47;</code> comments and those have been supported by Borland since the beginning of time."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1507128984, "post_id": 46567349, "comment_id": 80089757, "body": "Actually almost everything is wrong and my advice is to start learning from the basics."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1507129045, "post_id": 46567349, "comment_id": 80089796, "body": "I&#39;m voting to close this question as off-topic because OP needs to learn basic things, which can be found in any beginners C book"}, {"owner": {"reputation": 7, "user_id": 6473128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-D6vQMPGTXWk/AAAAAAAAAAI/AAAAAAAAAAo/CMa2G3VsZB8/photo.jpg?sz=128", "display_name": "HAKIM", "link": "https://stackoverflow.com/users/6473128/hakim"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507635291, "post_id": 46567349, "comment_id": 80279557, "body": "@Someprogrammerdude so how do I fix that? sorry, I&#39;m still learning C"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1507127664, "last_edit_date": 1507127664, "creation_date": 1507127528, "answer_id": 46567531, "question_id": 46567349, "link": "https://stackoverflow.com/questions/46567349/how-to-use-the-array-from-another-function-in-main/46567531#46567531", "title": "How to use the array from another function in main?", "body": "<p>The error could mean that the non-standard function <code>strdup()</code> is not supported. A C compiler does not need to support it, which is why it is a good idea to avoid that function. If the function is supported as a non-standard extension (it is part of POSIX), you might find it in the header <code>&lt;string.h&gt;</code> which you didn't include.</p>\n\n<p>As for the cause of the rest of the errors, I have no idea, since those appear to originate from other files than the one you posted.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507128016, "post_id": 46567662, "comment_id": 80089080, "body": "Good remark, but I think the compiler actually (incorrectly) treats that line as a (non-standard) prototype declaration, since the errors did not originate from that line."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 2, "last_activity_date": 1507127915, "creation_date": 1507127915, "answer_id": 46567662, "question_id": 46567349, "link": "https://stackoverflow.com/questions/46567349/how-to-use-the-array-from-another-function-in-main/46567662#46567662", "title": "How to use the array from another function in main?", "body": "<p>The error is difficulty to pin down as we don't have line numbers but this line is definitely not right in your <code>main</code>:</p>\n\n<pre><code>data_read(char programs_x[], char programs_y[]);\n</code></pre>\n\n<p>To call a function you just list the variables and values you're passing to it like this:</p>\n\n<pre><code>data_read(programs_x, programs_y);\n</code></pre>\n\n<p>Which will no doubt cause more errors/warnings to be flagged as you declare <code>programs_x</code> and <code>programs_y</code> as arrays of <code>int</code>, but <code>data_read</code> is expecting arrays of <code>char</code>. So there's a conflict in what you think your function wants and what you're providing to it which you need to sort out.</p>\n"}], "owner": {"reputation": 7, "user_id": 6473128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-D6vQMPGTXWk/AAAAAAAAAAI/AAAAAAAAAAo/CMa2G3VsZB8/photo.jpg?sz=128", "display_name": "HAKIM", "link": "https://stackoverflow.com/users/6473128/hakim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46567662, "answer_count": 2, "score": 0, "last_activity_date": 1507637888, "creation_date": 1507126985, "last_edit_date": 1507637888, "question_id": 46567349, "link": "https://stackoverflow.com/questions/46567349/how-to-use-the-array-from-another-function-in-main", "title": "How to use the array from another function in main?", "body": "<p><strong>Edit: I made some changes at my code.</strong></p>\n\n<p>I want to write a line fitting program by using the data from two .txt file. The code is as following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint data_read(char programs_x[], char programs_y[]) {\n\n    int i=0, j=0, k;\n    int numProgs_x=0;\n    int numProgs_y=0;\n    char line_x[1024];\n    char line_y[1024];\n\n    FILE *file_x;\n    FILE *file_y;\n    file_x = fopen(\"data_x.txt\", \"r\");\n    file_y = fopen(\"data_y.txt\", \"r\");\n\n    while(fgets(line_x, sizeof line_x, file_x)!=NULL) {\n        //check to be sure reading correctly\n        //printf(\"%s\", line_x);\n        //add each filename into array of programs\n        programs_x[i]=strdup(line_x); \n        i++;\n        //count number of programs in file\n        numProgs_x++;\n    }\n\n    while(fgets(line_y, sizeof line_y, file_y)!=NULL) {\n        //check to be sure reading correctly\n        //printf(\"%s\", line_y);\n        //add each filename into array of programs\n        programs_y[j]=strdup(line_y); \n        j++;\n        //count number of programs in file\n        numProgs_y++;\n    }\n\n    fclose(file_x);\n    fclose(file_y);\n    return 0;\n\n}\n\nint main ( void ) {\n    int i, j, k, n=1024;\n    float s1=0,s2=0,s3=0,s4=0,a,d,b;\n    char programs_x[1024], programs_y[1024];\n    data_read(programs_x, programs_y);\n    for(i=0;i&lt;n;i++) {\n        scanf(\"%f\", &amp;programs_x[k]);\n    }\n    for(i=0; i&lt;n; i++){\n        scanf(\"%f\", &amp;programs_y[k]);\n    }\n    for(i=0;i&lt;n;i++) {\n        s1=s1+programs_x[i];\n        s2=s2+programs_x[i] * programs_x[i];\n        s3=s3+programs_y[i];\n        s4=s4+programs_x[i] * programs_y[i];\n    }\n    d=n*s2-s1*s1;\n    a=(s2*s3-s1*s4)/d;\n    b=(n*s4-s1*s3)/d;\n    printf(\"\\nThe values of a and b are : %f\\t%f\\n\",a,b);\n    printf(\"\\nThe Required Linear Relation is : \\n\");\n    if(b&gt;0){\n        printf(\"\\ny=%f+%fx\\n\",a,b);\n    }\n    else {\n        printf(\"y=%f%fx\",a,b);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When I try to compile this code, the compiler shows these error:</p>\n\n<pre><code>Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland\ntest3.c:\nError E2349 test3.c 22: Nonportable pointer conversion in function data_read\nError E2349 test3.c 33: Nonportable pointer conversion in function data_read\n*** 2 errors in Compile ***\n</code></pre>\n\n<p>How do I fix the errors? Where did I make mistakes in declaring and calling the data types? I'm pretty sure I declare <code>programs_x</code> and <code>programs_y</code> as <code>char</code> this time and not <code>int</code>.</p>\n"}, {"tags": ["c", "assembly", "compilation", "ocaml", "ffi"], "comments": [{"owner": {"reputation": 14069, "user_id": 1769720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG", "display_name": "didierc", "link": "https://stackoverflow.com/users/1769720/didierc"}, "edited": false, "score": 0, "creation_date": 1507202255, "post_id": 46566761, "comment_id": 80121417, "body": "As far as I understand, Ocaml isn&#39;t meant to be used with machine level instructions, for portability reasons. Thus there aren&#39;t any way of inlining assembly code from Ocaml directly. Furthermore, the ABI isn&#39;t set in stone, and may change overtime. You can still try to figure out the runtime calling conventions, and provide obj files to the OCaml compiler if you want (that&#39;s what happens ultimately when using C code)."}], "answers": [{"comments": [{"owner": {"reputation": 14559, "user_id": 31897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysPO8.png?s=128&g=1", "display_name": "ELLIOTTCABLE", "link": "https://stackoverflow.com/users/31897/elliottcable"}, "edited": false, "score": 0, "creation_date": 1507225655, "post_id": 46567074, "comment_id": 80136740, "body": "Although the above answer about the <code>ctypes</code> library is almost certainly what I need \u2014 one quick question about your still-excellent explanation: what about the <code>Val_int</code> macro? The entire point of my question (although it appears I asked poorly!) is to avoid the bits of interacting-with-OCaml-externally that <i>require C code</i> (for instance, Val_int, which depends on OCaml headers, which thus must be written in C) \u2014 so that I can compile that \u2018external code\u2019 myself."}, {"owner": {"reputation": 14559, "user_id": 31897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysPO8.png?s=128&g=1", "display_name": "ELLIOTTCABLE", "link": "https://stackoverflow.com/users/31897/elliottcable"}, "edited": false, "score": 0, "creation_date": 1507225839, "post_id": 46567074, "comment_id": 80136852, "body": "Somehow failed to ask an actual question there. Let&#39;s phrase it this way: are <code>Val_int</code> and similar stable, i.e. defined-not-to-change? If so, I could implement them compiler-side, so the compiled assembly can call into (or be called by) the compiled-OCaml runtime, without any C \u201cglue\u201d \u2026"}, {"owner": {"reputation": 28350, "user_id": 2625442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a48a497d3aae41354bc1189d57db2c3?s=128&d=identicon&r=PG", "display_name": "ivg", "link": "https://stackoverflow.com/users/2625442/ivg"}, "reply_to_user": {"reputation": 14559, "user_id": 31897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysPO8.png?s=128&g=1", "display_name": "ELLIOTTCABLE", "link": "https://stackoverflow.com/users/31897/elliottcable"}, "edited": false, "score": 1, "creation_date": 1507236536, "post_id": 46567074, "comment_id": 80142108, "body": "Well, it&#39;s stable, but it wouldn&#39;t be right to use OCaml integers for your compiler. You should use <code>nativeint</code> and use the <code>unboxed</code> attribute. Then normal machine integers will be passed to and from external functions."}, {"owner": {"reputation": 28350, "user_id": 2625442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a48a497d3aae41354bc1189d57db2c3?s=128&d=identicon&r=PG", "display_name": "ivg", "link": "https://stackoverflow.com/users/2625442/ivg"}, "reply_to_user": {"reputation": 14559, "user_id": 31897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysPO8.png?s=128&g=1", "display_name": "ELLIOTTCABLE", "link": "https://stackoverflow.com/users/31897/elliottcable"}, "edited": false, "score": 0, "creation_date": 1507237553, "post_id": 46567074, "comment_id": 80142518, "body": "and there is no need to use ctypes here. They will introduce a lot of intermediate translations (on the fly in OCaml - that is an answer to a question whether it is possible to do on the compiler side). Since you will operate with machine words and floats you don&#39;t need any translations at all."}], "tags": [], "owner": {"reputation": 28350, "user_id": 2625442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a48a497d3aae41354bc1189d57db2c3?s=128&d=identicon&r=PG", "display_name": "ivg", "link": "https://stackoverflow.com/users/2625442/ivg"}, "is_accepted": false, "score": 3, "last_activity_date": 1507127878, "last_edit_date": 1507127878, "creation_date": 1507126242, "answer_id": 46567074, "question_id": 46566761, "link": "https://stackoverflow.com/questions/46566761/is-it-possible-to-call-into-c-functions-from-ocaml-without-wrapped-types/46567074#46567074", "title": "Is it possible to call into C functions from OCaml, without wrapped types?", "body": "<blockquote>\n  <p>Unfortunately, it looks like any external functions \u2014 even ones that don't touch any OCaml data-structures / the OCaml heap, are expected to be constructed using OCaml's C macros:</p>\n</blockquote>\n\n<p>No, they are not. If your function doesn't touch OCaml at all, or doesn't allocated or works with the allocated values, then you can call functions directly, e.g.,</p>\n\n<pre><code>value scheme_entry(value unit) {\n    int i;\n    i = 42;\n    return Val_int(i);\n}\n</code></pre>\n\n<p>and on OCaml side:</p>\n\n<pre><code>external scheme_entry : unit -&gt; int = \"scheme_entry\" [@@noalloc]\n</code></pre>\n\n<p>In the latest releases of OCaml we got even more control, so that we can pass floats and bigger integers without boxing/unboxing. Read <a href=\"http://caml.inria.fr/pub/docs/manual-ocaml/intfc.html#s%3AC-cheaper-call\" rel=\"nofollow noreferrer\">here</a> for the further info. </p>\n\n<p>Note, that <code>Val_int</code> is just a macro that shift a C integer one bit to the left and sets the least significant bit to one, i.e., <code>(((unsigned)(x) &lt;&lt; 1)) + 1)</code>. So, if you don't need to translate OCaml integers to C integers and vice verse, then you don't even need to use this macros, so you runtime can be totally unaware of OCaml, for example:</p>\n\n<pre><code> void runtime_init(void) {\n    printf(\"Hello from runtime\");\n }\n</code></pre>\n\n<p>and on OCaml side:</p>\n\n<pre><code> val runtime_init : unit -&gt; unit = \"runtime_init\" [@@noalloc]\n</code></pre>\n\n<p>Note: the <code>[@@noalloc]</code> attribute was added in OCaml 4.03, before that version, you should use <code>\"noalloc\"</code>, e.g.,</p>\n\n<pre><code> val runtime_init : unit -&gt; unit = \"runtime_init\" \"noalloc\"\n</code></pre>\n\n<p>Of course, your extremely simple function should obey the C calling convention that is appropriate to your particular architecture and operating system. So if your function destroys some registers that should be preserved, you should expect troubles, for example on amd64 ABI you should preserve rbp, rbx, r12-r15. There is nothing OCaml specific with this requirement, just a normal C calling convention.</p>\n"}, {"tags": [], "owner": {"reputation": 7807, "user_id": 1480466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qEOKr.png?s=128&g=1", "display_name": "Reimer Behrends", "link": "https://stackoverflow.com/users/1480466/reimer-behrends"}, "is_accepted": false, "score": 2, "last_activity_date": 1507136035, "creation_date": 1507136035, "answer_id": 46570214, "question_id": 46566761, "link": "https://stackoverflow.com/questions/46566761/is-it-possible-to-call-into-c-functions-from-ocaml-without-wrapped-types/46570214#46570214", "title": "Is it possible to call into C functions from OCaml, without wrapped types?", "body": "<p>You may want to look into using the <a href=\"https://github.com/ocamllabs/ocaml-ctypes\" rel=\"nofollow noreferrer\">ctypes library</a> and associated packages, which are available through OPAM.</p>\n\n<pre><code>opam install ctypes ctypes-foreign posix-types\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>open Foreign\nopen Ctypes\nopen Posix_types\n\nlet getpid = foreign \"getpid\" (void @-&gt; returning pid_t)\nlet () = Printf.printf \"%d\\n\" (Pid.to_int (getpid ()))\n</code></pre>\n\n<p>(Compiling this requires the packages <code>ctypes</code>, <code>ctypes.foreign</code>, and <code>posix-types</code>.)</p>\n"}], "owner": {"reputation": 14559, "user_id": 31897, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ysPO8.png?s=128&g=1", "display_name": "ELLIOTTCABLE", "link": "https://stackoverflow.com/users/31897/elliottcable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1507202399, "creation_date": 1507125392, "last_edit_date": 1507202399, "question_id": 46566761, "link": "https://stackoverflow.com/questions/46566761/is-it-possible-to-call-into-c-functions-from-ocaml-without-wrapped-types", "title": "Is it possible to call into C functions from OCaml, without wrapped types?", "body": "<p>I'm trying to write a (desperately tiny, simple \u2014 I have no idea what I'm doing, let's be real!) compiler in OCaml.</p>\n\n<p>I'd really like to avoid checking <em>any</em> ISO-C code into the project (despite knowing C fairly well; the goal here is to learn and use OCaml exclusively.) Pursuant to this, I need to write a \u201cruntime\u201d for the compiled language in OCaml, compile it separately from the primary project, and then link it against the compiler-itself's output.</p>\n\n<p>Unfortunately, it looks like <em>any</em> external functions \u2014 even ones that don't touch any OCaml data-structures / the OCaml heap, are expected to be constructed using OCaml's C macros:</p>\n\n<pre><code>CAMLprim value scheme_entry(value unit) {\n    int i;\n    i = 42;\n    return Val_int(i);\n}\n</code></pre>\n\n<p>This probably isn't an option, if I'm emitting the assembly instructions myself. (At least, not until I learn quite a bit more!)</p>\n\n<p>Is there <em>any</em> way (including hacky ones \u2014 this is a personal learning project) to invoke extremely simple functions like the following from OCaml?</p>\n\n<pre><code>_scheme_entry:\n    movl $42 %eax\n    ret\n</code></pre>\n\n<blockquote>\n  <p>For reference, I'm working through Ghuloum's IACC: <a href=\"http://ell.io/tt$ocameel\" rel=\"nofollow noreferrer\">http://ell.io/tt$ocameel</a></p>\n</blockquote>\n"}, {"tags": ["c++", "c", "dll", "decode", "video-processing"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1507178643, "post_id": 46566444, "comment_id": 80108941, "body": "You consult the documentation for the DLL. Anything more is just guessing."}, {"owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1507200658, "post_id": 46566444, "comment_id": 80120449, "body": "There is no documentation for that file, it is a custom helper DLL file."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1507241156, "post_id": 46566444, "comment_id": 80143899, "body": "Then you will have to guess."}, {"owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1507244024, "post_id": 46566444, "comment_id": 80144673, "body": "What do you mean by guessing? I already have the application that uses the DLL file, can&#39;t we &quot;spy&quot; on the app while it is calling the DLL to know what commands is it executing to it?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1507249587, "post_id": 46566444, "comment_id": 80145890, "body": "There is nothing in the DLL that tells you how to use it. You will have to reverse-engineer it somehow."}, {"owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1507249650, "post_id": 46566444, "comment_id": 80145903, "body": "I used <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">dependencywalker.com</a> and found some info about functions, but I didn&#39;t know how to use them :("}, {"owner": {"reputation": 22187, "user_id": 193892, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6178b59305359920a922edd061a55e7a?s=128&d=identicon&r=PG", "display_name": "Prof. Falken", "link": "https://stackoverflow.com/users/193892/prof-falken"}, "edited": false, "score": 0, "creation_date": 1507583484, "post_id": 46566444, "comment_id": 80259295, "body": "<a href=\"https://stackoverflow.com/questions/311268/monitoring-application-calls-to-dll\" title=\"monitoring application calls to dll\">stackoverflow.com/questions/311268/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 4049435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a6ca9d046f24cac32d48ed5ee3e814?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/4049435/wolfgang"}, "edited": false, "score": 1, "creation_date": 1507315488, "post_id": 46609885, "comment_id": 80176205, "body": "See <a href=\"https://stackoverflow.com/questions/437432/is-there-a-way-to-find-all-the-functions-exposed-by-a-dll\" title=\"is there a way to find all the functions exposed by a dll\">stackoverflow.com/questions/437432/&hellip;</a> to find the exposed dll functions and if you want to see how the application uses the dll file you can wrap the dll (or even hijack it) with your own proxy dll (just rename the original dll and place your own build of it to pass through and record/log the calls to origin dll)."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 251, "user_id": 4049435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a6ca9d046f24cac32d48ed5ee3e814?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/4049435/wolfgang"}, "edited": false, "score": 0, "creation_date": 1507324809, "post_id": 46609885, "comment_id": 80180294, "body": "@Wolfgang - how would you implement a proxy DLL if you didn&#39;t know the function signature or return type of each exported function?"}, {"owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "edited": false, "score": 0, "creation_date": 1507325468, "post_id": 46609885, "comment_id": 80180541, "body": "@selbie thank you very much for your detailed answer, here is the actual problem that lead me after deep investigations to find the DLL that could help me, thought might be useful to tell you, please have a look: <a href=\"https://stackoverflow.com/questions/43306959/create-lrec-file-extension-reader-for-mobile\" title=\"create lrec file extension reader for mobile\">stackoverflow.com/questions/43306959/&hellip;</a>"}, {"owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "edited": false, "score": 0, "creation_date": 1507328948, "post_id": 46609885, "comment_id": 80181558, "body": "Does this mean anything? I recorded it while exporting the video from the application using that DLL: <a href=\"https://imgur.com/a/2HXV5\" rel=\"nofollow noreferrer\">imgur.com/a/2HXV5</a>"}, {"owner": {"reputation": 251, "user_id": 4049435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a6ca9d046f24cac32d48ed5ee3e814?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/4049435/wolfgang"}, "edited": false, "score": 1, "creation_date": 1507405437, "post_id": 46609885, "comment_id": 80199341, "body": "@selbie, <a href=\"https://stackoverflow.com/questions/437432/is-there-a-way-to-find-all-the-functions-exposed-by-a-dll\" title=\"is there a way to find all the functions exposed by a dll\">stackoverflow.com/questions/437432/&hellip;</a>"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 251, "user_id": 4049435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a6ca9d046f24cac32d48ed5ee3e814?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang", "link": "https://stackoverflow.com/users/4049435/wolfgang"}, "edited": false, "score": 1, "creation_date": 1507428538, "post_id": 46609885, "comment_id": 80204221, "body": "@Wolfgang - unless it&#39;s a .NET DLL, to the best of my knowledge, none of those solutions discussed at the link you provided will detect the function signature and return type of an exported DLL function. Otherwise, getting the names of the functions are about the only thing possible when dealing with native code DLLs.  But I encourage you to prove me wrong. Go get tinyCoder&#39;s DLL from the link he provides and show me the function signatures of all the exported functions returned by the <code>dumpbin</code> output above.  You&#39;ll not only impress me, you&#39;ll get all of tinyCoder&#39;s bounty. :)"}, {"owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "edited": false, "score": 0, "creation_date": 1507485757, "post_id": 46609885, "comment_id": 80217907, "body": "@selbie, you are saying we can not go any further than of what we found?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1507583324, "post_id": 46609885, "comment_id": 80259228, "body": "I don&#39;t know how to go further. There&#39;s the possibility of attaching windbg and setting breakpoints on the exported function.  I would love to see that  Wolfgang guy above who keeps commenting with the same link show something that I&#39;m missing. But what I see exported from the DLL is not the codec interface, but what appears to be the functions to host the GUI dialog. So even if we did get the function signatures figured out, that would only enable use to bring up the same dialog as the Linktivity app itself shows."}, {"owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "edited": false, "score": 0, "creation_date": 1507899504, "post_id": 46609885, "comment_id": 80407032, "body": "Thank you all, I didn&#39;t get my desired answer yet and still trying to find a way, but thanks to @selbie for the detailed explanation, bounty is ending and I need to award it."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 4, "last_activity_date": 1507306358, "creation_date": 1507306358, "answer_id": 46609885, "question_id": 46566444, "link": "https://stackoverflow.com/questions/46566444/get-external-commands-of-a-dll-file/46609885#46609885", "title": "Get external commands of a DLL file", "body": "<p>As Raymond said, there's no formal way to inspect the interfaces supported by a DLL.</p>\n\n<p>At best you have these options:</p>\n\n<ol>\n<li><p>Type <code>dumpbin /exports lkExport.dll</code> to see what functions are exported.   You won't see the function signatures or return types, but perhaps you'll recognize it as some well known plugin interface standard for your particular application. Perhaps the media player application itself has a plugin SDK where these functions are documented. In your case, I see what appears to be Java bindings also exported by this DLL... that might be an avenue to explore.</p></li>\n<li><p>Try seeing if the DLL is for COM and exports a type library.  I didn't see any of the usual COM functions exported, but you can load the DLL in Visual Studio with the resource editior and look for one.</p></li>\n<li><p>The resource editor didn't reveal a type library, so that likely rules out COM.  But it does reveal an art resource showing hints showing the name of the product or company that made the DLL. I see both  \"Linktivity\" and \"Inter-Tel (Delaware), Inc.\" listed.  A quick web search reveals they may be out of business, but you're probably a smart and resourceful person...</p></li>\n<li><p>The only think left to do is attempt to hook up a debugger (e.g. windbg) to the application that loads the DLL and set breakpoints on the exported functions and disassemble the stack and try to infer the function parameter types, return values, and meaning of each.  I suspect that's going to be very hard to do if you don't have the PDB symbol file that corresponds to the build of that DLL.  (Maybe you can sent a bp on an exported DLL funtion without symbols? I've never tried...) There are some folks out there that can do this type of stuff...</p></li>\n</ol>\n\n<p>Some hints:</p>\n\n<pre><code>dumpbin /exports lkExport.dll\n\nC:\\Users\\jselbie\\Downloads&gt;dumpbin /exports lkExport.dll\nMicrosoft (R) COFF/PE Dumper Version 14.11.25506.0\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\n\nDump of file lkExport.dll\n\nFile Type: DLL\n\n  Section contains the following exports for lkExport.dll\n\n    00000000 characteristics\n    47606859 time date stamp Wed Dec 12 15:01:45 2007\n        0.00 version\n           1 ordinal base\n          14 number of functions\n          14 number of names\n\n    ordinal hint RVA      name\n\n          1    0 00001A80 DispatchMsg\n          2    1 00001AD0 Init\n         10    2 00001D00 ReceiveMsg\n         11    3 00001D90 SendMsg\n         12    4 00001DB0 SendMsgProc\n         13    5 00001B70 Start\n         14    6 00001C40 Stop\n          3    7 00001A40 _Java_linktivity_nativecontrols_ExportAppletDll_DispatchMsg@20\n          4    8 000018B0 _Java_linktivity_nativecontrols_ExportAppletDll_Initialize@24\n          5    9 00001980 _Java_linktivity_nativecontrols_ExportAppletDll_ReceiveMsg@16\n          6    A 00001920 _Java_linktivity_nativecontrols_ExportAppletDll_ReceiveNodeMsg@20\n          7    B 000019C0 _Java_linktivity_nativecontrols_ExportAppletDll_SendMsgProc@16\n          8    C 00001900 _Java_linktivity_nativecontrols_ExportAppletDll_Start@8\n          9    D 00001910 _Java_linktivity_nativecontrols_ExportAppletDll_Stop@8\n</code></pre>\n\n<p><img src=\"https://i.imgur.com/XeOBWa2.png\" /></p>\n"}, {"comments": [{"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 0, "creation_date": 1507727332, "post_id": 46655081, "comment_id": 80325673, "body": "It would really help if you could explain <i>how</i> using WinAPIOverride would help."}], "tags": [], "owner": {"reputation": 22187, "user_id": 193892, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6178b59305359920a922edd061a55e7a?s=128&d=identicon&r=PG", "display_name": "Prof. Falken", "link": "https://stackoverflow.com/users/193892/prof-falken"}, "is_accepted": false, "score": 2, "last_activity_date": 1528357276, "last_edit_date": 1528357276, "creation_date": 1507583602, "answer_id": 46655081, "question_id": 46566444, "link": "https://stackoverflow.com/questions/46566444/get-external-commands-of-a-dll-file/46655081#46655081", "title": "Get external commands of a DLL file", "body": "<p>I think you could succeed with <a href=\"http://jacquelin.potier.free.fr/winapioverride32/\" rel=\"nofollow noreferrer\">WinAPIOverride</a>.</p>\n\n<p>It allows you to inspect all the calls to the DLL and see what goes in and what goes out of each call. You use this live, almost like a debugger, but it's explicitly made to help understand how a DLL works.</p>\n"}, {"comments": [{"owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "edited": false, "score": 0, "creation_date": 1507843610, "post_id": 46717064, "comment_id": 80384822, "body": "Thank you, but as you see in the comments above, I am already using Dependency Walker, but it didn&#39;t provide me of what I can use."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "reply_to_user": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "edited": false, "score": 0, "creation_date": 1507844245, "post_id": 46717064, "comment_id": 80385143, "body": "Yes and also the information that throw Dependency Walker is the same that @selbie is shared us. The main point is that you want to know how to invoke each method of this DLL and what they (methods) return. You may try reversing code with IDA Pro, or another software like that. It is used to decompile the DLL and try to understand the code. Check this answer <a href=\"https://stackoverflow.com/questions/15148950/how-to-reverse-a-dll-into-c-code\" title=\"how to reverse a dll into c code\">stackoverflow.com/questions/15148950/&hellip;</a>"}], "tags": [], "owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "is_accepted": false, "score": 1, "last_activity_date": 1507834840, "creation_date": 1507834840, "answer_id": 46717064, "question_id": 46566444, "link": "https://stackoverflow.com/questions/46566444/get-external-commands-of-a-dll-file/46717064#46717064", "title": "Get external commands of a DLL file", "body": "<p>Well, when we are talking about DLL's and how to implement it, it necessary to have the documentation of this DLL and even more if it is and private library, which is not an open product to be used. </p>\n\n<p>In this case, with the library that you shared, you are talking about a standard library which can be analyzed  with several tool, for example <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">Dependency Walker</a>, and check what interfaces are available in the DLL, but you can get the information of how to use it with parameters and the if the interfaces return some type. Also you can see what other libraries are required by this file, as can you see in the image below.</p>\n\n<p>So, in your case you should have the documentation to see how to use and implement the library in your code.</p>\n\n<p><a href=\"https://i.stack.imgur.com/JSEUe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JSEUe.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 469, "user_id": 2654691, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Wh9yc.jpg?s=128&g=1", "display_name": "tinyCoder", "link": "https://stackoverflow.com/users/2654691/tinycoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1528357276, "creation_date": 1507124465, "last_edit_date": 1507160474, "question_id": 46566444, "link": "https://stackoverflow.com/questions/46566444/get-external-commands-of-a-dll-file", "title": "Get external commands of a DLL file", "body": "<p>I have a DLL file that is being used by a video player application, this video player uses that DLL file to export the videos as AVI file format, what is the way to know how that application uses the DLL file so that I can execute it externally?</p>\n\n<p>I have a copy of the file here on <a href=\"https://www.dropbox.com/s/9fkhct7cmvxjtdz/lkExport.dll?dl=0\" rel=\"noreferrer\">Dropbox</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/CN81J.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CN81J.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "file", "text", "input"], "comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 1, "creation_date": 1507124204, "post_id": 46566264, "comment_id": 80086248, "body": "What&#39;s being written to the file is the actual memory representation of the <code>vara</code> structure. In particular the integers are getting written in the binary representation (rather than text that you&#39;re probably expecting). There are issues with that which arise, but generally speaking you&#39;re okay."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1507124205, "post_id": 46566264, "comment_id": 80086249, "body": "You are writing binary data, so what do you expect? You probably should use <code>fprintf</code> instead of <code>fwrite</code>."}, {"owner": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "edited": false, "score": 0, "creation_date": 1507124401, "post_id": 46566264, "comment_id": 80086390, "body": "Sorry, I&#39;m really new to programming. What do you mean I&#39;m writing binary data. So fwrite is used for writing binary data ?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1507124408, "post_id": 46566264, "comment_id": 80086393, "body": "The other comments are referring to this line, which is the source of your trouble: <code>fwrite(varor, sizeof(struct vara), *antal_varor, fil)</code>. You want to replace it with a whole series of <code>fprintf</code> calls, like <code>fprintf(fil, &quot;name: %s\\n&quot;, scanf(&quot;%s&quot;, varor[i].name);</code>."}, {"owner": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "edited": false, "score": 0, "creation_date": 1507124480, "post_id": 46566264, "comment_id": 80086438, "body": "Oh okay, thanks for the clarification."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507124637, "post_id": 46566264, "comment_id": 80086534, "body": "@Camel start reading a good beginner&#39;s book. In the meantime just use  <a href=\"http://www.cplusplus.com/reference/cstdio/fprintf/\" rel=\"nofollow noreferrer\"><code>fprintf</code></a> which is similar to <code>printf</code> (I hope you know that one) and which allows you &quot;print&quot; into a file rather than on the screen."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1507124644, "post_id": 46566264, "comment_id": 80086541, "body": "You write a sequence of <code>int</code>s to the file. The &quot;weird symbols&quot; is what <code>int</code>s look like when stored in memory. There is nothing wrong in storing the data as a binary file, you just cannot read it easily."}, {"owner": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "edited": false, "score": 0, "creation_date": 1507124679, "post_id": 46566264, "comment_id": 80086570, "body": "Ok thanks for the tip."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507125291, "post_id": 46566264, "comment_id": 80086984, "body": "When writing/reading binary data  with <code>fwrite()&#47;fread()</code>, best to open the file in <i>binary</i> mode.: <code>fopen(filnamn, &quot;rb+&quot;);</code>  - add <code>b</code>."}, {"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1507125590, "post_id": 46566264, "comment_id": 80087203, "body": "One suggestion - use a <code>switch</code> statement to select option user entered (menu part)."}, {"owner": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507126017, "post_id": 46566264, "comment_id": 80087501, "body": "@chux Well that&#39;s the big mistake I made then. Since I don&#39;t want it in binary. What&#39;s the alternative to fread then ? Since fprintf seems to be the alternative to fwrite."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507130481, "post_id": 46566264, "comment_id": 80090760, "body": "@Camel To write data as <i>text</i>, for integers, use <code>fprintf()</code> and the matching specifier like <code>&quot;%d&quot;</code> for <code>int</code>, <code>&quot;%lu&quot;</code> for <code>unsigned long</code>.  Add a separator like <code>&quot; &quot;</code>.  For <code>double</code> see <a href=\"https://stackoverflow.com/q/16839658/2410359\">Printf width specifier to maintain precision of floating-point value</a>.  To read <i>text</i> and convert to <code>int</code>, <code>double</code>, etc., use <code>fscanf()</code>."}, {"owner": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1507148061, "post_id": 46566264, "comment_id": 80100478, "body": "@SteveSummit I tried doing it the way you described, I&#39;m not really sure I understand how you&#39;re using that third parameter.. scanf(&quot;%s&quot;, varor[i].name) How does my quit function recognize it when it&#39;s used in another function."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1507175467, "post_id": 46566264, "comment_id": 80108134, "body": "@Camel I&#39;m not quite sure what you&#39;re asking, but see the (partial) answer I&#39;m posting now."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507187389, "post_id": 46566264, "comment_id": 80112390, "body": "There is absolutely no need for <code>#include &lt;conio.h&gt;</code> in your code (or in any code for that matter). <code>stdio.h</code> provides everything you need (use <code>getchar()</code> if you need to prevent your windows console from closing instead of <code>getch()</code>. If you need <code>getch</code> like input, then use the functions in <code>termios.h</code> to place the keyboard in non-cannonical mode with <code>tcsetattr</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1507203155, "post_id": 46566264, "comment_id": 80121940, "body": "If you want to read and write binary data, you have to open your file with &quot;rb&quot; and &quot;wb&quot; mode strings."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 8377048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cOgzgX3cl5c/AAAAAAAAAAI/AAAAAAAAAFc/owtcNwLbLI8/photo.jpg?sz=128", "display_name": "Robert Blansett", "link": "https://stackoverflow.com/users/8377048/robert-blansett"}, "is_accepted": false, "score": 0, "last_activity_date": 1507128227, "creation_date": 1507128227, "answer_id": 46567768, "question_id": 46566264, "link": "https://stackoverflow.com/questions/46566264/weird-characters-saved-in-my-text-file/46567768#46567768", "title": "Weird characters saved in my text file", "body": "<p>The commenters on your question have it right.<br>\n- What is displayed with printf (and written to a file with fprintf) is ASCII representation of the numbers.<br>\n- What is stored in memory (and written with fwrite) is the actual \"binary\" value.<br>\nIn C, an int variable always takes up the same number of bytes in memory, regardless of the value stored. That is why your sizeof() works consistently.  Reading and writing can be consistently done.</p>\n\n<p>(Note that not all C implementations use the same size int though. It is 4 bytes in the x86 Linux I'm using right now). </p>\n\n<p>When displaying the ASCII representation, the number of ASCII digit characters required depends on the value.  So, if reading values in that have been stored this way, you have to 'parse' the text and build up the integer value from the digits read, and in general will be a variable number of digits. (This is what scanf does.)  Hence, reading and parsing ASCII could be considered more complicated than just reading in a value stored as binary int that is always the same size. </p>\n\n<p>IMPORTANT: If you are going to read the file as binary, you should open it with the \"b\" attribute like this:</p>\n\n<pre><code>ange_filnamn=fopen(filnamn, \"r+b\");\n</code></pre>\n\n<p>Similary, to open for binary write:</p>\n\n<pre><code>fil=fopen(filnamn, \"w+b\"); \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507187143, "post_id": 46577642, "comment_id": 80112269, "body": "I suspect you intended <code>while(fgets(line, sizeof(line), ange_filnamn) != NULL)</code>... note <code>fread -&gt; fgets</code>. But a very good answer otherwise."}, {"owner": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "edited": false, "score": 0, "creation_date": 1507202291, "post_id": 46577642, "comment_id": 80121446, "body": "I have a question about your tip on my structure. When I remove the square brackets, the program crashes as soon as I enter a value for item number. And when I have the square brackets, it doesn&#39;t print out the value I entered. For some reason I get other numbers like 643829. This happens to itemnumber and balance."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "edited": false, "score": 0, "creation_date": 1507202541, "post_id": 46577642, "comment_id": 80121588, "body": "@Camel You have made one of the very common first mistakes with <code>scanf</code>.  In <code>register_item()</code>, when you prompt for <code>itemnumber</code> and <code>balance</code>, you need to use <code>&amp;</code> so that <code>scanf</code> receives a pointer it can filli in: <code>scanf(&quot;%d&quot;, &amp;varor[*antal_varor].itemnumber);</code>. (You don&#39;t need the <code>&amp;</code> with <code>name</code>, because <code>name</code> is an array.)  This is confusing at first, I know."}, {"owner": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "edited": false, "score": 0, "creation_date": 1507203078, "post_id": 46577642, "comment_id": 80121888, "body": "@SteveSummit Oh my god. Ofcourse. Sorry for the stupid mistake. The char array confused me."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 2, "last_activity_date": 1507202573, "last_edit_date": 1507202573, "creation_date": 1507176022, "answer_id": 46577642, "question_id": 46566264, "link": "https://stackoverflow.com/questions/46566264/weird-characters-saved-in-my-text-file/46577642#46577642", "title": "Weird characters saved in my text file", "body": "<p>You have an array of structures.  The array contains <code>antal_varor</code> number of structures, and each structure contains members (elements) <code>itemnumber</code>, <code>name</code>, and <code>balance</code>.</p>\n\n<p>Before we get started, a little side note: I think your structure definition has some bugs.  Based on the way you're using it, I think you want</p>\n\n<pre><code>struct vara\n{\n    int itemnumber;\n    char name[30];\n    int balance;\n};\n</code></pre>\n\n<p>But your question was about writing the file out.  When you call</p>\n\n<pre><code>fwrite(varor, sizeof(struct vara), *antal_varor, fil);\n</code></pre>\n\n<p>you are writing out the entire array, all at once, in \"binary\", which is why you can't read it.  If you want to write it out in a more human-readable form, you can do something like this.  Here I have an explicit loop over the elements of the array, and each time through the loop, I print out all the members of that element:</p>\n\n<pre><code>int i;\nfor(i = 0; i &lt; *antal_varor; i++ {\n    fprintf(fil, \"varor %d:\\n\", i);\n    fprintf(fil, \" itemnumber: %d\\n\", varor[i].itemnumber);\n    fprintf(fil, \" name: %s\\n\", varor[i].name);\n    fprintf(fil, \" balance: %d\\n\", varor[i].balance);\n}\n</code></pre>\n\n<p>So, first try that.  You should find that the output file is perfectly readable.</p>\n\n<p>Now, the problem is that since you wrote the file out in this nicer, more readable format, your code that reads the data back in, that used to use</p>\n\n<pre><code>fread(&amp;varor[*antal_varor], sizeof(struct vara), 1, ange_filnamn);\n</code></pre>\n\n<p>is not going to work any more.  But here is the sort of code you could use to read the new-format file back in.  This code reads the file line by line with <code>fgets</code>, figuring out what each line is, and plugging data items one by one into the <code>varor</code> array to rebuild it.</p>\n\n<pre><code>char line[80];\nint i = 0;\n*antal_varor = 0;\n\nwhile(fgets(line, sizeof(line), ange_filnamn) != NULL) {\n    if(strncmp(line, \"varor \", 6) == 0) {\n        sscanf(line, \"varor %d:\", &amp;i);\n        if(i &gt;= MAX) {\n            fprintf(stderr, \"warning: index in file too large\\n\");\n            i = 0;\n            continue;\n        }\n        if(i + 1 &gt; *antal_varor) *antal_varor = i + 1;\n    } else if(strncmp(line, \" itemnumber:\", 12) == 0) {\n        sscanf(line, \" itemnumber: %d\", &amp;varor[i].itemnumber);\n    } else if(strncmp(line, \" name:\", 6) == 0) {\n        sscanf(line, \" name: %s\", varor[i].name);\n    } else if(strncmp(line, \" balance:\", 9) == 0) {\n        sscanf(line, \" balance: %d\", &amp;varor[i].balance);\n    } else {\n        fprintf(stderr, \"warning: unrecognized line in file\\n\");\n    }\n}\n\nprintf(\"\\nNumber of items: %d \\n\",*antal_varor);\nfclose(ange_filnamn); \n</code></pre>\n\n<p>I haven't tested this, so there may be some little mistakes in it, but it should give you the idea.</p>\n\n<p>(Also there are better ways of writing this sort of thing, but they're a little more elaborate or require more infrastructure, so I've stuck to something very simple and understandable, although it's less than robust.)</p>\n"}], "owner": {"reputation": 27, "user_id": 8616044, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d745722f844951cfb2c1f6f1022a9d39?s=128&d=identicon&r=PG&f=1", "display_name": "Camel", "link": "https://stackoverflow.com/users/8616044/camel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 46577642, "answer_count": 2, "score": 0, "last_activity_date": 1507202573, "creation_date": 1507123946, "last_edit_date": 1507125563, "question_id": 46566264, "link": "https://stackoverflow.com/questions/46566264/weird-characters-saved-in-my-text-file", "title": "Weird characters saved in my text file", "body": "<p>I'm trying to make a program that can store certain information in a text file. The problem I have though is that with the code I've written so far, the information stored is a bunch of weird symbols and characters. I've managed to kind of find out where it happens from but I can't seem to solve it. It seems like in my register_item function, both item number and balance get weird values for some reason. If anyone can see what mistake I've made, that would be appreciated.  </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;conio.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    #define MAX 20\n\n    struct vara\n    {\n        int itemnumber[20];\n        char name[30];\n        int balance[20];\n    };\n\n    open_file(FILE *ange_filnamn, char filnamn[], struct vara varor[], int *antal_varor)\n    {\n        int mainmenu = 0;\n        while (mainmenu != 1 &amp;&amp; mainmenu != 2)\n        {\n            printf(\"Do you want to open an existing file (1) or create a new one (2)?\\n\");\n            scanf(\"%d\", &amp;mainmenu);\n            //system(\"CLS\");\n            if(mainmenu==1)\n            {\n                printf(\"Choose filename (ex. .txt).\\n\");\n                scanf(\"%s\", filnamn);\n                ange_filnamn=fopen(filnamn, \"r+\");         \n\n                while(!feof(ange_filnamn))\n                {\n\n                    fread(&amp;varor[*antal_varor], sizeof(struct vara), 1, ange_filnamn);\n                    if(!feof(ange_filnamn))\n                    {\n                        *antal_varor=*antal_varor + 1;        \n                    }\n                }\n                printf(\"\\nNumber of items: %d \\n\",*antal_varor);\n                fclose(ange_filnamn);              \n            }\n\n            if(mainmenu==2)\n            {\n                printf(\"What name do you want for your new file?\\n\");\n                scanf(\"%s\", filnamn);\n                ange_filnamn=fopen(filnamn, \"w+\");\n                printf(\"File is created!\\n\");\n                *antal_varor = 0;                 \n                fclose(ange_filnamn);               \n            }\n        }\n    }\n\n    register_item(struct vara *varor, int *antal_varor)\n    {\n        printf(\"Item number:\\n\");                             \n        scanf(\"%d\", varor[*antal_varor].itemnumber);    \n        printf(\"Name:\\n\");\n        scanf(\"%s\", varor[*antal_varor].name);\n        printf(\"Balance:\\n\");\n        scanf(\"%d\", varor[*antal_varor].balance);   \n        *antal_varor+=1;\n    }\n\n    print_item(struct vara varor[], int antal_varor)\n    {\n        int i;\n        for (i=0; i &lt; antal_varor; i++)\n        {\n            printf(\"%d. Item number: %d Name: %s Balance: %d\\n\", i, varor[i].itemnumber, varor[i].name, varor[i].balance);         \n        }\n    }\n\n    quit_program(char filnamn[], struct vara varor[], int *antal_varor)\n    {\n        FILE *fil;\n        //printf(\"%s\", filnamn);\n        fil=fopen(filnamn, \"w+\");                                             \n        fwrite(varor, sizeof(struct vara), *antal_varor, fil);\n        fclose(fil);\n    }\n\n    int main(void)\n    {\n        FILE *ange_filnamn;\n        struct vara varor[MAX];\n        int mainmenu, menu, antal_varor=0;\n        char filnamn[20], filen[30]; \n\n        open_file(ange_filnamn,filnamn, varor, &amp;antal_varor);\n\n        //Second menu\n        while(menu!=7)\n        {\n            printf(\"\\n\");\n            printf(\"1. Register new items to inventory.\\n\");\n            printf(\"2. Print all items from inventory.\\n\");\n            printf(\"3. Search for item.\\n\");\n            printf(\"4. Change inventory.\\n\");\n            printf(\"5. Sort inventory.\\n\");\n            printf(\"6. Deregister item from inventory.\\n\");\n            printf(\"7. Quit.\\n\");\n            scanf(\"%d\", &amp;menu);\n\n            if(menu==1)\n            {\n                register_item(varor, &amp;antal_varor);\n            }\n\n            if (menu==2)\n            {\n               print_item(varor, antal_varor); \n            }\n\n            if (menu==3)\n            {\n                printf(\"test\");\n            }\n\n            if (menu==4)\n            {\n                printf(\"test\");\n            }\n\n            if (menu==5)\n            {\n                printf(\"test\");\n            }\n\n            if(menu==6)\n            {\n                printf(\"test\");\n            }\n            if (menu==7)\n            {\n                quit_program(filnamn, varor, &amp;antal_varor);\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507123814, "post_id": 46566179, "comment_id": 80085934, "body": "You might be interested in the <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\"><code>strtok</code></a> function?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507123917, "post_id": 46566179, "comment_id": 80086002, "body": "What, exactly, is the question?  If you&#39;re asking us to write a function for you, to your spec, then, no.  We don&#39;t do that."}, {"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1507124309, "post_id": 46566179, "comment_id": 80086330, "body": "The function I have, what it does is printing out the first word of the input. I want help with using a pointer to choose what word I want to print out."}, {"owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "edited": false, "score": 0, "creation_date": 1507124320, "post_id": 46566179, "comment_id": 80086337, "body": "If <code>i</code> was the index of the first letter of the word, and not the space in front of it, you could just return <code>string + i</code>, since the compiler knows how large a <code>char</code> is, and can implement the addition operation. However, the way you&#39;ve worked it out, you&#39;ll probably need to do a bit of math on the value of <code>i</code>. The problem is a little more difficult that it looks, particular if the line can contain variable numbers of spaces, and perhaps other types of whitespace as well. I think that even if you use <code>strtok()</code>, you&#39;ll still have to do a bit of arithmetic."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7410018, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wPM8-ghhZc4/AAAAAAAAAAI/AAAAAAAAAA8/PDIleIFIa30/photo.jpg?sz=128", "display_name": "shubham srivastava", "link": "https://stackoverflow.com/users/7410018/shubham-srivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1507127118, "last_edit_date": 1507127118, "creation_date": 1507126554, "answer_id": 46567181, "question_id": 46566179, "link": "https://stackoverflow.com/questions/46566179/type-a-function-getword-that-takes-a-string-and-returns-a-pointer-to-the-begi/46567181#46567181", "title": "Type a function getWord () that takes a string and returns a pointer to the beginning of the word", "body": "<p>This is what you can do</p>\n\n<pre><code>char* get_word (char *string,int req_num)\n{\nint i;\nint ns;//number of spaces\nint *sp;\nns=0;\nfor(i=0;string[i]!='\\0';i++)\n{\n//check for a spaces and increment ns\nif (string[i]==' ')\n{\n++ns;\nsp=(int*)realloc(sp,ns*sizeof(int));\nsp[ns-1]=(int)&amp;string[i+1];\n}\n//check what place you have to return\nif(req_num&gt;=ns)\nreturn NULL;\nelse\nreturn (char*)sp[req_num];\n}\n}\n</code></pre>\n\n<p>This code is very un-optimized and you can comeup with ways to restructure the code to optimize it to run it faster.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1507128492, "post_id": 46567647, "comment_id": 80089413, "body": "What the program you wrote does is counting how many words the *s contains, and that&#39;s very cool! But what I want is for the user to write an input and then from the input choose what word to write in the ouptut.  For example:  &quot;Type in sentence: Hi how are you?&quot; &quot;What word do you want to output: 2&quot; &quot;are&quot;"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1507128947, "post_id": 46567647, "comment_id": 80089724, "body": "@Adrian You wrote in the question: &quot;The function should return a pointer to the beginning of the word to which it refers&quot; And the shown function returns pointer to the specified word. You can use this pointer to output the word. The program just demonstrates that the function works correctly."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1507129378, "last_edit_date": 1507129378, "creation_date": 1507127867, "answer_id": 46567647, "question_id": 46566179, "link": "https://stackoverflow.com/questions/46566179/type-a-function-getword-that-takes-a-string-and-returns-a-pointer-to-the-begi/46567647#46567647", "title": "Type a function getWord () that takes a string and returns a pointer to the beginning of the word", "body": "<p>We beginners should help each other.:)</p>\n\n<p>Here you are.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * getWord(const char *s, size_t n)\n{\n    while ( ( s += strspn(s, \" \\t\") ) != '\\0' &amp;&amp; n-- )\n    {\n        s += strcspn(s, \" \\t\");\n    }\n\n    return *s ? (char *)s : (char *)0;\n}\n\nint main( void )\n{\n    char *s = \"Hi Adrian. How are you?\";\n    size_t n = 0;\n\n    for (char *p; (p = getWord(s, n)) != NULL; ++n)\n    {\n        printf(\"%zu: %s\\n\", n, p);\n    }\n\n    printf(\"\\nThere are %zu words in the string\\n\", n);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output of the demonstrative program is</p>\n\n<pre><code>0: Hi Adrian. How are you?\n1: Adrian. How are you?\n2: How are you?\n3: are you?\n4: you?\n\nThere are 5 words in the string\n</code></pre>\n\n<p>If you want to get the output like this</p>\n\n<pre><code>0: Hi\n1: Adrian.\n2: How\n3: are\n4: you?\n\nThere are 5 words in the string\n</code></pre>\n\n<p>then just rewrite the loop in main the following way</p>\n\n<pre><code>for (char *p; (p = getWord(s, n)) != NULL; ++n)\n{\n    size_t len = strcspn(p, \" \\t\");\n    printf(\"%zu: %*.*s\\n\", n, ( int )len, ( int )len, p);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1507132968, "post_id": 46568092, "comment_id": 80092412, "body": "I barely understand the function, and how would main look?"}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "reply_to_user": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1507134795, "post_id": 46568092, "comment_id": 80093454, "body": "@Adrain to understand the function getWord() you first need to understand the strtok(). I would suggest you read about strtok() thoroughly."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1507134705, "last_edit_date": 1507134705, "creation_date": 1507129190, "answer_id": 46568092, "question_id": 46566179, "link": "https://stackoverflow.com/questions/46566179/type-a-function-getword-that-takes-a-string-and-returns-a-pointer-to-the-begi/46568092#46568092", "title": "Type a function getWord () that takes a string and returns a pointer to the beginning of the word", "body": "<p>This getWord() returns the (n+1)th word of input string:</p>\n\n<pre><code>char * getWord(char * string, int n)\n{\n        char str[1024] = {'\\0'};\n        char * delim = \" \\t\";\n        char * pch = NULL;\n        char * result = NULL;\n        int i = 0;\n\n        if (string == NULL)\n                return NULL;\n\n        strcpy (str, string);\n        pch = strtok (str, delim);\n        while (pch != NULL)\n        {\n                if (i == n)\n                        break;\n                pch = strtok (NULL, delim);\n                i++;\n        }\n\n        if (pch != NULL)\n        {\n                result = (char *)malloc(strlen(pch) + 1);\n                if (result == NULL)\n                        printf (\"Failed to allocate memory\\n\");\n                else\n                        strcpy (result, pch);\n        }\n        return result;\n}\n</code></pre>\n\n<p>If this function returns the result as not NULL, make sure to free the memory allocated to \"result\" variable in the function which is calling getWord().</p>\n\n<p>The main() will look something like this -</p>\n\n<pre><code>int main ()\n{\n        char * ptr;\n        ptr = getWord (\"hello you\", 1);\n        if (ptr != NULL)\n        {\n                printf (\"ptr = %s\\n\", ptr);\n                free(ptr);\n        }\n        else\n                printf (\"ptr is NULL\");\n        return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1507134164, "post_id": 46569442, "comment_id": 80093125, "body": "Where it says &quot;puts( next( &quot;one two three four five&quot;, 0 ) );&quot;, it is only supposed to write out &quot;one&quot;, how would I make that possible?"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "reply_to_user": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1507135760, "post_id": 46569442, "comment_id": 80093987, "body": "@Adrian. easy if you have access to <code>strchr</code> and <code>strdup</code>. Do you have?"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "reply_to_user": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1507136050, "post_id": 46569442, "comment_id": 80094110, "body": "@Adrian. In fact duplicate the <code>str</code> in inside the <b>next</b> then find the next whitespace and with <code>strchr</code> and that is it. <code>strchr</code> return a pointer before the white space. for example: <code>result [strchr( result, &#39; &#39; ) - result ] = &#39;\\0&#39;;</code> <b>NOTE</b> that you have to <code>free</code> the duplicated string"}], "tags": [], "owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "is_accepted": false, "score": 0, "last_activity_date": 1507137997, "last_edit_date": 1507137997, "creation_date": 1507133260, "answer_id": 46569442, "question_id": 46566179, "link": "https://stackoverflow.com/questions/46566179/type-a-function-getword-that-takes-a-string-and-returns-a-pointer-to-the-begi/46569442#46569442", "title": "Type a function getWord () that takes a string and returns a pointer to the beginning of the word", "body": "<p>Try this simple idea.<br>\nFirst try to implement a <code>next</code> function like this:  </p>\n\n<pre><code>char* next( const char* str )\n{\n    const char delimiter = ' ';\n\n    // skip all characters up to the first ' '\n    while( *str != delimiter &amp;&amp; *str != '\\0' ) ++str;\n\n    // may the first characters is ' ', so skip it as well\n    while( *str == delimiter ) ++str;\n\n    return str;\n}\n</code></pre>\n\n<p>okay, let's test:</p>\n\n<pre><code>int main( )\n{\n    const char* first = next( \"one two three four five\" );\n    puts( first );\n\n    first = next( first );\n    puts( first );\n\n    first = next( first );\n    puts( first );\n\n    first = next( first );\n    puts( first );\n}\n</code></pre>\n\n<p>its output:</p>\n\n<pre><code>LSP \u2771 ./a.out \ntwo three four five\nthree four five\nfour five\nfive\nLSP \u2771 \n</code></pre>\n\n<p>Now we need to tell the <code>next</code> function that not only goes to the next word but also count how many, thus is becomes:</p>\n\n<pre><code>char* next( const char* str, int index )\n{\n    const char delimiter = ' ';\n\n   // take care of index for us\n    while( index-- ){\n\n        while( *str != delimiter &amp;&amp; *str != '\\0' ) ++str;\n        while( *str == delimiter ) ++str;\n\n    }\n\n    if( *str == '\\0' ) return NULL;\n\n    return str;\n}\n</code></pre>\n\n<p>let's test:  </p>\n\n<pre><code>int main( )\n{\n    puts( next( \"one two three four five\", 0 ) );\n    puts( next( \"one two three four five\", 1 ) );\n    puts( next( \"one two three four five\", 2 ) );\n    puts( next( \"one two three four five\", 3 ) );\n    puts( next( \"one two three four five\", 4 ) );\n\n    if( next( \"one two three four five\", 5 ) == NULL )\n        puts( \"NULL was returned\" );\n}\n</code></pre>\n\n<p>and:  </p>\n\n<pre><code>LSP \u2771 ./a.out \none two three four five\ntwo three four five\nthree four five\nfour five\nfive\nNULL was returned\nLSP \u2771 \n</code></pre>\n\n<hr>\n\n<h2>feature:</h2>\n\n<pre><code>int main( )\n{\n    // 1. skip white space \n    puts( next( \"one      two     three      four        five\", 3 ) );\n    // returns: 'four        five'\n\n    puts( \"---------------\" );\n\n    // 2. easy iteration over a string \n    const char* first = \"one two three four five\";\n    while( ( first = next2( first ) ) != NULL )\n    {\n        puts( first );\n    }\n}\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>LSP \u2771 ./a.out \nfour        five\n---------------\ntwo three four five\nthree four five\nfour five\nfive\nLSP \u2771 \n</code></pre>\n\n<hr>\n\n<p>For returning just a word based on an index, you can use <code>strdup</code> see <code>man 3 strdup</code> and <code>strchr</code>, see <code>man 3 strchr</code>. Thus inside the <code>next function</code> you should add (after while loop):  </p>\n\n<pre><code>char* next( char* str, int index )\n{\n    const char delimiter = ' ';\n\n    while( index-- ){\n\n        while( *str != delimiter &amp;&amp; *str != '\\0' ) ++str;\n        while( *str == delimiter ) ++str;\n        if( *str == '\\0' ) return NULL;\n\n    }\n\n    // duplicate the current string\n    char* result = strdup( str );\n\n    // find the first whitespace and make it as NUL\n    result [strchr( result, ' ' ) - result ] = '\\0';\n\n    if( *result == '\\0' ) return NULL;\n\n    return result;\n}\n</code></pre>\n\n<p>and inside the main:  </p>\n\n<pre><code>int main( )\n{\n    char* r = next( \"one      two     three      four        five\", 3 );\n    if( r != NULL )\n    {\n        puts( r );\n        free( r );\n    }\n    else\n    {\n        puts( \"there is no word at index 3\" );\n    }\n\n    char* s = next( \"one      two     three      four        five\", 8 );\n    if( s != NULL )\n    {\n        puts( s );\n        free( s );\n    }\n    else\n    {\n        puts( \"there is no word at index 8\" );\n    }\n}\n</code></pre>\n\n<p>test:</p>\n\n<pre><code>LSP \u2771 gcc -fsanitize=address temp.c\nLSP \u2771 ./a.out \nfour\nthere is no word at index 8\nLSP \u2771 \n</code></pre>\n\n<hr>\n\n<p><strong>NOTE</strong> for <code>next2</code> just add:  </p>\n\n<pre><code>if( *str == '\\0' ) return NULL;\n</code></pre>\n\n<p>to the first <code>next</code> and names it <code>next2</code><br>\nAlso you should check the return value of <code>strdup</code> it may be <code>NULL</code></p>\n"}], "owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4727, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1507137997, "creation_date": 1507123713, "last_edit_date": 1507123770, "question_id": 46566179, "link": "https://stackoverflow.com/questions/46566179/type-a-function-getword-that-takes-a-string-and-returns-a-pointer-to-the-begi", "title": "Type a function getWord () that takes a string and returns a pointer to the beginning of the word", "body": "<p>I need to type a function getWord () that takes a string and an integer as argument. The function should return a pointer to the beginning of the word to which it refers. If word is 0, a pointer to the first word in the string will be returned, if word is 1, a pointer to the second word will be returned, etc. If word is greater or equal to the number of words in the string, NULL must be returned. </p>\n\n<p>Example run: </p>\n\n<pre><code>ptr = getWord (\"hello you\", 1); / * \"you\" returns * / \n\nptr2 = getWord (\"a string\", 0); / * \"a\" returns * / \n\nptr3 = getWord (\"one word\", 2); / * NULL returns * /\n\n    void getWord(char string[])\n{\n    int i;\n\n    for (i = 0; i &lt; strlen(string); i++)\n    {\n        if (isalpha(string[i]))\n            printf(\"%c\", string[i]);\n\n        if (string[i] == ' ')\n            break;\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "shared-libraries", "linkage"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507123439, "post_id": 46565968, "comment_id": 80085654, "body": "What you want might be solvable with some external tool, but it&#39;s not really how translation units or C compilers and linker work. You should probably learn the difference between a <i>declaration</i> (what you have in the header file) and a <i>definition</i> (what you have in <code>mylib.c</code>)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507124153, "post_id": 46565968, "comment_id": 80086201, "body": "Why does it matter whether all the declarations in a given header match definitions in a given library?  The relevant question is usually whether some or all of the functions <i>that are actually called</i> are defined in a given library.  Compilers can more readily be persuaded to answer the latter question."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507124358, "post_id": 46565968, "comment_id": 80086357, "body": "Additionally, your title casts the question in terms of header and shared object, but the text instead describes it as about header and source files.  Which do you really want to know about?"}, {"owner": {"reputation": 523, "user_id": 343314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3705bc45340e2c1fb2fef29977cb827a?s=128&d=identicon&r=PG", "display_name": "sema", "link": "https://stackoverflow.com/users/343314/sema"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507124368, "post_id": 46565968, "comment_id": 80086366, "body": "@Someprogrammerdude Thanks, I think my comment &quot;Note: The definition here, does not fit the declaration!&quot; indicates what I have understood. Can you elaborate more on what I may have not understood about declaration/definition from your perspective?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507124623, "post_id": 46565968, "comment_id": 80086524, "body": "&quot;I would like to have some warnings that the header file has undefined references with the shared object file&quot; The header file have not definitions, and so can&#39;t have any undefined references. Maybe I&#39;m misreading it?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507124670, "post_id": 46565968, "comment_id": 80086560, "body": "And also, there&#39;s really no connection between the header file and the translation unit built from <code>mylib.c</code>. How would the compiler ever know that a specific translation unit should define a specific declaration? Without compiler extensions it can&#39;t. And the linker have no knowledge of anything about the issue either, since there are no undefined references to <code>test</code> in any of the translation units used to create the library. Perhaps the problem is your understanding of <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\">translation units</a>?"}, {"owner": {"reputation": 523, "user_id": 343314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3705bc45340e2c1fb2fef29977cb827a?s=128&d=identicon&r=PG", "display_name": "sema", "link": "https://stackoverflow.com/users/343314/sema"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507124702, "post_id": 46565968, "comment_id": 80086586, "body": "@JohnBollinger Thanks, I have indeed thought about a test file that calls all the functions of the header, which presumes that my test file has a coverage that includes all function calls. That moves the problem to the test coverage analysis tool + compilation/linkage of the test code. This is exactly what my question is about, and so far I approached it with the compiler/linker and thought it should be feasible this way. To your second question: Well, I compile a shared object from a source file, I don&#39;t see how this is decoupled. Why do you distinguish it so strictly source and .so file?"}, {"owner": {"reputation": 523, "user_id": 343314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3705bc45340e2c1fb2fef29977cb827a?s=128&d=identicon&r=PG", "display_name": "sema", "link": "https://stackoverflow.com/users/343314/sema"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507125123, "post_id": 46565968, "comment_id": 80086876, "body": "@Someprogrammerdude I got you, &quot;has&quot; is the wrong wording here. I know and understand, the compiler does not NEED to check the header for some declarations, but I could do it (kind of) manually with &#39;nm&#39; and the header file, so why shouldn&#39;t it be possible to let GCC/linker check that for me? (rhetoric question) Is your answer then, that it&#39;s definitely not possible with either of them? I could accept that answer, if it&#39;s really the case BUT what is the ld option &#39;--no-allow-shlib-undefined&#39; then all about?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1507125429, "post_id": 46565968, "comment_id": 80087085, "body": "@sema - If this was a <i>real</i> library, you would likely have to write some test cases to verify that <code>test(i)</code> always returns <code>2 * i</code> for several different values of <code>i</code>. And you would then quickly notice if <code>test</code> was  missing altogether."}, {"owner": {"reputation": 523, "user_id": 343314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3705bc45340e2c1fb2fef29977cb827a?s=128&d=identicon&r=PG", "display_name": "sema", "link": "https://stackoverflow.com/users/343314/sema"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1507125746, "post_id": 46565968, "comment_id": 80087319, "body": "@BoPersson Thanks, but this is not the question. What i&#39;m doing with my <i>real</i> library is a JNI wrapper for some HW analysis system calls. Unfortunately, JNI header generation changes the function definitions whenever I change something in the Java side code. Writing tests for simply wrapper system calls is kind of pointless because it would only check my function definitions, which is useless if GCC checks that all functions have been defined."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507125755, "post_id": 46565968, "comment_id": 80087324, "body": "That&#39;s not really what the <code>--no-allow-shlib-undefined</code> option do. I recommend you read <a href=\"https://sourceware.org/binutils/docs/ld/Options.html\" rel=\"nofollow noreferrer\">the documentation</a> about it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507125963, "post_id": 46565968, "comment_id": 80087471, "body": "@sema why do you <i>not</i> distinguish between a shared object and the source (not necessarily just one file) from which it was built?  The information they contain is related, to be sure, but different.  Moreover, having one of the two does not necessarily mean you have or can obtain the other.  Overall, the answer to your question depends greatly on what exactly it is that you&#39;re trying to compare to the header."}, {"owner": {"reputation": 523, "user_id": 343314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3705bc45340e2c1fb2fef29977cb827a?s=128&d=identicon&r=PG", "display_name": "sema", "link": "https://stackoverflow.com/users/343314/sema"}, "edited": false, "score": 0, "creation_date": 1507126166, "post_id": 46565968, "comment_id": 80087585, "body": "I have read the documentation several times, but honestly I don&#39;t get why it&#39;s not doing what I want to do (Please note that I&#39;m not a native English speaker.): &quot;The default behaviour is to report errors for any undefined symbols referenced in shared libraries if the linker is being used to create an executable, but to allow them if the linker is being used to create a shared library.&quot; sounds to me like default is to check for undefined references when creating an executable and this option switches to &quot;when creating a shared library&quot;."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1507126480, "post_id": 46565968, "comment_id": 80087843, "body": "The magic word is &quot;referenced&quot;. The only way to <i>reference</i> a library symbol is <b>to use it</b>."}, {"owner": {"reputation": 523, "user_id": 343314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3705bc45340e2c1fb2fef29977cb827a?s=128&d=identicon&r=PG", "display_name": "sema", "link": "https://stackoverflow.com/users/343314/sema"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1507126859, "post_id": 46565968, "comment_id": 80088147, "body": "@tofro You&#39;re right, that&#39;s kind of the magic word because it points to the problem, BUT you see it in the opposite way as I do because the linker references the functions without using it! That means, it should be able to reference function declarations of a header file without using it, which is good because using it requires knowledge of the arguments to be provided and linkage doesn&#39;t."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1507127117, "post_id": 46565968, "comment_id": 80088371, "body": "Nah. You have a fatal mis-understanding what linking does - It doesn&#39;t <i>check</i> anything - It simply resolves symbolic references with numerical references. And if something is <i>not referenced</i>, it will not even touch it."}, {"owner": {"reputation": 523, "user_id": 343314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3705bc45340e2c1fb2fef29977cb827a?s=128&d=identicon&r=PG", "display_name": "sema", "link": "https://stackoverflow.com/users/343314/sema"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1507127877, "post_id": 46565968, "comment_id": 80088980, "body": "@tofro Okay, that&#39;s now a bit about wording: If it CAN&#39;T resolve a symbolic reference, it could do something like giving a warning. That&#39;s what I mean with a check. The header provides all the information that is necessary to resolve a symbolic reference, right? So it&#39;s not impossible. - Nevertheless, I understand that at the state of linking objects to a shared library compiler/linker have no notion of the header file to be &quot;checked&quot;, but I thought it could be possible with some features of GCC/linkers that I have never heard of. That&#39;s the question."}], "owner": {"reputation": 523, "user_id": 343314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3705bc45340e2c1fb2fef29977cb827a?s=128&d=identicon&r=PG", "display_name": "sema", "link": "https://stackoverflow.com/users/343314/sema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 815, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507131115, "creation_date": 1507123179, "last_edit_date": 1507131115, "question_id": 46565968, "link": "https://stackoverflow.com/questions/46565968/how-to-check-if-a-shared-object-library-provides-all-references-for-a-header-fil", "title": "How to check if a shared object library provides all references for a header file?", "body": "<p>How can I let GCC check if a shared object library provides definitions to all functions that have been declared in a header file? Given the example below, how can I verify during compilation steps that 'mylib.h' and 'mylib.c' are \"compatible\" without having an executable that (kind of) tests the library and header in the way that it then really links both?</p>\n\n<p>mylib.h:</p>\n\n<pre><code>#ifndef MYLIB_H\n#define MYLIB_H\n\nint test(int);\n\n#endif\n</code></pre>\n\n<p>mylib.c:</p>\n\n<pre><code>#include \"mylib.h\"\n\nint test_(int arg) { // Note: The definition here, does not fit the declaration!\n    return arg * 2;\n}\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"mylib.h\"\n\nint main(int argc, char* argv[]) {\n    printf(\"%d\\n\", test(42));\n    return 0;\n}\n</code></pre>\n\n<p>I would like to have some warnings that the header file <em>can result in</em> undefined references with the shared object file <em>if used by some application</em> (<em>edited wording for clarification</em>), but it's as follows:</p>\n\n<pre><code>gcc -c -fPIC -o mylib.o mylib.c \ngcc -shared -Wl,--no-undefined,--no-allow-shlib-undefined -o libmylib.so mylib.o\n# no error/warning here!\ngcc -L ./ -o main main.o -lmylib\nmain.o: In function `main':\nmain.c:(.text+0x15): undefined reference to `test'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>As shown, I tried to use the correct linker options '-Wl,--no-undefined,--no-allow-shlib-undefined' but it doesn't help, even if use the same options as shown here: <a href=\"https://stackoverflow.com/questions/2356168/force-gcc-to-notify-about-undefined-references-in-shared-libraries\">Force GCC to notify about undefined references in shared libraries</a></p>\n\n<pre><code>gcc -fPIC -shared -Wl,-soname,libmylib.so -Wl,--no-undefined -o libmylib.so mylib.c\n</code></pre>\n\n<p>-This means, I cannot reproduce the answer to the linked question!-</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>From discussions, I understand that the options like --no-allow-shlib-undefined aim for a different case, i.e., give warnings if a shared object calls/references some other library and references are undefined. Anyways, the aforementioned work-around is to have a little test that warns about undefined references:</p>\n\n<p>test-ref.c:</p>\n\n<pre><code>#include \"mylib.h\"\n\nint main(int argc, char* argv[]) {\n    test(0);\n}\n</code></pre>\n\n<p>which, if compiled and linked, gives the desired warning:</p>\n\n<pre><code>gcc -L . -o test-ref-noexec test-ref.c -lmylib\n/tmp/ccF4ob56.o: In function `main':\ntest-ref.c:(.text+0x15): undefined reference to `test'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p><strong>Note:</strong> The point is that it's not necessary to execute the binary and, therefore, arguments provided to the function don't matter at all. In that sense, I assume(d) GCC/linker could do this kind of check for a some defined header file or warn about any undefined reference etc.</p>\n\n<p>For the sake of completeness, I use the following setting:</p>\n\n<pre><code>uname -a\nLinux ubuntu 4.4.0-96-generic #119-Ubuntu SMP Tue Sep 12 14:59:54 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\ngcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/5/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 5.4.0-6ubuntu1~16.04.4' --with-bugurl=file:///usr/share/doc/gcc-5/README.Bugs --enable-languages=c,ada,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-5 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-5-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-5-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-5-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4)\n</code></pre>\n"}, {"tags": ["c++", "c", "automated-tests", "parasoft"], "answers": [{"tags": [], "owner": {"reputation": 918, "user_id": 3981605, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7da93ff376d785f85679880c6ffd5fc2?s=128&d=identicon&r=PG&f=1", "display_name": "eran meiri", "link": "https://stackoverflow.com/users/3981605/eran-meiri"}, "is_accepted": false, "score": 0, "last_activity_date": 1508243971, "creation_date": 1508243971, "answer_id": 46790364, "question_id": 46565700, "link": "https://stackoverflow.com/questions/46565700/how-to-set-compiler-path-in-parasoft-cpptestcli/46790364#46790364", "title": "How to set compiler path in parasoft cpptestcli?", "body": "<p>there is a flag named compiler:</p>\n\n<p>-compiler gcc_4_7</p>\n\n<p>add it and it will use the proper compiler</p>\n"}, {"comments": [{"owner": {"reputation": 2436, "user_id": 6900838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-vT_oqxXXH9o/AAAAAAAAAAI/AAAAAAAAAIU/0d4XZ9GEmb8/photo.jpg?sz=128", "display_name": "Alperen", "link": "https://stackoverflow.com/users/6900838/alperen"}, "edited": false, "score": 0, "creation_date": 1540540085, "post_id": 53002964, "comment_id": 92911738, "body": "Thanks for the answer but I cannot reach the project environment now. I was working on it when I was intern. So, I cannot confirm or reject your answer now. As far as I remember, I couldn&#39;t use the <code>-compiler</code> flag. Parasoft version was very old. I had some other problems and needed <a href=\"https://stackoverflow.com/a/46275670/6900838\">some old commands or stuff</a> to solve them. I am just writing this down in case of somebody else has the same problem."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 2436, "user_id": 6900838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-vT_oqxXXH9o/AAAAAAAAAAI/AAAAAAAAAIU/0d4XZ9GEmb8/photo.jpg?sz=128", "display_name": "Alperen", "link": "https://stackoverflow.com/users/6900838/alperen"}, "edited": false, "score": 0, "creation_date": 1540540403, "post_id": 53002964, "comment_id": 92911902, "body": "I have cpptest 10.4 (current version) at hand. By the way, you can also find the identifiers on <a href=\"https://docs.parasoft.com/display/CPPTEST1033/Supported+Compilers\" rel=\"nofollow noreferrer\">docs.parasoft.com/display/CPPTEST1033/Supported+Compilers</a>"}], "tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": false, "score": 0, "last_activity_date": 1540536433, "creation_date": 1540536433, "answer_id": 53002964, "question_id": 46565700, "link": "https://stackoverflow.com/questions/46565700/how-to-set-compiler-path-in-parasoft-cpptestcli/53002964#53002964", "title": "How to set compiler path in parasoft cpptestcli?", "body": "<p>First fo all, use <code>cpptestcli -list-compilers</code> in order to list the supported compilers. Next, use the appropriate <code>COMPILER ID</code> from the list in <code>-compiler &lt;COMPILER ID&gt;</code>, e.g.</p>\n\n<pre><code>cpptestcli -compiler gcc_7-64 \u2026\n</code></pre>\n"}], "owner": {"reputation": 2436, "user_id": 6900838, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-vT_oqxXXH9o/AAAAAAAAAAI/AAAAAAAAAIU/0d4XZ9GEmb8/photo.jpg?sz=128", "display_name": "Alperen", "link": "https://stackoverflow.com/users/6900838/alperen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1540536433, "creation_date": 1507122426, "question_id": 46565700, "link": "https://stackoverflow.com/questions/46565700/how-to-set-compiler-path-in-parasoft-cpptestcli", "title": "How to set compiler path in parasoft cpptestcli?", "body": "<p>I'm using Parasoft C++test 9.0.\nI've used \"cpptestscan.exe\" to create build data file(bdf), then I want to run my ruleset with \"cpptestcli.exe\".\nWhen I use \"New Project -> C++ Test -> Create project from a build data file\" in Parasoft IDE(Eclipse based), it allows me to configure compiler setting(family, c compiler, c++ compiler and linker), and it works in IDE. But, when I create project with:</p>\n\n<pre><code>cpptestcli -bdf \"%BDF_PATH%\\cpptestscan.bdf\" -data \"%REPO_PATH%\"\n</code></pre>\n\n<p>It creates \".metadata\" and \"Source(project name)\" folders, and creates \".project\", \".project\", \".project\" files in Source folder. Then, if I try to run test with:</p>\n\n<pre><code>cpptestcli -data \"%REPO_PATH%\" -config \"%REPO_PATH%\\ruleset.properties\" -import \"%REPO_PATH%\\Source\\.project\" -showdetails -nobuild -report \"%REPORT_PATH%\\Report.html\"\n</code></pre>\n\n<p>Because it doesn't use the proper compiler, it gives this error:</p>\n\n<blockquote>\n  <p>Failed checking foo.c - Coding Standards checker: error during parsing\n  file.</p>\n</blockquote>\n\n<p>How can I tell cpptestcli.exe to use proper compiler? I can't find any option in its help document. Or is any other way to fix this problem?</p>\n"}, {"tags": ["c", "segmentation-fault", "function-pointers"], "comments": [{"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1507122455, "post_id": 46565672, "comment_id": 80084889, "body": "Is it building?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1507122482, "post_id": 46565672, "comment_id": 80084909, "body": "Perhaps you should check what <code>getMenuChoice</code> returns before using it? Always a good thing to do when you have a function that can return a null pointer."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1507122517, "post_id": 46565672, "comment_id": 80084941, "body": "This needs a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1507122573, "post_id": 46565672, "comment_id": 80084992, "body": "You should probably check what <code>fgets</code> return as well, or you many not always use a valid index when checking for the newline."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507122853, "post_id": 46565672, "comment_id": 80085215, "body": "If it points to nothing, it is <code>NULL</code> (deducted from <i>your</i> code). So you could just check if it&#39;s <code>NULL</code> and not call it in that case or take some other appropriate action."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507122922, "post_id": 46565672, "comment_id": 80085269, "body": "You should be sure to initialize your <code>MenuItem</code>s when you create them, or at least before you use them.  If there are some of the function pointers that are <i>intended</i> to not point to any function, then be sure to set them to <code>NULL</code>.  The existence of even one such in the whole system then implies that you must perform a NULL check before attempting to use any of the function pointers.  If you do not exercise sufficient discipline to ensure that your function pointers are either valid or NULL, then there is no good way to check whether they are valid."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507124079, "post_id": 46565672, "comment_id": 80086140, "body": "The posted code assumes (I.E. not part of the posted code fragment) there is a table (instances of a struct).  The normal logic is to 1) get a choice from the user 2) validate the choice 3) execute the function directly from the table rather than copying the function pointer from the table to another pointer"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507124255, "post_id": 46565672, "comment_id": 80086292, "body": "the posted code contains two variable names that will produce conflicts.  <code>select</code> is a well known library function, found in <code>sys&#47;select.h</code> and <code>unistd.h</code>.   <code>system</code> is a well known library function found in <code>stdlib.h</code>.   Suggest using different names for those variables."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1507124434, "creation_date": 1507124434, "answer_id": 46566434, "question_id": 46565672, "link": "https://stackoverflow.com/questions/46565672/function-pointer-points-to-nothing-how-do-i-avoid-this/46566434#46566434", "title": "Function pointer points to nothing \u2014 how do I avoid this?", "body": "<p>To avoid 'this' seg fault event:</p>\n\n<p>Check that the instance of the typedef contains other than NULL before calling the function via the instance of the typedef</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 2, "last_activity_date": 1507129479, "creation_date": 1507129479, "answer_id": 46568180, "question_id": 46565672, "link": "https://stackoverflow.com/questions/46565672/function-pointer-points-to-nothing-how-do-i-avoid-this/46568180#46568180", "title": "Function pointer points to nothing \u2014 how do I avoid this?", "body": "<p>A great strategy for managing all pointers (data functions as well as function pointers) is: have them always point to something valid, or be null.  That is:</p>\n\n<ol>\n<li>When you declare a pointer variable, always initialize it, either to point to something valid, or to NULL.</li>\n<li>Before using a pointer, make sure it's not NULL.</li>\n<li>When you do anything that would invalidate a pointer, set it back to NULL.</li>\n</ol>\n\n<p>In your case, you're following rule 1 already, when you initialize</p>\n\n<pre><code>MenuFunction function = NULL;\n</code></pre>\n\n<p>So your <code>getMenuChoice()</code> function returns NULL if the choice was invalid.  Nothing wrong with that, it's a common pattern.</p>\n\n<p>What you need to additionally do is comply with rule 2.  Right now you've got</p>\n\n<pre><code>(*getMenuChoice(menu))(&amp;system);\n</code></pre>\n\n<p>which is kind of a mouthful: you call <code>getMenuChoice()</code>, then immediately call the function that it returned a pointer to.  Split this up into several lines:</p>\n\n<pre><code>MenuFunction fp;\nfp = getMenuChoice(menu);\nif(fp == NULL)\n    fprintf(stderr, \"invalid choice\\n\");\nelse\n    (*fp)(&amp;system);\n</code></pre>\n\n<p>Here, we capture <code>getMenuChoice</code>'s return value in a new variable <code>fp</code>, and we test to make sure it's not NULL before we call it.</p>\n\n<p>[P.S. In your case, you don't need to worry about my rule 3.]</p>\n"}], "owner": {"reputation": 53, "user_id": 7789098, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9f2f095050a2c2df9224dae9ee9f5e61?s=128&d=identicon&r=PG&f=1", "display_name": "JunitHelp", "link": "https://stackoverflow.com/users/7789098/junithelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "accepted_answer_id": 46568180, "answer_count": 2, "score": -1, "last_activity_date": 1507141563, "creation_date": 1507122344, "last_edit_date": 1507141563, "question_id": 46565672, "link": "https://stackoverflow.com/questions/46565672/function-pointer-points-to-nothing-how-do-i-avoid-this", "title": "Function pointer points to nothing \u2014 how do I avoid this?", "body": "<p>I currently have a typedef pointer function that doesn't point to anything which result to a Segmentation fault (core dumped). I am trying to think of a solution to avoid it but can't think of any so far.</p>\n\n<p>My code:</p>\n\n<pre><code>typedef void (*MenuFunction)(System*);\n\nint main(int argc, char ** argv)\n{\n    ...\n    /* While loop for my menu */ \n    while(1)\n    {\n        printf(\"Main Menu\\n\");\n        printf(\"%s\\n\", menu[0].text);\n        printf(\"%s\\n\", menu[1].text);\n        printf(\"%s\\n\", menu[2].text);\n        printf(\"Select your option (1-3): \");\n        (*getMenuChoice(menu))(&amp;system);\n    }\n}\n\n/* Function that points to the menu function */\nMenuFunction getMenuChoice(MenuItem * menu)\n{\n    MenuFunction function = NULL;\n    char select[50];\n    fgets(select, 50, stdin);\n    if(select[strlen(select)-1] == '\\n')\n    {      \n        switch(select[0])\n        {\n            case '1':\n                function = menu[0].function;\n                break;\n            case '2':\n                function = menu[1].function;\n                break;\n            case '3':    \n                function = menu[2].function;\n                exit(0);\n                break;\n            default:\n                printf(\"Invalid option\\n\");\n        }\n    }\n    else\n    {\n        readRestOfLine();\n        printf(\"Error: buffer overflow. Please try again, entering less data\");\n    }\n    return function;\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Right now, the solution I came up with was to create a function with nothing in it so I can have the function to point to something. I don't think this is ideal but it will do in the short run.</p>\n\n<pre><code>void skip()\n{ }\n</code></pre>\n"}, {"tags": ["c++", "c", "openldap"], "comments": [{"owner": {"reputation": 31, "user_id": 5775301, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pZVDKWGOSnc/AAAAAAAAAAI/AAAAAAAAABE/s62k6q61AWE/photo.jpg?sz=128", "display_name": "ghitea cosmin", "link": "https://stackoverflow.com/users/5775301/ghitea-cosmin"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1507177673, "post_id": 46565648, "comment_id": 80108651, "body": "Ok sorry for that."}], "owner": {"reputation": 31, "user_id": 5775301, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pZVDKWGOSnc/AAAAAAAAAAI/AAAAAAAAABE/s62k6q61AWE/photo.jpg?sz=128", "display_name": "ghitea cosmin", "link": "https://stackoverflow.com/users/5775301/ghitea-cosmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507122683, "creation_date": 1507122267, "last_edit_date": 1507122683, "question_id": 46565648, "link": "https://stackoverflow.com/questions/46565648/how-to-get-the-entrycsn-when-using-the-ldap-exop-modify-passwd", "title": "How to get the entryCSN when using the LDAP_EXOP_MODIFY_PASSWD", "body": "<p>What I want is to use ldap_passwd function from OpenLdap to change the password and to make a request with the post read control that should response with the attribute I requested on the control.\nThe problem is I don't receive any data from the request control just the password is change.\nThe same comportment is when I use the ldappasswd functionality.\nHere is my command:<br><br></p>\n\n<pre><code>$ ldappasswd -H ldap://localhost:389 -x -D \"cn=admin,dc=example,dc=com\" -w secret -epostread=entryCSN -a secret -s secret -ZZ\n</code></pre>\n\n<p>The question is why I don't receive any data from the server?</p>\n"}, {"tags": ["c", "double", "swap", "digits"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 11, "creation_date": 1507121445, "post_id": 46565325, "comment_id": 80084171, "body": "Stringify it. Swap the chars, unstringify it.  sprintf(), sscanf()."}, {"owner": {"reputation": 4250, "user_id": 2702249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JqzQL.jpg?s=128&g=1", "display_name": "Om Sao", "link": "https://stackoverflow.com/users/2702249/om-sao"}, "edited": false, "score": 0, "creation_date": 1507121609, "post_id": 46565325, "comment_id": 80084283, "body": "If it is a programming assignment and you don&#39;t want to stringify it. First extract all digits using the modulo 10 function on reminders. Then check for 2nd and 4th digit accordingly. For example: In a number n=12345.678. Extract decimal part using <code>n-n%1</code> Get last digit with <code>n-n%10</code> and then divide n with 10, similarly get next digit and so on."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1507121632, "post_id": 46565325, "comment_id": 80084294, "body": "..or you could do some explicit, nasty loopy/recursivey thing with mult/div by 10 repeatedly."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 4250, "user_id": 2702249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JqzQL.jpg?s=128&g=1", "display_name": "Om Sao", "link": "https://stackoverflow.com/users/2702249/om-sao"}, "edited": false, "score": 0, "creation_date": 1507121851, "post_id": 46565325, "comment_id": 80084467, "body": "@OmSao <code>n%1</code> would break the constraint <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.5p2\" rel=\"nofollow noreferrer\">&quot;The operands of the % operator shall have integer type.&quot;</a>, unless you&#39;ve omitted something."}, {"owner": {"reputation": 4250, "user_id": 2702249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/JqzQL.jpg?s=128&g=1", "display_name": "Om Sao", "link": "https://stackoverflow.com/users/2702249/om-sao"}, "edited": false, "score": 0, "creation_date": 1507121915, "post_id": 46565325, "comment_id": 80084509, "body": "@llja: Eeee.. missed the point in hurry. Thanks mate for pointing out !!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1507122195, "post_id": 46565325, "comment_id": 80084704, "body": "... but there is, of course, the standard <code>fmod()</code> function for floating-point modulus."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507126116, "post_id": 46565325, "comment_id": 80087555, "body": "With many initial <code>double</code>, the constructed <code>double</code> will not meet expectations due to rounding."}], "answers": [{"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 1, "last_activity_date": 1507128356, "last_edit_date": 1507128356, "creation_date": 1507122265, "answer_id": 46565645, "question_id": 46565325, "link": "https://stackoverflow.com/questions/46565325/swap-digits-in-a-double-in-c/46565645#46565645", "title": "Swap digits in a double in C", "body": "<p><em>Using stringification approach:</em><br>\nThere are more elegant ways, but you can see the steps (and improve on) this pseudo code to stringify, move values, and convert back to number.  </p>\n\n<pre><code>char buf1[20];\nchar buf2[20];\nchar *dummy;\ndouble val = 54321.987;\n\nsprintf(buf1, \"%9.3f\", val );\n//Now the number is in string form: \"54321.987\".  Just move the two elements  \nbuf2[0]=buf1[0];\nbuf2[1]=buf1[3];\nbuf2[2]=buf1[2];\nbuf2[3]=buf1[1]; //and so on\n//now convert back:\n\nval = strtod(buf2, &amp;dummy);\nprintf(\"%9.3f\\n\", val);\n</code></pre>\n\n<p>Or, a function could be used to do essentially the same thing: (still stringification)  </p>\n\n<pre><code>double swap_num_char(double num, int precision, int c1, int c2); //zero index for c1 and c2\n\n\nint main(void)\n{\n\n    double val = 54321.987;\n\n    printf(\"%9.3f\\n\", swap_num_char(val, 3, 1, 3));\n\n    return 0;   \n}\n\ndouble swap_num_char(double num, int precision, int c1, int c2)\n{\n    char buf[25]; \n    char format[10];\n    char *dummy;\n    char c;\n\n    sprintf(format, \"%s0.%df\", \"%\", precision);\n\n    sprintf(buf, format, num);\n\n    c = buf[c1];\n    buf[c1] = buf[c2];\n    buf[c2] = c;\n\n    num = strtod(buf, &amp;dummy);\n\n    return num;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507127773, "post_id": 46566362, "comment_id": 80088893, "body": "@chux I just now edited the code as per your suggestion.does it has new bugs?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507128174, "post_id": 46566362, "comment_id": 80089187, "body": "I think it would be more clear with <code>double dummy; double _4th_digit = (10*modf(numbergiven&#47;10000, &amp;dummy)) - modf(numbergiven&#47;1000, &amp;dummy);</code>"}], "tags": [], "owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "is_accepted": false, "score": 0, "last_activity_date": 1507128870, "last_edit_date": 1507128870, "creation_date": 1507124237, "answer_id": 46566362, "question_id": 46565325, "link": "https://stackoverflow.com/questions/46565325/swap-digits-in-a-double-in-c/46566362#46566362", "title": "Swap digits in a double in C", "body": "<p>If you want input number to be double then you can do something like this:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    int main()\n    {\n        double numbergiven = 56789.1234;\n        double dummy;\n        double _4th_digit = (10*modf(numbergiven/10000, &amp;dummy)) - modf(numbergiven/1000, &amp;dummy);\n        double _2th_digit = (10*modf(numbergiven/100, &amp;dummy)) - modf(numbergiven/10, &amp;dummy);\n        numbergiven = numbergiven - (_4th_digit * 1000) + (_2th_digit * 1000);\n        numbergiven = numbergiven + (_4th_digit * 10) - (_2th_digit * 10);\n        printf(\"%lf\",numbergiven);\n        return 0;\n    }\n</code></pre>\n\n<p>If you are not familiar with modf then you can simply do it this way:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    int main()\n    {\n        double numbergiven = 56789.1234;\n        int number = numbergiven;\n        int _4th_digit = (number/1000) - (10*(number/10000));\n        int _2th_digit = (number/10) - (10*(number/100));\n        numbergiven = numbergiven - (_4th_digit * 1000) + (_2th_digit * 1000);\n        numbergiven = numbergiven + (_4th_digit * 10) - (_2th_digit * 10);\n        printf(\"%lf\",numbergiven);\n        return 0;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507126193, "post_id": 46566605, "comment_id": 80087606, "body": "Detail <code>(int)(x &#47; 10)</code> is UB for large <code>double</code>.  OP likely is not concerned with code working for all <code>double</code>."}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 0, "last_activity_date": 1507125244, "last_edit_date": 1507125244, "creation_date": 1507124922, "answer_id": 46566605, "question_id": 46565325, "link": "https://stackoverflow.com/questions/46565325/swap-digits-in-a-double-in-c/46566605#46566605", "title": "Swap digits in a double in C", "body": "<p>You can get the two digits you're interested in with simple operations:</p>\n\n<p>You can do so with</p>\n\n<pre><code>double x = 54321.987;\ndouble tens = ((int)(x / 10)) % 10;        // Result is 2\ndouble thousands = ((int)(x / 1000)) % 10; // Result is 4\n</code></pre>\n\n<p>Then you can subtract out the digits from their original place,\nand add them back in a new place:</p>\n\n<pre><code>x = x - (tens * 10.0) - (thousands * 1000.0); // result is 50301.987\nx = x + (tens * 1000.0) + (thousands * 10.0); // result is 52341.987\n</code></pre>\n\n<p>Now just reduce the expression:</p>\n\n<pre><code>x = x + tens * (1000.0 - 10.0) - thousands * (1000.0 - 10.0);\n</code></pre>\n\n<p>This leaves you with a final expression:</p>\n\n<pre><code>x += (tens - thousands) * 990.0;\n</code></pre>\n\n<p>Or, if you don't want the intermediate variables:</p>\n\n<pre><code>x += (((int)(x/10))%10 - ((int)(x/1000))%10) * 990;\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "is_accepted": false, "score": 0, "last_activity_date": 1507125447, "creation_date": 1507125447, "answer_id": 46566782, "question_id": 46565325, "link": "https://stackoverflow.com/questions/46565325/swap-digits-in-a-double-in-c/46566782#46566782", "title": "Swap digits in a double in C", "body": "<p>One solution would be to extract the digits, then swap them.</p>\n\n<p>You extract the digits (from positive numbers, at least) by using floor():</p>\n\n<pre><code>int place1 = 1; /* 0-based*/\ndouble desiredPowerOf10 = powersOf10[place1];\ndouble nextPowerOf10 = powersOf10[place1 + 1];\ndouble digit1 = floor(number / desiredPowerOf10) - floor(number/nextPowerOf10) * 10;\n</code></pre>\n\n<p>You can then subtract the digits and add them back with the different powers:</p>\n\n<pre><code>double digitsRemoved = number - (digit1 * power1 + digit2 * power2);\ndouble digitsSwapped = digitsRemoved + digit1 * power2 + digit2 * power1;\n</code></pre>\n\n<p>This may be susceptible to loss of precision with very large numbers, though.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1507127399, "last_edit_date": 1507127399, "creation_date": 1507127015, "answer_id": 46567357, "question_id": 46565325, "link": "https://stackoverflow.com/questions/46565325/swap-digits-in-a-double-in-c/46567357#46567357", "title": "Swap digits in a double in C", "body": "<p>1 - Use <code>modf()</code> to break the number into whole and fractional parts.</p>\n\n<pre><code>double modf(double value, double *iptr);\n</code></pre>\n\n<blockquote>\n  <p>The <code>modf</code> functions break the argument <code>value</code> into integral and fractional parts,  C11 \u00a77.12.6.12</p>\n</blockquote>\n\n<p>2 - Print the whole number part as a string and do the swap.</p>\n\n<p>3 - Reconstruct</p>\n\n<pre><code>#include &lt;float.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\ndouble swap2_4digit(double x) {\n  if (signbit(x)) {\n    return -swap2_4digit(-x);\n  }\n  printf(\"Before %f\\n\", x);\n  double ipart;\n  double fpart = modf(x, &amp;ipart);\n  //       ms_digit    digits  '.'  '\\0'  min_size  \n  char buf[1 + DBL_MAX_10_EXP + 1 +  1   + 4];  // Insure buffer is big enough\n\n  strcpy(buf, \"0000\");  // Handle small numbers\n  sprintf(buf + strlen(buf), \"%.0f\", ipart);\n  size_t len = strlen(buf);\n  char ch = buf[len - 2];\n  buf[len - 2] = buf[len - 4];\n  buf[len - 4] = ch;\n\n  x = atof(buf) + fpart;\n  printf(\"After  %f\\n\", x);\n  return x;\n}\n\nint main(void) {\n  swap2_4digit(54321.987);\n  swap2_4digit(12.34);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Before 54321.987000\nAfter  52341.987000\nBefore 12.340000\nAfter  1002.340000\n</code></pre>\n\n<p>Something left for OP.  Make general for other digit positions.</p>\n"}, {"tags": [], "owner": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "is_accepted": false, "score": 0, "last_activity_date": 1507150268, "last_edit_date": 1507150268, "creation_date": 1507127254, "answer_id": 46567438, "question_id": 46565325, "link": "https://stackoverflow.com/questions/46565325/swap-digits-in-a-double-in-c/46567438#46567438", "title": "Swap digits in a double in C", "body": "<p>Double is stored in a memory as a sequence of bits, but you want to operate with decimal digits. Doing this with <code>double</code> variable you may not receive the original digits because of <a href=\"https://en.wikipedia.org/wiki/Floating-point_arithmetic\" rel=\"nofollow noreferrer\">floating-point arithmetic</a>.</p>\n\n<p>Therefore, you should manipulate with string representation of double. The main aspect is how many digits string will contain. But it's obvious that you get number from input. Scan it as string, not as <code>double</code>.</p>\n\n<p>There is a working code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stddef.h&gt;\n\n#define BUFSIZE 255\n\nvoid swap_digits(char *str, int n, int m) {\n    char *digit1 = NULL;\n    char *digit2 = NULL;\n\n    int count = 0;\n    while (*str &amp;&amp; (!digit1 || !digit2)) {\n        if (*str != '.') {\n            count++;\n            if (count == n) {\n                digit1 = str;\n            }\n            if (count == m) {\n                digit2 = str;\n            }\n        }\n\n        str++;\n    }\n\n    if (digit1 &amp;&amp; digit2) {\n        char tmp = *digit1;\n        *digit1 = *digit2;\n        *digit2 = tmp;\n    }\n}\n\nint main(void) {\n    char buffer[BUFSIZE];\n    scanf(\"%s\", buffer);\n\n    // it is preferably to validate input\n\n    swap_digits(buffer, 2, 4);\n    printf(buffer);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1507130051, "last_edit_date": 1507130051, "creation_date": 1507129324, "answer_id": 46568125, "question_id": 46565325, "link": "https://stackoverflow.com/questions/46565325/swap-digits-in-a-double-in-c/46568125#46568125", "title": "Swap digits in a double in C", "body": "<p>or use <code>fmod()</code>  <a href=\"https://stackoverflow.com/questions/46565325/swapping-2-digits-in-a-double-with-c/46565645?noredirect=1#comment80084704_46565325\">@John Bollinger</a>.</p>\n\n<blockquote>\n  <p>The <code>fmod</code> functions compute the floating-point remainder of <code>x/y</code>.</p>\n</blockquote>\n\n<p>Extract the 2  digits each  with the difference of modding with 10<sup>place</sup> and modding with 10<sup>place-1</sup>.</p>\n\n<p>Subtract the 2 digits and then add them back swapped.</p>\n\n<pre><code>double swap_digit(double x, unsigned a, unsigned b) {\n  printf(\"Before %f\\n\", x);\n  double a_place = pow(10.0, a);\n  double b_place = pow(10.0, b);\n  double scaled_digit_a = fmod(x, a_place) - fmod(x, a_place/10);\n  double scaled_digit_b = fmod(x, b_place) - fmod(x, b_place/10);\n  x -= scaled_digit_a + scaled_digit_b;\n  x += scaled_digit_a/a_place*b_place + scaled_digit_b/b_place*a_place;\n  printf(\"After  %f\\n\", x);\n  return x;\n}\n\nint main(void) {\n  swap_digit(54321.987,2,4);\n  swap_digit(12.34,2,4);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Before 54321.987000\nAfter  52341.987000\nBefore 12.340000\nAfter  1002.340000\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8720099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9cc54ea6100b7a9f6db28e5a9fddf4a?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Ridder", "link": "https://stackoverflow.com/users/8720099/frank-ridder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "closed_date": 1507132442, "accepted_answer_id": 46565645, "answer_count": 7, "score": 2, "last_activity_date": 1507150268, "creation_date": 1507121346, "last_edit_date": 1507134879, "question_id": 46565325, "link": "https://stackoverflow.com/questions/46565325/swap-digits-in-a-double-in-c", "closed_reason": "Duplicate", "title": "Swap digits in a double in C", "body": "<p>What I want to do in C is swap two digits in a double.</p>\n\n<p>For example, if the input is  <code>54321.987</code> and I want to swap the 2nd with the 4th digit, the output should be <code>52341.987</code>.</p>\n\n<p>Example when too small: <code>12.34</code> would output <code>1002.34</code>.</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array", "average"], "comments": [{"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 2, "creation_date": 1507121138, "post_id": 46565142, "comment_id": 80083966, "body": "You should set <code>sum</code> to <code>0</code> after you have calculated <code>avg</code>."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 1, "creation_date": 1507121186, "post_id": 46565142, "comment_id": 80083998, "body": "You should set <code>sum</code> to <code>0</code> before you started inner for loop."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1507121263, "post_id": 46565142, "comment_id": 80084046, "body": "you should set <code>sum</code> to &#39;0&#39; as the first statement of the for-i loop. At the moment it&#39;s nor guaranteed that <code>sum</code> is 0.0 in the beginning."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1507121345, "post_id": 46565142, "comment_id": 80084104, "body": "Whitespace is cheap. Please use it to improve readability."}, {"owner": {"reputation": 89, "user_id": 8720051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc9af77fda8ebd7afbbb04f79cdaab1b?s=128&d=identicon&r=PG&f=1", "display_name": "Denise", "link": "https://stackoverflow.com/users/8720051/denise"}, "edited": false, "score": 0, "creation_date": 1507121704, "post_id": 46565142, "comment_id": 80084354, "body": "i knew it got something to do with the sum. Thank you people!"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1507122773, "post_id": 46565142, "comment_id": 80085153, "body": "Besides that, I think you should limit your inner loop to j &lt; 3, because you are using the last element to store the average."}], "answers": [{"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1507121440, "creation_date": 1507121440, "answer_id": 46565347, "question_id": 46565142, "link": "https://stackoverflow.com/questions/46565142/compute-average-on-each-rows-and-store-in-the-last-element/46565347#46565347", "title": "Compute average on each rows and store in the last element", "body": "<p>Move variable \"sum\" inside first for loop -</p>\n\n<pre><code> for(i=0;i&lt;4;i++)\n {\n    float sum = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1507122997, "creation_date": 1507122997, "answer_id": 46565900, "question_id": 46565142, "link": "https://stackoverflow.com/questions/46565142/compute-average-on-each-rows-and-store-in-the-last-element/46565900#46565900", "title": "Compute average on each rows and store in the last element", "body": "<p>There are two bugs in the function.</p>\n\n<p>The first one is that the variable <code>sum</code> initially is not initialized and neither initialized in each iteration of the outer loop.</p>\n\n<p>The second bug is that the last element of each row should not take part in the calculation of the average.</p>\n\n<p>Taking this into account the function can look the following way</p>\n\n<pre><code>    void findAverage2D( float matrix[][4], size_t n )\n    {\n        const size_t M = 4;\n\n        for ( size_t i = 0; i &lt; n; i++ )\n        {\n            float sum = 0.0f;\n            for ( size_t j = 0; j &lt; M - 1; j++ )\n            {\n                sum += matrix[i][j];\n            }\n            matrix[i][M-1] = sum / ( M - 1 );\n        }\n    }\n}\n</code></pre>\n\n<p>The function must be called with two arguments where the second argument is the number of rows in a given array.</p>\n"}], "owner": {"reputation": 89, "user_id": 8720051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc9af77fda8ebd7afbbb04f79cdaab1b?s=128&d=identicon&r=PG&f=1", "display_name": "Denise", "link": "https://stackoverflow.com/users/8720051/denise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 46565347, "answer_count": 2, "score": 1, "last_activity_date": 1507122997, "creation_date": 1507120848, "question_id": 46565142, "link": "https://stackoverflow.com/questions/46565142/compute-average-on-each-rows-and-store-in-the-last-element", "title": "Compute average on each rows and store in the last element", "body": "<p>I need to compute the average of each row and store in the last element. I managed to do but the subsequent rows are the accumulated average from the previous row. \neg:</p>\n\n<p>input:</p>\n\n<p>1 2 3 0</p>\n\n<p>4 5 6 0</p>\n\n<p>output:</p>\n\n<p>1.00 2.00 3.00 2.00</p>\n\n<p>4.00 5.00 6.00 <strong>7.00</strong> (This should be 5.00) </p>\n\n<p>Here is my code</p>\n\n<pre><code>   void findAverage2D(float matrix[4][4])\n     {    \n       int i,j = 0;\n       float sum,avg=0;\n\n       for(i=0;i&lt;4;i++)\n     {\n        for(j=0; j&lt;4;j++)\n        {\n            sum+= matrix[i][j];\n        }\n        avg = sum/3;\n            matrix[i][3] =avg;\n\n    }\n}\n</code></pre>\n\n<p>Thanks in advance. :)</p>\n"}, {"tags": ["c++", "c", "windows", "type-conversion", "warnings"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1507119941, "post_id": 46564815, "comment_id": 80083097, "body": "is it c or c++ ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1507120134, "post_id": 46564815, "comment_id": 80083243, "body": "In the 2015 MSVC I use, <code>sizeof(size_t)</code> is 4. I guess that is why you get the message about possible loss of data."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1507120157, "post_id": 46564815, "comment_id": 80083264, "body": "Are you compiling for 32 bits or 64 bits?  <code>size_t</code> basically represents the range of addresses you can have."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1507120164, "post_id": 46564815, "comment_id": 80083267, "body": "If you compile in 32-bit mode, <code>size_t</code> will be 32 bits. A file <i>could</i> be larger than what fits in 32 bits. If you are <b>sure</b> it&#39;s not, you could try a cast. Otherwise you could perhaps use <code>unsigned long long</code> or <code>std::uint64_t</code> instead of <code>size_t</code>."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1507120268, "post_id": 46564815, "comment_id": 80083351, "body": "@NathanOliver I&#39;m compiling for 32 bits."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1507120324, "post_id": 46564815, "comment_id": 80083398, "body": "Moreover, my Windows 7 system will not allow the program to use more than about 2 Gb memory anyway, as the sum of static and dynamic allocations. I don&#39;t know if that applies to Windows 10."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1507120347, "post_id": 46564815, "comment_id": 80083417, "body": "@machine_1 That means <code>size_t</code> is going to be a <code>unsigned</code> or <code>unsigned long</code>.  You&#39;ll never be able to fully convert a 64 bit type to a 32 bit type.  Best you can do is check the return and make sure it is not larger then what <code>size_t</code> can hold."}, {"owner": {"reputation": 658, "user_id": 2372992, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/65e5b2cb3b356fe30143fe271d780f45?s=128&d=identicon&r=PG&f=1", "display_name": "amritanshu", "link": "https://stackoverflow.com/users/2372992/amritanshu"}, "edited": false, "score": 0, "creation_date": 1507121078, "post_id": 46564815, "comment_id": 80083930, "body": "use LARGE_INTEGER.quadpart to save the value you get from getfilesize, If highpart is set you know things are bad otherwise use Lowpart to allocate memory."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507131690, "post_id": 46565135, "comment_id": 80091533, "body": "If not a check for <code>some_int64 &lt; 0</code> also  needed for safe conversion from <code>__int64</code> to <code>size_t</code>?  Of course negative file sizes are not expected."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507186301, "post_id": 46565135, "comment_id": 80111802, "body": "@chux Of course if <code>GetFileSizeEx</code> spits out negative values, then all bets are off. But this should be checked by the caller code using the <code>FileSize</code> function, which apparently returns -1 upon error."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1507120834, "creation_date": 1507120834, "answer_id": 46565135, "question_id": 46564815, "link": "https://stackoverflow.com/questions/46564815/safe-conversion-from-int64-to-size-t/46565135#46565135", "title": "Safe conversion from __int64 to size_t", "body": "<p>This is very much system-specific. On some systems, <code>size_t</code> may be smaller than <code>int64_t</code>, which would give the warning. But of course you can't malloc more than what will fit inside a <code>size_t</code> anyway.</p>\n\n<p>It is most likely safe to do <code>size_t s = (size_t)some_int64;</code>.</p>\n\n<p>However, if you are feeling paranoid, you can add a check/assert:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n...\nif(some_int64 &gt; SIZE_MAX) // this line is fully portable\n{\n  halt_and_catch_fire();\n}\n</code></pre>\n\n<p><code>SIZE_MAX</code> is a constant representing the maximum value that a <code>size_t</code> variable can hold.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507121367, "post_id": 46565193, "comment_id": 80084117, "body": "This will however block the possibly fine &amp; correct program from compiling. The OP has an interface with <code>int64_t</code>, but those variables do not necessarily take greater values than what can fit inside a <code>size_t</code>."}], "tags": [], "owner": {"reputation": 522, "user_id": 8720110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5QtZ.png?s=128&g=1", "display_name": "Raynigon", "link": "https://stackoverflow.com/users/8720110/raynigon"}, "is_accepted": false, "score": 2, "last_activity_date": 1507120990, "creation_date": 1507120990, "answer_id": 46565193, "question_id": 46564815, "link": "https://stackoverflow.com/questions/46564815/safe-conversion-from-int64-to-size-t/46565193#46565193", "title": "Safe conversion from __int64 to size_t", "body": "<p>The size_t type is implementation-defined.\nSo there is no way to be sure the value of __int64 can be safely stored in a size_t type.\nI would suggest to use a static_assert:</p>\n\n<pre><code>static_assert(sizeof(__int64)&lt;=sizeof(size_t), \n\"Unable to safely store an __int64 value in a size_t variable\");\n</code></pre>\n\n<p>This would create an error during the compile process if size_t is smaller than __int64.</p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/types/size_t\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/types/size_t</a> for more Information.</p>\n"}, {"comments": [{"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1507121361, "post_id": 46565251, "comment_id": 80084114, "body": "It is perfectly possible to handle larger files in a 32-bit process, you just cannot read the whole file into memory at once."}], "tags": [], "owner": {"reputation": 109, "user_id": 4201589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AKW9g.gif?s=128&g=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/4201589/superman"}, "is_accepted": false, "score": 0, "last_activity_date": 1507121152, "creation_date": 1507121152, "answer_id": 46565251, "question_id": 46564815, "link": "https://stackoverflow.com/questions/46564815/safe-conversion-from-int64-to-size-t/46565251#46565251", "title": "Safe conversion from __int64 to size_t", "body": "<p>If you are compiling for 32-bit, <code>size_t</code> will only be 32 bit.</p>\n\n<p>So it is recommended that you return <code>size.LowPart</code> instead and either ignore or error out if <code>size.HighPart</code> is not zero.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507131502, "post_id": 46565252, "comment_id": 80091407, "body": "On a unicorn platform <code>~(size_t)0</code> can be greater than <code>SIZE_MAX</code> (when <code>int&#47;unsigned</code> wider than <code>size_t</code>. Perhaps <code>(size_t) -1</code>?  I am confident it is fully portable."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1507132189, "post_id": 46565252, "comment_id": 80091873, "body": "I already made a comment with SIZE_MAX in the code but this is Windows and it is always two&#39;s complement."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507210856, "post_id": 46565252, "comment_id": 80127332, "body": "It is not a 2&#39;s complement concern.  But of rank of <code>size_t</code> vs. <code>int&#47;unsigned</code> - something that is not defined. - sorry if that was not clear."}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": false, "score": 1, "last_activity_date": 1507121154, "creation_date": 1507121154, "answer_id": 46565252, "question_id": 46564815, "link": "https://stackoverflow.com/questions/46564815/safe-conversion-from-int64-to-size-t/46565252#46565252", "title": "Safe conversion from __int64 to size_t", "body": "<p><code>size_t</code> is smaller than <code>__int64</code> when you are compiling 32-bit applications.</p>\n\n<p>If you know the files you are working with are \"small\" (&lt; 2 GB) you can sidestep the issue a bit by casting and just aborting if the file is somehow very large:</p>\n\n<pre><code>UINT64 size = FileSize(...);\nif (size &gt; ~(size_t)0) // You might want to use SIZE_MAX instead of the ~ trick if you want to stay portable\n{\n  printf(\"File is too large!\\n\");\n}\nelse\n{\n  void*data = malloc((size_t) size);\n  if (!data)\n    printf(\"Out of memory, file is too large?\\n\");\n  else\n    ...\n}\n</code></pre>\n\n<p>If on the other hand the files can be large then you cannot assume that you will be able to read the whole thing into memory at once because the machine might not have enough memory or you might run out of address space (usually around 2 GB in a 32-bit Windows process). In this case you should use <a href=\"https://msdn.microsoft.com/en-us/library/ms810613.aspx\" rel=\"nofollow noreferrer\">memory mapped files</a> instead with a smaller view.</p>\n"}], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3938, "favorite_count": 0, "accepted_answer_id": 46565135, "answer_count": 4, "score": 5, "last_activity_date": 1507121154, "creation_date": 1507119875, "last_edit_date": 1507119944, "question_id": 46564815, "link": "https://stackoverflow.com/questions/46564815/safe-conversion-from-int64-to-size-t", "title": "Safe conversion from __int64 to size_t", "body": "<p>I am working on Windows OS with Visual Studio 2017, and I obtained the following function to determine the size of a file from one of SO's answers:</p>\n\n<pre><code>__int64 FileSize(const char *filename)\n{\n    HANDLE hFile = CreateFile(filename, GENERIC_READ,\n        FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING,\n        FILE_ATTRIBUTE_NORMAL, NULL);\n\n    if (hFile == INVALID_HANDLE_VALUE) {\n        return -1; // error condition, could call GetLastError to find out more\n    }\n\n    LARGE_INTEGER size;\n    if (!GetFileSizeEx(hFile, &amp;size)) {\n        CloseHandle(hFile);\n        return -1; // error condition, could call GetLastError to find out more\n    }\n\n    CloseHandle(hFile);\n    return size.QuadPart;\n}\n</code></pre>\n\n<p>So, am using it to determine a file size, in order to allocate memory dynamically accordingly with <code>malloc()</code>. Since the function <code>malloc()</code> accept a <code>size_t</code> type, I assigned the return value of <code>FileSize()</code> function to a size_t variable, but I got the following warning:</p>\n\n<blockquote>\n  <p>main.cpp(67): warning C4244: 'initializing': conversion from '__int64' to '::size_t', possible loss of data</p>\n</blockquote>\n\n<p>In this case, How would I safely store the size of the file within a <code>size_t</code> variable? I know I could cast the return value to <code>size_t</code> and dismiss the warning, but would it be safe/correct?</p>\n"}, {"tags": ["c", "gcc", "local-variables", "storage-class-specifier"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 9, "creation_date": 1507119666, "post_id": 46564729, "comment_id": 80082876, "body": "Because hogging a register for the lifetime of the static variable is an unreasonable requirement?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1507125914, "post_id": 46564729, "comment_id": 80087437, "body": "Also see <a href=\"https://stackoverflow.com/questions/578202/register-keyword-in-c\">&quot;register&quot; keyword in C?</a> for why the usage doesn&#39;t buy you anything anyway."}], "owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 1, "closed_date": 1507119770, "answer_count": 0, "score": 1, "last_activity_date": 1507119611, "creation_date": 1507119586, "last_edit_date": 1507119611, "question_id": 46564729, "link": "https://stackoverflow.com/questions/46564729/why-it-is-not-possible-to-have-both-register-and-static-modifier-for-a-variable", "closed_reason": "Duplicate", "title": "Why it is not possible to have both register AND static modifier for a variable in C?", "body": "<p>This would seem like a common use case. Maybe we want to declare a variable in a function and we want to make it static so that the variable will retain its value at multiple function calls.</p>\n\n<p>We also want to tell the compiler to try to store the variable in a CPU register for faster access.</p>\n\n<p>However this is not possible in C.</p>\n\n<pre><code>int foo()\n{\n   static register int a;\n   a++:\n\n}\n</code></pre>\n\n<p>This code gives the following error.</p>\n\n<pre><code> multiple storage classes in declaration specifiers\n</code></pre>\n\n<p>Why is it not possible to have multiple storage class specifier when declaring a variable?</p>\n"}, {"tags": ["c", "gcc", "global-variables", "local-variables"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1507114048, "post_id": 46562749, "comment_id": 80079306, "body": "Next time after you&#39;ve come up with the question title, before posting the question please take that title and paste it into Google Search, and open the first search result. If it answers your question, then please upvote the question and the best answers and move on."}], "owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 1, "closed_date": 1507113961, "answer_count": 0, "score": 2, "last_activity_date": 1507113345, "creation_date": 1507113310, "last_edit_date": 1507113345, "question_id": 46562749, "link": "https://stackoverflow.com/questions/46562749/why-c-allows-multiple-global-declarations-of-the-same-variable-but-not-multiple", "closed_reason": "Duplicate", "title": "Why C allows multiple global declarations of the same variable but NOT multiple local declarations?", "body": "<p>I noticed that if I declare a global variable multiple times the compiler does not even output a warning.</p>\n\n<p>However if I declare a local variable in a function multiple times the gcc compiler outputs an error and does not compile the file.</p>\n\n<p>What is the explanation for this behavior?</p>\n"}, {"tags": ["c", "ascii"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 6, "creation_date": 1507110892, "post_id": 46561878, "comment_id": 80077395, "body": "&quot;Extended ASCII&quot; isn&#39;t a thing. There&#39;s ASCII, and there&#39;s &quot;not ASCII&quot;. That&#39;s like &quot;extended facts&quot;."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1507110893, "post_id": 46561878, "comment_id": 80077396, "body": "Remove the <code>&#243;</code>. <code>printf(true);</code> does not make sense. Google wide characters"}, {"owner": {"reputation": 643000, "user_id": 19563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8db27c91db97757a829c7971fd62b84?s=128&d=identicon&r=PG", "display_name": "CB Bailey", "link": "https://stackoverflow.com/users/19563/cb-bailey"}, "reply_to_user": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "edited": false, "score": 0, "creation_date": 1507111442, "post_id": 46561878, "comment_id": 80077714, "body": "@boriaz50: I read that page and it&#39;s clear that there isn&#39;t <i>an</i> extended ASCII, it&#39;s just a &quot;sometimes criticized&quot; term for some set of 8-bit character encoding schemes."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1507111980, "post_id": 46561878, "comment_id": 80078048, "body": "I don&#39;t find the term extended ASCII at all useful. My old Amstrad CPC464 had a different &quot;extended ASCII&quot; to the one linked above, and a clever way of redefining the characters! Why don&#39;t folk use the term UTF-8 and be done with it?"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1507113991, "post_id": 46561878, "comment_id": 80079273, "body": "@Bathsheba because the internet started in the US. And because they needed to communicate between the west coast and the east coast we have figured from the start how to deal with timezones. But everything outside of ASCII was considered <i>exotic</i> and not worth bothering with. And so when the internet spread beyond the US, whoever needed characters outside of ASCII improvised on their own. That&#39;s why we have the cluster f**k that are the system codepages, or encodings like <a href=\"https://en.wikipedia.org/wiki/JIS_encoding\" rel=\"nofollow noreferrer\">JIS</a>, <a href=\"https://en.wikipedia.org/wiki/Extended_Unix_Code\" rel=\"nofollow noreferrer\">EUC</a> etc. [cont]..."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1507114000, "post_id": 46561878, "comment_id": 80079278, "body": "...[cont] And so Windows has a fixed size 2 bytes for UTF-16, although the encoding is truly variable length. And so C++ pretended for a long time that Unicode doesn&#39;t exist. And so up until today we don&#39;t have a standard, clean and complete way of working with UTF-8 on C++."}, {"owner": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1507117824, "post_id": 46561878, "comment_id": 80081565, "body": "@bolov Incidentally, I was forced to adopt Rust as my primary systems language because I struggled to find a mature utf8/unicode library for C++. All of them seemed to be quite small and still being changed frequently. I&#39;d be pretty interested in recommendations if anybody found a satisfactory one."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "edited": false, "score": 0, "creation_date": 1507118934, "post_id": 46561878, "comment_id": 80082294, "body": "@Aaron3468 never worked with it, but I know that <a href=\"http://site.icu-project.org/\" rel=\"nofollow noreferrer\">ICU</a> is the most complete and fairly wide used. Although I suspect it&#39;s not very easy to use."}], "answers": [{"comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1507117360, "post_id": 46561986, "comment_id": 80081292, "body": "the narrowing conversion doesn&#39;t happen necessarily. I&#39;ve checked with gcc (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609 and a UTF-8 encoded C source and got <code>strlen( str ) == 5</code>. Nevertheless the char comparison doesn&#39;t make any sense here either because <code>str[2]</code> contains the first byte of the UTF-8 sequence only."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1507117530, "post_id": 46561986, "comment_id": 80081406, "body": "@IngoLeonhardt: I&#39;ll take your word for it: I&#39;ve amended the answer to include the apparent <i>concatenation</i> allowance. I&#39;ll check later today if the standards allow this. (Or answer yourself with a guaranteed upvote from me.)"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1507117636, "post_id": 46561986, "comment_id": 80081457, "body": "Let me know if it doesn&#39;t. It&#39;s definitely what I&#39;ve just experienced."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1507136664, "post_id": 46561986, "comment_id": 80094419, "body": "In the source file, &quot;Le&#243;n&quot; is a sequence of bytes that meet the requirements/restrictions of a literal string. It doesn&#39;t matter what bytes are between the quotes as long as they don&#39;t break the literal string rules, such as quote characters, linefeed characters, mal-formed escapes, etc. It seems that there are five bytes between the quotes and they work just fine as a literal string."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1507137666, "post_id": 46561986, "comment_id": 80094919, "body": "@TomBlodget That&#39;s implementation defined behaviour."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1507144376, "post_id": 46561986, "comment_id": 80098571, "body": "Yes, which source charsets are accepted is implementation-defined. Literal strings can be formed of the characters in the source character set except the double quotation mark (&quot;), backslash (&#41;, or newline character, which can be introduced with escapes. So, I don&#39;t see where an implementation-defined behavior rule would be involved."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1507117485, "last_edit_date": 1507117485, "creation_date": 1507111020, "answer_id": 46561986, "question_id": 46561878, "link": "https://stackoverflow.com/questions/46561878/how-to-check-if-a-character-is-an-extended-ascii-character-in-c/46561986#46561986", "title": "How to check if a character is an extended ascii character in C?", "body": "<p>Unless the <em>encoding</em> on your platform is such that <code>'\u00f3'</code> can fit into a <code>char</code>, <code>'\u00f3'</code> is a multi-character constant. It seems to be the latter on your platform, judging by the message you get. The values of multi-character constants are <em>implementation defined</em>. In other words, the choice of numeric value is up to the implementation, with some constraints (e.g. it must be outside the <code>char</code> range on your platform).</p>\n\n<p>Sadly in your case when you write <code>char str[] = \"Le\u00f3n\";</code>, the third element will be converted to a <code>char</code>, using a <em>narrowing conversion</em>, or decomposed into more than one <code>char</code> and <em>concatenated</em> to the <code>char[]</code> array. So attempts to compare it to <code>'\u00f3'</code> will be futile.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1507112315, "post_id": 46562038, "comment_id": 80078262, "body": "The question is tagged in C not C++ though."}, {"owner": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507116104, "post_id": 46562038, "comment_id": 80080543, "body": "@Antti Haapala There is a lot of cross-transfer between C and C++ due to having shared compilers. C90 defined <code>wchar_t</code>. It seems to have been supplanted by the newer <code>char16_t</code> and <code>char32_t</code> types which are less ambiguous. They&#39;re present in both C and C++, just as the <code>wchar_t</code> type is."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507117395, "post_id": 46562038, "comment_id": 80081314, "body": "Indeed, though <code>char16_t</code> and <code>char32_t</code> are less ambiguous only in size only, and the standard signals slight preference for them being in UTF-16 and UTF-32 by default. They&#39;re not very useful in standard C though, because the standard only supplies conversions from and to multibyte characters only; all the rest are left for the library authors to implement."}], "tags": [], "owner": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "is_accepted": false, "score": 1, "last_activity_date": 1507116547, "last_edit_date": 1507116547, "creation_date": 1507111168, "answer_id": 46562038, "question_id": 46561878, "link": "https://stackoverflow.com/questions/46561878/how-to-check-if-a-character-is-an-extended-ascii-character-in-c/46562038#46562038", "title": "How to check if a character is an extended ascii character in C?", "body": "<p>You'll need to use the <code>wchar_t</code> type, or a unicode library. <code>wchar_t</code> is infamous for having many gotchas and easy bugs to hit, but it is the best primitive type available to C++ compilers.</p>\n\n<p>You need to use variants of everything that support <code>wchar_t</code>, such as <code>std::wcout</code> or <code>wprintf</code>.</p>\n\n<p>EDIT: <code>wchar_t</code> has been replaced by <code>char16_t</code> and <code>char32_t</code>. The Unicode Standard 4.0 suggests their use whenever code must be portable between platforms, because <code>wchar_t</code> varies in size depending on platform (like <code>int</code> does).</p>\n\n<p>I recommend finding a good unicode library to handle comparison between the many characters that are made of multiple codepoints!</p>\n\n<p>The other option is to stick entirely to the native <code>char</code> type which is generally interpreted as some locale-specific ASCII.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507112249, "post_id": 46562185, "comment_id": 80078222, "body": "This is wrong, the OP is clearly using UTF-8, and not some crippled &quot;Extended ASCII&quot;."}, {"owner": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "edited": false, "score": 1, "creation_date": 1507117283, "post_id": 46562185, "comment_id": 80081241, "body": "@Anti Haapala Depends on the usecase. OP is using UTF8 compatible characters, but the target platform may not support them. In the past I&#39;ve had to use exactly this solution to interface with an lcd that interpreted bytes as Shift-JIS. This solution has the benefit that it allows direct comparison of any character supported by the target encoding. Please do not make assumptions without research."}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 1, "last_activity_date": 1507111614, "creation_date": 1507111614, "answer_id": 46562185, "question_id": 46561878, "link": "https://stackoverflow.com/questions/46561878/how-to-check-if-a-character-is-an-extended-ascii-character-in-c/46562185#46562185", "title": "How to check if a character is an extended ascii character in C?", "body": "<p>If you want to use the extended ASCII characters, use their octal value.</p>\n\n<p>I am using the table <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">http://www.asciitable.com/</a> and I guess the value you require is 162 (decimal) = 242. So use <code>str[] = \"Le\\242n\"</code>;</p>\n\n<p>And use the same in the comparison.</p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 0, "last_activity_date": 1507112215, "last_edit_date": 1507112215, "creation_date": 1507111678, "answer_id": 46562212, "question_id": 46561878, "link": "https://stackoverflow.com/questions/46561878/how-to-check-if-a-character-is-an-extended-ascii-character-in-c/46562212#46562212", "title": "How to check if a character is an extended ascii character in C?", "body": "<p>The ASCII is a 7-bit character coding that numbers characters <code>0</code> ... <code>127</code>. An ASCII-compatible encoding preserves the meanings of these bytes. Any character encoded as <code>c &lt; 0</code> or <code>c &gt; 127</code> cannot be an ASCII character. These sometimes can be called by various confusing names such as \"Extended ASCII\" or alike.</p>\n\n<p>In Unicode, the ASCII characters are still the characters 0 ... 127 of the Unicode codepoint range.</p>\n\n<hr>\n\n<p>The problem is not as much that <code>\u00f3</code> is an extended character, it is that your source file is actually in <strong>UTF-8</strong>, and therefore <code>\u00f3</code> is encoded as <em>2 bytes</em>. <code>char</code> in C stands for the thing generally called as <em>byte</em> elsewhere.</p>\n\n<p>C also supports <em>wide-character</em> strings, where each character is a UTF-16, UCS-2, UTF-32, or some other code point. There your <code>\u00f3</code> would (most probably) be a single <code>wchar_t</code>.</p>\n\n<p>Unfortunately you've opening a can of worms here, because the symbol <code>\u00f3</code> can also be written in Unicode in 2 separate ways: It can be written as one code point <code>\u00f3</code> or the letter <code>o</code> followed by the combining acute accent: <code>\u0301</code>; both have the same semantic information, but they would consist of different bytes. And even if converted to <code>wchar_t</code> strings, these would still have different sequences. The C standard library doesn't handle the Unicode at all, except in C11, where there is some support for character literals explicitly in UTF-8. The C standard still doesn't present a portable way for converting UTF-8 encoded textual data to <code>wchar_t</code>; neither can it do normalizations such as <code>\u00f3</code> to <code>o \u0301</code> or vice versa.</p>\n"}, {"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 0, "last_activity_date": 1507126044, "creation_date": 1507126044, "answer_id": 46566997, "question_id": 46561878, "link": "https://stackoverflow.com/questions/46561878/how-to-check-if-a-character-is-an-extended-ascii-character-in-c/46566997#46566997", "title": "How to check if a character is an extended ascii character in C?", "body": "<p>You could do something like</p>\n\n<pre><code>if (sizeof(\"\u00f3\") &gt; 2) ...\n</code></pre>\n\n<p>If this is just one <code>char</code> the length of your string is <code>2</code>, one for the character and one for the terminating <code>0</code>. Otherwise if it doesn't fit the compiler will allocate a longer sequence.</p>\n"}, {"tags": [], "owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "is_accepted": false, "score": 0, "last_activity_date": 1507135885, "creation_date": 1507135885, "answer_id": 46570165, "question_id": 46561878, "link": "https://stackoverflow.com/questions/46561878/how-to-check-if-a-character-is-an-extended-ascii-character-in-c/46570165#46570165", "title": "How to check if a character is an extended ascii character in C?", "body": "<p>When you give your source file to the compiler you have to tell which character encoding you used with your source editor (source charset). My guess that it is UTF-8, which encodes \u00f3 as 0xC3 0xB3. This seems to be going right.</p>\n\n<p>But '\u00f3' then becomes an integer with a value outside your <code>char</code> range (see your <code>&lt;limits.h&gt;</code>). Therefore the warning on the <code>==</code> between them.</p>\n\n<p>BTW\u2014there is some meaning in \"Extended ASCII\" but not much. An \"Extended ASCII\" character set must encode each of its codepoints in one byte. So, UTF-8 is not an encoding for one of the many \"Extended ASCII\" character sets.</p>\n"}], "owner": {"reputation": 11, "user_id": 8719238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wxaBNI1Xypc/AAAAAAAAAAI/AAAAAAAAAVc/Y8ZoS3NN-FE/photo.jpg?sz=128", "display_name": "Javier Rom&#225;n", "link": "https://stackoverflow.com/users/8719238/javier-rom%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1981, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1507135885, "creation_date": 1507110681, "question_id": 46561878, "link": "https://stackoverflow.com/questions/46561878/how-to-check-if-a-character-is-an-extended-ascii-character-in-c", "title": "How to check if a character is an extended ascii character in C?", "body": "<p>Every time i do something similar to the condition below i get a Multicharacter warning.</p>\n\n<pre><code>    char str[] = \"Le\u00f3n\";\n\n    if(str[2] == '\u00f3') printf(true);\n</code></pre>\n\n<p>How can i solve this?</p>\n"}, {"tags": ["c", "sha", "contiki", "texas-instruments"], "answers": [{"tags": [], "owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "is_accepted": true, "score": 0, "last_activity_date": 1507112075, "creation_date": 1507112075, "answer_id": 46562345, "question_id": 46561517, "link": "https://stackoverflow.com/questions/46561517/ti-sha256-on-cc26xx-returning-the-wrong-value/46562345#46562345", "title": "TI sha256 on cc26xx returning the wrong value", "body": "<p>Your code computes the SHA-256 hash of the first half (<code>0x200=512</code> bits or 64 bytes) of the array <code>M</code>, initialized to <code>0xe8 , 0x9d , ... , 0x76</code>.</p>\n\n<p>However, your array <code>M</code> has elements of type <code>uint32_t</code>, which mean that in memory it looks like this (assuming big-endian architecture):</p>\n\n<pre><code>000000e80000009d000000a1000000d1000000c70000004d000000ee000000160000007500000030000000070000009a00000019000000d10000005d00000076\n</code></pre>\n\n<p>As one can check in your online calculator, the hash of this is <code>91da5dd56cbfcca985fcf37390ae73e09e27a4d9c42b100c6e746091eda68da7</code>. This is the correct value computed by the <code>SHA_256()</code> function in the code.</p>\n"}], "owner": {"reputation": 2568, "user_id": 6939324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Tjoe.jpg?s=128&g=1", "display_name": "SuperKogito", "link": "https://stackoverflow.com/users/6939324/superkogito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 46562345, "answer_count": 1, "score": 0, "last_activity_date": 1507112075, "creation_date": 1507109527, "question_id": 46561517, "link": "https://stackoverflow.com/questions/46561517/ti-sha256-on-cc26xx-returning-the-wrong-value", "title": "TI sha256 on cc26xx returning the wrong value", "body": "<p>I am trying to implement SHA256 on a TI cc26xx sensor tag. I am using the TI_SHA_256 API provided here: <a href=\"http://www.ti.com/tool/crypto\" rel=\"nofollow noreferrer\">http://www.ti.com/tool/crypto</a>.\nMy main test code is the following:</p>\n\n<pre><code>...\n/* Crypto APIs Header */\n#include \"lib/TI_SHA_256.h\"\n#include &lt;stdio.h&gt;\n\nuint32_t M[32] =  { 0xe8 , 0x9d , 0xa1 , 0xd1 , 0xc7 , 0x4d , 0xee , 0x16 , 0x75 , 0x30 , 0x07 , 0x9a , 0x19 , 0xd1 , 0x5d , 0x76,\n                    0x12 , 0x97 , 0xe4 , 0xb6 , 0xc8 , 0x03 , 0x38 , 0x1a , 0x41 , 0x6d , 0xac , 0x92 , 0xbf , 0x63 , 0x51 , 0x7a };\nuint32_t Ha[8];\nuint32_t *H_Array;\nvolatile uint64_t L = 0x800;\n\nvoid uint32_print(char name[], uint32_t *data, int c)\n{\n    uint32_t i;\n    if (c == 1){\n      printf(name);\n      for(i = 0; i &lt; 32; i++) {\n        printf(\"%x\", data[i]);\n      }\n      printf(\"\\r\\n\");\n  }\n  else {\n      printf(name);\n      for(i = 0; i &lt; 8; i++) {\n        printf(\"%x \", data[i]);\n      }\n      printf(\"\\r\\n\");\n  }\n}\n\n/*---------------------------------------------------------------------------*/\nPROCESS(test_process, \"Test process\");\n/*---------------------------------------------------------------------------*/\nPROCESS_THREAD(test_process, ev, data)\n{\n  PROCESS_BEGIN();\n\n  printf(\"\\r\\n ---------------- TEST OF SHA API ------------------------ \\r\\n\");\n  uint32_print(\"Original text:\", M, 1);\n  L= 0x200;\n  SHA_256(M, L, Ha, 1);\n  uint32_print(\"text:\", M, 1);\n  uint32_print(\"Hashed text:  \", Ha, 2);\n  printf(\"\\r\\n ---------------- \\r\\n\");\n\n  PROCESS_END();\n}\nAUTOSTART_PROCESSES(&amp;test_process);\n</code></pre>\n\n<p>According to various online SHA256 calculators such (<a href=\"http://www.fileformat.info/tool/hash.htm\" rel=\"nofollow noreferrer\">http://www.fileformat.info/tool/hash.htm</a>), the checksum is supposed to be:\n<code>73411b58707db59d6bc3cd854850eca62058d0d9f74a1ea8260d5ccdd9ac5f87</code></p>\n\n<p>Where as my code prints the following:</p>\n\n<pre><code>---------------- TEST OF SHA API ------------------------ \ntext:e89da1d1c74dee16753079a19d15d761297e4b6c83381a416dac92bf63517a\ntext:e89da1d1c74dee16753079a19d15d768000000000000000000000200\nHashed text:  91da5dd5 6cbfcca9 85fcf373 90ae73e0 9e27a4d9 c42b100c 6e746091 eda68da7\n----------------\n</code></pre>\n\n<p>My question is the following: why is my code returning the wrong hash-sum?</p>\n"}, {"tags": ["c", "linux", "gtk", "x11"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507109245, "post_id": 46561403, "comment_id": 80076345, "body": "I would separate the daemon and the GUI as two different processes and programs"}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507109417, "post_id": 46561403, "comment_id": 80076459, "body": "They are seperated. Like I said, they only have an IPC connection for data exchange. I added it to the question for clarification. Thanks for the note."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507109556, "post_id": 46561403, "comment_id": 80076580, "body": "Then just code the GUI to be able to communicate with an <i>existing</i> daemon, and restart the GUI instead of moving it across sessions, providing some mean to make that easy (e.g. save session state in a file)"}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507109853, "post_id": 46561403, "comment_id": 80076789, "body": "I know that this would be a possibility. But it would not be good in my case (as the GUI will send stuff about the current X11 data like the image to the daemon). Restarting the GUI would result in a lack of data while restarting, which I do not want."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507110133, "post_id": 46561403, "comment_id": 80076967, "body": "No, you could persist something higher level than images. But I don&#39;t think that <i>moving</i> X11 windows across sessions is possible (they could run on <i>different</i> X11 servers)"}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507110704, "post_id": 46561403, "comment_id": 80077285, "body": "@BasileStarynkevitch I only want them to move to another session when on the same Seat, which is the same X11 Server."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507110818, "post_id": 46561403, "comment_id": 80077349, "body": "I don&#39;t believe it is possible. Or at least, have your GTK program stop all GTK stuff and restart GTK; you want several consecutives <code>XOpenDisplay</code> -s and you should code something which could move from one X11 server to another one."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507110925, "post_id": 46561403, "comment_id": 80077404, "body": "I still dont want to move to another server nor another display!"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507110949, "post_id": 46561403, "comment_id": 80077417, "body": "But you need to code as if you did. X11 sessions are complex things set up at <code>gtk_init</code> time."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507110998, "post_id": 46561403, "comment_id": 80077448, "body": "You believe or you know?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507111103, "post_id": 46561403, "comment_id": 80077522, "body": "Read EWMH &amp; ICCCM things. Study source code of <code>gtk_init</code> and of <code>GtkApplication</code>.  See my experiments in <a href=\"https://stackoverflow.com/q/43141659/841108\">stackoverflow.com/q/43141659/841108</a> ... so it is between &quot;I believe&quot; and &quot;I know&quot;; restarting some GTK app is <i>practically</i> the easiest way to move across X11 sessions."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508355538, "post_id": 46561403, "comment_id": 80583209, "body": "No, different sessions are fully separate and isolated X11 servers."}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507109480, "creation_date": 1507109137, "last_edit_date": 1507109480, "question_id": 46561403, "link": "https://stackoverflow.com/questions/46561403/move-x11-window-gtk-between-sessions", "title": "Move X11 Window (GTK) between Sessions", "body": "<p>Is it in some way possible to move a Window between Loginsessions in X11, proviced that I can get the XAuthority informations?</p>\n\n<p>The Window will stay on the same Seat and same Display device, but it will be moved e.g. from Session2 to Session3 (currently I use consolekit, so the sessions would be <code>/org/freedesktop/ConsoleKit/Session&lt;X&gt;</code>).</p>\n\n<p>The use case is: I have a daemon running for which I want the user to have a graphical feedback when it is running. The base case would be to preserve the window through e.g. fast user switching.</p>\n\n<p>I use GTK right now as GUI toolkit and have access to the usual X11 Libs (no XCB, only Xlib) like XAuth, XRandR, XDamage, Xfixes, etc. Also the Daemon has an IPC connection to the Window and can transfer the <code>MIT-MAGIC-COOKIE</code> (or any XAuth data) to the Window to authorize to the new session.</p>\n\n<p>So my question: Is this possible and, if yes, how?</p>\n\n<p>For clarification: The daemon and the window are seperate programs (only connected via UNIX Socket for IPC). I just do not want to delete and recreated the window everytime the user switches, as that process also holds some logic and some data.</p>\n"}, {"tags": ["c", "variables", "type-conversion"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1507107994, "post_id": 46560780, "comment_id": 80075566, "body": "What value did you expect? 200?"}, {"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1507108861, "post_id": 46560780, "comment_id": 80076118, "body": "yea i expected 200,but now i understand why it is not."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1507107427, "creation_date": 1507107427, "answer_id": 46560827, "question_id": 46560780, "link": "https://stackoverflow.com/questions/46560780/need-explanation-on-short-code-snippet/46560827#46560827", "title": "Need explanation on short code snippet", "body": "<p>Because you print the value of an uninitialized variable. It will have an <em>indeterminate</em> (and seemingly random) value.</p>\n\n<p>The assignment you make to <code>a</code> just copies the value of <code>variable</code> and then of <code>200</code> into <code>a</code>. The value of <code>variable</code> remains unmodified and indeterminate.</p>\n\n<p>I recommend you <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">find a good beginners book or two</a> to read.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8668038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f1f6a6fb94eb77bc1626b6be0213d4?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham Koolwal", "link": "https://stackoverflow.com/users/8668038/shubham-koolwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1507107525, "creation_date": 1507107525, "answer_id": 46560860, "question_id": 46560780, "link": "https://stackoverflow.com/questions/46560780/need-explanation-on-short-code-snippet/46560860#46560860", "title": "Need explanation on short code snippet", "body": "<p>In c if you don't assign a value to the variable then it stores the garbage value which can be anything.In your code you did not assign the value to variable so it print 2 (which can be anything)</p>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 5828930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sohAq.png?s=128&g=1", "display_name": "Blaze349", "link": "https://stackoverflow.com/users/5828930/blaze349"}, "edited": false, "score": 0, "creation_date": 1507108363, "post_id": 46560880, "comment_id": 80075805, "body": "This should be a comment"}], "tags": [], "owner": {"reputation": 6848, "user_id": 22186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0ssng.png?s=128&g=1", "display_name": "tafa", "link": "https://stackoverflow.com/users/22186/tafa"}, "is_accepted": false, "score": 2, "last_activity_date": 1507107579, "creation_date": 1507107579, "answer_id": 46560880, "question_id": 46560780, "link": "https://stackoverflow.com/questions/46560780/need-explanation-on-short-code-snippet/46560880#46560880", "title": "Need explanation on short code snippet", "body": "<p>Assigment operator (a = variable;) does not link the two variables, just assignes whatever value there is in the righthandside expression to the left handside. </p>\n\n<p>You can visualize local variables as boxes where you can put values into.</p>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1507114201, "post_id": 46561031, "comment_id": 80079393, "body": "Thanks man, I got it now"}, {"owner": {"reputation": 2960, "user_id": 2099119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y8nHi.png?s=128&g=1", "display_name": "waka", "link": "https://stackoverflow.com/users/2099119/waka"}, "reply_to_user": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "edited": false, "score": 0, "creation_date": 1507114458, "post_id": 46561031, "comment_id": 80079581, "body": "@kanishktanwar: If your problem is solved, please consider accepting one of the answers you recieved by clicking the tick that appears next to them. That way you&#39;ll mark this question as &quot;solved&quot; (or &quot;has an accepted answer&quot; in StackOverflow terms)."}], "tags": [], "owner": {"reputation": 2960, "user_id": 2099119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y8nHi.png?s=128&g=1", "display_name": "waka", "link": "https://stackoverflow.com/users/2099119/waka"}, "is_accepted": true, "score": 2, "last_activity_date": 1507108029, "creation_date": 1507108029, "answer_id": 46561031, "question_id": 46560780, "link": "https://stackoverflow.com/questions/46560780/need-explanation-on-short-code-snippet/46561031#46561031", "title": "Need explanation on short code snippet", "body": "<p>At the beginning, you <em>define</em> two variables, <code>a</code> and <code>variable</code>. Note, that those variables at this point are not <em>initialized</em>. Right now, the compiler only knows that there are two variables of type <code>int</code> and their names, nothing more.</p>\n\n<p>You then try to <em>initialize</em> variable <code>a</code> with the <em>not initialized</em> variable <code>variable</code>, the result should be clear: The two variables remain uninitialized.</p>\n\n<p>Then you proceed and initialize <code>a</code> with <code>200</code>, <code>variable</code> is still only defined, not initialized.</p>\n\n<p>After that, you print the still uninitialized variable <code>variable</code>, which hasn't recieved any \"real\" value as of yet, only what already was \"lying around\" in memory when the compiler assigned that memory location to the variable. In your case, that was \"2\" (or at least, that's what <code>printf</code> could extract from there).</p>\n\n<p>Further reading: <a href=\"https://www.tutorialspoint.com/cprogramming/c_variables.htm\" rel=\"nofollow noreferrer\">C Variables</a>. This explains how variables are defined, declared and initialized.</p>\n"}], "owner": {"reputation": 142, "user_id": 8718926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eedb47e5b986617bc0bf97a7e5ed1007?s=128&d=identicon&r=PG&f=1", "display_name": "Kanishk Tanwar", "link": "https://stackoverflow.com/users/8718926/kanishk-tanwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1507113113, "accepted_answer_id": 46561031, "answer_count": 4, "score": -5, "last_activity_date": 1507108029, "creation_date": 1507107283, "last_edit_date": 1507107428, "question_id": 46560780, "link": "https://stackoverflow.com/questions/46560780/need-explanation-on-short-code-snippet", "closed_reason": "Duplicate", "title": "Need explanation on short code snippet", "body": "<p>I just made this short program. Can someone please explain why I am getting 2 as a result here?</p>\n\n<p>Here is the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int variable;\n    int a;\n    a=variable;\n    a=200;\n    printf(\"%d\",variable);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "binary", "decimal"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1507106656, "post_id": 46560548, "comment_id": 80074751, "body": "The <code>long long int</code> type is at minimum 64 bits. And signed. So how would you ever be able to fit up to 100 bits of data in it if it&#39;s only 64 bits (which is standard on modern PC systems)?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 3, "creation_date": 1507106685, "post_id": 46560548, "comment_id": 80074772, "body": "Why not use the shift operator? Will be a lot faster than using <code>pow</code> repeatedly"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1507106697, "post_id": 46560548, "comment_id": 80074783, "body": "<code>pow()</code> is a bad idea here, it operates on floating-point numbers. Use simple bit-shifts instead. And then, there&#39;s no integer type that can hold 100 bits (<i>binary digits!</i>) in your typical C implementation. You could try using non-standard <code>int128_t</code> types. You probably should use an array of unsigned types instead. Converting this to a decimal notation, have a look e.g. at <a href=\"https://en.wikipedia.org/wiki/Double_dabble#C_implementation\" rel=\"nofollow noreferrer\">double dabble algorithm</a>."}, {"owner": {"reputation": 668, "user_id": 803978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7PIsz.png?s=128&g=1", "display_name": "Code Gorilla", "link": "https://stackoverflow.com/users/803978/code-gorilla"}, "edited": false, "score": 0, "creation_date": 1507106803, "post_id": 46560548, "comment_id": 80074846, "body": "Could you display the number as hexadecimal?  If so you could translate any number of binary digits.  Just take 4 bits at a time and convert them into hex."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1507106891, "post_id": 46560548, "comment_id": 80074904, "body": "First of all, you need to choose an internal representation able to keep the desired result. That means some very <i>big</i> int type, of size 100 bits at least (which <code>long long</code> doesn&#39;t fullfill). Or maybe an ASCII representation as an array of <code>char</code>-s...?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507107431, "post_id": 46560548, "comment_id": 80075192, "body": "I don&#39;t see why this would crash. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. When it &quot;crashes&quot;, what output is displayed <b>exactly</b>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1507108233, "post_id": 46560548, "comment_id": 80075718, "body": "here&#39;s a sloppy program for reference: <a href=\"https://ideone.com/fReZaj\" rel=\"nofollow noreferrer\">ideone.com/fReZaj</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1507119794, "post_id": 46560704, "comment_id": 80082972, "body": "the big problem with using an array is printing. How do you print something in decimal which spans over multiple array elements without a special algorithmic support? There should be some <i>bignum</i> library in &#39;c&#39; which could provide it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1507131527, "post_id": 46560704, "comment_id": 80091420, "body": "@Serge see my comments on the question -- use some variation of the double-dabble algorithm."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1507134466, "post_id": 46560704, "comment_id": 80093284, "body": "@Serge I updated my answer, with Felix&#39;s insight and a library I had used in the past."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1507134448, "last_edit_date": 1507134448, "creation_date": 1507107021, "answer_id": 46560704, "question_id": 46560548, "link": "https://stackoverflow.com/questions/46560548/how-to-convert-very-large-binary-to-decimal-in-c/46560704#46560704", "title": "How to convert very large binary to decimal in C", "body": "<p><code>long long int</code> has a range of -9,223,372,036,854,775,807 to 9,223,372,036,854,775,807, as mentioned <a href=\"https://stackoverflow.com/questions/1819189/what-range-of-values-can-integer-types-store-in-c\">here</a>. There is no way that 100 bits can fit in there. However, this type is signed, you could try with an unsigned one, but I do not see any assumption on your numbers to be non-negative.</p>\n\n<p>You could try with <code>int128_t</code> which fits 128-bit signed, but this is not Standard (<a href=\"https://stackoverflow.com/questions/29638723/why-isnt-there-int128-t\">Why isn&#39;t there int128_t?</a>).</p>\n\n<p>Consider using an array of size 100, where each cell will store a digit. With this approach it is suggested that you use <a href=\"https://en.wikipedia.org/wiki/Double_dabble\" rel=\"nofollow noreferrer\">Double dabble</a> algorithm, which is used to convert binary numbers into binary-coded decimal (BCD) notation.</p>\n\n<p>If you need a library, then The <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">GNU Multiple Precision Arithmetic Library</a> could do the trick.</p>\n\n<p>PS: Use bit-shifts instead of <a href=\"http://www.cplusplus.com/reference/cmath/pow/\" rel=\"nofollow noreferrer\"><code>pow()</code></a>, since it will operate on floating-point values, and will decrease the performance of your code.</p>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 2781889, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a8472b1fed94f4e6fb8c4bd791d24f50?s=128&d=identicon&r=PG&f=1", "display_name": "FooBar", "link": "https://stackoverflow.com/users/2781889/foobar"}, "is_accepted": false, "score": 2, "last_activity_date": 1507143454, "creation_date": 1507143454, "answer_id": 46572256, "question_id": 46560548, "link": "https://stackoverflow.com/questions/46560548/how-to-convert-very-large-binary-to-decimal-in-c/46572256#46572256", "title": "How to convert very large binary to decimal in C", "body": "<p>Here is a hint:</p>\n\n<p>The easiest solution is to actually take the long binary number, and split it in half (or quarters, or whatever.) </p>\n\n<p>Keep track of which of these is the upper range of the binary number, and which of these is the lower end of the binary number.</p>\n\n<p>Calculate what the true value of the lower range, and upper range is. After that add them together. </p>\n"}, {"tags": [], "owner": {"reputation": 908, "user_id": 8084731, "user_type": "registered", "profile_image": "https://graph.facebook.com/1653815704646436/picture?type=large", "display_name": "princebillyGK", "link": "https://stackoverflow.com/users/8084731/princebillygk"}, "is_accepted": false, "score": 0, "last_activity_date": 1573764159, "creation_date": 1573764159, "answer_id": 58866189, "question_id": 46560548, "link": "https://stackoverflow.com/questions/46560548/how-to-convert-very-large-binary-to-decimal-in-c/58866189#58866189", "title": "How to convert very large binary to decimal in C", "body": "<p>Not sure if this is the most optimized technique. This can calculate up to 1000 digit. You can increase the array allocation to calculate longer binary numbers \nI used strings for input and high school mathematics technique for addition and calculate the power of 2</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\ntypedef long long int lli;\nusing namespace std;\n\nint main() {\n\n    char bin_number[1010];\n    //variable for big integer operation \n    int int_number[1010], t_int_number[500];\n    /*\n     * int_number : converted decimal number will be stored here\n     * t_int_number : will be used to calculate the power of 2\n     */\n\n\n    int bin_length, t_int_length, int_length, index;\n    /*\n     * bin_length   : length(bin_number)\n     * t_int_length : length(t_int_length)\n     * int_length   : length(int_length)\n     */\n\n    bool carry;\n\n    while(scanf(\"%s\", bin_number) != EOF) {                     //input binary number\n        for (int i = 0; i &lt; 500; i++) {                         //intialize decimal number to 0 and t_int_number to 0\n            int_number[i] = 0;\n            t_int_number[i] = 0;\n        }\n\n        //set t_int_number to 1 \n        t_int_number[0] = 1;\n        t_int_length = 1;\n        //set the int_number to 0\n        int_length = 1;\n        index = 0;\n        //calculate input length\n        bin_length = strlen(bin_number);\n\n        for (int i = bin_length - 1; i &gt;= 0; i--) {                  //checks each digit of binary number\n            //if the digit in binary representation is 1\n            if (bin_number[i] == '1') {   \n                //sum (int_number, t_int_number)\n                for (int index = 0; index &lt; t_int_length; index++) {\n                    int_number[index] +=\n                        t_int_number[index];                //sum t_int_number digits\n                    if (int_number[index] &gt; 9) {                //if carry\n                        int_number[index + 1] ++;\n                        int_number[index] -= 10;\n                    }\n                }\n                int_length = index;\n                if (int_number[index] != 0) {               //i f length increase for addition \n                    int_length ++;\n                }\n            }\n\n            //Being ready for next iteration\n            //multiplying everytime with 2 and save it to t_int_number\n            carry = false;\n            for (index = 0; index &lt; t_int_length; index++) {\n                t_int_number[index] += t_int_number[index];     //double the number\n            }\n            for (index = 0; index &lt; t_int_length; index++) {\n                if (t_int_number[index] &gt; 9) {\n                    t_int_number[index] -= 10;\n                    t_int_number[index + 1]++;\n                }\n            }\n            if (t_int_number[index] != 0) {\n                t_int_length++;\n            }\n        }\n\n        //printing the decimal number\n        for (int i = int_length - 1; i &gt;=0; i--) {\n            printf(\"%d\", int_number[i]);\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8718646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b915964b3636646222e18e79d61ec5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Nguyen", "link": "https://stackoverflow.com/users/8718646/stephen-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2548, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1573764159, "creation_date": 1507106481, "last_edit_date": 1507107041, "question_id": 46560548, "link": "https://stackoverflow.com/questions/46560548/how-to-convert-very-large-binary-to-decimal-in-c", "title": "How to convert very large binary to decimal in C", "body": "<p>I'm using netBean to code C, and my assignment is convert a very large binary number to decimal ( the binary number maybe upto 100 digits), I'm very confuse because my program works when the binary number is about 50-60 digits but it will automatically crash on run-time when input is larger. I'm using long long int to store the decimal result but it seem doesn't work!\nHere is my code :</p>\n\n<pre><code> long long int decimal = 0;\n    int position = 0;\n    for(int i = strlen(binaryInput)-1; i&gt;=0; --i){\n        if(binaryInput[i]=='1'){\n            decimal += (long long int)(pow(2,position));\n        }\n        ++position;\n    }\n    printf(\"\\nDecimal number is: %lli \", decimal);\n</code></pre>\n\n<p>'binaryInput' is my string to store binaryNumber from keyboard.</p>\n"}, {"tags": ["c", "pointers", "memory", "linked-list", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 8, "creation_date": 1507105641, "post_id": 46560274, "comment_id": 80074211, "body": "Probably because <code>memcpy</code> copies all of the data, while the assignment only copies the <i>pointer</i>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1507105954, "post_id": 46560274, "comment_id": 80074362, "body": "The assignement is not necessary, <code>node-&gt;content = memcpy(node-&gt;content, content, content_size);</code> is equivalent to <code>memcpy(node-&gt;content, content, content_size);</code>. Now it should be more clear to you why the <code>memcpy</code> way works and the <code>node-&gt;content = content;</code> does not work."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507106096, "post_id": 46560274, "comment_id": 80074439, "body": "By the way, if you allocated memory using e.g. <code>malloc</code> and made <code>node-&gt;content</code> point to that memory, you will have a memory leak with <code>node-&gt;content = content</code>, as you lose the original pointer."}], "answers": [{"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 1, "last_activity_date": 1507110970, "last_edit_date": 1507110970, "creation_date": 1507106365, "answer_id": 46560509, "question_id": 46560274, "link": "https://stackoverflow.com/questions/46560274/node-pointer-pointer-vs-node-pointer-using-memcpy/46560509#46560509", "title": "node-&gt;pointer = pointer vs node-&gt;pointer using memcpy", "body": "<p>The assignment :</p>\n\n<pre><code>node-&gt;content = content;\n</code></pre>\n\n<p>just makes pointer <code>node-&gt;content</code> point at the same place where pointer <code>content</code> does, without copying anything. </p>\n\n<p>However,</p>\n\n<pre><code>memcpy(node-&gt;content, content, content_size);\n</code></pre>\n\n<p>actually <strong><em>copies</em></strong> the contents of the place where pointer <code>content</code> points to the place where pointer <code>node-&gt;content</code> points.</p>\n"}, {"tags": [], "owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "is_accepted": true, "score": 1, "last_activity_date": 1507202494, "last_edit_date": 1507202494, "creation_date": 1507106433, "answer_id": 46560532, "question_id": 46560274, "link": "https://stackoverflow.com/questions/46560274/node-pointer-pointer-vs-node-pointer-using-memcpy/46560532#46560532", "title": "node-&gt;pointer = pointer vs node-&gt;pointer using memcpy", "body": "<p><code>content</code> contains just the address of where your data is stored in memory.</p>\n\n<p>With <code>node-&gt;content = content</code> you don't copy any data. All you do is setting <code>node-&gt;content</code> to the memory address that's in <code>content</code>.</p>\n\n<p>After that <code>node-&gt;content</code> and <code>content</code> <strong>both point to the same memory/data</strong>. If that memory is changed or even freed, your <code>node</code> will point to changed or freed memory too.</p>\n\n<p>To make sure that your <code>node</code> has a private copy of the <code>content</code> (that you pass in <code>listnew()</code>), you must use <code>memcpy()</code>. Then the rest of your program can change/free the original <code>content</code> without affecting <code>node-&gt;content</code>.</p>\n\n<p>EDIT: I assume that you're aware that you must first allocate memory and assign its address to <code>node-&gt;content</code> before using <code>memcpy()</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 8718774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1dad4cb9398c24e3b6db21509ff6867?s=128&d=identicon&r=PG&f=1", "display_name": "Deuxbob", "link": "https://stackoverflow.com/users/8718774/deuxbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 46560532, "answer_count": 2, "score": 2, "last_activity_date": 1507202494, "creation_date": 1507105535, "question_id": 46560274, "link": "https://stackoverflow.com/questions/46560274/node-pointer-pointer-vs-node-pointer-using-memcpy", "title": "node-&gt;pointer = pointer vs node-&gt;pointer using memcpy", "body": "<p>This is my structure:</p>\n\n<pre><code>typedef struct s_list\n{\n    void *content;\n    size_t content_size;\n    struct s_list *next;\n}   t_list;\n</code></pre>\n\n<p>I'm trying to create a function to create a new node:</p>\n\n<pre><code>t_list *lstnew(void const *content, size_t content_size);\n</code></pre>\n\n<p>My question is why the following differ in results:</p>\n\n<p>Why does the following code works perfectly:</p>\n\n<pre><code>node-&gt;content = memcpy(node-&gt;content, content, content_size);\n</code></pre>\n\n<p>When the following does not:</p>\n\n<pre><code>node-&gt;content = content;\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "incompatibletypeerror"], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1507104886, "creation_date": 1507104886, "answer_id": 46560089, "question_id": 46560049, "link": "https://stackoverflow.com/questions/46560049/why-do-i-get-an-incompatible-types-when-assigning-to-type-uint16-t-error/46560089#46560089", "title": "Why do I get an incompatible types when assigning to type &#39;uint16_t &#39; error?", "body": "<p>you're defining an array of your structures and try to initialize it. But you're passing data for 1 structure only.</p>\n\n<p>The compiler thinks you're trying to initialize 2 <code>ble_uuid_t</code> structs, with incompatible types.</p>\n\n<p>That would work for 1 struct:</p>\n\n<pre><code>ble_uuid_t m_adv_uuid = {AMT_SERVICE_UUID, AMTS_CHAR_UUID};\n</code></pre>\n\n<p>and to initialize 2 structs you could do:</p>\n\n<pre><code>ble_uuid_t m_adv_uuid[] = {{AMT_SERVICE_UUID, AMTS_CHAR_UUID},{AMT_SERVICE_UUID, AMTS_CHAR_UUID}};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2365, "user_id": 611117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d70f88638c52101b1f0c5d9a87a803e?s=128&d=identicon&r=PG", "display_name": "vasek", "link": "https://stackoverflow.com/users/611117/vasek"}, "is_accepted": true, "score": 5, "last_activity_date": 1507105186, "creation_date": 1507105186, "answer_id": 46560169, "question_id": 46560049, "link": "https://stackoverflow.com/questions/46560049/why-do-i-get-an-incompatible-types-when-assigning-to-type-uint16-t-error/46560169#46560169", "title": "Why do I get an incompatible types when assigning to type &#39;uint16_t &#39; error?", "body": "<p>There are actually two problems:</p>\n\n<ol>\n<li><p>you are initializing array of structs, which must be done like this:</p>\n\n<pre><code>ble_uuid_t m_adv_uuid[] = { { AMT_SERVICE_UUID, AMTS_CHAR_UUID } };\n</code></pre></li>\n<li><p>and then you are accessing struct instead of its member <code>uuid</code>. Your assignment should look like this:</p>\n\n<pre><code>ble_uuid.uuid = m_adv_uuid[0].uuid;\n</code></pre></li>\n</ol>\n\n<p>Or, of course, if you don't want <code>m_adv_uuid</code> to be an array of <code>ble_uuid_t</code>, it's enough to just remove <code>[]</code> in declaration of <code>m_adv_uuid</code> and rest of your code will work:</p>\n\n<pre><code>ble_uuid_t m_adv_uuid = {AMT_SERVICE_UUID, AMTS_CHAR_UUID};\n</code></pre>\n"}], "owner": {"reputation": 887, "user_id": 1757475, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/81b2e2174322adc0c63695cae3c7b605?s=128&d=identicon&r=PG", "display_name": "ndarkness", "link": "https://stackoverflow.com/users/1757475/ndarkness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2620, "favorite_count": 0, "accepted_answer_id": 46560169, "answer_count": 2, "score": 1, "last_activity_date": 1508740947, "creation_date": 1507104773, "last_edit_date": 1508740947, "question_id": 46560049, "link": "https://stackoverflow.com/questions/46560049/why-do-i-get-an-incompatible-types-when-assigning-to-type-uint16-t-error", "title": "Why do I get an incompatible types when assigning to type &#39;uint16_t &#39; error?", "body": "<p>I am getting a <code>incompatible types when assigning to type 'uint16_t {aka short unsigned int}' from type 'ble_uuid_t {aka struct &lt;anonymous&gt;}</code> in this piece of code</p>\n\n<pre><code>ble_uuid_t    ble_uuid;\n\nble_uuid.uuid = m_adv_uuid[0];\n</code></pre>\n\n<p>where I have defined <code>m_adv_uuid</code> as </p>\n\n<pre><code>#define AMT_SERVICE_UUID             0x2001\n#define AMTS_CHAR_UUID               0x20\n#define AMT_RCV_BYTES_CNT_CHAR_UUID  0x2003\n\nble_uuid_t m_adv_uuid[] = {AMT_SERVICE_UUID, AMTS_CHAR_UUID};\n</code></pre>\n\n<p>being <code>ble_uuid_t</code> defined as </p>\n\n<pre><code>typedef struct\n{\n  uint16_t    uuid; \n  uint8_t     type; \n} ble_uuid_t;\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 177576, "user_id": 8620333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSmLn.png?s=128&g=1", "display_name": "Temani Afif", "link": "https://stackoverflow.com/users/8620333/temani-afif"}, "edited": false, "score": 0, "creation_date": 1507103654, "post_id": 46559673, "comment_id": 80073161, "body": "what are all the x_loop_* and y_loop_* ? and what not an array ?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 4, "creation_date": 1507103659, "post_id": 46559673, "comment_id": 80073164, "body": "Use arrays or even better vector."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1507103679, "post_id": 46559673, "comment_id": 80073173, "body": "Is this C or C++?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1507103764, "post_id": 46559673, "comment_id": 80073228, "body": "Ditch all those <code>x_loop_n</code> and <code>y_loop_n</code> variables and instead just have a <code>std::array</code> or <code>std::vector</code> of values you can iterate over or use <code>std::transform</code> on."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1507103854, "post_id": 46559673, "comment_id": 80073278, "body": "Indeed, answer is different for C and C++. Also, it&#39;s unclear why you aren&#39;t using some kind of array construct. Please select language, and explain what these loop variables are, and show their declaration."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1507103873, "post_id": 46559673, "comment_id": 80073289, "body": "Seems you want a <a href=\"https://en.wikipedia.org/wiki/Circular_buffer\" rel=\"nofollow noreferrer\">circular buffer</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1507103978, "post_id": 46559673, "comment_id": 80073340, "body": "...and change the index of the snake&#39;s head instead of shuffling the data."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1507104158, "post_id": 46559673, "comment_id": 80073425, "body": "@VancaBogdan there are no vectors in C. Use an array."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1507104204, "post_id": 46559673, "comment_id": 80073442, "body": "Use a <code>struct</code> with an array in it along with the position of the head."}, {"owner": {"reputation": 3, "user_id": 8080687, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921374954763870/picture?type=large", "display_name": "Vanca Bogdan", "link": "https://stackoverflow.com/users/8080687/vanca-bogdan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507104473, "post_id": 46559673, "comment_id": 80073578, "body": "@Michael Walz yes you are right, my bad."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8080687, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921374954763870/picture?type=large", "display_name": "Vanca Bogdan", "link": "https://stackoverflow.com/users/8080687/vanca-bogdan"}, "edited": false, "score": 0, "creation_date": 1507105242, "post_id": 46559999, "comment_id": 80073982, "body": "Ok I see what you did here. Thank you very much. But I will also take in consideration  the circular buffer."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1507104640, "creation_date": 1507104640, "answer_id": 46559999, "question_id": 46559673, "link": "https://stackoverflow.com/questions/46559673/make-multiple-assignments-more-optimal/46559999#46559999", "title": "Make multiple assignments more optimal", "body": "<p>Instead of using 2x16 variables just use two arrays and loop over it.</p>\n\n<p>You roughly want this:</p>\n\n<pre><code>int x_loop[16];\nint y_loop[16];\n\nxy snake_body(int x, int y)\n{\n  xy body;\n\n  body.x = x_loop]15];\n  body.y = y_loop[15];\n\n  for (int i = 15; i &gt; 0; i--)\n  {\n    x_loop[i] = x_loop[i - 1];\n    y_loop[i] = y_loop[i - 1];\n  }\n\n  x_loop[0] = x;\n  y_loop[0] = y;\n\n  return body;\n}\n</code></pre>\n\n<p>But there are more elegant ways to solve this problem, especially using a circular buffer.</p>\n"}], "owner": {"reputation": 3, "user_id": 8080687, "user_type": "registered", "profile_image": "https://graph.facebook.com/1921374954763870/picture?type=large", "display_name": "Vanca Bogdan", "link": "https://stackoverflow.com/users/8080687/vanca-bogdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 46559999, "answer_count": 1, "score": -2, "last_activity_date": 1507104640, "creation_date": 1507103533, "last_edit_date": 1507104214, "question_id": 46559673, "link": "https://stackoverflow.com/questions/46559673/make-multiple-assignments-more-optimal", "title": "Make multiple assignments more optimal", "body": "<p>I have one simple function that memorize a couple of previous values. Can someone help me to make this function more compact. More exactly I want to do all the assignments in a more optimal way. If it is someone to help me I will be very thankfully. </p>\n\n<pre><code> xy snake_body(int x,int y)\n    {\n     xy body;\n\n       body.x = x_loop_16;\n       body.y = y_loop_16;\n\n       x_loop_16 = x_loop_15;\n       y_loop_16 = y_loop_15;\n\n       x_loop_15 = x_loop_14;\n       y_loop_15 = y_loop_14;\n\n       x_loop_14 = x_loop_13;\n       y_loop_14 = y_loop_13;\n\n       x_loop_13 = x_loop_12;\n       y_loop_13 = y_loop_12;\n\n       x_loop_12 = x_loop_11;\n       y_loop_12 = y_loop_11;\n\n       x_loop_11 = x_loop_10;\n       y_loop_11 = y_loop_10;\n\n       x_loop_10 = x_loop_9;\n       y_loop_10 = y_loop_9;\n\n       x_loop_9 = x_loop_8;\n       y_loop_9 = y_loop_8;\n\n       x_loop_8 = x_loop_7;\n       y_loop_8 = y_loop_7;\n\n       x_loop_7 = x_loop_6;\n       y_loop_7 = y_loop_6;\n\n       x_loop_6 = x_loop_5;\n       y_loop_6 = y_loop_5;\n\n       x_loop_5 = x_loop_4;\n       y_loop_5 = y_loop_4;\n\n       x_loop_4 = x_loop_3;\n       y_loop_4 = y_loop_3;\n\n       x_loop_3 = x_loop_2;\n       y_loop_3 = y_loop_2;\n\n       x_loop_2 = x_loop_1;\n       y_loop_2 = y_loop_1;\n\n       x_loop_1 = x;\n       y_loop_1 = y;\n\n        return body;\n\n    }\n</code></pre>\n\n<p>\"xy\" is a structure variable. I use it to store the data that comes from \"x\" and \"y\", and also to have multiple returns from \"snake_body\" function. I hope I was enough specific and if there are any questions, I will respond them as quick as I can. Thank you. </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507102332, "post_id": 46559337, "comment_id": 80072417, "body": "to be more precise, I heard about such case in the slides of the lectures of Robert Seacord, but he does not provide much details."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507102734, "post_id": 46559337, "comment_id": 80072643, "body": "<code>unsigned long long</code> has a bound of <code>ULLONG_MAX  = 18446744073709551615 = 2^64 \u2212 1</code>... if we represent it on 128 bits how are the rest of 64 bits used ?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507102767, "post_id": 46559337, "comment_id": 80072663, "body": "IIRC the standard defines <i>minimal</i> bounds. They could be greater!"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507102793, "post_id": 46559337, "comment_id": 80072676, "body": "no, no, it defines min and max -- pasted:  maximum value for an object of type unsigned long long int ULLONG_MAX  18446744073709551615 // 2 64 \u2212 1"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507102872, "post_id": 46559337, "comment_id": 80072717, "body": "look at <code>5.2.4.2.1  Sizes of integer types &lt;limits.h&gt;</code>"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507102946, "post_id": 46559337, "comment_id": 80072754, "body": "<code>It probably would be also 1 (assuming char, int, long long all have 64 bits) unless long long is e.g. 128 bits (which is possible but unusual).</code>  Ok, how much is the <code>sizeof(int)</code> supposing int is represented on 24 bits in this case?"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 1, "creation_date": 1507103009, "post_id": 46559337, "comment_id": 80072792, "body": "ah, it is written there -- `` Their implementation-de\ufb01ned values shall be equal or greater in magnitude (absolute value) to those shown, with the same sign.``.. I think this statement clarifies the things a lot."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507103197, "post_id": 46559337, "comment_id": 80072894, "body": "Yes, that&#39;s the one that had me scratching my head too &quot;<i>Their implementation-de\ufb01ned values shall be equal or greater in magnitude (absolute value) to those shown, with the same sign.</i>&quot; Oh joy, more certainty..."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507104611, "post_id": 46559337, "comment_id": 80073628, "body": "I think, if char is represented on 64 then all the other types are represented on 64 bits and for each other type sizeof(T)=1.  Correct ?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507104724, "post_id": 46559337, "comment_id": 80073697, "body": "I believe that 64 bits <code>char</code>s could live with 64 bits <code>short</code>-s and 128 bits <code>long</code>-s. But your question is theoretical. I hope that by the time most processors would be 128 bits the C language will be dead."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1511366736, "post_id": 46559337, "comment_id": 81832958, "body": "If memory serves, at least one iteration of Unix-for-Cray-supercomputers had an ABI with <code>CHAR_BIT==64</code> and <code>sizeof(long)==sizeof(int)==sizeof(short)==sizeof(char)==1</code>.  But that was a very long time ago -- possibly before C89, even."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1507104812, "last_edit_date": 1507104812, "creation_date": 1507102239, "answer_id": 46559337, "question_id": 46559283, "link": "https://stackoverflow.com/questions/46559283/when-char-type-is-represented-on-64-bits-how-can-it-keep-its-range-from-limits/46559337#46559337", "title": "When `char` type is represented on 64 bits how can it keep its range from limits.h", "body": "<blockquote>\n  <p>It is possible to find architectures where the char data type is represented on 8 bytes, </p>\n</blockquote>\n\n<p>I don't know any. BTW, it is not only a matter of architecture, but also of <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">ABI</a>. BTW, you don't define what is a byte, and the bit size of <code>char</code>-s matters much more.</p>\n\n<p><sup>(IIRC, someone coded a weird implementation of C in Common Lisp on Linux/x86-64 which has 32 bits <code>char</code>-s; of course its ABI is <em>not</em> the <a href=\"https://github.com/hjl-tools/x86-psABI/wiki/X86-psABI\" rel=\"nofollow noreferrer\">usual</a> Linux one!)</sup></p>\n\n<blockquote>\n  <p><code>sizeof(char)</code>=1 all the time. My question is, what is the value of <code>sizeof(long long)</code> and <code>sizeof(int)</code>  on such an architecture ?</p>\n</blockquote>\n\n<p>It probably would be also 1 (assuming <code>char</code>, <code>int</code>, <code>long long</code> all have 64 bits) unless <code>long long</code> is e.g. 128 bits (which is possible but unusual).</p>\n\n<p>Notice that the C standard imposes <em>minimal</em> bounds and bit sizes (read <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a>). E.g. <code>long long</code> could be wider than 64 bits. I never heard of such C implementations (and I hope that when 128 bits processors become common, C will be dead).</p>\n\n<p>But your question is theoretical. I know no practical C implementation with 64 bits <code>char</code>-s or wider than 64 bits <code>long long</code>. In <em>practice</em> assuming that <code>char</code>-s are 8 bits (but they could be <code>signed</code> or <code>unsigned</code>, and <a href=\"https://stackoverflow.com/a/46463173/841108\">both</a> exist) is a reasonable, but non universal, assumption.</p>\n\n<p>Notice that C is not a universal programming language. You won't be able to code a C compiler for a ternary machine like <a href=\"https://en.wikipedia.org/wiki/Setun\" rel=\"nofollow noreferrer\">Setun</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1507103763, "post_id": 46559611, "comment_id": 80073226, "body": "The exact-width integer types are not allowed to have padding bits either"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507103776, "post_id": 46559611, "comment_id": 80073233, "body": "I heard Robert Seacord saying so.  So this is possible."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1507103978, "post_id": 46559611, "comment_id": 80073342, "body": "@DavidBowling don&#39;t want to mention this explicitly (too far from the question), but I added a little word to clarify ;) thanks."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507104329, "post_id": 46559611, "comment_id": 80073504, "body": "if <code>char</code> is represented on 48 bits and <code>int</code> on 24, what is <code>sizeof(int)</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 1, "creation_date": 1507104579, "post_id": 46559611, "comment_id": 80073619, "body": "@alinsoar that&#39;s impossible. <code>char</code> (a byte) is <b>always</b> the smallest unit."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507104666, "post_id": 46559611, "comment_id": 80073661, "body": "ok, so if char is represented on 64 then all the other types are repr. on 64, such as the integer conversion rank to be sound?"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1507105056, "post_id": 46559611, "comment_id": 80073884, "body": "in case char is represented on 32 and int is represented on 48 we will have 16 padding bits for each integer variable ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1507105114, "post_id": 46559611, "comment_id": 80073917, "body": "yes, and <code>sizeof(int)</code> would still be 2 ... 48 value bits and 16 padding bits."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 4, "last_activity_date": 1507103897, "last_edit_date": 1507103897, "creation_date": 1507103242, "answer_id": 46559611, "question_id": 46559283, "link": "https://stackoverflow.com/questions/46559283/when-char-type-is-represented-on-64-bits-how-can-it-keep-its-range-from-limits/46559611#46559611", "title": "When `char` type is represented on 64 bits how can it keep its range from limits.h", "body": "<blockquote>\n  <p>It is possible to find architectures where the char data type is represented on 8 bytes</p>\n</blockquote>\n\n<p>No. That's because a <em>char</em> is <em>defined</em> to be a byte *). But a byte doesn't necessarily have 8 bits. That's why the term <em>octet</em> is sometimes used to refer to a unit of 8 bits. There are architectures using more than 8 bits in a byte, but I doubt there's one with a 64bit byte, although this would be theoretically possible.</p>\n\n<p>Another thing to consider is that <code>char</code> (as opposed to many other integer types) isn't allowed to have <em>padding bits</em>, so if you ever found an architecture with 64bit <code>char</code>s, that would mean <code>CHAR_MIN</code> and <code>CHAR_MAX</code> would be \"very large\" ;)</p>\n\n<hr>\n\n<p>*) In fact, a byte is defined to be the unit of memory used to represent an encoded character, which is normally also the smallest addressable unit of the system. 8 bits are common, The <a href=\"https://en.wikipedia.org/wiki/Byte\" rel=\"nofollow noreferrer\">wikipedia article</a> mentions byte sizes up to 48 bits were used. This might not be the best source, but still, finding a 64bit byte is very unlikely.</p>\n"}], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 46559337, "answer_count": 2, "score": 1, "last_activity_date": 1507104812, "creation_date": 1507102030, "last_edit_date": 1507102247, "question_id": 46559283, "link": "https://stackoverflow.com/questions/46559283/when-char-type-is-represented-on-64-bits-how-can-it-keep-its-range-from-limits", "title": "When `char` type is represented on 64 bits how can it keep its range from limits.h", "body": "<p>It is possible to find architectures where the char data type is represented on 8 bytes, so 64 bits, the same as <code>long long</code> and in the same time the Standard requires the CHAR_MIN and CHAR_MAX to be bound -- see <code>5.2.4.2.1  Sizes of integer types &lt;limits.h&gt;</code> from the <code>Standard ISO 9899</code>.</p>\n\n<p>I cannot figure out why these architectures chose to represent the char so and how does it represent char values on so a large space.  So how char values are represented in such a case ?</p>\n\n<p><code>sizeof(char)=1</code> all the time.  My question is, what is the value of <code>sizeof(long long)</code> and <code>sizeof(int)</code> on such an architecture ?</p>\n"}, {"tags": ["c", "visual-studio", "debugging", "multidimensional-array", "sub-array"], "answers": [{"comments": [{"owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1507108917, "post_id": 46560602, "comment_id": 80076159, "body": "Thanks. Where can I get the Memory Window?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1507111008, "post_id": 46560602, "comment_id": 80077456, "body": "You are welcome @SazzadHissainKhan, I don&#39;t have VS studio now, so I just googled and got <a href=\"https://msdn.microsoft.com/en-us/library/s3aw423e.aspx\" rel=\"nofollow noreferrer\">this</a>. Hope that helps, cheers!"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 1, "last_activity_date": 1507106665, "creation_date": 1507106665, "answer_id": 46560602, "question_id": 46559136, "link": "https://stackoverflow.com/questions/46559136/c-debugging-a-particular-sub-array-of-2d-arrays/46560602#46560602", "title": "C - Debugging a particular sub array of 2D arrays", "body": "<p>You can't do what you want with one command, but maybe you could work this out based on <a href=\"https://stackoverflow.com/a/13457935/2411320\">this</a>, where he mentions that:</p>\n\n<pre><code>Mat + 100, 10\n</code></pre>\n\n<p>which will show the 10 elements starting at <code>Mat[100]</code>. You don't want that, but if you could play around and get the elements at <code>j1</code>, then you could combine them to get a subarray, maybe.</p>\n\n<p>PS: Give the memory window a try too, as described <a href=\"https://stackoverflow.com/a/1982304/2411320\">here</a>.</p>\n"}], "owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 46560602, "answer_count": 1, "score": 1, "last_activity_date": 1507106678, "creation_date": 1507101552, "last_edit_date": 1507106678, "question_id": 46559136, "link": "https://stackoverflow.com/questions/46559136/c-debugging-a-particular-sub-array-of-2d-arrays", "title": "C - Debugging a particular sub array of 2D arrays", "body": "<p>I am writing a C program in VS 2013 and I want to debug a particular sub-array from full 2D matrix of ints. For example, using debugger watch window, I can print like,</p>\n\n<pre><code>Mat        // this shows the full NxM Mat matrix values\nMat[i][j]  // this shows value of cell (i, j)\nMat[i]     // this shows the values of full i'th row\nMat[i], j  // this shows first j values from i'th row\n</code></pre>\n\n<p>But I want to print a snapshot of a sub-part of Mat, which consists of (i1, j1) to (i2, j2) in small 2D grid. Is it possible? I require it because sometimes debugging smaller sub-array seems a tedious work especially when the main array is too big and I am interested to a subpart somewhere in the bottom-right corner of the full array.</p>\n\n<p>Any workaround, if there is no standard way?</p>\n"}, {"tags": ["c", "objectarx"], "comments": [{"owner": {"reputation": 668, "user_id": 803978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7PIsz.png?s=128&g=1", "display_name": "Code Gorilla", "link": "https://stackoverflow.com/users/803978/code-gorilla"}, "edited": false, "score": 1, "creation_date": 1507100749, "post_id": 46558892, "comment_id": 80071532, "body": "Can you really cast a Wide Char to a Char like that?"}, {"owner": {"reputation": 741, "user_id": 4592155, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-PBCwr8JnDLM/AAAAAAAAAAI/AAAAAAAAABE/J-Pr24TTi3Y/photo.jpg?sz=128", "display_name": "Abhilash D K", "link": "https://stackoverflow.com/users/4592155/abhilash-d-k"}, "reply_to_user": {"reputation": 668, "user_id": 803978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7PIsz.png?s=128&g=1", "display_name": "Code Gorilla", "link": "https://stackoverflow.com/users/803978/code-gorilla"}, "edited": false, "score": 0, "creation_date": 1507100942, "post_id": 46558892, "comment_id": 80071640, "body": "I am new to C/C++. Sorry I don&#39;t know. Could you guide me how to cast wchar_t to char. I will also look into it."}, {"owner": {"reputation": 668, "user_id": 803978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7PIsz.png?s=128&g=1", "display_name": "Code Gorilla", "link": "https://stackoverflow.com/users/803978/code-gorilla"}, "edited": false, "score": 1, "creation_date": 1507101080, "post_id": 46558892, "comment_id": 80071721, "body": "You can&#39;t cast wchar to char.  wchar is (usually) a 16 bit character code where as char is an 8 bit code.  Either use <code>fgets()</code> to get a char in the first place or use <code>wcscmp()</code> to compare wide strings.  If its for Windows you could look at the <code>CA2W</code> class."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1507101080, "post_id": 46558892, "comment_id": 80071723, "body": "@AbhilashDK just casting it won&#39;t help, you&#39;d need some conversion function and in general, this will lose information: the point of <code>wchar_t</code> is to support encodings with <b>more</b> code points than would fit into a byte."}], "answers": [{"comments": [{"owner": {"reputation": 741, "user_id": 4592155, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-PBCwr8JnDLM/AAAAAAAAAAI/AAAAAAAAABE/J-Pr24TTi3Y/photo.jpg?sz=128", "display_name": "Abhilash D K", "link": "https://stackoverflow.com/users/4592155/abhilash-d-k"}, "edited": false, "score": 0, "creation_date": 1507101138, "post_id": 46558958, "comment_id": 80071747, "body": "Hi I tried this if ((!wcsncmp(line, L&quot;REQ&quot;, 3)) || (!wcsncmp(line, L&quot;ROL&quot;, 3)) || \t\t   (!wcsncmp(line, L&quot;NLS&quot;, 3)) || (!wcsncmp(line, L&quot;NDW&quot;, 3))) { But due to my warning level in Visual Studio I was getting error. I changed the Warning Level. Now it&#39;s working thanks."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1507100890, "creation_date": 1507100890, "answer_id": 46558958, "question_id": 46558892, "link": "https://stackoverflow.com/questions/46558892/strncmp-not-working-in-objectarx-2018/46558958#46558958", "title": "strncmp not working in ObjectARX 2018", "body": "<p><code>wchar_t</code> is <strong>most</strong> likely something completely different than <code>char</code> and casting a pointer only silences the compiler. If you're dealing with wide chars, there are functions for that, e.g. <a href=\"https://linux.die.net/man/3/wcscmp\" rel=\"nofollow noreferrer\"><code>wcscmp()</code></a> and friends:</p>\n\n<pre><code> wchar_t *line;\n [...]\n if ((!wcsncmp(line, L\"REQ\", 3))\n</code></pre>\n"}], "owner": {"reputation": 741, "user_id": 4592155, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-PBCwr8JnDLM/AAAAAAAAAAI/AAAAAAAAABE/J-Pr24TTi3Y/photo.jpg?sz=128", "display_name": "Abhilash D K", "link": "https://stackoverflow.com/users/4592155/abhilash-d-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507100890, "creation_date": 1507100660, "last_edit_date": 1507100840, "question_id": 46558892, "link": "https://stackoverflow.com/questions/46558892/strncmp-not-working-in-objectarx-2018", "title": "strncmp not working in ObjectARX 2018", "body": "<p>In an ObjectARX 2018 Project we have a .c file containing the below code :</p>\n\n<pre><code>while(fgetws((wchar_t *)line, 80, fp) != NULL) {\nif((!strncmp((const char*)line, \"REQ\",3)) || (!strncmp((const char*)line, \n\"ROL\",3)) ||\n      (!strncmp((const char*)line, \"NLS\",3)) || (!strncmp((const char*)line, \n\"NDW\",3))) {\n        //Inside If\n      }\n      //Outside if\n}\n</code></pre>\n\n<p>This while loop is reading a file with the below data :</p>\n\n<p>ACAD3|14789536|005|MISC BULK CA &amp; WIRE, CA RK, AUX FR &amp; LTG</p>\n\n<p>REQ|G3060901|1|</p>\n\n<p>REQ|G3060906|1|</p>\n\n<p>REQ|G3060907|1|</p>\n\n<p>REQ|G3062062|4|</p>\n\n<p>REQ|G3062095|1|</p>\n\n<p>we need to enter into if only if line starts with REQ, ROL, NLS, NDW. But we are not able to.</p>\n\n<p>This was working in ObjectARX 2014.</p>\n\n<p>Can anybody tell us how to resolve this.</p>\n"}, {"tags": ["c", "arrays", "c-strings"], "comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1507099311, "post_id": 46558463, "comment_id": 80070821, "body": "<code>hello world</code> is null-terminated string placed somewhere in the system. When variable is initialized, string is copied to RAM."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1507099503, "post_id": 46558463, "comment_id": 80070901, "body": "If the variable is global or static, then so is the initialization, and there is no copying being done at runtime.  If the variable is automatic, then the initialization is dynamic and is performed each time the variable is instantiated."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1507099643, "post_id": 46558463, "comment_id": 80070977, "body": "@TomKarzes I don&#39;t believe that. Consider this: <code>const char a[] = &quot;hello world&quot;; char b[] = &quot;hello world&quot;;</code>. You have 2 exact values, and even if they are global or static, you will have only one memory storage of <code>hello world</code> in .rodata section, specially on embedded systems. It will be copied to non-const variable on runtime first."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 2, "creation_date": 1507100510, "post_id": 46558463, "comment_id": 80071402, "body": "@tilz0R this is entirely up to the compiler to decide. What&#39;s &quot;better&quot; depends on the target system and exact requirements."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1507108131, "post_id": 46558463, "comment_id": 80075654, "body": "@tilz0R In that case, <code>b</code> will normally be placed in the data section with the corresponding initialization value.  The initialization will occur as a consequence of the program being loaded into memory."}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1507100351, "post_id": 46558586, "comment_id": 80071332, "body": "It is the only exception from the general rule as <code>=</code> as it copies the string itself, not the pointer as usually :)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1507101212, "post_id": 46558586, "comment_id": 80071786, "body": "There&#39;s no exception here at all. This is an initialization, not an assignment."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1507101721, "post_id": 46558586, "comment_id": 80072104, "body": "What is <code>.rodata</code> ?-)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1507116550, "post_id": 46558586, "comment_id": 80080786, "body": "@JensGustedt Although the C standard does not know anything of computer memories and segments, the real world has industry standard naming conventions for segments. <code>.rodata</code> would be the read-only data segment, used by the popular <a href=\"http://wiki.osdev.org/ELF\" rel=\"nofollow noreferrer\">ELF</a> link file format, among others. A summary &amp; explanation of the industry standard memory segments can be found <a href=\"https://electronics.stackexchange.com/a/237759/6102\">here</a>."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1507099526, "creation_date": 1507099526, "answer_id": 46558586, "question_id": 46558463, "link": "https://stackoverflow.com/questions/46558463/mechanism-of-initializing-an-array-with-a-string-constant-in-c/46558586#46558586", "title": "Mechanism of initializing an array with a string constant in C", "body": "<blockquote>\n  <p>\"...creates a constant character array (null terminated) somewhere in memory, and then copies the content of that array to arr_of_chars\"</p>\n</blockquote>\n\n<p>Indeed. The string literal <code>\"hello world\"</code> is stored somewhere in the <code>.rodata</code> section of the program, unless the compiler managed to optimize it away entirely (depends on your array's scope). From there it is copied into your array. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1507100739, "post_id": 46558668, "comment_id": 80071528, "body": "How does examining the behavior of <b>one</b> concrete implementation answer this question?"}, {"owner": {"reputation": 109, "user_id": 4201589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AKW9g.gif?s=128&g=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/4201589/superman"}, "edited": false, "score": 0, "creation_date": 1507102296, "post_id": 46558668, "comment_id": 80072393, "body": "@FelixPalmen - You&#39;re right. What I have posted is only an observation. But I&#39;m not sure if the standard defines a method to execute this. However, the operation is an array being initialized with a string literal. So the string literal has to be stored somewhere and must be copied to the array during initialization."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1507102764, "post_id": 46558668, "comment_id": 80072660, "body": "It <b>isn&#39;t</b> specified by the standard, that&#39;s my point ;) And no, it&#39;s not absolutely necessary to store the string literal somewhere. It all depends on the target&#39;s binary format and the decisions of the compiler, and if this exact string literal is <b>only</b> used for initializing this variable, it <i>could</i> be a valid decision to &quot;eliminate&quot; it and put the initialized array in a data segment -- for example :)"}, {"owner": {"reputation": 109, "user_id": 4201589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AKW9g.gif?s=128&g=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/4201589/superman"}, "edited": false, "score": 0, "creation_date": 1507104617, "post_id": 46558668, "comment_id": 80073633, "body": "I agree. So I guess I&#39;ll make a few more observations on some of the other well known C compilers as well. :)"}], "tags": [], "owner": {"reputation": 109, "user_id": 4201589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AKW9g.gif?s=128&g=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/4201589/superman"}, "is_accepted": false, "score": 0, "last_activity_date": 1507100293, "last_edit_date": 1507100293, "creation_date": 1507099893, "answer_id": 46558668, "question_id": 46558463, "link": "https://stackoverflow.com/questions/46558463/mechanism-of-initializing-an-array-with-a-string-constant-in-c/46558668#46558668", "title": "Mechanism of initializing an array with a string constant in C", "body": "<p>This will create a null terminated string <code>hello world\\0</code> in the const segment.</p>\n\n<p>In the main function this string will be copied to the character array.</p>\n\n<p>Let me highlight a few lines from the assembly output to clairfy this.</p>\n\n<pre><code>PUBLIC  ??_C@_0M@LACCCNMM@hello?5world?$AA@\n</code></pre>\n\n<p>This creates a public token.</p>\n\n<pre><code>CONST   SEGMENT\n??_C@_0M@LACCCNMM@hello?5world?$AA@ DB 'hello world', 00H\nCONST   ENDS\n</code></pre>\n\n<p>This assigns the constant null terminated string to the token.</p>\n\n<pre><code>lea rax, QWORD PTR arr_of_chars$[rbp]\nlea rcx, OFFSET FLAT:??_C@_0M@LACCCNMM@hello?5world?$AA@\nmov rdi, rax      ; Set destination to stack location\nmov rsi, rcx      ; Set source to public token\nmov ecx, 12       ; Set counter to number of times to repeat\nrep movsb         ; Copy single byte from source to destination and increment locations\n</code></pre>\n\n<p>This sets up the source and destination and copies character by character 12 times which is the length of \"hello world\" and the null terminator. The destination is a location on the stack and the source is the public token.</p>\n"}, {"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1507101899, "post_id": 46558812, "comment_id": 80072188, "body": "Exactly. Another possibility for an initialization, if the string is short, would be to use a hardware register or an immediate, and depending on the usage of the <code>char</code> array, not to represent it in memory at all."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1507100375, "creation_date": 1507100375, "answer_id": 46558812, "question_id": 46558463, "link": "https://stackoverflow.com/questions/46558463/mechanism-of-initializing-an-array-with-a-string-constant-in-c/46558812#46558812", "title": "Mechanism of initializing an array with a string constant in C", "body": "<p>What you're asking is not specified by C. In a nutshell, C is specified in terms of an <em>abstract machine</em> and its <em>observable behavior</em>. In this case, this means all you know is there is an array variable <code>arr_of_chars</code> initialized from a string literal.</p>\n\n<p>When talking about segments, copying, etc, you're already talking about concrete implementations of C and what they're doing. Assuming your <code>arr_of_chars</code> is at file scope and given a target machine/system that knows binaries with data segments, it would be possible for a C compiler to put the initialized array directly in a data segment -- the observable behavior would be no different from an approach where the runtime first copies the bytes to your array.</p>\n"}, {"tags": [], "owner": {"reputation": 340, "user_id": 2063520, "user_type": "registered", "accept_rate": 13, "profile_image": "https://i.stack.imgur.com/a0mfP.jpg?s=128&g=1", "display_name": "Parthiv Shah", "link": "https://stackoverflow.com/users/2063520/parthiv-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1507100400, "creation_date": 1507100400, "answer_id": 46558822, "question_id": 46558463, "link": "https://stackoverflow.com/questions/46558463/mechanism-of-initializing-an-array-with-a-string-constant-in-c/46558822#46558822", "title": "Mechanism of initializing an array with a string constant in C", "body": "<p>It is subject of storage of the string in c.</p>\n\n<p>Strings can be stored in following ways,</p>\n\n<ol>\n<li>Strings as character arrays</li>\n<li>Strings using character pointers</li>\n</ol>\n\n<p>When strings are declared as character arrays, they are stored like other types of arrays in C. For example, if str[] is an auto variable then string is stored in stack segment, if it\u2019s a global or static variable then stored in data segment.</p>\n\n<p>Ex.  </p>\n\n<pre><code>char str[] = \"Hello_world\";\n</code></pre>\n\n<p><strong>In case of storing the strings using the character pointers, It can be done by two ways,</strong></p>\n\n<ol>\n<li><p>Read only string in a shared segment.</p>\n\n<p>Ex.</p>\n\n<pre><code>char *str  =  \"Hello_World\";\n</code></pre></li>\n</ol>\n\n<p>In the above line \"Hello_World\" is stored in a shared read only location, but pointer str is stored in a read-write memory. You can change str to point something else but cannot change value at present str. So this kind of string should only be used when we don\u2019t want to modify string at a later stage in program.</p>\n\n<ol start=\"2\">\n<li><p>Dynamically allocated in heap segment.</p>\n\n<pre><code>char *str = NULL;\nint size = 6;\n\nstr = (char *) malloc(sizeof(char)*size);\n\n*(str+0) = 'H'; \n*(str+1) = 'E';  \n*(str+2) = 'L';  \n*(str+3) = 'L';  \n*(str+4) = 'O';  \n*(str+5) = '\\0';\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 7664900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80fc7499126d9d4303917856ccf3ba0?s=128&d=identicon&r=PG&f=1", "display_name": "J.tuc", "link": "https://stackoverflow.com/users/7664900/j-tuc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1507142146, "creation_date": 1507099036, "last_edit_date": 1507142146, "question_id": 46558463, "link": "https://stackoverflow.com/questions/46558463/mechanism-of-initializing-an-array-with-a-string-constant-in-c", "title": "Mechanism of initializing an array with a string constant in C", "body": "<p>Does the definition:</p>\n\n<pre><code>char arr_of_chars[] = \"hello world\";\n</code></pre>\n\n<p>create a constant character array (null terminated) somewhere in memory, and then copy the content of that array to <code>arr_of_chars</code>, or does it directly assign it to <code>arr_of_chars</code>?</p>\n\n<p>What exactly is the mechanism that works here?</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1507098961, "post_id": 46558412, "comment_id": 80070622, "body": "You need to design a <i>protocol</i> to sit on top of UDP, which adds &quot;reliability&quot;. Things like sequence numbers, and acknowledging of received packets. Or possibly research existing reliable file-transfer protocols on top of UDP and see if you can use one of them."}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1507099051, "post_id": 46558412, "comment_id": 80070672, "body": "I see no code to make this reliable?.."}, {"owner": {"reputation": 4166, "user_id": 1898070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c29fa44faffe872325c40c6d5aea0393?s=128&d=identicon&r=PG", "display_name": "Nipun Talukdar", "link": "https://stackoverflow.com/users/1898070/nipun-talukdar"}, "edited": false, "score": 2, "creation_date": 1507099155, "post_id": 46558412, "comment_id": 80070738, "body": "Any specific reason for using UDP? If you use TCP for such scenarios, it will be more appropriate. Also, when there are too many requests, UDP server may be dropping requests without even you knowing that.  Adding sequence numbers, ack etc. are already handled in TCP"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 4166, "user_id": 1898070, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c29fa44faffe872325c40c6d5aea0393?s=128&d=identicon&r=PG", "display_name": "Nipun Talukdar", "link": "https://stackoverflow.com/users/1898070/nipun-talukdar"}, "edited": false, "score": 0, "creation_date": 1507099310, "post_id": 46558412, "comment_id": 80070818, "body": "@NipunTalukdar Probably because the OP has read somewhere that UDP might have higher throughput (which it usually does). That&#39;s the reason UDP is often used for things like VOIP or Video streaming."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1507100454, "post_id": 46558412, "comment_id": 80071380, "body": "Which it usually does <i>without the reliability features</i>. Once you add those to the same standard as TCP, it is no better than TCP, by definition."}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1507101989, "post_id": 46558412, "comment_id": 80072231, "body": "One suggestion is to use sniffer example tcpdump or wire shark and see is there any other packet drops. As others mentioned udp don\u2019t retransmit the lost packets."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1507109181, "post_id": 46558412, "comment_id": 80076306, "body": "@EJP <i>Once you add those to the same standard as TCP, it is no better than TCP, by definition.</i>  Not true at all.  TCP has serious bandwidth-delay product issues because of the design of the underlying protocol - mostly related to the ack window. There&#39;s even a Wikipedia page on the problem:  <a href=\"https://en.wikipedia.org/wiki/Bandwidth-delay_product\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Bandwidth-delay_product</a> It&#39;s not that hard at all to beat TCP throughput over a long, fat connection with a custom UDP-based protocol."}], "answers": [{"tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1507101349, "creation_date": 1507101349, "answer_id": 46559088, "question_id": 46558412, "link": "https://stackoverflow.com/questions/46558412/reliable-data-transfer-using-udp-in-c/46559088#46559088", "title": "reliable data transfer using udp in c", "body": "<blockquote>\n<pre><code>       n= sendto(sock,buff,strlen(buff),0,(struct sockaddr *)&amp;server,sizeof(struct sockaddr));\n</code></pre>\n</blockquote>\n\n<p>You are transferring binary data, i.e. data which might contain <code>\\0</code>. <code>strlen</code> cannot be used with binary data since it just determines the length of the data by looking for a <code>\\0</code> inside the data. If a <code>\\0</code> is in the middle of <code>buff</code> only the part until but not including this <code>\\0</code> will be sent.</p>\n\n<p>Apart from that:</p>\n\n<blockquote>\n  <p>reliable data transfer using udp in c</p>\n</blockquote>\n\n<p>While you are doing a data transfer you don't care about reliability at all. Packets might be reordered, duplicated or get lost and you will not notice it in most cases. UDP does not provide any reliability at all by its own, contrary to TCP.</p>\n"}, {"tags": [], "owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1595362939, "last_edit_date": 1595362939, "creation_date": 1507104352, "answer_id": 46559909, "question_id": 46558412, "link": "https://stackoverflow.com/questions/46558412/reliable-data-transfer-using-udp-in-c/46559909#46559909", "title": "reliable data transfer using udp in c", "body": "<p>If a reliable transmission is expected then TCP socket is recommended.<br />\nBut still, if you want to go with UDP sockets then you have to implement some sort of custom protocol where you have to wait till receiver has not acknowledged the reception of the packet.</p>\n<p>In your client and server code, the client is blindly sending data to the server without caring for missed packets that is happening currently at the server side.</p>\n<p>For a simple workaround, you can add a<br />\n<code>recvfrom(sock,buf,sizeof (buf),0,(struct sockaddr *)&amp;server,sizeof(struct sockaddr));</code> immediately after<br />\n<code>n= sendto(sock,buff,strlen(buff),0,(struct sockaddr *)&amp;server,sizeof(struct sockaddr));</code><br />\nin your <strong>client.c</strong> and<br />\n<code>n= sendto(sock,&quot;ACK&quot;,strlen(&quot;ACK&quot;),0,(struct sockaddr *)&amp;from,&amp;fromlen);</code>\nimmediately after<br />\n<code>n = recvfrom(sock,buf,sizeof (buf),0,(struct sockaddr *)&amp;from,&amp;fromlen);</code> in <strong>server.c</strong></p>\n<p>And you have to take care of handling the file properly because improper file handling can cause input and output file mismatch.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8326697"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1243, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1595362939, "creation_date": 1507098804, "last_edit_date": 1507098895, "question_id": 46558412, "link": "https://stackoverflow.com/questions/46558412/reliable-data-transfer-using-udp-in-c", "title": "reliable data transfer using udp in c", "body": "<p>I am writing a socket program for reliable data transfer using udp. I am sending image file from client to the server in chunks of 1024 bytes. Below are my codes.They do work fine for large strings and smaller image files.But when I transfer image of 2.3 MB the server will only receive till 2 MB. Say if the total number ofpackets sent was 2271. The server will only receive till 2211 or less and will terminate abruptly. I am not knowing the reasson. Can you please explain me this? and suggest any solution.\nBelow is my client code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;netdb.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;arpa/inet.h&gt;\n\nchar *itoa(long i,char *s,int dummy_radix)\n{\n    sprintf(s,\"%ld\",i);\n    return s;\n}\n\nint main(int argc, int *argv[])\n{\n    int sock,length,n;\n    struct sockaddr_in server,from;\n    struct hostent *hp;\n    long int packets =0;\n    unsigned char buff[1024] = {0};\n\n\n    // checking if hostname and the port address is provided //\n    if(argc!=3)\n    {\n        printf(\"insufficient arguments\\n\");\n        exit(1);\n    }\n\n    //create a socket//\n    sock = socket(AF_INET,SOCK_DGRAM,0);\n\n    if(sock&lt;0)\n    {\n        printf(\"error in opening socket\\n\");\n        return 1;\n    }\n\n    //to get  the hostname of the system or the machine//\n    hp= gethostbyname(argv[1]);\n\n    if(hp==0)\n    {\n        printf(\"Unknown host\\n\");\n        return 1;\n    }\n    //build the server's IP address //\n    bzero((char *)&amp;server,sizeof(server));\n    bcopy((char*)hp-&gt;h_addr,(char *)&amp;server.sin_addr,hp-&gt;h_length);\n    server.sin_family = AF_INET;\n    server.sin_port =  htons(atoi(argv[2]));\n    length = sizeof(server);\n\n    /*open the file that we wish to transfer*/\n    FILE *fp = fopen(\"landscape.jpeg\",\"rb\");\n    if(fp==NULL)\n    {\n        printf(\"file open error\");\n        return 1;\n    }\n    fseek(fp,0,SEEK_END); //if exists read the size of the file \n    size_t file_size = ftell(fp);\n    fseek(fp,0,SEEK_SET); \n\n    printf(\"size of the file is %d\\n\", file_size);\n\n    /*find the number of packets*/\n\n    packets = (file_size/1024)+1 ;\n\n    /*send the number of packets to the server*/\n\n     itoa(packets,buff,10);\n    n= sendto(sock,buff,strlen(buff),0,(struct sockaddr *)&amp;server,sizeof(struct sockaddr));\n        if(n&lt;0)\n        {\n            printf(\"error in sending message to the serveR\");\n        return 1;\n    }\n\n\n\n\n    /*Read data from file and send it*/\n    int packetNum = 0;\n    while(1)\n    {\n        /*First read file in chunks of  1024  bytes */\n\n        int nread = fread(buff,1,1024,fp);\n        //printf(\"Bytes read %d\\n\",nread);\n\n        /*if read was success ,send data*/\n        if(nread&gt;0)\n        {\n            //printf(\"data sent now is %s\\n\",buff);\n            n= sendto(sock,buff,strlen(buff),0,(struct sockaddr *)&amp;server,sizeof(struct sockaddr));\n            printf(\"Sending %d, numBytes sent: %d\\n\", packetNum, n);\n            packetNum++;\n                    if(n&lt;0)\n                    {\n                      printf(\"error in sending message to the server\");\n                  fclose(fp);\n                  return 1;\n            }\n\n        }\n\n        /*There is something tricky going on with the read..\n         * Either there was error ,or we reached end of  file.\n         */\n        if(nread&lt;1024)\n        {\n            if(feof(fp))\n                printf(\"End of file\\n\");\n\n            if(ferror(fp))\n                printf(\"Error reading\\n\");\n            break;\n        }\n\n    }\n    close(sock);\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n\n<p>And my server code:</p>\n\n<pre><code>#include&lt;sys/socket.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;netdb.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;arpa/inet.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int sock,length,fromlen,n;\n    struct sockaddr_in server;\n    struct sockaddr_in from;\n    char buf[1024];\n    char file_buf[1024];\n    int packets = 0;\n    int received = 0;\n    FILE *newfp;\n    newfp = fopen(\"output.jpeg\",\"wb\");\n    if(newfp==NULL)\n    {\n        printf(\"error opening the file\\n\");\n            return 1;\n    }   \n    if(argc&lt;2)\n    {\n        fprintf(stderr, \"no port number specified\\n\");\n\n        exit(0);\n    }\n    sock = socket(AF_INET,SOCK_DGRAM,0);\n    if(sock&lt;0)\n    {\n        printf(\"error in opening socket\\n\");\n        return 1;\n    }\n    length = sizeof(server);\n    bzero(&amp;server,length);\n    server.sin_family= AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons(atoi(argv[1]));\n    if(bind(sock,(struct sockaddr*)&amp;server,length)&lt;0)\n    {\n        printf(\"cannot bind\\n\");\n        return 1;\n    }\n    fromlen  =sizeof(struct sockaddr_in);\n        n = recvfrom(sock,buf,1024,0,(struct sockaddr *)&amp;from,&amp;fromlen);\n    if(n&lt;0)\n    {\n            printf(\"recvfrom  error\\n\");\n            return 1;\n    }\n\n\n    packets = atoi(buf);\n    printf(\"Num packets expected: %d\\n\", packets);\n\n\n    while(received&lt;packets)\n    {\n\n        n = recvfrom(sock,buf,sizeof (buf),0,(struct sockaddr *)&amp;from,&amp;fromlen);    \n\n            //printf (\"%d\\n\", n);\n        printf(\"Packet num %d, numBytes received: %d\\n\", received, n);\n\n        if(n&lt;0)\n        {\n            printf(\"recvfrom  error\\n\");\n            return 1;\n        }\n        //printf(\"%s\",buf);\n        if((fwrite(buf,1,n,newfp)) &lt; n)\n        {\n            printf(\"error in writing to the file\\n\");\n            return 1;\n        }\n        received++;\n\n    }\n    printf(\"Finished\\n\");\n    fclose(newfp);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1507099003, "post_id": 46558406, "comment_id": 80070645, "body": "<code>s[strlen(s)]</code> is 0.  Why is this important?"}, {"owner": {"reputation": 3, "user_id": 8617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60353ecb6e261051697f24f7a04252e?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/8617129/theo"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1507099044, "post_id": 46558406, "comment_id": 80070668, "body": "I don&#39;t understand what u mean"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1507099122, "post_id": 46558406, "comment_id": 80070715, "body": "What I think @Gene means, is that you should not check the string terminator in your comparison."}, {"owner": {"reputation": 3, "user_id": 8617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60353ecb6e261051697f24f7a04252e?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/8617129/theo"}, "edited": false, "score": 0, "creation_date": 1507099175, "post_id": 46558406, "comment_id": 80070750, "body": "Why ? How should I do tho ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507099448, "post_id": 46558406, "comment_id": 80070877, "body": "Think back to when you first started <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">reading your beginners book</a> about arrays and array indexes. You have an array of five characters, with indexes <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code> and <code>4</code>. Now what does <code>strlen(chaine)</code> returns? It returns <code>5</code>! Is that a valid index of a character in your string? No. Now take some time to think about how you can make it a valid index of the last character."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60353ecb6e261051697f24f7a04252e?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/8617129/theo"}, "edited": false, "score": 0, "creation_date": 1507099288, "post_id": 46558518, "comment_id": 80070806, "body": "Yes, but I want to try to do it in recursive"}], "tags": [], "owner": {"reputation": 11, "user_id": 6669307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f415a4461b704c974bdd3218835ff33a?s=128&d=identicon&r=PG&f=1", "display_name": "Rhys Miller", "link": "https://stackoverflow.com/users/6669307/rhys-miller"}, "is_accepted": false, "score": 0, "last_activity_date": 1507099237, "creation_date": 1507099237, "answer_id": 46558518, "question_id": 46558406, "link": "https://stackoverflow.com/questions/46558406/c-recursive-function-palindrome/46558518#46558518", "title": "C recursive function palindrome", "body": "<p>If you can achieve what you are looking for without using recursion do the following. Read the word into a list on and then reverse the word into another list and if they match you have a palindrome. </p>\n"}, {"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507099499, "post_id": 46558568, "comment_id": 80070899, "body": "Code-only answers are really discouraged, especially if it doesn&#39;t <b><i>clearly</i></b> say what changes you made."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507099535, "post_id": 46558568, "comment_id": 80070921, "body": "I have included comments for what changes I have made"}, {"owner": {"reputation": 3, "user_id": 8617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60353ecb6e261051697f24f7a04252e?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/8617129/theo"}, "edited": false, "score": 0, "creation_date": 1507099590, "post_id": 46558568, "comment_id": 80070952, "body": "Thanks dude, So, in C, to increment, decrement it&#39;s not i++ or j++ or l-- its ++i, --j etc.. If I understood well ? Thanks for this, it worked"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 3, "user_id": 8617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60353ecb6e261051697f24f7a04252e?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/8617129/theo"}, "edited": false, "score": 1, "creation_date": 1507099632, "post_id": 46558568, "comment_id": 80070970, "body": "@Theo Perhaps you should take a few steps back, and start over with a <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">good beginners book</a>?"}], "tags": [], "owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "is_accepted": true, "score": 0, "last_activity_date": 1507099672, "last_edit_date": 1507099672, "creation_date": 1507099466, "answer_id": 46558568, "question_id": 46558406, "link": "https://stackoverflow.com/questions/46558406/c-recursive-function-palindrome/46558568#46558568", "title": "C recursive function palindrome", "body": "<p>Modified code : <br>\n    1) If first index is 0 , then last index should be strlen(chaine) - 1.<br>\n    2) You were passing same values of i and j in the recursive call  , you need to use pre-increment and post-increment operators.</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt;\n\nint palindrome(char c[100],int i, int j)\n{\n\n    if (j == i)\n    {\n        return 1;\n    }\n\n    if(c[i] == c[j]) // Si le premier et le dernier caract\u00e8re sont les m\u00eames alors, on peut commencer les tests\n    {\n\n        // On fais les tests pour chaque caract\u00e8re de la chaine\n        // increment and decrement first \n        // You were passing same values every time (0 and 4)\n        return palindrome(c, ++i, --j);\n\n    }\n    else\n    {\n        return 0;\n    }\n\n    return 0;\n\n}\n\nint main()\n{\n\n    char chaine[100] = \"radar\";\n    int pal;\n    // Last index should be strlen(chaine) - 1\n    pal = palindrome(chaine, 0, strlen(chaine)-1); // Returns : 0 -&gt; False / 1 -&gt; True\n    printf(\"%d\", pal);\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 570, "user_id": 4232185, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9UBT-lyLyqY/AAAAAAAAAAI/AAAAAAAAABQ/Q0YkmwqxvXs/photo.jpg?sz=128", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/4232185/abhishek-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1507099787, "creation_date": 1507099787, "answer_id": 46558649, "question_id": 46558406, "link": "https://stackoverflow.com/questions/46558406/c-recursive-function-palindrome/46558649#46558649", "title": "C recursive function palindrome", "body": "<p>The problem is your passing j value as strlen(chaine) instead of strlen(chaine) - 1.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint palindrome(char c[100],int i, int j) {\n    if (j == i)\n        return 1;\n    else if(c[i] == c[j])\n        return palindrome(c, ++i, --j);\n    else\n        return 0;\n}\n\nint main() {\n    char chaine[100] = \"radar\";\n    int pal;\n    pal = palindrome(chaine, 0, strlen(chaine) -1 ); // Returns : 0 -&gt; False / 1 -&gt; True\n    printf(\"%d\", pal);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1507100659, "last_edit_date": 1507100659, "creation_date": 1507100246, "answer_id": 46558774, "question_id": 46558406, "link": "https://stackoverflow.com/questions/46558406/c-recursive-function-palindrome/46558774#46558774", "title": "C recursive function palindrome", "body": "<p>You have several problems with your recursion. First, <code>i++</code> and <code>j--</code> pass the values of <code>i</code> and <code>j</code> with the post increment/decrement applied as a <em>side effect</em> after the next call to <code>palindrome</code> has already been made. Instead you need:</p>\n\n<pre><code>        return palindrome (c, i + 1, j - 1);\n</code></pre>\n\n<p>Next, what happens if <code>chaine</code> has an <em>even number of characters?</em> <code>i</code> never equals <code>j</code>. You need to update your test to break recursion to:</p>\n\n<pre><code>    if (j &lt;= i)\n        return 1;\n</code></pre>\n\n<p>Lastly, you are attempting to read the <em>nul-terminating</em> character when you call <code>palindrome</code> in <code>main()</code> using <code>strlen(chaine)</code>, instead you need:</p>\n\n<pre><code>    pal = palindrome (chaine, 0, strlen (chaine) - 1);\n</code></pre>\n\n<p>Putting that together, you could do something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt;\n\nint palindrome (const char *c, int i, int j)\n{\n    if (j &lt;= i)\n        return 1;\n\n    if (c[i] == c[j])\n        return palindrome (c, i + 1, j - 1);\n\n    return 0;\n}\n\nint main (int argc, char **argv) {\n\n    char *chaine = argc &gt; 1 ? argv[1] : \"radar\";\n    int pal;\n\n    pal = palindrome (chaine, 0, strlen (chaine) - 1);\n\n    printf (\"chaine : '%s' %s a palindrome\\n\", chaine, pal ? \"is\" : \"is not\");\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/recursive_palindrome\nchaine : 'radar' is a palindrome\n\n$ ./bin/recursive_palindrome amanaplanacanalpanama\nchaine : 'amanaplanacanalpanama' is a palindrome\n\n$ ./bin/recursive_palindrome catfish\nchaine : 'catfish' is not a palindrome\n</code></pre>\n\n<p>(for the curious, it is <em>\"a man a plan a canal panama\"</em>)</p>\n"}], "owner": {"reputation": 3, "user_id": 8617129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60353ecb6e261051697f24f7a04252e?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/8617129/theo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1441, "favorite_count": 1, "accepted_answer_id": 46558568, "answer_count": 4, "score": 0, "last_activity_date": 1507100697, "creation_date": 1507098794, "last_edit_date": 1507100697, "question_id": 46558406, "link": "https://stackoverflow.com/questions/46558406/c-recursive-function-palindrome", "title": "C recursive function palindrome", "body": "<p>I'm trying to do a recursive function with C to check if a word is a palindrome or not (read in both ways).</p>\n\n<p>It's the first time I use this kind of function, but I have a problem, I don't know why it doesn't work, if you could help me, there's my code, thanks :</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt;\n\nint palindrome(char c[100],int i, int j)\n{\n    if (j == i)\n    {\n        return 1;\n    }\n\n    // Si le premier et le dernier caract\u00e8re\n    // sont les m\u00eames alors, on peut commencer les tests\n    if(c[i] == c[j])\n    {\n        // On fais les tests pour chaque caract\u00e8re de la chaine\n        return palindrome(c, i++, j--);\n    } else {\n        return 0;\n    }\n\n    return 0;\n}\n\nint main(void)\n{\n    char chaine[100] = \"radar\";\n    int pal;\n\n    pal = palindrome(chaine, 0, strlen(chaine)); // Returns : 0 -&gt; False / 1 -&gt; True\n    printf(\"%d\", pal);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "avr", "usart", "progmem"], "comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1507098833, "post_id": 46558391, "comment_id": 80070571, "body": "Store your array in flash (PROGMEM) and rewrite your SendString function to <code>void USART_SendString(const char *str)</code>. Btw, <code>static char</code> doesn&#39;t mean it will be in flash."}, {"owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1507099022, "post_id": 46558391, "comment_id": 80070654, "body": "@tilz0R i tried that also but it says that i have to make the array <code>const</code>.which i cant because prior sending data over usart i am storing my sensor data in that array.making it const i wont be able to add values to that array."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1507100091, "post_id": 46558391, "comment_id": 80071202, "body": "&quot;1kb of Sram&quot; and then  &quot;static char raw_data[15361];&quot;. Your array is 15 times larger than your available RAM. Does this seem correct to you?"}, {"owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507100619, "post_id": 46558391, "comment_id": 80071465, "body": "@Lundin that&#39;s why i am using static keyword to store it in flash memory instead of RAM,that i have verified it by debugging the code."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1507101754, "post_id": 46558391, "comment_id": 80072121, "body": "@pranjal khanduri I afraid you do not understand meaning of the word static. All data is always stored in the flash but then copied to the RAM unless you instructed the compiler &amp; startup code to do not. AVR have separate address spaces for the code and data, and to access the data in the flash special machine code instructions are needed."}, {"owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1507102519, "post_id": 46558391, "comment_id": 80072520, "body": "@PeterJ_01 can you please guide me where i can find these instructions."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1507103398, "post_id": 46558391, "comment_id": 80073008, "body": "&lt;avr/pgmspace.h&gt; and keyword PROGMEM or using named address spaces which is more natural."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 0, "creation_date": 1507107533, "post_id": 46559127, "comment_id": 80075266, "body": "if i make my <code>raw_data[]</code> as <code>const</code> i am not able to modify or write anything to it.hence i wont be store anything to it. Moreover <code>PROGMEM</code> do not have any write operation."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 3, "creation_date": 1507107653, "post_id": 46559127, "comment_id": 80075344, "body": "of course not. But there is no way to have 15k  bytes in the RAM on the device which has 1k. There are no miracles. You need to store only part of it in the RAM or change the device to something more modern."}, {"owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 0, "creation_date": 1507108033, "post_id": 46559127, "comment_id": 80075589, "body": "so there is no way  to save data  in my flash (15k or less than that) ,and later on sending it over usart (reading byte by byte from Flash Memory)at run time.and repeating this process again and again."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 0, "creation_date": 1507108201, "post_id": 46559127, "comment_id": 80075694, "body": "but you want to write it. I do not understand you. If you want to send constant data known during the compilation it is possible, Otherwise not. Remember as well that you only have 16k of the FLASH and not too much is left for your program itself."}, {"owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 0, "creation_date": 1507108753, "post_id": 46559127, "comment_id": 80076045, "body": "My data is not constant it is coming from sensor(accelerometer sensor readings).which is getting stored in <code>Raw_data[]</code> array.As i am having 16k flash so i decided to fill it upto 15k(can be modified) and later send it byte by byte over usart.so that it wont load the whole array into the RAM.this is what i am trying to achieve."}, {"owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 0, "creation_date": 1507111835, "post_id": 46559127, "comment_id": 80077952, "body": "so can me suggest me any other hardware or the points that i should look for while selecting hardware for my this task."}, {"owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "reply_to_user": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 0, "creation_date": 1507113813, "post_id": 46559127, "comment_id": 80079171, "body": "@pranjalkhanduri: You could use external memory to store your sensor data. Then read and send it in smaller blocks like 100 byte or so."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "edited": false, "score": 0, "creation_date": 1507115754, "post_id": 46559127, "comment_id": 80080348, "body": "@Rev1.0 using the external memory for this kind of micro is an overkill. for the same price as avr he will get a proper cortex with enough resources"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 2, "creation_date": 1507116240, "post_id": 46559127, "comment_id": 80080629, "body": "@pranjalkhanduri Why do you need a buffer size of <b>15kb</b>??? That&#39;s enormous. Most likely your specification does not make the slightest sense and that&#39;s the root of all your problems."}, {"owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "edited": false, "score": 0, "creation_date": 1507121776, "post_id": 46559127, "comment_id": 80084407, "body": "@PeterJ_01: I was not suggesting a SRAM extension, maybe you thought that. Something simple like SPI NAND flash would be totally sufficient to put the data somewhere. I don&#39;t think he requires fast access."}, {"owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507122152, "post_id": 46559127, "comment_id": 80084683, "body": "@Lundin my sensor has a FIFO buffer of 1024 bytes i am reading it and storing it in <code>raw_data[]</code> array.i planned it to read 15 times making 15360 bytes store it in flash and then send byte by byte over usart.idea was to store as much as data i can in one go."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "edited": false, "score": 1, "creation_date": 1507122508, "post_id": 46559127, "comment_id": 80084935, "body": "@pranjalkhanduri &quot;idea was to store as much as data i can in one go&quot; This doesn&#39;t make any sense. If your MCU doesn&#39;t do anything with the data, but just forwards it, there is no apparent need to allocate a buffer. The bottleneck in this system is most likely the UART tx, so reading data faster than what the UART is capable of sending won&#39;t give any benefits."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1507101535, "creation_date": 1507101535, "answer_id": 46559127, "question_id": 46558391, "link": "https://stackoverflow.com/questions/46558391/sending-big-array-over-usart/46559127#46559127", "title": "Sending big array over usart", "body": "<p>static does not mean PROGMEM. You need to place &amp; access them in/from the flash memory. From gcc 4.8 you can use named address spaces</p>\n\n<pre><code> const __flash char raw_data[15361];\n</code></pre>\n\n<p>and</p>\n\n<pre><code> void USART_SendString(const __flash char *str)  \n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 6412780, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh6.googleusercontent.com/-eLrCVxfUdb0/AAAAAAAAAAI/AAAAAAAATbw/RU1GPhfyEn4/photo.jpg?sz=128", "display_name": "pranjal khanduri", "link": "https://stackoverflow.com/users/6412780/pranjal-khanduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 968, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1507101535, "creation_date": 1507098736, "question_id": 46558391, "link": "https://stackoverflow.com/questions/46558391/sending-big-array-over-usart", "title": "Sending big array over usart", "body": "<p>i am working with AVR controller atmega16 having 16kb of flash and 1kb of Sram.i have stored data in an static array i.e <code>static char raw_data[15361];</code>and trying to send it over usart using following function:</p>\n\n<pre><code>void USART_TxChar(  char data)                      /* Data transmitting function */\n{\n    UDR = data;                                     /* Write data to be transmitting in UDR */\n    while (!(UCSRA &amp; (1&lt;&lt;UDRE)));                   /* Wait until data transmit and buffer get empty */\n}\n\nvoid USART_SendString(  char *str)                  /* Send string of USART data function */ \n{\n    int i=0;                                                                    \n    while (str[i]!=0)\n    {\n        USART_TxChar(str[i]);                       /* Send each char of string till the NULL */\n        i++;\n    }\n} \n</code></pre>\n\n<p>my issue is when ever i put my array in usart it is showing memory full.   <code>USART_SendString(raw_data);</code>.i searched online and find out that my function is loading all of the array to RAM hence leading to an error.i found there is a way though which you can send data stored in flash over usart using <code>PROGMEM attribute</code> but it works only for <code>const string type</code>.\nso how should i send my data stored in flash memory over usart without leading to memory full error??</p>\n"}, {"tags": ["sql", "c", "proc"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1507109519, "post_id": 46557960, "comment_id": 80076552, "body": "You have not found a bug in <code>libpthread.so</code> nor in <code>pthread_mutex_lock()</code>.  Your program almost certainly corrupts memory through something like buffer overflow, freeing memory more than once, or modifying already-freed memory,"}, {"owner": {"reputation": 1, "user_id": 8718116, "user_type": "registered", "profile_image": "https://graph.facebook.com/1824641157564496/picture?type=large", "display_name": "Ganesh Karthikeyan", "link": "https://stackoverflow.com/users/8718116/ganesh-karthikeyan"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1507110913, "post_id": 46557960, "comment_id": 80077401, "body": "To Add: The above mentioned embedded SQL is in a separate user defined function, during 1st function call, the SQL is executing is well and good and during the 2nd function call the crash is occurring and that too very rare scenario this crash is occurring.                                                                               the Program is running in x86_64 linux architecture and 11g Oracle DB"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507125467, "post_id": 46557960, "comment_id": 80087110, "body": "post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.   posting an unrelated single line of the source code or posting the &#39;select&#39; statement (which is also unrelated to the problem)  does not convey enough information for anyone to pinpoint the problem source."}], "owner": {"reputation": 1, "user_id": 8718116, "user_type": "registered", "profile_image": "https://graph.facebook.com/1824641157564496/picture?type=large", "display_name": "Ganesh Karthikeyan", "link": "https://stackoverflow.com/users/8718116/ganesh-karthikeyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507107464, "creation_date": 1507096876, "last_edit_date": 1507107464, "question_id": 46557960, "link": "https://stackoverflow.com/questions/46557960/sigsegv-crash-on-pthread-mutex-lock", "title": "SIGSEGV - Crash on pthread_mutex_lock ()", "body": "<p>i am currently executing a Pro*c code, where the pro*c shared library called from the parent program. </p>\n\n<p>On certain scenario the shared library is crashing upon executing an embedded SQL statement. </p>\n\n<p>I tried to debug the crash using the GDB command and found out it crashing when <code>Pthread_mutex_lock()</code> from <code>/lib/libpthread.so.0</code>. </p>\n\n<p>I am not sure how to fix or the solution any help will be much appreciated.</p>\n\n<p>Below is the error</p>\n\n<blockquote>\n  <p>7124    in imo4020.c\n  (gdb) c\n  Continuing.</p>\n  \n  <p>Program received signal SIGSEGV, Segmentation fault.\n  0xf629a31d in pthread_mutex_lock () from /lib/libpthread.so.0\n  (gdb)</p>\n</blockquote>\n\n<pre><code> EXEC SQL\n       SELECT COUNT(*)\n       INTO   :WSS_COUNT\n       FROM   &lt;Table_Name&gt;\n       WHERE  &lt;Column1&gt;             = :&lt;Column1_HostVariable&gt;            AND\n              &lt;Column2&gt;          = :&lt;Column2_HostVariable&gt;         AND\n              &lt;Column3&gt;   = :&lt;Column3_HostVariable&gt;                    AND\n              &lt;Column4&gt;         = :&lt;Column4_HostVariable&gt;          AND\n             &lt;Column5&gt;             = :&lt;Column5_HostVariable&gt;;\n</code></pre>\n"}, {"tags": ["c", "output"], "comments": [{"owner": {"reputation": 739, "user_id": 8281970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abHXs.jpg?s=128&g=1", "display_name": "Ketan Mukadam", "link": "https://stackoverflow.com/users/8281970/ketan-mukadam"}, "edited": false, "score": 0, "creation_date": 1507096459, "post_id": 46557847, "comment_id": 80069557, "body": "It is good practice to zero-out any memory that you intend to use. The <code>msg[]</code> in your case, try <code>msg[17] = {0};</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": true, "score": 4, "last_activity_date": 1507096395, "creation_date": 1507096395, "answer_id": 46557876, "question_id": 46557847, "link": "https://stackoverflow.com/questions/46557847/did-not-came-expected-output-in-terminal-in-c/46557876#46557876", "title": "did not came expected output in terminal in c", "body": "<p>If you are attempting to save 17-characters long string, then your variable to save it must have 18 character for trailing zero char which indicates end of string.</p>\n\n<pre><code>char msg[17];\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>char msg[18];\n</code></pre>\n\n<p>Later, while you read, function does not deal with strings, meaning you need to <em>close</em> your string manually:</p>\n\n<pre><code>read(pip[0] , msg , 17);\nmsg[17] = 0; //Close your string here\nprintf(\"%s\\n\", msg);\n</code></pre>\n\n<p>You might want to learn more about <a href=\"https://www.tutorialspoint.com/cprogramming/c_strings.htm\" rel=\"nofollow noreferrer\">strings in C</a>.</p>\n"}], "owner": {"reputation": 99, "user_id": 8143594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/529d7c27bac81c8b35457ad56d82a445?s=128&d=identicon&r=PG&f=1", "display_name": "supun rajasinghe", "link": "https://stackoverflow.com/users/8143594/supun-rajasinghe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 46557876, "answer_count": 1, "score": 1, "last_activity_date": 1507096420, "creation_date": 1507096246, "last_edit_date": 1507096420, "question_id": 46557847, "link": "https://stackoverflow.com/questions/46557847/did-not-came-expected-output-in-terminal-in-c", "title": "did not came expected output in terminal in c", "body": "<p>i'm trying to create simple programme in c using pipe() and fork() functions. programme works correctly but output has extra four characters when it prints. please help me.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\n    int pip[2];\n    pid_t pid;\n    int ret;\n    char msg[17];\n\n    ret = pipe(pip);    \n\n    if(ret == -1) {\n        perror(\"pipe\");\n        exit(1);\n    }\n\n    pid = fork();\n\n    if(pid&gt;0) {\n        write(pip[1] , \"Hello from parent\" , 17);\n    }\n    else {\n        read(pip[0] , msg , 17);\n        printf(\"%s\\n\", msg);\n    }\n}\n</code></pre>\n\n<p>terminal output is</p>\n\n<blockquote>\n  <p>Hello from parent-/X\ufffd</p>\n</blockquote>\n\n<p>when it runs change the last four characters. but i did not enter than characters. please help me.</p>\n"}, {"tags": ["c", "c-strings"], "comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 3, "creation_date": 1507095885, "post_id": 46557761, "comment_id": 80069356, "body": "<code>malloc</code> does not return you valid string, If you for loop where you are adding spaces, you are missing ending zero. Add <code>res[m] = 0;</code> after for loop."}, {"owner": {"reputation": 112081, "user_id": 2231815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1597c347e309f696ff1738128444702b?s=128&d=identicon&r=PG", "display_name": "rakib_", "link": "https://stackoverflow.com/users/2231815/rakib"}, "edited": false, "score": 0, "creation_date": 1507096057, "post_id": 46557761, "comment_id": 80069421, "body": "Make sure the allocated memory location is zeroed i.e. use <code>bzero()</code>, this might also help you get away from unwanted characters."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "reply_to_user": {"reputation": 112081, "user_id": 2231815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1597c347e309f696ff1738128444702b?s=128&d=identicon&r=PG", "display_name": "rakib_", "link": "https://stackoverflow.com/users/2231815/rakib"}, "edited": false, "score": 1, "creation_date": 1507096623, "post_id": 46557761, "comment_id": 80069596, "body": "@rakib_ <code>bzero()</code> is depricated."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1507096628, "post_id": 46557761, "comment_id": 80069598, "body": "Or simply call <code>calloc</code> instead of <code>malloc</code>."}, {"owner": {"reputation": 101, "user_id": 6890735, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/13982685ca77eeb79ad00024cafaf423?s=128&d=identicon&r=PG&f=1", "display_name": "Sam K9", "link": "https://stackoverflow.com/users/6890735/sam-k9"}, "edited": false, "score": 0, "creation_date": 1507096874, "post_id": 46557761, "comment_id": 80069696, "body": "adding res[m] = 0 after in the loop worked. Thanks."}, {"owner": {"reputation": 112081, "user_id": 2231815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1597c347e309f696ff1738128444702b?s=128&d=identicon&r=PG", "display_name": "rakib_", "link": "https://stackoverflow.com/users/2231815/rakib"}, "reply_to_user": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1507097136, "post_id": 46557761, "comment_id": 80069803, "body": "@babon - personally I like <code>bzero</code>. It tells what it does."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507125795, "post_id": 46557761, "comment_id": 80087353, "body": "when posting a question about a runtime problem, as this question is, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507125965, "post_id": 46557761, "comment_id": 80087473, "body": "for ease of readability and understanding: 1) consistently indent the code.  indent after every opening brace &#39;{&#39;.  unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces.  2) separate code blocks (for, if, else, while, do...while, switch, case, default) via a single blank line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507126091, "post_id": 46557761, "comment_id": 80087546, "body": "regarding: <code>char* res = malloc(length * sizeof(char));</code>  1) the expression: <code>sizeof(char)</code> is defined in the C standard as 1. multiplying anything by 1 has absolutely no effect and just clutters the code, making it more difficult to understand, debug, etc.  Suggest removing that expression.  2) Always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507126485, "post_id": 46557761, "comment_id": 80087848, "body": "regarding these two statements: <code>char* strs[10] = {&quot;One&quot;, &quot;Two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;, &quot;six&quot;, &quot;seven&quot;, &quot;eight&quot;, &quot;nine&quot;, &quot;ten&quot;}; printf(&quot;%s&quot;, longestConsec(strs, 10, 2));</code>  1) don&#39;t use &#39;magic&#39; numbers in the code, they make the code very inflexible and the code much more difficult to understand, debug, etc. Suggest using an <code>enum</code> statement to give those &#39;magic&#39; numbers meaningful names, then use those meaningful names throughout the code.  (cont)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507126500, "post_id": 46557761, "comment_id": 80087861, "body": "(cont) 2) let the compiler do the work.  Suggest: `char* strs[] = {&quot;One&quot;, &quot;Two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;, &quot;six&quot;, &quot;seven&quot;, &quot;eight&quot;, &quot;nine&quot;, &quot;ten&quot;}; printf(&quot;%s&quot;, longestConsec(strs, sizeof(strs)/sizeof(strs[0]), 2));"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507126595, "post_id": 46557761, "comment_id": 80087932, "body": "The posted code is missing the necessary <code>#include</code> statements.  Are you expecting use to guess as to which header files you actually used?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507126922, "post_id": 46557761, "comment_id": 80088191, "body": "the posted code contains a memory leak because the pointer returned from <code>malloc()</code> is not being passed to <code>free()</code>.   Do not leave &#39;cleanup&#39; to the OS.  Such sloppy habits will burn you, especially when you are programming embedded code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507127289, "post_id": 46557761, "comment_id": 80088515, "body": "variable and parameter names should indicate <code>content</code> or <code>usage</code>  (or better, both).  parameter names like <code>n</code> and <code>k</code> are meaningless even in the current context."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507127506, "post_id": 46557761, "comment_id": 80088685, "body": "regarding: <code>for(; i &lt; n &amp;&amp; j &lt; k; i++, j++)</code>   the variable <code>k</code> contains 2 so this will accumulate ONLY the lengths of the first 2 entries from the <code>strs[]</code> array.   Probably not what you want."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507127637, "post_id": 46557761, "comment_id": 80088795, "body": "regarding: <code>for(; m &lt; length; m++)     {         res[m] = &#39; &#39;;     }</code> suggest removing this code block.  It is not helping and calling <code>calloc()</code> rather than <code>malloc()</code> would do the same job."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507127816, "post_id": 46557761, "comment_id": 80088926, "body": "the function: <code>strlen()</code> returns the index to the NUL byte in the array of characters.  indexes start at 0, so to use this returned value as a parameter to <code>malloc()</code>, need to add 1 to allow for the NUL terminator byte."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507128285, "post_id": 46557761, "comment_id": 80089273, "body": "note: the pair <code>seven</code> <code>eight</code>  is longer than the pair <code>three</code> <code>four</code>  so the overall logic is not correct."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507129103, "post_id": 46557761, "comment_id": 80089847, "body": "since the call to <code>malloc()</code> did not allocate enough characters to allow room for the trailing NUL byte, the loop that is calling <code>strcat()</code> is writing past the end of the allocated memory block.  This results in undefined behavior and can lead to a seg fault event."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1507129393, "creation_date": 1507129393, "answer_id": 46568151, "question_id": 46557761, "link": "https://stackoverflow.com/questions/46557761/unwanted-characters-when-printing-a-c-string/46568151#46568151", "title": "Unwanted characters when printing a C string", "body": "<p>the problem with the leading 'unexpected' characters is because the call to <code>strcat()</code> begins placing characters WHERE it encounters a NUL byte.</p>\n\n<p>That could be anywhere,in memory (I.E. undefined behavior with out setting the NUL byte in the code.)</p>\n\n<p>Rather than the loop that sets all the bytes in the allocated memory nor calling <code>calloc()</code>, a MUCH BETTER method would be to set the FIRST byte of the allocated memory to NUL  I.E.</p>\n\n<pre><code>res[0] = '\\0';\n</code></pre>\n\n<p>Then the following call(s) to <code>strcat()</code> will work correctly.</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1507131017, "last_edit_date": 1507131017, "creation_date": 1507130328, "answer_id": 46568464, "question_id": 46557761, "link": "https://stackoverflow.com/questions/46557761/unwanted-characters-when-printing-a-c-string/46568464#46568464", "title": "Unwanted characters when printing a C string", "body": "<p>Valgrind shows this quite straightforwardly:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==19471== Invalid read of size 1\n==19471==    at 0x4C2EAA4: strcat (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==19471==    by 0x108863: longestConsec (46557761.c:34)\n==19471==    by 0x10892A: main (46557761.c:45)\n==19471==  Address 0x51d5049 is 0 bytes after a block of size 9 alloc'd\n==19471==    at 0x4C2BBEF: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==19471==    by 0x108805: longestConsec (46557761.c:23)\n==19471==    by 0x10892A: main (46557761.c:45)\n</code></pre>\n\n<p>You have created an unterminated string with at least <code>length</code> characters in a block of size <code>length</code> you allocated.  Appending will necessarily overrun the buffer, simply while looking for the end of the existing string.</p>\n\n<p>Instead of writing <code>length</code> spaces, you should write a single NUL character, to form an empty string.</p>\n\n<p>BTW, you should fix your compilation warnings (ensure you have at least <code>-Wall -Wextra</code> or equivalent).</p>\n\n<hr>\n\n<h2>Fixed code</h2>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar *longestConsec(const char *strarr[], unsigned int n, unsigned int k)\n{\n    unsigned int longest = 0;\n    unsigned int longestIndex = 0;\n\n    for (unsigned int i = 0;  i &lt; n;  ++i) {\n        unsigned int len = strlen(strarr[i]);\n        if (longest &lt; len) {\n            longestIndex = i;\n            longest = len;\n        }\n    }\n\n    unsigned int lastIndex = longestIndex + k;\n    if (lastIndex &gt; n) {\n        lastIndex = n;\n    }\n\n    unsigned int length = 0;\n    for (unsigned int i = longestIndex;  i &lt; lastIndex;  ++i) {\n        length += strlen(strarr[i]);\n    }\n    char *res = malloc(length + 1);\n    res[0] = '\\0';\n\n    for (unsigned int i = longestIndex;  i &lt; lastIndex;  ++i) {\n        strcat(res, strarr[i]);\n    }\n    return res;\n}\n\n\n#include &lt;stdio.h&gt;\nint main()\n{\n    char const *strs[10] = {\"One\", \"Two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\", \"nine\", \"ten\"};\n    char *longest = longestConsec(strs, 10, 2);\n    printf(\"%s\\n\", longest);\n    free(longest);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6890735, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/13982685ca77eeb79ad00024cafaf423?s=128&d=identicon&r=PG&f=1", "display_name": "Sam K9", "link": "https://stackoverflow.com/users/6890735/sam-k9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1507131017, "creation_date": 1507095754, "last_edit_date": 1507130005, "question_id": 46557761, "link": "https://stackoverflow.com/questions/46557761/unwanted-characters-when-printing-a-c-string", "title": "Unwanted characters when printing a C string", "body": "<p>For the most part my code below does what I want. The only issue is it is printing extra unwanted non-ASCII characters in front of the string.</p>\n\n<p>I tried printing the string inside the <code>longestConsec()</code> function and found that it already contains the unwanted characters so I know that the problem is in the function.</p>\n\n<p>Additionally, I tried looping through <code>res</code> (using the length that I assigned to it with <code>malloc()</code>) to set the characters to whitespace; this worked but I don't want leading and trailing whitespace and I don't want to write an algorithm to remove it if it's not necessary.</p>\n\n<p>If I did something to cause these unwanted characters to appear then I would prefer to fix that than to work around by setting everything to whitespace and then trimming it.</p>\n\n<p>Any help would be appreciated.</p>\n\n<h2>Output:</h2>\n\n<pre class=\"lang-none prettyprint-override\"><code>Expected Output:threefourthreefour\nOutput: \u00c9mthreefour\u00c9mthreefour\nOutput with white space replacement:          threefour         threefour\n</code></pre>\n\n<h2>Code:</h2>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar* longestConsec(char* strarr[], int n, int k)\n{\n    int i = 0;\n    int longest = 0;\n    int longestIndex = 0;\n    for(; i &lt; n; i++) {\n        if(longest &lt; strlen(strarr[i])) {\n            longestIndex = i;\n            longest = strlen(strarr[i]);\n        }\n    }\n    //printf(\"%d\", longestIndex);\n    int length = 0;\n    i = longestIndex;\n    int j = 0;\n    for(; i &lt; n &amp;&amp; j &lt; k; i++, j++) {\n        length += strlen(strarr[i]);\n    }\n    char* res = malloc(length * sizeof(char));\n    int m = 0;\n    for(; m &lt; length; m++) {\n        res[m] = ' ';\n    }\n\n    i = longestIndex;\n    j = 0;\n\n    //printf(\"%s\", res);\n    for(; i &lt; n &amp;&amp; j &lt; k; i++, j++) {\n        strcat(res, strarr[i]);\n    }\n    printf(\"%s\", res);\n    return res;\n}\n\n\n\nint main()\n{\n    char* strs[10] = {\"One\", \"Two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\", \"nine\", \"ten\"};\n    printf(\"%s\", longestConsec(strs, 10, 2));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1507097043, "post_id": 46557777, "comment_id": 80069769, "body": "&quot;<i>you never set <code>print_flag</code> back to <code>true</code> again</i>&quot; this is done by the signal handler."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1507099727, "post_id": 46557777, "comment_id": 80071019, "body": "@alk printing <code>print_flag</code> inside the loop shows <code>0</code> every time."}], "tags": [], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "is_accepted": false, "score": 0, "last_activity_date": 1507096176, "last_edit_date": 1507096176, "creation_date": 1507095874, "answer_id": 46557777, "question_id": 46557658, "link": "https://stackoverflow.com/questions/46557658/c-program-to-print-every-5-seconds-and-show-total-time-when-we-exit/46557777#46557777", "title": "C program to print every 5 seconds and show total time when we exit", "body": "<p>After you do <code>print_flag = false;</code> in the <code>for</code> loop, you never set <code>print_flag</code> back to <code>true</code> again. Hence, the code in the <code>if ( print_flag )</code> block is executed only once.</p>\n\n<blockquote>\n  <p>How to make it work?</p>\n</blockquote>\n\n<p>To make it work, you need to set <code>print_flag</code> to <code>true</code> before you check whether it is true.</p>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 975150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/738c8dc451296c17b46a97417336a786?s=128&d=identicon&r=PG", "display_name": "metl wolf", "link": "https://stackoverflow.com/users/975150/metl-wolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1507096457, "creation_date": 1507096457, "answer_id": 46557886, "question_id": 46557658, "link": "https://stackoverflow.com/questions/46557658/c-program-to-print-every-5-seconds-and-show-total-time-when-we-exit/46557886#46557886", "title": "C program to print every 5 seconds and show total time when we exit", "body": "<p>When you ask for input in this way, you are using synchronous blocking I/O.  The process hangs until input is given.  If you wish for your program to continue functioning while waiting for input you need to delve into asynchronous non-blocking I/O.  Look up the select() function</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Asynchronous_I/O\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Asynchronous_I/O</a></p>\n\n<p><a href=\"https://www.gnu.org/software/libc/manual/html_node/Waiting-for-I_002fO.html\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/libc/manual/html_node/Waiting-for-I_002fO.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 8717984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e43741e5b106deb54932c44f8af7070?s=128&d=identicon&r=PG&f=1", "display_name": "KDE", "link": "https://stackoverflow.com/users/8717984/kde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507097701, "creation_date": 1507095234, "last_edit_date": 1507097701, "question_id": 46557658, "link": "https://stackoverflow.com/questions/46557658/c-program-to-print-every-5-seconds-and-show-total-time-when-we-exit", "title": "C program to print every 5 seconds and show total time when we exit", "body": "<p>The program should print to the screen every 5 seconds and state \"alive at %d milliseconds\\n\".  When the user types in <code>&lt;Control&gt;&lt;A&gt;</code> for the polling program or <code>&lt;Control&gt;&lt;C&gt;</code> for the interrupt version, the program should stop and output:</p>\n\n<p><code>program terminated by user.   Total time is %d milliseconds %d seconds\\n</code>.</p>\n\n<p>My Program:</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;time.h&gt;\n\nvolatile sig_atomic_t print_flag = false;\n\nvoid handle_alarm( int sig ) {\n  print_flag = true;\n}\n\n\nint main() {\n    struct timeval start, stop;\n    double secs = 0;\n    char key_press;\n    char input_key;\n    int ascii_value;\n    float time_taken;\n    clock_t t;\n    t = clock();\n\n    gettimeofday(&amp;start, NULL);\n\n    signal( SIGALRM, handle_alarm );\n    alarm( 5 ); \n\n    for (;;) {\n\n\n      if ( print_flag ) {\n        print_flag = false;\n        alarm( 5 );\n        gettimeofday(&amp;stop, NULL);\n        secs = (double)(stop.tv_usec - start.tv_usec) / 1000000 + (double)(stop.tv_sec - start.tv_sec) * 1000;\n        printf(\"Alive at %f ms \\n\",secs);\n        input_key=getchar();\n        ascii_value=input_key;\n        if(ascii_value==1) {\n          t = clock() - t;\n          time_taken = ((float)t)/CLOCKS_PER_SEC; // in seconds\n          printf(\"total time taken= %f sec\", time_taken);\n          break;\n        }\n      }\n    }\n}\n</code></pre>\n\n<p>I want the program to run continuously but when I press ctrl a it should terminate. The program prints \"Alive at 5000.000 ms and stops printing. The program prints infinitely every 5 seconds if I don't add the code for terminating using ctrl A. How to make it work?</p>\n"}, {"tags": ["c", "pointers", "compound-literals"], "comments": [{"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507094723, "post_id": 46557537, "comment_id": 80068945, "body": "You can initialize it by: <code>int p[10];</code> and after set <code>p[1] = 1</code> (if you to coding cleanly)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507095779, "post_id": 46557537, "comment_id": 80069307, "body": "It is not a &quot;anonymous array element&quot; but a &quot;compound literal&quot; that happens to be an array. Let&#39;s ask otherwise: is there <i>any</i> way to use a <i>compound literal</i> like this without ever converting it to a pointer? No. The only question is the lifetime of the compound literal."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507098391, "post_id": 46557537, "comment_id": 80070373, "body": "&quot;Is it the correct way to initialize pointer?&quot; Depends on what you want to do with it. The code is 100% equivalent to <code>int arr[10] = {[1]=1}; int* p = arr;</code>. Either is perfectly fine if you want an array with local scope."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507095876, "post_id": 46557558, "comment_id": 80069348, "body": "Notice that that example is for file scope though, this initializer is in function scope, so it doesn&#39;t even have to have constant values..."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507097565, "post_id": 46557558, "comment_id": 80069974, "body": "@AnttiHaapala; Agreed. It is just for demonstration that it is mentioned in C standard."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 2, "last_activity_date": 1507094740, "creation_date": 1507094740, "answer_id": 46557558, "question_id": 46557537, "link": "https://stackoverflow.com/questions/46557537/initializing-a-pointer-to-compound-literals-in-c/46557558#46557558", "title": "Initializing a pointer to compound literals in C", "body": "<p>Yes, it is valid to have a pointer to compound literals. Standard allows this.   </p>\n\n<p>n1570-\u00a76.5.2.5 (p8):</p>\n\n<blockquote>\n  <p>EXAMPLE 1 The file scope definition  </p>\n\n<pre><code>int *p = (int []){2, 4};\n</code></pre>\n  \n  <p>initializes <code>p</code> to point to the first element of an array of two ints, the first having the value two and the second, four. The expressions in this compound literal are required to be constant. <em>The unnamed object\n  has static storage duration</em>.</p>\n</blockquote>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 1, "accepted_answer_id": 46557558, "answer_count": 1, "score": 1, "last_activity_date": 1507103685, "creation_date": 1507094611, "last_edit_date": 1507103685, "question_id": 46557537, "link": "https://stackoverflow.com/questions/46557537/initializing-a-pointer-to-compound-literals-in-c", "title": "Initializing a pointer to compound literals in C", "body": "<p>Here is one not-so-common way of initializing the pointer: </p>\n\n<pre><code>int *p = (int[10]){[1]=1};\n</code></pre>\n\n<p>Here, pointer point to compound literals.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n    int *p = (int[10]){[1]=1};\n    printf(\"%d\\n\", p[1]);\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>1\n</code></pre>\n\n<p>This program is compiled and run fine in G++ compiler.</p>\n\n<p>So, </p>\n\n<ul>\n<li><p>Is it the correct way to initializing a pointer to compound literals? or</p></li>\n<li><p>Is it undefined behaviour initialize pointer to compound literals?</p></li>\n</ul>\n"}, {"tags": ["c", "algorithm", "file", "file-io", "io"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507094197, "post_id": 46557370, "comment_id": 80068742, "body": "So the one-word-per-line version is the sample input and the one-line version is the desired output? What is the problem, what do want not to happen? Or what do you want to happen but does not? I.e. what is the question?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507094463, "post_id": 46557370, "comment_id": 80068848, "body": "If <code>if (strlen(line) &gt; 30)</code> is true on a <code>char line[30];</code> you are already in trouble, the exit then is too late."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507094563, "post_id": 46557370, "comment_id": 80068889, "body": "This migth be helpful: <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html</a>"}, {"owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507094966, "post_id": 46557370, "comment_id": 80069021, "body": "I want to the one word per line version as the output as it is already the input. The one line version is the bad output and the kind I have been getting recently"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1507095079, "post_id": 46557370, "comment_id": 80069056, "body": "Please clarify that inside your question."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507096017, "post_id": 46557370, "comment_id": 80069406, "body": "Did you compile with strict warnings, e.g. <code>gcc -Wall</code> at least?"}, {"owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507096090, "post_id": 46557370, "comment_id": 80069434, "body": "Yes, it compiles."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507096298, "post_id": 46557370, "comment_id": 80069511, "body": "With or without warnings?"}, {"owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507096954, "post_id": 46557370, "comment_id": 80069730, "body": "Yes with warnings"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507097058, "post_id": 46557370, "comment_id": 80069775, "body": "You should only post code which does not trigger warnings, execpet if you ask about exactly those warnings. This is because warnings are helpful and ignoring them may subtly cause the problem you ask about. (Not in this case, but as a principle.)"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507098415, "post_id": 46557370, "comment_id": 80070386, "body": "You do not want to delete every second line, do you? Then don&#39;t read anything you want to keep within <code>skip()</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507098530, "post_id": 46557370, "comment_id": 80070445, "body": "By the way, I cannot see anything infinitly looping..."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 0, "creation_date": 1507097538, "post_id": 46557751, "comment_id": 80069960, "body": "What does the star do?"}, {"owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 0, "creation_date": 1507097547, "post_id": 46557751, "comment_id": 80069964, "body": "The skip function must exist"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 0, "creation_date": 1507097584, "post_id": 46557751, "comment_id": 80069982, "body": "The star is explained in the second quote, did you read that?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 0, "creation_date": 1507097668, "post_id": 46557751, "comment_id": 80070023, "body": "The purpose of the skip function is achieved by the integer in the format string (mostly). If you insist on having a skip function, then do the ignoring of the rest of the line in that function."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 0, "creation_date": 1507098026, "post_id": 46557751, "comment_id": 80070177, "body": "Do you need the skip function to know and print the length? Does it have to exit?"}, {"owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 0, "creation_date": 1507098183, "post_id": 46557751, "comment_id": 80070265, "body": "See my answer above to see where I am trying to go with this. skip&#39;s only functionality right now is to skip. I need it to know length but it will only print up to what it can hold and it will not exit."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 0, "creation_date": 1507098620, "post_id": 46557751, "comment_id": 80070486, "body": "Knowing the length of what is beyond allowed length is not part of the original question. Please make a separate question of that detail."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 1, "last_activity_date": 1507098163, "last_edit_date": 1507098163, "creation_date": 1507095726, "answer_id": 46557751, "question_id": 46557370, "link": "https://stackoverflow.com/questions/46557370/odd-skip-function-error-when-running-is-double-loops/46557751#46557751", "title": "Odd &#39;skip&#39; function: error when running is double loops", "body": "<p>Have a look at\n<a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/io/fscanf</a></p>\n\n<p>This allows to only read as many characters as you want:</p>\n\n<blockquote>\n  <p>(optional) integer number (greater than zero) that specifies maximum\n  field width, that is, the maximum number of characters that the\n  function is allowed to consume when doing the conversion specified by\n  the current conversion specification. Note that %s and %[ may lead to\n  buffer overflow if the width is not provided.</p>\n</blockquote>\n\n<p>Then this allows you to read but not store the rest of a line:</p>\n\n<blockquote>\n  <p>(optional) assignment-suppressing character *. If this option is\n  present, the function does not assign the result of the conversion to\n  any receiving argument.</p>\n</blockquote>\n\n<p>Then this allows you to read (ignoring, see above) everything not a newline:</p>\n\n<blockquote>\n  <p>[set]  matches a non-empty sequence of character from set of\n  characters. If the first character of the set is ^, then all\n  characters not in the set are matched. If the set begins with ] or ^]\n  then the ] character is also included into the set. It is\n  implementation-defined whether the character - in the non-initial\n  position in the scanset may be indicating a range, as in [0-9]. If\n  width specifier is used, matches only up to width. Always stores a\n  null character in addition to the characters matched (so the <strong>argument\n  array must have room for at least width+1 characters</strong>)</p>\n</blockquote>\n\n<p>E.g. replace your loop with this<br>\n(note the deleted call of unneeded <code>skip()</code><br>\n and that I intentionelly only read up to four characters, to demonstrate the effect):</p>\n\n<pre><code>while (fscanf(stream, \"%4s%*[^\\n]\", line) != EOF) {\n    fprintf(stdout, \"%s\\n\", line);\n    count++;\n}\n</code></pre>\n\n<p>Make sure to read at least one character fewer than the size of the array you store the result in, because of the part I highlighted (bold).</p>\n\n<p>Output:</p>\n\n<pre><code>dog\ndog\ncow\nmilk\nhors\nshoe\nrat\nmoos\nmilk\nboat\ngoat\n11\n</code></pre>\n\n<p>If you need a <code>skip()</code> being used, you can define it as:</p>\n\n<pre><code>void skip(FILE *stream)\n{\n    fscanf(stream, \"%*[^\\n]\");\n}\n</code></pre>\n\n<p>and call like:</p>\n\n<pre><code>while (fscanf(stream, \"%4s\", line) != EOF) {\n    fprintf(stdout, \"%s\\n\", line);\n    skip(stream);\n    count++;\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 46557751, "answer_count": 1, "score": 0, "last_activity_date": 1507099958, "creation_date": 1507093493, "last_edit_date": 1507099958, "question_id": 46557370, "link": "https://stackoverflow.com/questions/46557370/odd-skip-function-error-when-running-is-double-loops", "title": "Odd &#39;skip&#39; function: error when running is double loops", "body": "<p>I am tasked with creating a function that does nothing but skip a line at the newline character and also it discards the rest of a line beyond the character array capacity.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid skip(FILE *stream)\n{\n    char line[30];\n    //while (fscanf(stream, \"%*[^\\n]\")) {}\n    while(fscanf(stream, \"%s\", line)) {\n        if (strlen(line) &gt; 30) {\n            printf(\"invalid, str length: %lu\", strlen(line));\n            exit(0);\n        }\n    }\n    printf(\"\\n\");\n}\n\nint main(int argc, char *argv[])\n{\n    FILE *stream;\n    char line[30];\n    int count = 0;\n    stream = fopen(argv[1], \"r\");\n    while (fscanf(stream, \"%s\", line) != EOF) {\n        fprintf(stdout, \"%s\", line);\n        skip(stream);\n        count++;\n    }\n    printf(\"%d\", count);\n    fclose(stream);\n    return 0;\n}\n</code></pre>\n\n<p>Running the program, it has a command line argument where it takes a file as an option, which refers to the input file, e.g. input.txt like this:</p>\n\n<pre><code>dog\ndog\ncow\nmilk\nhorse\nshoe\nrat\nmoose\nmilk\nboat\ngoat\n</code></pre>\n\n<p>My current output is:</p>\n\n<pre><code>dog dog cow milk horse shoe rat moose milk boat goat\n</code></pre>\n\n<p>I want to the one word per line version as the output, like the input, as long as no lines are too long. The one line version is the bad output and the kind I have been getting recently.</p>\n\n<p>I know this is probably such a typical question and I am able to print it with newline in a normal program but inside this function given the circumstances, it is a pretty odd thing.</p>\n"}, {"tags": ["java", "c", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 713, "user_id": 7347751, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-kOvIV_rCrfc/AAAAAAAAAAI/AAAAAAAAABw/-pjFnvYch8A/photo.jpg?sz=128", "display_name": "David Mordigal", "link": "https://stackoverflow.com/users/7347751/david-mordigal"}, "edited": false, "score": 0, "creation_date": 1507133800, "post_id": 46558138, "comment_id": 80092926, "body": "Wow, that\u2019s a huge time difference! Thanks for the info, I\u2019ll be sure to check it out."}], "tags": [], "owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "is_accepted": false, "score": 0, "last_activity_date": 1582233072, "last_edit_date": 1582233072, "creation_date": 1507097738, "answer_id": 46558138, "question_id": 46557345, "link": "https://stackoverflow.com/questions/46557345/using-java-runtime-and-process-classes-to-execute-c-code-vs-using-native-interfa/46558138#46558138", "title": "Using Java Runtime and Process classes to execute C code vs using native interface", "body": "<p>I suggest to start here:</p>\n\n<p><a href=\"http://jnicookbook.owsiak.org/recipe-No-001/\" rel=\"nofollow noreferrer\">http://jnicookbook.owsiak.org/recipe-No-001/</a></p>\n\n<p>You will get the feeling of how to deal with JNI. I start with simple things and then, I move towards more complex topics - you will probably face most of them while dealing with JNI.</p>\n\n<p>I suggest to start with simple Hello World - just to make sure, you have working env.</p>\n\n<p>And, when it comes to performance. I would suggest following test. Try to run \"Hello world\" as standalone process and then, via JNI and compare results :)</p>\n\n<p>Most preferably, run it for a longer time ;)</p>\n\n<p>Just to give you dirty, ugly, bold, estimate. Lets say you want to print \"Hello world!\" using JNI vs. Process builder - 1000 times.</p>\n\n<pre><code>JNI: 4ms\nProcess: 3275ms\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>If you want to make some tests just do following</p>\n\n<pre><code>git clone https://github.com/mkowsiak/jnicookbook.git\ncd jnicookbook/recipes/recipeNo033\nmake\nmake test\n</code></pre>\n\n<p>Have fun with JNI!</p>\n"}], "owner": {"reputation": 713, "user_id": 7347751, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-kOvIV_rCrfc/AAAAAAAAAAI/AAAAAAAAABw/-pjFnvYch8A/photo.jpg?sz=128", "display_name": "David Mordigal", "link": "https://stackoverflow.com/users/7347751/david-mordigal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1582233072, "creation_date": 1507093315, "question_id": 46557345, "link": "https://stackoverflow.com/questions/46557345/using-java-runtime-and-process-classes-to-execute-c-code-vs-using-native-interfa", "title": "Using Java Runtime and Process classes to execute C code vs using native interface", "body": "<p>I\u2019m considering using C to do some of the backend processing for my application, at least for a learning experience if nothing else. </p>\n\n<p>Normally what I\u2019d do is write a C program as a stand-alone shell command, and use <code>Process.exec</code> to run it and get results back.</p>\n\n<p>But the thought of overhead came to mind. How much overhead would it create to invoke a shell process every single time one of these C programs needs to be called? Is it better to use the JNI for performance improvements?</p>\n\n<p>The application would be hosted on a server and would have to deal with numerous simultaneous requests, so my gut feeling is that JNI is the more efficient way. But I don\u2019t know enough about this area yet, so some guidance on how it would impact performance would be helpful. </p>\n"}, {"tags": ["c", "arrays", "dev-c++"], "comments": [{"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507092348, "post_id": 46557173, "comment_id": 80068183, "body": "First, why do you want to print <code>num</code> if you don&#39;t set it before ?"}, {"owner": {"reputation": 3419, "user_id": 2225030, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VMt47.jpg?s=128&g=1", "display_name": "Harshil Doshi", "link": "https://stackoverflow.com/users/2225030/harshil-doshi"}, "edited": false, "score": 0, "creation_date": 1507092719, "post_id": 46557173, "comment_id": 80068280, "body": "I am not getting any errors. Which compiler are you using?"}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 1, "creation_date": 1507092831, "post_id": 46557173, "comment_id": 80068313, "body": "@YaatSuka thats not the issue. my program was actually differnt. to understand where i was going wrong i was simplifying it"}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "reply_to_user": {"reputation": 3419, "user_id": 2225030, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VMt47.jpg?s=128&g=1", "display_name": "Harshil Doshi", "link": "https://stackoverflow.com/users/2225030/harshil-doshi"}, "edited": false, "score": 0, "creation_date": 1507092854, "post_id": 46557173, "comment_id": 80068322, "body": "@Harshil Dev C++"}, {"owner": {"reputation": 327, "user_id": 3971390, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ANnWz.jpg?s=128&g=1", "display_name": "eppineda", "link": "https://stackoverflow.com/users/3971390/eppineda"}, "edited": false, "score": 1, "creation_date": 1507092912, "post_id": 46557173, "comment_id": 80068338, "body": "It compiles fine for me on Mac."}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "reply_to_user": {"reputation": 327, "user_id": 3971390, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ANnWz.jpg?s=128&g=1", "display_name": "eppineda", "link": "https://stackoverflow.com/users/3971390/eppineda"}, "edited": false, "score": 0, "creation_date": 1507092948, "post_id": 46557173, "comment_id": 80068342, "body": "@EnriquePineda so is it some problem with the compiler?"}, {"owner": {"reputation": 327, "user_id": 3971390, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ANnWz.jpg?s=128&g=1", "display_name": "eppineda", "link": "https://stackoverflow.com/users/3971390/eppineda"}, "edited": false, "score": 0, "creation_date": 1507093089, "post_id": 46557173, "comment_id": 80068384, "body": "@Soc hard to say from here. I saw in your earlier comment that you simplified the code for posting. Is the simplified code still generating the error?"}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "reply_to_user": {"reputation": 327, "user_id": 3971390, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ANnWz.jpg?s=128&g=1", "display_name": "eppineda", "link": "https://stackoverflow.com/users/3971390/eppineda"}, "edited": false, "score": 0, "creation_date": 1507093129, "post_id": 46557173, "comment_id": 80068401, "body": "@EnriquePineda the code in the question is the simplified one and yeah its showing the mentioned error"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507093234, "post_id": 46557173, "comment_id": 80068428, "body": "<code>void displayNumbers(int,char num[2][2]);</code> --&gt; <code>void displayNumbers(int a,char (*num)[a]);</code> ?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1507093857, "post_id": 46557173, "comment_id": 80068619, "body": "You get the error because you&#39;re using the <b>C++</b> compiler to compile a <b>C</b> program."}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507093973, "post_id": 46557173, "comment_id": 80068666, "body": "@AnttiHaapala Isn&#39;t C a subset of C++? I have always used C++ compilers for C programs but didn&#39;t know that"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1507094246, "post_id": 46557173, "comment_id": 80068764, "body": "@Soc <b>C</b> isn&#39;t a subset of <b>C++</b>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1507094848, "post_id": 46557173, "comment_id": 80068986, "body": "C is not a subset of C++.  The two languages share history and a common subset, but each has features that the other lacks.  Furthermore, there exist simple constructs that are valid in both languages but have different meaning in each.  It is therefore foolish to compile C code with a C++ compiler, unless it has been intentionally written with that in mind."}], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507094726, "post_id": 46557450, "comment_id": 80068948, "body": "Well, i had tried your code, still produces errors, it says &#39;a&#39; and &#39;num&#39; was not declared in this scope. I don&#39;t know why this error is coming. your code looks fine. Probably its some problem with the compiler"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507094875, "post_id": 46557450, "comment_id": 80068990, "body": "Wow. (if you copy and paste it and use a C-compiler that supports the VLA extension, I guarantee it will work -- without warning or error) How and what are you using to compile it? On gcc, use <code>gcc -Wall -Wextra -pedantic -Ofast -o dispnum dispnum.c</code> or for VS use <code>cl.exe &#47;Wall &#47;Ox &#47;Fedispnum &#47;Tcdispnum.c</code>. I&#39;ll have to lookup the <code>clang</code> string if you need it."}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507094987, "post_id": 46557450, "comment_id": 80069026, "body": "i am using Dev C++, that is the problem i guess."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 1, "creation_date": 1507095095, "post_id": 46557450, "comment_id": 80069061, "body": "I think you are right, are you on windows or Linux? (you can download the free VS community with the command line compiler if you are) If you are on Linux, then <code>gcc</code> should be installed. I&#39;ll look at Dev C++ and see if I can find something out for you."}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507095175, "post_id": 46557450, "comment_id": 80069091, "body": "Thanks a lot. I am on windows"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507095261, "post_id": 46557450, "comment_id": 80069119, "body": "C89 and C++ do not support VLAs (Variable Length Arrays). For C11 they are optional. @Soc"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1507095372, "post_id": 46557450, "comment_id": 80069155, "body": "The website says it can be downloaded with <code>TDM-GCC 4.9.2</code> which is plain old <code>gcc</code> <a href=\"http://orwelldevcpp.blogspot.com/\" rel=\"nofollow noreferrer\"><b>Dev-C++ Blog</b></a>. There is something strange about what you are doing to compile it. You may have <code>std=c89</code> set which does not itself have VLA extensions. I really, really recommend just opening <code>cmd.exe</code> (making sure the path to the compiler is set in your <code>path</code> variable) and just using the command line to learn how to build small programs. Many times an IDE can hide things from you that will give you fits."}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507095520, "post_id": 46557450, "comment_id": 80069205, "body": "@DavidC.Rankin okay"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507095562, "post_id": 46557450, "comment_id": 80069223, "body": "@Soc, if you do have <code>TDM-GCC</code> installed, then you can simply open <code>cmd.exe</code> and use <code>gcc -Wall -Wextra -pedantic -std=gnu11 -o dispnum dispnum.c</code> It&#39;s not a bad compiler."}, {"owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507095714, "post_id": 46557450, "comment_id": 80069278, "body": "@DavidC.Rankin i have tdm-gcc 4.9.2 on dev c++"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1507095974, "post_id": 46557450, "comment_id": 80069389, "body": "Then the best thing you can do for learning C (or any language) is forget the IDE for now, and just use <code>cmd.exe</code> to learn what compiler options you need. An IDE has reams of dialogs that set compiler options and many are not-so-obvious. Learning from the command line hides nothing from you and will give you a firm foundation on how the compiler actually works (you can then tell the IDE what you want it to do, instead of <i>hoping</i> it is doing the right thing). Just make sure <code>gcc.exe</code> is in your path (it&#39;s probably in something like <code>&#47;program files&#47;DevC++&#47;MinGW&#47;bin)</code>. Good luck."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "edited": false, "score": 0, "creation_date": 1507096652, "post_id": 46557450, "comment_id": 80069607, "body": "@Soc, I updated the answer to show a compile on Windows 7 with TDM-GCC 4.9.2. See under <b>Example Compile and Use on TDM-GCC 4.9.2</b>. Good luck. You will get it all figured out shortly and it will become 2nd nature. (It&#39;s just a pain the first time <code>:)</code> As an editor, look at <a href=\"https://github.com/geany/geany/\" rel=\"nofollow noreferrer\"><b>geany</b></a>"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 2, "last_activity_date": 1507096565, "last_edit_date": 1507096565, "creation_date": 1507094045, "answer_id": 46557450, "question_id": 46557173, "link": "https://stackoverflow.com/questions/46557173/error-cannot-convert-chara-to-char2-i-dont-understand-why-there/46557450#46557450", "title": "Error: Cannot convert &#39;char(*)[a]&#39; to &#39;char(*)[2]&#39;. I don&#39;t understand why there&#39;s an error", "body": "<p>You have three primary problems.</p>\n\n<p>First the declaration of <code>displayNumber</code> hard-codes <code>num[2][2]</code> defeating the purpose of using a <em>Variable Length Array</em> (the <em>variable</em> part of the name is at issue). While <code>num[2][2]</code> is valid, it is better written as <code>num[a][a]</code>, or best <code>(num*)[a]</code> (a pointer to an array of char [a])</p>\n\n<p>Next, <code>num</code> is completely uninitialized. What do you expect to print? Attempt to read an uninitialized value invokes <em>Undefined Behavior</em>.</p>\n\n<p>Last, your format string in <code>printf (\"%c\\n\", a + num[1][1]);</code> is suspect. The function name is <code>displayNumber</code>, yet you are attempting to print a <em>character</em>. Further, if the value is below <code>' '</code> (space, e.g. 0x20, 32), nothing will print, you would be in the <em>Non-Printiable</em> range. If you want to print the number, use the <code>\"%d\"</code> <em>format specifier</em>.</p>\n\n<p>Putting it altogether, you could do something similar to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid displayNumbers (int a, char (*num)[a]);\n\nint main (void) {\n\n    int a=2;\n    char num[a][a];\n\n    for (int i = 0; i &lt; a; i++)\n        for (int j = 0; j &lt; a; j++)\n            num[i][j] = i + j;\n\n    displayNumbers (a, num);\n\n    return 0;\n}\n\nvoid displayNumbers (int a, char (*num)[a])\n{\n    printf (\"%d\\n\", a + num[1][1]);\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/dispnum\n4\n</code></pre>\n\n<p>Look things over and let me know if you have further questions.</p>\n\n<hr>\n\n<p><strong>Example Compile and Use on TDM-GCC 4.9.2</strong></p>\n\n<p>I have TDM-GCC 4.9.2 on a Win7 box. It works fine. Here is the version, compile and run on Windows 7:</p>\n\n<pre><code>C:\\Users\\david\\Documents\\dev\\src-c\\tmp&gt;gcc --version\ngcc (tdm-1) 4.9.2\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nC:\\Users\\david\\Documents\\dev\\src-c\\tmp&gt;gcc -Wall -Wextra -pedantic -Ofast -std=gnu11 -o bin\\dispnum dispnum.c\n\nC:\\Users\\david\\Documents\\dev\\src-c\\tmp&gt;bin\\dispnum\n4\n</code></pre>\n\n<p>(I left the full directory and path information as an example that you can compile from anywhere as long as <code>gcc.exe</code> is in your path)</p>\n"}], "owner": {"reputation": 220, "user_id": 2170138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea2298f5112433bc668e050ad7b5e293?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham", "link": "https://stackoverflow.com/users/2170138/shubham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 46557450, "answer_count": 1, "score": -1, "last_activity_date": 1507096565, "creation_date": 1507092216, "last_edit_date": 1507095358, "question_id": 46557173, "link": "https://stackoverflow.com/questions/46557173/error-cannot-convert-chara-to-char2-i-dont-understand-why-there", "title": "Error: Cannot convert &#39;char(*)[a]&#39; to &#39;char(*)[2]&#39;. I don&#39;t understand why there&#39;s an error", "body": "<p>In the code below if instead of <code>a</code> I use a number it works fine. But if i use <code>a</code> it gives the following error:</p>\n\n<p><code>Cannot convert 'char(*)[a]' to 'char(*)[2]' for argument '2' to 'void displayNumbers(int, char(*)[2])'</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid displayNumbers(int,char num[2][2]);\nint main()\n{\n    int a=2;\n    char num[a][a];// if i write 2 instead of a, it works fine!\n    displayNumbers(a,num);\n    return 0;\n}\n\nvoid displayNumbers(int a,char num[2][2])\n{\n    printf(\"%c\\n\",a+ num[1][1]);\n}\n</code></pre>\n\n<p>Why does using <code>a</code> or <code>2</code> make a difference here? I have a feeling the reason may be trivial but it would be really great if someone helps. The IDE i am using is Dev C++.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1507092268, "post_id": 46557148, "comment_id": 80068157, "body": "What have you tried so far? What problems did you encounter? Show your efforts. SO is not a service for doing your homework."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 3, "creation_date": 1507092300, "post_id": 46557148, "comment_id": 80068167, "body": "Define best. A simple for-loop would get the job done."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1507095986, "post_id": 46557148, "comment_id": 80069394, "body": "If you call a function which is returning int variable, then call the function, don&#39;t pass the pointer to it."}], "answers": [{"tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": true, "score": 0, "last_activity_date": 1507096130, "creation_date": 1507096130, "answer_id": 46557823, "question_id": 46557148, "link": "https://stackoverflow.com/questions/46557148/warning-format-d-expects-type-int-but-argument-2-has-type-int-int/46557823#46557823", "title": "warning: format \u2018%d\u2019 expects type \u2018int\u2019, but argument 2 has type \u2018int (*)(int *, int *, int)\u2019", "body": "<p>Problem is in calling <code>printf</code> function as the warning already said.</p>\n\n<pre><code>printf(\"Inner product is: %d\\n\", inner_product);\nprintf(\"Inner product reverse is: %d\\n\", inner_product_reverse);\n</code></pre>\n\n<p><code>inner_product</code> and <code>inner_product_reverse</code> are functions which return int and accepts 3 parameters: <code>int (*)(int *, int *, int)</code>.</p>\n\n<p>Now to get int result, call these 2 functions. What you did is that you passed pointer (location) of them to printf function and this is wrong.</p>\n\n<p>You should rewrite your code to something similar to:</p>\n\n<pre><code>//                               Parameters are added and function will be called\nprintf(\"Inner product is: %d\\n\", inner_product(a, b, i));\nprintf(\"Inner product reverse is: %d\\n\", inner_product_reverse(a, b, i));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8717754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e592029894d14ca4731ab807cc2dab4?s=128&d=identicon&r=PG&f=1", "display_name": "J. Henderson", "link": "https://stackoverflow.com/users/8717754/j-henderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 46557823, "answer_count": 1, "score": -4, "last_activity_date": 1507096130, "creation_date": 1507092081, "last_edit_date": 1507094634, "question_id": 46557148, "link": "https://stackoverflow.com/questions/46557148/warning-format-d-expects-type-int-but-argument-2-has-type-int-int", "title": "warning: format \u2018%d\u2019 expects type \u2018int\u2019, but argument 2 has type \u2018int (*)(int *, int *, int)\u2019", "body": "<p>So I'm new to SO and my question was not well recived...so I edited it to be more informative.</p>\n\n<p>I'm trying to write a program that calls two functions in the main program. This is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N 10\n\nint inner_product(int a[], int b[], int n);\nint inner_product_reverse(int a[], int b[], int n);\n\nint main(void) {\nint a[N], b[N], i;\n\nprintf(\"Enter the first array of size 10: \");\nfor (i = 0; i &lt; N; i++)\n    scanf(\"%d\", &amp;a[i]);\n\nprintf(\"Enter the second array of size 10: \");\nfor (i = 0; i &lt; N; i++)\n    scanf(\"%d\", &amp;b[i]);\n\nprintf(\"Inner product is: %d\\n\", inner_product);\nprintf(\"Inner product reverse is: %d\\n\", inner_product_reverse);\nreturn 0;\n}\n\nint inner_product(int a[], int b[], int n) {\nint sum = 0, i;\nfor (i = 0; i &lt; N; i++)\n    sum += (a[i] * b[i]);\nreturn sum;\n}\n\nint inner_product_reverse(int a[], int b[], int n) {\nint sum = 0, i;\nfor (i = 0; i &lt; N; i++)\n    sum += (a[i] * b[(N-1)-i]);\nreturn sum;\n</code></pre>\n\n<p>But I get the error in the title. I know that it's an issue of the difference in number of arguments called but I'm not sure how to write it in a way that will take into account all of the arguments of the functions. \nWould I have to move the for loop that computes the inner product into the main somehow? Thanks.</p>\n"}, {"tags": ["c", "cygwin"], "comments": [{"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1507119378, "post_id": 46557145, "comment_id": 80082653, "body": "Cygwin is fine if you comply with licensing terms requiring you to furnish source code."}], "answers": [{"comments": [{"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1507107281, "post_id": 46559447, "comment_id": 80075122, "body": "Thanks I did not know WSL is also an option, MinGW I think don&#39;t have sockets, does it?"}, {"owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "reply_to_user": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1507110386, "post_id": 46559447, "comment_id": 80077094, "body": "So I understand. I guess the downside of using MinGW to avoid some of the Cygwin bloat is that you get to re-implement some of the Cygwin bloat. The Windows sockets API is almost a direct replacement for Berkley sockets in most applications, apart from having more Windows-y data types and naming. So on the face of it, I would not expect it to be hugely difficult to translate the Linux app&#39;s use of sockets to Windows sockets. But it&#39;s easy to say that when I&#39;m not going to be the one who has to do it ;)"}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1507119681, "post_id": 46559447, "comment_id": 80082886, "body": "In my experience, wsl scripts are more subject to out of memory conditions than cygwin.  It may be worth a try if your customers can accept the more time consuming updates."}, {"owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "reply_to_user": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1507122078, "post_id": 46559447, "comment_id": 80084627, "body": "@tim18. That&#39;s interesting -- do you have any idea why that might be? Maybe it&#39;s just that the Cygwin maintainers have had so much longer to fix all their memory-related bugs?"}], "tags": [], "owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "is_accepted": true, "score": 1, "last_activity_date": 1507103077, "last_edit_date": 1507103077, "creation_date": 1507102652, "answer_id": 46559447, "question_id": 46557145, "link": "https://stackoverflow.com/questions/46557145/is-it-fine-to-use-linux-code-compiled-on-cygwin-for-production-in-windows/46559447#46559447", "title": "Is it fine to use linux code compiled on cygwin for production in windows?", "body": "<p>I've used Cygwin a fair bit, and have found it mostly unproblematic. I am aware of some of the reported problems, but haven't experienced them myself. Some things on Cygwin are <em>much</em> slower than the same code on Linux -- I notice this most with directory scans, but that probably isn't the only thing. People complain about <code>fork()</code> being slow, but that isn't really a surprise, as 'forking' isn't a native concept in Windows. If you're just using <code>fork()</code> to launch subprocesses, then conceivably the whole fork/exec thing could selectively be replaced with calls to native Windows APIs.</p>\n\n<p>A potential limitation of Cygwin is that it requires Cygwin at run-time or, at least, a chunk of Cygwin infrastructure. MinGW might remove this restriction, but at the cost of leaving you to make a larger number of compatibility-related changes in your code (file locations, for example). The last time I looked, MinGW didn't have tooling as extensive as Cygwin, either, but it's probably good enough for many purposes. </p>\n\n<p>I guess another possibility to consider these days is the Windows Subsystem for Linux (WSL) on Windows 10. I've found that code that builds for Cygwin usually builds and runs without changes on WSL, but I haven't really figured out what the relative advantages and disadvantages of Cygwin and WSL are.</p>\n\n<p>I've not noticed problems with pthreads in Cygwin, MinGW, or WSL; although I guess any problems are likely to depend on the exact way you use threads. I can't comment on the no-wait socket issue, because that isn't something I've tried.</p>\n\n<p>Incidentally, both Cygwin and MinGW will allow you to call native Windows API, and other functions in DLLs, if you need to. So the possibility exists to create a sort of \"hybrid\" application that uses POSIX-type functions and also Win32 APIs. This might be useful if it turns out that some things are much faster with Win32 functionality. I'm not sure this is possible with WSL.</p>\n"}, {"tags": [], "owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "is_accepted": false, "score": 1, "last_activity_date": 1507144857, "creation_date": 1507144857, "answer_id": 46572609, "question_id": 46557145, "link": "https://stackoverflow.com/questions/46557145/is-it-fine-to-use-linux-code-compiled-on-cygwin-for-production-in-windows/46572609#46572609", "title": "Is it fine to use linux code compiled on cygwin for production in windows?", "body": "<p>I should say that my comment about time consuming updates refers as much to the need to perform a full Windows update as well as apt-get updates prior to running a wsl \nscript which will go past midnight.  Running a separate memory recovery script every 4 hours or so is a partial solution.   I have \"only \" 6GB RAM.</p>\n"}], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 46559447, "answer_count": 2, "score": 0, "last_activity_date": 1507144857, "creation_date": 1507092074, "question_id": 46557145, "link": "https://stackoverflow.com/questions/46557145/is-it-fine-to-use-linux-code-compiled-on-cygwin-for-production-in-windows", "title": "Is it fine to use linux code compiled on cygwin for production in windows?", "body": "<p>I have a working module on linux and one of the client wants it on windows.\nThere is very good discussion on similar topic here(<a href=\"https://ask.slashdot.org/story/04/08/12/1932246/cygwin-in-a-production-environment\" rel=\"nofollow noreferrer\">https://ask.slashdot.org/story/04/08/12/1932246/cygwin-in-a-production-environment</a>), I guess it leaning towards avoiding cygwin for productions but its about 13 years older discussion,there might have been issues but in about 13 years I hope cygwin might have been improved,matured and good for production use.</p>\n\n<p>The code compiled just fine and seems to work ok under cygwin so its very tempting to take it forward rather than redoing it in windows native code.\nBut if there are really any unsolvable known issues and people are avoiding it for productions I would like to know.\nThe code heavily uses pthreads,sockets in no-wait</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1507088080, "post_id": 46556591, "comment_id": 80067065, "body": "Hint: Did input <code>123123</code> include an &lt;enter&gt; key?"}, {"owner": {"reputation": 179, "user_id": 8617622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd6de65e9b258771f6c0e525f76666e?s=128&d=identicon&r=PG&f=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/8617622/lightweight"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507088720, "post_id": 46556591, "comment_id": 80067220, "body": "Dear @chux: No Enter key. I just input <code>123123</code> in &quot;Stdin Inputs...&quot; and pressed the &quot;Execute&quot; button."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1507088747, "post_id": 46556591, "comment_id": 80067230, "body": "The difference could be that one system terminates lines with just newline while the other terminates lines with CRLF (carriage return, line feed), which means that if there&#39;s one line of input, there might be a difference of one in the counts.  Sometimes the systems will map CRLF to just newline (and LF is also known as newline); sometimes they may not.  It depends on the underlying O/S, and on whether the standard input is treated as text or binary data.  You could try printing each character as it is read: <code>int c; while ((c = getchar()) != EOF) { printf(&quot;[%d]&quot;, c); nc++; } putchar(&#39;\\n&#39;);</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507090157, "post_id": 46556591, "comment_id": 80067559, "body": "@lightweight, it appears the <b>Execute</b> button is hiding something from you. When you press <b>Execute</b>, the input will be passed to your program as <code>&quot;123123\\n&quot;</code> where <code>&#39;\\n&#39;</code> being the POSIX line-end let&#39;s whatever know that it has received a line of input. So the comment about the <b>&lt;enter&gt;</b> key should be telling you that input required for the <i>remote</i> execution of your code on some machine over the internet is no different than it would be if you were compiling and running locally (which if you plan on learning to program, is something I would strongly suggest you do...)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1507091846, "post_id": 46556591, "comment_id": 80068040, "body": "this line: <code>while(getchar() != EOF)</code>  One of the characters that will be input is &#39;\\n&#39; (the newline) that you entered when you clicked the &#39;enter&#39; key.  TO get a good count, suggest: <code>int ch;  while( (ch = getchar()) != EOF &amp;&amp; &#39;\\n&#39; != ch )</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 0, "last_activity_date": 1507092069, "creation_date": 1507092069, "answer_id": 46557144, "question_id": 46556591, "link": "https://stackoverflow.com/questions/46556591/problems-with-a-character-counting-program-in-c-on-online-compilers/46557144#46557144", "title": "Problems with a character counting program in C on online compilers", "body": "<p>the following proposed code:</p>\n\n<ol>\n<li>corrects the problem discussed in the comments to the question.</li>\n</ol>\n\n<p>The differences between the two web pages is of no consequence to the problem seen by the OP.</p>\n\n<p>And now the proposed code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    int nc = 0;\n    int ch;  // the character input from stdin\n\n    while( (ch = getchar()) != EOF &amp;&amp; '\\n' != ch)\n        nc = nc + 1;\n\n    printf(\"%d\\n\", nc);\n}\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 8617622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd6de65e9b258771f6c0e525f76666e?s=128&d=identicon&r=PG&f=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/8617622/lightweight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 46557144, "answer_count": 1, "score": 0, "last_activity_date": 1507092069, "creation_date": 1507087980, "question_id": 46556591, "link": "https://stackoverflow.com/questions/46556591/problems-with-a-character-counting-program-in-c-on-online-compilers", "title": "Problems with a character counting program in C on online compilers", "body": "<p>I'm a newcomer to programming so please forgive me for my stupid questions. I ran the following code on <a href=\"https://repl.it/\" rel=\"nofollow noreferrer\">repl.it</a> and <a href=\"https://www.jdoodle.com/c-online-compiler\" rel=\"nofollow noreferrer\">JDoodle</a> respectively.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{   \n    int nc;\n    nc = 0;\n    while(getchar() != EOF)\n        nc = nc + 1;\n    printf(\"%d\\n\", nc);\n}\n</code></pre>\n\n<p>On <a href=\"https://www.jdoodle.com/c-online-compiler\" rel=\"nofollow noreferrer\">JDoodle</a>, the results are always x+1 where x is the number I expected. For example, if I input <code>123123</code>, the result is 7. Besides, if I leave the input empty, <a href=\"https://www.jdoodle.com/c-online-compiler\" rel=\"nofollow noreferrer\">JDoodle</a> tells me that <code>Your Program may have a endless loop</code>. Why these happen?</p>\n\n<p>On <a href=\"https://repl.it/\" rel=\"nofollow noreferrer\">repl.it</a>, after I type the input on the right side of the screen and press Enter, there is no response. However the input copying program</p>\n\n<pre><code>int c;\nc = getchar();\nwhile(c != EOF){\n    putchar(c);\n    c = getchar();\n}\n</code></pre>\n\n<p>works well on <a href=\"https://repl.it/\" rel=\"nofollow noreferrer\">repl.it</a>. Why the character counting program cannot work on <a href=\"https://repl.it/\" rel=\"nofollow noreferrer\">repl.it</a>? I will appreciate any help with these situations.</p>\n"}, {"tags": ["c", "types", "casting", "opencl", "type-conversion"], "comments": [{"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 1, "creation_date": 1507099127, "post_id": 46556471, "comment_id": 80070718, "body": "<a href=\"https://stackoverflow.com/questions/32952315/most-efficient-way-of-converting-byte-array-to-vector\" title=\"most efficient way of converting byte array to vector\">stackoverflow.com/questions/32952315/&hellip;</a>"}, {"owner": {"reputation": 1128, "user_id": 214864, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/26b1e3618513ce588bb30b8eeadc91d4?s=128&d=identicon&r=PG", "display_name": "kanna", "link": "https://stackoverflow.com/users/214864/kanna"}, "edited": false, "score": 0, "creation_date": 1508491910, "post_id": 46556471, "comment_id": 80639957, "body": "can&#39;t you use vload()?"}], "answers": [{"tags": [], "owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "is_accepted": false, "score": 2, "last_activity_date": 1507127882, "creation_date": 1507127882, "answer_id": 46567650, "question_id": 46556471, "link": "https://stackoverflow.com/questions/46556471/how-may-i-convert-cast-scalar-to-vector-and-vice-versa-in-opencl/46567650#46567650", "title": "How may I convert/cast scalar to vector (and vice versa) in OpenCL", "body": "<p>You've got 2 options:</p>\n\n<p><strong>1. Use a union. This is explicitly allowed as per section 6.2.4.1 in the OpenCL standard.</strong></p>\n\n<p>Something like:</p>\n\n<pre><code>union my_type\n{\n  char scalar[16];\n  char16 vector;\n};\n</code></pre>\n\n<p>The advantage of this is that the alignment will definitely be correct.</p>\n\n<p>The disadvantage is that indexing into variable length arrays with this is awkward.</p>\n\n<p>This makes it more practical for data stored in <code>__local</code> and <code>__private</code>, which is often fixed-size anyway.</p>\n\n<p><strong>2. You can cast between pointers to the scalar vs vector types.</strong></p>\n\n<p>The vector types are considered to be aggregate types with members of their scalar types, so such casts would even be allowed without the relaxation of the reinterpreting rules in OpenCL compared to C. (see 6.1.8, 6.2.5)</p>\n\n<p>This code:</p>\n\n<pre><code>char16 vec = (char16)(1, 2, 3, \u2026);\nchar* scalar = (char*)&amp;vec;\n</code></pre>\n\n<p>Is perfectly valid.</p>\n\n<p>Advantage: convenient.</p>\n\n<p>Disadvantage: easy to get wrong - especially with regard to forgetting the correct address space qualifier or not meeting implicit alignment requirements.</p>\n\n<p>Finally, you're presumably aware that you can access elements of the built-in vector types, e.g. using <code>vectr.s3</code> and similar? Often this allows you to just use the vector types throughout without the need for switching between vector and array types.</p>\n\n<p>(I'm referring to v1.2 of the standard.)</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8721940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a1be5d977eaed67d221004c8ea357e?s=128&d=identicon&r=PG&f=1", "display_name": "qpdb", "link": "https://stackoverflow.com/users/8721940/qpdb"}, "is_accepted": false, "score": 2, "last_activity_date": 1507821034, "creation_date": 1507821034, "answer_id": 46713096, "question_id": 46556471, "link": "https://stackoverflow.com/questions/46556471/how-may-i-convert-cast-scalar-to-vector-and-vice-versa-in-opencl/46713096#46713096", "title": "How may I convert/cast scalar to vector (and vice versa) in OpenCL", "body": "<p>There is also the <strong>3rd</strong> way: use built-in function(s) (actually, macro) <code>as_typen()</code> and <code>as_type()</code>.</p>\n"}], "owner": {"reputation": 2119, "user_id": 3230626, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fe50022a8a66d837e8b23f207704d9e7?s=128&d=identicon&r=PG", "display_name": "nikk", "link": "https://stackoverflow.com/users/3230626/nikk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507821034, "creation_date": 1507087087, "last_edit_date": 1507087667, "question_id": 46556471, "link": "https://stackoverflow.com/questions/46556471/how-may-i-convert-cast-scalar-to-vector-and-vice-versa-in-opencl", "title": "How may I convert/cast scalar to vector (and vice versa) in OpenCL", "body": "<p>How can I convert a 16-element scalar to a single vector in OpenCL?</p>\n\n<pre><code>char[16] scalar = .. .. .. ;\n\nchar16 vectr = scalar;         //do conversion/casting here. \n</code></pre>\n\n<p>I have this, </p>\n\n<pre><code>char16 vectr = (char16) (scalar[0], scalar[1], scalar[2] ... scalar[15]);\n</code></pre>\n\n<p>but there should be a more efficient way?</p>\n\n<p>And, how to better convert the vector back to scalar.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507085127, "post_id": 46556177, "comment_id": 80066390, "body": "What do you want to say by &quot;counting the numbers&quot; ?"}, {"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "edited": false, "score": 0, "creation_date": 1507085174, "post_id": 46556177, "comment_id": 80066400, "body": "Your while condition is wrong."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507085279, "post_id": 46556177, "comment_id": 80066418, "body": "You declare <code>occurrences</code>, don&#39;t set it, and use it after ??? There is no logic in your code"}, {"owner": {"reputation": 1037, "user_id": 6342463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/STRPB.jpg?s=128&g=1", "display_name": "Jabberwock", "link": "https://stackoverflow.com/users/6342463/jabberwock"}, "edited": false, "score": 1, "creation_date": 1507085592, "post_id": 46556177, "comment_id": 80066497, "body": "Half the variables you set you don&#39;t reference, half the variables you reference you don&#39;t set.  Throw this all out, think about what you want your program to do, break it down into reasonable pieces, and then code them up."}, {"owner": {"reputation": 25, "user_id": 8717464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d571d09d96219dd74b35eb2891c2d3e?s=128&d=identicon&r=PG&f=1", "display_name": "Mason Meyer", "link": "https://stackoverflow.com/users/8717464/mason-meyer"}, "reply_to_user": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507085674, "post_id": 46556177, "comment_id": 80066519, "body": "@YaatSuka by counting the numbers i meant counting the letters in a string, when i try to set occurrences to anything it gives me an error what should i be doing with occurrences?"}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507085811, "post_id": 46556177, "comment_id": 80066554, "body": "So you want to count letters in the string <code>Str[]</code> but you never use it ? Think about your code, what you want to do, complete your code to make it meaningful and then if you need help again, come back here."}], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 4201589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AKW9g.gif?s=128&g=1", "display_name": "Superman", "link": "https://stackoverflow.com/users/4201589/superman"}, "is_accepted": false, "score": 0, "last_activity_date": 1507087140, "creation_date": 1507087140, "answer_id": 46556476, "question_id": 46556177, "link": "https://stackoverflow.com/questions/46556177/counting-letters-in-a-sentence-and-displaying-a-for-each-letter/46556476#46556476", "title": "counting letters in a sentence and displaying a * for each letter", "body": "<p>Replace the while loop with a for loop that traverses the string till the end ('\\0').</p>\n\n<pre><code> for (char* ptr = Str; *ptr; ++ptr)\n</code></pre>\n\n<p>The array must be hold <code>26 * 2</code> elements if you need to consider case.\nIf not considering case <code>26</code> elements would suffice and you can ignore the <code>else if</code> condition below.</p>\n\n<p>Initialize the array to 0.</p>\n\n<pre><code>int occurrences[26*2] = {0};\n</code></pre>\n\n<p>Get the index to be incremented from the string inside the <code>for</code> loop.</p>\n\n<pre><code>if (*ptr &gt;= 'A' &amp;&amp; *ptr &lt;= 'Z') { index = *ptr - 'A'; }\nelse if (*ptr &gt;= 'a' &amp;&amp; *ptr &lt;= 'z') { index = *ptr - 'a' + 26; }\n</code></pre>\n\n<p>Then you increment the <code>occurrences</code> array at the calculated index.</p>\n\n<pre><code>++occurrences[index];\n</code></pre>\n\n<p>While printing the <code>*</code>, remember that the occurrences array holds the alphabet positions like so -</p>\n\n<pre><code>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "is_accepted": true, "score": -1, "last_activity_date": 1507087764, "creation_date": 1507087764, "answer_id": 46556558, "question_id": 46556177, "link": "https://stackoverflow.com/questions/46556177/counting-letters-in-a-sentence-and-displaying-a-for-each-letter/46556558#46556558", "title": "counting letters in a sentence and displaying a * for each letter", "body": "<p>Here's an example, it does it for all ASCII chars. Try to figure out how to do it only for the range you want.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n  char* string = \"TheQuickBrownFoxJumpedOverTheLazyDog\";\n  size_t len = strlen(string);\n  size_t occurences[128] = {0};\n  for (size_t i = 0; i &lt; len; ++i) {\n    ++occurences[string[i]];\n  }\n\n  for (unsigned char i = 0; i &lt; 128; ++i) {\n    printf(\"%c: \", i);\n    for (size_t j = 0; j &lt; occurences[i]; ++j) {\n      printf(\"%c\", '*');\n    }\n    printf(\"\\n\");\n  }\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8717464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d571d09d96219dd74b35eb2891c2d3e?s=128&d=identicon&r=PG&f=1", "display_name": "Mason Meyer", "link": "https://stackoverflow.com/users/8717464/mason-meyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 46556558, "answer_count": 2, "score": -1, "last_activity_date": 1507087764, "creation_date": 1507084851, "last_edit_date": 1507085850, "question_id": 46556177, "link": "https://stackoverflow.com/questions/46556177/counting-letters-in-a-sentence-and-displaying-a-for-each-letter", "title": "counting letters in a sentence and displaying a * for each letter", "body": "<p>I am having trouble with counting the number of letters in a string and displaying them in a graph like this  </p>\n\n<pre><code>a: ***  \nb: *  \nc: **  \netc... \n</code></pre>\n\n<p>I have a code that displays how long the whole string is in each letter on the graph. Here is what i have so far.   </p>\n\n<pre><code>int main(){\n    char Str[]=\"TheQuickBrownFoxJumpedOverTheLazyDog\";\n    int j, occurrences[26], Letter=97, index=0;\n    while(Letter&gt;96, Letter&lt;123){\n        printf(\"%c: \", Letter);\n        Letter++;\n    for(j=0; j&lt;=occurrences[index]; j++){\n        printf(\"*\");\n    }\n    printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>This is my output:  </p>\n\n<pre><code>a: *************************************  \nb: *************************************  \nc: *************************************  \nd: *************************************  \ne: *************************************  \nf: *************************************  \ng: *************************************  \nh: *************************************  \ni: *************************************  \nj: *************************************  \nk: *************************************  \nl: *************************************  \nm: *************************************  \nn: *************************************  \no: *************************************  \np: *************************************  \nq: *************************************  \nr: *************************************  \ns: *************************************  \nt: *************************************  \nu: *************************************  \nv: *************************************  \nw: *************************************  \nx: *************************************  \ny: *************************************  \nz: *************************************  \n</code></pre>\n\n<p>What can i do to fix this? I'm pretty lost as our instructor failed to help me figure this out. I've also looked around the website a bit and can find codes that count the characters but i cant figure out how to get it to then print the asterisks.</p>\n"}, {"tags": ["c", "mpi", "openmpi"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8716975, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459363794149666/picture?type=large", "display_name": "Adriano Marques Garcia", "link": "https://stackoverflow.com/users/8716975/adriano-marques-garcia"}, "edited": false, "score": 1, "creation_date": 1507081276, "post_id": 46555699, "comment_id": 80065603, "body": "That&#39;s it. I can&#39;t believe it was so obvious. Thank you."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "reply_to_user": {"reputation": 25, "user_id": 8716975, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459363794149666/picture?type=large", "display_name": "Adriano Marques Garcia", "link": "https://stackoverflow.com/users/8716975/adriano-marques-garcia"}, "edited": false, "score": 1, "creation_date": 1507081322, "post_id": 46555699, "comment_id": 80065615, "body": "you are welcome, everyone needs an extra pair of eyes once in a while"}], "tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 2, "last_activity_date": 1507080452, "creation_date": 1507080452, "answer_id": 46555699, "question_id": 46555545, "link": "https://stackoverflow.com/questions/46555545/mpi-waitany-is-not-waiting-some-processes/46555699#46555699", "title": "MPI_Waitany is not waiting some processes", "body": "<p>here is your loop on master</p>\n\n<pre><code>for(j=0;j&lt;num_Proc;j++){\n    MPI_Waitany(num_Proc, req, &amp;source, MPI_STATUS_IGNORE);\n    sum_local += sum_partial[j]; //Sum all results\n}\n</code></pre>\n\n<p>so at iteration <code>j</code> you wait for data from any task, but then you implicitly assumes data from task <code>j</code> was received (e.g. you access <code>sum_partial[j]</code>).</p>\n\n<p>you can either</p>\n\n<pre><code>for(j=0;j&lt;num_Proc;j++){\n    MPI_Wait(&amp;req[j], MPI_STATUS_IGNORE);\n    sum_local += sum_partial[j]; //Sum all results\n}\n</code></pre>\n\n<p>or more likely</p>\n\n<pre><code>for(j=0;j&lt;num_Proc;j++){\n    MPI_Waitany(num_Proc, req, &amp;source, MPI_STATUS_IGNORE);\n    sum_local += sum_partial[source]; //Sum all results\n}\n</code></pre>\n\n<p>just to be clear, you thought it did \"work\" with 4 tasks, but you were just lucky.</p>\n"}], "owner": {"reputation": 25, "user_id": 8716975, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459363794149666/picture?type=large", "display_name": "Adriano Marques Garcia", "link": "https://stackoverflow.com/users/8716975/adriano-marques-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 46555699, "answer_count": 1, "score": 0, "last_activity_date": 1507080452, "creation_date": 1507078863, "question_id": 46555545, "link": "https://stackoverflow.com/questions/46555545/mpi-waitany-is-not-waiting-some-processes", "title": "MPI_Waitany is not waiting some processes", "body": "<p>I am trying to use dynamic process creation with mpi but I am having problems to receive the response from child processes. I created a vector called sum_partial to store the result of each child. When I run with 4 processes (1 parent process + 3 children) this works ok. But when I run with more processes, sum_partial does not get the result of some children.</p>\n\n<p>I'm not sure if the problem is the MPI_Irecv or MPI_Waitany. I've tried other approaches using MPI_Wait, MPI_Waitall, MPI_Test. However, the problem repeats itself.</p>\n\n<p>Here is the MPI block of code I'm using in the parent process.</p>\n\n<pre><code>//Some code here...\n\nfor(j=0;j&lt;num_Proc;j++){\n    sprintf(argv[2], \"%llu\", vetIni[j+1]);\n    sprintf(argv[3], \"%llu\", vetEnd[j+1]);\n    MPI_Comm_spawn(bin, argv, 1, localInfo, 0, MPI_COMM_SELF, &amp;intercommChild[j], err);\n}\n\nlong long int sum_local=0, *sum_partial = calloc(num_Proc, sizeof(long long int));\n\nfor(j=0;j&lt;num_Proc;j++)\n    MPI_Irecv(&amp;sum_partial[j], 1, MPI_LONG, 0, 99, intercommChild[j], &amp;req[j]);\n\nlong long int ini = vetIni[0], end = vetEnd[0];\n\nfor(i=ini;i&lt;end;i++)\n    sum_local += i * (N-i); //Parent process do it's computation\n\nfor(j=0;j&lt;num_Proc;j++){\n    MPI_Waitany(num_Proc, req, &amp;source, MPI_STATUS_IGNORE);\n    sum_local += sum_partial[j]; //Sum all results\n}\n\nMPI_Finalize();\n</code></pre>\n\n<p>And here is the code that a child process runs.</p>\n\n<pre><code>//Some code here...\n\nlong long int ini = atol(argv[2]);\nlong long int end = atol(argv[3]);\nlong long int sum=0, i;\n\nfor(i=ini;i&lt;end;i++)\n    sum += i*(N-i);\n\nMPI_Send(&amp;sum, 1, MPI_LONG, 0, 99, intercommPai);\n\nMPI_Finalize();\n</code></pre>\n\n<p>If I print the sum_partial running with 7 child, it will be like:</p>\n\n<pre><code>-8393498447644280608\n4191132954560973024\n0\n0\n-3708736119148578592\n9184626552355719392\n-903258050952161056\n</code></pre>\n\n<p>These zeros are not supposed to be there. The other results are right.</p>\n\n<p>Can anyone identify what the problem is in my code?</p>\n\n<p>Thank You.</p>\n"}, {"tags": ["c", "for-loop", "while-loop", "iteration", "msp430"], "comments": [{"owner": {"reputation": 11, "user_id": 8717237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66a7e35f78c0d3ce32c6e0cda5a2dac?s=128&d=identicon&r=PG&f=1", "display_name": "Martian", "link": "https://stackoverflow.com/users/8717237/martian"}, "edited": false, "score": 0, "creation_date": 1507082178, "post_id": 46555533, "comment_id": 80065776, "body": "Thanks guys, I understand that the CPU load will be pretty much at 100% capacity due to ugly for-loops, but right now I&#39;m apparently terrible at transferring these for-loops into an interrupt block. Also I&#39;ve had some trouble even making the MSP430&#39;s clock change in value over a length of time. So for now I&#39;m just trying to hash out the logic needed to make this happen before I transfer into proper CPU coding."}], "answers": [{"tags": [], "owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "is_accepted": false, "score": 1, "last_activity_date": 1507081701, "creation_date": 1507081701, "answer_id": 46555838, "question_id": 46555533, "link": "https://stackoverflow.com/questions/46555533/c-code-slowing-down-while-loop-after-each-iteration/46555838#46555838", "title": "C code: Slowing down While loop after each iteration?", "body": "<p>You would need to keep a \"<em>global</em>\" ( outside of the <code>for</code> scope ) delay counter to keep track of the last button press, or the delay</p>\n\n<pre><code>int button1Pressed = 0; // \"global\" flag\nfor(;;) \n{\n    if((P1IN &amp; BIT3) != BIT3) // if button pressed\n    {\n        button1Pressed = 1;\n    }\n    if((P1IN &amp; BIT4) != BIT4) // hypothetical button 2 press\n    {\n        button1Pressed = 0;\n    }\n    int delay = 4000;\n    if(button1Pressed) \n    {\n        delay = 10000;\n    }\n    while(delay&gt;0) {\n        delay = delay - 1;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8717237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66a7e35f78c0d3ce32c6e0cda5a2dac?s=128&d=identicon&r=PG&f=1", "display_name": "Martian", "link": "https://stackoverflow.com/users/8717237/martian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1507108781, "creation_date": 1507078754, "last_edit_date": 1507108781, "question_id": 46555533, "link": "https://stackoverflow.com/questions/46555533/c-code-slowing-down-while-loop-after-each-iteration", "title": "C code: Slowing down While loop after each iteration?", "body": "<p>I'm currently working with the <a href=\"http://www.ti.com/product/msp430g2553\" rel=\"nofollow noreferrer\">MSP430G2553</a>, which is coded in C.<br>\nFor some reason I seem to be awful at coding basic <code>For</code> and <code>While</code> loops, and I can't figure out how to make a <code>While</code> loop take longer to complete after every iteration.</p>\n\n<p>Basically, I have an LED blinking at 100ms on startup.  </p>\n\n<p>When I hold a button, I want to make the LED blink slower and slower the longer I hold the button.  </p>\n\n<p>When I let go, the LED should keep its slowed-down blinking rate.</p>\n\n<p>Then, a second button will reset the LED blink-rate back to 100ms.</p>\n\n<p>Right now, I'm able to slow down the LED blinking when I hold the button, but it does not keep going slower. Honestly, I'm not sure how to go about doing this so I made an account here and posted.</p>\n\n<pre><code>for(;;) //loop forever\n{\n    if((P1IN &amp; BIT3)==BIT3) //if button is not pressed\n    {\n        i = 0;\n        a = 4000; //At 10000, 4 cycles per second, or 250ms delay. 4000 cycles = 100ms or 10Hz delay.\n        P1OUT ^= BIT0 + BIT6; //two LEDs\n        while(i &lt; a) //delays LED blinking until while-loop is complete.\n        {\n            i = i + 1;\n        }\n    }\n    else if((P1IN &amp; BIT3)!=BIT3) //if button is pressed\n    {\n        i = 0;\n        a = 10000;\n        P1OUT ^= BIT0 + BIT6;\n        while(i &lt; a) //delays LED blinking until while-loop is complete.\n        {\n            a = a + 2;\n            i = i + 1;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "algorithm", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1507078505, "post_id": 46555479, "comment_id": 80065040, "body": "To anyone who still thinks C++ is a superset of C, cast your eyes on this code and weep at your naivety."}, {"owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1507078684, "post_id": 46555479, "comment_id": 80065071, "body": "what are you saying? I am naive? I know I am that&#39;s why I&#39;m asking questions."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507078743, "post_id": 46555479, "comment_id": 80065082, "body": "<code>for (i = 1; i &lt;= row; i++)         {             grid[i - 1][c] = grid[i][c];</code> : When <code>i == row</code>, <code>grid[i][c]</code> occurs out-of-bounds error."}, {"owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "edited": false, "score": 0, "creation_date": 1507079188, "post_id": 46555479, "comment_id": 80065184, "body": "but why? at <code>i == row</code>, i should just be doing my swap. That swap then should be irrelevant because I end up taking the bottom and swapping that out for a temporary value that was set earlier"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1507092777, "post_id": 46555479, "comment_id": 80068293, "body": "regarding: <code>for (i = 1; i &lt;= row; i++)         {             grid[i - 1][c] = grid[i][c];         }</code>  the expression: <code>grid[i][c]</code> is accessing beyond the end of the row  This is undefined behavior.  Suggest re-thinking this logic"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1507092932, "post_id": 46555479, "comment_id": 80068341, "body": "when calling any of the <code>scanf()</code> family of functions: 1) always check the returned value (not the parameter values) to assure the operation was successful. 2) when using the &#39;%s&#39; input format specifier, always include a MAX CHARACTERS modifier that is one less than the length of the input buffer, because the function will append a NUL byte to the input"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1507093813, "creation_date": 1507093813, "answer_id": 46557425, "question_id": 46555479, "link": "https://stackoverflow.com/questions/46555479/array-indexing-error-in-multidimensional-column-shifting-pointers-being-used/46557425#46557425", "title": "Array Indexing Error in Multidimensional Column Shifting (pointers being used)", "body": "<p>in C, the range of indexes into an array are 0...number of entries in array-1. so this code block: </p>\n\n<pre><code>for (i = 1; i &lt;= row; i++) \n{ \n    grid[i - 1][c] = grid[i][c]; \n} \n</code></pre>\n\n<p>will (amongst other problems) be setting the <code>grid[i-1][c]</code> (when <code>i</code> is > <code>row-1</code>) from some unknown value located past the end of the array. That is undefined behavior and can lead to a seg fault event. </p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 1, "last_activity_date": 1507118798, "creation_date": 1507118798, "answer_id": 46564468, "question_id": 46555479, "link": "https://stackoverflow.com/questions/46555479/array-indexing-error-in-multidimensional-column-shifting-pointers-being-used/46564468#46564468", "title": "Array Indexing Error in Multidimensional Column Shifting (pointers being used)", "body": "<p>at this part</p>\n\n<pre><code>for (i = 1; i &lt;= row; i++)\n{\n    grid[i - 1][c] = grid[i][c];\n}\n</code></pre>\n\n<p>When <code>i == row</code>, <code>grid[i][c]</code> occurs out-of-bounds error.</p>\n\n<p>In C, the array index starts at <code>0</code>,<br>\nWhen there is an array like this </p>\n\n<pre><code>Type array[n];\n</code></pre>\n\n<p>the maximum index available is <code>n-1</code>.</p>\n\n<hr>\n\n<p>As an example,<br>\nyou can simplify the process by using a 1D array instead of a 2D array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n//When there is no strlwr\n#ifndef STRLWR\n#include &lt;ctype.h&gt;\nchar *strlwr(char *s){\n    for(char *p = s; *p; ++p)\n        *p = tolower((unsigned char)*p);\n    return s;\n}\n#endif\n\nstatic inline void clear_input_buff(void){\n    while(getchar() != '\\n');\n}\n\ntypedef enum {\n    QUIT, UP, DOWN, LEFT, RIGHT\n} Command;\n\nCommand getCommand(const char *prompt){\n    while(true){\n        char cmd[8] = \"\";\n        fputs(prompt, stdout);fflush(stdout);\n        scanf(\"%7s\", cmd);\n        strlwr(cmd);\n        if(!strcmp(cmd, \"quit\"))\n            return QUIT;\n        else if(!strcmp(cmd, \"up\"))\n            return UP;\n        else if(!strcmp(cmd, \"down\"))\n            return DOWN;\n        else if(!strcmp(cmd, \"left\"))\n            return LEFT;\n        else if(!strcmp(cmd, \"right\"))\n            return RIGHT;\n        printf(\n            \"invalid input for command\\n\"\n            \"input again\\n\"\n        );\n        clear_input_buff();\n    }\n}\n\nbool findUnit(int unit, int row, int col, int grid[], int *r, int *c){\n    for(*r = 0; *r &lt; row; ++*r)\n        for(*c = 0; *c &lt; col; ++*c)\n            if(*grid++ == unit)\n                return true;\n    return false;\n}\n\nvoid moveHelper(int n, int array[], Command dir, int distance){\n    int temp;\n    int last = (n-1) * distance;\n    if(dir == LEFT){\n        temp = array[0];\n        for(int i = distance; i &lt;= last; i += distance){\n            array[i - distance] = array[i];\n        }\n        array[last] = temp;\n    } else if(dir == RIGHT){\n        temp = array[last];\n        for(int i = last; i &gt; 0; i -= distance)\n            array[i] = array[i - distance];\n        array[0] = temp;\n    }\n}\n\nbool move(int unit, int row, int col, int grid[], Command cmd){\n    int r, c;\n    if(findUnit(unit, row, col, grid, &amp;r, &amp;c)){\n        switch(cmd){\n        case UP:\n        case DOWN:\n            cmd = (cmd == UP) ? LEFT : RIGHT;\n            moveHelper(row, &amp;grid[c      ], cmd, col);\n            break;\n        case LEFT:\n        case RIGHT:\n            moveHelper(col, &amp;grid[r * col], cmd,   1);//1: 1 element\n            break;\n        }\n        return true;\n    }\n    printf(\"Can't found [%d]. So you can't move.\\n\", unit);\n    return false;\n}\n\nbool run(int row, int col, int grid[]){\n    Command cmd;\n\n    while((cmd = getCommand(\"$: \")) != QUIT){\n        int unit = 0;\n        if(scanf(\"%d\", &amp;unit) != 1){//get operand as unit\n            printf(\"invalid input for unit.\\n\");\n            clear_input_buff();\n            continue;\n        }\n        return move(unit, row, col, grid, cmd);\n    }\n    return false;\n}\n\nvoid initializeGrid(int n, int grid[n]){\n    int value = 1;\n    while(n--)\n        *grid++ = value++;\n}\n\nvoid printGrid(int row, int col, int *grid, int width){\n    for (int i = 0; i &lt; row; i++){\n        for (int j = 0; j &lt; col; j++)\n            printf(\"[%*d]\", width, *grid++);\n        putchar('\\n');\n    }\n}\n\nstatic inline int width(int value){\n    return snprintf(NULL, 0, \"%d\", value);\n}\n\nint main(void){\n    int row = 4, col = 4;\n    int n = row * col;//number of elements\n    int grid[n];\n\n    initializeGrid(n, grid);\n\n    int w = width(grid[n-1]);//width of max value\n    printGrid(row, col, grid, w);\n\n    while(run(row, col, grid)){\n        printGrid(row, col, grid, w);\n    }\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Example of execution:</p>\n\n<pre><code>[ 1][ 2][ 3][ 4]\n[ 5][ 6][ 7][ 8]\n[ 9][10][11][12]\n[13][14][15][16]\n$: up 9\n[ 5][ 2][ 3][ 4]\n[ 9][ 6][ 7][ 8]\n[13][10][11][12]\n[ 1][14][15][16]\n$: right 11\n[ 5][ 2][ 3][ 4]\n[ 9][ 6][ 7][ 8]\n[12][13][10][11]\n[ 1][14][15][16]\n$: down 15\n[ 5][ 2][15][ 4]\n[ 9][ 6][ 3][ 8]\n[12][13][ 7][11]\n[ 1][14][10][16]\n$: left 15\n[ 2][15][ 4][ 5]\n[ 9][ 6][ 3][ 8]\n[12][13][ 7][11]\n[ 1][14][10][16]\n$: quit\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 8595085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee7e975ab053dc61bfe2b71679684adc?s=128&d=identicon&r=PG&f=1", "display_name": "compute", "link": "https://stackoverflow.com/users/8595085/compute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 46564468, "answer_count": 2, "score": -1, "last_activity_date": 1507118798, "creation_date": 1507078241, "last_edit_date": 1507081300, "question_id": 46555479, "link": "https://stackoverflow.com/questions/46555479/array-indexing-error-in-multidimensional-column-shifting-pointers-being-used", "title": "Array Indexing Error in Multidimensional Column Shifting (pointers being used)", "body": "<p>I have gotten some insight on how to deal with multidimensional array columns.</p>\n\n<p>Below is some compilable code that runs and performs okay for the most part.</p>\n\n<p>I want to use the very logic I am using right now, and it seems sound to me (as a novice at least), however I am getting very nasty output.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n</code></pre>\n\n<blockquote>\n  <p>Here I initialize an empty array which you will see later in main:</p>\n</blockquote>\n\n<pre><code>void initializeGrid(int row, int col, int grid[][col])\n{\n    int count = 1;\n    for (int i = 0; i &lt; row; i++)\n    {\n        for (int j = 0; j &lt; col; j++)\n        {\n            grid[i][j] = count;\n            count++;\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Here I print the initial case of the grid that will later be\n  manipulated. This should be reused:</p>\n</blockquote>\n\n<pre><code>void printGrid(int row, int col, int grid[][col])\n{\n        for (int i = 0; i &lt; row; i++)\n        {\n            for (int j = 0; j &lt; col; j++)\n            {\n                printf(\"%3d\", grid[i][j]);\n            }\n            printf(\"\\n\");\n        }\n}\n</code></pre>\n\n<blockquote>\n  <p>Here I get the location of a specific value by its row and its column\n  and I store it to the pointers r, and c:</p>\n</blockquote>\n\n<pre><code>bool findUnit(int unit, int row, int col, int grid[][col], int *r, int *c)\n{\n    for (int i = 0; i &lt; row; i++)\n    {\n        for (int j = 0; j &lt; col; j++)\n        {\n            if (grid[i][j] == unit)\n            {\n                *r = i;\n                *c = j;\n                return true;\n            }\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<blockquote>\n  <p>Here I shift up using very elementary array mechanics and I felt so\n  confident about it until seeing my output:</p>\n</blockquote>\n\n<pre><code>bool shiftUp(int unit, int row, int col, int grid[][col])\n{\n    int r = 0;\n    int c = 0;\n    if (findUnit(unit, row, col, grid, &amp;r, &amp;c))\n    {\n        int i;\n        int temp = grid[0][c];\n        for (i = 1; i &lt;= row; i++)\n        {\n            grid[i - 1][c] = grid[i][c];\n        }\n        grid[r][c] = temp;\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<blockquote>\n  <p>Here I run the shift up command or I quit. Assume that run can make\n  array move in other directions as well. It does not work for any\n  direction yet, but I assume if I can fix one, I can fix all:</p>\n</blockquote>\n\n<pre><code>bool run(char cmd[10], int row, int col, int grid[][col])\n{\n    int unit = 0;\n    printf(\"$: \");\n    scanf(\" %s %d\", cmd, &amp;unit);\n\n    if (strcmp(cmd, \"up\") == 0)\n    {\n        shiftUp(unit, row, col, grid);\n        return true;\n    }\n    if (strcmp(cmd, \"quit\") == 0)\n    {\n        return false;\n    }\n    return false;\n}\n</code></pre>\n\n<blockquote>\n  <p>Here I execute the code:</p>\n</blockquote>\n\n<pre><code>int main()\n{\n    int row = 4;\n    int col = 4;\n    int grid[row][col];\n    char cmd[32];\n\n    initializeGrid(row, col, grid);\n    printGrid(row, col, grid);\n\n    while (run(cmd, row, col, grid))\n    {\n        printGrid(row, col, grid);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This is all one file. Here also is the disturbing output I am getting and the expected output.</p>\n\n<pre><code>  1  2  3  4\n  5  6  7  8\n  9 10 11 12\n 13 14 15 16\n$: up 9\n  5  2  3  4\n  9  6  7  8\n  1 10 11 12\n1347447432 14 15 16\n$: quit\n\n^C\n</code></pre>\n\n<p>Notice even when I type quit it does not quit. </p>\n\n<p>Expected output should be something like (in a smaller grid i.e. 3x3):</p>\n\n<pre><code>1 2 3             1 5 3\n4 5 6 --(up 5)--&gt; 4 8 6\n7 8 9             7 2 9\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11, "user_id": 8402707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146f88be7db20484978443c625ab9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/8402707/matthew"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1507079031, "post_id": 46555453, "comment_id": 80065145, "body": "@xing thanks a lot! it worked now! but still 1 thing is that after I run and input 2 value of c1, c2. If i enter 1 to choose the first choice to see &quot;total capacitance&quot;, all result of other choices also appear on screen (not only the first choice appear as expected). It happens the same when I enter 2, it will show the result of second, third and even default."}, {"owner": {"reputation": 429, "user_id": 72141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10746ff7990a9d1caeaec31b64272af1?s=128&d=identicon&r=PG", "display_name": "Alex Michaud", "link": "https://stackoverflow.com/users/72141/alex-michaud"}, "edited": false, "score": 0, "creation_date": 1507079131, "post_id": 46555453, "comment_id": 80065170, "body": "@Matthew You&#39;ll want <code>break</code> statements, see my answer below"}, {"owner": {"reputation": 11, "user_id": 8402707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146f88be7db20484978443c625ab9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/8402707/matthew"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1507079575, "post_id": 46555453, "comment_id": 80065270, "body": "@xing and Alex many thanks! it worked perfectly now! i am just curious, what if i wanna keep the window open after running program first time and allow users to re-enter other values to run program again and again, and the window will only be closed when user enter specific key like &quot;close&quot;. Could you please help me with the code for that or just give me an idea i will do the search."}], "answers": [{"tags": [], "owner": {"reputation": 429, "user_id": 72141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10746ff7990a9d1caeaec31b64272af1?s=128&d=identicon&r=PG", "display_name": "Alex Michaud", "link": "https://stackoverflow.com/users/72141/alex-michaud"}, "is_accepted": true, "score": 0, "last_activity_date": 1507079080, "creation_date": 1507079080, "answer_id": 46555569, "question_id": 46555453, "link": "https://stackoverflow.com/questions/46555453/error-switch-case-programming-c-beginner/46555569#46555569", "title": "Error Switch-Case - Programming C - Beginner", "body": "<p>As @xing says in the comments, you'll want to use single quotes as in <code>case '1':</code> in your switch statement. In C, <code>1</code> is an integer literal and <code>'1'</code> is a character literal. The single quotes basically cause C to convert the character to its ASCII value, so that will match what you get back from <code>scanf</code> with <code>%c</code>. However, because chars in C are basically 1-byte integers, your compiler may not complain if you tell it (via the <code>case</code> statement) to compare a char and an integer.</p>\n\n<p>You'll probably also want a <code>break;</code> statement at the end of each <code>case</code>, to break out of the <code>switch</code> without executing the next <code>case</code>s.</p>\n"}], "owner": {"reputation": 11, "user_id": 8402707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146f88be7db20484978443c625ab9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/8402707/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 46555569, "answer_count": 1, "score": 0, "last_activity_date": 1507104237, "creation_date": 1507077987, "last_edit_date": 1507104237, "question_id": 46555453, "link": "https://stackoverflow.com/questions/46555453/error-switch-case-programming-c-beginner", "title": "Error Switch-Case - Programming C - Beginner", "body": "<p>I am in my 1st semester of College and having trouble to solve a computation in my class. Although I have done a lot of research and tried many ways, I still cannot get the correct result. I hope someone can help me out as this is my 1st time in Stackoverflow. I am using Code Block btw.</p>\n\n<p>Requirements:</p>\n\n<ol>\n<li><p>First, user is prompted to enter two capacitance values representing capacitors C1 and C2. </p></li>\n<li><p>The program then displays the following menu: </p>\n\n<ul>\n<li>Calculate and display the total capacitance (CT) </li>\n<li>Calculate and display the voltage drops for each resistor (VC1, VC2) </li>\n<li>Calculate and display the electrical charge (QT) User is asked to enter 1, 2, or 3 to select one of three options displayed on the screen. </li>\n</ul></li>\n<li><p>For the following, you must use the switch statement. - If option 1, 2, or 3 is entered, total capacitance, voltage drops, or electrical charge is calculated using formulas below: </p></li>\n</ol>\n\n<p>V = 12 C = (C1*C2) / (C1+C2) </p>\n\n<p>V = V1 + V2 where V1 = V*(C/C1) and V2=V*(C/C1) </p>\n\n<p>Q = Q1 + Q1. </p>\n\n<ol start=\"4\">\n<li>If any character other than 1, 2, or 3 is entered, the program will display an error message: - This is not a valid option!</li>\n</ol>\n\n<p>Here is my Code.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    int main (){\n    char choice;\n    float c1,c2,ct;\n    ct =(c1 * c2) / (c1+c2);\n    printf(\"Please enter the capacitance value of c1: \");\n    scanf(\"%f\", &amp;c1);\n    printf(\"\\nPlease enter the capacitance value of c2: \");\n    scanf(\"%f\", &amp;c2);\n\n    printf(\"\\nPlease enter 1 if you need total capacitance\");\n    printf(\"\\nPlease enter 2 if you need voltage of each resistor\");\n    printf(\"\\nPlease enter 3 if you need electrical charge \\n\");\n    scanf(\"%c\", &amp;choice);\n\n    switch (choice) {\n        case 1:\n        printf(\"\\nThe total capacitance is %.2f\", ct);\n        case 2:\n        printf(\"\\nThe Voltage drop V1 is %.2f and V2 is %.2f\", 12*(ct/c1), 12*(ct/c2));\n        case 3:\n        printf(\"\\nThe electrical charge is Q %.2f\", 12 * ct );\n\n        default:\n        printf(\"\\nInvalid weekday number.\");\n    }\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c", "solaris", "cc"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1507078322, "post_id": 46555447, "comment_id": 80064994, "body": "I compiled and ran this as-is and it works fine for me. Do you have read and execute permission on <code>&#47;home&#47;adirectory</code>? Try <code>cd &#47;home&#47;adirectory</code> and see if you can do <code>ls</code> and get results."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1507078344, "post_id": 46555447, "comment_id": 80065000, "body": "It works okay for me on Linux.  I did change the directory to be my home directory."}, {"owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "edited": false, "score": 0, "creation_date": 1507078519, "post_id": 46555447, "comment_id": 80065041, "body": "Shouldn&#39;t I only need read permission?"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1507079688, "post_id": 46555447, "comment_id": 80065290, "body": "@LBaelish to read directory contents you need both read and execution permissions on that directory."}, {"owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1507079982, "post_id": 46555447, "comment_id": 80065353, "body": "@zerkms I do have read and execution permission on the directory"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1507090653, "post_id": 46555447, "comment_id": 80067703, "body": "You&#39;ve not shown any checking of the return value from <code>realpath()</code>; it can fail, so you should check what happens."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1507093319, "post_id": 46555447, "comment_id": 80068455, "body": "looks like <code>realpath</code> failed, test return value and <code>errno</code> against <code>ENOMEM</code> or <code>ENAMETOOLONG</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1507109785, "post_id": 46555447, "comment_id": 80076749, "body": "The value of <code>errno</code>, which is used by <code>perror()</code> to determine what error message to emit, is only valid <i>immediately</i> after a failed call.  Since you&#39;re never checking if <code>realpath()</code> fails and then you immediately make two <code>printf()</code> calls, the error message you see is completely meaningless."}, {"owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1507126342, "post_id": 46555447, "comment_id": 80087731, "body": "@Jean-BaptisteYun&#232;s It&#39;s not the call to realpath that fails, it&#39;s the call to <code>dir = readdir(d)</code> . Also confirmed this by running in gdb"}], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "edited": false, "score": 0, "creation_date": 1507084378, "post_id": 46555944, "comment_id": 80066229, "body": "So this gets me to the correct path, before it was just printing the path to the current working directory. However I still see the same problem where only . and .. are printed and I get the error message value to large for defined data type."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "reply_to_user": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "edited": false, "score": 0, "creation_date": 1507117492, "post_id": 46555944, "comment_id": 80081384, "body": "Is it compile time or a run-time message? If former, than it should give you a line number, if latter, it sounds like a 32/64 size mix with shared libs. Can you use &#39;-m32&#39; or &#39;-m64&#39; quals for compilation and link?"}, {"owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "edited": false, "score": 0, "creation_date": 1507126866, "post_id": 46555944, "comment_id": 80088153, "body": "Wow so it looks like <code>-m64</code> fixes this issue! Thank you! Although I still don&#39;t understand what the problem is exactly if you care to elaborate?"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "reply_to_user": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "edited": false, "score": 0, "creation_date": 1507130198, "post_id": 46555944, "comment_id": 80090588, "body": "@LBaelish just looked like you compiled in a 32-bit mode and runtime shared libs were 64-bit. System loader chocked on an attempt to fit some 64-bit data from the lib into a 32 bit variable."}, {"owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "edited": false, "score": 0, "creation_date": 1507138278, "post_id": 46555944, "comment_id": 80095251, "body": "This is working for me, so I&#39;m going to accept your answer. Thanks!"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "edited": false, "score": 1, "creation_date": 1507194978, "post_id": 46555944, "comment_id": 80116626, "body": "@LBaelish The default compile mode on 64-bit Linux is 64-bit.  The default compile mode on Solaris is always 32-bit and you have to explicitly select 64-bit mode.  If one of your files is larger than 2 GB, you can get that error on either OS if you compile 32-bit.  On your Solaris system, see <a href=\"https://docs.oracle.com/cd/E23823_01/html/816-5175/lf64-5.html\" rel=\"nofollow noreferrer\"><code>man lf64</code></a> and <a href=\"https://docs.oracle.com/cd/E23823_01/html/816-5175/lfcompile-5.html#scrolltoc\" rel=\"nofollow noreferrer\"><code>man lfcompile</code></a>."}], "tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": true, "score": 1, "last_activity_date": 1507082729, "creation_date": 1507082729, "answer_id": 46555944, "question_id": 46555447, "link": "https://stackoverflow.com/questions/46555447/c-use-of-dirent-h/46555944#46555944", "title": "C use of dirent.h", "body": "<p>the <code>d_name</code> field contains the name of the file in the context of the directory it traverses. So, it does not contain any path, just the name.</p>\n\n<p>So, in order for you to play with its path, you need to append the <code>d_name</code> to the name of the directory, something like the following:</p>\n\n<pre><code> char *myHomeDir = \"/home/adirectory\";\n d = opendir(myNomDir);\n . . .\n while((dir = readdir(d)) != NULL) {\n    char filepath[PATH_MAX + 1] ;\n    strcpy(filepath, myHomeDir);\n    strcat(filepath, \"/\");\n    strcat(filepath, dir-&gt;d_name);\n    realpath(filepath, fullpath);\n</code></pre>\n\n<p>Of course the stuff above is just a skeleton code for clarity. It could be optimized better and you should use <code>strncpy</code> family of functions.</p>\n"}], "owner": {"reputation": 579, "user_id": 5380257, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9be6f57ec6dd186a17be2468f2e658b3?s=128&d=identicon&r=PG&f=1", "display_name": "LBaelish", "link": "https://stackoverflow.com/users/5380257/lbaelish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4464, "favorite_count": 0, "accepted_answer_id": 46555944, "answer_count": 1, "score": 0, "last_activity_date": 1507138872, "creation_date": 1507077907, "last_edit_date": 1507138872, "question_id": 46555447, "link": "https://stackoverflow.com/questions/46555447/c-use-of-dirent-h", "title": "C use of dirent.h", "body": "<p><strong>Final update</strong>- Answer is in the comments of the accepted answer.</p>\n\n<p>First of all I realize there are a lot of other answers to this question. I've been through most of them and this code is a combination of going through many other answers. All I want to do is get to the full path to every file in a directory.</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\n     DIR *d;\n     struct dirent * dir;\n     char fullpath[PATH_MAX + 1];\n     d = opendir(\"/home/adirectory\");\n     if(d != NULL)\n     {\n          while((dir = readdir(d)) != NULL)\n          {\n               realpath(dir-&gt;d_name, fullpath);\n               printf(\"[%s]\\n\", fullpath);\n               printf(\"%s\\n\", dir-&gt;d_name);\n\n          }\n          // addition of the following line yields\n          // Value too large for defined data type\n          perror(\"Something isn't working: \");\n          closedir(d);\n\n     }\n\nreturn 0;\n}\n</code></pre>\n\n<p>Update #3:</p>\n\n<p>The call that fails is <code>dir = readdir(d)</code>, which is why I have perror \n   immediately after the while loop.</p>\n\n<p>Update #2: </p>\n\n<p>This works just fine on CentOS, and Ubuntu gcc 4.8.5 +. Does not work on \n   Solaris gcc 4.5.2.</p>\n\n<p>Update: \n   There is an error message:</p>\n\n<blockquote>\n  <p>Value too large for defined data type</p>\n</blockquote>\n\n<p>...but I'm not sure what could cause this.</p>\n\n<p>This always just prints the current working directory that I'm running the program from. Even so, it doesn't actually list any of the files in that directory besides \".\" and \"..\" . What gives? Is there some kind of permission issue? Does this solution not work in 2017?</p>\n"}, {"tags": ["c", "multidimensional-array", "free", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1507077517, "post_id": 46555292, "comment_id": 80064811, "body": "What is 3DArray?  It isn&#39;t even a valid identifer."}, {"owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1507079113, "post_id": 46555292, "comment_id": 80065165, "body": "@Tom Karzes 3DArray is a 3 dimensional array that have ms^3 size... But only some points its usefull from me every time(but i find them in that if) so i want to free all the unusefull memory cells"}, {"owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1507079308, "post_id": 46555292, "comment_id": 80065214, "body": "@xing i try with realoc but i cant delete memory of particulars cells when i dont need them in the (for loop) for example i may want to keep 3DArray[10][34][1] but all the other cells like 3DArray[10][...][...] are unusefull, i try with realoc and i didnt make it for this that i need."}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1507079572, "post_id": 46555292, "comment_id": 80065269, "body": "Then maybe you need to think about a different data structure to model your problem."}, {"owner": {"reputation": 81, "user_id": 5835276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0d021d3af213f51f79320fa026fb81?s=128&d=identicon&r=PG&f=1", "display_name": "James Peters", "link": "https://stackoverflow.com/users/5835276/james-peters"}, "edited": false, "score": 0, "creation_date": 1507090900, "post_id": 46555292, "comment_id": 80067771, "body": "Every section of memory freed by free() must be allocated with a separate malloc/calloc call. While <a href=\"http://www.geeksforgeeks.org/dynamically-allocate-2d-array-c/\" rel=\"nofollow noreferrer\">this primer</a> is for 2D arrays, it&#39;s easy to expand the concepts to 3D arrays. Ex 2 is the closest to what you need to do to be able to free individual portions."}], "owner": {"reputation": 85, "user_id": 8665448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69792de021fcee2f29dd73456d5e62c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Kalantas", "link": "https://stackoverflow.com/users/8665448/nikos-kalantas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507076589, "creation_date": 1507076589, "question_id": 46555292, "link": "https://stackoverflow.com/questions/46555292/free-memory-of-chells-from-3-dimensional-array-in-c-when-i-dont-need-them-anymor", "title": "Free memory of chells from 3 dimensional array in C when i dont need them anymore", "body": "<p>i have so far this code and i have a problem with memory that my 3 dimensional array uses (program stop working)</p>\n\n<pre><code>       int i,j;\n       int ms=10000;\n       int ns=10000;\n       int (*3DArray)[ms][ms] = calloc( ms, sizeof *3DArray );\n       if(!S){printf(\"memory problem\");}\n       counter=1;\n         for (i=0 ; i&lt;=ms ; i++ )      {\n           for (j=0 ; j&lt;=ns ; j++ )    {\n             if (...statement..) {\n             3DArray[i][i][counter]=j;\n             counter++;          }\n             else {\n             free(3DArray);}      \n                                       }} //end of for\n</code></pre>\n\n<p><em>At the first phase,I'm trying to check if statment(line 9) is false so free/delete memory of the useless cell(s)...</em></p>\n\n<p>Then in phase 2 I'm trying to free 2-step behind the present i my array for to reduce the amount of memory that C uses and my program finaly work.</p>\n\n<pre><code>       int i,j;\n       int ms=10000;\n       int ns=10000;\n       int (*3DArray)[ms][ms] = calloc( ms, sizeof *3DArray );\n       if(!S){printf(\"memory problem\");}\n       counter=1;\n         for (i=0 ; i&lt;=ms ; i++ )      {\n           for (j=0 ; j&lt;=ns ; j++ )    {\n             if (...statement..) {\n             3DArray[i][i][counter]=j;\n             counter++;          }\n             else {\n                   if(i&gt;2)//so if i'm have arlready pass 3 times\n                   free(3DArray[i-2]);}//delete the part of 3DArray that its 2 times before\n                                       //that is useless anymore\n                                       }} //end of for\n</code></pre>\n\n<p>Am I just a little close with this that I want to do, or free() cant help me with that? Thanks</p>\n"}, {"tags": ["c", "arrays", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1507077813, "post_id": 46555270, "comment_id": 80064879, "body": "There is nothing wrong with the code you have shown.  You&#39;ll need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which is <a href=\"https://stackoverflow.com/help/on-topic\">expected</a> for questions like this.  <a href=\"https://pastebin.com/346Ktf0F\" rel=\"nofollow noreferrer\">Here</a> is a fully worked example, using your code verbatim, and it runs without throwing any runtime errors.  Based on what you have shown, the only thing I could speculate is that you may have a mismatch between the <code>SIZE2</code> you used to allocate <code>temp_d_ptrs[i]</code> and the <code>SIZE2</code> you use in the offending <code>cudaMemcpy</code> operation.  But it&#39;s impossible to say based on what you have shown."}, {"owner": {"reputation": 284, "user_id": 5298808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1lPFRRKADA/AAAAAAAAAAI/AAAAAAAAAH4/LM6T_qddOK8/photo.jpg?sz=128", "display_name": "Vichoko", "link": "https://stackoverflow.com/users/5298808/vichoko"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1507078099, "post_id": 46555270, "comment_id": 80064936, "body": "Thank you for the information! I really appreciate making better examples for questions like this; thank you for not directly down-voting too.   I replicated the example without the &quot;for&quot; cycles and the memory allocation and copy worked fine as i wanted.  I&#39;m trying now to figure out what was the problem. I&#39;m not sure what should i do with the question now i figured out the example i provided was OK."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1507078446, "post_id": 46555270, "comment_id": 80065031, "body": "In the future, if you want to avoid down-votes, my advice is to recognize that this question (or questions like it) requires a MCVE per SO help page, and therefore you should not even post such a question here without one.  Then at least no one can downvote for obviously violating that rule.  You have obviously (in my opinion) violated that rule.  And I don&#39;t think it&#39;s out of bounds to call it a rule, since it is spelled out on the SO help page and the word <b>must</b> is used."}, {"owner": {"reputation": 284, "user_id": 5298808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1lPFRRKADA/AAAAAAAAAAI/AAAAAAAAAH4/LM6T_qddOK8/photo.jpg?sz=128", "display_name": "Vichoko", "link": "https://stackoverflow.com/users/5298808/vichoko"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1507078763, "post_id": 46555270, "comment_id": 80065088, "body": "@RobertCrovella Thank you for the clarification, i&#39;m new in SO. As right now i don&#39;t have enough time to make a MCVE (and because my real code is very complex). You recommend me to delete the question to avoid down-votes? As my reputation has gone down in my last questions and the system warned me that they may block me for making further questions.  But i think the code may help other people."}, {"owner": {"reputation": 284, "user_id": 5298808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1lPFRRKADA/AAAAAAAAAAI/AAAAAAAAAH4/LM6T_qddOK8/photo.jpg?sz=128", "display_name": "Vichoko", "link": "https://stackoverflow.com/users/5298808/vichoko"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1507080022, "post_id": 46555270, "comment_id": 80065358, "body": "I edited the example to include the real problem. And answered the solution with the correct code we stated. Thanks for the help."}], "answers": [{"tags": [], "owner": {"reputation": 284, "user_id": 5298808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1lPFRRKADA/AAAAAAAAAAI/AAAAAAAAAH4/LM6T_qddOK8/photo.jpg?sz=128", "display_name": "Vichoko", "link": "https://stackoverflow.com/users/5298808/vichoko"}, "is_accepted": true, "score": 1, "last_activity_date": 1507079967, "creation_date": 1507079967, "answer_id": 46555652, "question_id": 46555270, "link": "https://stackoverflow.com/questions/46555270/cuda-copying-an-array-of-arrays-filled-with-data-from-host-to-device/46555652#46555652", "title": "CUDA copying an array of arrays filled with data, from host to device", "body": "<p>The mistake is that i used the array total size <code>getSize(i)</code> as the index of the allocations and copies. It was a naive error hidden by the complexity and verbosity of the real code.</p>\n\n<p>The correct solution is:</p>\n\n<pre><code>double** d_weights;\nint init_cuda_weight(){\n    cudaMalloc((void **) &amp;d_weights, sizeof(double*) * SIZE);\n\n    double** temp_d_ptrs = (double**) malloc(sizeof(double*) * SIZE);\n    // temp array of device pointers\n    for (int i = 0; i &lt; SIZE; i++){\n        cudaMalloc((void**) &amp;temp_d_ptrs[i],\n                sizeof(double) * getSize(i));\n        // ERROR CHECK WITH cudaGetLastError()\n        cudaMemcpy(temp_d_ptrs[i], weights[i], sizeof(double) * getSize(i), cudaMemcpyHostToDevice);\n        // ERROR CHECK WITH cudaGetLastError()\n    }\n\n   cudaMemcpy(d_weights, temp_d_ptrs, sizeof(double*) * SIZE,\n        cudaMemcpyHostToDevice);\n}\n</code></pre>\n"}], "owner": {"reputation": 284, "user_id": 5298808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1lPFRRKADA/AAAAAAAAAAI/AAAAAAAAAH4/LM6T_qddOK8/photo.jpg?sz=128", "display_name": "Vichoko", "link": "https://stackoverflow.com/users/5298808/vichoko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 46555652, "answer_count": 1, "score": 0, "last_activity_date": 1507080090, "creation_date": 1507076424, "last_edit_date": 1507080090, "question_id": 46555270, "link": "https://stackoverflow.com/questions/46555270/cuda-copying-an-array-of-arrays-filled-with-data-from-host-to-device", "title": "CUDA copying an array of arrays filled with data, from host to device", "body": "<p>i've been looking for a way to transfer a <strong>filled array of arrays</strong> from <em>host</em> to <em>device</em> in CUDA.</p>\n\n<p><strong>What i have:</strong></p>\n\n<ul>\n<li>A global array of arrays that is filled with data, that i need to copy to the device for kernel execution.</li>\n<li>The arrays in the array have different lengths.</li>\n</ul>\n\n<p>I have a function to initiate the array and it's values:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>double** weights; // globally defined in host\nint init_weigths(){\n    weights = (double**) malloc(sizeof(double*) * SIZE);\n\n    for (int i = 0; i &lt; SIZE; i++) {\n        weights[i] = (double*) malloc(sizeof(double) * getSize(i));\n\n        for (int j = 0; j &lt; getSize(i); j++){\n            weights[i][j] = get_value(i,j);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>My (not working) solution</strong>:</p>\n\n<p>I've designed a solution gathering information of other answers found in the Internet, but no one worked. I think it's because of the difference that my array of arrays is already filled up with information, and of the variable lengths of the contained arrays.</p>\n\n<p>The solution i have, that is throwing \"invalid argument\" error in all <code>cudaMemcpy</code> calls, and in the second and further <code>cudaMalloc</code> calls; checked by <code>cudaGetLastError()</code>.\nThe solution is this one:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>double** d_weights;\nint init_cuda_weight(){\n    cudaMalloc((void **) &amp;d_weights, sizeof(double*) * SIZE);\n\n    double** temp_d_ptrs = (double**) malloc(sizeof(double*) * SIZE);\n    // temp array of device pointers\n    for (int i = 0; i &lt; SIZE; i++){\n        cudaMalloc((void**) &amp;temp_d_ptrs[getSize(i)],\n                sizeof(double) * getSize(i));\n        // ERROR CHECK WITH cudaGetLastError(); doesn't throw any errors ar first.\n        cudaMemcpy(temp_d_ptrs[getSize(i)], weights[getSize(i)], sizeof(double) * getSize(i), cudaMemcpyHostToDevice);\n        // ERROR CHECK WITH cudaGetLastError(); throw \"invalid argument\" error for now and beyond.\n    }\n\n   cudaMemcpy(d_weights, temp_d_ptrs, sizeof(double*) * SIZE,\n        cudaMemcpyHostToDevice);\n}\n</code></pre>\n\n<p>As aditional information, i've simplified the code a bit. The arrays contained in the array of arrays have different lengths (i.e. SIZE2 isn't constant), thats why i'm not flattening to an 1D array.</p>\n\n<p>What is wrong with this implementation? Any ideas to achieve the copy?</p>\n\n<p><em>Edit2</em>:\nThe original code i wrote was OK. I edited the code to include the error i had and included the correct answer (code) below.</p>\n"}, {"tags": ["java", "android", "c", "cordova", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8652121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a84e9481080fd32ce92281a9cbcbb84?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F.", "link": "https://stackoverflow.com/users/8652121/daniel-f"}, "edited": false, "score": 0, "creation_date": 1507092129, "post_id": 46555554, "comment_id": 80068115, "body": "It certain does print <code>&quot;class com.example.AgentMgrService&quot;</code>, do you want me to take a screenshot of the console/debugger?  This is real, compiled code but it is a test that I am running to mimic behavior that is working correctly on a native Android application (i.e. not Ionic Cordova).  The global reference is necessary due to the way that the rest of the actual library is set up. <code>jni_callback()</code> is not called directly from the Java caller, it happens about 30 seconds later after a bunch of other worker threads are fired and do their thing.  ..."}, {"owner": {"reputation": 23, "user_id": 8652121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a84e9481080fd32ce92281a9cbcbb84?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F.", "link": "https://stackoverflow.com/users/8652121/daniel-f"}, "edited": false, "score": 0, "creation_date": 1507092335, "post_id": 46555554, "comment_id": 80068181, "body": "... In fact, I&#39;m not even sure that the thread calling <code>jni_callback()</code> is the same that is being started by the Java side.  I understand that the code is bare and lacks error checking, I am merely trying to understand why I am not able to get at <code>AgentMgrService.testMe()</code> from within <code>jni_callback()</code> since it returns <i>zero</i>.  I don&#39;t really care about error checking <i>at the moment</i> because I&#39;m using Android Studio&#39;s debugger to step through everything."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1507079783, "last_edit_date": 1507079783, "creation_date": 1507078973, "answer_id": 46555554, "question_id": 46555179, "link": "https://stackoverflow.com/questions/46555179/android-jni-getmethodid-fails/46555554#46555554", "title": "Android JNI GetMethodID() fails", "body": "<pre><code>const char* str = (*env)-&gt;GetStringUTFChars(env, strObj, NULL);\nprintf(\"\\nCalling class is: %s\\n\", str);\n//this prints \"class com.example.AgentMgrService\"\n</code></pre>\n\n<p>It prints the result of calling <code>_jamgr_appObj.toString()</code>. This is <code>\"This is a string!\"</code>. It is certainly <em>not</em> <code>\"class com.example.AgentMgrService\"</code>, and whatever it does print is certainly not the 'calling class'. Are you looking for <code>getClass().toString()</code> here?</p>\n\n<p>Or else this is not the real code. Which appears far more likely.</p>\n\n<pre><code>//this returns NULL\n</code></pre>\n\n<p>It returns <em>zero.</em> <code>methodIDs</code> are not pointers.</p>\n\n<pre><code>// ... and thus the below call fails\n(*env)-&gt;CallVoidMethod(env, _jamgr_appObj, mid, jstr);\n</code></pre>\n\n<p>Why you didn't just pass the original <code>thiz</code> object, and the <code>JNIEnv*</code>, directly to <code>jni_callback()</code> is a mystery to me. You certainly didn't need either a <code>GlobalRef</code> or to call <code>String.toString()</code>.</p>\n\n<p>There is a lamentable lack of error checking in this code. <em>Every</em> JNI call must be followed by an examination of its result, and if erroneous, you must use one of the exception-checking or printing or throwing methods. Rather than proceeding as though the error didn't happen.</p>\n"}, {"tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": true, "score": 2, "last_activity_date": 1507131240, "last_edit_date": 1507131240, "creation_date": 1507130894, "answer_id": 46568635, "question_id": 46555179, "link": "https://stackoverflow.com/questions/46555179/android-jni-getmethodid-fails/46568635#46568635", "title": "Android JNI GetMethodID() fails", "body": "<p>The answer to your problem lies in whether or not your native methods are static..</p>\n\n<p>In JNI, if you have</p>\n\n<pre><code>public static native void startAgentMgr(String agentMgrConfig);\npublic static native void stopAgentMgr();\n</code></pre>\n\n<p>on the java side, when you call this method, the <code>this</code> object will be a CLASS and not an INSTANCE.. After all, the method is static and it has no <code>this</code>.</p>\n\n<p>However, if you change it to (Note the lack of <code>static</code> keyword):</p>\n\n<pre><code>public native void startAgentMgr(String agentMgrConfig);\npublic native void stopAgentMgr();\n</code></pre>\n\n<p>then when you run your code, <code>this</code> parameter will be the instance of the object that this method was called on.</p>\n\n<p>Example:</p>\n\n<pre><code>package com.example.brandon.test;\n\nimport android.content.Context;\nimport android.os.RemoteException;\nimport android.util.Log;\n\npublic class AgentMgrService {\n    private static final String TAG = \"AgentMgrService\";\n\n    // load library\n    static {\n        System.loadLibrary(\"lib_agentmgr\");\n    }\n\n    // C-function interface\n    public native void startAgentMgr(String agentMgrConfig);\n    public native void stopAgentMgr();\n\n    public AgentMgrService(Context context) {\n\n    }\n\n    public void startMobileAgentMgr(String agentmgrConfig) throws RemoteException {\n        startAgentMgr(agentmgrConfig);\n    }\n\n    public void testMe() {\n        Log.d(TAG, \"testMe!\");\n    }\n\n    @Override\n    public String toString() {\n        Log.d(TAG, \"This is a string!\");\n        return \"This is a string!\";\n    }\n}\n</code></pre>\n\n<p>Native Code:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic JavaVM* _jamgr_appVm = NULL;\nstatic jobject _jamgr_appObj = NULL;\n\nint jni_callback();\n\nJNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* aReserved)\n{\n    _jamgr_appVm = vm;\n    return JNI_VERSION_1_4;\n}\n\nJNIEXPORT void JNICALL\nJava_com_example_brandon_test_AgentMgrService_startAgentMgr(\n        JNIEnv* env,\n        jobject thiz,\n        jstring config_data)\n{\n    if (_jamgr_appVm == NULL)\n    {\n        (*env)-&gt;GetJavaVM(env, *_jamgr_appVm);\n    }\n\n    if (_jamgr_appObj == NULL) {\n        _jamgr_appObj = (*env)-&gt;NewGlobalRef(env, thiz);\n    }\n\n    jni_callback();\n\n}\n\nJNIEXPORT void JNICALL\nJava_com_example_brandon_test_AgentMgrService_stopAgentMgr(\n        JNIEnv* env,\n        jobject thiz,\n        jstring config_data)\n{\n    (*env)-&gt;DeleteGlobalRef(env, _jamgr_appObj);\n    _jamgr_appObj = NULL;\n}\n\nint jni_callback()\n{\n    JNIEnv* env = NULL;\n    jint retval = (*_jamgr_appVm)-&gt;GetEnv(_jamgr_appVm, (void**) &amp;env, JNI_VERSION_1_4);\n\n    if (retval == JNI_OK)\n    {\n        jclass cls = (*env)-&gt;GetObjectClass(env, _jamgr_appObj);\n        if (cls)\n        {\n            jmethodID  mid = (*env)-&gt;GetMethodID(env, cls, \"toString\", \"()Ljava/lang/String;\");\n            if (mid)\n            {\n                jobject strObj = (*env)-&gt;CallObjectMethod(env, _jamgr_appObj, mid);\n\n                if (strObj)\n                {\n                    const char *str = (*env)-&gt;GetStringUTFChars(env, strObj, NULL);\n                    printf(\"\\nCalling class is: %s\\n\", str);\n                    (*env)-&gt;ReleaseStringUTFChars(env, strObj, str);\n                    strObj = NULL;\n                }\n\n\n                mid = (*env)-&gt;GetMethodID(env, cls, \"testMe\", \"()V\");\n\n                if (mid)\n                {\n                    (*env)-&gt;CallVoidMethod(env, _jamgr_appObj, mid);\n                }\n            }\n        }\n\n    }\n\n    return retval;\n}\n</code></pre>\n\n<p>This will do what you want because the JNI methods are NOT static on the Java side. However, if you make them static, then <code>getMethodID</code> will FAIL work because thiz is a class and not an instance of <code>AgentMgrJni</code>.</p>\n\n<p>Also note that I fixed your memory leaks by <code>ReleasingUTFChars</code>.. and other error handling issues. I also called <code>DeleteGlobalRef</code> in the stop function..</p>\n"}], "owner": {"reputation": 23, "user_id": 8652121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a84e9481080fd32ce92281a9cbcbb84?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel F.", "link": "https://stackoverflow.com/users/8652121/daniel-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2054, "favorite_count": 1, "accepted_answer_id": 46568635, "answer_count": 2, "score": 1, "last_activity_date": 1507131240, "creation_date": 1507075555, "question_id": 46555179, "link": "https://stackoverflow.com/questions/46555179/android-jni-getmethodid-fails", "title": "Android JNI GetMethodID() fails", "body": "<p>I'm trying to build a Cordova plugin to support a C library used within an Ionic Cordova app.  So far the JavaScript&rarr;Java and Java&rarr;C portions of my code work.  I can successfully debug C code from within Android Studio running on the phone.  However, my C library has a callback method that needs to be passed up the stack (C&rarr;Java&rarr;JavaScript) and I'm having issues getting the JNI methods working properly.  Here's my code so far:</p>\n\n<p><strong>AgentMgrService.Java</strong></p>\n\n<pre><code>package com.example;\n\nimport ...\n\npublic class AgentMgrService {\n\n    private static final String TAG = \"AgentMgrService\";\n    private boolean libLoaded = false;\n    private static Context mContext;\n\n    public CallbackContext jsCallback;\n\n    // C-function interface\n    public static native void startAgentMgr(String agentMgrConfig);\n    public static native void stopAgentMgr();\n\n    // load library\n    static {\n        System.loadLibrary(\"lib_agentmgr\");\n    }\n    public AgentMgrService(Context context) {\n        mContext = context;\n    }\n\n    public void startMobileAgentMgr(String agentmgrConfig) throws RemoteException {\n        startAgentMgr(agentmgrConfig);\n\n    public void testMe() {\n        Log.d(TAG, \"testMe!\");\n    }\n\n    public String toString() {\n        Log.d(TAG, \"This is a string!\");\n        return \"This is a string!\";\n    }\n\n}\n</code></pre>\n\n<p><strong>AgentMgrJni.c</strong></p>\n\n<pre><code>#include ...\n\nstatic JavaVM* _jamgr_appVm = NULL;\nstatic jobject _jamgr_appObj = NULL;\n\nvoid\nJava_com_example_AgentMgrService_startAgentMgr(\n        JNIEnv* env,\n        jobject thiz,\n        jstring config_data)\n{\n    if (_jamgr_appObj == NULL) {\n      _jamgr_appObj = (*env)-&gt;NewGlobalRef(env, thiz);\n    }\n\n    //... Stuff happens here ...\n\n    jni_callback();\n\n}\n\nint\njni_callback()\n{\n    JNIEnv* env = NULL;\n    jint retval = 0;\n    jmethodID mid = NULL;\n    jclass cls = NULL;\n\n    retval = (*_jamgr_appVm)-&gt;GetEnv(_jamgr_appVm, (void**) &amp;env, JNI_VERSION_1_6);\n\n    cls = (*env)-&gt;GetObjectClass(env, _jamgr_appObj);\n\n\n    //Try the toString() method\n    mid = (*env)-&gt;GetMethodID(env, cls, \"toString\", \"()Ljava/lang/String;\");\n    jobject strObj = (*env)-&gt;CallObjectMethod(env, _jamgr_appObj, mid);\n    const char* str = (*env)-&gt;GetStringUTFChars(env, strObj, NULL);\n    printf(\"\\nCalling class is: %s\\n\", str);\n    //this prints \"class com.example.AgentMgrService\"\n\n    mid = (*env)-&gt;GetMethodID(env, cls, \"testMe\", \"()V\");\n    //this returns NULL and thus the below call fails\n    (*env)-&gt;CallVoidMethod(env, _jamgr_appObj, mid, jstr);\n\n    return retval;\n}\n</code></pre>\n\n<p>When running the above code everything behaves fine until the first <code>GetMethodID()</code>.  When calling <code>toString()</code> I get the boilerplate <code>\"class com.example.AgentMgrService\"</code> as a reply.  But wait, I overloaded <code>toString()</code>!  Additionally, attempting to get the <code>testMe()</code> returns NULL, so it couldn't find that method.  So I'm in the right class and can in fact call some Java methods from within C, but not methods that I have defined?  I haven't tried making anything static yet but I'm unsure if that would help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 36902, "user_id": 41655, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/430ea1cba106cc65b7687d66e9df4f06?s=128&d=identicon&r=PG", "display_name": "millimoose", "link": "https://stackoverflow.com/users/41655/millimoose"}, "edited": false, "score": 2, "creation_date": 1507075232, "post_id": 46555126, "comment_id": 80064323, "body": "The code above shouldn&#39;t even compile much less return correct values."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1507075255, "post_id": 46555126, "comment_id": 80064331, "body": "Your function <code>temp</code> is declared to return an <code>int</code>, but it doesn\u2019t return anything. That doesn\u2019t matter yet, though, because you didn\u2019t call it, either. Turn on all warnings when compiling and pay attention to them."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507075295, "post_id": 46555126, "comment_id": 80064339, "body": "planning on calling the <code>temp</code> function? And you&#39;ll have to return the value from that function,, or make it a <code>void</code> and pass in a pointer to <code>celsius</code>"}, {"owner": {"reputation": 429, "user_id": 5224887, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TU1Uza3EkUs/AAAAAAAAAAI/AAAAAAAAEto/cfKXMlcbDdM/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/5224887/aditya"}, "edited": false, "score": 0, "creation_date": 1518127601, "post_id": 46555126, "comment_id": 84389839, "body": "Also, you might want to make the <code>int</code> data types to <code>float</code> since you are dividing."}], "answers": [{"comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1507075372, "post_id": 46555151, "comment_id": 80064360, "body": "Even if OP calls temp, local variable celsius is never modified by the function, so still the same problem"}], "tags": [], "owner": {"reputation": 36902, "user_id": 41655, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/430ea1cba106cc65b7687d66e9df4f06?s=128&d=identicon&r=PG", "display_name": "millimoose", "link": "https://stackoverflow.com/users/41655/millimoose"}, "is_accepted": false, "score": 1, "last_activity_date": 1507075408, "last_edit_date": 1507075408, "creation_date": 1507075291, "answer_id": 46555151, "question_id": 46555126, "link": "https://stackoverflow.com/questions/46555126/not-getting-the-correct-answer/46555151#46555151", "title": "Not getting the correct answer", "body": "<p>You're never calling <code>temp()</code>, so you're just printing whatever random garbage is at the memory location of the unitialised <code>celsius</code> variable.</p>\n\n<p>Also a bunch of other things wrong with the code:</p>\n\n<ul>\n<li>Missing semicolon in the definition of <code>temp()</code>.</li>\n<li>You should be <code>return</code>ing the result value from <code>temp()</code>, not assigning it to a parameter.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 5298161, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QDFjs4VW5J4/AAAAAAAAAAI/AAAAAAAAAB8/l2hIukPL5H8/photo.jpg?sz=128", "display_name": "Mane Sandoval", "link": "https://stackoverflow.com/users/5298161/mane-sandoval"}, "is_accepted": false, "score": 0, "last_activity_date": 1507075447, "creation_date": 1507075447, "answer_id": 46555167, "question_id": 46555126, "link": "https://stackoverflow.com/questions/46555126/not-getting-the-correct-answer/46555167#46555167", "title": "Not getting the correct answer", "body": "<p>It seems you're passing parameters per value, not per reference, I'd modify your code as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\nint fahr;\nprintf (\"Enter fahrenheit value here: \");\nscanf(\"%d\", &amp;fahr);\nprintf (\"The Celsius value is: %d \",temp(fahr));\nreturn 0;\n}\n\nint temp (int fahr) \n{\n   int celsius = 5*(fahr-32)/9\n   return celsius;\n}\n</code></pre>\n\n<p>Or use params per reference.</p>\n"}, {"comments": [{"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 1, "creation_date": 1507078412, "post_id": 46555169, "comment_id": 80065023, "body": "Everyone\u2019s comments and criticisms are correct. My answer is to show things working, but no more. You should read what others have written and explore your work more carefully."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1507087822, "post_id": 46555169, "comment_id": 80067008, "body": "Hmmm, lower f for <a href=\"https://en.wikipedia.org/wiki/Daniel_Gabriel_Fahrenheit\" rel=\"nofollow noreferrer\">Daniel Fahrenheit</a> yet upper C for <a href=\"https://en.wikipedia.org/wiki/Anders_Celsius\" rel=\"nofollow noreferrer\">Anders Celsius</a>.  Some guys get <a href=\"https://www.youtube.com/watch?v=Iwu-6GxBHN4\" rel=\"nofollow noreferrer\">no respect</a>. ;-)"}], "tags": [], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "is_accepted": true, "score": 2, "last_activity_date": 1507075469, "creation_date": 1507075469, "answer_id": 46555169, "question_id": 46555126, "link": "https://stackoverflow.com/questions/46555126/not-getting-the-correct-answer/46555169#46555169", "title": "Not getting the correct answer", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint temp(int fahr) \n{\n  return 5*(fahr-32)/9;\n}\n\nint main() {\n  int fahr, celsius;\n  printf (\"Enter fahrenheit value here: \");\n  scanf(\"%d\", &amp;fahr);\n  celsius = temp(fahr);\n  printf (\"The Celsius value is: %d \", celsius);\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 8612472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ni4vv.png?s=128&g=1", "display_name": "Secernere", "link": "https://stackoverflow.com/users/8612472/secernere"}, "is_accepted": false, "score": 0, "last_activity_date": 1507083373, "creation_date": 1507083373, "answer_id": 46556004, "question_id": 46555126, "link": "https://stackoverflow.com/questions/46555126/not-getting-the-correct-answer/46556004#46556004", "title": "Not getting the correct answer", "body": "<p>Most simplified version using a function:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint temp(int fahr)\n{\n    return 5*(fahr-32)/9;\n}\n\nint main() {\n    int fahr;\n    printf (\"Enter fahrenheit value here: \");\n    scanf(\"%d\", &amp;fahr);\n    printf (\"The Celsius value is: %d \", temp(fahr));\n}\n</code></pre>\n\n<p>No function:</p>\n\n<pre><code>int main() {\n    int fahr;\n    printf (\"Enter fahrenheit value here: \");\n    scanf(\"%d\", &amp;fahr);\n    printf (\"The Celsius value is: %d \", (5*(fahr-32)/9));\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6818504, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pRxHUhxselQ/AAAAAAAAAAI/AAAAAAAAAO8/x7EeSFCMGC4/photo.jpg?sz=128", "display_name": "Mussie Tesfay", "link": "https://stackoverflow.com/users/6818504/mussie-tesfay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 46555169, "answer_count": 4, "score": -6, "last_activity_date": 1507083373, "creation_date": 1507075082, "question_id": 46555126, "link": "https://stackoverflow.com/questions/46555126/not-getting-the-correct-answer", "title": "Not getting the correct answer", "body": "<p>What is wrong with this code? It is giving me ridiculously high values for Celsius.`</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint temp (int fahr, int celsius) \n{\n celsius = 5*(fahr-32)/9\n}\nint main() {\n\nint fahr, celsius;\nprintf (\"Enter fahrenheit value here: \");\nscanf(\"%d\", &amp;fahr);\nprintf (\"The Celsius value is: %d \",celsius);\nreturn 0;\n}\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["c", "makefile", "linker-errors", "undefined-symbol"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1507075125, "post_id": 46555106, "comment_id": 80064301, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29073978/undefined-symbol-for-architecture-x86-64-in-compiling-c-program\">undefined symbol for architecture x86_64 in compiling C program</a>"}, {"owner": {"reputation": 3, "user_id": 8717086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23258f6e0ab3bb26c60db0c25e790fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Hanks", "link": "https://stackoverflow.com/users/8717086/tom-hanks"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1507075854, "post_id": 46555106, "comment_id": 80064471, "body": "The problem was that the object reference was missing from my makefile. Same error as ^ that question, however different problem &amp; solution."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1507075994, "post_id": 46555106, "comment_id": 80064502, "body": "OK. Try one of the other <a href=\"https://stackoverflow.com/search?q=%5Bc%5D+undefined+symbol+for+architecture+x86_64\">373 results</a>"}], "answers": [{"tags": [], "owner": {"reputation": 168655, "user_id": 582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ev49G.png?s=128&g=1", "display_name": "Lily Ballard", "link": "https://stackoverflow.com/users/582/lily-ballard"}, "is_accepted": true, "score": 1, "last_activity_date": 1507075070, "creation_date": 1507075070, "answer_id": 46555125, "question_id": 46555106, "link": "https://stackoverflow.com/questions/46555106/undefined-symbol-for-architecture-x86-64-c/46555125#46555125", "title": "Undefined Symbol for Architecture x86_64 - C", "body": "<p>Your <code>OBJS</code> makefile variable doesn't include <code>physical.o</code>, so you're not actually linking in that object file. Try listing it as something like</p>\n\n<pre><code>OBJS = $(patsubst %.c, $(OBJDIR)/%.o, $(SRCS)) physical.o\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8717086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23258f6e0ab3bb26c60db0c25e790fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Hanks", "link": "https://stackoverflow.com/users/8717086/tom-hanks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 46555125, "answer_count": 1, "score": 0, "last_activity_date": 1508716074, "creation_date": 1507074937, "last_edit_date": 1508716074, "question_id": 46555106, "link": "https://stackoverflow.com/questions/46555106/undefined-symbol-for-architecture-x86-64-c", "title": "Undefined Symbol for Architecture x86_64 - C", "body": "<p>I'm beginning to write a program in C but I have the following error and I can't figure out why:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_receiveByte\", referenced from:\n      _main in main_prog.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [q1] Error 1\n</code></pre>\n\n<p>As far as I understand, I have included everything properly in the appropriate files and in my makefile, yet I still get this error. This is what my code looks like:</p>\n\n<p><strong>main_prog.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"physical.h\"\n#include \"main_prog.h\"\n\nint main(int argc, char *argv[]) \n{\n    PhysicalState * initPhysical();\n    const Direction blah = L2R;\n\n    unsigned char new_char; \n    new_char = receiveByte(blah);\n\n    printf(\"Done.\\n\");\n}\n</code></pre>\n\n<p><strong>main_prog.h</strong></p>\n\n<pre><code>#ifndef _MAIN_PROG_H\n#define _MAIN_PROG_H\n\n// nothing yet\n\n#endif\n</code></pre>\n\n<p><strong>physical.h</strong></p>\n\n<pre><code>#ifndef _PHYSICAL_H\n#define _PHYSICAL_H\n\n#include &lt;pthread.h&gt;\n\n#define MAX_FRAME_SIZE 1024\n\ntypedef enum\n{\n  false,\n  true\n} boolean;\n\ntypedef enum\n{\n  L2R,\n  R2L\n} Direction;\n\nstruct PHYSICAL_STATE\n{\n  pthread_cond_t  L2RTxSignal;     \n  pthread_cond_t  L2RRxSignal;     \n  boolean         L2RReady;        \n  pthread_mutex_t L2RLock;       \n\n  pthread_cond_t  R2LTxSignal;     \n  pthread_cond_t  R2LRxSignal;     \n  boolean         R2LReady;        \n  pthread_mutex_t R2LLock;        \n};\n\ntypedef struct PHYSICAL_STATE PhysicalState;\n\nPhysicalState * initPhysical();\n\nunsigned char receiveByte(const Direction dir);\n\n#endif\n</code></pre>\n\n<p>and finally my</p>\n\n<p><strong>makefile</strong></p>\n\n<pre><code>PROG = main_prog\nHDRS = physical.h main_prog.h\nSRCS = main_prog.c \n\nOBJDIR = object\nOBJS = $(patsubst %.c, $(OBJDIR)/%.o, $(SRCS)) \n\nCC = gcc\nCFLAGS = -Wall --std=c99 -L.\nLIBS = -lm\n\nall : $(OBJDIR) $(PROG)\n\n$(PROG) : $(OBJS)\n    $(CC) $(CFLAGS) $^ -o $(PROG) $(LIBS)\n\nobject/%.o : %.c $(HDRS)\n    $(CC) -c $(CFLAGS) $&lt; -o $@ $(LIBS)\n\n$(OBJDIR) :\n    mkdir -p $@/\n\nclean:\n    rm -rf object/\n    rm -f $(PROG)\n</code></pre>\n\n<p>There is also a <code>physical.o</code> file located in the same directory as all of these files, whereas the main_prog.o file gets located in <code>object/</code> as specified by the makefile. I've tried moving the <code>physical.o</code> file around as well as the <code>main_prog.o</code> file around (and changing the makefile to correspond) but I still get this error. Any solution to this error would be greatly appreciated thanks.</p>\n"}, {"tags": ["c", "function", "struct", "structure"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 8319427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/78aec891aa2d1572d7fb712f224eb665?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby", "link": "https://stackoverflow.com/users/8319427/ruby"}, "edited": false, "score": 0, "creation_date": 1507075747, "post_id": 46554826, "comment_id": 80064449, "body": "Thanks for the help but now how do I return the result in the military time format in a new structure?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 131, "user_id": 8319427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/78aec891aa2d1572d7fb712f224eb665?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby", "link": "https://stackoverflow.com/users/8319427/ruby"}, "edited": false, "score": 0, "creation_date": 1507134536, "post_id": 46554826, "comment_id": 80093312, "body": "We&#39;re not here to teach basic programming. Learn the language."}, {"owner": {"reputation": 131, "user_id": 8319427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/78aec891aa2d1572d7fb712f224eb665?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby", "link": "https://stackoverflow.com/users/8319427/ruby"}, "edited": false, "score": 0, "creation_date": 1507176154, "post_id": 46554826, "comment_id": 80108293, "body": "Noted. Thanks for your help."}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": true, "score": 1, "last_activity_date": 1507072752, "creation_date": 1507072752, "answer_id": 46554826, "question_id": 46554769, "link": "https://stackoverflow.com/questions/46554769/how-to-return-the-difference-between-two-struct-values-in-a-third-struct/46554826#46554826", "title": "How to return the difference between two struct values in a third struct?", "body": "<p>Integer division is your friend. You'll need to do something like:</p>\n\n<pre><code>result.Hours = et / 3600;\net -= (result.Hours * 3600);\nresult.Minutes = et / 60;\net -= (result.Minutes * 60);\nresult.Seconds = et;\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 8319427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/78aec891aa2d1572d7fb712f224eb665?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby", "link": "https://stackoverflow.com/users/8319427/ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1507102395, "accepted_answer_id": 46554826, "answer_count": 1, "score": -1, "last_activity_date": 1507072752, "creation_date": 1507072368, "question_id": 46554769, "link": "https://stackoverflow.com/questions/46554769/how-to-return-the-difference-between-two-struct-values-in-a-third-struct", "closed_reason": "Needs more focus", "title": "How to return the difference between two struct values in a third struct?", "body": "<p>Please read the following code and guide me on how do I return the int elapsedTime as a struct type as the third time struct e.g. time3 and display it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;&gt;\n#include &lt;math.h&gt;\n\n#include \"Time.h\"\n\nvoid elapsedTime(struct time time1, struct time time2); // Prototype\n\nint main(){\n\n    struct time time1 = {3, 45, 15};\n    struct time time2 = {9, 44, 03};\n\n    elapsedTime(time1, time2);\n\n    return 0;\n}\n\n\nvoid elapsedTime(struct time time1, struct time time2){\n\n    int elapsedTime = ((time1.Hours * MINUTES_IN_AN_HOUR * \n    SECONDS_IN_A_MINUTE) + (time1.Minutes * SECONDS_IN_A_MINUTE) + \n    time1.Seconds) - ((time2.Hours * MINUTES_IN_AN_HOUR * \n    SECONDS_IN_A_MINUTE) + (time2.Minutes * SECONDS_IN_A_MINUTE) + \n    time2.Seconds);\n\n    printf(\" %d \\n\", abs(elapsedTime));\n    return;\n}\n</code></pre>\n\n<p>Structure in header file:</p>\n\n<pre><code>struct time{\n    int Hours;\n    int Seconds;\n    int Minutes;\n};\n</code></pre>\n"}, {"tags": ["c", "sockets", "networking"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1507069979, "post_id": 46554394, "comment_id": 80063105, "body": "Hard to do that if you don\u2019t include the code."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1507071131, "post_id": 46554394, "comment_id": 80063384, "body": "&#39;It displays error&#39; is not a problem description."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1507071568, "post_id": 46554394, "comment_id": 80063494, "body": "It looks like you\u2019re relying on UDP packets arriving in order (or at all), but that\u2019s not necessarily the case. Try some text that\u2019s long enough to get split across multiple chunks. Is this a school assignment?"}, {"owner": {"reputation": 1, "user_id": 8322703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886a864d2daa797aa3de6d43798edfee?s=128&d=identicon&r=PG&f=1", "display_name": "Poornima Bhat", "link": "https://stackoverflow.com/users/8322703/poornima-bhat"}, "edited": false, "score": 0, "creation_date": 1507071750, "post_id": 46554394, "comment_id": 80063542, "body": "Yes it works fine for text that is long enough. The problem is with the .jpg file or any other image file."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1507071996, "post_id": 46554394, "comment_id": 80063610, "body": "You are assuming that <code>fread()</code> null-terminates the buffer: it doesn&#39;t; and that the data doesn&#39;t contain other nulls: it can. You should use <code>nread</code> instead of <code>strlen(buffer)</code> as the count parameter when sending the file data. And the correct test for end of file is not <code>nread &lt; 1024</code>, which can happen any time: it is <code>nread == 0</code>."}, {"owner": {"reputation": 1, "user_id": 8322703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886a864d2daa797aa3de6d43798edfee?s=128&d=identicon&r=PG&f=1", "display_name": "Poornima Bhat", "link": "https://stackoverflow.com/users/8322703/poornima-bhat"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1507072571, "post_id": 46554394, "comment_id": 80063735, "body": "@EJP I corrected my mistakes in the code.Unfortunately I still have the error with .jpg files. It says could not load image file if I try opening it after running my program:(                                                                                            The corrections I made were on the lines \tn= sendto(sock,buff,1024,0,(struct sockaddr *)&amp;server,sizeof(struct sockaddr)); and to check end of file I  have to check (n==0) But that did not solve my issues."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1507072610, "post_id": 46554394, "comment_id": 80063741, "body": "<code>sendto(sock,buff,1024, ...)</code> should be <code>sendto(sock,buff,nread, ...)</code>. I already stated that clearly. And you still aren&#39;t handling out of sequence packets, or missing or duplicated ones. In fact there is nothing reliable about this code at all. You need sequence numbers <i>in the packets</i>, which are removed when writing the data to the file; you need an ACK or NACK mechanism for missing packets; you need a mechanism that ignores duplicates; ... You&#39;ve barely started."}, {"owner": {"reputation": 1, "user_id": 8322703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886a864d2daa797aa3de6d43798edfee?s=128&d=identicon&r=PG&f=1", "display_name": "Poornima Bhat", "link": "https://stackoverflow.com/users/8322703/poornima-bhat"}, "edited": false, "score": 0, "creation_date": 1507073340, "post_id": 46554394, "comment_id": 80063894, "body": "ok. I will improve my code"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507073949, "post_id": 46554394, "comment_id": 80064035, "body": "tcp an option? Unless this is an assignment specifically about writing a reliable protocol, just use tcp. I never understand people trying to morph udp into reliability. A reliable protocol already exists (although somewhat bloated).. use it!  /rant. Now, I also highly recommend using some kind of packet capture tool (wireshark, tcpdump, message analyzer, etc) so you know exactly what you&#39;re sending. Forget the pictures, use big files of known data. Hash them on both sides. Keep decreasing file size until you get hashes that match. This should help narrow down when the problem manifests."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507074279, "post_id": 46554394, "comment_id": 80064105, "body": "You can also heavily decrease your packet size and use smaller files. Send 5 bytes a packet for a 20 byte file, then for a 23 byte file (something not evenly divisible). This will be far easier to keep a handle on what&#39;s happening. You say it works fine for a string, maybe you&#39;re just getting some extra junk at the end that you&#39;re not seeing in notepad. If it was working for binary files, then it would also be working for .jpegs. If you&#39;re getting some junk at the end or something, the jpeg view may not know what to do with that and then it complains."}, {"owner": {"reputation": 1, "user_id": 8322703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886a864d2daa797aa3de6d43798edfee?s=128&d=identicon&r=PG&f=1", "display_name": "Poornima Bhat", "link": "https://stackoverflow.com/users/8322703/poornima-bhat"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1507075424, "post_id": 46554394, "comment_id": 80064375, "body": "@EJP ..I could fix the bug with your suggestions. Thanks for the help:)"}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1507107597, "creation_date": 1507107597, "answer_id": 46560888, "question_id": 46554394, "link": "https://stackoverflow.com/questions/46554394/socket-program-reliable-data-transfer-using-udp/46560888#46560888", "title": "socket program - reliable data transfer using UDP", "body": "<ol>\n<li>You are assuming that <code>fread()</code> null-terminates the buffer. It doesn't.</li>\n<li>You are assuming that the data doesn't contain other nulls: it can.</li>\n<li>You should use <code>nread</code> instead of <code>strlen(buffer)</code> as the count parameter when sending the file data.</li>\n<li>The correct test for end of file is not <code>nread &lt; 1024</code>, which can happen any time: it is <code>nread == 0</code>.</li>\n<li>You aren't handling out of sequence packets, or missing or duplicated ones. In fact there is nothing reliable about this code at all. You need sequence numbers in the packets, which are removed when writing the data to the file; you need an ACK or NACK mechanism for missing packets; you need a mechanism that ignores duplicates; ...</li>\n</ol>\n\n<p>You've barely started.</p>\n"}], "owner": {"reputation": 1, "user_id": 8322703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886a864d2daa797aa3de6d43798edfee?s=128&d=identicon&r=PG&f=1", "display_name": "Poornima Bhat", "link": "https://stackoverflow.com/users/8322703/poornima-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1507107597, "creation_date": 1507069907, "last_edit_date": 1507071695, "question_id": 46554394, "link": "https://stackoverflow.com/questions/46554394/socket-program-reliable-data-transfer-using-udp", "title": "socket program - reliable data transfer using UDP", "body": "<p>I have written code for reliable data transfer in C. Here the client sends the file to the server in chunks of 1024 bytes. And the server writes the packets received into another file. </p>\n\n<p>The program works fine for string file/binary data file. But when I try to copy image file there comes the problem.   when I try transferring .jpg file there is no compilation error or run time error. But when I try opening the destination file it says,\n\"could not open image file','error interpreting jpeg file' ' improper call to jpeg library in state 201\".</p>\n\n<p>Can anybody look into the codes and suggest any solution?</p>\n\n<p>Here is my client code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;netdb.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;arpa/inet.h&gt;\n\nchar *itoa(long i,char *s,int dummy_radix)\n{\n    sprintf(s,\"%ld\",i);\n    return s;\n}\n\nint main(int argc, int *argv[])\n{\n    int sock,length,n;\n    struct sockaddr_in server,from;\n    struct hostent *hp;\n    long int packets =0;\n    unsigned char buff[1024] = {0};\n\n    // checking if hostname and the port address is provided //\n    if(argc!=3)\n    {\n        printf(\"insufficient arguments\\n\");\n        exit(1);\n    }\n\n    //create a socket//\n    sock = socket(AF_INET,SOCK_DGRAM,0);\n\n    if(sock&lt;0)\n    {\n        printf(\"error in opening socket\\n\");\n        return 1;\n    }\n\n    //to get  the hostname of the system or the machine//\n    hp= gethostbyname(argv[1]);\n\n    if(hp==0)\n    {\n        printf(\"Unknown host\\n\");\n        return 1;\n    }\n    //build the server's IP address //\n    bzero((char *)&amp;server,sizeof(server));\n    bcopy((char*)hp-&gt;h_addr,(char *)&amp;server.sin_addr,hp-&gt;h_length);\n    server.sin_family = AF_INET;\n    server.sin_port =  htons(atoi(argv[2]));\n    length = sizeof(server);\n\n    /*open the file that we wish to transfer*/\n    FILE *fp = fopen(\"landscape.jpeg\",\"rb\");\n    if(fp==NULL)\n    {\n        printf(\"file open error\");\n        return 1;\n    }\n    fseek(fp,0,SEEK_END); //if exists read the size of the file \n    size_t file_size = ftell(fp);\n    fseek(fp,0,SEEK_SET); \n\n    printf(\"size of the file is %d\\n\", file_size);\n\n    /*find the number of packets*/\n    packets = (file_size/1024)+1 ;\n\n    /*send the number of packets to the server*/\n    itoa(packets,buff,10);\n    n = sendto(sock,buff,strlen(buff),0,(struct sockaddr *)&amp;server,sizeof(struct sockaddr));\n    if(n&lt;0)\n    {\n        printf(\"error in sending message to the serveR\");\n        return 1;\n    }\n\n    /*Read data from file and send it*/\n    int packetNum = 0;\n    while(1)\n    {\n        /*First read file in chunks of  1024  bytes */\n        int nread = fread(buff,1,1024,fp);\n        //printf(\"Bytes read %d\\n\",nread);\n\n        /*if read was success ,send data*/\n        if(nread&gt;0)\n        {\n            //printf(\"data sent now is %s\\n\",buff);\n            n = sendto(sock,buff,strlen(buff),0,(struct sockaddr *)&amp;server,sizeof(struct sockaddr));\n            printf(\"Sending %d, numBytes sent: %d\\n\", packetNum, n);\n            packetNum++;\n            if(n&lt;0)\n            {\n                printf(\"error in sending message to the server\");\n                fclose(fp);\n                return 1;\n            }\n        }\n\n        /*There is something tricky going on with the read..\n         * Either there was error ,or we reached end of  file.\n         */\n        if(nread&lt;1024)\n        {\n            if(feof(fp))\n                printf(\"End of file\\n\");\n\n            if(ferror(fp))\n                printf(\"Error reading\\n\");\n            break;\n        }\n    }\n    close(sock);\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is my server code</p>\n\n<pre><code>#include&lt;sys/socket.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;netdb.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;arpa/inet.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int sock,length,fromlen,n;\n    struct sockaddr_in server;\n    struct sockaddr_in from;\n    char buf[1024];\n    char file_buf[1024];\n    int packets = 0;\n    int received = 0;\n    FILE *newfp;\n    newfp = fopen(\"output.jpeg\",\"wb\");\n    if(newfp==NULL)\n    {\n        printf(\"error opening the file\\n\");\n        return 1;\n    }    \n    if(argc&lt;2)\n    {\n        fprintf(stderr, \"no port number specified\\n\");\n        exit(0);\n    }\n    sock = socket(AF_INET,SOCK_DGRAM,0);\n    if(sock&lt;0)\n    {\n        printf(\"error in opening socket\\n\");\n        return 1;\n    }\n    length = sizeof(server);\n    bzero(&amp;server,length);\n    server.sin_family= AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons(atoi(argv[1]));\n    if(bind(sock,(struct sockaddr*)&amp;server,length)&lt;0)\n    {\n        printf(\"cannot bind\\n\");\n        return 1;\n    }\n    fromlen = sizeof(struct sockaddr_in);\n    n = recvfrom(sock,buf,1024,0,(struct sockaddr *)&amp;from,&amp;fromlen);\n    if(n&lt;0)\n    {\n        printf(\"recvfrom  error\\n\");\n        return 1;\n    }\n\n    packets = atoi(buf);\n    printf(\"Num packets expected: %d\\n\", packets);\n\n    while(received&lt;packets)\n    {\n        n = recvfrom(sock,buf,sizeof (buf),0,(struct sockaddr *)&amp;from,&amp;fromlen);    \n\n        //printf (\"%d\\n\", n);\n        printf(\"Packet num %d, numBytes received: %d\\n\", received, n);\n\n        if(n&lt;0)\n        {\n            printf(\"recvfrom  error\\n\");\n            return 1;\n        }\n        //printf(\"%s\",buf);\n        if((fwrite(buf,1,n,newfp)) &lt; n)\n        {\n            printf(\"error in writing to the file\\n\");\n            return 1;\n        }\n        received++;\n    }\n    printf(\"Finished\\n\");\n    fclose(newfp);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1507066343, "post_id": 46553727, "comment_id": 80061890, "body": "Your <code>while</code> condition is wrong.  Change <code>(again == &#39;y&#39; || &#39;Y&#39;)</code> to <code>(again == &#39;y&#39; || again == &#39;Y&#39;)</code>."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1507072985, "post_id": 46553727, "comment_id": 80063815, "body": "<code>scanf(&quot;%c\\n&quot;, &amp;again);</code>-- it is almost always wrong to use trailing whitespace characters in <code>scanf()</code> format strings; this tends to cause problems with interactive input. Most <code>scanf()</code> conversion specifiers automatically skip over leading whitespace characters, but <code>%c</code>, <code>%[]</code> and <code>%n</code> are exceptions. You can simply add a leading space to tell <code>scanf()</code> to skip leading whitespace characters (of which <code>\\n</code> is one): <code>scanf(&quot; %c&quot;, &amp;again);</code>. Also, <code>fflush(stdin)</code> causes undefined behavior, according to the Standard; there are better ways to clear the input stream."}, {"owner": {"reputation": 31, "user_id": 8701447, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4898517a63932b70db4050f82883e81b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohtsu", "link": "https://stackoverflow.com/users/8701447/mohtsu"}, "edited": false, "score": 0, "creation_date": 1507097218, "post_id": 46553727, "comment_id": 80069827, "body": "Thank you for educating me on that Mr. Bowling , I love learning new things! Would you give me a few examples of how you would clear the input stream? I am still new-ish to C and would love any extra info you have to spare :)"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1507100766, "post_id": 46553727, "comment_id": 80071545, "body": "<a href=\"https://stackoverflow.com/questions/40958298/is-this-the-proper-way-to-flush-the-c-input-stream\">Here</a>, are a <a href=\"https://stackoverflow.com/questions/40554617/while-getchar-n/40555134#40555134\">few links</a> pertaining to <a href=\"https://stackoverflow.com/questions/36715002/how-to-clear-stdin-before-getting-new-input\">clearing the input stream</a>. And here is a link <a href=\"https://stackoverflow.com/questions/43032984/using-scanfd-with-a-space-after-the-d/43033218#43033218\">about trailing whitespace in format strings</a>."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8701447, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4898517a63932b70db4050f82883e81b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohtsu", "link": "https://stackoverflow.com/users/8701447/mohtsu"}, "edited": false, "score": 0, "creation_date": 1507068632, "post_id": 46553752, "comment_id": 80062704, "body": "I still am unable to give the user the option to re-run the while loop. Instead, pressing y or n terminates the program. Are you able to see why this is?"}], "tags": [], "owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "is_accepted": true, "score": 0, "last_activity_date": 1507066307, "creation_date": 1507066307, "answer_id": 46553752, "question_id": 46553727, "link": "https://stackoverflow.com/questions/46553727/my-main-while-loop-will-run-and-run-again-when-the-user-enters-y-or-n-rega/46553752#46553752", "title": "My main while loop will run, and run again when the user enters &#39;y&#39; or &#39;n&#39;. Regardless of what the user says", "body": "<p>Try:</p>\n\n<pre><code>while (again == 'y' || again == 'Y')\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>while (again == 'y' || 'Y')\n</code></pre>\n\n<p>Otherwise, your program thinks you only want to evaluate <code>'Y'</code>, which is always true (i.e. non-zero).</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 8701447, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4898517a63932b70db4050f82883e81b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohtsu", "link": "https://stackoverflow.com/users/8701447/mohtsu"}, "edited": false, "score": 0, "creation_date": 1507066570, "post_id": 46553787, "comment_id": 80061980, "body": "Thank you for explaining the why behind this! Helped me learn something new, I appreciate it :)"}, {"owner": {"reputation": 31, "user_id": 8701447, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4898517a63932b70db4050f82883e81b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohtsu", "link": "https://stackoverflow.com/users/8701447/mohtsu"}, "edited": false, "score": 0, "creation_date": 1507068591, "post_id": 46553787, "comment_id": 80062689, "body": "The original question was still unanswered, could you take a look and see if you know why?"}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 1, "last_activity_date": 1507066450, "creation_date": 1507066450, "answer_id": 46553787, "question_id": 46553727, "link": "https://stackoverflow.com/questions/46553727/my-main-while-loop-will-run-and-run-again-when-the-user-enters-y-or-n-rega/46553787#46553787", "title": "My main while loop will run, and run again when the user enters &#39;y&#39; or &#39;n&#39;. Regardless of what the user says", "body": "<pre><code>while (again == 'y' || 'Y') { ...\n</code></pre>\n\n<p><code>||</code> doesn't work like that. <code>&amp;&amp;</code> and <code>||</code> are used to connect complete boolean expressions. What you mean is:</p>\n\n<pre><code>while (again == 'y' || again == 'Y') { ...\n</code></pre>\n\n<p>In C, the expression <code>'Y'</code> is just the integer 89, which C interprets as \"true\" because it is not zero. Thus, your first expression was </p>\n\n<pre><code>while (&lt;something&gt; || &lt;true&gt;) { ...\n</code></pre>\n\n<p>which is always true.</p>\n"}, {"tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": false, "score": 1, "last_activity_date": 1507066935, "creation_date": 1507066935, "answer_id": 46553884, "question_id": 46553727, "link": "https://stackoverflow.com/questions/46553727/my-main-while-loop-will-run-and-run-again-when-the-user-enters-y-or-n-rega/46553884#46553884", "title": "My main while loop will run, and run again when the user enters &#39;y&#39; or &#39;n&#39;. Regardless of what the user says", "body": "<p>The conditions of your while loop evaluate to true.  Like others have mentioned, <code>(again == 'y' || 'Y')</code> should be <code>((again == 'y') || (again == 'Y'))</code>.  What I have not seen otherwise mentioned is that you also initialize <code>again</code> to <code>'n'</code>, which would then evaluate to false on the first run.  Instead of initializing again, you could instead transform it do a do-while loop so you always go into the loop on the first time and then evaluate the condition.</p>\n\n<pre><code>do {\n    ...\n} while((again == 'y') || (again == 'Y'));\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8701447, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4898517a63932b70db4050f82883e81b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohtsu", "link": "https://stackoverflow.com/users/8701447/mohtsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 46553752, "answer_count": 3, "score": 1, "last_activity_date": 1507071785, "creation_date": 1507066177, "last_edit_date": 1507071785, "question_id": 46553727, "link": "https://stackoverflow.com/questions/46553727/my-main-while-loop-will-run-and-run-again-when-the-user-enters-y-or-n-rega", "title": "My main while loop will run, and run again when the user enters &#39;y&#39; or &#39;n&#39;. Regardless of what the user says", "body": "<p>When I added the main while loop, the program just always runs, and runs through again and with a message telling me there is invalid data (from my first input validation). Can anyone show me how to give the user the option to end the program? Basically, I just want to give the user the option to end the program by pressing 'y or 'n'. Would be open to hearing new ideas, such as using a for, or do while loop! I just want the program to go through. I want the user to be able to go through as many times as they want, while having the option to leave after each run through.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n//Declare functions\nvoid displayWelcome(void);\ndouble getAverage(double yards, double carries);\nvoid endMessage(void);\n\n\nint main()\n{\n//Declare variables\n    double yards, carries, average, bestAverage;\n    char again = 'y';\n//Call function to display welcome message\n    displayWelcome();\n\n    while (again == 'y' || again =='Y') {\n//Prompt user for the number of yards,\n    printf(\"Enter the number of yards:\");\n/*\nScan in the value of 'yards' and send user into a loop if they enter \nincorrect data\nWhile loop to validate the data of the value 'yards'\n*Works with a numerical value greater than 0\n*/\n    while ( 1 != scanf( \"%lf\", &amp;yards ) || yards &lt;= 0)\n{\n\n    fflush(stdin);\n    printf(\"Enter a numerical value greater than zero:\");\n}\n//Prompt user for the number of carries, followed by an input scan to get \n//value of carries\n    printf(\"Enter the number of carries:\");\n/*\nScan in the value of 'yards' and send user into a loop if they enter \nincorrect data\n    While loop to validate the data of the value 'carries'\n*Works with a numerical value greater than zero\n*/\n    while ( 1 != scanf(\"%lf\", &amp; carries) || carries &lt;= 0)\n{\n//Refreshes the input value of the variable 'carries' and prompts the \n//user to type in new value for 'carries'\n    fflush(stdin);\n    printf(\"Enter a numerical value greater than zero:\");\n}\n\n    average = getAverage( yards, carries);\n    printf(\"yards:%g carries:%g average:%g\\n\", yards, carries, average);\n//Give the user the option to run the program again\n   printf(\"Would you like to run the program again? Enter (y)es or (n)o\\n\");\n   scanf(\"%c\\n\", &amp;again);\n}\n   endMessage();\n   return 0;\n}\n\n    void displayWelcome(void)\n{\n    printf(\"Welcome to Football Stats\\n\");\n}\n\n    double getAverage(double yards, double carries)\n{\n    double average;\n    average = yards + carries / 2;\n    return average;\n}\n    void endMessage(void){\n    printf(\"\\nThese results were brought to you by \");\n}\n</code></pre>\n\n<p><strong>UPDATE (QUESTION STILL UNANSWERED)</strong> It worked when I presses 'n' to stop the program. However, when I press 'y' to run it again (with the newly input code) it ALSO stops the program. So back to my question, can anyone see WHAT I am doing wrong so that I can give the user the option to close the program?</p>\n\n<p><strong>FINAL UPDATE</strong> I found the issue. I did \"scanf(\"%c\\n\", &amp;again);\" (clearing the values) when I should have put \"scanf(\"\\n%c\", &amp;again);\". Thank you to everyone who spent the time to help me!</p>\n"}]