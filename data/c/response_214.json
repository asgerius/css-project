[{"tags": ["c"], "comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1550102104, "post_id": 54681238, "comment_id": 96151331, "body": "Exactly what it says.  You have a <code>do</code> with no matching <code>while</code>.  <code>do{...} while( cond ) ;</code>"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1550102109, "post_id": 54681238, "comment_id": 96151334, "body": "<code>do</code> requires a <code>while</code> at the end of the code block."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1550102417, "post_id": 54681238, "comment_id": 96151435, "body": "Also your logic and equalities look incorrect.  The <code>while (random!=userinput)</code> should be just <code>else</code> (no condition), and the preceding conditions <code>&gt;</code> and <code>&lt;</code> rather than <code>&gt;=</code> and &#39;&lt;=`."}], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 11032224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cdb9fe5eeae6a5b50ac1719341257b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Dominguez Perea", "link": "https://stackoverflow.com/users/11032224/sarah-dominguez-perea"}, "is_accepted": true, "score": 1, "last_activity_date": 1550102403, "creation_date": 1550102403, "answer_id": 54681286, "question_id": 54681238, "link": "https://stackoverflow.com/questions/54681238/error-expected-while-before-return-have-equal-amounts-of-closing-and-openi/54681286#54681286", "title": "error: expected \u2018while\u2019 before \u2018return\u2019, Have equal amounts of closing and opening {}s and cant find the proble", "body": "<p>You have a <code>do</code> in your loop and it requires a <code>while(condition)</code>. Here's a sample loop to execute your statements while userinput is not equal to the random number:</p>\n\n<pre><code>do {\n\n // your statements\n\n} while (userinput != random);\n\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 10999600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4035cfba91ee2ecb7ca77bca07122bb?s=128&d=identicon&r=PG&f=1", "display_name": "Detsibli", "link": "https://stackoverflow.com/users/10999600/detsibli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "closed_date": 1550124816, "accepted_answer_id": 54681286, "answer_count": 1, "score": -3, "last_activity_date": 1550102403, "creation_date": 1550101975, "question_id": 54681238, "link": "https://stackoverflow.com/questions/54681238/error-expected-while-before-return-have-equal-amounts-of-closing-and-openi", "closed_reason": "Not suitable for this site", "title": "error: expected \u2018while\u2019 before \u2018return\u2019, Have equal amounts of closing and opening {}s and cant find the proble", "body": "<p>error: expected \u2018while\u2019 before \u2018return\u2019\nreturn 0</p>\n\n<p>I can't figure why it asks for a \"while\" before return</p>\n\n<p>Tried nesting the code differently and can't find it work.</p>\n\n<pre><code>int random;\n    int userinput;\n    random = rand() % 1000 + 1;\n\n    do \n    {\n    printf(\"Can you guess the random number? \\n\");\n    scanf(\"%d\", &amp;userinput);\n\n        if (random &gt;= userinput)\n        {   \n            printf(\"The number you entered is too high! Try again! \\n\");\n        }\n\n        else if (random &lt;= userinput) \n        {\n            printf(\"The number you entered is too low! Try again! \\n\");\n        }\n\n        while (random!=userinput)\n        {\n           printf(\"You guessed it! Correct! The number is: %d \\n\", random);\n        }\n    }\n    return 0;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1550097804, "post_id": 54680580, "comment_id": 96150037, "body": "What are you passing to the function, and what are you observing happens?"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1550115595, "post_id": 54680580, "comment_id": 96154444, "body": "need more information. Where are the &#39;argv&#39; coming from to the function. From &#39;main&#39;?"}], "answers": [{"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 5, "last_activity_date": 1550098028, "creation_date": 1550098028, "answer_id": 54680632, "question_id": 54680580, "link": "https://stackoverflow.com/questions/54680580/c-if-condition-not-accepting-argument/54680632#54680632", "title": "C If condition not accepting argument", "body": "<p><code>argv[0]</code> points to the program name, not the first argument. <code>argv[1]</code> points to that, if the argument is present.</p>\n\n<p>C Standard, <a href=\"https://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.1\" rel=\"noreferrer\">&sect; 5.1.2.2.1, Program Startup</a>:</p>\n\n<blockquote>\n  <p>If the value of argc is greater than zero, the string pointed to by <strong>argv[0] represents the program name</strong>; argv[0][0] shall be the null character if the program name is not available from the host environment. If the value of argc is greater than one, the strings pointed to by argv[1] through argv[argc-1] represent the program parameters.</p>\n</blockquote>\n\n<p>Emphasis mine.</p>\n"}], "owner": {"reputation": 51, "user_id": 11039104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9cd3df774863b2bd547958dbfa256f?s=128&d=identicon&r=PG&f=1", "display_name": "Jazael", "link": "https://stackoverflow.com/users/11039104/jazael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1550098174, "creation_date": 1550097700, "last_edit_date": 1550098174, "question_id": 54680580, "link": "https://stackoverflow.com/questions/54680580/c-if-condition-not-accepting-argument", "title": "C If condition not accepting argument", "body": "<p>I'm new to C and I'm trying to use an if statement to check for an argument (in this case \"jobs\") but it doesn't seem to be working...</p>\n\n<pre><code>int builtin_cmd(char **argv)\n{\n  printf(\"test1\\n\");\n  if (!strcmp(argv[0], \"quit\")) { //quit command\n    exit(0);\n  }\n  if ((!strcmp(argv[0], \"fg\")) || (!strcmp(argv[0], \"bg\"))) { //fg or bg command\n    do_bgfg(argv);\n    return 1;\n  }\n  if (!strcmp(argv[0], \"jobs\")) { //jobs command\n    printf(\"test2\\n\");\n    listjobs(jobs);\n    printf(\"test3\\n\");\n    return 1;\n  }\n  printf(\"test4\\n\");\n  return 0;     /* not a builtin command */\n}\n</code></pre>\n\n<p>I input \"jobs\", but based on the test output (1-4-repeat), it's not registering. Does anyone know what might be going wrong?</p>\n"}, {"tags": ["c", "fork", "posix", "wait"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1550097239, "post_id": 54680483, "comment_id": 96149857, "body": "All you can say is it&#39;s not guaranteed."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 1, "creation_date": 1550097390, "post_id": 54680483, "comment_id": 96149901, "body": "Use explicit synchronisation if you want a guaranteed sequence of execution =&gt; If you don\u2019t use synchrronization then you don\u2019t get a guaranteed sequence. Depending on a non-guaranteed sequence which very occasionally happens in a different way can cause very occasional inexplicable/irreproducible bugs."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1550099638, "post_id": 54680483, "comment_id": 96150668, "body": "<code>wait</code> only waits for the process&#39;s direct children, not grandchildren."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550127281, "post_id": 54680483, "comment_id": 96157631, "body": "Which aspect of the documentation on <code>wait()</code> makes you think that it is indeterminate? You&#39;ve coded it so that it is determinate, AFAICS. The &quot;<code>p1 done</code>&quot; message can&#39;t appear until p2 has exited. The message must be flushed before p1 terminates, almost regardless of what happens after p1 returns. A possible exception would be if the output is neither line buffered nor unbuffered and the p1 code after the return does an <code>_exit()</code> or <code>quick_exit()</code> \u2014 then the p1 message won&#39;t appear). Otherwise, p0 is waiting on p1; the output from p1 must appear before the &quot;<code>p0 done</code>&quot; message appears."}], "answers": [{"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 4, "last_activity_date": 1550099369, "creation_date": 1550099369, "answer_id": 54680830, "question_id": 54680483, "link": "https://stackoverflow.com/questions/54680483/will-wait-calls-be-executed-in-a-predictable-order/54680830#54680830", "title": "Will wait() calls be executed in a predictable order?", "body": "<p>Process 0 will always wait for process 1, because that's the only child it has.\nAnd process 1 will always wait for process 2, because that's the only child it has.</p>\n\n<p>Process 0 won't return from <code>wait</code> until process 1 exits, which means that process 1 has already printed its message, because it does that before it exits.</p>\n\n<p>So in this case process 0 cannot continue until after the message has been printed.</p>\n"}], "owner": {"reputation": 280, "user_id": 6136888, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/554bab2dae06ff48df9db3ce38be2626?s=128&d=identicon&r=PG&f=1", "display_name": "Zaya", "link": "https://stackoverflow.com/users/6136888/zaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 54680830, "answer_count": 1, "score": 1, "last_activity_date": 1550099369, "creation_date": 1550097149, "last_edit_date": 1550098144, "question_id": 54680483, "link": "https://stackoverflow.com/questions/54680483/will-wait-calls-be-executed-in-a-predictable-order", "title": "Will wait() calls be executed in a predictable order?", "body": "<p>Suppose I had the following code:</p>\n\n<pre><code>pid_t pid0, pid1;\n\npid0 = fork();\nif (!pid0) {\n    pid1 = fork();\n\n    if (!pid1) { // p2\n        /* do something */\n        return; \n    } else {    // p1\n        wait(NULL);\n        printf(\"p1 done\\n\");\n        return;\n   }\n} \n\n// p0\nwait(NULL):\nprintf(\"p0 done\\n\");\n</code></pre>\n\n<p>Is the order of the print statements deterministic, or will it be up to the will of the CPU? In practice, it seems to be the same every time, but the docs for <code>wait()</code> make it seem like it should be random. </p>\n\n<p>EDIT: I've thought about it some more, and I'm wondering if it's always in that order because p0 doesn't have p2 as a child process; that's p1's child. So \"p0 done\" won't print until p1 finishes waiting for its child, p2. So, I suppose the real question is does <code>wait()</code> wait for children's children, or just processes one \"generation\" away</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1550095493, "post_id": 54680129, "comment_id": 96149221, "body": "Look up ring buffers.  If you don&#39;t use a ring buffer, then you&#39;re hard pressed to avoid copying the data (use <code>memmove()</code> \u2014 do not use <code>memcpy()</code>) when you remove the element from the front.  Using a ring buffer, the starting position rotates around the array and adding an element involves overwriting a single array element and adjusting one counter."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550095549, "post_id": 54680129, "comment_id": 96149243, "body": "Anyway, if you want a ring buffer - implement a ring buffer. These exercises with shifting are not very practical."}, {"owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "edited": false, "score": 0, "creation_date": 1550095949, "post_id": 54680129, "comment_id": 96149384, "body": "The ring buffer code looks pretty complicated. This is wayy harder than I thought. Might end up using a different method, I don&#39;t have much time to implement this."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550096886, "post_id": 54680129, "comment_id": 96149740, "body": "Ring buffers themselves are pretty easy.  Adapting the code to use them might be a bit harder.  If your array size is small, then the memory copying isn&#39;t a big problem.  But what&#39;s OK for arrays of 16 integers isn&#39;t OK for arrays of millions of large structures."}, {"owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550097114, "post_id": 54680129, "comment_id": 96149817, "body": "@JonathanLeffler I&#39;d think that I need a size of 50-100 at most. I am working with a very slow ARM cpu, so I am not sure if memory copying can become a problem. Thanks anyways"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1550097211, "post_id": 54680129, "comment_id": 96149847, "body": "there is no <code>arr[10]</code> in <code>arr[10]</code>!!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550097222, "post_id": 54680129, "comment_id": 96149852, "body": "Note that <code>if (arr[10] != 555)</code> is accessing the array out of bounds.  That won&#39;t be helping your cause."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550098429, "post_id": 54680129, "comment_id": 96150267, "body": "I don&#39;t actually see any code that shuffles the array down. It would be easier to see what&#39;s required, perhaps, if you had a function to add an entry to the array (parameter: new value to be added, and the array and the length in use), and another to remove the front item, and then a simple main program that called the add code twice for every one remove. You probably shouldn&#39;t be using sentinel values (555); you should have a count of how many items are already in use. Do you know about structures yet? If so, you can put the index and the array into a structure to be passed as a pointer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550116072, "post_id": 54680129, "comment_id": 96154545, "body": "Detail: &quot;clean way to add elements to an array&quot; --&gt;  for clarity, an array cannot have elements &quot;added&quot; to it.  Once an array is defined, its size does not change.  Certainly code can assigned <i>some</i> elements and not others, yet the array size is fixed."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 0, "last_activity_date": 1550108318, "last_edit_date": 1550108318, "creation_date": 1550105658, "answer_id": 54681679, "question_id": 54680129, "link": "https://stackoverflow.com/questions/54680129/clean-way-to-add-elements-to-fixed-length-array-and-removing-the-first-element/54681679#54681679", "title": "Clean way to add elements to fixed length array and removing the first element?", "body": "<p>Neither a ring buffer solution nor a 'shuffle buffer' solution is particularly complex.  Here's one of each.  Note that the ring buffer solution stores 15 values in an array of 16; the shuffle buffer solution use an array of size 15.  The solutions give the same sequence of outputs if you map the entries such as <code>( 1:  30)</code> to <code>(99: 30)</code> to allow for the differences in the way that the data is stored.</p>\n\n<p>Both solutions assume you understand structures (and pointers to structures too).</p>\n\n<h3>Shuffle Buffer</h3>\n\n<p>This corresponds most closely to the code in the question.</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nenum { SB_SIZE = 15 };\n\ntypedef int Data;\n#define DATA_PRI_FMT \"d\"\n\nstruct ShuffleBuffer\n{\n   size_t sb_last;\n   Data   sb_data[SB_SIZE];\n};\ntypedef struct ShuffleBuffer ShuffleBuffer;\n\nstatic inline void sb_shuffle(ShuffleBuffer *sbp)\n{\n    if (sbp-&gt;sb_last &gt; 0)\n    {\n        memmove(sbp-&gt;sb_data, sbp-&gt;sb_data + 1, (SB_SIZE - 1) * sizeof(sbp-&gt;sb_data[0]));\n        sbp-&gt;sb_last--;\n    }\n}\n\nstatic void sb_insert(ShuffleBuffer *sbp, Data value)\n{\n    if (sbp-&gt;sb_last == SB_SIZE)\n        sb_shuffle(sbp);\n    sbp-&gt;sb_data[sbp-&gt;sb_last++] = value;\n}\n\nstatic bool sb_remove(ShuffleBuffer *sbp, Data *valuep)\n{\n    if (sbp-&gt;sb_last == 0)\n        return false;\n    *valuep = sbp-&gt;sb_data[0];\n    sb_shuffle(sbp);\n    return true;\n}\n\nstatic void sb_print(const char *tag, const ShuffleBuffer *sbp)\n{\n    printf(\"%s: (last = %zu)\\n\", tag, sbp-&gt;sb_last);\n    int nbytes = 0;\n    const char *pad = \"\";\n    for (size_t i = 0; i &lt; sbp-&gt;sb_last; i++)\n    {\n        nbytes += printf(\"%s(%2zu: %3\" DATA_PRI_FMT \")\", pad, i, sbp-&gt;sb_data[i]);\n        if (nbytes &gt; 40)\n        {\n            putchar('\\n');\n            nbytes = 0;\n            pad = \"\";\n        }\n        else\n            pad = \" \";\n    }\n    if (nbytes != 0)\n        putchar('\\n');\n}\n\nint main(void)\n{\n    ShuffleBuffer rb = { 0, { 0 } };\n\n    for (Data i = 0; i &lt; 100; i++)\n    {\n        sb_insert(&amp;rb, i * 7 + 23);\n        sb_print(\"Post insert\", &amp;rb);\n        if ((i &amp; 1) == 1)\n        {\n            Data value;\n            if (sb_remove(&amp;rb, &amp;value))\n                printf(\"Value %\" DATA_PRI_FMT \" removed\\n\", value);\n            else\n                sb_print(\"Ring Buffer Empty\", &amp;rb);\n        sb_print(\"Post remove\", &amp;rb);\n        }\n    }\n\n    printf(\"Insert/remove loop over\\n\");\n\n    Data value;\n    while (sb_remove(&amp;rb, &amp;value))\n        printf(\"Value %\" DATA_PRI_FMT \" removed\\n\", value);\n\n    return 0;\n}\n</code></pre>\n\n<h3>Ring Buffer</h3>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n\nenum { RB_SIZE = 16 };\n\ntypedef int Data;\n#define DATA_PRI_FMT \"d\"\n\nstruct RingBuffer\n{\n   size_t rb_head;\n   size_t rb_tail;\n   Data   rb_data[RB_SIZE];\n};\ntypedef struct RingBuffer RingBuffer;\n\nstatic inline size_t rb_nextpos(size_t pos)\n{\n    return (pos + 1) % RB_SIZE;\n}\n\nstatic void rb_insert(RingBuffer *rbp, Data value)\n{\n    rbp-&gt;rb_data[rbp-&gt;rb_head] = value;\n    rbp-&gt;rb_head = rb_nextpos(rbp-&gt;rb_head);\n    if (rbp-&gt;rb_tail == rbp-&gt;rb_head)\n        rbp-&gt;rb_tail = rb_nextpos(rbp-&gt;rb_tail);\n}\n\nstatic bool rb_remove(RingBuffer *rbp, Data *valuep)\n{\n    if (rbp-&gt;rb_head == rbp-&gt;rb_tail)\n        return false;\n    *valuep = rbp-&gt;rb_data[rbp-&gt;rb_tail];\n    rbp-&gt;rb_tail = rb_nextpos(rbp-&gt;rb_tail);\n    return true;\n}\n\nstatic void rb_print(const char *tag, const RingBuffer *rbp)\n{\n    printf(\"%s: (head = %zu, tail = %zu)\\n\", tag, rbp-&gt;rb_head, rbp-&gt;rb_tail);\n    int nbytes = 0;\n    const char *pad = \"\";\n    for (size_t i = rbp-&gt;rb_tail; i != rbp-&gt;rb_head; i = rb_nextpos(i))\n    {\n        nbytes += printf(\"%s(%2zu: %3\" DATA_PRI_FMT \")\", pad, i, rbp-&gt;rb_data[i]);\n        if (nbytes &gt; 40)\n        {\n            putchar('\\n');\n            nbytes = 0;\n            pad = \"\";\n        }\n        else\n            pad = \" \";\n    }\n    if (nbytes != 0)\n        putchar('\\n');\n}\n\nint main(void)\n{\n    RingBuffer rb = { 0, 0, { 0 } };\n\n    for (Data i = 0; i &lt; 100; i++)\n    {\n        rb_insert(&amp;rb, i * 7 + 23);\n        rb_print(\"Post insert\", &amp;rb);\n        if ((i &amp; 1) == 1)\n        {\n            Data value;\n            if (rb_remove(&amp;rb, &amp;value))\n                printf(\"Value %\" DATA_PRI_FMT \" removed\\n\", value);\n            else\n                rb_print(\"Ring Buffer Empty\", &amp;rb);\n        rb_print(\"Post remove\", &amp;rb);\n        }\n    }\n\n    printf(\"Insert/remove loop over\\n\");\n\n    Data value;\n    while (rb_remove(&amp;rb, &amp;value))\n        printf(\"Value %\" DATA_PRI_FMT \" removed\\n\", value);\n\n    return 0;\n}\n</code></pre>\n\n<p>If your compiler is so antiquated that it doesn't recognize <code>inline</code> as a keyword, simply add <code>#define inline /* C99 not available */</code> near the top of the file (or, better, get a compiler that does recognize the almost 20-year old standard).</p>\n\n<h3>Sample output from Ring Buffer</h3>\n\n<pre><code>Post insert: (head = 1, tail = 0)\n( 0:  23)\nPost insert: (head = 2, tail = 0)\n( 0:  23) ( 1:  30)\nValue 23 removed\nPost remove: (head = 2, tail = 1)\n( 1:  30)\nPost insert: (head = 3, tail = 1)\n( 1:  30) ( 2:  37)\nPost insert: (head = 4, tail = 1)\n( 1:  30) ( 2:  37) ( 3:  44)\nValue 30 removed\nPost remove: (head = 4, tail = 2)\n( 2:  37) ( 3:  44)\nPost insert: (head = 5, tail = 2)\n( 2:  37) ( 3:  44) ( 4:  51)\nPost insert: (head = 6, tail = 2)\n( 2:  37) ( 3:  44) ( 4:  51) ( 5:  58)\nValue 37 removed\nPost remove: (head = 6, tail = 3)\n( 3:  44) ( 4:  51) ( 5:  58)\nPost insert: (head = 7, tail = 3)\n( 3:  44) ( 4:  51) ( 5:  58) ( 6:  65)\nPost insert: (head = 8, tail = 3)\n( 3:  44) ( 4:  51) ( 5:  58) ( 6:  65) ( 7:  72)\nValue 44 removed\nPost remove: (head = 8, tail = 4)\n( 4:  51) ( 5:  58) ( 6:  65) ( 7:  72)\nPost insert: (head = 9, tail = 4)\n( 4:  51) ( 5:  58) ( 6:  65) ( 7:  72) ( 8:  79)\nPost insert: (head = 10, tail = 4)\n( 4:  51) ( 5:  58) ( 6:  65) ( 7:  72) ( 8:  79)\n( 9:  86)\nValue 51 removed\nPost remove: (head = 10, tail = 5)\n( 5:  58) ( 6:  65) ( 7:  72) ( 8:  79) ( 9:  86)\nPost insert: (head = 11, tail = 5)\n( 5:  58) ( 6:  65) ( 7:  72) ( 8:  79) ( 9:  86)\n(10:  93)\nPost insert: (head = 12, tail = 5)\n( 5:  58) ( 6:  65) ( 7:  72) ( 8:  79) ( 9:  86)\n(10:  93) (11: 100)\nValue 58 removed\nPost remove: (head = 12, tail = 6)\n( 6:  65) ( 7:  72) ( 8:  79) ( 9:  86) (10:  93)\n(11: 100)\nPost insert: (head = 13, tail = 6)\n( 6:  65) ( 7:  72) ( 8:  79) ( 9:  86) (10:  93)\n(11: 100) (12: 107)\nPost insert: (head = 14, tail = 6)\n( 6:  65) ( 7:  72) ( 8:  79) ( 9:  86) (10:  93)\n(11: 100) (12: 107) (13: 114)\nValue 65 removed\nPost remove: (head = 14, tail = 7)\n( 7:  72) ( 8:  79) ( 9:  86) (10:  93) (11: 100)\n(12: 107) (13: 114)\nPost insert: (head = 15, tail = 7)\n( 7:  72) ( 8:  79) ( 9:  86) (10:  93) (11: 100)\n(12: 107) (13: 114) (14: 121)\nPost insert: (head = 0, tail = 7)\n( 7:  72) ( 8:  79) ( 9:  86) (10:  93) (11: 100)\n(12: 107) (13: 114) (14: 121) (15: 128)\nValue 72 removed\nPost remove: (head = 0, tail = 8)\n( 8:  79) ( 9:  86) (10:  93) (11: 100) (12: 107)\n(13: 114) (14: 121) (15: 128)\nPost insert: (head = 1, tail = 8)\n( 8:  79) ( 9:  86) (10:  93) (11: 100) (12: 107)\n(13: 114) (14: 121) (15: 128) ( 0: 135)\nPost insert: (head = 2, tail = 8)\n( 8:  79) ( 9:  86) (10:  93) (11: 100) (12: 107)\n(13: 114) (14: 121) (15: 128) ( 0: 135) ( 1: 142)\nValue 79 removed\nPost remove: (head = 2, tail = 9)\n( 9:  86) (10:  93) (11: 100) (12: 107) (13: 114)\n(14: 121) (15: 128) ( 0: 135) ( 1: 142)\nPost insert: (head = 3, tail = 9)\n( 9:  86) (10:  93) (11: 100) (12: 107) (13: 114)\n(14: 121) (15: 128) ( 0: 135) ( 1: 142) ( 2: 149)\nPost insert: (head = 4, tail = 9)\n( 9:  86) (10:  93) (11: 100) (12: 107) (13: 114)\n(14: 121) (15: 128) ( 0: 135) ( 1: 142) ( 2: 149)\n( 3: 156)\nValue 86 removed\nPost remove: (head = 4, tail = 10)\n(10:  93) (11: 100) (12: 107) (13: 114) (14: 121)\n(15: 128) ( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156)\nPost insert: (head = 5, tail = 10)\n(10:  93) (11: 100) (12: 107) (13: 114) (14: 121)\n(15: 128) ( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156)\n( 4: 163)\nPost insert: (head = 6, tail = 10)\n(10:  93) (11: 100) (12: 107) (13: 114) (14: 121)\n(15: 128) ( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156)\n( 4: 163) ( 5: 170)\nValue 93 removed\nPost remove: (head = 6, tail = 11)\n(11: 100) (12: 107) (13: 114) (14: 121) (15: 128)\n( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163)\n( 5: 170)\nPost insert: (head = 7, tail = 11)\n(11: 100) (12: 107) (13: 114) (14: 121) (15: 128)\n( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163)\n( 5: 170) ( 6: 177)\nPost insert: (head = 8, tail = 11)\n(11: 100) (12: 107) (13: 114) (14: 121) (15: 128)\n( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163)\n( 5: 170) ( 6: 177) ( 7: 184)\nValue 100 removed\nPost remove: (head = 8, tail = 12)\n(12: 107) (13: 114) (14: 121) (15: 128) ( 0: 135)\n( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170)\n( 6: 177) ( 7: 184)\nPost insert: (head = 9, tail = 12)\n(12: 107) (13: 114) (14: 121) (15: 128) ( 0: 135)\n( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170)\n( 6: 177) ( 7: 184) ( 8: 191)\nPost insert: (head = 10, tail = 12)\n(12: 107) (13: 114) (14: 121) (15: 128) ( 0: 135)\n( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170)\n( 6: 177) ( 7: 184) ( 8: 191) ( 9: 198)\nValue 107 removed\nPost remove: (head = 10, tail = 13)\n(13: 114) (14: 121) (15: 128) ( 0: 135) ( 1: 142)\n( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170) ( 6: 177)\n( 7: 184) ( 8: 191) ( 9: 198)\nPost insert: (head = 11, tail = 13)\n(13: 114) (14: 121) (15: 128) ( 0: 135) ( 1: 142)\n( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170) ( 6: 177)\n( 7: 184) ( 8: 191) ( 9: 198) (10: 205)\nPost insert: (head = 12, tail = 13)\n(13: 114) (14: 121) (15: 128) ( 0: 135) ( 1: 142)\n( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170) ( 6: 177)\n( 7: 184) ( 8: 191) ( 9: 198) (10: 205) (11: 212)\nValue 114 removed\nPost remove: (head = 12, tail = 14)\n(14: 121) (15: 128) ( 0: 135) ( 1: 142) ( 2: 149)\n( 3: 156) ( 4: 163) ( 5: 170) ( 6: 177) ( 7: 184)\n( 8: 191) ( 9: 198) (10: 205) (11: 212)\nPost insert: (head = 13, tail = 14)\n(14: 121) (15: 128) ( 0: 135) ( 1: 142) ( 2: 149)\n( 3: 156) ( 4: 163) ( 5: 170) ( 6: 177) ( 7: 184)\n( 8: 191) ( 9: 198) (10: 205) (11: 212) (12: 219)\nPost insert: (head = 14, tail = 15)\n(15: 128) ( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156)\n( 4: 163) ( 5: 170) ( 6: 177) ( 7: 184) ( 8: 191)\n( 9: 198) (10: 205) (11: 212) (12: 219) (13: 226)\nValue 128 removed\nPost remove: (head = 14, tail = 0)\n( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163)\n( 5: 170) ( 6: 177) ( 7: 184) ( 8: 191) ( 9: 198)\n(10: 205) (11: 212) (12: 219) (13: 226)\nPost insert: (head = 15, tail = 0)\n( 0: 135) ( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163)\n( 5: 170) ( 6: 177) ( 7: 184) ( 8: 191) ( 9: 198)\n(10: 205) (11: 212) (12: 219) (13: 226) (14: 233)\nPost insert: (head = 0, tail = 1)\n( 1: 142) ( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170)\n( 6: 177) ( 7: 184) ( 8: 191) ( 9: 198) (10: 205)\n(11: 212) (12: 219) (13: 226) (14: 233) (15: 240)\nValue 142 removed\nPost remove: (head = 0, tail = 2)\n( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170) ( 6: 177)\n( 7: 184) ( 8: 191) ( 9: 198) (10: 205) (11: 212)\n(12: 219) (13: 226) (14: 233) (15: 240)\nPost insert: (head = 1, tail = 2)\n( 2: 149) ( 3: 156) ( 4: 163) ( 5: 170) ( 6: 177)\n( 7: 184) ( 8: 191) ( 9: 198) (10: 205) (11: 212)\n(12: 219) (13: 226) (14: 233) (15: 240) ( 0: 247)\n\u2026\nPost insert: (head = 3, tail = 4)\n( 4: 611) ( 5: 618) ( 6: 625) ( 7: 632) ( 8: 639)\n( 9: 646) (10: 653) (11: 660) (12: 667) (13: 674)\n(14: 681) (15: 688) ( 0: 695) ( 1: 702) ( 2: 709)\nPost insert: (head = 4, tail = 5)\n( 5: 618) ( 6: 625) ( 7: 632) ( 8: 639) ( 9: 646)\n(10: 653) (11: 660) (12: 667) (13: 674) (14: 681)\n(15: 688) ( 0: 695) ( 1: 702) ( 2: 709) ( 3: 716)\nValue 618 removed\nPost remove: (head = 4, tail = 6)\n( 6: 625) ( 7: 632) ( 8: 639) ( 9: 646) (10: 653)\n(11: 660) (12: 667) (13: 674) (14: 681) (15: 688)\n( 0: 695) ( 1: 702) ( 2: 709) ( 3: 716)\nInsert/remove loop over\nValue 625 removed\nValue 632 removed\nValue 639 removed\nValue 646 removed\nValue 653 removed\nValue 660 removed\nValue 667 removed\nValue 674 removed\nValue 681 removed\nValue 688 removed\nValue 695 removed\nValue 702 removed\nValue 709 removed\nValue 716 removed\n</code></pre>\n\n<h3>Timing</h3>\n\n<p>With the main loop repeating 100 times, there's not really a measurable difference between the two programs if you disable the printing, and its only barely measurable and not entirely reliable if you enable the printing.</p>\n\n<p>With printing disabled and the buffer size of 15 or 16, looping one million times in the main program took 4.5 ms for ring buffer vs 9.0 ms for shuffle buffer.  Change the buffer size to 2047 or 2048, and the times were 3.7 ms for ring buffer vs 87.3 ms for shuffle buffer.  With the printing enabled, the slight extra work done by ring buffer in the printing swamped the performance gain from not shuffling; the two programs were running in essentially the same time: 4,546.5 ms vs 4,477.2 ms (so shuffle buffer was slightly faster with the printing enabled \u2014 in large part because it produced only 353 MiB of data compared with 368 MiB of data from the ring buffer \u2014 with the data being written to <code>/dev/null</code> with the timing runs).</p>\n\n<p>The measured times were elapsed run time for the executable \u2014 not CPU time per se.  The testing was done an a 15\" MacBook Pro (2017) with 2.9 GHz Intel Core i7 with 16 GiB of 2133 MHz <a href=\"https://en.wikipedia.org/wiki/LPDDR\" rel=\"nofollow noreferrer\">LPDDR3</a> RAM, running macOS 10.14.3 Mojave and using a home-built GCC 8.2.0.  Speed testing is difficult \u2014 I think the results without printing are meaningful, but <a href=\"https://www.acronymfinder.com/YMMV.html\" rel=\"nofollow noreferrer\">YMMV</a>.  If you ever needed a demonstration that 'printing is slow', this is quite possibly a good one.</p>\n"}], "owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54681679, "answer_count": 1, "score": 0, "last_activity_date": 1550108318, "creation_date": 1550095282, "last_edit_date": 1550098189, "question_id": 54680129, "link": "https://stackoverflow.com/questions/54680129/clean-way-to-add-elements-to-fixed-length-array-and-removing-the-first-element", "title": "Clean way to add elements to fixed length array and removing the first element?", "body": "<p>I need a clean way to add elements to an array, and if the array 'overflows', then the element at 0 must be replaced by element at 1, and so on, until a space frees up for the new element.</p>\n\n<p>Here's an example (pseudocode):</p>\n\n<pre><code>array = [0, 0, 0, 0, 0]\n// elements get added\narray = [1, 0, 0, 0, 0]\n...\narray = [1, 2, 3, 4, 5]\n// Array is full!\n// Another elements gets added\narray = [2, 3, 4, 5, 6]\n// And so on..\n</code></pre>\n\n<p>I tried doing this on an online compiler but I failed miserably and here is the code:</p>\n\n<pre><code>int main()\n{\n    int arr[10] = { 555, 555, 555, 555, 555, 555, 555, 555, 555, 555 };\n\n    for (int i = 0; i &lt; 100; i++)\n    {\n        int arr_idx = i % 10;\n\n        if (arr[10] != 555)\n        {\n            if (arr_idx &lt; 9)\n            {\n                arr[arr_idx] = arr[arr_idx + 1];\n            }\n            else\n            {\n                arr[arr_idx] = 0;\n            }\n        }\n        else\n        {\n            arr[arr_idx] = i;\n            printf(\"arr: %d\", arr[arr_idx]);\n        }\n\n        printf(\"---\\n\");\n        for (int j = 0; j &lt; 10; j++)\n        {\n            printf(\"[%d]Arr = %d\\n\", j, arr[j]);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1550094049, "post_id": 54679847, "comment_id": 96148618, "body": "Where do you allocate the memory for <code>obj_t ** item_indexer</code> in main?  And where do you allocate the memory for <code>obj_t * local_obj</code> in create_new_item?  You need to allocate memory if you want to use it."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550094076, "post_id": 54679847, "comment_id": 96148629, "body": "<code>item_indexer[i] = &amp;item;</code>  You are dereferencing a NULL pointer,here."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1550094325, "post_id": 54679847, "comment_id": 96148751, "body": "Even if you did create memory for <code>obj_t ** item_indexer</code> in main you would have to say how much.  That&#39;s ok but then you can&#39;t just add unlimited items without checking to see if it is big enough or re-allocing in it isn&#39;t."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1550094709, "post_id": 54679847, "comment_id": 96148887, "body": "Hint: <code>location 0x0000000000000000</code> is a NULL pointer"}, {"owner": {"reputation": 1, "user_id": 10413058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc4e62aa42a6ea1227a7bae895fbf73?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelVLV", "link": "https://stackoverflow.com/users/10413058/michaelvlv"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550094738, "post_id": 54679847, "comment_id": 96148899, "body": "@wildplasser yes indeed. Correct is <code>item_indexer[i] = item;</code>"}, {"owner": {"reputation": 1, "user_id": 10413058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc4e62aa42a6ea1227a7bae895fbf73?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelVLV", "link": "https://stackoverflow.com/users/10413058/michaelvlv"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1550094796, "post_id": 54679847, "comment_id": 96148926, "body": "@JerryJeremiah allocation memory helped, thanks for guide!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10413058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc4e62aa42a6ea1227a7bae895fbf73?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelVLV", "link": "https://stackoverflow.com/users/10413058/michaelvlv"}, "is_accepted": false, "score": 0, "last_activity_date": 1550094903, "creation_date": 1550094903, "answer_id": 54680042, "question_id": 54679847, "link": "https://stackoverflow.com/questions/54679847/create-double-pointer-on-structure-to-use-by-index-like-an-array-but-max-size-u/54680042#54680042", "title": "Create double pointer on structure to use by index (like an array but max size unknown)", "body": "<p>Need allocate memory for double pointer too:</p>\n\n<pre><code>item_indexer = calloc(get_max_items(), sizeof(obj_t));\n</code></pre>\n\n<p>And fix dereferencing pointer:</p>\n\n<pre><code>item_indexer[i] = item; // no need &amp; here\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10413058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc4e62aa42a6ea1227a7bae895fbf73?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelVLV", "link": "https://stackoverflow.com/users/10413058/michaelvlv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550094903, "creation_date": 1550093911, "question_id": 54679847, "link": "https://stackoverflow.com/questions/54679847/create-double-pointer-on-structure-to-use-by-index-like-an-array-but-max-size-u", "title": "Create double pointer on structure to use by index (like an array but max size unknown)", "body": "<p>I'm trying to make items indexer with double pointer to be able get pointer to specific item by its number.</p>\n\n<p>I would rather use array for this task, but max value of items is unknown.\nSo, I need somehow get access by index.</p>\n\n<p>In VS i got error \"Access violation writing location 0x0000000000000000\"</p>\n\n<pre><code>typedef struct {\n  char * data_3;\n  int   data_1;\n  float data_2;\n  // and other data, doesnt matter\n}obj_t;\n\nvoid process_item(obj_t * input_item)\n{\n   // do something...\n}\n\nobj_t * create_new_item()\n{\n    obj_t * local_obj;\n    // do something...\n    return local_obj;\n}\n\nint get_max_items()\n{\n    return 8; // just some number, which can be set from outside\n}\n\nint main()\n{\n    int i;\n    obj_t * item = NULL;\n    obj_t ** item_indexer = NULL;\n\n    for (i = 0; i &lt; get_max_items(); i++)\n    {\n        item = create_new_item(); // create different items\n        item_indexer[i] = &amp;item;  // Error: access violation writing location 0x0000000000000000\n    }\n\n    process_item(item_indexer[i]); // need send item with specific index\n}\n</code></pre>\n\n<p>I expected to use it like array:</p>\n\n<pre><code>item_indexer[0] is (*item) created at i = 0\nitem_indexer[1] is (*item) created at i = 1\n...\n</code></pre>\n\n<p>and be able to send specific item</p>\n\n<p>But I'm stuck with errors about access violations.</p>\n"}, {"tags": ["c", "sensors"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1550093334, "post_id": 54679673, "comment_id": 96148275, "body": "Better to calibrate across the range using a number of points, as their performance might not be linear. It depends on how accurate you want it."}, {"owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1550093374, "post_id": 54679673, "comment_id": 96148298, "body": "@WeatherVane how would I do that?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550093440, "post_id": 54679673, "comment_id": 96148338, "body": "One point calibration is only calibrating an offset. Two point can calibrate offset and gain. But you seem to calibrate the gain using one point.... If I understand what you are doing here at all."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550093458, "post_id": 54679673, "comment_id": 96148343, "body": "You mean calibrate or interpret? To calibrate build an array of ratios across the  range. To interpret interpolate a ratio (using the reference instrument). But as @EugeneSh. points out, an offset and a ratio is sometimes used."}, {"owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1550093622, "post_id": 54679673, "comment_id": 96148423, "body": "@WeatherVane So basically, I need to do exactly what I am doing, multiple times on different colors, and then make an average?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1550094074, "post_id": 54679673, "comment_id": 96148628, "body": "I mean make an array of the correction factors at N points across the range. Then figure out what the correction factor need to be applied by interpolating from the array."}, {"owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "edited": false, "score": 0, "creation_date": 1550094203, "post_id": 54679673, "comment_id": 96148687, "body": "Could you write an example?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1550095697, "post_id": 54679673, "comment_id": 96149293, "body": "How accurately do you need the sensors to be calibrated? What are you using them for? Colorimetry is complicated; there&#39;s probably books about this topic alone."}, {"owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1550095733, "post_id": 54679673, "comment_id": 96149309, "body": "@duskwuff I need them for  a PID controller."}], "owner": {"reputation": 1107, "user_id": 9872568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ee4c0bfb5d0fff8f9037e57478e0b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Dandelion", "link": "https://stackoverflow.com/users/9872568/a-dandelion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550093353, "creation_date": 1550093110, "last_edit_date": 1550093353, "question_id": 54679673, "link": "https://stackoverflow.com/questions/54679673/calibrating-two-color-sensors", "title": "Calibrating two color sensors?", "body": "<p>I need to calibrate two color sensors, but unfortunately they seem to differ hardware wise (the model is the same, the reflection of the light shined from them is different, one is brighter) as they measure different values in the same exact conditions.</p>\n\n<p>So, I've thought of 'normalizing' one.</p>\n\n<p>Basically, when I calibrate the sensor, I get the ratio needed to calculate the proportion.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>// lx_sensor_red -&gt; 310\n// rx_sensor_red -&gt; 250\n// Again, remember they are sitting on the same color, under the same lighting\n\nfloat rx_red_ratio = ((float)lx_sensor_red)/((float)rx_sensor_red); // Not sure if I use too many parenthesis\n\n// I do this for green and blue too\n\n...  \n... \n\nint rx_red;\nget_sensor_value(0, rx_sensor, &amp;rx_red);\nrx_red = (int)(rx_red * rx_red_ratio);\n\n// And so on..\n</code></pre>\n\n<p>I'm wondering, is this suitable? It seems to work, but I am not sure if there's a better method or if this might fail under certain conditions?</p>\n"}, {"tags": ["c", "shift"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1550093013, "post_id": 54679593, "comment_id": 96148130, "body": "You are assuming that an<code>unsigned long</code> is 32 bits wide."}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550093328, "post_id": 54679593, "comment_id": 96148268, "body": "Yes, I&#39;ll edit the sample code to imply explicitly a 32 bits (or wider) unsigned integer type"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1550093355, "post_id": 54679593, "comment_id": 96148283, "body": "Curious - what does the warnings on your compiler say?  <code>warning: left shift count is negative [-Wshift-count-negative]</code> (When I feed a negative number in directly using &lt;&lt;= -1.)"}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550093459, "post_id": 54679593, "comment_id": 96148344, "body": "Admittedly I have not tested this yet, perhaps I should do that right now."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1550093587, "post_id": 54679593, "comment_id": 96148407, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4945703/left-shifting-with-a-negative-shift-count\">Left shifting with a negative shift count</a>"}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1550093799, "post_id": 54679593, "comment_id": 96148512, "body": "@MichaelDorgan GCC (mingw-w64 6.3.0) does not emit any warnings for this code."}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550093850, "post_id": 54679593, "comment_id": 96148534, "body": "Also from actually bothering to test it I see that it definitely does not work as intended, so I suppose there I have my answer about X64 too."}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550093899, "post_id": 54679593, "comment_id": 96148558, "body": "I would be very curious to know whether this happens to work on ARM though, if anyone feels like running the example code (I will update it to be the full test program)"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1550094038, "post_id": 54679593, "comment_id": 96148613, "body": "godbolt it for ARM if you are curious"}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550094187, "post_id": 54679593, "comment_id": 96148680, "body": "Godbolt is great but I am unaware of its ability to actually run the code, and the assembly output does not tell me much on its own."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1550094616, "post_id": 54679593, "comment_id": 96148856, "body": "@rsethc: it&#39;s UB, what&#39;s the point in doing this? If it turns out to be working today, gcc could easily change the way it compiles this in future versions, if by assuming that the count is always positive it will get more optimization possibilities. Just use <code>if (shift &lt; 0) x &gt;&gt;= -shift;</code> and let gcc decide if it can utilize some architecture-specific tricks to avoid checking. <a href=\"http://graphics.stanford.edu/~seander/bithacks.html#BitReverseObvious\" rel=\"nofollow noreferrer\">Btw there are probably better algorithms for bit reversing out there</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550093260, "post_id": 54679609, "comment_id": 96148235, "body": "I suppose that&#39;s as clear as it can get from the C Standard, though since it is &quot;undefined&quot; I am wondering if, given a specific target architecture (i.e. that you know you&#39;re specifically going to be using X86-64) whether the actual shift instructions the compiler will generate are, in terms of the actual machine&#39;s specification, going to behave as intended. (i.e. while C leaves this behavior undefined, does X64 or ARM have a more concrete definition of the behavior?)"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1550093478, "post_id": 54679609, "comment_id": 96148352, "body": "If it&#39;s undefined (UB), you cannot depend on anything, even if it appears to work.  Next version of the compiler can, at will, change it and not you have a really hard to find bug in your code."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1550093529, "post_id": 54679609, "comment_id": 96148370, "body": "Easy enough to check for a negative number and shift the other direction positive if needed I think."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550093553, "post_id": 54679609, "comment_id": 96148388, "body": "...and it is explicitely forbidden to shift by more than the bitwidth of the operand."}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550095032, "post_id": 54679609, "comment_id": 96149028, "body": "The reason I was hoping negative operand would cause a backward shift was so that I didn&#39;t have to have a branch in order to do a left-shift versus right-shift based on the sign of the operand (and also negation). dbush&#39;s solution meets this goal since it is still able to avoid branching inside the loop."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 1, "creation_date": 1550110125, "post_id": 54679609, "comment_id": 96153304, "body": "@rsethc: No, shift instructions in hardware generally do not respect a signed operand. If, in assembly language, you pass a negative value to a shift instruction, a typical behavior is to use only the low five bits for a 32-bit operand. Hence only shifts of 0 to 31 bits are possible; negative shifts are not."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 8, "last_activity_date": 1550093220, "last_edit_date": 1550093220, "creation_date": 1550092881, "answer_id": 54679609, "question_id": 54679593, "link": "https://stackoverflow.com/questions/54679593/bitwise-shift-by-a-negative-number-to-reverse-the-bits-in-a-number/54679609#54679609", "title": "Bitwise shift *by* a negative number to reverse the bits in a number", "body": "<p>The C Standard declares that shifting by a negative number is explicitly undefined behavior in <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5.7\" rel=\"noreferrer\">&sect; 6.5.7 paragraph 3:</a></p>\n\n<blockquote>\n  <p>If the value of the right operand <strong>is negative</strong> or is greater than or equal to the width of the promoted left operand, the behavior is undefined.</p>\n</blockquote>\n\n<p>Emphasis mine.</p>\n"}, {"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550094755, "post_id": 54679948, "comment_id": 96148908, "body": "@wildplasser Good idea.  Edited."}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550094785, "post_id": 54679948, "comment_id": 96148920, "body": "It&#39;s true that first shifting the value all the way to the ones place does solve the problem in a more robust way. However as for using sizeof, it&#39;s clever but generally I would want to just ignore extra bytes in the length of the type, since the logic is all based around 32-bit widths."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550095008, "post_id": 54679948, "comment_id": 96149017, "body": "@rsethc There are excellent examples of bitrev at bithacks@stanford.edu."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550095044, "post_id": 54679948, "comment_id": 96149033, "body": "@rsethc You can easily replace <code>unsigned long</code> with <code>uint32_t</code> in the above code and replace <code>sizeof(unsigned long) * CHAR_BIT</code> with <code>32</code> and get the same behavior for the type you want."}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550095288, "post_id": 54679948, "comment_id": 96149135, "body": "Something else I do not quite get is why <code>1ul</code> is any better than <code>1</code>: since it&#39;s positive, <code>1ul</code> and <code>1</code> are equivalent aside from potentially having different widths (if <code>sizeof(long) != sizeof(int)</code>) though the width of <code>(int)1</code> should certainly be enough to account for any valid shift amount."}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550097271, "post_id": 54679948, "comment_id": 96149869, "body": "Oh, integer promotion of the value being shifted?"}, {"owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 0, "creation_date": 1550097366, "post_id": 54679948, "comment_id": 96149893, "body": "Even if the value being shifted gets promoted to a signed type, I imagine that should not matter even if the value represents a negative number when treated as signed, since this is not an arithmetic shift operation."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "edited": false, "score": 1, "creation_date": 1550097643, "post_id": 54679948, "comment_id": 96149988, "body": "@rsethc If the type of a value is signed, shifting a bit into the sign bit is undefined behavior, specifically <code>1&lt;&lt;31</code> if <code>int</code> is 32 bits or less.  By using the <code>UL</code> suffix, it forces the value to be an <code>unsigned long</code> so that we <i>don&#39;t</i> shift into the sign bit."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1550094741, "last_edit_date": 1550094741, "creation_date": 1550094366, "answer_id": 54679948, "question_id": 54679593, "link": "https://stackoverflow.com/questions/54679593/bitwise-shift-by-a-negative-number-to-reverse-the-bits-in-a-number/54679948#54679948", "title": "Bitwise shift *by* a negative number to reverse the bits in a number", "body": "<p>As already mentioned, shifting by a negative value invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> as per section 6.5.7p3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>.</p>\n\n<p>Rather than attempting to guess when you can get away with a negative shift, change your code so you don't need to.</p>\n\n<p>After masking out the bit you want, shift it back to position 0, <em>then</em> shift it to the desired location.  Also, make sure you change the constant <code>1</code> to <code>1ul</code> so that you don't end up shifting a signed value into the sign bit or exceed the width of an <code>int</code>.  Note also the use of <code>sizeof</code> to avoid hardcoding magic numbers such as 32.</p>\n\n<pre><code>unsigned long reverse_bits (unsigned long n)\n{\n    unsigned long result = 0;\n    for (int i = 0; i &lt; sizeof(unsigned long) * CHAR_BIT; i++)\n    {\n        unsigned long bit = ((n &amp; (1ul &lt;&lt; i)) &gt;&gt; i);\n        unsigned long shift = (sizeof(unsigned long) * CHAR_BIT) - i - 1;\n        result |= bit &lt;&lt; shift;\n    }\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 1685, "user_id": 1917534, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/66dcafcb1f23b50cc4b98fd81cde6e65?s=128&d=identicon&r=PG", "display_name": "rsethc", "link": "https://stackoverflow.com/users/1917534/rsethc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 1, "accepted_answer_id": 54679609, "answer_count": 2, "score": 4, "last_activity_date": 1550095123, "creation_date": 1550092812, "last_edit_date": 1550095123, "question_id": 54679593, "link": "https://stackoverflow.com/questions/54679593/bitwise-shift-by-a-negative-number-to-reverse-the-bits-in-a-number", "title": "Bitwise shift *by* a negative number to reverse the bits in a number", "body": "<p>Is it valid to perform a bitwise shift by a negative amount?\nFor example, if I have the following code:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\nuint32_t reverse_bits (uint32_t n)\n{\n    uint32_t result = 0;    \n    for (int i = 0; i &lt; 32; i++) \n    {\n        uint32_t bit = n &amp; (1 &lt;&lt; i);\n        bit &lt;&lt;= 31 - i * 2;\n        result |= bit;\n    }\n    return result;\n}\n</code></pre>\n\n<p>Is this something I could expect to work on all architectures (specifically, that the result of expression <code>x &lt;&lt; shift_amt</code> where <code>shift_amount &lt; 0</code> is true, is equivalent to <code>x &gt;&gt; -shift_amt</code>)?</p>\n\n<p>Note: This is <strong>not</strong> a question about the behavior of performing a bitwise shift <em>on</em> a negative number (ie <code>-1 &lt;&lt; 1</code>).</p>\n\n<hr>\n\n<p>Here is the full test program:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\nuint32_t reverse_bits (uint32_t n)\n{\n    uint32_t result = 0;\n    for (int i = 0; i &lt; 32; i++)\n    {\n        uint32_t bit = n &amp; (1 &lt;&lt; i);\n        bit &lt;&lt;= 31 - i * 2;\n        result |= bit;\n    }\n    return result;\n}\nvoid print_bits (uint32_t n)\n{\n    for (int i = 0; i &lt; 32; i++)\n        putchar(n &amp; (1 &lt;&lt; i) ? '1' : '0');\n    putchar('\\n');\n}\nint main ()\n{\n    for (int i = 0; i &lt; 5; i++)\n    {\n        uint32_t x = rand();\n        x |= rand() &lt;&lt; 16;\n        print_bits(x);\n        print_bits(reverse_bits(x));\n        putchar('\\n');\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1550092506, "post_id": 54679503, "comment_id": 96147923, "body": "Do you know the function <code>isalpha()</code>? You don&#39;t need to assume ASCII encoding to use it."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1550092543, "post_id": 54679503, "comment_id": 96147944, "body": "<code>strcpy(array, carry[1]); </code> Boom!!"}, {"owner": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "edited": false, "score": 0, "creation_date": 1550092669, "post_id": 54679503, "comment_id": 96147996, "body": "I didn&#39;t know about that one, I like it, I&#39;ll try incorporating it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1550092672, "post_id": 54679503, "comment_id": 96147998, "body": "The array <code>char temp[strlen(carry[1])];</code> needs to be 1 byte longer, and have a string terminator written to it after building its content."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1550092739, "post_id": 54679503, "comment_id": 96148036, "body": "<code>strlen() + 1</code> for the terminating <code>&#39;\\0&#39;</code>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1550092756, "post_id": 54679503, "comment_id": 96148046, "body": "<code>if (sizeof(carry) &gt; 1) {</code> sizeof carry is sizeof(two pointers); probably 8 or16"}, {"owner": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "edited": false, "score": 0, "creation_date": 1550092781, "post_id": 54679503, "comment_id": 96148056, "body": "How would I go about adding a string terminator"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1550092822, "post_id": 54679503, "comment_id": 96148074, "body": "With <code>temp[x] = &#39;\\0&#39;;</code> after the last char is written to it."}, {"owner": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550092921, "post_id": 54679503, "comment_id": 96148100, "body": "@wildplasser should I divide that number by 8 since its for a char"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550093257, "post_id": 54679503, "comment_id": 96148234, "body": "<code>char *carry[2]</code> is an array. With a fixed size (the size of two char pointers) . You defined it thatway."}, {"owner": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550093531, "post_id": 54679503, "comment_id": 96148371, "body": "@wildplasser I was trying to create a string array but the process is still a bit confusing for me. I want to create a list of words with varying length that can be accessed by index."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "edited": false, "score": 0, "creation_date": 1550110546, "post_id": 54681297, "comment_id": 96153383, "body": "Thanks for the help, I read through the code and tested it on my computer and it works great and I learned a lot from it. However, due to the task that I need to complete I will not be able to use much of this in my work."}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "reply_to_user": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "edited": false, "score": 0, "creation_date": 1550131558, "post_id": 54681297, "comment_id": 96159582, "body": "@BrandonT glad to be of help. I suggest you post a question that is much more narrow in scope with precise description of requirements. And more of a context. Like: <i>I need to create dynamic structure to be able to store the result of string parsing. I need to use just in memory structures. Version of C I must use is C99. I am using Visual Studio 2017.</i>   And then some code showing what have you tried so far.  Use online ide of your choice. That will give you immediately usable code. But copy paste here key parts, Not whole programs as I did, Good luck, you are progressing."}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "reply_to_user": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "edited": false, "score": 0, "creation_date": 1550131652, "post_id": 54681297, "comment_id": 96159620, "body": "@BrandonT, ah yes, and do not be afraid to up vote too :)"}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "reply_to_user": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "edited": false, "score": 0, "creation_date": 1550156796, "post_id": 54681297, "comment_id": 96174358, "body": "@BrandonT check here please:  <a href=\"https://github.com/DBJDBJ/remove_non_alphas\" rel=\"nofollow noreferrer\">github.com/DBJDBJ/remove_non_alphas</a>"}], "tags": [], "owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "is_accepted": true, "score": 0, "last_activity_date": 1550102489, "creation_date": 1550102489, "answer_id": 54681297, "question_id": 54679503, "link": "https://stackoverflow.com/questions/54679503/parsing-a-string-in-c-without-strtok/54681297#54681297", "title": "Parsing a String in C, Without Strtok()", "body": "<p>Since you have solved the actual string parsing,  your last comment, I shall take as the actual requirement.</p>\n\n<p>\"... I want to create a list of words with varying length that can be accessed by index ...\"</p>\n\n<p>That is certainly not a task to be solved easily if one is \"three weeks into C\". Data structure that represents that is what <code>main()</code> second argument is:</p>\n\n<pre><code>        // array (of unknown size)\n        // of pointers to char\n        char * argv[] ;\n</code></pre>\n\n<p>This can be written as an pointer to pointer:</p>\n\n<pre><code>        // same data structure as char * []\n        char ** list_of_words ;\n</code></pre>\n\n<p>And this is pushing you straight into the deep waters of C. An non trivial C data structure. As a such it might require a bit more than four weeks of C. </p>\n\n<p>But we can be creative. There is \"inbuilt in C\" one non trivial data structure we might use. A file. </p>\n\n<p>We can write the words into the file. One word one line. And that is our output: list of words, separated by new line character, stored in a file. </p>\n\n<p>We can even imagine and write a function that will read the word from that result \"by index\". As you (it seems) need.</p>\n\n<pre><code>         // hint: there is a FILE * behind\n         int words_count = result_size () ;\n         const char * word = result_get_word(3) ;\n</code></pre>\n\n<p>Now, I have boldly gone ahead and have written \"all\" of it, beside that last \"crucial\" part. After all, I am sure you would like to contribute too.</p>\n\n<p>So the working code (minus the result_size) and result_get_word() ) is alive and kicking here: <a href=\"https://wandbox.org/permlink/uLpAplNl6A3fgVGw\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/uLpAplNl6A3fgVGw</a></p>\n\n<p>To avoid the \"Wrath of Khan\" I have also pasted it here:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n/*\n task: remove all non alpha chars from a given string, store the result\n */\n\n int process_and_save (FILE *, const char *) ;\n int dump_result(FILE *) ;\n\n int main( const int argc, const char * argv[] )\n {\n   const char * filename = \"words.txt\";\n   const char * to_parse = \"0abra123ka456dabra789\" ;\n\n    (void)(&amp;argc) ; (void)argv ; // pacify the compiler warnings \n\n     printf(\"\\nInput: %s\", to_parse ) ;\n     int retval = process_and_save(fopen(filename, \"w\"), to_parse ) ;\n     if ( EXIT_FAILURE != retval )\n      {\n    printf(\"\\n\\nOutput:\\n\") ;\n    retval = dump_result(fopen(filename, \"r\"));\n      }\n    return retval ;\n  }\n\n  int process_and_save (FILE * fp, const char * input )\n  {\n    if(!fp) {\n       perror(\"File opening failed\");\n         return EXIT_FAILURE;\n     }\n    // \n    char * walker = (char *)(input) ;\n    while ( walker++ ) \n    {\n         if ( ! *walker ) break ;\n         if ( isalpha(*walker) ) {\n            fprintf( fp, \"%c\", *walker ) ;\n            // I am alpha but next one is not\n            // so write word end, next\n             if ( ! isalpha(*(walker +1) ) )\n                   fprintf( fp, \"\\n\" ) ;\n          }\n    }\n    fclose(fp);\n    return EXIT_SUCCESS; \n }\n\n int dump_result(FILE* fp )\n {\n  if(!fp) {\n    perror(\"\\nFile opening failed\");\n      return EXIT_FAILURE;\n  }\n\n   int c; while ((c = fgetc(fp)) != EOF) { putchar(c); }\n\n   if (ferror(fp))\n       puts(\"\\nI/O error when reading\");\n\n       fclose(fp);\n          return EXIT_SUCCESS;\n  }\n</code></pre>\n\n<p>I think this is functional and does the job of parsing and storing the result. Not in the complex data structure but in the simple file. The rest should be easy. If need help please do let me know. </p>\n"}], "owner": {"reputation": 25, "user_id": 10764792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aVzTcuhTXtE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hVcLRVoE5zkCrT0bNN1yxa4oqEww/mo/photo.jpg?sz=128", "display_name": "Brandon T", "link": "https://stackoverflow.com/users/10764792/brandon-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 54681297, "answer_count": 1, "score": 0, "last_activity_date": 1550122208, "creation_date": 1550092389, "last_edit_date": 1550122208, "question_id": 54679503, "link": "https://stackoverflow.com/questions/54679503/parsing-a-string-in-c-without-strtok", "title": "Parsing a String in C, Without Strtok()", "body": "<p>I need to parse a string in C by removing all non-alphabetic characters from it. To do this I am checking the ascii value of every char and making sure its within the correct bounds. It works just the way I want it to, so that's not the problem. What I am having trouble with, however, is storing the resulting strings after the parse is completed. (I am 3 weeks into C by the way) Also if you notice that I used weird sizes for the arrays, that's because I purposely made them bigger than they needed to be.</p>\n\n<pre><code>char * carry[2]; // This is to simulate argv\ncarry[1] = \"hello1whats2up1\"; // 0 is title so I placed at 1\n\nchar array[strlen(carry[1])]; // char array of string length\nstrcpy(array, carry[1]); // copied string to char array\n\nchar temp[strlen(carry[1]) + 1]; // Reusable char array\nchar * finalAnswer[10];\n\nint m = 0, x = 0; // Indexes\n\nif ((sizeof(carry))/8 &gt; 1) { // We were given arguments\n\n    printf(\"Array: %lu\\n\\n\", sizeof(array));\n    for (int i = 0; i &lt; sizeof(array); i++)\n    {\n        if(isalpha(array[i])) { // A-Z &amp; a-z\n            //printf(\"%s\\n\", temp);\n            temp[x] = array[i]; // Placing chars in temp array\n            x++;\n\n        }\n        else {\n            printf(\"String Length: %lu \\nString Name: %s \\nWord Index: %d \\n\\n\",\n                   strlen(temp), temp, m); // Testing Purposes\n            strcpy(finalAnswer[m], temp); // Copies temp into the final answer *** Source of Error\n\n            for(int w = 0; w &lt; sizeof(temp); w++) { temp[w] = '\\0'; } // Clears temp\n\n            x = 0;\n            m++;\n        }\n    }\n    printf(\"String Length: %lu \\nString Name: %s \\nWord Index: %d \\n\",\n           strlen(temp), temp, m); // Testing Purposes\n    strcpy(finalAnswer[m], temp);\n\n    for(int w = 0; w &lt; sizeof(temp); w++) { temp[w] = '\\0'; } // Clears temp\n\n    x = 0;\n}\n\nelse { printf(\"No Arguments Given\\n\"); }\n\nprintf(\"\\n\");\n</code></pre>\n\n<p>** Edit</p>\n\n<p>The error I keep getting is when I try copying temp to finalAnswer</p>\n\n<p>** Edit 2</p>\n\n<p>I solved the problem I was having with char * finalAnswer[10]</p>\n\n<p>When I was trying to use strcpy on finalAnswer, I never specified the size that was needed to store the particular string. Works fine after I did it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550090749, "post_id": 54679080, "comment_id": 96147162, "body": "Note that <code>memccpy()</code> is not a part of the C standard (see <a href=\"http://port70.net/~nsz/c/c11/n1570.html\" rel=\"nofollow noreferrer\">C11</a> for example).  It is a part of POSIX, though (<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/memccpy.html\" rel=\"nofollow noreferrer\"><code>memccpy()</code></a>)"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1550090749, "post_id": 54679080, "comment_id": 96147163, "body": "Stack bashing doesn&#39;t always go outside of your memory segment.  There&#39;s definitely undefined behavior but that&#39;s undefined, not necessarily a segmentation violation..."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1550091545, "post_id": 54679080, "comment_id": 96147502, "body": "Undefined behavior doesn\u2019t guarantee crashing. It\u2019s just undefined per the language standard. Your actual implementation may do whatever. You can\u2019t even expect anything. Even null pointer dereferences don\u2019t need to crash: sometimes the compiler optimizes such code out."}, {"owner": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "edited": false, "score": 0, "creation_date": 1550103771, "post_id": 54679080, "comment_id": 96151829, "body": "Hope this live test (<a href=\"https://segfault.stensal.com/a/rxF9Nt6q9AWVS3Vf\" rel=\"nofollow noreferrer\">segfault.stensal.com/a/rxF9Nt6q9AWVS3Vf</a>)  will give you a more intuitive illustration of the out-of-bounds illegal memory access."}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 5, "last_activity_date": 1550090886, "creation_date": 1550090886, "answer_id": 54679168, "question_id": 54679080, "link": "https://stackoverflow.com/questions/54679080/how-does-this-implementation-of-the-c-function-memccpy-not-segfault-on-the-fol/54679168#54679168", "title": "How does this implementation of the C function memccpy() not segfault on the following input?", "body": "<p>Your arrays are function scoped, on the stack. Writing outside the bounds of <em>any</em> array is undefined behavior, and will do all sorts of terrible things in many cases, but a segfault is rarely the direct result of writing only a little outside the bounds of an array on the stack. After all, the stack is all writable memory, it's just not logically part of the array (so you might be overwriting other local variables, function return addresses, registers spilled to the stack, etc.).</p>\n\n<p>Point is, the code is wrong, but segfaults usually don't happen unless you're trying to write to the <code>NULL</code> pointer, significantly outside allocated memory, or you just get \"lucky\" and happen to overwrite a buffer near the end of an allocated page (and therefore write into an unallocated page).</p>\n"}, {"comments": [{"owner": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "edited": false, "score": 0, "creation_date": 1550092702, "post_id": 54679194, "comment_id": 96148013, "body": "...and possibly also depends on whether built as &quot;debug&quot; or &quot;release&quot; (e.g. if bounds checking is built into debug but not release builds)."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 5, "last_activity_date": 1550091468, "last_edit_date": 1550091468, "creation_date": 1550090999, "answer_id": 54679194, "question_id": 54679080, "link": "https://stackoverflow.com/questions/54679080/how-does-this-implementation-of-the-c-function-memccpy-not-segfault-on-the-fol/54679194#54679194", "title": "How does this implementation of the C function memccpy() not segfault on the following input?", "body": "<p>When you write past the bounds of an object, you invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  This means you can't predict the behavior of the program.  It may crash, it may output strange results, or it may appear to work properly.</p>\n\n<p>Also, how undefined behavior manifests can change by making seemingly unrelated changes, such as an extra <code>printf</code> for debugging or adding an unused local variable.  It can also change by using different optimization settings or a different compiler.  For example, when I ran your code it detected stack smashing and crashed with SIGABORT.</p>\n\n<p>Just because a crash <strong>could</strong> happen doesn't mean it <strong>will</strong>.</p>\n"}], "owner": {"reputation": 123, "user_id": 5484869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b001494cb07305e8300566b90afcdb4d?s=128&d=identicon&r=PG&f=1", "display_name": "Thunderpurtz", "link": "https://stackoverflow.com/users/5484869/thunderpurtz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550091468, "creation_date": 1550090518, "last_edit_date": 1550090802, "question_id": 54679080, "link": "https://stackoverflow.com/questions/54679080/how-does-this-implementation-of-the-c-function-memccpy-not-segfault-on-the-fol", "title": "How does this implementation of the C function memccpy() not segfault on the following input?", "body": "<p>While trying to implement my own version of the C function memccpy(), I also happened upon this other <a href=\"https://stackoverflow.com/questions/31094133/memccpy-return-lower-memory-address-than-the-src-starting-address/31094530#31094530\">person's implementation</a> of memccpy() on stack overflow and tested their variant against the original. It reproduced the same results as the C standard function with  different string and integer array inputs I gave it. The problem is I don't understand why their version doesn't segfault on certain inputs such as this integer array.</p>\n\n<p>I tried to see what would happen if the length taken exceeded that of the input array. Of course I expected a segfault, but to my surprise it did not. Here is the function implementation:</p>\n\n<pre><code>void    *ft_memccpy(void *str_dest, const void *str_src, int c, \nsize_t n)\n{\n    unsigned int    i;\n    char            *dest;\n    char            *src;\n    char            *ptr;\n\n    dest = (char *)str_dest;\n    src = (char *)str_src;\n    i = 0;\n    ptr = 0;\n    while (i &lt; n &amp;&amp; ptr == 0)\n    {\n        dest[i] = src[i];\n        if (src[i] == ((char)c))\n            ptr = dest + i + 1;\n        i++;\n    }\n    return (ptr);\n}\n</code></pre>\n\n<p>And the code used to test it:</p>\n\n<pre><code>int main()\n{\n    int num1[5] = {1, 2, 3, 4, 5};\n    int num2[5] = {0, 0, 0, 0, 0};\n\n    int (*num1p)[5] = &amp;num1;\n    int (*num2p)[5] = &amp;num2;\n\n    for (int i = 0; i &lt; 5; i++)\n    {\n        printf(\"value before copy = %d\\n\", num2[i]);\n    }\n    //THE INPUT\n    ft_memccpy(num2p, num1p, 9, (sizeof(int)*8));\n    for (int i = 0; i &lt; 5; i++)\n    {\n        printf(\"value after copy = %d\\n\", num2[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>What I expected was for there to be a segfault since the parameters passed were 9 and 32 bytes for size (8 * sizeof(int)). I thought that since the array size itself was only 20 bytes, it would segfault once it passed 20 bytes on the line dst[i] = src[i], but it doesn't. Indeed when I pass these same parameters into the standard C version, it also does not segfault. What could be the reason for this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1550088853, "post_id": 54678633, "comment_id": 96146288, "body": "See the yesterday&#39;s question: <a href=\"https://stackoverflow.com/questions/54653523/check-that-command-line-input-is-numeric\" title=\"check that command line input is numeric\">stackoverflow.com/questions/54653523/&hellip;</a>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1550088918, "post_id": 54678633, "comment_id": 96146313, "body": "Don&#39;t confuse <code>end</code> and <code>next</code> ... just saying"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1550088928, "post_id": 54678633, "comment_id": 96146321, "body": "And the if / else has two opening braces, but no closing ones. Is this your actual code?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1550089171, "post_id": 54678633, "comment_id": 96146444, "body": "Voting to close as a typo since the function is actually <code>strtol</code>, not <code>strol</code>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1550095758, "post_id": 54678633, "comment_id": 96149316, "body": "Please check your compiler errors.  There are many mistakes here."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1550115552, "creation_date": 1550115552, "answer_id": 54682872, "question_id": 54678633, "link": "https://stackoverflow.com/questions/54678633/how-to-use-fgets-and-strtol-to-check-if-the-input-is-a-valid-integer/54682872#54682872", "title": "How to use fgets and strtol to check if the input is a valid integer?", "body": "<p>Wrong test and function name</p>\n\n<pre><code>// if ((end == msg) || (*end == '\\0')){ //check validity here\nif ((end == msg) || (*end !== '\\0')){ //check validity here\n  printf(\"invalid\\n\");\n</code></pre>\n\n<p>Better to assign to <code>long</code> or not at all</p>\n\n<pre><code>// int input = strol(msg, &amp;next,10);\nlong input = strtol(msg, &amp;next,10);\nor \nstrtol(msg, &amp;next,10);\n</code></pre>\n\n<p>Use <code>errno</code> is one wants to also check for overflow.</p>\n\n<pre><code>errno = 0;\nstrtol(msg, &amp;next,10);\nif (errno == ERANGE) {\n  puts(\"Overflow\");\n} else    \n  ...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11058603, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SGcmd72ZmQI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP_1pzqJ6BqIc3rgOogMXYxSIiFqg/mo/photo.jpg?sz=128", "display_name": "Josephin", "link": "https://stackoverflow.com/users/11058603/josephin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "closed_date": 1550127644, "answer_count": 1, "score": -2, "last_activity_date": 1550115618, "creation_date": 1550088557, "last_edit_date": 1550115618, "question_id": 54678633, "link": "https://stackoverflow.com/questions/54678633/how-to-use-fgets-and-strtol-to-check-if-the-input-is-a-valid-integer", "closed_reason": "Duplicate", "title": "How to use fgets and strtol to check if the input is a valid integer?", "body": "<p>I've tried </p>\n\n<pre><code>#define BUF_SIZE 256\nchar msg[BUF_SIZE];\nprintf(\"input? \");\n\nwhile (fgets(msg,BUF_SIZE,stdin)!=NULL){\n    char *next;\n    int input = strol(msg, &amp;next,10); //use strol \n    if ((end == msg) || (*end == '\\0')){ //check validity here\n       printf(\"invalid\\n\");\n       printf(\"try again\\n\"); //type anther value\n    else{\n       printf(\"valid\\n\");\n}\n</code></pre>\n\n<p>What's wrong with my code?<br>\nIs that the correct way to check integer input?</p>\n"}, {"tags": ["c", "arm", "embedded", "interrupt", "stm32"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11024908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/875a7b078b1e230d50077999587f5edf?s=128&d=identicon&r=PG&f=1", "display_name": "Nibble", "link": "https://stackoverflow.com/users/11024908/nibble"}, "edited": false, "score": 0, "creation_date": 1550094864, "post_id": 54679997, "comment_id": 96148946, "body": "Thanks so much! That appears to be the issue. Added that line of code and now it works perfectly. :)"}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1599642506, "post_id": 54679997, "comment_id": 112833472, "body": "When I read your answer, I initially did not believe it applied to my problem (intermittently the processor was waking up too early), because the clock feeding the SysTick is disabled in Stop mode 2 on the STM32L4 I use. Nevertheless, your answer seems to have fixed my problem as well. I believe the reason is that I deinitialize a couple of peripherals before going to sleep with interrupts turned off. Thus depending on the timing any systick occurring during the deinitialization kept the MCU awake. Thank you a lot!"}], "tags": [], "owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "is_accepted": true, "score": 6, "last_activity_date": 1550094659, "creation_date": 1550094659, "answer_id": 54679997, "question_id": 54678446, "link": "https://stackoverflow.com/questions/54678446/why-does-the-stm32-instantly-leave-stop-mode-as-soon-as-it-enters/54679997#54679997", "title": "Why does the stm32 instantly leave stop mode as soon as it enters?", "body": "<p>You have enabled the SysTick interrupt.  Could the SysTick interrupt be waking up the processor?  Do you know if the SysTick clock source stops or if the SysTick interrupt gets disabled when you enter stop mode?</p>\n\n<p>Try suspending and resuming the SysTick interrupt like this.</p>\n\n<pre><code>HAL_SuspendTick();\n/* Enter Stop Mode */\nHAL_PWR_EnterSTOPMode(PWR_LOWPOWERREGULATOR_ON, PWR_STOPENTRY_WFI);\nHAL_ResumeTick();\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11024908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/875a7b078b1e230d50077999587f5edf?s=128&d=identicon&r=PG&f=1", "display_name": "Nibble", "link": "https://stackoverflow.com/users/11024908/nibble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2222, "favorite_count": 2, "accepted_answer_id": 54679997, "answer_count": 1, "score": 1, "last_activity_date": 1550094659, "creation_date": 1550087883, "question_id": 54678446, "link": "https://stackoverflow.com/questions/54678446/why-does-the-stm32-instantly-leave-stop-mode-as-soon-as-it-enters", "title": "Why does the stm32 instantly leave stop mode as soon as it enters?", "body": "<p>I am currently working on a device that requires a button press to put the device into STOP low-power mode and then a different button press to cause an interrupt to wake-up the device again. Currently the first button press interrupt does work and the and the device is put into STOP mode. However, rather than waiting for the other button to be pressed the device instantly exits STOP mode. I have tried searching but I haven't found any other indication of another interrupt being called that would cause the WFI to trigger and wake-up the device. Below is my code that I am using:</p>\n\n<pre><code>/* Includes ------------------------------------------------------------------*/\n#include \"main.h\"\n#include \"stm32f4xx_hal.h\"\n\n#define BUTTON_WAKE_PIN             GPIO_PIN_0\n#define BUTTON_WAKE_PORT            GPIOA\n#define BUTTON_SLEEP_PIN            GPIO_PIN_9\n#define BUTTON_SLEEP_PORT           GPIOE\n#define LED_GR_PIN                  GPIO_PIN_0\n#define LED_GR_PORT                 GPIOD\n#define LED_RG_PIN                  GPIO_PIN_1\n#define LED_RG_PORT                 GPIOD\n\n/* Private variables ---------------------------------------------------------*/\nstatic uint8_t buttonPress = 0;\n\n/* Private function prototypes -----------------------------------------------*/\nvoid        SystemClock_Config ( void );\nstatic void Gpio_Sleep_Mode    ( void );\n\n/**\n* @brief This function handles (wakeup) interrupts.\n*/\nvoid EXTI0_IRQHandler ( void )\n{\n  /* Clear pending */\n  HAL_GPIO_EXTI_IRQHandler(BUTTON_WAKE_PIN); /* IRQ_CH0 */\n}\n\n/**\n* @brief This function handles (sleep) interrupts.\n*/\nvoid EXTI9_5_IRQHandler(void)\n{\n  if ( EXTI-&gt;PR &amp; EXTI_PR_PR9 )         /* IRQ_CH9 */\n  {\n    HAL_GPIO_EXTI_IRQHandler(BUTTON_SLEEP_PIN);\n    buttonPress = 1;\n  }\n}\n\n/* Turn on LED */\nvoid LED_Off ( void )\n{\n  HAL_GPIO_WritePin( LED_GR_PORT, LED_GR_PIN, GPIO_PIN_RESET );\n  HAL_GPIO_WritePin( LED_RG_PORT, LED_RG_PIN, GPIO_PIN_RESET );\n}\n\n/* Turn off LED */\nvoid LED_On ( void )\n{\n  HAL_GPIO_WritePin( LED_GR_PORT, LED_GR_PIN, GPIO_PIN_SET );\n  HAL_GPIO_WritePin( LED_RG_PORT, LED_RG_PIN, GPIO_PIN_RESET );\n}\n\n/* Initialize LED GPIOs */\nvoid LED_Init ( void )\n{\n  GPIO_InitTypeDef GPIO_InitStruct;\n\n  /* Start clock */\n  __HAL_RCC_GPIOD_CLK_ENABLE();\n\n  /* Default input settings */\n  GPIO_InitStruct.Mode  = GPIO_MODE_OUTPUT_PP;\n  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;\n  GPIO_InitStruct.Pull  = GPIO_NOPULL;\n\n  GPIO_InitStruct.Pin   = LED_GR_PIN;\n  HAL_GPIO_WritePin( LED_GR_PORT, LED_GR_PIN, GPIO_PIN_RESET );\n  HAL_GPIO_Init(LED_GR_PORT, &amp;GPIO_InitStruct);\n\n  GPIO_InitStruct.Pin   = LED_RG_PIN;\n  HAL_GPIO_WritePin( LED_RG_PORT, LED_RG_PIN, GPIO_PIN_RESET );\n  HAL_GPIO_Init(LED_RG_PORT, &amp;GPIO_InitStruct);\n\n  LED_On();\n  HAL_Delay(50);\n  LED_Off();\n  HAL_Delay(50);\n  LED_On();\n  HAL_Delay(50);\n  LED_Off();\n  HAL_Delay(50);\n}\n\n/* Initialize button used for wakeup */\nvoid Wake_Button_Init ( void )\n{\n  GPIO_InitTypeDef GPIO_InitStruct;\n\n  /* Start clock */\n  __HAL_RCC_GPIOA_CLK_ENABLE();\n\n  /* Default input settings */\n  GPIO_InitStruct.Mode  = GPIO_MODE_IT_RISING;\n  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;\n  GPIO_InitStruct.Pull  = GPIO_NOPULL;\n\n  GPIO_InitStruct.Pin   = BUTTON_WAKE_PIN;\n  HAL_GPIO_WritePin( BUTTON_WAKE_PORT, BUTTON_WAKE_PIN, GPIO_PIN_RESET );\n  HAL_GPIO_Init(BUTTON_WAKE_PORT, &amp;GPIO_InitStruct);  \n\n  __HAL_GPIO_EXTI_CLEAR_IT ( BUTTON_WAKE_PIN );\n  __HAL_GPIO_EXTI_CLEAR_IT ( BUTTON_SLEEP_PIN );\n  HAL_NVIC_SetPriority     ( EXTI0_IRQn, 0, 0);\n  HAL_NVIC_ClearPendingIRQ ( EXTI9_5_IRQn );\n  HAL_NVIC_ClearPendingIRQ ( EXTI0_IRQn );\n  HAL_NVIC_EnableIRQ       ( EXTI0_IRQn );\n}\n\n/* Initialize button used for sleep */\nvoid Sleep_Button_Init ( void )\n{\n  GPIO_InitTypeDef GPIO_InitStruct;\n\n  /* Start clock */\n  __HAL_RCC_GPIOE_CLK_ENABLE();\n\n  /* Default input settings */\n  GPIO_InitStruct.Mode  = GPIO_MODE_IT_RISING;\n  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;\n  GPIO_InitStruct.Pull  = GPIO_NOPULL;\n\n  GPIO_InitStruct.Pin   = BUTTON_SLEEP_PIN;\n  HAL_GPIO_WritePin( BUTTON_SLEEP_PORT, BUTTON_SLEEP_PIN, GPIO_PIN_RESET );\n  HAL_GPIO_Init(BUTTON_SLEEP_PORT, &amp;GPIO_InitStruct);\n\n  __HAL_GPIO_EXTI_CLEAR_IT ( BUTTON_SLEEP_PIN );\n  HAL_NVIC_SetPriority     ( EXTI9_5_IRQn, 0, 0);\n  HAL_NVIC_ClearPendingIRQ ( EXTI9_5_IRQn );\n  HAL_NVIC_EnableIRQ       ( EXTI9_5_IRQn );\n}\n\nvoid System_Init ( void )\n{  \n  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */\n  HAL_Init();\n\n  /* Configure the system clock */\n  SystemClock_Config();\n\n  buttonPress = 0;\n\n  LED_Init();\n  Sleep_Button_Init();\n}\n\n/* All GPIOs analog */\nvoid Gpio_Sleep_Mode ( void )\n{\n  GPIO_InitTypeDef GPIO_InitStruct;\n\n  /* GPIO Ports Clock Enable */\n  __HAL_RCC_GPIOA_CLK_ENABLE();\n  __HAL_RCC_GPIOB_CLK_ENABLE();\n  __HAL_RCC_GPIOC_CLK_ENABLE();\n  __HAL_RCC_GPIOD_CLK_ENABLE();\n  __HAL_RCC_GPIOE_CLK_ENABLE();\n  __HAL_RCC_GPIOH_CLK_ENABLE();\n\n  /* Configure as analog */\n  GPIO_InitStruct.Mode  = GPIO_MODE_ANALOG;\n  GPIO_InitStruct.Speed = GPIO_SPEED_HIGH;\n  GPIO_InitStruct.Pull  = GPIO_NOPULL;\n  GPIO_InitStruct.Pin   = GPIO_PIN_All;\n  HAL_GPIO_Init( GPIOA, &amp;GPIO_InitStruct );\n  HAL_GPIO_Init( GPIOB, &amp;GPIO_InitStruct );\n  HAL_GPIO_Init( GPIOC, &amp;GPIO_InitStruct );\n  HAL_GPIO_Init( GPIOD, &amp;GPIO_InitStruct );\n  HAL_GPIO_Init( GPIOE, &amp;GPIO_InitStruct );\n  HAL_GPIO_Init( GPIOH, &amp;GPIO_InitStruct );\n\n  /* Disable GPIOs clock */\n  __HAL_RCC_GPIOA_CLK_DISABLE();\n  __HAL_RCC_GPIOB_CLK_DISABLE();\n  __HAL_RCC_GPIOC_CLK_DISABLE();\n  __HAL_RCC_GPIOD_CLK_DISABLE();\n  __HAL_RCC_GPIOE_CLK_DISABLE();\n  __HAL_RCC_GPIOH_CLK_DISABLE();\n\n  /* Disble all interrupt sources */\n  EXTI-&gt;IMR = 0;\n}\n\n\n/**\n  * @brief  Puts the system into sleep mode\n  */\nvoid System_Sleep ( void )\n{\n  Gpio_Sleep_Mode();\n\n  /* Enable button interrupt */\n  Wake_Button_Init();\n\n  /* FLASH Deep Power Down Mode enabled */\n  HAL_PWREx_EnableFlashPowerDown();\n\n  /* Enter Stop Mode */\n  HAL_PWR_EnterSTOPMode(PWR_LOWPOWERREGULATOR_ON, PWR_STOPENTRY_WFI);\n\n  __HAL_PWR_CLEAR_FLAG(PWR_FLAG_WU); \n\n  System_Init();\n}\n\n\n/**\n  * @brief  The application entry point.\n  */\nint main(void)\n{\n  System_Init();\n  // Allow debugger to work in stop mode\n  DBGMCU-&gt;CR = DBGMCU_CR_DBG_STOP;\n\n  /* Infinite loop */\n  while (1)\n  {\n    LED_On();\n    HAL_Delay(500);\n    LED_Off();\n    HAL_Delay(500);\n\n    if ( buttonPress == 1 )\n    {\n      HAL_Delay ( 500 );\n      buttonPress = 0;\n      System_Sleep();\n    }\n  }\n\n}\n\n\n/**\n  * @brief System Clock Configuration\n  * @retval None\n  */\nvoid SystemClock_Config(void)\n{\n  RCC_OscInitTypeDef RCC_OscInitStruct;\n  RCC_ClkInitTypeDef RCC_ClkInitStruct;\n\n  /* Configure the main internal regulator output voltage */\n  __HAL_RCC_PWR_CLK_ENABLE();\n  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);\n\n  /* Initializes the CPU, AHB and APB busses clocks */\n  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE|RCC_OSCILLATORTYPE_LSE;\n  RCC_OscInitStruct.HSEState = RCC_HSE_ON;\n  RCC_OscInitStruct.LSEState = RCC_LSE_ON;\n  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;\n  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;\n  RCC_OscInitStruct.PLL.PLLM = 2;\n  RCC_OscInitStruct.PLL.PLLN = 96;\n  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV6;\n  RCC_OscInitStruct.PLL.PLLQ = 4;\n  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)\n  {\n    _Error_Handler(__FILE__, __LINE__);\n  }\n\n  /* Initializes the CPU, AHB and APB busses clocks */\n  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK\n                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;\n  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;\n  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;\n  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;\n  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;\n\n  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_1) != HAL_OK)\n  {\n    _Error_Handler(__FILE__, __LINE__);\n  }\n\n  /**Configure the Systick interrupt time */\n  HAL_SYSTICK_Config(HAL_RCC_GetHCLKFreq()/1000);\n\n  /**Configure the Systick */\n  HAL_SYSTICK_CLKSourceConfig(SYSTICK_CLKSOURCE_HCLK);\n\n  /* SysTick_IRQn interrupt configuration */\n  HAL_NVIC_SetPriority(SysTick_IRQn, 0, 0);\n}\n\n\n/**\n  * @brief  This function is executed in case of error occurrence.\n  */\nvoid _Error_Handler(char *file, int line)\n{\n  /* User can add his own implementation to report the HAL error return state */\n  while(1);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "ctime"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1550087622, "post_id": 54678092, "comment_id": 96145702, "body": "<a href=\"http://man7.org/linux/man-pages/man3/difftime.3.html\" rel=\"nofollow noreferrer\">The difftime() function returns the number of seconds elapsed between        time time1 and time time0</a>, thus <code>5 &gt;= 4.5</code> breaks the loop."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1550087776, "post_id": 54678092, "comment_id": 96145768, "body": "It seems from <a href=\"https://stackoverflow.com/questions/471248/what-is-ultimately-a-time-t-typedef-to\">this question</a> that C does not guarantee a type for <code>time_t</code> so it could be that an integral type is passed to <code>difftime</code> resulting in a whole number of seconds for the time difference."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1550194962, "post_id": 54678092, "comment_id": 96189684, "body": "strongly suggest (since <code>time()</code> has a granularity of 1 second)  to use the function <code>setitimer()</code>  Which is used to setup a interval and setting a signal when that interval has expired"}, {"owner": {"reputation": 339, "user_id": 8464011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6545cc3092941ea0cd4b86b689550d28?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Mips", "link": "https://stackoverflow.com/users/8464011/mr-mips"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1550254492, "post_id": 54678092, "comment_id": 96215548, "body": "@user3629249 Yes, I scrapped the <code>time()</code> usage and am now using the second portion newer version (further down on OG post). I&#39;m using <code>clock_gettime()</code> now."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 8464011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6545cc3092941ea0cd4b86b689550d28?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Mips", "link": "https://stackoverflow.com/users/8464011/mr-mips"}, "edited": false, "score": 0, "creation_date": 1550093912, "post_id": 54678598, "comment_id": 96148564, "body": "I do not think I will be going with your example simply because Linux uses timespec in a lot of places, and it might beneficial to stick with that standard. However, your post is good for other situations :)"}], "tags": [], "owner": {"reputation": 834, "user_id": 9295224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f257d8a2c3096d45044d0807a2f8e43?s=128&d=identicon&r=PG&f=1", "display_name": "bogdan tudose", "link": "https://stackoverflow.com/users/9295224/bogdan-tudose"}, "is_accepted": false, "score": 1, "last_activity_date": 1550088383, "creation_date": 1550088383, "answer_id": 54678598, "question_id": 54678092, "link": "https://stackoverflow.com/questions/54678092/ctime-not-getting-time-difference-of-start-end-of-loop-correctly/54678598#54678598", "title": "ctime not getting time difference of start/end of loop correctly", "body": "<p><code>time()</code> returns to the nearest second and <code>difftime()</code> returns the difference of those. So basically this function compute difference of to integers. For a more accurate estimation you can use <code>clock()</code> </p>\n\n<p><code>time_t</code> purpose is for measuring calendar times</p>\n\n<pre><code>int main() \n{\n    float  executionTime = 1.3; \n    int i;\n    double  timeDifference = 1.0;  \n    clock_t t1;\n    clock_t t2;\n\n    t1 = clock();\n\n    for (i = 0; i &lt; 1000000000; i++) \n    {\n        timeDifference = (double)(clock() - t1) / CLOCKS_PER_SEC;\n\n        if (timeDifference &gt;= executionTime) \n        { \n            break; \n        }\n\n    }\n\n    printf(\"time difference is: %.9g\\n\", timeDifference); \n\n    return 0; \n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 8464011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6545cc3092941ea0cd4b86b689550d28?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Mips", "link": "https://stackoverflow.com/users/8464011/mr-mips"}, "edited": false, "score": 0, "creation_date": 1550093365, "post_id": 54678754, "comment_id": 96148292, "body": "can you check out my edited version in OG post based on your example? The loop is not terminating after 4.5 seconds. I believe I&#39;m comparing the times similar to the way you do it (just not as many moving pieces)."}], "tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": true, "score": 1, "last_activity_date": 1550089101, "creation_date": 1550089101, "answer_id": 54678754, "question_id": 54678092, "link": "https://stackoverflow.com/questions/54678092/ctime-not-getting-time-difference-of-start-end-of-loop-correctly/54678754#54678754", "title": "ctime not getting time difference of start/end of loop correctly", "body": "<p><code>clock_gettime</code> can be used to get greater accuracy.<br>\nCall <code>delay</code> with a value greater than 0 to set the delay time, then with -1 to check the elapsed time.<br>\nCalling <code>clock_gettime</code> in main will give the elapsed time in main.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;time.h&gt;\n\n#define BILLION  1E9\n\nint delay ( double seconds)\n{\n    static double usec = 0.0;\n    double elapsed = 0.0;\n    static struct timespec start;\n    struct timespec stop;\n\n    if ( 0.0 &lt;= seconds) {\n        usec = seconds;\n        clock_gettime ( CLOCK_REALTIME, &amp;start);\n        return 0;\n    }\n    clock_gettime ( CLOCK_REALTIME, &amp;stop);\n    elapsed = difftime ( stop.tv_sec, start.tv_sec);\n    elapsed += ( stop.tv_nsec - start.tv_nsec) / BILLION;\n    if ( ( elapsed &lt; usec)) {\n        return 1;\n    }\n    return 0;\n}\n\nint main() {\n\n    double  executionTime = 4.5;\n    int i;\n    double  timeDifference = -1;\n    struct timespec end;\n    struct timespec begin;\n\n    clock_gettime ( CLOCK_REALTIME, &amp;begin);\n    delay( executionTime);//call to set time\n\n    for (i = 0; i &lt; 1000000000; i++)\n    {\n        if ( !delay( -1)) {//call to check elapsed time\n            break;\n        }\n    }\n    clock_gettime ( CLOCK_REALTIME, &amp;end);\n    timeDifference = difftime ( end.tv_sec, begin.tv_sec);\n    timeDifference += ( end.tv_nsec - begin.tv_nsec) / BILLION;\n\n    printf(\"time difference is: %f\\n\", timeDifference);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 8464011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6545cc3092941ea0cd4b86b689550d28?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Mips", "link": "https://stackoverflow.com/users/8464011/mr-mips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 54678754, "answer_count": 2, "score": 1, "last_activity_date": 1550094236, "creation_date": 1550086592, "last_edit_date": 1550094236, "question_id": 54678092, "link": "https://stackoverflow.com/questions/54678092/ctime-not-getting-time-difference-of-start-end-of-loop-correctly", "title": "ctime not getting time difference of start/end of loop correctly", "body": "<p>I'm trying to have a loop execute for an exact time specified by <code>executionTime</code>. I am using <code>ctime</code> to get this timing, and I need it to be within a few milliseconds of accuracy (which I believe it is). Once that loop runs for the execution time specified, it should break. </p>\n\n<p>My problem is for the execution time of 0.5, the result being printing is 1. Upon further testing it appears my program rounds up the execution time to the nearest integer. So for 4.5 <code>executionTime</code>, the execution time being printed is 5.0000000. My code is below. I am not sure where this error is coming from. </p>\n\n<pre><code>#include &lt;time.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;unistd.h&gt; \n\nint main() \n{\n    float  executionTime = 4.5; \n    int i;\n    float  timeDifference = -1;  \n    time_t t1;\n    time_t t2;\n\n    t1 = time(0);\n\n    for (i = 0; i &lt; 1000000000; i++) \n    {\n        t2 = time(0); \n\n        timeDifference = difftime(t2, t1); \n\n        if (timeDifference &gt;= executionTime) \n        { \n            break; \n        }\n\n    }\n\n    printf(\"time difference is: %f\\n\", timeDifference); \n\n    return 0; \n\n}\n</code></pre>\n\n<p>NEW VERSION trying to use clock_gettime. This version has the issue of never breaking when execution time is reached for some reason inside the loop.</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\n#define BILLION 1E9 \n\nint main()\n{\n    float  executionTime = 4.5;\n    int i;\n    float  elapsedTime = -1;\n\n    struct timespec start;\n    struct timespec stop;\n\n    //Get starting time \n    clock_gettime(CLOCK_REALTIME, &amp;start);\n\n    for (i = 0; i &lt; 1000000000; i++)\n    {\n        //Get current time\n        clock_gettime(CLOCK_REALTIME, &amp;stop);\n\n        elapsedTime = ((stop.tv_sec - start.tv_sec) + (stop.tv_nsec - start.tv_nsec)) / BILLION;\n\n        if (elapsedTime &gt;= executionTime)\n        {\n            break;\n        }\n    }\n\n    printf(\"time difference is: %f\\n\", elapsedTime);\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "ncurses"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1550085725, "post_id": 54677816, "comment_id": 96144786, "body": "Not sure what the question is, but &quot;deleting&quot; character can be done by writing a whitespace over it."}, {"owner": {"reputation": 3, "user_id": 7762336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bda09c1e7234b00787f533df536a3f90?s=128&d=identicon&r=PG&f=1", "display_name": "Fabien", "link": "https://stackoverflow.com/users/7762336/fabien"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550085955, "post_id": 54677816, "comment_id": 96144888, "body": "Sorry my english is not very good, i wasn&#39;t sure about how to ask this question. The thing is the character that the player moves is followed by an older same character, i was wondering how to erase it."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1550087138, "post_id": 54677816, "comment_id": 96145445, "body": "<b>before</b> you update <code>px</code> or <code>py</code> output a space. Alternatively, copy <code>px</code> and <code>py</code>, write the &#39;C&#39;, then write a space at the saved old <code>px</code> and <code>py</code>"}, {"owner": {"reputation": 3, "user_id": 7762336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bda09c1e7234b00787f533df536a3f90?s=128&d=identicon&r=PG&f=1", "display_name": "Fabien", "link": "https://stackoverflow.com/users/7762336/fabien"}, "edited": false, "score": 0, "creation_date": 1550087974, "post_id": 54677816, "comment_id": 96145869, "body": "SOLVED,  I added mvwaddch(win, py, px,&#39; &#39;); right after wrefresh(win); and it works perfectly. Thank both of you!"}], "owner": {"reputation": 3, "user_id": 7762336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bda09c1e7234b00787f533df536a3f90?s=128&d=identicon&r=PG&f=1", "display_name": "Fabien", "link": "https://stackoverflow.com/users/7762336/fabien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550085488, "creation_date": 1550085453, "last_edit_date": 1550085488, "question_id": 54677816, "link": "https://stackoverflow.com/questions/54677816/ncurses-how-to-get-rid-of-a-persistent-character", "title": "ncurses, how to get rid of a persistent character?", "body": "<p>I am coding this very simple game to learn C on UNIX OSs. The 'C' character (the chicken), which is controlled by the player in the window, is followed by one or two predecessors. How should erase them?</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;ncurses.h&gt;\nWINDOW *create_newwin(int h, int l, int y, int x)\n{   WINDOW *local_win;\n\n    local_win = newwin(h, l, y, x);\n    box(local_win, 0 , 0);      \n    wrefresh(local_win);        \n\n    return local_win;\n}\nint main(int argc, char **argv)\n{\n    WINDOW *win;\n    int x, y, h, l;                    // window\n    int px, py;                       // chicken\n    int v1x;                  // car 1\n    int ch, top=0;                           \n    initscr();  \n    cbreak();                   \n    keypad(stdscr, TRUE);       \n    nodelay(stdscr, TRUE);\n    curs_set(0);                              \n\n    h = 30;\n    l = 60 ;\n    y = (LINES - h) / 2;        \n    x = (COLS - l) / 2; \n    py = 1;\n    px = 30;\n    v1x = 1;        \n\n    while ((ch = getch()) != 'q' &amp;&amp; (py != 10 || px != v1x)){                                \n\n        if (clock() &gt; top + 100  ){        \n            top = clock();\n            win = create_newwin(h, l, y, x);  // moving car \n            mvwhline(win, 10, 1, '.', 58);\n            mvwaddch(win, 10, v1x, 'V');\n            v1x++;\n            if (v1x &gt; 58)\n                v1x = 1;\n        }\n\n\n        switch(ch){                            // moving chicken \n            case KEY_LEFT:\n                px--;\n                break;\n            case KEY_RIGHT:\n                px++;\n\n                break;\n            case KEY_UP:\n                py--;\n                break;\n            case KEY_DOWN:\n                py++;\n                break;  \n        }\n        mvwaddch(win, py, px,'C');                  \n        wrefresh(win);\n    }\n\n\n    endwin();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "struct", "dynamic-memory-allocation", "file-read"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1550084570, "post_id": 54677562, "comment_id": 96144272, "body": "<code>char *fileFormat; fgets(fileFormat, sizeof(fileFormat), f)</code> - where is it going to store whatever it read?"}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550084716, "post_id": 54677562, "comment_id": 96144339, "body": "I want to store it in pic-&gt;comments (PPM-&gt;comments). But when I tried to store it directly it gave me errors, so I stored the line in a string and put that string in the structure."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1550084829, "post_id": 54677562, "comment_id": 96144398, "body": "<i>&quot;... so I stored the line in a string...&quot;</i> - no , you didn&#39;t. You stored the line at an indeterminate address hosted by an uninitialized pointer, and in so doing, invoke undefined behavior."}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1550085000, "post_id": 54677562, "comment_id": 96144470, "body": "I am very new to C and it is my first time dealing with a low-level language, so I do not understand what you mean by that. Would you please explain a bit more clearly?"}, {"owner": {"reputation": 146, "user_id": 8041450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0b5a132c2c3868afc9c0940207b1f8?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Leyk", "link": "https://stackoverflow.com/users/8041450/thomas-leyk"}, "edited": false, "score": 1, "creation_date": 1550085745, "post_id": 54677562, "comment_id": 96144795, "body": "Small tip: Use the -Wall flags when compiling with gcc to enable all Warnings. And if you get a warning, try to understand, google it if you can&#39;t, and fix it."}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1550086127, "post_id": 54677562, "comment_id": 96144959, "body": "Thank you. I will try that from now on."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1550089896, "post_id": 54677562, "comment_id": 96146761, "body": "This is not a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Especially the program will crash before the <code>getc</code> loop and al, so in the course of preparing your question you should&#39;ve found out that they&#39;re not relevant to the question."}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1550153478, "post_id": 54677562, "comment_id": 96172084, "body": "I thought that problem was with struct and its memory allocation. That is why I included all that. I don&#39;t understand why did you downvote this post when the question was already answered? The problem I thought was not the problem, and the reason why I couldn&#39;t find anything about it. That&#39;s the reason why I asked the question over here."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550084707, "post_id": 54677604, "comment_id": 96144337, "body": "@EugeneSh. Added a remark about that. This is probably just the tip of the iceberg."}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1550085137, "post_id": 54677604, "comment_id": 96144521, "body": "But I don&#39;t understand that why does it manage it populate work by populating the struct. I mean the pic-&gt;format = &quot;P3&quot; in this case works as I expected it to. Would you please clarify what am I missing?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 1, "creation_date": 1550085227, "post_id": 54677604, "comment_id": 96144552, "body": "When you&#39;re using character buffers you <b>must allocate them first</b>. This can be done like <code>char buffer[BUFFER_SIZE]</code> or <code>char* buffer = malloc(BUFFER_SIZE)</code> depending if you want dynamic allocation or not. In your case you stuffed a completely uninitialized, unallocated pointer into a function call. That&#39;s going to crash for sure."}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 0, "creation_date": 1550085373, "post_id": 54677604, "comment_id": 96144623, "body": "Oh! I get it. That makes my understanding of malloc also a LOT more clearer. Thank you so much!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 1, "creation_date": 1550085463, "post_id": 54677604, "comment_id": 96144660, "body": "Getting the hang of pointers can be a bit tricky, so if you have problems like this, step through your code in the debugger to see what values your pointers have. Often they&#39;ll be <code>NULL</code> in which case you&#39;re in for a bad time if you use them. When you discover an accidentally uninitialized pointer, look for a way to allocate it with an appropriate size."}, {"owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "edited": false, "score": 1, "creation_date": 1550086198, "post_id": 54677604, "comment_id": 96145006, "body": "Thank you. I will keep that in mind from now on."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1550084691, "last_edit_date": 1550084691, "creation_date": 1550084651, "answer_id": 54677604, "question_id": 54677562, "link": "https://stackoverflow.com/questions/54677562/segmentation-fault-while-trying-to-read-next-line-character-from-file/54677604#54677604", "title": "Segmentation Fault while trying to read next line/character from file", "body": "<p>You're reading into an uninitialized pointer, so this is going to crash. You need a buffer:</p>\n\n<pre><code>char *fileFormat = malloc(SIZE_OF_FILE_FORMAT);\n</code></pre>\n\n<p>Additionally <code>sizeof(fileFormat)</code> returns <em>the size of the pointer</em> which in this case is not what you want. You need the size of the buffer the pointer points to.</p>\n"}], "owner": {"reputation": 558, "user_id": 7018054, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UycQem8pw74/AAAAAAAAAAI/AAAAAAAAAEE/jEbBAgpFWNg/photo.jpg?sz=128", "display_name": "Naeem Khan", "link": "https://stackoverflow.com/users/7018054/naeem-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1550089833, "accepted_answer_id": 54677604, "answer_count": 1, "score": -1, "last_activity_date": 1550084691, "creation_date": 1550084501, "last_edit_date": 1550084616, "question_id": 54677562, "link": "https://stackoverflow.com/questions/54677562/segmentation-fault-while-trying-to-read-next-line-character-from-file", "closed_reason": "Duplicate", "title": "Segmentation Fault while trying to read next line/character from file", "body": "<p>I have a school project where I need to read .ppm file in C and store it in a struct to be used for later tasks. Once I get the first line and assign it to a struct variable, I get errors if I try to navigate through the file again. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct {\n    int r, g, b;\n} pixels;\n\ntypedef struct {\n    int width, height, maxColors;\n    char *format; //PPM file format\n    char *comments;\n    pixels *pixels;\n} PPM;\n\nPPM *getPPM(FILE * f) {\n\n    // Check if the file is valid. If not then exit the program\n    if(f == NULL) {\n        perror(\"Cannot open file: \");\n        exit(1);\n    }\n\n    PPM *pic = malloc(sizeof(PPM));\n    // If memory allocation fails, exit the program.    \n    if(!pic) {\n        perror(\"Unable to allocate memory for structure\");\n        exit(1);\n    }\n\n    // Store the first line of file into the structure\n    char *fileFormat;\n\n    if(fgets(fileFormat, sizeof(fileFormat), f) != NULL) {\n        // If it is a valid .ppm format, then store it in the structure\n        if(fileFormat[0] == 'P') \n            pic-&gt;format = fileFormat;\n    } else {\n        perror(\"Unable to read line from the input file\");\n        exit(1);\n    }\n\n//Errors start here\n    int c = getc(f);\n    while(c != EOF)\n        c = getc(f);\n\n/*\n    char *comments;\n\n    if(fgets(comments, sizeof(comments), f) != NULL) {\n        printf(\"%s\\n\", comments);\n    } else {\n        perror(\"Unable to read line from the input file\");\n        exit(1);\n    }\n*/\n    fclose(f);\n    return pic; \n}\n\n\n\nint main(int argc, char **argv) {\n\n    PPM *p = getPPM(fopen(argv[1], \"r\"));\n    printf(\" PPM format = %s\",p-&gt;format);\n    return 0;\n}\n</code></pre>\n\n<p>I have tried getting individual characters from the file. I have tried reading the whole line using fgets like I did in the previous step (for fileFormat), but every time it gives out segment fault. I have tried looking at other examples but I cannot figure out the problem. I have been at it for hours, so any help would be greatly appreciated!</p>\n\n<p>Could the problem with the way the memory is allocated? Or do I need to give some sort of pointer to the file when I try to read a new line? I tried finding an answer in man pages but I couldn't figure anything out.</p>\n\n<p>P.S. the while(c != EOF) { c = getc(f); } and the next commented step was just to see if it was working or not. I want to put all the information from the .ppm file into the PPM struct.</p>\n"}, {"tags": ["c", "riscv"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550083350, "post_id": 54677118, "comment_id": 96143706, "body": "Technically that breaks strict aliasing. You either have to copy the <code>int</code> value to a <code>char</code> buffer, or use a <code>union</code> for type-punning. With that said, how would a four-byte integer be stored in memory on a little-endian system? How would it be stored on a bit-endian system? If you know how it would be stored on a little-endian system, just reverse it for the big-endian system and you have the result."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550083571, "post_id": 54677118, "comment_id": 96143804, "body": "Oh and I recommend you print it as an 8-digit hexadecimal value instead, that way it will be easier to see what bits might be set. Use the <code>&quot;%08x&quot;</code> format for that, and use an <code>unsigned int</code> for the value instead."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1550083751, "post_id": 54677118, "comment_id": 96143905, "body": "I&#39;m not seeing how that breaks strict aliasing.  It is explicitly permitted to access the value of an object of any type via an lvalue of character type."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1550083951, "post_id": 54677118, "comment_id": 96144010, "body": "According to <a href=\"https://en.wikipedia.org/wiki/RISC-V#Memory_access\" rel=\"nofollow noreferrer\">Wikipedia</a>, RISC-V&#39;s native byte order is little-endian."}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 2, "last_activity_date": 1550090296, "creation_date": 1550090296, "answer_id": 54679028, "question_id": 54677118, "link": "https://stackoverflow.com/questions/54677118/checking-endianness-of-risc-v-machine-using-c-code/54679028#54679028", "title": "Checking Endianness of RISC-V machine using C-code", "body": "<p>The program is valid regardless of the platform.\nThe output is <code>1</code> for a little-endian computer <em>or</em> a computer where <code>sizeof (int)</code> == <code>sizeof (char)</code>. It will be <code>0</code> for all other platforms.</p>\n\n<p>Since RISC-V is little-endian then the output should be <code>1</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11058186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f2995d518a4fcc630e2bb8085673f51?s=128&d=identicon&r=PG&f=1", "display_name": "uskhan", "link": "https://stackoverflow.com/users/11058186/uskhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550090296, "creation_date": 1550082760, "last_edit_date": 1550090212, "question_id": 54677118, "link": "https://stackoverflow.com/questions/54677118/checking-endianness-of-risc-v-machine-using-c-code", "title": "Checking Endianness of RISC-V machine using C-code", "body": "<p>Can someone please help me out with this. There is a C-code which most of you are familiar with, it checks the endian-ness of a machine.</p>\n\n<p>What would be the result if it runs on a RISC-V machine?</p>\n\n<p>Code is mentioned as below:</p>\n\n<pre><code>#include &lt;cstdio&gt;\nint main()\n{\n    int x = 1;\n    char* p = (char*)&amp;x;\n    printf(\"%d\\n\",(int)*p);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1550081921, "post_id": 54676834, "comment_id": 96143035, "body": "The visual studio C compiler only supports the C89 standard. <code>inline</code> is part of the C99 standard: <a href=\"https://en.cppreference.com/w/c/language/inline\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/inline</a>"}, {"owner": {"reputation": 2761, "user_id": 985179, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7f9f118aa571a5e0ebcfe240add2d868?s=128&d=identicon&r=PG", "display_name": "Neon Flash", "link": "https://stackoverflow.com/users/985179/neon-flash"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1550082321, "post_id": 54676834, "comment_id": 96143237, "body": "Thanks, that explains it. Which version of Visual Studio is required to compile it? Are you able to compile it?"}, {"owner": {"reputation": 2761, "user_id": 985179, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7f9f118aa571a5e0ebcfe240add2d868?s=128&d=identicon&r=PG", "display_name": "Neon Flash", "link": "https://stackoverflow.com/users/985179/neon-flash"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1550082344, "post_id": 54676834, "comment_id": 96143251, "body": "I am able to compile this code for Linux using gcc and it works well. However, for Windows I cannot compile it."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1550082489, "post_id": 54676834, "comment_id": 96143323, "body": "I don&#39;t think any version of Visual Studio can officially compile this code (I haven&#39;t tried), but just removing the <code>inline</code> specifier (plus the other fix for <code>i</code>)  should be sufficient"}, {"owner": {"reputation": 2761, "user_id": 985179, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7f9f118aa571a5e0ebcfe240add2d868?s=128&d=identicon&r=PG", "display_name": "Neon Flash", "link": "https://stackoverflow.com/users/985179/neon-flash"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1550101880, "post_id": 54676834, "comment_id": 96151270, "body": "You are correct. I removed the inline keyword and the code compiled successfully. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1550196630, "last_edit_date": 1550196630, "creation_date": 1550196206, "answer_id": 54701738, "question_id": 54676834, "link": "https://stackoverflow.com/questions/54676834/issue-with-compiling-binary-for-windows/54701738#54701738", "title": "Issue with Compiling Binary for Windows", "body": "<p>using linux</p>\n\n<p>I compiled the linked code:</p>\n\n<p>this is the result:</p>\n\n<pre><code>gcc -ggdb -Wall -Wextra -Wconversion -pedantic -std=gnu11 -c \"untitled2.c\" \nuntitled2.c: In function \u2018main\u2019:\nuntitled2.c:93:10: warning: conversion to \u2018unsigned int\u2019 from \u2018int\u2019 may change the sign of the result [-Wsign-conversion]\n    ecx = i;\n          ^\nuntitled2.c:32:14: warning: unused parameter \u2018argc\u2019 [-Wunused-parameter]\n int main(int argc, char **argv)\n              ^~~~\nuntitled2.c:32:27: warning: unused parameter \u2018argv\u2019 [-Wunused-parameter]\n int main(int argc, char **argv)\n                           ^~~~\nCompilation finished successfully.\n</code></pre>\n\n<p>Given that result, I have a few suggestion:</p>\n\n<ol>\n<li>when the parameters to <code>main()</code> are not going to be used, then use the signature: <code>int main( void )</code></li>\n<li>these lines: <code>int i; for (i=2; i&lt;10; i++) {</code>  should be\n<code>for( unsigned i=2; i&lt;10; i++) {</code></li>\n</ol>\n\n<p>after applying the above fixes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#if defined(_MSC_VER)\n#include &lt;intrin.h&gt;\n#endif\n\nstatic inline void native_cpuid(unsigned int *eax, unsigned int *ebx,\n    unsigned int *ecx, unsigned int *edx)\n{\n    /* ecx is often an input as well as an output. */\n\n#if !defined(_MSC_VER)\n\n    asm volatile(\"cpuid\"\n        : \"=a\" (*eax),\n        \"=b\" (*ebx),\n        \"=c\" (*ecx),\n        \"=d\" (*edx)\n        : \"0\" (*eax), \"2\" (*ecx));\n\n#else \n    int registers[4] = {0,0,0,0};\n\n    __cpuidex(registers, *eax, *ecx);\n    *eax = registers[0];\n    *ebx = registers[1];\n    *ecx = registers[2];\n    *edx = registers[3];\n\n#endif\n}\n\nint main( void )\n{\n  /* This programm prints some CPUID information and tests the SGX support of the CPU */\n\n  unsigned eax, ebx, ecx, edx;\n  eax = 1; /* processor info and feature bits */\n\n  native_cpuid(&amp;eax, &amp;ebx, &amp;ecx, &amp;edx);\n  printf(\"eax: %x ebx: %x ecx: %x edx: %x\\n\", eax, ebx, ecx, edx);\n\n  printf(\"stepping %d\\n\", eax &amp; 0xF); // Bit 3-0\n  printf(\"model %d\\n\", (eax &gt;&gt; 4) &amp; 0xF); // Bit 7-4\n  printf(\"family %d\\n\", (eax &gt;&gt; 8) &amp; 0xF); // Bit 11-8\n  printf(\"processor type %d\\n\", (eax &gt;&gt; 12) &amp; 0x3); // Bit 13-12\n  printf(\"extended model %d\\n\", (eax &gt;&gt; 16) &amp; 0xF); // Bit 19-16\n  printf(\"extended family %d\\n\", (eax &gt;&gt; 20) &amp; 0xFF); // Bit 27-20\n\n  // if smx set - SGX global enable is supported\n  printf(\"smx: %d\\n\", (ecx &gt;&gt; 6) &amp; 1); // CPUID.1:ECX.[bit6]\n\n  /* Extended feature bits (EAX=07H, ECX=0H)*/\n  printf(\"\\nExtended feature bits (EAX=07H, ECX=0H)\\n\");\n  eax = 7;\n  ecx = 0;\n  native_cpuid(&amp;eax, &amp;ebx, &amp;ecx, &amp;edx);\n  printf(\"eax: %x ebx: %x ecx: %x edx: %x\\n\", eax, ebx, ecx, edx);\n\n  //CPUID.(EAX=07H, ECX=0H):EBX.SGX = 1,\n  printf(\"sgx available: %d\\n\", (ebx &gt;&gt; 2) &amp; 0x1);\n\n  /* SGX has to be enabled in MSR.IA32_Feature_Control.SGX_Enable\n    check with msr-tools: rdmsr -ax 0x3a\n    SGX_Enable is Bit 18\n    if SGX_Enable = 0 no leaf information will appear. \n     for more information check Intel Docs Architectures-software-developer-system-programming-manual - 35.1 Architectural MSRS\n  */    \n\n  /* CPUID Leaf 12H, Sub-Leaf 0 Enumeration of Intel SGX Capabilities (EAX=12H,ECX=0) */\n  printf(\"\\nCPUID Leaf 12H, Sub-Leaf 0 of Intel SGX Capabilities (EAX=12H,ECX=0)\\n\");\n  eax = 0x12;\n  ecx = 0;\n  native_cpuid(&amp;eax, &amp;ebx, &amp;ecx, &amp;edx);\n  printf(\"eax: %x ebx: %x ecx: %x edx: %x\\n\", eax, ebx, ecx, edx);\n\n  printf(\"sgx 1 supported: %d\\n\", eax &amp; 0x1);\n    printf(\"sgx 2 supported: %d\\n\", (eax &gt;&gt; 1) &amp; 0x1);\n  printf(\"MaxEnclaveSize_Not64: %x\\n\", edx &amp; 0xFF);\n  printf(\"MaxEnclaveSize_64: %x\\n\", (edx &gt;&gt; 8) &amp; 0xFF);\n\n  /* CPUID Leaf 12H, Sub-Leaf 1 Enumeration of Intel SGX Capabilities (EAX=12H,ECX=1) */\n  printf(\"\\nCPUID Leaf 12H, Sub-Leaf 1 of Intel SGX Capabilities (EAX=12H,ECX=1)\\n\");\n  eax = 0x12;\n  ecx = 1;\n  native_cpuid(&amp;eax, &amp;ebx, &amp;ecx, &amp;edx);\n  printf(\"eax: %x ebx: %x ecx: %x edx: %x\\n\", eax, ebx, ecx, edx);\n\n\n  for ( unsigned i=2; i&lt;10; i++) {\n      /* CPUID Leaf 12H, Sub-Leaf i Enumeration of Intel SGX Capabilities (EAX=12H,ECX=i) */\n      printf(\"\\nCPUID Leaf 12H, Sub-Leaf %d of Intel SGX Capabilities (EAX=12H,ECX=%d)\\n\",i,i);\n      eax = 0x12;\n      ecx = i;\n      native_cpuid(&amp;eax, &amp;ebx, &amp;ecx, &amp;edx);\n      printf(\"eax: %x ebx: %x ecx: %x edx: %x\\n\", eax, ebx, ecx, edx);\n  }\n}\n</code></pre>\n\n<p>running the program results in:</p>\n\n<pre><code>eax: 630f01 ebx: 1040800 ecx: 3e98320b edx: 178bfbff\nstepping 1\nmodel 0\nfamily 15\nprocessor type 0\nextended model 3\nextended family 6\nsmx: 0\n\nExtended feature bits (EAX=07H, ECX=0H)\neax: 0 ebx: 9 ecx: 0 edx: 0\nsgx available: 0\n\nCPUID Leaf 12H, Sub-Leaf 0 of Intel SGX Capabilities (EAX=12H,ECX=0)\neax: 0 ebx: 0 ecx: 0 edx: 0\nsgx 1 supported: 0\nsgx 2 supported: 0\nMaxEnclaveSize_Not64: 0\nMaxEnclaveSize_64: 0\n\nCPUID Leaf 12H, Sub-Leaf 1 of Intel SGX Capabilities (EAX=12H,ECX=1)\neax: 0 ebx: 0 ecx: 0 edx: 0\n\nCPUID Leaf 12H, Sub-Leaf 2 of Intel SGX Capabilities (EAX=12H,ECX=2)\neax: 0 ebx: 0 ecx: 0 edx: 0\n\nCPUID Leaf 12H, Sub-Leaf 3 of Intel SGX Capabilities (EAX=12H,ECX=3)\neax: 0 ebx: 0 ecx: 0 edx: 0\n\nCPUID Leaf 12H, Sub-Leaf 4 of Intel SGX Capabilities (EAX=12H,ECX=4)\neax: 0 ebx: 0 ecx: 0 edx: 0\n\nCPUID Leaf 12H, Sub-Leaf 5 of Intel SGX Capabilities (EAX=12H,ECX=5)\neax: 0 ebx: 0 ecx: 0 edx: 0\n\nCPUID Leaf 12H, Sub-Leaf 6 of Intel SGX Capabilities (EAX=12H,ECX=6)\neax: 0 ebx: 0 ecx: 0 edx: 0\n\nCPUID Leaf 12H, Sub-Leaf 7 of Intel SGX Capabilities (EAX=12H,ECX=7)\neax: 0 ebx: 0 ecx: 0 edx: 0\n\nCPUID Leaf 12H, Sub-Leaf 8 of Intel SGX Capabilities (EAX=12H,ECX=8)\neax: 0 ebx: 0 ecx: 0 edx: 0\n\nCPUID Leaf 12H, Sub-Leaf 9 of Intel SGX Capabilities (EAX=12H,ECX=9)\neax: 0 ebx: 0 ecx: 0 edx: 0\n</code></pre>\n\n<p>this was run on a <em>AMD A8-7650k radeon r7, 10 compute cores 4c+6g x 4</em></p>\n"}], "owner": {"reputation": 2761, "user_id": 985179, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7f9f118aa571a5e0ebcfe240add2d868?s=128&d=identicon&r=PG", "display_name": "Neon Flash", "link": "https://stackoverflow.com/users/985179/neon-flash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550196630, "creation_date": 1550081636, "question_id": 54676834, "link": "https://stackoverflow.com/questions/54676834/issue-with-compiling-binary-for-windows", "title": "Issue with Compiling Binary for Windows", "body": "<p>I am trying to compile the code from github here: <a href=\"https://github.com/ayeks/SGX-hardware/blob/master/test-sgx.c\" rel=\"nofollow noreferrer\">https://github.com/ayeks/SGX-hardware/blob/master/test-sgx.c</a></p>\n\n<p>I have Visual Studio 2010 and I am compiling using (cl), the command line version of Visual Studio and it gives me the following compiling errors:</p>\n\n<pre><code>sgx_check.c(6) : error C2054: expected '(' to follow 'inline'\nsgx_check.c(8) : error C2085: 'native_cpuid' : not in formal parameter list\nsgx_check.c(8) : error C2143: syntax error : missing ';' before '{'\nsgx_check.c(88) : error C2143: syntax error : missing ';' before 'type'\nsgx_check.c(89) : error C2065: 'i' : undeclared identifier\nsgx_check.c(89) : error C2065: 'i' : undeclared identifier\nsgx_check.c(89) : error C2065: 'i' : undeclared identifier\nsgx_check.c(91) : error C2065: 'i' : undeclared identifier\nsgx_check.c(91) : error C2065: 'i' : undeclared identifier\nsgx_check.c(93) : error C2065: 'i' : undeclared identifier\n</code></pre>\n\n<p>The command used to compile the code is:</p>\n\n<pre><code>cl sgx_check.c\n</code></pre>\n\n<p>I checked the compiler error messages and I cannot fix them.</p>\n\n<p>I can fix the error messages for 'i' as an undeclared identifier by moving the \"int i\" line to the beginning of main() function.</p>\n\n<p>I would like to learn how to compile this binary in all the details.</p>\n"}, {"tags": ["c", "string", "pointers", "calloc"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1550082045, "post_id": 54676803, "comment_id": 96143086, "body": "<code>%ld</code> is improper for the return of <code>strlen</code> which is <code>size_t</code>, use <code>%zu</code> instead. (though both are for printing 8-byte values, you will have negative values printed if the sign-bit was ever set -- which would be a really long string). You cannot use <code>strlen (*list)</code> as <code>*list</code> will have multiple intervening <code>&#39;\\0&#39;</code> characters terminating the <code>strlen</code> scan for the end of string."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1550082001, "creation_date": 1550082001, "answer_id": 54676932, "question_id": 54676803, "link": "https://stackoverflow.com/questions/54676803/c-write-on-a-string-but-every-k-bytes/54676932#54676932", "title": "c - Write on a string but every k bytes", "body": "<p>The <code>printf()</code> is always printing just the first word in <code>*list</code>. You need to add <code>offset</code> there as well:</p>\n\n<pre><code>printf(\"list: %s len %ld\\n\",*list+offset,strlen(*list+offset));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1550082109, "creation_date": 1550082109, "answer_id": 54676963, "question_id": 54676803, "link": "https://stackoverflow.com/questions/54676803/c-write-on-a-string-but-every-k-bytes/54676963#54676963", "title": "c - Write on a string but every k bytes", "body": "<p>You are filling in the array (I hesitate to call it a string, because it actually contains 4) the way you expect.  The problem comes when you try to get its length in <code>main</code>:</p>\n\n<pre><code>int len=strlen(list);\n</code></pre>\n\n<p>The <code>strlen</code> function counts characters until the first null byte.  What you have here however is 4 strings embedded in an array with null bytes separating them.  So <code>strlen</code> stops counting at the first null byte.</p>\n\n<p>To illustrate, here is a simplified version of what your array contains:</p>\n\n<pre><code>-------------------------------------------------------------\n| 't' | 'r' | 'y' |  0  |  0  | 't' | 'e' | 's' | 't' |  0  |  ...\n-------------------------------------------------------------\n</code></pre>\n\n<p>The actual length of the array is what was malloc'ed in the function, so use that instead:</p>\n\n<pre><code>int len=DIM*(MAX_NAME_LENGTH+1);\n</code></pre>\n\n<p>You're also not printing correctly in <code>edit</code>:</p>\n\n<pre><code>offset=offset+MAX_NAME_LENGTH+1;\nprintf(\"list: %s len %ld\\n\",*list,strlen(*list));\n</code></pre>\n\n<p>You use <code>offset</code> when copying the strings, so use it here too when printing.</p>\n\n<pre><code>printf(\"list: %s len %ld\\n\",*list+offset,strlen(*list+offset));\noffset=offset+MAX_NAME_LENGTH+1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1550204078, "creation_date": 1550204078, "answer_id": 54702598, "question_id": 54676803, "link": "https://stackoverflow.com/questions/54676803/c-write-on-a-string-but-every-k-bytes/54702598#54702598", "title": "c - Write on a string but every k bytes", "body": "<p>when coding, simple is always better:</p>\n\n<p>Suggest the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_NAME_LENGTH 32\n#define DIM 4\n\nint main( void ) \n{  \n    char list[ DIM ][ MAX_NAME_LENGTH +1 ] = \n    {\n        \"try\",\n        \"test\",\n        \"test5\",\n        \"testone\"\n    };\n\n    puts(\"user online list:\\n\");\n    for( size_t i=0; i&lt;DIM; ++i ) \n    {\n        printf(\" %s\\n\", list[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>which yields the following output:</p>\n\n<pre><code>user online list:\n\n try\n test\n test5\n testone\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 10181236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5bQoI5Vh3P0/AAAAAAAAAAI/AAAAAAAAB_c/z8TUCALIFNk/photo.jpg?sz=128", "display_name": "JayJona", "link": "https://stackoverflow.com/users/10181236/jayjona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54676963, "answer_count": 3, "score": 0, "last_activity_date": 1550204078, "creation_date": 1550081504, "question_id": 54676803, "link": "https://stackoverflow.com/questions/54676803/c-write-on-a-string-but-every-k-bytes", "title": "c - Write on a string but every k bytes", "body": "<p>the exercise gives me a main that prints the string list this way, that is, knows that every MAX_NAME_LENGTH has a meaningful name and prints it.</p>\n\n<pre><code>#define MAX_NAME_LENGTH 32\n#define DIM 4\n\nint main(int argc, char *argv[]) {  \n    char *list=calloc((MAX_NAME_LENGTH+1),sizeof(char));\n    edit(&amp;list);\n\n    int len=strlen(list);\n    printf(\"strlen list %ld\\n\",strlen(list));\n\n    int nusers = len / (MAX_NAME_LENGTH+1);\n    int p=0;\n\n    printf(\"user online list:\\n\");\n    for(int i=0,p=0;i&lt;nusers; ++i, p+=(MAX_NAME_LENGTH+1)) {\n        printf(\" %s\\n\", &amp;list[p]);\n    }\n\n    free(list);\n\n    return 0;\n}\n</code></pre>\n\n<p>What I can not do is fill in the string correctly, even if the  string is allocated length <code>DIM*(MAX_NAME_LENGTH+1)</code>, when I'm going to make a copy the length is less than MAX_NAME_LENGTH, how to do it?</p>\n\n<p>This is edit function which I use to fill the string list</p>\n\n<pre><code>int edit(char** list){\n    int i;\n    char *array[DIM];\n    int offset=0;\n    for(i=0;i&lt;DIM;i++){\n        array[i]=calloc((MAX_NAME_LENGTH+1),sizeof(char));\n    }\n\n    strncpy(array[0],\"try\",MAX_NAME_LENGTH+1);\n    printf(\"array: %s len %ld\\n\",array[0],strlen(array[0]));\n\n    strncpy(array[1],\"test\",MAX_NAME_LENGTH+1);\n    printf(\"array: %s len %ld\\n\",array[1],strlen(array[1]));\n\n    strncpy(array[2],\"test5\",MAX_NAME_LENGTH+1);\n    printf(\"array: %s len %ld\\n\",array[2],strlen(array[2]));\n\n    strncpy(array[3],\"testone\",MAX_NAME_LENGTH+1);\n    printf(\"array: %s len %ld\\n\",array[3],strlen(array[3]));\n\n    *list=realloc(*list,DIM*(MAX_NAME_LENGTH+1));\n    for(i=0;i&lt;DIM;i++){\n        strncpy(*list+offset,array[i],MAX_NAME_LENGTH+1);\n        offset=offset+MAX_NAME_LENGTH+1;\n        printf(\"list: %s len %ld\\n\",*list,strlen(*list));\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 2, "creation_date": 1550080087, "post_id": 54676427, "comment_id": 96142124, "body": "What is the definition of <code>concat</code>? Also, why not use the standard <code>strcat</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1550080168, "post_id": 54676427, "comment_id": 96142177, "body": "You never initialized <code>buf</code>, so you&#39;re getting undefined behavior."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1550080183, "post_id": 54676427, "comment_id": 96142183, "body": "Also, never ever ever ever ever use <code>gets</code>!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1550080292, "post_id": 54676427, "comment_id": 96142252, "body": "<a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-dangerous-why-should-it-not-be-used\">Why gets() is so dangerous it should never be used!</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1550080355, "post_id": 54676427, "comment_id": 96142284, "body": "After <code>char *buf;</code> -- What valid memory is <code>buf</code> pointing to? (hint: none you own)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1550080552, "post_id": 54676427, "comment_id": 96142381, "body": "<a href=\"https://stackoverflow.com/questions/17873561/pointer-initialisation-gives-segmentation-fault\">Pointer initialisation gives segmentation fault</a> - roughly on point."}, {"owner": {"reputation": 131, "user_id": 10082454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KP6qr5fgbEk/AAAAAAAAAAI/AAAAAAAAAkk/cMs3fNh5hKk/photo.jpg?sz=128", "display_name": "TVSuchty", "link": "https://stackoverflow.com/users/10082454/tvsuchty"}, "edited": false, "score": 0, "creation_date": 1550081199, "post_id": 54676427, "comment_id": 96142677, "body": "I added the definition concat which should explain the initializations troubles you have..."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1550081287, "post_id": 54676427, "comment_id": 96142719, "body": "<code>strcpy(result, s1);</code> &lt;- since <code>s1</code> is freshly allocated, it is uninitialized and you are copying garbage into your buffer, also <code>strlen</code> requires a null-terminated string, else its undefined behavior"}, {"owner": {"reputation": 131, "user_id": 10082454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KP6qr5fgbEk/AAAAAAAAAAI/AAAAAAAAAkk/cMs3fNh5hKk/photo.jpg?sz=128", "display_name": "TVSuchty", "link": "https://stackoverflow.com/users/10082454/tvsuchty"}, "edited": false, "score": 0, "creation_date": 1550081384, "post_id": 54676427, "comment_id": 96142752, "body": "Oh ... Did not expected this behaviour. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 10082454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KP6qr5fgbEk/AAAAAAAAAAI/AAAAAAAAAkk/cMs3fNh5hKk/photo.jpg?sz=128", "display_name": "TVSuchty", "link": "https://stackoverflow.com/users/10082454/tvsuchty"}, "edited": false, "score": 0, "creation_date": 1550082376, "post_id": 54676868, "comment_id": 96143270, "body": "I actually use a book of network programming, which code was written 1999. I never used C before... It is difficult to once learn network programming (or at least standard IO stuff, so far), learn C and differentiate between the old C and the new C... The old C is not well supported in those ages (Basically why it should...) I am just trying to read my typed code into a file (excersice) Eventually my Overflow account will get banned soon, because of to many stupid questions...  Thanks for your answer!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 131, "user_id": 10082454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KP6qr5fgbEk/AAAAAAAAAAI/AAAAAAAAAkk/cMs3fNh5hKk/photo.jpg?sz=128", "display_name": "TVSuchty", "link": "https://stackoverflow.com/users/10082454/tvsuchty"}, "edited": false, "score": 1, "creation_date": 1550091397, "post_id": 54676868, "comment_id": 96147441, "body": "Which 1999 networking text book, @TVSuchty?  Are you sure there isn&#39;t a more recent one that would do the job better.  Are you sure you copied the code correctly?  (It&#39;s far from impossible that there is an error such as you&#39;ve typed, but it is not likely to be in a top-notch book, even from that era.)"}, {"owner": {"reputation": 131, "user_id": 10082454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KP6qr5fgbEk/AAAAAAAAAAI/AAAAAAAAAkk/cMs3fNh5hKk/photo.jpg?sz=128", "display_name": "TVSuchty", "link": "https://stackoverflow.com/users/10082454/tvsuchty"}, "edited": false, "score": 0, "creation_date": 1550094025, "post_id": 54676868, "comment_id": 96148607, "body": "No: I wrote the code, trying to extract the essence of the lecture. It is a german book: <a href=\"https://www.amazon.de/Unix-Netzwerkprogrammierung-mit-Threads-Sockets-X-systems-press/dp/3540002995/ref=sr_1_2?ie=UTF8&amp;qid=1550094008&amp;sr=8-2&amp;keywords=netzwerkprogrammierung\" rel=\"nofollow noreferrer\">amazon.de/&hellip;</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 131, "user_id": 10082454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KP6qr5fgbEk/AAAAAAAAAAI/AAAAAAAAAkk/cMs3fNh5hKk/photo.jpg?sz=128", "display_name": "TVSuchty", "link": "https://stackoverflow.com/users/10082454/tvsuchty"}, "edited": false, "score": 1, "creation_date": 1550095210, "post_id": 54676868, "comment_id": 96149098, "body": "I don&#39;t read German sufficiently well to be able to assess the book \u2014 I&#39;m sorry.  I&#39;ve not heard of it before; I&#39;ve not seen any commentary on it.  Be cautious if this is really what it says, @TVSuchty.  It might be an isolated problem; it might be indicative of other problems in the examples.  It gets reasonable reviews at Amazon, but that isn&#39;t as reliable as anyone would like."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1550081780, "creation_date": 1550081780, "answer_id": 54676868, "question_id": 54676427, "link": "https://stackoverflow.com/questions/54676427/printing-a-cstring-prints-unknown-text-before/54676868#54676868", "title": "Printing a CString prints unknown text before", "body": "<p>Even if we look past the call to the unsafe and no longer supported function <code>gets</code>, there are numerous problems with this code, starting with your <code>concat</code> function:</p>\n\n<pre><code>char* concat(const char *s1, const char *s2)\n{\n   char *result = malloc(strlen(s1) + strlen(s2) + 1); \n   strcpy(result, s1);\n   strcat(result, s2);\n   return result;\n}\n</code></pre>\n\n<p>You are calling <code>concat</code> with the line: <code>buf = concat(buf, lastchars);</code> when <code>buf</code> is unintialized. In other words:</p>\n\n<pre><code>char *result = malloc(strlen(buf) + strlen(lastwords) + 1);\nstrcpy(result, buf);\nstrcat(result, lastwords);\nreturn result;\n</code></pre>\n\n<p>What is <code>strlen(buf)</code>? This is undefined behavior since <code>buf</code> doesn't contain a string with a null-terminator.</p>\n\n<p>Then, <code>strcpy(result, buf)</code> is also undefined behavior since <code>buf</code> isn't initialized.</p>\n\n<p>Then you return <code>result</code> and assign it back into <code>buf</code>. </p>\n\n<p>It is very difficult to decipher your intent with this code, so I cannot offer a solution - only point out the numerous problems.</p>\n"}], "owner": {"reputation": 131, "user_id": 10082454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KP6qr5fgbEk/AAAAAAAAAAI/AAAAAAAAAkk/cMs3fNh5hKk/photo.jpg?sz=128", "display_name": "TVSuchty", "link": "https://stackoverflow.com/users/10082454/tvsuchty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54676868, "answer_count": 1, "score": -3, "last_activity_date": 1550081780, "creation_date": 1550080046, "last_edit_date": 1550081141, "question_id": 54676427, "link": "https://stackoverflow.com/questions/54676427/printing-a-cstring-prints-unknown-text-before", "title": "Printing a CString prints unknown text before", "body": "<p>Unfortunately, this Code seems to prints something before it prints the actual text. What is this? And why is it printed?</p>\n\n<p>\"\\300\\367\\277\\357\\376\"</p>\n\n<p>I realized this more often in my code and I am sure it implies I have done something wrong.</p>\n\n<pre><code>char* concat(const char *s1, const char *s2);\nint main(int argv, char* args[]){\n    char lastchars[50];\n    char *buf;\n    while(1){\n        gets(lastchars);\n        if(strlen(lastchars) == 0)break;\n        buf = concat(buf, lastchars);\n    }\n    printf(\"%s\",buf);\n }\n char* concat(const char *s1, const char *s2)\n {\n    char *result = malloc(strlen(s1) + strlen(s2) + 1); \n    strcpy(result, s1);\n    strcat(result, s2);\n    return result;\n }\n</code></pre>\n"}, {"tags": ["c", "arrays", "tic-tac-toe"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1550078420, "post_id": 54675993, "comment_id": 96141193, "body": "In <code>draw_grid</code> function the loop <code>for (int col = 0; row &lt; gridsize; row++)</code> is a victim of copy/paste. Change the two occurrences of <code>row</code> to <code>col</code>."}, {"owner": {"reputation": 413, "user_id": 1477728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6378fb602399ba1671f2eb6d586cc8?s=128&d=identicon&r=PG", "display_name": "Imran", "link": "https://stackoverflow.com/users/1477728/imran"}, "edited": false, "score": 0, "creation_date": 1550078575, "post_id": 54675993, "comment_id": 96141280, "body": "Also <code>printf(&quot;\\n&quot;);</code> should be moved after the column for loop scope ends."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1550078578, "post_id": 54675993, "comment_id": 96141283, "body": "What is the desired output? Please update the question to include what the expected output is."}, {"owner": {"reputation": 21, "user_id": 8958308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OCqUqqaPS6A/AAAAAAAAAAI/AAAAAAAAAA8/7yUI7KxDM4o/photo.jpg?sz=128", "display_name": "George Strawbridge", "link": "https://stackoverflow.com/users/8958308/george-strawbridge"}, "edited": false, "score": 0, "creation_date": 1550078770, "post_id": 54675993, "comment_id": 96141395, "body": "Good spot, thanks for that. I amended it and now the output prints the correct number of &#39;.&#39; characters (25), but still all in the same first column like my original output"}, {"owner": {"reputation": 439, "user_id": 1060774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e522563914f35f6a67ad7811c5ca89e?s=128&d=identicon&r=PG", "display_name": "Ken Jackson", "link": "https://stackoverflow.com/users/1060774/ken-jackson"}, "edited": false, "score": 0, "creation_date": 1550079010, "post_id": 54675993, "comment_id": 96141522, "body": "Note that <code>init_grid()</code> should test the argument <i>before</i> it uses it."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1550079159, "post_id": 54675993, "comment_id": 96141600, "body": "where is the grid ?"}, {"owner": {"reputation": 21, "user_id": 8958308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OCqUqqaPS6A/AAAAAAAAAAI/AAAAAAAAAA8/7yUI7KxDM4o/photo.jpg?sz=128", "display_name": "George Strawbridge", "link": "https://stackoverflow.com/users/8958308/george-strawbridge"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1550079275, "post_id": 54675993, "comment_id": 96141664, "body": "@Chimera I&#39;ve updated the post. There is a link to the image of what I want."}, {"owner": {"reputation": 21, "user_id": 8958308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OCqUqqaPS6A/AAAAAAAAAAI/AAAAAAAAAA8/7yUI7KxDM4o/photo.jpg?sz=128", "display_name": "George Strawbridge", "link": "https://stackoverflow.com/users/8958308/george-strawbridge"}, "reply_to_user": {"reputation": 413, "user_id": 1477728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6378fb602399ba1671f2eb6d586cc8?s=128&d=identicon&r=PG", "display_name": "Imran", "link": "https://stackoverflow.com/users/1477728/imran"}, "edited": false, "score": 0, "creation_date": 1550079284, "post_id": 54675993, "comment_id": 96141668, "body": "@Imran Thank you. That has printed the grid just fine. Much appreciated&gt;  Now to think of a way to have the board size with the index&#39;s printed according to gridsize like shown in my desired output."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1550079307, "post_id": 54675993, "comment_id": 96141680, "body": "<code>puts(&quot;Error, gridsize too large.&quot;);</code> is incorrect.  You are printing an error message, and you should get in the habit of always printing error messages to stderr: <code>fputs(&quot;Error...&quot;, stderr)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8958308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OCqUqqaPS6A/AAAAAAAAAAI/AAAAAAAAAA8/7yUI7KxDM4o/photo.jpg?sz=128", "display_name": "George Strawbridge", "link": "https://stackoverflow.com/users/8958308/george-strawbridge"}, "edited": false, "score": 0, "creation_date": 1550081104, "post_id": 54676280, "comment_id": 96142640, "body": "Thanks a lot for the help, it&#39;s hugely appreciated!"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 21, "user_id": 8958308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OCqUqqaPS6A/AAAAAAAAAAI/AAAAAAAAAA8/7yUI7KxDM4o/photo.jpg?sz=128", "display_name": "George Strawbridge", "link": "https://stackoverflow.com/users/8958308/george-strawbridge"}, "edited": false, "score": 0, "creation_date": 1550081329, "post_id": 54676280, "comment_id": 96142729, "body": "@GeorgeStrawbridge You&#39;re welcome. If this answered your question(s), please mark it as the solution. Regards."}], "tags": [], "owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "is_accepted": true, "score": 1, "last_activity_date": 1550080082, "last_edit_date": 1550080082, "creation_date": 1550079421, "answer_id": 54676280, "question_id": 54675993, "link": "https://stackoverflow.com/questions/54675993/tic-tac-toe-in-c-using-a-2d-character-array/54676280#54676280", "title": "Tic-Tac-Toe in C (Using a 2D Character Array)", "body": "<p>The comments above are all correct. I've put all the corrected code below and now the code does as expected. </p>\n\n<p>I also added the code to label the rows and columns. Note that changes need to be made when the gridsize is greater than 9.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint init_grid(int gridsize);\nvoid draw_grid(int gridsize);\n\nchar grid[25][25];\nint MaxGrid = 25;\n\n\nint init_grid(int gridsize)\n{\n    for (int row = 0; row &lt; gridsize ; row++)\n    {\n        for (int col = 0; col &lt; gridsize; col++)\n        {\n            grid[row][col] = '.';\n        }\n    }\n\n    if (gridsize &gt; MaxGrid)\n    {\n        puts(\"Error, gridsize too large.\");\n        return 1;\n    }\n    else\n    {\n        return 0;\n    }\n}\n\n\nvoid draw_grid(int gridsize)\n{\n\n    printf(\"    \");\n    for( int i=0; i &lt; gridsize; i++ )\n    {\n        printf(\"%d \", i+1);\n    }\n    printf(\"\\n\");\n\n    for (int row = 0; row &lt; gridsize; row++)\n    {\n        printf(\"%d  \", row+1);\n        for (int col = 0; col &lt; gridsize; col++)\n        {   \n            putchar (' ');\n            if (grid[row][col])\n            {\n                putchar (grid[row][col]);\n            }\n            else\n            {\n                putchar ('.');\n            }\n        }\n        printf(\"\\n\");\n    }\n}\n\n\nint main()\n{\n\n    int gridsize = 0;\n\n    printf(\"Hello and welcome to Tic Tac Toe\\n\");\n    printf(\"Please enter the size of the grid you would like to play with (between 3 and 10):\\n\");\n    scanf(\"%d\", &amp;gridsize);\n\n    init_grid(gridsize);\n    draw_grid(gridsize);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>jnorton@ubuntu:~/source$ ./a.out \nHello and welcome to Tic Tac Toe\nPlease enter the size of the grid you would like to play with (between 3 and 10):\n5\n    1 2 3 4 5 \n1   . . . . .\n2   . . . . .\n3   . . . . .\n4   . . . . .\n5   . . . . .\njnorton@ubuntu:~/source$ ./a.out \nHello and welcome to Tic Tac Toe\nPlease enter the size of the grid you would like to play with (between 3 and 10):\n3\n    1 2 3 \n1   . . .\n2   . . .\n3   . . .\njnorton@ubuntu:~/source$ ./a.out \nHello and welcome to Tic Tac Toe\nPlease enter the size of the grid you would like to play with (between 3 and 10):\n10\n    1 2 3 4 5 6 7 8 9 10 \n1   . . . . . . . . . .\n2   . . . . . . . . . .\n3   . . . . . . . . . .\n4   . . . . . . . . . .\n5   . . . . . . . . . .\n6   . . . . . . . . . .\n7   . . . . . . . . . .\n8   . . . . . . . . . .\n9   . . . . . . . . . .\n10   . . . . . . . . . .\njnorton@ubuntu:~/source$ \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8958308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OCqUqqaPS6A/AAAAAAAAAAI/AAAAAAAAAA8/7yUI7KxDM4o/photo.jpg?sz=128", "display_name": "George Strawbridge", "link": "https://stackoverflow.com/users/8958308/george-strawbridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 54676280, "answer_count": 1, "score": 0, "last_activity_date": 1550080082, "creation_date": 1550078314, "last_edit_date": 1550079751, "question_id": 54675993, "link": "https://stackoverflow.com/questions/54675993/tic-tac-toe-in-c-using-a-2d-character-array", "title": "Tic-Tac-Toe in C (Using a 2D Character Array)", "body": "<p>I have looked over the various other posts considering how to implement Tic-Tac-Toe in C but am unfortunately running into issues. I have two functions for initialising and drawing the grid, <code>int init_grid(int gridsize)</code> and <code>void draw_grid(int gridsize)</code>. These take the parameter <code>gridsize</code> as the user is able to choose from a 3x3 to a 10x10 grid. The program compiles far so far, but when entering the size of the board, it prints the correct number of '.' characters but only in the first column.</p>\n\n<p>The code is as follows:</p>\n\n<p><strong>init_grid</strong></p>\n\n<pre><code>int init_grid(int gridsize) {\n\n\nfor (int row = 0; row &lt; gridsize ; row++) {\n\n    for (int col = 0; col &lt; gridsize; col++) {\n        grid[row][col] = '.';\n    }\n}\n\nif (gridsize &gt; MaxGrid) {\n    puts(\"Error, gridsize too large.\");\n    return 1;\n}\n\nelse {\n    return 0;\n  }\n}\n</code></pre>\n\n<p><strong>draw_grid</strong></p>\n\n<pre><code>void draw_grid(int gridsize) {\n\nfor (int row = 0; row &lt; gridsize; row++)\n{\n    for (int col = 0; row &lt; gridsize; row++)\n    {   \n        putchar (' ');\n        if (grid[row][col]) {\n            putchar (grid[row][col]);\n        }\n        else {\n            putchar ('.');\n        }\n\n    printf(\"\\n\");\n   }\n  }\n }\n</code></pre>\n\n<p><strong>main</strong></p>\n\n<pre><code>int main() {\n\nint gridsize = 0;\n\nprintf(\"Hello and welcome to Tic Tac Toe\\n\");\nprintf(\"Please enter the size of the grid you would like to play with (between 3 and 10):\\n\");\nscanf(\"%d\", &amp;gridsize);\n\ninit_grid(gridsize);\ndraw_grid(gridsize);\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Hello and welcome to Tic Tac Toe\nPlease enter the size of the grid you would like to play with (between 3 and \n10):\n 5\n .\n .\n .\n .\n .\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/CBx8W.png\" alt=\"Desired output\"></p>\n\n<p>I hope I have made everything clear enough. I've tried a variety of different things now but just can't get it to print the board/grid correctly.</p>\n"}, {"tags": ["javascript", "android", "c", "linux", "ubuntu"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1550078329, "post_id": 54675941, "comment_id": 96141137, "body": "Suggestion: start with plain simple text (send <code>1023</code> possibly followed by newline) and if that doesn&#39;t work look into alternatives (JSON, XML, ...)"}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1550082599, "post_id": 54675941, "comment_id": 96143378, "body": "Look for a simple socket example. You can probably find a simple chat example that you can modify or learn from."}], "owner": {"reputation": 1, "user_id": 11057587, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hM43sLcO3vA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPGmrUPjXkjr5Zn4tS-58cZV2ViNw/mo/photo.jpg?sz=128", "display_name": "user11057587", "link": "https://stackoverflow.com/users/11057587/user11057587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550078131, "creation_date": 1550078131, "question_id": 54675941, "link": "https://stackoverflow.com/questions/54675941/how-to-send-primitive-data-from-c-program-running-on-ubuntu-over-network-to-andr", "title": "How to send primitive data from C program running on Ubuntu over network to Android device application?", "body": "<p>Problem: I am running a simple C program on Ubuntu (to represent a server) that outputs some primitive data. How would I send send this data over a local network router to be used by a simple application on an Android device?</p>\n\n<p>Background: I have been (and still am) reading about socket programming, threading, and the json C library. Based on my searches, I am guessing that the answer to my question is not simple. Any advice or suggestions would be greatly appreciated.</p>\n\n<p>Note: I should mention that I cannot send this data to an external server due to latency issues. The server code is written in C and that can't be changed.</p>\n\n<p>Expected result example: An integer result is forwarded from a C program running on Ubuntu to an Android application for use in a calculation.</p>\n"}, {"tags": ["python", "c", "cython"], "comments": [{"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 1, "creation_date": 1550082357, "post_id": 54675738, "comment_id": 96143257, "body": "Which compiler is used when you compile your extension? MSVC?"}, {"owner": {"reputation": 53, "user_id": 8488656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a86d336fc1b7872389644d30ad3f7a?s=128&d=identicon&r=PG&f=1", "display_name": "K&#233;vin POUNOT", "link": "https://stackoverflow.com/users/8488656/k%c3%a9vin-pounot"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1550130134, "post_id": 54675738, "comment_id": 96158926, "body": "Yes indeed, cl is called for compilation. And I get this error with gcc: &quot;Unkown MS compiler version 1900&quot; (I see there are some patches for that). Is there a way to make MSVC work? Do I need to install python using the visual Studio tools?"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 8488656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a86d336fc1b7872389644d30ad3f7a?s=128&d=identicon&r=PG&f=1", "display_name": "K&#233;vin POUNOT", "link": "https://stackoverflow.com/users/8488656/k%c3%a9vin-pounot"}, "is_accepted": false, "score": 1, "last_activity_date": 1550177894, "creation_date": 1550177894, "answer_id": 54698952, "question_id": 54675738, "link": "https://stackoverflow.com/questions/54675738/cythonize-a-c-function-with-array-of-complex/54698952#54698952", "title": "Cythonize a C function with array of complex", "body": "<p>Ok,actually, adding the following:</p>\n\n<pre><code>[build]\ncompiler=gcc\n</code></pre>\n\n<p>And using the patch method described here: <a href=\"https://stackoverflow.com/questions/34135280/valueerror-unknown-ms-compiler-version-1900\">ValueError: Unknown MS Compiler version 1900</a> solved the problem.</p>\n\n<p>Now it's compiled, thanks ead.</p>\n"}], "owner": {"reputation": 53, "user_id": 8488656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a86d336fc1b7872389644d30ad3f7a?s=128&d=identicon&r=PG&f=1", "display_name": "K&#233;vin POUNOT", "link": "https://stackoverflow.com/users/8488656/k%c3%a9vin-pounot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550177894, "creation_date": 1550077427, "question_id": 54675738, "link": "https://stackoverflow.com/questions/54675738/cythonize-a-c-function-with-array-of-complex", "title": "Cythonize a C function with array of complex", "body": "<p>I'm analyzing molecular dynamics simulation data, and I'd like to compute neutron scattering spectra from atom trajectories to compare with my experiment.</p>\n\n<p>I wrote initially something in pure Python but it's quite long so I wanted to code this part in C and call the C function from Python.</p>\n\n<p>For this, I need an array of atom coordinates for each time frame, an array of reciprocal space q vectors to average, and the periodic cell dimensions.\nEverything is put in a complex exponential and averaged over q vectors, time origins and atoms.</p>\n\n<p>Here comes the problem, how to use an array of complex numbers when calling a C function from Python?\nI always get these syntax errors with nmake in PowerShell:</p>\n\n<pre><code>package/lib/src\\compIntScatFunc.h(8): error C2143: erreur de syntaxe\u00a0: absence de ')' avant '*'\npackage/lib/src\\compIntScatFunc.h(8): error C2143: erreur de syntaxe\u00a0: absence de '{' avant '*'\npackage/lib/src\\compIntScatFunc.h(8): error C2059: erreur de syntaxe\u00a0: 'type'\npackage/lib/src\\compIntScatFunc.h(9): error C2059: erreur de syntaxe\u00a0: ')'\npackage/lib/pycompIntScatFunc.c(1107): error C2061: erreur de syntaxe\u00a0: identificateur '__pyx_t_double_complex'\npackage/lib/pycompIntScatFunc.c(1107): error C2059: erreur de syntaxe\u00a0: ';'\npackage/lib/pycompIntScatFunc.c(1112): error C2061: erreur de syntaxe\u00a0: identificateur '__pyx_t_double_complex_from_parts'\npackage/lib/pycompIntScatFunc.c(1112): error C2059: erreur de syntaxe\u00a0: ';'\npackage/lib/pycompIntScatFunc.c(1112): error C2059: erreur de syntaxe\u00a0: '&lt;parameter-list&gt;'\npackage/lib/pycompIntScatFunc.c(1119): error C2061: erreur de syntaxe\u00a0: identificateur '__pyx_t_float_complex'\npackage/lib/pycompIntScatFunc.c(1119): error C2059: erreur de syntaxe\u00a0: ';'\npackage/lib/pycompIntScatFunc.c(1124): error C2061: erreur de syntaxe\u00a0: identificateur '__pyx_t_float_complex_from_parts'\npackage/lib/pycompIntScatFunc.c(1124): error C2059: erreur de syntaxe\u00a0: ';'\npackage/lib/pycompIntScatFunc.c(1124): error C2059: erreur de syntaxe\u00a0: '&lt;parameter-list&gt;'\npackage/lib/pycompIntScatFunc.c(1644): error C2065: '__pyx_t_double_complex'\u00a0: identificateur non d\u00e9clar\u00e9\npackage/lib/pycompIntScatFunc.c(1921): warning C4013: 'compIntScatFunc' non d\u00e9fini(e)\u00a0; extern retournant int pris par d\u00e9faut\npackage/lib/pycompIntScatFunc.c(1921): error C2065: '__pyx_t_double_complex'\u00a0: identificateur non d\u00e9clar\u00e9\npackage/lib/pycompIntScatFunc.c(1921): error C2059: erreur de syntaxe\u00a0: ')'\npackage/lib/pycompIntScatFunc.c(6580): error C2061: erreur de syntaxe\u00a0: identificateur '__pyx_t_double_complex_from_parts'\npackage/lib/pycompIntScatFunc.c(6580): error C2059: erreur de syntaxe\u00a0: ';'\npackage/lib/pycompIntScatFunc.c(6580): error C2059: erreur de syntaxe\u00a0: '&lt;parameter-list&gt;'\npackage/lib/pycompIntScatFunc.c(6779): error C2061: erreur de syntaxe\u00a0: identificateur '__pyx_t_float_complex_from_parts'\npackage/lib/pycompIntScatFunc.c(6779): error C2059: erreur de syntaxe\u00a0: ';'\npackage/lib/pycompIntScatFunc.c(6779): error C2059: erreur de syntaxe\u00a0: '&lt;parameter-list&gt;'\n</code></pre>\n\n<p>Here are my files (the .c and .h files compiles just fine with gcc):</p>\n\n<p>compIntScatFunc.h</p>\n\n<pre><code>#ifndef COMPINTSCATFUNC_H\n#define COMPINTSCATFUNC_H\n\n#include &lt;complex.h&gt;\n\nvoid compIntScatFunc(double *atomPos, int atomPos_dim0, int atomPos_dim1, int atomPos_dim2, \n                     double *qVecs, int qVecs_dim0, int qVecs_dim1, int qVecs_dim2, \n                     double complex *out, int out_dim0, int out_dim1, \n                     double *cellDims, int nbrBins, int minFrames, int maxFrames);\n\n#endif\n</code></pre>\n\n<p>pycompIntScatFunc.pyx</p>\n\n<pre><code>cimport numpy as np\ncimport cython\n\nnp.import_array()\n\n\ncdef extern from \"compIntScatFunc.h\":\n    void compIntScatFunc(double *atomPos, int atomPos_dim0, int atomPos_dim1, int atomPos_dim2, \n                         double *qVecs, int qVecs_dim0, int qVecs_dim1, int qVecs_dim2, \n                         double complex *out, int out_dim0, int out_dim1, \n                         double *cellDims, int nbrBins, int minFrames, int maxFrames)\n\n\n\n@cython.boundscheck(False)\n@cython.wraparound(False)\ndef py_compIntScatFunc( np.ndarray[double, ndim=3, mode=\"c\"] atomPos not None,\n                        np.ndarray[double, ndim=3, mode=\"c\"] qVecs not None,\n                        np.ndarray[np.complex128_t, ndim=2, mode=\"c\"] out not None,\n                        np.ndarray[double, ndim=1, mode=\"c\"] cellDims not None,\n                        nbrBins, minFrames, maxFrames ):\n    compIntScatFunc(&lt;double*&gt; np.PyArray_DATA(atomPos), atomPos.shape[0], atomPos.shape[1], atomPos.shape[2],\n                    &lt;double*&gt; np.PyArray_DATA(qVecs), qVecs.shape[0], qVecs.shape[1], qVecs.shape[2],\n                    &lt;double complex*&gt; np.PyArray_DATA(out), out.shape[0], out.shape[1],\n                    &lt;double*&gt; np.PyArray_DATA(cellDims), nbrBins, minFrames, maxFrames )\n</code></pre>\n\n<p>setup.py</p>\n\n<pre><code>from distutils.core import setup, Extension\nfrom Cython.Build import cythonize\nimport numpy as np\n\n\nwith open('README.md', 'r') as f:\n    description = f.read()\n\n\npackagesList = [    'package',\n                    'package.dataManipulation',\n                    'package.dataParsers',\n                    'package.dataConverters',\n                    'package.helpersFunctions',\n                    'package.test'  ]\n\n\npycompIntScatFunc_ext = Extension( \"pycompIntScatFunc\", \n                                    [\"package/lib/pycompIntScatFunc.pyx\", \"package/lib/src/compIntScatFunc.c\"],\n                                    include_dirs=[\"package/lib/src\", np.get_include()],\n                                    libraries=[\"compIntScatFunc\"],\n                                    library_dirs=[\"pacakge/lib/\"] )\n\n\n\nsetup(  name='NAMDAnalyzer',\n        version='alpha',\n        description=description,\n        author='Kevin Pounot',\n        author_email='kpounot@hotmail.fr',\n        url='github.com/kpounot/NAMDAnalyzer',\n        packages=packagesList,\n        ext_modules=cythonize( [pycompIntScatFunc_ext] )  )\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "kernel"], "owner": {"reputation": 79, "user_id": 6645583, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210020316008214/picture?type=large", "display_name": "Dustin Colten McAfee", "link": "https://stackoverflow.com/users/6645583/dustin-colten-mcafee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1550343785, "creation_date": 1550076836, "last_edit_date": 1550343785, "question_id": 54675524, "link": "https://stackoverflow.com/questions/54675524/is-there-a-way-to-get-the-struct-input-dev-for-a-character-device-driver-given-t", "title": "Is there a way to get the struct input_dev for a character device driver given the /dev/input/eventX file descriptor?", "body": "<p>In kernel context, is there a way to use the kernel's file system/input-core API to grab the corresponding device driver struct input_dev (include/linux/input.h) given only a character file descriptor for an input event (/dev/input/eventX)?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1550076834, "post_id": 54675424, "comment_id": 96140360, "body": "If you get warnings, please fix these first. If you need help with this, show in your question what warnings you get."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1550077395, "post_id": 54675424, "comment_id": 96140650, "body": "The loop to find <code>node</code> in the list should also handle the case that the end of the list is reached without finding <code>node</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550079731, "post_id": 54675424, "comment_id": 96141931, "body": "This is a duplicate many times over, bu the difficulty, as ever, is finding the right duplicate. I&#39;m not sure whether there&#39;s a canonical Q&amp;A for it.  <a href=\"https://stackoverflow.com/questions/12708897/typedefs-tagged-and-untagged-structures-and-incompatible-pointer-types\">Typdefs, tagged and untagged structures, and incompatible pointer types</a> is closely related, but not identical (that deals with presence/absence of tag, not directly dealing with misspelled tag causing confusion)."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1550079781, "post_id": 54675424, "comment_id": 96141961, "body": "I put a corrected/modified version of your program if you are interested, with execution example"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1550080781, "post_id": 54675424, "comment_id": 96142480, "body": "<i>Enable Compiler Warnings</i>, for gcc/clang, minimum <code>-Wall -Wextra -pedantic</code>, for VS <code>&#47;W3</code> and do not accept code until it compiles without warning. (you will save yourself untold hours just by following this rule) Let your compiler help you write better code. The compiler will tell you the exact line (and often the exact starting character) for the problematic code. Never ignore a warning."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1550076737, "creation_date": 1550076737, "answer_id": 54675492, "question_id": 54675424, "link": "https://stackoverflow.com/questions/54675424/problems-with-pointers-in-c-linked-list/54675492#54675492", "title": "Problems with pointers in c - linked list", "body": "<p>In your definition of <code>struct node</code>:</p>\n\n<pre><code>typedef struct node {\n        int data;\n        struct node_t* next;\n    } node_t;\n</code></pre>\n\n<p>You define <code>next</code> as a pointer to <code>struct node_t</code>, but there is no such type.  You want <code>struct node</code>:</p>\n\n<pre><code>typedef struct node {\n        int data;\n        struct node* next;\n    } node_t;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1550080881, "post_id": 54675538, "comment_id": 96142528, "body": "Very nice validation with <code>valgrind</code>."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1550081092, "post_id": 54675538, "comment_id": 96142633, "body": "<i>valgrind</i> is a fantastic tool, people has to know it exists, I put an execution under it the most I can."}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 1, "last_activity_date": 1550079589, "last_edit_date": 1550079589, "creation_date": 1550076871, "answer_id": 54675538, "question_id": 54675424, "link": "https://stackoverflow.com/questions/54675424/problems-with-pointers-in-c-linked-list/54675538#54675538", "title": "Problems with pointers in c - linked list", "body": "<p>you do not need <code>typedef struct list{ ...}</code>, you just need a variable of type <code>node_t *</code> always containing the head of the list, NULL while it is empty.</p>\n\n<p>For instance :</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct node {\n  int data;\n  struct node * next;\n} node_t;\n\nnode_t* create_node(int data)\n{\n  node_t* tmp = malloc(sizeof(node_t));\n\n  if (tmp == NULL){\n    fprintf(stderr, \"Error while allocating memory for node\\n\");\n    exit(EXIT_FAILURE);\n  }\n  tmp-&gt;data = data;\n  tmp-&gt;next = NULL;\n  return tmp;\n}\n\nvoid list_append(node_t ** l, node_t* node){\n  if (*l == NULL) {\n    *l = node;\n  }\n  else {\n    while ((*l)-&gt;next != NULL)\n      l = &amp;(*l)-&gt;next;\n\n    (*l)-&gt;next = node;\n  }\n}\n\n/* l, *l, where and node must not be NULL */\nint list_insert(node_t ** l, node_t* where, node_t* node) {\n  if (*l != where) {\n    for (;;) {\n      if (*l == NULL)\n        return 0;\n      l = &amp;(*l)-&gt;next;\n      if (*l = where)\n        break;\n    }\n  }\n\n  node-&gt;next = *l;\n  *l = node;\n  return 1;\n}\n\nvoid pr(node_t * l)\n{\n  printf(\"list is :\");\n  while (l != NULL) {\n    printf(\" %d\", l-&gt;data);\n    l = l-&gt;next;\n  }\n  putchar('\\n');\n}\n\nvoid clear(node_t ** head)\n{\n  node_t * l = *head;\n\n  while (l != NULL) {\n    node_t * n = l-&gt;next;\n    free(l);\n    l = n;\n  }\n\n  *head = NULL;\n}\n\nint main()\n{\n  node_t * head = NULL;\n  node_t * n3 = create_node(3);\n\n  list_append(&amp;head, create_node(1));\n  list_append(&amp;head, n3);\n  pr(head);\n\n  list_insert(&amp;head, n3, create_node(2));\n  pr(head);  \n\n  list_insert(&amp;head, head, create_node(0));\n  pr(head);\n\n  clear(&amp;head);\n  pr(head);\n\n  return 0;\n}\n</code></pre>\n\n<p>I changed the creation to be able to give the data at that time, this is more clear (like a constructor in C++)</p>\n\n<p>Compilation and execution :</p>\n\n<pre><code>pi@raspberrypi:/tmp $ gcc -pedantic -Wextra c.c\npi@raspberrypi:/tmp $ ./a.out\nlist is : 1 3\nlist is : 1 2 3\nlist is : 0 1 2 3\nlist is :\npi@raspberrypi:/tmp $ valgrind ./a.out\n==27963== Memcheck, a memory error detector\n==27963== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==27963== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==27963== Command: ./a.out\n==27963== \nlist is : 1 3\nlist is : 1 2 3\nlist is : 0 1 2 3\nlist is :\n==27963== \n==27963== HEAP SUMMARY:\n==27963==     in use at exit: 0 bytes in 0 blocks\n==27963==   total heap usage: 5 allocs, 5 frees, 1,056 bytes allocated\n==27963== \n==27963== All heap blocks were freed -- no leaks are possible\n==27963== \n==27963== For counts of detected and suppressed errors, rerun with: -v\n==27963== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 3)\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11057734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c977e8d94ef891d5727c1d9a299b163?s=128&d=identicon&r=PG&f=1", "display_name": "Jack W.", "link": "https://stackoverflow.com/users/11057734/jack-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550079589, "creation_date": 1550076554, "last_edit_date": 1550077883, "question_id": 54675424, "link": "https://stackoverflow.com/questions/54675424/problems-with-pointers-in-c-linked-list", "title": "Problems with pointers in c - linked list", "body": "<p>This is my code (working on a linked list): </p>\n\n<pre><code>typedef struct node {\n   int data;\n   struct node_t* next;\n} node_t;\n\ntypedef struct list{\n   node_t* head;\n} list_t;\n\nnode_t* create_node(void){\n   node_t* tmp = malloc(sizeof(node_t));\n   if (tmp == NULL){\n      fprintf(stderr, \"Error while allocating memory for node\\n\");\n      exit(EXIT_FAILURE);\n   }\n   return tmp;\n}\n\nvoid list_insert(list_t* list, node_t* node, int data){\n   if (node == NULL){\n      node_t* new = create_node();\n      new-&gt;next = list-&gt;head;\n      list-&gt;head = new;\n      new-&gt;data = data;\n   }\n   else{\n      node_t* current = list-&gt;head;\n      while(current != node){\n         current = current-&gt;next;\n      }\n      node_t* new = create_node();\n      new-&gt;next = current-&gt;next;\n      current-&gt;next = new;\n      new-&gt;data = data;\n   }\n}\n</code></pre>\n\n<p>I do get some warnings in list_insert function, but I cannot figure out the reason for them. This function should insert a new node at the beginning, if the <code>node</code> passed as argument is <code>NULL</code>, otherwise it should insert a new node after the <code>node</code> passed as argument.</p>\n\n<p>In this snippet:</p>\n\n<pre><code>if (node == NULL){\n   node_t* new = create_node();\n   new-&gt;next = list-&gt;head;\n   list-&gt;head = new;\n   new-&gt;data = data;\n}\n</code></pre>\n\n<p>the assignment <code>new-&gt;next = list-&gt;head;</code> is not correct. Any guesses?</p>\n"}, {"tags": ["c", "linux", "code-documentation"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1550076357, "post_id": 54675337, "comment_id": 96140098, "body": "The number is the <a href=\"https://en.wikipedia.org/wiki/Man_page\" rel=\"nofollow noreferrer\">section of the manual</a> referencing that function. Different functions/utilitis can appear by name in more than one place in the overall manual schema."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 4, "creation_date": 1550076362, "post_id": 54675337, "comment_id": 96140103, "body": "Duplicate of <a href=\"https://unix.stackexchange.com/questions/3586/what-do-the-numbers-in-a-man-page-mean\" title=\"what do the numbers in a man page mean\">unix.stackexchange.com/questions/3586/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1550076393, "post_id": 54675337, "comment_id": 96140119, "body": "Read <a href=\"https://linux.die.net/man/1/man\" rel=\"nofollow noreferrer\">the<code>man</code> man page</a>."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1550076529, "post_id": 54675337, "comment_id": 96140196, "body": "I&#39;m voting to close this question as off-topic because it belongs on unix.stackexchange.com, but already has a duplicate there."}, {"owner": {"reputation": 457, "user_id": 4879593, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KzD4kMXfKDg/AAAAAAAAAAI/AAAAAAAAAFA/PXBJ8fUySbE/photo.jpg?sz=128", "display_name": "Funny Geeks", "link": "https://stackoverflow.com/users/4879593/funny-geeks"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1550076706, "post_id": 54675337, "comment_id": 96140300, "body": "@Tanktalus I think it&#39;s better to close as a duplicate rather than off-topic."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1550076945, "post_id": 54675337, "comment_id": 96140423, "body": "I suggest <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/\" rel=\"nofollow noreferrer\">POSIX.1-2017</a> for documentation rather than die.net (unless you really need linuxy stuff, in which case I have no suggestions)."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1550077223, "post_id": 54675337, "comment_id": 96140564, "body": "@FunnyGeeks I tried, but because it&#39;s on a different site of the stack exchange network, and not stack overflow, I couldn&#39;t. (Otherwise, I agree with you.)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550079878, "post_id": 54675337, "comment_id": 96142016, "body": "This has been asked more than once before.  There should be a good Q&amp;A somewhere on SO (as well as on other SE sites)."}], "owner": {"reputation": 457, "user_id": 4879593, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KzD4kMXfKDg/AAAAAAAAAAI/AAAAAAAAAFA/PXBJ8fUySbE/photo.jpg?sz=128", "display_name": "Funny Geeks", "link": "https://stackoverflow.com/users/4879593/funny-geeks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550076254, "creation_date": 1550076254, "last_edit_date": 1592644375, "question_id": 54675337, "link": "https://stackoverflow.com/questions/54675337/numbers-in-function-parameters-in-documentation", "title": "Numbers in function parameters in documentation?", "body": "<p>I've been trying to read up on some C libraries from <a href=\"https://linux.die.net/man/3/sleep\" rel=\"nofollow noreferrer\">die.net</a>, and I'm a bit thrown off by numbers inside parameters, i.e:</p>\n<blockquote>\n<p>See Also<br>\nalarm(2), nanosleep(2), signal(2), signal(7)</p>\n<p>Referenced By<br>\naio(7), clock_nanosleep(2), getitimer(2), perlfaq5(1), pth(3), sleep(1), time(7), ualarm(3), upslog(8), usleep(3)</p>\n</blockquote>\n<p>The only time I've known to put anything in actual parameters in documentation is when I give example code. But this clearly isn't example code. In fact, several of these functions don't even take integers for parameters.</p>\n<p>I don't understand why they would say <code>signal(2)</code> when they could just say <code>signal()</code>.</p>\n<p>What do the numbers mean?</p>\n"}, {"tags": ["c#", "c", "pinvoke", "marshalling"], "comments": [{"owner": {"reputation": 293, "user_id": 3166332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8edc77ecd7b627f5152ac9fa53115e?s=128&d=identicon&r=PG&f=1", "display_name": "Christo", "link": "https://stackoverflow.com/users/3166332/christo"}, "edited": false, "score": 0, "creation_date": 1550077515, "post_id": 54675274, "comment_id": 96140725, "body": "C# strings are not necessarily &#39;\\0&#39; terminated. Properly formatted C/C++ strings must be &#39;\\0&#39; terminated. So it&#39;s likely that marshalling a c# string to c/c++ will require the marshaller to NUL terminate a c# string. However, since you&#39;ve limited the length to 4, the marshaller likely has to truncate the c# string in order to append that &#39;\\0&#39;. Just curious: what happens if you use SizeConst=5? Edit: @David&#39;s answer seems to confirm my guess."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1550081979, "post_id": 54675274, "comment_id": 96143068, "body": "It is not a string, <a href=\"https://en.wikipedia.org/wiki/FourCC\" rel=\"nofollow noreferrer\">FOURCC identifiers</a> are pretty common in native code."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11057678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5b0db8b38e7e2e074610643193143a?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/11057678/steve"}, "edited": false, "score": 1, "creation_date": 1550250960, "post_id": 54675462, "comment_id": 96213880, "body": "What you are saying is that in C, char[4] does not really mean &quot;an array of 4 characters&quot; but rather is interpreted by the C compiler as &quot;an array of length 4 that holds a zero-terminated string&quot;.  From that perspective everything I am seeing makes sense, and I agree that the DLL developer should not have used char[4] to define this field in the C header file.  Thanks for the explanation!"}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 2, "last_activity_date": 1550076656, "creation_date": 1550076656, "answer_id": 54675462, "question_id": 54675274, "link": "https://stackoverflow.com/questions/54675274/converting-c-headers-to-c-byvalarray-versus-byvaltstr-for-fixed-char-array-in/54675462#54675462", "title": "Converting C Headers to C# - ByValArray versus ByValTStr for Fixed Char Array inside a Structure", "body": "<p>The reason for this is that the p/invoke marshaller has to decide whether or not the <code>char[4]</code> field is text or binary (i.e. bytes). And the convention in play here is that a <code>string</code> marshalled as <code>UnmanagedType.ByValTStr</code> is assumed to be text. In which case it can have variable length, which is determined by the null terminator, which must be present. That is the convention which matches the typical use of fixed length arrays of <code>char</code> to hold C strings. C strings are null terminated.</p>\n\n<p>In reality though, I suspect that your data isn't really text. I would suspect that the field would be better declared in C as <code>unsigned char struct_id[4]</code> to indicate that this contains 4 bytes. All this is a little subjective though, and of course we aren't party to all the rationale behind the design of the library. Perhaps there is some good reason for declaring it as a <code>char</code> array that I cannot see.</p>\n\n<p>No matter what, your C# code cannot use <code>string</code> for this field. A <code>byte[]</code> with <code>SizeConst = 4</code> is the correct way to marshal this. Some helper methods on your record type could help transform between the byte array and a string. However, I wonder how many different IDs you are going to encounter. It may be that you just need to declare a handful of byte array constants and you can use those rather than string literals.</p>\n"}], "owner": {"reputation": 35, "user_id": 11057678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5b0db8b38e7e2e074610643193143a?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/11057678/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 54675462, "answer_count": 1, "score": 1, "last_activity_date": 1550076656, "creation_date": 1550076008, "question_id": 54675274, "link": "https://stackoverflow.com/questions/54675274/converting-c-headers-to-c-byvalarray-versus-byvaltstr-for-fixed-char-array-in", "title": "Converting C Headers to C# - ByValArray versus ByValTStr for Fixed Char Array inside a Structure", "body": "<p>I have a structure defined in C as:</p>\n\n<pre><code>typedef struct {\n    char struct_id[4];\n    int struct_version;\n    int keepAliveInterval;\n    \u2026\u2026\n} MQTTClient_connectOptions\n</code></pre>\n\n<p>I create a corresponding structure in C# like this:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]\npublic struct MQTTClient_connectOptions {\n    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 4)]\n    public string struct_id;\n    public int struct_version;\n    public int keepAliveInterval;\n    \u2026\u2026\n}\n</code></pre>\n\n<p>This C# structure is what is generated by the P/Invoke Interop Assistant, and is the C# snippet that is recommended by multiple posts across my google search.</p>\n\n<p>The same DLL / source code that defines the C structure also defines the function:</p>\n\n<pre><code>DLLExport  int MQTTClient_connect(MQTTClient handle, MQTTClient_connectOptions* options);\n</code></pre>\n\n<p>Which I have defined in my C# code as:</p>\n\n<pre><code>[DllImport(\"PahoMqttC\", EntryPoint = \"MQTTClient_connect\", CharSet = CharSet.Ansi)]\npublic static extern int MQTTClient_connect(IntPtr handle, ref MQTTClient_connectOptions options);\n</code></pre>\n\n<p>In my C# code, I can set </p>\n\n<pre><code>MQTTClient_connectOptions.struct_id = \"MQTC\"\n</code></pre>\n\n<p>and when I inspect the object while debugging I can see these 4 characters in that field.  However, when I use this structure to call MQTTClient_connect(), the \"MQTC\" is truncated down to \"MQT\".</p>\n\n<p>When I step through the code, as soon as I step <em>into</em> MQTTClient_connect, the struct_id field changes from \"MQTC\" to \"MQT\\0\" in the C# object inspector, and MQTTClient_connect fails because the struct_id is not what is expected.</p>\n\n<p>If I instead define the structure in C# like this:</p>\n\n<pre><code> [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]\npublic byte[] struct_id;\n</code></pre>\n\n<p>and set its value like this:</p>\n\n<pre><code>struct_id = Encoding.ASCII.GetBytes(\"MQTC\");\n</code></pre>\n\n<p>then everything works correctly ???</p>\n\n<p>My goal is to understand Marshaling and P/Invoke and converting C/C++ headers to C# code, and so I would really like to know:</p>\n\n<p>1 - Why does using \"byte[]\" work while using \"string\" causes the value of struct_id changing when I <em>step into</em> the MQTTClient_connect() routine?</p>\n\n<p>2 - Is there a way to define the C# structure using \"string\", which would make the rest of my C# code simpler?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1550076250, "post_id": 54675149, "comment_id": 96140037, "body": "Reading and entering values seems fine.  What is your input, expected output, and actual output?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1550076373, "post_id": 54675149, "comment_id": 96140110, "body": "<code>case &#39;e&#39;: n = enter(a, n); break;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11057650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/94qCI.jpg?s=128&g=1", "display_name": "Lester Crest", "link": "https://stackoverflow.com/users/11057650/lester-crest"}, "edited": false, "score": 0, "creation_date": 1550077571, "post_id": 54675541, "comment_id": 96140755, "body": "Omg...Dude. Thank you. Thank you so much man. I have been sitting with this for 2 days, couldnt figure out what to do. I wish you the very best from the bottom of my heart. I am really grateful man, thanks"}], "tags": [], "owner": {"reputation": 2128, "user_id": 6597851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/062788bb60b016a39edb038616166902?s=128&d=identicon&r=PG&f=1", "display_name": "krisz", "link": "https://stackoverflow.com/users/6597851/krisz"}, "is_accepted": true, "score": 1, "last_activity_date": 1550076875, "creation_date": 1550076875, "answer_id": 54675541, "question_id": 54675149, "link": "https://stackoverflow.com/questions/54675149/how-do-i-keep-the-users-inputted-values-after-he-leaves-the-enter-option-and-m/54675541#54675541", "title": "How do I keep the users inputted values after he leaves the &quot;enter&quot; option and make him start from were he finished of?", "body": "<p>In <code>main()</code>, move the declaration of <code>n</code> outside the loop:</p>\n\n<pre><code>int n = 0;\ndo\n{\n    ...\n</code></pre>\n\n<p>Update <code>n</code> when you call <code>enter()</code>:</p>\n\n<pre><code>n = enter(a,n);\n</code></pre>\n\n<p>In the <code>enter</code> function, start your loop from <code>n</code>:</p>\n\n<pre><code>for(int i=n; i&lt;L; i++)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11057650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/94qCI.jpg?s=128&g=1", "display_name": "Lester Crest", "link": "https://stackoverflow.com/users/11057650/lester-crest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 54675541, "answer_count": 1, "score": -1, "last_activity_date": 1550079135, "creation_date": 1550075609, "last_edit_date": 1550079135, "question_id": 54675149, "link": "https://stackoverflow.com/questions/54675149/how-do-i-keep-the-users-inputted-values-after-he-leaves-the-enter-option-and-m", "title": "How do I keep the users inputted values after he leaves the &quot;enter&quot; option and make him start from were he finished of?", "body": "<p>I have a certain exercise I must do. Hopefully someone understands what I have failed to do. </p>\n\n<p>whenever a user presses enter, types in less than 10 integers, presses q to exit the option and then comes back, all of his input values will be gone. I want to input values to be left there until the total elements stored are 10. How do I do this? </p>\n\n<p>Note! The user is not supposed to exit the application (which in this case is CMD), rather they should only be able to leave the \"enter\" option and still have their input values \"stored\". </p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define L 10\n\nvoid view(int a[])\n\n     {\n        int i;\n        printf(\"\\n Here are the currently stored values\\n\");  \n\n        printf(\"[\");\n        for(i=0; i&lt;L; i++)\n            {\n            printf(\" %d \",a[i]);\n            }\n        printf(\"]\");\n     }\n\nint enter(int a[], int n)\n     {\n         printf(\"\\n Note! You can press any letter if you want to return to the main menu. \\n\");\n\n         for(int i=0; i&lt;L; i++)\n\n            {\n\n            int mesa;\n            printf(\" Enter measurement #%d (or q to quit): \", n+1);\n            int check = scanf(\"%d\",&amp;mesa); \n\n            if(check)\n                {\n                    a[i] = mesa;\n                    n++;\n                }\n            else\n                { \n                    char temp;\n                    scanf(\" %c\",&amp;temp);\n                    return n;\n                }\n            }\n           return n;\n     }\n\nvoid compute(int a[], int n)\n\n     {\n            printf(\" Computing...\\n\");\n\n            //Min value\n            {\n                int i;\n                int min = 10000;\n\n                for (i = 0; i &lt; L; i++)\n                if(a[i] &lt; min)\n                min = a[i];\n\n                printf(\"\\n The min value is: %d \\n\", min);\n            }\n\n            //Max value\n            {\n                int i;\n                int max = a[0];\n\n                for (i = 0; i &lt; L; i++) \n                if (a[i] &gt; max) \n                max = a[i]; \n\n               printf(\" The max value is: %d \\n\", max);\n            }\n\n            // Average &amp; Normalization\n            {\n                float average;\n                int i;\n                int norm;\n                int sum;\n\n                for(i = 0; i &lt; L; ++i)\n                    {\n                    sum = sum + a[i];\n                    average = (float)sum / 10; //typecast - Ge en interger en tillf\u00e4llig roll. P\u00e5 s\u00e5 s\u00e4tt kan du s\u00e4ga \u00e5t programmet att du faktiskt vill ha float som svar och inte ett heltal som svar.\n                    } \n                    printf(\" Average value: %.2f \\n\", average);\n\n                    printf(\" Normalized array: [\");\n                for(i = 0; i &lt; L; i++)\n                    {\n                    norm = a[i] - average; //average - every a[]\n                    printf(\" %d\", (int)round(norm));\n                    }\n                    printf(\" ]\");\n            }\n     }\n\nvoid reset(int a[])\n\n    {\n        printf(\" You have chosen to reset the array. All the elements in the array will now be deleted. \\n\");\n\n        //memset( a, 0, 10*sizeof(a)); &lt;--- Kan ej anv\u00e4ndas d\u00e5 sizeof() funktionen l\u00e4ser av en variabel och inte hela arrayens storlek.\n        memset( a, 0, 10*sizeof(int*));\n    }\n\nint main()\n\n{\n    char command;\n    int a[L];\n\n    printf(\" Hello and welcome to this measurement tool. In this program you will be able to type in and analyze data.\\n\");\n    printf(\" In the section below, you can choose a letter v,e,c,r or q to do certain things. More information will be provided down below.\\n\");\n    printf(\"\\n v(View) - Displays currently stored values.\");\n    printf(\"\\n e(Enter) - Allows you to store values. \");\n    printf(\"\\n c(Compute) - Displays the maxiumum, minimum, normalized and average value of those which are stored.\");\n    printf(\"\\n r(Reset) - Deletes all stored values.\");\n    printf(\"\\n q(Quit) - Exits the program. \\n\");\n    printf(\"\\n Please choose one of the commands above: \");\n\n    do\n    {\n      int n = 0;\n      scanf(\" %c\",&amp;command);\n      switch(command)\n       {\n            case 'v' : view(a);break;\n            case 'e' : enter(a,n);break;\n            case 'c' : compute(a,n);break;\n            case 'r' : reset(a);break;\n            default : printf(\"\\n Please choose one of the options given.\\n\");break;\n            case 'q' : \n                    {\n                    printf(\" Want to exit? Confirmation needed. Press q again to exit.\");\n                    scanf(\" %c\",&amp;command);\n                    }   \n        }\n            printf(\"\\n VECRQ?: \");\n    } while(command != 'q');\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "include", "remote-access", "preprocessor"], "comments": [{"owner": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 1, "creation_date": 1550075544, "post_id": 54675066, "comment_id": 96139590, "body": "I think you have to mount a remote drive somehow instead.  sshfs could work on most linux machins and some sort of NFS or SAMBA share could work for windows.  Then you would set your INCLUDE_PATH directive to point to the shared drive."}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1550075719, "post_id": 54675066, "comment_id": 96139698, "body": "Downvote kindly review criteria and explain. This is a well-thought-out question. <a href=\"https://stackoverflow.com/help/privileges/vote-down\">stackoverflow.com/help/privileges/vote-down</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550076211, "post_id": 54675066, "comment_id": 96140006, "body": "Why not just use <a href=\"https://git-scm.com\" rel=\"nofollow noreferrer\">git</a>?"}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550076557, "post_id": 54675066, "comment_id": 96140212, "body": "@JesperJuhl git would require each user to clone a repo and have a separate local copy, correct?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550076676, "post_id": 54675066, "comment_id": 96140286, "body": "@kmiklas Yes. But you <i>want</i> version control <i>anyway</i>, so why is that a problem?"}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550076804, "post_id": 54675066, "comment_id": 96140343, "body": "@JesperJuhl hmmmm....... can you add that as a real answer?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1550077180, "post_id": 54675066, "comment_id": 96140532, "body": "@kmiklas Done.."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1550077549, "post_id": 54675066, "comment_id": 96140745, "body": "For what it&#39;s worth, what you&#39;re proposing seems to me to fall outside the scope of the C++ language.  It&#39;s really an expansion of how the <i>host</i> system interprets file systems and file names."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1550075563, "creation_date": 1550075563, "answer_id": 54675132, "question_id": 54675066, "link": "https://stackoverflow.com/questions/54675066/how-to-specify-a-remote-preprocessor-include-path-like-192-0-2-17-usr-include/54675132#54675132", "title": "How to specify a remote preprocessor include path like 192.0.2.17://usr/include", "body": "<p>I'm not aware of any compiler that retrieves include files or libraries remotely, so this is not something you can do directly.</p>\n\n<p>The best you can do is have these dependencies on an NFS share that you can mount and then add that path to your include path.</p>\n"}, {"tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": false, "score": 1, "last_activity_date": 1550076287, "creation_date": 1550076287, "answer_id": 54675344, "question_id": 54675066, "link": "https://stackoverflow.com/questions/54675066/how-to-specify-a-remote-preprocessor-include-path-like-192-0-2-17-usr-include/54675344#54675344", "title": "How to specify a remote preprocessor include path like 192.0.2.17://usr/include", "body": "<p>I wouldn't put references to this in the code like that, and as dbush said, you'd have to enhance the preprocessor.</p>\n\n<p>But there might be cute ways to do this within the Make system. That is, if you're using Make (for instance), you could add steps to the Makefile that force a refresh of data.</p>\n\n<p>However, I would suggest this is WRONG because it's not just the include files that need to be fresh. If an include has changed, the related code has probably also changed, and you would need those changes, too. Your magic #include stuff isn't going to do a thing to make sure people have the right code / libraries that the includes are for.</p>\n\n<p>I'm not sure why proper use of source code repositories don't already handle this for you.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1550077144, "creation_date": 1550077144, "answer_id": 54675633, "question_id": 54675066, "link": "https://stackoverflow.com/questions/54675066/how-to-specify-a-remote-preprocessor-include-path-like-192-0-2-17-usr-include/54675633#54675633", "title": "How to specify a remote preprocessor include path like 192.0.2.17://usr/include", "body": "<p>Since you want version control <em>anyway</em> you could just use <a href=\"https://git-scm.com\" rel=\"nofollow noreferrer\">git</a> (like thousands of other projects). So each user has a local clone of anything needed.</p>\n\n<p>To answer the original question: No. I'm not aware of any preprocessor supporting such an include scheme.</p>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1550077144, "creation_date": 1550075378, "question_id": 54675066, "link": "https://stackoverflow.com/questions/54675066/how-to-specify-a-remote-preprocessor-include-path-like-192-0-2-17-usr-include", "title": "How to specify a remote preprocessor include path like 192.0.2.17://usr/include", "body": "<p>Is it possible to specify a C/C++ include path to a remote preprocessor server?</p>\n\n<p>The point here is to have once central location for header files. This makes upgrades, version consistency, and a host of other things much better than people running all willy-nilly including different versions of things.</p>\n\n<p><strong>Minimal, Complete, and Verifiable Example</strong></p>\n\n<p>Typical include. On Linux, would default to <code>/usr/include/</code> or the like; in Windows VS, to a location specified in the <code>$(IncludePath)</code> variable.</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    std::cout &lt;&lt; \"hello, world\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Now imagine that we set our include path as follows:</p>\n\n<pre><code>C_INCLUDE_PATH=192.0.2.17://usr/include;/usr/include;\n</code></pre>\n\n<p>The above would first check the remote server at 192.0.2.17 to see if the <code>iostream</code> library existed. Failing this, <code>/usr/include</code> would be checked.</p>\n\n<p>This is a bit of a stretch to illustrate the point:</p>\n\n<pre><code>#include &lt;192.0.2.17://iostream&gt;\n\nint main() {\n\n    std::cout &lt;&lt; \"hello, world\" &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<p>Thanks, Keith :^)</p>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1550074889, "post_id": 54674845, "comment_id": 96139149, "body": "I can&#39;t understand what you&#39;re trying to do."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1550074890, "post_id": 54674845, "comment_id": 96139151, "body": "Are you asking &quot;if(y &lt; x), give or take 10 from x&quot;?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1550074891, "post_id": 54674845, "comment_id": 96139152, "body": "Are you saying that <code>a</code> needs to be greater than <code>x</code> AND that <code>x</code> needs to be between -10 and 10 inclusive?"}, {"owner": {"reputation": 13, "user_id": 11057556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N5NQLxFHQYs/AAAAAAAAAAI/AAAAAAAAANI/4hz3We8NXhg/photo.jpg?sz=128", "display_name": "Theoph", "link": "https://stackoverflow.com/users/11057556/theoph"}, "edited": false, "score": 0, "creation_date": 1550075046, "post_id": 54674845, "comment_id": 96139255, "body": "Mhm sorry I&#39;m not clear as I guessed.. I would like to verify if x is included in b-10 and b+10. Like, for example if x = 5 and b = 3, then the condition is verified."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550075118, "post_id": 54674845, "comment_id": 96139299, "body": "That means that <code>x &gt;= b-10 &amp;&amp; x &lt;= b+10</code>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1550075229, "post_id": 54674845, "comment_id": 96139381, "body": "And what about <code>a</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11057556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N5NQLxFHQYs/AAAAAAAAAAI/AAAAAAAAANI/4hz3We8NXhg/photo.jpg?sz=128", "display_name": "Theoph", "link": "https://stackoverflow.com/users/11057556/theoph"}, "edited": false, "score": 0, "creation_date": 1550077185, "post_id": 54674984, "comment_id": 96140537, "body": "Thanks a lot, I don&#39;t understand how I didn&#39;t figure that out by myself... Time to go back to work !"}], "tags": [], "owner": {"reputation": 1202, "user_id": 5032550, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6MWmL.jpg?s=128&g=1", "display_name": "Luis Cabrera Benito", "link": "https://stackoverflow.com/users/5032550/luis-cabrera-benito"}, "is_accepted": true, "score": 2, "last_activity_date": 1550075155, "creation_date": 1550075155, "answer_id": 54674984, "question_id": 54674845, "link": "https://stackoverflow.com/questions/54674845/how-to-make-an-if-variable1-x-more-or-less-y/54674984#54674984", "title": "How to make an &quot;if( variable1 &lt; X more or less Y)&quot;?", "body": "<pre><code>if(a &lt; x &amp;&amp; x &gt;= b-10 &amp;&amp; x &lt;= b + 10){\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1550075194, "creation_date": 1550075194, "answer_id": 54674996, "question_id": 54674845, "link": "https://stackoverflow.com/questions/54674845/how-to-make-an-if-variable1-x-more-or-less-y/54674996#54674996", "title": "How to make an &quot;if( variable1 &lt; X more or less Y)&quot;?", "body": "<p>You want the condition to be true if <code>a</code> is less than <code>x</code> AND <code>x</code> is greater than or equal to <code>b-10</code> AND <code>x</code> is less than or equal to <code>b+10</code>.  You would write that as:</p>\n\n<pre><code>if ((a &lt; x) &amp;&amp; (x &gt;= (b-10)) &amp;&amp; (x &lt;=(b+10))) {\n    c = a;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3557, "user_id": 1339013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ozjbC.png?s=128&g=1", "display_name": "Shakil", "link": "https://stackoverflow.com/users/1339013/shakil"}, "is_accepted": false, "score": 0, "last_activity_date": 1550075222, "creation_date": 1550075222, "answer_id": 54675004, "question_id": 54674845, "link": "https://stackoverflow.com/questions/54674845/how-to-make-an-if-variable1-x-more-or-less-y/54675004#54675004", "title": "How to make an &quot;if( variable1 &lt; X more or less Y)&quot;?", "body": "<p>If i understand properly <code>a</code> , <code>b</code> and <code>C</code> are constant variables and you want to assign value in C. Then this will be like </p>\n\n<pre><code>if( a &lt; X &amp;&amp; ( b - 10 &lt;= X &amp;&amp; b + 10 &gt;= X ) {\n    C = 2;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "is_accepted": false, "score": 2, "last_activity_date": 1550075982, "last_edit_date": 1550075982, "creation_date": 1550075571, "answer_id": 54675135, "question_id": 54674845, "link": "https://stackoverflow.com/questions/54674845/how-to-make-an-if-variable1-x-more-or-less-y/54675135#54675135", "title": "How to make an &quot;if( variable1 &lt; X more or less Y)&quot;?", "body": "<p>A slightly more concise way to write it is:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nif (a &lt; x &amp;&amp; abs(x-b) &lt;= 10) {\n    c = 2;\n}\n</code></pre>\n\n<p>If your variables are something other than <code>int</code>, you can use <code>labs, llabs, fabs, fabsf, fabsl</code>, as appropriate. </p>\n\n<p>This can fail in the event of integer overflow (e.g. if <code>x</code>,<code>b</code> are 32-bit <code>int</code>s, and they differ by more than 2^31), so don't use it if that is a possibility.</p>\n"}], "owner": {"reputation": 13, "user_id": 11057556, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N5NQLxFHQYs/AAAAAAAAAAI/AAAAAAAAANI/4hz3We8NXhg/photo.jpg?sz=128", "display_name": "Theoph", "link": "https://stackoverflow.com/users/11057556/theoph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54674984, "answer_count": 4, "score": 1, "last_activity_date": 1550075982, "creation_date": 1550074763, "last_edit_date": 1550075642, "question_id": 54674845, "link": "https://stackoverflow.com/questions/54674845/how-to-make-an-if-variable1-x-more-or-less-y", "title": "How to make an &quot;if( variable1 &lt; X more or less Y)&quot;?", "body": "<p>I'm currently creating a little game, and I need to create a condition.</p>\n\n<p>In pseudo-code, it would look like something like this : </p>\n\n<pre><code>if (a &lt; x with x included in [b -10; b +10]) \n{\n    then c = 2\n}\n</code></pre>\n\n<p>Is there an easy way to do this ?</p>\n\n<p>I know it may not be really clear, so ask me further details if you didn't understand.</p>\n"}, {"tags": ["c++", "c", "linux", "perf", "intel-pmu"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550074644, "post_id": 54674710, "comment_id": 96138985, "body": "That&#39;s what perf does. Where is the issue? Yes 100 millions is too much, just make it smaller."}, {"owner": {"reputation": 11, "user_id": 3591871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5041ad33e7953e285ff10904281b80?s=128&d=identicon&r=PG&f=1", "display_name": "user3591871", "link": "https://stackoverflow.com/users/3591871/user3591871"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550075527, "post_id": 54674710, "comment_id": 96139577, "body": "So a program is running, which may have 1000 billions instructions. But I want that after every 100 million instructions, the number of cpu cycles passed to execute that 100 million instructions be recorded in a file. This is the problem."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550075664, "post_id": 54674710, "comment_id": 96139658, "body": "Don&#39;t use 100 million, use less. Any internal hardware counter could have overflown, especially the cycle one. That&#39;s why profilers use far less increments, usually lower than 1 million. And they are low overhead."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550147427, "post_id": 54674710, "comment_id": 96168393, "body": "You can use <code>perf record -e instructions:u -c 100000000</code> to capture a sample every 100M instructions. Then you can see the timestamps using <code>perf script -F time</code>, but they are in microseconds, not cycles. @MatthieuBrucher"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550153811, "post_id": 54674710, "comment_id": 96172282, "body": "Well, you can specify what hardware counter to save as well, so you can get cycles."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550157101, "post_id": 54674710, "comment_id": 96174555, "body": "@MatthieuBrucher How to do that exactly?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550157245, "post_id": 54674710, "comment_id": 96174653, "body": "You add <code>cycles</code> to the <code>-e</code> argument. Then maybe perf is not the best, I&#39;m more used to PAPI which can use several counters at the same time, but still uses perf underneath."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550159649, "post_id": 54674710, "comment_id": 96176121, "body": "@MatthieuBrucher But then if you add both <code>instructions</code> and <code>cycles</code> to the -e argument, the threshold specified to the -c argument would apply to both counters I think, not just the instruction counter. The OP is asking how to set a threshold on the instructions counter but also include the cycles counter in every sample (when the number of instructions reaches 100M)."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 2, "creation_date": 1550764778, "post_id": 54674710, "comment_id": 96399283, "body": "Does <a href=\"https://stackoverflow.com/q/54781746/620382\">stackoverflow.com/q/54781746/620382</a> (In your case <code>perf record -c 100000000 -e &#39;{instructions,cycles}:S&#39;</code>) work for you? Then I would suggest to close as duplicate."}], "owner": {"reputation": 11, "user_id": 3591871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5041ad33e7953e285ff10904281b80?s=128&d=identicon&r=PG&f=1", "display_name": "user3591871", "link": "https://stackoverflow.com/users/3591871/user3591871"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550135126, "creation_date": 1550074411, "last_edit_date": 1550135126, "question_id": 54674710, "link": "https://stackoverflow.com/questions/54674710/using-pebs-and-linux-perf-to-count-the-number-of-cpu-cycles-passed-to-execute-x", "title": "Using PEBS and Linux Perf to Count the number of CPU cycles passed to execute X number of instructions", "body": "<p>I want to do something like this: After 100 million instructions have passed, query the Linux perf HW CPU cycles and record it in a file. I want to use this code to characterize the performance of applications/benchmark programs during different phases of program execution. </p>\n\n<p>I have a hint that I need to setup Intel PEBS which overflows after 100 million instructions have passed and query the linux perf counters HW cpu cycles counter. </p>\n\n<p>Any pointer on where to start and if someone has already done that. I want to do this in a low overhead manner. I will write the code in C/C++. </p>\n\n<p>Regards...</p>\n"}, {"tags": ["c", "declaration", "definition", "c89"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1550074368, "post_id": 54674465, "comment_id": 96138813, "body": "What&#39;s the target compiler / system?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550074391, "post_id": 54674465, "comment_id": 96138824, "body": "Take a look here: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.6.3\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.7.6.3</a> <i>The only storage-class specifier that shall occur in a parameter declaration is register.</i>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550074670, "post_id": 54674465, "comment_id": 96138998, "body": "And from the logical point of view I would imagine that the specifier is needed in both, as the <i>call</i> is generated based on the prototype, while the implementation is based on the definition. So  if the caller will push the arguments to the stack while the implementation might expect them in registers - you might have a mismatch. But it is really depending on the ABI."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1550075113, "post_id": 54674465, "comment_id": 96139294, "body": "Storage class is not a factor in determining whether types are compatible. Therefore, the type of a function declared with register should be compatible with the type of a function declared without register, if they are otherwise compatible."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550075252, "post_id": 54674465, "comment_id": 96139397, "body": "@EricPostpischil What is the reason for this <code>register</code> exception in the standard?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1550075328, "post_id": 54674465, "comment_id": 96139449, "body": "@EugeneSh. It&#39;s not an exception. Storage classes are never included in type information. <code>auto int x;</code> , <code>static int x;</code>, and <code>register int x;</code> all have type <code>int</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1550075481, "post_id": 54674465, "comment_id": 96139547, "body": "@PSkocik Why <code>auto</code> can&#39;t be included but <code>register</code> can (well, <code>static</code> would not make sense)?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1550075910, "post_id": 54674465, "comment_id": 96139827, "body": "@EugeneSh That&#39;s an interesting quirk I hadn&#39;t noticed! I don&#39;t know why but I think nobody uses <code>auto</code> so nobody noticed it could also be harmlessly allowed in parameter declaration."}, {"owner": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1550153845, "post_id": 54674465, "comment_id": 96172306, "body": "@dbush: I am actually working on modernizing the Amsterdam compiler toolkit (ACK), so its multi platform."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1550155553, "post_id": 54674465, "comment_id": 96173468, "body": "Guessing it&#39;s a relic of the fact that <code>auto</code> predates type specifiers altogether (it was in B) and was added to mark a statement as being a variable declaration; variables named in the parameter list don&#39;t need this, so there&#39;s no ambiguity and no compiler ever thought to implement it. The fact that it later indicated storage class is probably a bit of a historical artifact to rationalize why we need a declaration-marking statement now that we have type names in the language."}], "answers": [{"tags": [], "owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "is_accepted": false, "score": 3, "last_activity_date": 1550168255, "last_edit_date": 1550168255, "creation_date": 1550074365, "answer_id": 54674689, "question_id": 54674465, "link": "https://stackoverflow.com/questions/54674465/should-i-place-the-parameter-storage-class-specifier-in-the-function-definition/54674689#54674689", "title": "Should I place the parameter storage class specifier in the function definition or in both the declaration and definition?", "body": "<p>Since you're using an old compiler for an odd platform, sometimes just looking at what the compiler does is more important than assuming it will comply perfectly with the C spec.</p>\n\n<p>This means you want to run each variant of your example through the compiler, with the compiler option set to generate assembly instead of an executable.  Look at the assembly, and see if you can tell if it is using registers or not each way.  In gcc, this is the <code>S</code> option; for example:</p>\n\n<pre><code>gcc myfile.c -S -o myfile.s\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "edited": false, "score": 0, "creation_date": 1550155127, "post_id": 54674733, "comment_id": 96173182, "body": "From my understanding, unless i am completely wrong, the storage class specifier in the parameter just means that the variable associated with the parameter should be placed in a register (even after the start of the code executes in the routine), it does not necessarily indicate it will be called using register calling conventions, no?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "edited": false, "score": 0, "creation_date": 1550155294, "post_id": 54674733, "comment_id": 96173298, "body": "@CarlEricCodere The standard doesn&#39;t actually say anything on that topic - only that the keyword <code>register</code> is permissible in the parameter list"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 6, "last_activity_date": 1550155074, "last_edit_date": 1550155074, "creation_date": 1550074457, "answer_id": 54674733, "question_id": 54674465, "link": "https://stackoverflow.com/questions/54674465/should-i-place-the-parameter-storage-class-specifier-in-the-function-definition/54674733#54674733", "title": "Should I place the parameter storage class specifier in the function definition or in both the declaration and definition?", "body": "<p>The C89 standard does say this (&sect; 3.5.4.3 External definitions):</p>\n\n<blockquote>\n  <p>The only storage-class specifier that shall occur in a parameter declaration is <code>register</code>.</p>\n</blockquote>\n\n<p>So, it would appear that while <code>register</code> is permissible as a function parameter storage class specifier, I still believe that whether or not this is honored really depends on the architecture and calling convention for the function. </p>\n\n<p>Since you mentioned Watcom and C89, I'm going to assume you're targeting x86-16. The typical calling conventions for x86-16 (<code>pascal</code>, <code>stdcall</code>, and <code>cdecl</code>) all require parameters to be pushed on the stack, not in registers, so I doubt that the keyword would actually modify how the parameters are passed to the function at the call site. </p>\n\n<p>Consider, you have the following function definition:</p>\n\n<pre><code>int __stdcall add2(register int x, register int y);\n</code></pre>\n\n<p>The function goes into the object file as <code>_add2@4</code> per requirements for stdcall. The @4 indicates how many bytes to remove from the stack at function return. The <code>ret imm16</code> (return to calling procedure and pop imm16 bytes from stack) instruction is used in this case.</p>\n\n<p><code>add2</code> will then have the following <code>ret</code> at the end:</p>\n\n<pre><code>ret 4\n</code></pre>\n\n<p>If 4 bytes were not pushed on the stack at the call site (i.e. because the parameters were actually in registers), your program now has a misaligned stack and crashes.</p>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "edited": false, "score": 0, "creation_date": 1550155228, "post_id": 54674910, "comment_id": 96173255, "body": "Interesting observation... I guess this is compiler specific in that case."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "edited": false, "score": 0, "creation_date": 1550156397, "post_id": 54674910, "comment_id": 96174100, "body": "@CarlEricCodere I could be wrong but I don&#39;t think the standard has wording about how prototypes with different storage classifiers should be combined with the contradicting definition so testing is all there is left. For top level qualifiers (like the last <code>const</code> int <code>int const* const X</code>) I think it is prescribed that only those in the definition are used in the body. (They don&#39;t play a role in the function&#39;s type.) IRC last time I checked, <code>__attributes</code> (nonstandard extension) and things like <code>inline</code>/<code>_Noreturn</code> tended to accumulate."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 6, "last_activity_date": 1550076078, "last_edit_date": 1550076078, "creation_date": 1550074951, "answer_id": 54674910, "question_id": 54674465, "link": "https://stackoverflow.com/questions/54674465/should-i-place-the-parameter-storage-class-specifier-in-the-function-definition/54674910#54674910", "title": "Should I place the parameter storage class specifier in the function definition or in both the declaration and definition?", "body": "<p>Empirically on gcc and clang, the <code>register</code> storage class on function params\nis behaving the same as top-level qualifiers on params: only the ones in the <em>definition</em> (not a previous prototype) count.</p>\n\n<p>(as for top level qualifiers, they're also discarded when type compatibility is considered, i.e., <code>void f(int);</code> and <code>void f(int const);</code> are compatible prototypes, but storage classes aren't part of types so type compatibility isn't an issue with them in the first place)</p>\n\n<p>From the point of view of a C programmer, the only observable upshot of <code>register</code> in C is that the compiler will not let you take the address of the declared object.</p>\n\n<p>When I do:</p>\n\n<pre><code>void f(int A, int register B);\n\nvoid f(int register A, int B) \n{\n    /*&amp;A;*/ //doesn't compile =&gt; A does have register storage here\n    &amp;B; //compiles =&gt; B doesn't have register storage here;\n        //the register from the previous prototype wasn't considered\n}\n</code></pre>\n\n<p>then <code>&amp;B</code> compiles, but <code>&amp;A</code> doesn't, so only the qualifiers in the <em>definition</em> appear to count.</p>\n\n<p>I think that if you do need those <code>register</code>, your best bet is to use it consistently in both places (the <code>register</code> in prototypes could theoretically modify how calls are made).</p>\n"}, {"tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1550075474, "last_edit_date": 1550075474, "creation_date": 1550075129, "answer_id": 54674973, "question_id": 54674465, "link": "https://stackoverflow.com/questions/54674465/should-i-place-the-parameter-storage-class-specifier-in-the-function-definition/54674973#54674973", "title": "Should I place the parameter storage class specifier in the function definition or in both the declaration and definition?", "body": "<p>From C17 standard, <strong>6.7.1 Storage-class specifiers</strong>:</p>\n\n<blockquote>\n  <p>A declaration of an identifier for an object with storage-class\n  specifier <strong>register</strong> suggests that access to the object be as fast as\n  possible. The extent to which such suggestions are effective is\n  implementation-defined.</p>\n</blockquote>\n\n<p>Imply that the compiler will try, or not depending on compiler, to speed-up parameter access, but doesn't imply any modification to the calling convention (basically no modifications on calling side).</p>\n\n<p>So it should be present in the function definition, but is insignificant in prototype.</p>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "edited": false, "score": 0, "creation_date": 1550154824, "post_id": 54675253, "comment_id": 96172975, "body": "As replied above, the compiler i am working with is ANSI C89 compatible, and currently the code of it is K&amp;R, so i am trying to &quot;modernize&quot; the code a bit... and then bootstrap it, it does use the register keyword into consideration in its code generator."}, {"owner": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "edited": false, "score": 0, "creation_date": 1550154923, "post_id": 54675253, "comment_id": 96173042, "body": "I think, as with other advice given below,the safe bet is to have the register specifier  in both the definition and declaration, and this is what I did, I just wanted to make sure it was a logical choice."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "edited": false, "score": 0, "creation_date": 1550155417, "post_id": 54675253, "comment_id": 96173388, "body": "@CarlEricCodere, it is important to understand what I said about <code>register</code>.  The point is not that compilers necessarily don&#39;t or shouldn&#39;t pay attention to it, but rather that if if they <i>do</i>, then it is more likely to cause them to emit worse code than better.  Compilers from the 90&#39;s and onward are much better at allocating data to registers effectively than 70s-era compilers were.  They do not need the programmer&#39;s help in that regard, so generally the <i>best</i> case is that using the <code>register</code> keyword is a needless redundancy."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "edited": false, "score": 0, "creation_date": 1550155615, "post_id": 54675253, "comment_id": 96173510, "body": "However, if you do retain the <code>register</code> keywords then yes, putting them in both declaration and definition is best and cleanest."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 15, "last_activity_date": 1550100114, "last_edit_date": 1550100114, "creation_date": 1550075939, "answer_id": 54675253, "question_id": 54674465, "link": "https://stackoverflow.com/questions/54674465/should-i-place-the-parameter-storage-class-specifier-in-the-function-definition/54675253#54675253", "title": "Should I place the parameter storage class specifier in the function definition or in both the declaration and definition?", "body": "<p>The key provision is that every declaration of the function must specify a compatible type for it.  That requires compatible return types, and, for declarations such as yours that contain parameter lists, compatible type for each pair of corresponding parameters.</p>\n\n<p>The question then becomes whether storage-class specifiers differentiate types.  They do not, though the standard says that indirectly, by omission of storage-class specifiers from its discussion of type derivation.  The property specified by a storage-class specifier in an object's declaration is therefore separate from that object's type.</p>\n\n<p>Moreover, C89 <a href=\"http://port70.net/~nsz/c/c89/c89-draft.html#3.5.4.3\" rel=\"nofollow noreferrer\">specifically says</a></p>\n\n<blockquote>\n  <p>The storage-class specifier in the declaration specifiers for a parameter declaration, if present, <strong>is ignored</strong> unless the declared parameter is one of the members of the parameter type list for a function definition.</p>\n</blockquote>\n\n<p>(emphasis added).  A function definition is a declaration accompanied by a function body, as opposed to a forward declaration, so your two codes have identical semantics.  </p>\n\n<blockquote>\n  <p>With and without the register storage class specific declaration, the\n  code compiles correctly (I tried gcc, VC++ and Watcom), I could not\n  find any information in the ISO/ANSI C89 standard on what is the\n  correct way to do, or is it ok if i just put the register keyword in\n  the function definition?</p>\n</blockquote>\n\n<p>Personally, I would be inclined to make each forward declaration identical to the declaration in the corresponding function definition.  This is never wrong if the function definition itself is correct.</p>\n\n<p>HOWEVER,</p>\n\n<ol>\n<li><p>The <code>register</code> keyword is a relic.  Compilers are not obligated to make any attempt at all to actually assign <code>register</code> variables to registers, and modern compilers are a lot better than humans at deciding how to assign variables to registers and otherwise to generate fast code anyway.  As long as you're converting old code, I would take the opportunity to remove all appearances of the <code>register</code> keyword.</p></li>\n<li><p>C89 is obsolete.  The latest version of the standard is C 2018; C 2011 is widely deployed; and C99 (also, technically, obsolete) is available almost everywhere.  Perhaps there is a good reason for you to target C89, but you should strongly consider instead targeting  C11 or C18, or <em>at least</em> C99.</p></li>\n</ol>\n"}], "owner": {"reputation": 321, "user_id": 1541387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42cb74a36ad32fd2b74fe8e102be11e1?s=128&d=identicon&r=PG", "display_name": "Carl Eric Codere", "link": "https://stackoverflow.com/users/1541387/carl-eric-codere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 54675253, "answer_count": 5, "score": 14, "last_activity_date": 1550168255, "creation_date": 1550073690, "last_edit_date": 1550094896, "question_id": 54674465, "link": "https://stackoverflow.com/questions/54674465/should-i-place-the-parameter-storage-class-specifier-in-the-function-definition", "title": "Should I place the parameter storage class specifier in the function definition or in both the declaration and definition?", "body": "<p>I'm working on porting some old K&amp;R code to ANSI C, so I'm writing missing function prototype declarations. A lot of the function definitions have parameters with the register storage class, but I'm not sure if the register storage class specifier can be omitted in the function prototype? </p>\n\n<p>With and without the register storage class specific declaration, the code compiles correctly (I tried GCC, VC++ and Watcom C). I could not find any information in the ISO/ANSI C89 standard on what is the correct way to do - is it OK if I just put the register keyword in the function definition?</p>\n\n<pre><code>int add(register int x, register int y); \n\nint add(register int x, register int y)\n{\n  return x+y;\n}\n</code></pre>\n\n<p>This also builds correctly:</p>\n\n<pre><code>int add(int x, int y);\n\nint add(register int x, register int y)\n{\n   return x+y;\n}\n</code></pre>\n\n<p>I want to make sure that the register storage specifier is really taken into account, according to the standard (my target is to compile using a very old compiler where this storage class specifier is important). Are both OK and it's just a question of coding style, or not?</p>\n"}, {"tags": ["c", "undefined-behavior", "time.h"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1550073598, "post_id": 54674388, "comment_id": 96138334, "body": "Your problem statement is that your code has <i>&quot;some sort of undefined behavior&quot;</i>. What do you <i>actually</i> see?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1550073619, "post_id": 54674388, "comment_id": 96138349, "body": "Please <a href=\"https://stackoverflow.com/posts/54674388/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1550073652, "post_id": 54674388, "comment_id": 96138366, "body": "BTW - <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do not need to cast <code>malloc</code> in C</a>"}, {"owner": {"reputation": 51, "user_id": 7948991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c589366cef7bce37f85c7c4b98eb3e8c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. White", "link": "https://stackoverflow.com/users/7948991/mr-white"}, "edited": false, "score": 0, "creation_date": 1550073827, "post_id": 54674388, "comment_id": 96138459, "body": "Sometimes it works fine. But sometimes it throws errors at the beginning or end of a program."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1550075232, "post_id": 54674388, "comment_id": 96139383, "body": "<i>What</i> errors...?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7948991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c589366cef7bce37f85c7c4b98eb3e8c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. White", "link": "https://stackoverflow.com/users/7948991/mr-white"}, "edited": false, "score": 0, "creation_date": 1550074336, "post_id": 54674548, "comment_id": 96138786, "body": "What&#39;s about memory allocated by gmtime? At what point program will free that memory?"}, {"owner": {"reputation": 148, "user_id": 8333926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041309799337708/picture?type=large", "display_name": "Micha\u0142 Marsza\u0142ek", "link": "https://stackoverflow.com/users/8333926/micha%c5%82-marsza%c5%82ek"}, "edited": false, "score": 2, "creation_date": 1550074724, "post_id": 54674548, "comment_id": 96139039, "body": "That is static memory, it will be destroyed by end of the program."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 3, "last_activity_date": 1550073968, "creation_date": 1550073968, "answer_id": 54674548, "question_id": 54674388, "link": "https://stackoverflow.com/questions/54674388/generating-random-dates-with-a-fixed-range/54674548#54674548", "title": "Generating random dates with a fixed range", "body": "<p><code>gmtime()</code> returns a pointer to an internal value (or a null pointer), which you must not pass to <code>free()</code>.  And we lose the pointer to the memory we allocated.</p>\n\n<pre><code>struct tm *const tm_today = gmtime(today);\nif (tm_today) {\n    // use it\n}\n// DO NOT free(tm_today) - it's not ours\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7948991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c589366cef7bce37f85c7c4b98eb3e8c?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. White", "link": "https://stackoverflow.com/users/7948991/mr-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 54674548, "answer_count": 1, "score": 0, "last_activity_date": 1550074353, "creation_date": 1550073496, "last_edit_date": 1550074353, "question_id": 54674388, "link": "https://stackoverflow.com/questions/54674388/generating-random-dates-with-a-fixed-range", "title": "Generating random dates with a fixed range", "body": "<p>I wrote a program which has to check if compiler meets POSIX requirements (so my <code>time_t</code> variable will hold proper dates), find today's year and generate bunch of random dates. Dates must be in a range of two years, last one and current (approximately).</p>\n\n<p>Unfortunately the block which determines current year causes some sort of undefined behavior. Here's my code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#define N 5\n#define ONE_YEAR 31536000\n#define TWO_YEARS 63072000\n#define TM_AND_POSIX_YEAR_DIFF 70\n\nint main(void) {\n\n  // Start of the block which causes undefined behavior\n  struct tm *tm_today = (struct tm *)malloc(sizeof(struct tm));\n  short td_year;\n  time_t *today = (time_t *)malloc(sizeof(time_t));\n  time_t t[N];\n  // Checking if compiler meets POSIX requirements\n  time_t check = 86400;\n  if (strcmp(asctime(gmtime(&amp;check)), \"Fri Jan 02 00:00:00 1970\\n\") != 0)\n    return 1;\n  // Determining current year\n  *today = time(NULL);\n  tm_today = gmtime(today);\n  td_year = (*tm_today).tm_year - TM_AND_POSIX_YEAR_DIFF;\n  free(today);\n  free(tm_today);\n  // End of the block which causes undefined behavior\n  // Generating random dates\n  for (unsigned char i = 0; i &lt; N; ++i) {\n    t[i] = (time_t)round(((double)rand() / RAND_MAX) * TWO_YEARS) +\n           ONE_YEAR * td_year;\n    printf(\"%d\\n\", t[i]);\n    puts(asctime(gmtime(&amp;t[i])));\n  }\n  return 0;\n}\n</code></pre>\n\n<p>P.S. I need <code>time_t</code> and <code>tm</code> structure variables (<code>today</code>, <code>tm_today</code>) used for determining today's year to be dynamic.</p>\n"}, {"tags": ["c", "nfc", "lib-nfc"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7058315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YvIWLlOZ2zM/AAAAAAAAAAI/AAAAAAAAiWY/hmaQTbjMdJ0/photo.jpg?sz=128", "display_name": "Francesco Baldan", "link": "https://stackoverflow.com/users/7058315/francesco-baldan"}, "edited": false, "score": 0, "creation_date": 1553503933, "post_id": 55331443, "comment_id": 97393281, "body": "Did the same few weeks ago and solved after a lot of bad words! Thank you anyway,"}], "tags": [], "owner": {"reputation": 373, "user_id": 10062580, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cB-om_dK2kg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q811I-QYChlGv4qfgOrd2xg2vQgg/mo/photo.jpg?sz=128", "display_name": "Darwin Harianto", "link": "https://stackoverflow.com/users/10062580/darwin-harianto"}, "is_accepted": true, "score": 0, "last_activity_date": 1553489698, "creation_date": 1553489698, "answer_id": 55331443, "question_id": 54674335, "link": "https://stackoverflow.com/questions/54674335/libnfc-unable-to-open-nfc-device/55331443#55331443", "title": "libnfc: unable to open NFC device", "body": "<p>Have the same problem\nit was a problem on the circuit I believe.\nTaking it off and re putting it back solved the problem for me.</p>\n"}], "owner": {"reputation": 19, "user_id": 7058315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YvIWLlOZ2zM/AAAAAAAAAAI/AAAAAAAAiWY/hmaQTbjMdJ0/photo.jpg?sz=128", "display_name": "Francesco Baldan", "link": "https://stackoverflow.com/users/7058315/francesco-baldan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1452, "favorite_count": 1, "accepted_answer_id": 55331443, "answer_count": 1, "score": 0, "last_activity_date": 1553489698, "creation_date": 1550073352, "question_id": 54674335, "link": "https://stackoverflow.com/questions/54674335/libnfc-unable-to-open-nfc-device", "title": "libnfc: unable to open NFC device", "body": "<p>I have a problem with libnfc on a Raspberry Pi 3B trying to read data from a PN532 card reader. I installed libnfc as the official site suggest to do and in fact it all worked this morning. I was able to detect my device using the <code>nfc-list</code> and <code>nfc-scan-device</code> commands.</p>\n\n<p>Then I tried to run a C program (not done by me, but done by a person here in the company) and it worked. Did it again and it didn't work, but returned an error.\nTried to run the nfc-list command and it returned the same error. Since then, it looks like the libnfc library stopped working properly.</p>\n\n<p>These are the errors I get when I try to run some commands:</p>\n\n<p><code>nfc-list</code>:</p>\n\n<pre><code>nfc-list uses libnfc 1.7.1\nerror   libnfc.bus.i2c  Error: wrote only -1 bytes (10 expected).\nerror   libnfc.driver.pn532_i2c Unable to transmit data. (TX)\npn53x_check_communication: Input / Output Error\nerror   libnfc.bus.i2c  Error: wrote only -1 bytes (10 expected).\nerror   libnfc.driver.pn532_i2c Unable to transmit data. (TX)\nnfc-list: ERROR: Unable to open NFC device: pn532_i2c:/dev/i2c-1\n</code></pre>\n\n<p><code>nfc-scan-device -v</code>:</p>\n\n<pre><code>nfc-scan-device uses libnfc 1.7.1\n1 NFC device(s) found:\nerror   libnfc.bus.i2c  Error: wrote only -1 bytes (10 expected).\nerror   libnfc.driver.pn532_i2c Unable to transmit data. (TX)\npn53x_check_communication: Input / Output Error\nerror   libnfc.bus.i2c  Error: wrote only -1 bytes (10 expected).\nerror   libnfc.driver.pn532_i2c Unable to transmit data. (TX)\nnfc_open failed for pn532_i2c:/dev/i2c-1\n</code></pre>\n\n<p><code>LIBNFC_LOG_LEVEL=3 nfc-list</code>:</p>\n\n<pre><code>debug   libnfc.config   key: [device.name], value: [PN532 over I2C]\ndebug   libnfc.config   key: [device.connstring], value: [pn532_i2c:/dev/i2c-1]\ndebug   libnfc.config   Unable to open directory: /etc/nfc/devices.d\ndebug   libnfc.general  log_level is set to 3\ndebug   libnfc.general  allow_autoscan is set to true\ndebug   libnfc.general  allow_intrusive_scan is set to false\ndebug   libnfc.general  1 device(s) defined by user\ndebug   libnfc.general    #0 name: \"PN532 over I2C\", connstring: \"pn532_i2c:/dev/i2c-1\"\nnfc-list uses libnfc 1.7.1\ndebug   libnfc.general  0 device(s) found using acr122_usb driver\ndebug   libnfc.general  0 device(s) found using pn53x_usb driver\ndebug   libnfc.chip.pn53x   Diagnose\ndebug   libnfc.chip.pn53x   Timeout value: 500\ndebug   libnfc.chip.pn53x   SAMConfiguration\ndebug   libnfc.chip.pn53x   Timeout value: 1000\ndebug   libnfc.bus.i2c  TX: 00 00 ff 03 fd d4 14 01 17 00\nerror   libnfc.bus.i2c  Error: wrote only -1 bytes (10 expected).\nerror   libnfc.driver.pn532_i2c Unable to transmit data. (TX)\npn53x_check_communication: Input / Output Error\ndebug   libnfc.chip.pn53x   InRelease\ndebug   libnfc.bus.i2c  TX: 00 00 ff 03 fd d4 52 00 da 00\nerror   libnfc.bus.i2c  Error: wrote only -1 bytes (10 expected).\nerror   libnfc.driver.pn532_i2c Unable to transmit data. (TX)\ndebug   libnfc.general  Unable to open \"pn532_i2c:/dev/i2c-1\".\nnfc-list: ERROR: Unable to open NFC device: pn532_i2c:/dev/i2c-1\n</code></pre>\n\n<p>Searched a lot but didn't find anything useful.\nThank you.</p>\n"}, {"tags": ["c", "linux", "macos", "posix"], "comments": [{"owner": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "edited": false, "score": 0, "creation_date": 1550073510, "post_id": 54674212, "comment_id": 96138277, "body": "You honestly might want to just use a temporary file for a case like this maybe"}, {"owner": {"reputation": 1767, "user_id": 307093, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ef724d2acb9b08a1e121b62505454c45?s=128&d=identicon&r=PG", "display_name": "dev_null", "link": "https://stackoverflow.com/users/307093/dev-null"}, "reply_to_user": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "edited": false, "score": 0, "creation_date": 1550073868, "post_id": 54674212, "comment_id": 96138492, "body": "This gives system-wide properties. I.e. the file will live until OS reboot. what is ok, but not perfect, if I create a file my_file.&lt;pid&gt;.tmp in /tmp and my process crashed then the file will stay there forever..."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1550074089, "post_id": 54674212, "comment_id": 96138630, "body": "Which language, C or C++?  They are distinct languages.  For example, c++ allows overloading of functions and many compilers use name mangling to differentiate from the overloads.  Name mangling may not be compatible with .so or .dlls.  Please update your tags accordingly."}, {"owner": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "edited": false, "score": 0, "creation_date": 1550074144, "post_id": 54674212, "comment_id": 96138669, "body": "If you have assembly/low-level knowledge you can try and reserve a block of memory for whatever data you need and access it directly? Unsure how you&#39;d be able to share the memory address between DLL&#39;s though unless you can somehow guarantee you can get that block at for example 0xA134"}, {"owner": {"reputation": 1767, "user_id": 307093, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ef724d2acb9b08a1e121b62505454c45?s=128&d=identicon&r=PG", "display_name": "dev_null", "link": "https://stackoverflow.com/users/307093/dev-null"}, "edited": false, "score": 0, "creation_date": 1550074913, "post_id": 54674212, "comment_id": 96139171, "body": "Yes, I think about the block, however I also don&#39;t know how to get &quot;safe&quot; address to mmap for example. Nowadays with all these Load Address Randomization features it&#39;s too complex"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1550111228, "post_id": 54674212, "comment_id": 96153537, "body": "Anything wrong with <code>getenv</code> and <code>setenv</code>?"}, {"owner": {"reputation": 1767, "user_id": 307093, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ef724d2acb9b08a1e121b62505454c45?s=128&d=identicon&r=PG", "display_name": "dev_null", "link": "https://stackoverflow.com/users/307093/dev-null"}, "edited": false, "score": 0, "creation_date": 1550140496, "post_id": 54674212, "comment_id": 96164583, "body": "they are not thread safe, if they are - they would be just beyond the perfection"}], "answers": [{"comments": [{"owner": {"reputation": 1767, "user_id": 307093, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ef724d2acb9b08a1e121b62505454c45?s=128&d=identicon&r=PG", "display_name": "dev_null", "link": "https://stackoverflow.com/users/307093/dev-null"}, "edited": false, "score": 0, "creation_date": 1550074760, "post_id": 54674666, "comment_id": 96139059, "body": "Okay, assume there is a DAW. (Digital Audio Workstation, like Ableton for example) I have 2 plug-ins. I need to connect them somehow. They are in the same process, they cannot see each other though. And they should not have &quot;excessive&quot; public symbols which they export."}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "reply_to_user": {"reputation": 1767, "user_id": 307093, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ef724d2acb9b08a1e121b62505454c45?s=128&d=identicon&r=PG", "display_name": "dev_null", "link": "https://stackoverflow.com/users/307093/dev-null"}, "edited": false, "score": 0, "creation_date": 1550075997, "post_id": 54674666, "comment_id": 96139880, "body": "Could one of your plugins implement a socket-based key/value server? All your plugins could attach to that. You&#39;d have to implement a scheme to know what port number to use, although that could be related to the PID, or a constant if this collection of plugins is guaranteed to be a singleton on the machine. There would be a variety of ways to make this work."}, {"owner": {"reputation": 1767, "user_id": 307093, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ef724d2acb9b08a1e121b62505454c45?s=128&d=identicon&r=PG", "display_name": "dev_null", "link": "https://stackoverflow.com/users/307093/dev-null"}, "edited": false, "score": 0, "creation_date": 1550076186, "post_id": 54674666, "comment_id": 96139994, "body": "Thanks, a socket is a good idea. Not perfect as well though because it&#39;s still process-externally visible, while it has no any reason to be."}, {"owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "reply_to_user": {"reputation": 1767, "user_id": 307093, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ef724d2acb9b08a1e121b62505454c45?s=128&d=identicon&r=PG", "display_name": "dev_null", "link": "https://stackoverflow.com/users/307093/dev-null"}, "edited": false, "score": 0, "creation_date": 1550076477, "post_id": 54674666, "comment_id": 96140171, "body": "You&#39;re running in some sort of container environment where plugins aren&#39;t encouraged to talk to each other. If plugins aren&#39;t really allowed to talk to each other, they may as well be in different processes. You could cheat, though. You could store somewhere the address of the registry. After all, if it&#39;s C++, you can set pointers to any arbitrary location, right? Do you have control over how all these plugins launch in the first place?"}], "tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": false, "score": 0, "last_activity_date": 1550074304, "creation_date": 1550074304, "answer_id": 54674666, "question_id": 54674212, "link": "https://stackoverflow.com/questions/54674212/process-wide-named-property-on-osx-and-or-linux/54674666#54674666", "title": "Process-wide named property on osx and or linux", "body": "<p>Your question is a little confusing / vague. First, DLL is a Windows term. As the OS's you've listed are UNIX-based, the term you want is probably \"library\".</p>\n\n<p>Next, you have a bunch of libraries. As you're implementing a custom way of setting properties, I presume you have control over how the code that is built into those various libraries obtain their data.</p>\n\n<p>You've said the values need to be available within a single process. Why not just create a class to manage all this, some sort of setting registry? I'm not sure why this is hard.</p>\n"}], "owner": {"reputation": 1767, "user_id": 307093, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ef724d2acb9b08a1e121b62505454c45?s=128&d=identicon&r=PG", "display_name": "dev_null", "link": "https://stackoverflow.com/users/307093/dev-null"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1550074604, "creation_date": 1550073008, "last_edit_date": 1550074604, "question_id": 54674212, "link": "https://stackoverflow.com/questions/54674212/process-wide-named-property-on-osx-and-or-linux", "title": "Process-wide named property on osx and or linux", "body": "<p>I have a complex project with a lot of dlls (some of them are plug-ins i.e. they cannot share linker symbol names freely) and I look for an ability to put some information which other dlls can get safely. If to assume that setenv function is thread-safe I would be totally happy.</p>\n\n<p>So What I look for is something like </p>\n\n<pre><code>int val = get_or_create_process_wide_property(\"my_prop\", 10);\nif (val == 10) {   //property just was created\n}\nelse {   //property was set by somebody else and we can use it\n}\n</code></pre>\n\n<p>shm_open except it's a little bit overhead requires shm_unlink, which I never can be sure is called because a process can crash.</p>\n"}, {"tags": ["c", "postgresql", "sql-function"], "answers": [{"comments": [{"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1550082684, "post_id": 54676425, "comment_id": 96143410, "body": "Thanks. Ideally, to mimic <code>money</code>, this would be a variable-sized numeric, but accomplishing that seems very complicated and not well-documented.  So I guess for the moment, at least, I&#39;ll need to settle for fixed-size integral values.  It&#39;d also be neat if I had any idea why these specific values had these problems."}, {"owner": {"reputation": 15476, "user_id": 1104979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/289c98242aae94f44939bf6544f70ebc?s=128&d=identicon&r=PG", "display_name": "Nick Barnes", "link": "https://stackoverflow.com/users/1104979/nick-barnes"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 1, "creation_date": 1550156274, "post_id": 54676425, "comment_id": 96173997, "body": "Too much to fit in a comment; see the updated answer. <code>money</code> is fixed-length (8 bytes), so if you want variable-length values, you might want a <code>numeric</code> (I&#39;m sure that someone in the history of D&amp;D has managed to get hold of more than 2^64cp...)."}, {"owner": {"reputation": 15476, "user_id": 1104979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/289c98242aae94f44939bf6544f70ebc?s=128&d=identicon&r=PG", "display_name": "Nick Barnes", "link": "https://stackoverflow.com/users/1104979/nick-barnes"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 1, "creation_date": 1550156286, "post_id": 54676425, "comment_id": 96174006, "body": "You&#39;re right, there&#39;s almost nothing in the HTML docs about these low-level implementation details. But the source code is thoroughly commented, and since they build so much of the core functionality on top of their own APIs, there is usually no better explanation than the code itself. For pretty much anything you might want to do, you can find an example to imitate."}, {"owner": {"reputation": 15476, "user_id": 1104979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/289c98242aae94f44939bf6544f70ebc?s=128&d=identicon&r=PG", "display_name": "Nick Barnes", "link": "https://stackoverflow.com/users/1104979/nick-barnes"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 1, "creation_date": 1550156295, "post_id": 54676425, "comment_id": 96174009, "body": "As for why specific values triggered this odd behaviour, I&#39;m guessing it&#39;s because the <a href=\"https://www.postgresql.org/docs/current/storage-toast.html\" rel=\"nofollow noreferrer\">TOAST</a> mechanism hijacks a couple of <code>varlena</code> header bits indicate the storage mode, and within certain size ranges, it&#39;ll flip them fairly predictably. You might see them flip-flop around the boundaries, depending on the compressibility of the subsequent chunk of memory. But this is all guesswork based on your error message; I&#39;ve never really had to dig in to the implementation."}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1550158496, "post_id": 54676425, "comment_id": 96175416, "body": "Thanks, that&#39;s a great suggestion. I suppose it should be variable length, because you&#39;re right, somebody probably has gotten hold of more than that amount of money - or at least more than that in total including gear value. I would like to avoid making it a decimal, though that may not be realistic because I just found out last night that the price per unit for <i>Sling Bullets</i> is 0.2cp. I have no idea how you&#39;d actually pay someone in-game that amount, since 1cp is the smallest denomination, but..."}, {"owner": {"reputation": 15476, "user_id": 1104979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/289c98242aae94f44939bf6544f70ebc?s=128&d=identicon&r=PG", "display_name": "Nick Barnes", "link": "https://stackoverflow.com/users/1104979/nick-barnes"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1550162538, "post_id": 54676425, "comment_id": 96177865, "body": "The built-in types are only a starting point. If you don&#39;t want the <code>(precision,scale)</code> parameters, you can just throw away the typmod handlers. And as long as your input function rejects anything with a decimal point, there&#39;s no realistic way to actually create a fractional value, even if your underlying data structure supports it (provided you don&#39;t blindly port <code>numeric</code>&#39;s division operators, etc.). But if you&#39;d rather not worry about any of this, you can just hijack <code>bigint</code> instead; nothing about this approach is specific to <code>numeric</code>."}, {"owner": {"reputation": 15476, "user_id": 1104979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/289c98242aae94f44939bf6544f70ebc?s=128&d=identicon&r=PG", "display_name": "Nick Barnes", "link": "https://stackoverflow.com/users/1104979/nick-barnes"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1550162563, "post_id": 54676425, "comment_id": 96177879, "body": "As for the mechanics of spending 0.2cp, I&#39;m sure someone over at <a href=\"https://rpg.stackexchange.com/\">rpg.se</a> is willing to explain it in excruciating detail ;)"}], "tags": [], "owner": {"reputation": 15476, "user_id": 1104979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/289c98242aae94f44939bf6544f70ebc?s=128&d=identicon&r=PG", "display_name": "Nick Barnes", "link": "https://stackoverflow.com/users/1104979/nick-barnes"}, "is_accepted": true, "score": 1, "last_activity_date": 1550156690, "last_edit_date": 1550156690, "creation_date": 1550080038, "answer_id": 54676425, "question_id": 54674045, "link": "https://stackoverflow.com/questions/54674045/postgresql-corrupt-data-in-input-function-of-custom-base-data-type/54676425#54676425", "title": "Postgresql corrupt data in input function of custom base data type", "body": "<p><a href=\"https://www.postgresql.org/docs/current/sql-createtype.html\" rel=\"nofollow noreferrer\"><code>CREATE TYPE</code></a> takes a ton of optional parameters, some of them relating to the physical layout of your data, and these need to agree with the structures your I/O functions are expecting/returning.</p>\n\n<p>The docs don't seem to mention the defaults for these parameters, but the error mentioning \"compressed data\" suggests that your values are being <a href=\"https://www.postgresql.org/docs/current/storage-toast.html\" rel=\"nofollow noreferrer\">TOASTed</a>, i.e. that <code>INTERNALLENGTH</code> is defaulting to <code>VARIABLE</code>. Such types are expected to start with a <code>varlena</code> header describing the total length of the value, which is certainly not what you're returning (though Postgres would still interpret it as such, leading to all kinds of odd behaviour, not to mention saving huge slabs of random bytes to your table, and probably segfaulting sooner or later...).</p>\n\n<p>If your aim is to create a type which is internally represented as a simple integer (fixed-length, pass-by-value, etc.), you can just copy the characteristics of the built-in type:</p>\n\n<pre><code>CREATE TYPE gp (input=gp_input, output=gp_output, like=integer);\n</code></pre>\n\n<p>You should then be able to do away with the <code>palloc()</code> and the pointers, fetch your argument with <code>PG_GETARG_INT32(0)</code>, and just return <code>PG_RETURN_INT32(amt)</code>.</p>\n\n<hr>\n\n<p>If you want all of the behaviour of a built-in type, but with a custom display format, it's a lot easier than you might expect.</p>\n\n<p>The internal C routines for something like <code>numeric</code> are identical to the ones you'd write to implement such a type on your own. As as result, you can create your own version of such a built-in type simply by copy-pasting its SQL-level definitions, and leaving the functions pointing to the existing C handlers to do all of the actual work:</p>\n\n<pre><code>CREATE TYPE gp;\nCREATE FUNCTION gp_in(cstring,oid,integer) RETURNS gp LANGUAGE internal IMMUTABLE STRICT PARALLEL SAFE AS 'numeric_in';\nCREATE FUNCTION gp_out(gp) RETURNS cstring LANGUAGE internal IMMUTABLE STRICT PARALLEL SAFE AS 'numeric_out';\nCREATE FUNCTION gp_send(gp) RETURNS bytea LANGUAGE internal IMMUTABLE STRICT PARALLEL SAFE AS 'numeric_send';\nCREATE FUNCTION gp_recv(internal,oid,integer) RETURNS gp LANGUAGE internal IMMUTABLE STRICT PARALLEL SAFE AS 'numeric_recv';\nCREATE FUNCTION gptypmodin(cstring[]) RETURNS integer LANGUAGE internal IMMUTABLE STRICT PARALLEL SAFE AS 'numerictypmodin';\nCREATE FUNCTION gptypmodout(integer) RETURNS cstring LANGUAGE internal IMMUTABLE STRICT PARALLEL SAFE AS 'numerictypmodout';\nCREATE TYPE gp (\n  INPUT = gp_in,\n  OUTPUT = gp_out,\n  RECEIVE = gp_recv,\n  SEND = gp_send,\n  TYPMOD_IN = gptypmodin,\n  TYPMOD_OUT = gptypmodout,\n  LIKE = numeric\n);\n</code></pre>\n\n\n\n<pre><code>CREATE TABLE t (x gp(10,2), y gp);\nINSERT INTO t VALUES ('123.45', '2387456987623498765324.2837654987364987269837456981');\nSELECT * FROM t;\n\n   x    |                          y\n--------+-----------------------------------------------------\n 123.45 | 2387456987623498765324.2837654987364987269837456981\n</code></pre>\n\n<p>From there, you can replace the input/output handlers with your own C functions, copy-pasting the code from the <a href=\"https://github.com/postgres/postgres/blob/REL_11_2/src/backend/utils/adt/numeric.c#L569\" rel=\"nofollow noreferrer\">internal functions</a> as a starting point. The simplest approach in your case is probably to transform your DnD currency string into a simple decimal string at the start of the function, and let the rest of the code worry about the messy details of converting it to a <code>Numeric</code>.</p>\n\n<p>If you want arithmetic/comparison operators, index opclasses, min/max aggregates, typecasts, etc., you can copy-paste those definitions from the original type as well, as long as you don't mess with the internal binary format.</p>\n"}], "owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 54676425, "answer_count": 1, "score": 3, "last_activity_date": 1550156690, "creation_date": 1550072491, "last_edit_date": 1550072858, "question_id": 54674045, "link": "https://stackoverflow.com/questions/54674045/postgresql-corrupt-data-in-input-function-of-custom-base-data-type", "title": "Postgresql corrupt data in input function of custom base data type", "body": "<p>I've created a custom type, <code>gp</code> to model the DND 5e currency system. I have defined custom input and output functions in <code>gp.c</code>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include \"postgres.h\"\n#include &lt;string.h&gt;\n#include \"fmgr.h\"\n\n#include &lt;stdio.h&gt;\n\n#ifdef PG_MODULE_MAGIC\nPG_MODULE_MAGIC;\n#endif\n\nstatic const char* inputFormat = \" %i %s2 \";\nstatic const char* invalidFormat = \"invalid input syntax for gp: \\\"%s\\\"\";\n\nPG_FUNCTION_INFO_V1(gp_input);\n\nDatum gp_input(PG_FUNCTION_ARGS) {\n    char* raw = PG_GETARG_CSTRING(0);\n    int32 amt;\n    char unit[3];\n\n    if (sscanf(raw, inputFormat, &amp;amt, &amp;unit[0]) != 2) {\n        ereport(ERROR, (errcode(ERRCODE_INVALID_TEXT_REPRESENTATION), errmsg(invalidFormat, raw)));\n    }\n\n    switch(unit[1]) {\n        case 'p':\n            break;\n        default:\n            ereport(ERROR, (errcode(ERRCODE_INVALID_TEXT_REPRESENTATION), errmsg(invalidFormat, raw)));\n    }\n    switch(unit[0]) {\n        case 'c':\n            break;\n        case 's':\n            amt *= 10;\n            break;\n        case 'e':\n            amt *= 50;\n            break;\n        case 'g':\n            amt *= 100;\n            break;\n        case 'p':\n            amt *= 1000;\n            break;\n        default:\n            ereport(ERROR, (errcode(ERRCODE_INVALID_TEXT_REPRESENTATION), errmsg(invalidFormat, raw)));\n    }\n\n    int32* result = (int32*)palloc(sizeof(int32));\n    *result = amt;\n\n    PG_RETURN_POINTER(result);\n}\n\nPG_FUNCTION_INFO_V1(gp_output);\n\nDatum gp_output(PG_FUNCTION_ARGS) {\n    int32* raw = (int32*)PG_GETARG_POINTER(0);\n    int32 val = *raw;\n    unsigned int bufsz = sizeof(unsigned char)*9 + 2;// allow up to 999999999[pgsc]p\n    char* buf = (char*) palloc(bufsz+1); // +1 b/c '\\0'\n\n    if (val &gt;= 10 &amp;&amp; val % 10 == 0) {\n        val /= 10;\n\n        if (val &gt;= 10 &amp;&amp; val % 10 == 0) {\n            val /= 10;\n\n            if (val &gt;= 10 &amp;&amp; val % 10 == 0) {\n                val /= 10;\n\n                if (sprintf(buf, \"%dpp\", val) &lt;= 0) {\n                    ereport(ERROR, (errcode(ERRCODE_UNTRANSLATABLE_CHARACTER), errmsg(\"Bad value for gp\")));\n                }\n            }\n            else {\n                if (sprintf(buf, \"%dgp\", val) &lt;= 0) {\n                    ereport(ERROR, (errcode(ERRCODE_UNTRANSLATABLE_CHARACTER), errmsg(\"Bad value for gp\")));\n                }\n            }\n        }\n        else {\n            if (sprintf(buf, \"%dsp\", val) &lt;= 0) {\n                ereport(ERROR, (errcode(ERRCODE_UNTRANSLATABLE_CHARACTER), errmsg(\"Bad value for gp\")));\n            }\n        }\n    }\n    else {\n        if (sprintf(buf, \"%dcp\", val) &lt;= 0) {\n            ereport(ERROR, (errcode(ERRCODE_UNTRANSLATABLE_CHARACTER), errmsg(\"Bad value for gp\")));\n        }\n    }\n    PG_RETURN_CSTRING(buf);\n}\n</code></pre>\n\n<p>I know I'm not checking that the number is out-of-bounds or that the stored value fits in the buffer, but I'm not hitting that issue yet. My problem is that postgres seems to be editing, and in some cases corrupting, the values that I'm storing. I have this test SQL file:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>DROP TYPE IF EXISTS gp CASCADE;\nDROP TABLE IF EXISTS test;\n\nCREATE TYPE gp;\n\nCREATE FUNCTION gp_input(cstring) RETURNS gp AS '$libdir/gp.so' LANGUAGE C IMMUTABLE STRICT;\nCREATE FUNCTION gp_output(gp) RETURNS cstring AS '$libdir/gp.so' LANGUAGE C IMMUTABLE STRICT;\n\nCREATE TYPE gp (input=gp_input, output=gp_output);\n\nCREATE TABLE test (val gp);\n\nINSERT INTO test VALUES ('12sp'), ('100gp'), ('1000cp'), ('101cp');\nSELECT * FROM test;\nINSERT INTO test VALUES ('101sp');\n</code></pre>\n\n<p>The output of that <code>SELECT</code> is:</p>\n\n<pre><code>  val  \n-------\n 12sp\n 10pp\n 1pp\n 212cp\n(4 rows)\n</code></pre>\n\n<p>So we can see that all values were properly stored and represented except for the last one: <code>101cp</code> gets stored as a pointer to the <code>int32</code> value <code>212</code>. Using <code>ereport</code> warnings, I was able to determine that right before the return in the input function, <code>result</code> points to the correct value: <code>101</code>. However, the pointer passed as an argument to my output function points to a value I didn't store: <code>212</code>. Somewhere between the end of my input code and the beginning of my output code, postgres corrupted that value. This <em>always</em> happens with the input string <code>101cp</code>, independent of the table's state or any other values being inserted at the same time.</p>\n\n<p>But now the really weird part; that last <code>INSERT</code> crashes the client. Upon parsing that gp value, it prints the error:</p>\n\n<pre><code>psql:./gptest.sql:15: ERROR:  compressed data is corrupted\nLINE 1: INSERT INTO test VALUES ('101sp');\n                                 ^\n</code></pre>\n\n<p>This <em>always</em> happens with the value <code>101sp</code>, regardless of table state or any other values being inserted alongside it. Using <code>ereport</code> warnings, I was able to see that right before the return statement, <code>result</code> points to the correct value: <code>1010</code>. That also means that the crash is happening in that return macro expansion or in some under-the-hood code.</p>\n\n<p>So I truly have no idea what's going on. I'm doing <code>palloc</code> so overwriting the memory shouldn't be allowed, and I can't think of any reason for values containing <code>101</code> to always have problems - and different problems depending on the units. An <code>int32</code> should be capable of storing the small values I'm testing, so it's not that. Idk if this is how it's supposed to be implemented, but I have checked and the pointer being passed to the output is NOT the same as the address of the <code>result</code> pointer for any of these values, so I assume it's doing some kind of <code>memcpy</code> incorrectly under the hood, but then idk how anyone can be expected to define a custom base data type.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1550071831, "post_id": 54673760, "comment_id": 96137281, "body": "You have <code>struct contact *con</code> defined twice. Is this your intention?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550071908, "post_id": 54673760, "comment_id": 96137330, "body": "You allocate new memory for <code>con</code> every time you add a new contact. You need to <a href=\"https://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\"><i>reallocate</i></a> the memory to increase it."}, {"owner": {"reputation": 45, "user_id": 11057286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zF--EUFCTmQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNt-1sQ_Hye1LemawbHBZA9A0pEUA/mo/photo.jpg?sz=128", "display_name": "Caty Battjes", "link": "https://stackoverflow.com/users/11057286/caty-battjes"}, "edited": false, "score": 0, "creation_date": 1550072676, "post_id": 54673760, "comment_id": 96137791, "body": "Eugene, I have it defined at the beginning to make it into an array, but without the second definition, the code has more errors."}, {"owner": {"reputation": 45, "user_id": 11057286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zF--EUFCTmQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNt-1sQ_Hye1LemawbHBZA9A0pEUA/mo/photo.jpg?sz=128", "display_name": "Caty Battjes", "link": "https://stackoverflow.com/users/11057286/caty-battjes"}, "edited": false, "score": 0, "creation_date": 1550072700, "post_id": 54673760, "comment_id": 96137813, "body": "Some programmer dude, can you show me how it would look to do that?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11057286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zF--EUFCTmQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNt-1sQ_Hye1LemawbHBZA9A0pEUA/mo/photo.jpg?sz=128", "display_name": "Caty Battjes", "link": "https://stackoverflow.com/users/11057286/caty-battjes"}, "edited": false, "score": 0, "creation_date": 1550073017, "post_id": 54674085, "comment_id": 96137998, "body": "I tried that, but now when printing it shows a bunch of gibberish for both contacts"}, {"owner": {"reputation": 149, "user_id": 7434443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/bqtH2.png?s=128&g=1", "display_name": "bitflip-at", "link": "https://stackoverflow.com/users/7434443/bitflip-at"}, "reply_to_user": {"reputation": 45, "user_id": 11057286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zF--EUFCTmQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNt-1sQ_Hye1LemawbHBZA9A0pEUA/mo/photo.jpg?sz=128", "display_name": "Caty Battjes", "link": "https://stackoverflow.com/users/11057286/caty-battjes"}, "edited": false, "score": 0, "creation_date": 1550073328, "post_id": 54674085, "comment_id": 96138175, "body": "If you get gibberish output you access memory which is either not initialized but is allocated (that&#39;s the case for realloc where no mem is copied). You might check this. Look at every line where you work with the pointer that points to the heap memory."}], "tags": [], "owner": {"reputation": 149, "user_id": 7434443, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/bqtH2.png?s=128&g=1", "display_name": "bitflip-at", "link": "https://stackoverflow.com/users/7434443/bitflip-at"}, "is_accepted": false, "score": 1, "last_activity_date": 1550074297, "last_edit_date": 1550074297, "creation_date": 1550072606, "answer_id": 54674085, "question_id": 54673760, "link": "https://stackoverflow.com/questions/54673760/having-trouble-printing-out-my-structure-array-in-c/54674085#54674085", "title": "Having trouble printing out my structure array in c", "body": "<p>As @Some programmer dude suggested you need to reallocate your array if you want to make it bigger and keep your data.</p>\n\n<p>So essentially something like this </p>\n\n<pre><code>// Records the information given into the structure\n   struct contact *con = (struct contact*)malloc(n*sizeof(struct contact));\n</code></pre>\n\n<p>should be at the start of your <code>main</code> function like so:</p>\n\n<pre><code>// dynamically allocate memory which can hold e.g. 1 struct\nstruct contact *con = malloc(sizeof(struct contact));\n</code></pre>\n\n<p>and when you resize your memory chunk on the heap, that is what malloc does for you, you should resize or <code>realloc</code> it like so:</p>\n\n<pre><code>// grow array \ncon = realloc(con, n * sizeof(struct concat));\n</code></pre>\n\n<p>Read the man page for further Information: <a href=\"https://linux.die.net/man/3/realloc\" rel=\"nofollow noreferrer\">realloc man page</a>, or type <code>man 3 realloc</code> or <code>man realloc</code> on your terminal.</p>\n\n<p><strong>EDIT</strong>\nAs @dbush suggested</p>\n\n<p>You declare 2 variables named con. At the start <code>struct contact *con[200];</code> and in the switch statement you allocate memory and save it into <code>struct concat *con</code>. </p>\n\n<p>So the reason why you still get undefined results on option \"3\" (show all contact) is, that you actually are reading the contacts from the array struct <code>contact *con[200];</code> and not from the memory pointed by <code>struct contact *con;</code></p>\n\n<p>Greetings</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1550073689, "creation_date": 1550073689, "answer_id": 54674464, "question_id": 54673760, "link": "https://stackoverflow.com/questions/54673760/having-trouble-printing-out-my-structure-array-in-c/54674464#54674464", "title": "Having trouble printing out my structure array in c", "body": "<p>You're defining a new variable called <code>con</code> inside of your <code>switch</code> statement.  This variable <strong>mask</strong> the variable of the same name defined at the top of the function.  This is the one you're adding a record to.</p>\n\n<p>When you later go to print the list, it's actually reading from this inner <code>con</code>.  However, since you're re-entering the <code>switch</code> statement, the variable's contents is uninitialized because you jump over the initializer because of the switch and you invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  You get \"lucky\" that you're able to print the last instance read in, probably because the variable still happened to contain the old value from the last iteration.</p>\n\n<p>Also, the outer version of <code>con</code> is declared as an <em>array of pointers</em>.  You probably want just a pointer here so it can point to a dynamically allocated array.</p>\n\n<p>So define <code>con</code> like this:</p>\n\n<pre><code>struct contact *con = NULL;\n</code></pre>\n\n<p>And change the \"add\" case to not define the variable.  Also, you don't need separate variables to read in the values.  You can read them directly into an instance of the struct:</p>\n\n<pre><code>            n++;\n            con = realloc(n*sizeof(struct contact));\n\n            printf(\"\\nYou chose to add a contact.\");\n            printf(\"\\nFirst name: \");\n            scanf(\"%s\", con[n-1].FirstName);\n            printf(\"\\nLast name: \");\n            scanf(\"%s\", con[n-1].LastName);\n            printf(\"\\nPhone number (Numbers only): \");\n            scanf(\"%d\", &amp;con[n-1].PhoneNum );\n            printf(\"\\nRecord added to the phone book\");\n\n            printf(\"\\nn is %d\", n);\n\n            printf(\"\\nNew contact:\");\n            printf(\"\\nFirst name: %s\", con[n-1].FirstName);\n            printf(\"\\nLast name: %s\", con[n-1].LastName);\n            printf(\"\\nPhone number: %d\", con[n-1].PhoneNum);  \n            printf(\"\\n\");\n</code></pre>\n\n<p>Then you'll also need to move <code>a</code> down to the \"show\" portion:</p>\n\n<pre><code>for( int a = 0; a &lt; (n - 1); a++){\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 11057286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zF--EUFCTmQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNt-1sQ_Hye1LemawbHBZA9A0pEUA/mo/photo.jpg?sz=128", "display_name": "Caty Battjes", "link": "https://stackoverflow.com/users/11057286/caty-battjes"}, "edited": false, "score": 0, "creation_date": 1550081473, "post_id": 54675677, "comment_id": 96142791, "body": "Thank you, I went through the code you fixed and it worked out for me this time!"}], "tags": [], "owner": {"reputation": 1190, "user_id": 3344587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d246b94ff48978d81b706630d0102196?s=128&d=identicon&r=PG&f=1", "display_name": "Loc Tran", "link": "https://stackoverflow.com/users/3344587/loc-tran"}, "is_accepted": true, "score": 3, "last_activity_date": 1550077253, "creation_date": 1550077253, "answer_id": 54675677, "question_id": 54673760, "link": "https://stackoverflow.com/questions/54673760/having-trouble-printing-out-my-structure-array-in-c/54675677#54675677", "title": "Having trouble printing out my structure array in c", "body": "<p>There are some issues on your code:</p>\n\n<p>1> Scope of variable a, b, con should be in main function, you are override the scope of variable a, b from main function scope to in-case scope by re-declare them inside case block code.</p>\n\n<pre><code>int b = b+1;\nint a = (n-1);\nstruct contact *con = (struct contact*)malloc(n*sizeof(struct contact));\n</code></pre>\n\n<p>In case block code, please just assign them new value:</p>\n\n<pre><code>b = b+1;\na = (n-1);\ncon = (struct contact*)malloc(n*sizeof(struct contact));   \n</code></pre>\n\n<p>2> The <strong>con</strong> pointer should be changed from </p>\n\n<pre><code>struct contact *con[200];\n</code></pre>\n\n<p>by define a initialized size for it. and if the size is out of range, we need to realloc the <strong>con</strong> in case of add new item:</p>\n\n<pre><code>int size = 200;\nstruct contact *con = (struct contact *)malloc(size * sizeof(struct contact));\n\n// in case of the size of out of range\nif (n &gt;= size)\n{\n   size = size * 2;\n   con = (struct contact*)realloc(con, size * sizeof(struct contact));\n}\n</code></pre>\n\n<p>Here is my solution:    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct contact {                // Data structure that holds contact information \n    char FirstName[10];         // Array for first name\n    char LastName[10];          // Array for last name\n    int PhoneNum;               // Phone number\n};\n\nint main() {\n\n    // Setting up variables\n    int Function = 0;\n    int Choice = 0;\n    char FName[200][10];\n    char LName[200][10];\n    int PNum = 0;\n    int n = 1;\n    int size = 200;\n    struct contact *con = (struct contact *)malloc(size * sizeof(struct contact));\n    int b = 0, a = 0;\n\n    do {     // Will loop through the main function until the user decides to exit the program\n\n        // Prints out the main menu of the phone book\n        printf(\"\\nPhone Book\");\n        printf(\"\\n[1] Add a contact\");\n        printf(\"\\n[2] Delete a contact\");\n        printf(\"\\n[3] Show contacts\");\n        printf(\"\\n[4] Exit program\");\n        printf(\"\\n\\nWhat function would you like to use?\\n\");       // Asks for user input\n        scanf(\"%d\", &amp;Choice);\n\n        switch (Choice) {\n        case 1:     // Case to add a contact into the phone book\n            printf(\"\\nYou chose to add a contact.\");\n            printf(\"\\nFirst name: \");\n            scanf(\"%s\", &amp;FName[b]);\n            printf(\"\\nLast name: \");\n            scanf(\"%s\", &amp;LName[b]);\n            printf(\"\\nPhone number (Numbers only): \");\n            scanf(\"%d\", &amp;PNum);\n            printf(\"\\nRecord added to the phone book\");\n\n            // Records the information given into the structure\n            if (n &gt;= size)\n            {\n                size = size * 2;\n                con = (struct contact*)realloc(con, size * sizeof(struct contact));\n            }\n            a = (n - 1);\n\n            printf(\"\\na is %d\", a);\n\n            strcpy(con[a].FirstName, FName[b]);\n            strcpy(con[a].LastName, LName[b]);\n            con[a].PhoneNum = PNum;\n\n            b = (b + 1);\n            n++;\n\n            printf(\"\\nn is %d\", n);\n\n            // Prints out the given information\n            printf(\"\\nNew contact:\");\n            printf(\"\\nFirst name: %s\", con[a].FirstName);\n            printf(\"\\nLast name: %s\", con[a].LastName);\n            printf(\"\\nPhone number: %d\", con[a].PhoneNum);\n            printf(\"\\n\");\n            break;\n        case 2:     // Case to delete a contact from the phone book\n            printf(\"\\nYou chose to delete a contact.\");\n            break;\n        case 3:     // Case to see all of the entered contacts\n            printf(\"\\nYou chose to show the contacts.\");\n            for (a = 0; a &lt; (n - 1); a++) {\n                printf(\"\\nContact #%d\", a);\n                printf(\"\\nFirst name: %s\", con[a].FirstName);\n                printf(\"\\nLast name: %s\", con[a].LastName);\n                printf(\"\\nPhone number: %d\", con[a].PhoneNum);\n                printf(\"\\n\");\n            }\n            break;\n        case 4:\n            printf(\"Goodbye!\");\n            break;\n        }\n    } while (Choice != 4);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11057286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zF--EUFCTmQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNt-1sQ_Hye1LemawbHBZA9A0pEUA/mo/photo.jpg?sz=128", "display_name": "Caty Battjes", "link": "https://stackoverflow.com/users/11057286/caty-battjes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "accepted_answer_id": 54675677, "answer_count": 3, "score": 3, "last_activity_date": 1550077253, "creation_date": 1550071724, "last_edit_date": 1550072553, "question_id": 54673760, "link": "https://stackoverflow.com/questions/54673760/having-trouble-printing-out-my-structure-array-in-c", "title": "Having trouble printing out my structure array in c", "body": "<p>My current project in class is to make a program that acts as a phone book using structs. I have coded out the 'add contacts' function and the 'show contacts' function, but when I have more than one contact, the 'show contacts' function shows gibberish for all of the contacts expect for the most recent one. Can anybody help me find the problem?</p>\n\n<p>Here is my current code. If anything is confusing let me know and I will try to respond as fast as I can.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct contact {                // Data structure that holds contact information \n    char FirstName[10];         // Array for first name\n    char LastName[10];          // Array for last name\n    int PhoneNum;               // Phone number\n};\n\nint main (){\n\n    // Setting up variables\n    int Function = 0;\n    int Choice = 0;\n    char FName[200][10];\n    char LName[200][10];\n    int PNum = 0;\n    int n = 1;\n    struct contact *con[200];\n    int b = 0;\n\n    do{     // Will loop through the main function until the user decides to exit the program\n\n        // Prints out the main menu of the phone book\n        printf(\"\\nPhone Book\");\n        printf(\"\\n[1] Add a contact\");\n        printf(\"\\n[2] Delete a contact\");\n        printf(\"\\n[3] Show contacts\");\n        printf(\"\\n[4] Exit program\");\n        printf(\"\\n\\nWhat function would you like to use?\\n\");       // Asks for user input\n        scanf(\"%d\", &amp;Choice);\n\n        switch(Choice){\n            case 1:     // Case to add a contact into the phone book\n                printf(\"\\nYou chose to add a contact.\");\n                printf(\"\\nFirst name: \");\n                scanf(\"%s\", &amp;FName[b]);\n                printf(\"\\nLast name: \");\n                scanf(\"%s\", &amp;LName[b]);\n                printf(\"\\nPhone number (Numbers only): \");\n                scanf(\"%d\", &amp;PNum);\n                printf(\"\\nRecord added to the phone book\");\n\n                // Records the information given into the structure\n                struct contact *con = (struct contact*)malloc(n*sizeof(struct contact));\n                int a = (n - 1);\n\n                printf(\"\\na is %d\", a);\n\n                strcpy(con[a].FirstName, FName[b]);\n                strcpy(con[a].LastName, LName[b]);\n                con[a].PhoneNum = PNum;\n\n                int b = (b+1);\n                n++;\n\n                printf(\"\\nn is %d\", n);\n\n                // Prints out the given information\n                printf(\"\\nNew contact:\");\n                printf(\"\\nFirst name: %s\", con[a].FirstName);\n                printf(\"\\nLast name: %s\", con[a].LastName);\n                printf(\"\\nPhone number: %d\", con[a].PhoneNum);  \n                printf(\"\\n\");\n                break;\n            case 2:     // Case to delete a contact from the phone book\n                printf(\"\\nYou chose to delete a contact.\");\n                break;\n            case 3:     // Case to see all of the entered contacts\n                printf(\"\\nYou chose to show the contacts.\");\n                for(a = 0; a &lt; (n - 1); a++){\n                    printf(\"\\nContact #%d\", a);\n                    printf(\"\\nFirst name: %s\", con[a].FirstName);\n                    printf(\"\\nLast name: %s\", con[a].LastName);\n                    printf(\"\\nPhone number: %d\", con[a].PhoneNum);  \n                    printf(\"\\n\");               \n                }\n                break;\n            case 4:\n                printf(\"Goodbye!\");\n                break;\n        }\n    }while (Choice != 4);\n    return 0;   \n}\n</code></pre>\n\n<p>This is the output I get when I run my code.</p>\n\n<pre><code>Phone Book\n[1] Add a contact\n[2] Delete a contact\n[3] Show contacts\n[4] Exit program\n\nWhat function would you like to use?\n1\n\nYou chose to add a contact.\nFirst name: Test\n\nLast name: 1\n\nPhone number (Numbers only): 1234567\n\nRecord added to the phone book\na is 0\nn is 2\nNew contact:\nFirst name: Test\nLast name: 1\nPhone number: 1234567\n\nPhone Book\n[1] Add a contact\n[2] Delete a contact\n[3] Show contacts\n[4] Exit program\n\nWhat function would you like to use?\n1\n\nYou chose to add a contact.\nFirst name: test\n\nLast name: 2\n\nPhone number (Numbers only): 8901234\n\nRecord added to the phone book\na is 1\nn is 3\nNew contact:\nFirst name: test\nLast name: 2\nPhone number: 8901234\n\nPhone Book\n[1] Add a contact\n[2] Delete a contact\n[3] Show contacts\n[4] Exit program\n\nWhat function would you like to use?\n3\n\nYou chose to show the contacts.\nContact #0\nFirst name: Pq\nLast name: q\nPhone number: 1095516483\n\nContact #1\nFirst name: test\nLast name: 2\nPhone number: 8901234\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "compiler-errors"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 7, "creation_date": 1550068881, "post_id": 54672800, "comment_id": 96135291, "body": "nested functions are not standard - just saying."}, {"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "edited": false, "score": 1, "creation_date": 1550069136, "post_id": 54672800, "comment_id": 96135461, "body": "...meaning: move the function five() out of main() -- place it before main, or declare it before main and place it after."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 4, "creation_date": 1550069269, "post_id": 54672800, "comment_id": 96135556, "body": "<i>Clearly something is wrong with my compiler</i>  This is wrong 99.999% of the time."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1550069571, "post_id": 54672800, "comment_id": 96135752, "body": "<i>because there is no mistake in the program</i> Yes, there is a mistake."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1550069926, "post_id": 54672800, "comment_id": 96136028, "body": "You have not found a bug in the compiler; your code indeed has a mistake.  Standard C does not allow &quot;nested&quot; function definitions (you cannot define a function within a function).  You need to move the definition of <code>five</code> out of <code>main</code>."}, {"owner": {"reputation": 99, "user_id": 9936511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5058e6c689ed5ccaa57806a54384feac?s=128&d=identicon&r=PG&f=1", "display_name": "mand", "link": "https://stackoverflow.com/users/9936511/mand"}, "edited": false, "score": 0, "creation_date": 1550070601, "post_id": 54672800, "comment_id": 96136496, "body": "I am so sorry for saying that! I really could not see the mistake, and it DID compile on onlinegdb, and using gcc, that is why I thought it was the compiler..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550070675, "post_id": 54672800, "comment_id": 96136537, "body": "@mand gcc allows nested functions as an extension"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1550071018, "post_id": 54672800, "comment_id": 96136771, "body": "@mand - GCC has several extensions available, including recognizing nested functions, that will confuse those just beginning to learn C.  I suggest that when using GCC for learning purposes, or for creating portable code, that those extensions that cause it to behave in non-standard ways be suppressed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1550071719, "post_id": 54672800, "comment_id": 96137224, "body": "If you are learning programming, always compile gcc with <code>gcc -std=c11 -pedantic-errors -Wall -Wextra</code>. Then you get lots of warnings (good) and pure standard C, no extensions."}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1550070582, "post_id": 54672901, "comment_id": 96136478, "body": "Your post clearly contains a syntactically correct form of the program.  Do you think without explaining, that the asker of the question understands why yours is correct, and theirs is not?  (A sentence explaining the reason why yours is correct would increase the value of your answer.)"}], "tags": [], "owner": {"reputation": 46, "user_id": 11055816, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vFGL3fatPvw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMtUdHEqJayrj6zJWxM2kXAz2bNJg/mo/photo.jpg?sz=128", "display_name": "Ahmed Soliman", "link": "https://stackoverflow.com/users/11055816/ahmed-soliman"}, "is_accepted": false, "score": 3, "last_activity_date": 1550069155, "creation_date": 1550069155, "answer_id": 54672901, "question_id": 54672800, "link": "https://stackoverflow.com/questions/54672800/error-c2143-syntax-error-missing-before-in-c/54672901#54672901", "title": "error C2143: syntax error: missing &#39;;&#39; before &#39;{&#39; in C", "body": "<p>Is this what you want to achieve?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint five() {\n        return 5;\n    }\nint main() {\n    for (int i = 0; i &lt; 10; i++) {\n    printf(\"%d \", five());\n    }\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 2, "last_activity_date": 1550069196, "creation_date": 1550069196, "answer_id": 54672922, "question_id": 54672800, "link": "https://stackoverflow.com/questions/54672800/error-c2143-syntax-error-missing-before-in-c/54672922#54672922", "title": "error C2143: syntax error: missing &#39;;&#39; before &#39;{&#39; in C", "body": "<p>Properly formatted, with some start-end comments for clarity.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint five()   /* Start of Function FIVE */\n{\n    return 5;\n}            /* End of Function FIVE */\n\n\n\nint main()   /* Start of MAIN */\n{\n    for (int i = 0; i &lt; 10; i++)\n    {\n        printf(\"%d \", five());\n    }\n\n    return 0;\n}             /* End of MAIN */\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1550070563, "post_id": 54673082, "comment_id": 96136468, "body": "BTW: though legal inside other functions, function declarations/prototypes are usually provided outside other functions."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1550158607, "post_id": 54673082, "comment_id": 96175480, "body": "nope... if you want to provide the prototype and make it local to the function body.  I&#39;m afraid then you have to use it local.  This is valid syntax since K&amp;R 1st ed. and continues to be valid.  Local scope is your friend, don&#39;t overavoid it."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1550159290, "post_id": 54673082, "comment_id": 96175903, "body": "you have not understood me... I mean if you want the declaration of an external function <i>to be local to the body of the function only</i> (because you want to be sure you use it only there and get a warning if you use it elsewhere in the same compilation unit) then you need to reduce the scope of the prototype declaration to a single function body (or even narrower)  I have seen that phrasing in much legacy code."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1550160361, "post_id": 54673082, "comment_id": 96176555, "body": "You&#39;re right @LuisColorado. A function declaration/prototype inside another function limits the scope to the function itself. It&#39;s legal but seldom used."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 3, "last_activity_date": 1550069692, "creation_date": 1550069692, "answer_id": 54673082, "question_id": 54672800, "link": "https://stackoverflow.com/questions/54672800/error-c2143-syntax-error-missing-before-in-c/54673082#54673082", "title": "error C2143: syntax error: missing &#39;;&#39; before &#39;{&#39; in C", "body": "<p>The compiler works \"token\" by \"token\". After <code>int main() {</code> it sees the tokens <code>int</code>, <code>five</code>, <code>(</code> and <code>)</code> which are part of a declaration of function five (returning <code>int</code> and accepting an unspecified, but fixed, number of arguments). This declaration is completed with the token <code>;</code> but the next available token is <code>{</code> which makes the whole thing invalid syntax.</p>\n\n<p>TLDR: nested functions are illegal in C.</p>\n"}], "owner": {"reputation": 99, "user_id": 9936511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5058e6c689ed5ccaa57806a54384feac?s=128&d=identicon&r=PG&f=1", "display_name": "mand", "link": "https://stackoverflow.com/users/9936511/mand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1550070542, "creation_date": 1550068842, "last_edit_date": 1550070542, "question_id": 54672800, "link": "https://stackoverflow.com/questions/54672800/error-c2143-syntax-error-missing-before-in-c", "title": "error C2143: syntax error: missing &#39;;&#39; before &#39;{&#39; in C", "body": "<p>Currently I am experiencing a very odd C error. When I try to compile the following .c code:  </p>\n\n<pre><code> #include &lt;stdio.h&gt;\nint main() {\n\n    int five() {\n        return 5;\n}\n\nfor (int i = 0; i &lt; 10; i++) {\n    printf(\"%d \", five());\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>, I obtain the following error:</p>\n\n<pre><code>error C2143: syntax error: missing ';' before '{' in C\n</code></pre>\n\n<p>I think something is wrong with my compiler but what?</p>\n\n<p>I am using Visual Studio Community 2017 on Windows 10 and its developer command line. So my compiler is cl.</p>\n\n<p>Glad to hear if someone has a clue.</p>\n"}, {"tags": ["c", "stack", "free"], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1550154287, "post_id": 54672828, "comment_id": 96172605, "body": "So the reason I don&#39;t need to free(st-&gt;top); is because st-&gt;top=st-&gt;base; after I pop all the elements in stack??"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1550154595, "post_id": 54672828, "comment_id": 96172821, "body": "@Liu If the stack is empty then yes they are the same, so you don&#39;t want to free twice.  But even if the stack isn&#39;t empty you don&#39;t want to do that.  In that case <code>st-&gt;top</code> would point somewhere in the middle of the array, which is not an address returned by <code>malloc</code> or <code>realloc</code>."}, {"owner": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1550155746, "post_id": 54672828, "comment_id": 96173602, "body": "if you free the stack st, you only free the first address of st or the whole array??"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1550155871, "post_id": 54672828, "comment_id": 96173685, "body": "@Liu If you tell <code>malloc</code> to allocate for example 100 bytes and it returns address 0x1234, when you pass 0x1234 to <code>free</code> it frees the 100 bytes it gave you."}, {"owner": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1550156237, "post_id": 54672828, "comment_id": 96173966, "body": "so in my case, if pointer top is in the middle of the array,  and after I freed base, top is freed as well?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1550156373, "post_id": 54672828, "comment_id": 96174076, "body": "@Liu It&#39;s not proper to say that <code>top</code> is fre&#39;ed because it doesn&#39;t point to an address that was returned by <code>malloc</code>, but yes the memory it points to has already been fre&#39;ed."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1550068924, "creation_date": 1550068924, "answer_id": 54672828, "question_id": 54672712, "link": "https://stackoverflow.com/questions/54672712/free-the-stack-implemented-in-c/54672828#54672828", "title": "Free the stack implemented in C", "body": "<p>What you have is correct in terms of <code>malloc</code> and <code>free</code>.</p>\n\n<p>You should only pass to <code>free</code> what was returned from <code>malloc</code> or <code>realloc</code>.  You allocate space for the struct and for the stack and you free both, so you're not leaking any memory.</p>\n\n<p>You don't want to <code>free(st)</code> first because after doing so the memory that <code>st</code> was pointing to is no longer valid and you can't subsequently <code>free(st-&gt;base)</code> safely.  Also, because <code>free</code> knows nothing about the contents of the given memory, it doesn't attempt to free any pointers that the memory might contain.  So just calling <code>free(st)</code> leaks the memory in <code>st-&gt;base</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1550069063, "creation_date": 1550069063, "answer_id": 54672872, "question_id": 54672712, "link": "https://stackoverflow.com/questions/54672712/free-the-stack-implemented-in-c/54672872#54672872", "title": "Free the stack implemented in C", "body": "<p>Every allocation should be paired with a corresponding <code>free</code>, so in your case that means freeing both <code>st-&gt;base</code> and <code>st</code> (in that order).  But your program performs its frees only immediately prior to termination, and anything it does not free will be reclaimed by the OS when the program does terminate.  A memory usage analyzer such as Valgrind could detect the difference for you, but in practice it does not matter.</p>\n"}, {"comments": [{"owner": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1550154297, "post_id": 54672883, "comment_id": 96172614, "body": "So the reason I don&#39;t need to free(st-&gt;top); is because st-&gt;top=st-&gt;base; after I pop all the elements in stack??"}, {"owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "reply_to_user": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "edited": false, "score": 0, "creation_date": 1550182726, "post_id": 54672883, "comment_id": 96186813, "body": "I have not examined all your code so closely, but have examined only the two lines. Unfortunately, though I had some time yesterday, I shall have no more time available during the next week, but someone else might advise you. Good luck."}], "tags": [], "owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "is_accepted": false, "score": 1, "last_activity_date": 1550070362, "last_edit_date": 1550070362, "creation_date": 1550069094, "answer_id": 54672883, "question_id": 54672712, "link": "https://stackoverflow.com/questions/54672712/free-the-stack-implemented-in-c/54672883#54672883", "title": "Free the stack implemented in C", "body": "<p>Your code is correct. The reverse sequence might work but, if it did, this would be accidental.</p>\n\n<p>The reason is that <code>free(st)</code> deallocates the memory in which the object <code>*st</code> is stored. The pointer <code>st-&gt;base</code> is stored in a part of this very memory. Suppose that some other task, or thread, acquired the same memory as soon as it had been freed. What then? That is, what would happen when <code>free(st-&gt;base)</code> were eventually called?</p>\n\n<p>Answer: what would happen is undefined.</p>\n\n<p>Even if it were still possible to retrieve an address from <code>st-&gt;base</code> (and it might not be possible), that address might have been overwritten by arbitrary data, in which case <code>free(st-&gt;base)</code>&mdash;interpreting the arbitrary data as an address&mdash;would ask the operating system to deallocate ... well, you don't know <em>what</em> it would ask the operating system to deallocate. One should hardly expect good results in this case.</p>\n\n<p>You have done well. Your sequencing is correct.</p>\n\n<p><strong>ADDITIONAL CONSIDERATIONS</strong></p>\n\n<p>For security, modern operating system kernels sometimes automatically overwrite deallocated memory with null or random data. Also, they sometimes revoke a program's access to the hardware <em>page</em> via which deallocated memory had been (virtually) addressed, or tighten the bounds within which access is allowed. Some of these are more likely than others but I have seen at least two of the three occur. The point is that the kernel is free to do such things immediately, sooner, later or not at all, as the kernel prefers, according to the kernel's latest memory management and security algorithms, because your program is not supposed to care what happens to deallocated memory after the program has deallocated it.</p>\n"}], "owner": {"reputation": 343, "user_id": 10905279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67005ead86ba8a7ad9d464e879fbb5e?s=128&d=identicon&r=PG&f=1", "display_name": "Liu", "link": "https://stackoverflow.com/users/10905279/liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 54672828, "answer_count": 3, "score": 2, "last_activity_date": 1550070362, "creation_date": 1550068560, "question_id": 54672712, "link": "https://stackoverflow.com/questions/54672712/free-the-stack-implemented-in-c", "title": "Free the stack implemented in C", "body": "<p>I implement a stack and its functions in C. Now after all the functions were called, I wanted to free the stack.</p>\n\n<p>My question is should I free the base pointer of stack \"st\" first or just directly free the stack \"st\"? Both seems work in my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define init_size 10\n#define increment 1\n\ntypedef struct sqStack\n{\n    int* top;\n    int* base;\n    int stack_size;\n}sqStack;\n\nint init_stack(sqStack* sq)\n{\n    if(sq-&gt;base==NULL)\n    {\n       sq-&gt;base = (int*)malloc(init_size*sizeof(int));\n    }\n    if(sq-&gt;base==NULL) exit(-1);\n    sq-&gt;stack_size=init_size;\n    sq-&gt;top=sq-&gt;base;\n    return 1;\n}\nint push(sqStack* sq, int e)\n{\n    if(sq==NULL) exit(-1);\n\n    if(sq-&gt;top-sq-&gt;base==sq-&gt;stack_size-1)//pointer top reaches the top of the stack\n    {\n        int* q = (int*)realloc(sq-&gt;base,(sq-&gt;stack_size+increment)*sizeof(int));\n        if(q==NULL)  exit(-1);\n            sq-&gt;base=q;\n        sq-&gt;top=sq-&gt;base+sq-&gt;stack_size-1;\n            sq-&gt;stack_size += increment;\n\n    }\n    *sq-&gt;top++=e;\n    return 1;\n}\nint pop(sqStack* sq,int* e)\n{\n    if(sq==NULL) exit(-1);\n    if(sq-&gt;base==sq-&gt;top)  exit(-1);\n    sq-&gt;top--;\n    *e=*sq-&gt;top;\n    sq-&gt;stack_size--;\n    return *e;\n}\nint top(sqStack* sq,int* e)\n{\n    if(sq==NULL) exit(-1);\n    if(sq-&gt;base==sq-&gt;top)  exit(-1);\n    *e=*(sq-&gt;top-1);\n    return *e;\n}\nint empty(sqStack* sq)\n{\n    if(sq-&gt;base==sq-&gt;top) return 1;\n    else return 0;\n}\n\nint main() {\n    sqStack* st= (sqStack*)calloc(1,sizeof(sqStack))  ;\n    int e;\n    init_stack(st);\n    for(int i=0;i&lt;12;i++)\n    {\n        push(st,i+1);\n\n    }\n    for(int i=0;i&lt;12;i++)\n    {\n        printf(\"%d\\n\",top(st,&amp;e));\n        printf(\"%d\\n\",pop(st,&amp;e));\n    }\n    free(st-&gt;base);\n    free(st);\n    return 0;\n}\n</code></pre>\n\n<p>The result is:\n12\n12\n11\n11\n10\n10\n9\n9\n8\n8\n7\n7\n6\n6\n5\n5\n4\n4\n3\n3\n2\n2\n1\n1\neach number locates on a single line.</p>\n"}, {"tags": ["c", "file", "fgets", "puts"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 10, "creation_date": 1550068524, "post_id": 54672664, "comment_id": 96135063, "body": "Check the value returned by <code>fopen</code>, and please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is <code>while ( !feof (file) )</code> always wrong?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "edited": false, "score": 0, "creation_date": 1550074533, "post_id": 54673299, "comment_id": 96138919, "body": "Hey, thanks for your reply. I now get &quot;cannot open exercise1.txt&quot;. Any idea why this might be?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "edited": false, "score": 0, "creation_date": 1550074601, "post_id": 54673299, "comment_id": 96138959, "body": "@OllieParsons that means the file doesn&#39;t exist in the current directory for the program. What is your OS (Windows, a Linux ...) ?"}, {"owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "edited": false, "score": 0, "creation_date": 1550075704, "post_id": 54673299, "comment_id": 96139689, "body": "Using windows and have the file save in the project directory. in the same place as the .sln file."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "edited": false, "score": 0, "creation_date": 1550076130, "post_id": 54673299, "comment_id": 96139964, "body": "@OllieParsons that means the current directory is not the same when you start your program, may be a sub directory bin/debug/release, I do not use Visual Studio. Look at the options to set the directory when you start the program under VisualStudio"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "edited": false, "score": 0, "creation_date": 1550116678, "post_id": 54673299, "comment_id": 96154687, "body": "@OllieParsons Review <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>."}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 2, "last_activity_date": 1550074552, "last_edit_date": 1550074552, "creation_date": 1550070344, "answer_id": 54673299, "question_id": 54672664, "link": "https://stackoverflow.com/questions/54672664/using-fgets-and-puts-to-read-and-print-a-file-not-working/54673299#54673299", "title": "Using fgets and puts to read and print a file not working", "body": "<p>If I modify your program to take into account the remarks of Weather Vane, and I replace your <em>puts</em> by a <em>fputs</em> to not double the \\n (<em>fgets</em> do not the remove the \\n and <em>puts</em> add a \\n) :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n  FILE * fPointer = fopen(\"exercise1.txt\",\"r\");\n\n  if (fPointer == NULL)\n    puts(\"cannot open exercise1.txt\");\n  else {\n    char singleline[150];\n\n    while (fgets(singleline, sizeof(singleline), fPointer))\n      fputs(singleline, stdout);\n\n    fclose(fPointer);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Compilation and execution :</p>\n\n<pre><code>/tmp % gcc -pedantic -Wextra c.c\n/tmp % cp c.c exercise1.txt\n/tmp % ./a.out\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n  FILE * fPointer = fopen(\"exercise1.txt\",\"r\");\n\n  if (fPointer == NULL)\n    puts(\"cannot open exercise1.txt\");\n  else {\n    char singleline[150];\n\n    while (fgets(singleline, sizeof(singleline), fPointer))\n      fputs(singleline, stdout);\n\n    fclose(fPointer);\n  }\n\n  return 0;\n}\n/tmp % \\rm exercise1.txt \n/tmp % ./a.out\ncannot open exercise1.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1550076262, "post_id": 54673705, "comment_id": 96140046, "body": "warning, <code>codesource</code> contains characters, not int, so <code>(codesource [i] = getc(file))</code> values a character and the comparison with EOF may not work. When the file is larger than  <code>codecourse</code> you write out of it. Et tout le monde ne comprend pas le Fran&#231;ais ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550116875, "post_id": 54673705, "comment_id": 96154717, "body": "On platforms with an unsigned <code>char</code>, <code>(codesource [i] = getc(file))!= EOF</code>, code will not exit the loop due to an end-of-file condition as <code>codesource [i]</code> is never a negative like <code>EOF</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 8173450, "user_type": "registered", "profile_image": "https://graph.facebook.com/1221725237950205/picture?type=large", "display_name": "Guermou Di Omar", "link": "https://stackoverflow.com/users/8173450/guermou-di-omar"}, "is_accepted": false, "score": -1, "last_activity_date": 1550116737, "last_edit_date": 1550116737, "creation_date": 1550071550, "answer_id": 54673705, "question_id": 54672664, "link": "https://stackoverflow.com/questions/54672664/using-fgets-and-puts-to-read-and-print-a-file-not-working/54673705#54673705", "title": "Using fgets and puts to read and print a file not working", "body": "<pre><code>int i=0;\nFILE *file;\nfile = fopen(\"code.txt\",\"r\"); //lecture d 'un fichier\nchar codesource[500] = {0};\nif (file == NULL) {\n  printf(\"Erreur d'ouverture\");\n  return 0;\n} \nelse {\n  while((codesource [i] = getc(file))!= EOF) {\n    //printf(\"%c\", codesource [i]);\n    i++;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10585679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72eb79f5d89f4bb53bf3ad1c44c8a8ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Parsons", "link": "https://stackoverflow.com/users/10585679/ollie-parsons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 54673299, "answer_count": 2, "score": 0, "last_activity_date": 1550116737, "creation_date": 1550068409, "question_id": 54672664, "link": "https://stackoverflow.com/questions/54672664/using-fgets-and-puts-to-read-and-print-a-file-not-working", "title": "Using fgets and puts to read and print a file not working", "body": "<p>I wrote this piece if code below to read a text file that says:\nIt was the best of times,\nit was the worst of times,\nit was the age of wisdom.</p>\n\n<p>When I run my code nothing seems to happen. Is there anything you can spot in my code that may cause this issue? (Solution builds with no error or warnings too).\nThanks :)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(void)\n{\nFILE * fPointer;\nfPointer = fopen(\"exercise1.txt\",\"r\");\nchar singleline[150];\n\nwhile (!feof(fPointer))\n{\n    fgets(singleline, 150, fPointer);\n    puts(singleline);\n}\n\nfclose(fPointer);\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "logical-operators"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1550067142, "post_id": 54672173, "comment_id": 96134143, "body": "<code>k</code> isn&#39;t incremented because <code>||</code> short-circuits and doesn&#39;t execute the right hand side"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550067171, "post_id": 54672173, "comment_id": 96134162, "body": "Read about <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\"><i>short-circuit evaluation</i></a>, which is employed by <code>&amp;&amp;</code> and <code>||</code>. And remember that any non-zero value is &quot;true&quot; while only <code>0</code> is &quot;false&quot;."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550067343, "post_id": 54672173, "comment_id": 96134253, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/628526/is-short-circuiting-logical-operators-mandated-and-evaluation-order\" title=\"is short circuiting logical operators mandated and evaluation order\">stackoverflow.com/questions/628526/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550067411, "post_id": 54672173, "comment_id": 96134306, "body": "You should probably read about <a href=\"https://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\"><i>operator precedence</i></a> as well."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550067492, "post_id": 54672173, "comment_id": 96134345, "body": "By the way, a good book or tutorial or class would have mentioned the short-circuit nature of the logical operators, as well as about operator precedence. So please go back to them and reread your books/tutorials/class-notes."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550067802, "post_id": 54672173, "comment_id": 96134564, "body": "just to be sure: you shouldnt write such obfuscated code. Such snippets are good for learning, but once you got it you can stay away from such monster lines. The next one reading the code, might have the same problems you have now"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1550068327, "last_edit_date": 1550068327, "creation_date": 1550067245, "answer_id": 54672268, "question_id": 54672173, "link": "https://stackoverflow.com/questions/54672173/why-isnt-the-variable-being-incremented/54672268#54672268", "title": "Why isn&#39;t the variable being incremented?", "body": "<p><code>i</code> and <code>j</code> are incremented because <code>i</code> needs to be evaluated. <code>j</code> also needs to be evaluated because <code>i</code> is non-zero.</p>\n\n<p>But since this combined expression is non-zero, <code>||</code> short-circuits, and <code>k++</code> is not evaluated or executed.</p>\n\n<p>On the other hand, bitwise operators don't short-circuit. They also don't convert to booleans. If you want to evaluate all conditions and keep the same result you could write</p>\n\n<pre><code>m= (!!++i) &amp; (!!++j) | (!!++k);\n</code></pre>\n\n<p>using the double negation trick to convert integer value to boolean.</p>\n\n<p>Or spare another statement and simplify to (courtesy from user694733):</p>\n\n<pre><code>++i; ++j; ++k;\nm = i &amp;&amp; j || k;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1550071548, "creation_date": 1550071548, "answer_id": 54673704, "question_id": 54672173, "link": "https://stackoverflow.com/questions/54672173/why-isnt-the-variable-being-incremented/54673704#54673704", "title": "Why isn&#39;t the variable being incremented?", "body": "<p>The <code>&amp;&amp;</code> and <code>||</code> operators <em>short-circuit</em> - depending on the value of the left-hand side of the expression, the right hand side may not be evaluated at all.</p>\n\n<p>For the expression <code>a || b</code>, if <code>a</code> is non-zero, then the result of <code>a || b</code> is 1 <em>regardless</em> of the value of <code>b</code>, so <code>b</code> is not evaluated.  For the expression <code>a &amp;&amp; b</code>, if <code>a</code> is zero, then the result of <code>a &amp;&amp; b</code> is zero regardless of the value of <code>b</code>, so <code>b</code> is not evaluated.  </p>\n\n<p>In your case, the result of <code>++i &amp;&amp; ++j</code> is non-zero, so <code>++k</code> is not evaluated.  </p>\n"}], "owner": {"reputation": 15, "user_id": 11056833, "user_type": "registered", "profile_image": "https://graph.facebook.com/2026210797496671/picture?type=large", "display_name": "Nikhil Bhardwaj", "link": "https://stackoverflow.com/users/11056833/nikhil-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 54672268, "answer_count": 2, "score": 1, "last_activity_date": 1550071548, "creation_date": 1550067009, "last_edit_date": 1550067481, "question_id": 54672173, "link": "https://stackoverflow.com/questions/54672173/why-isnt-the-variable-being-incremented", "title": "Why isn&#39;t the variable being incremented?", "body": "<p>Increment operator not working. </p>\n\n<p>I was learning C language expressions. I've also tried different combinations of increment operators (prefix and postfix) on the variables but the output is coming out to be same.  </p>\n\n<pre><code>int i=-3, j=2 ,k=0,m;\n\nm=++i&amp;&amp;++j||++k;\n\nprintf(\"%d%d%d%d\\n\",i,j,k,m);  \n</code></pre>\n\n<p>I expect the output to be <code>-2311</code> but it comes out to be <code>-2301</code>.</p>\n"}, {"tags": ["c", "linux", "malloc", "ram"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1550067140, "post_id": 54672124, "comment_id": 96134141, "body": "The implementation of <code>malloc</code> may get memory from the system by large chunks."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550067146, "post_id": 54672124, "comment_id": 96134147, "body": "The OS doesn&#39;t have to give it the exact amount of memory every time. That would have huge overhead for a program that does a lot of little allocations. Instead, it can just give the program a big chunk of memory and then it doesn&#39;t have to give more until that runs out."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550067208, "post_id": 54672124, "comment_id": 96134184, "body": "every time a process malloc(), it will get a page allocated to it by memory management unit, page size depends on your system configuration. Untill the memory is present in this page it will not increase the size. once it need more than this allocated space again it get a new page. so you are seeing this behavior."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550067463, "post_id": 54672124, "comment_id": 96134331, "body": "you can refer to for paging and dynamic allocation: <a href=\"https://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_chapter/libc_3.html\" rel=\"nofollow noreferrer\">ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_chapter/&hellip;</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1550067727, "post_id": 54672124, "comment_id": 96134506, "body": "There are more sensible ways to get the memory limit than attempt to exhaust it. <code>&#47;proc&#47;meminfo</code> for example."}, {"owner": {"reputation": 29, "user_id": 11027246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qUV0pjOvgxo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPHupdPLwkWtzzgmxRntrbmMYuxiQ/mo/photo.jpg?sz=128", "display_name": "HomuncDev013", "link": "https://stackoverflow.com/users/11027246/homuncdev013"}, "edited": false, "score": 0, "creation_date": 1550078295, "post_id": 54672124, "comment_id": 96141123, "body": "Thank you all for these information"}, {"owner": {"reputation": 29, "user_id": 11027246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qUV0pjOvgxo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPHupdPLwkWtzzgmxRntrbmMYuxiQ/mo/photo.jpg?sz=128", "display_name": "HomuncDev013", "link": "https://stackoverflow.com/users/11027246/homuncdev013"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1550080485, "post_id": 54672124, "comment_id": 96142350, "body": "@eerorika, /proc/meminfo/ does not show the real limit of RAM usage, because the free memory and cached memory change their values"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 11027246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qUV0pjOvgxo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPHupdPLwkWtzzgmxRntrbmMYuxiQ/mo/photo.jpg?sz=128", "display_name": "HomuncDev013", "link": "https://stackoverflow.com/users/11027246/homuncdev013"}, "is_accepted": false, "score": 0, "last_activity_date": 1550228948, "creation_date": 1550228948, "answer_id": 54708026, "question_id": 54672124, "link": "https://stackoverflow.com/questions/54672124/how-to-increment-a-c-programs-memory-ram-using-successive-malloc-function-cal/54708026#54708026", "title": "How to increment a C program&#39;s memory (RAM) using successive malloc function calls", "body": "<p>From some comments, I found out that the implementation of malloc may get memory from the system by large chunks and the OS doesn't have to give it the exact amount of memory every time , by writing in a txt file, the number of allocated bytes,i was able to determine exactly the ram limit.</p>\n"}], "owner": {"reputation": 29, "user_id": 11027246, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qUV0pjOvgxo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPHupdPLwkWtzzgmxRntrbmMYuxiQ/mo/photo.jpg?sz=128", "display_name": "HomuncDev013", "link": "https://stackoverflow.com/users/11027246/homuncdev013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550228948, "creation_date": 1550066886, "last_edit_date": 1550066956, "question_id": 54672124, "link": "https://stackoverflow.com/questions/54672124/how-to-increment-a-c-programs-memory-ram-using-successive-malloc-function-cal", "title": "How to increment a C program&#39;s memory (RAM) using successive malloc function calls", "body": "<p>I'm writing a C test program that calls the malloc function successively every one second, the purpose is to test the RAM limit of an ARM-based processor running in linux system,</p>\n\n<p>I wrote the code below and i tested it before in my computer (OS: ubuntu 16.04) but the RAM occupation (VmRSS) does not change every second, but every 10 seconds I guess, could anyone explain why ?</p>\n\n<pre><code>FILE *trace;\nint compteur=0;\nchar *var;\nwhile (1)\n{\n    trace=fopen(\"trace.txt\",\"a\");\n    compteur++;\n    var=(char *)malloc(100000);\n    fprintf(trace,\"%d\\n\",compteur);\n    fclose(trace);\n    sleep(1);\n}\n</code></pre>\n\n<p>I launch this command to check the program's RAM occupation</p>\n\n<pre><code> cat /proc/prog_pid/status | grep \"VmRSS\"\n</code></pre>\n\n<p>Expected results: RAM incremeting 100K each one second</p>\n\n<p>Real results: RAM incrementing 1M each 10+ seconds</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1550066615, "post_id": 54672014, "comment_id": 96133833, "body": "This looks like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>.  What actual <b>problem</b> are you trying to solve?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550066617, "post_id": 54672014, "comment_id": 96133836, "body": "I recommend e.g. <a href=\"https://en.cppreference.com/w/c/io/vfprintf\" rel=\"nofollow noreferrer\">this <code>vprintf</code> (and family) reference</a>. Pay close attention to what the <code>vsnprintf</code> function <i>returns</i>, especially if the buffer is a null pointer and the size is zero."}, {"owner": {"reputation": 11, "user_id": 11015708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66927e48ddaf43d9d7bac0e465c9ad0?s=128&d=identicon&r=PG&f=1", "display_name": "XeXkek", "link": "https://stackoverflow.com/users/11015708/xexkek"}, "edited": false, "score": 0, "creation_date": 1550066742, "post_id": 54672014, "comment_id": 96133912, "body": "I need buf variable to be Dynamic it&#39;s hard to guess how long user gives the input string like a path to a file or something"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550066780, "post_id": 54672014, "comment_id": 96133933, "body": "@XeXkek Some programmer dude&#39;s comment is almost the answer you&#39;re looking for."}, {"owner": {"reputation": 11, "user_id": 11015708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66927e48ddaf43d9d7bac0e465c9ad0?s=128&d=identicon&r=PG&f=1", "display_name": "XeXkek", "link": "https://stackoverflow.com/users/11015708/xexkek"}, "edited": false, "score": 0, "creation_date": 1550067132, "post_id": 54672014, "comment_id": 96134139, "body": "When I use char *but, and use vsprintf to not include passing sizeof buffer than program crashes and sends signal SIGSEGV"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550067324, "post_id": 54672014, "comment_id": 96134244, "body": "Please read my comment and the linked reference again. I&#39;m sure it will click after a couple of times."}, {"owner": {"reputation": 11, "user_id": 11015708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66927e48ddaf43d9d7bac0e465c9ad0?s=128&d=identicon&r=PG&f=1", "display_name": "XeXkek", "link": "https://stackoverflow.com/users/11015708/xexkek"}, "edited": false, "score": 0, "creation_date": 1550067401, "post_id": 54672014, "comment_id": 96134298, "body": "I have done reading it and it says if it&#39;s a null pointer than it&#39;ll crash"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550067583, "post_id": 54672014, "comment_id": 96134409, "body": "No, that&#39;s not what the reference I linked to says. It says that if the buffer is a null pointer, and the size is zero, then the function will return the space needed (excluding the terminator)."}, {"owner": {"reputation": 11, "user_id": 11015708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66927e48ddaf43d9d7bac0e465c9ad0?s=128&d=identicon&r=PG&f=1", "display_name": "XeXkek", "link": "https://stackoverflow.com/users/11015708/xexkek"}, "edited": false, "score": 0, "creation_date": 1550067680, "post_id": 54672014, "comment_id": 96134475, "body": "Oh I got it first I&#39;ll use num=vprintf to get size needed and than I&#39;ll pass that size to vsnprintf as sizeof(num+1)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550067909, "post_id": 54672014, "comment_id": 96134647, "body": "Don&#39;t forget to actually allocate the buffer!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11015708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66927e48ddaf43d9d7bac0e465c9ad0?s=128&d=identicon&r=PG&f=1", "display_name": "XeXkek", "link": "https://stackoverflow.com/users/11015708/xexkek"}, "edited": false, "score": 0, "creation_date": 1550068878, "post_id": 54672539, "comment_id": 96135288, "body": "Nice one but one correction that&#39;s this should be int sizeneeded = vsnprintf(NULL, 0, cmd, args)+1; to also reserve space for terminator"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 11, "user_id": 11015708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66927e48ddaf43d9d7bac0e465c9ad0?s=128&d=identicon&r=PG&f=1", "display_name": "XeXkek", "link": "https://stackoverflow.com/users/11015708/xexkek"}, "edited": false, "score": 0, "creation_date": 1550069648, "post_id": 54672539, "comment_id": 96135807, "body": "@XeXkek you&#39;re right, answer edited. You can remove the comments. Thanks."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1550072594, "post_id": 54672539, "comment_id": 96137737, "body": "As an optimization,  you can make the first call to <code>vsnprintf()</code> with a fixed-size buffer, something like 512, 1024, or maybe even 4096 bytes.  That way, if it does fit, you don&#39;t have to allocate memory and make the <code>vsnprintf()</code> call a second time. You might as well use the results of the first call if you can do so without doing it again."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1550070586, "last_edit_date": 1550070586, "creation_date": 1550068003, "answer_id": 54672539, "question_id": 54672014, "link": "https://stackoverflow.com/questions/54672014/getting-sizeof-variable-number-of-arguments/54672539#54672539", "title": "Getting sizeof variable number of arguments", "body": "<p>You probably want something like this:</p>\n\n<pre><code>void excmd(const char* cmd, ...) {\n  char *buf = NULL;\n  va_list args;\n\n  va_start(args, cmd);\n  int sizeneeded = vsnprintf(buf, 0, cmd, args) + 1;\n  va_end(args);\n\n  buf = malloc(sizeneeded);\n\n  va_start(args, cmd);\n  vsnprintf(buf, sizeneeded, cmd, args);\n  va_end(args);\n\n  system(buf);    \n  free(buf);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void excmd(const char* cmd, ...) {\n  va_list args;\n\n  va_start(args, cmd);\n  int sizeneeded = vsnprintf(NULL, 0, cmd, args) + 1;\n  va_end(args);\n\n  char buf[sizeneeded];\n\n  va_start(args, cmd);\n  vsnprintf(buf, sizeneeded, cmd, args);\n  va_end(args);\n\n  system(buf);    \n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11015708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66927e48ddaf43d9d7bac0e465c9ad0?s=128&d=identicon&r=PG&f=1", "display_name": "XeXkek", "link": "https://stackoverflow.com/users/11015708/xexkek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550070586, "creation_date": 1550066499, "question_id": 54672014, "link": "https://stackoverflow.com/questions/54672014/getting-sizeof-variable-number-of-arguments", "title": "Getting sizeof variable number of arguments", "body": "<p>I want bug variable to be dynamic and depending upon sizeof(cmd+args) passed to it</p>\n\n<pre><code>void excmd(const char* cmd, ...) {\n    char buf[100]; // I want it to be dynamic like size of(cmd+args)\n    va_list args;\n    va_start(args,cmd); \n    vsnprintf(buf,sizeof(buf),cmd,args);\n    system(buf);\n    va_end(args);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "for-loop", "increment"], "comments": [{"owner": {"reputation": 388, "user_id": 9573812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c3731ab384e9e17dbb1662fb1f3fc1?s=128&d=identicon&r=PG&f=1", "display_name": "Epion", "link": "https://stackoverflow.com/users/9573812/epion"}, "edited": false, "score": 0, "creation_date": 1550065777, "post_id": 54671709, "comment_id": 96133301, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17711655/c11-range-based-for-loops-without-loop-variable\">C++11 range-based for loops without loop variable</a>"}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1550066114, "post_id": 54671709, "comment_id": 96133524, "body": "Why would someone want to do that? Unless initialized, it would be an infinite loop. When you want it to iterate over 4 times, let it know that way."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 3, "creation_date": 1550066132, "post_id": 54671709, "comment_id": 96133537, "body": "Well you need a variable to keep the iteration count. Without a count you can only get an infinite loop."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1550066612, "post_id": 54671709, "comment_id": 96133831, "body": "is loop unrolling an option ? (possibly <a href=\"https://stackoverflow.com/questions/28231743/self-unrolling-macro-loop-in-c-c\">aided with macro&#39;s or template functions</a>)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550066891, "post_id": 54671709, "comment_id": 96133990, "body": "Avoid tagging both C and C++"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1550067240, "post_id": 54671709, "comment_id": 96134199, "body": "What problem are you <i>actually</i>  trying to resolve? This could be an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 1, "creation_date": 1550072840, "post_id": 54671709, "comment_id": 96137887, "body": "@WedaPashi -- this would mean &quot;do this four times&quot;, without the distraction of having to name a loop-control variable, and perhaps without the distraction of some compiler writer complaining that you created a variable that you never used."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1550125399, "post_id": 54671709, "comment_id": 96156929, "body": "@PeteBecker: True that. But I am trying to foresee a use-case for one such implementation.."}], "answers": [{"comments": [{"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 0, "creation_date": 1550065792, "post_id": 54671754, "comment_id": 96133311, "body": "same as <code>while(1){}</code>"}, {"owner": {"reputation": 1209, "user_id": 10662240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTic2.jpg?s=128&g=1", "display_name": "Krzysiek Karbowiak", "link": "https://stackoverflow.com/users/10662240/krzysiek-karbowiak"}, "edited": false, "score": 0, "creation_date": 1550065873, "post_id": 54671754, "comment_id": 96133366, "body": "Or better yet, <code>while(true);</code> ;-)"}, {"owner": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "edited": false, "score": 0, "creation_date": 1550065942, "post_id": 54671754, "comment_id": 96133403, "body": "I don&#39;t want an infinite loop. Just print &quot;Loop working &quot; (4 times). How to increment?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1550065951, "post_id": 54671754, "comment_id": 96133410, "body": "Yes. But he is interested in <code>for</code>!"}, {"owner": {"reputation": 1160, "user_id": 6949178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yW1nZs8m-_4/AAAAAAAAAAI/AAAAAAAAAIk/Je9U6NaDvuY/photo.jpg?sz=128", "display_name": "Stoogy", "link": "https://stackoverflow.com/users/6949178/stoogy"}, "edited": false, "score": 0, "creation_date": 1550066093, "post_id": 54671754, "comment_id": 96133508, "body": "OP wants no variable"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1160, "user_id": 6949178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yW1nZs8m-_4/AAAAAAAAAAI/AAAAAAAAAIk/Je9U6NaDvuY/photo.jpg?sz=128", "display_name": "Stoogy", "link": "https://stackoverflow.com/users/6949178/stoogy"}, "edited": false, "score": 3, "creation_date": 1550066138, "post_id": 54671754, "comment_id": 96133542, "body": "@Stoogy; What if OP wants to compile the program without any compiler?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "edited": false, "score": 2, "creation_date": 1550066232, "post_id": 54671754, "comment_id": 96133603, "body": "@Biswajit if you want to loop only 4 times, you ought to specify that in the question."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "edited": false, "score": 1, "creation_date": 1550066404, "post_id": 54671754, "comment_id": 96133690, "body": "@Biswajit &quot;How to increment?&quot; Increment what?  You have no variable!"}, {"owner": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1550067072, "post_id": 54671754, "comment_id": 96134100, "body": "@WilliamPursell I already specify that (I want 4 iterations) inside loop. Yes! there is no variable that&#39;s why I am asking here."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "edited": false, "score": 2, "creation_date": 1550069836, "post_id": 54671754, "comment_id": 96135949, "body": "@Biswajit No, you did not specify.  You asked a very generic question, and provided an example that happened to iterate 4 times."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": -1, "last_activity_date": 1550066067, "last_edit_date": 1550066067, "creation_date": 1550065759, "answer_id": 54671754, "question_id": 54671709, "link": "https://stackoverflow.com/questions/54671709/how-to-write-a-for-loop-without-variable/54671754#54671754", "title": "How to write a for loop without variable?", "body": "<p>Yes, it is possible.  </p>\n\n<pre><code>for(; ;);\n</code></pre>\n\n<p>But this will be an infinite loop. Add a break statement and it will run only once  </p>\n\n<pre><code>for(; ; )\n    break;\n</code></pre>\n\n<p>Or you can use increment and conditional statements inside the loop  </p>\n\n<pre><code>int i = 0;\n\nfor(; ;){\n    printf (\"Loop working\\n\");\n    ++i;\n    if( i &gt;= 4)\n        break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1209, "user_id": 10662240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTic2.jpg?s=128&g=1", "display_name": "Krzysiek Karbowiak", "link": "https://stackoverflow.com/users/10662240/krzysiek-karbowiak"}, "is_accepted": false, "score": -1, "last_activity_date": 1550066237, "creation_date": 1550066237, "answer_id": 54671937, "question_id": 54671709, "link": "https://stackoverflow.com/questions/54671709/how-to-write-a-for-loop-without-variable/54671937#54671937", "title": "How to write a for loop without variable?", "body": "<p>To have the loop terminate, you need to keep state which says at which point you are.</p>\n\n<p>Usually, you use loop variable for this.</p>\n\n<p>You can also use recursion, in which case the state is encoded differently, but still needed:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void loop(int i)\n{\n    if (i &lt; 4) {\n        printf (\"Loop working\\n\");\n        loop(++i); // recursive call\n    }\n}\n\nint main()\n{\n    loop(0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 2, "last_activity_date": 1550070115, "last_edit_date": 1550070115, "creation_date": 1550068797, "answer_id": 54672785, "question_id": 54671709, "link": "https://stackoverflow.com/questions/54671709/how-to-write-a-for-loop-without-variable/54672785#54672785", "title": "How to write a for loop without variable?", "body": "<p>You need a variable to keep count, but you can hide it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define JOIN(a, b) (a ## b)\n// WARNING: don't LOOP in the same line\n#define LOOP(n) for (unsigned JOIN(HIDDEN, __LINE__) = 0; JOIN(HIDDEN, __LINE__) &lt; n; JOIN(HIDDEN, __LINE__)++)\n\nint main(void) {\n    LOOP(4) {\n        printf(\"foo\");\n        LOOP(2) printf(\" bar\");\n        puts(\"\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/q48RsZ\" rel=\"nofollow noreferrer\">See code running on ideone</a></p>\n\n<p>Output</p>\n\n<pre>foo bar bar\nfoo bar bar\nfoo bar bar\nfoo bar bar</pre>\n"}], "owner": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1550070115, "creation_date": 1550065627, "last_edit_date": 1550066007, "question_id": 54671709, "link": "https://stackoverflow.com/questions/54671709/how-to-write-a-for-loop-without-variable", "title": "How to write a for loop without variable?", "body": "<p>I want to write a for loop directly without any variable. Is it possible?</p>\n\n<p>Example:</p>\n\n<pre><code>for (1; 1 &lt;= 4; ++) {\n  printf (\"Loop working\\n\");\n}\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>Loop working\nLoop working\nLoop working\nLoop working\n</code></pre>\n"}, {"tags": ["c", "sockets", "udp"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1550065860, "post_id": 54671647, "comment_id": 96133357, "body": "With <code>sendto</code> and <code>recvfrom</code> you should check that the return value is equal to the number of bytes you expected to send or receive."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1550105937, "post_id": 54671647, "comment_id": 96152355, "body": "@Bodo Unlike TCP which is stream-based, UDP is message-based.  <code>sendto()</code> and <code>recvfrom()</code> in UDP can send/receive only complete messages, not partial messages. So, yes, always check return values, but just know that the particular byte count is not as important for UDP. If you ask them to send/read X bytes, the return value will always be either -1 on error or X bytes on success (unless you perform a peek operation on <code>recvfrom()</code>, that is)."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550129625, "post_id": 54671647, "comment_id": 96158689, "body": "@RemyLebeau You are right, <code>sendto</code> should either send the complete datagram or return an error, but <code>recvfrom</code> returns the length of the received datagram which may be less than what the receiver wantet to get or it may indicate that the message was truncated. Both probably indicate a bug."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1550159667, "post_id": 54671647, "comment_id": 96176133, "body": "Sorry, <code>bind(2)</code> system call binds your local address part, nothing is done for the remote part.  use <code>connect(2)</code> for that, or put the server address in the address part of the <code>sendto(2)</code> system call.  There&#39;s no need to <code>bind(2)</code> to send the packet.. this will make the kernel to use an ephemeral port and to select the right address for the packet."}], "owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550065412, "creation_date": 1550065412, "question_id": 54671647, "link": "https://stackoverflow.com/questions/54671647/passing-structure-through-udp-socket-in-c", "title": "Passing structure through Udp socket in C", "body": "<p>I am trying to pass a structure through a udp socket. The structure consists of two arrays. Each array is filled with a value by a thread and then the structure is passed to the server. The server will then print the content of one of the arrays. The issue is when the server prints the array, it prints all zeros. There should be values in the array and this is not correct. Am I passing the structure incorrectly?</p>\n\n<p>Below is my code</p>\n\n<p>Server</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt; \n#include &lt;stdlib.h&gt;  \n#include &lt;unistd.h&gt;\n#include &lt;time.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;arpa/inet.h&gt; \n#include &lt;stdbool.h&gt;\n#include &lt;pthread.h&gt;\n#define PORT 8080 \n\n\n\nstruct values {\n       int serviceArray[100]; \n       int portArray[100];\n       }input;\n\n\nint main()\n{\n\n\n int sockfd; \n\n\n    struct sockaddr_in servaddr, cliaddr; \n\n\n\n    // Creating socket file descriptor \n\n    if ( (sockfd = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) &lt; 0 ) { \n\n        perror(\"socket creation failed\"); \n\n        exit(EXIT_FAILURE); \n\n    } \n\n\n\n    memset(&amp;servaddr, 0, sizeof(servaddr)); \n    memset(&amp;cliaddr, 0, sizeof(cliaddr)); \n\n\n\n    // Filling server information \n\n    servaddr.sin_family    = AF_INET; // IPv4 \n    servaddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    servaddr.sin_port = htons(PORT); \n\n\n\n    // Bind the socket with the server address \n\n    if ( bind(sockfd, (struct sockaddr*)&amp;servaddr, sizeof(servaddr)) &lt; 0 ) \n\n    { \n\n        perror(\"bind failed\"); \n\n        exit(EXIT_FAILURE); \n\n    } \n    else\n    {\n        printf(\"Bind successfull\\n\");\n    }\n\n\n\n\n    int len;\n    sleep(2);\n   recvfrom(sockfd, &amp;input, sizeof(input), 0, (struct sockaddr*)&amp;cliaddr, &amp;len); \n\n\n\n\n    // After chatting close the socket \n    close(sockfd); \n   int j;\n        for(j = 0; j &lt; 5; j++)\n        {\n            printf(\"%d\\n\", input.serviceArray[j]);\n\n        }\n\n\n\n}\n</code></pre>\n\n<p>Client</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt; \n#include &lt;stdlib.h&gt;  \n#include &lt;unistd.h&gt;\n#include &lt;time.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;arpa/inet.h&gt; \n#include &lt;stdbool.h&gt;\n#include &lt;pthread.h&gt;\n\n#define PORT 8080\n\nint SIZE = 100;\nint counter = 0;\nint semaphore = 1; //set to false\n\nstruct values \n       {\n       int serviceArray[100]; \n       int portArray[100];\n       }input;\n\nvoid callServer()\n{\n    int sockfd; \n    struct sockaddr_in servaddr; \n\n    // Creating socket file descriptor \n    if ( (sockfd = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) &lt; 0 ) { \n        perror(\"socket creation failed\");    \n    } \n\n    memset(&amp;servaddr, 0, sizeof(servaddr)); \n\n\n    // Filling server information \n    servaddr.sin_family = AF_INET; \n    servaddr.sin_port = htons(PORT); \n    servaddr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n\n\n\n    int n;\n    int len = sizeof(servaddr); \n    int i;\n    for(i =0; i &lt; 5; i++)\n        printf(\"%d\\n\", input.serviceArray[i]);\n\n\n    if(sendto(sockfd, &amp;input, sizeof(input), 0, (struct sockaddr*)&amp;servaddr, len) &lt; 0)\n      {\n      perror(\"sendto()\");\n      }\n\n\n    // close the socket \n    close(sockfd); \n} \n\n\n\nint arraySearch(int number){\n    int i=0; \n    for(i=0; i&lt; 100; i++){\n        if(input.serviceArray[i] == number)\n        {\n            return 0; //is found\n        }\n\n    }\n\n    return 1;\n}\n\n\nvoid *createService()\n{\n\n    while(counter &lt; SIZE)\n    {\n        sleep(1);\n        if(semaphore ==1)\n        {\n\n            int randomValue = rand() % SIZE;\n\n            if(arraySearch(randomValue) == 1)\n            {\n                input.serviceArray[counter] = randomValue;\n                input.portArray[counter] = randomValue + PORT;\n                printf(\"Thread 1 is adding service number: %d and port number: %d\\n\", input.serviceArray[counter], input.portArray[counter]);\n                semaphore = 0;//unlock\n                counter = counter + 1;\n                callServer();\n\n            }\n        }\n    }\n}\nvoid *removeService()\n{\n\n    while(counter &lt; SIZE)\n    {\n        sleep(3);\n        if(semaphore ==0)\n        {\n            printf(\"Thread 2 is removing service number: %d and port number: %d\\n\", input.serviceArray[counter - 1], input.portArray[counter - 1]);\n            input.serviceArray[counter -1] = 0;\n            input.portArray[counter - 1] = 0;\n            semaphore = 1; //lock\n            callServer();\n\n        }\n    }\n}\n\n\n\nint main(void)\n{\n\n    //create threads\n        pthread_t thread_id1, thread_id2;  \n\n\n        pthread_create(&amp;thread_id1, NULL, createService, NULL);\n        //pthread_create(&amp;thread_id2, NULL, removeService, NULL); \n\n\n        pthread_join(thread_id1, NULL);  \n        pthread_join(thread_id2, NULL); \n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "macos", "c-preprocessor", "ieee-754"], "comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1550065676, "post_id": 54671503, "comment_id": 96133220, "body": "Maybe the second part of this answer <a href=\"https://stackoverflow.com/a/753018/4944425\">stackoverflow.com/a/753018/4944425</a> could be of some help."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1550066816, "post_id": 54671503, "comment_id": 96133959, "body": "@Bob__ Checking those constants needs to include <code>float.h</code> which I want to avoid, although not at all costs."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 4, "creation_date": 1550067375, "post_id": 54671503, "comment_id": 96134279, "body": "Apple\u2019s developer tools with macOS, OS X, and Mac OS use IEEE-754 basic 32-bit and 64-bit binary floating-point formats but do not fully comply with IEEE-754. (Technically the first sentence of your question is incorrect: <code>__STDC_IEC_559__</code> is sufficient to test for compliance; it correctly indicates the implementation does not comply.)"}], "answers": [{"comments": [{"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1550155679, "post_id": 54672495, "comment_id": 96173564, "body": "Feared that, but thought was worth a question anyways. Will just check for the things I actually need to know (am down to just <code>*_MAX_EXP</code> and <code>FLT_RADIX</code>) and write arch./mem.-layout independent code for the rest. Much slower but also much less hassle. Thanks!"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1551228583, "post_id": 54672495, "comment_id": 96561687, "body": "@deamentiaemundi: One possible DeathStation 9000 gotcha would be float endian not matching integer endian, so type-punning for <code>float</code> to <code>uint32_t</code> would have the sign bit as <code>u32 &amp; 0x80</code>.  AFAIK, there&#39;s no standard <code>__FLT_ENDIAN__</code> macro.  But all real compilers go far beyond being standards compliant and make real efforts to actually be useful.  (quality of implementation).  x86 has little-endian integers and floats, and all the major x86 compilers (gcc/clang/ICC/MSVC) are all sane.  (PowerPC has big-endian int and float, I think, if you care about Macs that old.)"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1551274125, "post_id": 54672495, "comment_id": 96580192, "body": "@PeterCordes &quot;if you care about Macs that old&quot; Well, I do, of course I do! The minimum I need is just a M68K + MMU + FPU (e.g.: M68040 to get it all in one) with a slice of RAM aside."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1551300519, "post_id": 54672495, "comment_id": 96594766, "body": "@deamentiaemundi: Oh, I only saw the macos tag, missed the (old and new) in the title.  The abstract of <a href=\"https://ieeexplore.ieee.org/document/63685\" rel=\"nofollow noreferrer\">ieeexplore.ieee.org/document/63685</a> confirms that 68040 hardware uses the IEEE 754 FP formats (and thus so do older m68k with 68882 / 68881, because we know they&#39;re compatible), and the FPU is conformant as expected.  But beware of float endian issues in binary files if you care about moving data between systems."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1550067885, "creation_date": 1550067885, "answer_id": 54672495, "question_id": 54671503, "link": "https://stackoverflow.com/questions/54671503/necessary-c-compiler-flags-to-check-macos-old-and-new-for-ieee-754-compliance/54672495#54672495", "title": "Necessary C compiler flags to check MacOS (old and new) for IEEE-754 compliance", "body": "<blockquote>\n  <p>It seems as if __STDC_IEC_559_ is insufficient to test for IEEE-754 compliance within the Apple ecosystem.</p>\n</blockquote>\n\n<p>Yes and no.  For one thing, it depends in part on your compiler, not just OS.  For another, you need to be careful how you interpret the compiler's use of that macro.</p>\n\n<p>As a preliminary matter, the <code>__STDC_IEC_559__</code> macro (note: <em>two</em> trailing underscores) was introduced in C99.  There are still compilers out there that do not conform to C99, at least by default.  For it to make any sense to test <code>__STD_IEC_559__</code> at all, then, you should first check whether the compiler claims to conform to C99 or later:</p>\n\n<pre><code>#if __STDC__ &amp;&amp; __STDC_VERSION__ &gt;= 19901L\n// __STDC_IEC_559__ may tell us something ...\n#endif\n</code></pre>\n\n<p>Supposing that you're working with a conforming implementation, you next need to appreciate that if an implementation defines <code>__STDC_IEC_559__</code> to 1, it is asserting that it conforms to <em>all</em> the specifications in Annex F (C11) or Annex G (C99) of the standard, which cover not only floating-point data formats but also a fairly wide variety of specifications for operators and functions, including error bounds.  The <code>__STDC_IEC_559__</code> <em>not</em> being defined does not say anything about which part(s) are unsupported.  In practice, almost everyone uses ISO 60559 data formats these days, but full ISO 60559 conformance is relatively rare.</p>\n\n<blockquote>\n  <p>Which MacOS does support IEEE-754 full or at least the part with the binary32 and binary64 format and how to test for it with one or more C preprocessor macros?</p>\n</blockquote>\n\n<p>To the best of my knowledge, all versions of MacOS / OS X running on Intel chips support binary32 and binary64 as native floating-point formats.  All the common compilers for those platforms map those native types to C <code>float</code> and <code>double</code>.  There is no reliable, standard way to get the C preprocessor test that, however, because no standard macros provide that information, and actual testing would require floating-point math, which the preprocessor does not perform.</p>\n\n<p>The closest you can come to testing the data formats via the preprocessor is to include <code>float.h</code> and examine the macros that define the characteristics of types <code>float</code> and <code>double</code>.  But even if these characteristics exactly match those of binary32 / binary64, that does not prove that the actual representations in memory take those forms.  If you specifically care about the representation, then you'll need an external test program.</p>\n"}], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 54672495, "answer_count": 1, "score": 1, "last_activity_date": 1550067885, "creation_date": 1550064897, "last_edit_date": 1550067240, "question_id": 54671503, "link": "https://stackoverflow.com/questions/54671503/necessary-c-compiler-flags-to-check-macos-old-and-new-for-ieee-754-compliance", "title": "Necessary C compiler flags to check MacOS (old and new) for IEEE-754 compliance", "body": "<p>It seems as if <code>__STDC_IEC_559__</code> is insufficient to test for IEEE-754 compliance within the Apple ecosystem whcih leads to my question:</p>\n\n<p>Which MacOS does support IEEE-754 full or at least the part with the binary32 and binary64 format and how to test for it with one or more C preprocessor macros?</p>\n"}, {"tags": ["c", "pointers", "data-structures"], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 4, "last_activity_date": 1550065272, "creation_date": 1550065272, "answer_id": 54671610, "question_id": 54671479, "link": "https://stackoverflow.com/questions/54671479/more-c-pointer-troubles/54671610#54671610", "title": "More C Pointer Troubles", "body": "<p>Here,</p>\n\n<pre><code>newpub-&gt;name = name;\n</code></pre>\n\n<p>you're overwriting your newly allocated <code>newpub-&gt;name</code> with the <code>name</code> pointer.<br>\nAnd <code>name</code> is the address of a string literal, which you're not allowed to <code>free</code>.</p>\n\n<p>You left out the <code>strdup</code> on that one, for some reason.</p>\n\n<p>Also, <code>strdup</code> does the allocation for you, so you're leaking all your <code>malloc</code>ed memory for the members when you overwrite those pointers. </p>\n\n<p>Use either just <code>strdup</code>, or <code>malloc</code> (but not with a hardcoded size) followed by <code>strcpy</code>. </p>\n\n<p>(And don't cast the result of <code>malloc</code>.)</p>\n"}], "owner": {"reputation": 168, "user_id": 7061612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c4482be2d3dff4af610760684a05f1?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Robinson", "link": "https://stackoverflow.com/users/7061612/lee-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54671610, "answer_count": 1, "score": -1, "last_activity_date": 1550065272, "creation_date": 1550064846, "question_id": 54671479, "link": "https://stackoverflow.com/questions/54671479/more-c-pointer-troubles", "title": "More C Pointer Troubles", "body": "<p>I have been studying data structures and algorithms, sadly in C. I have separately implemented a doubly linked list which holds integers and works fine, but I am having a lot of trouble getting it to work properly when a node (or pub in this case) holds multiple values of different types. I can create a list and append new nodes, view the nodes (pubs), and then delete(free) them. I have multiple problems with my code and despite my best efforts, cannot solve them. I know I need to free the memory for each attribute where I used malloc, but this crashes my program. I am certain again that my main issue is getting confused with how to use pointers, and pointers to pointers, when passing to functions. Any help would be really appreciated!!</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;stdlib.h&gt;\n\n# define MAX_TOXICITY 30\n\ntypedef struct pub\n{\n  char *name;\n  char *description;\n  char *drink1;\n  int drink1Strength;\n  char *drink2;\n  int drink2Strength;\n  char *drink3;\n  int drink3Strength;\n  struct pub * prev ;\n  struct pub * next ;\n} pub;\n\ntypedef struct punter\n{\n  char playerName[20];\n  int toxicity;\n  struct pub * location;\n} punter;\n\nvoid append (struct pub** pubs, char name[], char description[], char drinka[], char drinkb[], char drinkc[], int aStrength, int bStrength, int cStrength)\n{\n  //printf(\"name: %s\\tdescription: %s\\n\", name, description);\n  struct pub *newpub, * iterator = * pubs;\n\n  if (*pubs == NULL)\n  {\n    *pubs = (struct pub*)malloc(sizeof(struct pub));\n    (*pubs)-&gt;prev = NULL;\n    (*pubs)-&gt;next = NULL;\n\n    (*pubs)-&gt;name = (char *)malloc((20) * sizeof(char));\n    (*pubs)-&gt;description = (char *)malloc((100) * sizeof(char));\n    (*pubs)-&gt;drink1 = (char *)malloc((20) * sizeof(char));\n    (*pubs)-&gt;drink2 = (char *)malloc((20) * sizeof(char));\n    (*pubs)-&gt;drink3 = (char *)malloc((20) * sizeof(char));\n    (*pubs)-&gt;name = name;\n    (*pubs)-&gt;description = strdup(description);\n    (*pubs)-&gt;drink1 = strdup(drinka);\n    (*pubs)-&gt;drink2 = strdup(drinkb);\n    (*pubs)-&gt;drink3 = strdup(drinkc);\n    (*pubs)-&gt;drink1Strength = aStrength;\n    (*pubs)-&gt;drink2Strength = bStrength;\n    (*pubs)-&gt;drink3Strength = cStrength;\n\n  }\n  else\n  { \n    while (iterator-&gt;next != NULL)\n      iterator = iterator-&gt;next;\n    newpub = (struct pub *)malloc(sizeof(struct pub));\n    newpub-&gt;next = NULL;\n    newpub-&gt;prev = iterator;\n    newpub-&gt;name = (char *)malloc((20) * sizeof(char));\n    newpub-&gt;description = (char *)malloc((100) * sizeof(char));\n    newpub-&gt;drink1 = (char *)malloc((20) * sizeof(char));\n    newpub-&gt;drink2 = (char *)malloc((20) * sizeof(char));\n    newpub-&gt;drink3 = (char *)malloc((20) * sizeof(char));\n    iterator-&gt;next = newpub;\n    newpub-&gt;name = name;\n    newpub-&gt;description = strdup(description);\n    newpub-&gt;drink1 = strdup(drinka);\n    newpub-&gt;drink2 = strdup(drinkb);\n    newpub-&gt;drink3 = strdup(drinkc);\n    newpub-&gt;drink1Strength = aStrength;\n    newpub-&gt;drink2Strength = aStrength;\n    newpub-&gt;drink3Strength = aStrength;\n  }\n}\n\nint count (struct pub * pubs)\n{\n  int count = 0;\n  while ( pubs!= NULL)\n  {\n    pubs = pubs-&gt;next;\n    count ++;\n  }\n  return count;\n}\n\nvoid display (struct pub *iterator)\n{\n  while (iterator != NULL)\n  {\n    //printf(\"Display Function Called:\\n Name: %s\\tDescription: %s\\tprevious: %x\\tnext: %x\\n\", \n    printf(\"Name: %s\\tDescription: %s\\nMenu: %s | %s | %s\\n\",\n      iterator-&gt;name, iterator-&gt;description, iterator-&gt;drink1, iterator-&gt;drink2, iterator-&gt;drink3);\n    iterator = iterator-&gt;next;\n  }\n}\n\nvoid clear(struct pub **pubs)\n{\n  struct pub * iterator = *pubs;\n  while(iterator-&gt;next != NULL)\n  {\n    iterator = iterator-&gt;next;\n    //free(iterator-&gt;prev);\n  }\n  // now we are at the last pub, then clear in reverse\n  while(iterator != NULL)\n  {\n    printf(\"Attempting to clear pub\\n\");\n    iterator = iterator-&gt;prev;\n   /* printf(\"Attempting to clear pub name\\n\");\n    printf(\"iterator-&gt;next-&gt;name: %s\\n\", iterator-&gt;next-&gt;name);\n    free(iterator-&gt;next-&gt;name);\n    printf(\"Attempting to clear pub description\\n\");\n    free(iterator-&gt;next-&gt;description);\n    free(iterator-&gt;next-&gt;drink1);\n    free(iterator-&gt;next-&gt;drink2);\n    free(iterator-&gt;next-&gt;drink3);*/\n    free(iterator);\n    printf(\"Pub cleared\\n\");\n  }\n  free(iterator);\n  printf(\"Pubcrawl Cleared\\n\");\n}\n\n\nint main ( void )\n{\n  pub **pubs;\n\n  append(&amp;pubs, \"The Queens Cruciate Ligament\", \"Description Here\", \"Jungle Juice\", \"Johnson Ale\", \"Pubonic Acid\", 2, 3, 5);\n  append(&amp;pubs, \"The Nags Head\", \"Description Here\", \"Alco Cola\", \"McGuigans Real Ale\", \"Dark Hobo Rum\", 5, 2, 3);\n  append(&amp;pubs, \"The Kings Arm\", \"Description Here\", \"Whiskey Juice\", \"O'Johnson's Ginger Gin\", \"Bacon Beer\", 2, 5, 3);\n  append(&amp;pubs, \"The The Royal Joke\", \"Description Here\", \"Beverage of Truth\", \"Jackson Ale\", \"Ginger Ginger\", 5, 3, 2);\n  append(&amp;pubs, \"Flannagans\", \"Description Here\", \"Cola Flux\", \"McGuigans Fake Ale\", \"Light Hobo Rum\", 3, 2, 5);\n  append(&amp;pubs, \"McFlannagans\", \"Description Here\", \"Juicey Juice\", \"O'Johnson's Ginger Vodka\", \"Sausage Beer\", 2, 5, 3);\n  append(&amp;pubs, \"The Cow &amp; Chicken\", \"Description Here\", \"Giant Juice\", \"Spencers Beer\", \"Generic Lager\", 5, 2, 3);\n  append(&amp;pubs, \"Bar Responsible\", \"Description Here\", \"Cola Cola\", \"McMcMcguigans Ale\", \"Leftover Beer\", 0, 5, 5);\n  append(&amp;pubs, \"The Dirty Donkey\", \"Description Here\", \"Tastey Johnson\", \"Sex on the Beach\", \"White Russian\", 2, 2, 5);\n  append(&amp;pubs, \"The Butchers Bear\", \"Description Here\", \"Water\", \"Dirty Water\", \"Dirtier Water\", 3, 3, 5);\n  display(pubs);\n\n\n\n  clear(&amp;pubs);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550064824, "post_id": 54671428, "comment_id": 96132681, "body": "Instead of <code>char y=&quot;YES&quot;;</code>, try <code>const char *y=&quot;YES&quot;;</code> Or just drop those and change <code>return y;</code> to <code>return &quot;YES&quot;;</code>. And change <code>char findNumber</code> to <code>const char *findNumber</code>. Though personally I would just have it return a <code>bool</code>/<code>int</code> instead."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1550064882, "post_id": 54671428, "comment_id": 96132712, "body": "Turn on all your compiler warnings, and fix the problems they reveal.  There should be a lot of them."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1550069644, "post_id": 54671428, "comment_id": 96135804, "body": "why does a function named <code>findNumber</code> contains reading array input from console? Hint: it&#39;s a rhetorical question meant to make you think. Hint2: it really really shouldn&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1550064935, "creation_date": 1550064935, "answer_id": 54671513, "question_id": 54671428, "link": "https://stackoverflow.com/questions/54671428/while-executing-this-program-the-char-function-does-the-returning-the-variable-i/54671513#54671513", "title": "While executing this program the char function does the returning the variable.i dont know why?", "body": "<p>A string constant like <code>\"YES\"</code> or <code>\"NO\"</code> is an array of characters, not a single character, so you can't store them in a <code>char</code>.  </p>\n\n<p>You need to declare <code>y</code> and <code>n</code> as <code>char *</code> so they can point to the string constant and change the return type of the function accordingly.</p>\n\n<pre><code>const char *findNumber(int arr_count, int arr[], int k) \n{\n    const char *y=\"YES\";\n    const char *N=\"NO\";\n    ...\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11056657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec6f40152d1589d71a0fa3072554803?s=128&d=identicon&r=PG&f=1", "display_name": "D.Venkat", "link": "https://stackoverflow.com/users/11056657/d-venkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 54671513, "answer_count": 1, "score": -1, "last_activity_date": 1550069218, "creation_date": 1550064652, "last_edit_date": 1550069218, "question_id": 54671428, "link": "https://stackoverflow.com/questions/54671428/while-executing-this-program-the-char-function-does-the-returning-the-variable-i", "title": "While executing this program the char function does the returning the variable.i dont know why?", "body": "<p>Here in the program, findnumber function getting  array elements and the value to be searched via STDIN.The output which i expected is if the value equals any one of the element in the array it displays YES or else NO.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nchar findNumber(int,int[],int);``\nint main()\n{\n    int n,a[10],s;\n    char c;\n    c=findNumber(n,a,s);\n    printf(\"%s\",c);\n    return 0;\n}\nchar findNumber(int arr_count, int arr[], int k) \n{\n   int i=0,j,flag;\n   char y=\"YES\";\n   char N=\"NO\";\n   scanf(\"%d\",&amp;arr_count);\n   scanf(\"%d\",&amp;k);\n   for (j=0;j&lt;arr_count;j++)\n   {\n      scanf(\"%d\",&amp;arr[j]);\n   }\n   while(i&lt;arr_count)\n   {\n      if(arr[i]==k)\n         flag=1;\n      i++;\n   }\n   if(flag==1)\n      return y;\n   else\n      return N;\n}\n</code></pre>\n\n<p>warning: initialization of 'char' from 'char *' makes integer from\npointer without a cast [-Wint-conversion]\n char y=\"YES\";\nwarning: initialization of 'char' from 'char *' makes integer from\npointer without a cast [-Wint-conversion]\n char N=\"NO\";</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1550064487, "post_id": 54671314, "comment_id": 96132468, "body": "For the input of e.g. <code>Hi everyone</code>, what should the result be? If you have your &quot;2D&quot; array, what should it look like, and after your input what should it contents be?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1550064578, "post_id": 54671314, "comment_id": 96132531, "body": "<i>&quot;This is a question to understand why the above written approach fails.&quot;</i> It doesn&#39;t fail (at least not for me) and neither is it a 2D array. If it&#39;s not working as intended for you, a more detailed problem description is necessary."}, {"owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550064781, "post_id": 54671314, "comment_id": 96132654, "body": "@Someprogrammerdude Check the post, updated it."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550064830, "post_id": 54671314, "comment_id": 96132683, "body": "@Gahlot, if you want to convert &quot;hi everyone&quot; to 2 dimensional with &quot;hi&quot; and &quot;everyone&quot; in seperate string with 0ne scanf function then it is doable as:   char ch[2][20];      scanf(&quot;%s %19[^\\n]&quot;, ch[0], ch[1]);   but doing so is not recommended as it can overflow the array as per the input."}, {"owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550064849, "post_id": 54671314, "comment_id": 96132696, "body": "@Blaze I am asking when you use the above approach for 2D array it fails then why?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550064961, "post_id": 54671314, "comment_id": 96132769, "body": "You still haven&#39;t shown the &quot;2d&quot; array itself, or the error messages you get. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show us, and copy-paste the full and complete output from attempting to build that example. Also please take some time to read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550065224, "post_id": 54671314, "comment_id": 96132938, "body": "@Someprogrammerdude Updated."}, {"owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "reply_to_user": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550065270, "post_id": 54671314, "comment_id": 96132963, "body": "@Deepak please re-read the post and answer again."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550065317, "post_id": 54671314, "comment_id": 96132987, "body": "@Gahlot: scanf(&quot;%19[^\\n]&quot;, ch); will read the input till it encounter \\n character or 19 character. So it is equivalent to %s with which input read will be a string which is a one dimensional character array, so scanf expect the same. so if you give a 2 dimensional array to this intelligent compiler should give warning/error."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550065431, "post_id": 54671314, "comment_id": 96133049, "body": "@Deepak No <code>&quot;%19[^\\n]&quot;</code> is not the same as <code>&quot;%19s&quot;</code>. The <code>%s</code> format reads <i>space delimited</i> strings. You need the first format to read strings containing spaces."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550065518, "post_id": 54671314, "comment_id": 96133111, "body": "First of all, please <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. Use a debugger to catch the crash and find out where in your code it happens. Secondly, <code>&amp;name[i]</code> is a pointer to the <i>array</i> and not a pointer to the first character of the array. That would be <code>&amp;name[i][0]</code> which is the same as <code>name[i]</code>. It happens to work because both are pointing to the same location, but they are semantically very different."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550065585, "post_id": 54671314, "comment_id": 96133152, "body": "@Someprogrammerdude: yes, both are not exactly same, how they parse is not same but both expect a char * variable, Please correct me if my understanding is improper"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1550065600, "post_id": 54671314, "comment_id": 96133160, "body": "Furthermore, if you want to read <i>lines</i> why don&#39;t you use <a href=\"https://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead? As in <code>fgets(name[i], sizeof name[i], stdin);</code>"}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550065644, "post_id": 54671314, "comment_id": 96133193, "body": "@Gahlot:you are passing a 2 dimensional array to scanf,  you can read as scanf(&quot;%19[^\\n]&quot;, name[i]); remove the &amp; in that."}, {"owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "reply_to_user": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550065706, "post_id": 54671314, "comment_id": 96133243, "body": "@Deepak &amp; is not the issue. with/without &amp; your solution fails."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550065880, "post_id": 54671314, "comment_id": 96133371, "body": "@Gahlot: got it. this is because you are having &#39;\\n&#39; as delimiter, scanf will not remove the delimiter specified, so next scanf will encounter the same again and again. so only first input it prints as it get to first variable, all other will have NULL. this is the behavior of scanf(). if you use %s this will work fine."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "edited": false, "score": 0, "creation_date": 1550065647, "post_id": 54671670, "comment_id": 96133195, "body": "Enter names:- Enter name 0: dss dsfsd  Enter name 1: sdfs dsfsd  Enter name 2: sfs sdfs dsfsd  Enter name 3: dsfs  sdfsdf fss f  Entered name 0: dss dsfsd Entered name 1: sdfs dsfsd Entered name 2: sfs sdfs dsfsd Entered name 3: dsfs  sdfsdf fss f  okay this works. But why a leading whitespace is required specifically."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550065650, "post_id": 54671670, "comment_id": 96133198, "body": "You should probably add a note that the <code>%[</code> format specifier does not skip leading white-space (like the newline left by previous call)."}, {"owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "edited": false, "score": 0, "creation_date": 1550065864, "post_id": 54671670, "comment_id": 96133358, "body": "@blaze your solution works, but can you explain why a leading whitespace is required??"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "edited": false, "score": 0, "creation_date": 1550066138, "post_id": 54671670, "comment_id": 96133543, "body": "@Gahlot I added an explanation on that"}, {"owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "edited": false, "score": 2, "creation_date": 1550066307, "post_id": 54671670, "comment_id": 96133636, "body": "@Blaze yup thanx. Learned a new thing today !"}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 1, "last_activity_date": 1550065880, "last_edit_date": 1550065880, "creation_date": 1550065496, "answer_id": 54671670, "question_id": 54671314, "link": "https://stackoverflow.com/questions/54671314/2d-char-array-storing-text-with-the-spacebar-in-an-one-char-array-element/54671670#54671670", "title": "2D char array (Storing text with the spacebar in an one char array element?)", "body": "<p>The problem in the example you provided is that the newline is left in the buffer. You can discard this leading whitespace by changing this:</p>\n\n<pre><code>scanf(\"%19[^\\n]\", &amp;name[i]);\n</code></pre>\n\n<p>To this</p>\n\n<pre><code>scanf(\" %19[^\\n]\", &amp;name[i]);\n</code></pre>\n\n<p>Note the space before <code>%19</code>. With this, your program prints:</p>\n\n<blockquote>\n  <p>Enter names:-</p>\n  \n  <p>Enter name 0: foo</p>\n  \n  <p>Enter name 1: bar</p>\n  \n  <p>Enter name 2: baz</p>\n  \n  <p>Enter name 3: qux</p>\n  \n  <p>Entered name 0: foo</p>\n  \n  <p>Entered name 1: bar</p>\n  \n  <p>Entered name 2: baz</p>\n  \n  <p>Entered name 3: qux</p>\n</blockquote>\n\n<p>This is because the <code>%[^\\n]</code> specifier tells it to take everything <em>but</em> the newline. So the newline will be left in the buffer, and when <code>scanf</code> is called again, it is the first thing in the buffer, so those additional calls can't take any input.</p>\n\n<p>That leading space in the <code>scanf</code> fixes the problem, because it tells <code>scanf</code> to discard any trailing whitespace, which includes that newline left in the buffer.</p>\n\n<p>This is what a <a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\">reference</a> says about it:</p>\n\n<blockquote>\n  <p><strong>Whitespace character</strong>: the function will read and ignore any whitespace characters encountered before the next non-whitespace\n  character (whitespace characters include spaces, newline and tab\n  characters -- see isspace). A single whitespace in the format string\n  validates any quantity of whitespace characters extracted from the\n  stream (including none).</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1568998172, "post_id": 54744029, "comment_id": 102466947, "body": "<code>fflush</code> is undefined on input streams. <a href=\"https://pubs.opengroup.org/onlinepubs/009695399/functions/fflush.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/functions/fflush.htm&zwnj;&#8203;l</a> and <a href=\"https://stackoverflow.com/questions/26446297/fflush-function-not-working-with-stdin\" title=\"fflush function not working with stdin\">stackoverflow.com/questions/26446297/&hellip;</a>."}], "tags": [], "owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "is_accepted": false, "score": 0, "last_activity_date": 1550491763, "last_edit_date": 1550491763, "creation_date": 1550482008, "answer_id": 54744029, "question_id": 54671314, "link": "https://stackoverflow.com/questions/54671314/2d-char-array-storing-text-with-the-spacebar-in-an-one-char-array-element/54744029#54744029", "title": "2D char array (Storing text with the spacebar in an one char array element?)", "body": "<p>Figured out another approach to get it done. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char name[4][20];\n    int i;\n    printf(\"Enter names:-\\n\");\n    for(i=0; i&lt;4; i++)\n    {\n            printf(\"Enter name %d: \", i);\n            scanf(\"%19[^\\n]\", name[i]);     \n            fflush(stdin);\n            printf(\"\\n\");   \n    }\n    for(i=0; i&lt;4; i++)\n    {\n        printf(\"Entered name %d: %s\", i, name[i]);\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10288870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e2339746500de67cb067c2920e345c?s=128&d=identicon&r=PG&f=1", "display_name": "Gahlot", "link": "https://stackoverflow.com/users/10288870/gahlot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571650904, "creation_date": 1550064311, "last_edit_date": 1571650904, "question_id": 54671314, "link": "https://stackoverflow.com/questions/54671314/2d-char-array-storing-text-with-the-spacebar-in-an-one-char-array-element", "title": "2D char array (Storing text with the spacebar in an one char array element?)", "body": "<p>Acc. to this <a href=\"https://stackoverflow.com/questions/18083984/how-to-store-and-then-print-a-2d-character-string-array\">post</a>, the most used method to store text in a 2D array is by using %s approach. But, this approach has a downfall, i.e. whenever you press spacebar, the text which is typed after goes into the second element of array. for e.g. you typed </p>\n\n<p>Input:-</p>\n\n<p>1st element of char array = Hi everyone</p>\n\n<p>Output:-</p>\n\n<p>1st element of char array = Hi </p>\n\n<p>2nd element of char array = everyone</p>\n\n<p>Expected output:-</p>\n\n<p>1st element of char array = Hi everyone</p>\n\n<p>So, i want to ask why the below written approach cannot be used to enter text into a 2D array? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n     char ch[20];\n     printf(\"Enter name:\");  \n     scanf(\"%19[^\\n]\", ch);\n     printf(\"Your name is: %s\", ch);\n     return 0;\n}\n</code></pre>\n\n<p>If the above approach can be used, then please let me know how?</p>\n\n<p>Please do not introduce pointer concepts/code in answer to this post. This is a question to understand why the above written approach fails. </p>\n\n<p>Consider this as the code which fails:-</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char name[4][20];\n    int i;\n    printf(\"Enter names:-\\n\");\n    for(i=0; i&lt;4; i++)\n    {\n            printf(\"Enter name %d: \", i);\n            scanf(\"%19[^\\n]\", name[i]);\n            printf(\"\\n\");   \n    }\n    for(i=0; i&lt;4; i++)\n    {\n        printf(\"Entered name %d: %s\", i, name[i]);\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The above program compiles without any error or warning, but fails during runtime. </p>\n"}, {"tags": ["c", "pointers", "memory-leaks", "segmentation-fault"], "comments": [{"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1550063887, "post_id": 54671108, "comment_id": 96132069, "body": "pls rethink your tags... are you coding c or c++? it is a important difference"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 2, "creation_date": 1550063917, "post_id": 54671108, "comment_id": 96132089, "body": "<code>(*str_array)[i]</code> is equal to <code>*(*str_array + i)</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550065007, "post_id": 54671108, "comment_id": 96132802, "body": "<code>free</code> is missing."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1550064127, "creation_date": 1550064127, "answer_id": 54671257, "question_id": 54671108, "link": "https://stackoverflow.com/questions/54671108/relation-between-pointers-and-arrays/54671257#54671257", "title": "Relation between pointers and arrays", "body": "<blockquote>\n  <p>I was pretty sure that <code>*(pointer+1)</code> = <code>pointer[1]</code>.</p>\n</blockquote>\n\n<p>Yes. Those two expressions are equivalent for any array or pointer.</p>\n\n<blockquote>\n  <p>But when i replace <code>(*str_array )[i]</code> by <code>**(str_array + i)</code> ...</p>\n</blockquote>\n\n<p>Those two expressions are not equivalent.</p>\n\n<p><code>(*str_array )[i]</code> is <code>*(*str_array ) + i)</code></p>\n\n<p><code>**(str_array + i)</code> is <code>*str_array[i]</code> </p>\n"}], "owner": {"reputation": 43, "user_id": 10806279, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oJg9hMIMAIg/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jwF0PLtoYz7VDEKjrS1RH5FYWaOg/mo/photo.jpg?sz=128", "display_name": "Julian Rosenfeld", "link": "https://stackoverflow.com/users/10806279/julian-rosenfeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 54671257, "answer_count": 1, "score": 2, "last_activity_date": 1550064127, "creation_date": 1550063727, "last_edit_date": 1550063925, "question_id": 54671108, "link": "https://stackoverflow.com/questions/54671108/relation-between-pointers-and-arrays", "title": "Relation between pointers and arrays", "body": "<p>I was pretty sure that <code>*(pointer+1) = pointer[1]</code>.</p>\n\n<p>My problem is that when i run this code:</p>\n\n<pre><code>  if (NULL == (*str_array = (char **)malloc(sizeof(char *)*10))) {\n    return ERROR;\n}\n\nsplitter = strtok(str, TOKEN);\n\n\n while(splitter != NULL){\n\n     if (NULL == ((*str_array )[i] =(char *)malloc(sizeof(char)*strlen(str) +1))){\n         return ERROR;\n\n     }\n\n     strcpy((*str_array )[i], splitter);\n\n\n     splitter  = strtok(NULL,TOKEN);\n     i++;\n }\n</code></pre>\n\n<p>i get  a <code>valgrind</code> output that says i got no leak or errors to suppress. The program works perfectly.</p>\n\n<p>But when i replace <code>(*str_array )[i]</code> by <code>**(str_array + i)</code> and run \n<code>valgrind --leak-check=full ./program</code> i get the following output:</p>\n\n<pre><code>    ==18873== Invalid write of size 8\n==18873==    at 0x1089B7: split_func (in /home)\n==18873==    by 0x108B4E: main (in /home)\n==18873==  Address 0x3100414747504724 is not stack'd, malloc'd or (recently) free'd\n==18873== \n==18873== \n==18873== Process terminating with default action of signal 11 (SIGSEGV)\n==18873==  General Protection Fault\n==18873==    at 0x1089B7: split_func (in /home)\n==18873==    by 0x108B4E: main (in /home)\n==18873== \n==18873== HEAP SUMMARY:\n==18873==     in use at exit: 130 bytes in 3 blocks\n==18873==   total heap usage: 4 allocs, 1 frees, 1,154 bytes allocated\n==18873== \n==18873== 11 bytes in 1 blocks are definitely lost in loss record 2 of 3\n==18873==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==18873==    by 0x1089B6: split_func (in /home)\n==18873==    by 0x108B4E: main (in /home)\n==18873== \n==18873== LEAK SUMMARY:\n==18873==    definitely lost: 11 bytes in 1 blocks\n==18873==    indirectly lost: 0 bytes in 0 blocks\n==18873==      possibly lost: 0 bytes in 0 blocks\n==18873==    still reachable: 119 bytes in 2 blocks\n==18873==         suppressed: 0 bytes in 0 blocks\n==18873== Reachable blocks (those to which a pointer was found) are not shown.\n==18873== To see them, rerun with: --leak-check=full --show-leak-kinds=all\n==18873== \n==18873== For counts of detected and suppressed errors, rerun with: -v\n==18873== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0)\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>For everyone to know, \"str\" is a string to be split in every \",\"(TOKEN) and \"splitter\" the char pointer to do it so. \"str_array\" is a char *** pointer that is received as a parameter, and it\u00b4s supposed to be a dynamic array of dynamic strings.\nThe only difference bewteen both runs, is the one change i made in the code mentioned before. Can someone tell me what\u00b4s going on here?</p>\n"}, {"tags": ["c", "memory-management", "memory-leaks", "fork"], "comments": [{"owner": {"reputation": 1881, "user_id": 3271507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uNkWx.png?s=128&g=1", "display_name": "brunorey", "link": "https://stackoverflow.com/users/3271507/brunorey"}, "edited": false, "score": 0, "creation_date": 1550064014, "post_id": 54671093, "comment_id": 96132157, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41126905/fork-with-invalid-command-cause-a-memory-leak-in-valgrind\">fork with invalid command cause a memory leak in valgrind</a>"}, {"owner": {"reputation": 135, "user_id": 4829056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZHqC.jpg?s=128&g=1", "display_name": "ben", "link": "https://stackoverflow.com/users/4829056/ben"}, "edited": false, "score": 2, "creation_date": 1550064234, "post_id": 54671093, "comment_id": 96132301, "body": "Don&#39;t get any leak on my Linux machine. Code looks fine except that I would use exit() instead of return."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550064260, "post_id": 54671093, "comment_id": 96132321, "body": "Could be a macOS specific problem?"}, {"owner": {"reputation": 162, "user_id": 9332760, "user_type": "registered", "profile_image": "https://graph.facebook.com/340888469759655/picture?type=large", "display_name": "rSim", "link": "https://stackoverflow.com/users/9332760/rsim"}, "edited": false, "score": 0, "creation_date": 1550064276, "post_id": 54671093, "comment_id": 96132327, "body": "I&#39;m actually not allocating any memory, that&#39;s a part of my problem"}, {"owner": {"reputation": 162, "user_id": 9332760, "user_type": "registered", "profile_image": "https://graph.facebook.com/340888469759655/picture?type=large", "display_name": "rSim", "link": "https://stackoverflow.com/users/9332760/rsim"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550064304, "post_id": 54671093, "comment_id": 96132345, "body": "@Someprogrammerdude It&#39;s what i&#39;m wondering"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1550065859, "post_id": 54671093, "comment_id": 96133355, "body": "On Linux this program doesn&#39;t call <code>malloc</code> and friends at all. So this looks like a problem with the implementation of <code>fork</code> on Mac OS X."}], "owner": {"reputation": 162, "user_id": 9332760, "user_type": "registered", "profile_image": "https://graph.facebook.com/340888469759655/picture?type=large", "display_name": "rSim", "link": "https://stackoverflow.com/users/9332760/rsim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1550659375, "creation_date": 1550063695, "last_edit_date": 1550659375, "question_id": 54671093, "link": "https://stackoverflow.com/questions/54671093/c-leak-on-fork-without-malloc", "title": "C, Leak on fork without malloc", "body": "<p>I'm trying to understand how memory allocation work on fork, even on static or dynamic allocation. I've some trouble to understand some leaks as shown below. </p>\n\n<p>With this program :</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint     main(int argc, char **argv)\n{\n    pid_t pid;\n    int     status;\n\n\n    pid = fork();\n    if (pid == 0)\n        return (0);\n    else\n    {\n        waitpid(pid, &amp;status, 0);\n        return (0);\n    }\n}\n</code></pre>\n\n<p>I'm getting this log file with valgrind :</p>\n\n<pre><code>==81268== Memcheck, a memory error detector\n==81268== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\n==81268== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info\n==81268== Command: ./a.out\n==81268== Parent PID: 73556\n==81268==\n==81268== Syscall param msg-&gt;desc.port.name points to uninitialised byte(s)\n==81268==    at 0x1003A834A: mach_msg_trap (in /usr/lib/system/libsystem_kernel.dylib)\n==81268==    by 0x1003A7796: mach_msg (in /usr/lib/system/libsystem_kernel.dylib)\n==81268==    by 0x1003A1485: task_set_special_port (in /usr/lib/system/libsystem_kernel.dylib)\n==81268==    by 0x10053D10E: _os_trace_create_debug_control_port (in /usr/lib/system/libsystem_trace.dylib)\n==81268==    by 0x10053D458: _libtrace_init (in /usr/lib/system/libsystem_trace.dylib)\n==81268==    by 0x1000A69DF: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\n==81268==    by 0x100018A1A: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&amp;) (in /usr/lib/dyld)\n==81268==    by 0x100018C1D: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&amp;) (in /usr/lib/dyld)\n==81268==    by 0x1000144A9: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&amp;, unsigned int, char const*, ImageLoader::InitializerTimingList&amp;, ImageLoader::UninitedUpwards&amp;) (in /usr/lib/dyld)\n==81268==    by 0x100014440: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&amp;, unsigned int, char const*, ImageLoader::InitializerTimingList&amp;, ImageLoader::UninitedUpwards&amp;) (in /usr/lib/dyld)\n==81268==    by 0x100013523: ImageLoader::processInitializers(ImageLoader::LinkContext const&amp;, unsigned int, ImageLoader::InitializerTimingList&amp;, ImageLoader::UninitedUpwards&amp;) (in /usr/lib/dyld)\n==81268==    by 0x1000135B8: ImageLoader::runInitializers(ImageLoader::LinkContext const&amp;, ImageLoader::InitializerTimingList&amp;) (in /usr/lib/dyld)\n==81268==  Address 0x10488bc6c is on thread 1's stack\n==81268==  in frame #2, created by task_set_special_port (???:)\n==81268==\n==81269==\n==81269== HEAP SUMMARY:\n==81269==     in use at exit: 28,557 bytes in 172 blocks\n==81269==   total heap usage: 188 allocs, 16 frees, 34,701 bytes allocated\n==81269==\n==81269== 72 bytes in 3 blocks are possibly lost in loss record 31 of 55\n==81269==    at 0x100098BF2: calloc (in /Users/simrossi/.brew/Cellar/valgrind/3.13.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==81269==    by 0x1005B1846: map_images_nolock (in /usr/lib/libobjc.A.dylib)\n==81269==    by 0x1005C4FE8: objc_object::sidetable_retainCount() (in /usr/lib/libobjc.A.dylib)\n==81269==    by 0x10000803B: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\n==81269==    by 0x100008255: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\n==81269==    by 0x1001FF00A: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\n==81269==    by 0x1005B1074: _objc_init (in /usr/lib/libobjc.A.dylib)\n==81269==    by 0x10019268D: _os_object_init (in /usr/lib/system/libdispatch.dylib)\n==81269==    by 0x10019263A: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\n==81269==    by 0x1000A69D5: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\n==81269==    by 0x100018A1A: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&amp;) (in /usr/lib/dyld)\n==81269==    by 0x100018C1D: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&amp;) (in /usr/lib/dyld)\n==81269==\n==81269== 2,064 (16 direct, 2,048 indirect) bytes in 1 blocks are definitely lost in loss record 51 of 55\n==81269==    at 0x100098586: malloc (in /Users/simrossi/.brew/Cellar/valgrind/3.13.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==81269==    by 0x1004E9103: _nc_table_new (in /usr/lib/system/libsystem_notify.dylib)\n==81269==    by 0x1004E4FB5: _notify_init_globals (in /usr/lib/system/libsystem_notify.dylib)\n==81269==    by 0x1004F2AC0: _os_once (in /usr/lib/system/libsystem_platform.dylib)\n==81269==    by 0x1004F2A91: _os_alloc_once (in /usr/lib/system/libsystem_platform.dylib)\n==81269==    by 0x1004E50AD: _notify_fork_child (in /usr/lib/system/libsystem_notify.dylib)\n==81269==    by 0x1000A6B20: libSystem_atfork_child (in /usr/lib/libSystem.B.dylib)\n==81269==    by 0x10026F436: fork (in /usr/lib/system/libsystem_c.dylib)\n==81269==    by 0x100000F4A: main (in ./a.out)\n==81269==\n==81269== 2,064 (16 direct, 2,048 indirect) bytes in 1 blocks are definitely lost in loss record 52 of 55\n==81269==    at 0x100098586: malloc (in /Users/simrossi/.brew/Cellar/valgrind/3.13.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==81269==    by 0x1004E9103: _nc_table_new (in /usr/lib/system/libsystem_notify.dylib)\n==81269==    by 0x1004E4FC6: _notify_init_globals (in /usr/lib/system/libsystem_notify.dylib)\n==81269==    by 0x1004F2AC0: _os_once (in /usr/lib/system/libsystem_platform.dylib)\n==81269==    by 0x1004F2A91: _os_alloc_once (in /usr/lib/system/libsystem_platform.dylib)\n==81269==    by 0x1004E50AD: _notify_fork_child (in /usr/lib/system/libsystem_notify.dylib)\n==81269==    by 0x1000A6B20: libSystem_atfork_child (in /usr/lib/libSystem.B.dylib)\n==81269==    by 0x10026F436: fork (in /usr/lib/system/libsystem_c.dylib)\n==81269==    by 0x100000F4A: main (in ./a.out)\n==81269==\n==81269== LEAK SUMMARY:\n==81269==    definitely lost: 32 bytes in 2 blocks\n==81269==    indirectly lost: 4,096 bytes in 2 blocks\n==81269==      possibly lost: 72 bytes in 3 blocks\n==81269==    still reachable: 200 bytes in 6 blocks\n==81269==         suppressed: 24,157 bytes in 159 blocks\n==81269== Reachable blocks (those to which a pointer was found) are not shown.\n==81269== To see them, rerun with: --leak-check=full --show-leak-kinds=all\n==81269==\n==81269== For counts of detected and suppressed errors, rerun with: -v\n==81269== Use --track-origins=yes to see where uninitialised values come from\n==81269== ERROR SUMMARY: 5 errors from 4 contexts (suppressed: 13 from 13)\n==81268==\n==81268== HEAP SUMMARY:\n==81268==     in use at exit: 18,127 bytes in 159 blocks\n==81268==   total heap usage: 175 allocs, 16 frees, 24,271 bytes allocated\n==81268==\n==81268== 72 bytes in 3 blocks are possibly lost in loss record 26 of 42\n==81268==    at 0x100098BF2: calloc (in /Users/simrossi/.brew/Cellar/valgrind/3.13.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)\n==81268==    by 0x1005B1846: map_images_nolock (in /usr/lib/libobjc.A.dylib)\n==81268==    by 0x1005C4FE8: objc_object::sidetable_retainCount() (in /usr/lib/libobjc.A.dylib)\n==81268==    by 0x10000803B: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*), bool, bool) (in /usr/lib/dyld)\n==81268==    by 0x100008255: dyld::registerObjCNotifiers(void (*)(unsigned int, char const* const*, mach_header const* const*), void (*)(char const*, mach_header const*), void (*)(char const*, mach_header const*)) (in /usr/lib/dyld)\n==81268==    by 0x1001FF00A: _dyld_objc_notify_register (in /usr/lib/system/libdyld.dylib)\n==81268==    by 0x1005B1074: _objc_init (in /usr/lib/libobjc.A.dylib)\n==81268==    by 0x10019268D: _os_object_init (in /usr/lib/system/libdispatch.dylib)\n==81268==    by 0x10019263A: libdispatch_init (in /usr/lib/system/libdispatch.dylib)\n==81268==    by 0x1000A69D5: libSystem_initializer (in /usr/lib/libSystem.B.dylib)\n==81268==    by 0x100018A1A: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&amp;) (in /usr/lib/dyld)\n==81268==    by 0x100018C1D: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&amp;) (in /usr/lib/dyld)\n==81268==\n==81268== LEAK SUMMARY:\n==81268==    definitely lost: 0 bytes in 0 blocks\n==81268==    indirectly lost: 0 bytes in 0 blocks\n==81268==      possibly lost: 72 bytes in 3 blocks\n==81268==    still reachable: 200 bytes in 6 blocks\n==81268==         suppressed: 17,855 bytes in 150 blocks\n==81268== Reachable blocks (those to which a pointer was found) are not shown.\n==81268== To see them, rerun with: --leak-check=full --show-leak-kinds=all\n==81268==\n==81268== For counts of detected and suppressed errors, rerun with: -v\n==81268== Use --track-origins=yes to see where uninitialised values come from\n==81268== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 12 from 12)\n</code></pre>\n\n<p>I do not understand where those 32 bytes and 4096 bytes who leaks are coming from ? Is it coming from the standard library, I saw something like that on stackoverflow. I'm on Mac OS Sierra x86_64.</p>\n\n<p>EDIT: I'm not getting any leaks if I don't fork, it seem to be related to the function call. </p>\n"}, {"tags": ["c", "printing", "low-level"], "comments": [{"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1550063563, "post_id": 54670991, "comment_id": 96131852, "body": "&quot;printing&quot; on printer or on screen?"}, {"owner": {"reputation": 21, "user_id": 10835461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g8d7N1SyCXM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbclqxLERHHwKfDM0gzqcxEWFgFhg/mo/photo.jpg?sz=128", "display_name": "Servus", "link": "https://stackoverflow.com/users/10835461/servus"}, "edited": false, "score": 0, "creation_date": 1550063660, "post_id": 54670991, "comment_id": 96131919, "body": "on screen (in shell)."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1550063685, "post_id": 54670991, "comment_id": 96131934, "body": "You cannot move the &quot;cursor&quot; once the data is sent to stdout using standard C, without using some API calls or knowing the specifics of your console. However, progress bar can be rendered using the carriage return (<code>\\r</code>) character."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1550063687, "post_id": 54670991, "comment_id": 96131935, "body": "also : <a href=\"https://stackoverflow.com/questions/1508490/erase-the-current-printed-console-line\">Erase the current printed console line</a>"}, {"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 1, "creation_date": 1550063894, "post_id": 54670991, "comment_id": 96132075, "body": "On unix you would want to use a specialized library like curses/ncurses which manages the terminal capabilities for you thru all the termcap database knowledge. On other systems, other libraries..."}], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "edited": false, "score": 0, "creation_date": 1550064051, "post_id": 54671129, "comment_id": 96132189, "body": "The <code>Hello, </code> string is never shown that way"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "reply_to_user": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "edited": false, "score": 0, "creation_date": 1550064114, "post_id": 54671129, "comment_id": 96132226, "body": "I modified it to add <code>fflush(stdout)</code>. It also sleeps before it shows <code>World!</code>."}, {"owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "edited": false, "score": 0, "creation_date": 1550064204, "post_id": 54671129, "comment_id": 96132285, "body": "Nice! I did not know you could do that :)"}, {"owner": {"reputation": 4829, "user_id": 5407848, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/u6f21.jpg?s=128&g=1", "display_name": "Accountant \u0645", "link": "https://stackoverflow.com/users/5407848/accountant-%d9%85"}, "edited": false, "score": 0, "creation_date": 1554515439, "post_id": 54671129, "comment_id": 97793149, "body": "This is the first time I know about <code>fflush</code>, thank you."}], "tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": false, "score": 3, "last_activity_date": 1550063792, "creation_date": 1550063792, "answer_id": 54671129, "question_id": 54670991, "link": "https://stackoverflow.com/questions/54670991/low-level-printing-in-c/54671129#54671129", "title": "low level printing in C", "body": "<p>You can use the carriage return:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    printf(\"%s\", \"Hello, \");\n    fflush(stdout);\n    sleep(1);\n    printf(\"\\r%s\\n\", \"World!\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10835461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g8d7N1SyCXM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbclqxLERHHwKfDM0gzqcxEWFgFhg/mo/photo.jpg?sz=128", "display_name": "Servus", "link": "https://stackoverflow.com/users/10835461/servus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1550063846, "answer_count": 1, "score": 1, "last_activity_date": 1550063873, "creation_date": 1550063373, "question_id": 54670991, "link": "https://stackoverflow.com/questions/54670991/low-level-printing-in-c", "closed_reason": "Duplicate", "title": "low level printing in C", "body": "<p>I know how to print string or chars in C, but i'm wondering how i could modify a string that have already been printed in the screen (like when you install some packages and # fills the |####---->| 50%), without using any other functions than syscalls.</p>\n"}, {"tags": ["c", "embedded", "microcontroller", "pic"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1550063303, "post_id": 54670778, "comment_id": 96131680, "body": "&quot;When a struct if created the way I do [lots of word]&quot; -- please consider showing the actual code. We&#39;re pretty good at reading code, there&#39;s a risk you&#39;re not as good at describing code in other words."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1550064919, "post_id": 54670778, "comment_id": 96132740, "body": "Now the question title doesn&#39;t match the question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1550065249, "post_id": 54670778, "comment_id": 96132950, "body": "I&#39;not sure what you&#39;re asking here, but if the <code>arda_t</code> is a <i>global</i> or a <i>static</i> variable, the address will not change during the execution of the program. If it is a <i>local</i> variable, it&#39;s address will of course stay the same during the execution of the scope where it it declared, but the address is subject to change between different executions of the scope, but that doesn&#39;t matter because anyway a <i>local</i> variable does not even exist outside the scope where it is declared."}, {"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1550173419, "post_id": 54670778, "comment_id": 96182913, "body": "Depends on if it&#39;s a global or automatic variable for one. Why are you asking ?"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 3565580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb2192cfc39dfd5d6534ae87c5fba51?s=128&d=identicon&r=PG&f=1", "display_name": "Kayvon", "link": "https://stackoverflow.com/users/3565580/kayvon"}, "is_accepted": false, "score": 0, "last_activity_date": 1551295693, "creation_date": 1551295693, "answer_id": 54913096, "question_id": 54670778, "link": "https://stackoverflow.com/questions/54670778/change-a-variable-value-inside-a-struct-using-callback-from-adc-peripheral/54913096#54913096", "title": "change a variable value inside a struct using callback from adc peripheral", "body": "<p>It is static (at a set memory address) only <strong>if declared in a global scope</strong>. The memory address is decided by the linker and stays put.</p>\n\n<p>You said the struct was declared \"using a callback,\" implying that you're declaring this variable within a function. In that case, its address may be different each time the function is called as the variable only \"exists\" for the life/scope of that function.</p>\n\n<p>If you want a callback/interrupt to access the variable that already exists, you could make that variable global (available to the entire program) or static global (available just to that file).</p>\n"}], "owner": {"reputation": 65, "user_id": 11056312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6102fb11770c6eef397573a1d248861?s=128&d=identicon&r=PG&f=1", "display_name": "Arda30", "link": "https://stackoverflow.com/users/11056312/arda30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551295693, "creation_date": 1550062657, "last_edit_date": 1550064887, "question_id": 54670778, "link": "https://stackoverflow.com/questions/54670778/change-a-variable-value-inside-a-struct-using-callback-from-adc-peripheral", "title": "change a variable value inside a struct using callback from adc peripheral", "body": "<p>I am currently programming PIC microcontroller.</p>\n\n<p>When a struct is created with the way I do, does the address of the variables of that struct change everytime I try to access them?</p>\n\n<p>Or is it like a static variable, meaning the address is decided at compilation time and will not be changed throughout the program? (I think it does not change but I'm not sure.)</p>\n\n<pre><code>struct {\n   unsigned char age;\n} arda_t;\n</code></pre>\n"}, {"tags": ["c", "pointers", "tree"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10541149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9ad02f5be9a57d9753ffdb9d9858bc?s=128&d=identicon&r=PG&f=1", "display_name": "Reincarnationist", "link": "https://stackoverflow.com/users/10541149/reincarnationist"}, "edited": false, "score": 0, "creation_date": 1550063089, "post_id": 54670798, "comment_id": 96131553, "body": "Ye, I was thinking the same thing (*root_1)-&gt;name should just act like root_0 -&gt;name, but the thing is I would get an error says &quot;error: request for member \u2018name\u2019 in something not a structure or union&quot; when I run my code above. But ur code runs perfectly fine, i don&#39;t get why lol."}, {"owner": {"reputation": 39, "user_id": 10541149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9ad02f5be9a57d9753ffdb9d9858bc?s=128&d=identicon&r=PG&f=1", "display_name": "Reincarnationist", "link": "https://stackoverflow.com/users/10541149/reincarnationist"}, "edited": false, "score": 1, "creation_date": 1550063562, "post_id": 54670798, "comment_id": 96131851, "body": "wait a sec, is the parentheses around *root_1 is necessary in this case?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 39, "user_id": 10541149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9ad02f5be9a57d9753ffdb9d9858bc?s=128&d=identicon&r=PG&f=1", "display_name": "Reincarnationist", "link": "https://stackoverflow.com/users/10541149/reincarnationist"}, "edited": false, "score": 1, "creation_date": 1550063822, "post_id": 54670798, "comment_id": 96132022, "body": "Yeah, it&#39;s necessary because of operator precedence. <code>-&gt;</code> has higher precedence than unary <code>*</code>, so the braces are necessary. Otherwise it would be evaluated as <code>*(root_1-&gt;name)</code>, which doesn&#39;t work because <code>root_1-&gt;name</code> means &quot;the name of where <code>root_1</code> to&quot;, but it points to another pointer, and that doesn&#39;t have a name."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 3, "last_activity_date": 1550062709, "creation_date": 1550062709, "answer_id": 54670798, "question_id": 54670678, "link": "https://stackoverflow.com/questions/54670678/how-should-i-get-to-the-actual-node-with-a-pointer-to-pointer/54670798#54670798", "title": "How should I get to the actual node with a pointer to pointer?", "body": "<p>That's not how pointers work. <code>root_1</code> doesn't have a <code>name</code> or any other field - all it does is pointing to <code>root</code>. You don't have to set anything for <code>root_0</code> and <code>root_1</code>, you can access <code>root</code>'s name through them like this:</p>\n\n<pre><code>int main()\n{\n\n    struct Node root = { 1,\"hi\",NULL,NULL };\n    struct Node *root_0 = &amp;root;\n    struct Node **root_1 = &amp;root_0;\n\n    printf(\"root_0: %s\\n\", root_0-&gt;name);\n    printf(\"root_1: %s\\n\", (*root_1)-&gt;name);\n\n    return 0;\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<blockquote>\n  <p>root_0: hi</p>\n  \n  <p>root_1: hi</p>\n</blockquote>\n\n<p>So in other words, <code>(*root_1)-&gt;name</code> is <code>root_0-&gt;name</code>, which is <code>root.name</code>. Perhaps it's less confusing if you consider that <code>root_0-&gt;name</code> is the same as writing <code>(*root_0).name</code> and <code>(*root_1)-&gt;name</code> is like writing <code>(**root_1).name</code>. You just add a <code>*</code> per pointer level.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 8484805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1646240402077569/picture?type=large", "display_name": "Jon Nimrod", "link": "https://stackoverflow.com/users/8484805/jon-nimrod"}, "is_accepted": false, "score": 0, "last_activity_date": 1550069519, "creation_date": 1550069519, "answer_id": 54673022, "question_id": 54670678, "link": "https://stackoverflow.com/questions/54670678/how-should-i-get-to-the-actual-node-with-a-pointer-to-pointer/54673022#54673022", "title": "How should I get to the actual node with a pointer to pointer?", "body": "<p>It's just that * has a lower priority than ->.</p>\n\n<p>*foo->bar = *(foo->bar) != (*foo)->bar.</p>\n\n<p>So in your case you'd need (*root_1)->name = s;</p>\n"}], "owner": {"reputation": 39, "user_id": 10541149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9ad02f5be9a57d9753ffdb9d9858bc?s=128&d=identicon&r=PG&f=1", "display_name": "Reincarnationist", "link": "https://stackoverflow.com/users/10541149/reincarnationist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54670798, "answer_count": 2, "score": 2, "last_activity_date": 1568990658, "creation_date": 1550062366, "last_edit_date": 1568990658, "question_id": 54670678, "link": "https://stackoverflow.com/questions/54670678/how-should-i-get-to-the-actual-node-with-a-pointer-to-pointer", "title": "How should I get to the actual node with a pointer to pointer?", "body": "<p>I would like to set root_1's name to be \"hi\", just like the output of the current output of this code, which is mentioned below. Unfortunately, it doesn't work.</p>\n\n<pre><code>struct Node \n{\n    int num;\n    char *name;\n    struct Node *child;     \n    struct Node *sibling;   \n};\n\nint main()\n{\n\n    struct Node root = {1,\"hi\",NULL,NULL};\n    struct Node *root_0 = &amp;root;\n    struct Node **root_1 = &amp;root_0;\n    char *s = root.name; //s is now hi\n    root_0 -&gt; name = s;\n    //*root_1 -&gt; name = s;  //?????\n    printf(\"%s\\n\", root_0 -&gt; name);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "multithreading", "linux-kernel"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1550064436, "post_id": 54670652, "comment_id": 96132427, "body": "Just wait for complete for every single thread, one by one. As you run threads in a <code>for</code> loop, you may also use <code>for</code> loop for wait every thread to complete."}, {"owner": {"reputation": 272, "user_id": 7431886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d8326e9514621ee4c7ef71504a4e171?s=128&d=identicon&r=PG&f=1", "display_name": "Mike R", "link": "https://stackoverflow.com/users/7431886/mike-r"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550070667, "post_id": 54670652, "comment_id": 96136534, "body": "I don&#39;t want the threads to run sequentially. The threads should run in parallel."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550070873, "post_id": 54670652, "comment_id": 96136675, "body": "<i>Sequential waiting</i> for thread&#39;s completion is by no means a <i>sequential running</i> the threads. The threads can still run in parallel, and can finish in any order."}], "answers": [{"tags": [], "owner": {"reputation": 272, "user_id": 7431886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d8326e9514621ee4c7ef71504a4e171?s=128&d=identicon&r=PG&f=1", "display_name": "Mike R", "link": "https://stackoverflow.com/users/7431886/mike-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1554072048, "last_edit_date": 1554072048, "creation_date": 1554071727, "answer_id": 55446078, "question_id": 54670652, "link": "https://stackoverflow.com/questions/54670652/how-to-join-multiple-threads-in-linux-kernel/55446078#55446078", "title": "How to join multiple threads in Linux kernel", "body": "<p>After some experimentation, this seems to be the best way to simulate a rudimentary thread join in the kernel. I used the completion method, not the semaphore method since I found it more straightforward.</p>\n\n<pre><code>struct my_thread_data {\n    struct completion *comp;\n    ... // anything else you want to pass through\n};\n\nvoid *foo(void *arg) {\n    // doing something\n    return NULL;\n}\n\nint init_module(void) {\n    struct task_struct *threads[5];\n    struct completion comps[5];\n    struct my_thread_data data[5];\n\n    int i;\n\n    for (i=0; i&lt;5; i++) {\n        init_completion(comps + i);\n        data[i].comp = comps + i;\n        thread[i] = kthread_run(&amp;foo, (void*)(data + i), \"ThreadName\");\n    }\n\n    // wait here until all 5 threads are complete\n    for (i=0; i&lt;5; i++) {                                                                             \n        wait_for_completion(comps + i);                                                                                                                \n    }\n\n    // do something else once threads are complete\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 272, "user_id": 7431886, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d8326e9514621ee4c7ef71504a4e171?s=128&d=identicon&r=PG&f=1", "display_name": "Mike R", "link": "https://stackoverflow.com/users/7431886/mike-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 55446078, "answer_count": 1, "score": 1, "last_activity_date": 1554072048, "creation_date": 1550062281, "last_edit_date": 1550062736, "question_id": 54670652, "link": "https://stackoverflow.com/questions/54670652/how-to-join-multiple-threads-in-linux-kernel", "title": "How to join multiple threads in Linux kernel", "body": "<p>How can I make sure multiple threads in the Linux kernel have completed before proceeding? </p>\n\n<p>See the example code (slightly modified) from a previous question (<a href=\"https://stackoverflow.com/questions/29959159/how-to-join-a-thread-in-linux-kernel\">How to join a thread in Linux kernel?</a>)</p>\n\n<pre><code>void *func(void *arg) {\n    // doing something\n    return NULL;\n}\n\nint init_module(void) {\n    struct task_struct* thread[5];\n    int i;\n\n    for (i=0; i&lt;5; i++) {\n        thread[i] = kthread_run(func, (void*) arg, \"TestThread\");\n        wake_up_process(thread[i]);\n    }\n\n    // wait here until all 5 threads are complete\n\n    // do something else\n\n    return 0;\n}\n</code></pre>\n\n<p>The answer from this previous question is quite detailed (<a href=\"https://stackoverflow.com/a/29961182/7431886\">https://stackoverflow.com/a/29961182/7431886</a>), which is great, but it only addresses the scope of the original question (waiting for only a specific one of the threads to finish).</p>\n\n<p>How can I generalize either the semaphore or completion methods detailed in this answer to wait for N threads instead of just a specific one?</p>\n"}, {"tags": ["c", "azure", "printf", "azure-iot-hub", "azure-iot-edge"], "answers": [{"comments": [{"owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "edited": false, "score": 0, "creation_date": 1550066776, "post_id": 54671938, "comment_id": 96133930, "body": "Thanks a lot for this clear answer, exactly what I was looking for."}], "tags": [], "owner": {"reputation": 2298, "user_id": 7534341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca8bc23d0bc08b61152cc8cea9d7764?s=128&d=identicon&r=PG&f=1", "display_name": "Ren&#233;", "link": "https://stackoverflow.com/users/7534341/ren%c3%a9"}, "is_accepted": true, "score": 4, "last_activity_date": 1550066242, "creation_date": 1550066242, "answer_id": 54671938, "question_id": 54670587, "link": "https://stackoverflow.com/questions/54670587/understanding-azure-iot-edge-modules/54671938#54671938", "title": "Understanding Azure IoT Edge Modules", "body": "<p>The output is written to the modules logfile. You can inspect it by logging into your virtual machine using ssh and then using the following command:</p>\n\n<pre><code>sudo iotedge logs &lt;yourModuleName&gt;\n</code></pre>\n\n<p>Adding the -f option makes it follow new output and with --tail  you can limit the output to the last  lines of the logfile.</p>\n\n<pre><code>sudo iotedge logs &lt;yourModuleName&gt; -f --tail 100\n</code></pre>\n\n<p>displays the last 100 lines of the logfile and adds new output coming in.</p>\n"}], "owner": {"reputation": 1179, "user_id": 6240756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-04YIAx_01kY/AAAAAAAAAAI/AAAAAAAAnhw/V94DoARneK4/photo.jpg?sz=128", "display_name": "iAmoric", "link": "https://stackoverflow.com/users/6240756/iamoric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 54671938, "answer_count": 1, "score": 1, "last_activity_date": 1550066242, "creation_date": 1550062100, "question_id": 54670587, "link": "https://stackoverflow.com/questions/54670587/understanding-azure-iot-edge-modules", "title": "Understanding Azure IoT Edge Modules", "body": "<p>I'm very new with Azure and IoT Edge, and I'm trying to understand how modules works.</p>\n\n<p>I followed this good tutorial (<a href=\"https://docs.microsoft.com/en-us/azure/iot-edge/tutorial-c-module\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/azure/iot-edge/tutorial-c-module</a>) and everything seems to run properly.</p>\n\n<p>My question is about the <code>printf</code>  that are in the code. (for example on the point 3 of here : <a href=\"https://docs.microsoft.com/en-us/azure/iot-edge/tutorial-c-module#update-the-module-with-custom-code\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/azure/iot-edge/tutorial-c-module#update-the-module-with-custom-code</a>)</p>\n\n<pre><code>if (NULL == messageInstance)\n{\n    printf(\"Failed allocating 'MESSAGE_INSTANCE' for pipelined message\\r\\n\");\n}\n</code></pre>\n\n<p>Where are the output printed ? </p>\n\n<p>Normally it would be on the standard output, but my module is running in background on a virtual machine. Obviously I have access to this VM. How can I see it ?</p>\n\n<p>It would be great for me, in order to have a better understanding of how modules work and communicate together and with the IoT Hub.</p>\n\n<p>Thanks for helping me</p>\n"}, {"tags": ["c", "macos", "terminal", "binary"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1550062267, "post_id": 54670343, "comment_id": 96131027, "body": "Please show the code that parses the command line arguments and opens the input file based on the args and the code that reads the file name input and tries to open the file."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1550062907, "post_id": 54670343, "comment_id": 96131441, "body": "You should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1550062922, "post_id": 54670343, "comment_id": 96131454, "body": "Maybe because the current directory isn&#39;t what you think. Use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getcwd.html\" rel=\"nofollow noreferrer\"><code>getcwd</code></a> to get the current working directory and print that, this may give a hint. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also read this: <a href=\"https://stackoverflow.com/questions/298510/how-to-get-the-current-directory-in-a-c-program\" title=\"how to get the current directory in a c program\">stackoverflow.com/questions/298510/&hellip;</a>"}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "edited": false, "score": 0, "creation_date": 1550065644, "post_id": 54670343, "comment_id": 96133191, "body": "I&#39;ve added the code that reads the file name."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1550065826, "post_id": 54670343, "comment_id": 96133338, "body": "How are you calling <code>GetFileName()</code>?  You need to provide a <b>complete</b> example, because that ancient style of function definition can be <i>dangerous</i> if you mix it with a current function prototype."}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "edited": false, "score": 0, "creation_date": 1550065919, "post_id": 54670343, "comment_id": 96133394, "body": "Yes, just realized that. I&#39;ve added that part.  But again, it works on windows and Linux. Only not on OSX"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1550066123, "post_id": 54670343, "comment_id": 96133531, "body": "Do you have a function prototype for <code>GetFileName()</code> in the file that calls it?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550067577, "post_id": 54670343, "comment_id": 96134403, "body": "By the way, the current name of the operating system is macOS, not OS X."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550071328, "post_id": 54670343, "comment_id": 96136989, "body": "@Marnix What about the 3rd comment? Still waiting for a clarification..."}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550071870, "post_id": 54670343, "comment_id": 96137303, "body": "@Jabberwocky: have no access to the code at this moment. Will check tonight when I get home and follow-up."}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "edited": false, "score": 0, "creation_date": 1550077034, "post_id": 54670343, "comment_id": 96140466, "body": "It&#39;s the current directory, indeed.  The program and input file are in: Users/mac/Documents/XVAN/escape.  When I start from the command line in this directory, that&#39;s also the path so it works.  When I doubleclick the program in the Finder, the path is /Users/mac. When I prefix the file name that I enter with the rest of the path it works."}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550077631, "post_id": 54670343, "comment_id": 96140782, "body": "@Jabberwocky: thanks a lot for your path suggestion."}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1550077637, "post_id": 54670343, "comment_id": 96140784, "body": "@Andrew Henle: Also thanks to you. I did not know about default argument promotion and I will change my function definitions as you suggested."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550077711, "post_id": 54670343, "comment_id": 96140817, "body": "@Marnix and? Any conclusions? Is the path obtained with <code>getcwd</code> the path you expect?"}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550078044, "post_id": 54670343, "comment_id": 96141004, "body": "@Jabberwocky: in the case that I doubleclicked from the finder not. It returns my home directory. In the case that I use a terminal, cd to the directory with the program and start it with ./program then yes. Apparently, doubleclicking gives the home directory as the path and not the directory the doubleclicked file is in. I don&#39;t know why that is, because I don&#39;t have that on Linux (Mint). So I think, I&#39;ll use getcwd() to catch the path and prefix the filename with it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550078217, "post_id": 54670343, "comment_id": 96141078, "body": "@Marnix prefixing the filename with what you get from <code>getcwd()</code> won&#39;t help, latter is already the current directory."}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550080877, "post_id": 54670343, "comment_id": 96142526, "body": "@jabberwocky: you&#39;re right. I must find a way to set the program&#39;s home directory to the directory it is currently in. :-("}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1550081901, "post_id": 54670343, "comment_id": 96143026, "body": "@Marnix there is no universdal solution, this might be interesting: <a href=\"https://stackoverflow.com/q/933850/898348\">stackoverflow.com/q/933850/898348</a>"}, {"owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "edited": false, "score": 0, "creation_date": 1550086162, "post_id": 54670343, "comment_id": 96144979, "body": "I got something. By using _NSGetExecutablePath() and realpath() I can get the full path, including the name of the program (I actually tested this). So if I strip /program_name from the end of the path name returned by realpath and then append the file name entered by the user it should work, I think. I&#39;m going to try this and will post the code if it works."}], "answers": [{"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1550066438, "creation_date": 1550066438, "answer_id": 54671993, "question_id": 54670343, "link": "https://stackoverflow.com/questions/54670343/c-program-on-macos-cannot-open-its-input-file/54671993#54671993", "title": "C-program on macOS cannot open its input file", "body": "<blockquote>\n  <p>I run the very same source code on linux and windows where it works ok</p>\n</blockquote>\n\n<p>That is meaningless.</p>\n\n<p>This is an old K&amp;R-style function definition:</p>\n\n<pre><code>void GetFileName(nr_args, args, filename, json)\n int  nr_args;\n char **args;\n char *filename;\n int* json;\n{\n   ...\n</code></pre>\n\n<p>You can not call that function safely if the calling code uses a function prototype. A K&amp;R-defined function expects all of its arguments to have underdone <a href=\"https://stackoverflow.com/questions/1255775/default-argument-promotions-in-c-function-calls\">default argument promotion</a>.  A prototype for the function means the caller won't perform those promotions.  The mismatch will result in undefined behavior.</p>\n\n<p>Don't use such ancient functions.  You can't use them with a prototype, and without a prototype you have <strong>no</strong> type safety in the function call.</p>\n\n<p>Use a proper, C standard-compliant function definition:</p>\n\n<pre><code>void GetFileName( int  nr_args, char **args, char *filename, int* json )\n{\n...\n</code></pre>\n\n<p>And then provide a proper prototype for all calls to the function.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "is_accepted": false, "score": 0, "last_activity_date": 1550174900, "creation_date": 1550174900, "answer_id": 54698305, "question_id": 54670343, "link": "https://stackoverflow.com/questions/54670343/c-program-on-macos-cannot-open-its-input-file/54698305#54698305", "title": "C-program on macOS cannot open its input file", "body": "<p>I made the following routine that works for me.</p>\n\n<p>So, as an example:</p>\n\n<ul>\n<li>if the program is in location /usr/mac/my-name/programs/</li>\n<li>and the input filename that was entered is input.dat</li>\n</ul>\n\n<p>Then this routine will return: /usr/mac/my-name/programs/input.dat</p>\n\n<p>Thanks for all your help.</p>\n\n<pre><code>#include &lt;sys/param.h&gt;    /* realpath()            */\n#include &lt;limits.h&gt;       /* PATH_MAX              */\n#include &lt;mach-o/dyld.h&gt;  /* _NSGetExectablePath() */\n\nchar *GetFullPath(const char*);\n\n#define MAX_FILENAME_LEN 100   /* or another value */\n\n\nchar *GetFullPath(const char *filename)\n{\n  char      path_buf[PATH_MAX + 1];\n  char      resolved_name[PATH_MAX + 1];\n  char      *real_path;\n  char      *return_path;\n  uint32_t  buf_size = sizeof(path_buf);\n  int       index    = 1;\n\n  /* this functions returns the full path of the current */\n  /* running application appended with var 'filename' at */\n  /* the end. In case of an error it returns NULL.       */\n\n  if ((return_path = (char *) malloc(MAX_FILENAME_LEN)) == NULL) {\n    printf(\"GetFullPath(): error in Malloc()\\n\");\n    return(NULL);\n  }\n\n  /* get relative path */\n  if (_NSGetExecutablePath(path_buf, &amp;buf_size) != 0) {\n    /* buffer too small */\n    printf(\"File Path too long.\");\n    free(return_path);\n    return(NULL);\n  }\n\n  /* convert to absolute path */\n  if ( (real_path = realpath(path_buf, resolved_name)) == NULL) {\n    printf(\"Could not determine path.\\n\");\n    free(return_path);\n    return(NULL);\n  }\n\n  /* strip the application name from the end of the path */\n  index = strlen(real_path) - 1;\n  while (real_path[index] != '/') {\n    index--;\n  }\n\n  /* now check if there's enough room in return_path */\n  if (strlen(real_path) + strlen(filename) &gt;= MAX_FILENAME_LEN) {\n    printf(\"File path too long.\\n\");\n    free(return_path);\n    return(NULL);\n  }\n\n  /* there's enough room, copy path and filename to return_path */\n  strncpy(return_path, real_path, index+1);\n  /* do not try to free() real_path */\n  return_path[index+1] = '\\0';\n  strncat(return_path, filename, strlen(filename));\n\n  return(return_path);  /* caller must free() return_path */\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5773114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf27d6132eee3dd9b798e21c5d4ee17?s=128&d=identicon&r=PG&f=1", "display_name": "Marnix", "link": "https://stackoverflow.com/users/5773114/marnix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1550174900, "creation_date": 1550061337, "last_edit_date": 1550067907, "question_id": 54670343, "link": "https://stackoverflow.com/questions/54670343/c-program-on-macos-cannot-open-its-input-file", "title": "C-program on macOS cannot open its input file", "body": "<p>I have a C-program built on macOS High Sierra using gcc and a makefile. The first thing the program does is read a binary inputfile. The filename can be either specified from the terminal command line together with the shell command or the program will ask for it when it\u2019s not specified.</p>\n\n<p>My issue is that when the input file is not specified together with the shell command, the program returns an error, saying it cannot open the file.</p>\n\n<p>Here\u2019s what works and what doesn\u2019t:\n(program and input file are in the same directory)</p>\n\n<ol>\n<li>open terminal</li>\n<li>from the command line type:\n\n<blockquote>\n  <p>./program_name \u2013i input.dat</p>\n</blockquote></li>\n</ol>\n\n<p>=> works fine</p>\n\n<ol>\n<li>open terminal</li>\n<li>from the commandline type:\n\n<blockquote>\n  <p>./program_name</p>\n</blockquote></li>\n<li>program prompts:\nInputfile:</li>\n<li>I type: input.dat</li>\n</ol>\n\n<p>=> error opening file</p>\n\n<ol>\n<li>open Finder and go to directory with program and input file</li>\n<li>doubleclick on program_name icon</li>\n<li>program starts in terminal and prompts:\nInputfile:</li>\n<li>I type: input.dat</li>\n</ol>\n\n<p>=> error opening file</p>\n\n<p>I run the very same source code on linux and windows where it works ok, so I think it must be an OS thing that I don't understand?</p>\n\n<p>I can add that the program was untrusted because it doesn't come from the app store. CTRL-click on the icon solved that.</p>\n\n<p>--EDIT - sorry for not adding the verifyable code.</p>\n\n<p>To clarify: the argc/argv part works fine. it's the last section of the routine where it prompts for the file name where it goes wrong. Maybe it's indeed the path as Jabberwocky suggested. I'll check on that tonight and will follow-up here.</p>\n\n<pre><code>void GetFileName(nr_args, args, filename, json)\n int  nr_args;\n char **args;\n char *filename;\n int* json;\n{\n  int i = 1;\n\n  filename[0]  = '\\0';\n\n  /* the command 'interpreter' itself is stored in argv[0] */\n\n  while (i&lt;nr_args) {\n    if (strcmp(args[i], \"-e\") == 0) {\n  /* we cannot set the json flag here, because */\n  /* flags have not been initialized yet       */\n  *json = 1;\n  i++;\n}\nelse {\n  if (strcmp(args[i], \"-i\") == 0) {\n    if (nr_args &gt; i+1) {\n      /* inputfile was specified */\n      strncpy(filename, args[++i], MAX_ID_LENGTH);\n      i++;\n        }\n      }\n      else {\n        PrintError(41, NULL, args[i]);\n        i++;\n      }\n    }\n  }\n\n  if (filename[0] == '\\0') {\n    printf(\"\\n\\nInputfile: \");\n    scanf(\"%19s\", filename);\n    filename[MAX_ID_LENGTH] = '\\0';\n    /* clear the input buffer, to prevent parsing an */\n    /* empty string as the first user command        */\n    /* always do a getchar() independent of OS */\n    getchar();\n\n    printf(\"\\n\");\n  }\n}\n</code></pre>\n\n<p>And this is the part where the file is opened (from main() )</p>\n\n<pre><code>  /* Get filename */\n  GetFileName(argc, argv, inputfile, &amp;json);\n\n  /* Open the datafile */\n  if ((datafile = fopen(inputfile, \"rb\")) == NULL) {\n    PrintError(40, NULL, inputfile);\n    ExitProgram();\n    return(OK);\n  }\n</code></pre>\n\n<p>EDIT2-- As per Andrew Henle's reply, this is the prototype.</p>\n\n<pre><code>void    GetFileName(int, char**, char*, int*);\n</code></pre>\n\n<p>The function is called from the same file as it is defined in.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1550060861, "post_id": 54670102, "comment_id": 96130204, "body": "<code>getc()</code> returns <b>one</b> character (cast to an int) or EOF. If that is too much for you, you should not call it."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1550060863, "post_id": 54670102, "comment_id": 96130205, "body": "You can use <code>fread</code> to read blocks from the file."}, {"owner": {"reputation": 391, "user_id": 1487628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96dc0d6a8a737b5e651335e855f942ae?s=128&d=identicon&r=PG", "display_name": "vmario", "link": "https://stackoverflow.com/users/1487628/vmario"}, "edited": false, "score": 3, "creation_date": 1550060952, "post_id": 54670102, "comment_id": 96130250, "body": "I&#39;ve written something like this in <a href=\"https://stackoverflow.com/questions/54648517/why-does-this-code-give-warning-format-s-expects-type-char-but-argument/54650085#54650085\">another thread</a>. Maybe <code>fscanf()</code> in loop will be suitable for you?"}, {"owner": {"reputation": 23, "user_id": 9412959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7Y60.jpg?s=128&g=1", "display_name": "Akhil Arya", "link": "https://stackoverflow.com/users/9412959/akhil-arya"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1550061070, "post_id": 54670102, "comment_id": 96130331, "body": "while() {        fread(&quot;%c&quot;, &amp;firstName);             fread(&quot;%c&quot;, &amp;SecondName);                     fread(&quot;%c&quot;, &amp;id); } Will this work? @WernerHenze"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1550061795, "post_id": 54670102, "comment_id": 96130784, "body": "You did not read the man page for <code>fread</code>, but you should do so."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550062562, "post_id": 54670102, "comment_id": 96131201, "body": "This can be done with the fscanf() function. we can give the format specifier in such a manner that it can read multiple format at once, it works similar to scanf(). But the problem with fscanf() is that it will be dependent on the content in the file. we should know the way in which the file content are stored. also we have to give proper width and precision specifier with format specifier  to make sure that content read from the file will not over flow the assigned variable."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550063639, "post_id": 54670102, "comment_id": 96131902, "body": "Following show a simple example but for loop it will become complicated: if the file have number first and then name with a space in each line then you can do: fscanf (fd, &quot;%d %[^\\n]&quot;, &amp;id, &amp;name); this will fetch the first integer in id and next string in name. but this have draw back, you have to make sure of reading the next line properly as it will consider new line character again. so you have to write some more logic to fetch next line properly."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11056332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d06405332404dc1d8a7cf504571650?s=128&d=identicon&r=PG&f=1", "display_name": "unnikrishnan", "link": "https://stackoverflow.com/users/11056332/unnikrishnan"}, "is_accepted": false, "score": -3, "last_activity_date": 1550118045, "last_edit_date": 1550118045, "creation_date": 1550062827, "answer_id": 54670842, "question_id": 54670102, "link": "https://stackoverflow.com/questions/54670102/reading-different-datatype-from-txt-file/54670842#54670842", "title": "Reading different datatype from .txt file", "body": "<p>Please try fread() function for reading a record from a file and fwrite(), it's used to write a record to the file.\neg: fwrite(&amp;sd,sizeof(sd),1,input);\nfor student record no need of struct StudentDetails *next; (we are not doing anything like linked list, we just write different student record in a file. So you just define structure variable as StudentDetails SD in main that is more than enough each iteration of loop you can write one student record to file.)\nfor reading you can use</p>\n\n<pre><code>while(fread(&amp;sd,sizeof(sd),1,input) &gt; 0 )\n{\n   printf(\"Name:%s\",sd.name);//this you can do ...      \n}\n</code></pre>\n\n<p>I hope it will help you :)</p>\n"}], "owner": {"reputation": 23, "user_id": 9412959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7Y60.jpg?s=128&g=1", "display_name": "Akhil Arya", "link": "https://stackoverflow.com/users/9412959/akhil-arya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1550165508, "creation_date": 1550060526, "last_edit_date": 1550165508, "question_id": 54670102, "link": "https://stackoverflow.com/questions/54670102/reading-different-datatype-from-txt-file", "title": "Reading different datatype from .txt file", "body": "<p>I want to read data from a text file and store the data.</p>\n\n<p>I can not all the data using <code>getc()</code> as it will take all the data at once, and I do not know how to distribute that for my use.</p>\n\n<p>Data is in form of:<br>\nJohn<br>\nSebastian<br>\n1<br>\n2 //Number of notes(So, when I read this value and run a loop to collect all \n    notes)<br>\n12 //note 1<br>\n21 //note 2  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct StudentDetails\n{\n    char firstName[100], secondName[100];\n    int notes[100][30], id;\n    struct StudentDetails *next;\n};\n\nint main()\n{\n    FILE *input;\n    input = fopen(\"input.txt\", \"r\");\n\n    if (!input)\n    {\n\n        while (input != EOF)\n        {\n             //what to do to store in different variable rather in one.\n        }\n    }\n    else\n    {\n        printf(\"File not found\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550060228, "post_id": 54669960, "comment_id": 96129862, "body": "First attempt to format the code consistently. Then use a <i>debugger</i> to step through the code line by line. It could also help to split complex expressions and statements into multiple smaller expressions and statements."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1550060367, "post_id": 54669960, "comment_id": 96129935, "body": "If you don&#39;t understand how, I suggest you rewrite the code. <i>Your for loop is absolutely not idiomatic</i>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1550061122, "post_id": 54669960, "comment_id": 96130366, "body": "A finite state machine would yield more readable code, IMHO.(and you should probably handle strings, too)"}, {"owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550061224, "post_id": 54669960, "comment_id": 96130419, "body": "thank u !! sry for my code i am new here i wish u the best!"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1550061237, "post_id": 54669960, "comment_id": 96130428, "body": "Please check if you copied the code without errors. In your question you cite <code>for(j+=2; s[++j] &amp;&amp; (s[j-1]!=&#39;*&#39; || s[j]!=&#39;&#47;&#39; || !j++); );</code> but the code block contains <code>for(j+=2; ++j &amp;&amp; (s[j-1]!=&#39;*&#39; || s[j]!=&#39;&#47;&#39; || !j++); );</code> <code>s[++j]</code> checks if the next character is not 0 (probably correct), <code>++j</code> checks if the next <b>index</b> is not 0 (probably wrong)."}, {"owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550061365, "post_id": 54669960, "comment_id": 96130513, "body": "the both work good and make the same"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1550062021, "post_id": 54669960, "comment_id": 96130904, "body": "<code>s[++j]</code> as the first part of the <code>for</code> loop&#39;s condition will terminate the loop when the end of the string is reached. This would handle a string that ends before terminating the comment, e.g. <code>some_function(); &#47;* incomplete comment</code>. In contrast to this <code>++j</code> at the same place would terminate the loop when the index wraps around to 0 which is most likely not what you want. I think the <code>s[i]=&#39;\\0&#39;;</code> after the <code>printf</code> is wrong. It should be <code>T[i]=&#39;\\0&#39;;</code> before the <code>printf</code>"}, {"owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550062106, "post_id": 54669960, "comment_id": 96130939, "body": "thank u for reply ! ur right ! i traied."}, {"owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550062197, "post_id": 54669960, "comment_id": 96130990, "body": "but for(i=j=0; s[j] ;  ) will work alon like this : s[0],s[1]...&#39;\\0&#39; ? or how ??"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1550062461, "post_id": 54669960, "comment_id": 96131156, "body": "<code>!j++</code> doesn&#39;t make sense, the check will likely be optimized away by the compiler since <code>j</code> will never get back to <code>0</code>. This code will fail if the comment is not terminated, because the inner loop doesn&#39;t check for null characters. The <code>(s[j-1]!=&#39;*&#39; || s[j]!=&#39;&#47;&#39; || !j++)</code> is a really bad piece of C code, do yourself a favor, delete it and write it from scratch."}, {"owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550063094, "post_id": 54669960, "comment_id": 96131555, "body": "i didnt understand too !j++ what that meaning ?!"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1550063179, "post_id": 54669960, "comment_id": 96131611, "body": "@M.Rostom: it means &quot;repeat the loop until <code>j</code> becomes <code>0</code>&quot;, which will never happen. Ask yourself what happens if you pass a string which does not terminate its comment, e.g. <code>&quot;something &#47;* comment&quot;</code>. It&#39;s also a bad practice to increment the variable inside the conditional expression, standard form of the for loop statement is <code>for (int i = 0; i &lt; len; i++) { ... }</code>, and you should stick to it."}, {"owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550063704, "post_id": 54669960, "comment_id": 96131944, "body": "when i remove !j++ it donst work good"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1550066993, "post_id": 54669960, "comment_id": 96134050, "body": "@Groo Why did you vote &quot;unclear what you&#39;re asking&quot;? There are two clear questions &quot;How do the loops work?&quot; and &quot;Why does !j++ work?&quot;."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1550067316, "post_id": 54669960, "comment_id": 96134241, "body": "@M.Rostom You wrote &quot;sry for my code&quot;. I don&#39;t believe that you wrote it because it&#39;s written in a very strange way which requires some knowledge while you didn&#39;t understand it. Now that you know what it does you should rewrite it in a more readable style."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1550069871, "post_id": 54669960, "comment_id": 96135983, "body": "I guess the <code>s[i]=&#39;\\0&#39;;</code> is from the original source of this code which did not create the result in a separate array <code>T</code> but modified the original string <code>s</code>. Use your favourite search engine to find &quot;remove_cmmnt&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550067785, "post_id": 54671209, "comment_id": 96134545, "body": "thanks man !!! can i give u 10 euro just like small thanks"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "reply_to_user": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550068499, "post_id": 54671209, "comment_id": 96135043, "body": "@M.Rostom No, but you can donate to a charitable organization: <a href=\"https://www.ekp.de/\" rel=\"nofollow noreferrer\">ekp.de</a> On the top left there should be a yellow button with the text &quot;Spenden&quot; (=donate)."}, {"owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550075016, "post_id": 54671209, "comment_id": 96139238, "body": "sorry if we wirt char <i>str&quot;&#39;HALLO /*5435efg*/WEL/*T&quot;; it will think that /</i> comment too how i can fix it to know that not allowd to delete becouse its not a comment"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "reply_to_user": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "edited": false, "score": 0, "creation_date": 1550076255, "post_id": 54671209, "comment_id": 96140041, "body": "@M.Rostom Sorry, it was some fun to analyze and explain the strange code, but it is bad design and very difficult to extend. If you want to modify the code, please rewrite it in a readable and idiomatic manner first. When you are done you should ask a separate question about your difficulties to add string handling. (Also think of <code>\\&quot;</code> in a string.) See wildplassers&#39;s comment about a finite state machine. (BTW: Don&#39;t copy bad code and pretend that you have written it. You might get into trouble when you get questions about it.)"}], "tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": true, "score": 2, "last_activity_date": 1550066128, "last_edit_date": 1550066128, "creation_date": 1550063995, "answer_id": 54671209, "question_id": 54669960, "link": "https://stackoverflow.com/questions/54669960/string-fun-to-remove-a-commnt/54671209#54671209", "title": "String-fun_to_remove a commnt", "body": "<p>Here is some explanation with two fixes.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid remove_cmmnt(char *s)\n{ \n    int k=0;\n\n    char *p=s; // The additional pointer is unnecessary, you could use 's' instead of 'p' in the next line.\n    for( k=0;p[k];k++); // the same as k = strlen(s); probably one byte too short for array size\n\n    k++; // added to fix wrong array size\n\n    char T[k]; // array should be big enough to hold original string including '\\0'\n\n    int i,j; // j is source index, i is destination index\n    for(i=j=0; // initialize source and destination index\n        s[j] // terminate loop if we reached end of source string\n        ;  ) // no explicit incrementing of a loop index\n    {\n\n        if(s[j]=='/' &amp;&amp;  s[j+1]=='*') // start of comment at current and next position. We can check 2 characters because the loop condition already checked for not '\\0' and at least the terminating '\\0' should follow.\n            for(j+=2; // skip 2 characters ('/' and '*')\n                // The complicated condition with index incrementing makes use of short-circuit evaluation\n                s[++j] &amp;&amp; // always evaluated. increment index, terminate loop if end of string is reached.\n                (s[j-1]!='*' || // continue loop and stop evaluating condition if previous character is not 1st char '*' of comment termination\n                s[j]!='/' || // continue loop and stop evaluating condition if current char is not 2nd char '/' of comment termination\n                !j++) // This is reached only if we found the end of the comment. Increment index and (because normally j!=0) evaluate as false to terminate the loop. This skips the terminating '/' we have just found.\n                ; ); // no explicit incrementing of a loop index\n        else // if we didn't find a comment start\n            T[i++]=s[j++]; // copy current character from original to modified copy\n    }\n\n    T[i]='\\0'; // T instead of s as in the question and before printf. terminate modified copy.\n    printf(\"%s\",T);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11052571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4fc686596d013c16ee0ad2b604c4d?s=128&d=identicon&r=PG&f=1", "display_name": "M.Rostom", "link": "https://stackoverflow.com/users/11052571/m-rostom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1550066395, "accepted_answer_id": 54671209, "answer_count": 1, "score": 0, "last_activity_date": 1550066128, "creation_date": 1550060054, "last_edit_date": 1550060888, "question_id": 54669960, "link": "https://stackoverflow.com/questions/54669960/string-fun-to-remove-a-commnt", "closed_reason": "Needs details or clarity", "title": "String-fun_to_remove a commnt", "body": "<p>I have a function to remove a comment, or more than one, but I don't understand how it works.</p>\n\n<p>How do the loops work? There is </p>\n\n<pre><code>for(j+=2; s[++j] &amp;&amp; (s[j-1]!='*' || s[j]!='/' || !j++); );\n</code></pre>\n\n<p>Why does !j++ work?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid remove_cmmnt(char *s)\n{ int k=0;\n        char *p=s;\n\n        for( k=0;p[k];k++);\n    char T[k];\n    int i,j;\n    for(i=j=0; s[j] ;  )\n    {\n\n        if(s[j]=='/' &amp;&amp;  s[j+1]=='*')\n            for(j+=2; ++j &amp;&amp; (s[j-1]!='*' || s[j]!='/' || !j++); );\n        else\n            T[i++]=s[j++];\n    }\n\n        printf(\"%s\",T);\n\n    s[i]='\\0';\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "string", "windows", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550059655, "post_id": 54669785, "comment_id": 96129553, "body": "That is a variant of the common <a href=\"https://en.wikipedia.org/wiki/Comma-separated_values\" rel=\"nofollow noreferrer\">Comma-Separated Values (or CSV)</a> file format. And it only <i>seems</i> like it&#39;s easy to parse. For example, if one of the strings contains spaces then your <code>fscanf</code> call won&#39;t work. I really recommend you try to find an existing library that will parse the file properly, instead of trying to reinvent the wheel."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1550059660, "post_id": 54669785, "comment_id": 96129557, "body": "Can you have embedded quotes or semicolons? as in <code>&quot;first&quot;;&quot;semi;colon&quot;;&quot;foo&quot;bar&quot;;&quot;fourth&quot;</code>"}, {"owner": {"reputation": 103, "user_id": 6282994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TK2bH.jpg?s=128&g=1", "display_name": "Dejan", "link": "https://stackoverflow.com/users/6282994/dejan"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1550059911, "post_id": 54669785, "comment_id": 96129700, "body": "@pmg The file is expected to be absolutely perfect it always should contain the above stated format. If anything else is read error should be returned."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1550059971, "post_id": 54669785, "comment_id": 96129729, "body": "@Dejan pmg&#39;s point is that the &quot;above stated format&quot; is not precise enough to write a simple parser for. You must know the full space of allowed inputs, and embedded quotes or punctuation is certainly typically okay for something called &quot;a string&quot;."}, {"owner": {"reputation": 103, "user_id": 6282994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TK2bH.jpg?s=128&g=1", "display_name": "Dejan", "link": "https://stackoverflow.com/users/6282994/dejan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550059988, "post_id": 54669785, "comment_id": 96129742, "body": "@Someprogrammerdude I&#39;m not allowed to use external libraries, i&#39;m either supposed to find a way with fscanf or some other function for reading, or parse it myself."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550060348, "post_id": 54669785, "comment_id": 96129926, "body": "Then you need to know <i>exactly</i> what can be in a &quot;string&quot;? Spaces? Semicolons? Embedded double-quotes? &quot;Escape&quot; sequences?"}, {"owner": {"reputation": 103, "user_id": 6282994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TK2bH.jpg?s=128&g=1", "display_name": "Dejan", "link": "https://stackoverflow.com/users/6282994/dejan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550060726, "post_id": 54669785, "comment_id": 96130119, "body": "@Someprogrammerdude everything that&#39;s in string exempting &quot; and ;"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550060978, "post_id": 54669785, "comment_id": 96130266, "body": "So white-space (space, tabs, possibly newlines) are valid inside the strings?"}, {"owner": {"reputation": 103, "user_id": 6282994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TK2bH.jpg?s=128&g=1", "display_name": "Dejan", "link": "https://stackoverflow.com/users/6282994/dejan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550061075, "post_id": 54669785, "comment_id": 96130337, "body": "@Someprogrammerdude Anything is valid inside the strings"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550061295, "post_id": 54669785, "comment_id": 96130471, "body": "If there can be white-space, you have to remember that <code>scanf</code> (and family) format <code>&quot;%s&quot;</code> reads <i>space delimited</i> strings. And if there can be embedded newlines you can&#39;t really use <code>fgets</code> to read full lines and then split at semicolon using <code>strtok</code> (which is otherwise a common way to handle it). Your only solution, it seems, is to read <i>character by character</i> with a statefull parser."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1550061392, "post_id": 54669785, "comment_id": 96130528, "body": "And for future question, you really should include all these details in the question itself. We shouldn&#39;t have to drag it out of you in comments like this."}], "answers": [{"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 2, "last_activity_date": 1550061413, "creation_date": 1550061413, "answer_id": 54670361, "question_id": 54669785, "link": "https://stackoverflow.com/questions/54669785/reading-specifically-formatted-string/54670361#54670361", "title": "Reading specifically formatted string", "body": "<p>here's some pseudo-code for you</p>\n\n<pre><code>loop\n    getchar; if not a quote exit with error\n    loop\n        getchar; mind EOF\n        if not a quote, add to string\n        if a quote exit inner loop\n    use string\n    getchar; if not semicolon exit with error unless EOF\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": false, "score": 3, "last_activity_date": 1550062096, "last_edit_date": 1550062096, "creation_date": 1550061786, "answer_id": 54670498, "question_id": 54669785, "link": "https://stackoverflow.com/questions/54669785/reading-specifically-formatted-string/54670498#54670498", "title": "Reading specifically formatted string", "body": "<p>If you really want to use <code>fscanf</code>, you could use a format string like this :</p>\n\n<pre><code>fscanf(fp, \"\\\"%[^\\\"]\\\";\\\"%[^\\\"]\\\";\\\"%[^\\\"]\\\";\\\"%[^\\\"]\\\";\\\"%[^\\\"]\\\"\\n\", ...);\n</code></pre>\n\n<p>For more details, read up on the <em>[set]</em> conversion specifier in the reference docs for <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>fscanf</code></a>.</p>\n\n<p>Note that this will <em>not</em> work with embedded <code>'\"'</code> characters in the strings.</p>\n\n<p>This also leaves no flexibility (like additional whitespace around the semicolons, optional quotes, etc.).</p>\n\n<p>In case those limitations are problematic for you, you'll want a more intelligent parser (<a href=\"https://github.com/rgamble/libcsv\" rel=\"nofollow noreferrer\">libcsv</a> comes to mind eg.). Also ref. <a href=\"https://stackoverflow.com/a/54670361/822669\">pmg's answer</a> for how to roll your own.</p>\n"}], "owner": {"reputation": 103, "user_id": 6282994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TK2bH.jpg?s=128&g=1", "display_name": "Dejan", "link": "https://stackoverflow.com/users/6282994/dejan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550062096, "creation_date": 1550059453, "last_edit_date": 1550060965, "question_id": 54669785, "link": "https://stackoverflow.com/questions/54669785/reading-specifically-formatted-string", "title": "Reading specifically formatted string", "body": "<p>I'm attempting to read a file containing lines of strings in the following format:</p>\n\n<pre><code>\"string\";\"string\";\"string\";\"string\";\"string\"\n</code></pre>\n\n<p>How do i read them each using functions compatible on windows and linux?</p>\n\n<p>Length of each string is unknown.</p>\n\n<p>i have attempted to use fscanf like this:</p>\n\n<pre><code>fscanf(fp, \"\\\"%s\\\";\\\"%s\\\";\\\"%s\\\";\\\"%s\\\";\\\"%s\\\"\\n\");\n</code></pre>\n\n<p>But the first string picked up the whole line.</p>\n"}, {"tags": ["c", "byte", "ascii", "bit"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1550058918, "post_id": 54669595, "comment_id": 96129100, "body": "What does it print?  How about trying to print it in hex so you can see what happened?"}, {"owner": {"reputation": 579, "user_id": 5490535, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/496260983880990/picture?type=large", "display_name": "Sebastian Karlsson", "link": "https://stackoverflow.com/users/5490535/sebastian-karlsson"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1550058951, "post_id": 54669595, "comment_id": 96129112, "body": "@AndrewHenle it prints this character: &quot;&#206;&quot;"}, {"owner": {"reputation": 75, "user_id": 1076483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iHgYe.png?s=128&g=1", "display_name": "maf88", "link": "https://stackoverflow.com/users/1076483/maf88"}, "edited": false, "score": 0, "creation_date": 1550060751, "post_id": 54669595, "comment_id": 96130139, "body": "&#238; is not ascii so the value are probably not stored well"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 8, "last_activity_date": 1550059284, "last_edit_date": 1550059284, "creation_date": 1550058996, "answer_id": 54669651, "question_id": 54669595, "link": "https://stackoverflow.com/questions/54669595/why-does-the-byte-with-bits-01110011-not-become-the-character-s/54669651#54669651", "title": "why does the byte with bits 01110011 not become the character `s`?", "body": "<p>You are inserting the bits in the inverse order from the one they're listed in the source. The second bit will be shifted by 1, not 6 and so on. So the resulting number is</p>\n\n<pre><code>1 1 0 0 1 1 1 0\n</code></pre>\n\n<p>which is 0xce, decimal 206 and therefore non-ASCII.</p>\n\n<p>Also, using XOR to do this is very weird, it should just regular bitwise OR (<code>|</code>).</p>\n\n<p>Here's a fixed attempt:</p>\n\n<pre><code>char s = 0;\nconst unsigned char bits[] = { 0, 1, 1, 1, 0, 0, 1, 1 };\n\nfor (int i = 0; i &lt; 8; ++i) {\n    s |= bits[i] &lt;&lt; (7 - i);\n}\nprintf(\"%c\\n\", s);\n</code></pre>\n\n<p>This prints <code>s</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 386, "user_id": 7718559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSF6s.jpg?s=128&g=1", "display_name": "Kousik", "link": "https://stackoverflow.com/users/7718559/kousik"}, "is_accepted": false, "score": 0, "last_activity_date": 1550059359, "creation_date": 1550059359, "answer_id": 54669751, "question_id": 54669595, "link": "https://stackoverflow.com/questions/54669595/why-does-the-byte-with-bits-01110011-not-become-the-character-s/54669751#54669751", "title": "why does the byte with bits 01110011 not become the character `s`?", "body": "<p>The binary  number is storing in reverse order in the char variable s that's why you are having this problem.</p>\n\n<pre><code>0 1 1 1 0 0 1 1\n</code></pre>\n\n<p>it is becoming</p>\n\n<pre><code>1 1 0 0 1 1 1 0\n</code></pre>\n\n<p>in the 's' variable.</p>\n"}], "owner": {"reputation": 579, "user_id": 5490535, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/496260983880990/picture?type=large", "display_name": "Sebastian Karlsson", "link": "https://stackoverflow.com/users/5490535/sebastian-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54669651, "answer_count": 2, "score": 1, "last_activity_date": 1550059359, "creation_date": 1550058846, "question_id": 54669595, "link": "https://stackoverflow.com/questions/54669595/why-does-the-byte-with-bits-01110011-not-become-the-character-s", "title": "why does the byte with bits 01110011 not become the character `s`?", "body": "<p>Why does the following program not print an <code>s</code> character?:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n\nint main(void) {\n    unsigned char s = '\\0';\n    unsigned int bits[8] = {0, 1, 1, 1, 0, 0, 1, 1};\n\n    for (int i = 0; i &lt; 8; i++) {\n        s ^= bits[i] &lt;&lt; i;\n    }\n\n    printf(\"%c\\n\", s);\n\n    return 0;\n}\n</code></pre>\n\n<p>So I am basically trying to create the <code>s</code> character from a list of bits.\nWhy do I get some other weird character from this program?</p>\n"}, {"tags": ["c", "scanf", "sublimetext3"], "comments": [{"owner": {"reputation": 87, "user_id": 8070714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0afd79db577fbb232e96e6a48c81874?s=128&d=identicon&r=PG&f=1", "display_name": "Bpaul", "link": "https://stackoverflow.com/users/8070714/bpaul"}, "edited": false, "score": 2, "creation_date": 1550057629, "post_id": 54669119, "comment_id": 96128347, "body": "This just seems like a permission problem"}, {"owner": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "edited": false, "score": 1, "creation_date": 1550057679, "post_id": 54669119, "comment_id": 96128376, "body": "Your code compile ok, a live test of it: <a href=\"https://segfault.stensal.com/a/b0nHamZUXjg1hFP4\" rel=\"nofollow noreferrer\">segfault.stensal.com/a/b0nHamZUXjg1hFP4</a>.   This is not a C question, it&#39;s your file permission problem."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1550057927, "post_id": 54669119, "comment_id": 96128525, "body": "try omitting the scan ...  <code>a = 42; &#47;&#47;scanf(&quot;%d&quot;,&amp;a);</code>"}, {"owner": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "edited": false, "score": 1, "creation_date": 1550058070, "post_id": 54669119, "comment_id": 96128608, "body": "In general it is always a good idea to include your error/warning in text in the body of your question."}, {"owner": {"reputation": 65, "user_id": 9513534, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Miguel", "link": "https://stackoverflow.com/users/9513534/miguel"}, "edited": false, "score": 0, "creation_date": 1550058603, "post_id": 54669119, "comment_id": 96128895, "body": "When I remove the &quot;scan&quot; it does works. So I guess we found the problem. So I guess that Sublime doesnt allow to input varaibles"}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 1, "creation_date": 1550080146, "post_id": 54669119, "comment_id": 96142163, "body": "<code>scanf</code> gathers input from <code>stdin</code>; programs executing in Sublime&#39;s output panel have no <code>stdin</code> connected to them; thus they hang forever waiting for input that you cannot provide. You assume your code is broken and try to run it again, but the previous version is already running, which has the file locked, and the linker is unable to relink. Extremely common problem (but finding it on SO is very difficult). The answer to the question is to not run interactive programs directly within Sublime."}, {"owner": {"reputation": 4832, "user_id": 258894, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4e52f8ae459fe3a2793b570a851275e6?s=128&d=identicon&r=PG", "display_name": "GaryO", "link": "https://stackoverflow.com/users/258894/garyo"}, "edited": false, "score": 0, "creation_date": 1563969445, "post_id": 54669119, "comment_id": 100875494, "body": "@Miguel, it&#39;s not about Sublime preventing use of &quot;scanf&quot;. The problem (as several others have noted here) is that another copy of the program was running when you tried to compile the second time. Windows does not allow two processes to open the same file (in this case <code>cccc.exe</code>), so you can&#39;t create a new version of <code>cccc.exe</code> while it is running (and waiting for input, in your case)."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9275717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15a73830ac9b0da6249e40691d6d7885?s=128&d=identicon&r=PG&f=1", "display_name": "Yogiraj Hendre", "link": "https://stackoverflow.com/users/9275717/yogiraj-hendre"}, "is_accepted": false, "score": 1, "last_activity_date": 1563969138, "creation_date": 1563969138, "answer_id": 57182267, "question_id": 54669119, "link": "https://stackoverflow.com/questions/54669119/cant-open-output-file-error-on-scanf-call/57182267#57182267", "title": "&quot;Can&#39;t open output file&quot; error on scanf call", "body": "<p>You may have another instance of g++ open in cmd. You may be running \"a.exe\" generated by g++ in Command Prompt. Due to the fact that a file already exits, and is being used, you can not create a file of same name.</p>\n"}], "owner": {"reputation": 65, "user_id": 9513534, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Miguel", "link": "https://stackoverflow.com/users/9513534/miguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563969138, "creation_date": 1550057360, "last_edit_date": 1550063361, "question_id": 54669119, "link": "https://stackoverflow.com/questions/54669119/cant-open-output-file-error-on-scanf-call", "title": "&quot;Can&#39;t open output file&quot; error on scanf call", "body": "<p>I am trying to do a simple code in C using the text editor Sublime.\nThe problem is, when I try to use the <em>scanf</em> function I get an error.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(){\n    int a;\n    scanf(\"%d\",&amp;a);\n    printf(\"testing %d\",a);\n    return 0;\n}\n</code></pre>\n\n<p>The error:</p>\n\n<blockquote>\n  <p>c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: cannot open output file cccc.exe: Permission denied\n      collect2.exe: error: ld returned 1 exit status</p>\n</blockquote>\n"}, {"tags": ["c", "linux", "sockets", "port-scanning"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1550057345, "post_id": 54669066, "comment_id": 96128187, "body": "<code>const char *host[]</code> ==&gt; <code>const char *host</code> or <code>const char host[]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 10409835, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8fvwiOypBpc/AAAAAAAAAAI/AAAAAAAAAAc/yhoOiR7NEH4/photo.jpg?sz=128", "display_name": "0poss", "link": "https://stackoverflow.com/users/10409835/0poss"}, "edited": false, "score": 0, "creation_date": 1550058657, "post_id": 54669148, "comment_id": 96128925, "body": "Thanks for your answer !"}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 4, "last_activity_date": 1550107110, "last_edit_date": 1550107110, "creation_date": 1550057451, "answer_id": 54669148, "question_id": 54669066, "link": "https://stackoverflow.com/questions/54669066/random-port-connection-while-portscan/54669148#54669148", "title": "Random port connection while portscan", "body": "<p><strong>I suspect you're running into your open socket <em>source</em> ports while scanning.</strong></p>\n\n<p>TCP connections have a source port. If one is not assigned to a socket (via <code>bind</code>), then the kernel assigns an <em>ephemeral</em> port (in the high range) to the socket when you call <code>connect</code>, before the SYN is sent.</p>\n\n<p>Since you are connecting your sockets to your local machine, as you loop through the destination ports, it is possible that the kernel will assign a random ephemeral source port that happens to match the same destination port to which you're about to connect.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/16767113/119527\">Linux/Unix Socket Self-connection</a></li>\n<li><a href=\"https://stackoverflow.com/q/4021271/119527\">Socket getting created with same IP and port on local host</a></li>\n</ul>\n"}], "owner": {"reputation": 143, "user_id": 10409835, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8fvwiOypBpc/AAAAAAAAAAI/AAAAAAAAAAc/yhoOiR7NEH4/photo.jpg?sz=128", "display_name": "0poss", "link": "https://stackoverflow.com/users/10409835/0poss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 54669148, "answer_count": 1, "score": 1, "last_activity_date": 1550107110, "creation_date": 1550057144, "question_id": 54669066, "link": "https://stackoverflow.com/questions/54669066/random-port-connection-while-portscan", "title": "Random port connection while portscan", "body": "<p>I've made a very basic port-scan program in C to scan a port range. Here it is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;string.h&gt;\n\n#define HOST \"127.0.0.1\"\n#define PORT 4444\n\nint createConnection(const char *host[], const int port)\n{\n    struct sockaddr_in addr;\n    int sock = 0;\n    int ret;\n    struct sockaddr_in server_addr;\n    if ((sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) &lt; 0)\n    {\n        printf(\"Error %d socket creating.\\n\", sock);\n        return -1;\n    }\n    else\n    {\n        memset(&amp;server_addr, '0', sizeof(server_addr));\n\n        server_addr.sin_family = AF_INET;\n        server_addr.sin_port = htons(port);\n        ret = inet_pton(AF_INET, host, &amp;server_addr.sin_addr);\n        if (ret &lt;= 0)\n        {\n            printf(\"Error %d unsuported address: %d\\n\", ret);\n            return -2;\n        }\n        else\n        {\n            ret = connect(sock, (struct sockaddr *)&amp;server_addr, sizeof(server_addr));\n            if (ret &lt; 0)\n            {\n                //printf(\"[-] Port %d closed.\\n\", port);\n                close(sock);\n                return 1;\n            }\n            else\n            {\n                printf(\"[+] Port %d open.\\n\", port);\n                close(sock);\n                return 0;\n            }\n        }\n\n    }\n}\n\nint main(int argc, const char *argv[])\n{\n    for (int i = 1; i &lt; 65536; i++)\n    {\n        createConnection(\"127.0.0.1\", i);\n    }\n}\n</code></pre>\n\n<p>As you can see in the for loop, it scans from port 1 to port 65535. The problem is that when I start it, I get this output:</p>\n\n<pre><code>[+] Port 42178 open.\n[+] Port 48650 open.\n[+] Port 60078 open.\n</code></pre>\n\n<p>The \"open ports\" always change, but are always superior to 40000. But, I checked with <code>netstat -tulpn</code>, only my port 68 is open for the dhclient, which is UDP and not TCP. Why does it say that I have open ports ?</p>\n"}, {"tags": ["c", "time", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1550056971, "post_id": 54668909, "comment_id": 96127959, "body": "For what purpose do you need the time? It may affect the possible solution."}, {"owner": {"reputation": 771, "user_id": 4991648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a715b4a934b32b40922fac86690256ae?s=128&d=identicon&r=PG", "display_name": "Florian Bach", "link": "https://stackoverflow.com/users/4991648/florian-bach"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1550057022, "post_id": 54668909, "comment_id": 96127985, "body": "I&#39;d like to print it to the screen in certain error conditions / debug outputs, kind of like a build identifier."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1550057389, "post_id": 54668909, "comment_id": 96128207, "body": "The issue is that if you have multiple source files in the project, for each source file compilation is a different call to gcc"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1550057494, "post_id": 54668909, "comment_id": 96128270, "body": "You could wrap it in a function and <code>touch</code> its source as a pre-build step."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1550057733, "post_id": 54668909, "comment_id": 96128411, "body": "Sidenote: Compile time is not a really great indicator for build identifier. Ideally 2 builds of the same source code at 2 different points in time should produce identical binary. I would favor proper <a href=\"https://semver.org/\" rel=\"nofollow noreferrer\">version number scheme</a> and/or version control system changeset id."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 4, "last_activity_date": 1550057440, "creation_date": 1550057440, "answer_id": 54669146, "question_id": 54668909, "link": "https://stackoverflow.com/questions/54668909/constant-value-of-time-in-whole-program/54669146#54669146", "title": "Constant value of __TIME__ in whole program", "body": "<p>This is <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">a bit XY</a> but I think something like this really does belong in build infrastructure, since you're after some non-changing ID of the build itself.</p>\n\n<p>For a simple/small project, I would consider adding something like</p>\n\n<pre><code>MAKE_TIME = $(date --iso-8601)\nCFLAGS += -DBUILD_TIME=$(MAKE_TIME)\n</code></pre>\n\n<p>or something to the <code>Makefile</code>. This will of course still break if your project has many files and you just re-build a few of them, then they will be compiled with different value of <code>BUILD_TIME</code>.</p>\n\n<p>One solution to that is to centralize the place in the actual code where the time is needed, into e.g. a single function, and use <code>BUILD_TIME</code> there only. Then the entire program will behave as if it was built when the file defining that function was built, which is at least better.</p>\n"}], "owner": {"reputation": 771, "user_id": 4991648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a715b4a934b32b40922fac86690256ae?s=128&d=identicon&r=PG", "display_name": "Florian Bach", "link": "https://stackoverflow.com/users/4991648/florian-bach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1550057580, "answer_count": 1, "score": 1, "last_activity_date": 1550057440, "creation_date": 1550056617, "question_id": 54668909, "link": "https://stackoverflow.com/questions/54668909/constant-value-of-time-in-whole-program", "closed_reason": "Duplicate", "title": "Constant value of __TIME__ in whole program", "body": "<p>If I have a C program consisting of multiple C source files that each use the preprocessor directives <code>__DATE__</code> and <code>__TIME__</code>, is there any way I can make sure that the value is always the same for every instance in the current program?</p>\n\n<p>I tried using a header file with <code>#define FIXED_TIME __TIME__</code>, hoping that would only be evaluated once, but I was wrong. If the compilation takes longer than 1 second the time in the C files will differ. </p>\n\n<p>Is there any way I can make sure <code>__DATE__</code> and <code>__TIME__</code> are the same when used in multiple files? Or do I have to resort to manually building the date and time strings in my Makefile and define these manually?</p>\n"}, {"tags": ["c", "linux", "bash", "gdb", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1550054564, "post_id": 54668149, "comment_id": 96126491, "body": "No, they are addresses (pointers). Look at the type you&#39;re trying to print."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1550054621, "post_id": 54668149, "comment_id": 96126524, "body": "You need to use the <code>set args</code> command within GDB to set the program&#39;s command-line arguments."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1550054858, "post_id": 54668149, "comment_id": 96126681, "body": "or specify them when you &quot;run&quot; it ie &quot;run hello world&quot;"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1550055209, "post_id": 54668149, "comment_id": 96126914, "body": "That <code>argv[0]</code> is <code>&#47;home&#47;pi&#47;new&#47;a.out</code> is because you did not rename your program to <code>echo</code>. Although I must confess that K&amp;R don&#39;t mention the path, or maybe that got added later in the definition of <code>argv[0]</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550055237, "post_id": 54668149, "comment_id": 96126936, "body": "You cannot access <code>argv[2]</code> and beyond if <code>argc</code> is 1.  You cannot access <code>argv[3]</code>  if <code>argc</code> is 2, etc. Any such value you obtain from the debugger is meaningless."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1550060668, "post_id": 54668149, "comment_id": 96130082, "body": "Your first mistake is not checking argc. That would have told you there is only 1 string and no actual arguments."}], "answers": [{"tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 0, "last_activity_date": 1550055155, "creation_date": 1550055155, "answer_id": 54668453, "question_id": 54668149, "link": "https://stackoverflow.com/questions/54668149/kr-explanation-of-echo-program-is-confusing-when-debugging-it-using-gdb-what/54668453#54668453", "title": "K&amp;R Explanation of echo program is confusing, when debugging it using gdb. What&#39;s wrong?", "body": "<p>Snippet 1) <code>0x7efff85a</code> is a pointer to the string <code>\"/home/pi/new/a.out\"</code> for this instance of the program.</p>\n\n<p>Snippet 2) <code>0x7efffe5a</code> is a pointer to the string <code>\"_=/usr/bin/gdb\"</code> for this particular instance, but you shouldn't rely on <code>argv[argc+1]</code> onwards pointing to anything in particular.</p>\n"}, {"comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1550060599, "post_id": 54668550, "comment_id": 96130049, "body": "It isn&#39;t actually guaranteed to mean that. But you are right that the internal convention on unix is that the piece of memory envp points to immediately follows the memory argv points to."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1550055494, "creation_date": 1550055494, "answer_id": 54668550, "question_id": 54668149, "link": "https://stackoverflow.com/questions/54668149/kr-explanation-of-echo-program-is-confusing-when-debugging-it-using-gdb-what/54668550#54668550", "title": "K&amp;R Explanation of echo program is confusing, when debugging it using gdb. What&#39;s wrong?", "body": "<p>Note that the full definition of <code>main</code> is:</p>\n\n<pre><code>int main(int argc, char *argv[], char *envp[])\n</code></pre>\n\n<p>This means that following the last <code>argv[]</code> follow the environment variables.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1550057365, "creation_date": 1550057365, "answer_id": 54669120, "question_id": 54668149, "link": "https://stackoverflow.com/questions/54668149/kr-explanation-of-echo-program-is-confusing-when-debugging-it-using-gdb-what/54669120#54669120", "title": "K&amp;R Explanation of echo program is confusing, when debugging it using gdb. What&#39;s wrong?", "body": "<p>You are modifying argv in the loop:</p>\n\n<pre><code>while (--argc&gt;0)\n        printf(\"%s%s\",*++argv,(argc&gt;1)?\" \":\"\");\n</code></pre>\n\n<p>so that observing it after don't give you what you think! You are overflowing the array and access the environment array...</p>\n\n<p>Either observe argv before the loop or at least store its original value somewhere to observe it after... As you didn't tell us what was the exact (all commands!) gdb session you made, we cannot help you further.</p>\n"}], "owner": {"reputation": 73, "user_id": 8109658, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyNSA.png?s=128&g=1", "display_name": "readonly", "link": "https://stackoverflow.com/users/8109658/readonly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1550057365, "creation_date": 1550054350, "last_edit_date": 1550056867, "question_id": 54668149, "link": "https://stackoverflow.com/questions/54668149/kr-explanation-of-echo-program-is-confusing-when-debugging-it-using-gdb-what", "title": "K&amp;R Explanation of echo program is confusing, when debugging it using gdb. What&#39;s wrong?", "body": "<p>As per K&amp;R, his explanation of echo program: \n<code>echo hello world</code>\n\"By convention, argv[0] is the name by which the program was invoked, so argc is at least 1. If the argc is 1, there are no command-line arguments after the program name. In the example above, argc is 3, and argv[0], argv[1], and argv[2] are \"echo\", \"hello\", and \"world\" respectively. The first optional argument is argv[1] and the last is argv[argc-1].\"</p>\n\n<p>But, when debugging the program, using gdb, I can see the following:</p>\n\n<pre><code>(gdb) p argv[0]\n$2 = 0x7efff85a \"/home/pi/new/a.out\"\n(gdb) p argv[1]\n$3 = 0x0\n(gdb) p argv[2]\n$4 = 0x7efff86d \"LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc\"...\n(gdb) p *argv[0]\n    $5 = 47 '/'\n</code></pre>\n\n<p>Ex 1:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(int argc, char *argv[])\n{\n    int i;\n    while (--argc&gt;0)\n        printf(\"%s%s\",*++argv,(argc&gt;1)?\" \":\"\");\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>For the code example above, when compiling and executing as the below:</p>\n\n<pre><code>pi@readonly:~/new$ cc -g echo.c\npi@readonly:~/new$ a.out hello world\nhello world\n</code></pre>\n\n<p>Debug using gdb:</p>\n\n<p>Snippet 1:</p>\n\n<pre><code>(gdb) p &amp;*argv\n$11 = (char **) 0x7efff744\n(gdb) p &amp;**argv\n$12 = 0x7efff85a \"/home/pi/new/a.out\"\n(gdb) p argv\n$13 = (char **) 0x7efff744\n(gdb) p &amp;argv\n$14 = (char ***) 0x7efff5e0\n(gdb) p &amp;argv[0]\n$15 = (char **) 0x7efff744\n(gdb) p argv[0]\n$16 = 0x7efff85a \"/home/pi/new/a.out\"\n</code></pre>\n\n<p>Snippet 2:</p>\n\n<pre><code>(gdb) p argv[3]\n$22 = 0x7efffe5a \"_=/usr/bin/gdb\"\n(gdb) p argv[4]\n$23 = 0x7efffe69 \"LANG=en_GB.UTF-8\"\n(gdb) p &amp;argv[3]\n$24 = (char **) 0x7efff754\n</code></pre>\n\n<p>Questions:</p>\n\n<p>\u2022 Snippet 1:</p>\n\n<ol>\n<li>Am I understand it correctly, that <code>0x7efff85a</code> is the hexadecimal value of the string <code>\"/home/pi/new/a.out\"</code>? If yes, how it has been obtained? In other words, has it been obtained by using, for instance, <code>atoi()</code> function?</li>\n</ol>\n\n<p>\u2022 Snippet 3:</p>\n\n<ol start=\"2\">\n<li><p>Am I understand it correctly, that, <code>_=/usr/bin/gdb</code> is converted into <code>0x7efffe5a</code>?</p></li>\n<li><p>Also, there is some predefined values being set to the array argv, because, in case, nothing has been input, it is there. Where can I read about this predefined values? Is it implementation-defined? For instance, on windows, using Eclipse, or other IDEs, would it give different but, predefined values set as well for argv[] array?</p></li>\n</ol>\n"}, {"tags": ["c", "crash", "conditional", "ternary-operator"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1550052995, "post_id": 54667568, "comment_id": 96125512, "body": "Your output is a compiler error: <a href=\"https://ideone.com/kDz3Bi\" rel=\"nofollow noreferrer\">ideone.com/kDz3Bi</a> an error and a warning, to be correct."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1550053015, "post_id": 54667568, "comment_id": 96125520, "body": "Enable compiler warnings: <i>warning C4047: &#39;:&#39;: &#39;int&#39; differs in levels of indirection from &#39;char [2]&#39;</i>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1550053078, "post_id": 54667568, "comment_id": 96125557, "body": "If that even cleanly compiles it&#39;s because you&#39;re not enabling warnings and/or not treating them as errors. <code>&quot;0&quot;</code> and <code>x</code> are completely different types, therefore the second expression in your <a href=\"https://stackoverflow.com/questions/52550/what-does-the-comma-operator-do\">comma operation</a> does not match the first for type compatibility."}], "answers": [{"tags": [], "owner": {"reputation": 691, "user_id": 9946382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24x3.png?s=128&g=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/9946382/leo"}, "is_accepted": false, "score": 2, "last_activity_date": 1550053349, "last_edit_date": 1550053349, "creation_date": 1550052918, "answer_id": 54667632, "question_id": 54667568, "link": "https://stackoverflow.com/questions/54667568/conditional-operator-is-not-working-in-c/54667632#54667632", "title": "Conditional Operator: ? : is not working in c", "body": "<p>You have errors in your code.</p>\n\n<p>Try this:</p>\n\n<pre><code>printf(\"%d\", 1 &gt; 0 ? x : 0);\n</code></pre>\n\n<p>I invite you to check the <a href=\"https://linux.die.net/man/3/printf\" rel=\"nofollow noreferrer\">printf documentation</a> and some <a href=\"http://www.tutorialspoint.com/ansi_c/ternary_operator_examples.htm\" rel=\"nofollow noreferrer\">ternary operator examples</a> to better understand what is wrong with your code.</p>\n"}, {"comments": [{"owner": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "edited": false, "score": 2, "creation_date": 1550053349, "post_id": 54667704, "comment_id": 96125744, "body": "No way I could beat you on a phone keyboard : ( . Anyway have my +1."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1550053825, "last_edit_date": 1550053825, "creation_date": 1550053151, "answer_id": 54667704, "question_id": 54667568, "link": "https://stackoverflow.com/questions/54667568/conditional-operator-is-not-working-in-c/54667704#54667704", "title": "Conditional Operator: ? : is not working in c", "body": "<p>It is working as specified. Unfortunately, you are misusing it. You seem to expect that the condition check should produce one of two function invocations:</p>\n\n<pre><code>printf(\"%d\",x);\nprintf(\"0\");\n</code></pre>\n\n<p>That's now not how C works. You use  the conditional expression, so the result must be a single value, which translates to a single function argument. The comma you wrote is not the comma which is used to separate arguments to functions. It is the <em>comma operator</em>, which is an expression itself.</p>\n\n<p>The semantics of the <em>expression</em> <code>\"%d\", x</code> is to evaluate <code>\"%d\"</code>, discard the result, and then evaluate <code>x</code>. <code>x</code> is the result of the expression with the comma operator.</p>\n\n<p>Which means your function call is equivalent to </p>\n\n<pre><code>printf(1 &gt; 0 ? x : \"0\");\n</code></pre>\n\n<p>You pass an integer where a pointer to a string is expected. A decent compiler should flag that with a warning at least, and if yours doesn't you need to give it the proper flags to warn you about this.</p>\n"}], "owner": {"reputation": 1, "user_id": 11023972, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cLrTR2sv-PA/AAAAAAAAAAI/AAAAAAAAAEg/odaLJ5dvODg/photo.jpg?sz=128", "display_name": "Kabir Uddin", "link": "https://stackoverflow.com/users/11023972/kabir-uddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550053825, "creation_date": 1550052730, "last_edit_date": 1550053153, "question_id": 54667568, "link": "https://stackoverflow.com/questions/54667568/conditional-operator-is-not-working-in-c", "title": "Conditional Operator: ? : is not working in c", "body": "<p>I was working with conditionals in c. While coding I found that this code is not working</p>\n\n<pre><code>int x = 1;\nprintf(1&gt;0? \"%d\",x : \"0\");\n</code></pre>\n\n<p>Now, 1 is obviously greater than 0. So the program should print the value of x. But it actually never prints anything!\nI am using Codeblocks 17.12 and my compiler is MingW</p>\n"}, {"tags": ["c", "arguments", "header-files", "declaration"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1550051528, "post_id": 54667086, "comment_id": 96124551, "body": "Without any kind of context it&#39;s hard to even guess. Please take some time to read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1550052061, "post_id": 54667086, "comment_id": 96124884, "body": "My guess is that it has to do with calling conventions - maybe they want to use the reverse of the standard argument ordering."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 2, "creation_date": 1550052232, "post_id": 54667086, "comment_id": 96125022, "body": "@PYK: Can you give a proper example which you have seen in the header? This may be helpful for every one to relate and better understand the question."}], "answers": [{"tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1550058652, "creation_date": 1550058652, "answer_id": 54669528, "question_id": 54667086, "link": "https://stackoverflow.com/questions/54667086/what-is-the-purpose-of-declaring-an-n-ary-function-twice-such-that-the-order-of/54669528#54669528", "title": "What is the purpose of declaring an n-ary function twice, such that the order of the arguments of the second is the reverse of the first?", "body": "<p>It seem an header crafted to interface an object library wrote for <strong>PASCAL</strong> calling convention, where the parameters pushing on the stack is reversed.</p>\n\n<p>In <strong>C</strong> historic <strong>ABI</strong> convention the parameters were pushed onto the stack from right to left order.</p>\n\n<p>In Pascal, that didn't supported variadic functions, the arguments were pushed left to right.</p>\n\n<p>The define reverse the order fixing the <strong>ABI</strong>.</p>\n\n<p>See <a href=\"https://azrael.digipen.edu/~mmead/www/Courses/CS225/HistoryOfCallingConventions.html\" rel=\"nofollow noreferrer\">https://azrael.digipen.edu/~mmead/www/Courses/CS225/HistoryOfCallingConventions.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11055368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ca34ef37aa5d830a8c4c2c9c3caefeb?s=128&d=identicon&r=PG&f=1", "display_name": "PYK", "link": "https://stackoverflow.com/users/11055368/pyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 54669528, "answer_count": 1, "score": 0, "last_activity_date": 1550208809, "creation_date": 1550051283, "last_edit_date": 1550208809, "question_id": 54667086, "link": "https://stackoverflow.com/questions/54667086/what-is-the-purpose-of-declaring-an-n-ary-function-twice-such-that-the-order-of", "title": "What is the purpose of declaring an n-ary function twice, such that the order of the arguments of the second is the reverse of the first?", "body": "<p>I was reading through a C header file containing function prototypes of the API for a particular real-time operating system (RTOS), and noticed that most of the functions are declared in the following manners:</p>\n\n<pre><code>#define foo(arg_1, arg_2, ... arg_n)        foo(arg_n, ... arg_2, arg_1)\n</code></pre>\n\n<p>That is, functions with 2 or more arguments are declared pairwise as shown, in which the order of arguments of the second function is the reverse of that of the first function.</p>\n\n<p>May I know what is the purpose of doing so?</p>\n\n<p><br/>\n<strong>Edit:</strong></p>\n\n<p>I dug further into the code and found that this header file and some other header files contain macros to support different C/C++ compilers. In particular, the calling convention <code>_pascal</code> is invoked if the Microsoft C/C++ compiler is used. In this case, the API functions are declared pairwise as stated in the problem description above.</p>\n\n<p>I believe both <a href=\"https://stackoverflow.com/users/169346/jeremyp\">JeremyP</a> and <a href=\"https://stackoverflow.com/users/5157478/frankie-c\">Frankie_C</a> deserve kudos for correctly guessing the purpose, despite the lack of context. The keyword \"calling convention\" is of great help to me and pivotal in my attempt to understand that segment of code.</p>\n"}, {"tags": ["c", "getchar", "putchar"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1550047560, "post_id": 54665836, "comment_id": 96122082, "body": "Please note that <a href=\"https://en.cppreference.com/w/c/io/getchar\" rel=\"nofollow noreferrer\"><code>getchar</code></a> return an <code>int</code>. This is rather crucial if you ever want to check for <code>EOF</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550047779, "post_id": 54665836, "comment_id": 96122218, "body": "The <code>#</code> is consumed. To end the first loop, <code>getchar</code> must read the <code>#</code>, which is then assigned to <code>ch</code> and compared with the character constant <code>&#39;#&#39;</code>."}, {"owner": {"reputation": 1, "user_id": 6112031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e56c6b62efe97f5e3a049c88588872?s=128&d=identicon&r=PG&f=1", "display_name": "John McTigue", "link": "https://stackoverflow.com/users/6112031/john-mctigue"}, "edited": false, "score": 0, "creation_date": 1550049012, "post_id": 54665836, "comment_id": 96122904, "body": "Thank you, both.  Prata does not introduce the concept of EOF until later, hence using the &#39;#&#39; character to terminate output at this point in the book.  When he does, he does declare ch as an int, with explanation.  However why does the second loop here give no output?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1550049397, "post_id": 54665836, "comment_id": 96123131, "body": "Because it&#39;s commented out, and you forgot to recompile when you uncommented it. Seriously though, there&#39;s no way for us to know that. Either you ended your input with <code>#.</code> or you fat fingered something."}, {"owner": {"reputation": 1, "user_id": 6112031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e56c6b62efe97f5e3a049c88588872?s=128&d=identicon&r=PG&f=1", "display_name": "John McTigue", "link": "https://stackoverflow.com/users/6112031/john-mctigue"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550050360, "post_id": 54665836, "comment_id": 96123770, "body": "@user3386109  I was careful to recompile once uncommented, but have rechecked.  When uncommented there is no effect on the output.  The &#39;#&#39; character is in the middle to the last sentence entered.  Do you get different behaviour?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550050841, "post_id": 54665836, "comment_id": 96124093, "body": "I typed <code>hello# world. ignore this</code> and pressed the return key. The output was <code>hello world</code>"}, {"owner": {"reputation": 163, "user_id": 7706727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/216169c633f0a7217263042fd5e33126?s=128&d=identicon&r=PG&f=1", "display_name": "bUff23", "link": "https://stackoverflow.com/users/7706727/buff23"}, "edited": false, "score": 0, "creation_date": 1550054618, "post_id": 54665836, "comment_id": 96126523, "body": "When in the first loop you encounter &quot;#&quot; then <code>ch = &#39;#&#39;</code>, after which you enter second loop and change the value of ch by calling getchar() function. Its working fine, attach your output in question"}, {"owner": {"reputation": 1, "user_id": 6112031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e56c6b62efe97f5e3a049c88588872?s=128&d=identicon&r=PG&f=1", "display_name": "John McTigue", "link": "https://stackoverflow.com/users/6112031/john-mctigue"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550070918, "post_id": 54665836, "comment_id": 96136699, "body": "Thank you everyone.  I have two similarly named directories, with similar files, and was compiling in the wrong one.  My apologies, especially to @user3386109 who hit the nail more or less on the head."}], "owner": {"reputation": 1, "user_id": 6112031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e56c6b62efe97f5e3a049c88588872?s=128&d=identicon&r=PG&f=1", "display_name": "John McTigue", "link": "https://stackoverflow.com/users/6112031/john-mctigue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550047694, "creation_date": 1550047407, "last_edit_date": 1550047694, "question_id": 54665836, "link": "https://stackoverflow.com/questions/54665836/what-is-normal-c-getchar-putchar-behaviour", "title": "What is normal C getchar/putchar behaviour?", "body": "<p>I am working through the exercises in Stephen Prata's \"C Primer Plus\", and have a question re. listing 8.1:</p>\n\n<pre><code>/* echo.c -- echoes input */\n#include &lt;stdio.h&gt;\nint main(void)\n{\n  char ch;\n\n  while ((ch = getchar()) != '#')\n    putchar(ch);\n  // while ((ch = getchar()) != '.')\n  //   putchar(ch);\n  return 0;\n}\n</code></pre>\n\n<p>The original code did not include the comments; I added them and they are the subject of my question.  If I uncomment those lines there is no discernible effect on the output.  It still ends at the <code>#</code> sign, without printing it.  No additional text is displayed and I am returned to the command prompt.</p>\n\n<p>Why is that? Also, does the <code>#</code> get consumed by <code>getchar()</code>? That was why I included the second loop - I was trying to display any remaining characters in the buffer, out of curiosity. Obviously, I don't know what I'm doing!</p>\n"}, {"tags": ["c", "blas", "openblas"], "answers": [{"comments": [{"owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1550065956, "post_id": 54666736, "comment_id": 96133415, "body": "As I wrote, it is already working most of the time. Thus of course I do not use two dim dyn allocated arrays (otherwise it would never work). Yes, maybe it is some bug in my memory allocation, but I already double checked, and I don&#39;t see anything wrong there. That&#39;s why I wondered, whether I maybe need to call some <code>blas_init</code> which I&#39;m missing or so, or whether there could be other problems with <code>sgemm</code>."}, {"owner": {"reputation": 3112, "user_id": 2707697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9da9a865b63faae8438d2d57c1c71b9?s=128&d=identicon&r=PG&f=1", "display_name": "ztik", "link": "https://stackoverflow.com/users/2707697/ztik"}, "reply_to_user": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "edited": false, "score": 0, "creation_date": 1550069603, "post_id": 54666736, "comment_id": 96135771, "body": "Anyway, from the full reply you can keep that OpenBLAS (or MKL) is well maintained project and widely used library. It should work as it is from C/C++."}], "tags": [], "owner": {"reputation": 3112, "user_id": 2707697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9da9a865b63faae8438d2d57c1c71b9?s=128&d=identicon&r=PG&f=1", "display_name": "ztik", "link": "https://stackoverflow.com/users/2707697/ztik"}, "is_accepted": false, "score": 1, "last_activity_date": 1550050330, "creation_date": 1550050330, "answer_id": 54666736, "question_id": 54665750, "link": "https://stackoverflow.com/questions/54665750/openblas-sgemm-special-requirements-sometimes-i-get-nan/54666736#54666736", "title": "OpenBLAS sgemm, special requirements? sometimes I get nan", "body": "<p>You shouldn't have any problems calling BLAS from C++. OpenBLAS is a widely used library and it is not expected to have such a basic issue.</p>\n\n<p>BLAS is basically a Fortran library, so you have to keep in mind that it uses Fortran storage format for two dimensional matrices. Meaning that matrices are single chunks of memory storing two dimensional matrices in column major order.</p>\n\n<p>You cannot use two dimensional dynamically allocated arrays (i.e. <code>double **a;</code>) since the allocated memory will be fragmented. Also if you use two dimensional static arrays (i.e. <code>double a[5][4]</code>), you should keep in mind that in C/C++ the storage order is row major. In this case you could still use BLAS but you have to consider that the matrix is transposed.</p>\n\n<p>I would suggest to use single pointer vectors (<code>double *a;</code>) and access the the matrix elements manually (<code>a[i+j*m]</code>).</p>\n\n<p>OpenBLAS has multi-threaded support. On compilation you can define if it will use threads or OpenMP or nothing. </p>\n\n<p>As far the error you get, I would suggest to check your memory, since such kind of behavior is usually based on memory bugs. In any case I wouldn't expect the error to be on the <code>sgemm</code> implementation, but in the way it is invoked.</p>\n"}], "owner": {"reputation": 56945, "user_id": 133374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8337eb6c24313a1e0e81ecae24f20406?s=128&d=identicon&r=PG", "display_name": "Albert", "link": "https://stackoverflow.com/users/133374/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1550050330, "creation_date": 1550047118, "question_id": 54665750, "link": "https://stackoverflow.com/questions/54665750/openblas-sgemm-special-requirements-sometimes-i-get-nan", "title": "OpenBLAS sgemm, special requirements? sometimes I get nan", "body": "<p>I have this declaration in my header somewhere:</p>\n\n<pre><code>typedef float real;\ntypedef int integer;\nextern \"C\" {\nextern int sgemm_(char *transa, char *transb,\n  integer *m, integer *n, integer *k,\n  const real *alpha,\n  const real *a, integer *lda,\n  const real *b, integer *ldb,\n  const real *beta,\n  real *c, integer *ldc);\n}\n</code></pre>\n\n<p>Then I'm linking against the OpenBLAS lib (or optionally also other BLAS libs, e.g. MKL). And then I'm directly calling <code>sgemm_</code> in my C++ code. (The code should in principle work with any BLAS library.)</p>\n\n<p>I'm not sure if this is a bad idea or not. Or what I should take care of. E.g. do I need a special alignment? Or do I need to take care in multi-threaded environments?</p>\n\n<p>(E.g. I was looking a bit through the OpenBLAS code (<code>SGEMM</code> kernel specifically), and it looks like it assumes special alignment requirements (but maybe I got that wrong).)</p>\n\n<p>It mostly seems to work fine. Except that in some cases (non-deterministically, maybe 10% of the cases, for some complex test cases, I get <code>nan</code> in my result; and it seems to not happen in our production code).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1550046996, "post_id": 54665684, "comment_id": 96121747, "body": "Are you programming in C or C++? The answer depends very much on that, since they differ in a case like this. And in the future, please only tag the language you&#39;re actually programming in."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1550049623, "post_id": 54665684, "comment_id": 96123275, "body": "The problem is that your program has undefined behaviour."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1550049696, "post_id": 54665684, "comment_id": 96123331, "body": "Why do you claim that the second <code>printf</code> doesn&#39;t print anything when your output example shows clearly that it does?"}, {"owner": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1550055938, "post_id": 54665684, "comment_id": 96127374, "body": "as @molbdnilo has already pointed out,  your code has undefined behavior. A live test of your code is here: <a href=\"https://segfault.stensal.com/a/LMbwgWoOs44NJmj6\" rel=\"nofollow noreferrer\">segfault.stensal.com/a/LMbwgWoOs44NJmj6</a>,  feel free to use it to diagnose memory issues in the future."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 0, "last_activity_date": 1550047385, "last_edit_date": 1592644375, "creation_date": 1550047080, "answer_id": 54665742, "question_id": 54665684, "link": "https://stackoverflow.com/questions/54665684/in-my-code-second-printf-is-not-printing-any-value/54665742#54665742", "title": "in my code ,second printf is not printing any value", "body": "<p>In this line</p>\n<pre><code>*p='B';\n</code></pre>\n<p>You're trying to modify the first byte of the char array that the pointer points to. This doesn't work because that's a read-only part of your program's binary. Fix it by copying it to the stack or heap:</p>\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n    char * const p = strdup(&quot;pointerconstant&quot;); // string is copied to the heap\n    printf(&quot;first=%s&quot;, p);\n    *p = 'B';\n    printf(&quot;\\nsecond=%s&quot;, p);\n    free(p); // copy of the string on the heap is released again\n    return 0; // 0 indicates that the program executed without errors\n}\n</code></pre>\n<p>The result is:</p>\n<blockquote>\n<p>first=pointerconstant</p>\n<p>second=Bointerconstant</p>\n</blockquote>\n<p>On a side note, in my opinion it would be more idiomatic to write <code>*p = 'B';</code> as <code>p[0] = 'B';</code>, but that's up to you, of course.</p>\n<hr />\n<p>Note: this answer is in C, the question is also tagged as C++</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9083933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/778af8759e2ce5af04f5263cb0a7d7bb?s=128&d=identicon&r=PG", "display_name": "user9083933", "link": "https://stackoverflow.com/users/9083933/user9083933"}, "edited": false, "score": 0, "creation_date": 1550069848, "post_id": 54666011, "comment_id": 96135959, "body": "you are answering about string constant ,my question was about of pointer constant"}, {"owner": {"reputation": 71, "user_id": 5809736, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208395003049131/picture?type=large", "display_name": "com", "link": "https://stackoverflow.com/users/5809736/com"}, "reply_to_user": {"reputation": 23, "user_id": 9083933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/778af8759e2ce5af04f5263cb0a7d7bb?s=128&d=identicon&r=PG", "display_name": "user9083933", "link": "https://stackoverflow.com/users/9083933/user9083933"}, "edited": false, "score": 0, "creation_date": 1550070810, "post_id": 54666011, "comment_id": 96136622, "body": "you could use in the same example a pointer constant without problem like this:      <code>char p[] = &quot;pointerconstant&quot;     char * const a = p;     printf(&quot;first=%s&quot;,a);     *p=&#39;B&#39;;     printf(&quot;\\nsecond=%s&quot;,a);</code>  you cannot change the pointer&#39;s value, but you can change the value of the array."}], "tags": [], "owner": {"reputation": 71, "user_id": 5809736, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208395003049131/picture?type=large", "display_name": "com", "link": "https://stackoverflow.com/users/5809736/com"}, "is_accepted": false, "score": 3, "last_activity_date": 1550048009, "creation_date": 1550048009, "answer_id": 54666011, "question_id": 54665684, "link": "https://stackoverflow.com/questions/54665684/in-my-code-second-printf-is-not-printing-any-value/54666011#54666011", "title": "in my code ,second printf is not printing any value", "body": "<p>i think your issue is similar: <a href=\"https://stackoverflow.com/a/7547849/5809736\">https://stackoverflow.com/a/7547849/5809736</a></p>\n\n<p>From  @bdonlan for your code:\nNote that if you did this, it would work:</p>\n\n<pre><code>    char p[] = \"pointerconstant\";\n    printf(\"first=%s\",p);\n    *p='B';\n    printf(\"\\nsecond=%s\",p);\n</code></pre>\n\n<p>This is because we're initializing a non-const character array. Although the syntax looks similar, it is treated differently by the compiler.</p>\n"}], "owner": {"reputation": 23, "user_id": 9083933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/778af8759e2ce5af04f5263cb0a7d7bb?s=128&d=identicon&r=PG", "display_name": "user9083933", "link": "https://stackoverflow.com/users/9083933/user9083933"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 54665742, "answer_count": 2, "score": -1, "last_activity_date": 1550069726, "creation_date": 1550046853, "last_edit_date": 1550069726, "question_id": 54665684, "link": "https://stackoverflow.com/questions/54665684/in-my-code-second-printf-is-not-printing-any-value", "title": "in my code ,second printf is not printing any value", "body": "<p>My code is compiled fine but the second <strong>printf</strong> of my code is not printing.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    char * const p=\"pointerconstant\";\n\n    printf(\"%s\",p);\n\n    *p='B';\n\n    printf(\"\\n%s\",p);\n}\n</code></pre>\n\n<p>When I run the following program, it outputs..</p>\n\n<pre><code>pointerconstant\npointerconstant\n</code></pre>\n\n<p>But it should be..</p>\n\n<pre><code>pointerconstant\nBointerconstant\n</code></pre>\n\n<p>What is the problem here?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1550046726, "post_id": 54665613, "comment_id": 96121612, "body": "Not obviously wrong I&#39;m afraid. <code>()</code> is not a synonym for <code>(void)</code>. Read the linked dupe for more info."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1550047410, "post_id": 54665613, "comment_id": 96121998, "body": "@StoryTeller then it should give at least a warning for using the obsolescent declaration <code>void foo();</code> instead of <code>void foo(void);</code>, but even <code>-Wall -Wpedantic -Wextra -Wimplicit</code> won&#39;t give any warning. IMO the standard is somewhat poor concerning this."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1550047511, "post_id": 54665613, "comment_id": 96122057, "body": "I agree. But that&#39;s a QoI issue. I seem to recall there is a flag for warning about obsolescent features. It&#39;s not covered by <code>-Wall -Wextra</code> to avoid setting fire to entire legacy code bases. I&#39;ll see if I can dig it up."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1550047706, "post_id": 54665613, "comment_id": 96122169, "body": "Found it. It&#39;s <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options\" rel=\"nofollow noreferrer\"><code>-Wstrict-prototypes</code></a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1550047802, "post_id": 54665613, "comment_id": 96122231, "body": "@StoryTeller just found it too myself, yes <code>-Wstrict-prototypes</code> does the job. Thanks."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550048223, "post_id": 54665613, "comment_id": 96122455, "body": "There are warnings that aren&#39;t covered by <code>-Wpedantic</code>? Thank you for asking this question, I learned something useful. :) On an unrelated note, MSVC doesn&#39;t compile the code, so I guess it is not following the rules here. Or maybe there&#39;s a setting for it?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1550048344, "post_id": 54665613, "comment_id": 96122532, "body": "@Blaze concerning MSVC I think it&#39;s mainly because the MS C compiler complies only poorly to the standard."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1550048464, "post_id": 54665613, "comment_id": 96122596, "body": "@Blaze - Strictly speaking. This isn&#39;t something for <code>pedantic</code> flags to complain about. The code is still valid according to the standard. It&#39;s just the standard that could use a fix."}], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 1, "closed_date": 1550046691, "answer_count": 0, "score": 1, "last_activity_date": 1550046606, "creation_date": 1550046606, "question_id": 54665613, "link": "https://stackoverflow.com/questions/54665613/why-is-this-error-not-detected-by-compiler", "closed_reason": "Duplicate", "title": "Why is this error not detected by compiler", "body": "<p>I don't understand why following simple code is compiled (using -Wall) without even warnings by gcc and clang:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo();\n\nint main()\n{\n  foo();\n}\n\nvoid foo(char *p)\n{\n    puts(p);\n}\n</code></pre>\n\n<p>IMO this code is obviously wrong and the compiler should detect this.</p>\n"}, {"tags": ["c", "morse-code"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550045650, "post_id": 54665324, "comment_id": 96121116, "body": "You call <code>LED_()</code> without a parameter, but the function is declared like this: <code>void LED_(char* mval)</code>. Compile with all warnings enabled, and treat the warnings as errors."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1550045656, "post_id": 54665324, "comment_id": 96121119, "body": "Please tell us what your hardware is. It seems the address bus is too small and you re exceeding addressable program memory."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550045732, "post_id": 54665324, "comment_id": 96121160, "body": "On this line <code>strcpy(destination[i][j++], code);</code> <code>j</code> is uninitialized."}, {"owner": {"reputation": 1, "user_id": 7154684, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RxBh5Wj4K0M/AAAAAAAAAAI/AAAAAAAAALU/sabv0_tgnkc/photo.jpg?sz=128", "display_name": "Jay", "link": "https://stackoverflow.com/users/7154684/jay"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550046666, "post_id": 54665324, "comment_id": 96121586, "body": "@Jabberwocky I&#39;m using code composer and it isn&#39;t giving any more errors even after changing the settings. How would you recommend declaring the function? I can&#39;t seem to get it to declare properly even after fiddling?  Also, j is defined before being used. What needs to be done to initialize it?  I am using a TI MSP432 board as the processor per request from my professors."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550051870, "post_id": 54665324, "comment_id": 96124782, "body": "@Jay declare change <code>void LED_();</code> to <code>void LED_(char* mval);</code> and provide an appropriate parameter to when you call <code>LED_</code>. Also initialize the variable <code>j</code> before using it (probably a <code>j = 0;</code> is missing somewhere). Uninitialized local variables have an indetermined value."}, {"owner": {"reputation": 1, "user_id": 7154684, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RxBh5Wj4K0M/AAAAAAAAAAI/AAAAAAAAALU/sabv0_tgnkc/photo.jpg?sz=128", "display_name": "Jay", "link": "https://stackoverflow.com/users/7154684/jay"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550085724, "post_id": 54665324, "comment_id": 96144784, "body": "@Jabberwocky So I went through and did those changes but Code Composer didn&#39;t want to run it. Using another person&#39;s laptop we found it ran all the way down to the third &quot;for&quot; loop. It seems to get stuck on that loop?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550139125, "post_id": 54665324, "comment_id": 96163686, "body": "Calling <code>LED_()</code> without a parameter is simply wrong. It will lead to <i>undefined behaviour</i> (google that term). You should declare functions without parameters with void: <code>void LED_setup();</code> -&gt; <code>void LED_setup(void);</code> and declare <code>LED_</code>correctly: <code>void LED_();</code> -&gt; <code>void LED_(char* mval);</code>. Then your program won&#39;t compile unless you call <code>LED_</code> with an appropriate argument."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1550226981, "creation_date": 1550226981, "answer_id": 54707465, "question_id": 54665324, "link": "https://stackoverflow.com/questions/54665324/how-to-fix-error-enabling-this-function-address-exceeds-the-allowed-range-in/54707465#54707465", "title": "How to fix &quot;Error enabling this function: Address exceeds the allowed range&quot; in C", "body": "<blockquote>\n  <p>I am getting the \"Error enabling this function: Address exceeds the allowed range\" message \u2026</p>\n</blockquote>\n\n<p>You might exceed a translation limit. Especially the array <code>char destination[MAX] [MAX] [8]</code> has (at least, if <code>char</code> is a byte) 80000 bytes, which is more than the minimum required for an implementation conforming to the C Standard:</p>\n\n<blockquote>\n  <p>\u2014 65535 bytes in an object (in a hosted environment only)</p>\n</blockquote>\n\n<p>You don't need such a big array, since you don't need to convert all input strings first and only after that output the converted <code>destination</code> to the LED - instead you could convert and output one string at a time. Try rearranging your program that way, using just <code>char destination[SIZE][6]</code> (the maximum code length is 5).</p>\n\n<p>Another thing you can try is to move the big arrays <code>string</code> and <code>destination</code> to global scope - local variables might be more restricted than globals by the implementation.</p>\n"}], "owner": {"reputation": 1, "user_id": 7154684, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RxBh5Wj4K0M/AAAAAAAAAAI/AAAAAAAAALU/sabv0_tgnkc/photo.jpg?sz=128", "display_name": "Jay", "link": "https://stackoverflow.com/users/7154684/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1550226981, "creation_date": 1550045490, "question_id": 54665324, "link": "https://stackoverflow.com/questions/54665324/how-to-fix-error-enabling-this-function-address-exceeds-the-allowed-range-in", "title": "How to fix &quot;Error enabling this function: Address exceeds the allowed range&quot; in C", "body": "<p>I am trying to create a program that converts a letter or number input by the user to morse code which then blinks an LED matching the output. I am getting the \"Error enabling this function: Address exceeds the allowed range\" message when looking at the debugging and am unsure of how to fix this. What do I need to do?</p>\n\n<p>I've tried looking the problem up and changing the value of the arrays doesn't seem to change the error.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"msp432.h\"\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\n\n#define MAX 100\n#define SIZE 255\n\n\nvoid LED_();\nvoid LED_setup();\n\nint main(){\n\nchar string[MAX][SIZE];\nchar destination[MAX] [MAX] [8];\nchar *input[38]={\n\n                 \".-\",   //A\n                 \"-...\", //B\n                 \"-.-.\", //C\n                 \"-..\",  //D\n                 \".\",    //E\n                 \"..-.\", //F\n                 \"--.\",  //G\n                 \"....\", //H\n                 \"..\",   //I\n                 \".---\", //J\n                 \"-.-\",  //K\n                 \".-..\", //L\n                 \"--\",   //M\n                 \"-.\",   //N\n                 \"---\",  //O\n                 \".--.\", //P\n                 \"--.-\", //Q\n                 \".-.\",  //R\n                 \"...\",  //S\n                 \"-\",    //T\n                 \"..-\",  //U\n                 \"...-\", //V\n                 \".--\",  //W\n                 \"-..-\", //X\n                 \"-.--\", //Y\n                 \"--..\", //Z\n                 \".----\", //1      //numbers begin here\n                 \"..---\", //2\n                 \"...--\", //3\n                 \"....-\", //4\n                 \".....\", //5\n                 \"-....\", //6\n                 \"--...\", //7\n                 \"---..\", //8\n                 \"----.\", //9\n                 \"-----\", //0\n                 \"/\"     //space\n\n};\n\nchar *output[38]= {\n                   \"A\",\n                   \"B\",\n                   \"C\",\n                   \"D\",\n                   \"E\",\n                   \"F\",\n                   \"G\",\n                   \"H\",\n                   \"I\",\n                   \"J\",\n                   \"K\",\n                   \"L\",\n                   \"M\",\n                   \"N\",\n                   \"O\",\n                   \"P\",\n                   \"Q\",\n                   \"R\",\n                   \"S\",\n                   \"T\",\n                   \"U\",\n                   \"V\",\n                   \"W\",\n                   \"X\",\n                   \"Y\",\n                   \"Z\",\n                   \"0\",\n                   \"1\",\n                   \"2\",\n                   \"3\",\n                   \"4\",\n                   \"5\",\n                   \"6\",\n                   \"7\",\n                   \"8\",\n                   \"9\",\n                   \"/\"\n};\n\nchar *code, *separator = \" \";\n\nint i;\nint c;\nint j;\nint x;\nint m[MAX];\n\nprintf(\"Enter the number of cases:\");\n\nscanf(\"%d\", &amp;x);\ngetchar();\n\nfor(i = 0; i &lt; x; i++){\n\n    printf(\"Case#%d: \", i+1);\n    gets(string[i]);\n\n}\n\nfor(i =0; i &lt; x; i++){\n    for(code = strtok(string[i], separator); code != NULL; code = strtok(NULL, separator)){  \n        strcpy(destination[i][j++], code);                                                   \n    }                                                                                        \n\n    m[i] = j;  \n}\n\nfor (i = 0; i &lt; x; i++){\n\n    printf(\"Case#%d: \", i+1);\n\n    for(j = 0; j &lt; m[i]; j++){\n        for(c = 0; c &lt; 37; c++){\n            if(strcmp(destination[i][j], input[c]) == 0){  \n                printf(\"%s\", output[c]);                   \n            }\n        }\n\n        printf(\"\\n\");\n        LED_setup();\n        LED_();\n\n    }\n\n}\nreturn 0;\n}\n\nvoid LED_(char* mval){   \n\nchar* a;\n\nfor (a = mval; a != NULL; a++){\n    if (*a == '.')\n    {\n        P4-&gt;OUT |= 0x01;    //LED On\n        _delay_cycles(500); //Delay 0.5 second\n        P4-&gt;OUT &amp;= ~0x01;   //LED Off\n    }\n    else if (*a == '-')\n    {\n        P4-&gt;OUT |= 0x01;     //LED On\n        _delay_cycles(1000); //Delay 1 second\n        P4-&gt;OUT &amp;= ~0x01;    //LED Off\n    }\n    else\n    {\n        _delay_cycles(750);  //delay of 3/4 second\n    }\n}\n\n}\n\nvoid LED_setup(){\n\nP6-&gt;DIR |= 0x01;\nP6-&gt;OUT &amp;= ~0x01;\n\n} \n</code></pre>\n"}, {"tags": ["c", "instrumentation", "gcov"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550045803, "post_id": 54665218, "comment_id": 96121207, "body": "Not a makefile question. Removed incorrect tag."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550045988, "post_id": 54665218, "comment_id": 96121300, "body": "Please have a look at your build log (enable verbose mode if you don&#39;t see any commands) and then add an example compiler command line, i.e. from a module where you expect <code>--coverage</code> to be used, and a linker command to your question text. For coverage to work you&#39;ll need it to be enabled in the compilation <b>and</b> linking command lines."}, {"owner": {"reputation": 1035, "user_id": 9772448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d45052bf9cd42636b2bed9acdea2ff?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavani Prasad", "link": "https://stackoverflow.com/users/9772448/bhavani-prasad"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1550140786, "post_id": 54665218, "comment_id": 96164729, "body": "Thanks for the reply Stefan Becker.  Actually I am building a yocto image so using bitbake to compile the code. So there is no make command line to add debug mode.  The compilation generated .gcno successfully for a module. While running the functional test cases for the module, .gcda files are not generated."}, {"owner": {"reputation": 626, "user_id": 4690576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a328eeb1bb069c34be414a5e7bcda10?s=128&d=identicon&r=PG", "display_name": "AmeyaVS", "link": "https://stackoverflow.com/users/4690576/ameyavs"}, "edited": false, "score": 0, "creation_date": 1550142827, "post_id": 54665218, "comment_id": 96165892, "body": "Are you trying to get coverage for Linux Kernel or driver module?"}, {"owner": {"reputation": 1035, "user_id": 9772448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d45052bf9cd42636b2bed9acdea2ff?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavani Prasad", "link": "https://stackoverflow.com/users/9772448/bhavani-prasad"}, "edited": false, "score": 0, "creation_date": 1550151332, "post_id": 54665218, "comment_id": 96170796, "body": "Yes Ameya. We are trying to get the coverage for Yocto modules (both kernel and driver)"}], "answers": [{"tags": [], "owner": {"reputation": 626, "user_id": 4690576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a328eeb1bb069c34be414a5e7bcda10?s=128&d=identicon&r=PG", "display_name": "AmeyaVS", "link": "https://stackoverflow.com/users/4690576/ameyavs"}, "is_accepted": false, "score": 0, "last_activity_date": 1550170606, "creation_date": 1550170606, "answer_id": 54697329, "question_id": 54665218, "link": "https://stackoverflow.com/questions/54665218/gcda-files-are-not-generated-while-running-the-functional-test-cases-on-the-inst/54697329#54697329", "title": "gcda files are not generated while running the functional test cases on the instrumented image", "body": "<p>As per the comments it is not directly possible to just build the Linux Kernel with the Coverage Compiler flags and assume to get meaningful coverage metrics.</p>\n\n<p>The Code Coverage metrics actually require some file systems to be available to write the run-time coverage data(i.e. *.gcda files).</p>\n\n<p>If you want to enable Code Coverage for Linux Kernel <a href=\"https://01.org/linuxgraphics/gfx-docs/drm/dev-tools/gcov.html\" rel=\"nofollow noreferrer\">here</a> is a documentation on how to go about enabling the support using a GCOV virtual filesystem to collect coverage metrics.</p>\n\n<p>Also, assuming you are cross compiling for a different architecture then probably you will have to use a cross-gcov tool to collect the coverage metrics, after you have captured the *.gcno files after execution.</p>\n"}], "owner": {"reputation": 1035, "user_id": 9772448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d45052bf9cd42636b2bed9acdea2ff?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavani Prasad", "link": "https://stackoverflow.com/users/9772448/bhavani-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551763029, "creation_date": 1550045058, "last_edit_date": 1551763029, "question_id": 54665218, "link": "https://stackoverflow.com/questions/54665218/gcda-files-are-not-generated-while-running-the-functional-test-cases-on-the-inst", "title": "gcda files are not generated while running the functional test cases on the instrumented image", "body": "<p>I am trying to generate the coverage for C files (Yocto project).</p>\n\n<p>So, I have added gcov flags <strong>\"-g -O0 --coverage\"</strong> in the Makefile.am of most of the available modules.</p>\n\n<p>It generated \".gcno\" files during the compilation of each module with coverage flags.</p>\n\n<p>I have generated an image from all these modules and loaded it in the test device and ran functional test cases.</p>\n\n<p>I am able to find the path of the \"gcda\" files using strings command from the process that is running the test device.</p>\n\n<p>So I have used gdb mode to flush the coverage using the \"__gcov_flush\" command after attaching the process id to gdb.</p>\n\n<p>This throws an error \"No symbol __gcov_flush in current context\". Please suggest me what may be the cause for this error.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550040954, "post_id": 54664236, "comment_id": 96118894, "body": "How about just disabling the warning itself?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550040972, "post_id": 54664236, "comment_id": 96118904, "body": "<code>#pragma warning (disable: XXXX)</code> where XXXX is the number of the warning (I forget what it is). But in C++ you can also remove the parameter name (and just leave the type), that&#39;s probably the more correct thing to do."}, {"owner": {"reputation": 1, "user_id": 10671119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_aeJswgm07g/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hvo0N6qSCbGfUa3tXUkV6LZsYYuQ/mo/photo.jpg?sz=128", "display_name": "pramod madinapalli", "link": "https://stackoverflow.com/users/10671119/pramod-madinapalli"}, "edited": false, "score": 0, "creation_date": 1550041230, "post_id": 54664236, "comment_id": 96119018, "body": "can you suggest me in c make ,thank you for suggestion"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550041282, "post_id": 54664236, "comment_id": 96119042, "body": "@pramodmadinapalli If your question is about C it should be tagged as C not C++. You can&#39;t remove the parameter name in C, but the <code>#pragma</code> should still work."}, {"owner": {"reputation": 1, "user_id": 10671119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_aeJswgm07g/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hvo0N6qSCbGfUa3tXUkV6LZsYYuQ/mo/photo.jpg?sz=128", "display_name": "pramod madinapalli", "link": "https://stackoverflow.com/users/10671119/pramod-madinapalli"}, "edited": false, "score": 0, "creation_date": 1550041731, "post_id": 54664236, "comment_id": 96119248, "body": "no bro cmake not c language,see i am making my project platform independent by using cmake and needed of macro to disable all this warnings"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1550041918, "post_id": 54664236, "comment_id": 96119338, "body": "Why don&#39;t you show a short snippet that triggers the warning and also exactly the warning that you get? Are you writing C or C++ (the tags say C!?)?"}, {"owner": {"reputation": 1, "user_id": 10671119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_aeJswgm07g/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hvo0N6qSCbGfUa3tXUkV6LZsYYuQ/mo/photo.jpg?sz=128", "display_name": "pramod madinapalli", "link": "https://stackoverflow.com/users/10671119/pramod-madinapalli"}, "edited": false, "score": 0, "creation_date": 1550042093, "post_id": 54664236, "comment_id": 96119424, "body": "if(MSVC) add_definitions(-D_CRT_SECURE_NO_WARNINGS) add_definitions(-D-Wno-unused-parameter) add_definitions(-D-Wno-unused-variable) add_definitions(-D-Wno-unreferenced-formal-parameter)"}, {"owner": {"reputation": 1, "user_id": 10671119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_aeJswgm07g/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hvo0N6qSCbGfUa3tXUkV6LZsYYuQ/mo/photo.jpg?sz=128", "display_name": "pramod madinapalli", "link": "https://stackoverflow.com/users/10671119/pramod-madinapalli"}, "edited": false, "score": 0, "creation_date": 1550042143, "post_id": 54664236, "comment_id": 96119457, "body": "this is the way i try to give flags for compiler to suppress,but for unrefrenced formal parameter it is not working"}, {"owner": {"reputation": 1, "user_id": 10671119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_aeJswgm07g/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hvo0N6qSCbGfUa3tXUkV6LZsYYuQ/mo/photo.jpg?sz=128", "display_name": "pramod madinapalli", "link": "https://stackoverflow.com/users/10671119/pramod-madinapalli"}, "edited": false, "score": 0, "creation_date": 1550042245, "post_id": 54664236, "comment_id": 96119508, "body": "if(MSVC)   # Force to always compile with W4   if(CMAKE_CXX_FLAGS MATCHES &quot;/W[0-4]&quot;)     string(REGEX REPLACE &quot;/W[0-4]&quot; &quot;/W4&quot; CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS}&quot;)   else()     set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} /W4&quot;)   endif() elseif(CMAKE_COMPILER_IS_GNUCC OR CMAKE_COMPILER_IS_GNUCXX)   # Update if necessary   set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -Wall -Wno-long-long -pedantic&quot;) endif()"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1550042464, "post_id": 54664236, "comment_id": 96119589, "body": "Please put relevant stuff into the question, not into comments. <code>-D-Wno-unused-parameter</code> defines a macro named <code>-Wno-unused-parameter</code> which I bet is not a valid macro name. This looks like you try to emulate a gcc command line, but that does not work."}], "answers": [{"tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": false, "score": 0, "last_activity_date": 1550042915, "last_edit_date": 1550042915, "creation_date": 1550042586, "answer_id": 54664658, "question_id": 54664236, "link": "https://stackoverflow.com/questions/54664236/unrefrenced-formal-parameter-warning-in-c-visual-studio/54664658#54664658", "title": "unrefrenced formal parameter warning in c++ (visual studio)", "body": "<p>As john said:</p>\n\n<p>A solution in the code is to</p>\n\n<pre><code>#pragma warning disable(4100)\n</code></pre>\n\n<p>(or other <a href=\"https://stackoverflow.com/questions/3020584/avoid-warning-unreferenced-formal-parameter?r=SearchResults&amp;s=1%7C138.1909\">solutions</a> or <code>[[maybe_unused]]</code> in C++17). You can also add <code>/Wd4100</code> in the makefile to the compiler command line.</p>\n"}], "owner": {"reputation": 1, "user_id": 10671119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_aeJswgm07g/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hvo0N6qSCbGfUa3tXUkV6LZsYYuQ/mo/photo.jpg?sz=128", "display_name": "pramod madinapalli", "link": "https://stackoverflow.com/users/10671119/pramod-madinapalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550042915, "creation_date": 1550040800, "last_edit_date": 1550041515, "question_id": 54664236, "link": "https://stackoverflow.com/questions/54664236/unrefrenced-formal-parameter-warning-in-c-visual-studio", "title": "unrefrenced formal parameter warning in c++ (visual studio)", "body": "<p>In my code there is around 500 \"unreferenced formal parameter\", I need to suppress them, I got include guards but I need to do it for 5oo times, can anyone suggest the macro to suppress these warnings.</p>\n\n<pre><code>(void)status;\n\nhCVar* \npTmpVar = (hCVar *)pIB;\n</code></pre>\n\n<p>This is one among many.</p>\n\n<p>A macro that can suppress all of them. How can I do so?</p>\n"}, {"tags": ["c", "algorithm", "embedded", "pic", "can-bus"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1550044317, "post_id": 54663427, "comment_id": 96120472, "body": "&quot; For that %in 99 60 of the arrays and %1 in 40 of them then I will dipslay 99)&quot;  Huh? I don&#39;t understand what you are trying to do."}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 0, "creation_date": 1550049761, "post_id": 54663427, "comment_id": 96123376, "body": "I don&#39;t know how you can do this programmatically or what exactly you want to do programmatically, but by using a <i>CANalyzer</i> (no promotion intended) tool you can analyze whatever you are getting on your CAN Bus."}, {"owner": {"reputation": 314, "user_id": 10961392, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156833179578536/picture?type=large", "display_name": "G&#252;nkut A\u011fabeyo\u011flu", "link": "https://stackoverflow.com/users/10961392/g%c3%bcnkut-a%c4%9fabeyo%c4%9flu"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1550053865, "post_id": 54663427, "comment_id": 96126071, "body": "@Lundin I collect received data in an array size of 100 for example. Lets imagine I received data 99 for 400 ms that makes the first 40 elements of array 99. array [1],....array[40] =99 and for 600 ms long all the data I receive is 1: array[41],....array[100] =1. In thise case I will think that the data is 1 and I will display it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 0, "creation_date": 1550060073, "post_id": 54663427, "comment_id": 96129780, "body": "@JoeyMallone Obviously you should be using CANanalyser and not CANalyser :) These tools have such imaginative names. Just call &#39;em CAN listeners unless you work for Ixxat or Vector :)"}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1550060339, "post_id": 54663427, "comment_id": 96129917, "body": "@Lundin, I don&#39;t. <code>:)</code>, except that my knowledge was limited vis-&#224;-vis other non-<i>Vector</i> CANanalysers."}], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 10961392, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156833179578536/picture?type=large", "display_name": "G&#252;nkut A\u011fabeyo\u011flu", "link": "https://stackoverflow.com/users/10961392/g%c3%bcnkut-a%c4%9fabeyo%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1550054008, "post_id": 54667093, "comment_id": 96126162, "body": "so as I understood CAN protocol itself does this error detection. When I receive a message it is already passed the CRC calculation successfully am I right?"}, {"owner": {"reputation": 442, "user_id": 3596203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6adada011169a7f9bc763cae36a5ae?s=128&d=identicon&r=PG&f=1", "display_name": "VioletVynil", "link": "https://stackoverflow.com/users/3596203/violetvynil"}, "reply_to_user": {"reputation": 314, "user_id": 10961392, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156833179578536/picture?type=large", "display_name": "G&#252;nkut A\u011fabeyo\u011flu", "link": "https://stackoverflow.com/users/10961392/g%c3%bcnkut-a%c4%9fabeyo%c4%9flu"}, "edited": false, "score": 1, "creation_date": 1550055603, "post_id": 54667093, "comment_id": 96127160, "body": "Correct, CAN protocol has built in error detection and error handling mechanism.  if you read a message payload in Application, it means it passed the lower tiers without problem."}, {"owner": {"reputation": 314, "user_id": 10961392, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156833179578536/picture?type=large", "display_name": "G&#252;nkut A\u011fabeyo\u011flu", "link": "https://stackoverflow.com/users/10961392/g%c3%bcnkut-a%c4%9fabeyo%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1550056091, "post_id": 54667093, "comment_id": 96127455, "body": "So there is no garbage that I receive, they are actual data. It is the transmitter that sends wrong data. Which means battery sends wrong data sometimes."}, {"owner": {"reputation": 442, "user_id": 3596203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6adada011169a7f9bc763cae36a5ae?s=128&d=identicon&r=PG&f=1", "display_name": "VioletVynil", "link": "https://stackoverflow.com/users/3596203/violetvynil"}, "reply_to_user": {"reputation": 314, "user_id": 10961392, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156833179578536/picture?type=large", "display_name": "G&#252;nkut A\u011fabeyo\u011flu", "link": "https://stackoverflow.com/users/10961392/g%c3%bcnkut-a%c4%9fabeyo%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1550056564, "post_id": 54667093, "comment_id": 96127732, "body": "Yes. Maybe its another message ID. Or it is a multiplexed PDU , for which you have only one interpretation. Or simply the battery sends a cyclic message whether has information to fill it or doesn&#39;t."}], "tags": [], "owner": {"reputation": 442, "user_id": 3596203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6adada011169a7f9bc763cae36a5ae?s=128&d=identicon&r=PG&f=1", "display_name": "VioletVynil", "link": "https://stackoverflow.com/users/3596203/violetvynil"}, "is_accepted": true, "score": 1, "last_activity_date": 1550051316, "creation_date": 1550051316, "answer_id": 54667093, "question_id": 54663427, "link": "https://stackoverflow.com/questions/54663427/what-is-an-appropriate-way-to-detect-errors-in-can-bus/54667093#54667093", "title": "what is an appropriate way to detect errors in CAN-Bus?", "body": "<p>Yes, you can use CRC calculation, because CRC is calculated also at receiver side by Communication Controllers.  Thats how a CRC error is detected, for instance. To elaborate: </p>\n\n<p>battery sends complete message; message gets interference on phys layer; receiver (your PIC) receives message and calculates the CRC on it; <strong>does not match</strong> with the CRC tag included in message; \nPIC CC will have a REC error +1, and will not ACK the message to the Battery. </p>\n\n<p><strong>You will detect every type of CAN message error on receiver side</strong>, except bit Error, which is also irrelevant since it will result in incomplete message. </p>\n\n<p>Basically, you shouldn't be able to rely on the received CAN message content to deduce Battery level, <strong>if the message is corrupted (garbage)</strong>. It is simply discarded before arrives to the Application layer of your PIC. </p>\n"}], "owner": {"reputation": 314, "user_id": 10961392, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156833179578536/picture?type=large", "display_name": "G&#252;nkut A\u011fabeyo\u011flu", "link": "https://stackoverflow.com/users/10961392/g%c3%bcnkut-a%c4%9fabeyo%c4%9flu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 54667093, "answer_count": 1, "score": 0, "last_activity_date": 1550054651, "creation_date": 1550037203, "last_edit_date": 1550054651, "question_id": 54663427, "link": "https://stackoverflow.com/questions/54663427/what-is-an-appropriate-way-to-detect-errors-in-can-bus", "title": "what is an appropriate way to detect errors in CAN-Bus?", "body": "<p>I am communicating with a battery that sends data with CAN Bus protocol (J1939). I use PIC 18F26K83. My goal is to display remaining state of charge on a display. For example I have value  %99 in 60 of the arrays and %1 in 40 of them then I will display %99). However, it does not look like a reliable solution because I do not know how many garbage datas I receive. Please note that I cannot use some error detection algorithms such as check sum because I have no access to microcontrollers in batter, I can only use receiver side (display).\nEdit: I am aware of CRC in CAN Bus but it seems like some times it does not work since sometimes I get garbage.</p>\n"}, {"tags": ["c", "shell"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550035786, "post_id": 54663108, "comment_id": 96116901, "body": "Remember that <code>any_null_terminated_string[strlen(any_null_terminated_string&zwnj;&#8203;)]</code> will be the null terminator. Now where could the last character of the string be?"}, {"owner": {"reputation": 1, "user_id": 7266059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9422b323c0b2820de09e4a62ac0a119?s=128&d=identicon&r=PG&f=1", "display_name": "fnetma", "link": "https://stackoverflow.com/users/7266059/fnetma"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550036161, "post_id": 54663108, "comment_id": 96117014, "body": "I know how to do it with just one string but I am confused on when I am looping through them and I have an index. Just a single string is <code>path[strlen(path)-1] == &#39;&#47;&#39;</code>"}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550036501, "post_id": 54663108, "comment_id": 96117138, "body": "as per the observation it seems paths[k] is a sting, means this is a 2 dimentional array passed to this function. so as you have done above paths[k][strlen(paths[k]) -1] should be checked for the &#39;/&#39; like: if ( paths[k][strlen(paths[k]) -1] == &#39;/&#39;) in the loop."}, {"owner": {"reputation": 1, "user_id": 7266059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9422b323c0b2820de09e4a62ac0a119?s=128&d=identicon&r=PG&f=1", "display_name": "fnetma", "link": "https://stackoverflow.com/users/7266059/fnetma"}, "edited": false, "score": 0, "creation_date": 1550037649, "post_id": 54663108, "comment_id": 96117536, "body": "Thank you very much. I now understand, first index to the string I want and then to the end of that string to see if there is a / or not."}, {"owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "edited": false, "score": 0, "creation_date": 1550038310, "post_id": 54663108, "comment_id": 96117786, "body": "You may not worry about the ending / since usually &quot;path//command&quot; works the same as &quot;path/command&quot;."}, {"owner": {"reputation": 1, "user_id": 7266059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9422b323c0b2820de09e4a62ac0a119?s=128&d=identicon&r=PG&f=1", "display_name": "fnetma", "link": "https://stackoverflow.com/users/7266059/fnetma"}, "edited": false, "score": 0, "creation_date": 1550038764, "post_id": 54663108, "comment_id": 96117972, "body": "Ya but I am not guaranteed a path with an ending /, so of there isn&#39;t one I need to add it."}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550039240, "post_id": 54663108, "comment_id": 96118185, "body": "@fnetma: if this path is given to any system operation like fopen(), execv() etc then there is no need for us to check and handle this, you can always have &#39;/&#39; concatenated always. so resulting string will have 1 or 2 &#39;/&#39; based on the input and system operations will take care as long as this path is present in the file system. But if this path is used  for some other local comparison with the database entry or for any local use then we may have to make sure of this handling. But for your purpose of execv this special handing not needed."}], "owner": {"reputation": 1, "user_id": 7266059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9422b323c0b2820de09e4a62ac0a119?s=128&d=identicon&r=PG&f=1", "display_name": "fnetma", "link": "https://stackoverflow.com/users/7266059/fnetma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550035981, "creation_date": 1550035512, "last_edit_date": 1550035981, "question_id": 54663108, "link": "https://stackoverflow.com/questions/54663108/how-do-i-check-if-every-string-in-an-array-ends-in-a-or-not", "title": "How do I check if every string in an array ends in a / or not", "body": "<p>I am trying to find out which strings in my array end in a /\nbut I am unsure how to check this</p>\n\n<pre><code>for(int k = 0; k &lt; num_paths; k++) {\n    path = malloc(strlen(paths[k]) + strlen(line) + 2);\n    if(path == NULL) {\n       exit(1);\n    }\n    if (paths[k] != '/') { // here is where I am trying to check\n       strcpy(path, paths[k]);\n       strcat(path, \"/\");\n       strcat(path, commands[0]);\n       if(access(path, X_OK) == 0) {\n          execv(path, commands);\n          error();\n       }\n    } else {\n       strcpy(path, paths[k]);\n       strcat(path, commands[0]);\n       if(access(path, X_OK) == 0) {\n          execv(path, commands);\n          error();\n       }\n    }\n    free(path);\n}\n</code></pre>\n\n<p>I am expecting to find each string that doesnt have a /</p>\n"}, {"tags": ["c", "linux", "windows", "cygwin"], "comments": [{"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1550035588, "post_id": 54663079, "comment_id": 96116845, "body": "Welcome to StackOverflow! Please share some code illustrating your problem"}, {"owner": {"reputation": 1, "user_id": 10214837, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YK9o8WyP5hY/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7o-JGK7fYRgxSB6Ngh6ZJGnE-Tu5A/mo/photo.jpg?sz=128", "display_name": "Sanjeev Kumar", "link": "https://stackoverflow.com/users/10214837/sanjeev-kumar"}, "reply_to_user": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1550042140, "post_id": 54663079, "comment_id": 96119453, "body": "my main code looks like this.  while(1) {     if (getch() == &#39;q&#39;)          break;     display_time(); }  Actually i&#39;m planning to do digital watch code. So when there is input &quot;m&quot; i need to go to stop watch mode. till i receive &quot;m&quot;, it should display time."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1550047545, "post_id": 54663079, "comment_id": 96122074, "body": "Check <a href=\"https://stackoverflow.com/help/mcve\">&#91;SO&#93;: How to create a Minimal, Complete, and Verifiable example (mcve)</a> for details on what a question should contain. What is the command you use to build your program? Most likely you&#39;re missing a <code>-lncurses</code>."}, {"owner": {"reputation": 606, "user_id": 4257143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q195EKev0qQ/AAAAAAAAAAI/AAAAAAAAAxM/R2bEEt98Yrc/photo.jpg?sz=128", "display_name": "Doug Henderson", "link": "https://stackoverflow.com/users/4257143/doug-henderson"}, "edited": false, "score": 0, "creation_date": 1550186197, "post_id": 54663079, "comment_id": 96187808, "body": "Have you used cygwin setup to install the <code>ncurses</code> and <code>libncurses-devel</code> packages. You can probably uninstall <code>libxerces-c</code> and <code>libxerces-c-devel</code> unless you need them for other reasons. You might find the <code>ncurses-demo</code> package helpful."}], "owner": {"reputation": 1, "user_id": 10214837, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YK9o8WyP5hY/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7o-JGK7fYRgxSB6Ngh6ZJGnE-Tu5A/mo/photo.jpg?sz=128", "display_name": "Sanjeev Kumar", "link": "https://stackoverflow.com/users/10214837/sanjeev-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550077148, "creation_date": 1550035395, "last_edit_date": 1550077148, "question_id": 54663079, "link": "https://stackoverflow.com/questions/54663079/key-stroke-interrupt-in-cygwin", "title": "key stroke interrupt in cygwin", "body": "<p>I'm using cygwin in windows 7. I have a function which does something in while(1) continuously. I want to have interrupt when there is a input from keyboard. I get blocked if i use scanf inside while(1). I installed ncurses in cygwin and tried using ncurses.h to use getch() function which will not block the while(1). But I get errors like:</p>\n\n<p><img src=\"https://i.stack.imgur.com/3s46l.png\" alt=\"enter image description here\"></p>\n\n<p>I serached and installed some additional libraries like libxerces-c and libxerces-c-devel. But still didn't work. Anyone help please.</p>\n\n<pre><code>while (1) {\n    if (getch() == 'q')\n       break; \n    display_time();\n}\n</code></pre>\n"}, {"tags": ["c", "lua", "luajit"], "comments": [{"owner": {"reputation": 374839, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1550082288, "post_id": 54663036, "comment_id": 96143227, "body": "Wouldn&#39;t that depend very much on the C code, not the Lua code? Lua code has no concept of &quot;blocking&quot;; it&#39;s whatever code <code>lua_resume</code> called that does the blocking."}, {"owner": {"reputation": 33, "user_id": 4147418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9ebb30360f343fb585d075fcf9bd07?s=128&d=identicon&r=PG&f=1", "display_name": "humand", "link": "https://stackoverflow.com/users/4147418/humand"}, "reply_to_user": {"reputation": 374839, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1550082721, "post_id": 54663036, "comment_id": 96143432, "body": "Thank you for replying. I meant to say &quot;unless I finish reading&quot; instead of &quot;until I finish reading&quot;. I can edit if necessary. Basically if I keep reading from the fd in a non-blocking fashion I can get control to go back and forth between C and Lua, but if I want to only get one character and call lua_resume, it blocks until io.popen appears to finish its process."}, {"owner": {"reputation": 33, "user_id": 4147418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9ebb30360f343fb585d075fcf9bd07?s=128&d=identicon&r=PG&f=1", "display_name": "humand", "link": "https://stackoverflow.com/users/4147418/humand"}, "reply_to_user": {"reputation": 374839, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1550090183, "post_id": 54663036, "comment_id": 96146898, "body": "@Nicol Bolas I would agree with that and that&#39;s part of why it&#39;s beyond me. First lua_resume starts the coroutine for the main Lua function (from C), then second lua_resume tries to resume that main Lua function (from C) after it&#39;s called from Lua. It might sound a bit confusing, let me know if I should write some code."}, {"owner": {"reputation": 33, "user_id": 4147418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9ebb30360f343fb585d075fcf9bd07?s=128&d=identicon&r=PG&f=1", "display_name": "humand", "link": "https://stackoverflow.com/users/4147418/humand"}, "reply_to_user": {"reputation": 374839, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1550100719, "post_id": 54663036, "comment_id": 96150960, "body": "I think I found the blocking code. In the Lua script, calling the corresponding f:close() of the f = io.popen(..) blocks the continuation of the Lua script until the process finishes. Will the GC collect it if I don&#39;t explicitly close it (to avoid blocking)?"}, {"owner": {"reputation": 651, "user_id": 6834680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor   Skriptunoff", "link": "https://stackoverflow.com/users/6834680/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1550159557, "post_id": 54663036, "comment_id": 96176065, "body": "@humand - Pipes are limited OS resource, you should close them manually after use.  Of course, Lua could do it for you, but then the blocking would happen inside GC :-)  Will <code>f:close()</code> block or not - depends on OS.  Lua just calls a C library function."}, {"owner": {"reputation": 33, "user_id": 4147418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9ebb30360f343fb585d075fcf9bd07?s=128&d=identicon&r=PG&f=1", "display_name": "humand", "link": "https://stackoverflow.com/users/4147418/humand"}, "reply_to_user": {"reputation": 651, "user_id": 6834680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor   Skriptunoff", "link": "https://stackoverflow.com/users/6834680/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1550247563, "post_id": 54663036, "comment_id": 96212185, "body": "@Egor Skriptunoff Thank you both for the clues to understand this, greatly appreciated!"}], "owner": {"reputation": 33, "user_id": 4147418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9ebb30360f343fb585d075fcf9bd07?s=128&d=identicon&r=PG&f=1", "display_name": "humand", "link": "https://stackoverflow.com/users/4147418/humand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550035179, "creation_date": 1550035179, "question_id": 54663036, "link": "https://stackoverflow.com/questions/54663036/is-there-a-way-to-avoid-blocking-when-calling-lua-resume", "title": "Is there a way to avoid blocking when calling lua_resume?", "body": "<p>I need some help trying to understand the following scenario as my current knowledge on the matter is insufficient and I\u2019m not sure where to start.</p>\n\n<p>From a C pthread that has a main Lua state, each request creates a Lua coroutine, puts a pre-registered Lua function and some arg on the stack and starts it with lua_resume. This Lua script function does a io.popen and calls a C function that takes the FILE* from the io.popen, gets the corresponding fd, sets it to non-blocking adds it to a read event q ueue and does lua_yield. So far so good, C takes over. When C calls back lua_resume, it blocks until I finish reading all content from the fd associated with the FILE* in question. Is there any way I can avoid that blocking? What if I only want to read one char and go back to C immediately not caring about the remaining output from io.popen?</p>\n\n<p>I tried this in both LuaJIT 2.1beta3 and Lua 5.1 and they behave the same.\nAny help would be greatly appreciated.</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8219368"}, "edited": false, "score": 1, "creation_date": 1550034770, "post_id": 54662874, "comment_id": 96116620, "body": "You might want to take a look at <a href=\"https://stackoverflow.com/questions/39025074/c-program-how-to-print-in-table-format-alignment\" title=\"c program how to print in table format alignment\">stackoverflow.com/questions/39025074/&hellip;</a> <a href=\"https://stackoverflow.com/questions/8548909/smart-way-to-format-tables-on-stdout-in-c\" title=\"smart way to format tables on stdout in c\">stackoverflow.com/questions/8548909/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "is_accepted": true, "score": 2, "last_activity_date": 1550035489, "creation_date": 1550035489, "answer_id": 54663099, "question_id": 54662874, "link": "https://stackoverflow.com/questions/54662874/trying-to-format-my-printf-to-line-up-the-dollar-signs-and-cents-c-source/54663099#54663099", "title": "trying to format my printf to line up the dollar signs and cents - c source", "body": "<p>You need to align your output message using appropriate <code>field width</code> in your <a href=\"https://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\">printf</a> format specifiers.</p>\n\n<p>For example:</p>\n\n<pre><code>printf( \"# of people served: %d \\n\"\n        \"Bill Amount:        %8.2f \\n\"\n        \"Surcharge Amount:   %8.2f \\n\"\n        \"Final Bill Amount:  %8.2f \\n\",\n        numberPeople, totalBill, \n        surchargeAmount, finalBill);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code># of people served: 3 \nBill Amount:          149.85 \nSurcharge Amount:       0.00 \nFinal Bill Amount:    149.85 \n</code></pre>\n\n<p>Here's a live example: <a href=\"https://ideone.com/Iko1BY\" rel=\"nofollow noreferrer\">https://ideone.com/Iko1BY</a></p>\n"}, {"tags": [], "owner": {"reputation": 391, "user_id": 1487628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96dc0d6a8a737b5e651335e855f942ae?s=128&d=identicon&r=PG", "display_name": "vmario", "link": "https://stackoverflow.com/users/1487628/vmario"}, "is_accepted": false, "score": 0, "last_activity_date": 1550038757, "creation_date": 1550038757, "answer_id": 54663766, "question_id": 54662874, "link": "https://stackoverflow.com/questions/54662874/trying-to-format-my-printf-to-line-up-the-dollar-signs-and-cents-c-source/54663766#54663766", "title": "trying to format my printf to line up the dollar signs and cents - c source", "body": "<p>Try this way:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define CURRENCY \"$\"\n\nstruct Bill {\n    char* item;\n    double amount;\n};\n\nenum {\n    BUF_SIZE = 16\n};\n\nint main(void)\n{\n    char buf[BUF_SIZE];\n    struct Bill bill[] = {\n        {\"First:\", 123.45},\n        {\"Second:\", 0.50},\n        {\"Third:\", 123456.78}\n    };\n\n    for (size_t i = 0; i &lt; sizeof(bill) / sizeof(struct Bill); i++) {\n        snprintf(buf, sizeof(buf), CURRENCY \" %.2f\", bill[i].amount);\n        printf(\"%-10s %16s\\n\", bill[i].item, buf);\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>So you can get:</p>\n\n<pre><code>First:             $ 123.45\nSecond:              $ 0.50\nThird:          $ 123456.78\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11003835, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NjxUzU4BOxY/AAAAAAAAAAI/AAAAAAAAABQ/3DvBTGCm_r8/photo.jpg?sz=128", "display_name": "babySteps", "link": "https://stackoverflow.com/users/11003835/babysteps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 54663099, "answer_count": 2, "score": 0, "last_activity_date": 1550038757, "creation_date": 1550034237, "last_edit_date": 1550034510, "question_id": 54662874, "link": "https://stackoverflow.com/questions/54662874/trying-to-format-my-printf-to-line-up-the-dollar-signs-and-cents-c-source", "title": "trying to format my printf to line up the dollar signs and cents - c source", "body": "<p>want to make outcome look kinda like this :</p>\n\n<pre>\n# of people Served:       8\nBill Amount:       $ 399.60\nSurcharge Amount:   $ 80.00\nFinal Bill Amount: $ 479.60\n</pre>\n\n<p>doesnt show well here i mean lined up at the zeroes</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\n int main()\n{\n    int numberPeople;\n    float surchargeAmount, totalBill, finalBill;\n\n    printf(\"please enter number of people: \");\n    scanf(\" %d\", &amp;numberPeople);\n    if (numberPeople &lt;= 5.0)\n    {\n        surchargeAmount = 0;\n    }\n    else if (numberPeople &lt;= 10.0)\n    {\n        surchargeAmount = 80.0;\n    }\n    else if (numberPeople &lt;= 20.0)\n    {\n        surchargeAmount = 150.0;\n    }\n    else if (numberPeople &gt; 20.0)\n    {\n        surchargeAmount = 200.0;\n    }\n    totalBill = numberPeople * 49.95;\n    finalBill = (numberPeople * 49.95) + surchargeAmount;\n    printf(\"# of people served:%d \\n\"\n        \"Bill Amount:%.2f \\n\"\n        \"Surcharge Amount:%.2f \\n\"\n        \"Final Bill Amount:%.2f \\n\", numberPeople, totalBill, \nsurchargeAmount, finalBill);\n    getch();\n    return 0;\n</code></pre>\n"}, {"tags": ["c", "pointers", "arrayofarrays", "pointer-to-array"], "comments": [{"owner": {"reputation": 531, "user_id": 3346515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K6EU0.jpg?s=128&g=1", "display_name": "Prajilesh", "link": "https://stackoverflow.com/users/3346515/prajilesh"}, "edited": false, "score": 1, "creation_date": 1550034583, "post_id": 54662820, "comment_id": 96116568, "body": "check this answer - <a href=\"https://stackoverflow.com/questions/48245019/multiplication-of-2d-arrays-using-pointers-to-pointers?rq=1\" title=\"multiplication of 2d arrays using pointers to pointers\">stackoverflow.com/questions/48245019/&hellip;</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1550035486, "post_id": 54662820, "comment_id": 96116810, "body": "<code>*pc[i][j]</code> should be <code>(*pc)[i][j]</code>, and the same for your other pointers.  The indexing operator (<code>[]</code>) has higher precedence than the dereferencing operator (<code>*</code>), so you need parentheses to obtain the wanted order of operations."}, {"owner": {"reputation": 21, "user_id": 10228278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0da3e7e22d4d61ac40fe89d688a7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Manogyana T", "link": "https://stackoverflow.com/users/10228278/manogyana-t"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1550036086, "post_id": 54662820, "comment_id": 96116992, "body": "@John Bollinger I tried this approach and it didn&#39;t work. :(( Just came to know that pointer to int array[3] would point to array of three integers and pointer arithmetic(say, pointer + 1) would point to address beyond these three integers. If this is the case, there&#39;s no way to access elements of a 2D array using pointer to 2D array, right??"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1550036397, "post_id": 54662820, "comment_id": 96117102, "body": "I can&#39;t speak to why a piece of code different from what you&#39;ve presented also does not work, but I assure you that with your pointers <code>pa</code>, <code>pb</code>, and <code>pc</code> declared and initialized as you show, <code>a[i][j] == (*pa)[i][j]</code> for all <code>i</code> and <code>j</code> not exceeding the array bounds, and similarly for the other array pointers."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550039215, "post_id": 54662820, "comment_id": 96118172, "body": "Pointers <i>to</i> 2D arrays work exactly like pointers to 1D arrays or pointers to any other data. No difference whatsoever. We rarely use pointers <i>to</i> arrays though. Pointers <i>into</i> arrays normally do the job. In this code, pointers are not needed at all. Why not ditch them and just use a, b, and c directly?"}, {"owner": {"reputation": 21, "user_id": 10228278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0da3e7e22d4d61ac40fe89d688a7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Manogyana T", "link": "https://stackoverflow.com/users/10228278/manogyana-t"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550242741, "post_id": 54662820, "comment_id": 96209348, "body": "@n.m. Yes. Sadly, this is an assignment question. :(("}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550244317, "post_id": 54662820, "comment_id": 96210326, "body": "Are you sure you interpret your assignment correctly? People often say &quot;pointer to an array&quot; when they really mean &quot;pointer into an array&quot;. Pointers <i>to</i> arrays are rather trivial. An assignment that requires you to use pointers <i>to</i> arrays would not teach you any valuable skills. One that requires you to use pointers <i>into</i> arrays will. Which is why I conjecture that your teacher wants you to do something entirely different from using <code>(*pc)[i][j]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 11031915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nU8HC.jpg?s=128&g=1", "display_name": "M. Knight", "link": "https://stackoverflow.com/users/11031915/m-knight"}, "is_accepted": false, "score": 0, "last_activity_date": 1550038509, "last_edit_date": 1550038509, "creation_date": 1550036731, "answer_id": 54663344, "question_id": 54662820, "link": "https://stackoverflow.com/questions/54662820/how-does-a-pointer-to-a-2d-array-work-underneath-the-hood/54663344#54663344", "title": "How does a pointer to a 2D array work underneath the hood?", "body": "<p>Refer these answers first:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2003745/pointer-address-in-a-c-multidimensional-array\">Pointer address in a C multidimensional array</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1052818/create-a-pointer-to-two-dimensional-array\">Create a pointer to two-dimensional array</a></p>\n\n<p>Both together answer you question. Here is a working version of your code(simple version):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid main()\n{\n    int a[2][2]={{1,2},{3,4}};\n    int b[2][2]={{1,2},{3,4}};\n    int c[2][2], i, j, k, r1=2, c1=2, r2=2, c2=2;\n\n    int (*pa)[2] = a, (*pb)[2] = b, (*pc)[2] = c;\n\n    for ( i = 0; i &lt; r1; i++) \n    {\n        for(j = 0; j &lt; c2; j++) \n        {\n            pc[i][j] = 0;\n            for(k = 0; k &lt; c1; k++) \n            {\n                pc[i][j] += pa[i][k] * pb[k][j];\n            }\n        }\n    }\n    for(i=0;i&lt;2;i++)\n    {\n        printf(\"\\n\");\n        for(j=0;j&lt;2;j++)\n        {\n            printf(\"%d\\t\",c[i][j]);\n        }\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10228278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0da3e7e22d4d61ac40fe89d688a7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Manogyana T", "link": "https://stackoverflow.com/users/10228278/manogyana-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550038509, "creation_date": 1550033907, "last_edit_date": 1550035265, "question_id": 54662820, "link": "https://stackoverflow.com/questions/54662820/how-does-a-pointer-to-a-2d-array-work-underneath-the-hood", "title": "How does a pointer to a 2D array work underneath the hood?", "body": "<p>I can't understand why this piece of code which is supposed to perform matrix multiplication goes wrong. </p>\n\n<p><strong>Input:</strong> 2x2 matrices with elements 1,2,3,4 in both matrices </p>\n\n<p><strong>Expected output:</strong> 7 10 15 22</p>\n\n<p><strong>Output given by this code:</strong> 15 22 12 16</p>\n\n<pre><code>int a[10][10], b[10][10], c[10][10], i, j, k, r1, c1, r2, c2;\n\nint (*pa)[10][10] = &amp;a, (*pb)[10][10] = &amp;b, (*pc)[10][10] = &amp;c;\n\nfor ( i = 0; i &lt; r1; i++) {\n    for(j = 0; j &lt; c2; j++) {\n         *pc[i][j] = 0;\n        for(k = 0; k &lt; c1; k++) {\n            *pc[i][j] += *pa[i][k] * *pb[k][j];\n        }\n    }\n}\n</code></pre>\n\n<p>I tried debugging using print statements like this and these are the results:</p>\n\n<p>When given 2x2 matrices which have 1,2,3,4 as their elements, these are the errors produced:</p>\n\n<pre><code>at 00 of a is 3\nat 00 of b is 1\nElements you're multiplying: 3  1\n</code></pre>\n\n<p>But expected output is this:</p>\n\n<pre><code>at 00 of a is 1\nat 00 of b is 1\n</code></pre>\n\n<p>(Same seems to happen for rest of the elements)\nRest of the code which isn't pasted here is bug-free. Checked it thoroughly using print statements.</p>\n"}, {"tags": ["c", "gtk", "gtk3"], "answers": [{"comments": [{"owner": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "edited": false, "score": 0, "creation_date": 1596690554, "post_id": 54664568, "comment_id": 111893046, "body": "<code>GResource *res = g_resource_load(&quot;myfile.gresource&quot;, NULL);   g_resources_register (res);</code> worked for me, but this put me in the right direction, thanks!"}], "tags": [], "owner": {"reputation": 351, "user_id": 7572728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hV2vtrlT27k/AAAAAAAAAAI/AAAAAAAAARs/WaIUF6RbE24/photo.jpg?sz=128", "display_name": "tristan957", "link": "https://stackoverflow.com/users/7572728/tristan957"}, "is_accepted": true, "score": 1, "last_activity_date": 1550042243, "creation_date": 1550042243, "answer_id": 54664568, "question_id": 54662683, "link": "https://stackoverflow.com/questions/54662683/how-can-i-get-gtk-to-recognize-the-template-i-have-created/54664568#54664568", "title": "How can I get GTK to recognize the template I have created?", "body": "<p>I needed to add the following function</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static void\ntllt_cp_application_startup(GApplication *self)\n{\n    g_resources_register(tllt_cp_get_resource());\n    g_application_set_resource_base_path(self, \"/com/gitlab/tristan957/TlltCp\");\n\n    G_APPLICATION_CLASS(tllt_cp_application_parent_class)-&gt;startup(self);\n}\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 7572728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-hV2vtrlT27k/AAAAAAAAAAI/AAAAAAAAARs/WaIUF6RbE24/photo.jpg?sz=128", "display_name": "tristan957", "link": "https://stackoverflow.com/users/7572728/tristan957"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 54664568, "answer_count": 1, "score": 1, "last_activity_date": 1550042243, "creation_date": 1550033170, "question_id": 54662683, "link": "https://stackoverflow.com/questions/54662683/how-can-i-get-gtk-to-recognize-the-template-i-have-created", "title": "How can I get GTK to recognize the template I have created?", "body": "<p>The repository is here: <a href=\"https://gitlab.com/tristan957/tllt-cp\" rel=\"nofollow noreferrer\">https://gitlab.com/tristan957/tllt-cp</a></p>\n\n<p>Compiling the program goes well. I have some unused variables, but that is fine. At run time I am seeing the following warnings, and the GUI that I run is not like the template I have provided.</p>\n\n<pre><code>(tllt-cp:28723): Gtk-CRITICAL **: 22:18:00.249: Unable to load resource for composite template for type 'TlltCpWindow': The resource at \u201c/com/gitlab/tristan957/TlltCp/tllt-cp-window.ui\u201d does not exist\n\n(tllt-cp:28723): Gtk-CRITICAL **: 22:18:00.249: gtk_widget_class_bind_template_child_full: assertion 'widget_class-&gt;priv-&gt;template != NULL' failed\n\n(tllt-cp:28723): Gtk-CRITICAL **: 22:18:00.249: gtk_widget_class_bind_template_child_full: assertion 'widget_class-&gt;priv-&gt;template != NULL' failed\nInitializing object\n\n(tllt-cp:28723): Gtk-CRITICAL **: 22:18:00.249: gtk_widget_init_template: assertion 'template != NULL' failed\n</code></pre>\n\n<p>I am not sure what I am missing.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550033342, "post_id": 54662596, "comment_id": 96116248, "body": "Code at least needs a <code>dest[i] = = 0;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 7319413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D7q2P.jpg?s=128&g=1", "display_name": "goodman", "link": "https://stackoverflow.com/users/7319413/goodman"}, "is_accepted": false, "score": 1, "last_activity_date": 1550033357, "creation_date": 1550033357, "answer_id": 54662706, "question_id": 54662596, "link": "https://stackoverflow.com/questions/54662596/removing-leading-space-of-string-in-c-and-copy-to-the-dest-array/54662706#54662706", "title": "Removing leading space of string in C and copy to the dest array", "body": "<p>isspace function is used to check if the argument contains any whitespace characters, so you need to remove the not operator because you want to skip the spaces and at the end after copying into dest array you need to assign the null character to dest array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt; \n#include &lt;string.h&gt; \nvoid ltrim_copy(char dest[], char src[]){\n  char *p = src;\n  size_t i;\n  size_t counter = 0;\n  size_t length = strlen(src);\n  while(isspace(src[counter]) &amp;&amp; counter &lt; length){\n    p++;\n    counter++; /*move the pointer to next index of string if it's a space*/\n  }\n  for (i = 0; i&lt; length-counter; i++) {\n    dest[i] = *p; \n    p++;\n  }\n  dest[i] = '\\0';\n}\n\nint main(void){\n  char string_with_space_dest[20];\n  ltrim_copy(string_with_space_dest, \"       hello\");\n  printf(\"after removing leading space %s\\n\",string_with_space_dest );\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 7312795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/951de39043e83846af694a1b498ed3dc?s=128&d=identicon&r=PG", "display_name": "raven39", "link": "https://stackoverflow.com/users/7312795/raven39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550033357, "creation_date": 1550032627, "question_id": 54662596, "link": "https://stackoverflow.com/questions/54662596/removing-leading-space-of-string-in-c-and-copy-to-the-dest-array", "title": "Removing leading space of string in C and copy to the dest array", "body": "<p>I'm trying to figure out how to copy a trimmed string with leading whitespaces removed and store into dest array using pointer / without a pointer.</p>\n\n<p>This is what I tried.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt; \n#include &lt;string.h&gt; \nvoid trim_copy(char dest[], char src[]){\n  char *p = src;\n  size_t i;\n  size_t counter = 0;\n  size_t length = strlen(src);\n  while(!isspace(src[counter]) &amp;&amp; counter &lt; length){\n    p++;\n    counter++; /*move the pointer to next index of string if it's a space*/\n  }\n  for (i = 0; i&lt; length-counter; i++) {\n    dest[i] = *p; \n    p++;\n  }\n\n}\n\nint main(void){\n  char string_with_space_dest[20];\n  ltrim_copy(string_with_space_dest, \"       hello\");\n  printf(\"after removing leading space %s\\n\",string_with_space_dest );\n  return 0;\n}\n</code></pre>\n\n<p>Prints out:</p>\n\n<pre><code>after removing leading space        hello\n</code></pre>\n\n<p>It compiles, but not working at all. </p>\n\n<p>what if the src array was const and you can't use a pointer? </p>\n\n<pre><code>void trim_copy(char dest[], const char src[]){}\n</code></pre>\n"}, {"tags": ["c", "haskell", "ffi", "haskell-stack", "nix"], "owner": {"reputation": 5821, "user_id": 1770201, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/46bcb5d2018194c9beb884b6797e57e0?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/1770201/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1550030162, "creation_date": 1550030162, "question_id": 54662270, "link": "https://stackoverflow.com/questions/54662270/how-to-generate-ffi-dependencies-before-stack-builds-my-project-with-nix", "title": "How to generate FFI dependencies before stack builds my project (with nix)?", "body": "<p>I have a Haskell + stack + nix project that makes heavy use of FFI code. The problem is that two of the C files that I depend upon have to be <em>generated</em> before I can compile my Haskell project at large. These two files are (i) <code>./cbits/xdg-shell-protocol.c</code> and (ii) <code>./include/xdg-shell-protocol.h</code>.</p>\n\n<p>First, here is the Makefile which can generate these files:</p>\n\n<pre><code>WAYLAND_PROTOCOLS=$(shell pkg-config --variable=pkgdatadir wayland-protocols)\nWAYLAND_SCANNER=$(shell pkg-config --variable=wayland_scanner wayland-scanner)\n\n# wayland-scanner is a tool which generates C headers and rigging for Wayland\n# protocols, which are specified in XML. wlroots requires you to rig these up\n# to your build system yourself and provide them in the include path.\nxdg-shell-protocol.h:\n $(WAYLAND_SCANNER) server-header \\\n   $(WAYLAND_PROTOCOLS)/stable/xdg-shell/xdg-shell.xml $@\n\nxdg-shell-protocol.c: xdg-shell-protocol.h\n $(WAYLAND_SCANNER) private-code \\\n   $(WAYLAND_PROTOCOLS)/stable/xdg-shell/xdg-shell.xml $@\n</code></pre>\n\n<p>Notice that I depend upon the system programs <code>wayland-protocols</code> and <code>wayland-scanner</code>, both of which are specified in my project's <code>shell.nix</code>:</p>\n\n<pre><code>buildInputs = with pkgs; [ \n                           # ...\n                           # These are bleeding edge so I crafted my own nix expressions:\n                           (callPackage ./nix/wayland.nix { } )\n                           (callPackage ./nix/wayland-protocols.nix { } )\n                           # ...\n                        ];\n</code></pre>\n\n<p>And finally notice that I tell Haskell about these files in my <code>package.yaml</code>:</p>\n\n<pre><code>c-sources:\n   - cbits/xdg-shell-protocol.c\ninclude-dirs:\n  - include\n</code></pre>\n\n<p><strong>Question:</strong> How can I make it so that everytime someone runs <code>stack [--nix] build</code> (with or without nix), the two files (i) <code>./cbits/xdg-shell-protocol.c</code> and (ii) <code>./include/xdg-shell-protocol.h</code> are ensured to be up to date?</p>\n"}, {"tags": ["c", "strlen"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10484828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e47c2a421236a05cb6b21e99d6377ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Zach Goodman", "link": "https://stackoverflow.com/users/10484828/zach-goodman"}, "edited": false, "score": 0, "creation_date": 1550027657, "post_id": 54661856, "comment_id": 96114929, "body": "Ok that makes sense, I didn&#39;t even realize I would be skipping spaces in the new string when I found a non alphabetical in the first string so thank you. Also, when calling str2[copied++], is copied still equal to 0 when it is first called? Seems like it would be equal to 1 initially"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 45, "user_id": 10484828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e47c2a421236a05cb6b21e99d6377ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Zach Goodman", "link": "https://stackoverflow.com/users/10484828/zach-goodman"}, "edited": false, "score": 0, "creation_date": 1550027763, "post_id": 54661856, "comment_id": 96114953, "body": "No.  Read this: <a href=\"https://stackoverflow.com/q/7031326\">What is the difference between prefix and postfix operators?</a>"}, {"owner": {"reputation": 45, "user_id": 10484828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e47c2a421236a05cb6b21e99d6377ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Zach Goodman", "link": "https://stackoverflow.com/users/10484828/zach-goodman"}, "edited": false, "score": 0, "creation_date": 1550028025, "post_id": 54661856, "comment_id": 96115018, "body": "Coolness, never heard of this before oddly enough. Thanks!"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 45, "user_id": 10484828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e47c2a421236a05cb6b21e99d6377ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Zach Goodman", "link": "https://stackoverflow.com/users/10484828/zach-goodman"}, "edited": false, "score": 0, "creation_date": 1550028136, "post_id": 54661856, "comment_id": 96115046, "body": "It is explained early on in most introductory books on C."}, {"owner": {"reputation": 45, "user_id": 10484828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e47c2a421236a05cb6b21e99d6377ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Zach Goodman", "link": "https://stackoverflow.com/users/10484828/zach-goodman"}, "edited": false, "score": 0, "creation_date": 1550028195, "post_id": 54661856, "comment_id": 96115064, "body": "Gotcha, I\u2019ve just recently had to pick up some c for a class and I\u2019ll be honest, I haven\u2019t done much reading for it haha. Thanks again though!"}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1550027080, "creation_date": 1550027080, "answer_id": 54661856, "question_id": 54661657, "link": "https://stackoverflow.com/questions/54661657/eliminating-special-characters-of-a-string-stops-at-spaces/54661856#54661856", "title": "Eliminating special characters of a string stops at spaces", "body": "<p>There is a problem in your <code>fix</code> function that is causing undefined behavior because you only initialize positions in the resulting string that are alpha characters.</p>\n\n<p>Because your requirement is to <em>ignore</em> non-alpha characters, you need an extra counter.  Obviously <code>i</code> is going to point at the wrong character if you have to remove characters from your string.  So you need to count how many characters you have actually copied into <code>str2</code>.</p>\n\n<pre><code>void fix(char str[], char str2[])\n{\n    int i, copied = 0;\n    for(i= 0; str[i] != '\\0'; i++)              // See note 1\n    {\n        if (isalpha(str[i])) {\n            str2[copied++] = tolower(str[i]);   // See note 2\n        }\n    }\n    str2[copied] = '\\0';                        // See note 3\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ol>\n<li>There is no need to call <code>strlen</code> in every test.  In fact, you don't need to call it at all -- this just tests for the string's null-terminator.</li>\n<li>Notice that <code>copied</code> is incremented here.  This guarantees that you won't have gaps if you exclude a character.</li>\n<li>You <em>must</em> remember to null-terminate your new string.</li>\n</ol>\n"}], "owner": {"reputation": 45, "user_id": 10484828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e47c2a421236a05cb6b21e99d6377ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Zach Goodman", "link": "https://stackoverflow.com/users/10484828/zach-goodman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 54661856, "answer_count": 1, "score": 0, "last_activity_date": 1550027080, "creation_date": 1550025586, "last_edit_date": 1550026053, "question_id": 54661657, "link": "https://stackoverflow.com/questions/54661657/eliminating-special-characters-of-a-string-stops-at-spaces", "title": "Eliminating special characters of a string stops at spaces", "body": "<p>I'm a beginner with C but am trying to make a script which reads input and, ignoring special characters and spaces, outputs the reverse of the input whether or not the letters make a palindrome.</p>\n\n<p>I've tried tweaking the length of the loop in the fix function as I think that's where the issue is but from what I can tell, strlen() is working as expected, the loop is just stopping when it encounters a space.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n#define MAX 1000 /* The maximum number of characters in a line of  \ninput \n*/\nvoid fix(char str[], char str2[]);\nint main()\n{\n  char text[MAX], text2[MAX], text3[MAX], text4[MAX], temp;\n  int i, j;\n  int length;\n\n  puts(\"Type some text (then ENTER):\");\n\n  /* Save typed characters in text[]: */\n\n  fgets(text, MAX, stdin);\n  length = strlen(text) - 1;\n\n  strcpy(text2, text);\n\n  i = 0;\n  j = length-1;\n  while(i &lt; j){\n        temp = text[i];\n        text[i] = text[j];\n        text[j] = temp;\n        i++;\n        j--;\n  }\n  /* Analyse contents of text[]: */\n  printf(\"Your input in reverse is:\\n\");\n  printf(\"%s\", text);\n\n  fix(text, text3);\n  printf(\"%s\\n\", text3);\n  fix(text2, text4);\n  printf(\"%s\\n\", text4);\n  if(strcmp(text4, text3) == 0)\n        printf(\"Found a palindrome!\\n\");\nreturn 0;\n}\n\n\nvoid fix(char str[], char str2[]){\n  int i;\n  for(i = 0; i &lt; strlen(str)-1; i+=1){\n        if (isalpha(str[i])){\n                str2[i] = tolower(str[i]);\n        }\n  }\n}\n</code></pre>\n\n<p>For an input of \"Nurses, run\", the reversed string outputs correctly, but there is no output of \"Found a palindrome!\"</p>\n\n<p>Printing text 3 and 4 prints \"nur\" and \"nurses,\" respectively. </p>\n\n<p>It seems the loop stops when it encounters a space but I can't figure out why as it should go based on the length of the full input.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2414, "user_id": 7404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cb00ae3cf0974be05165f2e1703225a?s=128&d=identicon&r=PG&f=1", "display_name": "belwood", "link": "https://stackoverflow.com/users/7404/belwood"}, "edited": false, "score": 1, "creation_date": 1550024798, "post_id": 54661422, "comment_id": 96114302, "body": "also, you&#39;ve got return values for InitCashReg, but it&#39;s declared void."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550025178, "post_id": 54661422, "comment_id": 96114380, "body": "How is the calling code going to know how many clients were given space?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550025369, "post_id": 54661422, "comment_id": 96114418, "body": "Do you need to allocate space for <code>size1</code> products for each of <code>size</code> clients?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1550027639, "post_id": 54661422, "comment_id": 96114922, "body": "As a matter of style, your code will be more readable if you store a local copy of the <code>Cart</code> pointer and then assign it to <code>pdata</code> later.  <i>i.e.</i> <code>Cart *newCart = malloc(sizeof(Cart)*size);</code> ..  then you can use <code>newCart-&gt;foo</code> instead of <code>(*pdata)-&gt;foo</code> etc.  Actually, since you allocate it as an array, you ought to write array-style accesses: <i>e.g.</i> <code>newCart[0].foo</code>"}, {"owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "edited": false, "score": 0, "creation_date": 1550030784, "post_id": 54661422, "comment_id": 96115656, "body": "@wasemJb: Memory allocation is fine and if the question is you are not able to access the variable inside (*pdata)-&gt;pProd then you can assign the price as: (*pdata)-&gt;pProd-&gt;price = 100;"}, {"owner": {"reputation": 13, "user_id": 10763807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uFLwkVDw9nc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gOX8789GXi_tgQIMW4xiThmmas-Q/mo/photo.jpg?sz=128", "display_name": "wasemJb", "link": "https://stackoverflow.com/users/10763807/wasemjb"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1550081241, "post_id": 54661422, "comment_id": 96142701, "body": "@JonathanLeffler yes i need to allocate space for size1 products for each of size clients and then entering the detials of products for each client .."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1550094645, "last_edit_date": 1550094645, "creation_date": 1550093152, "answer_id": 54679685, "question_id": 54661422, "link": "https://stackoverflow.com/questions/54661422/code-with-nested-struct-whats-the-right-way-to-allocate-memory/54679685#54679685", "title": "Code with nested struct \u2014 what&#39;s the right way to allocate memory?", "body": "<p>One of the <a href=\"https://stackoverflow.com/questions/54661422/code-with-nested-struct-whats-the-right-way-to-allocate-memory/54679685#comment96142701_54661422\">comments</a> says:</p>\n\n<blockquote>\n  <p>I need to allocate space for <code>size1</code> products for each of <code>size</code> clients and then enter the details of products for each client.</p>\n</blockquote>\n\n<p>First things first:</p>\n\n<ul>\n<li>Separate the I/O finding sizes from the code that uses them.  This is a fundamental technique in programming.</li>\n</ul>\n\n<p>A function should do one job \u2014 yours does (at least) two: get the sizes, and allocate the space for the data given those sizes (and probably then goes on to fill in the space with more I/O operations).</p>\n\n<p>That means your code should be split into at least two functions, the second of which becomes something like <code>bool InitCashReg(size_t n_client, size_t n_prod, Cart **pdata)</code>, returning success/true or failure/false status, and taking what you called <code>size</code> and <code>size1</code> as arguments instead of trying to read them.  I'm not going to replicate the I/O code; I'll just concentrate on the memory allocation code.</p>\n\n<pre><code>enum { CLIENT_DEFAULT_ID = -1 };\n\nbool InitCashReg(size_t n_client, size_t n_prod, Cart **pdata)\n{\n    Cart *cart = malloc(sizeof(*cart) * n_client);\n    if (cart == 0)\n        return false;\n    for (size_t i = 0; i &lt; n_client; i++)\n    {\n        cart[i]-&gt;pProd = calloc(sizeof(*cart[i]-&gt;pProd), n_prod);\n        if (cart[i].pProd == 0)\n        {\n            // Release already allocated space\n            for (size_t j = 0; j &lt; i; j++)\n                free(cart[j]-&gt;pProd);\n            free(cart);\n            return false;\n        }\n        cart[i].numProd = n_prod;\n        cart[i].id = CLIENT_DEFAULT_ID;\n    }\n    *pdata = cart;\n    return true;\n}\n</code></pre>\n\n<p><sup><em>This code has not been compiled, much less tested.</em></sup></p>\n\n<p>I used <code>calloc()</code> to allocate the array of products so that the data is all zeroed; you could use <code>malloc()</code> instead and set the <code>name</code>, <code>amount</code> and <code>price</code> variables to <code>0</code> some other way.  Note that this, along with the invented <code>CLIENT_DEFAULT_ID</code> ensures that all the allocated memory is initialized to known values.</p>\n\n<p>(C++ has constructors which can be used to ensure proper initialization.  C doesn't have constructors, so you have to ensure your allocated data is appropriately initialized.)</p>\n"}], "owner": {"reputation": 13, "user_id": 10763807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uFLwkVDw9nc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gOX8789GXi_tgQIMW4xiThmmas-Q/mo/photo.jpg?sz=128", "display_name": "wasemJb", "link": "https://stackoverflow.com/users/10763807/wasemjb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54679685, "answer_count": 1, "score": -2, "last_activity_date": 1550094645, "creation_date": 1550023622, "last_edit_date": 1550024752, "question_id": 54661422, "link": "https://stackoverflow.com/questions/54661422/code-with-nested-struct-whats-the-right-way-to-allocate-memory", "title": "Code with nested struct \u2014 what&#39;s the right way to allocate memory?", "body": "<p>I wrote this code <code>(*pdata)-&gt;pProd = (Product*)malloc(sizeof(Product)*size1);</code></p>\n\n<p>When I entered details into \"<code>(*pdata)-&gt;pProd</code>\" the compiler stopped.\nHow can I allocate memory to \"<code>Product* pProd</code>\" and enter details?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct\n{\n    char name[30];\n    int amount;\n    int price;\n}Product;\n\ntypedef struct\n{\n    int id;\n    Product* pProd;\n    int numProd;\n}Cart;\n\nvoid InitCashReg(Cart** pdata) {\n    int size,size1,j=0,i;\n    int PriceAllProd=0;\n\n    printf(\"Enter number of client --&gt; \\n\");\n    scanf(\"%d\", &amp;size);\n\n    printf(\"Enter number of product client bought --&gt; \\n\");\n    scanf(\"%d\", &amp;size1);\n\n    *pdata = (Cart*)malloc(sizeof(Cart)*size);\n    if (*pdata == NULL)\n    {\n        printf(\"cannot allocate memory\\n\");\n        return -1;\n    }\n    (*pdata)-&gt;pProd = (Product*)malloc(sizeof(Product)*size1);\n    if ((**pdata).pProd == NULL)\n    {\n        printf(\"cannot allocate memory\\n\");\n        return -1;\n    }\n\n    \u2026\n</code></pre>\n"}, {"tags": ["c", "linux", "cpu", "cpu-usage", "rtos"], "comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 1, "creation_date": 1550019762, "post_id": 54660901, "comment_id": 96113220, "body": "Are you looking for <code>sched_setaffinity</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": true, "score": 3, "last_activity_date": 1550019782, "creation_date": 1550019782, "answer_id": 54661001, "question_id": 54660901, "link": "https://stackoverflow.com/questions/54660901/run-a-process-on-a-specific-cpu-in-linux-cant-use-command-line-to-specify/54661001#54661001", "title": "Run a process on a specific CPU in Linux? (can&#39;t use command line to specify)", "body": "<p>This thing you are trying to do is called thread pinning.</p>\n\n<p>It looks like you want <a href=\"http://man7.org/linux/man-pages/man2/sched_setaffinity.2.html\" rel=\"nofollow noreferrer\">sched_setaffinity</a>. You can invoke it from inside your application with the <a href=\"http://man7.org/linux/man-pages/man2/getpid.2.html\" rel=\"nofollow noreferrer\"><code>getpid()</code></a> system call.</p>\n\n<pre><code>   #include &lt;sched.h&gt;\n\n   int sched_setaffinity(pid_t pid, size_t cpusetsize,\n                         const cpu_set_t *mask);\n\n   int sched_getaffinity(pid_t pid, size_t cpusetsize,\n                         cpu_set_t *mask);\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 8464011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6545cc3092941ea0cd4b86b689550d28?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Mips", "link": "https://stackoverflow.com/users/8464011/mr-mips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 54661001, "answer_count": 1, "score": 1, "last_activity_date": 1550019782, "creation_date": 1550019039, "last_edit_date": 1550019603, "question_id": 54660901, "link": "https://stackoverflow.com/questions/54660901/run-a-process-on-a-specific-cpu-in-linux-cant-use-command-line-to-specify", "title": "Run a process on a specific CPU in Linux? (can&#39;t use command line to specify)", "body": "<p>I'm trying to run a process on a specific CPU I specify in my C program periodically on my Linux machine. I am not sure how to specify inside my program the specific CPU the process needs to run on. </p>\n\n<p>I have been reading about ways to do this on the command line, but I can't find much on how to do this inside a program in C itself. </p>\n\n<p>I know there is the <code>task_struct</code> in the directory <code>include/linux/sched.h</code>. Upon inspecting the struct, I see multiple fields regarding the CPU. But I am reading (<a href=\"https://stackoverflow.com/questions/5025155/to-access-pcb-of-process-in-c\">To access PCB of process in C</a>) that accessing task/process info is not advised or easy at all. </p>\n\n<p>I'm also reading up on the \"current\" macro, but I'm not sure if this is relevant to my issue. </p>\n\n<p>My program is really simple and is just basically a test showing how I can run a task periodically on a certain CPU. </p>\n\n<p>Does anyone have knowledge of how I can accomplish this simple specification? </p>\n"}, {"tags": ["c", "parallel-processing", "linux-kernel", "kernel", "kernel-module"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550050412, "post_id": 54660771, "comment_id": 96123789, "body": "At any time single <b>instance</b> of <code>struct timer_list</code> object can be added to timer list at most <b>once</b>. If you want two timers, you need two instances of <code>struct timer_list</code>. (That is, you need no a global variable, but a variable per TCP session)."}, {"owner": {"reputation": 1, "user_id": 11053679, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oFSGuqMPFWI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPeJvxtdSP4hkrMCPiicUPOggAdeQ/mo/photo.jpg?sz=128", "display_name": "user11053679", "link": "https://stackoverflow.com/users/11053679/user11053679"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550083506, "post_id": 54660771, "comment_id": 96143779, "body": "Ok, that&#39;s valuable information. Unfortunately my problem still stands - moving declaration and initialization of timer inside TCP session init function crashes kernel when transmission is over but timer hasn&#39;t expired yet, another thing is that i can&#39;t really delete timer from anywhere since it&#39;s created locally.  In recovery mode i can see the error just before everything crashes, it says &quot;kernel panic run_timer_softirq&quot;. Is there another way to have multiple timers run for each thread establishing TCP connection separately? Some type o timer that can be spawned multiple times maybe?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550087842, "post_id": 54660771, "comment_id": 96145804, "body": "When you call <code>add_timer</code> for <code>struct timer_list</code> instance, that instance becomes <b>part of the timer list</b>, and its fields (<code>.function</code>, <code>.data</code> and <code>.expires</code>) are used when the timer expires. This is why you cannot use the same instance for two timers in a list at once - when you fill instance for the second timer, you rewrite its fields which are used by the first timer. You may allocate new <code>struct timer_list</code> instance when you need the second timer. But in any case you should delete the timer which is no longer used."}, {"owner": {"reputation": 1, "user_id": 11053679, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oFSGuqMPFWI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPeJvxtdSP4hkrMCPiicUPOggAdeQ/mo/photo.jpg?sz=128", "display_name": "user11053679", "link": "https://stackoverflow.com/users/11053679/user11053679"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550099137, "post_id": 54660771, "comment_id": 96150518, "body": "I&#39;ve redesigned the whole thing, the timer is initialized at module registration and deleted on unregister, what makes it run whenever tcp session is created is an atomic flag at the beggining of callback function. Everything works as it should. Whanks a lot @Tsyvarev your comments really made me think in another way :)"}], "owner": {"reputation": 1, "user_id": 11053679, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oFSGuqMPFWI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPeJvxtdSP4hkrMCPiicUPOggAdeQ/mo/photo.jpg?sz=128", "display_name": "user11053679", "link": "https://stackoverflow.com/users/11053679/user11053679"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550018040, "creation_date": 1550018040, "question_id": 54660771, "link": "https://stackoverflow.com/questions/54660771/parallel-timer-creation-crashes-kernel", "title": "Parallel timer creation crashes kernel", "body": "<p>I've added a timer to kernel module responsible for TCP sockets creation in order to monitor its parameters. Everything works as it should until i want to invoke parallel connections - instant crash.</p>\n\n<p>This is how i do it:</p>\n\n<p>global var:</p>\n\n<pre><code>struct timer_list ss_timer;\n</code></pre>\n\n<p>in module register function:</p>\n\n<pre><code>init_timer(&amp;ss_timer);\n</code></pre>\n\n<p>in module unregister function:</p>\n\n<pre><code>del_timer_sync(&amp;ss_timer);\n</code></pre>\n\n<p>in function initiating TCP session establishement (invoked once per TCP connection, runs in parallel for multiple connections):</p>\n\n<pre><code>ss_timer.function = ss_timer_callback;\nss_timer.data = (unsigned long)&amp;meta_sk;\nss_timer.expires = jiffies + msecs_to_jiffies(500);\nadd_timer(&amp;ss_timer);\n</code></pre>\n\n<p>to get ss_timer_callback function out of investigation - i've commented out its body - it's only doing single printk</p>\n\n<p>I test it with iperf tool, everything works fine for single thread, but when i invoke it with \"-P 2\" for 2 parallel client threads whole system crashes instantly.</p>\n\n<p>I believe that the problem lies in multiple \"add_timer\" calls in parallel. I realise my take on this might be wrong altogether so i'd really appreciate someone more experienced to guide me.</p>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1550024397, "post_id": 54660763, "comment_id": 96114223, "body": "You&#39;ve created an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>.  <i>&quot;I need the application to be aware of the version (major, minor, build) of the bootloader&quot;</i> -- That&#39;s a low-quality design that imposes an unnecessary burden on the app.  Instead the interface between bootloader and app should be clearly defined with a corresponding version number.  How that version number is passed to the app is part of the API."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 1, "creation_date": 1550027091, "post_id": 54660763, "comment_id": 96114794, "body": "@sawdust Why do you believe this is an XY problem? This is a reasonably common solution for identifying the version of something on an embedded system."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 2, "creation_date": 1550052971, "post_id": 54660763, "comment_id": 96125494, "body": "@sawdust The reason that the application would need to know the bootloader version is so that when a bug is inevitably discovered in the first version of the bootloader, the software can know that it needs to apply the workaround, if the new bootloader without the bug isn&#39;t installed."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1550054957, "post_id": 54660763, "comment_id": 96126744, "body": "The available means to do this are tool-chain specific - what is your tool-chain?  <code>#pragma</code> directives unrecognised by your tool chain will be ignored - possibly but not necessarily with a warning.  The compiler/linker need not place separate variables in any specific order, adjacency or alignment - use an array <code>UINT8 VER[] = {0xFE, 0xED, 0xFA, 0xCE} ;</code> to force the order and alignment you desire."}, {"owner": {"reputation": 85, "user_id": 2630543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ffb0d1024f2a093d8ee9e96d758177?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/2630543/jeremy"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 1, "creation_date": 1550120743, "post_id": 54660763, "comment_id": 96155543, "body": "@sawdust, There is no API in a situation like this.  The bootloader and the main application are completely separate and independent entities, and must remain so.  They cannot by definition talk to each other.  The bootloader simply jumps to the application entry point when it times out on a reset or when it is finished reflashing app code.  Are you sure you&#39;re not thinking Windows programming?"}, {"owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1552467754, "post_id": 54660763, "comment_id": 97016137, "body": "@(other)Jeremy: In this context, the API is the shared knowledge about the location of version information - as indeed is the shared knowledge about how the bootloader locates and invokes the entry point of the main app.  That it&#39;s not a function call interface doesn&#39;t stop it being an API."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 2630543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ffb0d1024f2a093d8ee9e96d758177?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/2630543/jeremy"}, "edited": false, "score": 1, "creation_date": 1550120587, "post_id": 54672632, "comment_id": 96155507, "body": "This was helpful.  I found the NXP documentation on S12Z constant, variable and code allocation in codewarrior.  This told me everything I need to know.  <a href=\"https://community.nxp.com/docs/DOC-334387\" rel=\"nofollow noreferrer\">community.nxp.com/docs/DOC-334387</a>"}], "tags": [], "owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "is_accepted": true, "score": 1, "last_activity_date": 1550068304, "creation_date": 1550068304, "answer_id": 54672632, "question_id": 54660763, "link": "https://stackoverflow.com/questions/54660763/embedding-constant-at-specific-memory-location/54672632#54672632", "title": "Embedding constant at specific memory location", "body": "<p>Yes, it's possible to locate a constant at a specific memory address.  There are different ways to accomplish this and the details of how to do this vary from one tool-chain to another.  One way is to use a compiler-specific <code>#pragma</code> or <code>_attribute_</code> statement in the source code definition to specify the memory address where the constant should be located.  Another way is to customize the linker directive (aka linker script or scatter load) file by creating a special memory section at the desired memory address.  Then use a <code>#pragma</code> in the code or another linker instruction to place the constant into the custom memory section.  See your tool-chain documentation for details.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1550157951, "creation_date": 1550157951, "answer_id": 54693805, "question_id": 54660763, "link": "https://stackoverflow.com/questions/54660763/embedding-constant-at-specific-memory-location/54693805#54693805", "title": "Embedding constant at specific memory location", "body": "<p>First of all, defining a global <code>const</code> value allows the compiler to use the value only (as an rvalue, as you normally don't reference the address of <code>MATH_PI</code>) and to use the value at each place it could be needed.  If you want a constant to be placed in a fixed site, the best way to specify is in assembler.</p>\n\n<p>When I was young, I used to use the <code>whatis</code> unix command to see the <code>#(@)</code> prefixed string in which was normally stored the version info in SCCS revision system.  When I had to switch to cvs, I used the idea to define constants in each source file, and search (this can easily be made with  <code>grep(1)</code> or some filter program) to scan the binary (yes, the binary code of the program) for lines that started in <code>$Id:</code>  so I embedded lines like:</p>\n\n<pre><code>static const char CVS_id[] = \"\\n$Id$\\n\";\n</code></pre>\n\n<p>in source files, and when <code>grep(1)</code>ping the binary, I got the whole revision for each module linked in the executable.</p>\n\n<p>Git doesn't put by itself a version string, but the best (because it doesn't need to put things in absolute addresses) is to put the version info in a string with some specific pattern (git allows to put it for yourself by means of a <em>git hook</em>) not to be confused with other thing by the scanning code.  This way you can get the version info of each source file included, with just scanning the binaries.</p>\n\n<p>All of this doesn't require you to fix things to fixed places, so from my point of view allows more flexibility to your memory map and gives you a more portable way of doing things.</p>\n"}, {"tags": [], "owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "is_accepted": false, "score": 0, "last_activity_date": 1552467369, "creation_date": 1552467369, "answer_id": 55137775, "question_id": 54660763, "link": "https://stackoverflow.com/questions/54660763/embedding-constant-at-specific-memory-location/55137775#55137775", "title": "Embedding constant at specific memory location", "body": "<p>Assuming the bootloader and main app are both under your control, you could have the bootloader jump to the application entry point with a pointer to the version information (and any other information you wish) in a register, for the app to make use of as it sees fit.  This eliminates any reliance on fixed memory locations.</p>\n"}], "owner": {"reputation": 85, "user_id": 2630543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ffb0d1024f2a093d8ee9e96d758177?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/2630543/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 54672632, "answer_count": 3, "score": 1, "last_activity_date": 1552467369, "creation_date": 1550017980, "question_id": 54660763, "link": "https://stackoverflow.com/questions/54660763/embedding-constant-at-specific-memory-location", "title": "Embedding constant at specific memory location", "body": "<p>I'm writing a bootloader for an embedded application on the NXP S12ZVL32.  I need the application to be aware of the version (major, minor, build) of the bootloader.  Is it possible to declare constants at a specific location in the bootloader source so the application can find them?</p>\n\n<p>I tried declaring constants at the start of a #pragma section so I would know where it started.</p>\n\n<pre><code>#pragma CODE_SEG SHADOW_ROM\nconst UINT8 VER_MAJOR = 0xFE;\nconst UINT8 VER_MINOR = 0xED;\nconst UINT16 VER_BUILD = 0xCEFA;\n</code></pre>\n\n<p>S12 is little endian, so I expected to be able to search the generated .sx file for FEEDFACE, but could not find even FEED or FACE.  I have optimization turned off, so the compiler shouldn't be removing unused constants.</p>\n"}, {"tags": ["c", "arrays", "string", "struct", "memcpy"], "comments": [{"owner": {"reputation": 133, "user_id": 10982955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a8eac35f4b0969915fa0a0d5d9c813?s=128&d=identicon&r=PG&f=1", "display_name": "Darrel Gulseth", "link": "https://stackoverflow.com/users/10982955/darrel-gulseth"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1550018064, "post_id": 54660726, "comment_id": 96112794, "body": "Dear Govind, I tried the methods in that post and it still did not work (strcmp)."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1550018475, "post_id": 54660726, "comment_id": 96112899, "body": "if you&#39;re working with strings, you should use string functions (<code>strcpy</code>, <code>strcmp</code>, etc). If you&#39;re working with arbitrary data, then use the likes of <code>memcpy</code>, <code>memcmp</code>, etc ... although <code>memcpy</code> and <code>memcmp</code> should work perfectly well with strings also."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1550018666, "post_id": 54660726, "comment_id": 96112958, "body": "<code>if (c-&gt;parts[i] == &quot;none&quot;){</code> needs to be changed to something like <code>if (strcmp(c-&gt;parts[i], &quot;none&quot;) == 0){</code>. In what you have, the operator <code>==</code> is comparing the value of 2 pointers, where <code>c-&gt;parts[i]</code> is in memory, and where <code>&quot;none&quot;</code> is in memory. These are not equal, so the condition fails. <code>==</code> does not compare the content of the strings."}], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 396865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfb66b3f2dd1e0e43e184b9cb639aab?s=128&d=identicon&r=PG", "display_name": "programmer", "link": "https://stackoverflow.com/users/396865/programmer"}, "is_accepted": true, "score": 1, "last_activity_date": 1550018753, "creation_date": 1550018753, "answer_id": 54660862, "question_id": 54660726, "link": "https://stackoverflow.com/questions/54660726/c-programming-string-arrays-how-to-check-equality/54660862#54660862", "title": "C Programming: String arrays - how to check equality?", "body": "<p>Use <code>strcmp()</code> from <code>&lt;string.h&gt;</code> to compare in <code>fun()</code> as shown below:</p>\n\n<pre><code>void fun(struct car* c){\n    char fill[10] = \"wheel\";\n\n    int i = 0;\n\n    for (i; i&lt;4; i++){\n        if (!strcmp(c-&gt;parts[i], \"none\")) {\n            memcpy(c-&gt;parts[i], fill, 10);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 10982955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a8eac35f4b0969915fa0a0d5d9c813?s=128&d=identicon&r=PG&f=1", "display_name": "Darrel Gulseth", "link": "https://stackoverflow.com/users/10982955/darrel-gulseth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1550056310, "accepted_answer_id": 54660862, "answer_count": 1, "score": 0, "last_activity_date": 1550018753, "creation_date": 1550017720, "last_edit_date": 1550018253, "question_id": 54660726, "link": "https://stackoverflow.com/questions/54660726/c-programming-string-arrays-how-to-check-equality", "closed_reason": "Duplicate", "title": "C Programming: String arrays - how to check equality?", "body": "<p>I have a struct such as this:</p>\n\n<pre><code>struct car{\n    char parts[4][10];\n};\n</code></pre>\n\n<p>I initialize them in my main() function, as though:</p>\n\n<pre><code>char fill[10] = \"none\";\nstruct car c;\n\nint i = 0;\nfor (i; i&lt; 4; i++){\n    memcpy(c.parts[i], fill, 10);\n}\n</code></pre>\n\n<p>At this point, each string in the array has \"none\", like this:</p>\n\n<pre><code>int j = 0;\nfor (j; j&lt;4; j++){\n    printf(\"%s\\n\", c.parts[j]);\n}\n\n*OUTPUT*\nnone\nnone\nnone\nnone\n</code></pre>\n\n<p>This is correct - this is what I want. Now, however, I want to write a function and pass a pointer to c. Inside the function, I want to:</p>\n\n<ul>\n<li>check if an element in the \"parts\" array is equal to \"none\". </li>\n<li>if it is, then set that equal to \"wheel\".</li>\n</ul>\n\n<p>Here is how I have attempted this:</p>\n\n<pre><code>void fun(struct car* c){\n    char fill[10] = \"wheel\";\n\n    int i = 0;\n\n    for (i; i&lt;4; i++){\n          if (c-&gt;parts[i] == \"none\"){\n              memcpy(c-&gt;parts[i], fill, 10);\n          }\n    }\n}\n\n\nint main(){ \n    char fill[10] = \"none\";\n    struct car c;\n\n    int i = 0;\n    for (i; i&lt; 4; i++){\n        memcpy(c.parts[i], fill, 10);\n    }\n\n    struct car* c2 = c;\n    fun(c2); \n\n    return 0;\n}\n</code></pre>\n\n<p>However, the if statement inside the function never gets hit! It keeps saying that each element in the array IS NOT equal to \"none\". However, I try printing it out RIGHT ABOVE the if statement - and sure enough, it says \"none\"! Not sure why?</p>\n\n<p><strong>EDIT</strong>\nI tried the suggested methods in the \"possible duplicate\" post (strcmp), but to no avail. I'm still not getting what I want to achieve.</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1550017492, "post_id": 54660681, "comment_id": 96112670, "body": "C and C++ are different languages. GCC seems to select the language based on how you invoke it."}, {"owner": {"reputation": 13, "user_id": 11053684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e904e25931c771e4ebe1985c5814428?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/11053684/joe"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1550017766, "post_id": 54660681, "comment_id": 96112733, "body": "what&#39;s with the downvotes?"}, {"owner": {"reputation": 158, "user_id": 11004853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lyz1P.jpg?s=128&g=1", "display_name": "dzuda11", "link": "https://stackoverflow.com/users/11004853/dzuda11"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1550018651, "post_id": 54660681, "comment_id": 96112956, "body": "@KeithThompson I am sorry, I will delete my comment and give an upvote for the question. :) :D"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1550019133, "post_id": 54660681, "comment_id": 96113066, "body": "The question did produce a couple of decent answers, but the pop-up help when you hover the mouse over the down arrow is a pretty good answer: <i>This question does not show any research effort; it is unclear or not useful.</i> The question is clear and usefulness can be debated, but what&#39;s likely pulling in the downvotes is lack of research. C and C++ are like American Football and Rugby. They look kinda similar and share some common rules, but I was surprised the first time I saw that in Rugby &quot;touchdown&quot; was meant literally."}], "answers": [{"tags": [], "owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "is_accepted": false, "score": 4, "last_activity_date": 1550019068, "last_edit_date": 1550019068, "creation_date": 1550017531, "answer_id": 54660705, "question_id": 54660681, "link": "https://stackoverflow.com/questions/54660681/implicit-declaration-of-a-function-compiles-in-gcc-but-not-in-g/54660705#54660705", "title": "implicit declaration of a function compiles in gcc but not in g++", "body": "<p>C++ does not permit undeclared functions to be called. However, prior to C99, undeclared functions are sometimes permitted in C. Therefore, the code has to result in compile time error in C++, but it can succeed in compiling in C89 (although linking will find no definition of the hypothetical <code>Log</code>.)</p>\n\n<p>Since C99, undeclared functions are not permitted.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1550018221, "post_id": 54660715, "comment_id": 96112830, "body": "To be precise, in C99 and later a call to an undeclared function is a <i>constraint violation</i>. A conforming compiler must diagnose it, but the diagnostic can be a non-fatal warning. gcc is not a conforming compiler by default, though its behavior in this particular case is conforming."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1550017629, "creation_date": 1550017629, "answer_id": 54660715, "question_id": 54660681, "link": "https://stackoverflow.com/questions/54660681/implicit-declaration-of-a-function-compiles-in-gcc-but-not-in-g/54660715#54660715", "title": "implicit declaration of a function compiles in gcc but not in g++", "body": "<p>Because C and C++ are different languages with different rules.</p>\n\n<p>There is no such thing as an implicit function declaration in C++ and there never has been in any version of the language standard. The shown program is ill-formed.</p>\n\n<p>Non-declared functions can be called in old versions of C. However, since C99 it has been ill-formed in that language as well.</p>\n"}], "owner": {"reputation": 13, "user_id": 11053684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e904e25931c771e4ebe1985c5814428?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/11053684/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1550019068, "creation_date": 1550017277, "question_id": 54660681, "link": "https://stackoverflow.com/questions/54660681/implicit-declaration-of-a-function-compiles-in-gcc-but-not-in-g", "title": "implicit declaration of a function compiles in gcc but not in g++", "body": "<p>I have the following C code with a missing function</p>\n\n<p><code>test1.c</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n Log(\"hello\");\n return 0;\n}\n</code></pre>\n\n<p>Compiling it to an object file with <code>gcc -c test1.c</code> produces an object file with a warning (linking will fail of course).</p>\n\n<p>Compiling the same code (with iostream instead of stdio.h) to an object file using <code>g++</code> doesn't even compile and it complains by <code>error: use of undeclared identifier 'Log'</code>. \nWhy didn't gcc stop compilation but g++ did?</p>\n"}, {"tags": ["c", "ncurses"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7300084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178df94ef93176a0f52a7355db0bf102?s=128&d=identicon&r=PG&f=1", "display_name": "A.boj", "link": "https://stackoverflow.com/users/7300084/a-boj"}, "edited": false, "score": 0, "creation_date": 1550036390, "post_id": 54661425, "comment_id": 96117100, "body": "How would I make such that X is shown only where the cursor is and nowhere else?"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 1, "user_id": 7300084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178df94ef93176a0f52a7355db0bf102?s=128&d=identicon&r=PG&f=1", "display_name": "A.boj", "link": "https://stackoverflow.com/users/7300084/a-boj"}, "edited": false, "score": 0, "creation_date": 1550049750, "post_id": 54661425, "comment_id": 96123369, "body": "you could put a <code>werase(win)</code> call before the <code>waddch(win,ch)</code> call."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1550023663, "creation_date": 1550023663, "answer_id": 54661425, "question_id": 54660594, "link": "https://stackoverflow.com/questions/54660594/ncurses-waddch-does-not-print-character-at-cursor-position/54661425#54661425", "title": "Ncurses waddch does not print character at cursor position", "body": "<p>The <code>wmove</code> calls fail because you're passing a position outside the window.  The coordinates start at zero, and giving it the number of rows puts that on the next line past the window.</p>\n\n<p>A few other problems (the <code>getch</code> should read from the window <em>win</em>, and some other code was redundant.  Here's a quick revision:</p>\n\n<pre><code>#include &lt;curses.h&gt;\n\nint\nmain(void)\n{\n    chtype ch = 'X';\n    int cols = 6;\n    int rows = 1;\n    int i;\n    int currPos = 0;\n    WINDOW *win;\n\n    initscr();\n    raw();\n    noecho();\n\n    win = newwin(rows, cols, 1, 1);\n\n    for (i = 0; i &lt; 6; i++) {\n        int ich = wgetch(win);\n\n        if (ich == 'a' || ich == 'j') {\n            if (currPos &gt; 0) currPos--; else beep();\n        } else if (ich == 's' || ich == 'k') {\n            if (currPos &lt; cols - 1) currPos++; else beep();\n        }\n        wmove(win, 0, currPos);\n        waddch(win, ch);\n    }\n\n    endwin();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7300084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178df94ef93176a0f52a7355db0bf102?s=128&d=identicon&r=PG&f=1", "display_name": "A.boj", "link": "https://stackoverflow.com/users/7300084/a-boj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550023663, "creation_date": 1550016497, "last_edit_date": 1550019910, "question_id": 54660594, "link": "https://stackoverflow.com/questions/54660594/ncurses-waddch-does-not-print-character-at-cursor-position", "title": "Ncurses waddch does not print character at cursor position", "body": "<p>I am trying print the character ch at the cursor position in a 1x6 window. I want the cursor to move to the right if I input 's'/'k' and to the left if I input 'a'/'j'(and wrap around to the beginning/end of the window if the cursor is on the beginning/end position).  However, waddch does not print ch at the cursor position.  I tried using mvwaddch and change ch from type char to type chtype, and ch still is not shown at the cursor position. What am I missing so that ch is not printed?</p>\n\n<pre><code>chtype ch = 'X';\nchar ich;\nint cols = 6;\nint rows = 1;\n\nWINDOW* win = newwin(rows, cols,  1, 1);\nint delwin(WINDOW *win);\nraw();\n\n\nint currPos = 0;\n\n\ninitscr();\n\nnoecho();\n\n\nfor(int i = 0; i&lt; 6; i++){\n\n\n    ich = getch();\n\n    if(ich == 'a' || ich == 'j'){\n        //printf(\"\\nsddss\\n\");\n\n        //mvwaddch(win, 0,currPos - 1,ch);\n        wmove(win, rows, currPos - 1);\n        waddch(win, ch);\n        currPos--;\n\n\n    }else\n    if(ich == 's' || ich == 'k'){\n        //printf(\"sddss3333\\n\");\n       //mvwaddch(win ,0,currPos + 1,ch);\n        wmove(win, rows, currPos + 1);\n        waddch(win, ch);\n        currPos++;\n    }\n    wrefresh(win);\n}\n\ndelwin(win);\n\nendwin();\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 6, "creation_date": 1550016117, "post_id": 54660474, "comment_id": 96112352, "body": "You might consider making a state machine."}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1550016889, "post_id": 54660474, "comment_id": 96112550, "body": "Can you step through the code in a debugger? Try following along with it to make sure it counts each character correctly. It strikes me that the last condition (which seems to be for making sure that every word has at least one syllable) is very broken. It will count the <code>e</code> in <code>made</code> even though you&#39;re trying to ignore it with the earlier condition."}, {"owner": {"reputation": 715, "user_id": 8027470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1637b4a50635f77fc6605b1b1285082?s=128&d=identicon&r=PG&f=1", "display_name": "Asaf Rosemarin", "link": "https://stackoverflow.com/users/8027470/asaf-rosemarin"}, "edited": false, "score": 1, "creation_date": 1550017283, "post_id": 54660474, "comment_id": 96112618, "body": "A little tip - at the start of the loop do <code>char curr = tolower(str[i][q])</code> to avoid double checking in all of the conditions"}, {"owner": {"reputation": 2033, "user_id": 174514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziJ7S.jpg?s=128&g=1", "display_name": "aks", "link": "https://stackoverflow.com/users/174514/aks"}, "edited": false, "score": 1, "creation_date": 1550017854, "post_id": 54660474, "comment_id": 96112746, "body": "You need to refactor your code in order to avoid too much logic in one place.  I would suggest parsing lines for <i>words</i> (whitespace separated tokens), and then parsing words for syllables, applying those rules on the syllables."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7058968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b852029ccb7a66680094dac0fde2f8e0?s=128&d=identicon&r=PG&f=1", "display_name": "mbamne", "link": "https://stackoverflow.com/users/7058968/mbamne"}, "edited": false, "score": 0, "creation_date": 1550022382, "post_id": 54660993, "comment_id": 96113799, "body": "Thanks for your response, I don&#39;t know anything about state machines so I have a few questions if that&#39;s okay. I don&#39;t really understand what&#39;s going on in the for loop, is it possible you could explain it a little more?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 1, "user_id": 7058968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b852029ccb7a66680094dac0fde2f8e0?s=128&d=identicon&r=PG&f=1", "display_name": "mbamne", "link": "https://stackoverflow.com/users/7058968/mbamne"}, "edited": false, "score": 0, "creation_date": 1550023652, "post_id": 54660993, "comment_id": 96114067, "body": "Which specific part of the for-loop are you asking about?  That loop contains pretty much the entire code that I supplied.  I wrote a working version and then removed parts that update the state variables so that you could learn by figuring it out.  Almost the entire problem you need to solve is now related to setting or clearing those state variables in an appropriate way.  Each variable has a meaning.  If you have a more specific question about something you don&#39;t understand, then fire away."}, {"owner": {"reputation": 1, "user_id": 7058968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b852029ccb7a66680094dac0fde2f8e0?s=128&d=identicon&r=PG&f=1", "display_name": "mbamne", "link": "https://stackoverflow.com/users/7058968/mbamne"}, "edited": false, "score": 0, "creation_date": 1550024311, "post_id": 54660993, "comment_id": 96114210, "body": "sorry I meant specifically the for loop like for(char *p = str[i], etc..) I don&#39;t really get what end is doing and why it is your condition"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 1, "user_id": 7058968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b852029ccb7a66680094dac0fde2f8e0?s=128&d=identicon&r=PG&f=1", "display_name": "mbamne", "link": "https://stackoverflow.com/users/7058968/mbamne"}, "edited": false, "score": 0, "creation_date": 1550025558, "post_id": 54660993, "comment_id": 96114459, "body": "I mentioned it explicitly in the last paragraph.  It includes the string&#39;s null-terminator in the loop.  An alternative would be to use a do-while loop instead, avoiding the use of <code>strlen</code>.  <i>i.e.</i>: <code>char *p = str[i]; do { .... } while(*p++ != &#39;\\0&#39;);</code>"}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": false, "score": 3, "last_activity_date": 1550019713, "creation_date": 1550019713, "answer_id": 54660993, "question_id": 54660474, "link": "https://stackoverflow.com/questions/54660474/program-that-counts-the-number-of-syllables-in-a-file/54660993#54660993", "title": "Program that counts the number of syllables in a file", "body": "<p>Your code is way too complicated.</p>\n\n<p>The rules in the original problem statement are incredibly simple.  For each word, you need to count how many distinct groups of vowels you encounter.  The suggestion in the comments of using a state machine is absolutely correct.  However, you do not need a complicated machine.  You just need to track a few basic states.</p>\n\n<p>At a minimum, I suggest these states:</p>\n\n<pre><code>int in_word = 0;         // non-zero if currently processing a word\nint in_vowels = 0;       // non-zero if currently processing group of vowels\nint is_silent_e = 0;     // non-zero if the last vowel processed was an 'e'\nint vowel_groups = 0;    // counts the number of vowel groups encountered in current word\n</code></pre>\n\n<p>Now, with sensible states as above, here's an outline of how to use them:</p>\n\n<pre><code>for (char *p = str[i], *end = p + strlen(str[i]) + 1; p != end; ++p)\n{\n    char c = tolower(*p);\n    if (isalpha(c))\n    {\n        // starting a new word?\n        if (!in_word) {\n            in_word = 1;\n            in_vowels = 0;\n            is_silent_e = 0;\n            vowel_groups = 0;\n        }\n\n        // do we have a vowel?\n        if (strchr(\"aeiouy\", c)) {\n            if (!in_vowels) {\n                /**** WRITE ME ****/\n                ++vowel_groups;\n            } else {\n                /**** WRITE ME ****/\n            }\n        } else if (in_vowels) {\n            // no longer in vowel group\n            /**** WRITE ME ****/\n        }\n    }\n    else if (in_word)\n    {\n        // No longer in a word -- update syllable count and reset\n        vowel_groups -= is_silent_e;\n\n        /**** WRITE ME ****/\n    }\n}\n</code></pre>\n\n<p>I have left some logic for you to fill in.  When you do this correctly, you will get the answer <code>32</code> for your example input.</p>\n\n<p>Notice the special loop condition that ensures the string's null-terminator is also processed by the loop.  That will ensure that the end-of-word test will run even if the last character in the string is a word character.</p>\n"}], "owner": {"reputation": 1, "user_id": 7058968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b852029ccb7a66680094dac0fde2f8e0?s=128&d=identicon&r=PG&f=1", "display_name": "mbamne", "link": "https://stackoverflow.com/users/7058968/mbamne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1550019713, "creation_date": 1550015476, "question_id": 54660474, "link": "https://stackoverflow.com/questions/54660474/program-that-counts-the-number-of-syllables-in-a-file", "title": "Program that counts the number of syllables in a file", "body": "<p>I have a function that supposed to count the number of syllables in a file given these constraints:</p>\n\n<p>1) Each group of adjacent vowels (a, e, i, o, u, y) counts as one syllable (for example, the \u201cea\u201d in \u201creal\u201d counts as one syllable, but the \u201ce..a\u201d in \u201cregal\u201d count as two syllable</p>\n\n<p>2) An \u201ce\u201d at the end of a word does not count as a syllable</p>\n\n<p>3) Each word has at least one syllable even if the previous rules give a count of zero.</p>\n\n<p>Given this, I made (albeit a pretty crummy) function to count the number of syllables in a file</p>\n\n<p>I have tried creating this function in many different ways, but this way makes the most sense to me and also gives me a reasonable (not really but in the grand scheme of things it does) estimate of the true answer.</p>\n\n<pre><code>int syllableCount(char **str)\n{\n    int i = 0;\n    int q = 0;\n    int syllableCounter = 0;\n\n    for (i = 0; i &lt; lineCount; i++)\n    {\n        for (q = 0; q &lt;= strlen(str[i]); q++)\n        {\n            if (str[i][q] == 'A' || str[i][q] == 'a' ||\n                str[i][q] == 'E' || str[i][q] == 'e' ||\n                str[i][q] == 'I' || str[i][q] == 'i' ||\n                str[i][q] == 'O' || str[i][q] == 'o' ||\n                str[i][q] == 'U' || str[i][q] == 'u' ||\n                str[i][q] == 'Y' || str[i][q] == 'y')\n            {\n                syllableCounter++;\n            }\n            if ((str[i][q] == 'E' &amp;&amp; str[i][q + 1] == ' ') ||\n                (str[i][q] == 'e' &amp;&amp; str[i][q + 1] == ' ') ||\n                (str[i][q] == 'E' &amp;&amp; str[i][q + 1] == '\\n') ||\n                (str[i][q] == 'e' &amp;&amp; str[i][q + 1] == '\\n') ||\n                (str[i][q] == 'E' &amp;&amp; str[i][q + 1] == '.') ||\n                (str[i][q] == 'e' &amp;&amp; str[i][q + 1] == '.') ||\n                (str[i][q] == 'E' &amp;&amp; str[i][q + 1] == ';') ||\n                (str[i][q] == 'e' &amp;&amp; str[i][q + 1] == ';') ||\n                (str[i][q] == 'E' &amp;&amp; str[i][q + 1] == ':') ||\n                (str[i][q] == 'e' &amp;&amp; str[i][q + 1] == ':') ||\n                (str[i][q] == 'E' &amp;&amp; str[i][q + 1] == '!') ||\n                (str[i][q] == 'e' &amp;&amp; str[i][q + 1] == '!') ||\n                (str[i][q] == 'E' &amp;&amp; str[i][q + 1] == '?') ||\n                (str[i][q] == 'e' &amp;&amp; str[i][q + 1] == '?'))\n            {\n                syllableCounter--;\n            }\n            if ((str[i][q] == 'A' || str[i][q] == 'a' ||\n                 str[i][q] == 'E' || str[i][q] == 'e' ||\n                 str[i][q] == 'I' || str[i][q] == 'i' ||\n                 str[i][q] == 'O' || str[i][q] == 'o' ||\n                 str[i][q] == 'U' || str[i][q] == 'u' ||\n                 str[i][q] == 'Y' || str[i][q] == 'y') &amp;&amp;\n                (str[i][q + 1] == 'A' || str[i][q + 1] == 'a' ||\n                 str[i][q + 1] == 'E' || str[i][q + 1] == 'e' ||\n                 str[i][q + 1] == 'I' || str[i][q + 1] == 'i' ||\n                 str[i][q + 1] == 'O' || str[i][q + 1] == 'o' ||\n                 str[i][q + 1] == 'U' || str[i][q + 1] == 'u' ||\n                 str[i][q + 1] == 'Y' || str[i][q + 1] == 'y'))\n            {\n                syllableCounter--;\n            }\n            if ((str[i][q] != 'A' || str[i][q] != 'a' ||\n                 str[i][q] != 'E' || str[i][q] != 'e' ||\n                 str[i][q] != 'I' || str[i][q] != 'i' ||\n                 str[i][q] != 'O' || str[i][q] != 'o' ||\n                 str[i][q] != 'U' || str[i][q] != 'u' ||\n                 str[i][q] != 'Y' || str[i][q] != 'y') &amp;&amp;\n                (str[i][q + 1] == ' ' || str[i][q + 1] == '\\n'))\n            {\n                syllableCounter++;\n            }\n        }\n    }\n    return syllableCounter;\n}\n</code></pre>\n\n<p>With my test file, I got 54 syllables and the real answer is 32. What is causing me to be off by 22!?</p>\n\n<p>P.S: here's the text in the file I used:</p>\n\n<p>\"The red readymade dress was made for you!  It\nwas going to be ready tomorrow.  What was\nthe colour of the dress?  Oh, it was red!\"</p>\n\n<p><em>All errors in spelling and spacing are done on purpose</em> </p>\n"}, {"tags": ["c", "g++"], "comments": [{"owner": {"reputation": 9, "user_id": 10765347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e44cab0fb8dface4bf9a101e2105f7?s=128&d=identicon&r=PG&f=1", "display_name": "chukwudi  udoka", "link": "https://stackoverflow.com/users/10765347/chukwudi-udoka"}, "edited": false, "score": 0, "creation_date": 1550015051, "post_id": 54660356, "comment_id": 96112120, "body": "Or a very clear explanation on how to compile static library will be appreciated"}, {"owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "edited": false, "score": 0, "creation_date": 1550015613, "post_id": 54660356, "comment_id": 96112235, "body": "Let us find more information. Try <code>objdump -t mylibrary.a</code>. Examine the output. Does <code>calculatearea</code> appear?"}, {"owner": {"reputation": 9, "user_id": 10765347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e44cab0fb8dface4bf9a101e2105f7?s=128&d=identicon&r=PG&f=1", "display_name": "chukwudi  udoka", "link": "https://stackoverflow.com/users/10765347/chukwudi-udoka"}, "reply_to_user": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "edited": false, "score": 0, "creation_date": 1550016100, "post_id": 54660356, "comment_id": 96112348, "body": "This is the link to a screen shot of the compiler after running that command :            <a href=\"https://drive.google.com/open?id=1xPTvcW7BoDl9tkLcAbGxzaGNYRvby6TW\" rel=\"nofollow noreferrer\">drive.google.com/open?id=1xPTvcW7BoDl9tkLcAbGxzaGNYRvby6TW</a>"}, {"owner": {"reputation": 9, "user_id": 10765347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e44cab0fb8dface4bf9a101e2105f7?s=128&d=identicon&r=PG&f=1", "display_name": "chukwudi  udoka", "link": "https://stackoverflow.com/users/10765347/chukwudi-udoka"}, "reply_to_user": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "edited": false, "score": 0, "creation_date": 1550016138, "post_id": 54660356, "comment_id": 96112361, "body": "In short form yes it appears"}, {"owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "edited": false, "score": 0, "creation_date": 1550016945, "post_id": 54660356, "comment_id": 96112558, "body": "Then I know no easy solution. I run Debian GNU/Linux rather than Windows, so I do not believe that I could accurately walk you through your build. Building libraries is tricky. It is temperamental. Bugs during linking are hard to diagnose. Someone else might know an easier solution, but I fear that all I can to is to refer you to <a href=\"https://www.gnu.org/software/libtool/manual/\" rel=\"nofollow noreferrer\">the manual of GNU&#39;s libtool</a>. That is not easy or short to read, but reading it is how I learned to build libraries."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1550017610, "post_id": 54660356, "comment_id": 96112692, "body": "But you did not define the function <code>calculatearea</code> at all!"}, {"owner": {"reputation": 9, "user_id": 10765347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e44cab0fb8dface4bf9a101e2105f7?s=128&d=identicon&r=PG&f=1", "display_name": "chukwudi  udoka", "link": "https://stackoverflow.com/users/10765347/chukwudi-udoka"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1550022948, "post_id": 54660356, "comment_id": 96113912, "body": "@L.F. did you see my screenshot ? and its meant to be defined in the library"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1550023021, "post_id": 54660356, "comment_id": 96113926, "body": "I don\u2019t see your screenshot in your question. Please include it in the question if you want others to see it."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1550027193, "post_id": 54660356, "comment_id": 96114819, "body": "Please <a href=\"https://stackoverflow.com/posts/54660356/edit\">edit</a> your question to add additional details, instead of burying them in comments. One of the most important things you could add is the exact compiler command line you&#39;re using, and the information that <code>calculatearea</code> is in <code>area.o</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10765347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e44cab0fb8dface4bf9a101e2105f7?s=128&d=identicon&r=PG&f=1", "display_name": "chukwudi  udoka", "link": "https://stackoverflow.com/users/10765347/chukwudi-udoka"}, "edited": false, "score": 0, "creation_date": 1550181439, "post_id": 54662634, "comment_id": 96186311, "body": "Thank you it worked , the only complication to this is when i use multiple externs to link different .o files . Its only the area that gets noticed the other give an error undefined refference"}], "tags": [], "owner": {"reputation": 76, "user_id": 1936612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7c59fd15e98f5a7587831bfe4e5679?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1936612/deepak"}, "is_accepted": false, "score": 0, "last_activity_date": 1550035025, "last_edit_date": 1550035025, "creation_date": 1550032855, "answer_id": 54662634, "question_id": 54660356, "link": "https://stackoverflow.com/questions/54660356/compiling-c-programs-with-static-files/54662634#54662634", "title": "Compiling C programs with static files", "body": "<p>From the above code we can see that you have declared the function <code>int calculatearea(int a , int b);</code> but have not written any definition for the same. and you are calling this function in the main. compiler is not finding the definition for the function <code>calculatearea</code> and giving error.</p>\n\n<p>To solve this:</p>\n\n<p>1) Write the definition for function <code>calculatearea</code> in the same file.</p>\n\n<p>2) Make use of <code>extern</code> specifier with this function declaration and make sure that definition is present with the link library at the time of compilation.</p>\n\n<p>3) As mentioned in the picture if the area.o have the definition of function <code>calculatearea</code>, then compile as below, this will generate a.out in linux:</p>\n\n<pre><code>gcc filename.c area.o \n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10765347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e44cab0fb8dface4bf9a101e2105f7?s=128&d=identicon&r=PG&f=1", "display_name": "chukwudi  udoka", "link": "https://stackoverflow.com/users/10765347/chukwudi-udoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1550035025, "creation_date": 1550014735, "last_edit_date": 1550026798, "question_id": 54660356, "link": "https://stackoverflow.com/questions/54660356/compiling-c-programs-with-static-files", "title": "Compiling C programs with static files", "body": "<p>I am trying to compile a c program with a static library and its not working . </p>\n\n<p>This is the error : </p>\n\n<blockquote>\n  <p>undefined reference to `calculatearea'\n  collect2.exe: error: ld returned 1 exit status . </p>\n</blockquote>\n\n<p>The static files were made with the gcc / g++ compilers . </p>\n\n<p>This is the main code : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint calculatearea(int a , int b);\nint main()\n{\n\n\nint c = calculatearea(2,4);\n\nprintf(\"%d\",c);\ngetchar();\nreturn 0;\n}\n</code></pre>\n\n<p>edit : \n: <a href=\"https://drive.google.com/file/d/1xPTvcW7BoDl9tkLcAbGxzaGNYRvby6TW/view\" rel=\"nofollow noreferrer\">screenshot of compiler error</a></p>\n"}, {"tags": ["c", "pointers", "memory-address"], "comments": [{"owner": {"reputation": 5635, "user_id": 1702077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/oGOpj.png?s=128&g=1", "display_name": "Chris Loonam", "link": "https://stackoverflow.com/users/1702077/chris-loonam"}, "edited": false, "score": 2, "creation_date": 1550013123, "post_id": 54660039, "comment_id": 96111588, "body": "A pointer is C&#39;s way of representing an address, so, yes, you always have to use pointers to handle addresses."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1550013131, "post_id": 54660039, "comment_id": 96111591, "body": "I don&#39;t think there is such a thing as &#39;the bare address&#39;.  For instance, in your example, <code>foo</code> is (presumably) an integer value, not &quot;the bare address&quot; of an integer value.  The <code>&amp;</code> operator yields the address of that integer as a pointer.  (There is such a thing as a <code>void *</code> in C, but that&#39;s just a pointer with the type-information stripped out -- avoid using that when possible, it&#39;s easy to use it wrong, because the compiler won&#39;t be able to help you detect mistakes)"}, {"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1550013389, "post_id": 54660039, "comment_id": 96111676, "body": "A address is a numerical value, you can use unsigned int to hold an address as long as the address fits in the value. Point are there to represent indirection, so that the compiler can make the difference between data and address"}, {"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1550013531, "post_id": 54660039, "comment_id": 96111717, "body": "Yes @JeremyFriesner, foo was a placeholder for a variable of any type (char, int or array. Although I think arrays are handled differently). My question was that for that variable, the &amp; operator never gives just the address, but a pointer to it, and why that happens."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 3, "creation_date": 1550013646, "post_id": 54660039, "comment_id": 96111758, "body": "I&#39;m not seeing the distinction you&#39;re making -- what would &quot;just the address&quot; look like?  How is &quot;just the address&quot; different from a pointer?"}, {"owner": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 0, "creation_date": 1550013674, "post_id": 54660039, "comment_id": 96111764, "body": "@Chabon A pointer is just a variable like any other. It&#39;s contents <i>are</i> the &quot;bare address&quot;. You can examine a pointer variable in a debugger and it will show the memory address. The distinction between pointer and &quot;bare address&quot; you keep mentioning doesn&#39;t exist. A pointer is just a numerical address value with some built-in semantics."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1550013726, "post_id": 54660039, "comment_id": 96111775, "body": "Btw <code>printf(&quot;%p\\n&quot;, &amp;foo);</code> is also a good way to see the pointer&#39;s current value (i.e. the address of the object the pointer is pointing to)"}, {"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "reply_to_user": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1550013730, "post_id": 54660039, "comment_id": 96111776, "body": "@geckos but being that an addresses always changes in runtime because of memory managment, isn&#39;t it useless to do that? If that was the case, then it would be a reason why pointers are always needed."}, {"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "reply_to_user": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 0, "creation_date": 1550014003, "post_id": 54660039, "comment_id": 96111834, "body": "@MikeHolt then why does &amp; give a pointer and not the content itself? Why is there a need to make another variable? (Edit: Sorry if the questions look aggressive,  I&#39;m just bad at english)"}, {"owner": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 0, "creation_date": 1550014234, "post_id": 54660039, "comment_id": 96111912, "body": "@Chabon, Why <i>wouldn&#39;t</i> <code>&amp;</code> give you a pointer? If it just returned an <code>unsigned int</code> containing the memory address, the only difference would be the underlying <i>type</i> of the variable. But they still hold the same exact value. Just like <code>int x = 10;</code> vs <code>char y = 10;</code>. One is an <code>int</code> and the other is a <code>char</code>, but they both just contain the value <code>10</code>. You&#39;re getting hung up on this notion that a pointer is some strange animal, when all it really is is the same address, just with some extra semantics attached, such as being able to dereference with <code>*</code>."}, {"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "reply_to_user": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 0, "creation_date": 1550014640, "post_id": 54660039, "comment_id": 96112029, "body": "@MikeHolt I was just asking if there was an underlying reason on the use of a pointer, an extra variable in code, instead of an unsigned int with the address. Are those extra semantics the pointer allows the reason why an extra variable (the pointer) is used?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 2, "creation_date": 1550014758, "post_id": 54660039, "comment_id": 96112058, "body": "@Chabon Objects&#39; addresses don&#39;t change due to &quot;memory management&quot;.  C doesn&#39;t have a garbage collector or similar.  Objects don&#39;t move around in memory like in some languages.  A pointer is just an integer that holds the address of some other object.  Its value doesn&#39;t change unless you change it.  They allow some different language-level operations (i.e. subscripting, different addition semantics), but at the assembly level there&#39;s no difference (on most modern architectures)."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550015321, "post_id": 54660039, "comment_id": 96112177, "body": "In user code on a desktop system, hardcoded addresses (bare address) are not useful because the program cannot access anything that would be at a fixed address. In embedded systems, there <i>are</i> memory addresses (used for memory mapped I/O) that are fixed. So on an embedded system, there are places where hardcoded addresses are used. Typically, those addresses are hidden in #defines so that the numbers don&#39;t clutter the code."}, {"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1550015651, "post_id": 54660039, "comment_id": 96112241, "body": "@MilesBudnek sorry, I didn&#39;t mean memory management like that, but in the sense that addresses change every time the program runs. Since it will run on a different block of memory each time, using an int static address could be impractical, and a reason to use pointers instead. That is what I meant."}, {"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550015744, "post_id": 54660039, "comment_id": 96112262, "body": "@user3386109 Yes, this is exactly what I meant by fixed and not fixed adresses and memory management (And what I tried to ask to Miles). Thank you."}, {"owner": {"reputation": 613, "user_id": 5699459, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/05582bd8882323cab522470ed6de92c6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5699459/michael"}, "edited": false, "score": 0, "creation_date": 1550017723, "post_id": 54660039, "comment_id": 96112717, "body": "There&#39;s nothing stopping you from going <code>int i; *(&amp;i) = 5;</code> and using the &quot;bare address&quot; without a pointer variable but it should be pretty clear that the above is quite pointless (but not pointer-less ;) ). Internally the address is still a pointer and treated as such."}, {"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "edited": false, "score": 0, "creation_date": 1550017861, "post_id": 54660039, "comment_id": 96112747, "body": "That closes the question. Bare adresses are pointless. Thank you Michael."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "edited": false, "score": 0, "creation_date": 1550151265, "post_id": 54660039, "comment_id": 96170751, "body": "@MikeHolt no a pointer is <b>not</b> an <code>unsigned int</code>.  The only integer types it can be converted into are <code>intptr_t</code> and <code>uintptr_t</code>. \\@Chabon <code>instead of an unsigned int with the address</code> how can you use an integer to point to a variable when you have absolutely no idea where a variable is located? The <code>&amp;</code> operator allows you to take the address of a variable. Besides, using magic number is a bad practice, regardless of whatever variable and type you want"}, {"owner": {"reputation": 4024, "user_id": 3307686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dd8d815759c23dd52428c7cc0c35324?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Holt", "link": "https://stackoverflow.com/users/3307686/mike-holt"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1550166521, "post_id": 54660039, "comment_id": 96179990, "body": "@phuclv WTH? At <b>no</b> point did I say a pointer is an unsigned int. I said a pointer is just a numeric value (which it is), with some built-in semantics and syntax. And I said that (on some architectures, assuming a pointer would actually fit in an unsigned int), that you could easily convert a pointer to an unsigned int (or whatever size integer you need to fit a pointer value, depending on your architecture). Not that you would want to, of course. I only mentioned that because OP seemed to think a pointer was some strange object with all sorts of automatic stuff going on in the background."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "edited": false, "score": 0, "creation_date": 1550014243, "post_id": 54660237, "comment_id": 96111915, "body": "That seems like a good reason. Sorry if I keep repeating the question, but does that mean that the only (And I mean <b>only</b>) way of using addresses in a practical manner is by creating a pointer variable, and nothing else?"}, {"owner": {"reputation": 148, "user_id": 8333926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041309799337708/picture?type=large", "display_name": "Micha\u0142 Marsza\u0142ek", "link": "https://stackoverflow.com/users/8333926/micha%c5%82-marsza%c5%82ek"}, "reply_to_user": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "edited": false, "score": 0, "creation_date": 1550014642, "post_id": 54660237, "comment_id": 96112031, "body": "Pointer in itself is variable. In C when we call functions the compiler is making copy of variables we passed to functions. Therefore we can&#39;t get any return value by that method. But if we pass address to it it can change the variable that the address is set. I will edit my answer to better answer it."}, {"owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "edited": false, "score": 0, "creation_date": 1550015989, "post_id": 54660237, "comment_id": 96112320, "body": "I know that is a reason of the use of pointers in parameters passage. But, does that mean that the &amp; operator is a function and that is why a pointer var is used instead of an unsigned int?"}, {"owner": {"reputation": 148, "user_id": 8333926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041309799337708/picture?type=large", "display_name": "Micha\u0142 Marsza\u0142ek", "link": "https://stackoverflow.com/users/8333926/micha%c5%82-marsza%c5%82ek"}, "reply_to_user": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "edited": false, "score": 0, "creation_date": 1550018472, "post_id": 54660237, "comment_id": 96112897, "body": "No &amp; is not a function. &amp; is a operator that works on variables and returns the address or the variable. (I don&#39;t understand the question)"}], "tags": [], "owner": {"reputation": 148, "user_id": 8333926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041309799337708/picture?type=large", "display_name": "Micha\u0142 Marsza\u0142ek", "link": "https://stackoverflow.com/users/8333926/micha%c5%82-marsza%c5%82ek"}, "is_accepted": false, "score": 1, "last_activity_date": 1550014901, "last_edit_date": 1550014901, "creation_date": 1550014030, "answer_id": 54660237, "question_id": 54660039, "link": "https://stackoverflow.com/questions/54660039/does-c-always-have-to-use-pointers-to-handle-addresses/54660237#54660237", "title": "Does C always have to use pointers to handle addresses?", "body": "<pre><code>int i; //a variable\nint *p; //a variable that store adres\ni = 10; //now i is set to 10\np = &amp;i; //now p is set to i address\n*p = 20; //we set to 20 the given address\nint tab[10]; // a table\np = tab; //set address\np++; //operate on address and move it to next element tab[1]\n</code></pre>\n\n<p>We can operate on address by pointers move forward or backwards. We can set and read from given address.</p>\n\n<p>In C if we want get return values from functions we must use pointers. Or use return value from functions, but that way we can only get one value. </p>\n\n<p>In C we don't have references therefore we must use pointers.</p>\n\n<pre><code>void fun(int j){\nj = 10;\n}\nvoid fun2(int *j){\n*j = 10;\n}\nint i;\ni = 5; // now I is set to 5\nfun(i);\n//printf i will print 5\nfun2(&amp;i);\n//printf I will print 10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "edited": false, "score": 0, "creation_date": 1550016781, "post_id": 54660292, "comment_id": 96112528, "body": "@Chabon: That depends on the task you want to use it for. If you want to store or retrieve the contents of some object in C, you must use a pointer. However, if you want to align addresses for special purposes (e.g., implementing fast SIMD code), you may need to work with addresses as integers, then convert them back."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1550014347, "creation_date": 1550014347, "answer_id": 54660292, "question_id": 54660039, "link": "https://stackoverflow.com/questions/54660039/does-c-always-have-to-use-pointers-to-handle-addresses/54660292#54660292", "title": "Does C always have to use pointers to handle addresses?", "body": "<p>C allows you to convert pointers to integers. The <code>&lt;stdint.h&gt;</code> header provides a <code>uintptr_t</code> type with the property that any pointer to <code>void</code> can be converted to <code>uintptr_t</code> and back, and the result will compare equal to the original pointer.</p>\n\n<p>Per C 2018 6.3.2.3 6, the result of converting a pointer to an integer is implementation-defined. Non-normative note 69 says \u201cThe mapping functions for converting a pointer to an integer or an integer to a pointer are intended to be consistent with the addressing structure of the execution environment.\u201d</p>\n\n<p>Thus, on a machine where addresses are a simple numbering scheme, converting a pointer to a <code>uintptr_t</code> <strong>ought</strong> to give you the natural machine address, even though the standard does not require it. There are, however, environments where addresses are more complicated, and the result of converting a pointer to an integer may not be straightforward.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 1, "last_activity_date": 1550018245, "creation_date": 1550018245, "answer_id": 54660792, "question_id": 54660039, "link": "https://stackoverflow.com/questions/54660039/does-c-always-have-to-use-pointers-to-handle-addresses/54660792#54660792", "title": "Does C always have to use pointers to handle addresses?", "body": "<p>A pointer <em>is</em> an address (or, more properly, it\u2019s an abstraction of an address).  Pointers are how we deal with address values in C.  </p>\n\n<p>Outside of a few domains, a \u201cbare address\u201d value simply isn\u2019t useful on its own.  We\u2019re less interested in the address than the object at that address.  C <em>requires</em> us to use pointers in two situations:</p>\n\n<ul>\n<li>When we want a function to write to a parameter</li>\n<li>When we need to track dynamically allocated memory</li>\n</ul>\n\n<p>In these cases, we don\u2019t really care what the address value actually is; we just need it to access the object we\u2019re interested in.  </p>\n\n<p>Yes, in the embedded world specific address values are meaningful.  But you still use pointers to access those locations.  Like I said above, a pointer <em>is</em> an address for our purposes.</p>\n"}], "owner": {"reputation": 27, "user_id": 10538072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0RgtFXJ75dQ/AAAAAAAAAAI/AAAAAAAAAVs/Gwey66lVn1o/photo.jpg?sz=128", "display_name": "Chabon", "link": "https://stackoverflow.com/users/10538072/chabon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "accepted_answer_id": 54660792, "answer_count": 3, "score": -1, "last_activity_date": 1550018587, "creation_date": 1550012917, "last_edit_date": 1550018587, "question_id": 54660039, "link": "https://stackoverflow.com/questions/54660039/does-c-always-have-to-use-pointers-to-handle-addresses", "title": "Does C always have to use pointers to handle addresses?", "body": "<p>As I understand it, all of the cases where C has to handle an address involve the use of a pointer. For example, the &amp; operand creates a pointer to the program, instead of just giving the bare address as data (i.e it never gives the address without using a pointer first):</p>\n\n<pre><code>scanf(\"%d\", &amp;foo)\n</code></pre>\n\n<p>Or when using the &amp; operand</p>\n\n<pre><code>int i; //a variable\nint *p; //a variable that store adress\np = &amp;i; //The &amp; operator returns a pointer to its operand, and equals p to that pointer.\n</code></pre>\n\n<p>My question is: Is there a reason why C programs always have to use a pointer to manage addresses? Is there a case where C can handle a bare address (the numerical value of the address) on its own or with another method? Or is that completely impossible? (Being because of system architecture, memory allocation changing during and in each runtime, etc). And finally, would that be useful being that addresses change because of memory management? If that was the case, it would be a reason why pointers are always needed.</p>\n\n<p>I'm trying to figure out if the use pointers is a must in C standardized languages. Not because I want to use something else, but because I want to know for sure that the only way to use addresses is with pointers, and just forget about everything else.</p>\n\n<p>Edit: Since part of the question was answered in the comments of  Eric Postpischil,  Micha\u0142 Marsza\u0142ek, user3386109, Mike Holt and Gecko; I'll group those bits here: Yes, using bare adresses bear little to no use because of different factors (Pointers allow a number of operations, adresses may change each time the program is run, etc). As Micha\u0142 Marsza\u0142ek pointed out (No pun intended) scanf() uses a pointer because C can only work with copies, so a pointer is needed to change the variable used. i.e</p>\n\n<pre><code>int foo;\nscanf(\"%d\", foo) //Does nothing, since value can't be changed\nscanf(\"%d\", &amp;foo) //Now foo can be changed, since we use it's address.\n</code></pre>\n\n<p>Finally, as Gecko mentioned, pointers are there to represent indirection, so that the compiler can make the difference between data and address.</p>\n\n<p>John Bode covers most of those topics in it's answer, so I'll mark that one.</p>\n"}, {"tags": ["c", "arrays", "static", "char"], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1550015216, "post_id": 54659853, "comment_id": 96112161, "body": "<code>static</code> isn&#39;t exactly global, but file-scoped."}], "tags": [], "owner": {"reputation": 3805, "user_id": 3845803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aG57R.jpg?s=128&g=1", "display_name": "Kon", "link": "https://stackoverflow.com/users/3845803/kon"}, "is_accepted": true, "score": 5, "last_activity_date": 1550012033, "last_edit_date": 1550012033, "creation_date": 1550011845, "answer_id": 54659853, "question_id": 54659804, "link": "https://stackoverflow.com/questions/54659804/c-curious-behavior-of-static-char-array-vs-dynamic-char-array/54659853#54659853", "title": "C curious behavior of static char array vs dynamic char array", "body": "<p>This is happening because <code>t</code> is non-static (allocated on the stack), which means that when the function returns, the memory is freed and, by the time you reference that memory, it could be anything.  This behavior is undefined.</p>\n\n<p>This is a common mistake and you should never return pointers or references to local variables.</p>\n\n<p>It works for <code>static</code> variables because those are allocated in the global memory and not on stack.  Returning pointers and references to static variables, while works, is an anti-pattern and should be avoided.</p>\n"}], "owner": {"reputation": 319, "user_id": 6418280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3293cd4cd4a632a8e87b3f19bd2ce2?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/6418280/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "closed_date": 1550012351, "accepted_answer_id": 54659853, "answer_count": 1, "score": 1, "last_activity_date": 1550012440, "creation_date": 1550011574, "last_edit_date": 1550011717, "question_id": 54659804, "link": "https://stackoverflow.com/questions/54659804/c-curious-behavior-of-static-char-array-vs-dynamic-char-array", "closed_reason": "Duplicate", "title": "C curious behavior of static char array vs dynamic char array", "body": "<p>I'm following an rpcgen tutorial to make a small \"remote proceedure call\" utility where by a client sends a request to  a server, then the server responds with a data formatted string. \nThe return string is made by using <strong>strftime()</strong> char array and filling it with the formatted time. Then char array, either t or s is assigned to the *ptr, whoes address is returned as <strong>return(&amp;ptr)</strong>.\nWhat's curious, is that when I use the <strong>static char t</strong>, the function works and I'm able to receive the correct string. However if I use the non static <strong>char s[100]</strong> when i try to use the returned string, its a garbled mess or random characters and non characters.\nFor the non-static case I don't write over it again, so why is it doing that?\nAlso I'm not sure the implication of the function definition return value being a double pointer**, but I actually return a single pointer* with &amp;ptr.   </p>\n\n<pre><code>char **menuitem_1_svc(char *argp, struct svc_req *rqstp)\n{\n  struct tm *timeptr;\n  time_t clock;\n  static char *ptr;\n  static char err[] = \"Invalid Response \\0\";\n  char t[100];\n  static char s[100];\n\n  clock = time(0);\n  timeptr = localtime(&amp;clock);\n\n  //Use static char[] s or char[] t  both seem to work here\n  strftime(s,100,\"%A, %B %d, %Y - %T\",timeptr);\n\n  /*  This block is just an example.  ptr is only assigned to s or t.\n  //This works\n  ptr =s;\n\n  //This doesn't\n  ptr = t;\n  */\n\n  return(&amp;ptr);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 1, "creation_date": 1550011388, "post_id": 54659756, "comment_id": 96111057, "body": "Cast the variable in the print call.  <code>printf(&quot;value = %d\\n&quot;, (int)value);</code>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550015437, "post_id": 54659756, "comment_id": 96112197, "body": "What is with all the answers attempting to use fancy features with unions or specifier abuse? Just subtract 65536. Done. Standard, defined, simple."}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1550021865, "post_id": 54659756, "comment_id": 96113688, "body": "It&#39;d help a lot if we knew details, in particular what is sizeof(int).  Whether it&#39;s 2 or 4 makes quite a difference."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550015038, "post_id": 54659815, "comment_id": 96112117, "body": "The C standard does not guarantee this will work. The behavior is implementation defined. Per C 2018 7.21.6.1 7, the value of the argument for <code>%hd</code> is converted to a <code>short int</code>. Per 6.3.1.3 3, the behavior of this conversion is implementation-defined."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550033724, "post_id": 54659815, "comment_id": 96116344, "body": "Correct specifiers for <code>(u)int16_t</code> are <code>&quot;%&quot; PRIu16</code> and <code>&quot;%&quot; PRId16</code> from <code>&lt;inttypes.h&gt;</code>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1550091051, "post_id": 54659815, "comment_id": 96147310, "body": "@EricPostpischil: The Standard makes no attempt to forbid implementations from behaving in obtuse fashion.  Unless one is using an unusual platform, an obtuse compiler, or a compiler that&#39;s configured to squawk at actions which are defined but unusual, <code>(int16_t)65461</code> is going to equal -75.  A bigger issue from a practical perspective would be that not all printf libraries implement everything included in the spec."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550091550, "post_id": 54659815, "comment_id": 96147504, "body": "@supercat: Writing code based on personal opinions about what compilers ought to do is not engineering. It is okay to deviate from the C standard when circumstances warrant <b>and it is documented</b>, and, to the extent feasible, undesired behaviors are guarded against with tests. However, in this case, there is no warrant: It is entirely feasible to write uncomplicated strictly conforming code that solves the problem. Relying on non-conforming behaviors is a shortcoming of the code in this answer. (Incidentally, there is no conversion to <code>(int16_t)</code> involved.)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1550092611, "post_id": 54659815, "comment_id": 96147972, "body": "@EricPostpischil: The Standard has never attempted to specify everything necessary to make an implementation suitable for any particular purpose.  Indeed, the authors explicitly note in the Rationale that an implementation could be &quot;conforming&quot; without being suitable for any particular purpose.  When the authors of the C Standard described in the Rationale how &quot;the majority of current implementations&quot; would process <code>unsigned short a=60000,b=62500; unsigned c=a*b;</code>, did they mean that the majority of implementations explicitly documented such behavior, or that..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1550092722, "post_id": 54659815, "comment_id": 96148022, "body": "...they thought that the tradition of how such actions should be handled on commonplace platforms was sufficiently strong and unambiguous that there was no reason to contemplate the notion of compilers doing anything else except when targeting unusual platforms where other behaviors might make more sense?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1550097782, "post_id": 54659815, "comment_id": 96150030, "body": "@EricPostpischil: PS--while it&#39;s possible that an implementation might define <code>uint16_t</code> and yet define the <code>short int</code> as a different type from  <code>int16_t</code>, such behavior would be sufficiently unusual that I&#39;d be surprised if <i>any</i> non-contrived implementations of C99 or later have ever done so."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550109999, "post_id": 54659815, "comment_id": 96153282, "body": "@supercat: Your comments are a non sequitur. My previous comment did not argue in any way about what the standard said, so responding with some argument about what the standard says or does not say or what its purpose is has no bearing. Even if you were completely write about the standard and its purposes, the fact remains that writing code based on personal opinions about what compilers ought to do is not engineering, and it is clearly inferior to using a solution that is simply and clearly conforming."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1550163209, "post_id": 54659815, "comment_id": 96178305, "body": "@EricPostpischil: My &quot;personal opinions about what compilers ought to do&quot; are, in this case, backed up by decades observations of what general-purpose compilers for commonplace platforms have historically, <i>unanimously</i>, done.  While there are a number of ways of interpreting an attempt to convert an out-of-range value to a small signed integer type, and they would yield different results when using ones&#39;-complement or sign-magnitude representations, they all yield the same value when using two&#39;s-complement representation."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550165725, "post_id": 54659815, "comment_id": 96179633, "body": "@supercat: You have missed the point completely. I did not comment at all on whether your personal opinions were correct or not. The point is simply that writing code based on opinion is not engineering. If you write code whose behavior is defined by one or more specifications, that is engineering. If you wrote code is behavior predicted from personal opinions, that is not engineering."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1550168357, "post_id": 54659815, "comment_id": 96180789, "body": "@EricPostpischil: Many specifications are incomplete.  In many fields, the only way to design anything would be to use judgment to fill in the gaps of incomplete specs.  For example, a typical microcontroller may specify that it is suitable for use at voltages between 2.5 and 5.5 volts, and specify that it runs at 3.9+/0.3MHz at 3.0 volts and 4.1+/-0.3MHz at 5.0 volts.  If I need a part that runs somewhere between 3 and 5 MHz for any voltage between 4.9 and 5.1, should this part be suitable?  I&#39;d say that it should be, even though nothing in the data sheet actually says...."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1550168513, "post_id": 54659815, "comment_id": 96180857, "body": "...that the part won&#39;t speed up to 8Mhz when fed exactly 4.93 volts.  As a matter of judgment, I&#39;d allow for the possibility that the part might run slightly faster at e.g. 3.5 volts than at anything higher or lower, but probably not by more than the amount of uncertainty given in the 3.0 and 5.0 volt specs."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550169038, "post_id": 54659815, "comment_id": 96181046, "body": "@supercat: You can have all the judgment, opinions, and unfilled needs you want. It still is not engineering. Needing a dog does not make a cat into a dog. Engineering is writing code based based on specifications. If it is based on opinion or judgment, it might serve your purposes, it might fill a need you have, but it is not engineering."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1550179310, "post_id": 54659815, "comment_id": 96185400, "body": "@EricPostpischil: Is there any <i>documented</i> basis for expecting that typical C implementations won&#39;t overflow the stack when nesting function calls three deep, or when creating a VLA with two elements?  Or is the fact that most programs don&#39;t bomb the stack merely a matter of happenstance?  It would be great if C were sufficiently well specified that most tasks could be accomplished without reliance upon anything that wasn&#39;t guaranteed by spec, but since it isn&#39;t, I guess engineering is essentially impossible in C."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550183333, "post_id": 54659815, "comment_id": 96186991, "body": "@supercat: For current macOS, the default stack size is 8 MiB for the main thread and 2 MiB for others (and you can request more), and you can use <code>-Wframe-larger-than=&lt;n&gt;</code> to advise if a fixed-size (no VLA) stack frame exceeds a requested amount. So, yes, you can determine if a program will fit and can design one to do so. I am sure Unix generally and Windows also publish default stack sizes and let you request non-default stack sizes. I do not know that they have an analog of <code>-Wframe-larger-than</code>, but I do not claim that one is engineering properly without it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550186040, "post_id": 54659815, "comment_id": 96187775, "body": "@EricPostpischil: I haven&#39;t noticed <code>-Wframe-larger-than</code>; I&#39;ve certainly seldom seen it used.  Does gcc offer any guarantee how much the stack usage of a function might exceed the specified value without issuing a diagnostic, since frame size doesn&#39;t include everything that goes on the stack?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550261801, "post_id": 54659815, "comment_id": 96218670, "body": "@supercat: In a routine with VLAs, what do you anticipate going on the stack that is not included in frame size? In a routine without VLAs, I would expect the compiler to compute the frame size as the largest amount it puts on the stack in any path through the routine."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550264058, "post_id": 54659815, "comment_id": 96219596, "body": "@EricPostpischil: Even in a routine without VLAs, there will often be miscellaneous register pushes that don&#39;t get counted in the total, along with the space used by the processor to store the return address.  If such things were guaranteed as never exceeding a total of e.g. 128 bytes, one could simply subtract 128 from the warning threshold, but I don&#39;t know if there&#39;s a documented limit as to how much stack a function might use beyond the reported frame size."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550266173, "post_id": 54659815, "comment_id": 96220331, "body": "@supercat: I expect the compiler counts all of its pushes in the stack frame. I somewhat recall that either Clang or GCC uses a fixed size (at least in the Apple version, and again in the absence of VLAs), meaning that, at the beginning of the routine, it decrements a constant from the stack pointer (possibly modulo some alignment fiddling) and keeps all its data above that, not doing pushes or pops within the routine. I am not privy to the decisions behind that, as I would think allowing for small frames when a function goes through one path and large in another would have some benefit."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550266338, "post_id": 54659815, "comment_id": 96220392, "body": "@supercat: In any case, the compiler can certainly evaluate all paths it generates and count the size as the largest amount it puts on the stack including any miscellaneous pushes. If <code>-Wframe-larger-than</code> is not doing that, it is broken. As I recall, it was added at my request\u2014I filed a feature request in Apple for it, so we could ensure routines inside the kernel, with its limited stack, were not using too much stack space, and, sometime later, the feature was added. (There could have been other people asking for it too.) So, if it does not include everything, it is not serving its purpose."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550342595, "post_id": 54659815, "comment_id": 96236761, "body": "@EricPostpischil: In that case, you should file a defect report, since I doubt the threshold at which it issues the warnings is ever correct.  Further, if the feature was  only added at your request, I&#39;m curious if and how you think anyone would have done any proper engineering with gcc before that."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550343305, "post_id": 54659815, "comment_id": 96236988, "body": "As a simple example of where the threshold is obviously wrong, <code>void someFunc(void); int foo(int index) { char space[1024] = {1,2,3}; dummyFunc(); return space[index]; }</code>.  Squawks if threshold is set to 1023; doesn&#39;t squawk if set to 1024.  Actual stack usage, however, is 1040 bytes."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550364174, "post_id": 54659815, "comment_id": 96241740, "body": "@supercat: <a href=\"https://godbolt.org/z/Jmjgj8\" rel=\"nofollow noreferrer\">GCC 8.2 warns for <code>-Wframe-larger-than=1024</code>.</a> If <code>-O3</code> is added, it changes the code so that only 1024 is subtracted from the stack pointer, instead of 1040, and does not warn. (I had to change your <code>dummyFunc</code> to <code>someFunc</code>.)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550440986, "post_id": 54659815, "comment_id": 96258636, "body": "@EricPostpischil: I was using -O3, and it subtracted 1024 from SP, but the actual stack usage in that case is 8 for the return address, 8 for the push RBX, and 1024 for the SUB SP, for a total of 1040."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1550457481, "post_id": 54659815, "comment_id": 96261880, "body": "As another example: <code>#define z7 ,e,e,e,e,e,e,e, e,e,e,e,e,e,e  long qfunc(long e, ...) {     long q[32]={1,2,3,4,5};     if (e &lt;= 0) return q[-e];     else return qfunc(         (e-1) z7 z7 z7  z7 z7 z7  z7 z7 z7     ); }</code>, tested with -Wframe-larger-than=256.  Changing the size of the array to 33 yields a warning, but stack usage per recursive call is well over five times the requested 256-byte limit."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550508643, "post_id": 54659815, "comment_id": 96285970, "body": "@EricPostpischil: Incidentally, it&#39;s possible to write a recursive function that abides the C11 &quot;Translation limits&quot; specs and compiles cleanly with -Wframe-larger-than=16--but uses more than 8,000,000 bytes per recursive call--a factor-of-500,000 difference between the warning threshold and actual stack usage."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1550011617, "creation_date": 1550011617, "answer_id": 54659815, "question_id": 54659756, "link": "https://stackoverflow.com/questions/54659756/printing-the-actual-negative-number-stored-inside-unsigned-int/54659815#54659815", "title": "Printing the actual negative number stored inside unsigned int", "body": "<p>If an <code>int</code> is 32 bits on your system, then the correct format for printing a 16-bit int is <code>%hu</code> for unsigned and <code>%hd</code> for signed.</p>\n\n<p>Examine the output of:</p>\n\n<pre><code>uint16_t n = (uint16_t)-75;\n\nprintf(\"%d\\n\", (int)n); // Output: 65461\nprintf(\"%hu\\n\", n); // Output: 65461\nprintf(\"%hd\\n\", n); // Output: -75\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1550012054, "post_id": 54659819, "comment_id": 96111271, "body": "<code>Assuming your friend has somehow correctly put the bit representation for the signed integer into the unsigned integer</code> &lt;- this is as simple as <code>T foo = (T)-42;</code>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550014932, "post_id": 54659819, "comment_id": 96112093, "body": "This is not the only standard compliant way. Simply subtracting 65536 restores the original value."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1550080670, "post_id": 54659819, "comment_id": 96142434, "body": "@chux yes, I agree. Default arguments promotion takes place. Will remove it"}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1550080677, "last_edit_date": 1550080677, "creation_date": 1550011630, "answer_id": 54659819, "question_id": 54659756, "link": "https://stackoverflow.com/questions/54659756/printing-the-actual-negative-number-stored-inside-unsigned-int/54659819#54659819", "title": "Printing the actual negative number stored inside unsigned int", "body": "<p>Assuming your friend has somehow correctly put the bit representation for the signed integer into the unsigned integer, the only standard compliant way to extract it back would be to use a union as- </p>\n\n<pre><code>typedef union {\n    uint16_t input;\n    int16_t output;\n} aliaser;\n\n</code></pre>\n\n<p>Now, in your code you can do - </p>\n\n<pre><code>aliaser x;\nx.input = foo;\nprintf(\"%d\", x.output);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550015149, "post_id": 54659994, "comment_id": 96112142, "body": "This can be done without GCC extensions by using the C standard compound literals."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550034298, "post_id": 54659994, "comment_id": 96116505, "body": "I get &quot;warning: ISO C forbids casts to union type [-Wpedantic]&quot;.  Suggest <code>printf(&quot;%d\\n&quot;, (union x {uint16_t in; int16_t out;}) {foo}.out);</code>"}], "tags": [], "owner": {"reputation": 31, "user_id": 9593920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Aritz Erkiaga", "link": "https://stackoverflow.com/users/9593920/aritz-erkiaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1550012653, "creation_date": 1550012653, "answer_id": 54659994, "question_id": 54659756, "link": "https://stackoverflow.com/questions/54659756/printing-the-actual-negative-number-stored-inside-unsigned-int/54659994#54659994", "title": "Printing the actual negative number stored inside unsigned int", "body": "<p>Go ahead with the union, as explained by another answer. Just wanted to say that if you are using GCC, there's a very cool feature that allows you to do that sort of \"bitwise\" casting without writing much code:</p>\n\n<pre><code>printf(\"%d\", ((union {uint16_t in; int16_t out}) foo).out);\n</code></pre>\n\n<p>See <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.1/gcc/Cast-to-Union.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc-4.4.1/gcc/Cast-to-Union.html</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1550015234, "post_id": 54660064, "comment_id": 96112166, "body": "<code>PRI16D</code> is defined for formatting an <code>int16_t</code>, not for reinterpreting the value of a <code>uint16_t</code>. The C standard does not define the behavior when used in this way."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 1, "last_activity_date": 1550046153, "last_edit_date": 1550046153, "creation_date": 1550013051, "answer_id": 54660064, "question_id": 54659756, "link": "https://stackoverflow.com/questions/54659756/printing-the-actual-negative-number-stored-inside-unsigned-int/54660064#54660064", "title": "Printing the actual negative number stored inside unsigned int", "body": "<pre><code>#include &lt;inttypes.h&gt;\n\nuint16_t foo = -75;\nprintf(\"==&gt; %\" PRId16 \" &lt;==\\n\", foo); // type mismatch, undefined behavior\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1550021734, "post_id": 54660344, "comment_id": 96113666, "body": "You might want to add the note that this will only work if <code>sizeof(int) &gt; 2</code>.  There are still compilers out there using 16 bit ints.  Mostly in the embedded space, e.g. the Arduino: <a href=\"https://www.arduino.cc/reference/en/language/variables/data-types/int/\" rel=\"nofollow noreferrer\">arduino.cc/reference/en/language/variables/data-types/int</a>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1550028701, "post_id": 54660344, "comment_id": 96115200, "body": "@dgnuff: If <code>int</code> is 16 bits, then <code>65536</code> is a long, and, in <code>x-65536</code>, <code>x</code> is converted to a long, and then the resulting value is correct."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 1, "last_activity_date": 1550060768, "last_edit_date": 1592644375, "creation_date": 1550014664, "answer_id": 54660344, "question_id": 54659756, "link": "https://stackoverflow.com/questions/54659756/printing-the-actual-negative-number-stored-inside-unsigned-int/54660344#54660344", "title": "Printing the actual negative number stored inside unsigned int", "body": "<p>If a 16-bit negative integer was stored in a <code>uint16_t</code> called <code>x</code>, then the original value may be calculated as <code>x-65536</code>.</p>\n<p>This can be printed with any of<sup>1</sup>:</p>\n<pre><code>printf(&quot;%ld&quot;, x-65536L);\n\nprintf(&quot;%d&quot;, (int) (x-65536));\n\nint y = x-65536;\nprintf(&quot;%d&quot;, y);\n</code></pre>\n<p>Subtracting 65536 works because:</p>\n<ul>\n<li>Per C 2018 6.5.16.1 2, the value of the right operand (a negative 16-bit integer is converted to the type of the assignment expression (which is essentially the type of the left operand).</li>\n<li>Per 6.3.1.3 2, the conversion to an unsigned integer operates by adding or subtracting \u201cone more than the maximum value that can be represented in the new type\u201d. For <code>uint16_t</code>, one more than its maximum is 65536.</li>\n<li>With a 16-bit negative integer, adding 65536 once brings it into the range of a <code>uint16_t</code>.</li>\n<li>Therefore, subtracting 65536 restores the original value.</li>\n</ul>\n<h2>Footnote</h2>\n<p><sup>1</sup> <code>65536</code> will be <code>long</code> or <code>int</code> according to whether <code>int</code> is 16 bits or more, so these statements are careful to handle the type correctly. The first uses <code>65536L</code> to ensure the type is <code>long</code>. The rest convert the value to <code>int</code>. This is safe because, although the type of <code>x-65536</code> could be <code>long</code>, its value fits in an <code>int</code>\u2014unless you are executing in a C implementation that limits <code>int</code> to \u221232767 to +32767, and the original value may be \u221232768, in which case you should stick to the first option.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1550090617, "creation_date": 1550090617, "answer_id": 54679097, "question_id": 54659756, "link": "https://stackoverflow.com/questions/54659756/printing-the-actual-negative-number-stored-inside-unsigned-int/54679097#54679097", "title": "Printing the actual negative number stored inside unsigned int", "body": "<p>If <code>u</code> is an object of unsigned integer type and a negative number whose magnitude is within range of <code>u</code>'s type is stored into it, storing <code>-u</code> to an object of <code>u</code>'s type will leave it holding the magnitude of that negative number.  This behavior does not depend upon how <code>u</code> is represented.  For example, if <code>u</code> and <code>v</code> are 16-bit <code>unsigned short</code>, but <code>int</code> is 32 bits, then storing -60000 into <code>u</code> will leave it holding <code>5536</code> [the implementation will behave as though it adds 65536 to the value stored until it's within range of <code>unsigned short</code>].  Evaluating <code>-u</code> will yield -5536, and storing -5536 into <code>v</code> will leave it holding 60000.</p>\n"}], "owner": {"reputation": 29, "user_id": 11025729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/368c461cd1517e7b5f3f1d777fd3de65?s=128&d=identicon&r=PG&f=1", "display_name": "RockyB", "link": "https://stackoverflow.com/users/11025729/rockyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 54660344, "answer_count": 6, "score": 0, "last_activity_date": 1550090617, "creation_date": 1550011232, "question_id": 54659756, "link": "https://stackoverflow.com/questions/54659756/printing-the-actual-negative-number-stored-inside-unsigned-int", "title": "Printing the actual negative number stored inside unsigned int", "body": "<p>I have a strange problem. I have a variable whose actual value is only negative(only negative integers are generated for this variable). But in the legacy code, an old colleague of mine used uint16 instead of signed int to store the values of that variable. Now if i wanted to print the actual negative value of that variable, how can i do that(what format specifier to us)? For example if actual value is -75, when i print using %d its giving me 5 digit positive value(I think its because of two's complement). I want to print it as 75 or -75. </p>\n"}, {"tags": ["c", "static-variables", "variable-initialization"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550011339, "post_id": 54659658, "comment_id": 96111039, "body": "Is your program multi-threaded or single-threaded?"}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550011384, "post_id": 54659658, "comment_id": 96111055, "body": "@user3386109 - single"}, {"owner": {"reputation": 9286, "user_id": 425756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Jsf1p.jpg?s=128&g=1", "display_name": "Justin Meiners", "link": "https://stackoverflow.com/users/425756/justin-meiners"}, "edited": false, "score": 0, "creation_date": 1550011722, "post_id": 54659658, "comment_id": 96111168, "body": "@StoneThrow then why not have a boolean that flags when it has been called? It would be a global or a static variable in the function itself."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550011980, "post_id": 54659658, "comment_id": 96111256, "body": "And is <code>i</code> actually a variable inside of <code>main</code>, or is <code>i</code> supposed to be in some other function? Note that variables declared in <code>main</code> never need the <code>static</code> keyword, because they always exist for the entire lifetime of the program. So given the code in the question, the solution is simply to remove the <code>static</code> keyword."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "reply_to_user": {"reputation": 9286, "user_id": 425756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Jsf1p.jpg?s=128&g=1", "display_name": "Justin Meiners", "link": "https://stackoverflow.com/users/425756/justin-meiners"}, "edited": false, "score": 1, "creation_date": 1550012035, "post_id": 54659658, "comment_id": 96111268, "body": "@JustinMeiners - this question is from a perspective of academic curiosity: i.e. is there a feature of the <code>C</code> language that allows the equivalent of how <code>C++</code> handles this situation. The answer is apparently no, but as answerers have pointed out, the equivalent can be achieved with a wrapper function and a &quot;guard&quot; variable. Kind of my bad for not being more clear I was looking for a language-native solution, but the answerers did answer my question as stated, so they deserve credit."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550012265, "post_id": 54659658, "comment_id": 96111339, "body": "If <code>i</code> is a static variable in another function, then a &quot;guard&quot; variable is the correct solution."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550012812, "post_id": 54659658, "comment_id": 96111499, "body": "In response to the edit. In addition to being non-portable, jxh&#39;s <code>constructor</code> solution doesn&#39;t actually provide a solution to the problem as stated. Specifically, it cannot be used to initialize a <code>static</code> variable declared at function scope."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1550012927, "post_id": 54659658, "comment_id": 96111530, "body": "@user3386109: I believe the OP was attempting to use static variable initialization semantics as a mechanism to force one time call of a sub-function when the outer function is called."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1550013002, "post_id": 54659658, "comment_id": 96111546, "body": "@jxh - Correct; thank you for expressing that succinctly. I did a bad job of phrasing that."}, {"owner": {"reputation": 9286, "user_id": 425756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Jsf1p.jpg?s=128&g=1", "display_name": "Justin Meiners", "link": "https://stackoverflow.com/users/425756/justin-meiners"}, "edited": false, "score": 0, "creation_date": 1550075036, "post_id": 54659658, "comment_id": 96139248, "body": "@StoneThrow cool, I figured that the fact you knew about pthread_once, didn&#39;t match with the question of whether you could set a boolean :)"}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 2, "last_activity_date": 1550011166, "creation_date": 1550011166, "answer_id": 54659745, "question_id": 54659658, "link": "https://stackoverflow.com/questions/54659658/is-there-a-way-in-c-to-ensure-a-function-is-called-only-once-without-pthread-o/54659745#54659745", "title": "Is there a way, in C, to ensure a function is called only once without pthread_once?", "body": "<p>You can wrap your function in another function which checks a static variable and calls <code>func</code> only if it hasn't been called before as - </p>\n\n<pre><code>static int func_internal() {\n    ...\n}\n\nint func() {\n    static int guard = 0;\n    if (guard)\n        return 0;\n    guard = 1;\n    return func();\n}\n\n</code></pre>\n\n<p>Now, expose only <code>func</code> to other modules. </p>\n"}, {"tags": [], "owner": {"reputation": 562, "user_id": 1922722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39fbebb5bebce94df3a38e3e44649f57?s=128&d=identicon&r=PG", "display_name": "nwn", "link": "https://stackoverflow.com/users/1922722/nwn"}, "is_accepted": false, "score": 1, "last_activity_date": 1550011273, "creation_date": 1550011273, "answer_id": 54659761, "question_id": 54659658, "link": "https://stackoverflow.com/questions/54659658/is-there-a-way-in-c-to-ensure-a-function-is-called-only-once-without-pthread-o/54659761#54659761", "title": "Is there a way, in C, to ensure a function is called only once without pthread_once?", "body": "<p>You can do this with a <code>static</code> flag.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// main.c\n\nint func()\n{\n  return 42;\n}\n\nint main( int argc, char* argv[] )\n{\n    static int initialized = 0;\n    if(!initialized) {\n        func();\n        initialized = 1;\n    }\n}\n</code></pre>\n\n<p>The first time through the calling code, the <code>initialized</code> flag is unset, so the function will be run. For any subsequent calls, the flag is already set and so the function will not be called.</p>\n"}, {"comments": [{"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1550014504, "post_id": 54659772, "comment_id": 96111995, "body": "Thanks for the comprehensive answer. Your first sentence and explanatory paragraph, specifically, is the answer I was looking for."}, {"owner": {"reputation": 431, "user_id": 4307572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20ac2f8894a6ea39b407d9ecfa773f82?s=128&d=identicon&r=PG&f=1", "display_name": "JDune", "link": "https://stackoverflow.com/users/4307572/jdune"}, "edited": false, "score": 0, "creation_date": 1606351881, "post_id": 54659772, "comment_id": 114941548, "body": "I hadn&#39;t thought of the function pointer idea. Now that&#39;s cool!"}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 4, "last_activity_date": 1550013725, "last_edit_date": 1550013725, "creation_date": 1550011366, "answer_id": 54659772, "question_id": 54659658, "link": "https://stackoverflow.com/questions/54659658/is-there-a-way-in-c-to-ensure-a-function-is-called-only-once-without-pthread-o/54659772#54659772", "title": "Is there a way, in C, to ensure a function is called only once without pthread_once?", "body": "<h2>No way to leverage static variable initialization</h2>\n\n<p>Your attempt to leverage static variable initialization will not work. C only allows <code>static</code> variable to be initialized with constants, so a function call is out.</p>\n\n<h2>One shot call of a function at program start (or library load)</h2>\n\n<p>It is not clear why you want the onetime call, but if it's okay to do it at program startup, there is a GCC specific solution.\nYou can assign the <code>constructor</code> attribute to the function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n__attribute__((constructor)) \nvoid func()\n{\n  puts(__func__);\n}\n\nint main () {}\n</code></pre>\n\n<p>This suggestion does not perform your specific ask:</p>\n\n<blockquote>\n  <p>I'm interested in compile-time assurance that func() is only called once from a calling function scope ...</p>\n</blockquote>\n\n<p>Instead, it assures the function is called exactly once when the program starts (or when the library it is a part of is loaded).</p>\n\n<h2>Use a static variable as a guard</h2>\n\n<p>If you need to control when the function is called in the exact way initialization of a static variable local to a function is initialized, then you could use a static variable to track whether your one shot function has been called yet with its own static variable. Other answers have already described how to accomplish this, but for completeness:</p>\n\n<pre><code>void caller_of_func()\n{\n    static bool func_already_called;\n    if (!func_already_called) {\n        func();\n        func_already_called = true;\n    }\n    /*...*/\n}\n</code></pre>\n\n<h2>Use a function pointer!</h2>\n\n<p>Another way to accomplish your goal would be to call the function through a function pointer. The initial call to the function would do the real work, and then switch the function pointer to point to a function that does nothing.</p>\n\n<pre><code>void nothing_func(int *x);\nvoid initial_func(int *x);\nvoid (*func)(int *x) = initial_func;\n\nvoid initial_func(int *x) {\n    *x = 42;\n    puts(__func__);\n    func = nothing_func;\n}\n\nvoid nothing_func(int *x) {\n    puts(__func__);\n}\n\nvoid foo(void) {\n    static int x;\n    func(&amp;x);\n    printf(\"%s: %d\\n\", __func__, x);\n    ++x;\n}\n\nint main(void) {\n    foo();\n    foo();\n}\n</code></pre>\n"}], "owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 54659772, "answer_count": 3, "score": 1, "last_activity_date": 1550013725, "creation_date": 1550010670, "last_edit_date": 1550012554, "question_id": 54659658, "link": "https://stackoverflow.com/questions/54659658/is-there-a-way-in-c-to-ensure-a-function-is-called-only-once-without-pthread-o", "title": "Is there a way, in C, to ensure a function is called only once without pthread_once?", "body": "<p>In <code>C</code>, is there a way to ensure a function is called only once without using <code>pthread_once</code>?</p>\n\n<p>The following works in <code>C++</code> but apparently not in <code>C</code> because initialization of a static variable must be to a constant (as I interpret the compile error)</p>\n\n<pre><code>// main.c\n\nint func()\n{\n  return 42;\n}\n\nint main( int argc, char* argv[] )\n{\n  static int i = func();\n  return 0;\n}\n</code></pre>\n\n<p>I thought using the comma operator might get around this, but that doesn't work either:</p>\n\n<pre><code>// main.c\n\nint func()\n{\n  return 42;\n}\n\nint main( int argc, char* argv[] )\n{\n  static int i = ( func(), 42 );\n  return 0;\n}\n</code></pre>\n\n<p>Compilation of both results in the following compile error:</p>\n\n<pre><code>&gt; gcc -g main.c\nmain.c: In function 'main':\nmain.c:10:18: error: initializer element is not constant\n</code></pre>\n\n<p>Are there any ways to circumvent this and ensure a function is only invoked once (from a calling function scope) without using <code>pthread_once</code>?</p>\n\n<p>To be specific, I don't want to <em>return early from <code>func()</code></em> if it has been called once, I'm interested in compile-time assurance that <code>func()</code> is only <em>called</em> once from a calling function scope - i.e. similar to how <code>C++</code> would handle the above code.<br>\n(In other words, the above code is legal to a <code>C++</code> compiler, which ensures <code>func()</code> is only called once - is there an equivalent way to do this in <code>C</code> without <code>pthread_once</code>?)</p>\n\n<p><strong>EDIT:</strong><br>\nI didn't phrase this ideally in the original post: I was looking for a solution that didn't involve wrapper/helper functions or variables; i.e. I was curious to know if there was a <em>construct in the <code>C</code> language</em> that allowed this situation to be handled equivalently to how it is handled in <code>C++</code>. jxh's solution fits that best, making use of a <code>gcc</code> extension.</p>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 0, "creation_date": 1550013586, "post_id": 54659594, "comment_id": 96111740, "body": "Your choice of <a href=\"https://en.wikipedia.org/wiki/Indent_style\" rel=\"nofollow noreferrer\">indenting style</a> for this code (and inconsistent use of that style) contributed to making the problem with this code not as clear as it might be. Indenting styles exist to make programmer&#39;s jobs easier. It makes spotting issues like this significantly more faster/easier/clearer. I <i>strongly</i> suggest that you get in the habit of consistently using an indenting style. In the programming you do, you will likely end up using multiple different styles, depending on the project, but any project should pick one style and use it consistently."}], "answers": [{"comments": [{"owner": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "edited": false, "score": 0, "creation_date": 1550010780, "post_id": 54659630, "comment_id": 96110842, "body": "The <code>;</code> after <code>else</code> is an empty statement (and thus is treated as a single statement <code>else</code>). I&#39;m surprised the <code>(speed == -1)</code> after it even compiles"}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1550012796, "post_id": 54659630, "comment_id": 96111496, "body": "&quot;else speed = -1;&quot; compiles. &quot;else speed == -1;&quot; compiles but doesn&#39;t modify speed. &quot;else (speed == -1);&quot; compiles just as well. The else branch is a statement expression, unusually formatted, with a useless expression without side effects."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1550010495, "creation_date": 1550010495, "answer_id": 54659630, "question_id": 54659594, "link": "https://stackoverflow.com/questions/54659594/my-while-loop-will-not-repeat-itself-in-c-program/54659630#54659630", "title": "My while-loop will not repeat itself in C program", "body": "<p>The code block here:</p>\n\n<pre><code>else (speed == -1)\n;{\nfinished = 1;\n}\n</code></pre>\n\n<p>Always sets <code>finished</code> to 1. You want either:</p>\n\n<pre><code>else if(speed == -1)\n{\n    finished = 1;\n}\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>else\n{\n    finished = 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1550010727, "creation_date": 1550010727, "answer_id": 54659667, "question_id": 54659594, "link": "https://stackoverflow.com/questions/54659594/my-while-loop-will-not-repeat-itself-in-c-program/54659667#54659667", "title": "My while-loop will not repeat itself in C program", "body": "<p>You wrote:</p>\n\n<pre><code> else (speed == -1)\n;{\n finished = 1;\n }\n</code></pre>\n\n<p>Note the errant semicolon, and the attempt to put a condition on an <code>else</code>!</p>\n\n<p>That's the same as this:</p>\n\n<pre><code>else (speed == -1);\n{\nfinished = 1;\n}\n</code></pre>\n\n<p>&hellip;or this:</p>\n\n<pre><code>else\n{\n   (speed == -1);\n}\n{\n   finished = 1;\n}\n</code></pre>\n\n<p>&hellip;or this:</p>\n\n<pre><code>else\n{\n   speed == -1;\n}\n{\n   finished = 1;\n}\n</code></pre>\n\n<p>&hellip;or this:</p>\n\n<pre><code>else\n{\n   speed == -1;\n}\nfinished = 1;\n</code></pre>\n\n<p>&hellip;or this:</p>\n\n<pre><code>else\n{}\nfinished = 1;\n</code></pre>\n\n<p>&hellip;or this:</p>\n\n<pre><code>finished = 1;\n</code></pre>\n\n<p>In other words, <code>finished</code> is <em>always</em> set to <code>1</code> and your <code>else</code> condition doesn't do anything.</p>\n\n<p>Double check your syntax and read your code more closely!</p>\n"}], "owner": {"reputation": 3, "user_id": 11053366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baedaf0285edd0cb85b583139d94485b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Hermann", "link": "https://stackoverflow.com/users/11053366/chris-hermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1550013316, "accepted_answer_id": 54659630, "answer_count": 2, "score": -3, "last_activity_date": 1550010968, "creation_date": 1550010322, "last_edit_date": 1550010536, "question_id": 54659594, "link": "https://stackoverflow.com/questions/54659594/my-while-loop-will-not-repeat-itself-in-c-program", "closed_reason": "Not suitable for this site", "title": "My while-loop will not repeat itself in C program", "body": "<p>My code is for school and is designed to store speeds of cars entered by users and then find the average speeds of non-speeders &amp; speeders (anything over 65 is speeding). My problem is, every time I run this, it only allows me to enter one speed and then it shows the average which is just the speed itself. I'm looking for it to keep repeating and storing the values until '-1' is entered which should end the loop. Can anyone check out my code and please help.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\nvoid main(void)\n{\nint count1 = 0;\nint count2 = 0;\ndouble speed;\ndouble speeders = 0;\ndouble legals = 0;\ndouble average1;\ndouble average2;\nint finished = 0;\n\nwhile (finished != 1)\n{\n  printf(\"Enter a speed (or -1 to quit):\\n\");\n  scanf(\"%lf\", &amp;speed);\n\n  if (speed &gt; 65)\n {\n  printf(\"SPEEDING\\n\");\n  speeders = speeders + speed;\n  count1++;\n  }\n  else if (speed &gt;= 0 &amp;&amp; speed &lt;= 65)\n  {\n  printf(\"OK\\n\");\n  legals = legals + speed;\n  count2++;\n  }\n  else (speed == -1)\n ;{\n  finished = 1;\n  }\n\n}\n  average1 = speeders / (double)count1;\n  average2 = legals / (double)count2;\n  printf(\"The average speed of the speeders is: %lf, and the average     speed of the non-speeders is: %lf\\n\", average1, average2);\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "malloc", "ulimit"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1550012084, "post_id": 54659551, "comment_id": 96111280, "body": "you want -m don&#39;t you?  -v just limits virtual memory"}, {"owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1550012233, "post_id": 54659551, "comment_id": 96111323, "body": "<code>ulimit -Sm 1</code> still does not cause any problem with <code>realloc()</code>."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1550013983, "post_id": 54659551, "comment_id": 96111830, "body": "What shell are you using on what OS? If I do <code>ulimit -v 1</code> on dash, bash and fish on Linux 4.15 pretty much anything breaks due to failed allocations even before managing to launch your program. For the rest <code>ulimit -v</code> with bigger values works as expected on my machine - keeping in mind that <code>ulimit -v</code> takes a value in KiB, while your program takes it in bytes."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1550014165, "post_id": 54659551, "comment_id": 96111891, "body": "<a href=\"https://unix.stackexchange.com/questions/44985/limit-memory-usage-for-a-single-linux-process\" title=\"limit memory usage for a single linux process\">unix.stackexchange.com/questions/44985/&hellip;</a>"}, {"owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "edited": false, "score": 0, "creation_date": 1550018034, "post_id": 54659551, "comment_id": 96112790, "body": "I use bash on Mac OS X. When call <code>ulimit -v 1</code>, nothing breaks. I am not sure what is wrong."}], "answers": [{"comments": [{"owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "edited": false, "score": 0, "creation_date": 1550011989, "post_id": 54659866, "comment_id": 96111258, "body": "My question is how to make <code>realloc()</code> fail. I don&#39;t think your answer addresses my question."}, {"owner": {"reputation": 148, "user_id": 8333926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041309799337708/picture?type=large", "display_name": "Micha\u0142 Marsza\u0142ek", "link": "https://stackoverflow.com/users/8333926/micha%c5%82-marsza%c5%82ek"}, "reply_to_user": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "edited": false, "score": 0, "creation_date": 1550013204, "post_id": 54659866, "comment_id": 96111617, "body": "I edited my answer to answer your question. But based on your code you should change realloc to malloc and change the title of question. Because you want to fail to allocate memory not to reallocate it."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1550016944, "post_id": 54659866, "comment_id": 96112557, "body": "@Micha\u0142Marsza\u0142ek I am glad to know how to limit it - I have wondered about that in the past.  Just out of curiosity, do you know why ulimit doesn&#39;t stop it from working?"}, {"owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "edited": false, "score": 0, "creation_date": 1550028561, "post_id": 54659866, "comment_id": 96115154, "body": "This works on Linux. But again has no effect on Mac OS X. @Micha\u0142Marsza\u0142ek Why ulimit does not work on Mac and why it cause segment fault on Linux?"}], "tags": [], "owner": {"reputation": 148, "user_id": 8333926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041309799337708/picture?type=large", "display_name": "Micha\u0142 Marsza\u0142ek", "link": "https://stackoverflow.com/users/8333926/micha%c5%82-marsza%c5%82ek"}, "is_accepted": true, "score": 2, "last_activity_date": 1550015237, "last_edit_date": 1550015237, "creation_date": 1550011931, "answer_id": 54659866, "question_id": 54659551, "link": "https://stackoverflow.com/questions/54659551/how-to-limit-available-memory-to-make-malloc-fail/54659866#54659866", "title": "How to limit available memory to make `malloc()` fail?", "body": "<p>Based on documentation:\n<strong>In case that ptr is a null pointer, the function behaves like malloc</strong>, assigning a new block of size bytes and returning a pointer to its beginning</p>\n\n<p>If you want to limit memory that program can allocate you can use:</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\nrlimit l;\ngetrlimit(RLIMIT_AS, &amp;l);\nl.rlim_cur = 1000;\nsetrlimit(RLIMIT_AS, &amp;l);\n</code></pre>\n\n<p><a href=\"http://man7.org/linux/man-pages/man2/setrlimit.2.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man2/setrlimit.2.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8136338, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VaQ37u0P9Kc/AAAAAAAAAAI/AAAAAAAAABs/_lyRAYYYKKQ/photo.jpg?sz=128", "display_name": "Joachim", "link": "https://stackoverflow.com/users/8136338/joachim"}, "is_accepted": false, "score": 1, "last_activity_date": 1576160711, "creation_date": 1576160711, "answer_id": 59306700, "question_id": 54659551, "link": "https://stackoverflow.com/questions/54659551/how-to-limit-available-memory-to-make-malloc-fail/59306700#59306700", "title": "How to limit available memory to make `malloc()` fail?", "body": "<p>The memory limit of 1MB is not big enough to reach the actual malloc call. On my linux system alone libc is 2MB. So 1MB is not enough memory to completely load the application and even reach the main function.</p>\n\n<p>For me, using <code>ulimit -v 5000</code> is sufficient to print the <code>malloc(): Cannot allocate memory</code> message.</p>\n"}], "owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 54659866, "answer_count": 2, "score": 5, "last_activity_date": 1576160711, "creation_date": 1550010087, "last_edit_date": 1550018675, "question_id": 54659551, "link": "https://stackoverflow.com/questions/54659551/how-to-limit-available-memory-to-make-malloc-fail", "title": "How to limit available memory to make `malloc()` fail?", "body": "<p>I'd like to make <code>malloc()</code> fail by limiting the memory available.</p>\n\n<pre><code>$ ulimit -v 1000\n$ ./main.exe 10000000\n0x102bfb000\n</code></pre>\n\n<p>But even with ulimit, the following program still finishes correctly. Does anybody know how to make <code>malloc()</code> fail? Thanks.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[]) {\n    size_t size = atoi(argv[1]);\n    void *ptr = NULL;\n\n    if((ptr = malloc(size)) == NULL) {\n        perror(\"malloc()\");\n        exit(1);\n    }\n\n    printf(\"%p\\n\", ptr);\n    free(ptr);\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: The above is on Mac OS X.</p>\n\n<p>On Linux, I got segmentation fault. Why <code>malloc()</code> can cause segmentation fault? How to make <code>malloc()</code> return a NULL pointer?</p>\n"}, {"tags": ["c", "string", "strcat"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1550009364, "post_id": 54659294, "comment_id": 96110353, "body": "You use <code>strncat()</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1550009721, "post_id": 54659294, "comment_id": 96110470, "body": "^ note that <code>strncat</code> is often used incorrectly. The third parameter is the maximum number of characters to <i>read</i> from the source, excluding the null terminator.  It&#39;s not the dest buffer size, nor the dest buffer remaining size."}], "answers": [{"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1550009424, "creation_date": 1550009424, "answer_id": 54659419, "question_id": 54659294, "link": "https://stackoverflow.com/questions/54659294/the-correct-way-to-use-strcat-when-the-destation-does-not-have-enough-space/54659419#54659419", "title": "The correct way to use `strcat()` when the destation does not have enough space?", "body": "<p>If <code>s1</code> does not contain sufficient space to hold <code>strlen(s1) + strlen(s2) + 1</code>, trying to use <code>strcat(s1, s2)</code> has undefined behavior.</p>\n\n<p>There's no internal checking in <code>strcat</code> for a buffer overflow of <code>s1</code>. If you overflow, you overflow. However, there are some platform-specific alternatives which if used correctly can reduce the risk of overflow. As a Windows developer I prefer <code>StringCchCat</code> and <code>StringCbCat</code> in <a href=\"https://en.wikipedia.org/wiki/Strsafe.h\" rel=\"nofollow noreferrer\"><code>&lt;strsafe.h&gt;</code></a>.</p>\n\n<p>If you want to guarantee safety for <code>strcat</code>, you can wrap it yourself. Something like:</p>\n\n<pre><code>int safe_strcat(char *s1, char *s2, size_t s1_size)\n{\n    if (strlen(s1) + strlen(s2) + 1 &gt; s1_size)\n    {\n        return 0;\n    }\n    strcat(s1, s2);\n    return 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1550010756, "post_id": 54659455, "comment_id": 96110830, "body": "No you can&#39;t. There&#39;s no guarantee that <code>s1</code> is dynamic memory in the first place, and even if it was, the caller will never know about the <code>realloc()</code>."}, {"owner": {"reputation": 138, "user_id": 10911242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d36edcc94a17d299b872b1e38afecd?s=128&d=identicon&r=PG&f=1", "display_name": "risbo", "link": "https://stackoverflow.com/users/10911242/risbo"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1550018538, "post_id": 54659455, "comment_id": 96112919, "body": "Of course it works only for dynamic allocated space. Before calling strcat programmer have to check for sizes of strings and available space and reallocate s1 if need more."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 0, "creation_date": 1550039905, "post_id": 54659455, "comment_id": 96118467, "body": "If you already know the size of <code>s1</code> you should be using <code>strcpy(&amp;s1[len1], ..</code> and shouldn&#39;t use <code>strcat()</code> at all  (so that CPU doesn&#39;t need to search through all the chars in <code>s1</code> for no reason). If you know the size of both <code>s1</code> and <code>s2</code> (which you need to know to <code>realloc()</code>) then you should be using <code>memcpy()</code>."}, {"owner": {"reputation": 138, "user_id": 10911242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d36edcc94a17d299b872b1e38afecd?s=128&d=identicon&r=PG&f=1", "display_name": "risbo", "link": "https://stackoverflow.com/users/10911242/risbo"}, "edited": false, "score": 0, "creation_date": 1550056336, "post_id": 54659455, "comment_id": 96127611, "body": "Question is about how to handle situation where one use strcat and need more space in destination string. Basically, we have few options:  add space if possible, break code  execution with error status reported to calling function or  simply terminate. If you use other idioms to string concatenation instead of strcat, it is not answer for the question."}], "tags": [], "owner": {"reputation": 138, "user_id": 10911242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d36edcc94a17d299b872b1e38afecd?s=128&d=identicon&r=PG&f=1", "display_name": "risbo", "link": "https://stackoverflow.com/users/10911242/risbo"}, "is_accepted": false, "score": -1, "last_activity_date": 1550009579, "creation_date": 1550009579, "answer_id": 54659455, "question_id": 54659294, "link": "https://stackoverflow.com/questions/54659294/the-correct-way-to-use-strcat-when-the-destation-does-not-have-enough-space/54659455#54659455", "title": "The correct way to use `strcat()` when the destation does not have enough space?", "body": "<p>It is responsibility of programmer to know size of s1. If you don't have enough space you can call realloc(s1,num_of_bytes) to allocate more space.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1550036082, "last_edit_date": 1550036082, "creation_date": 1550035350, "answer_id": 54663068, "question_id": 54659294, "link": "https://stackoverflow.com/questions/54659294/the-correct-way-to-use-strcat-when-the-destation-does-not-have-enough-space/54663068#54663068", "title": "The correct way to use `strcat()` when the destation does not have enough space?", "body": "<p><code>strcat(s1, s2);</code> can lead to overflow so the precaution \"The string s1 must have sufficient space to hold the result.\" is warranted.</p>\n\n<p>Assume <code>s1</code> can hold <code>N</code> characters: <code>N-1</code> non-<code>'\\0'</code> + the <em>null character</em>. </p>\n\n<blockquote>\n  <p>The correct way to use <code>strcat()</code> when the destination does not have enough space?</p>\n</blockquote>\n\n<p>When the concatenation may overflow, I see no application to use <code>strcat()</code>.  Instead use other functions.</p>\n\n<hr>\n\n<p>To detect potential overflow:</p>\n\n<ol>\n<li><p>Test <code>strlen(s1), strlen(s2)</code> prior to the call.</p>\n\n<pre><code>size_t l1 = strlen(s1);\nassert(l1 &lt; N); // This really should be true already.\nN -= l1;\nsize_t l2 = strlen(s2);\nif (l1 &gt;= N) Handle_TooBigSomehow();\nstrcpy(s1 + l1, s2);\n</code></pre></li>\n<li><p>Use <code>strncat(char * restrict s1, const char * restrict s2, size_t n)</code></p></li>\n</ol>\n\n<p>Note that <code>n</code> here is <strong>not</strong> <code>N</code>: the size available to <code>s1</code>.</p>\n\n<blockquote>\n  <p>The <code>strncat</code> function appends not more than <code>n</code> characters (a null character and\n  characters that follow it are not appended) from the array pointed to by <code>s2</code> to the end of the string pointed to by <code>s1</code>. The initial character of <code>s2</code> overwrites the null character at the end of <code>s1</code>. A terminating null character is always appended to the result. C11  \u00a77.23.3.2 2</p>\n</blockquote>\n\n<pre><code>    size_t l1 = strlen(s1);\n    assert(l1 &lt; N); // This really should be true already.\n    strncat(s1, s2, N - 1 - l1);\n    // or faster\n    strncat(s1 + l1, s2, N - 1 - l1);\n</code></pre>\n\n<p>Unfortunately there is no  clear indication that there was insufficient space, yet at least there is no overflow and <code>s1</code> is null character terminated.</p>\n"}], "owner": {"reputation": 6964, "user_id": 1424739, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/19d3c927744b5ad3b94afbf88e1c3844?s=128&d=identicon&r=PG", "display_name": "user1424739", "link": "https://stackoverflow.com/users/1424739/user1424739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1550036082, "creation_date": 1550008805, "last_edit_date": 1550010157, "question_id": 54659294, "link": "https://stackoverflow.com/questions/54659294/the-correct-way-to-use-strcat-when-the-destation-does-not-have-enough-space", "title": "The correct way to use `strcat()` when the destation does not have enough space?", "body": "<p><code>man strcat</code> says the following.</p>\n\n<pre><code>char *strcat(char *restrict s1, const char *restrict s2);\n</code></pre>\n\n<blockquote>\n  <p>The string s1 must have sufficient space to hold the result.</p>\n</blockquote>\n\n<p>What is the correct way to handle the situation when <code>s1</code> does not have enough space?</p>\n"}, {"tags": ["c", "linked-list", "singly-linked-list"], "answers": [{"tags": [], "owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "is_accepted": false, "score": 1, "last_activity_date": 1550009023, "creation_date": 1550009023, "answer_id": 54659335, "question_id": 54659283, "link": "https://stackoverflow.com/questions/54659283/insert-an-element-in-a-sorted-linked-list/54659335#54659335", "title": "insert an element in a sorted linked list", "body": "<p>You are returning pointer from <code>insert()</code> so proper signature is</p>\n\n<pre><code>node* insert(node *head,int x)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 10911242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d36edcc94a17d299b872b1e38afecd?s=128&d=identicon&r=PG&f=1", "display_name": "risbo", "link": "https://stackoverflow.com/users/10911242/risbo"}, "is_accepted": false, "score": 1, "last_activity_date": 1550016693, "creation_date": 1550016693, "answer_id": 54660615, "question_id": 54659283, "link": "https://stackoverflow.com/questions/54659283/insert-an-element-in-a-sorted-linked-list/54660615#54660615", "title": "insert an element in a sorted linked list", "body": "<p>Here is an example of linked list, hope will help you. It contains functions for insert, add and print a node. In main function you can find how to scan list without recursion. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;memory.h&gt;\n\n\ntypedef struct tagNode\n{\n   int number;\n   struct tagNode *next; \n} NODE;\n\n\ntypedef struct tagList\n{\n    NODE *head;   /* pointer to first node in list */\n    NODE *last;   /* pointer to last node in list */\n} LIST;\n\n\n\n/* func proto's */\nNODE* create_node();\nNODE* insert_node(LIST* l,NODE *p, int n);\nNODE* add_node(LIST* l, NODE *p, int n);\nvoid print_node(NODE *p);\n\n\nint main()\n{ \n  LIST list = {NULL,NULL}; /* init list with NULLs */\n\n    /* add some nodes to list */    \n    for( int i = 0; i &lt; 10 ; i++ )\n    {\n       add_node(&amp;list, create_node(),i * 5 );\n    }\n\n    NODE* p = list.head;\n    for( ;p != NULL; p = p-&gt;next )\n    {\n       print_node(p);\n    }\n\n    /* insert some nodes */\n    insert_node(&amp;list, create_node(),33);\n    insert_node(&amp;list, create_node(),23);\n    insert_node(&amp;list, create_node(),13);\n\n    /* print list after inserts */\n    for(p = list.head; p != NULL; p = p-&gt;next )\n    {\n       print_node(p);\n    }\n}\n\n\n/* create empty node */\nNODE* create_node()\n{\n  NODE *p = malloc(sizeof(NODE));\n  p-&gt;next = NULL;\n  p-&gt;number = 0;\n}\n\n/* add node to end of list */\nNODE* add_node(LIST* list, NODE* p, int num)\n{ \n  if(list-&gt;last == NULL )\n  { \n     printf(\"add first\\n\");\n     list-&gt;last = p;\n     list-&gt;head = p;\n     p-&gt;number = num;\n  }\n  else if( list-&gt;last-&gt;number &lt; num )\n  { \n    printf(\"add num %d\\n\",num);\n    list-&gt;last-&gt;next = p;\n    list-&gt;last = p;\n    p-&gt;number  = num;\n    p-&gt;next = NULL; /* terminate list */\n  }\n  return list-&gt;last;\n}\n\nvoid print_node(NODE *p)\n{ \n    printf(\"node number: %d\\n\",p-&gt;number);\n}\n\nNODE* insert_node(LIST* l, NODE *q,int num)\n{ \n    /* scan list ... */ \n    for( NODE* p = l-&gt;head;p != NULL; p = p-&gt;next )\n    {  \n        if( p-&gt;next-&gt;number &gt; num )\n        {\n            q-&gt;next = p-&gt;next;\n            p-&gt;next = q; \n            q-&gt;number = num;\n            return q;  /* indicate success */\n        }        \n    } \n    return NULL;  /* indicate failure */\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11029794, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qMSAAYGJjww/AAAAAAAAAAI/AAAAAAAAAkA/otRHDC5hjxw/photo.jpg?sz=128", "display_name": "Amine Sadali", "link": "https://stackoverflow.com/users/11029794/amine-sadali"}, "edited": false, "score": 0, "creation_date": 1550063656, "post_id": 54669811, "comment_id": 96131916, "body": "it works even if the insert fonction return nothing , i have no idea why !"}], "tags": [], "owner": {"reputation": 1, "user_id": 11029794, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qMSAAYGJjww/AAAAAAAAAAI/AAAAAAAAAkA/otRHDC5hjxw/photo.jpg?sz=128", "display_name": "Amine Sadali", "link": "https://stackoverflow.com/users/11029794/amine-sadali"}, "is_accepted": false, "score": 0, "last_activity_date": 1550059527, "creation_date": 1550059527, "answer_id": 54669811, "question_id": 54659283, "link": "https://stackoverflow.com/questions/54659283/insert-an-element-in-a-sorted-linked-list/54669811#54669811", "title": "insert an element in a sorted linked list", "body": "<p>thanks guys for your help, it worked ! here's the correct version of it</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define NULL 0\n\n\nstruct linked_list\n{\n    int number;\n    struct linked_list *next;\n};\n\ntypedef struct linked_list node;\n\nint main()\n{\n    int n;\n    node *head;\n    void create(node *p);\n    node *insert(node *p, int n);\n    void print(node *p);\n    head= (node *)malloc(sizeof(node));\n    create(head);\n    printf(\"\\n\");\n    printf  (\"original list : \");\n    print(head);\n    printf(\"\\n\\n\");\n    printf(\"input the number to be inserted: \");\n    scanf(\"%d\",&amp;n);\n    head=insert(head, n);\n    printf(\"\\n\");\n    printf(\"new list after insertion : \");\n    print(head);\n    return 0;\n}\n\nvoid create(node *list)\n{\n    printf(\"input a number : \\n\");\n    printf(\"(type -999 at the end): \");\n    scanf(\"%d\", &amp;list-&gt;number);\n    if(list-&gt;number == -999)\n        {list-&gt;next= NULL;}\n    else\n        {list-&gt;next=(node *)malloc(sizeof(node));\n        create(list-&gt;next);}\n    return;\n}\n\nvoid print(node *list)\n{\n    while(list-&gt;next != NULL)\n    {\n        printf(\"%d-&gt;\",list-&gt;number);\n        list= list-&gt;next;\n\n    }\n    return;\n}\n\nnode *insert(node *head,int x)\n{\n    node *p1,*p2,*p;\n    p1=NULL;\n    p2=head;\n    for(;p2-&gt;number&lt;x;p2=p2-&gt;next)\n    {\n        p1=p2;\n        if(p2-&gt;next-&gt;next==NULL)\n        {p2=p2-&gt;next;\n            break;\n        }\n    }\n    p=(node *)malloc(sizeof(node));\n    p-&gt;number=x;\n    p-&gt;next=p2;\n    if(p1==NULL)\n    {\n        head=p;\n    }\n    else\n    {\n        p1-&gt;next=p;\n\n\n    return head;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 10911242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d36edcc94a17d299b872b1e38afecd?s=128&d=identicon&r=PG&f=1", "display_name": "risbo", "link": "https://stackoverflow.com/users/10911242/risbo"}, "is_accepted": true, "score": 0, "last_activity_date": 1550065678, "creation_date": 1550065678, "answer_id": 54671728, "question_id": 54659283, "link": "https://stackoverflow.com/questions/54659283/insert-an-element-in-a-sorted-linked-list/54671728#54671728", "title": "insert an element in a sorted linked list", "body": "<p>In \"insert\" function you have return statement in else block, so it will return head only if p1 is not equal NULL:</p>\n\n<pre><code>if(p1==NULL)\n{\n    head=p;\n}\nelse\n{\n    p1-&gt;next=p;\nreturn head;\n}\n</code></pre>\n\n<p>Move  return statement after the \"}\" of else block and function will return head pointer properly.</p>\n"}], "owner": {"reputation": 1, "user_id": 11029794, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qMSAAYGJjww/AAAAAAAAAAI/AAAAAAAAAkA/otRHDC5hjxw/photo.jpg?sz=128", "display_name": "Amine Sadali", "link": "https://stackoverflow.com/users/11029794/amine-sadali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 54671728, "answer_count": 4, "score": -1, "last_activity_date": 1550065678, "creation_date": 1550008763, "last_edit_date": 1550008810, "question_id": 54659283, "link": "https://stackoverflow.com/questions/54659283/insert-an-element-in-a-sorted-linked-list", "title": "insert an element in a sorted linked list", "body": "<p>can some one help me debug this program, i'm a beginner and couldn't find the solution, i receive the error: </p>\n\n<pre><code>incompatible types when returning type 'node * {aka struct linked_list *}' but 'node {aka struct linked_list}' was expected\n</code></pre>\n\n<p>this programe insert an element in a sorted linked list</p>\n\n<pre><code>struct linked_list\n{\n    int number;\n    struct linked_list *next;\n};\n\ntypedef struct linked_list node;\n\nint main()\n{\n    int n;\n    node *head;\n    void create(node *p);\n    node insert(node *p, int n);\n    void print(node *p);\n    head= (node *)malloc(sizeof(node));\n    create(head);\n    printf(\"\\n\");\n    printf(\"original list : \");\n    print(head);\n    printf(\"\\n\\n\");\n    printf(\"input the number to be inserted: \");\n    scanf(\"%d\",&amp;n);\n    head=insert(head, n);\n    printf(\"\\n\");\n    printf(\"new list after insertion : \");\n    print(head);*/\n    return 0;\n}\n\nvoid create(node *list)\n{\n    printf(\"input a number : \\n\");\n    printf(\"type -999 at the end\");\n    scanf(\"%d\", &amp;list-&gt;number);\n    if(list-&gt;number == 999)\n        list-&gt;next= NULL;\n    else\n        list-&gt;next=(node*)malloc(sizeof(node));\n        create(list-&gt;next);\n    return;\n}\n\nvoid print(node *list)\n{\n    while(list-&gt;next != 0)\n    {\n        printf(\"%d\",list-&gt;number);\n        list= list-&gt;next;\n\n    }\n    return;\n}\n\nnode insert(node *head,int x)\n{\n    node *p1,*p2,*p;\n    p1=NULL;\n    p2=head;\n    for(;p2-&gt;number&lt;x;p2=p2-&gt;next)\n    {\n        p1=p2;\n        if(p2-&gt;next==NULL)\n            p2=p2-&gt;next;\n            break;\n    }\n    p=(node*)malloc(sizeof(node));\n    p-&gt;number=x;\n    p-&gt;next=p2;\n    if(p1==NULL)\n    {\n        head=p;\n    }\n    else\n    {\n        p1-&gt;next=p;\n        return head;\n}\n</code></pre>\n\n<p>node insert(node *head,int x) don't work propely what should it return ?                                                                                 </p>\n"}, {"tags": ["c", "error-handling"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1550008327, "post_id": 54659166, "comment_id": 96109975, "body": "Yes, it has a memory leak if <code>src</code> is <code>NULL</code>."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1550008442, "creation_date": 1550008442, "answer_id": 54659213, "question_id": 54659166, "link": "https://stackoverflow.com/questions/54659166/is-there-something-wrong-in-the-error-handling-of-this-function/54659213#54659213", "title": "Is there something wrong in the error handling of this function?", "body": "<p>Right now you're handling both a NULL parameter value and a NULL return from <code>malloc</code> the same way.  You probably want to do something different for each of them.</p>\n\n<p>In the case that <code>src</code> is NULL, it most likely makes sense to return NULL from the function.  If <code>malloc</code> returns NULL however, that typically means something went very wrong and the program should <code>exit</code>.</p>\n\n<pre><code>Node * node_copy(const Node * src) {\n    Node *nodeCopy;\n\n    if (!src)\n        return NULL;\n\n    nodeCopy = malloc(sizeof (Node));\n    if (!nodeCopy) {\n        perror(\"malloc failed\");\n        exit(1);\n    }\n\n    nodeCopy-&gt;id = src-&gt;id;\n    nodeCopy-&gt;nConnect = src-&gt;nConnect;\n    strcpy (nodeCopy-&gt;name, src-&gt;name);\n\n    return nodeCopy;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 11053133, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FZHTuXw9dTc/AAAAAAAAAAI/AAAAAAAAD30/uXKnpKcgjSU/photo.jpg?sz=128", "display_name": "XuChen", "link": "https://stackoverflow.com/users/11053133/xuchen"}, "edited": false, "score": 0, "creation_date": 1550009981, "post_id": 54659224, "comment_id": 96110561, "body": "Oh, ok, I haven&#39;t realised that. Thank you very much."}], "tags": [], "owner": {"reputation": 1631, "user_id": 10730242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTo3N.jpg?s=128&g=1", "display_name": "manveti", "link": "https://stackoverflow.com/users/10730242/manveti"}, "is_accepted": false, "score": 1, "last_activity_date": 1550008499, "creation_date": 1550008499, "answer_id": 54659224, "question_id": 54659166, "link": "https://stackoverflow.com/questions/54659166/is-there-something-wrong-in-the-error-handling-of-this-function/54659224#54659224", "title": "Is there something wrong in the error handling of this function?", "body": "<p>If <code>src</code> is null, you'll leak the memory you allocated for <code>nodeCopy</code>. Checking <code>src</code> before you allocate the memory will avoid this.</p>\n\n<p>Also, if this were production code, you'd have trouble generating a reasonable error message there without splitting it into two separate checks anyway.</p>\n"}], "owner": {"reputation": 77, "user_id": 11053133, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FZHTuXw9dTc/AAAAAAAAAAI/AAAAAAAAD30/uXKnpKcgjSU/photo.jpg?sz=128", "display_name": "XuChen", "link": "https://stackoverflow.com/users/11053133/xuchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550008499, "creation_date": 1550008186, "question_id": 54659166, "link": "https://stackoverflow.com/questions/54659166/is-there-something-wrong-in-the-error-handling-of-this-function", "title": "Is there something wrong in the error handling of this function?", "body": "<p>Is there something wrong in the error handling of this function? Specifically, I guess in these 2 lines: </p>\n\n<pre><code>if (!src || !nodeCopy)\n    return NULL;\n</code></pre>\n\n<p>Is it correct to check that two pointers at once?</p>\n\n<p>I sent my program to my teacher and he said the error handling was wrong in some functions, in example this.</p>\n\n<p><strong>This code is written in C</strong></p>\n\n<pre><code>Node * node_copy(const Node * src) {\n\nNode *nodeCopy;\n\nnodeCopy = (Node*) malloc (sizeof (Node));\n\nif (!src || !nodeCopy)\n    return NULL;\n\nnodeCopy-&gt;id = src-&gt;id;\nnodeCopy-&gt;nConnect = src-&gt;nConnect;\nstrcpy (nodeCopy-&gt;name, src-&gt;name);\n\nreturn nodeCopy;\n}\n</code></pre>\n"}]