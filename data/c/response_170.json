[{"tags": ["c", "go", "memory", "indexing", "malloc"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1523490272, "post_id": 49785854, "comment_id": 86587234, "body": "So which line is it telling you has the error? Have you stepped through there with a debugger to see what the values are?"}, {"owner": {"reputation": 366, "user_id": 5228646, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6Vc3O.png?s=128&g=1", "display_name": "JeanP", "link": "https://stackoverflow.com/users/5228646/jeanp"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1523490715, "post_id": 49785854, "comment_id": 86587337, "body": "Ill update the original with the lines. I thought i did but i guess I overlooked it."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1523491514, "post_id": 49785854, "comment_id": 86587535, "body": "Yeah, row_ptr is length 0. Also, it has no values in it when you read from it."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1523493968, "post_id": 49785854, "comment_id": 86588011, "body": "you should probably be using a for loop with the range option for your golang code.  Something like this <code>for i, mcap := range y {</code>"}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 5228646, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6Vc3O.png?s=128&g=1", "display_name": "JeanP", "link": "https://stackoverflow.com/users/5228646/jeanp"}, "edited": false, "score": 0, "creation_date": 1523546161, "post_id": 49787505, "comment_id": 86615087, "body": "This doesn&#39;t really help since im just using the dense matrix format thats all. I created the MVP functions myself."}, {"owner": {"reputation": 133105, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "reply_to_user": {"reputation": 366, "user_id": 5228646, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6Vc3O.png?s=128&g=1", "display_name": "JeanP", "link": "https://stackoverflow.com/users/5228646/jeanp"}, "edited": false, "score": 0, "creation_date": 1523559721, "post_id": 49787505, "comment_id": 86622752, "body": "@JeanP:  Some people are not going to look at problems with obsolete packages."}], "tags": [], "owner": {"reputation": 133105, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": false, "score": 0, "last_activity_date": 1523503690, "creation_date": 1523503690, "answer_id": 49787505, "question_id": 49785854, "link": "https://stackoverflow.com/questions/49785854/translating-c-to-golang-how-do-i-allocate-memory-to-match-c/49787505#49787505", "title": "Translating C to Golang. How do I allocate memory to match C?", "body": "<p>You are using <code>github.com/gonum/matrix/mat64</code>. It's obsolete:</p>\n\n<blockquote>\n  <p><a href=\"https://github.com/gonum/matrix/\" rel=\"nofollow noreferrer\">https://github.com/gonum/matrix/</a></p>\n  \n  <p>Gonum Matrix</p>\n  \n  <p>This repository is no longer maintained. Development has moved to\n  <a href=\"https://github.com/gonum/gonum\" rel=\"nofollow noreferrer\">https://github.com/gonum/gonum</a>.</p>\n</blockquote>\n"}], "owner": {"reputation": 366, "user_id": 5228646, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6Vc3O.png?s=128&g=1", "display_name": "JeanP", "link": "https://stackoverflow.com/users/5228646/jeanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523503690, "creation_date": 1523489667, "last_edit_date": 1523490832, "question_id": 49785854, "link": "https://stackoverflow.com/questions/49785854/translating-c-to-golang-how-do-i-allocate-memory-to-match-c", "title": "Translating C to Golang. How do I allocate memory to match C?", "body": "<p>So I am in the process of translating a program I created in C. The goal of this program is to simply read a Matrix from a file, Compress the matrix in sparse row format, then calculate the matrix-vector product.</p>\n\n<p>Here is a snippet of the program in C.</p>\n\n<pre><code>//Read the MatrixMarket file and initialize a CSR formatted matrix.\ncsr_load_matrix(fileName, &amp;compressedSparseMatrix);\n//Set the correct values to the struct and create the memory allocation.\ndouble *x;\ndouble *y;\n\nx = malloc(compressedSparseMatrix.cols * sizeof(double));\ny = malloc(compressedSparseMatrix.rows * sizeof(double));\n\n//initialize the vector x\nfor(int i = 0; i &lt; compressedSparseMatrix.cols; i++){\n    x[i]= i+1;\n}\n\n//Calculate how long it takes to find the Matrix-Vector Product for the CSR Matrix.\n//Start the timer.\nclock_t begin = clock();\nfor (int i = 0; i &lt; iterations; i++) {\n    csrMVP(&amp;compressedSparseMatrix, x, y);\n}\nclock_t end = clock();\ndouble totalTimeSpent = (double) (end - begin) / CLOCKS_PER_SEC;\n</code></pre>\n\n<p>This is my Main.c and my csrMVP function is attached below:</p>\n\n<pre><code>int csrMVP(CSR_Matrix *funcMatrix, double *x, double *y){\n    unsigned int i, j;\n    unsigned int k = 0;\n    double *value = funcMatrix-&gt;val;\n    unsigned int *column = funcMatrix-&gt;col;\n    unsigned int *rowPointer = funcMatrix-&gt;ptr;\n    double hold;\n    for(i = 0; i &lt; funcMatrix-&gt;rows; i++){\n        hold = 0.0;\n        j = k;\n        k = rowPointer[i+1];\n        for(j; j &lt; k; j++){\n            y[i] = y[i] + value[j] * x[i];\n        }\n\n    }\n}\n</code></pre>\n\n<p>My program runs perfectly in C. The idea here is that I want to calculate the MVP 1000 times and see how fast/slow my compiler can do it.</p>\n\n<p>So now My next goal is to use concurrency in GoLang to compare how fast Golang can execute the MVP process 1000 times.</p>\n\n<p>Here is the start of my Golang program: (for the sake of space pretend <code>[]float64{...}</code> is a big matrix.)</p>\n\n<pre><code>func main(){\n    var interation int\n\n    m := mat64.NewDense(32, 32, []float64{...})\n\n    //csr_print_matrix(m)\n    //m.CSRPrint()\n\n    //var y []float64\n    y := make([]float64, 32)\n    x := make([]int, 32)\n    for i := range x {\n        x[i] = i + 1\n    }\n\n    interation = 2\n    start := time.Now()\n    for i := 0; i &lt; interation; i ++ {\n        m.CSRMVP(x, y)\n    }\n    elapsed := time.Since(start)\n    log.Printf(\"Matrix took %s\", elapsed)\n\n\n}\n</code></pre>\n\n<p>And my m.CSRMVP() func is:</p>\n\n<pre><code>func (m *Dense) CSRMVP(x []int, y []float64){\n    fmt.Println(\"Value of Y:\")\n    var j,end, newY int\n    var values []float64\n    var col_indices, row_ptr []int\n    values = m.mat.Data\n    end = 0\n\n    for i := 0; i &lt; m.capCols; i++{\n        y[i] = 0.0\n        newY = int(y[i])\n        j = end\n        end = row_ptr[i+1]\n        for ; j &lt; end; j++ {\n            newY = newY + int(values[j]) * x[col_indices[j]]\n            fmt.Print(newY)\n            y[i] = float64(newY)\n        }\n    }\n}\n</code></pre>\n\n<p>The issue appears to be a memory allocation problem with passing variables x and y.</p>\n\n<p>This is the output of my program running MVP just once.</p>\n\n<pre><code>panic: runtime error: index out of range\n\ngoroutine 1 [running]:\ngithub.com/gonum/matrix/mat64.(*Dense).CSRMVP(0xc42001e100, 0xc420055d50, 0x20, 0x20, 0xc420055e50, 0x20, 0x20)\n    /Users/jeanmac/go/src/github.com/gonum/matrix/mat64/dense.go:573 +0x215\nmain.main()\n    /Users/jeanmac/go/src/matrices/main.go:75 +0x16c\n</code></pre>\n\n<p>I am still learning Go as I go along. My goal was just to see what's faster. I believe my error is due to incorrect memory allocation for x and y. in C I call Malloc to create the memory I need for these variables and im not sure what the alternative is for Go.</p>\n\n<p>Line 573 in dense.go corresponding: \n<code>end = row_ptr[i+1]</code>\nLine 75 in main.go corresponding:\n<code>m.CSRMVP(x, y)</code> </p>\n"}, {"tags": ["c", "string", "printf", "uppercase", "lowercase"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1523489070, "post_id": 49785732, "comment_id": 86586931, "body": "Nice <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, +1, just missing header."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1523489216, "post_id": 49785732, "comment_id": 86586979, "body": "<code>if(str[i] &gt;=&#39;A&#39; &amp;&amp; str[i] &lt;=&#39;Z&#39;) {</code> is easier to read for humans."}, {"owner": {"reputation": 23, "user_id": 9420813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alexandre Carvalho", "link": "https://stackoverflow.com/users/9420813/alexandre-carvalho"}, "edited": false, "score": 0, "creation_date": 1523489230, "post_id": 49785732, "comment_id": 86586987, "body": "I&#39;m sorry already changed it."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1523489370, "post_id": 49785732, "comment_id": 86587031, "body": "Why do you fork ?"}, {"owner": {"reputation": 23, "user_id": 9420813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alexandre Carvalho", "link": "https://stackoverflow.com/users/9420813/alexandre-carvalho"}, "edited": false, "score": 0, "creation_date": 1523489500, "post_id": 49785732, "comment_id": 86587068, "body": "I use fork because the objective is for the first process to read input and print the output, while the second one is used to change the letter, but since i have this error I still haven&#39;t implemented that."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1523489823, "post_id": 49785732, "comment_id": 86587134, "body": "@AlexandreCarvalho Process don&#39;t share memory like thread, you will need semaphore to do that or pipe."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523505113, "post_id": 49785732, "comment_id": 86590419, "body": "all that &#39;obscure&#39; code.  Why not use the facilities in the header file: <code>ctype.h</code>?  I.E. <code>isupper()</code> <code>islower()</code>  <code>toupper()</code> <code>tolower()</code>,"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523505249, "post_id": 49785732, "comment_id": 86590445, "body": "regarding: <code>char str[49];         while(fgets(str, 50, stdin) != NULL) {</code>  This has undefined behavior.  A possible fix: `char str[ 49 ];         while( fgets( str, sizeof(str), stdin ) ) {"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523505393, "post_id": 49785732, "comment_id": 86590477, "body": "regarding: <code>for(int i = 0; i &lt; strlen(str); i++) {</code>  this is comparing a signed int to a unsigned long int.  That is not a dependable comparison.  Suggest:  <code>for( size_t i = 0; i &lt; strlen(str); i++) {</code> because the function: <code>strlen()</code> returns a <code>size_t</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523505687, "post_id": 49785732, "comment_id": 86590553, "body": "the function: <code>fork()</code> has three kinds of return values:  &lt;0 means an error occurred.  ==0 means in the child process.  &gt;0 means in the parent process.  All three conditions should be checked.  And when in the parent process, should call <code>wait()</code> or <code>waitpid()</code> so the parent does not exit first,  If the parent does exit first, then the child (on most systems) becomes a &#39;zombie&#39; process that is very difficult to kill other than to reboot the computer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523505938, "post_id": 49785732, "comment_id": 86590629, "body": "the array: <code>newstr[]</code> is not being NUL terminated, so the call to <code>printf()</code> will result in undefined behavior."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523506111, "post_id": 49785732, "comment_id": 86590677, "body": "this statement: <code>for(int i = 0; i &lt; strlen(str); i++) {</code>  would be better written as: `for( int i = 0; str[i]; i++ ) {"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523506244, "post_id": 49785732, "comment_id": 86590713, "body": "suggest changing this statement: <code>char newstr[49];</code>  to `char newstr[49] = {&#39;\\0&#39;};"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523506724, "post_id": 49785732, "comment_id": 86590838, "body": "When no more input lines are available, then no call to <code>fork()</code> is made however, these two statements are still being executed: `while(wait(NULL)&gt;0);     return 0;"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9420813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alexandre Carvalho", "link": "https://stackoverflow.com/users/9420813/alexandre-carvalho"}, "edited": false, "score": 0, "creation_date": 1523489905, "post_id": 49785815, "comment_id": 86587148, "body": "You are right all I add to do was nul-terminate newstr, new it works fine. Thanks a lot."}], "tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": true, "score": 2, "last_activity_date": 1523489890, "last_edit_date": 1523489890, "creation_date": 1523489253, "answer_id": 49785815, "question_id": 49785732, "link": "https://stackoverflow.com/questions/49785732/c-program-that-prints-random-symbols-after-correct-output/49785815#49785815", "title": "C Program that prints random symbols after correct output", "body": "<ul>\n<li><code>newstr</code> should be nul-terminated (or printed with <code>printf(\"%.*s\", result, newstr)</code>)</li>\n<li><code>fgets</code> could overflow <code>str</code> by one byte</li>\n</ul>\n"}], "owner": {"reputation": 23, "user_id": 9420813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alexandre Carvalho", "link": "https://stackoverflow.com/users/9420813/alexandre-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "accepted_answer_id": 49785815, "answer_count": 1, "score": 2, "last_activity_date": 1523489890, "creation_date": 1523488634, "last_edit_date": 1523489372, "question_id": 49785732, "link": "https://stackoverflow.com/questions/49785732/c-program-that-prints-random-symbols-after-correct-output", "title": "C Program that prints random symbols after correct output", "body": "<p>I want to make a program in C that changes lower case letter to upper case and vice versa, including symbols like . or -. When I give it an input without symbols it works perfectly ,but when I insert symbols the program prints random characters. I'm Stuck with this and I dont know why this happens.</p>\n\n<p>I have already seen two post with similar questions and still haven't figured out my problem, the two posts are:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27662123/why-does-it-print-random-symbols-when-exceeding-44-characters\">Why does it print random symbols when exceeding 44 characters</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14918710/random-symbols-after-manipulating-a-char-array-in-c\">Random symbols after manipulating a char array in C</a></li>\n</ul>\n\n<p>Input example 1: </p>\n\n<pre><code>asd.DSA\n</code></pre>\n\n<p>Output example 1: </p>\n\n<pre><code>ASD.dsa\n\n1-\\y\ufffd\n</code></pre>\n\n<hr>\n\n<p>Input example 2:</p>\n\n<pre><code>asdDSA\n</code></pre>\n\n<p>Output example 2:</p>\n\n<pre><code>ASDdsa\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    pid_t readWrite;\n    pid_t changeString;\n\n    readWrite = fork();\n\n    if(readWrite == 0) {\n        char str[49];\n        while(fgets(str, 50, stdin) != NULL) {\n            printf(\"%s\", str);\n\n            changeString = fork();\n\n            if(changeString == 0) {\n                int result = 0;\n                char newstr[49];\n                for(int i = 0; i &lt; strlen(str); i++) {\n                    if(str[i] &gt;= 'A' &amp;&amp; str[i] &lt;= 'Z') {\n                        newstr[result++] = str[i] + 32;\n                    } else if (str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z') {\n                        newstr[result++] = str[i] - 32;\n                    } else {\n                        newstr[result++] = str[i];\n                    }\n                }\n\n                printf(\"%s\", newstr);\n\n                break;\n            }\n        }\n\n    }\n    while(wait(NULL)&gt;0);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "haskell"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8174234"}, "edited": false, "score": 0, "creation_date": 1523501374, "post_id": 49785721, "comment_id": 86589621, "body": "As a starter: for loops in C are maps in functional programming, and while loops are recursion. I suspect your C does not need to be &quot;translated&quot; at all, rather you need to look for a functional solution in the first place."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1523558835, "post_id": 49785721, "comment_id": 86622297, "body": "As much as I understand you might need help in learning Haskell, StackOverflow is not a code-writing service. This question would be better if you focused on loops specifically, or gave an attempt."}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1523541964, "post_id": 49786078, "comment_id": 86611926, "body": "\u201cin a functional language, like Haskell, the compiler is able to optimize the recursion away into a loop\u201d \u2013 that&#39;s a little bit misleading. Yes, often the compiler can do this, but there&#39;s no guarantee that any given loop translated somehow into recursion will get transformed back to a loop efficiently. Also, a recursive \u201cloop\u201d often is rather harder to read than a straightout imperative loop. Usually, the best replacement for loops are higher-order functions such as traversals and strict folds."}], "tags": [], "owner": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "is_accepted": false, "score": 0, "last_activity_date": 1523542013, "last_edit_date": 1523542013, "creation_date": 1523491602, "answer_id": 49786078, "question_id": 49785721, "link": "https://stackoverflow.com/questions/49785721/calculating-multiples-in-haskell-conversion-from-c/49786078#49786078", "title": "Calculating multiples in Haskell (conversion from C)?", "body": "<p>You'll have to use <a href=\"https://stackoverflow.com/questions/14820138/understanding-recursion-in-haskell\">recursion</a> in place of loops. </p>\n\n<p>In (most) procedural or object-orientated languages, you should hardly ever (never?) be using recursion. It is horribly inefficient, as a new stack frame must be created each time the recursive function is called.</p>\n\n<p>However, in a functional language, like Haskell, the compiler is often able to optimize the recursion away into a loop, which makes it much faster then its procedural counterparts.</p>\n\n<p>I've converted your <code>sieve</code> function into a set of recursive functions in C. I'll leave it to you to convert it into Haskell:</p>\n\n<pre><code>int main(void) {\n    //...\n    int root = sqrt(PRIME_RANGE);\n    primes[primeCnt++] = 2;\n\n    sieve(3, PRIME_RANGE, root);\n    //...\n}\n\nvoid sieve(int i, int end, int root) {\n    if(i &gt; end) {\n        return;\n    }\n\n    if(!primeFlag[i]) {\n        primes[primeCnt++] = i;\n\n        if(root &gt;= i) {\n            markMultiples(i * i, PRIME_RANGE, i);\n        }\n    }\n\n    i += 2;\n    sieve(i, end, root);\n}\n\nvoid markMultiples(int j, int end, int prime) {\n    if(j &gt; end) {\n        return;\n    }\n\n    primeFlag[j] = 1;\n    j += i &lt;&lt; 1;\n\n    markMultiples(j, end, prime);\n}\n</code></pre>\n\n<p>The point of recursion is that the same function is called repeatedly, until a condition is met. The results of one recursive call are passed onto the next call, until the condition is met.</p>\n\n<p>Also, why are you bit-fiddling instead of just multiplying or dividing by 2? Any half-decent compiler these days can convert most multiplications and divisions by 2 into a bit-shift.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9633039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LpImq.jpg?s=128&g=1", "display_name": "detroitfriedchicken", "link": "https://stackoverflow.com/users/9633039/detroitfriedchicken"}, "edited": false, "score": 1, "creation_date": 1523498372, "post_id": 49786192, "comment_id": 86588960, "body": "The amount of multiples between numbers should not duplicate. So, since 6 is a multiple of both 2 and 3, 6 should only be recorded once. I think when I tested your code, it duplicated values that should have only been recorded once."}, {"owner": {"reputation": 116, "user_id": 9125440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f51c164abdd132a04e38276a2b1d48?s=128&d=identicon&r=PG&f=1", "display_name": "chessai", "link": "https://stackoverflow.com/users/9125440/chessai"}, "reply_to_user": {"reputation": 11, "user_id": 9633039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LpImq.jpg?s=128&g=1", "display_name": "detroitfriedchicken", "link": "https://stackoverflow.com/users/9633039/detroitfriedchicken"}, "edited": false, "score": 0, "creation_date": 1523537741, "post_id": 49786192, "comment_id": 86608660, "body": "i edited the post to reflect this"}, {"owner": {"reputation": 126867, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 2, "creation_date": 1523553872, "post_id": 49786192, "comment_id": 86619733, "body": "For <code>[y | y &lt;- [1..b], y `mod` x == 0]</code>, consider <code>[x,x+x .. b]</code> instead. You might also find <a href=\"http://hackage.haskell.org/package/data-ordlist\" rel=\"nofollow noreferrer\">data-ordlist</a> interesting, as it doesn&#39;t require converting to <code>Set</code> and could potentially give you the infinite list of multiples."}, {"owner": {"reputation": 116, "user_id": 9125440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f51c164abdd132a04e38276a2b1d48?s=128&d=identicon&r=PG&f=1", "display_name": "chessai", "link": "https://stackoverflow.com/users/9125440/chessai"}, "edited": false, "score": 0, "creation_date": 1523554183, "post_id": 49786192, "comment_id": 86619854, "body": "I switched to using [x, x+x .. b], it resulted in a relatively large speedup. Also, I think it&#39;s worth it to use IntSet here."}, {"owner": {"reputation": 126867, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1523555458, "post_id": 49786192, "comment_id": 86620518, "body": "(For comparison, this technique scales to large <i>a</i> more cleanly than mine, but scales to large <i>b</i> much less cleanly.)"}, {"owner": {"reputation": 116, "user_id": 9125440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f51c164abdd132a04e38276a2b1d48?s=128&d=identicon&r=PG&f=1", "display_name": "chessai", "link": "https://stackoverflow.com/users/9125440/chessai"}, "edited": false, "score": 0, "creation_date": 1523556338, "post_id": 49786192, "comment_id": 86620974, "body": "I was just about to comment that! I think there is a way to better the complexity of this using <code>-XLinearHaskell</code>, but I&#39;m not sure if it&#39;ll work out. Let me think of something concrete before elaborating. Also, using a strict left version of <code>foldMap</code> would be a good way to increase the speed of this."}, {"owner": {"reputation": 116, "user_id": 9125440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f51c164abdd132a04e38276a2b1d48?s=128&d=identicon&r=PG&f=1", "display_name": "chessai", "link": "https://stackoverflow.com/users/9125440/chessai"}, "edited": false, "score": 0, "creation_date": 1523556855, "post_id": 49786192, "comment_id": 86621221, "body": "the technique seems to not take longer than 1second until b=3x10^6, for a = 131"}, {"owner": {"reputation": 126867, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1523561458, "post_id": 49786192, "comment_id": 86623617, "body": "Another thought: it is probably cheaper to track the numbers which are <i>not</i> multiples, using set difference at each step of the fold (and starting with the set of odd numbers). This way both the size of the set being folded in decreases and the size of the accumulator decreases; by comparison here the size of the set being folded in decreases as iteration goes on, but the size of the set of all multiples is increasing as iteration continues."}], "tags": [], "owner": {"reputation": 116, "user_id": 9125440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f51c164abdd132a04e38276a2b1d48?s=128&d=identicon&r=PG&f=1", "display_name": "chessai", "link": "https://stackoverflow.com/users/9125440/chessai"}, "is_accepted": true, "score": 2, "last_activity_date": 1523557688, "last_edit_date": 1523557688, "creation_date": 1523492661, "answer_id": 49786192, "question_id": 49785721, "link": "https://stackoverflow.com/questions/49785721/calculating-multiples-in-haskell-conversion-from-c/49786192#49786192", "title": "Calculating multiples in Haskell (conversion from C)?", "body": "<p><strike>First, unless I'm grossly misunderstanding, the number of multiples you have there is wrong. The number of multiples of 2 between 1 and 30 is 15, and the number of multiples of 3 between 1 and 30 is 10, so there should be 25 numbers there.</strike></p>\n\n<p>EDIT: I did misunderstand; you want unique multiples.</p>\n\n<p>To get unique multiples, you can use Data.Set, which has the invariant that the elements of the Set are unique and ordered ascendingly.</p>\n\n<p>If you know you aren't going to exceed <code>x = maxBound :: Int</code>, you can get even better speedups using Data.IntSet. I've also included some test cases and annotated with comments what they run at on my machine.</p>\n\n<pre><code>{-# LANGUAGE BangPatterns #-}\n\n{-# OPTIONS_GHC -O2 #-}\n\nmodule Main (main) where\n\nimport System.CPUTime (getCPUTime)\nimport Data.IntSet (IntSet)\nimport qualified Data.IntSet as IntSet\n\nmain :: IO ()\nmain = do\n  test 3 30       -- 0.12 ms\n  test 131 132    -- 0.14 ms\n  test 500 300000 -- 117.63 ms\n\ntest :: Int -&gt; Int -&gt; IO ()\ntest !a !b = do\n  start &lt;- getCPUTime\n  print (numMultiples a b)\n  end   &lt;- getCPUTime\n  print $ \"Needed \" ++ show ((fromIntegral (end - start)) / 10^9) ++ \" ms.\\n\"\n\nnumMultiples :: Int -&gt; Int -&gt; Int\nnumMultiples !a !b = IntSet.size (foldMap go [2..a])\n  where\n    go :: Int -&gt; IntSet \n    go !x = IntSet.fromAscList [x, x+x .. b]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126867, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1523513352, "post_id": 49788622, "comment_id": 86593155, "body": "Some additional commentary: even without compiling, this appears to be quite a bit faster than the C code, less memory-hungry, and less wrong; e.g. <code>f&#39; 131 132</code> takes 0.2s and 130MB to print 131, whereas the C code compiled with optimizations takes 0.6s and 650MB to print 130. Compiling the Haskell code brings the time under measurement noise and memory usage to under 4MB."}, {"owner": {"reputation": 116, "user_id": 9125440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f51c164abdd132a04e38276a2b1d48?s=128&d=identicon&r=PG&f=1", "display_name": "chessai", "link": "https://stackoverflow.com/users/9125440/chessai"}, "edited": false, "score": 0, "creation_date": 1523545847, "post_id": 49788622, "comment_id": 86614849, "body": "I like this answer a lot. Do you happen to know what the computational complexity is?"}, {"owner": {"reputation": 126867, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 116, "user_id": 9125440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f51c164abdd132a04e38276a2b1d48?s=128&d=identicon&r=PG&f=1", "display_name": "chessai", "link": "https://stackoverflow.com/users/9125440/chessai"}, "edited": false, "score": 1, "creation_date": 1523553601, "post_id": 49788622, "comment_id": 86619601, "body": "@chessai The main cost is in enumerating divisors. Taking arithmetic to be constant-time for the moment, this can in general take 2^pi(a) time for sufficiently large b, where pi is the <a href=\"https://en.wikipedia.org/wiki/Prime-counting_function\" rel=\"nofollow noreferrer\">prime-counting function</a>. In more familiar terms, a/log a is a pretty decent approximation to pi(a), so we land just shy of doubly-exponential in the size of the first argument (and the second argument makes no difference asymptotically)."}, {"owner": {"reputation": 116, "user_id": 9125440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f51c164abdd132a04e38276a2b1d48?s=128&d=identicon&r=PG&f=1", "display_name": "chessai", "link": "https://stackoverflow.com/users/9125440/chessai"}, "edited": false, "score": 0, "creation_date": 1523557028, "post_id": 49788622, "comment_id": 86621286, "body": "This is super cool. I want to optimise this and save both solutions somewhere."}], "tags": [], "owner": {"reputation": 126867, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 2, "last_activity_date": 1523514411, "last_edit_date": 1523514411, "creation_date": 1523510737, "answer_id": 49788622, "question_id": 49785721, "link": "https://stackoverflow.com/questions/49785721/calculating-multiples-in-haskell-conversion-from-c/49788622#49788622", "title": "Calculating multiples in Haskell (conversion from C)?", "body": "<p>\nI'm not really into understanding your C, so I implemented a solution afresh using <a href=\"https://math.stackexchange.com/a/2326463/139921\">the algorithm discussed here</a>. The <em>N</em> in the linked algorithm is the product of the primes up to <em>a</em> in your problem description.</p>\n\n<p>So first we'll need a list of primes. There's a standardish trick for getting a list of primes that is at once very idiomatic and relatively efficient:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>primes :: [Integer]\nprimes = 2:filter isPrime [3..]\n\n-- Doesn't work right for n&lt;2, but we never call it there, so who cares?\nisPrime :: Integer -&gt; Bool\nisPrime n = go primes n where\n    go (p:ps) n | p*p&gt;n = True\n                | otherwise = n `rem` p /= 0 &amp;&amp; go ps n\n</code></pre>\n\n<p>Next up: we want a way to iterate over the positive square-free divisors of <em>N</em>. This can be achieved by iterating over the subsets of the primes less than <em>a</em>. There's a standard idiomatic way to get a powerset, namely:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>-- import Control.Monad\n-- powerSet :: [a] -&gt; [[a]]\n-- powerSet = filterM (const [False, True])\n</code></pre>\n\n<p>That would be a fine component to use, but since at the end of the day we only care about the product of each powerset element and the value of the Mobius function of that product, we would end up duplicating a lot of multiplications and counting problems. It's cheaper to compute those two things directly while producing the powerset. So:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>-- Given the prime factorization of a square-free number, produce a list of\n-- its divisors d together with mu(d).\ndivisorsWithMu :: Num a =&gt; [a] -&gt; [(a, a)]\ndivisorsWithMu [] = [(1, 1)]\ndivisorsWithMu (p:ps) = rec ++ [(p*d, -mu) | (d, mu) &lt;- rec] where\n    rec = divisorsWithMu ps\n</code></pre>\n\n<p>With that in hand, we can just iterate and do a little arithmetic.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>f :: Integer -&gt; Integer -&gt; Integer\nf a b = b - sum\n    [ mu * (b `div` d)\n    | (d, mu) &lt;- divisorsWithMu (takeWhile (&lt;=a) primes)\n    ]\n</code></pre>\n\n<p>And that's all the code. Crunched 137 lines of C down to 15 lines of Haskell -- not bad! Try it out in ghci:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>&gt; f 3 30\n20\n</code></pre>\n\n<p>As an additional optimization, one could consider modifying <code>divisorsWithMu</code> to short-circuit when its divisor is bigger than <em>b</em>, as we know such terms will not contribute to the final sum. This makes a noticeable difference for large <em>a</em>, as without it there are exponentially many elements in the powerset. Here's how that modification looks:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>-- Given an upper bound and the prime factorization of a square-free number,\n-- produce a list of its divisors d that are no larger than the upper bound\n-- together with mu(d).\ndivisorsWithMuUnder :: (Ord a, Num a) =&gt; a -&gt; [a] -&gt; [(a, a)]\ndivisorsWithMuUnder n [] = [(1, 1)]\ndivisorsWithMuUnder n (p:ps) = rec ++ [(p*d, -mu) | (d, mu) &lt;- rec, p*d&lt;=n]\n    where rec = divisorsWithMuUnder n ps\n\nf' :: Integer -&gt; Integer -&gt; Integer\nf' a b = b - sum\n    [ mu * (b `div` d)\n    | (d, mu) &lt;- divisorsWithMuUnder b (takeWhile (&lt;=a) primes)\n    ]\n</code></pre>\n\n<p>Not much more complicated; the only really interesting difference is that there's now a condition in the list comprehension. Here's an example of <code>f'</code> finishing quickly for inputs that would take infeasibly long with <code>f</code>:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>&gt; f' 100 100000\n88169\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61384, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1523560447, "last_edit_date": 1523560447, "creation_date": 1523558670, "answer_id": 49803847, "question_id": 49785721, "link": "https://stackoverflow.com/questions/49785721/calculating-multiples-in-haskell-conversion-from-c/49803847#49803847", "title": "Calculating multiples in Haskell (conversion from C)?", "body": "<p>With data-ordlist package mentioned by Daniel Wagner in the comments, it is just</p>\n\n<pre><code>f a b = length $ unionAll [ [p,p+p..b] | p &lt;- takeWhile (&lt;= a) primes]\n</code></pre>\n\n<p>That is all. Some timings, for non-compiled code run inside GHCi:</p>\n\n<pre><code>~&gt; f 100 (10^5)\n88169\n(0.05 secs, 48855072 bytes)\n\n~&gt; f 131 (3*10^6)\n2659571\n(0.55 secs, 1493586480 bytes)\n\n~&gt; f 131 132\n131\n(0.00 secs, 0 bytes)\n\n~&gt; f 500 300000\n274055\n(0.11 secs, 192704760 bytes)\n</code></pre>\n\n<p>Compiling will surely make the memory consumption a non-issue, by converting the <code>length</code> to a counting loop.</p>\n"}], "owner": {"reputation": 11, "user_id": 9633039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LpImq.jpg?s=128&g=1", "display_name": "detroitfriedchicken", "link": "https://stackoverflow.com/users/9633039/detroitfriedchicken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "closed_date": 1523558760, "accepted_answer_id": 49786192, "answer_count": 4, "score": 0, "last_activity_date": 1523698625, "creation_date": 1523488578, "last_edit_date": 1523698625, "question_id": 49785721, "link": "https://stackoverflow.com/questions/49785721/calculating-multiples-in-haskell-conversion-from-c", "closed_reason": "Needs more focus", "title": "Calculating multiples in Haskell (conversion from C)?", "body": "<p>I'm trying to write a Haskell program that calculates multiples. Basically, when given two integers a and b, I want to find how many integers 1 \u2264 bi \u2264 b are multiple of any integer 2 \u2264 ai \u2264 a. For example, if a = 3 and b = 30, I want to know how many integers in the range of 1-30 are a multiple of 2 or 3; there are 20 such integers: 2, 3, 4, 6, 8, 9, 10, 12, 14, 15, 16, 18, 20, 21, 22, 24, 26, 27, 28, 30.</p>\n\n<p>I have a C program that does this. I'm trying to get this translated into Haskell, but part of the difficulty is getting around the loops that I've used since Haskell doesn't use loops. I appreciate any and all help in translating this!</p>\n\n<p>My C program for reference (sorry if formatting is off):</p>\n\n<pre><code>#define PRIME_RANGE 130\n#define PRIME_CNT   32\n\n#define UPPER_LIMIT (1000000000000000ull) //10^15\n#define MAX_BASE_MULTIPLES_COUNT  25000000\n\ntypedef struct\n{\n    char primeFactorFlag;\n    long long multiple;\n}multipleInfo;\n\nunsigned char primeFlag[PRIME_RANGE + 1];\nint primes[PRIME_CNT];\nint primeCnt = 0;\n\nint maxPrimeStart[PRIME_CNT];\nmultipleInfo baseMultiples[MAX_BASE_MULTIPLES_COUNT];\nmultipleInfo mergedMultiples[MAX_BASE_MULTIPLES_COUNT];\nint baseMultiplesCount, mergedMultiplesCount;\n\nvoid findOddMultiples(int a, long long b, long long *count);\nvoid generateBaseMultiples(void);\nvoid mergeLists(multipleInfo listSource[], int countS, multipleInfo    \n\nlistDest[], int *countD);\nvoid sieve(void);\n\nint main(void)\n{\n\n    int i, j, a, n, startInd, endInd;\n    long long b, multiples;\n\n    //Generate primes\n    sieve();\n    primes[primeCnt] = PRIME_RANGE + 1;\n\n    generateBaseMultiples();\n    baseMultiples[baseMultiplesCount].multiple = UPPER_LIMIT + 1;\n\n    //Input and Output\n    scanf(\"%d\", &amp;n);\n    for(i = 1; i &lt;= n; i++)\n    {\n        scanf(\"%d%lld\", &amp;a, &amp;b);\n\n        //If b &lt;= a, all are multiple except 1\n        if(b &lt;= a)\n            printf(\"%lld\\n\",b-1);\n        else\n        {\n            //Add all even multiples\n            multiples = b / 2;\n            //Add all odd multiples\n            findOddMultiples(a, b, &amp;multiples);-\n\n            printf(\"%lld\\n\", multiples);\n        }\n    }\n    return 0;\n}\n\nvoid findOddMultiples(int a, long long b, long long *count)\n{\n    int i, k;\n    long long currentNum;\n\n    for(k = 1; k &lt; primeCnt &amp;&amp; primes[k] &lt;= a; k++)\n    {\n        for(i = maxPrimeStart[k]; i &lt; maxPrimeStart[k + 1] &amp;&amp;         \n\nbaseMultiples[i].multiple &lt;= b; i++)\n        {\n            currentNum = b/baseMultiples[i].multiple;\n            currentNum = (currentNum  + 1) &gt;&gt; 1; // remove even multiples\n            if(baseMultiples[i].primeFactorFlag) //odd number of factors\n                (*count) += currentNum;\n            else\n                (*count) -= currentNum;\n        }\n    }\n}\n\nvoid addTheMultiple(long long value, int primeFactorFlag)\n{\n    baseMultiples[baseMultiplesCount].multiple = value;\n    baseMultiples[baseMultiplesCount].primeFactorFlag = primeFactorFlag;\n    baseMultiplesCount++;\n}\n\nvoid generateBaseMultiples(void)\n{\n    int i, j, t, prevCount;\n    long long curValue;\n\n    addTheMultiple(3, 1);\n     mergedMultiples[0] = baseMultiples[0];\n    mergedMultiplesCount = 1;\n\n    maxPrimeStart[1] = 0;\n    prevCount = mergedMultiplesCount;\n    for(i = 2; i &lt; primeCnt; i++)\n    {\n        maxPrimeStart[i] = baseMultiplesCount;\n        addTheMultiple(primes[i], 1);\n        for(j = 0; j &lt; prevCount; j++)\n        {\n            curValue = mergedMultiples[j].multiple * primes[i];\n            if(curValue &gt; UPPER_LIMIT)\n                break;\n\n            addTheMultiple(curValue, 1 - mergedMultiples[j].primeFactorFlag);\n        }\n        if(i &lt; primeCnt - 1)\n            mergeLists(&amp;baseMultiples[prevCount], baseMultiplesCount - prevCount, mergedMultiples, &amp;mergedMultiplesCount);\n\n        prevCount = mergedMultiplesCount;\n    }\n    maxPrimeStart[primeCnt] = baseMultiplesCount;\n}\n\nvoid mergeLists(multipleInfo listSource[], int countS, multipleInfo listDest[], int *countD)\n{\nint limit = countS + *countD;\nint i1, i2, j, k;\n\n//Copy one list in unused safe memory\nfor(j = limit - 1, k = *countD - 1; k &gt;= 0; j--, k--)\n    listDest[j] = listDest[k];\n\n//Merge the lists\nfor(i1 = 0, i2 = countS, k = 0; i1 &lt; countS &amp;&amp; i2 &lt; limit; k++)\n{\n\n    if(listSource[i1].multiple &lt;= listDest[i2].multiple)\n        listDest[k] = listSource[i1++];\n    else\n        listDest[k] = listDest[i2++];\n}\n\nwhile(i1 &lt; countS)\n    listDest[k++] = listSource[i1++];\n\n\nwhile(i2 &lt; limit)\n    listDest[k++] = listDest[i2++];\n\n*countD = k;\n}\n\nvoid sieve(void)\n{\n   int i, j, root = sqrt(PRIME_RANGE);\n    primes[primeCnt++] = 2;\n    for(i = 3; i &lt;= PRIME_RANGE; i+= 2)\n    {\n        if(!primeFlag[i])\n        {\n            primes[primeCnt++] = i;\n            if(root &gt;= i)\n            {\n                for(j = i * i; j &lt;= PRIME_RANGE; j += i &lt;&lt; 1)\n                primeFlag[j] = 1;\n        }\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1523488719, "post_id": 49785710, "comment_id": 86586854, "body": "When you type &quot;./a.out *&quot; the shell interprets the star, expands it with the names of files in the current directory, and passes those to your program as argv[]. Unless you escape the *, your program will never see it."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1523488721, "post_id": 49785710, "comment_id": 86586855, "body": "It does not seem to be possible without escaping from the user end. Simply because you are not getting * in your program, but something that shell subsitutes for it. In your case &quot;1&quot;. It can be anything at all"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 1, "creation_date": 1523500029, "post_id": 49785710, "comment_id": 86589285, "body": "<code>argv[1] == &quot;1&quot;</code> does <b>not</b> compare strings in C. You&#39;re comparing pointers that are never being equal."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 7960258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff1b37dd38f331b04d9898c789178e8?s=128&d=identicon&r=PG&f=1", "display_name": "bmw417", "link": "https://stackoverflow.com/users/7960258/bmw417"}, "edited": false, "score": 0, "creation_date": 1523488833, "post_id": 49785746, "comment_id": 86586881, "body": "That&#39;s a real bummer then. I guess I&#39;ll just have to escape on user end."}], "tags": [], "owner": {"reputation": 2630, "user_id": 989878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/81065a8d4babc9d566e4cdded4e15370?s=128&d=identicon&r=PG", "display_name": "camelccc", "link": "https://stackoverflow.com/users/989878/camelccc"}, "is_accepted": false, "score": 3, "last_activity_date": 1523488766, "creation_date": 1523488766, "answer_id": 49785746, "question_id": 49785710, "link": "https://stackoverflow.com/questions/49785710/c-argv-passed-in-as-parameter-returns-1-when-printed/49785746#49785746", "title": "C - argv[] passed in * as parameter, returns 1 when printed", "body": "<p>This is nothing to do with c. Its your shell processing its line before running your program. You don't specify your os, but you will need to escape the arguments whatever</p>\n"}, {"tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1523499853, "last_edit_date": 1523499853, "creation_date": 1523499540, "answer_id": 49786974, "question_id": 49785710, "link": "https://stackoverflow.com/questions/49785710/c-argv-passed-in-as-parameter-returns-1-when-printed/49786974#49786974", "title": "C - argv[] passed in * as parameter, returns 1 when printed", "body": "<p>The shell is responsible for command line preprocessing before it runs a program. <code>*</code> is knowns as a wildcard. It is not the only wildcard, there are also <code>?</code>, <code>[</code>, <code>{</code> and substitutons of <code>$</code>. You can escape preprocessing wildcards by prefixing them with <code>\\</code> or enclosing parameters in quotations <code>'</code></p>\n\n<pre><code>./a.out '*'\n</code></pre>\n\n<blockquote>\n  <p>I can't just test for</p>\n</blockquote>\n\n<pre><code>if (argv[1] == \"1\")\n</code></pre>\n\n<blockquote>\n  <p>Because that'd be testing if I passed in 1 like</p>\n</blockquote>\n\n<pre><code>./a.out 1\n</code></pre>\n\n<p>You can not test it either. <code>argv[1] == \"1\"</code> does not compare strings, it compares pointers and the comparison always is false.</p>\n"}], "owner": {"reputation": 127, "user_id": 7960258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff1b37dd38f331b04d9898c789178e8?s=128&d=identicon&r=PG&f=1", "display_name": "bmw417", "link": "https://stackoverflow.com/users/7960258/bmw417"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523500279, "creation_date": 1523488501, "last_edit_date": 1523500279, "question_id": 49785710, "link": "https://stackoverflow.com/questions/49785710/c-argv-passed-in-as-parameter-returns-1-when-printed", "title": "C - argv[] passed in * as parameter, returns 1 when printed", "body": "<p>I'm trying to see if * is passed in as a parameter in argv, but I'm not sure how to begin testing for it. When I did a </p>\n\n<pre><code>printf(\"%s\\n\", argv[1]);\n</code></pre>\n\n<p>The code prints out 1. I tested and ran </p>\n\n<pre><code>./a.out \\*\n</code></pre>\n\n<p>To escape the input, which did work and printed \"*\", but I want t be able to pass in * without escaping from the user end and be able to see that * is passed. I can't just test for </p>\n\n<pre><code>if (strcmp(argv[1], \"1\") == 0)\n</code></pre>\n\n<p>Because that'd be testing if I passed in 1 like</p>\n\n<pre><code>./a.out 1\n</code></pre>\n\n<p>How should I do this??</p>\n"}, {"tags": ["c", "scanf", "getchar"], "comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1523516954, "post_id": 49785558, "comment_id": 86595100, "body": "Why is it that some people don&#39;t read manuals and think they can guess their way around C? This is exactly what happens... I hope you can learn from your mistake."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 3926412, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/386ec047887b2fbf66561f8f1023379f?s=128&d=identicon&r=PG&f=1", "display_name": "Kolt Penny", "link": "https://stackoverflow.com/users/3926412/kolt-penny"}, "is_accepted": false, "score": 1, "last_activity_date": 1523487711, "creation_date": 1523487711, "answer_id": 49785590, "question_id": 49785558, "link": "https://stackoverflow.com/questions/49785558/scanf-with-char/49785590#49785590", "title": "Scanf with char", "body": "<p>Because scanf ignores linebreaks and the symbol stays in the input buffer until the next function that read from the buffer starts.</p>\n"}], "owner": {"reputation": 29, "user_id": 8760120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf9e5a293b489008d38906ac02798be?s=128&d=identicon&r=PG&f=1", "display_name": "Miko 65", "link": "https://stackoverflow.com/users/8760120/miko-65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1523487699, "answer_count": 1, "score": 0, "last_activity_date": 1523505907, "creation_date": 1523487479, "last_edit_date": 1523505907, "question_id": 49785558, "link": "https://stackoverflow.com/questions/49785558/scanf-with-char", "closed_reason": "Duplicate", "title": "Scanf with char", "body": "<p>Why is that without <code>getchar</code> functions wrong? Why <code>scanf(\"%c\",&amp;slovo);</code> doesnt get char?   </p>\n\n<pre><code>int a,b;\nchar slovo;\n\nscanf(\"%d\",&amp;a);\ngetchar();\n\nscanf(\"%c\",&amp;slovo);\n\nscanf(\"%d\",&amp;b);\ngetchar();\n</code></pre>\n"}, {"tags": ["c++", "c", "for-loop", "switch-statement"], "comments": [{"owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "edited": false, "score": 0, "creation_date": 1523487478, "post_id": 49785519, "comment_id": 86586539, "body": "You want to add <code>break</code> at the end of each <code>case</code>. Otherwise it&#39;s not going to work as intended and hit every case until a <code>break</code> is found."}], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 4408818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e5f51aedefde420afa4a8f7f71a173?s=128&d=identicon&r=PG&f=1", "display_name": "Ozymandias", "link": "https://stackoverflow.com/users/4408818/ozymandias"}, "edited": false, "score": 0, "creation_date": 1523487742, "post_id": 49785549, "comment_id": 86586607, "body": "So when x = 2, case 0 is also executed even thought the condition is not  satisfied?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 621, "user_id": 4408818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e5f51aedefde420afa4a8f7f71a173?s=128&d=identicon&r=PG&f=1", "display_name": "Ozymandias", "link": "https://stackoverflow.com/users/4408818/ozymandias"}, "edited": false, "score": 3, "creation_date": 1523487884, "post_id": 49785549, "comment_id": 86586645, "body": "In C, a <code>case</code> is not a condition that guards execution. It&#39;s more like a <code>goto</code> label."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 621, "user_id": 4408818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e5f51aedefde420afa4a8f7f71a173?s=128&d=identicon&r=PG&f=1", "display_name": "Ozymandias", "link": "https://stackoverflow.com/users/4408818/ozymandias"}, "edited": false, "score": 0, "creation_date": 1523518147, "post_id": 49785549, "comment_id": 86595755, "body": "@Ozymandias <code>case 0</code> is coded below <code>case 2</code>. Without a <code>break</code>, execution flow starting in <code>case 2</code> falls through to <code>case 0</code>. Swap the order of the cases, and you won&#39;t see <code>case 0</code> executed anymore when <code>x=2</code>, but you will see <code>case 2</code> executed when <code>x=0</code>"}], "tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": true, "score": 6, "last_activity_date": 1523487419, "creation_date": 1523487419, "answer_id": 49785549, "question_id": 49785519, "link": "https://stackoverflow.com/questions/49785519/why-does-this-code-print-0223/49785549#49785549", "title": "Why does this code print 0223?", "body": "<p>Case 2 doesn't get evaluated twice: it is evaluated exactly once. However, when you don't end a case with the <code>break</code> statement, instead of leaving the <code>switch</code>, execution continues to the next case.</p>\n\n<p>In other words, when <code>x</code> is 2, execution jumps to <code>case 2</code> and call <code>printf(\"%d\", x)</code> with x = 2. Then, execution falls through to case 0, and calls <code>printf(\"%d\", x)</code> with x still equal to 2. Then, execution falls through to the <code>default</code> case, where it hits a <code>break</code> statement and finally leaves the <code>switch</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 3926412, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/386ec047887b2fbf66561f8f1023379f?s=128&d=identicon&r=PG&f=1", "display_name": "Kolt Penny", "link": "https://stackoverflow.com/users/3926412/kolt-penny"}, "is_accepted": false, "score": 1, "last_activity_date": 1523487510, "creation_date": 1523487510, "answer_id": 49785561, "question_id": 49785519, "link": "https://stackoverflow.com/questions/49785519/why-does-this-code-print-0223/49785561#49785561", "title": "Why does this code print 0223?", "body": "<p>It doesn't. There's no break on those cases. That's why it prints case 2 then case 0.</p>\n"}], "owner": {"reputation": 621, "user_id": 4408818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e5f51aedefde420afa4a8f7f71a173?s=128&d=identicon&r=PG&f=1", "display_name": "Ozymandias", "link": "https://stackoverflow.com/users/4408818/ozymandias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 49785549, "answer_count": 2, "score": -2, "last_activity_date": 1523487664, "creation_date": 1523487259, "last_edit_date": 1523487588, "question_id": 49785519, "link": "https://stackoverflow.com/questions/49785519/why-does-this-code-print-0223", "title": "Why does this code print 0223?", "body": "<p>Why does case 2 get evaluated twice in this for loop?</p>\n\n<pre><code>for (int x = 0; x &lt;4; x++)\n{\n    switch (x)\n    {\n        case 2: printf(\"%d\", x);\n        case 0: printf(\"%d\", x);\n        default: break;\n        case 3: printf(\"%d\", x);\n    }\n}\n</code></pre>\n\n<p>edit: I forgot to add that this is not a legitimate piece of code. Just something that came up in my friends job exam last week.</p>\n"}, {"tags": ["c", "windows", "winapi"], "comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1523487026, "post_id": 49785429, "comment_id": 86586418, "body": "MSDN has at least one page about how to set the macros to select which version of Windows you&#39;re targeting:  <a href=\"https://msdn.microsoft.com/en-us/library/6sehtctf.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/6sehtctf.aspx</a>"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1523487533, "post_id": 49785429, "comment_id": 86586559, "body": "It seems like you&#39;re using a very old version of the compiler and linker if you had to define macros to get such an old feature.  In that case, you might also need information about enabling Visual Styles so that your controls look the way you expect.  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773175(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1524167081, "post_id": 49785603, "comment_id": 86874062, "body": "But you probably shouldn&#39;t set _WIN32_IE directly.  Setting WINVER and _WIN32_WINNT per the documentation will cause the _WIN32_IE to be set appropriately."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1524169707, "post_id": 49785603, "comment_id": 86875371, "body": "@AdrianMcCarthy Yes that is probably good advice for any recent SDK. In the old days you could have them out of sync because you could target Win95+IE4 or Win98+IE5 etc."}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": false, "score": 3, "last_activity_date": 1523488207, "last_edit_date": 1523488207, "creation_date": 1523487812, "answer_id": 49785603, "question_id": 49785429, "link": "https://stackoverflow.com/questions/49785429/initcommoncontrolsex-was-not-declared-in-this-scope/49785603#49785603", "title": "INITCOMMONCONTROLSEX was not declared in this scope", "body": "<p>The initial version of comctl32 shipped with Windows 95/Windows NT. From then on each release up to Windows 7 got a new updated version but these new versions first shipped as part of Internet Explorer. Internet Explorer 3, 4, 5, 6 and 7 usually included new versions of comctl32, shlwapi and shell32.</p>\n\n<p>This is mostly ancient history these days but you still need to declare which version of Windows and IE you are targeting to unlock certain features. </p>\n\n<p>Adding <code>#define _WIN32_IE 0x0300</code> to your code unlocks the features introduced in IE 3.0 and your program will only run on Windows 95 ORS 2 or later, Windows 95 RTM will need IE3 or 4 to be installed.</p>\n\n<p>You don't care about Windows 95 (hopefully) but the same type of <code>#if</code> check applies to many other newer features as well and not all of them are correctly documented on MSDN because they probably assume that you are using a Visual Studio project that is less than 20 years old.</p>\n\n<p>Unfortunately the minimum OS version listed on MSDN is wrong and cannot be trusted. Microsoft has removed 99% of the information about versions before 2000 and they seem to ignore anything before 2003/Vista these days.</p>\n"}, {"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 1, "last_activity_date": 1523488005, "creation_date": 1523488005, "answer_id": 49785633, "question_id": 49785429, "link": "https://stackoverflow.com/questions/49785429/initcommoncontrolsex-was-not-declared-in-this-scope/49785633#49785633", "title": "INITCOMMONCONTROLSEX was not declared in this scope", "body": "<blockquote>\n  <p>What is the purpose of _WIN32_IE?</p>\n</blockquote>\n\n<p>The extended common controls library shipped with Internet Explorer before it became a standard part of Windows.  If you <a href=\"https://msdn.microsoft.com/en-us/library/6sehtctf.aspx\" rel=\"nofollow noreferrer\">set the macros to tell the SDK which version of Windows you're targeting</a>, then the SDK will probably set the IE version for you.</p>\n\n<p>The fact that you had to do this for functionality this old suggests that you're using an old version of Visual Studio and/or the SDK.  You might want to consider updating.</p>\n\n<p>Note that, for these common controls, you probably also want to make sure you enable <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773175(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Windows Visual Styles</a>.</p>\n\n<blockquote>\n  <p>Do I really need to hardcode its value when MSDN writes nothing about doing so?</p>\n</blockquote>\n\n<p>You should set <code>WINVER</code> and <code>_WIN32_WINNT</code> per the MSDN guidelines.  Depending on the version of Visual Studio you have, you might be able to set it with a project property.  You can also do it with the <code>/D</code> option on the compiler command line, or in a header file that's included before any Windows headers.  If you use a pre-compiled header, you could do it at the top of that file.</p>\n"}], "owner": {"reputation": 145, "user_id": 8277998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678024a4856ba34307c56ec219f5ab5?s=128&d=identicon&r=PG&f=1", "display_name": "user8277998", "link": "https://stackoverflow.com/users/8277998/user8277998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523488207, "creation_date": 1523486661, "question_id": 49785429, "link": "https://stackoverflow.com/questions/49785429/initcommoncontrolsex-was-not-declared-in-this-scope", "title": "INITCOMMONCONTROLSEX was not declared in this scope", "body": "<p>When I compile </p>\n\n<pre><code>#include&lt;windows.h&gt;\n#include &lt;commctrl.h&gt;\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)\n{\n    INITCOMMONCONTROLSEX ex;\n\n    return 0;\n}\n</code></pre>\n\n<p>with </p>\n\n<pre><code> g++ 1.cpp   -w -g  -lgdi32 -lcomctl32 -o 1.exe\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>1.cpp: In function 'int WinMain(HINSTANCE, HINSTANCE, LPSTR, int)':\n1.cpp:8:2: error: 'INITCOMMONCONTROLSEX' was not declared in this scope\n  INITCOMMONCONTROLSEX ex;\n  ^.\n</code></pre>\n\n<hr>\n\n<p>I suspect I am getting this error because in commctrl.h, following <code>#if</code> condition is not true.</p>\n\n<pre><code>#if (_WIN32_IE &gt;= 0x0300)\ntypedef struct tagINITCOMMONCONTROLSEX {\n    DWORD dwSize;\n    DWORD dwICC;\n} INITCOMMONCONTROLSEX,*LPINITCOMMONCONTROLSEX;\n#endif \n</code></pre>\n\n<p>I tried compiling </p>\n\n<pre><code>#define _WIN32_IE 0x0300\n\n#include&lt;windows.h&gt;\n#include &lt;commctrl.h&gt;\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)\n{\n    INITCOMMONCONTROLSEX ex;\n\n    return 0;\n}\n</code></pre>\n\n<p>and this works fine, I don't get any errors. I looked up <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775507(v=vs.85).aspx\" rel=\"nofollow noreferrer\">MSDN</a> but there's nothing written about adding <code>#define _WIN32_IE 0x0300</code> there.</p>\n\n<hr>\n\n<p>Questions : </p>\n\n<ul>\n<li>What is the purpose of <code>_WIN32_IE</code> ? </li>\n<li>Do I really need to hardcode its value when MSDN writes nothing about doing so ?</li>\n</ul>\n"}, {"tags": ["c", "networking", "ip", "endianness"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1523486103, "post_id": 49785270, "comment_id": 86586142, "body": "Bitfields (like <code>ihl</code> and <code>version</code> here) are usually assigned either right-to-left or left-to-right within a word, depending on the endianness of the machine. (This is hideously compiler-dependent and not at all guaranteed, but it tends to work, but it&#39;s why some people recommend not using bitfields at all, although if you&#39;re not reading and writing them externally it doesn&#39;t matter so much.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9583381"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1523486220, "post_id": 49785270, "comment_id": 86586170, "body": "Wow, that was quite simple. Thanks!"}], "owner": {"user_type": "does_not_exist", "display_name": "user9583381"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523485561, "creation_date": 1523485561, "question_id": 49785270, "link": "https://stackoverflow.com/questions/49785270/why-does-the-position-of-the-ihl-and-the-version-matter-in-the-internet-header", "title": "Why does the position of the IHL and the version matter in the Internet Header?", "body": "<p>I was recently doing some raw socket related programming on my Ubuntu virtual machine. I decided to check the IP header definition in <code>/usr/include/netinet/ip.h</code> and I found this snippet of code to perplex me:</p>\n\n<pre><code>struct iphdr\n{\n#if __BYTE_ORDER == __LITTLE_ENDIAN\nunsigned int ihl:4;\nunsigned int version:4;\n#elif __BYTE_ORDER == __BIG_ENDIAN\nunsigned int version:4;\nunsigned int ihl:4;\n#else\n# error \"Please fix &lt;bits/endian.h&gt;\"\n#endif\n... \n</code></pre>\n\n<p>Whenever I have examined a diagram of the IP header, however, the version and the IHL always seemed to go first. In the <a href=\"https://tools.ietf.org/html/rfc791\" rel=\"nofollow noreferrer\">original RFC</a>, this also seems to be the case. So, why is it that the order changes depending on the endianness of the machine? As far as my understanding goes, endianness is used for storing multi-byte values.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1523485282, "post_id": 49785153, "comment_id": 86585888, "body": "I see a few problems at first glance: 1) <code>while(status != EOF)</code> -- your variable <code>status</code> is not initialized on the first iteration of the while loop.  This is undefined behavior.  2) What are you doing with the <code>line</code> variable?  You are using <code>fscanf</code>. Did you mean to use <code>sscanf</code>.  3) <code>%s</code> reads a string, but your values <code>temp[i].word</code> and <code>temp[i].clue</code> are not initialized -- and don&#39;t point to allocated memory.  4) What is your function<code>loadTextFile</code> supposed to return?"}, {"owner": {"reputation": 75, "user_id": 8729248, "user_type": "registered", "profile_image": "https://graph.facebook.com/1961658100738802/picture?type=large", "display_name": "Hilal K&#246;kt&#252;rk", "link": "https://stackoverflow.com/users/8729248/hilal-k%c3%b6kt%c3%bcrk"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1523485574, "post_id": 49785153, "comment_id": 86585980, "body": "I initialized status and I still have the same problem. I don&#39;t know how I can read content after first line using sscanf."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1523485613, "post_id": 49785153, "comment_id": 86585989, "body": "<code>i++;</code> is executed on the last  (failed) sscanf(), too. Just <code>break</code> out of a <b>for()</b> loop, and don&#39;t use the set-status-and-test-later uglyness."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1523486089, "post_id": 49785153, "comment_id": 86586139, "body": "learn to debug using your debugger. Step through the code, watch what it does."}], "answers": [{"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1523486097, "last_edit_date": 1523486097, "creation_date": 1523485785, "answer_id": 49785311, "question_id": 49785153, "link": "https://stackoverflow.com/questions/49785153/c-reading-from-txt-file-into-struct/49785311#49785311", "title": "C, Reading from txt file into struct", "body": "<p>Please see below:-</p>\n\n<pre><code>elements = malloc(wordsCount*sizeof(Word_t));\n</code></pre>\n\n<p>You are not at all referring the above variable <code>elements</code> anywhere. Remove the above line of code.</p>\n\n<p>Also you need to modify your below methods:-</p>\n\n<pre><code> Word_t* loadTextFile(FILE* myFile, int wNumbers){\n char line[100];\n Word_t *temp;\n temp = (Word_t *) malloc(wNumbers * sizeof(Word_t));\n int i = 0;\n int j= 0;\n int status;\n\n while (true) {\n    if (fgets(line, sizeof (line), myFile)) {\n      //you need to allocate proper memory for below two variables\n      temp[i].word = malloc(10); \n      temp[i].clue = malloc(60);//you need to check how much memory your need for this variable\n      status = fscanf(myFile,\"%c %d %d %s %s\", &amp;temp[i].direction, &amp;temp[i].x, &amp;temp[i].y, temp[i].word, temp[i].clue);\n      i++;\n     }\n      else{\n           break;//end of file\n      }\n  }   \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 8729248, "user_type": "registered", "profile_image": "https://graph.facebook.com/1961658100738802/picture?type=large", "display_name": "Hilal K&#246;kt&#252;rk", "link": "https://stackoverflow.com/users/8729248/hilal-k%c3%b6kt%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1523486700, "post_id": 49785344, "comment_id": 86586301, "body": "Thank you, I made the modification like you say but it doesn&#39;t read the all of the clue sentence. It just reads the first vocable of all the sentence."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 75, "user_id": 8729248, "user_type": "registered", "profile_image": "https://graph.facebook.com/1961658100738802/picture?type=large", "display_name": "Hilal K&#246;kt&#252;rk", "link": "https://stackoverflow.com/users/8729248/hilal-k%c3%b6kt%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1523487384, "post_id": 49785344, "comment_id": 86586513, "body": "Yeah.  This is because the <code>%s</code> specifier reads until finding a space.  Try <code>%[^\\n]s</code> for the last format specifier."}], "tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": true, "score": 1, "last_activity_date": 1523487331, "last_edit_date": 1523487331, "creation_date": 1523485984, "answer_id": 49785344, "question_id": 49785153, "link": "https://stackoverflow.com/questions/49785153/c-reading-from-txt-file-into-struct/49785344#49785344", "title": "C, Reading from txt file into struct", "body": "<p>Your variable <code>status</code> is uninitialized, so you are using an un-initialized variable on the first iteration of <code>while (status != EOF)</code>.  I'd suggest initializing <code>status</code> to 0.</p>\n\n<p>You are consuming a line of the file when you call <code>fgets</code>.  Once consumed you will be reading from the next line.  Instead of calling <code>fscanf</code> after your <code>fgets</code>, try using <code>sscanf</code>.  I also changed the last conversion specifier from <code>%s</code> to <code>%[^\\n]s</code> so that it reads until reaching a newline.  This is because your <code>clue</code> string has spaces in it.</p>\n\n<pre><code>if (fgets(line, sizeof (line), myFile)) {\n          status = sscanf(line,\"%c %d %d %s %[^\\n]s\", &amp;temp[i].direction, &amp;temp[i].x, &amp;temp[i].y, temp[i].word, temp[i].clue);\n          i++;\n}\n</code></pre>\n\n<p>The value <code>status</code> can be used to tell you how many input items were successfully read by <code>sscanf</code></p>\n\n<p>The <code>%s</code> argument to <code>sscanf</code> reads a string from input, but your values <code>temp[i].word</code> and <code>temp[i].clue</code> and uninitialized and do not point to allocated memory.  You need to allocate memory for these pointers first using <code>malloc</code>.</p>\n\n<p>Your function <code>loadTextFile</code> does not returning anything.  Did you forget to return <code>temp</code>?  </p>\n\n<p>Also, you should probably return the number of valid items in your array so the caller knows how many items are available.  This can be accomplished by changing your method signature to accept a pointer to <code>wNumbers</code> instead of the value, and then resetting <code>*wNumbers</code> to the number of array elements populated.  You should also check inside your loop to make sure you don't read more elements than you allocate, and handle that case appropriately.</p>\n"}], "owner": {"reputation": 75, "user_id": 8729248, "user_type": "registered", "profile_image": "https://graph.facebook.com/1961658100738802/picture?type=large", "display_name": "Hilal K&#246;kt&#252;rk", "link": "https://stackoverflow.com/users/8729248/hilal-k%c3%b6kt%c3%bcrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3932, "favorite_count": 0, "accepted_answer_id": 49785344, "answer_count": 2, "score": 1, "last_activity_date": 1523487331, "creation_date": 1523484781, "question_id": 49785153, "link": "https://stackoverflow.com/questions/49785153/c-reading-from-txt-file-into-struct", "title": "C, Reading from txt file into struct", "body": "<p>I am new in C Programming. I need to read data from file after first line and i need to put this contents into struct. I tried something but it didn't work. It reads the contents after 2nd line and it doesn't read strings. How can I solve this problem?</p>\n\n<p>Here is my code,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct\n{\nchar *word; \nchar *clue; \nint x; \nint y; \nchar direction; \nint f; \n} Word_t;\n\nWord_t* loadTextFile(FILE* myFile, int wNumbers){\n    char line[100];\n    Word_t *temp;\n    temp = malloc(wNumbers*sizeof(Word_t));\n    int i = 0;\n    int j= 0;\n    int status;\n\n    while (status != EOF) {\n        if (fgets(line, sizeof (line), myFile)) {\n          status = fscanf(myFile,\"%c %d %d %s %s\", &amp;temp[i].direction, &amp;temp[i].x, &amp;temp[i].y, temp[i].word, temp[i].clue);\n          i++;\n        }\n    }   \n}\n\nint main(){\n    Word_t *elements;\n    char filename[256];\n    FILE * fp;\n    int rowCount, colCount, wordsCount;\n\n    printf(\"Enter the name of text file:\");\n    scanf(\"%s\", filename);\n    fp = fopen(filename,\"r\");\n\n    if(!fp)\n    {\n        fputs(\"fopen failed! Exiting...\\n\", stderr);\n        exit(-1);\n    }\n    int status;\n    status = fscanf(fp, \"%d %d %d \", &amp;rowCount, &amp;colCount, &amp;wordsCount);\n    printf(\"Game is %d rows x %d cols with %d words\\n\", rowCount, colCount, wordsCount);\n    elements = malloc(wordsCount*sizeof(Word_t));\n\n    loadTextFile(fp, wordsCount);\n}\n</code></pre>\n\n<p>Here is the sample file,</p>\n\n<pre><code>   5 5 7\n   H 1 1 MILK White liquid produced by the mammals\n   H 2 1 IN Used to indicate inclusion within space, a place, or limits\n   H 3 3 BUS A road vehicle designed to carry many passengers\n   H 5 3 DAN The name of a famous author whose surname is Brown\n   V 1 1 MIND A set of cognitive faculties, e.g. consciousness, perception, etc.\n   V 3 3 BAD Opposite of good\n   V 2 5 ISBN International Standard Book Number\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1523484810, "post_id": 49785097, "comment_id": 86585733, "body": "A compiler generating &quot;gibberish&quot; is usually an indication of <i>undefined behavior</i> somewhere in your code"}, {"owner": {"reputation": 473, "user_id": 1838793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uZrN6.png?s=128&g=1", "display_name": "Phoenix87", "link": "https://stackoverflow.com/users/1838793/phoenix87"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1523485080, "post_id": 49785097, "comment_id": 86585816, "body": "The problem only appears when I import &quot;pycairo.h&quot; to call the <code>import_cairo</code> macro. If I link against the compiled version of the library instead, the code works as expected. I would tend to conclude that, if there is some UB, it is probably brought into my code by pycairo.h."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 2, "creation_date": 1523485215, "post_id": 49785097, "comment_id": 86585860, "body": "Try compiling with the <code>-fsanitize=undefined</code> flag."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1523485544, "post_id": 49785097, "comment_id": 86585969, "body": "I am also suspicious of your timespec definition especially the cast to unsigned. The contents of timespec are not unsigned. So why the cast?"}, {"owner": {"reputation": 473, "user_id": 1838793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uZrN6.png?s=128&g=1", "display_name": "Phoenix87", "link": "https://stackoverflow.com/users/1838793/phoenix87"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1523486276, "post_id": 49785097, "comment_id": 86586185, "body": "@ZanLynx the suggested flag produces better assembly code, thanks! As for the cast, I just assumed timespec used UINT without checking, as it made more sense to me."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1523486510, "post_id": 49785097, "comment_id": 86586257, "body": "The <code>-fsanitize</code> flags are for debugging only. They&#39;ll make the program very slow, but should report undefined behavior."}], "answers": [{"tags": [], "owner": {"reputation": 473, "user_id": 1838793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uZrN6.png?s=128&g=1", "display_name": "Phoenix87", "link": "https://stackoverflow.com/users/1838793/phoenix87"}, "is_accepted": true, "score": 1, "last_activity_date": 1526552486, "last_edit_date": 1526552486, "creation_date": 1523568996, "answer_id": 49806256, "question_id": 49785097, "link": "https://stackoverflow.com/questions/49785097/what-can-cause-gcc-to-partially-compile-c-code/49806256#49806256", "title": "What can cause gcc to partially compile C code?", "body": "<p>As pointed out in the comments, the cause is quite likely undefined behaviour. It turned out that the cause was a NULL pointer dereferencing done on a static variable that was never initialised.</p>\n"}], "owner": {"reputation": 473, "user_id": 1838793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uZrN6.png?s=128&g=1", "display_name": "Phoenix87", "link": "https://stackoverflow.com/users/1838793/phoenix87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 49806256, "answer_count": 1, "score": 0, "last_activity_date": 1526552486, "creation_date": 1523484403, "last_edit_date": 1523484454, "question_id": 49785097, "link": "https://stackoverflow.com/questions/49785097/what-can-cause-gcc-to-partially-compile-c-code", "title": "What can cause gcc to partially compile C code?", "body": "<p>I am compiling a Python extension written in C which makes use of an external C extension (pycairo). When I compile and link against the external library, gcc produce a valid .so object. However, if I use the C API in the form of <code>PyCapsule</code> provided by pycairo, gcc partially assembles a function in one of my C sources. The function</p>\n\n<pre><code>static PyObject *\nCanvas_show(Canvas* self) {\n  struct timespec ts = {self-&gt;interval / 1e9, self-&gt;interval % (unsigned int) 1e9};\n  int running;\n\n  // Input events\n  XSelectInput(self-&gt;display, self-&gt;win_id, ButtonPressMask | KeyPressMask);\n  XMapWindow(self-&gt;display, self-&gt;win_id);\n\n  PyObject *args = Py_BuildValue(\"(O)\", PycairoContext_FromContext(self-&gt;context, &amp;PycairoContext_Type, NULL));\n  for (running = 1; running;)\n  {\n    Canvas_on_draw(self, args, NULL);\n\n    nanosleep(&amp;ts, NULL);\n    cairo_surface_flush(self-&gt;surface);\n\n    switch (cairo_check_event(self-&gt;surface, 0)) {\n    case 0xff1b:   // Esc\n    case -1:       // left mouse button\n      running = 0;\n      break;\n    }\n  }\n\n  Py_DECREF(args);\n  cairo_destroy(self-&gt;context);\n  cairo_surface_destroy(self-&gt;surface);\n  XCloseDisplay(self-&gt;display);\n\n  return Py_True;\n}\n</code></pre>\n\n<p>is compiled by gcc into the following few instructions</p>\n\n<pre><code>00000000000010f0 &lt;Canvas_show&gt;:\n    10f0:       53                      push   rbx\n    10f1:       48 89 fb                mov    rbx,rdi\n    10f4:       48 8b 77 38             mov    rsi,QWORD PTR [rdi+0x38]\n    10f8:       48 8b 7f 30             mov    rdi,QWORD PTR [rdi+0x30]\n    10fc:       ba 05 00 00 00          mov    edx,0x5\n    1101:       e8 8a fb ff ff          call   c90 &lt;XSelectInput@plt&gt;\n    1106:       48 8b 73 38             mov    rsi,QWORD PTR [rbx+0x38]\n    110a:       48 8b 7b 30             mov    rdi,QWORD PTR [rbx+0x30]\n    110e:       e8 bd fb ff ff          call   cd0 &lt;XMapWindow@plt&gt;\n    1113:       48 8b 04 25 08 00 00    mov    rax,QWORD PTR ds:0x8\n    111a:       00 \n    111b:       0f 0b                   ud2    \n\nDisassembly of section .fini:\n\n0000000000001120 &lt;_fini&gt;:\n    1120:       48 83 ec 08             sub    rsp,0x8\n    1124:       48 83 c4 08             add    rsp,0x8\n    1128:       c3                      ret    \n&lt;EOF&gt;\n</code></pre>\n\n<p>The code starting from 1113 seems already to be gibberish, and this is where I get a SIGSEGV when I run a test.</p>\n\n<p>The same .so file is generated regardless of whether I use <code>distutils</code> or I manually compile the sources with</p>\n\n<pre><code>gcc -shared x11/x11module.c x11/canvas.c -o x11/x11.so -g -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python3.6 -I/usr/include/cairo/ -lcairo -lX11\n</code></pre>\n\n<p>What can cause gcc to partially compile valid C code, without throwing errors?</p>\n"}, {"tags": ["c", "unix", "pipe", "fork", "dup2"], "comments": [{"owner": {"reputation": 137, "user_id": 9633006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MUp4r.jpg?s=128&g=1", "display_name": "Akhmad Sumekenov", "link": "https://stackoverflow.com/users/9633006/akhmad-sumekenov"}, "edited": false, "score": 0, "creation_date": 1523483683, "post_id": 49784972, "comment_id": 86585397, "body": "I&#39;m suspicious of not closing some file descriptors or pipe ends, but it seems to me I&#39;m ok with them. So I dont understand why it doesnt work with ls ls wc("}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1523485149, "post_id": 49784972, "comment_id": 86585836, "body": "You should set up the pipe (arg[3], arg[4]) <i>before</i> calling the two producers (ls,ls) , and connect the producers&#39;s output to them <i>before</i> calling them."}, {"owner": {"reputation": 137, "user_id": 9633006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MUp4r.jpg?s=128&g=1", "display_name": "Akhmad Sumekenov", "link": "https://stackoverflow.com/users/9633006/akhmad-sumekenov"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1523545162, "post_id": 49784972, "comment_id": 86614337, "body": "@wildplasser your comment finally made my code working. But I dont understand why (arg[3], arg[4]) cant just wait until ls ls produces output? Is it because ls ls cant write into pipe, which is not been reading by any one?"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1523485252, "creation_date": 1523485252, "answer_id": 49785219, "question_id": 49784972, "link": "https://stackoverflow.com/questions/49784972/why-this-code-stalls-when-calling-prog-ls-ls-wc-1-txt/49785219#49785219", "title": "Why this code stalls when calling ./prog ls ls wc 1.txt?", "body": "<p>You need to exit the program in the first child process, otherwise both the original process and the child execute the code at the bottom that runs <code>wc</code> reading from the pipe.</p>\n\n<p>Or you can put all that code in an <code>else</code> block, so it doesn't run in the child process.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main(int argc, char const *argv[])\n{\n    int fd[2];\n    pipe(fd);\n    if (!fork()) {\n        close(fd[0]);\n        dup2(fd[1], 1);\n        close(fd[1]);\n        if (!(fork())) {\n            execlp(argv[1], argv[1], NULL);\n            _exit(1);\n        }\n        wait(NULL);\n        if (!fork()) {\n            execlp(argv[2], argv[2], NULL);\n            _exit(1);\n        }\n        wait(NULL);\n    } else {\n        close(fd[1]);\n        wait(NULL);\n        if (!fork()) {\n            dup2(fd[0], 0);\n            close(fd[0]);\n            int ffd = open(argv[4], O_WRONLY | O_CREAT | O_TRUNC, 0600);\n            dup2(ffd, 1);\n            close(ffd);\n            execlp(argv[3], argv[3], NULL);\n            _exit(1);\n        }\n        close(fd[0]);\n        wait(NULL);\n        return 0;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 9633006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MUp4r.jpg?s=128&g=1", "display_name": "Akhmad Sumekenov", "link": "https://stackoverflow.com/users/9633006/akhmad-sumekenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 49785219, "answer_count": 1, "score": 1, "last_activity_date": 1523485252, "creation_date": 1523483578, "last_edit_date": 1523484678, "question_id": 49784972, "link": "https://stackoverflow.com/questions/49784972/why-this-code-stalls-when-calling-prog-ls-ls-wc-1-txt", "title": "Why this code stalls when calling ./prog ls ls wc 1.txt?", "body": "<p>when compiling this code and calling </p>\n\n<pre><code>./prog ls ls wc 1.txt\n</code></pre>\n\n<p>(supposed to be </p>\n\n<pre><code>(ls; ls) | wc &gt; 1.txt\n</code></pre>\n\n<p>this code stalls and done right only after <kbd>Control-d</kbd>. What's the matter?        </p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main(int argc, char const *argv[])\n{\n    int fd[2];\n    pipe(fd);\n    if (!fork()) {\n        close(fd[0]);\n        dup2(fd[1], 1);\n        close(fd[1]);\n        if (!(fork())) {\n            execlp(argv[1], argv[1], NULL);\n            _exit(1);\n        }\n        wait(NULL);\n        if (!fork()) {\n            execlp(argv[2], argv[2], NULL);\n            _exit(1);\n        }\n        wait(NULL);\n    }\n    close(fd[1]);\n    wait(NULL);\n    if (!fork()) {\n        dup2(fd[0], 0);\n        close(fd[0]);\n        int ffd = open(argv[4], O_WRONLY | O_CREAT | O_TRUNC, 0600);\n        dup2(ffd, 1);\n        close(ffd);\n        execlp(argv[3], argv[3], NULL);\n        _exit(1);\n    }\n    close(fd[0]);\n    wait(NULL);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor", "x-macros"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1523483491, "post_id": 49784929, "comment_id": 86585326, "body": "@Olaf is the c preproc fundamental/independent enough to merit the removal of a generic c tag? Is this common practice in these tags?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523483518, "post_id": 49784929, "comment_id": 86585334, "body": "Any reason you have a <code>main</code> in a device driver? How about reading the documentation how to write a driver? And why do you volontarily go to  macro hell for two simple entries?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1523483664, "post_id": 49784929, "comment_id": 86585389, "body": "@AndrasDeak: It definitively is not common practice to tag for two unrelated languages at once. Whether using the C tag is disputable, as given, it seems OP is asking about the macros. Alltogether the question si very unclear and the code looks like something copypasta&#39;d together without knowing what how that works."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523483761, "post_id": 49784929, "comment_id": 86585420, "body": "Sidenote: that&#39;s not how X-macros work. Before hacking code together, learn the language and understand the concepts you intend to use. (not that using x-macros here is a good idea)."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523483787, "post_id": 49784929, "comment_id": 86585429, "body": "@Olaf: Not only the preprocessing-stage seems of interest to the OP, but also that the reslt is valid C doing what he wants."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523483790, "post_id": 49784929, "comment_id": 86585431, "body": "@Olaf I&#39;m aware that tagging with both c and c++ is bad form. What I&#39;m asking is whether either should&#39;ve been kept along with the preproc one. The usual reason is that c and c++ are different languages. Along these lines this is loosely as if somebody tagged something with python, java and nullpointerexception, and you&#39;d only leave the last one with no language tag. So is <a href=\"https://stackoverflow.com/questions/tagged/c-preprocessor\">c-preprocessor</a> a standalone language? Do the majority of the people who are experts follow it? Edit: you&#39;ve tagged it now with c so this is moot anyway ;)"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1523483799, "post_id": 49784929, "comment_id": 86585436, "body": "What do while is supposed to do?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1523483939, "post_id": 49784929, "comment_id": 86585487, "body": "@Deduplicator: I re-added the C tag even before your comment. Nevertheless this does not generate valid C code. Statements are not alloed in a <i>enum-specifier</i>. The code shows massive missconception about how x-macros actually work."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1523484074, "post_id": 49784929, "comment_id": 86585524, "body": "@AndrasDeak: <i>sigh</i> I initially removed both, C and C++ tags because from title it seemed to be a cpp-only quetion. Nevertheless, it seems OP just did not understand the idea of x-macros. If I had votes left, I&#39;d CVed as &quot;unclear&quot;. FYI: The cpp can be used stand-alone. It just happens to be included in ther C language spec, but e.g. the C++ spec refrences this part of the C standard. Also cpp is used for non-C code. E.g. you could very well preprocess Java code. See the <code>cpp</code> command on your platform: it invokes the C preprocessor only."}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 1, "last_activity_date": 1523483502, "creation_date": 1523483502, "answer_id": 49784957, "question_id": 49784929, "link": "https://stackoverflow.com/questions/49784929/making-x-macro-work-with-do-while-0/49784957#49784957", "title": "Making x macro work with do while 0", "body": "<p>You cannot wrap the X macro with <code>do while(0)</code>, because it will not be syntactically correct for the enumeration use cases that it is intended for.</p>\n\n<p>Seek an exception mechanism in your checker script, or place the X macro into a separate source file that is excluded from being checked.</p>\n"}], "owner": {"reputation": 85, "user_id": 3053970, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af29fe27395e141aad24825e33a9e648?s=128&d=identicon&r=PG&f=1", "display_name": "user3053970", "link": "https://stackoverflow.com/users/3053970/user3053970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1523483933, "creation_date": 1523483346, "last_edit_date": 1523483933, "question_id": 49784929, "link": "https://stackoverflow.com/questions/49784929/making-x-macro-work-with-do-while-0", "title": "Making x macro work with do while 0", "body": "<p>I am trying to make x macro work with do while 0 as <a href=\"https://github.com/torvalds/linux/blob/master/scripts/checkpatch.pl\" rel=\"nofollow noreferrer\">checkpatch.pl</a> is unhappy about it. However, it breaks the logic. Wondering if anyone have any suggestions to make it work?</p>\n\n<pre><code>#define X_TYPES do { \\\n        X(BABA, \"baba\") \\\n        X(INVALID, \"invalid\") \\\n} while (0)\n\n#define X(type, name) type,\nenum x_type {\n    X_TYPES\n};\n#undef X                                                       \n#define X(type, name) name,                                   \nconst char *x_name[] = {\n    X_TYPES\n};\n#undef X    \n\nint main()\n{\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "memory-leaks", "out-of-memory"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1523483266, "post_id": 49784893, "comment_id": 86585256, "body": "My crystal ball tells me that your &quot;a lot of&quot; is not really that much."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 3, "creation_date": 1523483287, "post_id": 49784893, "comment_id": 86585263, "body": "what do you mean by virtual memory? if you&#39;re using modern OS - then you always use only virtual memory, because they work in protected mode"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1523483617, "post_id": 49784893, "comment_id": 86585367, "body": "If it is a 32bit app, then running out of available address space is not that hard, and address space fragmentation (not having large enough continuous space) can be a problem in long running apps that allocate/deallocate a lot. Fragmentation is not that big a deal on startup. With a 64bit app that&#39;s much less likely to happen -- you&#39;ll definitely feel it when the physical RAM runs out and pages spill into a page file, and how far you can go depends on how the system is configured."}, {"owner": {"reputation": 377, "user_id": 9493000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Pedro Lima", "link": "https://stackoverflow.com/users/9493000/pedro-lima"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1523484241, "post_id": 49784893, "comment_id": 86585559, "body": "@EugeneSh. 4-12GB which to me seem like a lot to have on memory.   Yes i know that is the OS who controls the memory, that&#39;s why i was wondering if there was any way possible so i could guarantee that everything is on memory and isnt moved to the disk, which would take a lot more time to read and use."}, {"owner": {"reputation": 2267, "user_id": 8242447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M6884.gif?s=128&g=1", "display_name": "\u1e42\u0173\u1efb\u1ecbg\u01fb\u0148\u1ea1c\u1ec3\u01a1\u1eed\u1e69", "link": "https://stackoverflow.com/users/8242447/%e1%b9%82%c5%b3%e1%bb%bb%e1%bb%8bg%c7%bb%c5%88%e1%ba%a1c%e1%bb%83%c6%a1%e1%bb%ad%e1%b9%a9"}, "edited": false, "score": 0, "creation_date": 1523484390, "post_id": 49784893, "comment_id": 86585606, "body": "I would suggest using trees and linked list using dynamic memory. I wonder, how many entries do you need most of the time?"}, {"owner": {"reputation": 2267, "user_id": 8242447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M6884.gif?s=128&g=1", "display_name": "\u1e42\u0173\u1efb\u1ecbg\u01fb\u0148\u1ea1c\u1ec3\u01a1\u1eed\u1e69", "link": "https://stackoverflow.com/users/8242447/%e1%b9%82%c5%b3%e1%bb%bb%e1%bb%8bg%c7%bb%c5%88%e1%ba%a1c%e1%bb%83%c6%a1%e1%bb%ad%e1%b9%a9"}, "edited": false, "score": 1, "creation_date": 1523484710, "post_id": 49784893, "comment_id": 86585710, "body": "Virtual memory is an area which the computer places less-recently used memory to the hard disk.  Virtual memory involves swapping data back and forth between main memory and the <i>much slower</i> hard disk. Excessive usage of virtual memory is called <b>thrashing</b>, and will make the computer feel incredibly slow."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1523484711, "post_id": 49784893, "comment_id": 86585712, "body": "Probably worth reading <a href=\"https://stackoverflow.com/questions/578137/can-i-tell-linux-not-to-swap-out-a-particular-processes-memory\" title=\"can i tell linux not to swap out a particular processes memory\">stackoverflow.com/questions/578137/&hellip;</a>"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "reply_to_user": {"reputation": 2267, "user_id": 8242447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M6884.gif?s=128&g=1", "display_name": "\u1e42\u0173\u1efb\u1ecbg\u01fb\u0148\u1ea1c\u1ec3\u01a1\u1eed\u1e69", "link": "https://stackoverflow.com/users/8242447/%e1%b9%82%c5%b3%e1%bb%bb%e1%bb%8bg%c7%bb%c5%88%e1%ba%a1c%e1%bb%83%c6%a1%e1%bb%ad%e1%b9%a9"}, "edited": false, "score": 1, "creation_date": 1523484791, "post_id": 49784893, "comment_id": 86585729, "body": "@Mulliganaceous what you&#39;ve described is usually called swapping or paging, but not virtual memory, virtual memory is address mapping mechanism, it has almost nothing to do with hard drive usage, except that implementation in OS can decide to map some virtual address to file on disk"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1523484801, "post_id": 49784893, "comment_id": 86585730, "body": "Well if your machine does not have 12Gb of the physical RAM what choice does it have?  Since the memory manager is OS specific so is the means by which you can lock memory to prevent swapping.  For example in Windows : <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366895(v=vs.85).aspx\" rel=\"nofollow noreferrer\">VirtiualLock</a>, but second guessing the OS memory management is fraught with problems, and you can as easily screw-up performance as improve it."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1523485435, "post_id": 49784893, "comment_id": 86585938, "body": "@IlyaBursov : The misuse of the terms swapping and virtual-memory is common, primarily because the MMU&#39;s virtual mapping is the enabling technology for disk-swapping.  Read access to an unmapped address, causes a page fault, the fault handler maps a page containing the address, and loads it from disk, and for write access a page is written to the swapfile, and then ummapped."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1523486706, "post_id": 49784893, "comment_id": 86586303, "body": "@Clifford you&#39;re right, my main objection was about <code>Virtual memory is an area which the computer places less-recently used memory to the hard disk</code> which is wrong, because <b>all</b> memory accessible to user level application is virtual one, heap/stack/whatever, some parts of this memory address space could be mapped to RAM, some to HDD (of course I&#39;m talking about win/*nix)"}], "owner": {"reputation": 377, "user_id": 9493000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Pedro Lima", "link": "https://stackoverflow.com/users/9493000/pedro-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523483839, "creation_date": 1523483084, "question_id": 49784893, "link": "https://stackoverflow.com/questions/49784893/using-a-lot-of-memory-in-c-virtual-memory", "title": "Using a lot of memory in C - Virtual Memory", "body": "<p>On a recent project im working on in C, im using a lot of memory since i will need to creat structs with a lot of data and have it on memory for a short ammount of time. </p>\n\n<p>The thing is: i could use Trees/Linked List, which would allow me to have everything spread across the memory, but i used arrays. That got me thinking that it would need a lot of continous available space of memory, which most likely i wouldn't have. But the program didn't crash or have any problem at all. Is it using Virtual memory?</p>\n\n<p>If so, would it affect the performace of the program? In this project the time it takes to load everything to memory and do some querys must be the lowest possible, so would that affect anything?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1523482414, "post_id": 49784768, "comment_id": 86584910, "body": "Hm. Divide <code>1</code> by it?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1523482505, "post_id": 49784768, "comment_id": 86584945, "body": "<code>reciprocal = 1.0&#47;fraction;</code>  If this is not sufficient, you need to post more to add clarity."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1523482543, "post_id": 49784768, "comment_id": 86584972, "body": "Please explain more. Maybe give pairs of sample input and desired output."}, {"owner": {"reputation": 11, "user_id": 9632932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anish Bhat", "link": "https://stackoverflow.com/users/9632932/anish-bhat"}, "edited": false, "score": 0, "creation_date": 1523483883, "post_id": 49784768, "comment_id": 86585467, "body": "@Peytuk and Ben Thank you for helping the code did work as desired."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1523483158, "post_id": 49784845, "comment_id": 86585213, "body": "Don\u2019t do this. <code>pow</code> is a heavyweight function. Even if it has a fast internal path for exponent -1, it is overkill. Even if the compiler optimzes it, <code>1.&#47;number</code> is simpler source code."}], "tags": [], "owner": {"reputation": 13, "user_id": 9613018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d253a68599a37a6fcd3c7e004edb8025?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/9613018/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1523482937, "last_edit_date": 1523482937, "creation_date": 1523482769, "answer_id": 49784845, "question_id": 49784768, "link": "https://stackoverflow.com/questions/49784768/how-do-i-find-the-reciprocal-of-a-fraction-in-c/49784845#49784845", "title": "How do I find the reciprocal of a fraction in C?", "body": "<p>So if you're making a physics calculator and want to find the reciprocal of something, you'd just have to use the pow() function.\nIn C, I think it would look something like this:</p>\n\n<pre><code>reciprocal = pow(number, -1); //number is the number you want to find the reciprocal of.\n</code></pre>\n\n<p>Please comment if this didn't answer your question.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1523483167, "post_id": 49784885, "comment_id": 86585219, "body": "Don\u2019t do this. <code>pow</code> is a heavyweight function. Even if it has a fast internal path for exponent -1, it is overkill. Even if the compiler optimzes it, <code>1.&#47;number</code> is simpler source code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9488066"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1523483272, "post_id": 49784885, "comment_id": 86585259, "body": "@EricPostpischil of course <code>&#47;number</code> is way more simple, but apparently that&#39;s not exactly what he/she wants. Otherwise this would be nothing but a simple math question."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9488066"}, "is_accepted": true, "score": 0, "last_activity_date": 1523483045, "creation_date": 1523483045, "answer_id": 49784885, "question_id": 49784768, "link": "https://stackoverflow.com/questions/49784768/how-do-i-find-the-reciprocal-of-a-fraction-in-c/49784885#49784885", "title": "How do I find the reciprocal of a fraction in C?", "body": "<pre><code>double eqn_reciprocal= pow(eqn,-1); \n</code></pre>\n\n<p>this would do the trick</p>\n"}], "owner": {"reputation": 11, "user_id": 9632932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anish Bhat", "link": "https://stackoverflow.com/users/9632932/anish-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 0, "accepted_answer_id": 49784885, "answer_count": 2, "score": 0, "last_activity_date": 1523483045, "creation_date": 1523482334, "last_edit_date": 1523482611, "question_id": 49784768, "link": "https://stackoverflow.com/questions/49784768/how-do-i-find-the-reciprocal-of-a-fraction-in-c", "title": "How do I find the reciprocal of a fraction in C?", "body": "<p>I am making calculator for physics, but when I was coding the focal length equation I needed to find the reciprocal of the fraction found for the focal length.</p>\n"}, {"tags": ["c", "function", "terminal"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1523482535, "post_id": 49784750, "comment_id": 86584965, "body": "What&#39;s your expected output?"}, {"owner": {"reputation": 35, "user_id": 9221443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22fd602acfc1f155f47af2a75eac4b1a?s=128&d=identicon&r=PG", "display_name": "user48571", "link": "https://stackoverflow.com/users/9221443/user48571"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1523482776, "post_id": 49784750, "comment_id": 86585058, "body": "Result=12 or 12"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523482893, "post_id": 49784750, "comment_id": 86585114, "body": "You do not call any of the functions, thart is why you only get the output of the function <code>main()</code>. You call the binary in a way which looks like you want to pipe the content of a file named &quot;fun_two&quot; into it - and two unrelated numbers. Please explain what you think you do with that way of calling your program. You are not trying to call one of the functions, giving it parameters and then expect output from it, are you?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1523483009, "post_id": 49784750, "comment_id": 86585168, "body": "If you want to read arguments from the command line, you&#39;ll have to call main with parameters, and if you want to perform mathematical operations on those args, you&#39;ll need to parse them."}, {"owner": {"reputation": 35, "user_id": 9221443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22fd602acfc1f155f47af2a75eac4b1a?s=128&d=identicon&r=PG", "display_name": "user48571", "link": "https://stackoverflow.com/users/9221443/user48571"}, "edited": false, "score": 0, "creation_date": 1523483049, "post_id": 49784750, "comment_id": 86585177, "body": "yes I need the result 12 in output when I execute ./exec &lt; fun_two 3 4 but I think I have an error in the command entered"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1523483252, "post_id": 49784750, "comment_id": 86585250, "body": "Would the output of &quot;Result=12&quot; be OK for being called as <code>exec fun_two 3 4</code> ? In that case learn about command line arguments and <code>argc</code> <code>argv</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523483682, "post_id": 49784750, "comment_id": 86585394, "body": "One of the questions you are asking is &quot;how to use commandline parameters in C?&quot; and is answered here: <a href=\"https://stackoverflow.com/questions/47535120/read-input-txt-file-and-also-output-bmp-file-from-terminal-c-programming/47536091#47536091\" title=\"read input txt file and also output bmp file from terminal c programming\">stackoverflow.com/questions/47535120/&hellip;</a> Other questions are &quot;How do I call a funtion?&quot;, &quot;How do I parse numerical values from char sequences?&quot;, &quot;How can I call a function by its name in a string?&quot; Those are too many questions in one. I recommend to start with a HelloWorld and some tutorials."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523483776, "post_id": 49784750, "comment_id": 86585424, "body": "To phrase it differently, pleae study this helpful article on how to solve most any problem in programming: <a href=\"https://ericlippert.com/2014/03/21/find-a-simpler-problem/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/21/find-a-simpler-problem</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523483971, "post_id": 49785011, "comment_id": 86585496, "body": "I am pretty sure that the fun_one is not for decoration and that OP wants a solution which also allows to call that function with parameters. In that light, your answer seems to only answer half or less of the question. It is however an accepted participation in the answering process. Maybe somebody else will provide the rest of the solution, parsing a function name form parameter and calling the coreresponding function. Or do you want to extend your answer to also cover that?"}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523484431, "post_id": 49785011, "comment_id": 86585621, "body": "@Yunnosch the OP said in comments the answer expected was 12 - so I put in fun2 and guessed the OP could change to fun2 -- but it is a good suggestion and I will change"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523484730, "post_id": 49785011, "comment_id": 86585716, "body": "Sorry, but just calling both functions and not even expecting the input &quot;fun_two&quot; described by OP looks even less like an answer to OPs question."}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523485911, "post_id": 49785011, "comment_id": 86586081, "body": "@Yunnosch - fair comment - I was concerned that putting in that functionality would make the code long and take it further away from the original. -- so now I added a second code which includes the ability to choose which function is used."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523487173, "post_id": 49785011, "comment_id": 86586450, "body": "Nice. However, consider whether the last, most versatile version is not the ony one needed, especially as it seems noticably less &quot;fragile&quot;."}], "tags": [], "owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1523485794, "last_edit_date": 1523485794, "creation_date": 1523483820, "answer_id": 49785011, "question_id": 49784750, "link": "https://stackoverflow.com/questions/49784750/how-to-pass-values-through-the-terminal-to-a-program-function/49785011#49785011", "title": "How to pass values through the terminal to a program function", "body": "<p>This edit of your code shows how to use your function 2 with two number you enter. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid fun_one(int a,int b);\nvoid fun_two(int a,int b);\nint main(int, char **);\n\n\nint main(int argc, char ** argv)\n{\n    int a,b;\n    a= atoi(argv[1]);\n    b=atoi(argv[2]);\n    printf(\"Result=\");fun_two(a,b); // similar to what you want from comments\n\n    //using both functions\n    printf(\"a+b=\");fun_one(a,b); \n    printf(\"a*b=\");fun_two(a,b); \n    return 0;\n}\n\nvoid fun_one(int a,int b){\n    printf(\"%d\\n\",a+b);\n    return;\n}\nvoid fun_two(int a,int b){\n    printf(\"%d\\n\",a*b);\n    return;\n}\n</code></pre>\n\n<p>I have revised your code so that if you compile it with</p>\n\n<pre><code>gcc -o exec exec.c \n</code></pre>\n\n<p>You will be able to run it with</p>\n\n<pre><code>./exec 4 3\n</code></pre>\n\n<p>to get the required output - note that I expect compilation with <code>cc</code> will give exactly the same output, but I can't test it.  </p>\n\n<p>What I have done is changed the definition of <code>main</code> so that it can accept input from when you call it. The extra bits are put into strings. </p>\n\n<p>The function <code>atoi</code> converts <strong>ascii</strong> string <strong>to</strong> an <strong>integer</strong> number so that the numbers you put on the command line can be handled as numbers and not as strings. </p>\n\n<p>Please note that this code is rather fragile and may seg. fault. if you don't put in two numbers after you call the program the result will be unpredictable. You could make it more reliable by checking the value of argc - the number of things typed on the line when you entered the command and by checking that atoi worked, but that would make the code longer and I think it is more important to see a way of doing what you want to achieve at the moment.  </p>\n\n<p>A more versatile code is below, which allows you to choose which function you want to run in the code....</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid fun_one(int a,int b);\nvoid fun_two(int a,int b);\nint main(int, char **);\n\n\nint main(int argc, char ** argv)\n{\n    int a,b;\n    a= atoi(argv[2]);\n    b=atoi(argv[3]);\n\n    if (!strcmp(\"fun_one\",argv[1])) \n    { \n         printf(\"Result=\");fun_one(a,b); \n    }\n    else if (!strcmp(\"fun_two\",argv[1])) \n    { \n         printf(\"Result=\");fun_two(a,b); \n    }\n    else printf(\"Didn't understand function you requested.  \\n\\n\");\n\n    return 0;\n}\n\nvoid fun_one(int a,int b){\n    printf(\"%d\\n\",a+b);\n    return;\n}\nvoid fun_two(int a,int b){\n    printf(\"%d\\n\",a*b);\n    return;\n}\n</code></pre>\n\n<p>The function now gives the following output for the following input</p>\n\n<pre><code>./exec fun_three 3 4\nDidn't understand function you requested.  \n\n./exec fun_one 3 4\nResult=7\n./exec fun_two 3 4\nResult=12\n</code></pre>\n\n<p>so now with the code above you enter three things after the command - the function you want, then the two numbers - if the function is not recognised there is an error message. </p>\n\n<p>The function <code>strcmp</code> compares two strings and returns zero if they are identical. zero is equal to false in logic so the <code>!</code> symbol is used as a not, which converts zero to one and numbers not equal to zero to zero. The effect is that if the two string are identical the logical test will be true.</p>\n"}], "owner": {"reputation": 35, "user_id": 9221443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22fd602acfc1f155f47af2a75eac4b1a?s=128&d=identicon&r=PG", "display_name": "user48571", "link": "https://stackoverflow.com/users/9221443/user48571"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 49785011, "answer_count": 1, "score": 1, "last_activity_date": 1523485794, "creation_date": 1523482258, "question_id": 49784750, "link": "https://stackoverflow.com/questions/49784750/how-to-pass-values-through-the-terminal-to-a-program-function", "title": "How to pass values through the terminal to a program function", "body": "<pre><code>#include &lt;stdio.h&gt;\nvoid fun_one(int a,int b);\nvoid fun_two(int a,int b);\nint main()\n{\n    printf(\"Result=\");\n    return 0;\n}\n\nvoid fun_one(int a,int b){\n    printf(\"%d\\n\",a+b);\n}\nvoid fun_two(int a,int b){\n    printf(\"%d\\n\",a*b);\n}\n</code></pre>\n\n<p>I compiled and run the program this way:</p>\n\n<p>cc exec.c -o exec</p>\n\n<p>./exec &lt; fun_two 3 4</p>\n\n<p>But it did not return what I expected.Is there an error in the command?</p>\n\n<p>Output:\nResult=</p>\n"}, {"tags": ["c", "linux", "memory-management", "mmap"], "comments": [{"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 1, "creation_date": 1523482506, "post_id": 49784670, "comment_id": 86584946, "body": "Not sure if it will work but have you tried <a href=\"http://man7.org/linux/man-pages/man2/madvise.2.html\" rel=\"nofollow noreferrer\"><code>madvise(ptr, size, MADV_DONTNEED)</code></a>? There are a few other advice flags in the manual that also look potentially useful. This is a comment instead of an answer because I&#39;ve never done this and have no idea if it&#39;ll work. ;)"}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1523492291, "post_id": 49784670, "comment_id": 86587709, "body": "I second TypeIA. But you need to use <code>MAP_PRIVATE</code>. Consider also <code>MAP_NORESERVE</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533500378, "creation_date": 1533500378, "answer_id": 51697954, "question_id": 49784670, "link": "https://stackoverflow.com/questions/49784670/how-to-release-memory-while-preserving-virtual-address-range/51697954#51697954", "title": "How to release memory while preserving virtual address range?", "body": "<p><code>mmap</code> with <code>MAP_FIXED</code> will replace any existing mapping in the specified address range, and free the memory if it is no longer referenced.</p>\n"}], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533500378, "creation_date": 1523481755, "question_id": 49784670, "link": "https://stackoverflow.com/questions/49784670/how-to-release-memory-while-preserving-virtual-address-range", "title": "How to release memory while preserving virtual address range?", "body": "<p>I'm working on a device that has very tight memory size and virtual address space constraint.</p>\n\n<p>I'm trying to solve this problem by reclaiming memory more frequently while reclaiming virtual address less frequently, e.g. reserving virtual address early but committing memory late, while reclaiming memory early and releasing virtual address late.</p>\n\n<p>Particularly there is a very large allocation that suffers a lot from address space fragmentation and I'm trying to solve it by reserving address space for it up front.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2782628/any-way-to-reserve-but-not-commit-memory-in-linux?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">This question</a> solves the first problem: use <code>mmap</code> with <code>PROT_NONE</code> to acquire virtual address range, and use <code>mprotect</code> with <code>PROT_READ|PROT_WRITE</code> before use, and then pages would be faulted in when used.</p>\n\n<p>However, I couldn't find a way to do the reverse: <code>mprotect</code> with <code>PROT_NONE</code> doesn't seem to release the pages, while calling <code>munmap</code> loses the virtual address range.</p>\n\n<p>Is there to unmap/detach pages while preserving virtual address?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1523478269, "post_id": 49783903, "comment_id": 86583187, "body": "Curious, did the same professor suggest coding the <code>(float*)</code> cast?"}, {"owner": {"reputation": 27, "user_id": 8104836, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "alex", "link": "https://stackoverflow.com/users/8104836/alex"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523478349, "post_id": 49783903, "comment_id": 86583227, "body": "Yes the line I posted above was exactly the way he wants us to allocate it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523478369, "post_id": 49783903, "comment_id": 86583239, "body": "To allocate memory for a 2D array, with C99, code could use <code>float (*A)[n][m] = malloc(sizeof *A);</code>"}, {"owner": {"reputation": 27, "user_id": 8104836, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "alex", "link": "https://stackoverflow.com/users/8104836/alex"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523478458, "post_id": 49783903, "comment_id": 86583290, "body": "But allocation isn&#39;t the issue. He wants us to do it this way. Would doing it your way make reading it in any easier?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1523478476, "post_id": 49783903, "comment_id": 86583299, "body": "@dasblinkenlight The 1980s are calling the prof and want his compiler back."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523478513, "post_id": 49783903, "comment_id": 86583323, "body": "Do it the way the prof request, just know it is not up-to-date."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1523478533, "post_id": 49783903, "comment_id": 86583331, "body": "@BobCarter Doing it chux&#39;s way would make reading it look not just easier, it would make it look completely natural, as you would write <code>A[r][c] = ...</code> and that&#39;s that."}, {"owner": {"reputation": 489, "user_id": 6694705, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1132078546853190/picture?type=large", "display_name": "Varad Bhatnagar", "link": "https://stackoverflow.com/users/6694705/varad-bhatnagar"}, "edited": false, "score": 0, "creation_date": 1523478714, "post_id": 49783903, "comment_id": 86583424, "body": "@BobCarter How did you decide the values of n and m ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1523479600, "post_id": 49783903, "comment_id": 86583816, "body": "@dasblinkenlight Not sure if <code>A[r][c]</code> works.  Is not <code>(*A)[r][c]</code> needed with <code>float (*A)[n][m] = ...</code>?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523479687, "post_id": 49783903, "comment_id": 86583854, "body": "@chux Right, of course! It&#39;s still a lot better than writing helpers that do math explicitly, though."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1523480169, "post_id": 49783903, "comment_id": 86584056, "body": "@chux <code>(A*)[m] = malloc(sizeof *A * n);</code> will work too with <code>A[i][j]</code> it&#39;s more readable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1523481146, "post_id": 49783903, "comment_id": 86584458, "body": "@Stargateur Agreed.  That is more for a dynamic 2D array than a fixed 2D array - which is usually wanted anyways."}], "answers": [{"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1523479605, "post_id": 49784072, "comment_id": 86583819, "body": "@chux Thanks! I like your <code>float (*A)[n][m] = malloc(sizeof *A);</code> &quot;magic&quot; a lot better, though."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 5, "last_activity_date": 1523479557, "last_edit_date": 1523479557, "creation_date": 1523478879, "answer_id": 49784072, "question_id": 49783903, "link": "https://stackoverflow.com/questions/49783903/how-to-store-a-2d-array-in-a-contiguous-array-in-c/49784072#49784072", "title": "How to store a 2D array in a contiguous array in C?", "body": "<p>If you must \"fold\" a 2D matrix into a \"flat\" array, use the allocation line that your professor suggested (after removing the <a href=\"https://stackoverflow.com/q/605845/335858\">unnecessary cast</a>) and make a pair of functions for accessing the matrix:</p>\n\n<pre><code>float get(const float *m, size_t width, size_t r, size_t c) {\n    return m[r*width+c];\n}\nvoid set(float *m, size_t width, size_t r, size_t c, float val) {\n    m[r*width+c] = val;\n}\n</code></pre>\n\n<p><strong>Note:</strong> The above illustrates packing the matrix in <a href=\"https://en.wikipedia.org/wiki/Row-_and_column-major_order\" rel=\"nofollow noreferrer\">row-major order</a>; column-major order is another possibility.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1523479715, "last_edit_date": 1523479715, "creation_date": 1523478969, "answer_id": 49784086, "question_id": 49783903, "link": "https://stackoverflow.com/questions/49783903/how-to-store-a-2d-array-in-a-contiguous-array-in-c/49784086#49784086", "title": "How to store a 2D array in a contiguous array in C?", "body": "<p>Given an allocation of the old-school form</p>\n\n<pre><code>float* A = (float*) malloc( n * m * sizeof(float) ); \n</code></pre>\n\n<p>To read data into it</p>\n\n<pre><code>if (A) {\n  for (size_t ni = 0; ni &lt; n; ni++) {\n    for (size_t mi = 0; mi &lt; m; mi++) {\n      if (fscanf(inf, \"%f\", A + ni*m + mi) != 1) Handle_Bad_Read();\n      // or \n      if (fscanf(inf, \"%f\", &amp;A[ni*m + mi]) != 1) Handle_Bad_Read();\n    } \n  }\n</code></pre>\n\n<p>To print it</p>\n\n<pre><code>  for (size_t ni = 0; ni &lt; n; ni++) {\n    for (size_t mi = 0; mi &lt; m; mi++) {\n      printf(inf, \" %g\", A[ni*m + mi]);\n    }\n    putc('\\n'); \n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 489, "user_id": 6694705, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1132078546853190/picture?type=large", "display_name": "Varad Bhatnagar", "link": "https://stackoverflow.com/users/6694705/varad-bhatnagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1523479206, "creation_date": 1523479206, "answer_id": 49784130, "question_id": 49783903, "link": "https://stackoverflow.com/questions/49783903/how-to-store-a-2d-array-in-a-contiguous-array-in-c/49784130#49784130", "title": "How to store a 2D array in a contiguous array in C?", "body": "<p>The first part of your question is a bit unclear.\nAs for the second part , if you are allocating a 2D matrix using contiguous allocation , you can access the values stored in it like :</p>\n\n<pre><code> matrix[ i * &lt;no_of_columns&gt; + j]\n</code></pre>\n\n<p>where \"no_of_columns\" is the width of the 2D matrix , which corresponds to </p>\n\n<pre><code> matrix[i][j] \n</code></pre>\n\n<p>if put simply.</p>\n"}, {"tags": [], "owner": {"reputation": 3402, "user_id": 3628863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1lHi.jpg?s=128&g=1", "display_name": "Joe Farrell", "link": "https://stackoverflow.com/users/3628863/joe-farrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1523481082, "creation_date": 1523481082, "answer_id": 49784535, "question_id": 49783903, "link": "https://stackoverflow.com/questions/49783903/how-to-store-a-2d-array-in-a-contiguous-array-in-c/49784535#49784535", "title": "How to store a 2D array in a contiguous array in C?", "body": "<p>@dasblinkenlight's answer is a good one. Just to elaborate a little on how you might have figured out the math in that answer on your own: when I need to determine how to represent the relationship between two quantities mathematically, I often find it helpful to draw a picture. Excel is your friend in this case. I'll start out with a specific example. For instance, suppose I have an array with five rows and four columns. As @dasblinkenlight pointed out, there are two clear ways you might number the cells in such an array: row-major order or column-major order. I'd number them manually in my specific example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Atkgo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Atkgo.png\" alt=\"A specific example\"></a></p>\n\n<p>Then I'll look at what I've drawn and try to figure out the patterns. In the first image you can see that cell numbers increase by one as you move from one column to the next, and by four (the number of columns) as you move from one row to the next. In the second image it's the opposite. So then I'll try to write a generalized example, with <code>M</code> rows and <code>N</code> columns:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kSr2f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kSr2f.png\" alt=\"Generalized\"></a></p>\n\n<p>Compare what I've found in my highlighted cells to @dasblinkenlight's code.</p>\n\n<p>You won't always need to draw out everything by hand in order to infer the answer\u2014the more experience you accumulate as a developer, the easier it will be to see these patterns in your head\u2014but it's a useful approach to problems like these.</p>\n"}], "owner": {"reputation": 27, "user_id": 8104836, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "alex", "link": "https://stackoverflow.com/users/8104836/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1523481082, "creation_date": 1523478174, "last_edit_date": 1523478234, "question_id": 49783903, "link": "https://stackoverflow.com/questions/49783903/how-to-store-a-2d-array-in-a-contiguous-array-in-c", "title": "How to store a 2D array in a contiguous array in C?", "body": "<p>For my assignment I have to do mathematical operations on array I'm reading in from a text file. And it has to be dynamically allocated because we don't know the size of the matrix although we do know that it will be square.So I've managed to read in the array and I've put in the code so that it knows the rows and columns at run time. But my professor wants us to use contiguous arrays and allocate the matrix like this </p>\n\n<pre><code>float* A = (float*) malloc( n * m * sizeof(float) ); \n</code></pre>\n\n<p>But I don't know how to read in the values from the text file into this array. What would I do use a for loop or something? And how would I access the elements in the array later on?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1523477691, "post_id": 49783693, "comment_id": 86582881, "body": "<code>char filename[64]; sprintf(filename, &quot;%d%s%d%s&quot;, signature, &quot;_genNo.&quot;, gen, &quot;.txt&quot;);</code> <b>--&gt;&gt;</b> <code>char filename[PATH_MAX]; sprintf(filename, &quot;&#47;%s&#47;%d%s%d%s&quot;, dirname, signature, &quot;_genNo.&quot;, gen, &quot;.txt&quot;);</code>  (and you dont need opendir())`"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523477695, "post_id": 49783693, "comment_id": 86582883, "body": "You never use <code>dir</code> except for closing. What do you think <code>DIR* dir = opendir(dirname);</code> does? Have you considered using a path for opening the output file?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1523477743, "post_id": 49783693, "comment_id": 86582907, "body": "@wildplasser :-) Two ways of saying the same."}, {"owner": {"reputation": 37, "user_id": 9080307, "user_type": "registered", "profile_image": "https://graph.facebook.com/1473224019458322/picture?type=large", "display_name": "Jan Chabik", "link": "https://stackoverflow.com/users/9080307/jan-chabik"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1523479949, "post_id": 49783693, "comment_id": 86583965, "body": "@wildplasser i did as you told me and it doesn&#39;t work :(. dirname should be a path to the catalog, right?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1523480544, "post_id": 49783693, "comment_id": 86584239, "body": "Maybe I had a few slashes too many. And: you should not ask <b>me</b> what <code>dirname</code> means, it is your program... (and: what do you mean with <i>catalog</i> ?)"}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1523477889, "creation_date": 1523477889, "answer_id": 49783837, "question_id": 49783693, "link": "https://stackoverflow.com/questions/49783693/adding-files-to-a-directory/49783837#49783837", "title": "Adding files to a directory", "body": "<p>Looks like <code>opendir()</code> does not do what you think it does. Read the docu.</p>\n\n<p>For opening an output file in a specific directory use a path with <code>fopen()</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 9080307, "user_type": "registered", "profile_image": "https://graph.facebook.com/1473224019458322/picture?type=large", "display_name": "Jan Chabik", "link": "https://stackoverflow.com/users/9080307/jan-chabik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523477889, "creation_date": 1523477348, "question_id": 49783693, "link": "https://stackoverflow.com/questions/49783693/adding-files-to-a-directory", "title": "Adding files to a directory", "body": "<pre><code>include &lt;dirent.h&gt;\ninclude &lt;stdio.h&gt;\n\nvoid printMatrixToFile(matrix_t inputMatrix, int gen, int signature, char* dirname) {\nchar filename[64];\nsprintf(filename, \"%d%s%d%s\", signature, \"_genNo.\", gen, \".txt\");\nDIR* dir = opendir(dirname);\nFILE *file = fopen(filename,\"w\");\nfprintf(file,\"%d %d\\n\", inputMatrix-&gt;x-2, inputMatrix-&gt;y-2);\nfor (int i = 1; i &lt; inputMatrix-&gt;x-1; i++) {\n    for (int j = 1; j &lt; inputMatrix-&gt;y-1; j++) {\n        fprintf(file,\"%c \", inputMatrix-&gt;macierz[i * inputMatrix-&gt;y + j]);\n    }\n    fprintf(file,\"\\n\");\n}\nclosedir(dir);\nfclose(file);\n}\n</code></pre>\n\n<p>Im creating .txt files and trying to add them to the directory.  Generating .txt is fine but they do not appear in the desired directory.</p>\n"}, {"tags": ["mysql", "c", "database", "api"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1523474923, "post_id": 49782840, "comment_id": 86581385, "body": "<a href=\"https://dev.mysql.com/doc/refman/5.7/en/load-data.html\" rel=\"nofollow noreferrer\">LOAD DATA INFILE</a>?"}, {"owner": {"reputation": 406, "user_id": 4571055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NV49QeXoHLs/AAAAAAAAAAI/AAAAAAAAABE/JxgTVmq7aao/photo.jpg?sz=128", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4571055/siddharth"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1523475490, "post_id": 49782840, "comment_id": 86581677, "body": "@squeamishossifrage But what if I want to load all of the data in <code>.sql</code> file at once ?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1523475910, "post_id": 49782840, "comment_id": 86581909, "body": "<i>The LOAD DATA INFILE statement reads rows from a text file into a table at a very high speed.</i> \u2014 isn&#39;t that what you wanted to do?"}, {"owner": {"reputation": 406, "user_id": 4571055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NV49QeXoHLs/AAAAAAAAAAI/AAAAAAAAABE/JxgTVmq7aao/photo.jpg?sz=128", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4571055/siddharth"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1523476496, "post_id": 49782840, "comment_id": 86582244, "body": "@squeamishossifrage It worked ! thanks. But could you please point mistakes/solutions to above question apart from this ? I mean above code should also work right ?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1523476851, "post_id": 49782840, "comment_id": 86582457, "body": "As far as I&#39;m aware, there is no <code>SOURCE</code> command in the MySQL API. It only exists in the <code>mysql</code> command line application as a convenient way of sourcing input from a file."}, {"owner": {"reputation": 406, "user_id": 4571055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NV49QeXoHLs/AAAAAAAAAAI/AAAAAAAAABE/JxgTVmq7aao/photo.jpg?sz=128", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4571055/siddharth"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1523477101, "post_id": 49782840, "comment_id": 86582575, "body": "But why is that query related to source not working ? Are some types of query not allowed in mysql C API ?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1523477681, "post_id": 49782840, "comment_id": 86582873, "body": "The <a href=\"https://dev.mysql.com/doc/refman/5.6/en/mysql-commands.html\" rel=\"nofollow noreferrer\">mysql command line tool</a> and the <a href=\"https://dev.mysql.com/doc/refman/5.6/en/dynindex-statement.html\" rel=\"nofollow noreferrer\">MySQL command set</a> are two different things. One contains a <code>source</code> command. The other doesn&#39;t. If you want to send your server a query that causes it to read in a .sql file, use <code>LOAD DATA INFILE</code>. The <code>source</code> command only works in the command line tool."}], "owner": {"reputation": 406, "user_id": 4571055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NV49QeXoHLs/AAAAAAAAAAI/AAAAAAAAABE/JxgTVmq7aao/photo.jpg?sz=128", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4571055/siddharth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523473979, "creation_date": 1523473979, "question_id": 49782840, "link": "https://stackoverflow.com/questions/49782840/load-mysql-dump-in-database-using-mysql-c-api", "title": "load mysql dump in database using mysql C API", "body": "<p>I want to manage a database in C language. So I am using C API for mysql.\nI am unable to find a function in C API for loading the a <code>.sql</code> file directly to mysql.\nI have gone through <a href=\"https://dev.mysql.com/doc/refman/5.7/en/c-api-functions.html\" rel=\"nofollow noreferrer\">documentation</a> but didn't find it.</p>\n\n<p>I also tried using <code>SOURCE file.sql</code> by giving it as a query but I am getting a weird error </p>\n\n<blockquote>\n  <p>source error.You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SOURCE /home/iota/Academics/4-2/NP/a/a4/cars.sql' at line 1</p>\n</blockquote>\n\n<p>Related code is below:</p>\n\n<pre><code>void connectdb(){\n\n    con = mysql_init(NULL);\n\n    if (mysql_real_connect(con, \"localhost\", \"root\", \"psswd\", NULL, 0, NULL, 0) == NULL){\n        fprintf(stderr, \"qqddd%s\\n\", mysql_error(con));\n        mysql_close(con);\n        exit(1);\n    }\n\n    mysql_query(con, \"drop database if exists testdb\");\n    mysql_query(con, \"create database testdb\");\n\n\n    if(mysql_query(con, \"use testdb\")){\n        fprintf(stderr, \"qq%s\\n\", mysql_error(con));\n        mysql_close(con);\n        exit(1);                \n    }\n\n\n    if(mysql_query(con, \"SOURCE /home/iota/Academics/4-2/NP/a/a4/cars.sql\")){ /*error here*/\n        fprintf(stderr, \"source error.%s\\n\", mysql_error(con));\n        mysql_close(con);\n        exit(1);        \n    }\n\n\n}  \n</code></pre>\n\n<p>Could you please suggest any way to do this ?\nThank you.</p>\n"}, {"tags": ["c", "arrays", "memory-management", "struct"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523476241, "post_id": 49782113, "comment_id": 86582104, "body": "<code>***int</code> is not a 2D array, nor can it point to one. A pointer is never an array! Also being a 3-star (<code>***</code>) programmer is not a compliment. It almost always signals bad interfaces/design. Said that: read about pointers and array and dynamic memory allocation. They are explained in every C textbook."}], "answers": [{"comments": [{"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1523473114, "post_id": 49782301, "comment_id": 86580455, "body": "Correct answer (upvoted) <b>but</b> please consider using a one-dimensional array instead and storing the data in <a href=\"https://en.wikipedia.org/wiki/Row-_and_column-major_order\" rel=\"nofollow noreferrer\">row-major or column-major order</a>. This will often be more efficient than a two-dimensional array due to cache locality and arguably even yields simpler code, as you don&#39;t need to allocate multiple levels of pointers. I.e., <code>t_points *array1d = malloc(width * height * sizeof(t_points))</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1523476446, "post_id": 49782301, "comment_id": 86582214, "body": "@TypeIA: That&#39;s as much wrong as using a jagged array here. The correct way is to use a 2D array and leave the index processing to the compiler. It is not a bit worse performing than manually calculating the addresses, but much less error-prone and more clear. It also lets the compiler optimise better as heuristics are mostly for simple and ideomatic patterns."}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523477828, "post_id": 49782301, "comment_id": 86582949, "body": "@Olaf I respectfully disagree; refer to <a href=\"https://stackoverflow.com/questions/17259877/1d-or-2d-array-whats-faster\">this question</a> for a full(er) treatment. There is a reason the vast majority of image processing code out there uses one-dimensional arrays exclusively."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1523478856, "post_id": 49782301, "comment_id": 86583475, "body": "@TypeIA: The simple reason is most libraries are older than C99 which introduced VLAs. In addition it&#39;s people stuck with 1990ies&#39; C noit acepting C has advanced and trying to talk users into rubbish code. Oh, and of course it&#39;s the &quot;holy grail&quot; of FORTRAN compatibility., even if there is no intend to ever use this language. Beginners should learn how to write <b>read- and maintainable</b> code in the first place, not compatibility to 1960ies languages without need. Re. &quot;vast majority&quot;: The fast majority of humans and flies eat feces. Yet I wouldn&#39;t recommend it. (not implying it is the majority)"}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523479624, "post_id": 49782301, "comment_id": 86583827, "body": "@Olaf FORTRAN compatibility? Feces?! I will let my argument stand as-is and agree to (vehemently) disagree here...!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1523471990, "creation_date": 1523471990, "answer_id": 49782301, "question_id": 49782113, "link": "https://stackoverflow.com/questions/49782113/how-should-i-allocate-my-structurepointer-to-array-of-structure/49782301#49782301", "title": "How should I allocate my structure(pointer to array of structure)?", "body": "<p>You have one too many levels of indirection in <code>points</code>.  You need one level for an array of pointers, and one more level for an array of <code>t_points</code>:</p>\n\n<pre><code>typedef struct s_map\n{\n    int         width;\n    int         height;\n    t_points    **points;\n}               t_map;\n</code></pre>\n\n<p>Then allocate as follows:</p>\n\n<pre><code>if ((!(map-&gt;points = malloc(sizeof(t_points*) * map-&gt;height)))\n    error(\"ERRROR!\");\nwhile((get_next_line(fd, &amp;tmp)) &gt; 0)   //get_next_line will read input line by line\n{\n    if (!(map-&gt;points[j] = malloc(map-&gt;width * sizeof(t_points))))\n        error(\"ERROR: malloc error\");\n    /* Some other code */;\n    j++;\n}\n</code></pre>\n\n<p>Also, <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don't cast the return value of <code>malloc</code></a>.</p>\n"}], "owner": {"reputation": 48, "user_id": 9632170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9a7d05628373354c0a865395d45817?s=128&d=identicon&r=PG&f=1", "display_name": "Kohelbekker", "link": "https://stackoverflow.com/users/9632170/kohelbekker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1523490710, "accepted_answer_id": 49782301, "answer_count": 1, "score": 2, "last_activity_date": 1523472517, "creation_date": 1523471252, "last_edit_date": 1523472517, "question_id": 49782113, "link": "https://stackoverflow.com/questions/49782113/how-should-i-allocate-my-structurepointer-to-array-of-structure", "closed_reason": "Not suitable for this site", "title": "How should I allocate my structure(pointer to array of structure)?", "body": "<p>I have such structures:</p>\n\n<pre><code>   typedef struct s_points\n{\n    double  x;\n    double  y;\n    double  z;\n    int     color;\n}               t_points;\n\ntypedef struct s_map\n{\n    int         width;\n    int         height;\n    t_points    ***points;\n}               t_map;\n</code></pre>\n\n<p>I want to read and store an 2D array inside my <code>***points;</code>, but i don't know how to allocate it properly.\nHere is my code(in map->width and map->height i store width and height of input array):</p>\n\n<pre><code>t_map   *validate(int fd, char *av)\n{\n    int         lines;\n    int         j;\n    char        *tmp;\n    t_map       *map;\n    t_points    **tmp_p;\n\n    j = 0;\n    if (!(map = (t_map*)malloc(sizeof(t_map))))\n        error(\"ERROR: malloc error\");\n    if ((!(map-&gt;points = (t_points***)malloc(sizeof(t_points**) * map-&gt;height)))\n        error(\"ERRROR!\");\n    while((get_next_line(fd, &amp;tmp)) &gt; 0)   //get_next_line will read input line by line\n    {\n        if (!(map-&gt;points[j] = (t_points**)malloc(map-&gt;width * sizeof(t_points*))))\n            error(\"ERROR: malloc error\");\n        /* Some other code */;\n        j++;\n    }\n    return(map);\n}\n</code></pre>\n\n<p>It works, but when I trying to write something inside <code>map-&gt;points[x][y];</code> I have segfault, so, as i understand, I have done mistake in memory allocation. So I can't understand how to do it in right way.</p>\n"}, {"tags": ["c", "input", "character"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 6, "creation_date": 1523471170, "post_id": 49782079, "comment_id": 86579459, "body": "What code have you tried so far, and what problem are you having?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523472637, "post_id": 49782079, "comment_id": 86580212, "body": "What keeps you from just applying your rule? I.e. scan the input character by character and if you find one outside of the set return false, otherwise true. Are you asking about how to program a character loop over input? Are you asking about how to check a character against a given set? Without those explanations, your question is unclear. It also gives the impression of being a &quot;free code writing request&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1523472667, "post_id": 49782079, "comment_id": 86580232, "body": "Research <i>scanset</i>  and <code>fscanf()</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1523472840, "post_id": 49782079, "comment_id": 86580318, "body": "&quot;The user should not be able to input characters other than &#39;a&#39;, &#39;h&#39; or &#39;$&#39;&quot;  makes me smile as I imagine C somehow making the keyboard change into a 3 key device."}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 1, "last_activity_date": 1523473146, "creation_date": 1523473146, "answer_id": 49782616, "question_id": 49782079, "link": "https://stackoverflow.com/questions/49782079/how-to-accept-only-specific-character-input-from-user-in-c/49782616#49782616", "title": "How To Accept Only Specific Character input from user In C", "body": "<p>Assuming you have the input string in hand to check, you can use <code>strspn</code>. <code>strspn</code> will return the length of the prefix of the first argument that consists entirely of characters in the second argument. Your check can then see if the returned length matches the length of the input.</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nbool check_input(const char *input) {\n    size_t n = strspn(input, \"ah$\");\n    return input[n] == '\\0';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1523482839, "creation_date": 1523482839, "answer_id": 49784855, "question_id": 49782079, "link": "https://stackoverflow.com/questions/49782079/how-to-accept-only-specific-character-input-from-user-in-c/49784855#49784855", "title": "How To Accept Only Specific Character input from user In C", "body": "<p>No, it's not possibly to add a filter to <code>stdin</code>.  You'll need to read the input, and filter it yourself.</p>\n"}], "owner": {"reputation": 1, "user_id": 9344865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bb0e93fe93230e2fe310933b9d279ca?s=128&d=identicon&r=PG&f=1", "display_name": "Phoenix", "link": "https://stackoverflow.com/users/9344865/phoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1523482876, "answer_count": 2, "score": -4, "last_activity_date": 1523482839, "creation_date": 1523471120, "last_edit_date": 1523474362, "question_id": 49782079, "link": "https://stackoverflow.com/questions/49782079/how-to-accept-only-specific-character-input-from-user-in-c", "closed_reason": "Needs more focus", "title": "How To Accept Only Specific Character input from user In C", "body": "<p>Is it possible to accept only specific character input from user In C?  </p>\n\n<p>For example:<br>\nMy input from user can consist only of certain characters like <code>a</code>, <code>h</code> or <code>$</code>. The user should not be able to input characters other than <code>a</code>, <code>h</code> or <code>$</code>.\nThat is <code>\"ahhaa$\"</code> should check true, <code>\"ahbd\"</code> should check false.</p>\n\n<p>How do I implement this in C?</p>\n"}, {"tags": ["c", "matlab", "mingw", "fftw"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1523471129, "post_id": 49781985, "comment_id": 86579440, "body": "looks like to need to link with the fftw lib. like <code>-lfftw</code> (providing the path where the library is located with <code>-L&#47;path&#47;to&#47;lib</code>"}, {"owner": {"reputation": 17, "user_id": 8250132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39a5e449401f2a5ee54ed890ef1b655?s=128&d=identicon&r=PG&f=1", "display_name": "Putham", "link": "https://stackoverflow.com/users/8250132/putham"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1523471998, "post_id": 49781985, "comment_id": 86579857, "body": "@Jean-Fran&#231;oisFabre So I do need to generate the corresponding library? How do I do this using MinGW?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1523472003, "post_id": 49781985, "comment_id": 86579860, "body": "on MinGW it would be a DLL or a .a file. The lib files are stubs AFAIR, you need DLLs anyway. You can use a binary distrib of fftw for windows, no need to rebuild it hopefully."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8250132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39a5e449401f2a5ee54ed890ef1b655?s=128&d=identicon&r=PG&f=1", "display_name": "Putham", "link": "https://stackoverflow.com/users/8250132/putham"}, "edited": false, "score": 0, "creation_date": 1523473148, "post_id": 49782373, "comment_id": 86580467, "body": "They are merciful indeed. That probably has something to do with why their libraries are so widely used. Running your command gives the error      Error using mex     Unknown file extension &#39;.dll&#39;."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 17, "user_id": 8250132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39a5e449401f2a5ee54ed890ef1b655?s=128&d=identicon&r=PG&f=1", "display_name": "Putham", "link": "https://stackoverflow.com/users/8250132/putham"}, "edited": false, "score": 0, "creation_date": 1523473181, "post_id": 49782373, "comment_id": 86580487, "body": "yes, and this FFT library is just awesome. just make sure that your data orientation is good. Don&#39;t use stride != 1 as it generates a lot of cache misses."}, {"owner": {"reputation": 17, "user_id": 8250132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39a5e449401f2a5ee54ed890ef1b655?s=128&d=identicon&r=PG&f=1", "display_name": "Putham", "link": "https://stackoverflow.com/users/8250132/putham"}, "edited": false, "score": 0, "creation_date": 1523479755, "post_id": 49782373, "comment_id": 86583885, "body": "I wasn&#39;t able to figure out why your command wasn&#39;t working, but eventually I found a computer with Visual C++ installed, and your command worked (replacing .dll with .lib). Thanks for your help"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 0, "last_activity_date": 1523472252, "last_edit_date": 1592644375, "creation_date": 1523472252, "answer_id": 49782373, "question_id": 49781985, "link": "https://stackoverflow.com/questions/49781985/linking-fftw-to-matlab-using-mingw/49782373#49782373", "title": "Linking FFTW to matlab using minGW", "body": "<p>You already made it possible for the compiler to see the FFTW include header file.</p>\n<p>Now, you need to link with the actual FFTW code.</p>\n<p>Fortunately, FFTW creators are merciful for Windows users and provided pre-built distros available here: <a href=\"http://www.fftw.org/install/windows.html\" rel=\"nofollow noreferrer\">http://www.fftw.org/install/windows.html</a></p>\n<blockquote>\n<p>We have created precompiled DLL files for FFTW 3.3.5 in single/double/long-double precision, along with the associated test programs. We hope that these are sufficient for most users, so that you need not worry about compiling FFTW</p>\n<p>These DLLs were created by us, cross-compiled from GNU/Linux using MinGW; the 64-bit version is possible thanks to the mingw-w64 project. You should be able to call them from any compiler.</p>\n</blockquote>\n<p>So MinGW is fine. In your case I would do (untested):</p>\n<pre><code>mex -LC:\\Users\\my_user_name\\Documents\\fftw-3.3.5-dll64 demo_fftw.c libfftw3-3.dll\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8250132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d39a5e449401f2a5ee54ed890ef1b655?s=128&d=identicon&r=PG&f=1", "display_name": "Putham", "link": "https://stackoverflow.com/users/8250132/putham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 49782373, "answer_count": 1, "score": 0, "last_activity_date": 1523472252, "creation_date": 1523470774, "question_id": 49781985, "link": "https://stackoverflow.com/questions/49781985/linking-fftw-to-matlab-using-mingw", "title": "Linking FFTW to matlab using minGW", "body": "<p>My goal is to mex come c code which uses the library FFTW. </p>\n\n<pre><code>#include &lt;matrix.h&gt;\n#include &lt;mex.h&gt; \n#include \"C:\\Users\\my_user_name\\Documents\\fftw-3.3.5-dll64\\fftw3.h\"\n\nvoid  mexFunction ( int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])  \n{\n    int i, j, bw, bw2_1, size, size2_1, nrow, ncol;\n    int data_is_real;\n    int cutoff;\n    int rank, howmany_rank;\n    double *rresult, *iresult, *rdata, *idata;\n    double *workspace, *weights;\n\n    fftw_plan dctPlan;\n    fftw_plan fftPlan;\n    fftw_iodim dims[1], howmany_dims[1];\n\n    bw = 2;\n    weights = (double *)malloc(sizeof(double) * 4 * bw);\n    rdata = (double *)malloc(sizeof(double) * 5 * bw);\n    dctPlan = fftw_plan_r2r_1d(2 * bw, weights, rdata, FFTW_REDFT10, FFTW_ESTIMATE);\n}\n</code></pre>\n\n<p>I'm currently using minGW and <em>not Visual C++</em>. If (from Matlab) I call </p>\n\n<pre><code>&gt;&gt;mex -c -LC:\\Users\\my_user_name\\Documents\\fftw-3.3.5-dll64 demo_fftw.c\n</code></pre>\n\n<p>it compiles correctly, but running</p>\n\n<pre><code>&gt;&gt; mex -LC:\\Users\\my_user_name\\Documents\\fftw-3.3.5-dll64 demo_fftw.c\nBuilding with 'MinGW64 Compiler (C)'.\nError using mex C:\\Users\\MPUTHA~1\\AppData\\Local\\Temp\\mex_200676192178726_4216\\demo_fftw.obj:demo_fftw.c:(.text+0x40):undefined reference to `__imp_fftw_plan_r2r_1d'collect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>I think that the error is because although fftw_plan_r2r_1d is declared in fftw3.h, it is defined somewhere else where the linker can't find it. I know that if I'm using Visual C++, then the .lib files contain the definitions, but the the README only tells you to compile the lib's if you are using Visual C++, and says nothing about using mingw.</p>\n\n<p>What's the equivalent of a .lib file for mingw? Do I still need .lib's? If so, how do I compile them?</p>\n\n<p>I apologize if this question is a duplicate, but I've looked around a bit and find lots of advice that works if you are using visual C++, but none concerning mingw.</p>\n"}, {"tags": ["c", "pointers", "reverse", "c-strings"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1523470816, "post_id": 49781971, "comment_id": 86579295, "body": "You never terminate the destination string."}, {"owner": {"reputation": 1, "user_id": 9632200, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BiXrjPfGO8I/AAAAAAAAAAI/AAAAAAAAAEo/Du7pBmxnaEY/photo.jpg?sz=128", "display_name": "StealthCoder", "link": "https://stackoverflow.com/users/9632200/stealthcoder"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1523470870, "post_id": 49781971, "comment_id": 86579319, "body": "So just add &#39;\\0&#39; or &quot;\\0&quot; to the end?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1523470906, "post_id": 49781971, "comment_id": 86579331, "body": "Also <code>dest</code> is pointing to the <i>end</i> of it. I would really suggest you to rethink the algorithm, as it looks very awkward."}, {"owner": {"reputation": 1, "user_id": 9632200, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BiXrjPfGO8I/AAAAAAAAAAI/AAAAAAAAAEo/Du7pBmxnaEY/photo.jpg?sz=128", "display_name": "StealthCoder", "link": "https://stackoverflow.com/users/9632200/stealthcoder"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1523471477, "post_id": 49781971, "comment_id": 86579605, "body": "Can you provide some code to help me out. I am still pretty new to C"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1523471512, "post_id": 49781971, "comment_id": 86579624, "body": "There are tons of codes around if you search for &quot;reverse string&quot;."}], "owner": {"reputation": 1, "user_id": 9632200, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BiXrjPfGO8I/AAAAAAAAAAI/AAAAAAAAAEo/Du7pBmxnaEY/photo.jpg?sz=128", "display_name": "StealthCoder", "link": "https://stackoverflow.com/users/9632200/stealthcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1523471022, "answer_count": 0, "score": 0, "last_activity_date": 1523470720, "creation_date": 1523470720, "question_id": 49781971, "link": "https://stackoverflow.com/questions/49781971/why-does-this-string-with-a-pointer-return-a-random-set-of-symbols", "closed_reason": "Duplicate", "title": "Why does this string with a pointer return a random set of symbols?", "body": "<p>For a class I am writing a snippet of code to take a pointer that points to a string, reverse it, and set it to another string pointer. I get the code running fine and it reverses the string well. The problem occurs when I try to print the value of the reversed pointer. Here is the code:</p>\n\n<pre><code>char * reverse (char *dest, char *src)\n{\n  int length=0;\n  char c;\n\n  while(*src != '\\0')\n  {\n    src++;\n    length++;\n  }\n  for(int a = 0; a&lt;length; a++){\n    c=(*--src);\n    //Print out the value of c\n    printf(\"Before dest: %c\\n\", c);\n    *dest= c;\n    //Print out the value of *dest\n    printf(\"-After dest: %c\\n\", *dest);\n    dest++;\n  }\n  printf(\"Input was: %s\\n\", src);\n  printf(\"Output should be: %s\\n\",dest);\n  return dest;\n}\n</code></pre>\n\n<p>And here is what it returns with input being \"hello\" and a pointer that points to a blank array of chars.</p>\n\n<pre><code>Before dest: o\n-After dest: o\nBefore dest: l\n-After dest: l\nBefore dest: l\n-After dest: l\nBefore dest: e\n-After dest: e\nBefore dest: H\n-After dest: H\nInput was: Hello\nOutput should be: \u00f9.\u2588\nReverse \u00f9.\u2588\n</code></pre>\n\n<p>Before and after dest lines are there for debugging.\nThe reverse line is what is returned from the function\nThe output is different every time. I am completely dumbfounded and my professors say that this should be correct.\nAny help is appreciated</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 1, "creation_date": 1523471043, "post_id": 49781924, "comment_id": 86579394, "body": "What does <code>sizeof(word2)</code> equal?"}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1523476253, "post_id": 49781924, "comment_id": 86582109, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15738311/reading-a-txt-file-into-a-2-d-array\">Reading a .txt file into a 2-d array</a>"}], "answers": [{"tags": [], "owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "is_accepted": false, "score": 0, "last_activity_date": 1523472766, "last_edit_date": 1523472766, "creation_date": 1523471848, "answer_id": 49782261, "question_id": 49781924, "link": "https://stackoverflow.com/questions/49781924/how-to-save-the-contents-of-a-text-file-into-a-2-d-array/49782261#49782261", "title": "How to save the contents of a text file into a 2-D Array?", "body": "<p>In C when you pass an array to a function it passes it as a pointer.\nI'm assuming you did <code>#define B 200</code> and <code>#define N 20</code> to get this to compile. </p>\n\n<p>Your <code>fgets</code> call is equivalent to:</p>\n\n<pre><code>if(fgets(word2,sizeof(char**), read)!= NULL)\n</code></pre>\n\n<p>Increase that size if you want to read more data. </p>\n\n<p>Also your array seems to have an odd size to me because 20 characters is still not enough to hold that text, perhaps you meant <code>word2[N][B]</code>? 20 rows that can hold 199 characters each?</p>\n\n<pre><code>if(fgets(word2[0], sizeof(char)*B, read)!= NULL)\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8813946, "user_type": "registered", "profile_image": "https://graph.facebook.com/788018068043973/picture?type=large", "display_name": "Karen Jangra", "link": "https://stackoverflow.com/users/8813946/karen-jangra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1523472766, "creation_date": 1523470543, "question_id": 49781924, "link": "https://stackoverflow.com/questions/49781924/how-to-save-the-contents-of-a-text-file-into-a-2-d-array", "title": "How to save the contents of a text file into a 2-D Array?", "body": "<p>I have created a text file called \"thetext.txt\" and ithas a quote.\nThe quote is:\n\"It would be better for the true physics if there where no mathematicians on earth.\n-Daniel Bernoulli\"\nNow, I want to save this in a 2-D Array[200][[20], to count the words.\nIt only prints the string(It would).</p>\n\n<p>What I have done:</p>\n\n<pre><code>void countwords(char word2[B][N]){\n    FILE *read;\n    char c;\n    int i, j;\n    int words=0, x=0;\n    if((read=fopen(\"thetext.txt\", \"rt\"))==NULL){\n        printf(\"Cannot open File.\");\n        return ;\n    }\n    if(fgets(word2, sizeof(word2), read) != NULL){\n        printf(\"%s\",word2);\n    }\n    fclose(read);\n    return ;\n}\n</code></pre>\n"}, {"tags": ["c", "parameters"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1523469949, "post_id": 49781746, "comment_id": 86578845, "body": "<code>char *variable;</code> doesn&#39;t point anywhere. You need to <a href=\"http://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\"><code>malloc()</code></a> some memory."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1523469958, "post_id": 49781746, "comment_id": 86578849, "body": "Just about any beginners book or tutorial, good <i>and</i> bad, would have told you that this is wrong on many levels."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1523469978, "post_id": 49781746, "comment_id": 86578860, "body": "@JohnnyMopp That&#39;s the least of the problems, actually."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1523470283, "post_id": 49781746, "comment_id": 86579018, "body": "<code>scanf(&quot;%s&quot;, foo);</code> needs a valid address <code>foo</code> that points to enough memory to hold the string you want to read plus one more byte for the terminating zero. That is, it needs to be a valid pointer to a string buffer. You&#39;ve provided the address of a single character pointer. Do a google search or search on this site for &quot;C reading string with scanf&quot;."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1523470527, "post_id": 49781746, "comment_id": 86579146, "body": "@Someprogrammerdude Well, I wouldn&#39;t say &quot;least&quot;...It&#39;s just as important as the other major error. And definitely more important than the minor issues (not checking return code from <code>scanf</code> and not specifying a max string width)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1523471654, "post_id": 49781746, "comment_id": 86579682, "body": "<code>scanf(&quot;%s&quot;)</code> is just as dangerous as <code>gets</code>."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1523470187, "creation_date": 1523470187, "answer_id": 49781847, "question_id": 49781746, "link": "https://stackoverflow.com/questions/49781746/which-is-the-best-way-for-declare-and-get-from-input-a-char-variable/49781847#49781847", "title": "Which is the best way for declare and get from input a char variable?", "body": "<p>There are two problems here.</p>\n\n<p>First, the <code>%s</code> format specifier to <code>scanf</code> expects a <code>char *</code> argument pointing to a <code>char</code> array (either dynamically or statically allocated).  You're passing it a <code>char **</code>, which is an incompatible type.  Remove the address-of operator <code>&amp;</code> to pass the correct type:</p>\n\n<pre><code>scanf(\"%s\",variable);\n</code></pre>\n\n<p>Second, even with this fix, <code>variable</code> is uninitialized.  That means that <code>scanf</code> will attempt to write to an invalid memory address.  You need to either declare <code>variable</code> as an array:</p>\n\n<pre><code>char variable[50];\n</code></pre>\n\n<p>Or dynamically allocate memory for it:</p>\n\n<pre><code>char *variable = malloc(50);\n</code></pre>\n\n<p>You'll also need to specify a field width in the <code>scanf</code> specifier so it knows the maximum number of characters it can read:</p>\n\n<pre><code>scanf(\"%49s\",variable);\n</code></pre>\n\n<p>Note that the field width is one less than the size of the array to leave room for the terminating null byte.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 9039098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8cll.jpg?s=128&g=1", "display_name": "Ahmad Raza", "link": "https://stackoverflow.com/users/9039098/ahmad-raza"}, "is_accepted": false, "score": 0, "last_activity_date": 1523477375, "creation_date": 1523477375, "answer_id": 49783704, "question_id": 49781746, "link": "https://stackoverflow.com/questions/49781746/which-is-the-best-way-for-declare-and-get-from-input-a-char-variable/49783704#49783704", "title": "Which is the best way for declare and get from input a char variable?", "body": "<p>You've used the &amp; operator in scanf(it is used mostly), but for an string or array this does not work. Actually an array name is a pointer to first character of character array that mean it is the address of first character in character array. Now when you use &amp; operator this passes address of address to first character of array, while required argument is of type char* and you're passing char**. Simply use as follow:</p>\n\n<pre><code>scanf(\"%s\", mystring); // Good and works good\nscanf(\"%s\", &amp;mystring); //bad and does not works\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7441472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41b818a4dd72f818c3b1cad2bf67cbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Riki AA", "link": "https://stackoverflow.com/users/7441472/riki-aa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1523488381, "accepted_answer_id": 49781847, "answer_count": 2, "score": -2, "last_activity_date": 1524775007, "creation_date": 1523469808, "last_edit_date": 1524775007, "question_id": 49781746, "link": "https://stackoverflow.com/questions/49781746/which-is-the-best-way-for-declare-and-get-from-input-a-char-variable", "closed_reason": "Not suitable for this site", "title": "Which is the best way for declare and get from input a char variable?", "body": "<pre><code>  char *variable;\n  printf(\"write variable\");\n  scanf(\"%s\",&amp;variable);\n</code></pre>\n\n<p>I tried this part of code for get a char variable from input but it doesn't work. I don't know how to get it, can I have some tips? </p>\n\n<p>Ps: Thanks for the help, and sorry for the basic question</p>\n"}, {"tags": ["c", "file", "split", "strtok"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1523469367, "creation_date": 1523469367, "answer_id": 49781631, "question_id": 49781576, "link": "https://stackoverflow.com/questions/49781576/read-and-split-undefined-strings-from-txt-file-in-c/49781631#49781631", "title": "Read and split undefined strings from txt file in C", "body": "<p>You only call <code>fgets</code> once, so you only ever read a single line of text.</p>\n\n<p>You need to loop over calls to <code>fgets</code> until there's nothing left.</p>\n\n<pre><code>while (fgets(text,R,file)) {\n    splitter =strtok(text,\" ,.-;\");\n    while (splitter!=NULL)\n    {\n       printf(\"%s\\n\",splitter);\n        splitter=strtok(NULL,\" ,.-;\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9085008, "user_type": "registered", "profile_image": "https://graph.facebook.com/1194773200656221/picture?type=large", "display_name": "Konstantinos Loukaidis", "link": "https://stackoverflow.com/users/9085008/konstantinos-loukaidis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 49781631, "answer_count": 1, "score": 0, "last_activity_date": 1523469414, "creation_date": 1523469187, "last_edit_date": 1523469414, "question_id": 49781576, "link": "https://stackoverflow.com/questions/49781576/read-and-split-undefined-strings-from-txt-file-in-c", "title": "Read and split undefined strings from txt file in C", "body": "<pre><code>FILE *file;\nchar text[R];\nchar *splitter;\nfgets(text,R,file);\nsplitter =strtok(text,\" ,.-;\");\nwhile (splitter!=NULL)\n{\n    printf(\"%s\\n\",splitter);\n    splitter=strtok(NULL,\" ,.-;\");\n}\n</code></pre>\n\n<p>The txt file says:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Hello lad,\nhow are you\ndoing\n</code></pre>\n\n<p>(this is a random text I wrote for testing)</p>\n\n<p>This code will only split the \"hello lad\" and won't move up to the next line.\nI could do it with arrays but the exercise is to read a random txt by the user so I have undefined lines and strings per line.\nCan somebody give any hints?\nOne of my thoughts was to count lines and strings but I wanted another opinion first...\nThanks in advance</p>\n"}, {"tags": ["c", "parallel-processing", "openmp"], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 1, "last_activity_date": 1523475758, "creation_date": 1523475758, "answer_id": 49783278, "question_id": 49781536, "link": "https://stackoverflow.com/questions/49781536/assuring-that-buffer-access-is-private-using-openmp/49783278#49783278", "title": "Assuring that buffer access is private using openmp", "body": "<p>Your example access to <code>buffer1[i] = x;</code> is fine. It works because in the work-sharing loop, no two threads will ever get the same <code>i</code> and therefore no two threads will ever access the same memory.</p>\n\n<p>Note that technically, <code>buffer1[i]</code> is <em>not private</em>, private applies only to variables. <code>buffer1</code> is a <em>shared variable</em>.</p>\n\n<p>You <strong>must not</strong> access any other element of <code>buffer1</code> in any way within the loop. E.g. <strong>do not</strong> do anything like <code>foo = buffer1[i-1]</code>.</p>\n\n<p>This all works for regular C arrays or pointers, but there must not be any aliasing in effect.</p>\n"}], "owner": {"reputation": 1207, "user_id": 6810148, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f62151f8b05182639c684bea38eaefa4?s=128&d=identicon&r=PG&f=1", "display_name": "Kristofer", "link": "https://stackoverflow.com/users/6810148/kristofer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 49783278, "answer_count": 1, "score": 0, "last_activity_date": 1523475758, "creation_date": 1523469022, "question_id": 49781536, "link": "https://stackoverflow.com/questions/49781536/assuring-that-buffer-access-is-private-using-openmp", "title": "Assuring that buffer access is private using openmp", "body": "<p>Suppose I have the following function:</p>\n\n<pre><code>void fun (){\n\n#pragma omp parallel private(i, x, d0, d1)\n    {\n        #pragma omp for\n        for (i = 0; i &lt; n; i++) {\n\n            d0 = calc_dist();\n            d1 = calc_dist();\n            x = ((d0 &lt; d1) ? 0 : 1);\n            buffer1[i] = x;\n\n            #pragma omp atomic update\n            group_size[x] += 1;\n\n\n        } \n\n    }\n}\n</code></pre>\n\n<p>I want to know if accessing buffer1 <code>buffer1[i] = x</code> is still private having the fact that <code>i</code> and <code>x</code> are set to be private variables in the pragma section? If not, is it possible to allow buffer access private?</p>\n"}, {"tags": ["c", "opengl"], "comments": [{"owner": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 1, "creation_date": 1523469298, "post_id": 49781509, "comment_id": 86578490, "body": "How do you want to map those values?  Do you mean <code>0=black</code>, <code>1=red</code>, <code>2=blue</code>, and <code>3=green</code>?  I don&#39;t understand the mapping process you are proposing."}, {"owner": {"reputation": 35, "user_id": 6684095, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1ba6c7b5270dead2ee7d296882b36d06?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Konz", "link": "https://stackoverflow.com/users/6684095/benjamin-konz"}, "reply_to_user": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 0, "creation_date": 1523469372, "post_id": 49781509, "comment_id": 86578534, "body": "exactly, where black/red/blue/green is some arbitrary rgb value"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1523512194, "post_id": 49781509, "comment_id": 86592655, "body": "you can use 1D texture with the colors for remaping ..."}, {"owner": {"reputation": 35, "user_id": 6684095, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1ba6c7b5270dead2ee7d296882b36d06?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Konz", "link": "https://stackoverflow.com/users/6684095/benjamin-konz"}, "edited": false, "score": 0, "creation_date": 1523517333, "post_id": 49781509, "comment_id": 86595294, "body": "so something like this? <code>glTexImage(glTexture_1D, 0, glRGB, 160 * 144, 0, glRGB, glUNSIGNED_BYTE, data)</code>?"}], "owner": {"reputation": 35, "user_id": 6684095, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1ba6c7b5270dead2ee7d296882b36d06?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Konz", "link": "https://stackoverflow.com/users/6684095/benjamin-konz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 3, "answer_count": 0, "score": 0, "last_activity_date": 1523469297, "creation_date": 1523468918, "last_edit_date": 1523469297, "question_id": 49781509, "link": "https://stackoverflow.com/questions/49781509/opengl-texture-color-mapping", "title": "OpenGL texture color mapping", "body": "<p>I would like to efficiently perform a mapping from integers to colors on a buffer sent to the GPU as a texture object. </p>\n\n<p>Currently my code looks like this:</p>\n\n<pre><code>// setup the rendering pipeline and init the texture object\nglBindTexture(glTEXTURE_2D, texture);\n\n// data is an array of integers ranging from 0 to 3 of length 144 * 160 like this: [0, 1, 2, 3, 3, 2, 1, ..., 1]\nglTexImage2D(glTexture_2D, 0, /* not sure what to put here */, 160, 144, glRGB, /* also not sure what to put here */, data);\n</code></pre>\n\n<p>I want to be able to map the numbers from 0 to 3 into a RGB value. </p>\n\n<p>I feel like I should be able to do this in a fragment shader, but how should I pass my data into the shader? </p>\n\n<p>My fragment shader looks like this:</p>\n\n<pre><code>#version 330 core\n\nout vec4 FragColor;\n\nin vec2 TexCoord;\n\nuniform sampler2D screen;\n\nvoid main()\n{\n    /*\n     * I would really like to be able to get the byte value\n     * at the texture's coordinate that we are processing and \n     * use an if ... else if ... else ... block to map the texture\n     */\n     // FragColor = texture(screen, TexCoord);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "makefile", "linker", "gnu-make"], "comments": [{"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1523469469, "post_id": 49781470, "comment_id": 86578589, "body": "BTW, according to your section #2, <code>A .c file is dead if none of its functions&#47;data is exposed through one or more imported .h files</code> we can deduct that <code>c</code> file that some of it&#39;s functions\\data are used in another <code>c</code> file using forward declaration is considered dead, but I think that is not what you meant"}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1523469632, "post_id": 49781470, "comment_id": 86578678, "body": "Yeah, that&#39;s not what I mean. Well, I must admit I couldn&#39;t find the inspiration to properly define a &quot;dead c-file&quot;. But I hope anyone reading the full question, somehow gets the point what I mean by &quot;dead&quot;. If you have a good definition in mind, please share with me. It would be helpful :-)"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1523482755, "post_id": 49781470, "comment_id": 86585048, "body": "I&#39;d probably just build all of the object files, then try removing them one by one to see when the linker complained, and automating that approach if there were too many to do by hand; that&#39;s the crude-but-effective approach."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1523491999, "post_id": 49781470, "comment_id": 86587645, "body": "Regarding the insertion of preprocessor macros, this is an issue with CMD.EXE/shell/Makefile quotation, not specific to what you&#39;re trying to do here. You should ask a separate question about that, in which you follow the <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> instructions to demonstrate the problem. We will also need to know exactly which command-line environment you are using, and we will need to see the <i>complete and unedited</i> text of the error messages."}], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 6, "last_activity_date": 1523471094, "creation_date": 1523471094, "answer_id": 49782068, "question_id": 49781470, "link": "https://stackoverflow.com/questions/49781470/how-to-identify-dead-c-files-in-a-large-c-project/49782068#49782068", "title": "How to identify &quot;dead c-files&quot; in a large C-project?", "body": "<p>If you try <strong>NOT</strong> passing on the arguments -ffunction-sections and -fdata-sections to the gcc compiler, the linker will be forced to link the entire object if any source or data is used.\nThen pass the arguments -Wl,--gc-sections and -Wl,--print-gc-sections to the gcc linker and the linker should tell you which object files were completely unused.</p>\n"}, {"comments": [{"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1523473517, "post_id": 49782138, "comment_id": 86580660, "body": "Thank you very much. I&#39;ve applied your solution, and written down the results in <code>First proposed solution</code>."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 4, "last_activity_date": 1523471340, "creation_date": 1523471340, "answer_id": 49782138, "question_id": 49781470, "link": "https://stackoverflow.com/questions/49781470/how-to-identify-dead-c-files-in-a-large-c-project/49782138#49782138", "title": "How to identify &quot;dead c-files&quot; in a large C-project?", "body": "<p>If you are using GCC specifically, <code>gcc -H -fsyntax-only main.c</code> will print a list of every file transitively included by <code>main.c</code>, instead of compiling it.  (It will still parse the file and report syntax errors.  That's unavoidable.)</p>\n\n<p>You can do this for every file that definitely must be included in your project, and then crunch the output lists to determine the full set of \"live\" C source files.  I can't help you with that part because you didn't explain exactly how the header files are related to the source files.</p>\n\n<p>You will probably need to weed out headers belonging to whatever subset of the C standard library you have available.</p>\n"}, {"comments": [{"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1523480606, "post_id": 49782187, "comment_id": 86584267, "body": "Why not use <code>--print-gc-sections</code>"}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "reply_to_user": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1523494000, "post_id": 49782187, "comment_id": 86588021, "body": "@technosaurus because flag <code>--print-gc-sections</code> with compilation flags <code>-ffunction-sections</code> and <code>-fdata-sections</code> will cause objects that only parts of their functions\\data (which becomes sections) are discarded to be printed, which means that <code>live</code> file was printed, along with <code>dead</code> files which got all of their functions\\data discarded"}], "tags": [], "owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "is_accepted": false, "score": 1, "last_activity_date": 1523472565, "last_edit_date": 1523472565, "creation_date": 1523471530, "answer_id": 49782187, "question_id": 49781470, "link": "https://stackoverflow.com/questions/49781470/how-to-identify-dead-c-files-in-a-large-c-project/49782187#49782187", "title": "How to identify &quot;dead c-files&quot; in a large C-project?", "body": "<p>If using compilation flags <code>-ffunction-sections</code> and <code>-fdata-sections</code> is a must in your project, then for GCC you can use the following post link approach (else, cleblanc's answer is the easiest solution)-</p>\n\n<p>For every object file listed in <code>Discarded input sections</code> inside the <code>map</code> file, if this object file is not listed in <code>text</code>, <code>data</code> and <code>bss</code> sections, (i.e only in <code>Discarded input sections</code>, debug symbols section, <code>Cross Reference Table</code>, ...) it means that this file is \"dead\" according to your definition, this file was compiled, linked, but then was found \"dead\" and totally discarded. </p>\n"}], "owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1523473971, "creation_date": 1523468766, "last_edit_date": 1523473971, "question_id": 49781470, "link": "https://stackoverflow.com/questions/49781470/how-to-identify-dead-c-files-in-a-large-c-project", "title": "How to identify &quot;dead c-files&quot; in a large C-project?", "body": "<p>Note: before marking this as a duplicate, please read the whole question,<br>\nespecially chapter 5 &nbsp; :-)</p>\n\n<h2>1. Use case</h2>\n\n<p>Suppose you have a large C-project with numerous <code>.h</code> and <code>.c</code> files. But most of those files are never used. This is typically the case for embedded software projects. The drivers for each peripheral of your microcontroller are present somewhere in the project, but you typically only use a few of them. If - for example - I use the usb-driver and the uart-driver, I will import the corresponding <code>.h</code> files in my <code>main.c</code>:</p>\n\n<pre><code>#include \"stm32f7xx_usb.h\"\n#include \"stm32f7xx_uart.h\"\n</code></pre>\n\n<p>Okay ... I have overly simplified the use case, but you get the point.</p>\n\n<p>&nbsp;<br></p>\n\n<h2>2. Dead files</h2>\n\n<p>Let's agree on the following quick-and-dirty definition for a dead file:</p>\n\n<blockquote>\n  <p>A dead <code>.c</code> file is a file which functions or data will never be reached, because the corresponding <code>.h</code> file is not imported.</p>\n</blockquote>\n\n<p>I know, it's quite an unclean definition. There is not always a one-to-one relationship between <code>.c</code> and <code>.h</code> files. So perhaps I should say:</p>\n\n<blockquote>\n  <p>A <code>.c</code> file is dead if none of its functions/data is exposed through one or more imported <code>.h</code> files.</p>\n</blockquote>\n\n<p>Usually in embedded software, we enclose such import statements within an <code>#ifdef</code> block:</p>\n\n<pre><code>#ifdef USE_USB\n    #include \"stm32f7xx_usb.h\"\n#endif\n</code></pre>\n\n<p>This means that the state \"dead\" or \"alive\" can be changed at compile-time, depending on which preprocessor macros you inject when compiling. Therefore, let us assume that <b>all preprocessor macros injected at compile-time are known</b>. They can simply be found in the makefile.</p>\n\n<p>&nbsp;<br></p>\n\n<h2>3. Ultimate goal:<br>\n&nbsp;&nbsp;&nbsp;&nbsp;distinguish dead files before compilation</h2>\n\n<p>Sometimes one of the dead files has an error. It is very frustrating when that error freezes the whole compilation process - especially because the file won't be used anyhow. Knowing somehow which files are dead before compilation, can be very useful.<br>\nBut I have honestly no idea what tool can be used for this. And how.</p>\n\n<p>PS: of course some kind of precompiler or parser should run anyhow. But that's okay.</p>\n\n<p>&nbsp;<br></p>\n\n<h2>4. Less favorable goal:<br>\n&nbsp;&nbsp;&nbsp;&nbsp;distinguish dead files after compilation</h2>\n\n<p>I think I'm getting closer to this goal, but I'm not there yet. I'll show where I am right now.</p>\n\n<p>Passing on the arguments <code>-ffunction-sections</code> and <code>-fdata-sections</code> to the gcc compiler, results in cleanly separated function- and datablocks in the generated object files.<br>\nNext, I pass the arguments <code>-Wl,--gc-sections</code> and <code>-Wl,--print-gc-sections</code> to the gcc linker. The linker kicks out all unreacheable data and functions, resulting in a much smaller binary file. Also, the linker prints out what he's throwing away:</p>\n\n<pre><code>...\nld.exe: Removing unused section '.text.HAL_UART_Receive_IT' in file 'build\\Drivers\\..\\stm32f7xx_hal_uart.o'\nld.exe: Removing unused section '.text.HAL_UART_Transmit_DMA' in file 'build\\Drivers\\..\\stm32f7xx_hal_uart.o'\nld.exe: Removing unused section '.text.HAL_UART_Receive_DMA' in file 'build\\Drivers\\..\\stm32f7xx_hal_uart.o'\nld.exe: Removing unused section '.text.HAL_UART_DMAPause' in file 'build\\Drivers\\..\\stm32f7xx_hal_uart.o'\nld.exe: Removing unused section '.text.HAL_UART_DMAResume' in file 'build\\Drivers\\..\\stm32f7xx_hal_uart.o'\nld.exe: Removing unused section '.text.HAL_UART_DMAStop' in file 'build\\Drivers\\..\\stm32f7xx_hal_uart.o'\nld.exe: Removing unused section '.text.HAL_UART_IRQHandler' in file 'build\\Drivers\\..\\stm32f7xx_hal_uart.o'\nld.exe: Removing unused section '.text.UART_DMATransmitCplt' in file 'build\\Drivers\\..\\stm32f7xx_hal_uart.o'\n...\n</code></pre>\n\n<p>This is great, but it doesn't tell me if the whole file is dead. Perhaps a small part of the file is still used somewhere - a single function maybe - such that the file should be considered \"alive\".<br>\nFor that reason, I cannot agree with the answer of @Mike Kinghan on this post:\n<a href=\"https://stackoverflow.com/questions/38048977/gcc-linker-get-list-of-unused-objects\">gcc linker get list of unused objects</a></p>\n\n<p>I heard that the state of a file (dead or alive) can be found in the <code>output.map</code> file. I've opened the <code>output.map</code> file, but quickly gave up reading it. It is 30.342 lines! If you believe it can be found in the <code>output.map</code> file, please tell me where to look :-).</p>\n\n<p>&nbsp;<br></p>\n\n<h2>5. Why I need to know the dead files</h2>\n\n<p>The exact reasons why will lead us too far here. It would only distract the focus. Just assume it's important ;-)</p>\n\n<p>&nbsp;<br></p>\n\n<h2>6. Why this is not a duplicate question</h2>\n\n<p>I know there are several questions on StackOverflow related to \"dead code\" dectection in C-programs. However, I'm not interested in dead code. I'm interested in dead files. Of course these are related topics, but they are not duplicates.<br>\nAfter all, files that are alive can still contain a lot of dead code. As long as there's at least one function or variable exposed through an imported <code>.h</code> file, I would consider the file as \"alive\".</p>\n\n<p>Even this question about unused object files (<a href=\"https://stackoverflow.com/questions/38048977/gcc-linker-get-list-of-unused-objects\">gcc linker get list of unused objects</a>) is not a duplicate. My ultimate goal is to detect the state of a file (dead or alive) BEFORE compilation takes place.\n&nbsp;<br>\n&nbsp;<br></p>\n\n<hr>\n\n<p>Thank you very much @cleblanc, @zwol and @user2162550 for helping me out! I've focused a bit more on the answer of @zwol, because it avoids compilation alltogether. I'll show below what I got.</p>\n\n<h2>&#62; First proposed solution</h2>\n\n<p>This solution comes from @zwol. I issue the following command in my terminal:</p>\n\n<pre><code>arm-none-eabi-gcc -H -fsyntax-only main.c\n    -IX:\\source\\Inc\n    -IX:\\source\\Drivers\\CMSIS\\RTOS\\Template\n    -IX:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc\n    -IX:\\source\\Drivers\\CMSIS\\Include\n    -IX:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc\\Legacy\n    -IX:\\source\\Drivers\\CMSIS\\Device\\ST\\STM32F7xx\\Include\n</code></pre>\n\n<p>This command should be <i>on a single line</i>, but for clarity I've inserted some linebreaks.</p>\n\n<p>I also tried to add the following preprocessor macros to the command:</p>\n\n<pre><code>    -DSTM32F746xx\n    -DARM_MATH_CM7\n    -D__weak=\"__attribute__((weak))\"\n    -D__packed=\"__attribute__((__packed__))\"\n    -DUSE_HAL_DRIVER\n</code></pre>\n\n<p>But it causes the command to fail. So I had no choice but to insert these macros directly into the <code>main.c</code> file at the top:</p>\n\n<pre><code>#define STM32F746xx\n#define ARM_MATH_CM7\n#define __weak __attribute__((weak))\n#define __packed __attribute__((__packed__)\n#define USE_HAL_DRIVER\n</code></pre>\n\n<p>&nbsp;<br>\nNow the command works.</p>\n\n<p>I get quite a lot of output. Please note that <code>X:\\</code> is in fact the location of the C-project root folder on my harddrive. I've substituted that root folder path by <code>X:\\</code> for clarity.</p>\n\n<pre><code>. X:\\source\\Inc/main.h\n. X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal.h\n.. X:\\source\\Inc/stm32f7xx_hal_conf.h\n... X:\\source\\Inc/main.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_rcc.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_def.h\n..... X:\\source\\Drivers\\CMSIS\\Device\\ST\\STM32F7xx\\Include/stm32f7xx.h\n...... X:\\source\\Drivers\\CMSIS\\Device\\ST\\STM32F7xx\\Include/stm32f746xx.h\n....... X:\\source\\Drivers\\CMSIS\\Include/core_cm7.h\n........ c:\\gnu_arm_embedded_toolchain\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stdint.h\n......... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\stdint.h\n.......... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\machine\\_default_types.h\n........... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\features.h\n............ c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\_newlib_version.h\n.......... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\_intsup.h\n.......... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\_stdint.h\n........ X:\\source\\Drivers\\CMSIS\\Include/core_cmInstr.h\n......... X:\\source\\Drivers\\CMSIS\\Include/cmsis_gcc.h\n........ X:\\source\\Drivers\\CMSIS\\Include/core_cmFunc.h\n........ X:\\source\\Drivers\\CMSIS\\Include/core_cmSimd.h\n....... X:\\source\\Drivers\\CMSIS\\Device\\ST\\STM32F7xx\\Include/system_stm32f7xx.h\n...... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal.h\n..... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/Legacy/stm32_hal_legacy.h\n..... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\stdio.h\n...... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\_ansi.h\n....... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\newlib.h\n....... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\config.h\n........ c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\machine\\ieeefp.h\n...... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\cdefs.h\n....... c:\\gnu_arm_embedded_toolchain\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h\n...... c:\\gnu_arm_embedded_toolchain\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h\n...... c:\\gnu_arm_embedded_toolchain\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stdarg.h\n...... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\reent.h\n....... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\_ansi.h\n....... c:\\gnu_arm_embedded_toolchain\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h\n....... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\_types.h\n........ c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\machine\\_types.h\n........ c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\lock.h\n........ c:\\gnu_arm_embedded_toolchain\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h\n...... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\types.h\n....... c:\\gnu_arm_embedded_toolchain\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h\n....... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\machine\\endian.h\n........ c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\machine\\_endian.h\n....... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\select.h\n........ c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\_sigset.h\n........ c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\_timeval.h\n........ c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\timespec.h\n......... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\_timespec.h\n....... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\_pthreadtypes.h\n....... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\machine\\types.h\n...... c:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\sys\\stdio.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_rcc_ex.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_gpio.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_gpio_ex.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_dma.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_dma_ex.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_cortex.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_eth.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_flash.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_flash_ex.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_i2c.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_i2c_ex.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_pwr.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_pwr_ex.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_uart.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_uart_ex.h\n... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_pcd.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_ll_usb.h\n.... X:\\source\\Drivers\\STM32F7xx_HAL_Driver\\Inc/stm32f7xx_hal_pcd_ex.h\n\nMultiple include guards may be useful for:\nX:\\source\\Drivers\\CMSIS\\Include/core_cm7.h\nX:\\source\\Drivers\\CMSIS\\Include/core_cmFunc.h\nX:\\source\\Drivers\\CMSIS\\Include/core_cmInstr.h\nX:\\source\\Drivers\\CMSIS\\Include/core_cmSimd.h\nc:\\gnu_arm_embedded_toolchain\\arm-none-eabi\\include\\machine\\_endian.h\n</code></pre>\n\n<p>I will need some more time to wrap my head around this result. But it definitely feels like getting closer to what I eventually need. Thank you @zwol!</p>\n\n<p>PS: If you know why I cannot inject preprocessor macros into the command, please tell me ;-)</p>\n\n<p>&nbsp;<br>\n&nbsp;<br>\n&nbsp;<br></p>\n"}, {"tags": ["c", "linux", "linux-kernel", "linux-device-driver", "block-device"], "answers": [{"comments": [{"owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "edited": false, "score": 1, "creation_date": 1523525314, "post_id": 49781937, "comment_id": 86600140, "body": "Thanks a lot !!! That&#39;s exactly what I was looking for. I&#39;ll go further into bio documentation because it seems more complete than just using buffers. However the link you gave me seems to be outdated too (no <code>bi_sector</code> field into <code>struct bio</code> for example but reachable with <code>bio-&gt;bi_iter.bi_sector</code>). Maybe you know where I can find up-to-date documentation ?"}], "tags": [], "owner": {"reputation": 490, "user_id": 7602674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/193276783eb09a4a1b8c7f18b74a731a?s=128&d=identicon&r=PG&f=1", "display_name": "jjh", "link": "https://stackoverflow.com/users/7602674/jjh"}, "is_accepted": true, "score": 4, "last_activity_date": 1523549301, "last_edit_date": 1523549301, "creation_date": 1523470612, "answer_id": 49781937, "question_id": 49781081, "link": "https://stackoverflow.com/questions/49781081/kernel-block-device/49781937#49781937", "title": "Kernel block device", "body": "<p>The message from the commit containing the culprit change, authored by Ming Lei:</p>\n\n<blockquote>\n  <p>block: remove struct request buffer member</p>\n  \n  <p>This was used in the olden days, back when onions were proper\n     yellow. Basically it mapped to the current buffer to be\n     transferred. With highmem being added more than a decade ago,\n     most drivers map pages out of a bio, and <code>rq-&gt;buffer</code> isn't\n     pointing at anything valid.</p>\n  \n  <p>Convert old style drivers to just use <code>bio_data()</code>.</p>\n</blockquote>\n\n<p>There are some good resources for reading about BIO, such as <a href=\"https://lwn.net/Articles/26404/\" rel=\"nofollow noreferrer\">this post</a> on lwn. A relevant snippet:</p>\n\n<blockquote>\n  <p><code>char *bio_data(struct bio *bio)</code></p>\n  \n  <p>&nbsp;&nbsp;Returns the kernel virtual address for the data buffer.</p>\n</blockquote>\n\n<p>So it looks like you will have more success using <code>bio_data(rq-&gt;bio)</code> in place of <code>rq-&gt;buffer</code>.</p>\n\n<p><strong><em>Edit by author:</em></strong><br/>\nAlso found <a href=\"https://lwn.net/Articles/736534/\" rel=\"nofollow noreferrer\">this link</a> which is in two parts and presents in first part the bio layer and in second part the request layer.</p>\n"}], "owner": {"reputation": 773, "user_id": 7991581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f0ffccced69419766694f1774f275a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Arkaik", "link": "https://stackoverflow.com/users/7991581/arkaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1166, "favorite_count": 2, "accepted_answer_id": 49781937, "answer_count": 1, "score": 6, "last_activity_date": 1523549301, "creation_date": 1523467274, "last_edit_date": 1523525486, "question_id": 49781081, "link": "https://stackoverflow.com/questions/49781081/kernel-block-device", "title": "Kernel block device", "body": "<p>I'm currently trying to implement a (not that ?) simple kernel block device driver.</p>\n\n<p>I inspired mainly from the book <a href=\"https://www.safaribooksonline.com/library/view/linux-device-drivers/0596005903/\" rel=\"nofollow noreferrer\">Linux Device Drivers, 3rd Edition</a> which is not totally up-to-date anymore as it was published in 2005.</p>\n\n<p>Anyway the logic is still there and I learnt a lot from it. However examples are not really effective as many things have changed since 2005.</p>\n\n<p>I found a <a href=\"https://github.com/martinezjavier/ldd3\" rel=\"nofollow noreferrer\">github repository</a> where examples should be updated to work on recent kernels but I think there is still some things to update as I can't adapt examples to make it work on <strong>kernel 4.9.0</strong></p>\n\n<p><strong><em>Here is how my module is made:</em></strong></p>\n\n<p>At initialization :</p>\n\n<ul>\n<li>Register the module as block device with <code>register_blkdev</code></li>\n<li>Allocate the device data buffer</li>\n<li>Initialize spinlock</li>\n<li>Initialize request queue</li>\n<li>Configure request queue</li>\n<li>Allocate <code>gendisk</code> structure</li>\n<li>Fill <code>gendisk</code> structure</li>\n<li>Create the disk with <code>add_disk</code></li>\n</ul>\n\n<p>Then I implemented a function to handle request events from request queue and treat read and write events on the block device.</p>\n\n<p>Here is the function : (It's highly inspired from LLD-3rd with some modifications to match current kernel functions)</p>\n\n<pre><code>static void block_mod_request(struct request_queue *queue)\n{\n    printk(KERN_NOTICE \"Entering request function\\n\");\n    struct request *request;\n\n    while(NULL != (request = blk_fetch_request(queue)))\n    {\n        blk_mod_t *self = request-&gt;rq_disk-&gt;private_data;\n        // Check if request is a filesystem request (i.e. moves block of data)\n        if(REQ_TYPE_FS != request-&gt;cmd_type)\n        {\n            // Close request with unsuccessful status\n            printk(KERN_WARNING \"Skip non-fs request\\n\");\n            __blk_end_request_cur(request, -EIO);\n            continue;\n        }\n        // Treat request\n        block_mod_transfer(self, blk_rq_pos(request), blk_rq_cur_sectors(request), request-&gt;buffer, rq_data_dir(request));\n        // Close request with successful status\n        __blk_end_request_cur(request, 0);\n    }\n    return;\n}\n</code></pre>\n\n<p>However at compiling I got the following error:</p>\n\n<pre><code>block_mod.c:82:91: error: \u2018struct request\u2019 has no member named \u2018buffer\u2019\n         block_mod_transfer(self, blk_rq_pos(request), blk_rq_cur_sectors(request), request-&gt;buffer, rq_data_dir(request));\n</code></pre>\n\n<p>After checking file <code>blkdev.h</code> into kernel v4.9.0 headers, it seems that the field <code>buffer</code> no longer exists into <code>struct request</code>.<br/>\nHowever I'm not able to find any information on how things have evolved and how to modify the code to make it work.</p>\n\n<p>If I understand well, the <code>buffer</code> field is supposed to be a pointer to a virtual kernel address. I suppose that once this buffer filled/read the kernel handles the transfer of data to/from userspace.</p>\n\n<p>I'm kinda lost because I can't find where I should find the kernel virtual address if it's not given by the request anymore.</p>\n\n<p><strong><em>How am I supposed to know where to transfert data?</em></strong></p>\n"}, {"tags": ["c", "linux", "dbus"], "answers": [{"tags": [], "owner": {"reputation": 462, "user_id": 3191035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sqUZV.jpg?s=128&g=1", "display_name": "Frederick Ollinger", "link": "https://stackoverflow.com/users/3191035/frederick-ollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1526588208, "last_edit_date": 1526588208, "creation_date": 1523644767, "answer_id": 49823309, "question_id": 49780586, "link": "https://stackoverflow.com/questions/49780586/implenting-get-and-getall-with-libdbus-1/49823309#49823309", "title": "Implenting Get and GetAll with libdbus-1", "body": "<p>Look at the libdbus-1 source code: git://anongit.freedesktop.org/dbus/dbus</p>\n\n<p>There's an example here in bus/driver.c called bus_driver_handle_get_all(). This function implements a reply to \"GetAll\".</p>\n\n<p>Of course, we need to have GetAll implemented in our xml file for introspection as well.</p>\n\n<pre><code>&lt;interface name='org.freedesktop.DBus.Properties'&gt;\n    &lt;method name='Get'&gt;\n         &lt;arg name='interface' type='s' direction='in' /&gt;\n         &lt;arg name='property'  type='s' direction='in' /&gt;\n         &lt;arg name='value'     type='s' direction='out' /&gt;\n     &lt;/method&gt;\n\n     &lt;method name='GetAll'&gt;\n         &lt;arg name='interface'  type='s'     direction='in'/&gt;\n         &lt;arg name='properties' type='a{sv}' direction='out'/&gt;\n     &lt;/method&gt;\n&lt;/interface&gt;\n</code></pre>\n\n<p>So to reply to this, we need to iterate through all of our properties and load them up in a DBusMessageIter then send this reply to the sender.</p>\n\n<p>Clearly the \"Get\" response is much easier, we merely have to return a string in this case which is obviously matched for our property. Again, this is in the same file, bus/driver.c in the function: bus_driver_handle_get().</p>\n"}], "owner": {"reputation": 462, "user_id": 3191035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sqUZV.jpg?s=128&g=1", "display_name": "Frederick Ollinger", "link": "https://stackoverflow.com/users/3191035/frederick-ollinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526588208, "creation_date": 1523465521, "question_id": 49780586, "link": "https://stackoverflow.com/questions/49780586/implenting-get-and-getall-with-libdbus-1", "title": "Implenting Get and GetAll with libdbus-1", "body": "<p>Given libdbus-1 which is non-negotiable, I'd like to implement Get and GetAll for DBus properties.</p>\n\n<p>I don't really see any examples for this.</p>\n\n<p>Do I just have to match the method with dbus_message_is_method_call() and respond accordingly?</p>\n\n<p>Or is there a built in way of doing this where I have some code to do the heavy lifting.</p>\n\n<p>Once again, switching libraries is not an option so please don't say use Qt, glib, libnih, libsystemd, or anything else. Please be specific to libdbus-1 or don't answer.</p>\n"}, {"tags": ["c", "swift", "interop", "swift-package-manager"], "answers": [{"comments": [{"owner": {"reputation": 3511, "user_id": 135700, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/JDwsm.png?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/135700/sam"}, "edited": false, "score": 0, "creation_date": 1523702103, "post_id": 49825930, "comment_id": 86676080, "body": "Oh man this is awesome, thanks for the answer and sample project, exactly what I was trying to figure out."}, {"owner": {"reputation": 1323, "user_id": 6900902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a5448d619d9cd1bd6341a384301587?s=128&d=identicon&r=PG&f=1", "display_name": "bscothern", "link": "https://stackoverflow.com/users/6900902/bscothern"}, "reply_to_user": {"reputation": 3511, "user_id": 135700, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/JDwsm.png?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/135700/sam"}, "edited": false, "score": 0, "creation_date": 1523722120, "post_id": 49825930, "comment_id": 86682128, "body": "I&#39;d you have any problems just ask here and I am happy to help keep all the info in one place."}, {"owner": {"reputation": 1007, "user_id": 348384, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ef1c885f85252d47a126345bf446913c?s=128&d=identicon&r=PG", "display_name": "Feldur", "link": "https://stackoverflow.com/users/348384/feldur"}, "edited": false, "score": 0, "creation_date": 1551201140, "post_id": 49825930, "comment_id": 96550546, "body": "I&#39;m trying to move a project from Xcode to compile under Ubuntu, and consequently need to bring a bridging header into the package. It should be simple, but I can&#39;t find any approach to doing it. This seems the closest, but I&#39;m still at a loss what to do. Is somehow packaging the includes into a separate library really necessary, and if so, how?"}, {"owner": {"reputation": 1323, "user_id": 6900902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a5448d619d9cd1bd6341a384301587?s=128&d=identicon&r=PG&f=1", "display_name": "bscothern", "link": "https://stackoverflow.com/users/6900902/bscothern"}, "edited": false, "score": 0, "creation_date": 1551203968, "post_id": 49825930, "comment_id": 96552025, "body": "When you say bridging header do you mean an ObjC bridging header? If so those aren&#39;t supported. You will need an appropriate umbrella header or modulemap though."}], "tags": [], "owner": {"reputation": 1323, "user_id": 6900902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a5448d619d9cd1bd6341a384301587?s=128&d=identicon&r=PG&f=1", "display_name": "bscothern", "link": "https://stackoverflow.com/users/6900902/bscothern"}, "is_accepted": true, "score": 16, "last_activity_date": 1523658524, "creation_date": 1523658524, "answer_id": 49825930, "question_id": 49779543, "link": "https://stackoverflow.com/questions/49779543/swift-package-manager-c-interop-non-system-libraries/49825930#49825930", "title": "Swift Package Manager C-interop: Non-system libraries", "body": "<p>I have done that in <a href=\"https://github.com/bscothern/Once\" rel=\"noreferrer\">this project</a> on github. It replaces <code>pthread_once_t</code> by wrapping it in C and re-exposing it to swift. It was done as a fun exercise in getting around what Swift tries to limit you into since <code>pthread_once_t</code> and <code>dispatch_once</code> are not available directly.</p>\n\n<p>Here is a trimmed down version the <code>Package.swift</code> file:</p>\n\n<pre><code>// swift-tools-version:4.0\n\nimport PackageDescription\n\nlet package = Package(\n    name: \"Once\",\n    products: [\n        .library(\n            name: \"Once\",\n            targets: [\"OnceC\", \"Once\"]),\n    ],\n    dependencies: [\n    ],\n    targets: [\n        .target(\n            name: \"OnceC\",\n            dependencies: [],\n            path: \"Sources/OnceC\"),\n        .target(\n            name: \"Once\",\n            dependencies: [\"OnceC\"],\n            path: \"Sources/Swift\"),\n        .testTarget(\n            name: \"OnceTests\",\n            dependencies: [\"Once\"]),\n        ]\n)\n</code></pre>\n\n<p>You can easily replace the product library with an executable. The main part is that the product's targets needs to contain both the C and Swift targets needed to build.</p>\n\n<p>Then in your targets section make the swift target lists the C target as a dependency.</p>\n\n<hr>\n\n<p>You can learn more about the required layout for C targets in the SwiftPM Usage.md <a href=\"https://github.com/apple/swift-package-manager/blob/master/Documentation/Usage.md#c-language-targets\" rel=\"noreferrer\">here</a></p>\n\n<h2>C language targets</h2>\n\n<p>The C language targets are similar to Swift targets except that the C language\nlibraries should contain a directory named <code>include</code> to hold the public headers.  </p>\n\n<p>To allow a Swift target to import a C language target, add a target\ndependency in the manifest file. Swift Package Manager will\nautomatically generate a modulemap for each C language library target for these\n3 cases:</p>\n\n<ul>\n<li><p>If <code>include/Foo/Foo.h</code> exists and <code>Foo</code> is the only directory under the\ninclude directory then <code>include/Foo/Foo.h</code> becomes the umbrella header.</p></li>\n<li><p>If <code>include/Foo.h</code> exists and <code>include</code> contains no other subdirectory then\n<code>include/Foo.h</code> becomes the umbrella header.</p></li>\n<li><p>Otherwise if the <code>include</code> directory only contains header files and no other\nsubdirectory, it becomes the umbrella directory.</p></li>\n</ul>\n\n<p>In case of complicated <code>include</code> layouts, a custom <code>module.modulemap</code> can be\nprovided inside <code>include</code>. SwiftPM will error out if it can not generate\na modulemap w.r.t the above rules.</p>\n\n<p>For executable targets, only one valid C language main file is allowed i.e. it\nis invalid to have <code>main.c</code> and <code>main.cpp</code> in the same target.</p>\n\n<hr>\n\n<p>The only other important thing is how you actually do your <code>#import</code> in the C code once it is compiled as a compatible module. If you use the <code>import/Foo/Foo.h</code> organization you need to use <code>#include &lt;Foo/Foo.h&gt;</code> and if you do <code>import/Foo.h</code> you can use <code>#import \"Foo.h\"</code>.</p>\n"}], "owner": {"reputation": 3511, "user_id": 135700, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/JDwsm.png?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/135700/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3369, "favorite_count": 6, "accepted_answer_id": 49825930, "answer_count": 1, "score": 10, "last_activity_date": 1523658524, "creation_date": 1523462049, "question_id": 49779543, "link": "https://stackoverflow.com/questions/49779543/swift-package-manager-c-interop-non-system-libraries", "title": "Swift Package Manager C-interop: Non-system libraries", "body": "<p>How can I use the Swift Package Manager to include C code (in my case, a single <code>.c</code> file and a header file) <em>without</em> requiring the user to install my C library into <code>/usr/local/lib</code>?</p>\n\n<p>I had thought to create a Package in a subdirectory of my main package containing the header + lib, and use relative paths, and finally build with <code>swift build -Xlinker ./relative/path/to/mylib</code>, however I'm not having any success resolving the dependency since it's expected to be a standalone git repository. Error message is:</p>\n\n<p><code>error: failed to clone; fatal: repository '/absolute/path/to/mylib' does not exist</code></p>\n\n<p>Moreover it's not clear to me whether using the <code>-Xlinker</code> flag is the correct approach.</p>\n\n<p>I can't use a bridging header with a pure SwiftPM approach and installing my library system-wide seems overkill as well as not very portable.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c", "file", "file-io"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1523461931, "post_id": 49779401, "comment_id": 86574390, "body": "Please show how you call <code>displaybooks</code> including the relevant variable declarations, or even better: provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You can <a href=\"https://stackoverflow.com/posts/49779401/edit\">edit</a>  the question."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 4, "creation_date": 1523462463, "post_id": 49779401, "comment_id": 86574764, "body": "Never use <code>gets</code>. It cannot be used safely, and it was removed from the language int the 2011 standard. <code>fgets</code> is a little more complicated to use, but it can be used safely."}, {"owner": {"reputation": 1419, "user_id": 488095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ro1E0.jpg?s=128&g=1", "display_name": "jamieguinan", "link": "https://stackoverflow.com/users/488095/jamieguinan"}, "edited": false, "score": 0, "creation_date": 1523462529, "post_id": 49779401, "comment_id": 86574811, "body": "In <code>addbooks()</code>, try moving the part where you ask for the filename and call <code>fopen()</code> to outside the <code>while</code> loop. As it stands, you are opening it over and over inside the loop without writing anything."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1523463169, "post_id": 49779401, "comment_id": 86575194, "body": "This style of interface is terrible. The arguments make nonsense."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523465157, "post_id": 49779401, "comment_id": 86576380, "body": "Post samples of data used, output seen and expected.  Without that, this is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1523465399, "post_id": 49779401, "comment_id": 86576505, "body": "<code>fopen(filename, &quot;wb&quot;)</code> truncates the file over and over."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1523468386, "post_id": 49779401, "comment_id": 86578001, "body": "Welcome to Stack Overflow! Please <a href=\"https://stackoverflow.com/posts/49779401/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9631549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dylan N.", "link": "https://stackoverflow.com/users/9631549/dylan-n"}, "edited": false, "score": 0, "creation_date": 1523463070, "post_id": 49779778, "comment_id": 86575145, "body": "Ah thanks, that didn&#39;t fix the total problem, but I guess that just slipped my sight. Thanks for the fix because that would have messed something else up."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1523463475, "last_edit_date": 1523463475, "creation_date": 1523462710, "answer_id": 49779778, "question_id": 49779401, "link": "https://stackoverflow.com/questions/49779401/why-is-my-fwrite-function-writing-to-the-file-but-fread-is-not-reading-from/49779778#49779778", "title": "Why is my fwrite() function writing to the file, but fread() is not reading from it?", "body": "<p>This may or may not fix your problem but you have the call to <code>fopen</code> inside the <code>while</code> loop in <code>addbooks</code>. If you add 15 books to the library, you end up calling <code>fopen</code> 15 times. That is not correct.</p>\n\n<p>You have:</p>\n\n<pre><code>while (i &lt;= 29 &amp;&amp; (stop == 'Y' || stop == 'y'))\n{\n    printf(\"Please enter the name of the file you would like to create/use: \");\n    gets(filename);\n\n    if ((fpnew = fopen(filename, \"wb\")) == NULL)\n    {\n        printf(\"Can't open the file name: %s\", filename);\n        exit(1);\n    }\n</code></pre>\n\n<p>That block of code needs to be moved out of the loop.</p>\n\n<pre><code>printf(\"Please enter the name of the file you would like to create/use: \");\ngets(filename);\n\nif ((fpnew = fopen(filename, \"wb\")) == NULL)\n{\n    printf(\"Can't open the file name: %s\", filename);\n    exit(1);\n}\n\nwhile (i &lt;= 29 &amp;&amp; (stop == 'Y' || stop == 'y'))\n{\n</code></pre>\n\n<hr>\n\n<h3>Suggestion for improvement</h3>\n\n<p>Use of</p>\n\n<pre><code>char stop = 'Y';\n\n...\n\nwhile (i &lt;= 29 &amp;&amp; (stop == 'Y' || stop == 'y'))\n</code></pre>\n\n<p>is a little confusing, at least to me. When <code>stop</code> is <code>'Y'</code>, you want to stop, not continue with the loop. A better name for the variable would be would be <code>readmore</code> or <code>readnext</code>.</p>\n\n<pre><code>char readmore = 'Y';\n\n...\n\nwhile (i &lt;= 29 &amp;&amp; (readmore == 'Y' || readmore == 'y'))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9631549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dylan N.", "link": "https://stackoverflow.com/users/9631549/dylan-n"}, "edited": false, "score": 0, "creation_date": 1523484194, "post_id": 49780978, "comment_id": 86585550, "body": "Yeah it comes out as nothing"}], "tags": [], "owner": {"reputation": 95, "user_id": 9450941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aab72ac6330862b2851fd206adc1975?s=128&d=identicon&r=PG&f=1", "display_name": "rdssonawane", "link": "https://stackoverflow.com/users/9450941/rdssonawane"}, "is_accepted": false, "score": 0, "last_activity_date": 1523466915, "creation_date": 1523466915, "answer_id": 49780978, "question_id": 49779401, "link": "https://stackoverflow.com/questions/49779401/why-is-my-fwrite-function-writing-to-the-file-but-fread-is-not-reading-from/49780978#49780978", "title": "Why is my fwrite() function writing to the file, but fread() is not reading from it?", "body": "<pre><code>Title        Author           Genre        Quality       Number of Pages               \nMydreams       xyz            Biography      10             100            \nSportDay       pqr            Fiction        10             100\n</code></pre>\n\n<p>This is the output of your program, what is wrong in there?? your 'display' function reading from file only.</p>\n"}], "owner": {"reputation": 11, "user_id": 9631549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dylan N.", "link": "https://stackoverflow.com/users/9631549/dylan-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "closed_date": 1523475152, "answer_count": 2, "score": 0, "last_activity_date": 1523466915, "creation_date": 1523461663, "last_edit_date": 1523462281, "question_id": 49779401, "link": "https://stackoverflow.com/questions/49779401/why-is-my-fwrite-function-writing-to-the-file-but-fread-is-not-reading-from", "closed_reason": "Not suitable for this site", "title": "Why is my fwrite() function writing to the file, but fread() is not reading from it?", "body": "<p>Okay so my in my code I am writing an array of structures to a file. When I check the file the information is in there, but when I call fread() nothing is printed out when I try and access the data. I'm thinking the data pointed at by fwrite() is not at the right spot when it ends or something. Thanks in advance.</p>\n\n<p>Here is main()</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct NOVEL\n{\n    char title[50];\n    char newtitle[50];\n    char author[50];\n    char newauthor[50];\n    char genre[20];\n    char newgenre[20];\n    char quality[20];\n    int numpages;\n};\n\nint addbooks(struct NOVEL[], char[]);\nvoid displaybooks(struct NOVEL[], int, char[]);\nvoid sortbooks(struct NOVEL[], int);\nvoid title(struct NOVEL[], int);\nvoid author(struct NOVEL[], int);\nvoid category(struct NOVEL[], int);\nvoid numpages(struct NOVEL[], int);\n\nint main()\n{\n    //Define the variables\n    int num, numbooks = 0;\n    char repeat = 'Y', name[50];\n    struct NOVEL library[100] = {0};\n\n\n\n    //Asks what the user wants to do\n    while (repeat == 'Y' || repeat == 'y')\n    {\n        printf(\"1. Add Books\\n2. Display Books\\n3. Sort Books\\nPlease enter your choice: \");\n        scanf(\"%i\", &amp;num);\n        getchar();\n\n        switch (num)\n        {\n                //Add Books\n            case 1:\n                numbooks = addbooks(library, name);\n                break;\n\n                //Display Books\n            case 2:\n                displaybooks(library, numbooks, name);\n                break;\n\n                //Sort Books\n            case 3:\n                sortbooks(library, numbooks);\n                break;\n\n            default:\n                printf(\"Incorrect Number Entered!\\n\");\n        }\n\n        printf(\"\\nWould you like to do something else? [Y/N]: \");\n        scanf(\" %c\", &amp;repeat);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is the addbooks() function I made:</p>\n\n<pre><code>int addbooks(struct NOVEL books[], char filename[])\n{\n    static int i = 0;\n    char stop = 'Y';\n    FILE *fpnew = NULL;\n\n    //The user adds their books here\n    while (i &lt;= 29 &amp;&amp; (stop == 'Y' || stop == 'y'))\n    {\n        printf(\"Please enter the name of the file you would like to create/use: \");\n        gets(filename);\n\n        if ((fpnew = fopen(filename, \"wb\")) == NULL)\n        {\n            printf(\"Can't open the file name: %s\", filename);\n            exit(1);\n        }\n\n        printf(\"Please enter your book's title: \");\n        gets(books[i].title);\n\n        printf(\"Please enter your book's author: \");\n        gets(books[i].author);\n\n        printf(\"Please enter your book's genre: \");\n        gets(books[i].genre);\n\n        printf(\"Please enter your book's rating [1-10]: \");\n        gets(books[i].quality);\n\n        printf(\"Please enter your book's number of pages: \");\n        scanf(\"%i\", &amp;books[i].numpages);\n        getchar();\n\n        i++;\n\n\n        printf(\"Add another book? [Y/N]: \");\n        scanf(\"%c\", &amp;stop);\n        getchar();\n    }\n\n    fwrite(books, sizeof(struct NOVEL), i, fpnew);\n    fclose(fpnew);\n\n    return i;\n}\n</code></pre>\n\n<p>Here is the displaybooks() function I made:</p>\n\n<pre><code>void displaybooks(struct NOVEL books1[], int numberofbooks, char dfilename[])\n{\n    int j;\n    FILE *fpdisplay = NULL;\n\n    //struct NOVEL read[30];\n    printf(\"Please enter the name of the file you would like to create/use: \");\n    gets(dfilename);\n\n    if ((fpdisplay = fopen(dfilename, \"rb\")) == NULL)\n    {\n        printf(\"Can't open the file name: %s\", dfilename);\n        exit(1);\n    }\n\n    fread(books1, sizeof(struct NOVEL), numberofbooks, fpdisplay);\n    fclose(fpdisplay);\n\n    //Prints out the book's information\n    printf(\"%-30s%-30s%-30s%-30s%-30s\\n\", \"Title\", \"Author\", \"Genre\", \"Quality\", \"Number of Pages\");\n\n    for (j = 0; j &lt; numberofbooks; j++)\n    {\n        printf(\"%-30s%-30s%-30s%-30s%-30i\\n\", books1[j].title, books1[j].author, books1[j].genre, books1[j].quality, books1[j].numpages);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "header-files"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523460839, "post_id": 49779050, "comment_id": 86573625, "body": "See <a href=\"https://stackoverflow.com/questions/1433204\">How do I use <code>extern</code> to share variables between files?</a>.  This is a &#39;common extension&#39; with a double entendre on &#39;common&#39; \u2014 it is a feature found commonly in compilers in the wild, and it is based on Fortran COMMON blocks.  It is recognized by the C standard as an extension \u2014 in <a href=\"https://port70.net/~nsz/c/c11/n1570.html#J.5.11\" rel=\"nofollow noreferrer\">C11 Annex J.5.11</a>.  Unix systems tend to support the extension."}, {"owner": {"reputation": 2084, "user_id": 7134737, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2d851e4a46559b3efa17a5cae5fe8e60?s=128&d=identicon&r=PG&f=1", "display_name": "ng.newbie", "link": "https://stackoverflow.com/users/7134737/ng-newbie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523460920, "post_id": 49779050, "comment_id": 86573673, "body": "@JonathanLeffler I have seen <code>extern</code> used in my code, is it automatically applied?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1523461169, "post_id": 49779050, "comment_id": 86573868, "body": "Yes, no, maybe (to the question &quot;is <code>extern</code> automatically applied&quot;).  According to the strict rules of the standard, the variable specified in the header is defined in each source file that includes the header, and so the header can only be used in one file.  However, the Unix real-world compilers are more lax.  When there is no initialization, then you can often get away with such double definitions. The keyword <code>extern</code> is needed before variable declarations to ensure they are not treated as definitions. You <i>should</i> have one definition of the variable and as many declarations as necessary."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1523461285, "post_id": 49779050, "comment_id": 86573940, "body": "In the context of function declarations, <code>extern</code> is applied implicitly if it is omitted.  That is, <code>extern void *malloc(size_t size);</code> is equivalent to <code>void *malloc(size_t size);</code> because it is a function declaration.  So in that context, you could say &quot;<code>extern</code> is applied automatically&quot;.  With variables, there is no such special treatment \u2014 you have to use <code>extern</code> explicitly to ensure it is a declaration and not a definition.  But the J.5.11 common extension means you can get away with being sloppy far too often."}, {"owner": {"reputation": 2084, "user_id": 7134737, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2d851e4a46559b3efa17a5cae5fe8e60?s=128&d=identicon&r=PG&f=1", "display_name": "ng.newbie", "link": "https://stackoverflow.com/users/7134737/ng-newbie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523461905, "post_id": 49779050, "comment_id": 86574367, "body": "@JonathanLeffler I asked this question because I seem to getting the same behavior without <code>extern</code>, how is that a duplicate? And that too on the same compiler."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523462075, "post_id": 49779050, "comment_id": 86574476, "body": "The main answer (my answer) to the duplicate question covers the points raised in this question in detail.  The answer to this question is &quot;you use <code>extern</code> to share variables between files reliably&quot;, and &quot;this code often works but is not guaranteed to do so by the standard \u2014 but the standard does have a note that recognizes that it does often work, despite being in contravention of the letter of the standard&quot;.  That means that the (answer to the) other question covers the same ground as this one."}, {"owner": {"reputation": 2084, "user_id": 7134737, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2d851e4a46559b3efa17a5cae5fe8e60?s=128&d=identicon&r=PG&f=1", "display_name": "ng.newbie", "link": "https://stackoverflow.com/users/7134737/ng-newbie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523462219, "post_id": 49779050, "comment_id": 86574569, "body": "@JonathanLeffler I am sorry but what do you mean by it often works? How can it work sometimes and not work the other times? that does not make sense."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523462398, "post_id": 49779050, "comment_id": 86574723, "body": "Some compilers support the mechanism that makes it work. Other compilers do not support the mechanism that makes it work. If your code only has to work with one compiler on one platform, and that compiler supports the mechanism, then &quot;it works&quot;. But another compiler on the same platform (or more usually on another platform) can treat the code as erroneous. The second compiler is more strictly correct according to the standard, but the standard does recognize that there are real implementations like the first compiler. If you want your code to be maximally portable, don&#39;t rely on the extension."}, {"owner": {"reputation": 2084, "user_id": 7134737, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2d851e4a46559b3efa17a5cae5fe8e60?s=128&d=identicon&r=PG&f=1", "display_name": "ng.newbie", "link": "https://stackoverflow.com/users/7134737/ng-newbie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523462509, "post_id": 49779050, "comment_id": 86574794, "body": "@JonathanLeffler Yes but thats my confusion - I have seen my small code snippet actually fail on the same compiler that allows a large program doing this - how can two compiler support two different things?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523462667, "post_id": 49779050, "comment_id": 86574897, "body": "Very easily.  Welcome to the real world.  Compilers are not perfect.  Actually, compilers are rarely buggy \u2014 they don&#39;t survive if they are.  But different compilers are allowed to interpret the standard differently.  The standard allows that.  If you tread outside what is guaranteed by the standard, all bets are off. You may be OK in the short term; you may have problems in the long term. Or you may be OK in the long term.  There are ways to ensure that the code breaks \u2014 you&#39;ve stated that you&#39;ve simulated your corporate code, not copied it.  Stuff in other files could affect the results."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523462844, "post_id": 49779050, "comment_id": 86575017, "body": "Yes \u2014 I work on an antique code base (the earliest files date back to 1982).  Yes, we have problems with common definitions.  Empty source files that include certain headers can end up with 6 variables defined in common.  It&#39;s a pain.  C++ is more rigorous about this; we have to tell the C++ compiler to be more relaxed because of these infelicities.  (The code base is primarily C \u2014 but there are some chunks of C++ in it.  Consequently, it has to be linked with the C++ compiler.)  Grumble!"}, {"owner": {"reputation": 2084, "user_id": 7134737, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2d851e4a46559b3efa17a5cae5fe8e60?s=128&d=identicon&r=PG&f=1", "display_name": "ng.newbie", "link": "https://stackoverflow.com/users/7134737/ng-newbie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523462995, "post_id": 49779050, "comment_id": 86575106, "body": "@JonathanLeffler Yes of course, I tried to target the issue in an isolated fashion. Then it fails. But when I compile the application as a whole I don&#39;t see compiler errors. That&#39;s so weird. So you are telling me that there is no way understand why this is happening since the compiler may be taking liberties, am I correct?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523463260, "post_id": 49779050, "comment_id": 86575244, "body": "No; I&#39;m telling you that your reduced code isn&#39;t actually representative of what is going on in the big code. The compiler will be self-consistent. Somewhere along the line, you&#39;re doing something different between the &#39;real code&#39; and the &#39;example code&#39; in the question if the one works and the other fails. But we don&#39;t have enough context here to help you deduce what&#39;s the key difference. Your code is invoking undefined behaviour by passing a <code>void (*function)(void)</code> function pointer to a function that expects a <code>void *(*thread_function)(void *)</code>. That might be the trouble; it probably isn&#39;t."}], "owner": {"reputation": 2084, "user_id": 7134737, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2d851e4a46559b3efa17a5cae5fe8e60?s=128&d=identicon&r=PG&f=1", "display_name": "ng.newbie", "link": "https://stackoverflow.com/users/7134737/ng-newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1523461547, "answer_count": 0, "score": 1, "last_activity_date": 1523501800, "creation_date": 1523460599, "last_edit_date": 1523501800, "question_id": 49779050, "link": "https://stackoverflow.com/questions/49779050/c-weird-way-of-sharing-structures-between-files", "closed_reason": "Duplicate", "title": "c - Weird way of sharing structures between files", "body": "<p>Ok before I go explaining my problem, note that I have seen the following phenomenon happen in the code that I work on in my company, hence I can't share actual code, instead I will giving some snippets of pseudo C code to explain my problem.</p>\n\n<p>Lets say file1.h contains the following lines of code:</p>\n\n<pre><code>#ifndef FILE1_H\n#define FILE1_H\n\nstruct data {\n    int a;\n};\n\nstruct data foo;\nvoid run(void);\n#endif\n</code></pre>\n\n<p>Now I include this header in another file in the following fashion-:</p>\n\n<pre><code>#include \"file1.h\"\n\nvoid run() {\n    int count = 0;\n    while(1) {\n        foo.a = count;\n        count = (count + 1) % 500;\n    }\n}\n</code></pre>\n\n<p>Now in the main file I create a thread that points to the <code>run()</code> method and create a loop that reads from <code>data.foo</code> in this fashion -:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include \"file1.h\"\n\nvoid main(void) {\n    pthread_create(&amp;id, NULL, run, NULL);\n\n    while(1) {\n        printf(\"Data = %d\\n\",foo.a);\n        sleep(1);\n    }\n}\n</code></pre>\n\n<p><strong>On normal cases this should give a compiler error that there are multiple declarations of the same structure variable.</strong> And I have also tried making small sample programs like this - they all fail at compile like they should. </p>\n\n<p><strong>But I have actually seen and worked on code like this that works fine.</strong> </p>\n\n<p>In one file I have the variable to which I write data, and in another file I just read the data from it.</p>\n\n<p><strong>Is there any situation that the C compiler allows something like this? Any compiler flags in GCC?</strong> I usually build using Makefiles so any obscure compiler flag or switch that allows this behavior?</p>\n\n<p>Or is there a lapse in my understanding of C?</p>\n\n<p>Please excuse other compile-time errors in my code, since this is pseudo code to explain my problem.</p>\n"}, {"tags": ["c", "char", "mbedtls"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1523460421, "post_id": 49778962, "comment_id": 86573309, "body": "The arguments in <code>c</code> are passed by <i>value</i>. You can&#39;t change them from within a function."}], "answers": [{"tags": [], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "is_accepted": false, "score": 0, "last_activity_date": 1523466494, "last_edit_date": 1523466494, "creation_date": 1523464722, "answer_id": 49780383, "question_id": 49778962, "link": "https://stackoverflow.com/questions/49778962/could-not-change-the-address-pointed-by-char-c/49780383#49780383", "title": "Could not change the address pointed by char * c", "body": "<p>Like Eugene Sh said, arguments in C are passed by value.</p>\n\n<p>Example :</p>\n\n<pre><code>void Test(int value)\n{\n  value++;\n}\n\n...\n\nint foo = 3;\nTest(foo);\n// here, foo is still 3\n</code></pre>\n\n<p>If you want to pass <code>foo</code> by reference in C, you need to pass it's pointer</p>\n\n<pre><code>void Test(int* value)\n{\n  *value++;\n  value++;\n}\n\n...\n\nint foo = 3;\nint *fooPtr = &amp;foo;\nTest(fooPtr);\n// Now, foo is 4, but fooPtr still is &amp;foo.\n</code></pre>\n\n<p>Note that I also incremented the pointer inside the <code>Test()</code> function, but since the pointer itself is passed by value, it's not incremented outside the <code>Test()</code> function.</p>\n\n<p>In order to achieve what you want, you need to pass the pointer by reference (as a pointer) :</p>\n\n<pre><code>void Test(int** value)\n{\n  **value++;\n  *value++;\n}\n\n...\n\nint foo = 3;\nint *fooPtr = &amp;foo;\nTest(&amp;fooPtr);\n// Now, foo is 4, and fooPtr was incremented.\n// This is just an example ; don't use fooPtr beyond this point, its value is wrong.\n</code></pre>\n\n<p>You need to pass your buf pointer as a reference to be able to change the pointer value :</p>\n\n<pre><code>int mbedtls_net_recv_timeout( void *ctx, unsigned char **buf, size_t len,\n                  uint32_t timeout )\n{\n\n  [... snip ...]\n\n  /* This call will not block */\n  recv = mbedtls_net_recv( ctx, *buf, len );\n  *buf = *buf + 1;\n  printf(\"Receiving\\n\");\n\n  return( recv );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 9450941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aab72ac6330862b2851fd206adc1975?s=128&d=identicon&r=PG&f=1", "display_name": "rdssonawane", "link": "https://stackoverflow.com/users/9450941/rdssonawane"}, "is_accepted": false, "score": 0, "last_activity_date": 1523467732, "creation_date": 1523467732, "answer_id": 49781194, "question_id": 49778962, "link": "https://stackoverflow.com/questions/49778962/could-not-change-the-address-pointed-by-char-c/49781194#49781194", "title": "Could not change the address pointed by char * c", "body": "<p>I think you should increament the pointer buf before passing it to the function 'mbedtls_net_recv' like this, </p>\n\n<pre><code>/* This call will not block */\n    buf = buf + 1;\n    recv = mbedtls_net_recv( ctx, buf, len );\n    printf(\"Receiving\\n\");\n    return( recv );\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8325223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0v8dS3zHHYA/AAAAAAAAAAI/AAAAAAAAAVw/3x7fYE4xSik/photo.jpg?sz=128", "display_name": "zoueghi okba", "link": "https://stackoverflow.com/users/8325223/zoueghi-okba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1523467732, "creation_date": 1523460332, "question_id": 49778962, "link": "https://stackoverflow.com/questions/49778962/could-not-change-the-address-pointed-by-char-c", "title": "Could not change the address pointed by char * c", "body": "<p>I am receiving a buffer inside this function , I would like to ignore the first character by incrementing the buffer address by one.</p>\n\n<p>I increment the buffer but out side the function the buffer contains the received data but it's not incremented.</p>\n\n<p>It's strange !! could any one help me please !!</p>\n\n<pre><code>int mbedtls_net_recv_timeout( void *ctx, unsigned char *buf, size_t len,\n                  uint32_t timeout )\n{\nint ret,recv;\nstruct timeval tv;\nfd_set read_fds;\nint fd = ((mbedtls_net_context *) ctx)-&gt;fd;\n\nif( fd &lt; 0 )\n    return( MBEDTLS_ERR_NET_INVALID_CONTEXT );\n\nFD_ZERO( &amp;read_fds );\nFD_SET( fd, &amp;read_fds );\n\ntv.tv_sec  = timeout / 1000;\ntv.tv_usec = ( timeout % 1000 ) * 1000;\n\nret = select( fd + 1, &amp;read_fds, NULL, NULL, timeout == 0 ? NULL : &amp;tv );\n\n/* Zero fds ready means we timed out */\nif( ret == 0 )\n    return( MBEDTLS_ERR_SSL_TIMEOUT );\n\nif( ret &lt; 0 )\n{\n#if ( defined(_WIN32) || defined(_WIN32_WCE) ) &amp;&amp; !defined(EFIX64) &amp;&amp; \\\n!defined(EFI32)\n    if( WSAGetLastError() == WSAEINTR )\n        return( MBEDTLS_ERR_SSL_WANT_READ );\n#else\n    if( errno == EINTR )\n        return( MBEDTLS_ERR_SSL_WANT_READ );\n#endif\n\n    return( MBEDTLS_ERR_NET_RECV_FAILED );\n}\n\n/* This call will not block */\nrecv = mbedtls_net_recv( ctx, buf, len );\nbuf = buf + 1;\nprintf(\"Receiving\\n\");\n\nreturn( recv );\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "sockets", "reverse-shell"], "answers": [{"tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 1, "last_activity_date": 1523461526, "creation_date": 1523461526, "answer_id": 49779346, "question_id": 49778841, "link": "https://stackoverflow.com/questions/49778841/print-current-directory-in-reverse-shell/49779346#49779346", "title": "Print current directory in reverse shell", "body": "<p>If you want to see the current directory, run the <code>pwd</code> command.</p>\n\n<p>The <code>cd</code> command does not print any output. Therefore you'll not see any output.</p>\n\n<p>If you run the shell interactively though, the shell prints a <a href=\"https://en.wikipedia.org/wiki/Command-line_interface#Command_prompt\" rel=\"nofollow noreferrer\">prompt</a> after it has executed a command. Some shells, or depending on your configuration, that prompt might include the current working directory.</p>\n\n<p>But when you connect a socket to the shells stdin/out/err, the shell figures out it is not in interactive mode, and it will not present a prompt. Simply running the <code>cd</code> command will give you no output.</p>\n\n<p>You can force the shell to interactive mode, in which case it should print the prompt after each command, run </p>\n\n<pre><code>execl(\"/bin/sh\", \"/bin/sh/\", \"-i\", NULL);\n</code></pre>\n\n<p>(Or find some way of adding the \"-i\" argument in your execve() call)</p>\n"}], "owner": {"reputation": 1440, "user_id": 7973906, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/54a6d0e27146b174dd6a6c3cb5e54392?s=128&d=identicon&r=PG&f=1", "display_name": "j3141592653589793238", "link": "https://stackoverflow.com/users/7973906/j3141592653589793238"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 49779346, "answer_count": 1, "score": 0, "last_activity_date": 1523461526, "creation_date": 1523459949, "last_edit_date": 1523461002, "question_id": 49778841, "link": "https://stackoverflow.com/questions/49778841/print-current-directory-in-reverse-shell", "title": "Print current directory in reverse shell", "body": "<p>I tried to build a very little reversed shell in C. </p>\n\n<p>The connection works, the commands are also executed, but I wonder how it's possible to print the current directory. My code so far: </p>\n\n<p>Client: </p>\n\n<pre><code>// [...]\n// creating socket\n// connect\n\nvoid handle_connection(socket_t* sock, char** argv, char** env) {\n    // redirect stdout, stdin, stderr\n    for (int i = 0; i &lt;= 2; i++)\n        dup2(*sock, i);\n\n    execve(\"/bin/sh\", argv, env);\n}\n</code></pre>\n\n<p>On the server side, I simply use nc which works fine. But the current directory is not printed out as usual. F.ex. if I send a \"cd [...]\", there is no output at all. </p>\n\n<p>How can I send the current directory to the server?</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1523459558, "post_id": 49778633, "comment_id": 86572665, "body": "<i>Especially</i> when making your first steps, use <code>const</code> liberally. And <i>please</i> give your parameters speaking names. <code>src</code> and <code>dest</code> beat <code>str1</code> and <code>str2</code> any time."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1523459581, "post_id": 49778633, "comment_id": 86572686, "body": "Note that using <code>char str1[] = &quot;avanti&quot;;</code> would be OK because it is longer than what you copy into it.  If you had <code>char *str2 = &quot;alphabet&quot;;</code>, you would have problems even with the array \u2014 a buffer overflow.  Also, using <code>str2[i] != &#39;\\0&#39;</code> is a lot easier to read than <code>*(str2 + i) != &#39;\\0&#39;</code> \u2014 and there is no difference in efficiency between the two."}, {"owner": {"reputation": 1014, "user_id": 2551956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ba34ab655eaf76dc5486c0677aad24f9?s=128&d=identicon&r=PG", "display_name": "user234461", "link": "https://stackoverflow.com/users/2551956/user234461"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523459872, "post_id": 49778633, "comment_id": 86572914, "body": "@JonathanLeffler Re your second point, the question looks like an exercise in understanding syntax, so using <code>*</code>s exclusively seems reasonable and not deserving of criticism per se, although the array syntax is great additional info"}], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1523459487, "creation_date": 1523459487, "answer_id": 49778690, "question_id": 49778633, "link": "https://stackoverflow.com/questions/49778633/copy-string-in-c-using-pointer/49778690#49778690", "title": "Copy string in C, using pointer", "body": "<p><code>\"avanti\"</code> is a string constant, not a place you can copy to.  You might change it to <code>char str1[] = \"avanti\";</code> This is an array of characters that is initialized with the value of the string constant <code>\"avanti\"</code></p>\n"}], "owner": {"reputation": 7, "user_id": 9631306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/978c74ce6dff1673a2f8dd9abc13a775?s=128&d=identicon&r=PG&f=1", "display_name": "Guru Rai", "link": "https://stackoverflow.com/users/9631306/guru-rai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "closed_date": 1523459498, "answer_count": 1, "score": -1, "last_activity_date": 1523459487, "creation_date": 1523459301, "last_edit_date": 1523459431, "question_id": 49778633, "link": "https://stackoverflow.com/questions/49778633/copy-string-in-c-using-pointer", "closed_reason": "Duplicate", "title": "Copy string in C, using pointer", "body": "<p>I am a beginner programmer. I wrote the following code to copy the one string into other, using pointers.\nBut I am not getting the output. The compiler says segmentation fault.\nI have gone over and over the program, but to no avail. I am not able to locate the fault, and how to fix it.\nIt would be hard to believe but I have been stuck for almost 2 hours now.\nAny help is greatly appreciated.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nchar *copy(char*, char*);\n\nint main() {\n    char *str1 = \"avanti\";\n    char *str2 = \"ujj\";\n\n    printf(\"%s\\n\", str1);\n\n    char *result = copy(str1, str2);\n\n    printf(\"%s\", result);\n}\n\nchar *copy(char *str1, char *str2){\n    int i=0;\n    while (*(str2+i) != '\\0') {\n        *(str1+i) = *(str2+i);\n        i++;\n    }\n\n    *(str1+i) = '\\0';\n    return str1;\n}\n</code></pre>\n"}, {"tags": ["c", "curl", "compiler-errors", "libcurl", "clion"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523606204, "post_id": 49811319, "comment_id": 86638396, "body": "Hello, thank you for your answer ! Cmake drop me this : Unknown CMake command &quot;add_denifition&quot;.  My file is .dll.a, my bad   Also, I don&#39;t really get why, but i added the include_directories command and my .c won&#39;t compile with the new relative path.."}, {"owner": {"reputation": 36, "user_id": 9638640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cd232e834b6502569502834908d545?s=128&d=identicon&r=PG&f=1", "display_name": "DeDo", "link": "https://stackoverflow.com/users/9638640/dedo"}, "reply_to_user": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523607963, "post_id": 49811319, "comment_id": 86639305, "body": "Sorry, I forgot the ending &quot;s&quot;  in the command &quot;add_definition<b>s</b>&quot; I corrected it. For include directories, do you delete your CMake cache before ?"}, {"owner": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523608362, "post_id": 49811319, "comment_id": 86639529, "body": "I don&#39;t know how to delete the Cmake cache. Delete the cmakecache.txt file ? I still have the &quot;undefined reference to `curl_global_init&#39;&quot; .. :("}, {"owner": {"reputation": 36, "user_id": 9638640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cd232e834b6502569502834908d545?s=128&d=identicon&r=PG&f=1", "display_name": "DeDo", "link": "https://stackoverflow.com/users/9638640/dedo"}, "reply_to_user": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523608661, "post_id": 49811319, "comment_id": 86639694, "body": "If you execute CMake elsewhere than the source directory (and I hope you do), like a &quot;build&quot; directory for exemple, remove the cache : * with CMake GUI : File &gt; Delete Cache * with command line : rm -rf build/*"}, {"owner": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523608739, "post_id": 49811319, "comment_id": 86639741, "body": "Ok the include works, thanks. But I still have the &quot;undefined reference to `curl_global_init&#39;&quot; .. :("}, {"owner": {"reputation": 36, "user_id": 9638640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cd232e834b6502569502834908d545?s=128&d=identicon&r=PG&f=1", "display_name": "DeDo", "link": "https://stackoverflow.com/users/9638640/dedo"}, "reply_to_user": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523691959, "post_id": 49811319, "comment_id": 86673573, "body": "I try with cURL shared Library and it works. Is it enough for you or do you need use only static library ?"}, {"owner": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523865239, "post_id": 49811319, "comment_id": 86718796, "body": "I can use the the shared library too. How did you linked with it ? I think I tried it 2 weeks ago but it failed (or most obviously: I failed :s )"}, {"owner": {"reputation": 36, "user_id": 9638640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cd232e834b6502569502834908d545?s=128&d=identicon&r=PG&f=1", "display_name": "DeDo", "link": "https://stackoverflow.com/users/9638640/dedo"}, "reply_to_user": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523870869, "post_id": 49811319, "comment_id": 86722099, "body": "You need <code>libcurl.dll</code> and <code>curl.lib</code> in the directory <code>lib</code> during the compilation. And <code>libcurl.dll</code> is alose required in the execution path or in the PATH environment variable."}, {"owner": {"reputation": 36, "user_id": 9638640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cd232e834b6502569502834908d545?s=128&d=identicon&r=PG&f=1", "display_name": "DeDo", "link": "https://stackoverflow.com/users/9638640/dedo"}, "reply_to_user": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "edited": false, "score": 0, "creation_date": 1523871070, "post_id": 49811319, "comment_id": 86722264, "body": "I advise you to compile your project and the cURL library with the same compiler. I don&#39;t observe your problem of &quot;undefined reference to ...&quot; which show your compiler can&#39;t read correctly your cURL library. I think it could be corrected by using the same compiler from the beginning to the end."}], "tags": [], "owner": {"reputation": 36, "user_id": 9638640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cd232e834b6502569502834908d545?s=128&d=identicon&r=PG&f=1", "display_name": "DeDo", "link": "https://stackoverflow.com/users/9638640/dedo"}, "is_accepted": true, "score": 2, "last_activity_date": 1569014676, "last_edit_date": 1569014676, "creation_date": 1523603615, "answer_id": 49811319, "question_id": 49778607, "link": "https://stackoverflow.com/questions/49778607/c-cmake-compiling-program-with-libcurl/49811319#49811319", "title": "C - Cmake compiling program with libcurl", "body": "<p>You link with static curl library (libcurl.a) which required CURL_STATICLIB definition. Add this in your CMakeLists.txt between \"project\" and \"add_executable\" commands:</p>\n\n<pre><code>add_definitions( -DCURL_STATICLIB )\n</code></pre>\n\n<p>Moreover, your file .dlla is not .dll.a ? In that case, .dll.a file is (I think) generated by MinGW toolchain and is required only if you link dynamically with curl library (as .dll file).</p>\n\n<p>I downloaded the sources of cURL library <a href=\"https://curl.haxx.se/download.html\" rel=\"nofollow noreferrer\">here</a> and compiled it (with Visual Compiler 2015). It produces shared libraries (<code>libcurl.dll</code> and <code>libcurl_imp.lib</code>) that I move in the lib directory (I should rename <code>libcurl_imp.lib</code> to <code>curl.lib</code>). I move also the include directory.</p>\n\n<p>Then, I used this <code>CMakeLists.txt</code> :</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10)\nproject(curl_test2 C)\n\nset(CMAKE_C_STANDARD 99)\n\nset(SRCS \"srcs/main.c\")\n\nset( CURL_LIBRARY ${CMAKE_SOURCE_DIR}/lib )\nset( CURL_INCLUDE_DIR ${CMAKE_SOURCE_DIR}/include )\nfind_package( CURL )\n\ninclude_directories( ${CURL_INCLUDE_DIRS} )\nlink_directories( ${CURL_LIBRARIES} )\n\nadd_executable(curl_test2 ${SRCS})\ntarget_link_libraries(curl_test2 curl)\n</code></pre>\n\n<p>With it, your project compiles and the execution works.</p>\n\n<p>I also tried with cURL static library (for that, if you use CMake to compile cURL, add <code>-DCURL_STATICLIB=ON</code> in cmake command line). And I moved the produced library <code>libcurl.lib</code> to <code>lib\\curl.lib</code>.</p>\n\n<p>I used this <code>CMakeLists.txt</code> :</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10)\nproject(curl_test2 C)\n\nset(CMAKE_C_STANDARD 99)\n\nset(SRCS \"srcs/main.c\")\nadd_definitions( -DCURL_STATICLIB )\n\nset( CURL_LIBRARY ${CMAKE_SOURCE_DIR}/lib )\nset( CURL_INCLUDE_DIR ${CMAKE_SOURCE_DIR}/include )\nfind_package( CURL )\n\ninclude_directories( ${CURL_INCLUDE_DIRS} )\nlink_directories( ${CURL_LIBRARIES} )\n\nadd_executable(curl_test2 ${SRCS})\ntarget_link_libraries(curl_test2 curl wldap32 ws2_32)\n</code></pre>\n\n<p>And it works too.</p>\n"}], "owner": {"reputation": 47, "user_id": 9400853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AnBHO5DKEVc/AAAAAAAAAAI/AAAAAAAAAA4/oiNuO1ogvVg/photo.jpg?sz=128", "display_name": "GemsKnight", "link": "https://stackoverflow.com/users/9400853/gemsknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5884, "favorite_count": 0, "accepted_answer_id": 49811319, "answer_count": 1, "score": 3, "last_activity_date": 1569014676, "creation_date": 1523459218, "last_edit_date": 1523609718, "question_id": 49778607, "link": "https://stackoverflow.com/questions/49778607/c-cmake-compiling-program-with-libcurl", "title": "C - Cmake compiling program with libcurl", "body": "<p>I'm trying to use some curl code to test the lib but I can't compile it :(</p>\n\n<p>I'm using Clion (Cmake + gcc) and I've got a libcurl.a, a libcurl.dll and a libcurl.dlla\nWhat am I suppose to do with those 3 files ?</p>\n\n<p>This is my CmakeLists.txt :</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10)\nproject(curl_test2 C)\n\nset(CMAKE_C_STANDARD 99)\n\nADD_DEFINITIONS( -DCURL_STATICLIB )\ninclude_directories( \"include\" )\n\nset(SRCS\"\nsrcs/main.c\")\nset(HEADERS\n    \"include/curl/curl.h\"\n     \"include/curl/easy.h\")\n\nlink_directories(\"lib\")\n\nadd_executable(curl_test2 ${SRCS} ${HEADERS})\n\ntarget_link_libraries(curl_test2 \"curl\")\n</code></pre>\n\n<p>this is my project:</p>\n\n<pre><code>include\n    --curl\n        --curl.h\nsrcs\n    --main.c\nlib\n    --libcurl.a\n    (--dlls\n        --libcurl.dll\n        --libcurl.dlla) &lt;- i'm not using them for now\n</code></pre>\n\n<p>this is my main.c (just a libcurl example, not really important - i'm just trying to compile):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"curl/curl.h\"\n\nint main(void)\n{\n    CURL *curl;\n    CURLcode res;\n\n    curl_global_init(CURL_GLOBAL_ALL);\n\n    curl = curl_easy_init();\n    if(curl) {\n        curl_easy_setopt(curl, CURLOPT_URL, \"http://postit.example.com/moo.cgi\");\n        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, \"name=daniel&amp;project=curl\");\n\n        res = curl_easy_perform(curl);\n        if(res != CURLE_OK)\n            fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\n                    curl_easy_strerror(res));\n\n        curl_easy_cleanup(curl);\n    }\n    curl_global_cleanup();\n    return 0;\n}\n</code></pre>\n\n<p>When I'm trying to build the compiler drop this error : \"undefined reference to `_imp__curl_global_init'\" (and all other curl function calls)</p>\n\n<p>Can you help me ? I'm a bit lost - I did not really use Cmake before..</p>\n\n<p>Thank you !</p>\n"}, {"tags": ["c", "struct", "scanf"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1523459209, "post_id": 49778457, "comment_id": 86572396, "body": "<i>&quot;What should I do?&quot;</i> Learn how to use a debugger to diagnose fundamentally basic things like segfaults, instead of wasting your and others&#39; time asking other people to do that for you."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9631290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae828cb4524f2e7ea4c81f2acade9673?s=128&d=identicon&r=PG&f=1", "display_name": "hasan", "link": "https://stackoverflow.com/users/9631290/hasan"}, "edited": false, "score": 0, "creation_date": 1523461001, "post_id": 49778711, "comment_id": 86573725, "body": "Thanks a lot for your help!  Sorry for bad asking and typo I&#39;m newbie to c and stackoverflow. Best Regards"}], "tags": [], "owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "is_accepted": true, "score": 0, "last_activity_date": 1523459544, "creation_date": 1523459544, "answer_id": 49778711, "question_id": 49778457, "link": "https://stackoverflow.com/questions/49778457/how-to-scanf-strings-to-array-of-structs/49778711#49778711", "title": "How to scanf strings to array of structs?", "body": "<p>You have posted small part of your code, but I think your problem source is here:</p>\n\n<pre><code>temp-&gt;word=malloc(MAX_WORD_LENGTH);\ntemp-&gt;clues=malloc(MAX_CLUES_LENGTH);\n</code></pre>\n\n<p>You practically only allocating memory for 1st element or in other words <code>temp[0]</code>, but you need to do this for all of your array members. Hence, your code should be something like this:</p>\n\n<pre><code>for(int count=0;count&lt;nrWords;count++)\n  {\n    temp[count]-&gt;word=malloc(MAX_WORD_LENGTH);\n    temp[count]-&gt;clues=malloc(MAX_CLUES_LENGTH);\n    fscanf(myfile,\" %c %d %d %s %[^\\n]%*c\", &amp;temp[count].direction,&amp;temp[count].x, &amp;temp[count].y, temp[count].word, temp[count].clues);\n  }\n</code></pre>\n\n<p>I give a small hand for this bug, <strong>But</strong> remember to learn utilize debuggers for finding these small bugs.</p>\n"}], "owner": {"reputation": 3, "user_id": 9631290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae828cb4524f2e7ea4c81f2acade9673?s=128&d=identicon&r=PG&f=1", "display_name": "hasan", "link": "https://stackoverflow.com/users/9631290/hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49778711, "answer_count": 1, "score": 0, "last_activity_date": 1523459544, "creation_date": 1523458809, "question_id": 49778457, "link": "https://stackoverflow.com/questions/49778457/how-to-scanf-strings-to-array-of-structs", "title": "How to scanf strings to array of structs?", "body": "<p>I'm trying to create a array of structs and I'm reading the elements of structs from a .txt file. When I'm try to scanf a string from the file my program stops and while debugging codeblocks says \"Program received signal SIGSEGV, Segmentation fault.\". I'm trying to read the strings from the file and assign them to my structs. What should I do?</p>\n\n<p>My .txt file is below:</p>\n\n<pre><code>H 1 1 MILK White liquid produced by the mammals\nH 2 1 IN Used to indicate inclusion within space, a place, or limits\nH 3 3 BUS A road vehicle designed to carry many passengers\nH 5 3 DAN The name of a famous author whose surname is Brown\nV 1 1 MIND A set of cognitive faculties, e.g. consciousness, perception, etc.\nV 3 3 BAD Opposite of good\nV 2 5 ISBN International Standard Book Number\n</code></pre>\n\n<p>and my loadTextFile function to assign these values to my struct array is below:</p>\n\n<pre><code>Word_t* loadTextFile(FILE* myfile, int nrWords)\n{\n  Word_t* temp;\n  temp=malloc(sizeof(Word_t)*nrWords);\n  temp-&gt;word=malloc(MAX_WORD_LENGTH);\n  temp-&gt;clues=malloc(MAX_CLUES_LENGTH);\n\n  for(int count=0;count&lt;nrWords;count++)\n  {\n    fscanf(myfile,\" %c %d %d %s %[^\\n]%*c\", &amp;temp[count].direction,&amp;temp[count].x, &amp;temp[count].y, temp[count].word, temp[count].clues);\n  }\n  printf(\"ELEMENTS\");\n  for(int i=0;i&lt;nrWords;i++)\n  {\n    printf(\"%c %d %d %s %s\\n\", temp[i].direction, temp[i].x, temp[i].y,temp[i].word, temp[i].clues);\n  }\n\n  return temp;\n  }\n</code></pre>\n\n<p>I want to make my output look like the txt file.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1523458946, "post_id": 49778424, "comment_id": 86572200, "body": "<code>i</code> is not initialised - change <code>for(; i &lt; x; i++)</code> -&gt; <code>for(i = 0; i &lt; x; i++)</code>"}, {"owner": {"reputation": 111, "user_id": 6481764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed2fbbe073344fa6573fcd4da3c90940?s=128&d=identicon&r=PG&f=1", "display_name": "Angus Ryan", "link": "https://stackoverflow.com/users/6481764/angus-ryan"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1523459029, "post_id": 49778424, "comment_id": 86572256, "body": "you don&#39;t need to, it assumes i is 0 if you just write what I did."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 4, "creation_date": 1523459086, "post_id": 49778424, "comment_id": 86572301, "body": "Rubbish. That&#39;s undefined behaviour. Learn it now and learn it <b>well</b>."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1523459173, "post_id": 49778424, "comment_id": 86572374, "body": "why do you use for-loops and then leave out the initializer?  In the first loop, as Paul pointed out, not initializing <code>i</code> there causes problems since it is never initialized.  In the second loop, you initialize <code>j</code> before the loop instead of just putting it in the initializer that exists specifically for that purpose."}, {"owner": {"reputation": 355, "user_id": 3397816, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tpAs8.jpg?s=128&g=1", "display_name": "Trinopoty", "link": "https://stackoverflow.com/users/3397816/trinopoty"}, "edited": false, "score": 2, "creation_date": 1523459207, "post_id": 49778424, "comment_id": 86572395, "body": "Always initialize variables explicitly."}, {"owner": {"reputation": 111, "user_id": 6481764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed2fbbe073344fa6573fcd4da3c90940?s=128&d=identicon&r=PG&f=1", "display_name": "Angus Ryan", "link": "https://stackoverflow.com/users/6481764/angus-ryan"}, "edited": false, "score": 0, "creation_date": 1523459343, "post_id": 49778424, "comment_id": 86572491, "body": "So how come it runs without ever initialising it? (not arguing, curious)"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1523459431, "post_id": 49778424, "comment_id": 86572567, "body": "@AngusRyan Undefined behavior can do anything.  It can fail horribly if you&#39;re lucky, but if you&#39;re unlucky, it might appear to work as you intend."}, {"owner": {"reputation": 111, "user_id": 6481764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed2fbbe073344fa6573fcd4da3c90940?s=128&d=identicon&r=PG&f=1", "display_name": "Angus Ryan", "link": "https://stackoverflow.com/users/6481764/angus-ryan"}, "edited": false, "score": 1, "creation_date": 1523459667, "post_id": 49778424, "comment_id": 86572750, "body": "thanks, will be initialising e v e r y t h i n g from now on."}, {"owner": {"reputation": 111, "user_id": 6481764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed2fbbe073344fa6573fcd4da3c90940?s=128&d=identicon&r=PG&f=1", "display_name": "Angus Ryan", "link": "https://stackoverflow.com/users/6481764/angus-ryan"}, "edited": false, "score": 0, "creation_date": 1523460786, "post_id": 49778424, "comment_id": 86573592, "body": "why do I get downvoted for trying to learn something I dont know? How is it a bad question if im the one who doesn&#39;t understand it?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1523517993, "post_id": 49778424, "comment_id": 86595665, "body": "@AngusRyan: not my down-vote, but some possible reasons <i>might</i> be: (i) no attempt at debugging, (ii) poorly formatted code, (iii) posting images of text instead of text, (iv) attitude in comments. Having said that, it&#39;s not a terrible question, and you only got one down-vote, so I wouldn&#39;t worry too much - just try and work on quality a little in future questions."}], "answers": [{"tags": [], "owner": {"reputation": 132, "user_id": 8939032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c1c3754a5f470b9559b864b338f7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/8939032/sean"}, "is_accepted": false, "score": 0, "last_activity_date": 1523460898, "last_edit_date": 1523460898, "creation_date": 1523459020, "answer_id": 49778529, "question_id": 49778424, "link": "https://stackoverflow.com/questions/49778424/c-program-printing-duplicate-char/49778529#49778529", "title": "C Program Printing Duplicate Char", "body": "<p>Its because it runs once on each time it finds t and e respectively. One solution would be to find all occurrences of that char in the char array after printing the duplicate notification and removing it.</p>\n\n<pre><code>char * removeLetterFromArray(int toBeRemoved, char* string, int stringLength){\nchar * newString = malloc(stringLength * sizeof(char));\n\nfor(int i = 0; i &lt; toBeRemoved; i++){\n    newString[i] = string[i];\n}\n\nfor(int i = toBeRemoved; i &lt; stringLength; i++){\n    newString[i] = string[i + 1];\n}\n\nreturn newString;\n}\n</code></pre>\n\n<p>that code should remove the letter that you define the index of with toBeRemoved</p>\n\n<p>So after you find a letter that has a duplicate loop through the code to find all places that letter occurs and pass them indexs to the above method.</p>\n\n<p>If you do not wish to use the above method another option would be to create an array of letters that have already been output and ignore these letters in the future.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 6481764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed2fbbe073344fa6573fcd4da3c90940?s=128&d=identicon&r=PG&f=1", "display_name": "Angus Ryan", "link": "https://stackoverflow.com/users/6481764/angus-ryan"}, "edited": false, "score": 1, "creation_date": 1523459494, "post_id": 49778589, "comment_id": 86572615, "body": "that won&#39;t work because if you have a word like aaapple it will state a occurs 3 times, then when you go back through the for loop it will say a occurs 2 times as it is ignoring every point before the array starts"}, {"owner": {"reputation": 827, "user_id": 7383242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65444c41048c45464ae10a9cafa0c41?s=128&d=identicon&r=PG&f=1", "display_name": "medalib", "link": "https://stackoverflow.com/users/7383242/medalib"}, "reply_to_user": {"reputation": 111, "user_id": 6481764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed2fbbe073344fa6573fcd4da3c90940?s=128&d=identicon&r=PG&f=1", "display_name": "Angus Ryan", "link": "https://stackoverflow.com/users/6481764/angus-ryan"}, "edited": false, "score": 0, "creation_date": 1523460124, "post_id": 49778589, "comment_id": 86573086, "body": "@AngusRyan I would think of a table that stores duplicated letters, but, I think it will be a memory waste."}], "tags": [], "owner": {"reputation": 827, "user_id": 7383242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65444c41048c45464ae10a9cafa0c41?s=128&d=identicon&r=PG&f=1", "display_name": "medalib", "link": "https://stackoverflow.com/users/7383242/medalib"}, "is_accepted": false, "score": 1, "last_activity_date": 1523459349, "last_edit_date": 1523459349, "creation_date": 1523459177, "answer_id": 49778589, "question_id": 49778424, "link": "https://stackoverflow.com/questions/49778424/c-program-printing-duplicate-char/49778589#49778589", "title": "C Program Printing Duplicate Char", "body": "<p>Your problem here is in <code>for</code>s that look for the duplicate letter\nThe first one should go throw the string to look for all letters:</p>\n\n<pre><code>for (i = 0; i &lt; x; i++) {\n</code></pre>\n\n<p>The second should look for the occurrence of the same character:</p>\n\n<pre><code>for (j = i; j &lt; x; j++) {\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 6481764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed2fbbe073344fa6573fcd4da3c90940?s=128&d=identicon&r=PG&f=1", "display_name": "Angus Ryan", "link": "https://stackoverflow.com/users/6481764/angus-ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1262, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1523460898, "creation_date": 1523458715, "last_edit_date": 1523458831, "question_id": 49778424, "link": "https://stackoverflow.com/questions/49778424/c-program-printing-duplicate-char", "title": "C Program Printing Duplicate Char", "body": "<p>I'm trying to make a program in C that reads a word and prints if there are any duplicates and if so the number of occurrences. It works (as you can see in the attached pic) but once a letter has been printed I don't want it to reprint the same letter. </p>\n\n<p>I've tried storing the duplicate chars in an array and then comparing the new duplicate to the duplicate array but it doesn't seem to be working.\nAnyone know a simple way to not reprint?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\nchar word[100];\nint x, i, j, freq, duplicates;\nprintf(\"Enter a word&gt;\\n\");\nscanf(\"%s\", word);\nx = strlen(word);\nduplicates = 0;\nfreq = 1;\nfor(; i &lt; x; i++) {\n    j = 0;\n    for(; j &lt; x; j++) {\n        if ((word[i] == word[j]) &amp;&amp; (i != j)) {\n                freq = freq + 1;\n            }\n    }\n    if (freq &gt;= 2) {\n            printf(\"Duplicate letter: %c, Occurences: %d\\n\", word[i], freq);\n            duplicates = 1;\n            freq = 1;\n        }\n}\nif (duplicates &lt; 1) {\n    printf(\"No duplicates found\\n\");\n}\nreturn 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/emN8z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/emN8z.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "gcc", "include", "redefinition"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1523456206, "post_id": 49777433, "comment_id": 86570070, "body": "replace typedef by <code>#define</code> macro. same #define works."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1523456598, "post_id": 49777433, "comment_id": 86570344, "body": "The usual way is to use a sound naming convention together with a sound program design. If <code>INT</code> is something unrelated to both &quot;a&quot; and &quot;b&quot;, then clearly it should not be declared in those headers. As a side note, you shouldn&#39;t invent your own garage standard of integer types. Use stdint.h."}, {"owner": {"reputation": 75, "user_id": 1929570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab86784caa34a4ba579a162d08f008c6?s=128&d=identicon&r=PG", "display_name": "SwapnilShivhare", "link": "https://stackoverflow.com/users/1929570/swapnilshivhare"}, "edited": false, "score": 0, "creation_date": 1523456993, "post_id": 49777433, "comment_id": 86570655, "body": "This is working. Thanks!! But why #define works here and not the typedef?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1523457373, "post_id": 49777433, "comment_id": 86570971, "body": "@SwapnilShivhare <code>#define</code> and <code>typedef</code> are two very different things. The first works by textual substitution, the second actually creates a new type. It works with <code>#define</code> because it&#39;s legal to redefine a macro defined earlier, provided that it is the same definiton."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1523457909, "post_id": 49777433, "comment_id": 86571357, "body": "Note that <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.7p3\" rel=\"nofollow noreferrer\">C11 &#167;6.7 Declarations &#182;3</a> allows: <i>a typedef name may be redefined to denote the same type as it currently does, provided that type is not a variably modified type;</i> so you can&#39;t be using <code>-std=c11</code> or <code>-std=gnu11</code> amongst your compiling options.  Or, you must either be using an older version of GCC (meaning GCC 4 or older) because GCC version 5 or later defaults to C11 mode, or you must be deliberately specifying an older version of the standard.  However, you might legitimately decide not to use the feature because of compatibility."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 6, "last_activity_date": 1523456852, "last_edit_date": 1523456852, "creation_date": 1523456395, "answer_id": 49777542, "question_id": 49777433, "link": "https://stackoverflow.com/questions/49777433/how-can-i-avoid-redefinition-of-types-while-including-multiple-header-files/49777542#49777542", "title": "How can I avoid redefinition of types while including multiple header files?", "body": "<p>Probably the native compiler on Solaris accepts that you can redefine a typedef (probably provided that the new typedef is identical to the previous one which is the case here).</p>\n\n<p>I'd introduce another header file <code>mytypes.h</code> like this:</p>\n\n<p><strong>mytypes.h</strong></p>\n\n<pre><code>#ifndef MYTYPES_H\n#define MYTYPES_H\ntypedef int INT;     \n#endif\n</code></pre>\n\n<p>Include <code>mtypes.h</code> whereever <code>INT</code> is used, possibly even in <code>main.c</code>:</p>\n\n<p><strong>a.h</strong></p>\n\n<pre><code>#ifndef A_H\n#define A_H\n#include \"mytypes.h\"   // can be removed if INT is not used in a.h\n// other variables and function definition\n#endif\n</code></pre>\n\n<p><strong>b.h</strong></p>\n\n<pre><code>#ifndef B_H\n#define B_H\n#include \"mytypes.h\"   // can be removed if INT is not used in b.h\n// other variables and function definition\n#endif\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include \"a.h\" \n#include \"b.h\"\n#include \"mytypes.h\"  // not really necessary because it's already included\n                      // via a.h and b.h, but still good practice\n\nint main()\n{\n    INT i = 10; \n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 0, "last_activity_date": 1579162728, "last_edit_date": 1579162728, "creation_date": 1523465612, "answer_id": 49780612, "question_id": 49777433, "link": "https://stackoverflow.com/questions/49777433/how-can-i-avoid-redefinition-of-types-while-including-multiple-header-files/49780612#49780612", "title": "How can I avoid redefinition of types while including multiple header files?", "body": "<p>If you are allowed to change the library code or compiler options then Michael Walz's answer is the way to go</p>\n\n<p>In the unfortunate case that it's <strong>not</strong> changeable then it can be worked around by renaming before including the header then undefine it</p>\n\n<pre><code>#define INT INT_A\n#include \"a.h\"\n#undef INT\n\n#define INT INT_B\n#include \"b.h\"\n#undef INT\n</code></pre>\n\n<p>Now just use <code>INT_A</code> for all the interfaces in <code>a.h</code> instead of <code>INT</code>. Same to <code>INT_B</code> in <code>b.h</code></p>\n"}], "owner": {"reputation": 75, "user_id": 1929570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab86784caa34a4ba579a162d08f008c6?s=128&d=identicon&r=PG", "display_name": "SwapnilShivhare", "link": "https://stackoverflow.com/users/1929570/swapnilshivhare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1579162728, "creation_date": 1523456117, "last_edit_date": 1578103055, "question_id": 49777433, "link": "https://stackoverflow.com/questions/49777433/how-can-i-avoid-redefinition-of-types-while-including-multiple-header-files", "title": "How can I avoid redefinition of types while including multiple header files?", "body": "<p>I'm working on recompiling a C project and I'm not sure how do I fix this problem in a right way. \nHere is a situation - </p>\n\n<h1>a.h</h1>\n\n<pre><code>#ifndef A_H\n#define A_H\ntypedef int INT; \n// other variables and function definition\n#endif\n</code></pre>\n\n<h1>b.h</h1>\n\n<pre><code>#ifndef B_H\n#define B_H\ntypedef int INT;\n// other variables and function definition\n#endif\n</code></pre>\n\n<h1>main.c</h1>\n\n<pre><code>#include \"a.h\" \n#include \"b.h\"\n\nint main()\n{\n    INT i = 10; \n    return 0;\n}\n</code></pre>\n\n<p>The error I get in Linux with gcc:</p>\n\n<pre><code>In file included from ./main.c,\n\n    ./b.h:&lt;linenumber&gt;: error: redefinition of typedef \u2018INT\u2019\n    a.h.h:&lt;linenumber&gt;: note: previous declaration of \u2018INT\u2019 was here\n</code></pre>\n\n<p>I have to include both headers due to other variables and functions. I haven't written this code, but this seems to compile in my Solaris environment which is strange. What can I do to fix this ?  </p>\n"}, {"tags": ["c", "arrays", "pointers", "microcontroller"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1523455814, "post_id": 49777241, "comment_id": 86569769, "body": "This call printf(*ptr_weekly_table); has undefined behavior."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1523455958, "post_id": 49777241, "comment_id": 86569892, "body": "The code shall not compile because you may not use such declaraions like this const int _num_weekly_table = _rows * _cols; in the global scope."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1523456138, "post_id": 49777241, "comment_id": 86570018, "body": "And the condition in the if statement     if (progress_weekly_table &gt; _num_weekly_table) {         weekly_table_full = true; is also wrong. There should be     if (progress_weekly_table == _num_weekly_table) {         weekly_table_full = true;"}, {"owner": {"reputation": 13, "user_id": 9630998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5aa51e90cc2931611db77438d39f013?s=128&d=identicon&r=PG&f=1", "display_name": "user9630998", "link": "https://stackoverflow.com/users/9630998/user9630998"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1523456889, "post_id": 49777241, "comment_id": 86570571, "body": "Thanks for you answer. The code compiles with the const declarations in CCS, altough with warnings. The behaviour is the same if I call the array directly with [7][12].   Regarding an example: what is the best way to find test if the code I post is reproducable and complete? I tried copy pasting and then deleting all uneccessay lines on something like www.onlinegdb.com but It didnt work because uint_32t is undefined."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1523457149, "post_id": 49777241, "comment_id": 86570795, "body": "@uuser9630998 You nshould not rely on compiler language extensions."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523458108, "post_id": 49777241, "comment_id": 86571529, "body": "Names starting with underscore at file-scope are reserved for the implementation. IOW: You must not use them in the application code. Re the array lengths being variables: do you <b>really</b> complie as C code? It&#39;s not valid and causes trouble at best. Used macros instead of the variables. It would be valid in C++, though. It&#39;s a different language. I don&#39;t support eh general statement &quot;don&#39;t use compiler extensions&quot;, but if there is a straight-forward, and cannonical standard way, use it!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9630998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5aa51e90cc2931611db77438d39f013?s=128&d=identicon&r=PG&f=1", "display_name": "user9630998", "link": "https://stackoverflow.com/users/9630998/user9630998"}, "edited": false, "score": 0, "creation_date": 1523456701, "post_id": 49777341, "comment_id": 86570414, "body": "Thank you for your answer, I put the printf there to get some debug output on the console. Even with it not there the first value is not 0.   The tip regading ptr_weekly_table[progress_weekly_table] is really useful regarding readability, thank you I will use it from now on."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 13, "user_id": 9630998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5aa51e90cc2931611db77438d39f013?s=128&d=identicon&r=PG&f=1", "display_name": "user9630998", "link": "https://stackoverflow.com/users/9630998/user9630998"}, "edited": false, "score": 0, "creation_date": 1523456936, "post_id": 49777341, "comment_id": 86570612, "body": "@user9630998 Then you need to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1523456277, "last_edit_date": 1523456277, "creation_date": 1523455858, "answer_id": 49777341, "question_id": 49777241, "link": "https://stackoverflow.com/questions/49777241/first-element-of-array-not-empty-pointer-dereference/49777341#49777341", "title": "First Element of array not empty, pointer dereference", "body": "<p>The main problem is most likely this this:</p>\n\n<pre><code>printf(*ptr_weekly_table);\n</code></pre>\n\n<p>The expression <code>*ptr_weekly_table</code> an <code>uint32_t</code> value. Not a string (<code>char *</code>) which <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>printf</code></a> expects. Because you in effect pass a null pointer (since <code>ptr_weekly_table[0]</code> is supposedly zero) then you will ask <code>printf</code> to print whatever \"string\" is at location zero, and that will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>To print the correct value use something like</p>\n\n<pre><code>printf(\"%\"PRIu32\"\\n\", ptr_weekly_table[0]);\n</code></pre>\n\n<p>See e.g. <a href=\"http://en.cppreference.com/w/c/types/integer#Format_macro_constants\" rel=\"nofollow noreferrer\">this format specifier macro reference</a> for information about <code>PRIu32</code>.</p>\n\n<hr>\n\n<p>And as you can see I used <code>ptr_weekly_table[0]</code> to get the first value of the array. The expressions <code>ptr_weekly_table[0]</code> and <code>*ptr_weekly_table</code> are equal.</p>\n\n<p>In fact, for any pointer or array <code>p</code> and index <code>i</code>, the expression <code>p[i]</code> is exactly equal to <code>*(p + i)</code>. Which means <code>*(ptr_weekly_table + progress_weekly_table)</code> could be written <code>ptr_weekly_table[progress_weekly_table]</code> (which is a couple of characters less to write, as well as often more readable).</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9630998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5aa51e90cc2931611db77438d39f013?s=128&d=identicon&r=PG&f=1", "display_name": "user9630998", "link": "https://stackoverflow.com/users/9630998/user9630998"}, "edited": false, "score": 0, "creation_date": 1523973124, "post_id": 49777686, "comment_id": 86775552, "body": "thank you for the comments, will try to improve my code with these hints.   I figured out my problem, it was unrealted to pinters. The value i passed to append_weekly was not initialized proberly and therefore was not 0;"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1523458447, "last_edit_date": 1523458447, "creation_date": 1523456737, "answer_id": 49777686, "question_id": 49777241, "link": "https://stackoverflow.com/questions/49777241/first-element-of-array-not-empty-pointer-dereference/49777686#49777686", "title": "First Element of array not empty, pointer dereference", "body": "<p>For starters these declarations</p>\n\n<pre><code>const int _num_weekly_table = _rows * _cols;\nuint32_t weekly_table[_rows][_cols];\n</code></pre>\n\n<p>are invalid if they are declarations in the global namespace because 1) you may not initialize a variable with the static storage duration with a non-constant expression and 2) you may not declare Variable Length Arrays with the static storage duration.</p>\n\n<p>It seems you are compiling your program as a C++ program instead of as a C program.</p>\n\n<p>In any case the function <code>append_weekly_table</code> is invalid.\nFor example this statement</p>\n\n<pre><code>printf(*ptr_weekly_table);\n</code></pre>\n\n<p>does not make sense because the first parameter of the function has type <code>const char *</code>.</p>\n\n<pre><code>int printf(const char * restrict format, ...);\n           ^^^^^^^^^^^^  \n</code></pre>\n\n<p>And initially the object <code>*ptr_weekly_table</code> has inderterminate value (if the program is a C program and the array does not have the static storage duration; otherwise the object is zero initialized).</p>\n\n<p>Also this condition</p>\n\n<pre><code>if (progress_weekly_table &gt; _num_weekly_table) {\n    weekly_table_full = true;\n}\n</code></pre>\n\n<p>also is wrong. It should be written like</p>\n\n<pre><code>if (progress_weekly_table == _num_weekly_table) {\n    weekly_table_full = true;\n}\n</code></pre>\n\n<p>If you want to compile your program as a C program then the variables _rows and _cols must be declared at least like</p>\n\n<pre><code>enum {  _rows = 7,  _cols = 12 };\n</code></pre>\n\n<p>Also it is a bad idea to use leading underscores in variable names because such names are reserved by the system.</p>\n\n<p>Here is a demonstrative C program that can compile.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdint.h&gt;\n\nenum {  _rows = 7,  _cols = 12 };\nconst int _num_weekly_table = _rows * _cols;\nuint32_t weekly_table[_rows][_cols];\n\n// pointer pointing start of array weekly array\nuint32_t *ptr_weekly_table = &amp;weekly_table[0][0];\n\nint progress_weekly_table = 0;\nbool weekly_table_full = false;\n\nvoid append_weekly_table( uint32_t value)\n{\n    *(ptr_weekly_table + progress_weekly_table) = value;\n    //increase progress\n    progress_weekly_table++;\n    //if the table is full set flag\n    if (progress_weekly_table == _num_weekly_table) {\n        weekly_table_full = true;\n    }\n}\n\nint main(void) \n{\n    append_weekly_table( 1 );\n\n    printf( \"ptr_weekly_table[0] = %d\\n\", *ptr_weekly_table );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>ptr_weekly_table[0] = 1\n</code></pre>\n\n<p>You could substitute these two statements </p>\n\n<pre><code>*(ptr_weekly_table + progress_weekly_table) = value;\n//increase progress\nprogress_weekly_table++;\n//if the table is full set\n</code></pre>\n\n<p>with one statement</p>\n\n<pre><code>ptr_weekly_table[progress_weekly_table++] = value;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9630998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5aa51e90cc2931611db77438d39f013?s=128&d=identicon&r=PG&f=1", "display_name": "user9630998", "link": "https://stackoverflow.com/users/9630998/user9630998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 49777686, "answer_count": 2, "score": -1, "last_activity_date": 1523458447, "creation_date": 1523455593, "last_edit_date": 1523458365, "question_id": 49777241, "link": "https://stackoverflow.com/questions/49777241/first-element-of-array-not-empty-pointer-dereference", "title": "First Element of array not empty, pointer dereference", "body": "<p>i am writing code for a microcontroller. </p>\n\n<p>I have the following example so far:</p>\n\n<pre><code>// weekly table[timeslot][day]\nconst int _rows = 7;\nconst int _cols = 12;\nconst int _num_weekly_table = _rows * _cols;\nuint32_t weekly_table[_rows][_cols];\n\n// pointer pointing start of array weekly array\nuint32_t *ptr_weekly_table = &amp;weekly_table[0][0];\n\nint progress_weekly_table = 0;\nbool weekly_table_full = false;\n\n/*\n * according to progress_weekly_table save a value in the weekly_table\n */\nvoid append_weekly_table( uint32_t value)\n{\n    //insert element\n    printf(*ptr_weekly_table);\n    *(ptr_weekly_table + progress_weekly_table) = value;\n    //increase progress\n    progress_weekly_table++;\n    //if the table is full set flag\n    if (progress_weekly_table &gt; _num_weekly_table) {\n        weekly_table_full = true;\n    }\n}\n</code></pre>\n\n<p>During the main loop I run this line: </p>\n\n<pre><code>            append_weekly_table(1);\n</code></pre>\n\n<p>But the resulting array does not have a 1 as the first element, instead a 3200171746 (reproducable).All other elements in the array are 1 if i continue to run append_weekly_array. </p>\n\n<p>What is my error here? Quite new to pointers so I don't know if this is the issue.</p>\n"}, {"tags": ["c", "azure", "azure-eventhub", "azure-eventhub-capture"], "owner": {"reputation": 660, "user_id": 6144704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6kkJ.jpg?s=128&g=1", "display_name": "Ponmani Chinnaswamy", "link": "https://stackoverflow.com/users/6144704/ponmani-chinnaswamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523514247, "creation_date": 1523453399, "last_edit_date": 1523514247, "question_id": 49776466, "link": "https://stackoverflow.com/questions/49776466/event-hub-azure-sample-in-c-receiver-not-working-shows-timeout", "title": "Event Hub azure- sample in C - Receiver not working- Shows timeout", "body": "<p>I am beginner to azure event hub. I have tried the sample , <a href=\"https://github.com/Azure/azure-event-hubs-c/blob/master/docs/desktop_ubuntu_setup.md\" rel=\"nofollow noreferrer\">C sample from github</a>.</p>\n\n<p>I have successfully sent the messages, But receiveing it shows the error.</p>\n\n<pre><code>root@ala:~# ~/cmake/eventhub_client/samples/receive/receive\nInfo: Event Hubs Client SDK for C, version 0.10.0\nError: Time:Wed Apr 11 16:06:22 2018 File:/home/ala/azure-event-hubs/c/eventhub_client/src/eventhubreceiver_ll.c Func:HandleSASTokenAuth Line:277 EventHubAuthCBS Authentication Status Timed Out.\n\nError: Time:Wed Apr 11 16:06:22 2018 File:/home/ala/azure-event-hubs/c/eventhub_client/src/eventhubreceiver_ll.c Func:EventHubReceiver_LL_DoWork Line:1831 Authorization Timeout Observed\n\n-&gt; [CLOSE]* {}\nERROR: Unexpected Error Callback Triggered! 6\n</code></pre>\n\n<p>I have added the sharedaccesskey with event hub and also RootManageSharedAccessKey in event hub namespace. but both have same issue . </p>\n\n<p>Please any one help me out from this. Thanks in advance </p>\n"}, {"tags": ["c", "linux", "networking", "ioctl"], "comments": [{"owner": {"reputation": 381, "user_id": 8122389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b03de3cf9e1914368a72000d11efa1?s=128&d=identicon&r=PG", "display_name": "mr4kino", "link": "https://stackoverflow.com/users/8122389/mr4kino"}, "edited": false, "score": 0, "creation_date": 1523455418, "post_id": 49776432, "comment_id": 86569485, "body": "Not sure about the ioctl but to get the default gateway issue a route -n and you will see your default gateway on the first line(s) with a destination of 0.0.0.0"}, {"owner": {"reputation": 627, "user_id": 6694404, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bd260580a43b5bb091b40509eee0bfe9?s=128&d=identicon&r=PG&f=1", "display_name": "P.Carlino", "link": "https://stackoverflow.com/users/6694404/p-carlino"}, "reply_to_user": {"reputation": 381, "user_id": 8122389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b03de3cf9e1914368a72000d11efa1?s=128&d=identicon&r=PG", "display_name": "mr4kino", "link": "https://stackoverflow.com/users/8122389/mr4kino"}, "edited": false, "score": 1, "creation_date": 1523455529, "post_id": 49776432, "comment_id": 86569559, "body": "I want to do it from c code. Not calling other programs"}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1523457821, "post_id": 49776432, "comment_id": 86571291, "body": "Different destinations can have different gateways, even on the same interface."}], "owner": {"reputation": 627, "user_id": 6694404, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bd260580a43b5bb091b40509eee0bfe9?s=128&d=identicon&r=PG&f=1", "display_name": "P.Carlino", "link": "https://stackoverflow.com/users/6694404/p-carlino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527046275, "creation_date": 1523453303, "last_edit_date": 1527046275, "question_id": 49776432, "link": "https://stackoverflow.com/questions/49776432/retrieve-information-about-the-local-network", "title": "Retrieve information about the local network", "body": "<p>I'm writing a library to get information about interfaces presents on a unix machine. To get all the interfaces I use <code>ioctl</code> with the <code>SIOCGIFCONF</code> request. It returns  in the <code>ifconf</code> structure only the interfaces that are currently connected to internet plus the loopback interface.</p>\n\n<p>Does <code>SIOCGIFCONF</code> returns only the connected interfaces? </p>\n"}, {"tags": ["c", "algorithm", "debugging", "cs50", "luhn"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 4, "creation_date": 1523453352, "post_id": 49776359, "comment_id": 86567922, "body": "What is Luhn&#39;s algorithm? What is your input? What is your output? What is the expected output? You might find more help here: <a href=\"https://cs50.stackexchange.com/search?q=luhn\">cs50.stackexchange.com/search?q=luhn</a>"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1523453617, "post_id": 49776359, "comment_id": 86568110, "body": "The CS50x IDE has a built-in debugger. Now is the time to start using it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523456564, "post_id": 49776359, "comment_id": 86570315, "body": "It is easiest to read the &#39;number&#39; as a character string and then process each of those digits in turn, rather than to read the number into an integer and then dissect the integer."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523462647, "post_id": 49776576, "comment_id": 86574881, "body": "It&#39;s either <code>_True</code> or <code>true</code> (recommended, as you also use the <code>bool</code> macro), but not <code>True</code>."}], "tags": [], "owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "is_accepted": true, "score": -1, "last_activity_date": 1523463714, "last_edit_date": 1523463714, "creation_date": 1523453687, "answer_id": 49776576, "question_id": 49776359, "link": "https://stackoverflow.com/questions/49776359/excecuting-luhns-algorithm-in-c-buggy-code/49776576#49776576", "title": "Excecuting Luhn&#39;s Algorithm in C - buggy code", "body": "<pre><code>while (temp_n &gt;= 0)\n    {\n        //Take final digit, add up, then update temp no., increase digit counter by 1\n        odd = temp_n % 10;\n        sum_b = sum_b + odd;\n        temp_n = (temp_n - odd) / 10;\n        counter++;\n\n        //Take final digit (which is an even digit of n), multiply by 2 and add up, update temp no., increase counter by 1\n        even = temp_n % 10;\n        sum_a = sum_a + 2 * even;\n        temp_n = (temp_n - even) / 10;\n        counter++;\n\n    }\n</code></pre>\n\n<p>This assumes that input will always have even number of digits. Take a <code>bool flag = true;</code> and change it to:</p>\n\n<pre><code>while (temp_n &gt;= 0)\n    {\n        //Take final digit, add up, then update temp no., increase digit counter by 1\n      if(flag){\n        odd = temp_n % 10;\n        sum_b = sum_b + odd;\n        temp_n = (temp_n - odd) / 10;\n        counter++;\n        flag = !flag;}\n\n        //Take final digit (which is an even digit of n), multiply by 2 and add up, update temp no., increase counter by 1\n      else{\n        even = temp_n % 10;\n        sum_a = sum_a + 2 * even;\n        temp_n = (temp_n - even) / 10;\n        counter++;\n        flag = !flag;}\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9630786, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "PY98", "link": "https://stackoverflow.com/users/9630786/py98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 1, "accepted_answer_id": 49776576, "answer_count": 1, "score": -2, "last_activity_date": 1525509792, "creation_date": 1523453108, "last_edit_date": 1525509792, "question_id": 49776359, "link": "https://stackoverflow.com/questions/49776359/excecuting-luhns-algorithm-in-c-buggy-code", "title": "Excecuting Luhn&#39;s Algorithm in C - buggy code", "body": "<p>I'm currently working through CS50x's 2018 programme and I'm completing the 'credit' part of pset1. We're supposed to be executing Luhn's algorithm, but I can't get it to work. </p>\n\n<p>Luhn's algorithm is an algorithm that uses checksum to determine whether or not a credit card is valid. The input should be a credit card number, or something that could be a credit card number. It then takes the number, multiplies every other digit by 2 (or every even digit as implied in my code), sums them, then takes the remaining digits (the odd ones) and sums them with the first sum. The algorithm then states that if the last digit of the summed value is 0 then the number is valid (or if it divides by ten perfectly). If the answer isn't 0 then it should print \"INVALID\" to the user. If it is 0 the code should then analyse whether or not the number could be a valid card. We are supposed to use American Express, Visa and MasterCard as our potential cards. If it's AMEX it will be 15 digits and start with 34 or 37, MASTERCARD is 16 digits and starts with 51, 52, 53, 54 or 55, and VISA is either 13 or 16 digits and starts with 4. The expected output is either one of the card companies or \"INVALID\" if the number doesn't fit that criteria.</p>\n\n<p>Instead of this, my code simply runs until overflow after a number is submitted. I know my logic must be flawed somewhere, but I have no idea where I've gone wrong. My code is as follows:</p>\n\n<pre><code>//Checks credit card no. to see if valid\n#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(void)\n{\n    //Get card no. from user\n    long long n;\n    do\n    {\n        n = get_long_long(\"Card Number: \");\n    }\n    while (n &lt; 0);\n\n    //Define variables for checksum process\n    int odd = 0;\n    int even = 0;\n    long long temp_n = n;\n    int sum_a = 0;\n    int sum_b = 0;\n    int counter = 0;\n\n    //Execute checksum until all of n assessed\n    while (temp_n &gt;= 0)\n    {\n        //Take final digit, add up, then update temp no., increase digit counter by 1\n        odd = temp_n % 10;\n        sum_b = sum_b + odd;\n        temp_n = (temp_n - odd) / 10;\n        counter++;\n\n        //Take final digit (which is an even digit of n), multiply by 2 and add up, update temp no., increase counter by 1\n        even = temp_n % 10;\n        sum_a = sum_a + 2 * even;\n        temp_n = (temp_n - even) / 10;\n        counter++;\n\n    }\n\n    //Validate checksum\n    int test = (sum_a + sum_b) % 10;\n\n    //Return results\n    if (test == 0)\n    {\n        if (counter == 16 &amp;&amp; odd == 5 &amp;&amp; (even == 1 || even == 2 || even == 3 || even == 4 || even == 5))\n        {\n            printf(\"MASTERCARD\\n\");\n        }\n        else if ((counter == 16 || counter == 13) &amp;&amp; odd == 4)\n        {\n            printf(\"VISA\\n\");\n        }\n        else if (counter == 15 &amp;&amp; odd == 3 &amp;&amp; (even == 4 || even == 7))\n        {\n            printf(\"AMEX\\n\");\n        }\n        else\n        {\n            printf(\"INVALID\\n\");\n        }\n    }\n    else\n    {\n        printf(\"INVALID\\n\");\n    }\n\n}\n</code></pre>\n\n<p>I would appreciate any help I can get about where I've gone wrong. Thank you in advance.</p>\n"}, {"tags": ["c", "jwt", "sha256", "emscripten", "webassembly"], "comments": [{"owner": {"reputation": 1035, "user_id": 2854284, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a66cede09ad91417502051a3a146210a?s=128&d=identicon&r=PG", "display_name": "curiousdannii", "link": "https://stackoverflow.com/users/2854284/curiousdannii"}, "edited": false, "score": 4, "creation_date": 1523505400, "post_id": 49776226, "comment_id": 86590480, "body": "Don&#39;t write your own libraries if they&#39;re for security. If you don&#39;t know enough C you&#39;re almost certainly not qualified to do this. Why can&#39;t you use an existing library?"}, {"owner": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "reply_to_user": {"reputation": 1035, "user_id": 2854284, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a66cede09ad91417502051a3a146210a?s=128&d=identicon&r=PG", "display_name": "curiousdannii", "link": "https://stackoverflow.com/users/2854284/curiousdannii"}, "edited": false, "score": 0, "creation_date": 1523518153, "post_id": 49776226, "comment_id": 86595760, "body": "Thanks for the reply, I&#39;ve tried to add an existing lib, but couldn&#39;t figure it out ... could it be a WebAssembly limitation?"}, {"owner": {"reputation": 11208, "user_id": 1115237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a5b371929b9ddad5e22fc6997e5aab49?s=128&d=identicon&r=PG", "display_name": "Shlomi Schwartz", "link": "https://stackoverflow.com/users/1115237/shlomi-schwartz"}, "edited": false, "score": 1, "creation_date": 1523518331, "post_id": 49776226, "comment_id": 86595868, "body": "Have a look here <a href=\"https://developers.google.com/web/updates/2018/03/emscripting-a-c-library\" rel=\"nofollow noreferrer\">developers.google.com/web/updates/2018/03/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1077, "user_id": 2174271, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/f04f3022784248de423fe3e0373d8c5a?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Gehlaut", "link": "https://stackoverflow.com/users/2174271/tarun-gehlaut"}, "is_accepted": false, "score": 8, "last_activity_date": 1523724823, "creation_date": 1523724823, "answer_id": 49833891, "question_id": 49776226, "link": "https://stackoverflow.com/questions/49776226/hmacsha256-in-webassembly-compiled-with-emscripten/49833891#49833891", "title": "HmacSHA256 in WebAssembly compiled with Emscripten", "body": "<p>It is true that you cannot use the system libraries when using web-assembly. So the only solution is to compile them from source in a way the that is compliant with the libraries already provided by the cross-compiler (ie emscripten)</p>\n\n<p>So for your question, I found the library <a href=\"https://github.com/weidai11/cryptopp\" rel=\"noreferrer\">cryptopp</a>, satisfying your use case. The example <a href=\"https://www.cryptopp.com/wiki/HMAC\" rel=\"noreferrer\">here</a> showcase how you can use this library.</p>\n\n<p>Now how can you compile this library for your case? Since it comes with a make file, all you need to do is call </p>\n\n<pre><code>emmake make -f GNUmakefile-cross -j8\n</code></pre>\n\n<p>This will generate a .a file, which is actually a .bc file and can be linked with your existing C/C++ program, that you wish to run on web. Just make sure to include the headers of this file appropriately. It would even be better if you make a makefile for your project.</p>\n\n<p>P.S I got this working locally in my system, by adding these line at the end of the GNUmakefile-cross file</p>\n\n<pre><code>cryptest.html: libcryptopp.a $(TESTOBJS)\n    $(CXX) -s DISABLE_EXCEPTION_CATCHING=0 --preload-file TestData -o $@ $(strip $(CXXFLAGS)) $(TESTOBJS) ./libcryptopp.a $(LDFLAGS) $(LDLIBS)\n</code></pre>\n\n<p>I changed the test.cpp file to include sample code for \"HMAC\" and then called the following lines from the command line</p>\n\n<pre><code>emmake make -f GNUmakefile-cross cryptest.html -j8\n</code></pre>\n\n<p>The output ie cryptest.html, when opened in firefox worked flawlessly.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1524004330, "post_id": 49862020, "comment_id": 86792965, "body": "Note: With a small amount of code change, code could use <code>uint64_t len_b = (0ULL + ctx-&gt;tot_len + ctx-&gt;len) &lt;&lt; 3</code> and a 5 or 8 byte write to allow byte lengths up to 2^32 rather than only 2^29.  IAC, Using <code>size_t</code> rather than <code>unsigned</code> would make more sense for <code>len</code> and <code>tot_len</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1524004662, "post_id": 49862020, "comment_id": 86793075, "body": "@chux I actually forgot to add the document I based the function on. I edited my answer and added it. Tried my best to do the calculations step by step as pointed in the document. (I didn&#39;t even free some of the mid-result mallocs). But you have a good point."}, {"owner": {"reputation": 11208, "user_id": 1115237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a5b371929b9ddad5e22fc6997e5aab49?s=128&d=identicon&r=PG", "display_name": "Shlomi Schwartz", "link": "https://stackoverflow.com/users/1115237/shlomi-schwartz"}, "edited": false, "score": 0, "creation_date": 1524400768, "post_id": 49862020, "comment_id": 86947667, "body": "Great answer, what about converting it to the Base64 format?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "reply_to_user": {"reputation": 11208, "user_id": 1115237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a5b371929b9ddad5e22fc6997e5aab49?s=128&d=identicon&r=PG", "display_name": "Shlomi Schwartz", "link": "https://stackoverflow.com/users/1115237/shlomi-schwartz"}, "edited": false, "score": 1, "creation_date": 1524447802, "post_id": 49862020, "comment_id": 86960706, "body": "@ShlomiSchwartz I&#39;ve just added it now."}, {"owner": {"reputation": 11208, "user_id": 1115237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a5b371929b9ddad5e22fc6997e5aab49?s=128&d=identicon&r=PG", "display_name": "Shlomi Schwartz", "link": "https://stackoverflow.com/users/1115237/shlomi-schwartz"}, "edited": false, "score": 0, "creation_date": 1526988235, "post_id": 49862020, "comment_id": 87945985, "body": "@Maximus could you please point out where exactly I need to free the  mid-result mallocs? Thanks."}, {"owner": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "edited": false, "score": 0, "creation_date": 1528967105, "post_id": 49862020, "comment_id": 88710004, "body": "@Maximus there is a bug when trying to encode a large string, what is the limit?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "reply_to_user": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "edited": false, "score": 0, "creation_date": 1529248007, "post_id": 49862020, "comment_id": 88795360, "body": "@RoniGadot What is the bug? Can you explain?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "reply_to_user": {"reputation": 11208, "user_id": 1115237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a5b371929b9ddad5e22fc6997e5aab49?s=128&d=identicon&r=PG", "display_name": "Shlomi Schwartz", "link": "https://stackoverflow.com/users/1115237/shlomi-schwartz"}, "edited": false, "score": 0, "creation_date": 1529248121, "post_id": 49862020, "comment_id": 88795394, "body": "@ShlomiSchwartz You can free the mallocs once they are not needed. I showed an example of this in the code. Maybe you can expand it from there? (or even make it better)"}, {"owner": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "edited": false, "score": 0, "creation_date": 1529344707, "post_id": 49862020, "comment_id": 88830135, "body": "@maximus, when I try to encode a long string, the result is incorrect."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "reply_to_user": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "edited": false, "score": 0, "creation_date": 1529356881, "post_id": 49862020, "comment_id": 88835311, "body": "@RoniGadot What is the length of the string you tried? I&#39;ll try to see if it works out for me. Never tried it with long strings. Perhaps there is a bug as you mentioned. Or something else is fishy."}, {"owner": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "edited": false, "score": 0, "creation_date": 1529481430, "post_id": 49862020, "comment_id": 88883636, "body": "@Maximus, thank you so much. I&#39;m not sure it&#39;s the length. <b>String is</b> :&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1MjkwNTE5M&zwnj;&#8203;jAsImRhdGEiOiJlNEx0d&zwnj;&#8203;0ljSmdRK2IxZmpESWpDN&zwnj;&#8203;mxsc0QwLzg2bVFOLzltb&zwnj;&#8203;3h4eHJHMUdkeXU5cCtQS&zwnj;&#8203;FRGbm9Wa0VneG5IcThwO&zwnj;&#8203;UJzMVc0R1Z5c1RtL2pKV&zwnj;&#8203;jhoZmpoRGNabkRZRWQyd&zwnj;&#8203;VZRQjNHSVdSWjZ6ckFhV&zwnj;&#8203;UZ3WVhNUGdmcFppcWtac&zwnj;&#8203;W4rWkEzVWphdVBiNjA0R&zwnj;&#8203;EdzdGxxeklXY2RMSjFkU&zwnj;&#8203;2FPSW0yYWFLZGEwSEtJT&zwnj;&#8203;TBNV0lGZ3Q0OE82dFNzN&zwnj;&#8203;UhlMlpXSGdiVWYwZEhyN&zwnj;&#8203;TVnPT0ifQ&quot; <b>secret is</b> &quot;eyJleHAiOjE1MjkwNTE5MjAsImRhdGEiOiJlNEx&quot; <b>output</b> &quot;zMGF5gB-M-_6w8AwQHTu6fZAiG9iPtwY2rKrFi9RD4w=&quot; <b>expected</b> &quot;0Qij4hc41B0VOIWls5lVH6KtTf5T0tRcx7nePm1b1PM&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "reply_to_user": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "edited": false, "score": 0, "creation_date": 1557091389, "post_id": 49862020, "comment_id": 98640104, "body": "@RoniGadot I&#39;m sorry for the late reply, I was busy and then forgot about this question. I have run your string and secret key right now, and I&#39;ve got &quot;X/8qVQ05VCzazUhN9sN8/HlWsg0djnrJrZA7k6rHrOk=&quot; using both the code above, and the website I&#39;ve provided in the link. Can you share where you have got that expected output? Perhaps I can be of more help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "reply_to_user": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "edited": false, "score": 0, "creation_date": 1560862962, "post_id": 49862020, "comment_id": 99869285, "body": "@RoniGadot No problem :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "is_accepted": true, "score": 4, "last_activity_date": 1524447778, "last_edit_date": 1524447778, "creation_date": 1523895860, "answer_id": 49862020, "question_id": 49776226, "link": "https://stackoverflow.com/questions/49776226/hmacsha256-in-webassembly-compiled-with-emscripten/49862020#49862020", "title": "HmacSHA256 in WebAssembly compiled with Emscripten", "body": "<p>I managed to create a small (library-ish) code snippet in C. I checked the results from <a href=\"https://www.freeformatter.com/hmac-generator.html#ad-output\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Also shown here:\n<a href=\"https://i.stack.imgur.com/5gesg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5gesg.png\" alt=\"enter image description here\"></a></p>\n\n<p>The SHA256 code is taken from <a href=\"https://github.com/ckolivas/cgminer\" rel=\"nofollow noreferrer\">here</a>. Used in cgminer.</p>\n\n<p>I just modified it a bit (removed references etc.) to make it work stand-alone. Here is the total code and test software.</p>\n\n<blockquote>\n  <p>sha2.h:</p>\n</blockquote>\n\n<pre><code>/*\n * FIPS 180-2 SHA-224/256/384/512 implementation\n * Last update: 02/02/2007\n * Issue date:  04/30/2005\n *\n * Copyright (C) 2013, Con Kolivas &lt;kernel@kolivas.org&gt;\n * Copyright (C) 2005, 2007 Olivier Gay &lt;olivier.gay@a3.epfl.ch&gt;\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n * 3. Neither the name of the project nor the names of its contributors\n *    may be used to endorse or promote products derived from this software\n *    without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE PROJECT AND CONTRIBUTORS ``AS IS'' AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED.  IN NO EVENT SHALL THE PROJECT OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS\n * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n * SUCH DAMAGE.\n */\n\n#ifndef SHA2_H\n#define SHA2_H\n\n#define SHA256_DIGEST_SIZE ( 256 / 8)\n#define SHA256_BLOCK_SIZE  ( 512 / 8)\n\n#define SHFR(x, n)    (x &gt;&gt; n)\n#define ROTR(x, n)   ((x &gt;&gt; n) | (x &lt;&lt; ((sizeof(x) &lt;&lt; 3) - n)))\n#define CH(x, y, z)  ((x &amp; y) ^ (~x &amp; z))\n#define MAJ(x, y, z) ((x &amp; y) ^ (x &amp; z) ^ (y &amp; z))\n\n#define SHA256_F1(x) (ROTR(x,  2) ^ ROTR(x, 13) ^ ROTR(x, 22))\n#define SHA256_F2(x) (ROTR(x,  6) ^ ROTR(x, 11) ^ ROTR(x, 25))\n#define SHA256_F3(x) (ROTR(x,  7) ^ ROTR(x, 18) ^ SHFR(x,  3))\n#define SHA256_F4(x) (ROTR(x, 17) ^ ROTR(x, 19) ^ SHFR(x, 10))\n\ntypedef struct {\n    unsigned int tot_len;\n    unsigned int len;\n    unsigned char block[2 * SHA256_BLOCK_SIZE];\n    unsigned int h[8];\n} sha256_ctx;\n\nextern unsigned int sha256_k[64];\n\nvoid sha256_init(sha256_ctx * ctx);\nvoid sha256_update(sha256_ctx *ctx, const unsigned char *message,\n                   unsigned int len);\nvoid sha256_final(sha256_ctx *ctx, unsigned char *digest);\nvoid sha256(const unsigned char *message, unsigned int len,\n            unsigned char *digest);\n\n#endif /* !SHA2_H */\n</code></pre>\n\n<blockquote>\n  <p>main.c:</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include \"sha2.h\"\n\n#define UNPACK32(x, str)                      \\\n{                                             \\\n*((str) + 3) = (unsigned char) ((x)      );       \\\n*((str) + 2) = (unsigned char) ((x) &gt;&gt;  8);       \\\n*((str) + 1) = (unsigned char) ((x) &gt;&gt; 16);       \\\n*((str) + 0) = (unsigned char) ((x) &gt;&gt; 24);       \\\n}\n\n#define PACK32(str, x)                        \\\n{                                             \\\n*(x) =   ((unsigned int) *((str) + 3)      )    \\\n| ((unsigned int) *((str) + 2) &lt;&lt;  8)    \\\n| ((unsigned int) *((str) + 1) &lt;&lt; 16)    \\\n| ((unsigned int) *((str) + 0) &lt;&lt; 24);   \\\n}\n\n#define SHA256_SCR(i)                         \\\n{                                             \\\nw[i] =  SHA256_F4(w[i -  2]) + w[i -  7]  \\\n+ SHA256_F3(w[i - 15]) + w[i - 16]; \\\n}\n\nunsigned int sha256_h0[8] =\n{ 0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19 };\n\nunsigned int sha256_k[64] =\n{ 0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n    0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n    0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n    0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n    0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n    0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n    0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n    0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n    0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2 };\n\n/* SHA-256 functions */\n\nvoid sha256_transf(sha256_ctx *ctx, const unsigned char *message,\n                   unsigned int block_nb)\n{\n    unsigned int w[64];\n    unsigned int wv[8];\n    unsigned int t1, t2;\n    const unsigned char *sub_block;\n    int i;\n\n    int j;\n\n    for (i = 0; i &lt; (int)block_nb; i++) {\n        sub_block = message + (i &lt;&lt; 6);\n\n        for (j = 0; j &lt; 16; j++) {\n            PACK32(&amp;sub_block[j &lt;&lt; 2], &amp;w[j]);\n        }\n\n        for (j = 16; j &lt; 64; j++) {\n            SHA256_SCR(j);\n        }\n\n        for (j = 0; j &lt; 8; j++) {\n            wv[j] = ctx-&gt;h[j];\n        }\n\n        for (j = 0; j &lt; 64; j++) {\n            t1 = wv[7] + SHA256_F2(wv[4]) + CH(wv[4], wv[5], wv[6])\n            + sha256_k[j] + w[j];\n            t2 = SHA256_F1(wv[0]) + MAJ(wv[0], wv[1], wv[2]);\n            wv[7] = wv[6];\n            wv[6] = wv[5];\n            wv[5] = wv[4];\n            wv[4] = wv[3] + t1;\n            wv[3] = wv[2];\n            wv[2] = wv[1];\n            wv[1] = wv[0];\n            wv[0] = t1 + t2;\n        }\n\n        for (j = 0; j &lt; 8; j++) {\n            ctx-&gt;h[j] += wv[j];\n        }\n    }\n}\n\nvoid sha256(const unsigned char *message, unsigned int len, unsigned char *digest)\n{\n    sha256_ctx ctx;\n\n    sha256_init(&amp;ctx);\n    sha256_update(&amp;ctx, message, len);\n    sha256_final(&amp;ctx, digest);\n}\n\nvoid sha256_init(sha256_ctx *ctx)\n{\n    int i;\n    for (i = 0; i &lt; 8; i++) {\n        ctx-&gt;h[i] = sha256_h0[i];\n    }\n\n    ctx-&gt;len = 0;\n    ctx-&gt;tot_len = 0;\n}\n\nvoid sha256_update(sha256_ctx *ctx, const unsigned char *message,\n                   unsigned int len)\n{\n    unsigned int block_nb;\n    unsigned int new_len, rem_len, tmp_len;\n    const unsigned char *shifted_message;\n\n    tmp_len = SHA256_BLOCK_SIZE - ctx-&gt;len;\n    rem_len = len &lt; tmp_len ? len : tmp_len;\n\n    memcpy(&amp;ctx-&gt;block[ctx-&gt;len], message, rem_len);\n\n    if (ctx-&gt;len + len &lt; SHA256_BLOCK_SIZE) {\n        ctx-&gt;len += len;\n        return;\n    }\n\n    new_len = len - rem_len;\n    block_nb = new_len / SHA256_BLOCK_SIZE;\n\n    shifted_message = message + rem_len;\n\n    sha256_transf(ctx, ctx-&gt;block, 1);\n    sha256_transf(ctx, shifted_message, block_nb);\n\n    rem_len = new_len % SHA256_BLOCK_SIZE;\n\n    memcpy(ctx-&gt;block, &amp;shifted_message[block_nb &lt;&lt; 6],\n           rem_len);\n\n    ctx-&gt;len = rem_len;\n    ctx-&gt;tot_len += (block_nb + 1) &lt;&lt; 6;\n}\n\nvoid sha256_final(sha256_ctx *ctx, unsigned char *digest)\n{\n    unsigned int block_nb;\n    unsigned int pm_len;\n    unsigned int len_b;\n\n    int i;\n\n    block_nb = (1 + ((SHA256_BLOCK_SIZE - 9)\n                     &lt; (ctx-&gt;len % SHA256_BLOCK_SIZE)));\n\n    len_b = (ctx-&gt;tot_len + ctx-&gt;len) &lt;&lt; 3;\n    pm_len = block_nb &lt;&lt; 6;\n\n    memset(ctx-&gt;block + ctx-&gt;len, 0, pm_len - ctx-&gt;len);\n    ctx-&gt;block[ctx-&gt;len] = 0x80;\n    UNPACK32(len_b, ctx-&gt;block + pm_len - 4);\n\n    sha256_transf(ctx, ctx-&gt;block, block_nb);\n\n    for (i = 0; i &lt; 8; i++) {\n        UNPACK32(ctx-&gt;h[i], &amp;digest[i &lt;&lt; 2]);\n    }\n}\n\nunsigned char * HMAC_SHA256(const char * msg, const char * key)\n{\n    unsigned int blocksize = 64;\n    unsigned char * Key0 = (unsigned char *)calloc(blocksize, sizeof(unsigned char));\n    unsigned char * Key0_ipad = (unsigned char *)calloc(blocksize, sizeof(unsigned char));\n    unsigned char * Key0_ipad_concat_text = (unsigned char *)calloc( (blocksize + strlen(msg)), sizeof(unsigned char));\n    unsigned char * Key0_ipad_concat_text_digest = (unsigned char *)calloc( blocksize, sizeof(unsigned char));\n    unsigned char * Key0_opad = (unsigned char *)calloc(blocksize, sizeof(unsigned char));\n    unsigned char * Key0_opad_concat_prev = (unsigned char *)calloc(blocksize + 32, sizeof(unsigned char));\n\n    unsigned char * HMAC_SHA256 = (unsigned char *)malloc(32 * sizeof(unsigned char));\n\n    if (strlen(key) &lt; blocksize) {\n        for (int i = 0; i &lt; blocksize; i++) {\n            if (i &lt; strlen(key)) Key0[i] = key[i];\n            else Key0[i] = 0x00;\n        }\n    }\n    else if (strlen(key) &gt; blocksize) {\n        sha256(key, strlen(key), Key0);\n        for (unsigned char i = strlen(key); i &lt; blocksize; i++) {\n            Key0[i] = 0x00;\n        }\n    }\n\n    for (int i = 0; i &lt; blocksize; i++) {\n        Key0_ipad[i] = Key0[i] ^ 0x36;\n    }\n    for (int i = 0; i &lt; blocksize; i++) {\n        Key0_ipad_concat_text[i] = Key0_ipad[i];\n    }\n    for (int i = blocksize; i &lt; blocksize + strlen(msg); i++) {\n        Key0_ipad_concat_text[i] = msg[i - blocksize];\n    }\n\n    sha256(Key0_ipad_concat_text, blocksize + (unsigned int)strlen(msg), Key0_ipad_concat_text_digest);\n\n    for (int i = 0; i &lt; blocksize; i++) {\n        Key0_opad[i] = Key0[i] ^ 0x5C;\n    }\n\n    for (int i = 0; i &lt; blocksize; i++) {\n        Key0_opad_concat_prev[i] = Key0_opad[i];\n    }\n    for (int i = blocksize; i &lt; blocksize + 32; i++) {\n        Key0_opad_concat_prev[i] = Key0_ipad_concat_text_digest[i - blocksize];\n    }\n\n    sha256(Key0_opad_concat_prev, blocksize + 32, HMAC_SHA256);\n    return HMAC_SHA256;\n}\n\n\nint main()\n{\n    unsigned char * result;\n\n    result = HMAC_SHA256(\"Sample #1\", \"MyKey\");\n\n    unsigned char arr[32] = { 0 };\n    memcpy(arr, result, 32);\n\n    for(int i = 0; i &lt; 32; i++) {\n        printf(\"%#02x, \", arr[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Here are the results for the sample run:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3MOty.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3MOty.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/NrPh9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NrPh9.png\" alt=\"enter image description here\"></a></p>\n\n<p>EDIT: </p>\n\n<p>Info on the HMAC_SHA256 function can be found <a href=\"https://csrc.nist.gov/csrc/media/publications/fips/198/archive/2002-03-06/documents/fips-198a.pdf\" rel=\"nofollow noreferrer\">here</a>. The one I wrote is just for demonstration purposes. One can modify it accordingly.</p>\n\n<p>EDIT 2: </p>\n\n<p>I added the code for Base64 format. I used the information found on Wikipedia. Sample test run works for OP's input and output. Results are as shown:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fHiBM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fHiBM.png\" alt=\"Computed HMAC_SHA256 of &quot;test&quot; and &quot;secret&quot;\"></a>\n<a href=\"https://i.stack.imgur.com/veHKX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/veHKX.png\" alt=\"main.c results for &quot;test&quot; and &quot;secret&quot;\"></a></p>\n\n<blockquote>\n  <p>Updated main.c</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\n#include \"sha2.h\"\n\n#define HMAC_SHA256_FAIL_STRING \"HMAC_SHA256 has failed.\" // fprintf(stderr, \"%s\\n\", strerror(errno));\n\n#define UNPACK32(x, str)                      \\\n{                                             \\\n*((str) + 3) = (unsigned char) ((x)      );       \\\n*((str) + 2) = (unsigned char) ((x) &gt;&gt;  8);       \\\n*((str) + 1) = (unsigned char) ((x) &gt;&gt; 16);       \\\n*((str) + 0) = (unsigned char) ((x) &gt;&gt; 24);       \\\n}\n\n#define PACK32(str, x)                        \\\n{                                             \\\n*(x) =   ((unsigned int) *((str) + 3)      )    \\\n| ((unsigned int) *((str) + 2) &lt;&lt;  8)    \\\n| ((unsigned int) *((str) + 1) &lt;&lt; 16)    \\\n| ((unsigned int) *((str) + 0) &lt;&lt; 24);   \\\n}\n\n#define SHA256_SCR(i)                         \\\n{                                             \\\nw[i] =  SHA256_F4(w[i -  2]) + w[i -  7]  \\\n+ SHA256_F3(w[i - 15]) + w[i - 16]; \\\n}\n\nchar Base64_Table[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\nunsigned int sha256_h0[8] =\n{ 0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19 };\n\nunsigned int sha256_k[64] =\n{ 0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n    0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n    0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n    0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n    0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n    0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n    0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n    0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n    0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2 };\n\n/* SHA-256 functions */\n\nvoid sha256_transf(sha256_ctx *ctx, const unsigned char *message,\n                   unsigned int block_nb)\n{\n    unsigned int w[64];\n    unsigned int wv[8];\n    unsigned int t1, t2;\n    const unsigned char *sub_block;\n    int i;\n\n    int j;\n\n    for (i = 0; i &lt; (int)block_nb; i++) {\n        sub_block = message + (i &lt;&lt; 6);\n\n        for (j = 0; j &lt; 16; j++) {\n            PACK32(&amp;sub_block[j &lt;&lt; 2], &amp;w[j]);\n        }\n\n        for (j = 16; j &lt; 64; j++) {\n            SHA256_SCR(j);\n        }\n\n        for (j = 0; j &lt; 8; j++) {\n            wv[j] = ctx-&gt;h[j];\n        }\n\n        for (j = 0; j &lt; 64; j++) {\n            t1 = wv[7] + SHA256_F2(wv[4]) + CH(wv[4], wv[5], wv[6])\n            + sha256_k[j] + w[j];\n            t2 = SHA256_F1(wv[0]) + MAJ(wv[0], wv[1], wv[2]);\n            wv[7] = wv[6];\n            wv[6] = wv[5];\n            wv[5] = wv[4];\n            wv[4] = wv[3] + t1;\n            wv[3] = wv[2];\n            wv[2] = wv[1];\n            wv[1] = wv[0];\n            wv[0] = t1 + t2;\n        }\n\n        for (j = 0; j &lt; 8; j++) {\n            ctx-&gt;h[j] += wv[j];\n        }\n    }\n}\n\nvoid sha256(const unsigned char *message, unsigned int len, unsigned char *digest)\n{\n    sha256_ctx ctx;\n\n    sha256_init(&amp;ctx);\n    sha256_update(&amp;ctx, message, len);\n    sha256_final(&amp;ctx, digest);\n}\n\nvoid sha256_init(sha256_ctx *ctx)\n{\n    int i;\n    for (i = 0; i &lt; 8; i++) {\n        ctx-&gt;h[i] = sha256_h0[i];\n    }\n\n    ctx-&gt;len = 0;\n    ctx-&gt;tot_len = 0;\n}\n\nvoid sha256_update(sha256_ctx *ctx, const unsigned char *message,\n                   unsigned int len)\n{\n    unsigned int block_nb;\n    unsigned int new_len, rem_len, tmp_len;\n    const unsigned char *shifted_message;\n\n    tmp_len = SHA256_BLOCK_SIZE - ctx-&gt;len;\n    rem_len = len &lt; tmp_len ? len : tmp_len;\n\n    memcpy(&amp;ctx-&gt;block[ctx-&gt;len], message, rem_len);\n\n    if (ctx-&gt;len + len &lt; SHA256_BLOCK_SIZE) {\n        ctx-&gt;len += len;\n        return;\n    }\n\n    new_len = len - rem_len;\n    block_nb = new_len / SHA256_BLOCK_SIZE;\n\n    shifted_message = message + rem_len;\n\n    sha256_transf(ctx, ctx-&gt;block, 1);\n    sha256_transf(ctx, shifted_message, block_nb);\n\n    rem_len = new_len % SHA256_BLOCK_SIZE;\n\n    memcpy(ctx-&gt;block, &amp;shifted_message[block_nb &lt;&lt; 6],\n           rem_len);\n\n    ctx-&gt;len = rem_len;\n    ctx-&gt;tot_len += (block_nb + 1) &lt;&lt; 6;\n}\n\nvoid sha256_final(sha256_ctx *ctx, unsigned char *digest)\n{\n    unsigned int block_nb;\n    unsigned int pm_len;\n    unsigned int len_b;\n\n    int i;\n\n    block_nb = (1 + ((SHA256_BLOCK_SIZE - 9)\n                     &lt; (ctx-&gt;len % SHA256_BLOCK_SIZE)));\n\n    len_b = (ctx-&gt;tot_len + ctx-&gt;len) &lt;&lt; 3;\n    pm_len = block_nb &lt;&lt; 6;\n\n    memset(ctx-&gt;block + ctx-&gt;len, 0, pm_len - ctx-&gt;len);\n    ctx-&gt;block[ctx-&gt;len] = 0x80;\n    UNPACK32(len_b, ctx-&gt;block + pm_len - 4);\n\n    sha256_transf(ctx, ctx-&gt;block, block_nb);\n\n    for (i = 0; i &lt; 8; i++) {\n        UNPACK32(ctx-&gt;h[i], &amp;digest[i &lt;&lt; 2]);\n    }\n}\n\nchar * HMAC_SHA256(char * msg, char * key)\n{\n    size_t blocksize;\n\n    blocksize = 64;\n    char * Key0 = (char *)calloc(blocksize, sizeof(char));\n    if (Key0 == NULL) {\n        return HMAC_SHA256_FAIL_STRING;\n    }\n\n    blocksize = 64;\n    char * Key0_ipad = (char *)calloc(blocksize, sizeof(char));\n    if (Key0_ipad == NULL) {\n        free(Key0);\n        return HMAC_SHA256_FAIL_STRING;\n    }\n\n    blocksize = 64 + strlen(msg);\n    char * Key0_ipad_concat_text = (char *)calloc( blocksize, sizeof(char));\n    if (Key0_ipad_concat_text == NULL) {\n        free(Key0);\n        free(Key0_ipad);\n        return HMAC_SHA256_FAIL_STRING;\n    }\n\n    blocksize = 64;\n    char * Key0_ipad_concat_text_digest = (char *)calloc( blocksize, sizeof(char));\n    if (Key0_ipad_concat_text_digest == NULL) {\n        free(Key0);\n        free(Key0_ipad);\n        free(Key0_ipad_concat_text);\n        return HMAC_SHA256_FAIL_STRING;\n    }\n\n    blocksize = 64;\n    char * Key0_opad = (char *)calloc(blocksize, sizeof(char));\n    if (Key0_opad == NULL) {\n        free(Key0);\n        free(Key0_ipad);\n        free(Key0_ipad_concat_text);\n        free(Key0_ipad_concat_text_digest);\n        return HMAC_SHA256_FAIL_STRING;\n    }\n\n    blocksize = 64 + 32;\n    char * Key0_opad_concat_prev = (char *)calloc(blocksize + 32, sizeof(char));\n    if (Key0_opad_concat_prev == NULL) {\n        free(Key0);\n        free(Key0_ipad);\n        free(Key0_ipad_concat_text);\n        free(Key0_ipad_concat_text_digest);\n        free(Key0_opad);\n        return HMAC_SHA256_FAIL_STRING;\n    }\n\n    blocksize = 64;\n    char * HMAC_SHA256 = (char *)malloc(blocksize/2 * sizeof(char));\n    if (HMAC_SHA256 == NULL) {\n        free(Key0);\n        free(Key0_ipad);\n        free(Key0_ipad_concat_text);\n        free(Key0_ipad_concat_text_digest);\n        free(Key0_opad);\n        free(Key0_opad_concat_prev);\n        return HMAC_SHA256_FAIL_STRING;\n    }\n\n    if (strlen(key) &lt; blocksize) {\n        char * tmp = key;\n        char * tmp2 = Key0;\n        for (int i = 0; i &lt; blocksize; i++) {\n            if (i &lt; strlen(key)) *tmp2++ = *tmp++;\n            else *tmp2++ = 0x00;\n        }\n    }\n    else if (strlen(key) &gt; blocksize) {\n        sha256((unsigned char *)key, strlen(key), (unsigned char *)Key0);\n        for (unsigned char i = strlen(key); i &lt; blocksize; i++) {\n            Key0[i] = 0x00;\n        }\n    }\n\n    for (int i = 0; i &lt; blocksize; i++) {\n        Key0_ipad[i] = Key0[i] ^ 0x36;\n    }\n    for (int i = 0; i &lt; blocksize; i++) {\n        Key0_ipad_concat_text[i] = Key0_ipad[i];\n    }\n    for (int i = blocksize; i &lt; blocksize + strlen(msg); i++) {\n        Key0_ipad_concat_text[i] = msg[i - blocksize];\n    }\n\n    sha256((unsigned char *)Key0_ipad_concat_text, blocksize + (unsigned int)strlen(msg), (unsigned char *)Key0_ipad_concat_text_digest);\n\n    for (int i = 0; i &lt; blocksize; i++) {\n        Key0_opad[i] = Key0[i] ^ 0x5C;\n    }\n\n    for (int i = 0; i &lt; blocksize; i++) {\n        Key0_opad_concat_prev[i] = Key0_opad[i];\n    }\n    for (int i = blocksize; i &lt; blocksize + 32; i++) {\n        Key0_opad_concat_prev[i] = Key0_ipad_concat_text_digest[i - blocksize];\n    }\n\n    sha256((unsigned char *)Key0_opad_concat_prev, blocksize + 32, (unsigned char *)HMAC_SHA256);\n\n    free(Key0);\n    free(Key0_ipad);\n    free(Key0_ipad_concat_text);\n    free(Key0_ipad_concat_text_digest);\n    free(Key0_opad);\n    free(Key0_opad_concat_prev);\n    return HMAC_SHA256;\n}\n\nchar * Base64_Stringify(char * hash, size_t length)\n{\n    size_t no_op = 0;\n    size_t Base64_size;\n    char * Base64;\n    unsigned long tmp = length;\n    if (tmp % 3 == 0) {\n        Base64_size = 4 * tmp / 3;\n        Base64 = (char *)calloc(Base64_size + 1, sizeof(char));\n    }\n    else if (tmp % 3 == 1) {\n        tmp += 2;\n        Base64_size = 4 * tmp / 3;\n        Base64 = (char *)calloc(Base64_size + 1, sizeof(char));\n        Base64[Base64_size - 1] = '=';\n        Base64[Base64_size - 2] = '=';\n        no_op = 2;\n    }\n    else if (tmp % 3 == 2) {\n        tmp += 1;\n        Base64_size = 4 * tmp / 3;\n        Base64 = (char *)calloc(Base64_size + 1, sizeof(char));\n        Base64[Base64_size - 1] = '=';\n        no_op = 1;\n    }\n\n    unsigned int b64_case = 0;\n    size_t j = 0;\n    for (int i = 0; i &lt; Base64_size - no_op; i++) {\n        switch (b64_case) {\n            case 0:\n            {\n                Base64[i] = Base64_Table[(hash[j] &amp; 0xFC) &gt;&gt; 2];\n                j++;\n                b64_case = 1;\n            }\n                break;\n            case 1:\n            {\n                Base64[i] = Base64_Table[((hash[j-1] &amp; 0x03) &lt;&lt; 4) | ((hash[j] &amp; 0xF0) &gt;&gt; 4)];\n                b64_case = 2;\n            }\n                break;\n            case 2:\n            {\n                Base64[i] = Base64_Table[((hash[j] &amp; 0x0F) &lt;&lt; 2) | ((hash[j+1] &amp; 0xC0) &gt;&gt; 6)];\n                j++;\n                b64_case = 3;\n            }\n                break;\n            case 3:\n            {\n                Base64[i] = Base64_Table[(hash[j] &amp; 0x3F)];\n                j++;\n                b64_case = 0;\n            }\n                break;\n\n            default:\n                break;\n        }\n    }\n\n    return Base64;\n}\n\n\nint main()\n{\n    char * HMAC_SHA256_result;\n    char * Base64_Stringify_result;\n\n    HMAC_SHA256_result = HMAC_SHA256(\"test\", \"secret\");\n    Base64_Stringify_result = Base64_Stringify(HMAC_SHA256_result, 32);\n\n    unsigned char arr[32] = { 0 };\n    memcpy(arr, HMAC_SHA256_result, 32);\n\n    for(int i = 0; i &lt; 32; i++) {\n        printf(\"%#02x, \", arr[i]);\n    }\n    printf(\"\\n\\n\");\n\n    for(int i = 0; i &lt; strlen(Base64_Stringify_result); i++) {\n        printf(\"%c\", Base64_Stringify_result[i]);\n    }\n    printf(\"\\n\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>I'm leaving the old main.c for reference. You can also modify the updated main.c functions, e.g. the error codes when calloc fails...</p>\n"}, {"comments": [{"owner": {"reputation": 380, "user_id": 6302540, "user_type": "registered", "profile_image": "https://graph.facebook.com/1290103207684328/picture?type=large", "display_name": "Luis Paulo", "link": "https://stackoverflow.com/users/6302540/luis-paulo"}, "edited": false, "score": 0, "creation_date": 1523973958, "post_id": 49880273, "comment_id": 86776208, "body": "I hope this is the accepted answer :) I&#39;ve answered your question exactly as you asked. A standalone function to calculate HMAC"}, {"owner": {"reputation": 380, "user_id": 6302540, "user_type": "registered", "profile_image": "https://graph.facebook.com/1290103207684328/picture?type=large", "display_name": "Luis Paulo", "link": "https://stackoverflow.com/users/6302540/luis-paulo"}, "edited": false, "score": 0, "creation_date": 1523973999, "post_id": 49880273, "comment_id": 86776249, "body": "Also, the execution shows that this returns the same values as your JSFiddle example"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1524148714, "post_id": 49880273, "comment_id": 86863428, "body": "This isn&#39;t what people normally understand by &quot;standalone function&quot;."}, {"owner": {"reputation": 1077, "user_id": 2174271, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/f04f3022784248de423fe3e0373d8c5a?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Gehlaut", "link": "https://stackoverflow.com/users/2174271/tarun-gehlaut"}, "edited": false, "score": 1, "creation_date": 1524287275, "post_id": 49880273, "comment_id": 86921652, "body": "This wont work in the context of web-assembly, as libgcrypt is not available there. Everything needs to be in source form."}, {"owner": {"reputation": 380, "user_id": 6302540, "user_type": "registered", "profile_image": "https://graph.facebook.com/1290103207684328/picture?type=large", "display_name": "Luis Paulo", "link": "https://stackoverflow.com/users/6302540/luis-paulo"}, "edited": false, "score": 0, "creation_date": 1524296852, "post_id": 49880273, "comment_id": 86923616, "body": "You can download the source. That&#39;s what I did"}], "tags": [], "owner": {"reputation": 380, "user_id": 6302540, "user_type": "registered", "profile_image": "https://graph.facebook.com/1290103207684328/picture?type=large", "display_name": "Luis Paulo", "link": "https://stackoverflow.com/users/6302540/luis-paulo"}, "is_accepted": false, "score": 3, "last_activity_date": 1523973896, "creation_date": 1523973896, "answer_id": 49880273, "question_id": 49776226, "link": "https://stackoverflow.com/questions/49776226/hmacsha256-in-webassembly-compiled-with-emscripten/49880273#49880273", "title": "HmacSHA256 in WebAssembly compiled with Emscripten", "body": "<p>I've created a simple example of how you can create the hmac with the <code>libgcrypt</code> library. You just need to install it in your system and them compile the program with the <code>-lgcrypt</code> flag to link the library.</p>\n\n<p>As you've asked a standalone function, I created a function which you can call with the key and message that returns a string with the base64 encoded result, which is exactly what you asked for in your JSFiddle.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;gcrypt.h&gt;\n#include &lt;stdint.h&gt;\n\n\nstatic char encoding_table[] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\n                                'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',\n                                'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\n                                'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\n                                'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\n                                'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\n                                'w', 'x', 'y', 'z', '0', '1', '2', '3',\n                                '4', '5', '6', '7', '8', '9', '+', '/'};\nstatic char *decoding_table = NULL;\nstatic int mod_table[] = {0, 2, 1};\n\n\nchar *base64_encode(const unsigned char *data,\n                    size_t input_length,\n                    size_t *output_length) {\n\n    *output_length = 4 * ((input_length + 2) / 3);\n\n    char *encoded_data = calloc(1,*output_length+1);\n    if (encoded_data == NULL) return NULL;\n\n    for (int i = 0, j = 0; i &lt; input_length;) {\n\n        uint32_t octet_a = i &lt; input_length ? (unsigned char)data[i++] : 0;\n        uint32_t octet_b = i &lt; input_length ? (unsigned char)data[i++] : 0;\n        uint32_t octet_c = i &lt; input_length ? (unsigned char)data[i++] : 0;\n\n        uint32_t triple = (octet_a &lt;&lt; 0x10) + (octet_b &lt;&lt; 0x08) + octet_c;\n\n        encoded_data[j++] = encoding_table[(triple &gt;&gt; 3 * 6) &amp; 0x3F];\n        encoded_data[j++] = encoding_table[(triple &gt;&gt; 2 * 6) &amp; 0x3F];\n        encoded_data[j++] = encoding_table[(triple &gt;&gt; 1 * 6) &amp; 0x3F];\n        encoded_data[j++] = encoding_table[(triple &gt;&gt; 0 * 6) &amp; 0x3F];\n    }\n\n    for (int i = 0; i &lt; mod_table[input_length % 3]; i++)\n        encoded_data[*output_length - 1 - i] = '=';\n\n    return encoded_data;\n}\n\n//don't forget to free the return pointer!\nchar* hmacSHA256(gcry_mac_hd_t hd, const char* key, size_t key_size, const char* msg, size_t msg_size) {\n    unsigned char output[32];\n    size_t outputSize = 32;\n    gcry_mac_reset(hd);\n    gcry_mac_setkey(hd,key,strlen(key));\n    gcry_mac_write(hd,msg,strlen(msg));\n    gcry_mac_read(hd,output,&amp;outputSize);\n    return base64_encode(output,outputSize,&amp;outputSize);\n}\n\nint main() {\n    const char* const key = \"secret\";\n    const char* const msg = \"test\";\n    //hmacsha256 returns 256 bits, meaning 32 bytes\n    unsigned char output[32];\n    size_t outputSize = 32;\n    gcry_mac_hd_t hd;\n    gcry_mac_open(&amp;hd,GCRY_MAC_HMAC_SHA256,0,NULL);\n\n    char* tmp = hmacSHA256(hd,key,strlen(key),msg,strlen(msg));\n    printf(\"HMAC-SHA256: '%s'\\n\",tmp);\n    free(tmp);\n\n    tmp = hmacSHA256(hd,\"secrett\",7,msg,strlen(msg));\n    printf(\"HMAC-SHA256: '%s'\\n\",tmp);\n    free(tmp);\n\n    gcry_mac_close(hd);\n    return 0;\n}\n</code></pre>\n\n<p><strong>Important remarks:</strong></p>\n\n<p>-Don't forget to free the return value of the <code>hmacSHA256</code> function and to call <code>gcry_mac_close</code> when you are done hashing.</p>\n\n<p>-I've included the size of the key and size of the message in the function's arguments because this way you can do the HMAC of binary data as well as ASCII/UTF-8 encoded strings. If you're not going to use binary data, feel free to remove the sizes from the arguments and calculating the size inside of the function with <code>strlen</code> like I did in the main when I called the function.</p>\n\n<p>-I didn't wrap the creation of the <code>gcry_mac_hd_t</code> in the function because it's more efficient to reuse the same handler and just reset it every time you need to reuse it then to create a new one every time you need it. This optimization is even more noticeable if you call this function many times in the same execution!</p>\n"}], "owner": {"reputation": 1819, "user_id": 1116068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/833e391c99c8405d4ee64f9528584fc4?s=128&d=identicon&r=PG", "display_name": "Roni Gadot", "link": "https://stackoverflow.com/users/1116068/roni-gadot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 4, "accepted_answer_id": 49862020, "answer_count": 3, "score": 15, "last_activity_date": 1524447778, "creation_date": 1523452786, "last_edit_date": 1523609496, "question_id": 49776226, "link": "https://stackoverflow.com/questions/49776226/hmacsha256-in-webassembly-compiled-with-emscripten", "title": "HmacSHA256 in WebAssembly compiled with Emscripten", "body": "<p>I'm trying to implement JWT token (encoding only) in WebAssembly, the goal is to have a <strong>very light weight</strong> wasm module. As a web developer my C knowledge is limited. For now I've implemented the following function (ported from JS) to encode url-safe Base64 encoder, which works perfectly.</p>\n\n<pre><code>char _keyStr[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\";\nchar ret_val[200];\n\nchar* encode (char *data){\n    int len = strlen(data);\n    int i = 0;\n    int j = 0;\n\n    while(i&lt;len){\n        char chr1 = data[i++];\n        int chr2Out = (i &gt; len - 1)? 1:0;\n        char chr2 = data[i++];\n        int chr3Out = (i &gt; len - 1)? 1:0;;\n        char chr3 = data[i++];\n\n\n        char enc1 = chr1 &gt;&gt; 2;\n        char enc2 = ((chr1 &amp; 3) &lt;&lt; 4) | (chr2 &gt;&gt; 4);\n        char enc3 = ((chr2 &amp; 15) &lt;&lt; 2) | (chr3 &gt;&gt; 6);\n        char enc4 = chr3 &amp; 63;\n\n        if (chr2Out) {\n            enc3 = enc4 = 64;\n        } else if (chr3Out) {\n            enc4 = 64;\n        }\n\n        ret_val[j++] = _keyStr[enc1];\n        ret_val[j++] = _keyStr[enc2];\n        ret_val[j++] = _keyStr[enc3];\n        ret_val[j++] = _keyStr[enc4];\n\n    }\n    ret_val[j] = '\\0';\n    return ret_val;\n}\n</code></pre>\n\n<p>My next challenge is to be able to sign my JWT payload with HmacSHA256.\nThe following JS fiddle, describes what I want to accomplish with C.\n<a href=\"https://jsfiddle.net/gm7boy2p/813/\" rel=\"noreferrer\">https://jsfiddle.net/gm7boy2p/813/</a></p>\n\n<p>I'm struggling with integrating a 3rd party code and complie it with emcc.\nI'm looking for a light weight library or a snippet.</p>\n\n<p>Example code or any help would be appreciated.</p>\n\n<hr>\n\n<p><strong>Update:</strong> After extra research, reading <a href=\"https://stackoverflow.com/questions/45974738/how-to-link-openssl-with-emscripten?answertab=active#tab-top\">this</a> stackoverflow question and <a href=\"https://developers.google.com/web/updates/2018/03/emscripting-a-c-library\" rel=\"noreferrer\">this</a> article, it looks like using openssl or any other external library with WebAssembly is far from trivial. So what I'm looking for now is a standalone C function that I could integrate to my existing code.</p>\n"}, {"tags": ["c", "embedded", "esp8266"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1523450464, "post_id": 49775436, "comment_id": 86565648, "body": "You can only call <code>realloc</code> with a pointer that has been obtained by <code>malloc</code>, <code>calloc</code> or another <code>realloc</code>. Calling <code>realloc</code> with any other pointer is UB."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1523450513, "post_id": 49775436, "comment_id": 86565691, "body": "More to the point, you call <code>realloc()</code> on something you couldn&#39;t legally <code>free()</code> either, you die. Or, your program dies. <b>If</b> you&#39;re lucky. ;-)"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1523450756, "post_id": 49775436, "comment_id": 86565882, "body": "The way you described it, you want to <code>memmove()</code> the contents of <code>buff[x]..buff[strlen(buff)</code> down to <code>buff[0]</code> before downsizing <code>buff</code>. But... would that really be an improvement over just keeping <code>buff</code> until you&#39;re done?"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1523451075, "post_id": 49775436, "comment_id": 86566142, "body": "divide up the buffer into smaller logical pieces, handle (and free) one piece at a time. It&#39;s rarely a good idea to work with massive buffers."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1523451766, "post_id": 49775436, "comment_id": 86566668, "body": "By starting with <code>char* buff = &quot;\\0&quot;;</code> you are trying to reallocate the address of a string literal. I suggest <code>char *buff = calloc(2,1);</code> (2 because your string contains 2 zeros)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1523452663, "post_id": 49775436, "comment_id": 86567388, "body": "You are essentially asking how to use the realloc function. How about studying what this function does before using it? <a href=\"https://linux.die.net/man/3/realloc\" rel=\"nofollow noreferrer\">RTFM here</a>."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1523455757, "post_id": 49775436, "comment_id": 86569733, "body": "@MichaelWalz One exception: You can call <code>realloc</code> with a pointer of NULL in most implementations, and it will behave like <code>malloc</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1523455867, "post_id": 49775436, "comment_id": 86569822, "body": "@tofro correct, but it&#39;s not on &quot;most implementations&quot; but on &quot;standard conformant implementations&quot;."}, {"owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "edited": false, "score": 0, "creation_date": 1523462181, "post_id": 49775436, "comment_id": 86574548, "body": "Yes indeed I made a mistake in the example code, but that&#39;s not the case(in my real programme buff=NULL and in the initialization I use if/else and malloc/realloc, that shouldn&#39;t matter though)  Also I know how to use realloc and no one got the point that I need realloc alternative, not qualification of my programming skills(which are quite bad, but OK for 1st year in college)...  Also I didn&#39;t consider memmove which will surely work but is quite the waste of CPU resources."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1523462315, "post_id": 49775436, "comment_id": 86574654, "body": "@HristoMitrev if <code>memmove</code> is not an option maybe just leave the buffer grow as suggested in an earlier comment or find another more complex implementation."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523462640, "post_id": 49775653, "comment_id": 86574876, "body": "Much better +1.  Minor idea: I tend to prefer &quot;length&quot; to refer to the string <i>length</i> and not <i>size</i> and would code <code>size_t new_size = strlen(buff + x) + 1;</code>"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1523462502, "last_edit_date": 1523462502, "creation_date": 1523451049, "answer_id": 49775653, "question_id": 49775436, "link": "https://stackoverflow.com/questions/49775436/free-first-part-of-dynamic-memory-in-c/49775653#49775653", "title": "Free first part of dynamic memory in C", "body": "<p>Instead of just doing:</p>\n\n<pre><code>buff = realloc(buff, strlen(buff)-x);\n</code></pre>\n\n<p>which basically just truncates the buffer, you need to move the bytes you want to keep at the beginning of the <code>buff</code> pointer and then call <code>realloc</code>:</p>\n\n<pre><code>int newlength = strlen(buff + x) + 1; // + 1 for the NUL terminator\nmemmove(buff, buff+x, newlength);  \nbuff = realloc(buff, newlength);\n</code></pre>\n\n<p>If the buffer is long this may be inefficient. If performance is an issue here, things are getting a bit more complicated.</p>\n"}], "owner": {"reputation": 17, "user_id": 9145712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22cbcb6c06ee6f6a42b8b10263e77cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Mitrev", "link": "https://stackoverflow.com/users/9145712/hristo-mitrev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1523463880, "creation_date": 1523450404, "last_edit_date": 1523463880, "question_id": 49775436, "link": "https://stackoverflow.com/questions/49775436/free-first-part-of-dynamic-memory-in-c", "title": "Free first part of dynamic memory in C", "body": "<p>I'm programming an esp8266 to post data to server. Part of the program buffers the data in case of WiFi absence. However that buffer may become quite large and I need a way to process it in parts when the connection is restored.</p>\n\n<pre><code>char* buff = \"\\0\";\n\\\\ I know that realloc() may return NULL and I will fix it later\nbuff = realloc(buff, strlen(buff)+strlen(data)+1);\nstrcat(buff, data);\n</code></pre>\n\n<p>When I start processing the buffer I need to do it arbitrary amount of bytes at a time. When I'm done I need to free them only. something like:</p>\n\n<pre><code>buff = realloc(buff, strlen(buff)-x);\n</code></pre>\n\n<p>The problem is that I need to free buff[0] to buff[x-1] not buff[x] to buff[strlen(buff)]</p>\n\n<p>Any suggestions of how I do that cleanly without strdup() or other complications?</p>\n\n<p>Also I don't want to store the address of the buffer and free it after the processing is done</p>\n\n<p>Edit: char* buff = calloc(2, 1); indeed but that's not correlated to the main question (which remains unsolved) in any way.</p>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1523449449, "post_id": 49775051, "comment_id": 86564897, "body": "<code>unsigned int foo = signedIntegerThatIsTooBig;</code>"}, {"owner": {"reputation": 59, "user_id": 8507134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1c6e2ce0711b5defdbb866d1241e7c?s=128&d=identicon&r=PG&f=1", "display_name": "duckkkk", "link": "https://stackoverflow.com/users/8507134/duckkkk"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1523449879, "post_id": 49775051, "comment_id": 86565205, "body": "Does destination type mean the type used in the assignment statement? Or is it the conversion specifier in functions, say: printf()?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1523449963, "post_id": 49775051, "comment_id": 86565265, "body": "<i>destination</i> means the ending location - the variable being assigned to (the LHS); <i>assigned value</i> means the value being assigned to the destination variable (the RHS)."}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523450483, "post_id": 49775051, "comment_id": 86565667, "body": "this is about type convertions"}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523450567, "post_id": 49775051, "comment_id": 86565742, "body": "it means something like this int a; (unsigned char)a; -- this is legal"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523463538, "post_id": 49775051, "comment_id": 86575402, "body": "What does the <b>only authoritative</b> resource say? Where did you get this citation from? What makes you think it is correct? What does &quot;too big&quot; mean in this context? As cited, it lacks constraints."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523459089, "post_id": 49775278, "comment_id": 86572306, "body": "Answer says &quot;what happens when the assigned value is out of the range of the destination, ...  when the destination is <i>signed</i> ...&quot; but fails to cite or explain that case.  &quot;the extra bits are stripped off&quot; is not specified behavior in C for <i>signed</i> types."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1523450001, "creation_date": 1523450001, "answer_id": 49775278, "question_id": 49775051, "link": "https://stackoverflow.com/questions/49775051/type-conversion-in-c-demotion/49775278#49775278", "title": "Type conversion in C (demotion)", "body": "<p>\"Destination\" is referring to the variable being assigned to, i.e. the left side of an assignment, while \"assigned value\" means the value that is being assigned to the variable, i.e. the right side.</p>\n\n<p>For example:</p>\n\n<pre><code>unsigned int destination = assigned_value;\n</code></pre>\n\n<p>As far as what happens when the assigned value is out of the range of the destination, section 6.3.1.3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> regarding conversion of signed and unsigned integers states the following:</p>\n\n<blockquote>\n  <p><em>1</em> When a value with integer type is converted to another integer type other than _Bool, if the value can be represented by the new\n  type, it is unchanged.</p>\n  \n  <p><em>2</em> Otherwise, <strong>if the new type is unsigned, the value is converted by repeatedly adding or subtracting one more than the maximum value\n  that can be represented in the new type until the value is in the\n  range of the new type.</strong></p>\n</blockquote>\n\n<p>This effectively means that the value is converted modulo the maximum value the destination can hold plus 1.  In other words, the extra bits are stripped off.</p>\n"}, {"tags": [], "owner": {"reputation": 355, "user_id": 9515951, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-m53-xNkMviQ/AAAAAAAAAAI/AAAAAAAAAW0/rfDtMQwohLs/photo.jpg?sz=128", "display_name": "Umaiki", "link": "https://stackoverflow.com/users/9515951/umaiki"}, "is_accepted": false, "score": 0, "last_activity_date": 1523450062, "creation_date": 1523450062, "answer_id": 49775304, "question_id": 49775051, "link": "https://stackoverflow.com/questions/49775051/type-conversion-in-c-demotion/49775304#49775304", "title": "Type conversion in C (demotion)", "body": "<p>An exemple :  </p>\n\n<pre><code>int          assign = -2;\nunsigned int dest   = 2;\n\ndest = assign ;\n</code></pre>\n\n<p>In the instruction <code>dest = assign</code>, <code>dest</code> is the destination of type <code>unsigned int</code> and <code>assign</code> the assigned value of type <code>int</code>.</p>\n\n<p>Be careful doing this because <code>dest = 4294967294 = 0xFFFFFFFE</code> on a 32 bits architecture at the end of the program.</p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1523452201, "creation_date": 1523452201, "answer_id": 49776027, "question_id": 49775051, "link": "https://stackoverflow.com/questions/49775051/type-conversion-in-c-demotion/49776027#49776027", "title": "Type conversion in C (demotion)", "body": "<p>I think the sentence shall be read like this:</p>\n\n<pre><code> unsigned int destination = 258;\n \\----------/               \\-/\ndestination type          assigned value\n</code></pre>\n\n<p>In binary 258 is</p>\n\n<pre><code>1.0000.0010 (requires 9 bits)\n</code></pre>\n\n<p>but a unsigned char can (typically) only hold 8 bits so only the 8 right most bits are used and the remaining \"extra\" bits are ignored. Therefore the binary pattern for the unsigned char becomes:</p>\n\n<pre><code>0000.0010\n</code></pre>\n\n<p>which is the decimal value 2.</p>\n"}], "owner": {"reputation": 59, "user_id": 8507134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1c6e2ce0711b5defdbb866d1241e7c?s=128&d=identicon&r=PG&f=1", "display_name": "duckkkk", "link": "https://stackoverflow.com/users/8507134/duckkkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "closed_date": 1523468565, "accepted_answer_id": 49775278, "answer_count": 3, "score": -5, "last_activity_date": 1523452201, "creation_date": 1523449376, "question_id": 49775051, "link": "https://stackoverflow.com/questions/49775051/type-conversion-in-c-demotion", "closed_reason": "Needs details or clarity", "title": "Type conversion in C (demotion)", "body": "<p>Can someone please explain this: \"When the destination is some form of unsigned integer and the assigned value is an integer, the extra bits that make the value too big are ignored.\" I'm not getting what \"destination type\" and assigned value mean.</p>\n"}, {"tags": ["c", "matlab", "solver", "equation-solving"], "comments": [{"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1523451574, "post_id": 49775018, "comment_id": 86566530, "body": "what is <code>l1eq_pd</code>?"}, {"owner": {"reputation": 9, "user_id": 9630445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ec175cfd60d767e9cf02a324a3c73a?s=128&d=identicon&r=PG&f=1", "display_name": "Neda", "link": "https://stackoverflow.com/users/9630445/neda"}, "reply_to_user": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1523452257, "post_id": 49775018, "comment_id": 86567067, "body": "This is the L1-magic (L-norm)"}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1523452334, "post_id": 49775018, "comment_id": 86567133, "body": "this <a href=\"https://statweb.stanford.edu/~candes/l1magic/\" rel=\"nofollow noreferrer\">statweb.stanford.edu/~candes/l1magic</a> ?"}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1523452481, "post_id": 49775018, "comment_id": 86567248, "body": "The error comes from what <code>R</code> is, but you dont show it"}, {"owner": {"reputation": 9, "user_id": 9630445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ec175cfd60d767e9cf02a324a3c73a?s=128&d=identicon&r=PG&f=1", "display_name": "Neda", "link": "https://stackoverflow.com/users/9630445/neda"}, "reply_to_user": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1523453641, "post_id": 49775018, "comment_id": 86568126, "body": "I made mistake to type in the last line in the program, the R is not correct and I have edited my code. the code is as below. for p=1:Nf  X_hat(:,p) = l1eq_pd(x0(:,p), theta, [], y(:,p), 1e-5); end"}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1523531703, "post_id": 49775018, "comment_id": 86604397, "body": "Ultimatelly, <code>theta*theta&#39;</code> needs to be positive semi definite, and in your case it appears its not."}, {"owner": {"reputation": 9, "user_id": 9630445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ec175cfd60d767e9cf02a324a3c73a?s=128&d=identicon&r=PG&f=1", "display_name": "Neda", "link": "https://stackoverflow.com/users/9630445/neda"}, "reply_to_user": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1523622933, "post_id": 49775018, "comment_id": 86648697, "body": "thanks so much for the answer, I will check it."}], "owner": {"reputation": 9, "user_id": 9630445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ec175cfd60d767e9cf02a324a3c73a?s=128&d=identicon&r=PG&f=1", "display_name": "Neda", "link": "https://stackoverflow.com/users/9630445/neda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523453360, "creation_date": 1523449295, "last_edit_date": 1523453360, "question_id": 49775018, "link": "https://stackoverflow.com/questions/49775018/error-using-linsolve-matrix-must-be-positive-definite", "title": "Error using linsolve: Matrix must be positive definite", "body": "<p>I am trying to use compressed sensing for a 2D matrix. I am trying to run the following piece of code -</p>\n\n<pre><code>Nf=800;\n\nN=401;\n\nE=E(Nf,N);   %matrix of signal(this only for sampling) real matrix E is 2D matrix with size of Nf and N\n\n% compressive sensing\nM=ceil(0.3*N);\npsi=fft(eye(N)); \nphi=randi(M,N);\nEE = permute(E,[2 1]);\ntheta=phi*psi;\nfor k=1:Nf\ny(:,k)=phi*EE(:,k);\n end\n\nx0 = theta.'*y;\nfor p=1:Nf\nX_hat(:,p) = l1eq_pd(x0(:,p), theta, [], y(:,p), 1e-5); %l1eq_pd=l1-magic\nend\nX1_hat=psi*X_hat;\nXX_hat=permute(X1_hat,[2 1]);\n</code></pre>\n\n<p>but while running the code I get the following error.</p>\n\n<pre><code>Error using linsolve\nMatrix must be positive definite.\nError in l1eq_pd (line 77)\n[w, hcond] = linsolve(A*A', b, opts);\n\nError in simulation_mono_SAR (line 91)\n\nX_hat(:,p) = l1eq_pd(x0(:,p), theta, [], y(:,p), 1e-5);\n</code></pre>\n\n<p>Could someone point me, what is the problem? Is it a problem inherent to l1-magic? shall I use another solver?</p>\n"}, {"tags": ["c", "bit-manipulation", "operators", "bitwise-operators"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1523448614, "post_id": 49774640, "comment_id": 86564290, "body": "<code>(n &amp; 1 == 0)</code> -&gt; <code>((n &amp; 1) == 0)</code>"}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523448630, "post_id": 49774640, "comment_id": 86564303, "body": "Why you compare n&amp;1 to 0 ?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523448684, "post_id": 49774640, "comment_id": 86564340, "body": "@purec because if <code>n &amp; 1</code> is zero, <code>n</code> is even."}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523448740, "post_id": 49774640, "comment_id": 86564383, "body": "i see now......"}], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 4, "last_activity_date": 1523448580, "creation_date": 1523448580, "answer_id": 49774776, "question_id": 49774640, "link": "https://stackoverflow.com/questions/49774640/even-odd-program-using-bitwise/49774776#49774776", "title": "Even-odd program using bitwise", "body": "<p>Enable all warnings in your compiler.  Mine says:</p>\n\n<pre><code>warning: &amp; has lower precedence than ==; == will be evaluated first [-Wparentheses]\nnote: place parentheses around the &amp; expression to evaluate it first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 7651136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h3uSXSZZhaU/AAAAAAAAAAI/AAAAAAAAADA/E8petHIpoCY/photo.jpg?sz=128", "display_name": "Ganesh Thampi", "link": "https://stackoverflow.com/users/7651136/ganesh-thampi"}, "edited": false, "score": 0, "creation_date": 1523450343, "post_id": 49774923, "comment_id": 86565558, "body": "Thank you for the detailed answer I understand the logical error here. Can you also explain why u used  <code>scanf( &quot;%d&quot;, &amp;n ) != 1</code>  in your code as break condition?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 81, "user_id": 7651136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h3uSXSZZhaU/AAAAAAAAAAI/AAAAAAAAADA/E8petHIpoCY/photo.jpg?sz=128", "display_name": "Ganesh Thampi", "link": "https://stackoverflow.com/users/7651136/ganesh-thampi"}, "edited": false, "score": 0, "creation_date": 1523450547, "post_id": 49774923, "comment_id": 86565720, "body": "@GaneshThampi The function scanf returns an integer that can be used to check whether scahf was successful. For example the user can interrupt the input pressing ctrl+Z in Windows."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1523451587, "last_edit_date": 1523451587, "creation_date": 1523449083, "answer_id": 49774923, "question_id": 49774640, "link": "https://stackoverflow.com/questions/49774640/even-odd-program-using-bitwise/49774923#49774923", "title": "Even-odd program using bitwise", "body": "<p>The equality operators == and != have a higher priority than the bitwise AND operator.</p>\n\n<p>So the condition in the if statements is equivalent to the following</p>\n\n<pre><code>if (n &amp; ( 1 == 0 ) )\n</code></pre>\n\n<p>as 1 is not equal to 0 then the condition can be further rewritten like</p>\n\n<pre><code>if (n &amp; 0)\n</code></pre>\n\n<p>Thus the substatement of the if statement is never executed because <code>n &amp; 0</code> always evaluates to <code>false ( 0 )</code>.</p>\n\n<p>To escape the logical mistake you could exchange the if and else statements.</p>\n\n<pre><code>   if (n &amp; 1 )\n      printf(\"odd\\n\");\n   else\n      printf(\"even\\n\");\n</code></pre>\n\n<p>Take into account that according to the C Standard the function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    while ( 1 )\n    {\n        int n;\n\n        printf( \"Input an integer (0 - exit): \" );\n\n        if ( scanf( \"%d\", &amp;n ) != 1 || n == 0 ) break;\n\n        printf( \"%d is %s\\n\\n\", n, n &amp; 1 ? \"odd\" : \"even\" );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>Input an integer (0 - exit): 10\n10 is even\n\nInput an integer (0 - exit): 9\n9 is odd\n\nInput an integer (0 - exit): 8\n8 is even\n\nInput an integer (0 - exit): 7\n7 is odd\n\nInput an integer (0 - exit): 6\n6 is even\n\nInput an integer (0 - exit): 5\n5 is odd\n\nInput an integer (0 - exit): 4\n4 is even\n\nInput an integer (0 - exit): 3\n3 is odd\n\nInput an integer (0 - exit): 2\n2 is even\n\nInput an integer (0 - exit): 1\n1 is odd\n\nInput an integer (0 - exit): 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1523449435, "creation_date": 1523449435, "answer_id": 49775070, "question_id": 49774640, "link": "https://stackoverflow.com/questions/49774640/even-odd-program-using-bitwise/49775070#49775070", "title": "Even-odd program using bitwise", "body": "<p><code>&amp;</code> has a surprisingly low precedence so you need <code>(n &amp; 1) == 0</code>. Better still, use</p>\n\n<pre><code>if (n &amp; 1)\n      printf(\"odd\\n\");\nelse\n      printf(\"even\\n\");\n</code></pre>\n\n<p>Note that this is implementation defined for negative <code>int</code> values due to differing complementing schemes, so you may well not get a correct answer for a negative <code>n</code>. Perhaps use <code>unsigned</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1523449693, "creation_date": 1523449693, "answer_id": 49775169, "question_id": 49774640, "link": "https://stackoverflow.com/questions/49774640/even-odd-program-using-bitwise/49775169#49775169", "title": "Even-odd program using bitwise", "body": "<p>you do not have to compare to zero. Any non zero value is the true, zero is false.</p>\n\n<p>So it is enough to: </p>\n\n<pre><code>   if (n &amp; 1 )\n      printf(\"odd\\n\");\n   else\n      printf(\"even\\n\");\n</code></pre>\n\n<p>or </p>\n\n<pre><code>printf(\"%s\\n\", (n&amp;1) ? \"odd\" : \"even\");\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 7651136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h3uSXSZZhaU/AAAAAAAAAAI/AAAAAAAAADA/E8petHIpoCY/photo.jpg?sz=128", "display_name": "Ganesh Thampi", "link": "https://stackoverflow.com/users/7651136/ganesh-thampi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 1, "accepted_answer_id": 49774923, "answer_count": 4, "score": 2, "last_activity_date": 1523451587, "creation_date": 1523448181, "last_edit_date": 1523450060, "question_id": 49774640, "link": "https://stackoverflow.com/questions/49774640/even-odd-program-using-bitwise", "title": "Even-odd program using bitwise", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   int n;\n\n   printf(\"Input an integer\\n\");\n   scanf(\"%d\", &amp;n);\n\n   if (n &amp; 1 == 0)\n      printf(\"even\\n\");\n   else\n      printf(\"odd\\n\");\n\n   return 0;\n}\n</code></pre>\n\n<p>This program doesn't enter the If loop and always prints 'odd'. I understand that if(False) or if(0) is breaking condition but \"n&amp;1==0\" is a TRUE condition for even numbers right? or am I missing something here?.</p>\n"}, {"tags": ["c", "curl", "libcurl"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 7842632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5406b1bc2a45f1647c1316b4039cd2b0?s=128&d=identicon&r=PG&f=1", "display_name": "cdevman", "link": "https://stackoverflow.com/users/7842632/cdevman"}, "edited": false, "score": 0, "creation_date": 1523462554, "post_id": 49775348, "comment_id": 86574825, "body": "I&#39;m using curl version 7.52.1 and the API is working well with curl binary."}], "tags": [], "owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "is_accepted": true, "score": 0, "last_activity_date": 1523450170, "creation_date": 1523450170, "answer_id": 49775348, "question_id": 49774288, "link": "https://stackoverflow.com/questions/49774288/libcurl-malformed-encoding-found-in-chunked-encoding/49775348#49775348", "title": "libcurl: Malformed encoding found in chunked-encoding", "body": "<p>This is a problem with the received HTTP chunked encoded stream received from the server.</p>\n\n<p>If you're using a very old curl, it might happen because curl was stricter before curl 7.35.0 but since then it tries to be more laxed as long as it understands what's coming.</p>\n"}], "owner": {"reputation": 79, "user_id": 7842632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5406b1bc2a45f1647c1316b4039cd2b0?s=128&d=identicon&r=PG&f=1", "display_name": "cdevman", "link": "https://stackoverflow.com/users/7842632/cdevman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 49775348, "answer_count": 1, "score": 0, "last_activity_date": 1523450170, "creation_date": 1523447137, "last_edit_date": 1523448751, "question_id": 49774288, "link": "https://stackoverflow.com/questions/49774288/libcurl-malformed-encoding-found-in-chunked-encoding", "title": "libcurl: Malformed encoding found in chunked-encoding", "body": "<p>I'm now trying to get a response from Web REST API, but it failed with the following issue(from libcurl debugging)</p>\n\n<blockquote>\n  <p>Malformed encoding found in chunked-encoding</p>\n</blockquote>\n\n<pre><code>struct wapi_resp_data {\n        char *ptr;\n        size_t len;\n};\n\nstatic size_t\nwrite_resp_data(void *data, size_t size, size_t nmemb, void *param)\n{\n        struct wapi_resp_data *res = (struct wapi_resp_data *) param;\n\n        res-&gt;ptr = realloc(res-&gt;ptr, res-&gt;len + size * nmemb + 1);\n        if (!res-&gt;ptr) {\n                res-&gt;len = 0;\n                return -1;\n        }\n        memcpy(&amp;res-&gt;ptr[res-&gt;len], data, size * nmemb);\n\n        res-&gt;len += size * nmemb;\n        res-&gt;ptr[res-&gt;len] = '\\0';\n\n        return size * nmemb;\n}\n\nint curl_get_response(const char *url, struct curl_slist_headers *headers)\n{\n   ...\n\n   curl_easy_setopt(curl, CURLOPT_HTTPHEADER, post_headers);\n   curl_easy_setopt(curl, CURLOPT_POSTFIELDS, req_data);\n   curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, strlen(req_data));\n\n   curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_resp_data);\n\n   memset(&amp;res, 0, sizeof(res));\n   curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;res);\n   ...\n}\n</code></pre>\n\n<p>I tried to test with curl command, but it's working.</p>\n\n<p>Here is the example command:</p>\n\n<blockquote>\n  <p>curl -d '{ \"test\": \"test\"}' -H \"Content-Type: application/json\"</p>\n  \n  <p><a href=\"http://xxx/api/\" rel=\"nofollow noreferrer\">http://xxx/api/</a> -v</p>\n</blockquote>\n\n<p>Is there any problem in my code?</p>\n"}, {"tags": ["c", "arrays", "pointers", "malloc", "structure"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1523446722, "post_id": 49774138, "comment_id": 86563002, "body": "just <code>sp=malloc(sizeof(struct *productStruct)*n);</code> don&#39;t de&#39;reference you&#39;ll be OK"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1523446844, "post_id": 49774138, "comment_id": 86563074, "body": "<code>sp</code> is the pointer and <code>*sp</code> dereferenced pointer ."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1523447109, "post_id": 49774138, "comment_id": 86563273, "body": "@Jean-Fran&#231;oisFabre I think he rather wants this: <code>sp = malloc(sizeof(struct productStruct) * n)</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1523447115, "post_id": 49774138, "comment_id": 86563275, "body": "yeah, just realized that strange stuff inside. even better: <code>sp=malloc(sizeof(*sp)*n);</code> so if type changes the <code>malloc</code> remains coherent"}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1523447632, "post_id": 49774303, "comment_id": 86563638, "body": "Less error prone to do: <code>sp = malloc(sizeof *sp * n);</code>"}, {"owner": {"reputation": 772, "user_id": 9585158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gTN1X.jpg?s=128&g=1", "display_name": "vmt", "link": "https://stackoverflow.com/users/9585158/vmt"}, "edited": false, "score": 0, "creation_date": 1523451861, "post_id": 49774303, "comment_id": 86566743, "body": "To be fair, I&#39;ve always found <code>sizeof struct type_t</code> more readable, granted your way of doing it makes refactoring easier, due to the independence of the type name."}], "tags": [], "owner": {"reputation": 909, "user_id": 8041414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f488d544c535a091b7310e7d7e6a98f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jesferman", "link": "https://stackoverflow.com/users/8041414/jesferman"}, "is_accepted": true, "score": 3, "last_activity_date": 1523447170, "creation_date": 1523447170, "answer_id": 49774303, "question_id": 49774138, "link": "https://stackoverflow.com/questions/49774138/how-can-i-allocate-array-of-structure-with-malloc-in-c/49774303#49774303", "title": "How can I allocate Array of Structure with malloc() in C?", "body": "<p>You have 2 errors:</p>\n\n<p>Use <code>sp</code> not <code>*sp</code> and reserve the size of the struct, not the size of a pointer to the struct (if you really want an array of structs instead of pointers):</p>\n\n<p><code>sp=malloc(sizeof(struct productStruct)*n);</code></p>\n"}], "owner": {"reputation": 125, "user_id": 9405224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Max", "link": "https://stackoverflow.com/users/9405224/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 49774303, "answer_count": 1, "score": 2, "last_activity_date": 1523447170, "creation_date": 1523446668, "last_edit_date": 1523446966, "question_id": 49774138, "link": "https://stackoverflow.com/questions/49774138/how-can-i-allocate-array-of-structure-with-malloc-in-c", "title": "How can I allocate Array of Structure with malloc() in C?", "body": "<p>I want to allocate array of structure but I'm getting this error with GCC:</p>\n\n<blockquote>\n  <p>st.c: In function \u2018main\u2019:<br>\n  st.c:20:4: error: incompatible types when assigning to type \u2018struct employeeStruct\u2019 from type \u2018void *\u2019\n   *sp=malloc(sizeof(struct productStruct)*n);</p>\n</blockquote>\n\n<p>And this is my struct and pointer:</p>\n\n<pre><code>struct productStruct\n{\n        unsigned int ID;\n        unsigned long int serialnumber;\n        char name[40];\n};\n\nstruct productStruct *sp;\n</code></pre>\n\n<p>And after getting n variable from user at main function:(Im getting error for this line)</p>\n\n<pre><code>*sp=malloc(sizeof(struct *productStruct)*n);\n</code></pre>\n\n<p>I don't know maybe this is type casting error but I could not fix it.\nThanks for your attention</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 4, "creation_date": 1523446580, "post_id": 49774041, "comment_id": 86562910, "body": "<code>char buf[6]; read(file[0],buf,6);</code> -- there is no room in the buffer for the terminating <code>NUL</code> character. <a href=\"https://en.wikipedia.org/wiki/C_string_handling\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C_string_handling</a>"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1523446806, "post_id": 49774041, "comment_id": 86563047, "body": "<i>And</i> you don&#39;t null terminate either. <code>read(2)</code> doesn&#39;t null-terminate."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1523446817, "post_id": 49774041, "comment_id": 86563057, "body": "Also read this question: <a href=\"https://stackoverflow.com/questions/4418708/whats-the-rationale-for-null-terminated-strings\" title=\"whats the rationale for null terminated strings\">stackoverflow.com/questions/4418708/&hellip;</a>"}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523447196, "post_id": 49774041, "comment_id": 86563329, "body": "file[2] supposed to be uninitialized? this is cool"}], "owner": {"reputation": 3, "user_id": 9630177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "jeff rius", "link": "https://stackoverflow.com/users/9630177/jeff-rius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1523446759, "answer_count": 0, "score": 0, "last_activity_date": 1523446764, "creation_date": 1523446412, "question_id": 49774041, "link": "https://stackoverflow.com/questions/49774041/declaration-of-character-pointer-as-global-and-local-variable-when-using-pipe", "closed_reason": "Duplicate", "title": "Declaration of character pointer as global and local variable when using pipe() varies", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\nchar *msg1=\"HELLLO\",*msg2=\"NONONO\";//global declaration prints without any garbage value\nint main()\n{\n/*char *msg1=\"HELLLO\",*msg2=\"NONONO\";\"global declaration prints with garbage value */\nchar buf[6];\nint file[2],i;\nif(pipe(file) &lt; 0)\n    printf(\"\\nyou are out\");\nwrite(file[1],msg1,6);\nwrite(file[1],msg2,6);\nfor(i=1;i&lt;=2;i++){\n    read(file[0],buf,6);\n    printf(\"\\n%s\",buf);}\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Output:\nAs Global Variable:\nHELLLO\nNONONO</p>\n\n<p>As local variable:\nHELLLO\u2592\u2592\u2592\nNONONO\u2592\u2592\u2592</p>\n"}, {"tags": ["c", "arrays", "pointers", "memcpy"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 2, "creation_date": 1523444874, "post_id": 49773449, "comment_id": 86561768, "body": "Welcome to SO. You forgot to mention where you are stuck. What exactly is your problem? Show us your current effort for your copy function and we can help fixing the problem."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 4, "creation_date": 1523444911, "post_id": 49773449, "comment_id": 86561789, "body": "Actually, <code>memcpy</code> does the job."}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "edited": false, "score": 1, "creation_date": 1523444911, "post_id": 49773449, "comment_id": 86561790, "body": "Are you trying to recreate memcpy?"}, {"owner": {"reputation": 1, "user_id": 9630114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef4fd2ba26ef66895e7c7fef6d05dca?s=128&d=identicon&r=PG&f=1", "display_name": "John J", "link": "https://stackoverflow.com/users/9630114/john-j"}, "edited": false, "score": 0, "creation_date": 1523448596, "post_id": 49773449, "comment_id": 86564282, "body": "Yes, but without using it"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1523453815, "post_id": 49773449, "comment_id": 86568255, "body": "Have you already read <a href=\"https://codereview.stackexchange.com/questions/41094/memcpy-implementation\" title=\"memcpy implementation\">codereview.stackexchange.com/questions/41094/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/17591624/understanding-the-source-code-of-memcpy\" title=\"understanding the source code of memcpy\">stackoverflow.com/questions/17591624/&hellip;</a> ?"}, {"owner": {"reputation": 1, "user_id": 9630114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef4fd2ba26ef66895e7c7fef6d05dca?s=128&d=identicon&r=PG&f=1", "display_name": "John J", "link": "https://stackoverflow.com/users/9630114/john-j"}, "edited": false, "score": 0, "creation_date": 1523454859, "post_id": 49773449, "comment_id": 86569069, "body": "Bob__, thank you very much. It was what I wanted to find!!!!"}, {"owner": {"reputation": 1, "user_id": 9630114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef4fd2ba26ef66895e7c7fef6d05dca?s=128&d=identicon&r=PG&f=1", "display_name": "John J", "link": "https://stackoverflow.com/users/9630114/john-j"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1523455232, "post_id": 49773449, "comment_id": 86569346, "body": "@Bob__, Thanks!!!"}], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": true, "score": 5, "last_activity_date": 1523444998, "creation_date": 1523444998, "answer_id": 49773560, "question_id": 49773449, "link": "https://stackoverflow.com/questions/49773449/using-memcpy-method/49773560#49773560", "title": "Using memcpy method", "body": "<pre><code>void copyOfArray( void *from, void *to, int dimension, int length ) {\n     memcpy(to, from, dimension * length);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "is_accepted": false, "score": 0, "last_activity_date": 1523446153, "creation_date": 1523446153, "answer_id": 49773944, "question_id": 49773449, "link": "https://stackoverflow.com/questions/49773449/using-memcpy-method/49773944#49773944", "title": "Using memcpy method", "body": "<p>What you want is really achieved with <code>memcpy</code>, there is no need to reinvent it. For your convinience you can wrap it with <code>copy_of_array</code> or even wrap <code>copy_of_array</code> with <code>copy2</code> (as long as arrays are staticaly allocated).</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#define copy2(src, dst, count, shift) copy_of_array(src, dst, count, sizeof(src[0]), shift)\n\ncopy_of_array (void * src,\n               void * dst,\n               int    count,\n               int    elem_size,\n               int    shift)\n{\n  memcpy (dst, (char*)src + elem_size * shift, count * elem_size);\n}\n\nint main() {\n  int i;\n  int ione[4] = { 1, 2, 3, 4};\n  int itwo[2] = { 0, 0 };\n  char cone[4] = { 'a', 'b', 'c', 'd'};\n  char ctwo[2] = { 'x', 'y' };\n  copy_of_array(ione, itwo, 1, sizeof(int), 3);\n  for (i=0; i&lt;2; i++ )\n    printf(\"%d \", itwo[i] );\n\n  copy2(cone, ctwo, 1, 3);\n  for (i=0; i&lt;2; i++ )\n    printf(\"%c \", ctwo[i] );\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9630114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef4fd2ba26ef66895e7c7fef6d05dca?s=128&d=identicon&r=PG&f=1", "display_name": "John J", "link": "https://stackoverflow.com/users/9630114/john-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 2, "accepted_answer_id": 49773560, "answer_count": 2, "score": -4, "last_activity_date": 1523455374, "creation_date": 1523444730, "last_edit_date": 1523455374, "question_id": 49773449, "link": "https://stackoverflow.com/questions/49773449/using-memcpy-method", "title": "Using memcpy method", "body": "<p>I m looking for how to write a function like memcpy. Method that copy integers or chars from one array to other.\nWhat i mean, its to use memcpy, without using it. But in my case it does not work.</p>\n\n<pre><code>void Memcpy( void *from, void *to, int dimension, int length ) {\n\n   if(dimension == sizeof(char)){\n      char *copyFrom = (char *)from;\n      char *copyTo = (char *)to;\n\n      for(int i = length; i &lt; length; i++)\n         copyTo[i] = copyFrom[i];\n   }\n\n\n   if(dimension == sizeof(int)){\n      int *copyFrom = (int *)from;\n      int *copyTo = (int *)to;\n\n      for(int i = length; i &lt; length; i++)\n         copyTo[i] = copyFrom[i];\n   }\n}\n</code></pre>\n\n<p>{Thank you for help =)}</p>\n"}, {"tags": ["c++", "c", "riscv", "bare-metal", "chisel"], "comments": [{"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523441528, "post_id": 49771918, "comment_id": 86559560, "body": "What is <i>C++ Emulator</i>?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1523444476, "post_id": 49771918, "comment_id": 86561493, "body": "What&#39;s the purpose of C language tag if you use C++? Please don&#39;t use unrelated tags."}, {"owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523455049, "post_id": 49771918, "comment_id": 86569230, "body": "@VTT C++ Emulator is the CABA (cycle accurate bit accurate) simulator used to simulate software taking in consideration your personalized hardware. Spike is just a functional simulator, which doesn&#39;t take in consideration your hardware."}, {"owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1523455058, "post_id": 49771918, "comment_id": 86569236, "body": "@Gerhardh because the emulator is programmed in C++ but the program running on it is in C."}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "edited": false, "score": 0, "creation_date": 1523454260, "post_id": 49772346, "comment_id": 86568601, "body": "I know this. I made a little example here: <a href=\"https://github.com/noureddine-as/riscv-baremetal-DefaultConfig\" rel=\"nofollow noreferrer\">github.com/noureddine-as/riscv-baremetal-DefaultConfig</a> Executing this on the Emulator prints the hello message correctly. Then I made another one, but this time it gives me <code>*** FAILED *** (tohost = 1337) *** FAILED *** via dtm (code = 1337, seed 1523460801) after 208588 cycles</code> in the C++ Emulator even if it works well in Spike simulation ! Any idea?"}, {"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "reply_to_user": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "edited": false, "score": 1, "creation_date": 1523497008, "post_id": 49772346, "comment_id": 86588648, "body": "here <code>uint64_t magic_mem[8] __attribute__((aligned(64)));</code> array size is <code>8 * 8</code>, so may be it&#39;s overflow causing to fail after <code>208588</code> cycle"}, {"owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "edited": false, "score": 0, "creation_date": 1523517069, "post_id": 49772346, "comment_id": 86595157, "body": "I resolved this. I remarked than if I put for example <code>printf(&quot;something&quot;);</code> without a \\n it doesn&#39;t print in both cases with pk or baremetal. I didn&#39;t investigate the real source but I thing it&#39;s because printf is reimplemented in the syscalls and i don&#39;t use the Standard one. Moreover I guess that Spike still waits for the \\n to print the text. Anyway it works now. What I would like to know @Thiru is how to debug programs using Spike and especially the C++ Emulator?"}], "tags": [], "owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "is_accepted": false, "score": 1, "last_activity_date": 1523441580, "creation_date": 1523441580, "answer_id": 49772346, "question_id": 49771918, "link": "https://stackoverflow.com/questions/49771918/using-c-emulator-fails-when-calling-printf-syscall-from-a-risc-v-baremetal-pro/49772346#49772346", "title": "Using C++ Emulator fails when calling printf syscall from a RISC-V baremetal program", "body": "<blockquote>\n  <p>Is it possible to call syscalls (like printf, putchar ..) from the C\n  Emulator?</p>\n</blockquote>\n\n<p>Yes these functions already defined <a href=\"https://github.com/riscv/riscv-tests/blob/master/benchmarks/common/syscalls.c\" rel=\"nofollow noreferrer\">here</a> in code base</p>\n\n<p>As per the code base, data address pointing by global external variable, from this address you need to read 4 index of 64bit data</p>\n\n<pre><code>extern volatile uint64_t tohost;\nextern volatile uint64_t fromhost;\n</code></pre>\n\n<p>The <code>printf(), putchar()</code> implemented using this <code>syscall</code></p>\n\n<pre><code>static uintptr_t syscall(uintptr_t which, uint64_t arg0, uint64_t arg1, uint64_t arg2)\n{\n  volatile uint64_t magic_mem[8] __attribute__((aligned(64)));\n  magic_mem[0] = which;\n  magic_mem[1] = arg0;\n  magic_mem[2] = arg1;\n  magic_mem[3] = arg2;\n  __sync_synchronize();\n\n  tohost = (uintptr_t)magic_mem;\n  while (fromhost == 0)\n    ;\n  fromhost = 0;\n\n  __sync_synchronize();\n  return magic_mem[0];\n}\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 8014623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8c549808e163e1181894193e9678629b?s=128&d=identicon&r=PG&f=1", "display_name": "noureddine-as", "link": "https://stackoverflow.com/users/8014623/noureddine-as"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523441580, "creation_date": 1523440346, "question_id": 49771918, "link": "https://stackoverflow.com/questions/49771918/using-c-emulator-fails-when-calling-printf-syscall-from-a-risc-v-baremetal-pro", "title": "Using C++ Emulator fails when calling printf syscall from a RISC-V baremetal program", "body": "<p>I'm working on a project based on Rocket-Chip tools. I made a simple baremetal program that works well on Spike (even with multiple cores ...etc).</p>\n\n<p>The problem is that when I run it in the C++ Emulator, the latter stops in the first printf call.</p>\n\n<p>My question is: Is it possible to call syscalls (like printf, putchar ..) from the C Emulator? Or is there any way to print the results of a program out of the simulation like fetching the data memory or something? (I struggled with that and I didn't find where it saves the data variables).</p>\n\n<p>PS: The program is based on <a href=\"https://github.com/riscv/riscv-tests/tree/master/benchmarks\" rel=\"nofollow noreferrer\">riscv-tests/benchmarks</a> the syscalls are already defined there.</p>\n"}, {"tags": ["c", "sockets", "server", "socket.io"], "comments": [{"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1523438634, "post_id": 49771253, "comment_id": 86557469, "body": "what is room..?"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1523438689, "post_id": 49771253, "comment_id": 86557507, "body": "I suggest you post a minimal C server to see how things are set up in your code. Also show the Java code defining the socket &quot;myRoom&quot;."}, {"owner": {"reputation": 41, "user_id": 7109427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd76a9889139071df51480144504d50?s=128&d=identicon&r=PG&f=1", "display_name": "icfeavoir", "link": "https://stackoverflow.com/users/7109427/icfeavoir"}, "edited": false, "score": 0, "creation_date": 1523891953, "post_id": 49771253, "comment_id": 86736713, "body": "Actually I don&#39;t know how to start in C. Do you see how does work socket.io in JavaScript, Java or Android? The emit function has two parameters : the room (or event) and the data."}], "owner": {"reputation": 41, "user_id": 7109427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd76a9889139071df51480144504d50?s=128&d=identicon&r=PG&f=1", "display_name": "icfeavoir", "link": "https://stackoverflow.com/users/7109427/icfeavoir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523889512, "creation_date": 1523438488, "last_edit_date": 1523889512, "question_id": 49771253, "link": "https://stackoverflow.com/questions/49771253/how-to-convert-socket-io-in-classic-socket", "title": "How to convert socket.io in classic socket?", "body": "<p>I have a Java client and I need a C server. I use a socket.io framework in Java et I know how to create a C server, but I don't know how to listen to a specific room.\nFor example if I want to emit something like this in Java:</p>\n\n<pre><code>socket = IO.socket(\"http://myServer.fr:1234\");\nsocket.emit(\"myRoom\", \"my message\");\n</code></pre>\n\n<p>I don't know how to get the room in C.</p>\n\n<p>Does anyone know?\nThanks!</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "mutex"], "comments": [{"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523437855, "post_id": 49770797, "comment_id": 86556930, "body": "You call <code>pthread_join(tfirst</code> twice - first inside of thread2 routine and then at the end of mine."}, {"owner": {"reputation": 23, "user_id": 9629492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zorg", "link": "https://stackoverflow.com/users/9629492/zorg"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523438035, "post_id": 49770797, "comment_id": 86557056, "body": "Thank you, removing that line solved the segfault (even though the program output is still incorrect). However, I still don&#39;t fully understand why did the pthread_join cause a segfault. In the man page, it says &quot; If that thread has  already  terminated,  then  pthread_join() returns immediately&quot;, which led me to believe there is no harm in calling pthread_join twice."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523439344, "post_id": 49770797, "comment_id": 86557958, "body": "What do you mean by &quot;output is still incorrect&quot;?"}, {"owner": {"reputation": 23, "user_id": 9629492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zorg", "link": "https://stackoverflow.com/users/9629492/zorg"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523439716, "post_id": 49770797, "comment_id": 86558236, "body": "Well, each tfirst thread stores 30 pseudorandom integers in an array. After the execution of the first function, the second function should calculate the sum and the average of the numbers stored by tfirst. However, the output is often 0 for the sum. As Andriy said, this could be because the second thread, tsecond might actually start before the relevant tfirst thread even starts execution.  I also tried spawning the second thread at the end of the first function, but that lead to additional segfaults and the output is still incorrect."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523439844, "post_id": 49770797, "comment_id": 86558316, "body": "Even if <code>second</code> thread starts before corresponding <code>first</code> thread calling <code>pthread_join</code> at the beginning of second thread will make it wait for first thread to fill the array."}, {"owner": {"reputation": 23, "user_id": 9629492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zorg", "link": "https://stackoverflow.com/users/9629492/zorg"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523440112, "post_id": 49770797, "comment_id": 86558512, "body": "I tried adding a <code>pthread_create</code> at the end of the <code>first</code> function and <code>pthread_join</code> at the start of the <code>second</code> function, but the code still occasionally segfaults and outputs a zero for the sum.  I&#39;m now also spawning only the <code>second</code> thread in the <code>main</code> function."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523440238, "post_id": 49770797, "comment_id": 86558606, "body": "There is no need for such changes, removing <code>pthread_join(tfirst[i], NULL);</code> from main should be sufficient. You should not try changing code randomly hoping that one variant is going to work."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523441385, "post_id": 49770797, "comment_id": 86559463, "body": "What value do you enter for n?   If it&#39;s 30, you have a problem."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523441470, "post_id": 49770797, "comment_id": 86559530, "body": "Show inputs and outputs."}, {"owner": {"reputation": 23, "user_id": 9629492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zorg", "link": "https://stackoverflow.com/users/9629492/zorg"}, "edited": false, "score": 0, "creation_date": 1523441536, "post_id": 49770797, "comment_id": 86559564, "body": "The output by just removing that single <code>pthread_join(tfirst[i], NULL)</code> in main: <code>Sum 2 = 0 Sum 1 = 259125030 Sum 4 = 0 Sum 3 = 54542150670 Arithmetic mean 2 = 0.000000 Arithmetic mean 3 = 1818071680.000000 Arithmetic mean 1 = 8637501.000000 Arithmetic mean 4 = 0.000000</code>  And yes, the value for n is 30.  I&#39;m not changing the code randomly, I&#39;m trying to understand why it doesn&#39;t produce the expected output."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523441615, "post_id": 49770797, "comment_id": 86559616, "body": "In fact, if you don&#39;t enter any value for n, you have a problem since the default is 30."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523441646, "post_id": 49770797, "comment_id": 86559638, "body": "[30] is an out-of-bounds index."}, {"owner": {"reputation": 23, "user_id": 9629492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zorg", "link": "https://stackoverflow.com/users/9629492/zorg"}, "edited": false, "score": 0, "creation_date": 1523441689, "post_id": 49770797, "comment_id": 86559667, "body": "Martin, why would that be a problem? It never goes to 30."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1523441739, "post_id": 49770797, "comment_id": 86559698, "body": "Because reading out of bounds is UB and sum calculating code does not work."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523441811, "post_id": 49770797, "comment_id": 86559737, "body": "Specifically here: &#39;sum += arr[(int)x][n];&#39;"}, {"owner": {"reputation": 23, "user_id": 9629492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zorg", "link": "https://stackoverflow.com/users/9629492/zorg"}, "edited": false, "score": 0, "creation_date": 1523441842, "post_id": 49770797, "comment_id": 86559757, "body": "Wait a second, where is my code fetching out of bounds values? The for loops go up to <code>strictly less than</code> 30, which is 29. The same thing happens for lower values of n, such as 10."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523442179, "post_id": 49770797, "comment_id": 86559972, "body": "Every &#39;second&#39; thread instance uses [n] as the second index of the array.  The same value of &#39;n&#39; for each. I don&#39;t think that is what you intended and, for n=30, is an out-of-bounds read."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523442249, "post_id": 49770797, "comment_id": 86560020, "body": "Did you mean &#39;sum += arr[(int)x][i];&#39;  and put &#39;n&#39; by mistake?"}, {"owner": {"reputation": 23, "user_id": 9629492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zorg", "link": "https://stackoverflow.com/users/9629492/zorg"}, "edited": false, "score": 0, "creation_date": 1523442313, "post_id": 49770797, "comment_id": 86560065, "body": "Oh my god, how did I miss that? I meant to write <code>arr[(int)x][i]</code>. Thank you, I can&#39;t believe I didn&#39;t see that! I lost so much time on that, I just couldn&#39;t figure out what&#39;s wrong."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523442417, "post_id": 49770797, "comment_id": 86560137, "body": "@Zorg oh it&#39;s easy, especially if you use single-letter var names, (ie protip - don&#39;t use single-letter var names!)."}], "answers": [{"tags": [], "owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 4, "last_activity_date": 1523441682, "last_edit_date": 1523441682, "creation_date": 1523438162, "answer_id": 49771143, "question_id": 49770797, "link": "https://stackoverflow.com/questions/49770797/segfault-and-incorrect-output-in-multithreaded-application/49771143#49771143", "title": "Segfault and incorrect output in multithreaded application", "body": "<p>You call <code>pthread_join</code> twice for the same thread - first inside of <code>second</code> thread routine and then at the end of <code>main</code>.</p>\n\n<p>From <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_join.html#\" rel=\"nofollow noreferrer\"><code>pthread_join</code> reference</a>:</p>\n\n<blockquote>\n  <p>The results of multiple simultaneous calls to pthread_join() specifying the same target thread are undefined.</p>\n  \n  <p>The behavior is undefined if the value specified by the thread argument to pthread_join() does not refer to a joinable thread.</p>\n</blockquote>\n\n<p>The part <em>\"If that thread has already terminated, then pthread_join() returns immediately\"</em> means that calling <code>pthread_join</code> on the thread that already ended (but is still joinable) makes call return immediately, however after this call thread is not joinable anymore and calling <code>pthread_join</code> again will result an UB.</p>\n\n<p>Your sum calculation code is wrong: <code>sum += arr[(int)x][n];</code> will only use the <code>n</code>th value (that is out of bounds which leads to UB as well).</p>\n\n<p>Also both thread routines should return a value: <code>return NULL;</code></p>\n"}, {"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1523440659, "post_id": 49771165, "comment_id": 86558922, "body": "Yes, or start the second thread from the first, once the array is fully initialized.  Yes - horribly inefficient overall, but it&#39;s obviously just an exercise anyway since averaging 30 numbers is hugely trivial for threading off, so who cares? :)"}], "tags": [], "owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "is_accepted": false, "score": 1, "last_activity_date": 1523438214, "creation_date": 1523438214, "answer_id": 49771165, "question_id": 49770797, "link": "https://stackoverflow.com/questions/49770797/segfault-and-incorrect-output-in-multithreaded-application/49771165#49771165", "title": "Segfault and incorrect output in multithreaded application", "body": "<blockquote>\n  <p>The second thread also waits for the first thread with pthread_join, but it seems to join sometimes before the first thread exits.</p>\n</blockquote>\n\n<p>Actually, second thread could start execution even before the first thread. There are no guarantees whatsoever regarding thread execution order.</p>\n\n<p>The solution would be to use just one thread, i.e. at the ent of the <code>firts()</code> just call <code>second()</code>. This will guarantee the execution order between those functions without any mutexes.</p>\n"}], "owner": {"reputation": 23, "user_id": 9629492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Zorg", "link": "https://stackoverflow.com/users/9629492/zorg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 49771143, "answer_count": 2, "score": 2, "last_activity_date": 1523441682, "creation_date": 1523437126, "last_edit_date": 1523438117, "question_id": 49770797, "link": "https://stackoverflow.com/questions/49770797/segfault-and-incorrect-output-in-multithreaded-application", "title": "Segfault and incorrect output in multithreaded application", "body": "<p>I'm learning multithreading in C, and have some troubles understanding why my code doesn't give the expected output and segfaults. I'm using the pthread library in C and my code starts a total of m*2 threads, m for each of the two functions it starts. The first function calculates a 30 random numbers and stores it in a global array. The second function then reads the integers from the array, calculates their sum and their average. The second thread also waits for the first thread with pthread_join, but it seems to join sometimes before the first thread exits.</p>\n\n<p>What am I doing wrong here?</p>\n\n<p>I'm also aware using mutexes would be a much better option, but I'm trying to this without mutexes on purpose.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\nint n = 30;\nint arr[100][30];\n\npthread_t tfirst[100];\npthread_t tsecond[100];\n\n\nvoid *first(void *x){\n\n    for(int i = 0; i &lt; n; i++)\n        arr[(int)x][i] = rand();\n\n}\n\nvoid *second(void *x){\n    pthread_join(tfirst[(int)x], NULL);\n\n    long sum = 0;\n    for(int i = 0; i &lt; n; i++){\n        sum += arr[(int)x][n];\n    }\n\n    printf(\"Sum %d = %ld\\n\", (int)x + 1, sum);\n    sleep(1);\n    printf(\"Arithmetic mean %d = %f\\n\", (int)x + 1, (float)sum / n);\n}\n\n\nint main(int argc, char **argv){\n    int m;\n    srand(time(0));\n    if(argc &lt; 2){\n        fprintf(stderr, \"Usage: %s m [n]\", argv[0]);\n        exit(EXIT_FAILURE);\n    }\n    m = atoi(argv[1]);\n    if(argc &gt;= 3) n = atoi(argv[2]);\n\n\n    for(int i = 0; i &lt; m; i++){\n        if (pthread_create(&amp;tfirst[i], NULL, first, (void*)i)) {\n          fprintf(stderr, \"Error creating thread!\\n\");\n          exit(EXIT_FAILURE);\n        }\n\n        if (pthread_create(&amp;tsecond[i], NULL, second, (void*)i)) {\n          fprintf(stderr, \"Error creating thread!\\n\");\n          exit(EXIT_FAILURE);\n        }\n\n\n\n    }\n    for(int i = 0; i &lt; m; i++){\n        pthread_join(tfirst[i], NULL);\n        pthread_join(tsecond[i], NULL);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 5, "creation_date": 1523436921, "post_id": 49770676, "comment_id": 86556193, "body": "1) please dont tag unrelated languages 2) you never use the return value and then you print the value of a function pointer"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 3, "creation_date": 1523436976, "post_id": 49770676, "comment_id": 86556237, "body": "3) Turn your complier\u2019s warnings to the max"}, {"owner": {"reputation": 59, "user_id": 9629433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/502439c7f9a0d90f82a181d36a5b43e5?s=128&d=identicon&r=PG&f=1", "display_name": "Sushil Kumar", "link": "https://stackoverflow.com/users/9629433/sushil-kumar"}, "edited": false, "score": 0, "creation_date": 1523437404, "post_id": 49770676, "comment_id": 86556581, "body": "I got it from this (2)you never use the return value and then you print the value of a function pointer.............. Unaware of coding from my and Thanks for you time"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1523437698, "post_id": 49770676, "comment_id": 86556804, "body": "Remove <code>sum(a,b);</code>, change <code>printf(&quot;\\nsum=%d&quot;,sum);</code> to <code>printf(&quot;\\nsum=%d&quot;,sum(a,b));</code>. And finally start reading your C text book."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1523440614, "post_id": 49770676, "comment_id": 86558892, "body": "@user463035818 It is at least controversial\u2014if not outright bad\u2014to suggest that local variables should be initialized immediately when declared.Initializing them to a dummy value because the intended value is not available yet at the declaration makes bug harder to identify with static and dynamic analyzers, in exchange for making the program deterministic (but still buggy)."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523446289, "post_id": 49770676, "comment_id": 86562713, "body": "@Olaf I dont think this is going anywhere. I will just delete my comments"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523446377, "post_id": 49770676, "comment_id": 86562776, "body": "It&#39;s a <i>declaration</i> and a <i>definition</i>. With an <i>initialiser</i>. &quot;Initialisation&quot; is a process. The term is a bit ambivalent, as setting an object in any way (could be by reading file input) is also called &quot;initialisation&quot; in common language."}], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 8720012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/039247b3d75cbd0c9512adc4f25413c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/8720012/bharadwaj"}, "is_accepted": false, "score": 5, "last_activity_date": 1523436960, "creation_date": 1523436960, "answer_id": 49770734, "question_id": 49770676, "link": "https://stackoverflow.com/questions/49770676/what-is-wrong-in-the-following-c-code-prints-garbage-value/49770734#49770734", "title": "What is wrong in the following c code prints garbage value?", "body": "<pre><code>sum(a,b);\n</code></pre>\n\n<p>This is the problem You are printing the value of function (The pointer poiting to the function ,garbage value) rather than a variable which has the value of the sum ! You should use <code>int ans=sum(a,b);printf(\"%d\",ans);</code> which will give you the desired answer  </p>\n"}, {"tags": [], "owner": {"reputation": 2182, "user_id": 8363456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03528aca3eb38208438cb6142cef437f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Dee", "link": "https://stackoverflow.com/users/8363456/tom-dee"}, "is_accepted": false, "score": 0, "last_activity_date": 1523436992, "creation_date": 1523436992, "answer_id": 49770743, "question_id": 49770676, "link": "https://stackoverflow.com/questions/49770676/what-is-wrong-in-the-following-c-code-prints-garbage-value/49770743#49770743", "title": "What is wrong in the following c code prints garbage value?", "body": "<pre><code>printf(\"\\nsum=%d\",sum);\n</code></pre>\n\n<p>This line is trying to print out <code>sum</code> however sum is not declared as a <code>int</code> but as a function. Therefore it's printing the pointer to the function <code>sum</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 1, "last_activity_date": 1523438862, "last_edit_date": 1523438862, "creation_date": 1523438151, "answer_id": 49771141, "question_id": 49770676, "link": "https://stackoverflow.com/questions/49770676/what-is-wrong-in-the-following-c-code-prints-garbage-value/49771141#49771141", "title": "What is wrong in the following c code prints garbage value?", "body": "<p>You have a function named <code>sum</code> but you aren't calling it in the <code>printf()</code>. What you're doing is using it's address. </p>\n\n<p>By writing</p>\n\n<pre><code>int sum(int x,int y)\n{\n    int add;\n    add=x+y;\n    printf(\"\\nadd=%d\",add);\n    return add;\n}\n</code></pre>\n\n<p>You have declared and implemented a function named <code>sum</code> who receives 2 <code>int</code>s, and outputs 1. However, each time you use this <code>sum</code> without the <code>()</code> (like in your <code>printf</code>) you just tell the compiler to fetch you the value of that symbol, and the value of a function symbol, is its address, hence the weird value you got.</p>\n\n<p>Fix by:</p>\n\n<pre><code>int main()\n{\n    int a,b;\n    a=1;b=2;\n    int s = sum(a,b);  /* Option 1 - save output of sum into a variable s */\n    printf(\"\\nsum=%d\",s); /* use that variable */\n\n    /* Option 2 */\n    /* skip the line sum(a,b); and call the function from inside printf */\n\n    printf(\"\\nsum=%d\",sum(a,b));\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 164, "user_id": 1931367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c1bc5bc02963e92db1abede6c02fd8?s=128&d=identicon&r=PG", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/1931367/rajesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1523438834, "creation_date": 1523438834, "answer_id": 49771369, "question_id": 49770676, "link": "https://stackoverflow.com/questions/49770676/what-is-wrong-in-the-following-c-code-prints-garbage-value/49771369#49771369", "title": "What is wrong in the following c code prints garbage value?", "body": "<p>in printf you are trying to print value of sum, which is function name. name of the function holds address. so it is printing address of the function sum.\nTo print the actual result you have to call the function sum(a,b)</p>\n\n<pre><code> printf(\"\\nsum=%d\",sum(a,b));\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9629433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/502439c7f9a0d90f82a181d36a5b43e5?s=128&d=identicon&r=PG&f=1", "display_name": "Sushil Kumar", "link": "https://stackoverflow.com/users/9629433/sushil-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1523439680, "creation_date": 1523436785, "last_edit_date": 1523439680, "question_id": 49770676, "link": "https://stackoverflow.com/questions/49770676/what-is-wrong-in-the-following-c-code-prints-garbage-value", "title": "What is wrong in the following c code prints garbage value?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint sum(int x,int y)\n{\n    int add;\n    add=x+y;\n    printf(\"\\nadd=%d\",add);\n    return add;\n}\n\nint main()\n{\n    int a,b;\n    a=1;b=2;\n    sum(a,b);\n    printf(\"\\nsum=%d\",sum);\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>output: <br>\n  add=3<br>\n  sum=4195760</p>\n</blockquote>\n\n<p>Whats is wrong here, why the return of the addition is printing a garbage value in the main function.</p>\n"}, {"tags": ["c", "twos-complement", "signed-integer"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1523436467, "post_id": 49770471, "comment_id": 86555924, "body": "You should not assume that <code>int</code> is 2&#39;s complement or any other implementation detail. That would, at best, lead to unportable and brittle code. Just do the arithmetic yourself to get the correct result. In fact, you shouldn&#39;t even assume it can hold a 3-byte number!"}, {"owner": {"reputation": 2400, "user_id": 678011, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/24d09f66ebe43f79409b6d31431b0dc0?s=128&d=identicon&r=PG", "display_name": "DukeOfMarmalade", "link": "https://stackoverflow.com/users/678011/dukeofmarmalade"}, "edited": false, "score": 0, "creation_date": 1523436532, "post_id": 49770471, "comment_id": 86555956, "body": "What size is int on your architecture?"}, {"owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "edited": false, "score": 1, "creation_date": 1523436697, "post_id": 49770471, "comment_id": 86556061, "body": "Don&#39;t assume sizes of <code>int</code> or even <code>char</code>. Use proper types like <code>uint8_t</code> and <code>int32_t</code> etc."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1523436774, "post_id": 49770471, "comment_id": 86556102, "body": "I don&#39;t understand. Even if byte0 == byte1 == byte2 == 0xff, byte0 + (byte1 &lt;&lt; 8) + (byte2 &lt;&lt; 16) is only 0x00ffffff, assuming <code>int</code> has 4 bytes. Why should it be negative?"}, {"owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "reply_to_user": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1523436967, "post_id": 49770471, "comment_id": 86556230, "body": "@Stan it should be negative if you want it to be negative. Extending of N-bit integer to (N+M)-bit integer can be done in two ways, depending on whether one treats the N-bit value as signed or unsigned. Even though 2-complement machines use the same arithmetics for them."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1523437110, "post_id": 49770471, "comment_id": 86556359, "body": "@underscore_d <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2218.htm\" rel=\"nofollow noreferrer\">there is a proposal</a> to fix this in the next version of the standard, as in practice non-two&#39;s-complement arithmetic doesn&#39;t seem to be a concern IRL for any code that is likely to be actively updated or newly written."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "reply_to_user": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "edited": false, "score": 0, "creation_date": 1523437676, "post_id": 49770471, "comment_id": 86556785, "body": "@GrigoryRechistov just want to check what the original motive is. (Why not use signed char at the first place?)"}, {"owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "reply_to_user": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 1, "creation_date": 1523438655, "post_id": 49770471, "comment_id": 86557482, "body": "@Stan Even if one uses signed types, the (un)signed extension happens, it is only performed by compiler, not programmer. It is good to know however the underlying logic behind it. Sometimes you have to know how to do it yourself: 1) you cannot control signedness of input values (3rd-party code) 2) your desired integer type is not supported by compiler (e.g. a 13-bit signed int, or 256-bit signed int)."}, {"owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "reply_to_user": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1523439009, "post_id": 49770471, "comment_id": 86557721, "body": "@Stan &quot;what the original motive is&quot; \u2014 it might be that <code>readRegister()</code> returns an unsigned type and you cannot change it. From that point, you have a number of options how to proceed, including the explicit one I gave in my answer below. Note that <code>byte0</code> and <code>byte1</code> should be kept as unsigned during the merging process (otherwise their higher bits would overlap with each other), while <code>byte2</code> may be casted to signed 32-bit int."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "reply_to_user": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "edited": false, "score": 0, "creation_date": 1523440196, "post_id": 49770471, "comment_id": 86558578, "body": "@GrigoryRechistov Thanks for the detailed reply :) I meant ... we could write <code>unsigned char byte0,byte1; char byte2; ... int32_t value = byte0 | (byte1 &lt;&lt; 8) | (byte2 &lt;&lt; 16);</code> and let the compiler do its job, which could save a <code>? :</code> operation. Anyway it depends on the original motive."}], "answers": [{"comments": [{"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 1, "creation_date": 1523436917, "post_id": 49770589, "comment_id": 86556186, "body": "Integer promotion is applied to the operands of <code>&lt;&lt;</code>; you cannot shift an 8-bit value in C at all, because it will be promoted to <code>int</code> or <code>unsigned int</code> first. However, you may want to prevent it from choosing an inappropriate conversion path (e.g. unexpected sign extension on an unsigned operand)."}, {"owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1523437096, "post_id": 49770589, "comment_id": 86556346, "body": "@Leushenko, thanks, I did not know that <code>char</code> has special treatment in shifting operations. You can never be too much careful with shifting in C though."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 1, "creation_date": 1523455639, "post_id": 49770589, "comment_id": 86569643, "body": "@Leushenko: It is true that you cannot shift an eight-bit value by eight bits without risking undefined behavior because <code>128 &lt;&lt; 8</code> is 32768, which is larger than an <code>int</code> is guaranteed to be able to represent."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1523457249, "post_id": 49770589, "comment_id": 86570876, "body": "@GrigoryRechistov: This is not special treatment for <code>char</code> in shifting operations. In C, all integer expressions (including <code>_Bool</code>, <code>char</code>, and <code>short</code>) are promoted to at least <code>int</code> in most contexts."}], "tags": [], "owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "is_accepted": true, "score": 7, "last_activity_date": 1523436530, "creation_date": 1523436530, "answer_id": 49770589, "question_id": 49770471, "link": "https://stackoverflow.com/questions/49770471/c-three-bytes-into-one-signed-int/49770589#49770589", "title": "C - three bytes into one signed int", "body": "<p>What you need to perform is called <em>sign extension</em>. You have 24 significant bits but want 32 significant bits (note that you assume <code>int</code> to be 32-bit wide, which is not always true; you'd better use type <code>int32_t</code> defined in <code>stdint.h</code>). Missing 8 top bits should be either all zeroes for positive values or all ones for negative. It is defined by the most significant bit of the 24 bit value.</p>\n\n<pre><code>int32_t value;\nuint8_t extension = byte2 &amp; 0x80 ? 0xff:00; /* checks bit 7 */\nvalue = (int32_t)byte0 | ((int32_t)byte1 &lt;&lt; 8) | ((int32_t)byte2 &lt;&lt; 16) | ((int32_t)extension &lt;&lt; 24);\n</code></pre>\n\n<p><strong>EDIT</strong>: Note that you cannot shift an 8 bit value by 8 or more bits, it is undefined behavior. You'll have to cast it to a wider type first.</p>\n"}, {"tags": [], "owner": {"reputation": 518, "user_id": 4637938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dtHFq.png?s=128&g=1", "display_name": "bd2357", "link": "https://stackoverflow.com/users/4637938/bd2357"}, "is_accepted": false, "score": 1, "last_activity_date": 1523889025, "creation_date": 1523889025, "answer_id": 49859824, "question_id": 49770471, "link": "https://stackoverflow.com/questions/49770471/c-three-bytes-into-one-signed-int/49859824#49859824", "title": "C - three bytes into one signed int", "body": "<pre><code>#include &lt;stdint.h&gt;\nuint8_t byte0,byte1,byte2;\nint32_t answer;\n\n// assuming reg 0x25 is the signed MSB of the number \n// but you need to read unsigned for some reason\nbyte0=readRegister(0x25);\nbyte1=readRegister(0x26);\nbyte2=readRegister(0x27);\n\n// so the trick is you need to get the byte to sign extend to 32 bits\n// so force it signed then cast it up\nanswer = (int32_t)((int8_t)byte0); // this should sign extend the number\nanswer &lt;&lt;= 8;\nanswer |= (int32_t)byte1; // this should just make 8 bit field, not extended\nanswer &lt;&lt;= 8;\nanswer |= (int32_t)byte2;\n</code></pre>\n\n<p>This should also work</p>\n\n<pre><code>answer = (((int32_t)((int8_t)byte0))&lt;&lt;16) + (((int32_t)byte1)&lt;&lt; 8) + byte2;\n</code></pre>\n\n<p>I may be overly aggressive with parentheses but I never trust myself with shift operators :)</p>\n"}], "owner": {"reputation": 308, "user_id": 6589237, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/208b7aef2775e7bc7f6e7cc9d4b3bc41?s=128&d=identicon&r=PG&f=1", "display_name": "muliku", "link": "https://stackoverflow.com/users/6589237/muliku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "accepted_answer_id": 49770589, "answer_count": 2, "score": 3, "last_activity_date": 1523889025, "creation_date": 1523436174, "question_id": 49770471, "link": "https://stackoverflow.com/questions/49770471/c-three-bytes-into-one-signed-int", "title": "C - three bytes into one signed int", "body": "<p>I have a sensor which gives its output in three bytes. I read it like this:</p>\n\n<pre><code>unsigned char byte0,byte1,byte2;\n\nbyte0=readRegister(0x25);\nbyte1=readRegister(0x26);\nbyte2=readRegister(0x27);\n</code></pre>\n\n<p>Now I want these three bytes merged into one number:</p>\n\n<pre><code>int value;\nvalue=byte0 + (byte1 &lt;&lt; 8) + (byte2 &lt;&lt; 16);\n</code></pre>\n\n<p>it gives me values from 0 to 16,777,215 but I'm expecting values from -8,388,608 to 8,388,607. I though that <code>int</code> was already signed by its implementation. Even if I try define it like <code>signed int value;</code> it still gives me only positive numbers. So I guess my question is how to convert int to its two's complement?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1820, "user_id": 7209631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ad26cdac82ab360fb4fd572febf351?s=128&d=identicon&r=PG&f=1", "display_name": "Baris Yakut", "link": "https://stackoverflow.com/users/7209631/baris-yakut"}, "edited": false, "score": 2, "creation_date": 1523434038, "post_id": 49769641, "comment_id": 86554388, "body": "By initializing <code>sum</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 2823275, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000460279406/picture?type=large", "display_name": "Rajnish", "link": "https://stackoverflow.com/users/2823275/rajnish"}, "is_accepted": true, "score": 2, "last_activity_date": 1523434248, "creation_date": 1523434248, "answer_id": 49769808, "question_id": 49769641, "link": "https://stackoverflow.com/questions/49769641/im-getting-an-error-in-visual-studio-2015-while-debugging-it/49769808#49769808", "title": "I&#39;m getting an error in Visual Studio 2015 while debugging it", "body": "<p>You have to initialize the variable \"sum\".You have only declared it.\n<strong>You should learn about initialization and declaration.</strong></p>\n\n<p>The thing is the compiler doesn't know how to add the \"power\" to \"sum\" variable when sum has not any value defined. what will you do? when some one will ask you to add 1000 with some value you don't know.</p>\n\n<p>in your case just do this:</p>\n\n<pre><code>int sum=0;\n</code></pre>\n\n<p>That'll be it</p>\n"}], "owner": {"reputation": 13, "user_id": 9629198, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AUZSV1IFYoc/AAAAAAAAAAI/AAAAAAAAGYU/5rzT5NoYQxk/photo.jpg?sz=128", "display_name": "Amit Peretz", "link": "https://stackoverflow.com/users/9629198/amit-peretz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "closed_date": 1523434556, "accepted_answer_id": 49769808, "answer_count": 1, "score": 0, "last_activity_date": 1523434248, "creation_date": 1523433698, "question_id": 49769641, "link": "https://stackoverflow.com/questions/49769641/im-getting-an-error-in-visual-studio-2015-while-debugging-it", "closed_reason": "Duplicate", "title": "I&#39;m getting an error in Visual Studio 2015 while debugging it", "body": "<blockquote>\n  <p>\"Run-Time Check Failure #3 - The variable 'sum' is being used without\n  being initialized.\"</p>\n</blockquote>\n\n<p>How can I fix this error?</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\nint perfect_in_pow(int num) {\n    int nn = 0;  // THE NUMBER OF THE DIGITS IN THE NUMBER\n    int temp;  // USED TO SEPERATE A DIGIT FROM THE ENTIRE NUMBER\n    int temp2; // USED TO CALCULATE TO NUMBER OF TIMES THAT WE NEED TO ADD 1 TO \"nn\"\n    int temp3; // USED TO SAVE THE ORIGINAL ENTERED NUMBER'S VALUE\n    int power; // USED TO CALCULATE EACH DIGIT TO THE POWER OF \"nn\"\n    int sum;   // THE SUMMERY OF THE \"power\" CALCULATION FOR EACH DIGIT\n    int ii;    // USED IN THE FOR LOOP\n    temp2 = num;\n    temp3 = num;\n    do {    // USED TO CALCULATE THE NUMBER OF THE DIGITS IN THE NUMBER\n        nn += 1;\n        temp2 = temp2 / 10;\n    } while (temp2 &gt; 0);\n    while (num&gt;0) {    // USED TO CALCULATE THE SUMMERY \n        for (ii = 0; ii&lt;nn; ii++) {\n            temp = num % 10;\n            power = pow(temp, nn);\n            sum += power;\n            num = num / 10;\n        }\n    }\n    if (temp3 == sum) {\n        return 1;\n    }\n    else {\n        return 0;\n    }\n}\n\nvoid main() {\n    int num;\n    printf(\"Enter a number \");\n    scanf(\"%d\", &amp;num);\n    printf(\"%d\", perfect_in_pow(num));\n}\n</code></pre>\n\n<p>Any assistance will be appriciated. Thanks.</p>\n"}, {"tags": ["c", "linked-list", "segmentation-fault", "malloc", "doubly-linked-list"], "comments": [{"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1523433395, "post_id": 49769474, "comment_id": 86554026, "body": "Tried debugging?"}, {"owner": {"reputation": 886, "user_id": 5477126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6VrvP.jpg?s=128&g=1", "display_name": "rak007", "link": "https://stackoverflow.com/users/5477126/rak007"}, "edited": false, "score": 0, "creation_date": 1523433435, "post_id": 49769474, "comment_id": 86554051, "body": "Run valgrind on your program"}, {"owner": {"reputation": 2221, "user_id": 917880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d959cb057068218cbe10b803dcc69709?s=128&d=identicon&r=PG", "display_name": "mity", "link": "https://stackoverflow.com/users/917880/mity"}, "edited": false, "score": 0, "creation_date": 1523433745, "post_id": 49769474, "comment_id": 86554215, "body": "Also you do not check if <code>sbrk(2)</code> fails."}, {"owner": {"reputation": 91, "user_id": 9281565, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f085ac5e4599a737ee49754b33985c61?s=128&d=identicon&r=PG&f=1", "display_name": "OptatootatpO", "link": "https://stackoverflow.com/users/9281565/optatootatpo"}, "edited": false, "score": 0, "creation_date": 1523434323, "post_id": 49769474, "comment_id": 86554564, "body": "what do you mean for sbrk(2)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1523434356, "post_id": 49769474, "comment_id": 86554580, "body": "<code>sbrk(2)</code> is a notation for the <code>sbrk</code> function from section 2 (system calls) of the Unix manual"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523434398, "post_id": 49769474, "comment_id": 86554606, "body": "Note that the dot (<code>.</code>) and arrow (<code>-&gt;</code>) operators bind very tightly and should never be written with spaces around them."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523434459, "post_id": 49769474, "comment_id": 86554648, "body": "Your code formatting is weird \u2014 to be polite about it.  Please post sanely indented code."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523434571, "post_id": 49769474, "comment_id": 86554707, "body": "You&#39;ve got alignment problems with <code>size + sizeof(Node)</code>.  Maybe you&#39;ll get away with poor performance, but on many machines, you&#39;d get bus errors for misaligned data access."}], "owner": {"reputation": 91, "user_id": 9281565, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f085ac5e4599a737ee49754b33985c61?s=128&d=identicon&r=PG&f=1", "display_name": "OptatootatpO", "link": "https://stackoverflow.com/users/9281565/optatootatpo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1523435389, "creation_date": 1523433180, "last_edit_date": 1523435389, "question_id": 49769474, "link": "https://stackoverflow.com/questions/49769474/custom-malloc-in-c-segmentation-fault", "title": "Custom Malloc in C - segmentation fault", "body": "<p>I am trying to make the malloc() function using best-fit allocation. I used a doubly linked list to implement data structures of the memory blocks. </p>\n\n<p>Each block is composed of header and data. But my program keeps giving me a segmentation fault (core dumped) when I run it. </p>\n\n<p>Part of my code is as follows:</p>\n\n<pre><code>typedef struct Node{ \n    unsigned int size; \n    int flag; // free is 1 and used is 0\n    struct Node* next;\n    struct Node* prev; \n}Node;\n\nNode* head = NULL;\nNode* tail = NULL;\n\nNode* find_best_fit(unsigned int size){\n    size += sizeof(Node);\n    Node* curr;\n    curr = head;\n    Node* best_fit = NULL;\n    while (curr != NULL){\n        if((curr-&gt;flag) &amp;&amp; (curr-&gt;size &gt;= size) &amp;&amp; (best_fit == NULL || curr-&gt;size &lt; best_fit-&gt;size)){\n            best_fit = curr;\n            if(best_fit-&gt;size == size){\n                break;\n            }\n        }\n        curr = curr-&gt;next;\n    }\n    return best_fit;\n}\n\n\nvoid* my_malloc(unsigned int size)\n{\n    if(size == 0)\n        return NULL;\n\n    Node* best = NULL;\n    Node* current_node = NULL;\n    Node* temp_node = NULL;\n    Node* rem = NULL;\n\n    if(head == NULL){\n        head = (Node*)sbrk(size + sizeof(Node));\n        head-&gt;flag = 0;\n        head-&gt;prev = NULL;\n        head-&gt;next = NULL;\n        head-&gt;size = size;\n        tail = head;\n        return (head + sizeof(Node));\n    } else{\n        best = find_best_fit(size);\n        if(best == NULL){\n            current_node = (Node*)sbrk(size + sizeof(Node));\n            temp_node-&gt;prev = tail;\n            temp_node-&gt;next = NULL;\n            temp_node-&gt;size = size + sizeof(Node);\n            temp_node-&gt;flag = 0;\n            current_node = temp_node;\n            tail-&gt;next = current_node;\n            tail = current_node;\n            return (void*)(current_node + sizeof(Node));\n        } else{\n            current_node = (Node*)(best+size);\n            rem-&gt;size = best-&gt;size - size - sizeof(Node);\n            rem-&gt;flag = 1;\n            rem-&gt;next = best-&gt;next;\n            rem-&gt;prev = best;\n            current_node = rem;\n            current_node-&gt;next-&gt;prev = current_node;\n            best-&gt;size = size + sizeof(Node);\n            best-&gt;flag = 0;\n            best-&gt;next = current_node;\n            return (void*)(best + sizeof(Node));\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "recursion", "binary", "bit"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1523432665, "post_id": 49769161, "comment_id": 86553600, "body": "There is one idea."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523432668, "post_id": 49769161, "comment_id": 86553602, "body": "Since you want the most significant bits first, you call the function recursively (with <code>n-1</code>) and then print the <code>n</code>th bit.  The base case is <code>n == 0</code>, of course."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1523432731, "post_id": 49769161, "comment_id": 86553644, "body": "ofc that function doesn&#39;t handle leading zeroes..."}, {"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1523433547, "post_id": 49769161, "comment_id": 86554103, "body": "@AnttiHaapala I have an answer but can not post it, because it is marked as a duplicate (mine is with leading zeroes). In my opinion, it is not a duplicate question."}, {"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "edited": false, "score": 1, "creation_date": 1523434020, "post_id": 49769161, "comment_id": 86554378, "body": "I will post my answer at the duplicated question."}], "owner": {"reputation": 21, "user_id": 9629026, "user_type": "registered", "profile_image": "https://graph.facebook.com/1600820540038443/picture?type=large", "display_name": "Ode To Sleep", "link": "https://stackoverflow.com/users/9629026/ode-to-sleep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1523432632, "answer_count": 0, "score": 1, "last_activity_date": 1523432930, "creation_date": 1523432188, "last_edit_date": 1523432930, "question_id": 49769161, "link": "https://stackoverflow.com/questions/49769161/c-program-to-print-all-bits-allocated-for-given-variable-using-recursion", "closed_reason": "Duplicate", "title": "C program to print all bits allocated for given variable, using Recursion", "body": "<p>I was wondering what would a recursive function that prints all bits of the given variable (can be <code>char</code>, <code>int</code>, <code>long</code>, ...). </p>\n\n<p>Since char allocates 8 bits for a variable, I need to print a total of 8 bits. For example, if the input is <code>5</code>, the function should print <code>00000101</code>. </p>\n\n<p>I can only come up with iterative function for the same purpose, and it looks like this:</p>\n\n<pre><code>void print_bit_iter(char x, int n)\n{\n    int i, bit;\n    for(i=n-1; i&gt;=0; i--)\n    {\n        bit = (x &amp; (1 &lt;&lt; i)) != 0;\n        printf(\"%d\", bit);\n    }\n}\n</code></pre>\n\n<ul>\n<li>The existing question doesn't print preceding zeroes...</li>\n</ul>\n"}, {"tags": ["c", "pointers", "strcpy"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1523430290, "post_id": 49768478, "comment_id": 86552238, "body": "Just skimming through this I would think that <code>strcpy(&amp;(pointer2-&gt;opcode_CHAR[j]), temp_array);</code> should do the trick. Which should be the same as <code>strcpy(pointer2-&gt;opcode_CHAR+j, temp_array);</code>"}, {"owner": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1523430960, "post_id": 49768478, "comment_id": 86552615, "body": "@KamiKaze yep worked, clever. one forget sometimes that <code>-&gt;</code> is <code>*.</code> please answer it."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1523431447, "post_id": 49768478, "comment_id": 86552881, "body": "<code>var-&gt;</code> is <code>(*var).</code> to be precise. Then again it should be the same as <code>*var.</code> but I don&#39;t take chances with operator priority"}], "answers": [{"tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": true, "score": 1, "last_activity_date": 1523433307, "last_edit_date": 1523433307, "creation_date": 1523432257, "answer_id": 49769180, "question_id": 49768478, "link": "https://stackoverflow.com/questions/49768478/how-to-copy-array-src-to-destination-array-starting-at-certain-index-at-destin/49769180#49769180", "title": "How to copy array_src TO&gt; destination_array, starting at certain index at destination? ( using strcpy() )", "body": "<p><code>strcpy</code> expects two pointers.</p>\n\n<p><code>opcode_CHAR[j]</code> is equivalent to <code>*(opcode_CHAR+j)</code> which is the value not the pointer. </p>\n\n<p>This is why <code>pointer2-&gt;opcode_CHAR = pointer2-&gt;opcode_CHAR[j];</code> did not work you assigned a value to pointer to the array. Luckily the compiler should tell you that the array is read only, because this would have made a big mess if you would have tried to access the array afterwards.</p>\n\n<p>To get the pointer to the value you want you can do <code>opcode_CHAR+j</code> as you suggested or <code>&amp;opcode_CHAR[j]</code> which I prefer because it is more obvious.</p>\n\n<p>You obviously have to get the atribute out of the struct so you have to get to the array before dereferencing:</p>\n\n<p><code>&amp;(pointer2-&gt;opcode_CHAR[j])</code></p>\n\n<p>So the complete call would be.</p>\n\n<p><code>strcpy(pointer2-&gt;opcode_CHAR+j, temp_array);</code></p>\n\n<p>or </p>\n\n<p><code>strcpy(&amp;(pointer2-&gt;opcode_CHAR[j]), temp_array);</code></p>\n\n<p>Please make sure that your char array is zero-terminated on <code>opcode_CHAR[5]</code></p>\n"}], "owner": {"reputation": 165, "user_id": 7757916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-XCG0krkopU8/AAAAAAAAAAI/AAAAAAAAADE/1teDtVLbDVk/photo.jpg?sz=128", "display_name": "topcat", "link": "https://stackoverflow.com/users/7757916/topcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 49769180, "answer_count": 1, "score": 0, "last_activity_date": 1523437357, "creation_date": 1523429968, "last_edit_date": 1523437357, "question_id": 49768478, "link": "https://stackoverflow.com/questions/49768478/how-to-copy-array-src-to-destination-array-starting-at-certain-index-at-destin", "title": "How to copy array_src TO&gt; destination_array, starting at certain index at destination? ( using strcpy() )", "body": "<p>A <code>struct node</code> containing <code>{... char opcode_CHAR[6]; }</code></p>\n\n<p>a pointer declared <code>struct node *pointer2</code> pointing to a node of that struct kind;</p>\n\n<p>got a <code>char temp_array[6]</code>.</p>\n\n<pre><code>j = 6 - sizeof(temp_array);\n</code></pre>\n\n<p>So depending on the <code>sizeof(temp_array)</code>,\nI will copy to a certain index <code>j</code> of <code>opcode_CHAR</code>.<br>\nIf <code>sizeof(temp_array) == 4</code> ill copy to <code>opcode_CHAR</code> starting with <code>j = 2;</code><br>\nIf <code>sizeof(temp_array) == 2</code> ill copy to <code>opcode_CHAR</code> starting with <code>j = 4;</code> etc...)</p>\n\n<p>I am getting a compilation warning:  </p>\n\n<blockquote>\n  <p>warning: passing argument 1 of 'strcmp' makes pointer from integer\n  without a cast [-Wint-conversion]</p>\n</blockquote>\n\n<p>because of this: <code>strcpy(pointer2-&gt;opcode_CHAR[j], temp_array);</code></p>\n\n<p>I tried <code>pointer2-&gt;opcode_CHAR = pointer2-&gt;opcode_CHAR[j];</code> before the <code>strcpy(pointer2-&gt;opcode_CHAR, temp_array);</code> so that it points to the index <code>j</code> that I want, instead of the start of the array. But it did not work.</p>\n\n<p>should I just add <code>j</code> like this? <code>strcpy(pointer2-&gt;opcode_CHAR+j, temp_array);</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1523429824, "post_id": 49768318, "comment_id": 86551985, "body": "What isn&#39;t working? the call of the function? the function itself?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1523429882, "post_id": 49768318, "comment_id": 86552016, "body": "Your <code>printf</code>call is very odd indeed. Study the documentation. Start from &quot;Hello World&quot;, and work up from there."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1523429925, "post_id": 49768318, "comment_id": 86552037, "body": "@Bathsheba <code>scanf</code>you mean?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1523429953, "post_id": 49768318, "comment_id": 86552052, "body": "@Yunnosch: Maybe both then ;-)"}, {"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 1, "creation_date": 1523430103, "post_id": 49768318, "comment_id": 86552123, "body": "Maybe a correct usage of printf ? <code>printf(&quot;Sum of vectors is: (%d,%d)&quot;, vectorSumX, vectorSumY);</code>"}, {"owner": {"reputation": 628, "user_id": 8939165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gchW.jpg?s=128&g=1", "display_name": "Fabio_MO", "link": "https://stackoverflow.com/users/8939165/fabio-mo"}, "edited": false, "score": 0, "creation_date": 1523430110, "post_id": 49768318, "comment_id": 86552128, "body": "The format specifiers of all the <code>scanf()</code> in wrong"}, {"owner": {"reputation": 1, "user_id": 9628881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I8niNmrwmQk/AAAAAAAAAAI/AAAAAAAAAAk/qoQoa0ahGS8/photo.jpg?sz=128", "display_name": "Branson M", "link": "https://stackoverflow.com/users/9628881/branson-m"}, "reply_to_user": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1523430293, "post_id": 49768318, "comment_id": 86552240, "body": "Well at the moment when i press any of the keys that would call one of the function it just resets and runs the default within the switch statement @Cid"}, {"owner": {"reputation": 1, "user_id": 9628881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I8niNmrwmQk/AAAAAAAAAAI/AAAAAAAAAAk/qoQoa0ahGS8/photo.jpg?sz=128", "display_name": "Branson M", "link": "https://stackoverflow.com/users/9628881/branson-m"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1523430305, "post_id": 49768318, "comment_id": 86552248, "body": "@Bathsheba in what way is it odd?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1523430358, "post_id": 49768318, "comment_id": 86552279, "body": "Well, the second argument will be ignored in <code>printf(&quot;,&quot;, &amp;vectorSumY)</code> for starters."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523430386, "post_id": 49768318, "comment_id": 86552296, "body": "you should <code>scanf(&quot;%d %d&quot;, &amp;x, &amp;y);</code>. If it still does not work, clearly explain how you test your program and what is not working."}, {"owner": {"reputation": 1, "user_id": 9628881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I8niNmrwmQk/AAAAAAAAAAI/AAAAAAAAAAk/qoQoa0ahGS8/photo.jpg?sz=128", "display_name": "Branson M", "link": "https://stackoverflow.com/users/9628881/branson-m"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1523431062, "post_id": 49768318, "comment_id": 86552663, "body": "@Bathsheba thank you for feedback but the main problem is when i build and run the program and input for the choice even if i select 1 it results back to default"}, {"owner": {"reputation": 1, "user_id": 9628881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I8niNmrwmQk/AAAAAAAAAAI/AAAAAAAAAAk/qoQoa0ahGS8/photo.jpg?sz=128", "display_name": "Branson M", "link": "https://stackoverflow.com/users/9628881/branson-m"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523431094, "post_id": 49768318, "comment_id": 86552684, "body": "@GillesGouaillardet I am testing the program simply by building it and running it, sorry still new to this so not very good at trouble shooting"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 8720012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/039247b3d75cbd0c9512adc4f25413c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/8720012/bharadwaj"}, "edited": false, "score": 0, "creation_date": 1523430193, "post_id": 49768462, "comment_id": 86552176, "body": "See now ! I didn&#39;t see it at all !"}, {"owner": {"reputation": 143, "user_id": 8720012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/039247b3d75cbd0c9512adc4f25413c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/8720012/bharadwaj"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523430263, "post_id": 49768462, "comment_id": 86552223, "body": "Hmm I am new to this portal ! Just thought of helping !"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523430313, "post_id": 49768462, "comment_id": 86552252, "body": "You and your help are welcome. You will get the hang of things. Taking the <a href=\"https://stackoverflow.com/tour\">tour</a> might help. Have fun."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1523430485, "post_id": 49768462, "comment_id": 86552353, "body": "This is a tough site and all answers subject to peer review. It can be quite discouraging at first, but it does keep the quality of the answers high which is what makes this site so successful. Good luck!"}], "tags": [], "owner": {"reputation": 143, "user_id": 8720012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/039247b3d75cbd0c9512adc4f25413c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/8720012/bharadwaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1523430403, "last_edit_date": 1523430403, "creation_date": 1523429910, "answer_id": 49768462, "question_id": 49768318, "link": "https://stackoverflow.com/questions/49768318/calling-functions-using-a-switch-statement-isnt-working/49768462#49768462", "title": "Calling functions using a switch statement isnt working", "body": "<pre><code>&amp;vectorSumX \n</code></pre>\n\n<p>will give you the address of the variable vectorSumX ! You didnt use any placeholders to give the answer ! Instead you should have used </p>\n\n<pre><code>printf(\"Please input Vector 1 X and Y coordinate separated by a space: \");\nscanf(\"%d,%d\", &amp;coordinateX1, &amp;coordinateY1);\nprintf(\"Please input Vector 2 X and Y coordinate separated by a space: \");\nscanf(\"%d,%d\", &amp;coordinateX2, &amp;coordinateY2);\nint vectorSumX = coordinateX1 + coordinateX2;\nint vectorSumY = coordinateY1 + coordinateY2;\nprintf(\"Sum of vectors is: (\");\nprintf(\"%d\", vectorSumX);\nprintf(\",\");printf(\"%d\",vectorSumY);\nprintf(\")\");\n</code></pre>\n\n<p>in function to get the answer !</p>\n"}], "owner": {"reputation": 1, "user_id": 9628881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I8niNmrwmQk/AAAAAAAAAAI/AAAAAAAAAAk/qoQoa0ahGS8/photo.jpg?sz=128", "display_name": "Branson M", "link": "https://stackoverflow.com/users/9628881/branson-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1524491992, "answer_count": 1, "score": -3, "last_activity_date": 1523430403, "creation_date": 1523429410, "question_id": 49768318, "link": "https://stackoverflow.com/questions/49768318/calling-functions-using-a-switch-statement-isnt-working", "closed_reason": "Not suitable for this site", "title": "Calling functions using a switch statement isnt working", "body": "<p>I am new to writing in c and I am attempting to use switch statement to call function according to an input. Not sure as to why this isn't working. Sorry if this is posted in the wrong place or has already been answered but I couldn't find anything.</p>\n\n<pre><code>    int choice;\n\nprintf(\"---Menu---\\n\");\n\nprintf(\"1 Add Two Vectors\\n\");\n\nprintf(\"2 Subtract Two Vectors\\n\");\n\nprintf(\"3 Calculate Euclian Distance\\n\");\n\nprintf(\"4 Exit The Program\\n\");\nprintf(\"  Please select an option (1, 2, 3, or 4): \");\nscanf(\"&amp;d\", &amp;choice);\n\nswitch (choice){\ncase 1: \naddVectors();\n    break;\ncase 2: \nsubVectors();\n    break;\ncase 3: \neuclianDistance();\n    break;\n</code></pre>\n\n<p>/*this is the function being called */</p>\n\n<pre><code>printf(\"Please input Vector 1 X and Y coordinate separated by a space: \");\n    scanf(\"&amp;d\", \"&amp;d\", &amp;coordinateX1, &amp;coordinateY1);\nprintf(\"Please input Vector 2 X and Y coordinate separated by a space: \");\n    scanf(\"&amp;d\", \"&amp;d\", &amp;coordinateX2, &amp;coordinateY2);\nvectorSumX = coordinateX1 + coordinateX2;\nvectorSumY = coordinateY1 + coordinateY2;\nprintf(\"Sum of vectors is: (\", &amp;vectorSumX), printf(\",\", &amp;vectorSumY), printf(\")\");\n\nreturn 0;\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "math", "time-complexity", "modulo"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1523429728, "post_id": 49768253, "comment_id": 86551928, "body": "This is still a programming question (not off-topic in my opinion) but help  you will find in math."}, {"owner": {"reputation": 3851, "user_id": 3204335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176c9587e46ab24fd70f92c1625f9801?s=128&d=identicon&r=PG&f=1", "display_name": "MD Ruhul Amin", "link": "https://stackoverflow.com/users/3204335/md-ruhul-amin"}, "edited": false, "score": 0, "creation_date": 1523429732, "post_id": 49768253, "comment_id": 86551931, "body": "what is the initial value of count? Here M is constant i...N is also known. Now the whole things depend on the initial value of count."}, {"owner": {"reputation": 61, "user_id": 9491659, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/341117489607698/picture?type=large", "display_name": "Utkarsh Pandey", "link": "https://stackoverflow.com/users/9491659/utkarsh-pandey"}, "reply_to_user": {"reputation": 3851, "user_id": 3204335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176c9587e46ab24fd70f92c1625f9801?s=128&d=identicon&r=PG&f=1", "display_name": "MD Ruhul Amin", "link": "https://stackoverflow.com/users/3204335/md-ruhul-amin"}, "edited": false, "score": 0, "creation_date": 1523429835, "post_id": 49768253, "comment_id": 86551991, "body": "@ruhul initial value of count is a one digit integer. N is a variable 2&lt;=N&lt;=10^18"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1523431381, "post_id": 49768253, "comment_id": 86552847, "body": "<a href=\"https://en.wikipedia.org/wiki/Exponentiation#Efficient_computation_with_integer_exponents\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1523433157, "post_id": 49769086, "comment_id": 86553895, "body": "<a href=\"https://stackoverflow.com/questions/20971888/modular-multiplication-of-large-numbers-in-c?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\" title=\"modular multiplication of large numbers in c\">stackoverflow.com/questions/20971888/&hellip;</a>"}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1523434707, "post_id": 49769086, "comment_id": 86554791, "body": "To multiply a*b, first calculate a*b/2 then add it twice. For calculating a*b/2 calculate a*b/4 and so on. That is why. I use this in online coding, so it is correct and verified a lot of times."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1523435318, "post_id": 49769086, "comment_id": 86555148, "body": "The original problem calculates &quot;x * 10^(N-1) % M&quot;. Since N could be very large, say 10^18, b in &quot;((a^b)%mod)&quot; could be as large as 10^(10^18-1), which can&#39;t be saved by a <code>long long</code> int."}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "edited": false, "score": 0, "creation_date": 1523435406, "post_id": 49769086, "comment_id": 86555191, "body": "That&#39;s why I wrote power function."}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "edited": false, "score": 0, "creation_date": 1523435851, "post_id": 49769086, "comment_id": 86555499, "body": "Yeah!!!!!!!!!!! For multiplication in case count is also a large number."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1523436050, "post_id": 49769086, "comment_id": 86555633, "body": "@AbhishekKeshri Sorry just not patient enough to read the details :P maybe neither do other people ..."}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "edited": false, "score": 0, "creation_date": 1523436098, "post_id": 49769086, "comment_id": 86555668, "body": "No problem, hope you understood finally :)"}, {"owner": {"reputation": 3851, "user_id": 3204335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176c9587e46ab24fd70f92c1625f9801?s=128&d=identicon&r=PG&f=1", "display_name": "MD Ruhul Amin", "link": "https://stackoverflow.com/users/3204335/md-ruhul-amin"}, "edited": false, "score": 0, "creation_date": 1523436846, "post_id": 49769086, "comment_id": 86556145, "body": "<code>Any way to reduce the time complexity?</code> does your answer, answer this question? O(n) to O(1) ?"}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "edited": false, "score": 0, "creation_date": 1523437000, "post_id": 49769086, "comment_id": 86556266, "body": "It has reduced it to O(log n). Have mentioned it in the answer. See that."}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "edited": false, "score": 0, "creation_date": 1523438161, "post_id": 49769086, "comment_id": 86557132, "body": "e.g. - a^2 = (a^(2/2))*(a^(2/2)) but a^3 = a*(a^(2/2))*(a^(2/2))"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 61, "user_id": 9491659, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/341117489607698/picture?type=large", "display_name": "Utkarsh Pandey", "link": "https://stackoverflow.com/users/9491659/utkarsh-pandey"}, "edited": false, "score": 0, "creation_date": 1523438501, "post_id": 49769086, "comment_id": 86557369, "body": "@UtkarshPandey He has implemented the fast exponentiation algorithm described in the page linked by Oliver Charlesworth: <a href=\"https://en.wikipedia.org/wiki/Exponentiation#Efficient_computation_with_integer_exponents\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "is_accepted": true, "score": 3, "last_activity_date": 1523432701, "last_edit_date": 1523432701, "creation_date": 1523431999, "answer_id": 49769086, "question_id": 49768253, "link": "https://stackoverflow.com/questions/49768253/how-can-i-reduce-the-time-complexity-of-the-following-loop/49769086#49769086", "title": "How can I reduce the time complexity of the following loop?", "body": "<p>The question is basically:</p>\n\n<blockquote>\n  <p>(count*a^b)%mod = ((count%mod)*((a^b)%mod))%mod</p>\n</blockquote>\n\n<p>a = 10, b = 10^18</p>\n\n<p>You can find ((a^b)%mod) using:</p>\n\n<pre><code>long long power(long long x, long long y, long long p)\n{\n    long long res = 1;      // Initialize result\n\n    x = x % p;  // Update x if it is more than or \n                // equal to p\n\n    while (y &gt; 0)\n    {\n        // If y is odd, multiply x with result\n        if (y &amp; 1)\n            res = (res*x) % p;\n\n        // y must be even now\n        y = y&gt;&gt;1; // y = y/2\n        x = (x*x) % p;  \n    }\n    return res;\n}\n</code></pre>\n\n<p>Time Complexity of the power function is O(log y).</p>\n\n<p>In your case count is a 1-digit number so we can simply multiply this with (count%mod), and finally take mod of the result. If count is a big number too, and can cause overflow then we can do:</p>\n\n<pre><code>long long mulmod(long long a, long long b, long long mod)\n{\n    long long res = 0; // Initialize result\n    a = a % mod;\n    while (b &gt; 0)\n    {\n        // If b is odd, add 'a' to result\n        if (b % 2 == 1)\n            res = (res + a) % mod;\n\n        // Multiply 'a' with 2\n        a = (a * 2) % mod;\n\n        // Divide b by 2\n        b /= 2;\n    }\n\n    // Return result\n    return res % mod;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9491659, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/341117489607698/picture?type=large", "display_name": "Utkarsh Pandey", "link": "https://stackoverflow.com/users/9491659/utkarsh-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 49769086, "answer_count": 1, "score": 0, "last_activity_date": 1523432701, "creation_date": 1523429157, "last_edit_date": 1523430255, "question_id": 49768253, "link": "https://stackoverflow.com/questions/49768253/how-can-i-reduce-the-time-complexity-of-the-following-loop", "title": "How can I reduce the time complexity of the following loop?", "body": "<pre><code>for(i=0;i&lt;N-2;i++)\n       count=(count*10)%M;\n</code></pre>\n\n<p>Here, N can be upto 10^18 and M is (10^9 +7). Since this loop takes O(n) time to execute, I get TLE in my code. Any way to reduce the time complexity?</p>\n"}, {"tags": ["c", "parsing", "gcc", "c99"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1523427717, "post_id": 49767819, "comment_id": 86550913, "body": "Only guessing, so not as an answer: You might have to stay away from anything looking like a float. I think your code piece fits in this <a href=\"http://en.cppreference.com/w/cpp/language/floating_literal\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/floating_literal</a>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1523427983, "post_id": 49767819, "comment_id": 86551053, "body": "MS documentation, but I think it should be generally applicable to gcc and it has lots of examples:  <a href=\"https://msdn.microsoft.com/en-us/library/w9bk1wcy.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/w9bk1wcy.aspx</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1523429222, "post_id": 49767819, "comment_id": 86551668, "body": "Here&#39;s an answer which mentions this odd corner of the language: <a href=\"https://stackoverflow.com/a/41701152/1566221\">stackoverflow.com/a/41701152/1566221</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1523430613, "post_id": 49767819, "comment_id": 86552425, "body": "Apparently this is the reason for the error <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=3885\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=3885</a>. See C11 6.4.8. I don&#39;t know enough of these obscure things to write an answer though."}, {"owner": {"reputation": 745, "user_id": 2086096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qErCv.jpg?s=128&g=1", "display_name": "Baard", "link": "https://stackoverflow.com/users/2086096/baard"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1523431022, "post_id": 49767819, "comment_id": 86552645, "body": "@Lundin, I thought translation phase 7 was covered by the preprocessor? Bug or not, this was not my question. I only try to find a good way to write such a sum as 0x4e+33. It seems a bit over the top to write (0x4e)+33, so probably rici is right, whitespace <i>is</i> the convention."}, {"owner": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "edited": false, "score": 0, "creation_date": 1523438410, "post_id": 49767819, "comment_id": 86557300, "body": "You already rely on whitespace to get around things like <code>*p = 2; x = x&#47;*p;</code>. This shouldn&#39;t be any different."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1523440032, "post_id": 49767819, "comment_id": 86558453, "body": "@Baard Fine, I posted an answer that covers the actual question, rather than the reason why."}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1523456240, "post_id": 49767819, "comment_id": 86570087, "body": "Just another suggestion, because it seems nobody else has mentioned it - you could rewrite it as <code>2+0xe</code> to avoid the ambiguity. Whitespace would still be good, but it&#39;s not mandatory in this case..."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1523466882, "post_id": 49767819, "comment_id": 86577233, "body": "@Baard Translation phases 1 through 4 are definitely part of the preprocessor, and translation phase 7 is definitely part of the compiler proper.  Phases 5 and 6 could be either, but <i>historically</i>, in implementations where the preprocessor and the compiler proper were two separate programs, they were part of the compiler proper.  Phase 8 is the linker."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1523466956, "post_id": 49767819, "comment_id": 86577282, "body": "@Baard Most modern C compilers implement phases 1 through 7 all in one program, but you can still usefully draw a line right after phase 4 because that&#39;s the phase in which preprocessing directives are executed."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1523428213, "post_id": 49767895, "comment_id": 86551151, "body": "There seems to be a bug in the gcc message &quot;error: invalid suffix on integer constant&quot;. If 0xe was an integer constant then gcc shouldn&#39;t complain."}, {"owner": {"reputation": 745, "user_id": 2086096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qErCv.jpg?s=128&g=1", "display_name": "Baard", "link": "https://stackoverflow.com/users/2086096/baard"}, "edited": false, "score": 0, "creation_date": 1523429066, "post_id": 49767895, "comment_id": 86551583, "body": "I understand <i>why</i> the compilation fails, this is clearly stated in ISO/IEC 9899:201x clause 6.4.4.2.  My question is if there is a programming convention to use to get around reliance on white-space in a sum of constants with mixed types."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 745, "user_id": 2086096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qErCv.jpg?s=128&g=1", "display_name": "Baard", "link": "https://stackoverflow.com/users/2086096/baard"}, "edited": false, "score": 6, "creation_date": 1523429271, "post_id": 49767895, "comment_id": 86551691, "body": "@baard: whitespace <i>is</i> the convention."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 745, "user_id": 2086096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qErCv.jpg?s=128&g=1", "display_name": "Baard", "link": "https://stackoverflow.com/users/2086096/baard"}, "edited": false, "score": 1, "creation_date": 1523429511, "post_id": 49767895, "comment_id": 86551805, "body": "@Baard It is actually impossible to understand why compilation fails by reading chapter 6.4.4 alone."}, {"owner": {"reputation": 2105, "user_id": 8718773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34213fbac0a5b09b9ff8abe458e6b87a?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Alzetta", "link": "https://stackoverflow.com/users/8718773/giacomo-alzetta"}, "reply_to_user": {"reputation": 745, "user_id": 2086096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qErCv.jpg?s=128&g=1", "display_name": "Baard", "link": "https://stackoverflow.com/users/2086096/baard"}, "edited": false, "score": 1, "creation_date": 1523439064, "post_id": 49767895, "comment_id": 86557775, "body": "@Baard What did whitespace do to you? The only disadvantage I can see of using whitespace is if you are using an IDE with buggy formatting, and you configure it to remove spaces around operators and format the file. A good IDE will not remove space where it is necessary, as in this case, a bad one will just apply the rule and cause an error (but the error is immediately identified and fixed easily so it&#39;s not a big deal...). However parenthesis can fail for the same reason: when asked to remove unnecessary parenthesis if it does not take into account this special case you are screwed again."}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1523441061, "post_id": 49767895, "comment_id": 86559235, "body": "Why would <code>0x...e+N</code> be interpreted as a floating-point number? Hexfloat literals (since C++17 or GNU++98) use <code>p</code> or <code>P</code> to indicate beginning of exponent, so this explanation doesn&#39;t seem complete."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1523452809, "post_id": 49767895, "comment_id": 86567477, "body": "@Lundin &quot;0xe&quot; is a valid integer constant, with no suffix. &quot;0xeL&quot; is a valid integer constant with a valid suffix, &quot;L&quot;.  It is not <i>that</i> much of a stretch to describe &quot;0xe+2&quot; as the integer constant &quot;0xe&quot; again, but with the <i>invalid</i> suffix &quot;+2&quot;. I agree that the error message could be better, though."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1523453444, "post_id": 49767895, "comment_id": 86567979, "body": "@zwol After digging deeper into this, the issue seems to be that gcc doesn&#39;t know what it is parsing at that point. It is trying to build up a &quot;token&quot; such as a constant, which in turn consists of &quot;preprocessing-token&quot;. The pre-processor fails to build up the &quot;preprocessing-token&quot; called &quot;pp-number&quot; and then gcc gives this error message when the pp-number can&#39;t be translated to a valid token. This happens at an earlier point before it can deduct what kind of constant it is dealing with. So I suppose it should rather be saying something like &quot;invalid suffix +2 on constant&quot;."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1523454426, "post_id": 49767895, "comment_id": 86568728, "body": "@Lundin That&#39;s close but not quite correct.  <code>0xe+2</code> is a <i>valid</i> &quot;pp-number&quot; &quot;preprocessing token&quot;, but then in translation phase 7, each &quot;preprocessing token&quot; is required to be converted to a <i>single</i> &quot;token&quot;, and that process fails. (I&#39;m not sure where this requirement is stated besides the list of translation phases in 5.1.1.2, but 5.1.1.2 is normative, so.)"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1523458015, "post_id": 49767895, "comment_id": 86571444, "body": "Yes, probably a &quot;correcter&quot; version of the error message would be &quot;preprocessing number is not a valid integer or floating point constant&quot;. I am not sure that this would be easier to understand, though."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 20, "last_activity_date": 1523427808, "creation_date": 1523427808, "answer_id": 49767895, "question_id": 49767819, "link": "https://stackoverflow.com/questions/49767819/conventions-to-write-simple-additions-of-hexadecimal-and-decimal-numbers/49767895#49767895", "title": "Conventions to write simple additions of hexadecimal and decimal numbers", "body": "<p>Because GCC thinks that <code>0xe+2</code> is a floating point number, while this is just an addition of two integers.</p>\n\n<p>According to <a href=\"http://en.cppreference.com/w/c/language/integer_constant\" rel=\"noreferrer\">cppreference</a>:</p>\n\n<blockquote>\n  <p>Due to maximal munch, <strong>hexadecimal integer constants ending in <code>e</code> and <code>E</code>,\n  when followed by the operators <code>+</code> or <code>-</code>, must be separated from the\n  operator with whitespace or parentheses</strong> in the source:</p>\n\n<pre><code>int x = 0xE+2;   // error\nint y = 0xa+2;   // OK\nint z = 0xE +2;  // OK\nint q = (0xE)+2; // OK\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1523442147, "post_id": 49771790, "comment_id": 86559948, "body": "This doesn&#39;t seem to explain why <code>0xE+3</code> could constitute a preprocessing token, but <code>0xF+3</code> couldn&#39;t."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 1, "creation_date": 1523444291, "post_id": 49771790, "comment_id": 86561366, "body": "@Ruslan No, because this only answers the question. The reason why has to do with the maximum munch rule and the rather blunt <i>pp-number</i> syntax in 6.4.8, where the standard apparently does not make any difference between integer constants and floating point constants. The longest valid token sequence here is <i>pp-number</i> <b>e</b> <i>sign</i>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1523444620, "post_id": 49771790, "comment_id": 86561587, "body": "I added that part to the answer too."}, {"owner": {"reputation": 116, "user_id": 7581343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b87be8977cdad5dcc9bbd44f9d4abc?s=128&d=identicon&r=PG&f=1", "display_name": "wrtlprnft", "link": "https://stackoverflow.com/users/7581343/wrtlprnft"}, "edited": false, "score": 1, "creation_date": 1523447066, "post_id": 49771790, "comment_id": 86563240, "body": "Another example of \u201creasonable\u201d code that requires spaces: <code>val&#47;*ptr</code>. These things can also be fixed with parentheses if one does not like spaces. <code>-(--a)</code> may be considered more readable than <code>- --a</code>, even though they&#39;re both kind of awful."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116, "user_id": 7581343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b87be8977cdad5dcc9bbd44f9d4abc?s=128&d=identicon&r=PG&f=1", "display_name": "wrtlprnft", "link": "https://stackoverflow.com/users/7581343/wrtlprnft"}, "edited": false, "score": 0, "creation_date": 1523452334, "post_id": 49771790, "comment_id": 86567134, "body": "@wrtlprnft There&#39;s a lot of ways to make the parser happy, but that doesn&#39;t mean they are convention. You could also write <code>val&#47;&amp;ptr[0]</code> or <code>val&#47;+*ptr;</code> or <code>-+--a</code> but that&#39;s obfuscation. Using spaces is the most readable way."}, {"owner": {"reputation": 116, "user_id": 7581343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b87be8977cdad5dcc9bbd44f9d4abc?s=128&d=identicon&r=PG&f=1", "display_name": "wrtlprnft", "link": "https://stackoverflow.com/users/7581343/wrtlprnft"}, "edited": false, "score": 0, "creation_date": 1523453073, "post_id": 49771790, "comment_id": 86567687, "body": "Obviously, this is all a matter of preference. Do you have any sources why whitespace is <i>the</i> convention? Personally, I would consider putting a space between a unary operator and its operand an obfuscation because that makes it look like a binary operator."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116, "user_id": 7581343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b87be8977cdad5dcc9bbd44f9d4abc?s=128&d=identicon&r=PG&f=1", "display_name": "wrtlprnft", "link": "https://stackoverflow.com/users/7581343/wrtlprnft"}, "edited": false, "score": 0, "creation_date": 1523453963, "post_id": 49771790, "comment_id": 86568359, "body": "@wrtlprnft As quoted in this answer, the standard itself says that pre-processing tokens are separated by white space (or comments). Meaning that white space is the only universal way that is guaranteed to always work. Using various operators as in the various examples in the comments above is not an universal solution, since using those may either form one or several pre-processing tokens."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1523566721, "post_id": 49771790, "comment_id": 86626295, "body": "Is there any practical advantage to having the preprocessor regard 1E+3 as a single token, versus having the compiler regard 1E as a &quot;number expecting signed exponent&quot; token?  Once a digit is encountered, scanning until the next thing that isn&#39;t an alphanumeric character or period seems easier than having to exclude the two-character combinations [EePp][+-] from the exit conditions."}, {"owner": {"reputation": 4565, "user_id": 1968462, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6ef24851a32cb6519312916524da2586?s=128&d=identicon&r=PG", "display_name": "Kat", "link": "https://stackoverflow.com/users/1968462/kat"}, "edited": false, "score": 0, "creation_date": 1523908081, "post_id": 49771790, "comment_id": 86745613, "body": "As an aside, I&#39;m extremely curious what this <code>p</code> syntax is. I&#39;m used to seeing <code>e</code> as a power of ten multiplier, but never seen <code>p</code> before. Dug up a copy of the document but it said nothing beyond the quoted text (mind you, there was 500 pages, so I was only content to CTRL + F)."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 4565, "user_id": 1968462, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6ef24851a32cb6519312916524da2586?s=128&d=identicon&r=PG", "display_name": "Kat", "link": "https://stackoverflow.com/users/1968462/kat"}, "edited": false, "score": 0, "creation_date": 1525276552, "post_id": 49771790, "comment_id": 87295905, "body": "@Kat The <code>p</code> syntax is for hexadecimal floating point constants, e.g. <code>0x1.921fb54442d18p+1</code> is a <code>double</code>-precision approximation to \u03c0.  The standard doesn&#39;t explain why <code>p</code> is used, but it can&#39;t be <code>e</code> because <code>e</code> is a valid hexadecimal digit."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 13, "last_activity_date": 1525329315, "last_edit_date": 1525329315, "creation_date": 1523439986, "answer_id": 49771790, "question_id": 49767819, "link": "https://stackoverflow.com/questions/49767819/conventions-to-write-simple-additions-of-hexadecimal-and-decimal-numbers/49771790#49771790", "title": "Conventions to write simple additions of hexadecimal and decimal numbers", "body": "<blockquote>\n  <p>My question is whether a convention exists to write simple additions of hexadecimal and decimal numbers in C</p>\n</blockquote>\n\n<p>The convention is to use spaces. This is actually mandated by C11 6.4 \u00a73:</p>\n\n<blockquote>\n  <p>Preprocessing tokens can be separated by white space; this consists of\n  comments (described later), or white-space characters (space, horizontal tab, new-line, vertical tab, and form-feed), or both.</p>\n</blockquote>\n\n<p>Where plain space is the commonly used one.</p>\n\n<p>Similar exotic issues exist here and there in the language, some examples:</p>\n\n<ul>\n<li><code>---a</code> must be rewritten as <code>- --a</code>.</li>\n<li><code>a+++++b</code> must be rewritten as <code>a++ + ++b</code>.</li>\n<li><code>a /// comment</code><br>\n<code>b;</code><br>\nmust be rewritten as<br>\n<code>a / // comment</code><br>\n<code>b</code></li>\n</ul>\n\n<p>And so on. The culprit in all of these cases is the token parser which follows the so-called \"maximal munch rule\", C11 6.4 \u00a74:</p>\n\n<blockquote>\n  <p>If the input stream has been parsed into preprocessing tokens up to a given character, the\n  next preprocessing token is the longest sequence of characters that could constitute a\n  preprocessing token.</p>\n</blockquote>\n\n<p>In this specific case, the pre-processor does not make any distinction between floating point constants and integer constants, when it builds up a pre-processing token called <em>pp-number</em>, defined in C11 6.4.8:</p>\n\n<blockquote>\n  <p><em>pp-number</em> <strong>e</strong> sign<br>\n  <em>pp-number</em> <strong>E</strong> sign<br>\n  <em>pp-number</em> <strong>p</strong> sign<br>\n  <em>pp-number</em> <strong>P</strong> sign<br>\n  <em>pp-number</em> .  </p>\n  \n  <p>A preprocessing number begins with a digit optionally preceded by a period (.) and may\n  be followed by valid identifier characters and the character sequences e+, e-, E+, E-,\n  p+, p-, P+, or P-.</p>\n</blockquote>\n\n<p>Here, <em>pp-number</em> does apparently not have to be a floating point constant, as far as the pre-processor is concerned. </p>\n\n<hr>\n\n<p>( As a side note, a similar convention also exists when terminating hexadecimal escape sequences inside strings. If I for example want to print the string <code>\"ABBA\"</code> on a new line, then I can't write  </p>\n\n<p><code>puts(\"\\xD\\xABBA\");</code> (CR+LF+string)</p>\n\n<p>Because the string in this case could be interpreted as part of the hex escape sequence. Instead I have to use white space to end the escape sequence and then rely on pre-processor string concatenation: <code>puts(\"\\xD\\xA\" \"BBA\")</code>. The purpose is the same, to guide the pre-processor how to parse the code. )</p>\n"}], "owner": {"reputation": 745, "user_id": 2086096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qErCv.jpg?s=128&g=1", "display_name": "Baard", "link": "https://stackoverflow.com/users/2086096/baard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1348, "favorite_count": 2, "accepted_answer_id": 49771790, "answer_count": 2, "score": 23, "last_activity_date": 1525329315, "creation_date": 1523427555, "last_edit_date": 1523445663, "question_id": 49767819, "link": "https://stackoverflow.com/questions/49767819/conventions-to-write-simple-additions-of-hexadecimal-and-decimal-numbers", "title": "Conventions to write simple additions of hexadecimal and decimal numbers", "body": "<p>Even though an oldtimer, I fear I do not (anymore) have a complete grasp of parsing of constants in C. The second of the following 1-liners fails to compile:</p>\n\n<pre><code>int main( void ) { return (0xe +2); }\nint main( void ) { return (0xe+2); }\n</code></pre>\n\n<p>$ gcc -s weird.c </p>\n\n<pre><code>weird.c: In function \u2018main\u2019:\nweird.c:1:28: error: invalid suffix \"+2\" on integer constant\nint main( void ) { return (0xe+2); }\n                           ^\n</code></pre>\n\n<p>The reason for the compilation failure is probably that 0xe+2 is parsed as a hexadecimal floating point constant as per C11 standard clause 6.4.4.2. My question is whether a <em>convention</em> exists to write simple additions of hexadecimal and decimal numbers in C, I do not like to have to rely on white space in parsing.</p>\n\n<p>This was with gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.9). Stopping compiling after preprocessing (-E) show that the compilation failure happens in gcc not cpp.</p>\n"}, {"tags": ["c", "memory-management", "operating-system", "stack", "heap"], "comments": [{"owner": {"reputation": 16371, "user_id": 479251, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9870fa7c3f578b33976c7a770cbff4b2?s=128&d=identicon&r=PG", "display_name": "Pac0", "link": "https://stackoverflow.com/users/479251/pac0"}, "edited": false, "score": 4, "creation_date": 1523427143, "post_id": 49767687, "comment_id": 86550647, "body": "stack or heap belong to <i>processes</i>, not to <i>files</i>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1523478114, "post_id": 49767687, "comment_id": 86583106, "body": "Recommend  tagging with the OS of the <code>size</code> command.  What OS are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 16371, "user_id": 479251, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9870fa7c3f578b33976c7a770cbff4b2?s=128&d=identicon&r=PG", "display_name": "Pac0", "link": "https://stackoverflow.com/users/479251/pac0"}, "is_accepted": false, "score": 5, "last_activity_date": 1523477573, "last_edit_date": 1523477573, "creation_date": 1523427782, "answer_id": 49767887, "question_id": 49767687, "link": "https://stackoverflow.com/questions/49767687/why-the-size-command-didnt-list-a-stack-or-heap-segment-for-any-executable-or-o/49767887#49767887", "title": "Why the size command didn&#39;t list a stack or heap segment for any executable or object file?", "body": "<p>Heap and stack are applicable to <strong>processes</strong>, which are (often) executables files loaded by the OS into memory, not to files stored on the file system directly.</p>\n\n<p>Also, stack and heap size can vary during the lifetime of the process, so one could not, in general, predict how much stack or heap a certain executable file will take when loaded as a process.</p>\n\n<p>This is why a command like <code>size</code> is not designed to show such information in addition to the size of code / data in the file itself.</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 8720012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/039247b3d75cbd0c9512adc4f25413c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/8720012/bharadwaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1523429200, "creation_date": 1523429200, "answer_id": 49768265, "question_id": 49767687, "link": "https://stackoverflow.com/questions/49767687/why-the-size-command-didnt-list-a-stack-or-heap-segment-for-any-executable-or-o/49768265#49768265", "title": "Why the size command didn&#39;t list a stack or heap segment for any executable or object file?", "body": "<p>They are OS processes they are not applicable to find size !</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 8477500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fciP2zWsCAQ/AAAAAAAAAAI/AAAAAAAABGE/laiA87YsIgw/photo.jpg?sz=128", "display_name": "kamal pandey", "link": "https://stackoverflow.com/users/8477500/kamal-pandey"}, "edited": false, "score": 0, "creation_date": 1523431551, "post_id": 49768635, "comment_id": 86552937, "body": "there is one more doubt? There is no global variable in hello_world-1.c file so the object file shows zero sizes for data and bss segment, but why does it show some size for the same executable. Please refer to my question for more clarification."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 143, "user_id": 8477500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fciP2zWsCAQ/AAAAAAAAAAI/AAAAAAAABGE/laiA87YsIgw/photo.jpg?sz=128", "display_name": "kamal pandey", "link": "https://stackoverflow.com/users/8477500/kamal-pandey"}, "edited": false, "score": 0, "creation_date": 1523433048, "post_id": 49768635, "comment_id": 86553828, "body": "@kamalpandey: you are forgetting the C runtime library"}], "tags": [], "owner": {"reputation": 712, "user_id": 5570606, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NEUuj.jpg?s=128&g=1", "display_name": "Stubborn", "link": "https://stackoverflow.com/users/5570606/stubborn"}, "is_accepted": false, "score": 1, "last_activity_date": 1523430811, "last_edit_date": 1523430811, "creation_date": 1523430505, "answer_id": 49768635, "question_id": 49767687, "link": "https://stackoverflow.com/questions/49767687/why-the-size-command-didnt-list-a-stack-or-heap-segment-for-any-executable-or-o/49768635#49768635", "title": "Why the size command didn&#39;t list a stack or heap segment for any executable or object file?", "body": "<p>Because <strong>Heap</strong> section is used for dynamic memory allocation while the program is running, and the memory will be allocated during run time only because it is <strong>dynamic</strong> right. And for <strong>stack</strong> the variables stored there have local scope or block scope only and they also have there existence until the program runs. </p>\n\n<p>And yes this <strong>stack,heap,data</strong> and <strong>code</strong> memory sections are in context of the process or the program which is running.</p>\n"}], "owner": {"reputation": 143, "user_id": 8477500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fciP2zWsCAQ/AAAAAAAAAAI/AAAAAAAABGE/laiA87YsIgw/photo.jpg?sz=128", "display_name": "kamal pandey", "link": "https://stackoverflow.com/users/8477500/kamal-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1535009943, "creation_date": 1523426982, "last_edit_date": 1535009943, "question_id": 49767687, "link": "https://stackoverflow.com/questions/49767687/why-the-size-command-didnt-list-a-stack-or-heap-segment-for-any-executable-or-o", "title": "Why the size command didn&#39;t list a stack or heap segment for any executable or object file?", "body": "<p>while using the <code>size</code> command in Unix systems with the executable or object files, we get output in the form of the size of text segment and data segment. Why doesn't it show the output for heap or stack segment? Below is the output of size command </p>\n\n<pre><code> $ size hello_world-1 hello_world-1.o \n\n\ntext   data   bss    dec   hex   filename\n 916    256     4   1176   498   hello_world-1\n  48      0     0     48    30   hello_world-1.o\n</code></pre>\n"}, {"tags": ["c", "for-loop", "break"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1523426941, "post_id": 49767625, "comment_id": 86550550, "body": "Well, the <code>,</code> operator does expect expression. You do not give one afterwards. What is unclear about the error?"}, {"owner": {"reputation": 688, "user_id": 4648586, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/XlHgj.png?s=128&g=1", "display_name": "Bagus Tesa", "link": "https://stackoverflow.com/users/4648586/bagus-tesa"}, "edited": false, "score": 0, "creation_date": 1523426948, "post_id": 49767625, "comment_id": 86550553, "body": "interesting, i havent code c for long, it seems <code>keyword</code> cant be used with <code>,</code>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8741151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e335b5c36958871c381968f1dcd64bb?s=128&d=identicon&r=PG&f=1", "display_name": "SEONGWOO CHAE", "link": "https://stackoverflow.com/users/8741151/seongwoo-chae"}, "edited": false, "score": 0, "creation_date": 1523429166, "post_id": 49767708, "comment_id": 86551632, "body": "Thank you, i believed, &#39;break&#39; is an expression.. until now. Have a good day."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 35, "user_id": 8741151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e335b5c36958871c381968f1dcd64bb?s=128&d=identicon&r=PG&f=1", "display_name": "SEONGWOO CHAE", "link": "https://stackoverflow.com/users/8741151/seongwoo-chae"}, "edited": false, "score": 0, "creation_date": 1523433597, "post_id": 49767708, "comment_id": 86554132, "body": "@SEONGWOOCHAE What value should <code>break</code> be evaluated to? If it has no value, it is no expression."}], "tags": [], "owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "is_accepted": true, "score": 4, "last_activity_date": 1523427213, "last_edit_date": 1523427213, "creation_date": 1523427079, "answer_id": 49767708, "question_id": 49767625, "link": "https://stackoverflow.com/questions/49767625/using-comma-and-break-have-an-error-in-for-loop/49767708#49767708", "title": "Using comma and break have an error in for loop", "body": "<p>The comma operator needs the operands to be expressions, i.e. something that evaluates to a value. <code>break</code>, <code>continue</code> etc. are not expressions, instead they are statements which do not evaluate to a value. That's why they can't be used with comma operator.</p>\n\n<p>The error is perfectly clear in the message \"Expression expected\".</p>\n"}], "owner": {"reputation": 35, "user_id": 8741151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e335b5c36958871c381968f1dcd64bb?s=128&d=identicon&r=PG&f=1", "display_name": "SEONGWOO CHAE", "link": "https://stackoverflow.com/users/8741151/seongwoo-chae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 49767708, "answer_count": 1, "score": 1, "last_activity_date": 1523427213, "creation_date": 1523426696, "question_id": 49767625, "link": "https://stackoverflow.com/questions/49767625/using-comma-and-break-have-an-error-in-for-loop", "title": "Using comma and break have an error in for loop", "body": "<p>i have a question about break in for loop. </p>\n\n<p>I know 'comma' can make code using no semicolon.</p>\n\n<p>Most of codes are going well, but 'break' doesn't meet this rule.  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void){\n\n    for(int i=0;i&lt;n;i++) \n        puts(\"hello\"),break;\n\nreturn 0;\n}\n</code></pre>\n\n<p>In this code, break have an error \"Expression expected\" and i don't know why..  </p>\n\n<p>Is there any problem? :(</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1523425175, "post_id": 49767265, "comment_id": 86549784, "body": "<code>unsigned long long</code> is not enough to store result of <code>2^52</code>. Instead use <i>int array of required size</i>"}, {"owner": {"reputation": 16371, "user_id": 479251, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9870fa7c3f578b33976c7a770cbff4b2?s=128&d=identicon&r=PG", "display_name": "Pac0", "link": "https://stackoverflow.com/users/479251/pac0"}, "edited": false, "score": 1, "creation_date": 1523425182, "post_id": 49767265, "comment_id": 86549786, "body": "Welcome to Stack Overflow. Could you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> ?  This will probably help your question being well received and other person to help you."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1523425448, "post_id": 49767265, "comment_id": 86549895, "body": "<code>helper</code> is <code>int</code> so <code>helper * helper</code> is too. You assign it to an <code>unsigned long long</code> but this is too late. You need to start your calculations with long long."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 1, "creation_date": 1523425460, "post_id": 49767265, "comment_id": 86549901, "body": "@achal Please elaborate in view of the likely size of <code>unsigned long long</code> of 8 bytes, with 64 bits. Consider using extended space and formatting features of making an answer."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1523425630, "post_id": 49767265, "comment_id": 86549989, "body": "Please explain the meaning of your &quot;(2^52)&quot; (which is usually interpreted as 2 to the power of 52 by most readers) in relation to &quot;52 over 2&quot;, which might refer to a very different mathmatical construct/expression. E.g.  &quot;4 over 2&quot; equals 6 (I hope, being a little rusty there....), while &quot;2 to the power of 4&quot; equals 16. <a href=\"http://mathworld.wolfram.com/BinomialCoefficient.html\" rel=\"nofollow noreferrer\">mathworld.wolfram.com/BinomialCoefficient.html</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1523426260, "post_id": 49767265, "comment_id": 86550255, "body": "@Yunnosch it is <code>52&#47;2</code>... <code>2^(52&#47;2)</code> is the positive square root of <code>2^52</code>..."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1523426640, "post_id": 49767265, "comment_id": 86550407, "body": "You just need to type your <code>helper</code> as <code>unsigned long long</code> or, <i>alternatively</i>, cast one operand to <code>unsigned long long</code> in the multiplication: <code>(unsigned long long)helper * helper</code>."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1523430822, "post_id": 49767724, "comment_id": 86552544, "body": "Funnily enough, an IEEE754 <code>double</code> can store 2^52 exactly. (It starts to go awry after the 53rd power.) Occasionally this is a good idea especially if you compiler doesn&#39;t have a <code>long long</code> type and fast floating point; +1."}], "tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": true, "score": 1, "last_activity_date": 1523427148, "creation_date": 1523427148, "answer_id": 49767724, "question_id": 49767265, "link": "https://stackoverflow.com/questions/49767265/saving-252-number-in-a-c-data-type/49767724#49767724", "title": "Saving (2^52) Number in a C data type", "body": "<p>If you do not require single digit accuracy and are happy with a number of significant figures, use a <code>double</code></p>\n"}], "owner": {"reputation": 47, "user_id": 8687473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbcdafb0ebf9d75b3d103697fafe843e?s=128&d=identicon&r=PG&f=1", "display_name": "code_hacker", "link": "https://stackoverflow.com/users/8687473/code-hacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1523426430, "accepted_answer_id": 49767724, "answer_count": 1, "score": 0, "last_activity_date": 1523427148, "creation_date": 1523425017, "question_id": 49767265, "link": "https://stackoverflow.com/questions/49767265/saving-252-number-in-a-c-data-type", "closed_reason": "Duplicate", "title": "Saving (2^52) Number in a C data type", "body": "<p>I am doing a Project using c , and I encountered a Problem while doing some calculations.. actually I want to store a big number (2^52) in any data type </p>\n\n<pre><code>int helper = TwoOf(26);//52 over 2\n\nunsigned long long help = helper * helper;\n</code></pre>\n\n<blockquote>\n  <ul>\n  <li>function Twoof(x) -> calculates x^2</li>\n  </ul>\n  \n  <p>I used long long to store 2^52 but the debugger shows it has a zero value.</p>\n</blockquote>\n\n<p>can anyone help?</p>\n"}, {"tags": ["c", "programming-languages", "pascal", "language-design"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1523423979, "post_id": 49766963, "comment_id": 86549305, "body": "This is an unanswerable question.  They&#39;re different design decisions by different language designers.  Other languages use other notations.  And IIRC, Pascal originally used an up arrow \u2191 \u2014 it used <code>^</code> only because up arrows aren&#39;t available in ASCII.  See, for example, <a href=\"https://books.google.com/books?id=XSvqr6FzNy4C&amp;pg=PA442&amp;lpg=PA442&amp;dq=pascal+up+arrow&amp;source=bl&amp;ots=YpVquQE4Xw&amp;sig=yAkZX3Em296GYOaDTANCOHGdUd4&amp;hl=en&amp;sa=X&amp;ved=0ahUKEwjkkZWdvbHaAhWQFXwKHSQrClgQ6AEIWTAI#v=onepage&amp;q=pascal%20up%20arrow&amp;f=false\" rel=\"nofollow noreferrer\">Programming in Pascal</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1523424326, "post_id": 49766963, "comment_id": 86549454, "body": "That&#39;s entirely subject for speculation. Maybe K&amp;R didn&#39;t like carets and didn&#39;t want to see them so often? Who knows."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1523424916, "post_id": 49766963, "comment_id": 86549679, "body": "Their origin could not possibly be more different.  Pascal came out of European academia, major influence Algol, meant as a teaching language with little regard for practical use, strong typing a design goal.  C came out of American business, major influence BCPL, meant to write practical programs, typing was added as an afterthought.  Pretty doubtful that Dennis Ritchie and Niklaus Wirth ever talked to each other :)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1523427076, "post_id": 49766963, "comment_id": 86550617, "body": "C doesn&#39;t share any immediate lineage with Pascal. <a href=\"https://stackoverflow.com/questions/46759733/why-are-the-dereference-and-the-address-of-operators-on-the-left\">Read for example here</a>. The predecessors of C <i>precede</i> Pascal."}, {"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1523538625, "post_id": 49766963, "comment_id": 86609362, "body": "C was a byproduct of creating an telephone OS in a HLL, which must have been pretty abstract as a concept in the beginning too."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1523547551, "post_id": 49766963, "comment_id": 86616053, "body": "Simple answer: because C is C and Pascal is Pascal. Different languages use different constructs. Pascal programmers might ask why C programmers write all their code in comments. ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1523449392, "post_id": 49767186, "comment_id": 86564839, "body": "If you&#39;re going to quote Wikipedia, you should provide the links to the articles quoted."}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1523449600, "post_id": 49767186, "comment_id": 86565011, "body": "thanks, will edit it ."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1524141704, "post_id": 49767186, "comment_id": 86858260, "body": "Seems you forgot to add that link. It&#39;s inappropriate to use content from other sites without appropriate attribution, which includes the link to that content."}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "edited": false, "score": 0, "creation_date": 1524165894, "post_id": 49767186, "comment_id": 86873495, "body": "edited the article including the link, thanks for pointing this out. sorry i forgot to include it!"}], "tags": [], "owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "is_accepted": false, "score": 3, "last_activity_date": 1524165849, "last_edit_date": 1524165849, "creation_date": 1523424678, "answer_id": 49767186, "question_id": 49766963, "link": "https://stackoverflow.com/questions/49766963/why-does-c-use-asterisks-to-declare-pointers-and-not-carets-like-in-pascal/49767186#49767186", "title": "Why does C use asterisks to declare pointers and not carets like in Pascal?", "body": "<p>The answer is because B uses <code>*</code> to declare pointers. Here is a line from Wikipedia regarding the <a href=\"https://en.wikipedia.org/wiki/C_(programming_language)#Early_developments\" rel=\"nofollow noreferrer\">development of C</a>:</p>\n\n<blockquote>\n  <p><strong>However B's inability to take advantage of some of the PDP-11's features, notably byte addressability, led to C. The name of C was\n  chosen simply as the next after B.</strong></p>\n</blockquote>\n\n<p>Here is the usage in B:</p>\n\n<blockquote>\n  <p><strong>In the original language it was spelled rv, and later !, while B\n  uses the unary *. Thus, if p is a cell containing the index of (or\n  address of), or pointer to) another cell, *p refers to the contents of\n  the pointed-to cell, either as a value in an expression or as the\n  target of an assignment.</strong></p>\n</blockquote>\n\n<p>C is based on B, and a program written in B would be reasonably legible to a C programmer; because B is essentially a simpler version of C. The most notable difference between B and C is that B is a typeless language, that is, variables do not have explicit data types like character or integer. Or, rather, there is exactly one data type: the machine word, which is equivalent to C\u2019s integer type \u2018int\u2019.</p>\n\n<p>Here is difference in origin of C and Pascal from Wikipedia:</p>\n\n<blockquote>\n  <p><strong>Both are descendants of the ALGOL language series.Pascal stems directly from ALGOL W, while it shared some new ideas with ALGOL 68.\n  The C language is more indirectly related to ALGOL, originally through\n  B, BCPL, and CPL, and later through ALGOL 68.</strong></p>\n</blockquote>\n\n<p>So, there is a difference in <a href=\"https://en.wikipedia.org/wiki/Comparison_of_Pascal_and_C\" rel=\"nofollow noreferrer\">origin of C and Pascal</a>, irrespective of what you said.</p>\n"}], "owner": {"reputation": 89, "user_id": 7585827, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f2d68b0a70eef76bd9c892dd822b34b?s=128&d=identicon&r=PG&f=1", "display_name": "az-", "link": "https://stackoverflow.com/users/7585827/az"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "closed_date": 1523426870, "answer_count": 1, "score": -3, "last_activity_date": 1524165849, "creation_date": 1523423643, "question_id": 49766963, "link": "https://stackoverflow.com/questions/49766963/why-does-c-use-asterisks-to-declare-pointers-and-not-carets-like-in-pascal", "closed_reason": "Needs details or clarity", "title": "Why does C use asterisks to declare pointers and not carets like in Pascal?", "body": "<p>Both languages have similar origins so I'm wondering where this difference comes from.</p>\n"}, {"tags": ["javascript", "c", "node.js", "ffi", "node-ffi"], "answers": [{"tags": [], "owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "is_accepted": true, "score": 0, "last_activity_date": 1523436726, "creation_date": 1523436726, "answer_id": 49770653, "question_id": 49766938, "link": "https://stackoverflow.com/questions/49766938/node-ffi-pointer-to-struct/49770653#49770653", "title": "Node ffi pointer to struct", "body": "<p>I don't know where I took <code>'pointer'</code> from, but the followin works:</p>\n\n<pre><code>const struct_in_addr = Struct({\n  's_addr': 'ulong',\n});\n\nconst _struct_sockaddr_in = Struct({\n  'sin_family': 'short',\n  'sin_port'  : 'ushort',\n  'in_addr'   : struct_in_addr,\n  'sin_zero'  : 'char',\n});\n\nstruct_sockaddr_in = ref.refType(_struct_sockaddr_in);\n\nconst redir = ffi.Library('./libredir', {\n  //'main'           : [ 'int' , [ 'int', 'char* []' ] ],\n  //'parse_args'     : [ 'void', [ 'int', 'char* []' ] ],\n  'target_init'    : [ 'int' , [ 'char *', 'int', struct_sockaddr_in ] ],\n  'target_connect' : [ 'int' , [ 'int',  struct_sockaddr_in ] ],\n  'client_accept'  : [ 'int' , [ 'int',  struct_sockaddr_in ] ],\n  'server_socket'  : [ 'int' , [ 'char *', 'int', 'int' ] ],\n});\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1405, "favorite_count": 1, "accepted_answer_id": 49770653, "answer_count": 1, "score": 1, "last_activity_date": 1523436726, "creation_date": 1523423534, "question_id": 49766938, "link": "https://stackoverflow.com/questions/49766938/node-ffi-pointer-to-struct", "title": "Node ffi pointer to struct", "body": "<p><em>FIrst of all, I'm asking here because there's neither a fast answer to usage of pointers in node ffi neither about pointers to structs, this is going to help</em></p>\n\n<p>Here's my node ffi:</p>\n\n<pre><code>const struct_in_addr = Struct({\n  's_addr': 'ulong',\n});\n\nconst struct_sockaddr_in = Struct({\n  'sin_family': 'short',\n  'sin_port'  : 'ushort',\n  'in_addr'   : struct_in_addr,\n  'sin_zero'  : 'char',\n});\n\n\nvar redir = ffi.Library('./libredir', {\n  //'main'           : [ 'int' , [ 'int', 'char* []' ] ],\n  //'parse_args'     : [ 'void', [ 'int', 'char* []' ] ],\n  'target_init'    : [ 'int' , [ 'char *', 'int', [ struct_sockaddr_in, \"pointer\" ]] ],\n  'target_connect' : [ 'int' , [ 'int', [ struct_sockaddr_in, \"pointer\" ] ] ],\n  'client_accept'  : [ 'int' , [ 'int', [ struct_sockaddr_in, \"pointer\" ] ] ],\n  'server_socket'  : [ 'int' , [ 'char *', 'int', 'int' ] ],\n});\n</code></pre>\n\n<p>Here's the signature of target_init as an example:</p>\n\n<pre><code>int target_init(char *addr, int port, struct sockaddr_in *target)\n</code></pre>\n\n<p>Here's what I'm getting:</p>\n\n<pre><code>/home/lz/redir-controller/node_modules/ref/lib/ref.js:397\n    throw new TypeError('could not determine a proper \"type\" from: ' + JSON.stringify(type))\n    ^\n\nTypeError: could not determine a proper \"type\" from: [null,\"pointer\"]\n    at coerceType (/home/lz/redir-controller/node_modules/ref/lib/ref.js:397:11)\n    at Array.map (&lt;anonymous&gt;)\n</code></pre>\n\n<p>I'm using <a href=\"https://github.com/troglobit/redir/blob/master/redir.c\" rel=\"nofollow noreferrer\">https://github.com/troglobit/redir/blob/master/redir.c</a> and compiling with <code>gcc -shared -fpic redir.c -o libredir.so</code></p>\n\n<p>I suspect it's a problem with <code>struct_sockaddr_in</code> but everything seems ok. I even tried to do as in <a href=\"https://github.com/node-ffi/node-ffi/wiki/Node-FFI-Tutorial#structs\" rel=\"nofollow noreferrer\">https://github.com/node-ffi/node-ffi/wiki/Node-FFI-Tutorial#structs</a> by doing:</p>\n\n<pre><code>const _struct_sockaddr_in = Struct({\n  'sin_family': 'short',\n  'sin_port'  : 'ushort',\n  'in_addr'   : struct_in_addr,\n  'sin_zero'  : 'char',\n});\n\nstruct_sockaddr_in = ref.refType(_struct_sockaddr_in);\n</code></pre>\n\n<p>but now I get </p>\n\n<pre><code>TypeError: could not determine a proper \"type\" from: [{\"indirection\":2,\"name\":\"StructType*\"},\"pointer\"]\n</code></pre>\n"}, {"tags": ["python", "c", "serial-port", "subprocess", "pyserial"], "answers": [{"tags": [], "owner": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "is_accepted": false, "score": 0, "last_activity_date": 1523895030, "last_edit_date": 1523895030, "creation_date": 1523800261, "answer_id": 49842702, "question_id": 49766933, "link": "https://stackoverflow.com/questions/49766933/can-i-convert-a-serial-object-into-a-file-descriptor-and-pass-it-to-a-c-program/49842702#49842702", "title": "Can I convert a Serial object into a file descriptor and pass it to a C Program?", "body": "<p>I found a workaround by using a pipe to redirect serial output to python.\nWorks now.</p>\n"}], "owner": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523895030, "creation_date": 1523423515, "last_edit_date": 1523423845, "question_id": 49766933, "link": "https://stackoverflow.com/questions/49766933/can-i-convert-a-serial-object-into-a-file-descriptor-and-pass-it-to-a-c-program", "title": "Can I convert a Serial object into a file descriptor and pass it to a C Program?", "body": "<p>I call a C-subprocess from python using <code>subprocess.Popen(..)</code>\nWithin the executable, a COM port is opened for communication with a serial device, using <code>CreateFile(...)</code>.</p>\n\n<p>Is it possible, to open the serial port already in python  using pyserial and pass some \"file handle\" to the executable?</p>\n\n<p>At least I can pass stdin, stdout and stderr as file descriptors (int) or file objects. But I don't know, how I could convert a Serial object to a one of the options above. Maybe it is not possible at all, but I ask anyway...</p>\n\n<p>The question shall be a workaround related to \n<a href=\"https://stackoverflow.com/questions/49688772/usb-vcp-connection-fails-occasionally\">USB VCP connection fails occasionally</a>\nbecause repeatedly  opening and closing the COM Port fails after some thousand times. The executable is called very often (each time with other parameters for test purposes), but it wouldn't be necessary to re-open the COM Port every time. </p>\n\n<p>Of course it would be better to fix the problem with <code>CreateFile()</code>, but I invested days to find a problem and came finally to the conclusion, that it is not in my hands anymore...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 992, "user_id": 3444956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45650f2170663c203fd5d87b44580c64?s=128&d=identicon&r=PG&f=1", "display_name": "harmands", "link": "https://stackoverflow.com/users/3444956/harmands"}, "edited": false, "score": 1, "creation_date": 1523421315, "post_id": 49766540, "comment_id": 86548527, "body": "Learn about scope of variables. <code>local_var</code> is not global."}, {"owner": {"reputation": 4966, "user_id": 3605497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV6Nc.jpg?s=128&g=1", "display_name": "Tripp Kinetics", "link": "https://stackoverflow.com/users/3605497/tripp-kinetics"}, "edited": false, "score": 1, "creation_date": 1523421374, "post_id": 49766540, "comment_id": 86548547, "body": "Your <code>local_var</code> is never initialized, in the <code>factorial()</code> function."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1523421480, "post_id": 49766540, "comment_id": 86548589, "body": "C and C ++ are 2 different languages. Do not abuse the tags, just indicate the language you use."}, {"owner": {"reputation": 4966, "user_id": 3605497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV6Nc.jpg?s=128&g=1", "display_name": "Tripp Kinetics", "link": "https://stackoverflow.com/users/3605497/tripp-kinetics"}, "edited": false, "score": 1, "creation_date": 1523421624, "post_id": 49766540, "comment_id": 86548637, "body": "And, as a general rule of thumb, give your variables meaningful names."}, {"owner": {"reputation": 1437, "user_id": 799461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad5074785c7411cea4df34074e1a80c?s=128&d=identicon&r=PG", "display_name": "Christoph", "link": "https://stackoverflow.com/users/799461/christoph"}, "edited": false, "score": 0, "creation_date": 1523421792, "post_id": 49766540, "comment_id": 86548682, "body": "The main issue has been pointed out but when asking such questions try to narrow it down to the part that is the problem and explicitly state what is happening and what you expect to happen. It cannot always be guessed"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1523423814, "post_id": 49766540, "comment_id": 86549251, "body": "Note that a 32-bit integer cannot store factorials larger than 12! and a 64-bit integer cannot store factorials larger than 20!"}, {"owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1523511800, "post_id": 49766540, "comment_id": 86592508, "body": "Still new to the site and to programming in general. My teacher told me to save it as a .cpp and is asking us to use a C++ compiler. Just assumed the two were similar. Thanks everyone for your comments, especially about the variables!"}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1523422389, "post_id": 49766624, "comment_id": 86548855, "body": "and call like <code>factorial_result = factorial(result);</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1523422417, "post_id": 49766624, "comment_id": 86548865, "body": "&quot;Then, the correct factorial would be returned and printed accordingly&quot;, that is if integer doesn&#39;t overflow."}], "tags": [], "owner": {"reputation": 77, "user_id": 9594468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de37042cc976b3dc521f742be5797db9?s=128&d=identicon&r=PG&f=1", "display_name": "BlahGuy", "link": "https://stackoverflow.com/users/9594468/blahguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1523421682, "creation_date": 1523421682, "answer_id": 49766624, "question_id": 49766540, "link": "https://stackoverflow.com/questions/49766540/factorial-calculator-using-functions-in-c/49766624#49766624", "title": "Factorial calculator using functions in C", "body": "<p>Your factorial should be calculated based on the input( i.e in your case <code>int result</code> ).</p>\n\n<p>So, your method <code>factorial()</code> should looks as follows :</p>\n\n<pre><code>int factorial( int number )\n{\n  int factorial_value = 1;\n  while( number &gt; 0 )\n  {\n     factorial_value *= number;\n     number--;\n  }\n  return factorial_value;\n}\n</code></pre>\n\n<p>Then, the correct factorial would be returned and printed accordingly ! Regarding the scope of the variables that you have used, see the comments under your question.</p>\n"}, {"comments": [{"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "edited": false, "score": 0, "creation_date": 1523422178, "post_id": 49766633, "comment_id": 86548780, "body": "using <code>include</code> will give error, and please use proper formatting while posting code."}], "tags": [], "owner": {"reputation": 1, "user_id": 9622851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uqwtAz-h2QM/AAAAAAAAAAI/AAAAAAAAARc/-WcQ0-boVpA/photo.jpg?sz=128", "display_name": "mohan arumugam", "link": "https://stackoverflow.com/users/9622851/mohan-arumugam"}, "is_accepted": false, "score": -3, "last_activity_date": 1523423666, "last_edit_date": 1523423666, "creation_date": 1523421806, "answer_id": 49766633, "question_id": 49766540, "link": "https://stackoverflow.com/questions/49766540/factorial-calculator-using-functions-in-c/49766633#49766633", "title": "Factorial calculator using functions in C", "body": "<p>include</p>\n\n<pre><code>int main()\n{ \n    int c, n, fact = 1;    \n    printf(\"Enter a number to calculate its factorial\\n\"); scanf(\"%d\", &amp;n);\n    for (c = 1; c &lt;= n; c++) fact = fact * c;\n    printf(\"Factorial of %d = %d\\n\", n, fact);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1523511194, "post_id": 49766670, "comment_id": 86592249, "body": "Not sure where I got the &amp; idea from, thanks for clearing that up. I didn&#39;t think about adding local_var as global variable and neither did my teacher, is that something that needs to be done?  Thanks very much for your answer, it has cleared alot up for me :)"}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "reply_to_user": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1523511285, "post_id": 49766670, "comment_id": 86592288, "body": "Always happy to help :)"}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "reply_to_user": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1523511358, "post_id": 49766670, "comment_id": 86592326, "body": "If you want to access a variable from other functions, either you pass it as a parameter or declare it as a global."}, {"owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1523512073, "post_id": 49766670, "comment_id": 86592605, "body": "It&#39;s all making sense :&#39;)"}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "reply_to_user": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1523512257, "post_id": 49766670, "comment_id": 86592673, "body": "Yeah you need to tell the function that this variable exists with its value/address."}], "tags": [], "owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "is_accepted": true, "score": 1, "last_activity_date": 1523422000, "creation_date": 1523422000, "answer_id": 49766670, "question_id": 49766540, "link": "https://stackoverflow.com/questions/49766540/factorial-calculator-using-functions-in-c/49766670#49766670", "title": "Factorial calculator using functions in C", "body": "<p>Declare local_var as a global variable and do:</p>\n\n<pre><code>local_var = getnum();\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<p>Change <code>main()</code> to:</p>\n\n<pre><code>int main(void)\n{\n    int result;\n    int factorial_result;\n    mystamp();\n    result = getnum();\n    factorial_result = factorial(result);\n    printf(\"You typed %d\\n\", result);\n    printf(\"The factorial is %d\\n\", factorial_result);\n    return;\n}\n</code></pre>\n\n<p>And <code>factorial()</code> to:</p>\n\n<pre><code>int factorial(int n)\n{\n    int x,f=1,local_var=n;\n\n    for(x=1; x &lt;= local_var; x++)\n    f = f * x;\n    return(f);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 8720012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/039247b3d75cbd0c9512adc4f25413c8?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/8720012/bharadwaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1523428760, "creation_date": 1523428760, "answer_id": 49768151, "question_id": 49766540, "link": "https://stackoverflow.com/questions/49766540/factorial-calculator-using-functions-in-c/49768151#49768151", "title": "Factorial calculator using functions in C", "body": "<pre><code>#include &lt;stdio.h&gt;\nint factorial(int);\nint main()\n{\nint num;\nint result;\nprintf(\"Enter a number to find it's Factorial: \");\nscanf(\"%d\", &amp;num);\nif (num &lt; 0)\n{\nprintf(\"Factorial of negative number not possible\\n\");\n}\nelse\n{\nresult = factorial(num);\nprintf(\"The Factorial of %d is %d.\\n\", num, result);\n}\nreturn 0;\n}\nint factorial(int num)\n{\nif (num == 0 || num == 1)\n{\nreturn 1;\n}\nelse\n{\nreturn(num * factorial(num - 1));\n}\n}\n</code></pre>\n\n<p>This is a simple factorial program using recursion calling function !</p>\n"}], "owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 49766670, "answer_count": 4, "score": 0, "last_activity_date": 1523428760, "creation_date": 1523421178, "last_edit_date": 1523421614, "question_id": 49766540, "link": "https://stackoverflow.com/questions/49766540/factorial-calculator-using-functions-in-c", "title": "Factorial calculator using functions in C", "body": "<p>I am learning about functions and how to call upon them and use them in class. I don't quite understand where I've gone wrong here. I know that there are some mistakes around the <code>int main</code> part. I have asked my teacher and he is reluctant on giving me an example that would solve my problems or help me out. I think my main problem is at <code>factorial_result = factorial();</code></p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nvoid mystamp(void)\n{\n    printf(\"My name is John Appleseed\\n\");\n    printf(\"My lab time is 12:30 on Sunday\\n\");\n    return;\n}\n\nint getnum(void)\n{\n    int local_var;\n    printf(\"Please enter an integer: \");\n    scanf(\"%d%*c\", local_var);\n    return(local_var);\n}\n\nint factorial(void)\n{\n    int x,f=1,local_var;\n\n    for(x=1; x &lt;= local_var; x++)\n    f = f * x;\n    return(f);\n}\n\nint main(void)\n{\n    int result;\n    int factorial_result;\n    mystamp();\n    result = getnum();\n    factorial_result = factorial();\n    printf(\"You typed %d\\n\", result);\n    printf(\"The factorial is %d\\n\", factorial_result);\n    return;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 4, "creation_date": 1523421211, "post_id": 49766514, "comment_id": 86548503, "body": "You do know how to do that with math? Then just write it down as code. It really is that simple as you\u2019re doing it in your head."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1523424059, "post_id": 49766744, "comment_id": 86549342, "body": "You should usually leave an attribution <a href=\"https://www.mbeckler.org/blog/?p=114\" rel=\"nofollow noreferrer\">Pretty printing a number of bytes in C/C++</a>"}, {"owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1523424125, "post_id": 49766744, "comment_id": 86549369, "body": "Okay, didn&#39;t know that. New to writing answers here."}], "tags": [], "owner": {"reputation": 2729, "user_id": 6486187, "user_type": "registered", "profile_image": "https://graph.facebook.com/722616891201339/picture?type=large", "display_name": "Abhishek Keshri", "link": "https://stackoverflow.com/users/6486187/abhishek-keshri"}, "is_accepted": true, "score": 2, "last_activity_date": 1523424219, "last_edit_date": 1523424219, "creation_date": 1523422455, "answer_id": 49766744, "question_id": 49766514, "link": "https://stackoverflow.com/questions/49766514/c-add-decimal-place-and-round-int-above-999/49766744#49766744", "title": "C - add decimal place and round int above 999", "body": "<p>You can do this using:</p>\n\n<pre><code>void pretty_bytes(char* buf, uint bytes)\n{\n    const char* suffixes[7];\n    suffixes[0] = \"B\";\n    suffixes[1] = \"KB\";\n    suffixes[2] = \"MB\";\n    suffixes[3] = \"GB\";\n    suffixes[4] = \"TB\";\n    suffixes[5] = \"PB\";\n    suffixes[6] = \"EB\";\n    uint s = 0; // which suffix to use\n    double count = bytes;\n    while (count &gt;= 1024 &amp;&amp; s &lt; 7)\n    {\n        s++;\n        count /= 1024;\n    }\n    if (count - floor(count) == 0.0)\n        sprintf(buf, \"%d %s\", (int)count, suffixes[s]);\n    else\n        sprintf(buf, \"%.1f %s\", count, suffixes[s]);\n}\n</code></pre>\n\n<p><a href=\"https://www.mbeckler.org/blog/?p=114\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<p>If you don't want to use buffer:</p>\n\n<pre><code>static const char *humanSize(uint64_t bytes)\n{\n    char *suffix[] = {\"B\", \"KB\", \"MB\", \"GB\", \"TB\"};\n    char length = sizeof(suffix) / sizeof(suffix[0]);\n\n    int i = 0;\n    double dblBytes = bytes;\n\n    if (bytes &gt; 1024) {\n        for (i = 0; (bytes / 1024) &gt; 0 &amp;&amp; i&lt;length-1; i++, bytes /= 1024)\n            dblBytes = bytes / 1024.0;\n    }\n\n    static char output[200];\n    sprintf(output, \"%.02lf %s\", dblBytes, suffix[i]);\n    return output;\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 7960258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff1b37dd38f331b04d9898c789178e8?s=128&d=identicon&r=PG&f=1", "display_name": "bmw417", "link": "https://stackoverflow.com/users/7960258/bmw417"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 49766744, "answer_count": 1, "score": 0, "last_activity_date": 1523424219, "creation_date": 1523420938, "question_id": 49766514, "link": "https://stackoverflow.com/questions/49766514/c-add-decimal-place-and-round-int-above-999", "title": "C - add decimal place and round int above 999", "body": "<p>I have an integer number that corresponds with a file size in bytes. An int that returned 400 would be 400 bytes in size, and an int that returned 10400 would be 10.4 KB. What I want to do is convert an int like 10400 to 10.4 and also have a way to distinguish between 10.4 KB, 10.4 MB, or 10.4 GB for example. Because 10400 is 10.4 KB, 10400000 is 10.4 MB, and 10400000000 is 10.4 GB. Does anyone have a solution for this?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 4, "creation_date": 1523420458, "post_id": 49766441, "comment_id": 86548276, "body": "you haven&#39;t allocated memory for <code>string</code> variable"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1523420512, "post_id": 49766441, "comment_id": 86548289, "body": "<code>char *string</code> is a pointer to a char but you have not separated memory so using <code>string[ix]</code> is invalid."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1523422223, "post_id": 49766441, "comment_id": 86548795, "body": "Why not just use <code>sprintf</code> or its safer implementations?"}], "answers": [{"comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1523421176, "post_id": 49766503, "comment_id": 86548494, "body": "your <i>solution</i> works?,  the OP clearly does not answer, read <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a>"}, {"owner": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1523421535, "post_id": 49766503, "comment_id": 86548602, "body": "@eyllanesc hey, I am not on my computer every second."}, {"owner": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1523421990, "post_id": 49766503, "comment_id": 86548732, "body": "@eyllanesc sorry I thought you were referring to me in the first comment."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "edited": false, "score": 0, "creation_date": 1523422107, "post_id": 49766503, "comment_id": 86548764, "body": "@TheCaptain When a comment is used without the use of the @ it refers to the author of the post, in this case the answer. Please comment where it should be."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "edited": false, "score": 0, "creation_date": 1523429785, "post_id": 49766503, "comment_id": 86551961, "body": "@TheCaptain According to your registration you already have 1 year and 9 months."}, {"owner": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "edited": false, "score": 0, "creation_date": 1523432526, "post_id": 49766503, "comment_id": 86553525, "body": "I registered to ask one question and never use it again until a month ago. Anyways what is the point?"}], "tags": [], "owner": {"reputation": 17, "user_id": 9628304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Altanshagai.O", "link": "https://stackoverflow.com/users/9628304/altanshagai-o"}, "is_accepted": false, "score": -2, "last_activity_date": 1523439107, "last_edit_date": 1523439107, "creation_date": 1523420850, "answer_id": 49766503, "question_id": 49766441, "link": "https://stackoverflow.com/questions/49766441/c-from-integer-to-string-function/49766503#49766503", "title": "c from integer to string function", "body": "<pre><code>void to_string(int x) {\n   string s = \"\";\n   while(x){\n       s += (x % 10) + 48;\n       x /= 10;\n   }\n   printf(\"%s\\n\", s);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "edited": false, "score": 0, "creation_date": 1523421836, "post_id": 49766575, "comment_id": 86548692, "body": "lol, programming in C is nuts, even a simple function requires memory management."}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "edited": false, "score": 0, "creation_date": 1523421883, "post_id": 49766575, "comment_id": 86548706, "body": "@TheCaptain ;) that is why I love it :)"}], "tags": [], "owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "is_accepted": false, "score": 1, "last_activity_date": 1523421369, "creation_date": 1523421369, "answer_id": 49766575, "question_id": 49766441, "link": "https://stackoverflow.com/questions/49766441/c-from-integer-to-string-function/49766575#49766575", "title": "c from integer to string function", "body": "<p>So as people already commented on your question, you have not allocated space so:</p>\n\n<pre><code>char *string;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>char *string = malloc ( sizeof (char) * numberOfDigits);\n</code></pre>\n\n<p>and there is another seg fault that I could not figure out, while I fix it I will give you this:</p>\n\n<p><a href=\"https://github.com/goranvel/KandR/blob/master/ch5/exercises/e5-6/e3-6.c\" rel=\"nofollow noreferrer\">itoa solutions</a></p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "edited": false, "score": 1, "creation_date": 1523422598, "post_id": 49766691, "comment_id": 86548914, "body": "I actually didn&#39;t know there was a standard function to do this. But since I already started I might as well do this way."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "edited": false, "score": 0, "creation_date": 1523422930, "post_id": 49766691, "comment_id": 86549014, "body": "@TheCaptain ahh, I see. In that case you should read about <code>sprintf</code> and <code>snprintf</code> and use them instead. Don&#39;t write your own function when there&#39;s already something available. I just thought you were practicing. See <a href=\"http://man7.org/linux/man-pages/man3/sprintf.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/sprintf.3.html</a>"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 3, "last_activity_date": 1523423896, "last_edit_date": 1523423896, "creation_date": 1523422134, "answer_id": 49766691, "question_id": 49766441, "link": "https://stackoverflow.com/questions/49766441/c-from-integer-to-string-function/49766691#49766691", "title": "c from integer to string function", "body": "<p>I guess you know that there are in fact standard function for this (e.g. <code>sprintf</code> - see example below) but just want to write it yourself, right...</p>\n\n<p>In that case:</p>\n\n<p>First of all you need to assign memory to hold the string. Using a char pointer is not enough. You get a seg fault because of that. A uninitialized pointer just points somewhere into memory where you are (most likely) not allowed to write. So when do... it seg faults. In this case just use a short fixed size char array instead.</p>\n\n<p>Second it is much easier just to add each digit to the char <code>'0'</code> to get the correct digit. No need for an array as look up table.</p>\n\n<p>Something like:</p>\n\n<pre><code>void to_string(int x)\n{\n    char string[32] = \"0\";\n    if (x &gt; 0)\n    {\n            char temp[32] = {0};\n            int i = 31;\n\n            // Build a temp string from from the end (right to left)\n            while(x &gt; 0)\n            {\n                temp[--i] = '0' + (x % 10);\n                x /= 10;\n            }\n\n            // Copy the temp string to the target variable\n            strcpy(string, &amp;temp[i]);\n    }\n\n    printf(\"%s\\n\", string);\n}\n</code></pre>\n\n<p>Notice that this code only handles integers greater than or equal to zero. I'll leave negative integers as an exercise.</p>\n\n<p>If you want to use e.g. <code>sprintf</code> it's as easy as:</p>\n\n<pre><code>int n = 42;\nchar string[32];\nsprintf(string, \"%d\", n);\nprintf(\"%s\\n\", string);\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 6511371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d3389a6b20543f115622b6976cfe6d12?s=128&d=identicon&r=PG&f=1", "display_name": "TheCaptain", "link": "https://stackoverflow.com/users/6511371/thecaptain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1523439107, "creation_date": 1523420414, "last_edit_date": 1523420473, "question_id": 49766441, "link": "https://stackoverflow.com/questions/49766441/c-from-integer-to-string-function", "title": "c from integer to string function", "body": "<pre><code>void to_string(int x)\n{\n    int value, i = 0;\n    char numericalChar[] = \"0123456789\";\n    char *string;\n    do\n    {\n        value = x % 10;\n        string[i++] = numericalChar[value];\n        x /= 10;\n    } while(x &gt;= 0);\n    printf(\"%s\\n\", string);\n}\n</code></pre>\n\n<p>I am trying to write a function that turns an integer into a string. I don't think there is nothing with my logic but I am getting a segfault and my printf() is not printing anything out. I probably missing something obvious. I have been sitting in front of the computer for an hour and still, I can't figure it out. Thanks in advance.</p>\n"}, {"tags": ["c++", "c", "sockets", "socklen-t"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1523419824, "post_id": 49766336, "comment_id": 86548117, "body": "it&#39;s to be able to <i>write</i> the length back. It&#39;s an input/output parameter: &quot;The addrlen argument is a value-result argument: the caller must        initialize it to contain the size (in bytes) of the structure pointed        to by addr; on return it will contain the actual size of the peer        address.&quot;"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1523419953, "post_id": 49766336, "comment_id": 86548144, "body": "As above. This is fairly common, needing to provide the size of the structure you&#39;re passing in, and the function passing the number of elements used back"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 2, "creation_date": 1523420805, "post_id": 49766336, "comment_id": 86548367, "body": "Could you clarify your question: you say you don&#39;t understand why the <code>addrlen</code> is a pointer, but not <code>socklen_t</code>. The first part makes sense but I can&#39;t understand what you mean about <code>socklen_t</code>"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1523420612, "creation_date": 1523420612, "answer_id": 49766469, "question_id": 49766336, "link": "https://stackoverflow.com/questions/49766336/why-is-the-address-length-argument-is-pointer-in-the-function-accept-and-recv/49766469#49766469", "title": "Why is the address length argument is pointer in the function accept() and recv()?", "body": "<p>That's because It's an input/output parameter and you have no other choice in C-interfaced functions than to pass a pointer on the variable so it can be changed by the callee if needed.</p>\n\n<p>From the <a href=\"http://man7.org/linux/man-pages/man2/accept.2.html\" rel=\"nofollow noreferrer\">man pages</a>:</p>\n\n<blockquote>\n  <p>The addrlen argument is a value-result argument: the caller must initialize it to contain the size (in bytes) of the structure pointed to by addr; on return it will contain the actual size of the peer address.\"</p>\n</blockquote>\n\n<p>As you see, even if you specify a size, the system returns the <em>actual</em> size (which may be different from the one you specified)</p>\n\n<p>and also for this case:</p>\n\n<blockquote>\n  <p>When addr is NULL,\n         nothing is filled in; in this case, addrlen is not used, and should\n         also be NULL.</p>\n</blockquote>\n\n<p>Here, why passing a value if it's not used?</p>\n"}], "owner": {"reputation": 25, "user_id": 5088061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e192de6fe27f0a3240981673c7fe927d?s=128&d=identicon&r=PG&f=1", "display_name": "John_ABC", "link": "https://stackoverflow.com/users/5088061/john-abc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1607807544, "creation_date": 1523419631, "last_edit_date": 1607807544, "question_id": 49766336, "link": "https://stackoverflow.com/questions/49766336/why-is-the-address-length-argument-is-pointer-in-the-function-accept-and-recv", "title": "Why is the address length argument is pointer in the function accept() and recv()?", "body": "<pre><code>int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);\n</code></pre>\n<p>I don't understand why the <code>addrlen</code> argument is pointer, but not <code>socklen_t</code> ?</p>\n"}, {"tags": ["c++", "c", "math"], "comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 2, "creation_date": 1523419111, "post_id": 49766264, "comment_id": 86547933, "body": "The 64-bit floating point number is exactly <code>double</code> in C/C++."}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 3, "creation_date": 1523419175, "post_id": 49766264, "comment_id": 86547954, "body": "Use <code>exp()</code> for double, <code>expf()</code> for float, <code>expl()</code> for long double."}, {"owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1523419181, "post_id": 49766264, "comment_id": 86547958, "body": "currently I am using expf(), But still I am getting loss of data warning"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 2, "creation_date": 1523419302, "post_id": 49766264, "comment_id": 86547985, "body": "@iBug: Not true. Your implementation may be but that is not required by the standard."}, {"owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1523419391, "post_id": 49766264, "comment_id": 86548007, "body": "then in what ways I can make this warning go away?"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1523419447, "post_id": 49766264, "comment_id": 86548019, "body": "@MartinYork It&#39;s required in <a href=\"http://www.iso-9899.info/n1570.html#7.12.6.1\" rel=\"nofollow noreferrer\">N1570, &#167; 7.12.6.1p1</a>."}, {"owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1523419509, "post_id": 49766264, "comment_id": 86548037, "body": "sorry But I didn&#39;t understand @MartinYork"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 4, "creation_date": 1523421231, "post_id": 49766264, "comment_id": 86548509, "body": "@iBug: <code>double</code> is not required to be a 64-bit IEEE floating point number. (<code>exp</code> is required to return a <code>double</code> but that won&#39;t help if <code>double</code> has a different representation.)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1523421327, "post_id": 49766264, "comment_id": 86548534, "body": "CAAnusha: You get a loss of precision warning because you are supplying a <code>double</code> to a function whose argument is a <code>float</code> (that is, <code>expf</code>); converting <code>double</code> to <code>float</code> loses precision."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1523424498, "post_id": 49766264, "comment_id": 86549510, "body": "@iBug: You got a citation for that claim?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1523425653, "post_id": 49766264, "comment_id": 86549999, "body": "There does not to be <i>some</i> awareness that you are the only programmer in the entire planet that uses these identifiers.  This is now the ranking Google hit for &quot;IEEEPosOne&quot;, the only other really relevant web page for &quot;IEEE_FLOAT64&quot; is one you also created.  Programmers should not define their own type system and expect help from a web site like this :)  Do show your definitions of these identifiers and the kind of C compiler and machine on which you use them."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1523426536, "post_id": 49766264, "comment_id": 86550359, "body": "@ibug: cppreference is an excellent resource but it is not definitive. In this case, it&#39;s not clear what &quot;if supported&quot; means; you are assuming it means &quot;if supported by the hardware&quot; but I believe that assumption is not warranted. What the standard says is that double must be a 64-bit IEEE float if the C implementation claims to support IEEE floats. The C implementation signals the support by defining the pp macro <code>__STDC_IEC_559__</code>. It is under no obligation to define that macro and if it doesn&#39;t, it has no obligation to use that float format. See Appendix F."}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1523426810, "post_id": 49766264, "comment_id": 86550493, "body": "@rici Whooh! Thank you for your comprehensive explanation. I stand corrected."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1523463515, "post_id": 49766264, "comment_id": 86575389, "body": "@iBug 1) That is not the link to a standard.2) If it was that would be one that is way out of date as the last one was <a href=\"http://www.open-std.org/jtc1/sc22/wg21/prot/14882fdis/n4660.pdf\" rel=\"nofollow noreferrer\">c++17 -&gt; n4660</a> and the current draft is <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/n4727.pdf\" rel=\"nofollow noreferrer\">n4727</a> 3)  There is no mention of IEEE in the standard (as the standard deliberately does not define implementation details)."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1523463758, "post_id": 49766264, "comment_id": 86575546, "body": "@CAAnusha To test if your local implementation uses IEEE you need to do the following check. <code>std::numeric_limits&lt;double&gt;::is_iec559()</code> See: <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits/is_iec559\" rel=\"nofollow noreferrer\">iec559</a> This will be true if you are using IEEE. Then to see if you are using the 64 you need to check <code>size_of(double) == 64</code>. If both these are true you should be good (and they usually are)."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1523464573, "post_id": 49766264, "comment_id": 86576069, "body": "@MartinYork: The standard says that if an implementation defines <code>iec559</code> to be true, it conforms to requirements for the floating-point standard, but not that, if an implementation conforms to the standard, it defines <code>iec559</code> to be true. So it is not a definitive test. And many implementations use IEEE-754 formats and behaviors but do not fully conform, so they do not define <code>iec559</code> to be true."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1523464726, "post_id": 49766264, "comment_id": 86576147, "body": "For calculating <code>1-exp(x)</code>, you should consider whether the specialized function <code>expm1</code> serves your purpose. It is intended to provide more accuracy when <code>x</code> is near zero."}], "answers": [{"tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 1, "last_activity_date": 1523419239, "creation_date": 1523419239, "answer_id": 49766291, "question_id": 49766264, "link": "https://stackoverflow.com/questions/49766264/is-there-any-exponential-function-which-returns-ieee-float64-in-math-h-header/49766291#49766291", "title": "Is there any exponential function which returns IEEE_FLOAT64 in math.h header?", "body": "<p>From <code>man 3 exp</code>:</p>\n\n<pre><code>NAME\n       exp, expf, expl - base-e exponential function\n\nSYNOPSIS\n       #include &lt;math.h&gt;\n\n       double exp(double x);\n       float expf(float x);\n       long double expl(long double x);\n\n       Link with -lm.\n</code></pre>\n\n<p>So just use <code>exp()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1523422267, "post_id": 49766392, "comment_id": 86548811, "body": "That last sentence is not really true. In C11, you can <code>#include &lt;tgmath.h&gt;</code> and then almost all math functions without a length indication (such as <code>exp</code>) will be overridden with macros which  automatically select the appropriate specific function."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1523424511, "post_id": 49766392, "comment_id": 86549518, "body": "Didn&#39;t know that. How does it deduce the type? Preprocessor should generally be unrelated to the type system. Big surprise to me."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1523424689, "post_id": 49766392, "comment_id": 86549579, "body": "The preprocessor is indeed unaware of the type system; the macros insert a generic selection expression. See section 6.5.1.1 (for example, <a href=\"http://www.iso-9899.info/n1570.html#6.5.1.1\" rel=\"nofollow noreferrer\">here</a> )"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1523425991, "post_id": 49766392, "comment_id": 86550132, "body": "Found the keyword just now."}], "tags": [], "owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "is_accepted": false, "score": 1, "last_activity_date": 1523425898, "last_edit_date": 1523425898, "creation_date": 1523420068, "answer_id": 49766392, "question_id": 49766264, "link": "https://stackoverflow.com/questions/49766264/is-there-any-exponential-function-which-returns-ieee-float64-in-math-h-header/49766392#49766392", "title": "Is there any exponential function which returns IEEE_FLOAT64 in math.h header?", "body": "<pre><code>//c++\n#include &lt;cmath&gt;\ndouble x = 7.0;//float64\nauto y = std::exp(x);//exp(float64);\n</code></pre>\n\n<p>C++ standard provides appropriate overloads. No need to reflect operand type in function name.</p>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 0, "last_activity_date": 1523465032, "last_edit_date": 1523465032, "creation_date": 1523464227, "answer_id": 49780252, "question_id": 49766264, "link": "https://stackoverflow.com/questions/49766264/is-there-any-exponential-function-which-returns-ieee-float64-in-math-h-header/49780252#49780252", "title": "Is there any exponential function which returns IEEE_FLOAT64 in math.h header?", "body": "<p>This does answer does not apply to C only for C++<br>\nFor C see @iBug's answer. </p>\n\n<p>The C++ standard does not require an implementation to use the IEEE standard. Though this is usually the easiest floating point implementation to use as the chips are relatively standard in modern machines.</p>\n\n<p>The standard provides a way to check using <code>std::numeric_limits</code>.</p>\n\n<p>So if it is a requirement then you should validate.</p>\n\n<pre><code>#include &lt;limits&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    static_assert(sizeof(double) == 64);\n    static_assert(std::numeric_limits&lt;double&gt;::is_iec559());\n\n    // If the above compiles your double is IEEE 64 bit value.\n    // Or IEEE_754 compliant https://en.wikipedia.org/wiki/IEEE_754_revision\n}\n</code></pre>\n\n<p>Now that you have established you are using IEEE values you can look at the <a href=\"http://en.cppreference.com/w/cpp/header/cmath\" rel=\"nofollow noreferrer\">cmath</a> header to see that the functions there all take and return a double value.</p>\n\n<ul>\n<li><a href=\"http://en.cppreference.com/w/cpp/numeric/math/exp\" rel=\"nofollow noreferrer\">exp</a></li>\n<li><a href=\"http://en.cppreference.com/w/cpp/numeric/math/log\" rel=\"nofollow noreferrer\">log</a></li>\n<li>etc....</li>\n</ul>\n\n<p>Note: You should note that Windows machines (usually) use an 80 bit floating point register (not 64). So things can get super whaky if you need strict compliance.</p>\n\n<p>Note: <strong>Do NOT use</strong>:</p>\n\n<ul>\n<li>expf() for float,</li>\n<li>expl() for long double</li>\n</ul>\n\n<p>These are for C library users where the language does not do the correct type checking. In C++ the language uses overloading to use the correct version of the function. If you look at the standard for <code>exp</code>:</p>\n\n<p>Defined in header &lt;cmath&gt;</p>\n\n<pre><code>* float       exp( float arg );\n* double      exp( double arg );\n* long double exp( long double arg );\n* double      exp( Integral arg );\n</code></pre>\n\n<p>The above are all in the standard namespace.</p>\n\n<pre><code>std::cout &lt;&lt; std::exp(100000.1) &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Notice that <code>exp()</code> can take any floating point type <code>float</code>, <code>double</code> or <code>long double</code> and generate the appropriate result type.</p>\n"}], "owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1523466699, "creation_date": 1523419003, "last_edit_date": 1523466699, "question_id": 49766264, "link": "https://stackoverflow.com/questions/49766264/is-there-any-exponential-function-which-returns-ieee-float64-in-math-h-header", "title": "Is there any exponential function which returns IEEE_FLOAT64 in math.h header?", "body": "<p>I want to use exponential function which returns <code>IEEE_FLOAT64</code> value</p>\n\n<p>Currently I am using <code>expf</code> function, but still I am getting lots of warnings.</p>\n\n<pre><code>value = IEEEPosOne - (IEEE_FLOAT64)expf(value1);\n</code></pre>\n"}, {"tags": ["c", "mpi", "multitasking"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523419517, "post_id": 49766038, "comment_id": 86548043, "body": "please upload a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that matches the issue you are facing (e.g. sending from slaves and not from master)"}, {"owner": {"reputation": 61, "user_id": 3957871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528d241632874789315cea2ec0bd4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Maibaum", "link": "https://stackoverflow.com/users/3957871/frank-maibaum"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523420309, "post_id": 49766038, "comment_id": 86548240, "body": "Hello. What more can I do to make code Minimal, Complete, and Verifiable? I removed a lot of code and left only what is required to reproduce the problem. The code I posted demonstrates that I am able to send data to the slaves but not receive data from them in the master task. Should I delete the slave()/master() functions and insert their code in main()? I thought this way made it more readable."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523420464, "post_id": 49766038, "comment_id": 86548278, "body": "I might have misread your problem description, let me have a look at the code from now."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523420759, "post_id": 49766038, "comment_id": 86548351, "body": "the code works for me. what makes you think <i>it doesn&#39;t seem to work</i> ?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523420944, "post_id": 49766038, "comment_id": 86548400, "body": "fwiw, you can replace <code>allocateIntegerArray()</code> with a standard <code>calloc()</code>"}, {"owner": {"reputation": 61, "user_id": 3957871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528d241632874789315cea2ec0bd4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Maibaum", "link": "https://stackoverflow.com/users/3957871/frank-maibaum"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523421052, "post_id": 49766038, "comment_id": 86548441, "body": "In the master() function, inside the first loop, I am printing the array &quot;tempArray&quot; before and after I call MPI_Recv() and the results are identical (all zeroes). The slave tasks are setting the first element of the array that they are sending to the master task to 1. EDIT: will replace malloc()/memset() with calloc(), thanks"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523422060, "post_id": 49766038, "comment_id": 86548754, "body": "this is not what I get. The first line is all zeros, then the following lines start with a <code>1</code> followed by several <code>0</code>, so bottom line, the program behaves correctly as far as i can tell."}, {"owner": {"reputation": 61, "user_id": 3957871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528d241632874789315cea2ec0bd4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Maibaum", "link": "https://stackoverflow.com/users/3957871/frank-maibaum"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523422500, "post_id": 49766038, "comment_id": 86548896, "body": "May I ask how are you running the code? I compile the code with VS2015, then use &quot;mpiexec -n 4 app.exe&quot; from the command prompt and I get six lines of zeroes."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1523422768, "post_id": 49766038, "comment_id": 86548963, "body": "I use <code>Open MPI</code> under Linux fwiw. note you should not <code>MPI_Recv()</code> with <code>MPI_ANY_TAG</code>, but <code>MPI_ANY_SOURCE</code> or <code>i</code> on <code>master</code> and <code>0</code> on slaves. Try fixing that and see how it helps."}, {"owner": {"reputation": 61, "user_id": 3957871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528d241632874789315cea2ec0bd4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Maibaum", "link": "https://stackoverflow.com/users/3957871/frank-maibaum"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523423124, "post_id": 49766038, "comment_id": 86549068, "body": "I replaced the &#39;MPI_ANY_TAG&#39; with &#39;i&#39; and I get exactly what you get. I thought that &#39;MPI_ANY_TAG and &#39;MPI_ANY_SOURCE&#39; had the same effect. Thanks for the help. Could you post your last comment in the form of an answer? Thanks for the help."}], "answers": [{"tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 3, "last_activity_date": 1523424768, "creation_date": 1523424768, "answer_id": 49767208, "question_id": 49766038, "link": "https://stackoverflow.com/questions/49766038/mpi-in-windows-returning-data-from-slave-task-to-master-task/49767208#49767208", "title": "MPI in Windows (returning data from slave task to master task)", "body": "<p>The root cause is your program calls <code>MPI_Recv(...,source=MPI_ANY_TAG, ...)</code></p>\n\n<p><code>MPI_ANY_TAG</code> is not a valid source, and you should use a proper source (e.g. <code>i</code> in <code>master</code>, and <code>0</code> in <code>slave</code>) or <code>MPI_ANY_SOURCE</code>.</p>\n\n<p>FWIW, and do <strong>not</strong> take this for granted since it might change in the future</p>\n\n<ul>\n<li>in <code>Open MPI</code>, <code>MPI_ANY_SOURCE</code> and <code>MPI_ANY_TAG</code> have the same value, that's why I initially thought it worked for me.</li>\n<li>in <code>MPICH</code>, <code>MPI_ANY_TAG</code> have the same value than <code>MPI_PROC_NULL</code>, and that is why messages had only zeros in your environment.</li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 3957871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528d241632874789315cea2ec0bd4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Maibaum", "link": "https://stackoverflow.com/users/3957871/frank-maibaum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 49767208, "answer_count": 1, "score": 2, "last_activity_date": 1523424768, "creation_date": 1523417273, "question_id": 49766038, "link": "https://stackoverflow.com/questions/49766038/mpi-in-windows-returning-data-from-slave-task-to-master-task", "title": "MPI in Windows (returning data from slave task to master task)", "body": "<p>I am in the process of learning how to use MPI.</p>\n\n<p>Right now all I am trying to do is send and receive data between the master task and the slave tasks. Sending data from the master task to the slave tasks works correctly. (I tested this by having each slave print the data they received from the master).</p>\n\n<p>Receiving data in the master task from the slave tasks doesn't seem to work.</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MASTER_TAG 0    \n#define WORKTAG 1\n#define DIETAG 2\n\n#define N 4\n#define ARRAY_SIZE N*N\n\nint getMin(int a, int b);\nvoid print1D(int *arr, int n);\nint* allocateIntegerArray(int n);\nvoid master();\nvoid slave();\n\nint *inputArray = NULL;\nint *outputArray = NULL;\n\nint main(int argc, char **argv)\n{\n    int myrank = 0;\n\n    MPI_Init(&amp;argc, &amp;argv); // initialize MPI\n\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank); // process rank, 0 thru N-1\n\n    if (myrank == 0)\n        master();\n    else\n        slave();\n\n    MPI_Finalize(); // cleanup MPI\n\n    return 0;\n}\n\nvoid master()\n{\n    int numOfTasks;\n    int rank = 0;\n    int work = 0;\n    int startIndex = 0;\n    int dataPerTask = 0;\n    int *tempArray = NULL;\n    int i = 0;\n    int k = 0;\n\n    MPI_Status status;\n\n    MPI_Comm_size( MPI_COMM_WORLD, &amp;numOfTasks); // #processes in application\n\n    // calculate the amount of data that each task will receive\n    dataPerTask = ARRAY_SIZE;\n\n    // create the array that will hold the data that will be transferred back and forth between the master and slave tasks\n    tempArray = allocateIntegerArray( dataPerTask );\n\n    for (i = 1; i &lt; numOfTasks; ++i)\n    {\n        MPI_Send(&amp;dataPerTask, 1, MPI_INT, i, WORKTAG, MPI_COMM_WORLD); // send the size of the data chunk to the slave task\n        MPI_Send(tempArray, dataPerTask, MPI_INT, i, WORKTAG, MPI_COMM_WORLD); // send the actual chunk of data to the slave task\n\n        print1D(tempArray, dataPerTask);\n        MPI_Recv(tempArray, dataPerTask, MPI_INT, MPI_ANY_TAG, WORKTAG, MPI_COMM_WORLD, &amp;status); // receive results from slave task\n        print1D(tempArray, dataPerTask);\n    }\n\n    // tell all the slaves to exit\n    for (i = 1; i &lt; numOfTasks; ++i)\n        MPI_Send(0, 0, MPI_INT, i, DIETAG, MPI_COMM_WORLD);\n\n    free(tempArray);\n}\n\nvoid slave()\n{\n    MPI_Status status;\n    int *in = NULL; // input array\n    int *out = NULL; // outpu array\n    int dataPerTask = 0;\n\n    for (;;)\n    {\n        MPI_Recv(&amp;dataPerTask, 1, MPI_INT, MASTER_TAG, MPI_ANY_TAG, MPI_COMM_WORLD, &amp;status); // get the number of integers in the incoming array\n\n        if (status.MPI_TAG == DIETAG) // check the tag of the received message (if the master task sent the DIETAG, then the slave must stop processing and return)\n            return;\n\n        in = allocateIntegerArray(dataPerTask); // array 'in' holds the data received from the master task\n        out = allocateIntegerArray(dataPerTask); // array 'out' holds the data that is returned to the master task\n\n        MPI_Recv(in, dataPerTask, MPI_INT, MASTER_TAG, MPI_ANY_TAG, MPI_COMM_WORLD, &amp;status); // get the actual data from the master task\n\n        out[0] = 1; // modify the data in some way\n        MPI_Send(out, dataPerTask, MPI_INT, 0, WORKTAG, MPI_COMM_WORLD);\n    }\n\n    free(in);\n    free(out);\n}\n\nvoid print1D(int *arr, int n)\n{\n    int i = 0;\n\n    for (i = 0; i &lt; n; i++)\n        printf(\"%d \", arr[i]);\n\n    printf(\"\\n\");\n}\n\nint* allocateIntegerArray(int n)\n{\n    int i = 0;\n\n    if (n &lt;= 0)\n        return NULL;\n\n    int *arr = (int*) malloc(sizeof(int)*n*n);\n    memset(arr, 0, sizeof(int)*n*n);\n\n    return arr;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1523417008, "post_id": 49765903, "comment_id": 86547412, "body": "<i>What causes this bug</i> -- Is this a homework assignment?  If so, isn&#39;t trying to discover and fix your own bugs part of that assignment?  What debugging have you done?  Did you single-step through your program to see where it goes astray of your plan?"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1523417073, "post_id": 49765903, "comment_id": 86547425, "body": "flush stdout or print a new line after the last <code>println</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1523417292, "post_id": 49765903, "comment_id": 86547479, "body": "Please clarify <code>&quot;wanna&quot;</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1523417325, "post_id": 49765903, "comment_id": 86547492, "body": "<i>is there any better way to do this algorithm</i> -- Try and use this method to sort 4, 5, or 20 numbers based on your criteria.  You will quickly see how impractical your method becomes.  So when you say &quot;better algorithm&quot;, do you mean in the general case?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1523490241, "post_id": 49765903, "comment_id": 86587223, "body": "suggest replacing this: <code>scanf(&quot;%c%c%c&quot;,&amp;A,&amp;B,&amp;C);</code> with this: <code>scanf(&quot; %c %c %c&quot;,&amp;A,&amp;B,&amp;C);</code> (Notice the spaces) so any leading/intervening <code>white space</code> is consumed without corrupting the data"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1523490498, "post_id": 49765903, "comment_id": 86587285, "body": "for ease of readability and understanding: 1) separate code blocks ( <code>for</code> <code>if</code> <code>else</code> <code>while</code> <code>do...while</code> <code>switch</code> <code>case</code> <code>default</code> ) via a single blank line.  2) consistently indent the code.  Indent after every (real or optional) opening brace &#39;{&#39;.  Unindent before every (real or optional) closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces.  3) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1523491251, "post_id": 49765903, "comment_id": 86587472, "body": "always check user input to assure they entered valid data (I.E. <code>A</code> <code>B</code> and <code>C</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1523491477, "post_id": 49765903, "comment_id": 86587526, "body": "three things, taken in any order (a permutation) is 1*2*3 = 6 possiblities.  So only a max of 6 output statements.  Suggest inputting the values as an array of 3 characters, then use <code>strcmp()</code> 5 times to determine which specific order was entered.  Then when the result of the call to <code>strcmp()</code> is 0, then print the three values in one call to printf()"}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1523497403, "post_id": 49765903, "comment_id": 86588748, "body": "Thank you for helping, I successfully made this work by getting help from you guys ! This is not a homework assignment, just found an algorithm practice website and decided to practice. I have not done any debug yet.  Yes, I was trying to say in general case. How can I sort like 20 numbers by specific order, I see the method I am using is pretty simple and not the best."}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1523497496, "post_id": 49765903, "comment_id": 86588764, "body": "The string compare method is a pretty good one for 3 numbers. What if there is are 10 or 20 numbers need to be sorted. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1523497549, "post_id": 49766014, "comment_id": 86588782, "body": "I forgot this infamous bug again! Thank you! I made it work by your help!"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 3, "last_activity_date": 1523417120, "creation_date": 1523417120, "answer_id": 49766014, "question_id": 49765903, "link": "https://stackoverflow.com/questions/49765903/sorting-three-number-in-a-specific-order/49766014#49766014", "title": "sorting three number in a specific order", "body": "<p>First, the <code>mid</code> calculation is wrong (logic error), should be:</p>\n\n<pre><code>for(i = 0; i &lt; 3; i++){\n    if(array[i] != max &amp;&amp; array[i]!= min) // AND not OR\n     {\n      mid = array[i];\n      break; // once found you can break\n    }\n</code></pre>\n\n<p>then it's the infamous \"scanf eats last linefeed bug\", which puts <code>\\n</code> in <code>A</code> because you previously entered the list of the numbers, and shifts the rest of your variables too. You can fix it like this:</p>\n\n<pre><code>scanf(\" %c%c%c\",&amp;A,&amp;B,&amp;C);\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1523417120, "creation_date": 1523416389, "question_id": 49765903, "link": "https://stackoverflow.com/questions/49765903/sorting-three-number-in-a-specific-order", "title": "sorting three number in a specific order", "body": "<p>So, I am just trying to sort three numbers in a specific order indicated by user.\n<a href=\"https://i.stack.imgur.com/djmM0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/djmM0.png\" alt=\"Example\"></a></p>\n\n<p>So, in this example, user input three numbers: 1 5 3, and wanna sort them in ABC order which means from minimal to middle to maximum. So, it output 1 3 5.\nSecond example is sorting in CAB order, which means maximal to minimal to middle.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n   int i,array[3];\n   for(i = 0; i &lt; 3; i++)\n    scanf(\"%d\",&amp;array[i]);\n   int max,mid,min;\n   max = array[0];\n   mid = array[0];\n   min = array[0];\n   for(i = 0; i &lt; 3; i++){\n       if(max &lt; array[i])\n       max= array[i];\n       if(min &gt; array[i])\n            min = array[i];\n   }\n   for(i = 0; i &lt; 3; i++){\n       if(array[i] != max || array[i]!= min)\n         mid = array[i];\n  }\n   char A,B,C;\n   scanf(\"%c%c%c\",&amp;A,&amp;B,&amp;C);\n\n   if(A == 'A')\n    printf(\"%d \",min);\n\n   if(B == 'A')\n     printf(\"%d \",min);\n    if(C == 'A')\n        printf(\"%d \",min);\n    if(A =='B')\n        printf(\"%d \",mid);\n    if(B == 'B')\n        printf(\"%d \",mid);\n    if(C =='B')\n        printf(\"%d \",mid);\n    if(A == 'C')\n        printf(\"%d \",max);\n    if(B == 'C')\n        printf(\"%d \",max);\n    if(C == 'C')\n        printf(\"%d \",max);\n\n\n}\n</code></pre>\n\n<p>Basically, I am just find the max, min and mid in three numbers. Then test the letter A,B or C. </p>\n\n<p>If I input 1 5 3 and ABC(first example), it would print out only 1 3.\nFor the second example, it only prints out 6 2.</p>\n\n<p>What causes this bug and is there any better way to do this algorithm?</p>\n"}, {"tags": ["c", "visual-studio", "data-structures", "struct"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9628077"}, "edited": false, "score": 0, "creation_date": 1523417391, "post_id": 49765864, "comment_id": 86547509, "body": "thank you. Now how call this routine after this changes? see my edition please."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9628077"}, "edited": false, "score": 0, "creation_date": 1523477225, "post_id": 49765864, "comment_id": 86582640, "body": "this sintaxe (<code>Element e = { .data = spi-&gt;ImageName };</code>) generates an error, see my edition 2."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1523479256, "post_id": 49765864, "comment_id": 86583657, "body": "@LuizEduardo Ok, I fixed it. I notices another problem: you do a shallow copy of the UNICODE_STRING. You need to change that."}], "tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 1, "last_activity_date": 1523539016, "last_edit_date": 1523539016, "creation_date": 1523416099, "answer_id": 49765864, "question_id": 49765716, "link": "https://stackoverflow.com/questions/49765716/c-how-make-a-arraylist-implementation-compatible-with-unicode-string-data/49765864#49765864", "title": "C: How make a ArrayList implementation compatible with UNICODE_STRING data?", "body": "<p>UNICODE_STRING is a struct. You'll have to either do memcmp() on the entire struct or wcscmp() on e.data.Buffer</p>\n\n<pre><code>int indexOf(const ArrayList *const list, Element e)\n{\n    int index = 0;\n    while (index &lt;= list-&gt;current)\n    {\n        // Check same lengths and then do string compare\n        if (e.data.Length == list-&gt;elements[index].data.Length &amp;&amp;\n             0 == wcsncmp(e.data.Buffer,\n                          list-&gt;elements[index].data.Buffer,\n                          list-&gt;elements[index].data.Length))\n            return index;\n        index++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>// Update after comment</p>\n\n<p>Here's the whole thing with proper memory management of the <code>UNICODE_STRING</code>s</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;Winternl.h&gt;\n\n#pragma comment(lib,\"ntdll.lib\")\n\ntypedef struct _SYSTEM_PROCESS_INFO\n{\n    ULONG                   NextEntryOffset;\n    ULONG                   NumberOfThreads;\n    LARGE_INTEGER           Reserved[3];\n    LARGE_INTEGER           CreateTime;\n    LARGE_INTEGER           UserTime;\n    LARGE_INTEGER           KernelTime;\n    UNICODE_STRING          ImageName;\n    ULONG                   BasePriority;\n    HANDLE                  ProcessId;\n    HANDLE                  InheritedFromProcessId;\n}SYSTEM_PROCESS_INFO, *PSYSTEM_PROCESS_INFO;\n\ntypedef struct\n{\n    // Changed to be a pointer\n    UNICODE_STRING *data;\n}Element;\n\ntypedef struct\n{\n    int current;\n    int size;\n    int increment_rate;\n    Element *elements;\n}ArrayList;\n\n// Duplicate a UNICODE_STRING\nUNICODE_STRING * CopyUString(UNICODE_STRING *src)\n{\n    UNICODE_STRING *dest = (UNICODE_STRING *) malloc(sizeof UNICODE_STRING);\n    dest-&gt;Length = src-&gt;Length;\n    dest-&gt;MaximumLength = src-&gt;MaximumLength;\n    dest-&gt;Buffer = (PWSTR) malloc(sizeof WCHAR * dest-&gt;MaximumLength);\n    memcpy(dest-&gt;Buffer, src-&gt;Buffer, sizeof WCHAR * dest-&gt;MaximumLength);\n    return dest;\n}\n// Free a duplicated UNICODE_STRING\nvoid FreeUString(UNICODE_STRING *src)\n{\n    free(src-&gt;Buffer);\n    free(src);\n}\n\nvoid initWithSizeAndIncRate(ArrayList *const list, int size, int rate)\n{\n    list-&gt;size = size;\n    list-&gt;increment_rate = rate;\n    list-&gt;elements = (Element*) calloc(sizeof(Element), list-&gt;size);\n    list-&gt;current = -1;\n}\n\nvoid initWithSize(ArrayList *const list, int size)\n{\n    initWithSizeAndIncRate(list, size, 50);\n}\n\nvoid init(ArrayList *const list)\n{\n    initWithSize(list, 100);\n}\n\nvoid arraryCopy(void *dest, int dIndex, const void* src, int sIndex, int len, int destLen, size_t size)\n{\n    uint8_t *udest = (uint8_t*) dest;\n    uint8_t *usrc = (uint8_t*) src;\n    dIndex *= size;\n    sIndex *= size;\n    len *= size;\n    destLen *= size;\n\n    if (src != dest)\n    {\n        memcpy(&amp;udest[dIndex], &amp;usrc[sIndex], len);\n    }\n    else\n    {\n        if (dIndex &gt; sIndex)\n        {\n            uint8_t *tmp = (uint8_t*) calloc(destLen, size);\n            memcpy(tmp, &amp;udest[dIndex], (destLen - dIndex));\n            memcpy(&amp;udest[dIndex], &amp;usrc[sIndex], len);\n            memcpy(&amp;udest[dIndex + len], tmp, (destLen - dIndex));\n            free(tmp);\n        }\n        else if (sIndex &gt; dIndex)\n        {\n            memcpy(&amp;udest[dIndex], &amp;usrc[sIndex], (destLen - sIndex) + 1);\n        }\n        else\n            return;\n    }\n}\n\nvoid clear(ArrayList *const list)\n{\n    while (list-&gt;current &gt;= 0)\n    {\n        FreeUString(list-&gt;elements[list-&gt;current].data);\n        list-&gt;current--;\n    }\n}\n\nvoid wide(ArrayList* const list)\n{\n    list-&gt;size += list-&gt;increment_rate;\n    Element *newArr = (Element*) calloc(sizeof(Element), list-&gt;size);\n    arraryCopy(newArr, 0, list-&gt;elements, 0, list-&gt;current, list-&gt;size, sizeof(Element));\n    free(list-&gt;elements);\n    list-&gt;elements = newArr;\n}\n\nint add(ArrayList *const list, Element *e)\n{\n    if (++list-&gt;current &lt; list-&gt;size)\n    {\n        list-&gt;elements[list-&gt;current].data = CopyUString(e-&gt;data);\n        return 1;\n    }\n    else\n    {\n        wide(list);\n        list-&gt;elements[list-&gt;current].data = CopyUString(e-&gt;data);\n        return 1;\n    }\n    return 0;\n}\n\nint indexOf(const ArrayList *const list, Element *e)\n{\n    int index = 0;\n    while (index &lt;= list-&gt;current)\n    {\n        // Check same lengths and then do string compare\n        if (e-&gt;data-&gt;Length == list-&gt;elements[index].data-&gt;Length &amp;&amp;\n            0 == wcsncmp(e-&gt;data-&gt;Buffer,\n            list-&gt;elements[index].data-&gt;Buffer,\n            list-&gt;elements[index].data-&gt;Length))\n            return index;\n        index++;\n    }\n    return 0;\n}\n\nvoid printElement(const Element *const e)\n{\n    wprintf(L\"%s \", e-&gt;data-&gt;Buffer);\n}\n\nvoid print(const ArrayList *const list)\n{\n    int i;\n    for (i = 0; i &lt;= list-&gt;current; i++)\n    {\n        Element e = list-&gt;elements[i];\n        printElement(&amp;e);\n    }\n    printf(\"\\n\");\n}\n\nvoid clean(ArrayList *list)\n{\n    free(list-&gt;elements);\n}\n\nint _tmain(int argc, _TCHAR* argv [])\n{\n    NTSTATUS status;\n    PVOID buffer;\n    PSYSTEM_PROCESS_INFO spi;\n    ArrayList list;\n\n    init(&amp;list);\n\n    buffer = VirtualAlloc(NULL, 1024 * 1024, MEM_COMMIT | MEM_RESERVE, PAGE_READWRITE);\n\n    if (!buffer)\n    {\n        printf(\"\\nError: Unable to allocate memory for process list (%d)\\n\", GetLastError());\n        return -1;\n    }\n\n    printf(\"\\nProcess list allocated at address %#x\\n\", buffer);\n    spi = (PSYSTEM_PROCESS_INFO) buffer;\n\n    if (!NT_SUCCESS(status = NtQuerySystemInformation(SystemProcessInformation, spi, 1024 * 1024, NULL)))\n    {\n        printf(\"\\nError: Unable to query process list (%#x)\\n\", status);\n\n        VirtualFree(buffer, 0, MEM_RELEASE);\n        return -1;\n    }\n\n    Element e;\n    while (spi-&gt;NextEntryOffset)\n    {\n        printf(\"\\nProcess name: %wZ | Process ID: %d\\n\", &amp;spi-&gt;ImageName, spi-&gt;ProcessId);\n\n        e.data = &amp;(spi-&gt;ImageName);\n        int i = indexOf(&amp;list, &amp;e);\n\n        if (i &gt; 0)\n            printf(\"process already in list \\n\");\n        else\n            add(&amp;list, &amp;e);\n\n        spi = (PSYSTEM_PROCESS_INFO) ((LPBYTE) spi + spi-&gt;NextEntryOffset);\n    }\n    VirtualFree(buffer, 0, MEM_RELEASE);\n\n    print(&amp;list);\n    clean(&amp;list);\n\n    _getch();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9628077"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 49765864, "answer_count": 1, "score": 1, "last_activity_date": 1523539016, "creation_date": 1523414933, "last_edit_date": 1523477126, "question_id": 49765716, "link": "https://stackoverflow.com/questions/49765716/c-how-make-a-arraylist-implementation-compatible-with-unicode-string-data", "title": "C: How make a ArrayList implementation compatible with UNICODE_STRING data?", "body": "<p>This following code must be able of add to ArrayList each process name since that current name still not is stored on list. The code of ArrayList implementation was from <a href=\"http://m-hewedy.blogspot.com.br/2010/09/java-like-arraylist-in-c.html\" rel=\"nofollow noreferrer\">this</a> reference, but have a trouble that, when changed <code>int</code> to <code>UNICODE_STRING</code> data (in <code>Element</code> structure, cause a sintaxe error on line:</p>\n\n<pre><code>if (e.data == list-&gt;elements[index].data) return index;\n</code></pre>\n\n<blockquote>\n  <p>Error 1   error C2088: '==' : illegal for struct</p>\n</blockquote>\n\n<p>of <code>indexOf()</code> routine.</p>\n\n<p>So, how fix?</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;Winternl.h&gt;\n\n#pragma comment(lib,\"ntdll.lib\")\n\ntypedef struct _SYSTEM_PROCESS_INFO\n{\n    ULONG                   NextEntryOffset;\n    ULONG                   NumberOfThreads;\n    LARGE_INTEGER           Reserved[3];\n    LARGE_INTEGER           CreateTime;\n    LARGE_INTEGER           UserTime;\n    LARGE_INTEGER           KernelTime;\n    UNICODE_STRING          ImageName;\n    ULONG                   BasePriority;\n    HANDLE                  ProcessId;\n    HANDLE                  InheritedFromProcessId;\n}SYSTEM_PROCESS_INFO, *PSYSTEM_PROCESS_INFO;\n\ntypedef struct\n{\n    UNICODE_STRING data;\n}Element;\n\ntypedef struct\n{\n    int current;\n    int size;\n    int increment_rate;\n    Element *elements;\n}ArrayList;\n\nvoid initWithSizeAndIncRate(ArrayList *const list, int size, int rate)\n{\n    list-&gt;size = size;\n    list-&gt;increment_rate = rate;\n    list-&gt;elements = (Element*)calloc(sizeof(Element), list-&gt;size);\n    list-&gt;current = -1;\n}\n\nvoid initWithSize(ArrayList *const list, int size)\n{\n    initWithSizeAndIncRate(list, size, 50);\n}\n\nvoid init(ArrayList *const list)\n{\n    initWithSize(list, 100);\n}\n\nvoid arraryCopy(void *dest, int dIndex, const void* src, int sIndex, int len, int destLen, size_t size)\n{\n    uint8_t *udest = (uint8_t*)dest;\n    uint8_t *usrc = (uint8_t*)src;\n    dIndex *= size;\n    sIndex *= size;\n    len *= size;\n    destLen *= size;\n\n    if (src != dest)\n    {\n        memcpy(&amp;udest[dIndex], &amp;usrc[sIndex], len);\n    }\n    else\n    {\n        if (dIndex &gt; sIndex)\n        {\n            uint8_t *tmp = (uint8_t*)calloc(destLen, size);\n            memcpy(tmp, &amp;udest[dIndex], (destLen - dIndex));\n            memcpy(&amp;udest[dIndex], &amp;usrc[sIndex], len);\n            memcpy(&amp;udest[dIndex + len], tmp, (destLen - dIndex));\n            free(tmp);\n        }\n        else if (sIndex &gt; dIndex)\n        {\n            memcpy(&amp;udest[dIndex], &amp;usrc[sIndex], (destLen - sIndex) + 1);\n        }\n        else\n            return;\n    }\n}\n\nvoid clear(ArrayList *const list)\n{\n    while (list-&gt;current &gt;= 0)\n    {\n        list-&gt;elements[list-&gt;current] = (Element){ 0 };\n        list-&gt;current--;\n    }\n}\n\nvoid wide(ArrayList* const list)\n{\n    list-&gt;size += list-&gt;increment_rate;\n    Element *newArr = (Element*)calloc(sizeof(Element), list-&gt;size);\n    arraryCopy(newArr, 0, list-&gt;elements, 0, list-&gt;current, list-&gt;size, sizeof(Element));\n    free(list-&gt;elements);\n    list-&gt;elements = newArr;\n}\n\nint add(ArrayList *const list, Element e)\n{\n    if (++list-&gt;current &lt; list-&gt;size)\n    {\n        list-&gt;elements[list-&gt;current] = e;\n        return 1;\n    }\n    else\n    {\n        wide(list);\n        list-&gt;elements[list-&gt;current] = e;\n        return 1;\n    }\n    return 0;\n}\n\nint indexOf(const ArrayList *const list, Element e)\n{\n    int index = 0;\n    while (index &lt;= list-&gt;current)\n    {\n        if (e.data == list-&gt;elements[index].data) return index;\n        index++;\n    }\n    return 0;\n}\n\nvoid printElement(const Element *const e)\n{\n    printf(\"%i \", e-&gt;data);\n}\n\nvoid print(const ArrayList *const list)\n{\n    int i;\n    for (i = 0; i &lt;= list-&gt;current; i++)\n    {\n        Element e = list-&gt;elements[i];\n        printElement(&amp;e);\n    }\n    printf(\"\\n\");\n}\n\nvoid clean(ArrayList *list)\n{\n    free(list-&gt;elements);\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    NTSTATUS status;\n    PVOID buffer;\n    PSYSTEM_PROCESS_INFO spi;\n    ArrayList list;\n\n    init(&amp;list);\n\n    buffer = VirtualAlloc(NULL, 1024 * 1024, MEM_COMMIT | MEM_RESERVE, PAGE_READWRITE);\n\n    if (!buffer)\n    {\n        printf(\"\\nError: Unable to allocate memory for process list (%d)\\n\", GetLastError());\n        return -1;\n    }\n\n    printf(\"\\nProcess list allocated at address %#x\\n\", buffer);\n    spi = (PSYSTEM_PROCESS_INFO)buffer;\n\n    if (!NT_SUCCESS(status = NtQuerySystemInformation(SystemProcessInformation, spi, 1024 * 1024, NULL)))\n    {\n        printf(\"\\nError: Unable to query process list (%#x)\\n\", status);\n\n        VirtualFree(buffer, 0, MEM_RELEASE);\n        return -1;\n    }\n\n    while (spi-&gt;NextEntryOffset)\n    {\n        printf(\"\\nProcess name: %wZ | Process ID: %d\\n\", &amp;spi-&gt;ImageName, spi-&gt;ProcessId);\n\n        int i = indexOf(&amp;list, (Element){ spi-&gt;ImageName });\n\n        if (i &gt; 0)\n            print(\"process already in list \\n\");\n        else\n            add(&amp;list, (Element){ spi-&gt;ImageName });\n\n        spi = (PSYSTEM_PROCESS_INFO)((LPBYTE)spi + spi-&gt;NextEntryOffset);\n    }\n    VirtualFree(buffer, 0, MEM_RELEASE);\n\n    print(&amp;list);\n    clean(&amp;list);\n\n    _getch();\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>After answer of @Johnny Mopp below, now how call correctly <code>indexof</code> routine?\nI tried like this:</p>\n\n<pre><code>int i = indexOf(&amp;list, (Element){ &amp;spi-&gt;ImageName.Buffer });\n\n        if (i &gt;= 0)\n            printf(\"process already in list \\n\");\n        else\n            add(&amp;list, (Element){ &amp;spi-&gt;ImageName.Buffer });\n</code></pre>\n\n<p>but <code>indexof</code> say that all already is present in list, this is wrong!</p>\n\n<hr>\n\n<p><strong>EDIT 2</strong>: </p>\n\n<p>Error after first edition of answer:\n<a href=\"https://i.stack.imgur.com/zQ230.png\" rel=\"nofollow noreferrer\">IMAGE</a></p>\n"}, {"tags": ["c", "arrays", "constants"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1523414266, "post_id": 49765593, "comment_id": 86546775, "body": "<code>#define numPlayers 2</code>, declaring an <code>int</code> as <code>const</code> is not a constant for purposes of array declaration."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1523414480, "post_id": 49765593, "comment_id": 86546825, "body": "Also, you have the arguments to <a href=\"http://en.cppreference.com/w/c/memory/calloc\" rel=\"nofollow noreferrer\"><code>calloc(size_t num, size_t size)</code></a> backwards."}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 2, "creation_date": 1523414683, "post_id": 49765593, "comment_id": 86546874, "body": "seems ancient version of C. Works weell in modern compilers. BTW #define style <code>is medicine worse than the disease</code>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1523458718, "post_id": 49765593, "comment_id": 86572040, "body": "<a href=\"https://stackoverflow.com/q/605845/995714\">don&#39;t cast the result of the <code>malloc</code> family in C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 6703062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466a0d7dfd393dfbc20324e9ad532187?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/6703062/ash"}, "is_accepted": false, "score": 1, "last_activity_date": 1523414485, "last_edit_date": 1523414485, "creation_date": 1523414400, "answer_id": 49765631, "question_id": 49765593, "link": "https://stackoverflow.com/questions/49765593/constant-integer-and-array-initialization-in-c/49765631#49765631", "title": "Constant Integer and Array Initialization in C", "body": "<p><code>const</code> are not true constants, the compiler will not allow you to change the value only. I will suggest use <code>#define numPlayers 2</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1523457797, "last_edit_date": 1523457797, "creation_date": 1523416584, "answer_id": 49765929, "question_id": 49765593, "link": "https://stackoverflow.com/questions/49765593/constant-integer-and-array-initialization-in-c/49765929#49765929", "title": "Constant Integer and Array Initialization in C", "body": "<p>In C99, the below works fine inside a function.  It is a <em>variable length array</em> (VLA).</p>\n\n<pre><code>const int numPlayers = 2;\nplayer players[numPlayers];\n</code></pre>\n\n<p>Otherwise use a <code>#define</code> for a true <em>constant</em>.</p>\n\n<pre><code>#define numPlayers 2\nplayer players[numPlayers];\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3047847, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/p9k63.jpg?s=128&g=1", "display_name": "GrimThor3", "link": "https://stackoverflow.com/users/3047847/grimthor3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 49765929, "answer_count": 2, "score": 3, "last_activity_date": 1523457797, "creation_date": 1523414110, "last_edit_date": 1523416833, "question_id": 49765593, "link": "https://stackoverflow.com/questions/49765593/constant-integer-and-array-initialization-in-c", "title": "Constant Integer and Array Initialization in C", "body": "<p>I have this expression:</p>\n\n<pre><code>const int numPlayers = 2;\nplayer players[numPlayers];\n</code></pre>\n\n<p>This is an array of user-defined type players (using struct). However, I get an error saying that <code>numPlayers</code> has to be a constant value. </p>\n\n<pre><code>expression must have a constant value\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<hr>\n\n<p>I have also initialized the array like this:</p>\n\n<pre><code>player *players = (player*)calloc(sizeof(player), numPlayers);\n</code></pre>\n\n<p>But I cannot access any of the local variables of the struct without the program crashing. </p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9404150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db431d01468d7362635671373d669f1?s=128&d=identicon&r=PG&f=1", "display_name": "S Jiles", "link": "https://stackoverflow.com/users/9404150/s-jiles"}, "edited": false, "score": 0, "creation_date": 1523415130, "post_id": 49765707, "comment_id": 86546995, "body": "Oh my gosh that makes so much sense now. I made a variable &quot;length&quot; and used that for the loop and it worked perfectly."}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 53, "user_id": 9404150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db431d01468d7362635671373d669f1?s=128&d=identicon&r=PG&f=1", "display_name": "S Jiles", "link": "https://stackoverflow.com/users/9404150/s-jiles"}, "edited": false, "score": 0, "creation_date": 1523415431, "post_id": 49765707, "comment_id": 86547067, "body": "@SJiles great glad it worked - you could try the code above which does things a little differently and moves words from sentence into a new array.... but glad it is working for you"}], "tags": [], "owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1523415340, "last_edit_date": 1523415340, "creation_date": 1523414898, "answer_id": 49765707, "question_id": 49765569, "link": "https://stackoverflow.com/questions/49765569/store-pointer-to-words-in-sentence/49765707#49765707", "title": "store pointer to words in sentence", "body": "<p>Your problem is that you are trying to leave everything inside <code>string[]</code> and not copy things into <code>list[]</code>. You have a problem with your <code>for</code> loop because it will recheck <code>strlen[string]</code> and after you add the  <code>\\0</code> you have cut short <code>string</code> so the loop will stop. </p>\n\n<p>I don't know how you are handling memory, but it would be better to have something like</p>\n\n<pre><code>char word[50][50]  //choose the values to suit - 1st is max words, \n                   //  2nd is max length of word\n\nint i, j, k; \n//new loop\nfor(i = 0, j=0,k=0; i &lt; (strlen(sentence)); i++, k++)\n{\n  word[j][k]=string[i];\n  if (word[j][k]=' ')\n  {\n     word[j][k]=0;\n     j++; k=0;  // to move to next word \n  }\n}\n</code></pre>\n\n<p>this code should be all you need to put words from sentence into the 2D array word[][]</p>\n"}], "owner": {"reputation": 53, "user_id": 9404150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db431d01468d7362635671373d669f1?s=128&d=identicon&r=PG&f=1", "display_name": "S Jiles", "link": "https://stackoverflow.com/users/9404150/s-jiles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 49765707, "answer_count": 1, "score": 2, "last_activity_date": 1523415340, "creation_date": 1523413927, "question_id": 49765569, "link": "https://stackoverflow.com/questions/49765569/store-pointer-to-words-in-sentence", "title": "store pointer to words in sentence", "body": "<p>I have run across a problem where, when storing pointers to characters in a sentence into a new array, if I add a '\\0' character to the sentence to split up the words the program ends early, but if I do not add that character then the new array stores too many words.</p>\n\n<pre><code>   int prevSpace = 1;\n   for(int i = 0; i &lt; (strlen(sentence)); i++){\n       if(sentence[i] != ' ' &amp;&amp; prevSpace == 1){\n          prevSpace = 0;\n          List[j] = &amp;sentence[i];\n          printf(\"list[%d] now points to %c\\n\", j, sentence[i]);\n          j++;\n       }\n\n       if(sentence[i] != ' '){\n           prevSpace = 0;\n       }\n\n       if(sentence[i] == ' '){\n           /*if we find space and last char was not a space, add '\\0'\n           if(prevSpace == 0){\n              printf(\"end added\\n\");\n              sentence[i] = '\\0';        /**** &lt;&lt;&lt;FOCUS ON THIS LINE! */\n           }\n\n           prevSpace = 1;\n       }\n   }\n\n   /*finish List with NULL*/\n   List[j] = NULL;\n\n\n   /*print out list of words*/\n   for(int i = 0; i &lt; count; i++){\n      printf(\"List[%d] = %s\\n\", i, List[i]);\n   }\n</code></pre>\n\n<p>The problem with this code is, instead of the array list having each word, it has only the first word, then many nulls. For the sentence \"test one two three\", the output is:</p>\n\n<pre><code>list[0] now points to t\n\nList[0] = test\nList[1] = (null)\nList[2] = (null)\nList[3] = (null)\n</code></pre>\n\n<p>If I change that important line to    line[i] = 'X';</p>\n\n<p>then output for the sentence \"test one two three\" is:</p>\n\n<pre><code>list[0] now points to t\nlist[1] now points to o\nlist[2] now points to t\nlist[3] now points to t\n\nList[0] = testX  oneX  twoX  three\nList[1] = oneX  twoX  three\nList[2] = twoX  three\nList[3] = three\n</code></pre>\n\n<p>but this is bad because I want list[0] to only have \"test\", list[1] to only have \"one\", list[2] to only have \"two\", and list[3] to only have \"three\". I need a way through this so that I can use the end of string character '\\0'.</p>\n"}, {"tags": ["c", "buffer", "shader", "vulkan"], "comments": [{"owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 0, "creation_date": 1523442076, "post_id": 49765535, "comment_id": 86559901, "body": "What you have shown LGTM. You should test error codes of <code>vkBindBufferMemory</code> and <code>vkMapMemory</code>. Validation can be finicky -- test it is actually working by breaking something. Make sure you did not forget <code>vkQueueSubmit</code> or <code>vkQueuePresentKHR</code>."}, {"owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 2, "creation_date": 1523442264, "post_id": 49765535, "comment_id": 86560031, "body": "PS: It can be any number of things. While not particulary SO style, full code and\\or <code>api_dump</code> might help here."}, {"owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 0, "creation_date": 1523442555, "post_id": 49765535, "comment_id": 86560232, "body": "PS2: <code>(uint32_t)sizeof(vertices)&#47;sizeof(vertices[0])</code>. Assuming it compiles it should be okay, but type-cast have precedence over division."}, {"owner": {"reputation": 141, "user_id": 4694986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9397538b025572697152e6564be84c8?s=128&d=identicon&r=PG&f=1", "display_name": "TJGreen", "link": "https://stackoverflow.com/users/4694986/tjgreen"}, "reply_to_user": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 0, "creation_date": 1523489427, "post_id": 49765535, "comment_id": 86587053, "body": "Checked the return values from vkBindBufferMemory and vkMapMemory and they did return VK_SUCCESS.  Both vkQueueSubmit or vkQueuePresentKHR are called in the render loop. Looking at the code some more I think the error could be in how I am mapping the memory with vkMapMemory, but not entirely sure how to test that. Full code is here <a href=\"https://github.com/TJGreen0211/vulkan/tree/master/src\" rel=\"nofollow noreferrer\">github.com/TJGreen0211/vulkan/tree/master/src</a>"}, {"owner": {"reputation": 141, "user_id": 4694986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9397538b025572697152e6564be84c8?s=128&d=identicon&r=PG&f=1", "display_name": "TJGreen", "link": "https://stackoverflow.com/users/4694986/tjgreen"}, "reply_to_user": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 1, "creation_date": 1523581814, "post_id": 49765535, "comment_id": 86630654, "body": "Thank you for your pointers in narrowing down the issue. The issue had to do with the memcpy for the vertexData struct."}], "owner": {"reputation": 141, "user_id": 4694986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9397538b025572697152e6564be84c8?s=128&d=identicon&r=PG&f=1", "display_name": "TJGreen", "link": "https://stackoverflow.com/users/4694986/tjgreen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523413604, "creation_date": 1523413604, "question_id": 49765535, "link": "https://stackoverflow.com/questions/49765535/vulkan-vertex-buffer-c", "title": "Vulkan Vertex Buffer C", "body": "<p>I am attempting to create a vertex buffer in Vulkan using C. When attempting to pass vertex data to the GPU nothing is displayed. Additionally having validation layers on, no errors or warnings are raised. I have tried changing the buffer size or using a different data set and checking the size of the buffers but to no avail. </p>\n\n<p>Posted below is the relevant sections of code for creating the buffer.</p>\n\n<p>Vertex data struct:</p>\n\n<pre><code>typedef struct vertexData {\n    vec2 pos;\n    vec3 color;\n} vertexData;\n</code></pre>\n\n<p>Vertex data:</p>\n\n<pre><code>const vertexData vertices[3] = {\n    {{0.0f,-0.5},{1.0f, 0.0f, 0.0f}},\n    {{0.5f,0.5},{0.0f, 1.0f, 0.0f}},\n    {{-0.5f,0.5},{0.0f, 0.0f, 1.0f}},\n};\n</code></pre>\n\n<p>Vertex descriptions:</p>\n\n<pre><code>static VkVertexInputBindingDescription getBindingDescription() {\n    VkVertexInputBindingDescription bindingDescription ={\n        .binding = 0,\n        .stride = sizeof(vertexData),\n        .inputRate = VK_VERTEX_INPUT_RATE_VERTEX,\n    };\n    return bindingDescription;\n}\n\nstatic VkVertexInputAttributeDescription *getAttributeDescriptions() {\n    VkVertexInputAttributeDescription *attributeDescriptions = malloc(2*sizeof(VkVertexInputAttributeDescription));\n    attributeDescriptions[0].binding = 0;\n    attributeDescriptions[0].location = 0;\n    attributeDescriptions[0].format = VK_FORMAT_R32G32_SFLOAT;\n    attributeDescriptions[0].offset = offsetof(vertexData, pos);\n\n    attributeDescriptions[1].binding = 0;\n    attributeDescriptions[1].location = 1;\n    attributeDescriptions[1].format = VK_FORMAT_R32G32B32_SFLOAT;\n    attributeDescriptions[1].offset = offsetof(vertexData, color);\n\n    return attributeDescriptions;\n}\n</code></pre>\n\n<p>Creating the vertex info:</p>\n\n<pre><code>VkVertexInputBindingDescription bindingDescription = getBindingDescription();\nVkVertexInputAttributeDescription *attributeDescriptions;\nattributeDescriptions = getAttributeDescriptions();\nVkPipelineVertexInputStateCreateInfo vertexInputInfo = {\n    .sType = VK_STRUCTURE_TYPE_PIPELINE_VERTEX_INPUT_STATE_CREATE_INFO,\n    .vertexBindingDescriptionCount = 1,\n    .pVertexBindingDescriptions = &amp;bindingDescription,\n    .vertexAttributeDescriptionCount = 2,\n    .pVertexAttributeDescriptions = attributeDescriptions,\n};\n</code></pre>\n\n<p>Creating the actual vertex buffer:</p>\n\n<pre><code>void createVertexBuffer() {\n    VkBufferCreateInfo bufferInfo = {\n        .sType = VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO,\n        .size = sizeof(vertices),\n        .usage = VK_BUFFER_USAGE_VERTEX_BUFFER_BIT,\n        .sharingMode = VK_SHARING_MODE_EXCLUSIVE,\n    };\n\n    if(vkCreateBuffer(device, &amp;bufferInfo, NULL, &amp;vertexBuffer) != VK_SUCCESS) {\n        printf(\"Failed to create vertex buffer.\\n\");\n        cleanup();\n    }\n\n    VkMemoryRequirements memRequirements;\n    vkGetBufferMemoryRequirements(device, vertexBuffer, &amp;memRequirements);\n\n    VkMemoryAllocateInfo allocInfo = {\n        .sType = VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO,\n        .allocationSize = memRequirements.size,\n        .memoryTypeIndex = findMemoryType(memRequirements.memoryTypeBits, VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT),\n    };\n\n    if(vkAllocateMemory(device, &amp;allocInfo, NULL, &amp;vertexBufferMemory) != VK_SUCCESS) {\n        printf(\"Failed to allocate vertex buffer memory.\\n\");\n        cleanup();\n    }\n    vkBindBufferMemory(device, vertexBuffer, vertexBufferMemory, 0);\n\n    void *data;\n    vkMapMemory(device, vertexBufferMemory, 0, bufferInfo.size, 0, &amp;data);\n        memcpy(data, vertices, sizeof(vertices));\n    vkUnmapMemory(device, vertexBufferMemory);\n}\n</code></pre>\n\n<p>And finally the actual draw command:</p>\n\n<pre><code>vkCmdBindPipeline(commandBuffers[i], VK_PIPELINE_BIND_POINT_GRAPHICS,  graphicsPipeline);\n    VkBuffer vertexBuffers[] = {vertexBuffer};\n    VkDeviceSize offsets[] = {0};\n    vkCmdBindVertexBuffers(commandBuffers[i], 0, 1, vertexBuffers, offsets);\n    vkCmdDraw(commandBuffers[i], (uint32_t)sizeof(vertices)/sizeof(vertices[0]), 1, 0, 0);\n</code></pre>\n\n<p>The shaders are simple pass through shaders. They work when vertex data is hardcoded into them. The most I have been able to display is what looks like junk data on screen, which I believe was just allocating random/incorrect memory to the buffer. With the code in the current state nothing is displayed. </p>\n\n<p>Any help is appreciated, thanks.</p>\n"}, {"tags": ["c", "linux", "unix", "exec"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 0, "creation_date": 1523414861, "post_id": 49765104, "comment_id": 86546916, "body": "thx, it work! but I have a question still, which is the union use the same memory with each member. so, of course, the    tv.i is same as the    tv.a, and, it can passing to exec* like char *. and I right?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "edited": false, "score": 0, "creation_date": 1523415409, "post_id": 49765104, "comment_id": 86547063, "body": "@umbreLLaJYL The <code>i</code> and <code>c</code> fields in the union do occupy the same memory, but <code>c</code> isn&#39;t what <code>i</code> looks like as a string.  Assuming little-endian byte ordering, 12345 (0x3039 in hex) is represented by the bytes 0x39 0x30 0x0 0x0, which is what <code>c</code> will subsequently contain.  This does end up being a null terminated string, and assuming ASCII encoding the resulting string is actually &quot;90&quot;."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1523410358, "creation_date": 1523410358, "answer_id": 49765104, "question_id": 49765045, "link": "https://stackoverflow.com/questions/49765045/how-to-pass-a-variable-via-exec/49765104#49765104", "title": "how to pass a variable via exec*", "body": "<p>The union isn't converting the number to its string representation as you seem to expect.  What it's actually doing is allowing access to the individual bytes that make up the <code>int</code>, which is not a string.  Passing a character array that is not a string to a function expecting a string invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>What you want instead is to use <code>snprintf</code> to convert the integer to a string and pass that string to <code>execlp</code>.  Then in the child process, use <code>atoi</code> to convert the string back to an integer.</p>\n\n<pre><code>/* parent */\nint main(int argc, char *argv[])\n{\n    char str[50];\n    snprintf(str, sizeof(str), \"%d\", 12345);\n\n    if(fork() == 0)\n        execlp(\"./test\", str, \"abcd\", (char *)0);\n    return 0;\n}\n\n/* child */\nint main(int argc, char *argv[])\n{\n    int i = atoi(argv[0]);\n\n    printf(\"child: argc=%d, argv0: %d, argv1: %s\\n\", argc, i, argv[1]);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 9117064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed07a0aa6b568fd89bbed3051da4c08d?s=128&d=identicon&r=PG&f=1", "display_name": "umbreLLaJYL", "link": "https://stackoverflow.com/users/9117064/umbrellajyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2008, "favorite_count": 0, "accepted_answer_id": 49765104, "answer_count": 1, "score": 0, "last_activity_date": 1523410358, "creation_date": 1523409870, "question_id": 49765045, "link": "https://stackoverflow.com/questions/49765045/how-to-pass-a-variable-via-exec", "title": "how to pass a variable via exec*", "body": "<p>I want to pass a int variable to another process after exec*  </p>\n\n<p>here is my code:  </p>\n\n<pre><code>typedef union{\n    int i;\n    char c[4];\n}t_t;\n\n/* parent */\nint main(int ac, char *av[])\n{\n    t_t tv;\n\n    tv.i = 12345;\n\n    if(fork() == 0)\n        execlp(\"./test\", tv.c, \"abcd\", (char *)0);\n    return 0;\n}\n\n/* child */\nint main(int ac, char *av[])\n{\n    t_t tv;\n\n    memcpy(tv.c, av[0], sizeof(int));\n\n    printf(\"child: ac=%d, av0: %d, av1: %s\\n\", ac, tv.i, av[1]);\n    return 0;\n}\n</code></pre>\n\n<p><strong>here is output:<br>\nchild: ac=2, av0: 1627402297, av1: abcd</strong></p>\n\n<p>I also try like this:</p>\n\n<pre><code>int i;\nexeclp(\"./test\", (char *)i, \"abcd\", (char *)0);\n</code></pre>\n\n<p>the argv[0] in the child is unexpected always.  </p>\n\n<p>I wonder why it can't work like I expected.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1523415499, "post_id": 49764991, "comment_id": 86547081, "body": "Not seeing <code>point</code> on the left side of an <code>=</code>"}, {"owner": {"reputation": 3, "user_id": 9627822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e95d01f5eb58bd2c312b649eca3524?s=128&d=identicon&r=PG&f=1", "display_name": "nickb", "link": "https://stackoverflow.com/users/9627822/nickb"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1523422658, "post_id": 49764991, "comment_id": 86548931, "body": "i fogot to say that i set point = sum; but i tried putting it in multiple places but could still not find the correct line to place it. Any help would be much appreciated."}, {"owner": {"reputation": 655, "user_id": 3616601, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d9dbe1da7416f8fa9b0cf1d0974269e7?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/3616601/phantom"}, "edited": false, "score": 0, "creation_date": 1523427032, "post_id": 49764991, "comment_id": 86550590, "body": "Did you tried to put it right before the <code>do</code> ?"}, {"owner": {"reputation": 3, "user_id": 9627822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e95d01f5eb58bd2c312b649eca3524?s=128&d=identicon&r=PG&f=1", "display_name": "nickb", "link": "https://stackoverflow.com/users/9627822/nickb"}, "reply_to_user": {"reputation": 655, "user_id": 3616601, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d9dbe1da7416f8fa9b0cf1d0974269e7?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/3616601/phantom"}, "edited": false, "score": 0, "creation_date": 1523472346, "post_id": 49764991, "comment_id": 86580035, "body": "i fixed it @phantom. in the do while i set dice + dice1 = point because if you dont roll a 2, 3, 7, 11 or 12 the sum of the dice become the players &#39;point&#39;. thanks for the help, much appreciated"}], "owner": {"reputation": 3, "user_id": 9627822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e95d01f5eb58bd2c312b649eca3524?s=128&d=identicon&r=PG&f=1", "display_name": "nickb", "link": "https://stackoverflow.com/users/9627822/nickb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523409457, "creation_date": 1523409457, "question_id": 49764991, "link": "https://stackoverflow.com/questions/49764991/using-do-loops-with-certain-conditions", "title": "Using do loops with certain conditions", "body": "<p>So I am making a Craps game in my C class and am having trouble with a particular point. <em>If a user rolls a 4, 5, 6, 8, 9 or 10 that is considered a point. If the user rolls a 7 after rolling a point they lose</em>. My problem is if a user rolls a point, and then they roll again and the sum is equal to their point they win. My program works if they roll a 7 after their point, but not if they roll sum of their point again. \nSorry I know the question is confusing.</p>\n\n<pre><code>        case 1: printf(\"Enter your name here: \");\n            scanf(\"%s\", name);\n\n            for(j = 0; j &lt; i; j++){\n                if(strcmp(name, pl[j].players)==0){\n                    set = 1;\n\n                    printf(\"* * * * * * * * * *\\n\");\n                    printf(\"Press ENTER to roll the dice\");\n                    getchar();\n                    getchar();\n\n                    dice = (rand()%(6-1+1)+1);\n                    dice1 = (rand()%(6-1+1)+1);\n                    sum = dice + dice1;\n\n                    printf(\"\\nThe values of the dice are %d and %d whose sum is %d\\n\", dice, dice1, sum);\n\n                    if(sum == 7 || sum == 11)\n                    {\n                        win++;\n                        pl[j].wincount = win;\n                        pl[j].balance = pl[j].balance + 10;\n                        printf(\"\\nYou win the game. \\nYour balance is now: %d\\n\", pl[j].balance);\n                        break;\n                    }\n\n                    else if((sum == 2) || (sum == 3) || (sum == 12))\n                    {\n                        lose++;\n                        pl[j].balance = pl[j].balance-1;\n                        printf(\"You lose :(\\nYou balance is now: %d\\n\", pl[j].balance);\n\n                        dice = (rand()%(6-1+1)+1);\n                        dice1 = (rand()%(6-1+1)+1);\n                        sum = dice + dice1;\n                        break;\n                    }\n\n                    else\n                    {\n                        do\n                        {\n                            printf(\"\\nYou rolled a 'point' you must now roll again.\\n\");\n                            printf(\"* * * * * * * * * *\\n\");\n                            printf(\"Press ENTER to roll the dice again\");\n                            getchar();\n                            getchar();\n\n                            dice = (rand() % (6 - 1 + 1) + 1);\n                            dice1 = (rand() % (6 - 1 + 1) + 1);\n                            sum = dice + dice1;\n                            printf(\"\\nThe values of the dices are %d and %d whose sum is %d\\n\", dice, dice1, sum);\n\n                        }while((sum != 7) &amp;&amp; (sum != point));\n\n                        if(sum == 7)\n                        {\n                            lose++;\n                            pl[j].balance = pl[j].balance - 1;\n                            printf(\"You lose :(\\nYou balance is now: %d\\n\", pl[j].balance);\n                        }\n\n\n                        else if(sum == point)\n                        {\n                            win++;\n                            pl[j].wincount = win;\n                            pl[j].balance = pl[j].balance + 10;\n                            printf(\"\\nYou won the game, you rolled your point \\nYour balance is now: %d\\n\", pl[j].balance);\n                        }\n                    }\n                }\n            }\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "malloc", "structure"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1523399055, "post_id": 49763703, "comment_id": 86543046, "body": "please try to search on any search engine..."}, {"owner": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "edited": false, "score": 2, "creation_date": 1523399127, "post_id": 49763703, "comment_id": 86543066, "body": "All this program is doing is writing data at adjacent memory locations, but <a href=\"https://stackoverflow.com/questions/1239938/accessing-an-array-out-of-bounds-gives-no-error-why\">accessing memory beyond the array boundaries is undefined behavior</a>"}, {"owner": {"reputation": 65, "user_id": 7821100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5607a08059d692da9d50aa8e9cb77019?s=128&d=identicon&r=PG&f=1", "display_name": "octagonlord69", "link": "https://stackoverflow.com/users/7821100/octagonlord69"}, "edited": false, "score": 1, "creation_date": 1523399277, "post_id": 49763703, "comment_id": 86543107, "body": "So, even if it is possible, I shouldn&#39;t do it, because it&#39;s just something it wasn&#39;t intended to do?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1523399352, "post_id": 49763703, "comment_id": 86543134, "body": "C will not prevent you from shooting yourself in the foot. If you tell it to shit all over random memory, it will. The result you get is anybody&#39;s guess."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523401626, "post_id": 49763807, "comment_id": 86543725, "body": "An array is not a pointer! E.g. <code>int a[10];</code> does not declare a pointer. And the behaviour for accessing an array out of bounds is undefined. It might crash, it might not, it might burn your house or eat the cat. That&#39;s the idea of <b>undefined bahaviour</b>. No use trying to explain why the code behaves a specific way or speculate.Once you invoke UB, you are outside the language specification. The language does <b>no way</b> &quot;allow everything&quot;."}], "tags": [], "owner": {"reputation": 377, "user_id": 9493000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Pedro Lima", "link": "https://stackoverflow.com/users/9493000/pedro-lima"}, "is_accepted": true, "score": 0, "last_activity_date": 1523399678, "creation_date": 1523399678, "answer_id": 49763807, "question_id": 49763703, "link": "https://stackoverflow.com/questions/49763703/c-why-can-i-access-array-elements-beyond-the-given-limit/49763807#49763807", "title": "(C) Why can I access array elements beyond the given limit?", "body": "<p>When you create on array on C, the program allocates the memory you need for that and gives you the pointer for the first element. So when you say array[0], what you are doing is summing 0 to the base pointer of that array, therefore array[1] is increasing 1(4 bytes to be more precise) to the inicial pointer, so you can see the 2 element and so on (Dont forget that the array is a continous segment of memory, every value is next to his previous one). If you try to reach a position out of the array, the program will not crash, what it will do is read the memory from where it is pointing, which in most cases will most probably be garbish, but C has no problem with it, this language allows you to do pretty much everything!</p>\n\n<p>Hope it helps :) </p>\n"}], "owner": {"reputation": 65, "user_id": 7821100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5607a08059d692da9d50aa8e9cb77019?s=128&d=identicon&r=PG&f=1", "display_name": "octagonlord69", "link": "https://stackoverflow.com/users/7821100/octagonlord69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1523399945, "accepted_answer_id": 49763807, "answer_count": 1, "score": 0, "last_activity_date": 1523399678, "creation_date": 1523399002, "question_id": 49763703, "link": "https://stackoverflow.com/questions/49763703/c-why-can-i-access-array-elements-beyond-the-given-limit", "closed_reason": "Duplicate", "title": "(C) Why can I access array elements beyond the given limit?", "body": "<p>So I've been learning C for more than about a year, and never in my studies have I ever thought this was possible:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    struct exterior\n    {\n        int x;\n    } *ptr;\n\n    ptr = (struct exterior *)malloc(sizeof(struct exterior[3]));\n    ptr[0].x = 1;\n    ptr[1].x = 2;\n    ptr[2].x = 3;\n    ptr[3].x = 4;\n    ptr[4].x = 5;\n    ptr[5].x = 6;\n\n    printf(\"%d %d %d %d %d %d\", ptr[0].x, ptr[1].x, ptr[2].x, ptr[3].x, ptr[4].x, ptr[5].x);\n\n    return 0;\n}\n</code></pre>\n\n<p>So at first I followed the rules of C; I allocated the memory required for 3 structure array elements to a structure pointer. I used to pointer to access the variable that was in the structure, while using an index to specify the structure array element.</p>\n\n<p>For some reason, I then decided to try to access the array element beyond the given limit, even if I knew that the outcome would probably be the program crashing, but I did it anyways.</p>\n\n<p>To my surprise, there was no crash.</p>\n\n<p>Instead, the program worked. It printed out the value I had given to the variable with no problems. How is this possible?</p>\n\n<p>Later on, I tried it with an <code>int</code> array. It worked as well! Am I doing something wrong?</p>\n"}, {"tags": ["c", "asynchronous", "callback", "request", "mpi"], "comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1523399324, "post_id": 49763675, "comment_id": 86543126, "body": "MPI_Irecv is non blocking, MPI_Wait will wait for the request to complete, so why not put the call to <code>mycallback</code> after the MPI_Wait? the Send will only start once the Recv has finished (but request will be marked complete as soon as that&#39;s done) ... You may have to change the MPI_Send to <code>MPI_Isend</code>"}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1523399572, "post_id": 49763675, "comment_id": 86543190, "body": "That is a possibility, but the point is that then the call will be executed at the point of <code>MPI_Wait</code> while could have been executed before using the MPI thread itself."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 2, "creation_date": 1523400222, "post_id": 49763675, "comment_id": 86543363, "body": "ah, looking at what you what to achieve more closely MPI_Grequest_start is the correct semantic and you have to use extra_state to maintain any message specific state that you want to maintain.  MPI folks seem to be avoiding creating call back support like this (see <a href=\"https://github.com/mpi-forum/mpi-forum-historic/issues/26\" rel=\"nofollow noreferrer\">github.com/mpi-forum/mpi-forum-historic/issues/26</a>) and as of 3.0.1 no joy"}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1523400583, "post_id": 49763675, "comment_id": 86543465, "body": "@AhmedMasud Thanks for the link. Seems in the same lines. As a workaround, does it mean that if I want something like this I have to put MPI_Recv in a callback that emulates <code>MPI_Irecv + &quot;tasks after receive&quot;</code>? I don&#39;t quite understand in which of the three function I should put the completion code."}], "answers": [{"comments": [{"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1523411328, "post_id": 49765027, "comment_id": 86546047, "body": "I agree, MPI threads shouldn&#39;t be used non communication tasks. BUT, in this case I want it to process an MPI packed into the real objects in my program. This is almost an MPI communication task, except that the types are not basic types (or MPI custom types). Thank you for the code, I am not trying to avoid <code>Irecv</code>, I am trying to generalize it to send and receive data that requires some simple interpretation at the end points. I think the example I was looking for doesn&#39;t exists around, that is, how to simulate <code>Irecv</code> using only <code>Grequest</code> and <code>MPI_Recv</code>. I still hope that is possible."}, {"owner": {"reputation": 332, "user_id": 9500333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "David Daverio", "link": "https://stackoverflow.com/users/9500333/david-daverio"}, "reply_to_user": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1523415165, "post_id": 49765027, "comment_id": 86547006, "body": "Thats an interesting problem :-). I face it a couple of times, usually my solution was to pack the data into a continuous array of char. Then adding to the class a encoder/decoder method. Its a bit crappy but works fine.  Might be quite tricky to do it, but would be useful. If you solve it I am interested in it :-)."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1523419210, "post_id": 49765027, "comment_id": 86547969, "body": "If you have a way to identify messages that need some post processing (based on tag and/or type and/or communicator for example), then a simple option is to wrap <code>MPI_Wait()</code> and friends and do the post processing there. you can also wrap <code>MPI_Send()</code> and friends if some pre-processing is needed."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1523519421, "post_id": 49765027, "comment_id": 86596473, "body": "@DavidDaverio, there is yet another problem that is that if the size of the message cannot be known in advance there is not way to make the communication completely asynchronous because a small message has to be exchanged initially with the message size."}, {"owner": {"reputation": 332, "user_id": 9500333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "David Daverio", "link": "https://stackoverflow.com/users/9500333/david-daverio"}, "edited": false, "score": 0, "creation_date": 1523579339, "post_id": 49765027, "comment_id": 86630141, "body": "Hi Had the same issue about sizes of messages for an output server. You do not need to know send another message, in MPI the size of the message is encapsulated with the message metadata. You can use MPI_Iprobe, this return the status of a given message with a given tag if existing in the queue. Then MPI_Get_count."}, {"owner": {"reputation": 332, "user_id": 9500333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "David Daverio", "link": "https://stackoverflow.com/users/9500333/david-daverio"}, "edited": false, "score": 0, "creation_date": 1523579387, "post_id": 49765027, "comment_id": 86630152, "body": "Then a funny fact that most people ignores. In MPI_Recv (and MPI_Irecv) the size does not need to match the size of the message, funny no? In fact the size must be at least the size of the message, but if bigger it should not crash. This allow to use recv with a maximal size of message. But there is some issues with doing so, which means its better to prob and get the size from the status :-)."}, {"owner": {"reputation": 332, "user_id": 9500333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "David Daverio", "link": "https://stackoverflow.com/users/9500333/david-daverio"}, "edited": false, "score": 0, "creation_date": 1523580162, "post_id": 49765027, "comment_id": 86630289, "body": "Oh, and myself I usual use some Iprobe coupled to Revc. You test in a non-blocking way if there is a message then you get in a blocking way the message. That way you mimic a bit of non-blockingness. meaning that you only call recv when you have a message to get. Then it is usefull when your computation use all threads. If you have a thread reserved for MPI (what a waist!) then Irecv is better."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1524265964, "post_id": 49765027, "comment_id": 86918263, "body": "@DavidDaverio, ok, thanks for the insight. I agree with all that you say, but at the end they all partial solutions. It is not that you can run <code>Iprobe(...); Irecv(..., size);</code>  because  you have to wait for Iprobe to pass the argument to Irecv. I think I found a solution but by means of Grequest. The problem is that, as you say, I have to generate a thread with the norm probe and receive. This thread is not even from MPI. Which shows to things 1) Threads are wasted and 2) Irecv is useless in the first place because it can be easily implemented by std::async or pthreads."}, {"owner": {"reputation": 332, "user_id": 9500333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "David Daverio", "link": "https://stackoverflow.com/users/9500333/david-daverio"}, "edited": false, "score": 0, "creation_date": 1524361478, "post_id": 49765027, "comment_id": 86939767, "body": "Agreed :-). I would be interested to see your solution with Grequest :-)."}], "tags": [], "owner": {"reputation": 332, "user_id": 9500333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "David Daverio", "link": "https://stackoverflow.com/users/9500333/david-daverio"}, "is_accepted": false, "score": 2, "last_activity_date": 1523415834, "last_edit_date": 1523415834, "creation_date": 1523409735, "answer_id": 49765027, "question_id": 49763675, "link": "https://stackoverflow.com/questions/49763675/is-it-possible-to-attach-a-callback-to-be-executed-on-a-request-completion/49765027#49765027", "title": "Is it possible to attach a callback to be executed on a request completion?", "body": "<p>In the standard there is not such a thing.</p>\n\n<p>As said by@AhmedMasud , you can find a way around using generalized requests:\n<a href=\"http://mpi-forum.org/docs/mpi-3.1/mpi31-report/node297.htm#Node297\" rel=\"nofollow noreferrer\">http://mpi-forum.org/docs/mpi-3.1/mpi31-report/node297.htm#Node297</a></p>\n\n<p>As you can read in it, the standard will probably never include callback for the Irecv, due to some reason I agree with (split of the work between MPI threads and your program threads).</p>\n\n<p>What you attempt to do is not trivial and is linked to quite a lot of portability issue. The question you should ask yourself: will I really get any benefit from having the callback executed in the MPI thread? I suspect that this benefit in your mind is efficency, but for efficiency reasons one should avoid Irecv and Isend, non-blocking is a nice feature but should be used only and only if you have no other choices (for example a output server, where you definitely do not want to wast time of the compute clients (but even it that case, buffered send is usually better and leads you to a larger bandwidth and a smaller latency)).</p>\n\n<p>What is the real structure of the comm you need?\nIf it is 0->1, 1->2 ... n-1->n, n->0 this code works well (and will be faster than your solution) then you can define a callback easily with your favorite way of doing it (time to solution will be much smaller, debugging infinitely easier :-)):</p>\n\n<pre><code>template&lt;class Type&gt; \nvoid Parallel::sendUp(Type&amp; bufferSend,\n                      Type&amp; bufferRec, \n                      long len)\n{\n    if(this-&gt;rank()%2==0)\n    {\n        if(this-&gt;rank()!=this-&gt;size()-1)\n        {\n            this-&gt;send(bufferSend,len,this-&gt;rank());\n        }\n        if(this-&gt;rank()!= 0)\n        {\n            this-&gt;receive(bufferRec,len,this-&gt;rank()-1);\n        }\n        else if(this-&gt;size()%2==0)\n        {\n            this-&gt;receive(bufferRec,len,this-&gt;size()-1);\n        }\n    }\n    else\n    {\n        this-&gt;receive( bufferRec, len , this-&gt;rank()-1);\n        if(this-&gt;grid_rank()!=this-&gt;grid_size()-1)\n        {\n            this-&gt;send(bufferSend,len,this-&gt;rank()+1);\n        }\n        else\n        {\n            this-&gt;send( bufferSend, len , 0);\n        }\n    }\n\n    if(this-&gt;size()%2!=0)\n    {\n        if(this-&gt;rank()==this-&gt;size()-1)\n        {\n            this-&gt;send( bufferSend, len , 0);\n        }\n        if(this-&gt;grid()==0)\n        {\n            this-&gt;receive(bufferRec, len , this-&gt;size()-1);\n        }\n    }\n}\n</code></pre>\n\n<p>In that code, the parallel object is \"just\" a wrapper to some MPI calls, just to simplify the calls:</p>\n\n<pre><code>parallel.rank() = rank in the comm\nparallel.size() = size of the comm\nparallel.send/rec() is defined as follow\n\ntemplate&lt;class Type&gt; \nvoid Parallel::send(Type* array, int len, int to)\n{\n    MPI_Send(array, len*sizeof(Type), MPI_BYTE, to, 0,comm_);\n}\n\ntemplate&lt;class Type&gt; \nvoid Parallel::rec(Type* array, int len, int to)\n{\n    MPI_Send(array, len*sizeof(Type), MPI_BYTE, to, 0,comm_);\n}\n\ntemplate&lt;class Type&gt;\nMPI_Status Parallel2d::receive(Type&amp; array, int from, int len)\n{\n    MPI_Status  status;\n    MPI_Recv( &amp;array, len*sizeof(Type), MPI_BYTE, from, 0,comm_,&amp;status);\n    return status;\n}\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 2, "answer_count": 1, "score": 7, "last_activity_date": 1523415834, "creation_date": 1523398795, "question_id": 49763675, "link": "https://stackoverflow.com/questions/49763675/is-it-possible-to-attach-a-callback-to-be-executed-on-a-request-completion", "title": "Is it possible to attach a callback to be executed on a request completion?", "body": "<p>In MPI it is possible to run an asynchronous message passing routine (e.g. receive, with <code>MPI_Irecv</code>). <strong>Is it possible to attach a callback function to be executed as soon as the request is complete?</strong> For example to process the data received.</p>\n\n<p>This is an example of what I am looking for:</p>\n\n<pre><code>#include \"mpi.h\"\n#include &lt;stdio.h&gt;\n\nvoid mycallback(void* data){\n   (int*)data += 1; // add one to the received data\n}\n\nint main(int argc, char *argv[]){\n    int myid, numprocs, left, right;\n    int buffer[10], buffer2[10];\n    MPI_Request request;\n    MPI_Status status;\n\n    MPI_Init(&amp;argc,&amp;argv);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;numprocs);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;myid);\n\n    right = (myid + 1) % numprocs;\n    left = myid - 1;\n    if (left &lt; 0)\n        left = numprocs - 1;\n\n    MPI_Irecv(buffer, 10, MPI_INT, left, 123, MPI_COMM_WORLD, &amp;request);\n // Attach_Callback(request, &amp;mycallback); //somewhere after this point recv is completed an f is executed\n    MPI_Send(buffer2, 10, MPI_INT, right, 123, MPI_COMM_WORLD);\n    MPI_Wait(&amp;request, &amp;status); //the recv and the callback must have been called at this point\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>I found that there is a <code>MPI_Grequest_start</code> and <code>MPI_Grequest_complete</code> function but they seem to be for something else as the request created is not related to a particular message passing.</p>\n\n<p>Perhaps I have to implement a Grequest (generalized request) where the callback consists in a <code>MPI_Recv</code> (not <code>MPI_Irecv</code>). Is that the idea?</p>\n"}, {"tags": ["c", "floating-point", "ieee-754"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1523395218, "post_id": 49762724, "comment_id": 86541625, "body": "After the assumed 1, the first bit represents 1/2, the next 1/4, then 1/8, etc. So 111000... is 1 + .5 + .25 + .125 = 1.875. Your series of negative powers is one way to do that, but probably slower and less accurate than just using a lookup table. All the values in the lookup table will be exact."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1523395886, "post_id": 49762724, "comment_id": 86541887, "body": "If he starts with <code>x=0.5</code> and then divides <code>x</code> by <code>2.0</code> on each iteration of a loop, then all of the values will be exact, because all of those numbers have an exact representation. And at the end of the day, he will get exactly what he started with, but with the exponent set equal to the bias. So that&#39;s a rather pointless exercise when you can just set the exponent equal to the bias."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523397147, "post_id": 49762724, "comment_id": 86542402, "body": "A note to your tutor: using types with implementation defined width is bad practice. Use fixed width types instead."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523397629, "post_id": 49762724, "comment_id": 86542584, "body": "Tip: compare   results with <code>printf(&quot;%a\\n&quot;, x);</code> which does a lot of this for you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1523397745, "post_id": 49762724, "comment_id": 86542633, "body": "&quot;However, I have not been able to do this conversion&quot; --&gt; post the code you tried."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9627107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben James", "link": "https://stackoverflow.com/users/9627107/ben-james"}, "edited": false, "score": 0, "creation_date": 1523396780, "post_id": 49762964, "comment_id": 86542237, "body": "Exactly what I needed. Thank you very much :)"}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": -1, "last_activity_date": 1523394947, "creation_date": 1523394947, "answer_id": 49762964, "question_id": 49762724, "link": "https://stackoverflow.com/questions/49762724/format-a-float-using-ieee-754/49762964#49762964", "title": "Format a float using IEEE-754", "body": "<ol>\n<li>Convert the <code>float</code> to <code>unsigned int</code>.</li>\n<li>Clear the sign bit (using bitwise AND <code>&amp;</code>).</li>\n<li>Set the exponent so that it's equal to the bias (using bitwise AND <code>&amp;</code> and OR <code>|</code>).</li>\n<li>Convert the modified value from <code>unsigned int</code> to <code>float</code>.</li>\n<li>Use <code>printf</code> to print the new value.</li>\n</ol>\n\n<p>This works because clearing the sign bit and setting the exponent to the bias leaves you with <code>(positive)mantissa * 2^0 = mantissa</code>, so <code>printf</code> will print the mantissa for you.</p>\n"}], "owner": {"reputation": 11, "user_id": 9627107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben James", "link": "https://stackoverflow.com/users/9627107/ben-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 49762964, "answer_count": 1, "score": 0, "last_activity_date": 1523394947, "creation_date": 1523393736, "question_id": 49762724, "link": "https://stackoverflow.com/questions/49762724/format-a-float-using-ieee-754", "title": "Format a float using IEEE-754", "body": "<p>I have an assignment in C where I'm given a float number and have to print it using the IEEE-754 format:</p>\n\n<pre><code>__(sign)mantissa * 2^(exponent)__\n</code></pre>\n\n<p>The sign would be either '-' or ' ', the exponent an int value and the mantissa a float value. I also cannot use<code>struct</code>s or any function present in any library other than the the ones in stdio.h (for the printf function). This should be done using bitwise operations.</p>\n\n<p>I was given two functions:</p>\n\n<ul>\n<li><strong>unsignedToFloat</strong>: given an unsigned int, returns a float with the same bits;</li>\n<li><strong>floatToUnsigned</strong>: given a float, returns an unsigned int with the same bits;</li>\n</ul>\n\n<p>After getting the float representation as an unsigned int, I have managed to determine the sign and exponent of any float number. I have also managed to determine the mantissa in bits. For example, given the float 3.75:</p>\n\n<pre><code>&gt; bit representation: 01000000011100000000000000000000;\n&gt; sign: 0 (' ');\n&gt; exponent = 10000000 (128 - bias = 1)\n&gt; mantissa = 11100000000000000000000\n</code></pre>\n\n<p>Now, in this example, I should represent the mantissa as \"1.875\". However, I have not been able to do this conversion. So far, I have tried to create another float as 000000000[mantissa], but it gives me the wrong result (which I now understand why). I was instructed that the mantissa has a 1 in the beginning, meaning in this example, the mantissa would become 1.111, but I wasn't instructed on how exactly to do this. I tried searching online, but couldn't find any way of adding a 1 to the beginning of the mantissa.</p>\n\n<p>I also had the idea of doing this portion by going through every bit of the mantissa and getting its decimal representation, and then adding 1. In this example, I would do the following:</p>\n\n<pre><code>&gt; 11100000000000000000000\n&gt; as_float = 2^-1 + 2^-2 + 2^-3\n&gt; as_float += 1\n</code></pre>\n\n<p>However, this approach seems very hack-y, slow and could perhaps give me wrong result.</p>\n\n<p>With this said, I am completely out of ideas. How would I represent the mantissa of a float number as its own thing?</p>\n"}, {"tags": ["c", "arrays", "pointers", "char"], "comments": [{"owner": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "edited": false, "score": 0, "creation_date": 1523392859, "post_id": 49762522, "comment_id": 86540512, "body": "Fyi, you&#39;re not updating the value of <code>counter</code>, so you&#39;re just replacing the value of flight[1] over and over"}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "edited": false, "score": 0, "creation_date": 1523392966, "post_id": 49762522, "comment_id": 86540566, "body": "Everywhere you try to copy a value from date to flight, you are trying to copy an int to a char*. What are you trying to do?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1523392969, "post_id": 49762522, "comment_id": 86540568, "body": "you are assigning pointer with the integer"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1523393048, "post_id": 49762522, "comment_id": 86540616, "body": "What is this code really supposed to do? <code>id[i]</code> is the <code>int</code> 122, <code>flight[counter+1]</code> is <code>char*</code>. Why do you want to assign 122 to a pointer?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1523393051, "post_id": 49762522, "comment_id": 86540618, "body": "What are you trying to accomplish with this code?  Specifically, the lines you are (correctly) being warned about?"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1523393091, "post_id": 49762522, "comment_id": 86540645, "body": "<code>flight</code> is an array of <code>char</code> pointers, <code>id[i]</code> is an <code>int</code>, you are assigning the incorrect types and that&#39;s what the compiler is complaining about"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1523393100, "post_id": 49762522, "comment_id": 86540651, "body": "Are you expecting it to assign a formatted string, like <code>&quot;122&quot;</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1523393301, "post_id": 49762522, "comment_id": 86540760, "body": "<i>I am getting this error</i> can confirm. <i>from different types of arrays</i> that&#39;s the reason. An array can only hold one type of things."}, {"owner": {"reputation": 91, "user_id": 5624722, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/072fbbe138c6bc6f38b629ef0df062af?s=128&d=identicon&r=PG&f=1", "display_name": "AL3MS", "link": "https://stackoverflow.com/users/5624722/al3ms"}, "reply_to_user": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "edited": false, "score": 0, "creation_date": 1523393481, "post_id": 49762522, "comment_id": 86540852, "body": "@Jose Fernando Lopez Fernandez thinks for your note. fixed it."}, {"owner": {"reputation": 91, "user_id": 5624722, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/072fbbe138c6bc6f38b629ef0df062af?s=128&d=identicon&r=PG&f=1", "display_name": "AL3MS", "link": "https://stackoverflow.com/users/5624722/al3ms"}, "edited": false, "score": 0, "creation_date": 1523393634, "post_id": 49762522, "comment_id": 86540929, "body": "My question is how to store the values of id and other ints into my final array (flight)"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5624722, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/072fbbe138c6bc6f38b629ef0df062af?s=128&d=identicon&r=PG&f=1", "display_name": "AL3MS", "link": "https://stackoverflow.com/users/5624722/al3ms"}, "edited": false, "score": 0, "creation_date": 1523393380, "post_id": 49762628, "comment_id": 86540798, "body": "You are right and I feel more comfortable with struct. however in the question I am limited to arrays."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 91, "user_id": 5624722, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/072fbbe138c6bc6f38b629ef0df062af?s=128&d=identicon&r=PG&f=1", "display_name": "AL3MS", "link": "https://stackoverflow.com/users/5624722/al3ms"}, "edited": false, "score": 0, "creation_date": 1523393415, "post_id": 49762628, "comment_id": 86540818, "body": "@AL3MS What question are you referring to?"}, {"owner": {"reputation": 91, "user_id": 5624722, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/072fbbe138c6bc6f38b629ef0df062af?s=128&d=identicon&r=PG&f=1", "display_name": "AL3MS", "link": "https://stackoverflow.com/users/5624722/al3ms"}, "edited": false, "score": 0, "creation_date": 1523393834, "post_id": 49762628, "comment_id": 86541017, "body": "Store the values of id and other ints and from and to values into one place. so I can retrieve the information later. if, case , loops, arrays and strings are only allowed."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1523393272, "creation_date": 1523393272, "answer_id": 49762628, "question_id": 49762522, "link": "https://stackoverflow.com/questions/49762522/assignment-makes-integer-from-pointer-without-a-cast-c-language/49762628#49762628", "title": "assignment makes integer from pointer without a cast (C language.)", "body": "<p>You're getting the warning because you're trying to assign an <code>int</code> value to a <code>char *</code>.  Those types are incompatible with each other.</p>\n\n<p>Rather than being an array of <code>char *</code>, you should make <code>flight</code> an array of structs which will hold the various data that is a part of it:</p>\n\n<pre><code>struct flight {\n    int id;\n    char *from;\n    char *to;\n    int departMon;\n    int departDay;\n    int departYear;\n};\n\nstruct flight flight[30];\n\n...\n\n    flight[counter].id = id[i];\n    flight[counter].from = from[i];\n    flight[counter].to = to[i];\n    flight[counter].departMon=date[i][0];\n    flight[counter].departDay=date[i][1];\n    flight[counter].departYear=date[i][2];\n    counter++;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5624722, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/072fbbe138c6bc6f38b629ef0df062af?s=128&d=identicon&r=PG&f=1", "display_name": "AL3MS", "link": "https://stackoverflow.com/users/5624722/al3ms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 49762628, "answer_count": 1, "score": -2, "last_activity_date": 1523393272, "creation_date": 1523392757, "last_edit_date": 1523393218, "question_id": 49762522, "link": "https://stackoverflow.com/questions/49762522/assignment-makes-integer-from-pointer-without-a-cast-c-language", "title": "assignment makes integer from pointer without a cast (C language.)", "body": "<p>Hi I am getting this error:'assignment makes integer from pointer without a cast'</p>\n\n<p>what I have done is putting many values from different types of arrays into one pointer array. As a result I got this warning on the code which assign integer to my char pointer array.</p>\n\n<p>this is my code:</p>\n\n<pre><code>int id[10] = {120, 121, 122, 123,124,125, 126, 127, 128,129 };\nchar *from[5] = {\"value1\", \"value2\", \"value3\", \"value4\", \"value5\" };\nchar *to[5] = {\"value1\", \"value2\", \"value3\", \"value4\", \"value5\" };\nint date[5][3] = {{10,6,2018},{15,6,2018},{20,6,2018},{1,7,2018},{15,7,2018}};\n\n\nchar *flight[30];\nint i = 2;\n\n\n        int counter = 0;\n        flight[0]=\"Flight ID:\";\n        flight[1]=  id[i]; //warning in this line.\n\n        flight[2]=\" From:\";\n        flight[3]=from[i];\n\n        flight[4]=\" to:\";\n        flight[5]=to[i];\n\n        flight[6]=\" Depart on:\";\n        flight[7]=date[i][0];//warning in this line.\n        flight[8]=\"/\";          \n        flight[9]=date[i][1];   //warning in this line.\n        flight[10]=\"/\";                 \n        flight[11]=date[i][2];  //warning in this line.     \n</code></pre>\n"}, {"tags": ["c", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1523398159, "post_id": 49762052, "comment_id": 86542771, "body": "Most implementations will default to preserving the thread pool long enough to handle this. However, it prevents optimization between those loops, so a single parallel loop is better"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1523476174, "post_id": 49762052, "comment_id": 86582062, "body": "Yes, more detail is required, preferably in form of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We cannot give you a specific recommendation without specific details. Generally: Don&#39;t guess about performance - measure."}, {"owner": {"reputation": 1, "user_id": 7844467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b9d924a224b77d8b2d96f2791ca9fa?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/7844467/stephen"}, "edited": false, "score": 0, "creation_date": 1523530940, "post_id": 49762052, "comment_id": 86603874, "body": "Hey, sorry for the lack of detail, I have added some more details related to the for loop I am trying to parallelize."}], "owner": {"reputation": 1, "user_id": 7844467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b9d924a224b77d8b2d96f2791ca9fa?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/7844467/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523530821, "creation_date": 1523390616, "last_edit_date": 1523530821, "question_id": 49762052, "link": "https://stackoverflow.com/questions/49762052/openmp-for-loop-within-a-while-loop", "title": "OpenMP - For loop within a while loop", "body": "<p>I am trying to parallelise some serial code that I have written, but I am confused on how I can deal with a while loop. The code solves a time integration, computational mechanics problem. </p>\n\n<p><strong>( EDIT )</strong> Firstly I am using a number of structures to store data including a matrix/vector library Meschach, with data stuctures:</p>\n\n<pre><code>typedef struct {\n  unsigned int dim, max_dim;\n  double * ve;\n} VEC;\n\ntypedef struct {\n  unsigned int dim, max_dim;\n  double * ve;\n} MAT;\n</code></pre>\n\n<p>And some user defined structures</p>\n\n<pre><code>typedef struct SCNI{\n  MAT * B;\n  VEC * Fsub ; \n  VEC * index;\n     .\n     . \n} SCNI;\n</code></pre>\n\n<p>I am trying to parallelize a loop but I can't seem to get an answer that doesn't depend on the number of threads used. </p>\n\n<pre><code>// variables\nint numNode = 600;\nint dim = 2;\ndouble * Fint = malloc( dim * numNode * sizeof(double) );\nVEC * stress ;\nMAT * defGrad ; \nVEC * displacement = v_get(dim*numNode) ; // allocate memory for vector\nVEC * matParameters = v_get(5);\nVEC * mRadius = v_get(numNode); \ndouble intFactor;\n\n// each point has its own SCNI structure\nSCNI * scni = malloc( numnode * sizeof(SCNI) );\n\n..................................\nwhile ( time &lt; t_max )\n// obtain displacement at this time increment\n// displacement = {a} + {b}*delta_t - where a and b are vectors\n  v_mltadd(a,b,delta_t,displacement);\n{\n\n#pragma omp parallel default(none) \n\\ shared(displacement,scni,matParameters,mRadius,numnode) \n\\ private(i,intFactor,stressVoigt,defGrad) reduction(+:Fint[0:2*numnode]) \n{\n  defGrad = m_get(dim+1,dim+1) // allocate memory for each defGrad;\n  stress = v_get(5) // allocate memory for each private stress;\n  memset(Fint,0,numnode*dim*sizeof(double)); // set each Fint to zero initially\n// Internal force loop\n#pragma omp parallel for\n  for ( i = 0 ; i &lt; numNode ; i++){\n       // function call to find defGrad, using the B matrix from SCNI\n       // and the vector displacement.\n          calcDefGrad(defGrad,scni[i].B,displacement)\n       // find stress using defGrad and the vector material parameters\n          calcStress(stress,defGrad,matParamters)\n       // find sub forces Fsub = scni[i].B*stress\n          scni[i].Fsub = vm_mlt(scni[i].B,stress,scni[i])\n       // assemble sub forces into global internal force array Fint\n          assemble(Fint,scni[i].Fsub,scni[i].index,intFactor)\n  }\n\n}\n....................................\n}// end while loop\n..................................\n</code></pre>\n\n<p>I'm not overly sure on how you share the data structures, and whether my issues stem from the matrix library I am using.</p>\n\n<p>Any help/hints/tips would be much appreciated as I am very new to OpenMP, and well multi-threaded programming in general.  </p>\n"}, {"tags": ["c", "optimization", "clang", "compiler-optimization"], "answers": [{"comments": [{"owner": {"reputation": 14291, "user_id": 545424, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6a4ac5213b7eeab93dc09b263effcfcf?s=128&d=identicon&r=PG", "display_name": "user545424", "link": "https://stackoverflow.com/users/545424/user545424"}, "edited": false, "score": 0, "creation_date": 1523388850, "post_id": 49761379, "comment_id": 86538548, "body": "Woah! That is freaking awesome!"}], "tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": true, "score": 14, "last_activity_date": 1523387969, "creation_date": 1523387969, "answer_id": 49761379, "question_id": 49761280, "link": "https://stackoverflow.com/questions/49761280/is-this-clang-optimization-a-bug/49761379#49761379", "title": "Is this clang optimization a bug?", "body": "<p><a href=\"https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html\" rel=\"noreferrer\">UndefinedBehaviorSanitizer</a> is really helpful in catching such mistakes:</p>\n\n<pre><code>$ clang -fsanitize=undefined -O3 o3.c\n$ ./a.out\no3.c:19:2: runtime error: shift exponent 32 is too large for 32-bit type 'unsigned int'\nget_morton_code(99,159,46) = 4294967295\n</code></pre>\n\n<p>A possible fix would be replacing the <code>1U</code>s with <code>1ULL</code>, an <code>unsigned long long</code> is at least 64 bit and can be shifted that far.</p>\n"}, {"comments": [{"owner": {"reputation": 14291, "user_id": 545424, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6a4ac5213b7eeab93dc09b263effcfcf?s=128&d=identicon&r=PG", "display_name": "user545424", "link": "https://stackoverflow.com/users/545424/user545424"}, "edited": false, "score": 0, "creation_date": 1523388416, "post_id": 49761393, "comment_id": 86538349, "body": "Thanks! I think the <code>2*i</code> is correct. You pick up an extra factor of <code>i</code> since the bit you are masking in is already in the <code>i</code>th place."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 1, "creation_date": 1523389609, "post_id": 49761393, "comment_id": 86538911, "body": "<code>PRId64</code> is <code>d</code>&#39;s counterpart. You should use <code>PRIu64</code> instead for <code>uint64_t</code>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 0, "creation_date": 1523396841, "post_id": 49761393, "comment_id": 86542268, "body": "@a3f: Thanks, fixed. And I would recommend <code>PRIx64</code>, for this, since it makes it hugely easier to see the bits."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1523397078, "post_id": 49761393, "comment_id": 86542369, "body": "can you quote standard that say it&#39;s undefined behavior to overflow on an unsigned with shift ? I&#39;m very curious, as overflow on unsigned is defined I don&#39;t understand why with shifting it would not."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 8, "last_activity_date": 1523396772, "last_edit_date": 1523396772, "creation_date": 1523388019, "answer_id": 49761393, "question_id": 49761280, "link": "https://stackoverflow.com/questions/49761280/is-this-clang-optimization-a-bug/49761393#49761393", "title": "Is this clang optimization a bug?", "body": "<p>When <code>i</code> is 15 in the loop, <code>2*i+2</code> is 32, and you are shifting an <code>unsigned int</code> by the number of bits in an <code>unsigned int</code>, which is undefined.</p>\n\n<p>You apparently intend to work in a 64-bit field, so cast the left side of the shift to <code>uint64_t</code>.</p>\n\n<p>A proper <code>printf</code> format for <code>uint64_t</code> is <code>get_morton_code(99,159,46) = %\" PRIu64 \"\\n\"</code>. <code>PRIu64</code> is defined in the <code>&lt;inttypes.h&gt;</code> header.</p>\n"}], "owner": {"reputation": 14291, "user_id": 545424, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6a4ac5213b7eeab93dc09b263effcfcf?s=128&d=identicon&r=PG", "display_name": "user545424", "link": "https://stackoverflow.com/users/545424/user545424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 49761379, "answer_count": 2, "score": 4, "last_activity_date": 1523396772, "creation_date": 1523387480, "question_id": 49761280, "link": "https://stackoverflow.com/questions/49761280/is-this-clang-optimization-a-bug", "title": "Is this clang optimization a bug?", "body": "<p>I ran into an interesting issue when compiling some code with -O3 using clang on OSX High Sierra. The code is this:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;limits.h&gt; /* for CHAR_BIT */\n#include &lt;stdio.h&gt; /* for printf() */\n#include &lt;stddef.h&gt; /* for size_t */\n\nuint64_t get_morton_code(uint16_t x, uint16_t y, uint16_t z)\n{\n    /* Returns the number formed by interleaving the bits in x, y, and z, also\n     * known as the morton code.\n     *\n     * See https://graphics.stanford.edu/~seander/bithacks.html#InterleaveTableO\nbvious.\n     */\n    size_t i;\n    uint64_t a = 0;\n\n    for (i = 0; i &lt; sizeof(x)*CHAR_BIT; i++) {\n        a |= (x &amp; 1U &lt;&lt; i) &lt;&lt; (2*i) | (y &amp; 1U &lt;&lt; i) &lt;&lt; (2*i + 1) | (z &amp; 1U &lt;&lt; i)\n &lt;&lt; (2*i + 2);\n    }\n\n    return a;\n}\n\nint main(int argc, char **argv)\n{\n    printf(\"get_morton_code(99,159,46) = %llu\\n\", get_morton_code(99,159,46));\n    return 0;\n}\n</code></pre>\n\n<p>When compiling this with <code>cc -O1 -o test_morton_code test_morton_code.c</code> I get the following output:</p>\n\n<pre><code>get_morton_code(99,159,46) = 4631995\n</code></pre>\n\n<p>which is correct. However, when compiling with <code>cc -O3 -o test_morton_code test_morton_code.c</code>:</p>\n\n<pre><code>get_morton_code(99,159,46) = 4294967295\n</code></pre>\n\n<p>which is wrong.</p>\n\n<p>What is also odd is that this bug appears in my code when switching from <code>-O2</code> to <code>-O3</code> whereas in the minimal working example above it appears when going from <code>-O1</code> to <code>-O2</code>.</p>\n\n<p>Is this a bug in the compiler optimization or am I doing something stupid that's only appearing when the compiler is optimizing more aggressively?</p>\n\n<p>I'm using the following version of clang:</p>\n\n<pre><code>snotdaqs-iMac:snoFitter snoperator$ cc --version\nApple LLVM version 9.1.0 (clang-902.0.39.1)\nTarget: x86_64-apple-darwin17.5.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1523387272, "post_id": 49761187, "comment_id": 86537777, "body": "Step through the program with your debugger."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1523387350, "post_id": 49761187, "comment_id": 86537837, "body": ".. or use some logging (say with <code>printf</code>). At least <i>try</i> to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug it somehow</a>."}, {"owner": {"reputation": 173, "user_id": 4396667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100004120866426/picture?type=large", "display_name": "Aakash Gupta", "link": "https://stackoverflow.com/users/4396667/aakash-gupta"}, "edited": false, "score": 0, "creation_date": 1523387484, "post_id": 49761187, "comment_id": 86537913, "body": "I am not really sure how do I debug it, I tried to write printf and check, but apparently the code never enters last else statement if n is the smallest and p is the largest. Does the last else I am using correspond to the first if?"}, {"owner": {"reputation": 173, "user_id": 4396667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100004120866426/picture?type=large", "display_name": "Aakash Gupta", "link": "https://stackoverflow.com/users/4396667/aakash-gupta"}, "edited": false, "score": 0, "creation_date": 1523387660, "post_id": 49761187, "comment_id": 86538009, "body": "The task required is to find max of three numbers, but I was just fiddling around the code and trying to do it this way. Apparently its not working."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1523387677, "post_id": 49761187, "comment_id": 86538016, "body": "&quot;Shouldn&#39;t last else statement be working and giving the result as 11?&quot; --&gt; 4 &gt; 2 is true, so code enters the <code>if()</code> body: <code>if(m&gt;n){         if(m&gt;p){             printf(&quot;%f&quot;,m);         }     }</code>  Then <code>m &gt; p</code> is not true, so nothing prints - why is that unexpected?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1523387937, "post_id": 49761187, "comment_id": 86538136, "body": "No.  After the <code>if()</code> block is <b>entered</b> (the <code>if</code> is true), code does that block and then does the code after <code>else{            printf(&quot;%f&quot;,p);     }</code> which is <code>return 0;</code>"}, {"owner": {"reputation": 173, "user_id": 4396667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100004120866426/picture?type=large", "display_name": "Aakash Gupta", "link": "https://stackoverflow.com/users/4396667/aakash-gupta"}, "edited": false, "score": 0, "creation_date": 1523387972, "post_id": 49761187, "comment_id": 86538152, "body": "I understand it now! Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": true, "score": 4, "last_activity_date": 1523387627, "last_edit_date": 1523387627, "creation_date": 1523387436, "answer_id": 49761261, "question_id": 49761187, "link": "https://stackoverflow.com/questions/49761187/maximum-of-three-numbers-in-c/49761261#49761261", "title": "Maximum of three numbers in C", "body": "<p>Your <code>else</code>s only apply to the previous <code>if</code>, nesting <code>if</code> statements is not working the way you intend, instead you should be using the \"and\" operator to check if the two conditions are true in the same <code>if</code>. Additionally you want to check with <code>&gt;=</code> not just <code>&gt;</code> in case the two largest numbers are equal.</p>\n\n<pre><code>int main() {\n    // your code goes here\n    float m,n,p;\n    scanf(\"%f%f%f\", &amp;m,&amp;n,&amp;p);\n    if(m &gt;= n &amp;&amp; m &gt;= p){\n        printf(\"%f\",m);\n    } else if(n &gt;= p &amp;&amp; n &gt;= m) {\n        printf(\"%f\",n);\n    } else{   \n        printf(\"%f\",p);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>for a simpler example, if you had code like this:</p>\n\n<pre><code>if (a) {\n    if (b) {\n        printf(\"first\\n\");\n    }\n} else {\n    print(\"second\\n\");\n}\n</code></pre>\n\n<p>The <code>else</code> is only related to whether <code>a</code> is true or false. If you had <code>a = true</code> and <code>b = false</code> the above would print nothing. Your program would enter the <code>if (a)</code> body (so the <code>else</code> never runs), then see <code>if (b)</code> and skip <code>printf(\"first\\n\")</code> before exiting.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 6, "last_activity_date": 1523387796, "last_edit_date": 1523387796, "creation_date": 1523387675, "answer_id": 49761323, "question_id": 49761187, "link": "https://stackoverflow.com/questions/49761187/maximum-of-three-numbers-in-c/49761323#49761323", "title": "Maximum of three numbers in C", "body": "<p>Simplify your code by moving the logic of finding the maximum to a function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nfloat max_of_two(float x, float y)\n{\n   return (x &gt; y) ? x : y;\n}\n\nfloat max_of_three(float m, float n, float p)\n{\n   return max_of_two(max_of_two(m, n), p);\n}\n\nint main()\n{\n    float m,n,p;\n    scanf(\"%f%f%f\", &amp;m,&amp;n,&amp;p);\n    printf(\"%f\", max_of_three(m, n, p));\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 4, "last_activity_date": 1523388129, "creation_date": 1523388129, "answer_id": 49761434, "question_id": 49761187, "link": "https://stackoverflow.com/questions/49761187/maximum-of-three-numbers-in-c/49761434#49761434", "title": "Maximum of three numbers in C", "body": "<p>A late answer. This simple solution does not need any nesting of conditionals:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    float m, n, p, max;\n    if(scanf(\"%f%f%f\", &amp;m, &amp;n, &amp;p) != 3) {\n        puts(\"Bad input\");\n        return 1;\n    }\n    max = m; \n    if(n &gt; max) {\n        max = n;\n    }\n    if(p &gt; max) {\n        max = p;\n    }\n    printf(\"%f\", max);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1523393093, "last_edit_date": 1523393093, "creation_date": 1523389445, "answer_id": 49761756, "question_id": 49761187, "link": "https://stackoverflow.com/questions/49761187/maximum-of-three-numbers-in-c/49761756#49761756", "title": "Maximum of three numbers in C", "body": "<p>You can also create a silly macro</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define mo3(m,n,p) ( (m) &gt; (n) ? ((m) &gt; (p) ? (m) : (p)) : ((n) &gt; (p) ? (n) : (p)))\n\nint main(void) {\n\nint m=4,n=2,p=11;\n     // your code goes here\n     printf(\"%d\\n\", mo3(m,n,p));\n     return 0;\n }\n</code></pre>\n\n<p><a href=\"https://ideone.com/0El8nX\" rel=\"nofollow noreferrer\">https://ideone.com/0El8nX</a></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1523396700, "last_edit_date": 1592644375, "creation_date": 1523396700, "answer_id": 49763305, "question_id": 49761187, "link": "https://stackoverflow.com/questions/49761187/maximum-of-three-numbers-in-c/49763305#49763305", "title": "Maximum of three numbers in C", "body": "<h3>NAN</h3>\n<p>A variation on <a href=\"https://stackoverflow.com/a/49761434/2410359\">@Weather Vane</a> answer using floating point math and handles <a href=\"https://en.wikipedia.org/wiki/NaN\" rel=\"nofollow noreferrer\">Not a Numbers</a> well:</p>\n<p>When NaN are present, the usual handling of them is to disregard their presence.  Thus the <code>max5(-2.0, NAN, -1.0, NAN, -3.0)</code> is <code>-1.0</code>.</p>\n<pre><code>double max3(double a, double b, double c) {\n  double mx = -INFINITY;\n  bool found = false;\n  if (a &gt;= mx) {\n    mx = a;\n    found = true;\n  }\n  if (b &gt;= mx) {\n    mx = b;\n    found = true;\n  }\n  if (c &gt;= mx) {\n    mx = c;\n    found = true;\n  }\n  return found ? mx : NAN;\n}\n</code></pre>\n<p>The above uses a very common, though not C specified behavior, of <code>&lt;, &lt;=, &gt;=, &gt;</code> comparing a NAN with a number is the result is false.  When <code>__STDC_IEC_559__</code> is defined with the value of 1, this desired compare result is specified behavior.</p>\n<p>An alternative to <code>#if __STDC_IEC_559__ == 1</code> could use the <code>isnan()</code> macro.</p>\n<p>Of course another functionality could return NAN if any of the numbers are NAN.</p>\n"}], "owner": {"reputation": 173, "user_id": 4396667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100004120866426/picture?type=large", "display_name": "Aakash Gupta", "link": "https://stackoverflow.com/users/4396667/aakash-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2828, "favorite_count": 0, "accepted_answer_id": 49761261, "answer_count": 5, "score": 0, "last_activity_date": 1547232699, "creation_date": 1523387091, "last_edit_date": 1523387197, "question_id": 49761187, "link": "https://stackoverflow.com/questions/49761187/maximum-of-three-numbers-in-c", "title": "Maximum of three numbers in C", "body": "<p>I have three numbers, m, n and p. I am trying to find the maximum using nested if..else if..else.</p>\n\n<p>Here is my code for the same:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    // your code goes here\n    float m,n,p;\n    scanf(\"%f%f%f\", &amp;m,&amp;n,&amp;p);\n    if(m&gt;n){\n        if(m&gt;p){\n            printf(\"%f\",m);\n        }\n    }\n    else if(n&gt;p){\n        if(n&gt;m){\n            printf(\"%f\",n);\n            }\n        }\n    else{   \n        printf(\"%f\",p);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But when I input m=4,n=2,p=11. It doesn't print anything!<br>\nShouldn't last else statement be working and giving the result as 11?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 1, "creation_date": 1523387240, "post_id": 49761167, "comment_id": 86537764, "body": "You manually fill 800x800 matrix?"}, {"owner": {"reputation": 19, "user_id": 9482817, "user_type": "registered", "profile_image": "https://graph.facebook.com/1989664924694773/picture?type=large", "display_name": "Malika Sadullaeva", "link": "https://stackoverflow.com/users/9482817/malika-sadullaeva"}, "reply_to_user": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523387287, "post_id": 49761167, "comment_id": 86537793, "body": "I use random function to fill matrix"}, {"owner": {"reputation": 2352, "user_id": 8870132, "user_type": "registered", "profile_image": "https://graph.facebook.com/798647053545078/picture?type=large", "display_name": "Raman Mishra", "link": "https://stackoverflow.com/users/8870132/raman-mishra"}, "edited": false, "score": 0, "creation_date": 1523387518, "post_id": 49761167, "comment_id": 86537935, "body": "You are loading the whole with into the memory, that\u2019s the problem try to load a row and column at a time. Or you can use other language like python because matrix multiplication is really a complex job for cpu."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1523387600, "post_id": 49761167, "comment_id": 86537979, "body": "Maybe you are running out of stack space. Try using <code>malloc</code> instead of VLAs."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1523388457, "post_id": 49761167, "comment_id": 86538364, "body": "Yes, the two arrays require more than 6 Mbytes on the stack."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1523388774, "post_id": 49761167, "comment_id": 86538518, "body": "I would be interested to know what is <code>argv[1]</code> since you did not post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. In any case , it is foolish not to check <code>argc</code> or the result of <code>fopen</code> for <code>A</code> and <code>B</code>. For user input, checking everything provided is <i>de rigueur</i>."}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523389202, "post_id": 49761167, "comment_id": 86538706, "body": "where is segmentation fault?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1523389465, "post_id": 49761167, "comment_id": 86538831, "body": "&quot;didn&#39;t write function for matrix multiplication because it works&quot; Superstition has a 10 to 1 chance that the problem is in that code you considered unneeded for your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1523436960, "post_id": 49761167, "comment_id": 86556227, "body": "The question is not at all related to matrix multiplication; you should change the title.  Use a title that reflects the specific  problem - in this case &quot;<i>segmentation fault using large array</i>&quot; perhaps - rather than one that reflects the application in which you are having the problem."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523437004, "post_id": 49761167, "comment_id": 86556270, "body": "@purec : Clearly not; the data is read from a file."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9482817, "user_type": "registered", "profile_image": "https://graph.facebook.com/1989664924694773/picture?type=large", "display_name": "Malika Sadullaeva", "link": "https://stackoverflow.com/users/9482817/malika-sadullaeva"}, "edited": false, "score": 0, "creation_date": 1523427975, "post_id": 49762640, "comment_id": 86551050, "body": "Thank you) I used malloc instead of VLAs=)"}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 3, "last_activity_date": 1523393338, "creation_date": 1523393338, "answer_id": 49762640, "question_id": 49761167, "link": "https://stackoverflow.com/questions/49761167/matrix-multiplication-c-language/49762640#49762640", "title": "Matrix Multiplication C language", "body": "<p>Your two <code>float</code> variable-length arrays occupy 2*900<sup>2</sup>*4 bytes  - that is a little over 6Mb.  VLAs are typically created on the stack, the size of which will vary between systems and processes, but on a modern desktop system is typically perhaps 2 to 8 Mb.</p>\n\n<p>Creating an array that large on the stack is somewhat unreasonable, and failure unsurprising.</p>\n"}], "owner": {"reputation": 19, "user_id": 9482817, "user_type": "registered", "profile_image": "https://graph.facebook.com/1989664924694773/picture?type=large", "display_name": "Malika Sadullaeva", "link": "https://stackoverflow.com/users/9482817/malika-sadullaeva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1523393338, "creation_date": 1523386991, "last_edit_date": 1523387197, "question_id": 49761167, "link": "https://stackoverflow.com/questions/49761167/matrix-multiplication-c-language", "title": "Matrix Multiplication C language", "body": "<p>So, I have problem with matrix multiplication. I have to store the values of a matrix in a file and after that multiply them. The problem occurs when I try to multiply 900x900 matrix: Segmentation fault (core dumped), but 800x800 works perfectly). there is part of my code: create file for storing:</p>\n\n<pre><code>FILE *A, *B;\nint num = atoi(argv[1]);\nfloat a[num][num];\nfloat b[num][num];\nA = fopen(argv[2],\"r\");\nB = fopen(argv[3],\"r\");\nfor (int i = 0; i &lt; num; ++i)\n{\n    for (int j = 0; j &lt; num; ++j)\n    {\n        fscanf(A,\"%f\",&amp;a[i][j]);\n    }\n}\nfor (int i = 0; i &lt; num; ++i)\n{\n    for (int j = 0; j &lt; num; ++j)\n    {\n        fscanf(B,\"%f\",&amp;b[i][j]);\n    }\n}\n</code></pre>\n\n<p>So i didn't write function for matrix multiplication because it works</p>\n"}, {"tags": ["c", "arrays", "search", "iteration"], "comments": [{"owner": {"reputation": 1486, "user_id": 1037960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YJ9wv.jpg?s=128&g=1", "display_name": "Zimano", "link": "https://stackoverflow.com/users/1037960/zimano"}, "edited": false, "score": 2, "creation_date": 1523387153, "post_id": 49761053, "comment_id": 86537722, "body": "If you don&#39;t want to return -1, don&#39;t <code>return -1;</code>, or am I not understanding your question?"}, {"owner": {"reputation": 1140, "user_id": 2326172, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3f5b227ebadd36dac233264cfeaf4198?s=128&d=identicon&r=PG", "display_name": "Saheb", "link": "https://stackoverflow.com/users/2326172/saheb"}, "edited": false, "score": 1, "creation_date": 1523387859, "post_id": 49761053, "comment_id": 86538097, "body": "what do you want to return/do instead of returning -1?"}, {"owner": {"reputation": 9553, "user_id": 1198201, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y3RU6.png?s=128&g=1", "display_name": "stdcerr", "link": "https://stackoverflow.com/users/1198201/stdcerr"}, "edited": false, "score": 0, "creation_date": 1523389121, "post_id": 49761053, "comment_id": 86538671, "body": "Sorry, I wasn&#39;t clear.... I&#39;d want it to start over again at 0...and only return -1 if no elements are active"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1523389949, "post_id": 49761053, "comment_id": 86539077, "body": "<code>curr</code> is uninitialized in main"}, {"owner": {"reputation": 9553, "user_id": 1198201, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y3RU6.png?s=128&g=1", "display_name": "stdcerr", "link": "https://stackoverflow.com/users/1198201/stdcerr"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1523390308, "post_id": 49761053, "comment_id": 86539269, "body": "@smac89 you&#39;re right, I fixed that!"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1523390418, "creation_date": 1523390418, "answer_id": 49761998, "question_id": 49761053, "link": "https://stackoverflow.com/questions/49761053/iterative-recursive-search-of-array/49761998#49761998", "title": "Iterative/recursive search of array", "body": "<p>You need to do the reset to 0 inside of your loop, then have the loop test to see if you're back where you started.</p>\n\n<pre><code>int GetNext(int curr)\n{\n    int start = curr;\n    do {\n      ++curr; //increment index\n      if (curr==NUM){\n          curr = 0; //rollover\n      }\n      if (now[curr].actv ==1)\n          return curr;\n   } while (curr != start);\n   return -1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": false, "score": 0, "last_activity_date": 1523390428, "creation_date": 1523390428, "answer_id": 49762002, "question_id": 49761053, "link": "https://stackoverflow.com/questions/49761053/iterative-recursive-search-of-array/49762002#49762002", "title": "Iterative/recursive search of array", "body": "<p>Do something like this:</p>\n\n<pre><code>int GetNext(int curr) {\n    int start = curr;\n\n    for (curr++; curr != start; curr++) {\n        if (curr &gt;= NUM){\n            curr = 0;\n        }\n\n        if (now[curr].actv == 1) {\n            return curr;\n        }\n    }\n    return -1;\n}\n</code></pre>\n"}], "owner": {"reputation": 9553, "user_id": 1198201, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Y3RU6.png?s=128&g=1", "display_name": "stdcerr", "link": "https://stackoverflow.com/users/1198201/stdcerr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 49761998, "answer_count": 2, "score": 1, "last_activity_date": 1523398924, "creation_date": 1523386532, "last_edit_date": 1523398924, "question_id": 49761053, "link": "https://stackoverflow.com/questions/49761053/iterative-recursive-search-of-array", "title": "Iterative/recursive search of array", "body": "<p>I want to write a search function that can recursively search an array of one or multiple elements: if multiple elements are \"active\", it should iterate through them; if there's only one, just only return that one element.\nWhat I have so far is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define NUM 10\nint GetNext(int curr);\n\ntypedef struct test_s {\n    int actv;\n} test_t;\n\nstatic test_t now[NUM] = {0};\n\nint main(void)\n{\n    int curr = 0;\n    now[1].actv = 1;\n    //now[2].actv = 1;\n    //now[5].actv = 1;\n    //now[9].actv = 1;\n    while (1)\n    {\n        curr = GetNext(curr);\n        printf(\"curr %d\\n\",curr);\n        sleep(1);\n    }\n\n    return 0;\n}\n\nint GetNext(int curr)\n{\n    ++curr; //increment index\n    if (curr==NUM){\n        curr = 0; //rollover\n    }\n   if (now[curr].actv ==1)\n       return curr;\n   else{\n       for (;curr&lt;NUM;curr++)\n           if (now[curr].actv == 1)\n               return curr;\n   }\n   return -1;\n}\n</code></pre>\n\n<p>Now, I don't want it to return -1 if there one or more active elements in the array... but only return -1 if none are active, otherwise it should start over at 0 (after reaching NUM-1). How do I best go about doing that?</p>\n"}, {"tags": ["c", "sizeof"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1523386424, "post_id": 49760993, "comment_id": 86537329, "body": "This is an extension of the GNU C compiler. It would be an error in standard C."}, {"owner": {"reputation": 74, "user_id": 9626524, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HARSHIT GUPTA", "link": "https://stackoverflow.com/users/9626524/harshit-gupta"}, "edited": false, "score": 1, "creation_date": 1523386568, "post_id": 49760993, "comment_id": 86537416, "body": "sizeof(void) as 1 helps defining void* as a pointer to byte <a href=\"https://stackoverflow.com/a/3350650/9626524\">You can refer this</a>"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1523389513, "post_id": 49760993, "comment_id": 86538855, "body": "<code>void</code> is a type with no values, so <code>sizeof (void)</code> is inherently meaningless (and not allowed in standard C).  For whatever reason, GNU feels that there is some utility in assigning a size to <code>void</code>, so they define <code>sizeof (void)</code> as a non-conforming extension.  Personally, I wouldn&#39;t use it."}], "owner": {"reputation": 141, "user_id": 1976886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qeu6V.jpg?s=128&g=1", "display_name": "Harsha J K", "link": "https://stackoverflow.com/users/1976886/harsha-j-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1523386589, "answer_count": 0, "score": 0, "last_activity_date": 1523386275, "creation_date": 1523386275, "question_id": 49760993, "link": "https://stackoverflow.com/questions/49760993/size-of-a-variable-of-type-void", "closed_reason": "Duplicate", "title": "Size of a variable of type void", "body": "<p>Why is the <code>sizeof()</code> operator returning 1byte for a <code>void</code> type?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    void *v = 0;\n    int *i = NULL;\n\n    printf(\"%d\\n\", sizeof(*v));\n    printf(\"%d\\n\", sizeof(*i));\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n4\n</code></pre>\n"}, {"tags": ["c", "file", "calendar"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1523385489, "post_id": 49760762, "comment_id": 86536747, "body": "This long scroll of <code>if</code>s can be done with one simple array."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1523385564, "post_id": 49760762, "comment_id": 86536799, "body": "Please reduce this to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> using the hints given here: <a href=\"https://ericlippert.com/2014/03/21/find-a-simpler-problem/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/21/find-a-simpler-problem</a>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1523385598, "post_id": 49760762, "comment_id": 86536823, "body": "You do not close the file, but the variable falls out of scope."}, {"owner": {"reputation": 198, "user_id": 9317706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd96f97c58b306523bb8defb014daab6?s=128&d=identicon&r=PG&f=1", "display_name": "purec", "link": "https://stackoverflow.com/users/9317706/purec"}, "edited": false, "score": 0, "creation_date": 1523385699, "post_id": 49760762, "comment_id": 86536895, "body": "fclose() after you&#39;re done with writing data to file"}, {"owner": {"reputation": 11, "user_id": 9454002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91385b41549ccf77eb5d62e75f08f994?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9454002/paul"}, "edited": false, "score": 0, "creation_date": 1523392376, "post_id": 49760762, "comment_id": 86540271, "body": "I used fclose(), but now im having an issue with the yes and no while loop. It won&#39;t stop looping regardless of input."}], "answers": [{"tags": [], "owner": {"reputation": 1820, "user_id": 7209631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ad26cdac82ab360fb4fd572febf351?s=128&d=identicon&r=PG&f=1", "display_name": "Baris Yakut", "link": "https://stackoverflow.com/users/7209631/baris-yakut"}, "is_accepted": false, "score": 1, "last_activity_date": 1523431846, "creation_date": 1523431846, "answer_id": 49769048, "question_id": 49760762, "link": "https://stackoverflow.com/questions/49760762/using-a-file-to-store-a-calendar/49769048#49769048", "title": "Using a file to store a calendar", "body": "<p>You have two issues on the same line:</p>\n\n<pre><code>while(getChoice != 'y' || 'n')\n</code></pre>\n\n<ul>\n<li><p>This does not do what you think it does. Let's work on an example, where <code>getChoice = 'a'</code></p>\n\n<p>First operation <code>getChoice != 'y'</code> will evaluate to <code>TRUE</code> because <code>'a' != 'y'</code>. Remember you are getting <code>TRUE</code> out of this operation.</p>\n\n<p>Now, you are left with <code>TRUE || 'n'</code> which always be <code>TRUE</code></p>\n\n<p>So, your while condition will always be <code>TRUE</code> and this is why you are stuck in that loop.</p></li>\n</ul>\n\n<p>If you fix that with</p>\n\n<pre><code>while((getChoice != 'y') || (getChoice != 'n'))\n</code></pre>\n\n<p>You will realize your second problem with that line, which is your logic.</p>\n\n<ul>\n<li><p>Imagine if the user enters <code>'y'</code>. Then what happens?</p>\n\n<p><code>(getChoice != 'y')</code> will be <code>FALSE</code>, but <code>(getChoice != 'n')</code> will be <code>TRUE</code>, so your while condition will be <code>TRUE</code> and you will be stuck in that loop again.</p>\n\n<p>Think about other scenarios and then you will come to a conclusion that you need to use <code>&amp;&amp;</code> instead of <code>||</code>.</p></li>\n</ul>\n\n<p>So, change that line to:</p>\n\n<pre><code>while((getChoice != 'y') &amp;&amp; (getChoice != 'n'))\n</code></pre>\n\n<p>Also, as @purec said, you need to <code>fclose()</code> the file once you are done with it.</p>\n"}], "owner": {"reputation": 11, "user_id": 9454002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91385b41549ccf77eb5d62e75f08f994?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9454002/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523431846, "creation_date": 1523385398, "question_id": 49760762, "link": "https://stackoverflow.com/questions/49760762/using-a-file-to-store-a-calendar", "title": "Using a file to store a calendar", "body": "<p>I am somewhat new to C. I'm making a calendar for a full year and storing it  into a file. My main problem is that whenever I try and make a file it comes out blank. I've been trying to figure this out for a while and decided to finally ask. Can someone please show me what I am doing wrong? Thanks in advance!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define MIN_YEAR  2000\n#define MAX_YEAR  3000\n#define JANUARY   1\n#define FEBRUARY  2\n#define MARCH     3\n#define APRIL     4\n#define MAY       5\n#define JUNE      6\n#define JULY      7\n#define AUGUST    8\n#define SEPTEMBER 9\n#define OCTOBER   10\n#define NOVEMBER  11\n#define DECEMBER  12\n\nbool getContinueChoice();\nint  getYear          ();\nint  getStartingDay   (int year);\nbool isLeapYear       (int year);\nvoid makeFile         (int year, int startingDay);\nvoid makeMonthHeading (int month, int year, FILE *file);\nint  getNumberOfDays  (int month, int year);\n\nint main()\n{\n   int startingDay,\n       year;\n\n   printInstructions();\n\n   while(getContinueChoice() == true)\n   {\n      year        = getYear(); \n      startingDay = getStartingDay(year);\n      makeFile(year, startingDay);\n      printf(\"\\nCalendar made for the year %d.\\n\", year);\n      printf(\"Look for the file called file.txt to see it.\\n\");\n   }\n\n   printGoodbye();\n\n   return 0;\n}\n\nbool getContinueChoice()\n{\n   char getChoice;\n   bool choice;\n\n   scanf(\" %c\", &amp;getChoice);\n\n   while(getChoice != 'y' || 'n')\n   {\n      printf(\"\\n***************************************\\n\");\n      printf(\"* Error: That was not a (y/n) answer. *\\n\");\n      printf(\"***************************************\\n\\n\");\n      printf(\"Would you like to print a calendar? (y/n): \");\n      scanf(\" %c\", &amp;getChoice);\n   }\n\n   if(getChoice == 'y')\n   {\n      choice = true;\n   }\n   else\n   {\n      choice = false;\n   }\n\n   return choice;\n}\n\nint getYear()\n{\n   int userYear;\n\n   printf(\"\\nPlease enter a year.\\n\");\n   scanf(\"%d\", &amp;userYear);\n\n   return userYear;\n}\n\nint getStartingDay(int year)\n{\n   int firstDay;   \n\n   firstDay = (((year - 1) * 365) + ((year - 1) / 4) - ((year - 1) / 100) + \n               ((year - 1) / 400) + 1) % 7;\n\nreturn firstDay;\n}\n\nbool isLeapYear(int year)\n{\n   bool leapYear;\n\n   if((!(year % 4) &amp;&amp; (year % 100)) || !(year % 400))\n   {\n      leapYear = true;\n   }\n\n   return leapYear;\n}\n\nvoid makeFile(int year, int startingDay)\n{\n   int   daysInMonth;  \n   FILE *file;\n\n   file = fopen(\"file.txt\",\"w\");\n\n   for(int month = JANUARY; month &lt;= DECEMBER; month++)\n   {         \n      makeMonthHeading(month, year, file);\n\n      fprintf(file, \"SUN MON TUE WED THU FRI SAT\\n\");\n\n      for(int day = 1; day &lt;= 1 + startingDay * 5; day++)\n      {\n         printf(\" \");\n\n         daysInMonth = getNumberOfDays(month, year);      \n\n         for(int days = 1; days &lt;= daysInMonth; days++)\n         {\n            fprintf(file, \"%2d\", days);\n\n            if((days + startingDay) % 7 &gt; 0)\n            {\n               printf(\" \");\n            }\n            else\n            {\n               printf(\"\\n\");\n            }\n         }\n      }  \n   }\n\n   printf(\"Calendar made for the year %d\", year);\n   printf(\"\\nLook for the file called file.txt to see it.\\n\\n\");\n\n   getContinueChoice();\n\n   return;\n\n}\n\nvoid makeMonthHeading(int month, int year, FILE *file)\n{\n   if(month == JANUARY)\n   {\n      fprintf(file, \"JANUARY           %d\\n\", year);\n   }\n   else if(month == FEBRUARY)\n   {\n      fprintf(file, \"\\nFEBRUARY           %d\\n\", year);\n   }\n   else if(month == MARCH)\n   {\n      fprintf(file, \"\\nMARCH             %d\\n\", year);\n   }\n   else if(month == APRIL)\n   {\n      fprintf(file, \"\\nAPRIL             %d\\n\", year);\n   }\n   else if(month == MAY)\n   {\n      fprintf(file, \"\\nMAY               %d\\n\", year);\n   }\n   else if(month == JUNE)\n   {\n      fprintf(file, \"\\nJUNE              %d\\n\", year);\n   }\n   else if(month == JULY)\n   {\n      fprintf(file, \"\\nJULY              %d\\n\", year);\n   }\n   else if(month == AUGUST)\n   {\n      fprintf(file, \"\\nAUGUST            %d\\n\", year);\n   }\n   else if(month == SEPTEMBER)\n   {\n      fprintf(file, \"\\nSEPTEMBER         %d\\n\", year);\n   }\n   else if(month == OCTOBER)\n   {\n      fprintf(file, \"\\nOCTOBER           %d\\n\", year);\n   }\n   else if(month == NOVEMBER)\n   {\n      fprintf(file, \"\\nNOVEMBER          %d\\n\", year);\n   }\n   else if(month == DECEMBER)\n   {\n      fprintf(file, \"\\nDECEMBER          %d\\n\", year);\n   }\n\n   return;\n}\n\nint getNumberOfDays(int month, int year)\n{\n   int  monthDays;\n\n   if(month == JANUARY)\n   {\n      monthDays = 31;\n   }\n   else if(month == FEBRUARY)\n   { \n      if(isLeapYear(year) == true)\n      {\n         monthDays = 29;\n      }\n      else\n      {\n         monthDays = 28;\n      }\n   }\n   else if(month == MARCH)\n   {\n      monthDays = 31;\n   }\n   else if(month == APRIL)\n   {\n      monthDays = 30;\n   }\n   else if(month == MAY)\n   {\n      monthDays = 31;\n   }\n   else if(month == JUNE)\n   {\n      monthDays = 30;\n   }\n   else if(month == JULY)\n   {\n      monthDays = 31;\n   }\n   else if(month == AUGUST)\n   {\n      monthDays = 31;\n   }\n   else if(month == SEPTEMBER)\n   {\n      monthDays = 30;\n   }\n   else if(month == OCTOBER)\n   {\n      monthDays = 31;\n   }\n   else if(month == NOVEMBER)\n   {\n      monthDays = 30;\n   }\n   else if(month == DECEMBER)\n   {\n      monthDays = 31;\n   }\n\n   return monthDays;\n}\n</code></pre>\n"}, {"tags": ["c", "cuda", "freepascal"], "comments": [{"owner": {"reputation": 1493, "user_id": 9385966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WtdbWV1QtcQ/AAAAAAAAAAI/AAAAAAAAE_4/Eod8Vj3X1-U/photo.jpg?sz=128", "display_name": "gflegar", "link": "https://stackoverflow.com/users/9385966/gflegar"}, "edited": false, "score": 0, "creation_date": 1523392685, "post_id": 49760265, "comment_id": 86540403, "body": "We would be able to help you better if you also included the exact linking error you got."}], "answers": [{"comments": [{"owner": {"reputation": 1493, "user_id": 9385966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WtdbWV1QtcQ/AAAAAAAAAAI/AAAAAAAAE_4/Eod8Vj3X1-U/photo.jpg?sz=128", "display_name": "gflegar", "link": "https://stackoverflow.com/users/9385966/gflegar"}, "edited": false, "score": 0, "creation_date": 1523391762, "post_id": 49761459, "comment_id": 86539976, "body": "Maybe my answer and <a href=\"https://www.freepascal.org/docs-html/prog/progsu147.html#x186-1890007.1.1\" rel=\"nofollow noreferrer\">freepascal.org/docs-html/prog/progsu147.html#x186-1890007.1.&zwnj;&#8203;1</a> will be enough to figure it out."}], "tags": [], "owner": {"reputation": 1493, "user_id": 9385966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WtdbWV1QtcQ/AAAAAAAAAAI/AAAAAAAAE_4/Eod8Vj3X1-U/photo.jpg?sz=128", "display_name": "gflegar", "link": "https://stackoverflow.com/users/9385966/gflegar"}, "is_accepted": true, "score": 5, "last_activity_date": 1523390091, "last_edit_date": 1523390091, "creation_date": 1523388237, "answer_id": 49761459, "question_id": 49760265, "link": "https://stackoverflow.com/questions/49760265/run-c-function-with-cuda-calls-in-delphi-program/49761459#49761459", "title": "Run C function with CUDA calls in Delphi program", "body": "<p>I don't know anything about Delphi and FreePascal, but I do know about CUDA, C and C++, so maybe my solution will also work for you.</p>\n\n<p>I'll be demonstrating it with a simple problem:</p>\n\n<p>Content of <code>f.cu</code>:</p>\n\n<pre><code>int f() { return 42; }\n</code></pre>\n\n<p>Content of <code>main.c</code>:</p>\n\n<pre><code>extern int f();\n\nint main() {\n    return f();\n}\n</code></pre>\n\n<p>The following works:</p>\n\n<pre><code>$ gcc -c -xc f.cu # need -xc to tell gcc it's a C file\n$ gcc main.c f.o\n(no errors emitted)\n</code></pre>\n\n<p>Now when we try replacing <code>gcc</code> with <code>nvcc</code>:</p>\n\n<pre><code>$ nvcc -c f.cu\n$ gcc main.c f.o\n/tmp/ccI3tBM1.o: In function `main':\nmain.c:(.text+0xa): undefined reference to `f'\nf.o: In function `__cudaUnregisterBinaryUtil()':\ntmpxft_0000704e_00000000-5_f.cudafe1.cpp:(.text+0x52): undefined reference to `__cudaUnregisterFatBinary'\nf.o: In function `__nv_init_managed_rt_with_module(void**)':\ntmpxft_0000704e_00000000-5_f.cudafe1.cpp:(.text+0x6d): undefined reference to `__cudaInitModule'\nf.o: In function `__sti____cudaRegisterAll()':\ntmpxft_0000704e_00000000-5_f.cudafe1.cpp:(.text+0xa9): undefined reference to `__cudaRegisterFatBinary'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>The problem here is that <code>nvcc</code> adds references to some symbols from the CUDA runtime API when compiling <code>f.cu</code>, and these symbols have to be linked to the final executable. My CUDA installation is in <code>/opt/cuda</code>, so I will use that, but you have to replace it with wherever CUDA is installed on your system. So if we link <code>libcudart.so</code> when compiling the library we get:</p>\n\n<pre><code>$ nvcc -c f.cu\n$ gcc main.c f.o -L/opt/cuda/lib64 -lcudart\n/tmp/ccUeDZcb.o: In function `main':\nmain.c:(.text+0xa): undefined reference to `f'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>This looks better, no strange errors, but it's still not finding the function <code>f</code>. That's because <code>nvcc</code> is treating <code>f.cu</code> as a C++ file, so it does name mangling when creating the object file, and we have to specify that we want <code>f</code> to have C, and not C++ linkage (see more here: <a href=\"http://en.cppreference.com/w/cpp/language/language_linkage\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/language_linkage</a>).\nTo do that we have to modify <code>f.cu</code> like this:</p>\n\n<pre><code>extern \"C\" int f() { return 42; }\n</code></pre>\n\n<p>Now when we do:</p>\n\n<pre><code>$ nvcc -c f.cu\n$ gcc main.c f.o -L/opt/cuda/lib64 -lcudart\n(no errors emitted)\n</code></pre>\n\n<p>I hope you manage to modify this to work with your language.</p>\n\n<p>EDIT: I tried a bit more complicated example:</p>\n\n<pre><code>// f.cu\n#include &lt;stdio.h&gt;\n\n__global__ void kernel() {\n    printf(\"Running kernel\\n\");\n}\n\nextern \"C\" void f() {\n    kernel&lt;&lt;&lt;1, 1&gt;&gt;&gt;();\n    // make sure the kernel completes before exiting\n    cudaDeviceSynchronize();\n}\n\n// main.c\nextern void f();\n\nint main() {\n    f();\n    return 0;\n}\n</code></pre>\n\n<p>When compiling it I got:</p>\n\n<pre><code>    f.o:(.data.DW.ref.__gxx_personality_v0[DW.ref.__gxx_personality_v0]+0x0): undefined reference to `__gxx_personality_v0'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>To fix it you also need to add the standard C++ libraries to the linker flags:</p>\n\n<pre><code>$ nvcc -c f.cu\n$ gcc main.c f.o -L/opt/cuda/lib64 -lcudart -lstdc++\n$ ./a.out\nRunning kernel\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 246, "user_id": 9626236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "jo&#227;o gabriel s.f.", "link": "https://stackoverflow.com/users/9626236/jo%c3%a3o-gabriel-s-f"}, "is_accepted": false, "score": 3, "last_activity_date": 1523464431, "creation_date": 1523464431, "answer_id": 49780302, "question_id": 49760265, "link": "https://stackoverflow.com/questions/49760265/run-c-function-with-cuda-calls-in-delphi-program/49780302#49780302", "title": "Run C function with CUDA calls in Delphi program", "body": "<p>I fixed the files as @Goran Flegar explained:\nAdd <code>extern \"C\" int func(...);</code> to the .cu file. And then tried to compile/link the .cu code, but with no device calls (yet with device code), and all worked well.</p>\n\n<p>but when i add a device call (  <code>foo&lt;&lt;&lt;Nb,Nt&gt;&gt;&gt;(...)</code>  ) and compile with:</p>\n\n<pre><code>$nvcc progcuda.cu -c\n$fpc progpas.pas -ofinal.exe -Fl/usr/local/cuda/lib64\n</code></pre>\n\n<p>i get:</p>\n\n<pre><code>Free Pascal Compiler version 3.0.4 [2017/12/13] for x86_64\nCopyright (c) 1993-2017 by Florian Klaempfl and others\nTarget OS: Linux for x86-64\nCompiling prog1.pas\nLinking sum.exe\n/usr/bin/ld: aviso: link.res cont\u00e9m se\u00e7\u00f5es de sa\u00edda; voc\u00ea se esqueceu -T?\n/usr/bin/ld: sum.o: undefined reference to symbol '_Unwind_Resume@@GCC_3.0'\n//lib/x86_64-linux-gnu/libgcc_s.so.1: error adding symbols: DSO missing from command line\nprog1.pas(16,1) Error: Error while linking\nprog1.pas(16,1) Fatal: There were 1 errors compiling module, stopping\nFatal: Compilation aborted\nError: /usr/bin/ppcx64 returned an error exitcode\n</code></pre>\n\n<p>So there's still some missing libs.</p>\n\n<hr>\n\n<p>Solution:</p>\n\n<p>Found that linking the stdc++ and gcc_s lib to pascal solved the compilation problem.</p>\n\n<pre><code>unit unitpas;\n// file \"unitpas.pas\"\n{$LINK progcuda.o}\n{$LINKLIB c}\n{$LINKLIB cudart}\n{$linklib stdc++}\n{$linklib gcc_s}\n\ninterface\n\nuses ctypes;\nfunction func(x,y: cint32): cint32; cdecl; external;\n\nimplementation\n\nend.\n</code></pre>\n\n<p>Run </p>\n\n<pre><code>$nvcc progcuda.cu -c\n$fpc progpas.pas -ofinal.exe -Fl/usr/local/cuda/lib64\n</code></pre>\n\n<p>and everything works.</p>\n"}], "owner": {"reputation": 246, "user_id": 9626236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "jo&#227;o gabriel s.f.", "link": "https://stackoverflow.com/users/9626236/jo%c3%a3o-gabriel-s-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 49761459, "answer_count": 2, "score": 3, "last_activity_date": 1523464431, "creation_date": 1523383361, "last_edit_date": 1523463757, "question_id": 49760265, "link": "https://stackoverflow.com/questions/49760265/run-c-function-with-cuda-calls-in-delphi-program", "title": "Run C function with CUDA calls in Delphi program", "body": "<p>My objective is to have a Delphi( or freepascal) code, that will call the C function <strong><em>func</em></strong> like this one:</p>\n\n<p>The C/Cuda file:</p>\n\n<pre><code>/* this is the \"progcuda.cu\" file */\n#include &lt;stdio.h&gt;\n\n__global__ void foo(int *a, int *b, int *c, int n){\n    /*\n    add all the vector's element\n    */\n}\n\n\nvoid func(int *a, int *b, int *c,int n){\n    int *da,*db,*dc;\n    cudaMalloc(&amp;da, n*sizeof(int));\n    cudaMalloc(&amp;db, n*sizeof(int));\n    cudaMalloc(&amp;dc, n*sizeof(int));\n\n    cudaMemcpy(da,a,sizeof(int)*n,cudaMemcpyHostToDevice);\n    cudaMemcpy(db,b,sizeof(int)*n,cudaMemcpyHostToDevice);\n    cudaMemcpy(dc,c,sizeof(int)*n,cudaMemcpyHostToDevice);\n\n    foo&lt;&lt;&lt;1,256&gt;&gt;&gt;(da,db,dc);\n    cudaMemcpy(c,dc,sizeof(int),cudaMemcpyDeviceToHost);\n\n    /* do other stuff and call another Host and Device functions*/\n\n    return;\n}\n</code></pre>\n\n<p>The pascal main file:</p>\n\n<pre><code>// this is the \"progpas.pas\" file\nprogram progpas;\n{$mode objfpc}{$H+}\nuses unitpas;\n\nvar\n    ...\n\n\nbegin\n    ...\n    func(a, b, c, len);\n    ...\nend.\n</code></pre>\n\n<p>The pascal unit file:</p>\n\n<pre><code>// this is the \"unitpas.pas\" file\nunit unitpas;\n{$link progcuda.o}\ninterface\n\nuses ctypes;\nprocedure func(a, b, c : cpint32 , n:cint32); cdecl; external;\nprocedure foo(a, b, c : cpint32 , n:cint32);cdecl; external;\n\nimplementation\n\nend.\n</code></pre>\n\n<p>I've found this post <a href=\"https://stackoverflow.com/questions/5918042/programming-cuda-using-delphi-or-freepascal\">Programming CUDA using Delphi or FreePascal\n</a>, but it shows more a way to program CUDA in delphi.</p>\n\n<p>I don't want to program CUDA in Delphi, I want to program in CUDA in pure C/C++ code and only call that C function in delphi.</p>\n\n<p>What is the problem?\nHow can I link the .cu code to the delphi one?</p>\n\n<p>I'm using linux ubuntu 16.04 LTS, but I also have CUDA and VS in windows if necessary.</p>\n\n<p>Note: if you guys could explain in detail how to do it, would help ( new to pascal and linking files )</p>\n\n<hr>\n\n<p>I've already tried to generate the .o object file and link it in free pascal with<br>\n<code>$ nvcc progcuda.cu -c -o progcuda.o</code> then <code>$fpc progpas.pas</code><br>\nbut it fails at linking.</p>\n\n<p>Note: I've tried once to link a normal .o generated by C code to pascal code, using gcc and freepascal compiler, and it worked, but if I use nvcc instead of gcc and rename the extension to .cu ( still same code), the linking fails.</p>\n\n<hr>\n\n<p>note: new account in stack overflow, i cannot repply answers yet.</p>\n"}, {"tags": ["c", "memory-management", "operating-system", "system"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1523383296, "post_id": 49760226, "comment_id": 86535477, "body": "You&#39;ll need to benchmark to get a definitive answer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1523383404, "post_id": 49760226, "comment_id": 86535546, "body": "What OS?  What <code>[g]libc</code> version?  What you are asking is not standardized and any answer may be very platform-specific."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1523383559, "post_id": 49760226, "comment_id": 86535624, "body": "<i>I suspect that it is because of the memory sbrk is trying to release back to the system.</i>  Also, you don&#39;t need to suspect anything.  You can and probably should check this assumption with something like <code>strace</code> to see if the process actually is making those system calls."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1523385628, "post_id": 49760226, "comment_id": 86536849, "body": "<i>trying to release back to the system</i> sounds like a least suspicious reason for performance degradation. You should rather blame more obvious things such as algorithms (liner search through a list that gets longer?) or memory fragmentation."}, {"owner": {"reputation": 113, "user_id": 1032035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b984a727593c16cdc54115fd8de8edf?s=128&d=identicon&r=PG", "display_name": "wabbit", "link": "https://stackoverflow.com/users/1032035/wabbit"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1523389735, "post_id": 49760226, "comment_id": 86538980, "body": "I&#39;m using a centos 7 with glibc version 2.17. Thanks for the pointer @AndrewHenle I&#39;ll try using strace."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1523393624, "post_id": 49760226, "comment_id": 86540925, "body": "If it only does an allocation &quot;every now and then&quot;, then <code>sbrk</code> calls arecnot the cause of the slowdown. (Particularly if you never free the memory you allocate.)"}, {"owner": {"reputation": 113, "user_id": 1032035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b984a727593c16cdc54115fd8de8edf?s=128&d=identicon&r=PG", "display_name": "wabbit", "link": "https://stackoverflow.com/users/1032035/wabbit"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1523396714, "post_id": 49760226, "comment_id": 86542210, "body": "@rici good point! I&#39;ve modified text of the question to make it clear."}], "owner": {"reputation": 113, "user_id": 1032035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b984a727593c16cdc54115fd8de8edf?s=128&d=identicon&r=PG", "display_name": "wabbit", "link": "https://stackoverflow.com/users/1032035/wabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523396629, "creation_date": 1523383233, "last_edit_date": 1523396629, "question_id": 49760226, "link": "https://stackoverflow.com/questions/49760226/what-happens-if-i-disable-heap-trimming-completely", "title": "what happens if I disable heap trimming completely?", "body": "<p>I have an application which runs for a long period of time and allocates/deallocates small chunk of memory frequently. After some time I have noticed the application starts degrading in terms of performance.</p>\n\n<p>I suspect that it is because of the memory sbrk is trying to release back to the system. If I use M_TRIM_THRESHOLD and set it to -1 using a mallopt call in my application then would it help in having better performance?</p>\n\n<p>Will there be any side effects to setting this parameter? like more malloc failures?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1523383022, "post_id": 49760141, "comment_id": 86535324, "body": "Whats the output?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1523383067, "post_id": 49760141, "comment_id": 86535350, "body": "What about the warning is unclear? What do you expect the code to do? What does your C textbook say? Sidenote: you can&#39;t learn C by trial&amp;error and obscure online tutorials or youtube videos. As a beginner treat warnings like errors."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1523383101, "post_id": 49760141, "comment_id": 86535362, "body": "@Grantly: asking for the output of undefined behaviour is completely pointless."}, {"owner": {"reputation": 992, "user_id": 8587776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B1f7h.jpg?s=128&g=1", "display_name": "Digvijaysinh Gohil", "link": "https://stackoverflow.com/users/8587776/digvijaysinh-gohil"}, "edited": false, "score": 1, "creation_date": 1523383162, "post_id": 49760141, "comment_id": 86535391, "body": "Take a look at this <a href=\"https://stackoverflow.com/questions/32666219/warning-assignment-from-incompatible-pointer-type-enabled-by-default\" title=\"warning assignment from incompatible pointer type enabled by default\">stackoverflow.com/questions/32666219/&hellip;</a>"}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1523384191, "post_id": 49760141, "comment_id": 86535972, "body": "@Olaf Thanks for confirming the UB, but I just wanted to prompt the OP that what he means by &quot;works&quot;, is not true.  The output is &quot;Wo...&quot;, which is a great big hint that its not working as he expects.  And it could crash and burn harshly..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1523384937, "post_id": 49760141, "comment_id": 86536422, "body": "@Grantly: I f it was for me, UB should delete the source code automatically so the user has to write it correctly. Nayway, it would have been better to make clear from the start it is UB and any apperance the code is working is just unfortunate(!) coincidence."}], "answers": [{"comments": [{"owner": {"reputation": 1006, "user_id": 2946671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e7c2518ce2cf7ed64ce3e73464b728b?s=128&d=identicon&r=PG&f=1", "display_name": "N00byEdge", "link": "https://stackoverflow.com/users/2946671/n00byedge"}, "edited": false, "score": 0, "creation_date": 1523384760, "post_id": 49760301, "comment_id": 86536317, "body": "Or demons coming out of your nose."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 1006, "user_id": 2946671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e7c2518ce2cf7ed64ce3e73464b728b?s=128&d=identicon&r=PG&f=1", "display_name": "N00byEdge", "link": "https://stackoverflow.com/users/2946671/n00byedge"}, "edited": false, "score": 1, "creation_date": 1523384888, "post_id": 49760301, "comment_id": 86536399, "body": "@N00byEdge yes, this happens to me all the time ;)"}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1523383522, "creation_date": 1523383522, "answer_id": 49760301, "question_id": 49760141, "link": "https://stackoverflow.com/questions/49760141/int-pointer-to-access-string-elements-works-to-some-extent-but-showing-warning-c/49760301#49760301", "title": "int pointer to access string elements works to some extent but showing warning.Can you explain about this warning?", "body": "<p>Your code has undefined behaviour, the fact that it \"works\" means nothing.</p>\n\n<p>You are mixing types here and that's what the compiler is warning you. The\nproblem here is this:</p>\n\n<pre><code>ptr = name;\n</code></pre>\n\n<p>because you are assigning a <code>char</code> pointer to a <code>int</code> pointer, they are\nincompatible because <code>char</code> and <code>int</code> have different sizes and this will be a\nproblem when accessing memory through the <code>int</code> pointer.</p>\n\n<p>When you do this:</p>\n\n<pre><code>printf(\"%c\", *(ptr+i));\n</code></pre>\n\n<p>you eventually accessing memory out of bounds. <code>ptr + i</code> is pointer arithmetic,\nthat means that the compiler takes the size into account. When the compiler\ncalculates the offset for the expression <code>ptr + i</code>, it calculates the offset by doing <code>i * sizeof(int)</code>.\nDepending on the length of the string, this offset will be larger than limit of the <code>name</code> array. So it will\ndereference a pointer past the bounds of the memory, and this yields undefined behaviour.</p>\n\n<p>So the code is just simply wrong, like I said, the fact that it \"works\" means\nnothing. The code could have ended with a segfault or erasing your hard drive.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5597593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef985670eafa09eb3c2081d2b883a6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitul", "link": "https://stackoverflow.com/users/5597593/mitul"}, "is_accepted": false, "score": 0, "last_activity_date": 1523390844, "creation_date": 1523390844, "answer_id": 49762103, "question_id": 49760141, "link": "https://stackoverflow.com/questions/49760141/int-pointer-to-access-string-elements-works-to-some-extent-but-showing-warning-c/49762103#49762103", "title": "int pointer to access string elements works to some extent but showing warning.Can you explain about this warning?", "body": "<p>Try following code:</p>\n\n<pre><code>int main()\n{\n    char name[]=\"Welcome\";\n\n    char *ptr;\n\n    ptr=(char*)name;\n\n    int i=0;\n\n    while(name[i]!='\\0') {\n\n        printf(\"%c \\n\",*(ptr+i));\n\n        i++;\n\n    }\n\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9136767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BCWyfB7b84k/AAAAAAAAAAI/AAAAAAAAC0c/YHfIQo9RG7o/photo.jpg?sz=128", "display_name": "Harshit Agarwal", "link": "https://stackoverflow.com/users/9136767/harshit-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1523433453, "creation_date": 1523382905, "last_edit_date": 1523433453, "question_id": 49760141, "link": "https://stackoverflow.com/questions/49760141/int-pointer-to-access-string-elements-works-to-some-extent-but-showing-warning-c", "title": "int pointer to access string elements works to some extent but showing warning.Can you explain about this warning?", "body": "<p>I have declared string and pointer ptr of int type.<br>But to access char type through pointer we use char pointer.\nBut here it is working properly,only giving warning.\nI have written code in Codeblocks.<br></p>\n\n<blockquote>\n  <p>Warning: assignment from incompatible pointer type [-Wincompatible-pointer- types]</p>\n</blockquote>\n\n<pre><code> char name[]=\"Welcome\";\n int *ptr;\n ptr=name;\n int i=0;\n while(name[i]!='\\0') {\n printf(\"%c\",*(ptr+i));\n i++;\n }\n</code></pre>\n"}, {"tags": ["c", "mpi", "distributed-computing", "send", "barrier"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 5914033, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1018951738161448/picture?type=large", "display_name": "Cees Mandjes", "link": "https://stackoverflow.com/users/5914033/cees-mandjes"}, "edited": false, "score": 0, "creation_date": 1523495295, "post_id": 49764564, "comment_id": 86588289, "body": "Thank you, this helped me and fixed the problem!"}], "tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 1, "last_activity_date": 1523405651, "creation_date": 1523405651, "answer_id": 49764564, "question_id": 49759925, "link": "https://stackoverflow.com/questions/49759925/mpi-isend-and-ireceive-doesnt-work/49764564#49764564", "title": "MPI Isend and Ireceive doesn&#39;t work", "body": "<p>There are at least three issues with your snippet :</p>\n\n<ul>\n<li>you cannot use <code>MPI_BYTE</code> with a <code>bool</code>. The MPI standard allows you to use <code>MPI_C_BOOL</code> with a <code>_Bool</code>, an other option is to manually convert between <code>bool</code> and <code>byte</code> before transferring <code>MPI_BYTE</code></li>\n<li>you do not use <code>MPI_Isend()</code> nor <code>MPI_Recv()</code> correctly. You should have an array of requests, call <code>MPI_Waitall()</code> at the end.</li>\n<li>you can either <code>MPI_Irecv()</code> all the remote peers in a first loop, and then <code>MPI_Test()</code> to see check whether the message has arrived in an other loop (note you will need an array of <code>c_req</code>), or have a single loop that <code>MPI_Iprobe()</code> and <code>MPI_Recv()</code> right after if a message has arrived (and that required a single <code>c_req</code>.</li>\n</ul>\n\n<p>As a side note, and unless you are doing any processing in the <code>while</code> loop, you might want to consider collective operations such as <code>MPI_Alltoall()</code>.</p>\n"}], "owner": {"reputation": 195, "user_id": 5914033, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1018951738161448/picture?type=large", "display_name": "Cees Mandjes", "link": "https://stackoverflow.com/users/5914033/cees-mandjes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 49764564, "answer_count": 1, "score": 0, "last_activity_date": 1523405651, "creation_date": 1523382136, "last_edit_date": 1523383080, "question_id": 49759925, "link": "https://stackoverflow.com/questions/49759925/mpi-isend-and-ireceive-doesnt-work", "title": "MPI Isend and Ireceive doesn&#39;t work", "body": "<p>I have a problem with using Isend and Ireceive. I am trying to send a message to all other processors and after that receiving the same kind of messages from other processors which permormed the same Isend method.</p>\n\n<pre><code>void msgs(int my_rank, int num_procs){\n    int arrive_count = 1;\n    int leave_count = 0;\n    int i;\n    bool b_req = true;\n    MPI_Request req, req2;\n    //Send to all other procs\n    for(i=0; i&lt;num_procs; i++){\n        if(i != my_rank){\n            MPI_Isend(&amp;b_req,sizeof(bool),MPI_BYTE,i,1,MPI_COMM_WORLD, &amp;req);\n        }\n    }\n    bool c_req;\n    //Receive msgs from all other procs\n    while(arrive_count != num_procs){              \n        for(i=0; i&lt;num_procs; i++){\n            if(i != my_rank){     \n                MPI_Irecv(&amp;c_req,sizeof(bool),MPI_BYTE,i,1,MPI_COMM_WORLD, &amp;req2);              \n                if(c_req){\n                    c_req = false;\n                    arrive_count ++;                \n                }\n                MPI_Request_free(&amp;req2);\n            }\n        }\n    }\n    printf(\"Done from rank: %d \\n\", my_rank);    \n}\n</code></pre>\n"}]